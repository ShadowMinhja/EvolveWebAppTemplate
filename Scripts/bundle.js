(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\htn01\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js":[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js":[function(require,module,exports){
//app.controller.js
var app = require('./app.model.js');

app.controller = function () {
}

//Browserify Directives
module.exports = app.controller
},{"./app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js":[function(require,module,exports){
//app.model.js
var app = {
}

app.App = function (data) {
}

app.controller = require('./app.controller.js');

app.view = require('./views/app.view.js');

//Browserify Directives
module.exports = app;
},{"./app.controller.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.controller.js","./views/app.view.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js":[function(require,module,exports){
var m = require('../mithril.js');
var app = require('./app.model.js');
var settings = require('./app.settings.js');
var body = require('./modules/body.module.js');
var leftmenu = require('./modules/leftmenu.module.js');
var rightmenu = require('./modules/rightmenu.module.js');
var clearscreen = require('./modules/clearscreen.module.js');
var todo = require('./models/todo.model.js');

m.route.mode = "hash";

//setup routes for main content to start w/ the `/` symbol
m.route(settings.rootContainer, "/", {
    "/": body,
    "/home": app,
    "/profile": app,
    "/todo": todo
});

//Set up side menus
m.module(settings.leftMenu, leftmenu);
m.module(settings.rightMenu, rightmenu);

///////////////////////////////
//a sample module
//var dashboard = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div", controller.id);
//    }
//}

//var profile = {
//    controller: function () {
//        this.id = m.route.param("userID");
//    },
//    view: function (controller) {
//        return m("div");
//    }
//}

//define a route
//m.route($rootContainer, "/profile/johndoe", {
//    "/profile/:userID": dashboard
//});
},{"../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js","./app.settings.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js","./models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js","./modules/body.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\body.module.js","./modules/clearscreen.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js","./modules/leftmenu.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\leftmenu.module.js","./modules/rightmenu.module.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\rightmenu.module.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.settings.js":[function(require,module,exports){
var settings = {
    rootContainer: document.getElementsByClassName("container")[0],
    leftMenu: document.getElementById("left-menu"),
    rightMenu: document.getElementById("right-menu")
};
//Browserify Directives
module.exports = settings;
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.controller = function () {
    this.list = new todo.TodoList();
    this.description = m.prop("");

    this.add = function () {
        if (this.description()) {
            this.list.push(new todo.Todo({ description: this.description() }));
            this.description("");
        }
    }.bind(this);
}

//Browserify Directives
module.exports = todo.controller
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js":[function(require,module,exports){
var m = require('../../mithril.js');
var todo = {}

todo.Todo = function (data) {
    this.description = m.prop(data.description);
    this.done = m.prop(false);
}

todo.TodoList = Array;

//Browserify Directives
module.exports = todo; //<-- This export has to be before the requires for todo.controller, because todo.controller relies on todo module (circular dependency)

todo.controller = require('../controllers/todo.controller.js');

todo.view = require('../views/todo.view.js');
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../controllers/todo.controller.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\controllers\\todo.controller.js","../views/todo.view.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\body.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var body = {}

body.Body = function (data) {
}

body.controller = function () {
}

body.view = function () {
    return [
        [m(".main", [
		        m("ul.tile-grid.clearfix[id='tile-grid']", [
			        m("li.tile.icon-clima-2", [
				        m("h3", "Register"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/home'; } }, [
				        m("h3", "Dashboard"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4", [
				        m("h3", "Admin"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", { onclick: function () { window.location = '/#/todo'; } }, [
				        m("h3", "todo"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-1", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-11", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-2.tile-span-2", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ]),
			        m("li.tile.icon-clima-4.tile-span-4", [
				        m("h3"),
				        m("span.tile-temp"),
				        m(".tile-overlay", [
					        m("span.tile-close", "close")
				        ])
			        ])
		        ])
        ])]
    ];
}

//Browserify Directives
module.exports = body
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\clearscreen.module.js":[function(require,module,exports){
var clearScreen = {}
clearScreen.controller = function () {

}
clearScreen.view = function () { }

module.exports = clearScreen
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\leftmenu.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var leftmenu = {}

leftmenu.LeftMenu = function (data) {
}

leftmenu.controller = function () {
}

leftmenu.view = function () {
    return [
		m("ul", [
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-home.fa-2x"),
					m("span.nav-text", "Dashboard")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-laptop.fa-2x"),
					m("span.nav-text", "UI Components")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-list.fa-2x"),
					m("span.nav-text", "Forms")
				])
			]),
			m("li.has-subnav", [
				m("a[href='#']", [
					m("i.fa.fa-folder-open.fa-2x"),
					m("span.nav-text", "Pages")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-bar-chart-o.fa-2x"),
					m("span.nav-text", "Graphs and Statistics")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-font.fa-2x"),
					m("span.nav-text", "Typography and Icons")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-table.fa-2x"),
					m("span.nav-text", "Tables")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-map-marker.fa-2x"),
					m("span.nav-text", "Maps")
				])
			]),
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-info.fa-2x"),
					m("span.nav-text", "Documentation")
				])
			])
		]),
		m("ul.logout", [
			m("li", [
				m("a[href='#']", [
					m("i.fa.fa-power-off.fa-2x"),
					m("span.nav-text", "Logout")
				])
			])
		])
    ];
}

//Browserify Directives
module.exports = leftmenu
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\modules\\rightmenu.module.js":[function(require,module,exports){
var m = require('../../mithril.js');
var rightmenu = {}
var Layout = require('../../layout.js');
layout = new Layout();

rightmenu.rightmenu = function (data) {
}

rightmenu.controller = function () {
}

rightmenu.view = function () {
    return [
        m("nav.cbp-spmenu.cbp-spmenu-vertical.cbp-spmenu-right[id='right-menu-body']", [
		    m("h3", "Menu"),
		    m("a[href='#']", "Register"),
		    m("a[href='#']", "Administration")
        ]),
        m("div.fa.fa-cog.fa-2x.right-menu-button[id='right-menu-button']", { onclick: function () { layout.menuRightButtonClick(this, 'right-menu-body'); } }, "")
    ];
}

//Browserify Directives
module.exports = rightmenu
},{"../../layout.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js","../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\app.view.js":[function(require,module,exports){
//app.view.js
var m = require('../../mithril.js');
var app = require('../app.model.js');
var Controls = require('../../controls.js');
controls = new Controls();

app.view = function (ctrl) {
    return [
	m(".jumbotron", [
		m("h1", "ASP.NET"),
		m("p.lead", "ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS, and JavaScript."),
		m("p", [
            [m("button.btn.btn-primary.btn-lg[id='hitme']", { onclick : function () { new controls.PopupDialog().show(null, 'Are you sure you want to continue?', 'Confirmation Needed', function () { alert('You pressed Yes ^^');}, function () { alert('You pressed No TT');});} }, "Hit Me!"), "\n",
             m("button.btn.btn-primary.btn-lg[id='yes']", { onclick: function () { controls.showNotification('YES!!', 'Just a Test', 'Success', 5000, 30, 30, null); } }, "Yes"), "\n",
             m("button.btn.btn-primary.btn-lg[id='no']", { onclick: function () { controls.showNotification('NO!!', 'Just a Test', 'Error', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "No"), "\n",
             m("button.btn.btn-primary.btn-lg[id='maybe']", { onclick: function () { controls.showNotification('MAYBE SO...', 'Just a Test', 'Warning', 5000, controls.notificationRightPos, controls.notificationTopPos, null); } }, "Maybe So")]
		])
	]),
	m(".row", [
		m(".col-md-4", [
			m("h2", "Your information"),
			m("p", "This section shows how you can call ASP.NET Web API to get the user details."),
			m("p[data-bind='text: myHometown']"),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Getting started"),
			m("p", "\n                    ASP.NET Single Page Application (SPA) helps you build applications that include significant client-side interactions using HTML, CSS, and JavaScript.\n                    It's now easier than ever before to getting started writing highly interactive web applications.\n                "),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=273732']", "Learn more »")])
		]),
		m(".col-md-4", [
			m("h2", "Web Hosting"),
			m("p", "You can easily find a web hosting company that offers the right mix of features and price for your applications."),
			m("p", [m("a.btn.btn-default[href='http://go.microsoft.com/fwlink/?LinkId=301867']", "Learn more »")])
		])
	])
    ];
}

//Browserify Directives
module.exports = app.view
},{"../../controls.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../app.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\views\\todo.view.js":[function(require,module,exports){
/**
 * JSX version of the Mithril Getting Started documentation's TODO example.
 * http://lhorie.github.io/mithril/getting-started.html
 * @jsx m
 */
var m = require('../../mithril.js');
var todo = require('../models/todo.model.js');

todo.view = function (ctrl) {
    return m("html", [
        m("body", [
            m("input",  {onchange:m.withAttr('value', ctrl.description), value: ctrl.description()}),            
            m("button", {onclick:ctrl.add}, ["Add"]),
            m("table", [            
                ctrl.list.map(function (task, index) {
                    return m("tr", [
                        m("td", [
                            m("input",  {type:'checkbox', onclick: m.withAttr('checked', task.done), checked: task.done()})            
                        ]),
                        m("td", {style:{textDecoration: task.done() ? 'line-through' : 'none'}}, [task.description()])
                    ])
                })
            ])
        ])
    ])
}
//Browserify Directives
module.exports = todo.view
},{"../../mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","../models/todo.model.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\models\\todo.model.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js":[function(require,module,exports){
//***********************
//#region Kendo UI Controls
//***********************
var controls = function(){
    this.notificationRightPos = 30;
    this.notificationTopPos = 30;
    //#region Notification Messages
    this.getDialogCriticality = function (message) {
        if (message.toLowerCase().indexOf('success') > 0) {
            return "Success";
        } else if (message.toLowerCase().indexOf('error') > 0) {
            return "Error";
        } else if (message.toLowerCase().indexOf('fail') > 0) {
            return "Error";
        } else {
            return "Warning";
        }
    }
    this.showNotification = function (messageText, titleText, mode, timeOut, posRight, posTop, appendTo) {
        var appendTarget = appendTo;
        if (typeof (notificationHandle) == "undefined") {
            notificationHandle = $("#notificationSpan").kendoNotification({
                "position": { "right": posRight, "top": posTop },
                "autoHideAfter": timeOut,
                "stacking": "down",
                "templates": [
                    { "type": "error", "templateId": "errorTemplate" },
                    { "type": "warning", "templateId": "warningTemplate" },
                    { "type": "success", "templateId": "successTemplate" }
                ]
            });
        }
        var notification = $("#notificationSpan").data("kendoNotification");
        notification.show({
            message: messageText,
            title: titleText,
        }, mode.toLowerCase());
    }
    //#endregion Notification Messages
    //#region Popup Dialog
    this.PopupDialog = function (mute) {
        this.mute = mute;

        this.show = function (e, messageText, titleText, confirmCallback, cancelCallback) {
            var dfd = new $.Deferred(); //Promise object to perform actions based on user input        

            if (this.mute == false && e != null) {
                if (!e.preventDefault) {
                    e = $.event.fix(e);
                }
                e.preventDefault();
            }

            if (messageText != null) {
                $("#modal-confirmation").html("<div class=\"confirmContent\"><p class=\"modal-message\">" + messageText + "</p><button class=\"modal-confirm k-button\">Yes</button>&nbsp;<button class=\"modal-cancel k-button\">No</button></div>");
            }
            var kendoWindow = $("<div />").kendoWindow({
                width: 400,
                //height: 120,
                title: titleText,
                resizable: false,
                modal: true
            });

            if (this.mute == false || this.mute == undefined) {
                kendoWindow.data("kendoWindow")
                    .content($("#modal-confirmation").html())
                    .center().open();

                kendoWindow.find(".modal-confirm,.modal-cancel").click(function () {
                    if ($(this).hasClass("modal-confirm")) {
                        dfd.resolve(true);
                        if (e != null) {
                            e.currentTarget.click();
                        }
                        else {
                            if (confirmCallback !== undefined && confirmCallback != null) {
                                confirmCallback();
                            }
                        }
                    }
                    if ($(this).hasClass("modal-cancel")) {
                        if (cancelCallback !== undefined && cancelCallback != null) {
                            cancelCallback();
                        }
                        dfd.resolve(false);
                    }
                    kendoWindow.data("kendoWindow").close();
                });
            }
            else {
                if (confirmCallback !== undefined && confirmCallback != null) {
                    confirmCallback();
                }
                dfd.resolve(false);
            }
            return dfd.promise(); //Returns a promise
        }
    }
    //#endregion Popup Dialog Section
}
module.exports = controls;

//***********************
//#endregion 
//***********************
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js":[function(require,module,exports){
//#region Keyboard Shortcuts
    jQuery(document).bind('keypress', 'd', function (event) {
        $("#Dropdown").trigger("click");
    });
    jQuery(document).bind('keypress', 'h', function (event) {
        $("#hitme").trigger("click");
    });
    jQuery(document).bind('keypress', 'y', function (event) {
        $("#yes").trigger("click");
    });
    jQuery(document).bind('keypress', 'n', function (event) {
        $("#no").trigger("click");
    });
    jQuery(document).bind('keypress', 'm', function (event) {
        $("#maybe").trigger("click");
    });
//#endregion Keyboard Shortcuts
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js":[function(require,module,exports){
/*jslint browser: true*/
/*jslint jquery: true*/

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */

/*
 * One small change is: now keys are passed by object { keys: '...' }
 * Might be useful, when you want to pass some other data to your handler
 */
var jQuery = require('./kendo/2014.3.1119/jquery.min.js');
(function(jQuery) {

  jQuery.hotkeys = {
    version: "0.8",

    specialKeys: {
      8: "backspace",
      9: "tab",
      10: "return",
      13: "return",
      16: "shift",
      17: "ctrl",
      18: "alt",
      19: "pause",
      20: "capslock",
      27: "esc",
      32: "space",
      33: "pageup",
      34: "pagedown",
      35: "end",
      36: "home",
      37: "left",
      38: "up",
      39: "right",
      40: "down",
      45: "insert",
      46: "del",
      59: ";",
      61: "=",
      96: "0",
      97: "1",
      98: "2",
      99: "3",
      100: "4",
      101: "5",
      102: "6",
      103: "7",
      104: "8",
      105: "9",
      106: "*",
      107: "+",
      109: "-",
      110: ".",
      111: "/",
      112: "f1",
      113: "f2",
      114: "f3",
      115: "f4",
      116: "f5",
      117: "f6",
      118: "f7",
      119: "f8",
      120: "f9",
      121: "f10",
      122: "f11",
      123: "f12",
      144: "numlock",
      145: "scroll",
      173: "-",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    },

    shiftNums: {
      "`": "~",
      "1": "!",
      "2": "@",
      "3": "#",
      "4": "$",
      "5": "%",
      "6": "^",
      "7": "&",
      "8": "*",
      "9": "(",
      "0": ")",
      "-": "_",
      "=": "+",
      ";": ": ",
      "'": "\"",
      ",": "<",
      ".": ">",
      "/": "?",
      "\\": "|"
    },

    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url
    textAcceptingInputTypes: [
      "text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime",
      "datetime-local", "search", "color", "tel"],

    options: {
      filterTextInputs: true
    }
  };

  function keyHandler(handleObj) {
    if (typeof handleObj.data === "string") {
      handleObj.data = {
        keys: handleObj.data
      };
    }

    // Only care when a possible input has been specified
    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== "string") {
      return;
    }

    var origHandler = handleObj.handler,
      keys = handleObj.data.keys.toLowerCase().split(" ");

    handleObj.handler = function(event) {
      //      Don't fire in text-accepting inputs that we didn't directly bind to
      if (this !== event.target && (/textarea|select/i.test(event.target.nodeName) ||
          (jQuery.hotkeys.options.filterTextInputs &&
            jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1))) {
        return;
      }

      var special = event.type !== "keypress" && jQuery.hotkeys.specialKeys[event.which],
        character = String.fromCharCode(event.which).toLowerCase(),
        modif = "",
        possible = {};

      jQuery.each(["alt", "ctrl", "shift"], function(index, specialKey) {

        if (event[specialKey + 'Key'] && special !== specialKey) {
          modif += specialKey + '+';
        }
      });

      // metaKey is triggered off ctrlKey erronously
      if (event.metaKey && !event.ctrlKey && special !== "meta") {
        modif += "meta+";
      }

      if (event.metaKey && special !== "meta" && modif.indexOf("alt+ctrl+shift+") > -1) {
        modif = modif.replace("alt+ctrl+shift+", "hyper+");
      }

      if (special) {
        possible[modif + special] = true;
      }
      else {
        possible[modif + character] = true;
        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;

        // "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
        if (modif === "shift+") {
          possible[jQuery.hotkeys.shiftNums[character]] = true;
        }
      }

      for (var i = 0, l = keys.length; i < l; i++) {
        if (possible[keys[i]]) {
          return origHandler.apply(this, arguments);
        }
      }
    };
  }

  jQuery.each(["keydown", "keyup", "keypress"], function() {
    jQuery.event.special[this] = {
      add: keyHandler
    };
  });

})(jQuery || this.jQuery || window.jQuery);

},{"./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
; browserify_shim__define__module__export__(typeof $ != "undefined" ? $ : window.$);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js":[function(require,module,exports){
/*
* Kendo UI v2014.3.1119 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(f,define){define([],f)})(function(){!function(e,t,n){function i(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+e("+i+")+":";"+e+";o+="}function o(e,t,n){return e+="",t=t||2,n=t-e.length,n?N[t].substring(0,n)+e:e}function a(e){var t=e.css(gt.support.transitions.css+"box-shadow")||e.css("box-shadow"),n=t?t.match(Tt)||[0,0,0,0,0]:[0,0,0,0,0],i=bt.max(+n[3],+(n[4]||0));return{left:-n[1]+i,right:+n[1]+i,bottom:+n[2]+i}}function s(t,n){var i,r,o,s,l,c,d,u,h=xt.browser,p="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(d=t.parent(".k-animation-container"),u=d[0].style,d.is(":hidden")&&d.show(),i=Ct.test(u.width)||Ct.test(u.height),i||d.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=a(t),o=t[0].style.width,s=t[0].style.height,l=Ct.test(o),c=Ct.test(s),h.opera&&(r.left=r.right=r.bottom=5),i=l||c,!l&&(!n||n&&o)&&(o=t.outerWidth()),!c&&(!n||n&&s)&&(s=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:o,height:s,marginLeft:r.left*(p?1:-1),paddingLeft:r.left,paddingRight:r.right,paddingBottom:r.bottom})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&bt.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function l(e){var t=1,n=arguments.length;for(t=1;n>t;t++)c(e,arguments[t]);return e}function c(e,t){var n,i,r,o,a,s=gt.data.ObservableArray,l=gt.data.LazyObservableArray,d=gt.data.DataSource,u=gt.data.HierarchicalDataSource;for(n in t)i=t[n],r=typeof i,o=r===Pt&&null!==i?i.constructor:null,o&&o!==Array&&o!==s&&o!==l&&o!==d&&o!==u?i instanceof Date?e[n]=new Date(i.getTime()):M(i.clone)?e[n]=i.clone():(a=e[n],e[n]=typeof a===Pt?a||{}:{},c(e[n],i)):r!==Ft&&(e[n]=i);return e}function d(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function h(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function p(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[h(t)]})),gt.size(r)||(r=i),r}function f(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n}function g(e,n,i){n||(n="offset");var r=e[n]();return xt.browser.msie&&(xt.pointers||xt.msPointers)&&!i&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r}function m(e){var t={};return vt("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function v(e){return new gt.effects.Element(e)}function _(e,t,n,i){return typeof e===Et&&(M(t)&&(i=t,t=400,n=!1),M(n)&&(i=n,n=!1),typeof t===zt&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),mt({effects:{},duration:400,reverse:!1,init:wt,teardown:wt,hide:!1},e,{completeCallback:e.complete,complete:wt})}function y(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)a=e(t[s]),a.queue(function(){U.promise(a,_(n,i,r,o))});return t}function w(e,t,n,i){return t&&(t=t.split(" "),vt(t,function(t,n){e.toggleClass(n,i)})),e}function b(e){return(""+e).replace(W,"&amp;").replace(j,"&lt;").replace($,"&gt;").replace(G,"&quot;").replace(q,"&#39;")}function k(e,t){var i;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(nt,"-$1"),i=e.getAttribute("data-"+gt.ns+t),null===i?i=n:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:Dt.test(i)?i=parseFloat(i):et.test(i)&&!tt.test(i)&&(i=Function("return ("+i+")")()),i}function x(t,i){var r,o,a={};for(r in i)o=k(t,r),o!==n&&(Z.test(r)&&(o=gt.template(e("#"+o).html())),a[r]=o);return a}function C(t,n){return e.contains(t,n)?-1:1}function S(){var t=e(this);return e.inArray(t.attr("data-"+gt.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function T(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&D(e)}function D(t){return!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function A(e,t){return new A.fn.init(e,t)}var E,M,P,I,z,F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt,ft,gt=t.kendo=t.kendo||{cultures:{}},mt=e.extend,vt=e.each,_t=e.isArray,yt=e.proxy,wt=e.noop,bt=Math,kt=t.JSON||{},xt={},Ct=/%/,St=/\{(\d+)(:[^\}]+)?\}/g,Tt=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,Dt=/^(\+|-?)\d+(\.?)\d*$/,At="function",Et="string",Mt="number",Pt="object",It="null",zt="boolean",Ft="undefined",Rt={},Bt={},Lt=[].slice,Ot=t.Globalize;gt.version="2014.3.1119",i.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};i.prototype=r.prototype,n=o.fn=o.prototype=new i;for(t in e)n[t]=null!=e[t]&&e[t].constructor===Object?mt(!0,{},i.prototype[t],e[t]):e[t];return n.constructor=o,o.extend=r.extend,o},i.prototype._initOptions=function(e){this.options=l({},this.options,e)},M=gt.isFunction=function(e){return"function"==typeof e},P=function(){this._defaultPrevented=!0},I=function(){return this._defaultPrevented===!0},z=i.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l,c=this,d=typeof e===Et?[e]:e,u=typeof t===At;if(t===n){for(r in e)c.bind(r,e[r]);return c}for(r=0,o=d.length;o>r;r++)e=d[r],s=u?t:t[e],s&&(i&&(a=s,s=function(){c.unbind(e,s),a.apply(c,arguments)},s.original=a),l=c._events[e]=c._events[e]||[],l.push(s));return c},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o,a=this,s=typeof e===Et?[e]:e,l=typeof t===At;for(n=0,i=s.length;i>n;n++)e=s[n],r=l?t:t[e],r&&(o=a._events[e]=a._events[e]||[],o.unshift(r));return a},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=P,t.isDefaultPrevented=I,o=o.slice(),n=0,i=o.length;i>n;n++)o[n].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)(o[i]===t||o[i].original===t)&&o.splice(i,1);else r._events[e]=[];return r}}),F=/^\w+/,R=/\$\{([^}]*)\}/g,B=/\\\}/g,L=/__CURLY__/g,O=/\\#/g,H=/__SHARP__/g,N=["","0","00","000","0000"],E={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(e,t){var n,i,o,a=mt({},this,t),s=a.paramName,l=s.match(F)[0],c=a.useWithBlock,d="var o,e=kendo.htmlEncode;";if(M(e))return e;for(d+=c?"with("+s+"){":"",d+="o=",i=e.replace(B,"__CURLY__").replace(R,"#=e($1)#").replace(L,"}").replace(O,"__SHARP__").split("#"),o=0;i.length>o;o++)d+=r(i[o],o%2===0);d+=c?";}":";",d+="return o;",d=d.replace(H,"#");try{return n=Function(l,d),n._slotCount=Math.floor(i.length/2),n}catch(u){throw Error(gt.format("Invalid template:'{0}' Generated code:'{1}'",e,d))}}},function(){function e(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t===Et?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,c,d,u,h,p,f=n,g=a[o];if(g&&typeof g===Pt&&typeof g.toJSON===At&&(g=g.toJSON(o)),typeof r===At&&(g=r.call(a,o,g)),p=typeof g,p===Et)return e(g);if(p===Mt)return isFinite(g)?g+"":It;if(p===zt||p===It)return g+"";if(p===Pt){if(!g)return It;if(n+=i,h=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;u>s;s++)h[s]=t(s,g)||It;return d=0===h.length?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+f+"]":"["+h.join(",")+"]",n=f,d}if(r&&typeof r===Pt)for(u=r.length,s=0;u>s;s++)typeof r[s]===Et&&(c=r[s],d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));else for(c in g)Object.hasOwnProperty.call(g,c)&&(d=t(c,g),d&&h.push(e(c)+(n?": ":":")+d));return d=0===h.length?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+f+"}":"{"+h.join(",")+"}",n=f,d}}var n,i,r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==At&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof kt.stringify!==At&&(kt.stringify=function(e,o,a){var s;if(n="",i="",typeof a===Mt)for(s=0;a>s;s+=1)i+=" ";else typeof a===Et&&(i=a);if(r=o,o&&typeof o!==At&&(typeof o!==Pt||typeof o.length!==Mt))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function t(e){if(e){if(e.numberFormat)return e;if(typeof e===Et){var t=gt.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=t(e)),e||gt.cultures.current}function r(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function a(e,t,r){r=i(r);var a=r.calendars.standard,s=a.days,l=a.months;return t=a.patterns[t]||t,t.replace(d,function(t){var i,r,c;return"d"===t?r=e.getDate():"dd"===t?r=o(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=o(e.getMonth()+1):"MMM"===t?r=l.namesAbbr[e.getMonth()]:"MMMM"===t?r=l.names[e.getMonth()]:"yy"===t?r=o(e.getFullYear()%100):"yyyy"===t?r=o(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=o(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=o(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=o(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=o(e.getSeconds()):"f"===t?r=bt.floor(e.getMilliseconds()/100):"ff"===t?(r=e.getMilliseconds(),r>99&&(r=bt.floor(r/10)),r=o(r)):"fff"===t?r=o(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(i=e.getTimezoneOffset(),c=0>i,r=(""+bt.abs(i/60)).split(".")[0],i=bt.abs(i)-60*r,r=(c?"+":"-")+o(r),r+=":"+o(i)):("zz"===t||"z"===t)&&(r=e.getTimezoneOffset()/60,c=0>r,r=(""+bt.abs(r)).split(".")[0],r=(c?"+":"-")+("zz"===t?o(r):r)),r!==n?r:t.slice(1,t.length-1)})}function s(e,t,r){r=i(r);var o,a,s,c,d,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F,R,B,L,O=r.numberFormat,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,W=O.pattern[0],j=[],G=0>e,q=f,$=f,Y=-1;if(e===n)return f;if(!isFinite(e))return e;if(!t)return r.name.length?e.toLocaleString():""+e;if(d=u.exec(t)){if(t=d[1].toLowerCase(),a="c"===t,s="p"===t,(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol,W=O.pattern[G?0:1]),c=d[2],c&&(U=+c),"e"===t)return c?e.toExponential(U):e.toExponential();if(s&&(e*=100),e=l(e,U),G=0>e,e=e.split(g),w=e[0],b=e[1],G&&(w=w.substring(1)),$=w,k=w.length,k>=H)for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);if(b&&($+=V+b),"n"===t&&!G)return $;for(e=f,C=0,S=W.length;S>C;C++)T=W.charAt(C),e+="n"===T?$:"$"===T||"%"===T?o:T;return e}if(G&&(e=-e),(t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(h,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return j.push(n),y})),t=t.split(";"),G&&t[1])t=t[1],A=!0;else if(0===e){if(t=t[2]||t[0],-1==t.indexOf(v)&&-1==t.indexOf(_))return t}else t=t[0];if(F=t.indexOf("%"),R=t.indexOf("$"),s=-1!=F,a=-1!=R,s&&(e*=100),a&&"\\"===t[R-1]&&(t=t.split("\\").join(""),a=!1),(a||s)&&(O=a?O.currency:O.percent,H=O.groupSize[0],N=O[m],V=O[g],U=O.decimals,o=O.symbol),D=t.indexOf(m)>-1,D&&(t=t.replace(p,f)),E=t.indexOf(g),S=t.length,-1!=E?(b=(""+e).split("e"),b=b[1]?l(e,Math.abs(b[1])):b[0],b=b.split(g)[1]||f,P=t.lastIndexOf(_)-E,M=t.lastIndexOf(v)-E,I=P>-1,z=M>-1,C=b.length,I||z||(t=t.substring(0,E)+t.substring(E+1),S=t.length,E=-1,C=0),I&&P>M?C=P:M>P&&(z&&C>M?C=M:I&&P>C&&(C=P)),C>-1&&(e=l(e,C))):e=l(e),M=t.indexOf(v),B=P=t.indexOf(_),Y=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?P:M,M=t.lastIndexOf(v),P=t.lastIndexOf(_),L=-1==M&&-1!=P?P:-1!=M&&-1==P?M:M>P?M:P,Y==S&&(L=Y),-1!=Y){if($=(""+e).split(g),w=$[0],b=$[1]||f,k=w.length,x=b.length,G&&-1*e>=0&&(G=!1),D)if(k===H&&E-B>k)w=N+w;else if(k>H){for($=f,C=0;k>C;C++)C>0&&(k-C)%H===0&&($+=N),$+=w.charAt(C);w=$}for(e=t.substring(0,Y),G&&!A&&(e+="-"),C=Y;S>C;C++){if(T=t.charAt(C),-1==E){if(k>L-C){e+=w;break}}else if(-1!=P&&C>P&&(q=f),k>=E-C&&E-C>-1&&(e+=w,C=E),E===C){e+=(b?V:f)+b,C+=L-E+1;continue}T===_?(e+=T,q=T):T===v&&(e+=q)}if(L>=Y&&(e+=t.substring(L+1)),a||s){for($=f,C=0,S=e.length;S>C;C++)T=e.charAt(C),$+="$"===T||"%"===T?o:T;e=$}if(S=j.length)for(C=0;S>C;C++)e=e.replace(y,j[C])}return e}var l,c,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,u=/^(n|c|p|e)(\d*)$/i,h=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,p=/\,/g,f="",g=".",m=",",v="#",_="0",y="??",w="en-US",b={}.toString;gt.cultures["en-US"]={name:w,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},gt.culture=function(e){var i,o=gt.cultures;return e===n?o.current:(i=t(e)||o[w],i.calendar=i.calendars.standard,o.current=i,Ot&&!Ot.load&&r(i.numberFormat),n)},gt.findCulture=t,gt.getCulture=i,gt.culture(w),l=function(e,t){return t=t||0,e=(""+e).split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=(""+e).split("e"),e=+(e[0]+"e"+(e[1]?+e[1]-t:-t)),e.toFixed(t)},c=function(e,t,i){if(t){if("[object Date]"===b.call(e))return a(e,t,i);if(typeof e===Mt)return s(e,t,i)}return e!==n?e:""},Ot&&!Ot.load&&(c=function(t,n,i){return e.isPlainObject(i)&&(i=i.name),Ot.format(t,n,i)}),gt.format=function(e){var t=arguments;return e.replace(St,function(e,n,i){var r=t[parseInt(n,10)+1];return c(r,i?i.substring(1):"")})},gt._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},gt._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},gt._round=l,gt.toString=c}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function a(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function s(e){var t,n={};for(t in e)n[t]=a(e[t]);return n}function l(e,i,a){if(!e)return null;var l,c,d,u,f,g,m,_,y,w,b,k,x,C=function(e){for(var t=0;i[B]===e;)t++,B++;return t>0&&(B-=1),t},S=function(t){var n=v[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(L,t).match(n);return i?(i=i[0],L+=i.length,parseInt(i,10)):null},T=function(t,n){for(var i,r,o,a=0,s=t.length;s>a;a++)if(i=t[a],r=i.length,o=e.substr(L,r),n&&(o=o.toLowerCase()),o==i)return L+=r,a+1;return null},D=function(){var t=!1;return e.charAt(L)===i[B]&&(L++,t=!0),t},A=a.calendars.standard,E=null,M=null,P=null,I=null,z=null,F=null,R=null,B=0,L=0,O=!1,H=new Date,N=A.twoDigitYearMax||2029,V=H.getFullYear();for(i||(i="d"),u=A.patterns[i],u&&(i=u),i=i.split(""),d=i.length;d>B;B++)if(l=i[B],O)"'"===l?O=!1:D();else if("d"===l){if(c=C("d"),A._lowerDays||(A._lowerDays=s(A.days)),P=3>c?S(2):T(A._lowerDays[3==c?"namesAbbr":"names"],!0),null===P||t(P,1,31))return null}else if("M"===l){if(c=C("M"),A._lowerMonths||(A._lowerMonths=s(A.months)),M=3>c?S(2):T(A._lowerMonths[3==c?"namesAbbr":"names"],!0),null===M||t(M,1,12))return null;M-=1}else if("y"===l){if(c=C("y"),E=S(c),null===E)return null;2==c&&("string"==typeof N&&(N=V+parseInt(N,10)),E=V-V%100+E,E>N&&(E-=100))}else if("h"===l){if(C("h"),I=S(2),12==I&&(I=0),null===I||t(I,0,11))return null}else if("H"===l){if(C("H"),I=S(2),null===I||t(I,0,23))return null}else if("m"===l){if(C("m"),z=S(2),null===z||t(z,0,59))return null}else if("s"===l){if(C("s"),F=S(2),null===F||t(F,0,59))return null}else if("f"===l){if(c=C("f"),x=e.substr(L,c).match(v[3]),R=S(c),null!==R&&(x=x[0].length,3>x&&(R*=Math.pow(10,3-x)),c>3&&(R=parseInt((""+R).substring(0,3),10))),null===R||t(R,0,999))return null}else if("t"===l){if(c=C("t"),_=A.AM,y=A.PM,1===c&&(_=r(_),y=r(y)),f=T(y),!f&&!T(_))return null}else if("z"===l){if(g=!0,c=C("z"),"Z"===e.substr(L,1)){D();continue}if(m=e.substr(L,6).match(c>2?p:h),!m)return null;if(m=m[0].split(":"),w=m[0],b=m[1],!b&&w.length>3&&(L=w.length-2,b=w.substring(L),w=w.substring(0,L)),w=parseInt(w,10),t(w,-12,13))return null;if(c>2&&(b=parseInt(b,10),isNaN(b)||t(b,0,59)))return null}else if("'"===l)O=!0,D();else if(!D())return null;return k=null!==I||null!==z||F||null,null===E&&null===M&&null===P&&k?(E=V,M=H.getMonth(),P=H.getDate()):(null===E&&(E=V),null===P&&(P=1)),f&&12>I&&(I+=12),g?(w&&(I+=-w),b&&(z+=-b),e=new Date(Date.UTC(E,M,P,I,z,F,R))):(e=new Date(E,M,P,I,z,F,R),o(e,I)),100>E&&e.setFullYear(E),e.getDate()!==P&&g===n?null:e}function c(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),t*e}var d=/\u00A0/g,u=/[eE][\-+]?[0-9]+/,h=/[+|\-]\d{1,2}/,p=/[+|\-]\d{1,2}:?\d{2}/,f=/^\/Date\((.*?)\)\/$/,g=/[+-]\d*/,m=["G","g","d","F","D","y","m","T","t"],v={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},_={}.toString;gt.parseDate=function(e,t,n){var i,r,o,a,s;if("[object Date]"===_.call(e))return e;if(i=0,r=null,e&&0===e.indexOf("/D")&&(r=f.exec(e)))return r=r[1],s=g.exec(r.substring(1)),r=new Date(parseInt(r,10)),s&&(s=c(s[0]),r=gt.timezone.apply(r,0),r=gt.timezone.convert(r,0,-1*s)),r;if(n=gt.getCulture(n),!t){for(t=[],a=n.calendar.patterns,o=m.length;o>i;i++)t[i]=a[m[i]];i=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(t=_t(t)?t:[t],o=t.length;o>i;i++)if(r=l(e,t[i],n))return r;return r},gt.parseInt=function(e,t){var n=gt.parseFloat(e,t);return n&&(n=0|n),n},gt.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===Mt)return e;e=""+e,t=gt.getCulture(t);var i,r,o=t.numberFormat,a=o.percent,s=o.currency,l=s.symbol,c=a.symbol,h=e.indexOf("-");return u.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(l)>-1||n&&n.toLowerCase().indexOf("c")>-1?(o=s,i=o.pattern[0].replace("$",l).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),h=!0)):e.indexOf(c)>-1&&(r=!0,o=a,l=c),e=e.replace("-","").replace(l,"").replace(d," ").split(o[","].replace(d," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)},Ot&&!Ot.load&&(gt.parseDate=function(e,t,n){return"[object Date]"===_.call(e)?e:Ot.parseDate(e,t,n)},gt.parseFloat=function(t,i){return typeof t===Mt?t:t===n||null===t?null:(e.isPlainObject(i)&&(i=i.name),t=Ot.parseFloat(t,i),isNaN(t)?null:t)})}(),function(){var i,r,o,a,s,l,c;xt._scrollbar=n,xt.scrollbar=function(e){if(isNaN(xt._scrollbar)||e){var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),xt._scrollbar=t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t}return xt._scrollbar},xt.isRtl=function(t){return e(t).closest(".k-rtl").length>0},i=document.createElement("table");try{i.innerHTML="<tr><td></td></tr>",xt.tbodyInnerHtml=!0}catch(u){xt.tbodyInnerHtml=!1}xt.touch="ontouchstart"in t,xt.msPointers=t.MSPointerEvent,xt.pointers=t.PointerEvent,r=xt.transitions=!1,o=xt.transforms=!1,a="HTMLElement"in t?HTMLElement.prototype:[],xt.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,vt(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof i.style[t+"Transition"]===Et;return a||typeof i.style[t+"Transform"]===Et?(e=t.toLowerCase(),o={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&(r=o,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1):n}),i=null,xt.transforms=o,xt.transitions=r,xt.devicePixelRatio=t.devicePixelRatio===n?1:t.devicePixelRatio;try{xt.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,xt.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(u){xt.screenWidth=t.screen.availWidth,xt.screenHeight=t.screen.availHeight}xt.detectOS=function(e){var n,i,r=!1,o=[],a=!/mobile safari/i.test(e),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},l={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},u={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(o=e.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;r={},r.device=i,r.tablet=d(i,c,!1),r.browser=d(e,u,"default"),r.name=d(i,l),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),n=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+n+Array(3-(3>n.length?n.length:2)).join("0"),r.cordova=typeof t.PhoneGap!==Ft||typeof t.cordova!==Ft,r.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||r.cordova,r.android&&(1.5>xt.devicePixelRatio&&400>r.flatVersion||a)&&(xt.screenWidth>800||xt.screenHeight>800)&&(r.tablet=i);break}return r},s=xt.mobileOS=xt.detectOS(navigator.userAgent),xt.wpDevicePixelRatio=s.wp?screen.width/320:0,xt.kineticScrollNeeded=s&&(xt.touch||xt.msPointers||xt.pointers),xt.hasNativeScrolling=!1,(s.ios||s.android&&s.majorVersion>2||s.wp)&&(xt.hasNativeScrolling=s),xt.mouseAndTouchPresent=xt.touch&&!(xt.mobileOS.ios||xt.mobileOS.android),xt.detectBrowser=function(e){var t,n=!1,i=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){n={},n[t]=!0,n[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},xt.browser=xt.detectBrowser(navigator.userAgent),xt.zoomLevel=function(){try{return xt.touch?document.documentElement.clientWidth/t.innerWidth:xt.browser.msie&&xt.browser.version>=10?(top||t).document.documentElement.offsetWidth/(top||t).innerWidth:1}catch(e){return 1}},xt.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(xt.browser.msie&&8>xt.browser.version),function(t){var n="",i=e(document.documentElement),r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&(n="k-"+n+" k-"+n+r),xt.mobileOS&&(n+=" k-mobile"),i.addClass(n)}(xt.browser),xt.eventCapture=document.documentElement.addEventListener,l=document.createElement("input"),xt.placeholder="placeholder"in l,xt.propertyChangeEvent="onpropertychange"in l,xt.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],n=t.length,i="test",r={},o=0;n>o;o++)e=t[o],l.setAttribute("type",e),l.value=i,r[e.replace("-","")]="text"!==l.type&&l.value!==i;return r}(),l.style.cssText="float:left;",xt.cssFloat=!!l.style.cssFloat,l=null,xt.stableSort=function(){var e,t=513,n=[{index:0,field:"b"}];for(e=1;t>e;e++)n.push({index:e,field:"a"});return n.sort(function(e,t){return e.field>t.field?1:t.field>e.field?-1:0}),1===n[0].index}(),xt.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||a.matches||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},xt.pushState=t.history&&t.history.pushState,c=document.documentMode,xt.hashChange="onhashchange"in t&&!(xt.browser.msie&&(!c||8>=c))}(),V={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},U={},e.extend(U,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),U.promiseShim=U.promise,"kendoAnimate"in e.fn||mt(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return y(this,e,t,n,i)},kendoAddClass:function(e,t){return gt.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return gt.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return gt.toggleClass(this,e,t,n)}}),W=/&/g,j=/</g,G=/"/g,q=/'/g,$=/>/g,Y=function(e){return e.target},xt.touch&&(Y=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},vt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),xt.touch?xt.mobileOS?(xt.mousedown="touchstart",xt.mouseup="touchend",xt.mousemove="touchmove",xt.mousecancel="touchcancel",xt.click="touchend",xt.resize="orientationchange"):(xt.mousedown="mousedown touchstart",xt.mouseup="mouseup touchend",xt.mousemove="mousemove touchmove",xt.mousecancel="mouseleave touchcancel",xt.click="click",xt.resize="resize"):xt.pointers?(xt.mousemove="pointermove",xt.mousedown="pointerdown",xt.mouseup="pointerup",xt.mousecancel="pointercancel",xt.click="pointerup",xt.resize="orientationchange resize"):xt.msPointers?(xt.mousemove="MSPointerMove",xt.mousedown="MSPointerDown",xt.mouseup="MSPointerUp",xt.mousecancel="MSPointerCancel",xt.click="MSPointerUp",xt.resize="orientationchange resize"):(xt.mousemove="mousemove",xt.mousedown="mousedown",xt.mouseup="mouseup",xt.mousecancel="mouseleave",xt.click="click",xt.resize="resize"),K=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)o=e[i],""!==o&&(n=o.indexOf("["),0!==n&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},Q=/^([a-z]+:)?\/\//i,mt(gt,{ui:gt.ui||{},fx:gt.fx||v,effects:gt.effects||U,mobile:gt.mobile||{},data:gt.data||{},dataviz:gt.dataviz||{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:gt.support||xt,animate:gt.animate||y,ns:"",attr:function(e){return"data-"+gt.ns+e},getShadows:a,wrap:s,deepExtend:l,getComputedStyles:p,size:f,toCamelCase:h,toHyphens:u,getOffset:gt.getOffset||g,parseEffects:gt.parseEffects||m,toggleClass:gt.toggleClass||w,directions:gt.directions||V,Observable:z,Class:i,Template:E,template:yt(E.compile,E),render:yt(E.render,E),stringify:yt(kt.stringify,kt),eventTarget:Y,htmlEncode:b,isLocalUrl:function(e){return e&&!Q.test(e)},expr:function(e,t,n){return e=e||"",typeof t==Et&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?K(e.split("."),n):n+e},getter:function(e,t){var n=e+t;return Rt[n]=Rt[n]||Function("d","return "+gt.expr(e,t))},setter:function(e){return Bt[e]=Bt[e]||Function("d,value",gt.expr(e)+"=value")},accessor:function(e){return{get:gt.getter(e),set:gt.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=16*bt.random()|0,(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+gt.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t,n=e.split(" ");if(n)for(t=0;n.length>t;t++)"view"!=n[t]&&(n[t]=n[t].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return n.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var i=t.console;!gt.suppressLog&&n!==i&&i.log&&i.log(e)}}),X=z.extend({init:function(e,t){var n,i=this;i.element=gt.jQuery(e).handler(i),i.angular("init",t),z.fn.init.call(i),n=t?t.dataSource:null,n&&(t=mt({},t,{dataSource:{}})),t=i.options=mt(!0,{},i.options,t),n&&(t.dataSource=n),i.element.attr(gt.attr("role"))||i.element.attr(gt.attr("role"),(t.name||"").toLowerCase()),i.element.data("kendo"+t.prefix+t.name,i),i.bind(i.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||!n||t.width!==n.width||t.height!==n.height)&&(this._size=t,this._resize(t),this.trigger("resize",t))},getSize:function(){return gt.dimensions(this.element)},size:function(e){return e?(this.setSize(e),n):this.getSize()},setSize:e.noop,_resize:e.noop,destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()},angular:function(){}}),J=X.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var n=this;n.angular(t,function(){return{elements:n.items(),data:e.map(n.dataItems(),function(e){return{dataItem:e}})}})}}),gt.dimensions=function(e,t){var n=e[0];return t&&e.css(t),{width:n.offsetWidth,height:n.offsetHeight}},gt.notify=wt,Z=/template$/i,et=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,tt=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,nt=/([A-Z])/g,gt.initWidget=function(i,r,o){var a,s,l,c,d,u,h,p,f,g,m,v,_;if(o?o.roles&&(o=o.roles):o=gt.ui.roles,i=i.nodeType?i:i[0],u=i.getAttribute("data-"+gt.ns+"role")){f=-1===u.indexOf("."),l=f?o[u]:gt.getter(u)(t),m=e(i).data(),v=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"",g=f?RegExp("^kendo.*"+u+"$","i"):RegExp("^"+v+"$","i");
for(_ in m)if(_.match(g)){if(_!==v)return m[_];a=m[_]}if(l){for(p=k(i,"dataSource"),r=e.extend({},x(i,l.fn.options),r),p&&(r.dataSource=typeof p===Et?gt.getter(p)(t):p),c=0,d=l.fn.events.length;d>c;c++)s=l.fn.events[c],h=k(i,s),h!==n&&(r[s]=gt.getter(h)(t));return a?e.isEmptyObject(r)||a.setOptions(r):a=new l(i,r),a}}},gt.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[gt.ui,gt.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return mt.apply(null,[{}].concat(i.reverse()))},gt.init=function(t){var n=gt.rolesFromNamespaces(Lt.call(arguments,1));e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){gt.initWidget(this,{},n)})},gt.destroy=function(t){e(t).find("[data-"+gt.ns+"role]").addBack().each(function(){var t,n=e(this).data();for(t in n)0===t.indexOf("kendo")&&typeof n[t].destroy===At&&n[t].destroy()})},gt.resize=function(t,n){var i,r=e(t).find("[data-"+gt.ns+"role]").addBack().filter(S);r.length&&(i=e.makeArray(r),i.sort(C),e.each(i,function(){var t=gt.widgetInstance(e(this));t&&t.resize(n)}))},gt.parseOptions=x,mt(gt.ui,{Widget:X,DataBoundWidget:J,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=gt.support,c=l.browser;n?s.length||(i=l.isRtl(t),r=i?"right":"left",a=t.scrollLeft(),o=c.webkit&&i?t[0].scrollWidth-t.width()-2*a:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;i=i||gt.ui,r=r||"",i[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===Et?(r=Lt.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(gt.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(t=l[i],typeof t!==At)throw Error(gt.format("Cannot find method '{0}' of {1}",i,a));return s=t.apply(l,r),s!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[a].widget=t,e.fn[o]=function(){return this.data(a)}}}),it={bind:function(){return this},nullObject:!0,options:{}},rt=X.extend({init:function(e,t){X.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(gt.roleSelector("view splitview modalview drawer"));return gt.widgetInstance(e,gt.mobile.ui)||it},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(gt.roleSelector("view layout modalview drawer splitview"));return gt.widgetInstance(e.eq(0),gt.mobile.ui)||it}}),mt(gt.mobile,{init:function(e){gt.init(e,gt.mobile.ui,gt.ui,gt.dataviz.ui)},appLevelNativeScrolling:function(){return gt.mobile.application&&gt.mobile.application.options&&gt.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:rt,DataBoundWidget:J.extend(rt.prototype),roles:{},plugin:function(e){gt.ui.plugin(e,gt.mobile.ui,"Mobile")}}}),l(gt.dataviz,{init:function(e){gt.init(e,gt.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){gt.ui.plugin(e,gt.dataviz.ui)}},roles:{}}),gt.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),xt.kineticScrollNeeded&&gt.mobile.ui.Scroller&&!i.data("kendoMobileScroller")?(i.kendoMobileScroller(n),i.data("kendoMobileScroller")):!1})[0]},gt.preventDefault=function(e){e.preventDefault()},gt.widgetInstance=function(e,n){var i,r,o,a,s=e.data(gt.ns+"role"),l=[];if(s){if("content"===s&&(s="scroller"),n)if(n[0])for(i=0,r=n.length;r>i;i++)l.push(n[i].roles[s]);else l.push(n.roles[s]);else l=[gt.ui.roles[s],gt.dataviz.ui.roles[s],gt.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(l=[gt.getter(s)(t)]),i=0,r=l.length;r>i;i++)if(o=l[i],o&&(a=e.data("kendo"+o.fn.options.prefix+o.fn.options.name)))return a}},gt.onResize=function(n){var i=n;return xt.mobileOS.android&&(i=function(){setTimeout(n,600)}),e(t).on(xt.resize,i),i},gt.unbindResize=function(n){e(t).off(xt.resize,n)},gt.attrValue=function(e,t){return e.data(gt.ns+t)},gt.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var n=e.attr(t,"tabindex");return T(t,!isNaN(n)&&n>-1)}}),ot=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],at="label, input, [data-rel=external]",st={setupMouseMute:function(){var t,n=0,i=ot.length,r=document.documentElement;if(!st.mouseTrap&&xt.eventCapture)for(st.mouseTrap=!0,st.bustClick=!1,st.captureMouse=!1,t=function(t){st.captureMouse&&("click"===t.type?st.bustClick&&!e(t.target).is(at)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(ot[n],t,!0)},muteMouse:function(e){st.captureMouse=!0,e.data.bustClick&&(st.bustClick=!0),clearTimeout(st.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(st.mouseTrapTimeoutID),st.mouseTrapTimeoutID=setTimeout(function(){st.captureMouse=!1,st.bustClick=!1},400)}},lt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},xt.touch&&(xt.mobileOS.ios||xt.mobileOS.android)?lt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:xt.pointers?lt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:xt.msPointers&&(lt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!xt.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==r&&!e.contains(r,o))&&(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),ct=function(e){return lt[e]||e},dt=/([^ ]+)/g,gt.applyEventMap=function(e,t){return e=e.replace(dt,ct),t&&(e=e.replace(dt,"$1."+t)),e},ut=e.fn.on,mt(!0,A,e),A.fn=A.prototype=new e,A.fn.constructor=A,A.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof A)&&(n=A(n)),e.fn.init.call(this,t,n,ht)},A.fn.init.prototype=A.fn,ht=A(document),mt(A.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||gt.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?ut.call(a,arguments[0]):(e=a,t=Lt.call(arguments),typeof t[t.length-1]===Ft&&t.pop(),n=t[t.length-1],i=gt.applyEventMap(t[0],s),xt.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(st.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,ut.call(this,{touchstart:st.muteMouse,touchend:st.unMuteMouse},r,{bustClick:o})),typeof n===Et&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,ut.apply(a,t),a)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),gt.jQuery=A,gt.eventMap=lt,gt.timezone=function(){function e(e,t){var n,i,r,o=t[3],a=t[4],s=t[5],l=t[8];return l||(t[8]=l={}),l[e]?l[e]:(isNaN(a)?0===a.indexOf("last")?(n=new Date(Date.UTC(e,d[o]+1,1,s[0]-24,s[1],s[2],0)),i=u[a.substr(4,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r-(i>r?7:0))):a.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,d[o],a.substr(5),s[0],s[1],s[2],0)),i=u[a.substr(0,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r+(r>i?7:0))):n=new Date(Date.UTC(e,d[o],a,s[0],s[1],s[2],0)),l[e]=n)}function t(t,n,i){var r,o,a,s;return(n=n[i])?(a=new Date(t).getUTCFullYear(),n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)}),n.push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=+e(a,t)),"number"!=typeof n&&(n=+e(a,n)),t-n}),s=n[jQuery.inArray(t,n)-1]||n[n.length-1],isNaN(s)?s:null):(r=i.split(":"),o=0,r.length>1&&(o=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function n(e,t,n){var i,r,o,a=t[n];if("string"==typeof a&&(a=t[a]),!a)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=a.length-1;i>=0&&(r=a[i][3],!(r&&e>r));i--);if(o=a[i+1],!o)throw Error('Timezone "'+n+'" not found on '+e+".");return o}function i(e,i,r,o){typeof e!=Mt&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=n(e,i,o);return{zone:a,rule:t(e,r,a[1])}}function r(e,t){var n,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,gt.parseFloat(o?r[0]-o[6]:r[0]))}function o(e,t){var n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&+o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a}function a(e,t,n){var i,r;return typeof t==Et&&(t=this.offset(e,t)),typeof n==Et&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-n)),r=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))}function s(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}function c(e){return this.apply(new Date(e),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:r,convert:a,apply:s,remove:l,abbr:o,toLocalDate:c}}(),gt.date=function(){function e(e,t){return 0===t&&23===e.getHours()?(e.setHours(e.getHours()+2),!0):!1}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e,n,i){return e=new Date(e),t(e,n,i),e}function i(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=i(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t}function o(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function a(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function s(e){return e.getTime()-o(e)}function l(e,t,n){var i,r=s(t),o=s(n);return e&&r!=o?(t>=n&&(n+=m),i=s(e),r>i&&(i+=m),r>o&&(o+=m),i>=r&&o>=i):!0}function c(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=m),i=e.getTime(),i>=r&&o>=i}function d(t,n){var i=t.getHours();return t=new Date(t),u(t,n*m),e(t,i),t}function u(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*g))}function h(){return o(new Date)}function p(e){return o(e).getTime()==h().getTime()}function f(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var g=6e4,m=864e5;return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:o,isInDateRange:c,isInTimeRange:l,isToday:p,nextDay:function(e){return d(e,1)},previousDay:function(e){return d(e,-1)},toUtcTime:a,MS_PER_DAY:m,MS_PER_HOUR:60*g,MS_PER_MINUTE:g,setTime:u,addDays:d,today:h,toInvariantTime:f,firstDayOfMonth:i,lastDayOfMonth:r,getMilliseconds:s}}(),gt.stripWhitespace=function(e){var t,n,i;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(n=0;e.childNodes.length>n;n++)i=e.childNodes[n],3!=i.nodeType||/\S/.test(i.nodeValue)||(e.removeChild(i),n--),1==i.nodeType&&gt.stripWhitespace(i)},pt=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},gt.animationFrame=function(e){pt.call(t,e)},ft=[],gt.queueAnimation=function(e){ft[ft.length]=e,1===ft.length&&gt.runNextAnimation()},gt.runNextAnimation=function(){gt.animationFrame(function(){ft[0]&&(ft.shift()(),ft[0]&&gt.runNextAnimation())})},gt.parseQueryStringParams=function(e){for(var t=e.split("?")[1]||"",n={},i=t.split(/&|=/),r=i.length,o=0;r>o;o+=2)""!==i[o]&&(n[decodeURIComponent(i[o])]=decodeURIComponent(i[o+1]));return n},gt.elementUnderCursor=function(e){return document.elementFromPoint(e.x.client,e.y.client)},gt.wheelDeltaY=function(e){var t,i=e.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===n||r)&&(t=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(t=10*-i.detail),t},gt.throttle=function(e,t){var i,r=0;return!t||0>=t?e:function(){function o(){e.apply(a,l),r=+new Date}var a=this,s=+new Date-r,l=arguments;return r?(i&&clearTimeout(i),s>t?o():i=setTimeout(o,t-s),n):o()}},gt.caret=function(t,i,r){var o,a,s,l,c=i!==n;if(r===n&&(r=i),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==n?c?(t.focus(),t.setSelectionRange(i,r)):i=[t.selectionStart,t.selectionEnd]:document.selection&&(e(t).is(":visible")&&t.focus(),o=t.createTextRange(),c?(o.collapse(!0),o.moveStart("character",i),o.moveEnd("character",r-i),o.select()):(a=o.duplicate(),o.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",o),s=a.text.length,l=s+o.text.length,i=[s,l]))}catch(d){i=[]}return i}},gt.compileMobileDirective=function(e,n){var i=t.angular;return e.attr("data-"+gt.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),i.element(e).injector().invoke(["$compile",function(t){var r=i.element(e).scope();n&&n(r),t(e)(r),r.$digest()}]),gt.widgetInstance(e,gt.mobile.ui)},function(){function n(t,n,i){var r=e("<form>").attr({action:i,method:"POST"}),o=t.split(";base64,");e("<input>").attr({value:o[0].replace("data:",""),name:"contentType",type:"hidden"}).appendTo(r),e("<input>").attr({value:o[1],name:"base64",type:"hidden"}).appendTo(r),e("<input>").attr({value:n,name:"fileName",type:"hidden"}).appendTo(r),r.appendTo("body").submit().remove()}function i(e,t){var n,i,r,o,a,s=e;if("string"==typeof e){for(n=e.split(";base64,"),i=n[0],r=atob(n[1]),o=new Uint8Array(r.length),a=0;r.length>a;a++)o[a]=r.charCodeAt(a);s=new Blob([o.buffer],{type:i})}navigator.msSaveBlob(s,t)}function r(e,n){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),o.download=n,o.href=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}var o=document.createElement("a"),a="download"in o;gt.saveAs=function(e){var t=n;e.forceProxy||(a?t=r:navigator.msSaveBlob&&(t=i)),t(e.dataURI,e.fileName,e.proxyURL)}}()}(jQuery,window),function(e,t){function n(e,t){if(!t)return e;e+"/"===t&&(e=t);var n=RegExp("^"+t,"i");return n.test(e)||(e=t+"/"+e),p.protocol+"//"+(p.host+"/"+e).replace(/\/\/+/g,"/")}function i(e){return e?"#!":"#"}function r(e){var t=p.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function o(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function a(e){return e.replace(/^(#)?/,"#")}function s(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,c="change",d="back",u="same",h=l.support,p=window.location,f=window.history,g=50,m=l.support.browser.msie,v=/^#*/,_=window.document,y=l.Class.extend({back:function(){m?setTimeout(function(){f.back()}):f.back()},forward:function(){m?setTimeout(function(){f.forward()}):f.forward()},length:function(){return f.length},replaceLocation:function(e){p.replace(e)}}),w=y.extend({init:function(e){this.root=e},navigate:function(e){f.pushState({},_.title,n(e,this.root))},replace:function(e){f.replaceState({},_.title,n(e,this.root))},normalize:function(e){return o(this.root,e)},current:function(){var e=p.pathname;return p.search&&(e+=p.search),o(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,o=e.root,a=p.pathname,s=r(i(e.hashBang));o===a+"/"&&(t=o),o===a&&s&&(t=n(s.replace(v,""),o)),t&&f.pushState({},_.title,t)}}),b=y.extend({init:function(e){this._id=l.guid(),this.prefix=i(e),this.fix=e?s:a},navigate:function(e){p.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){h.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,g)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=p.pathname,n=e.root;return e.pushState&&n!==t?(this.replaceLocation(n+this.prefix+o(n,t)),!0):!1}}),k=l.Observable.extend({start:function(t){if(t=t||{},this.bind([c,d,u],t),!this._started){this._started=!0,t.root=t.root||"/";var n,i=this.createAdapter(t);i.normalizeCurrent(t)||(n=i.current(),e.extend(this,{adapter:i,root:t.root,historyLength:i.length(),current:n,locations:[n]}),i.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return h.pushState&&e.pushState?new w(e.root):new b(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind(c),this._started=!1)},change:function(e){this.bind(c,e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,n){return"#:back"===e?(this.backCalled=!0,this.adapter.back(),t):(this._navigate(e,n,function(t){t.navigate(e),this.locations.push(this.current)}),t)},_navigate:function(e,n,i){var r=this.adapter;return e=r.normalize(e),this.current===e||this.current===decodeURIComponent(e)?(this.trigger(u),t):((n||!this.trigger(c,{url:e}))&&(this.current=e,i.call(this,r),this.historyLength=r.length()),t)},_checkUrl:function(){var e=this.adapter,n=e.current(),i=e.length(),r=this.historyLength===i,o=n===this.locations[this.locations.length-2]&&r,a=this.backCalled,s=this.current;return null===n||this.current===n||this.current===decodeURIComponent(n)?!0:(this.historyLength=i,this.backCalled=!1,this.current=n,o&&this.trigger("back",{url:s,to:n})?(e.forward(),this.current=s,t):this.trigger(c,{url:n,backButtonPressed:!a})?(o?e.forward():(e.back(),this.historyLength--),this.current=s,t):(o?this.locations.pop():this.locations.push(n),t))}});l.History=k,l.History.HistoryAdapter=y,l.History.HashAdapter=b,l.History.PushStateAdapter=w,l.absoluteURL=n,l.history=new k}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t,n){return RegExp("^"+t.replace(f,"\\$&").replace(u,"(?:$1)?").replace(h,e).replace(p,"(.*?)")+"$",n?"i":"")}function n(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,r=i.history,o=i.Observable,a="init",s="routeMissing",l="change",c="back",d="same",u=/\((.*?)\)/g,h=/(\(\?)?:\w+/g,p=/\*\w+/g,f=/[\-{}\[\]+?.,\\\^$|#\s]/g,g=i.Class.extend({init:function(e,n,i){e instanceof RegExp||(e=t(e,i)),this.route=e,this._callback=n},callback:function(e){var t,r,o=0,a=i.parseQueryStringParams(e);for(e=n(e),t=this.route.exec(e).slice(1),r=t.length;r>o;o++)void 0!==t[o]&&(t[o]=decodeURIComponent(t[o]));t.push(a),this._callback.apply(null,t)},worksWith:function(e){return this.route.test(n(e))?(this.callback(e),!0):!1}}),m=o.extend({init:function(e){e||(e={}),o.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=e.ignoreCase!==!1,this.bind([a,s,l,d],e)},destroy:function(){r.unbind(l,this._urlChangedProxy),r.unbind(d,this._sameProxy),r.unbind(c,this._backProxy),this.unbind()},start:function(){var e,t=this,n=function(){t._same()},i=function(e){t._back(e)},o=function(e){t._urlChanged(e)};r.start({same:n,change:o,back:i,pushState:t.pushState,hashBang:t.hashBang,root:t.root}),e={url:r.current||"/",preventDefault:$.noop},t.trigger(a,e)||t._urlChanged(e),this._urlChangedProxy=o,this._backProxy=i},route:function(e,t){this.routes.push(new g(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger(c,{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger(d)},_urlChanged:function(e){var t,n,r,o,a=e.url;if(a||(a="/"),this.trigger(l,{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:e.backButtonPressed}))return void e.preventDefault();for(t=0,n=this.routes,o=n.length;o>t;t++)if(r=n[t],r.worksWith(a))return;this.trigger(s,{url:a,params:i.parseQueryStringParams(a),backButtonPressed:e.backButtonPressed})&&e.preventDefault()}});i.Router=m}(),function(e,t){function n(r,s){var l,c,d,u,h,p,f,g,m=[],v=r.logic||"and",_=r.filters;for(l=0,c=_.length;c>l;l++)r=_[l],d=r.field,f=r.value,p=r.operator,r.filters?r=n(r,s):(g=r.ignoreCase,d=d.replace(/\./g,"/"),r=o[p],s&&(r=a[p]),r&&f!==t&&(u=e.type(f),"string"===u?(h="'{1}'",f=f.replace(/'/g,"''"),g===!0&&(d="tolower("+d+")")):h="date"===u?s?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===p&&(s?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=i.format(h,r,f,d))),m.push(r);return r=m.join(" "+v+" "),m.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a=r({},o,{contains:"contains"}),s={pageSize:e.noop,page:e.noop,filter:function(e,t,i){t&&(e.$filter=n(t,i))},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var r,o,a,c;if(e=e||{},t=t||"read",c=(this.options||l)[t],c=c?c.dataType:"json","read"===t){r={$inlinecount:"allpages"},"json"!=c&&(r.$format="json");for(a in e)s[a]?s[a](r,e[a],n):r[a]=e[a]}else{if("json"!==c)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)o=e[a],"number"==typeof o&&(e[a]=o+"");r=i.stringify(e)}}return r}}}}),r(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(e){return e.value?e.value:(delete e["odata.metadata"],[e])},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n}}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.isArray,r=e.isPlainObject,o=e.map,a=e.each,s=e.extend,l=n.getter,c=n.Class,d=c.extend({init:function(e){var t,l,c,d,u=this,h=e.total,p=e.model,f=e.parse,g=e.errors,m=e.serialize,v=e.data;p&&(r(p)&&(t=e.modelBase||n.data.Model,p.fields&&a(p.fields,function(e,t){t=r(t)&&t.field?s(t,{field:u.getter(t.field)}):{field:u.getter(t)},p.fields[e]=t}),l=p.id,l&&(c={},c[u.xpathToMember(l,!0)]={field:u.getter(l)},p.fields=s(c,p.fields),p.id=u.xpathToMember(l)),p=t.define(p)),u.model=p),h&&("string"==typeof h?(h=u.getter(h),u.total=function(e){return parseInt(h(e),10)}):"function"==typeof h&&(u.total=h)),g&&("string"==typeof g?(g=u.getter(g),u.errors=function(e){return g(e)||null}):"function"==typeof g&&(u.errors=g)),v&&("string"==typeof v?(v=u.xpathToMember(v),u.data=function(e){var t,n=u.evaluate(e,v);return n=i(n)?n:[n],u.model&&p.fields?(t=new u.model,o(n,function(e){if(e){var n,i={};for(n in p.fields)i[n]=t._parse(n,p.fields[n].field(e));return i}})):n}):"function"==typeof v&&(u.data=v)),"function"==typeof f&&(d=u.parse,u.parse=function(e){var t=f.call(u,e);return d.call(u,t)}),"function"==typeof m&&(u.serialize=m)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var n,r,o,a,s,l,c,d={},u=e.attributes,h=u.length;for(c=0;h>c;c++)l=u[c],d["@"+l.nodeName]=l.nodeValue;for(r=e.firstChild;r;r=r.nextSibling)o=r.nodeType,3===o||4===o?d["#text"]=r.nodeValue:1===o&&(n=this.parseDOM(r),a=r.nodeName,s=d[a],i(s)?s.push(n):s=s!==t?[s,n]:n,d[a]=s);return d},evaluate:function(e,t){for(var n,r,o,a,s,l=t.split(".");n=l.shift();)if(e=e[n],i(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=i(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,n.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==wt&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t),a=e.type(n);if(o!==a)return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e,t){var n,i;for(i in e){if(n=e[i],it(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function o(e){this.data=e||[]}function a(e,n){if(e){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return at(r,function(e){return!!e.dir})}}function s(e){var t,n,i,r,o=e.filters;if(o)for(t=0,n=o.length;n>t;t++)i=o[t],r=i.operator,r&&typeof r===ft&&(i.operator=W[r.toLowerCase()]||r),s(i)}function l(e){return e&&!rt(e)?((ot(e)||!e.filters)&&(e={logic:"and",filters:ot(e)?e:[e]}),s(e),e):t}function c(e){return ot(e)?e:[e]}function d(e,n){var i=typeof e===ft?{field:e,dir:n}:e,r=ot(i)?i:i!==t?[i]:[];return H(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function u(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function h(e,t,n,i,r,o){var a,s,l,c,d;for(t=t||[],c=t.length,a=0;c>a;a++)s=t[a],l=s.aggregate,d=s.field,e[d]=e[d]||{},o[d]=o[d]||{},o[d][l]=o[d][l]||{},e[d][l]=j[l.toLowerCase()](e[d][l],n,dt.accessor(d),i,r,o[d][l])}function p(e){return"number"==typeof e&&!isNaN(e)}function f(e){return e&&e.getTime}function g(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function m(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)s=r[a],s&&s!==a&&(o[s]=t[a](o),delete o[a])}}function v(e,t,n,i,r){var o,a,s,l,c;for(l=0,c=e.length;c>l;l++){o=e[l];for(a in t)o[a]=n._parse(a,t[a](o)),s=r[a],s&&s!==a&&delete o[s]}}function _(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)o=e[a],s=i[o.field],s&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?_(o.items,t,n,i,r):v(o.items,t,n,i,r)}function y(e,t,n,i,r,o){return function(a){return a=e(a),a&&!rt(i)&&("[object Array]"===Ht.call(a)||a instanceof jt||(a=[a]),n(a,i,new t,r,o)),a||[]}}function w(e,t,n,i){for(var r,o,a,s=0;t.length&&i&&(r=t[s],o=r.items,a=o.length,e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?w(e.items[e.items.length-1],r.items,n,i):(o=o.slice(n,n+i),e.items=e.items.concat(o)),t.splice(s--,1)):r.hasSubgroups&&o.length?w(r,o,n,i):(o=o.slice(n,n+i),r.items=o,r.items.length||t.splice(s--,1)),0===o.length?n-=a:(n=0,i-=o.length),!(++s>=t.length)););t.length>s&&t.splice(s,t.length-s)}function b(e){var t,n,i,r,o,a=[];for(t=0,n=e.length;n>t;t++)if(o=e.at(t),o.hasSubgroups)a=a.concat(b(o.items));else for(i=o.items,r=0;i.length>r;r++)a.push(i.at(r));return a}function k(e,t){var n,i,r;if(t)for(n=0,i=e.length;i>n;n++)r=e.at(n),r.hasSubgroups?k(r.items,t):r.items=new Gt(r.items,t)}function x(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n].hasSubgroups){if(x(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function C(e,t,n,i){for(var r=0;e.length>r&&e[r].data!==t&&!S(e[r].data,n,i);r++);}function S(e,t,n){for(var i=0,r=e.length;r>i;i++){if(e[i]&&e[i].hasSubgroups)return S(e[i].items,t,n);if(e[i]===t||e[i]===n)return e[i]=n,!0}}function T(e,n,i,r){var o,a,s,l;for(o=0,a=e.length;a>o;o++)if(s=e[o],s&&!(s instanceof r))if(s.hasSubgroups!==t)T(s.items,n,i,r);else for(l=0;n.length>l;l++)if(n[l]===s){e[o]=n.at(l),C(i,n,s,e[o]);break}}function D(e,t){var n,i,r;for(n=0,i=e.length;i>n;n++)if(r=e.at(n),r.uid==t.uid)return e.splice(n,1),r}function A(e,t){var n,i,r,o;for(r=e.length-1,o=0;r>=o;r--)i=e[r],n={value:t.get(i.field),field:i.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function E(e,t){return t?P(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function M(e,t){return t?P(e,function(e){return e.uid==t.uid}):-1}function P(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function I(e,t){var n,i;return e&&!rt(e)?(n=e[t],i=it(n)?n.from||n.field||t:e[t]||t,ut(i)?t:i):t}function z(e,t){var n,i,r,o={};for(r in e)"filters"!==r&&(o[r]=e[r]);if(e.filters)for(o.filters=[],n=0,i=e.filters.length;i>n;n++)o.filters[n]=z(e.filters[n],t);else o.field=I(t.fields,o.field);return o}function F(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){r={},o=e[n];for(a in o)r[a]=o[a];r.field=I(t.fields,r.field),r.aggregates&&ot(r.aggregates)&&(r.aggregates=F(r.aggregates,t)),s.push(r)}return s}function R(t,n){var i,r,o,a,s,l=e(t)[0].children,c=[],d=n[0],u=n[1];for(i=0,r=l.length;r>i;i++)o={},s=l[i],s.disabled||(o[d.field]=s.text,a=s.attributes.value,a=a&&a.specified?s.value:s.text,o[u.field]=a,c.push(o));return c}function B(t,n){var i,r,o,a,s,l,c,d=e(t)[0].tBodies[0],u=d?d.rows:[],h=n.length,p=[];for(i=0,r=u.length;r>i;i++){for(s={},c=!0,a=u[i].cells,o=0;h>o;o++)l=a[o],"th"!==l.nodeName.toLowerCase()&&(c=!1,s[n[o].field]=l.innerHTML);c||p.push(s)}return p}function L(e){return function(){var t=this._data,n=K.fn[e].apply(this,Lt.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function O(t,n){function i(e,t){return e.filter(t).add(e.find(t))}var r,o,a,s,l,c,d,u,h=e(t).children(),p=[],f=n[0].field,g=n[1]&&n[1].field,m=n[2]&&n[2].field,v=n[3]&&n[3].field;for(r=0,o=h.length;o>r;r++)a={_loaded:!0},s=h.eq(r),c=s[0].firstChild,u=s.children(),t=u.filter("ul"),u=u.filter(":not(ul)"),l=s.attr("data-id"),l&&(a.id=l),c&&(a[f]=3==c.nodeType?c.nodeValue:u.text()),g&&(a[g]=i(u,"a").attr("href")),v&&(a[v]=i(u,"img").attr("src")),m&&(d=i(u,".k-sprite").prop("className"),a[m]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(a.items=O(t.eq(0),n)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var H,N,V,U,W,j,G,q,$,Y,K,Q,X,J,Z,et,tt=e.extend,nt=e.proxy,it=e.isPlainObject,rt=e.isEmptyObject,ot=e.isArray,at=e.grep,st=e.ajax,lt=e.each,ct=e.noop,dt=window.kendo,ut=dt.isFunction,ht=dt.Observable,pt=dt.Class,ft="string",gt="function",mt="create",vt="read",_t="update",yt="destroy",wt="change",bt="sync",kt="get",xt="error",Ct="requestStart",St="progress",Tt="requestEnd",Dt=[mt,vt,_t,yt],At=function(e){return e},Et=dt.getter,Mt=dt.stringify,Pt=Math,It=[].push,zt=[].join,Ft=[].pop,Rt=[].splice,Bt=[].shift,Lt=[].slice,Ot=[].unshift,Ht={}.toString,Nt=dt.support.stableSort,Vt=/^\/Date\((.*?)\)\/$/,Ut=/(\r+|\n+)/g,Wt=/(?=['\\])/g,jt=ht.extend({init:function(e,t){var n=this;n.type=t||qt,ht.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=Array(n);
for(e=0;n>e;e++)t=this[e],t instanceof qt&&(t=t.toJSON()),i[e]=t;return i},parent:ct,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n,i=this;return null!==e&&"[object Object]"===Ht.call(e)&&(n=e instanceof i.type||e instanceof Kt,n||(e=e instanceof qt?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(wt,function(e){i.trigger(wt,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=It.apply(this,n),this.trigger(wt,{action:"add",index:t,items:n}),e},slice:Lt,sort:[].sort,join:zt,pop:function(){var e=this.length,t=Ft.apply(this);return e&&this.trigger(wt,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(Lt.call(arguments,2));if(i=Rt.apply(this,[e,t].concat(a)),i.length)for(this.trigger(wt,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r].children&&i[r].unbind(wt);return n&&this.trigger(wt,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=Bt.apply(this);return e&&this.trigger(wt,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Ot.apply(this,t),this.trigger(wt,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)t=this[n],e(t,n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),Gt=jt.extend({init:function(e,t){ht.fn.init.call(this),this.type=t||qt;for(var n=0;e.length>n;n++)this[n]=e[n];this.length=n,this._parent=nt(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),qt=ht.extend({init:function(e){var t,n,i=this,r=function(){return i};ht.fn.init.call(this);for(n in e)t=e[n],"object"==typeof t&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=dt.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==gt&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof qt||e instanceof jt)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t,n=this;return n.trigger(kt,{field:e}),t="this"===e?n:dt.getter(e,!0)(n)},_set:function(e,t){var n,i,r,o=this,a=e.indexOf(".")>=0;if(a)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),r=dt.getter(i,!0)(o),r instanceof qt)return r.set(n.join("."),t),a;i+="."}return dt.setter(e)(o,t),a},set:function(e,t){var n=this,i=e.indexOf(".")>=0,r=dt.getter(e,!0)(n);r!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(wt,{field:e})))},parent:ct,wrap:function(e,t,i){var r,o,a=this,s=Ht.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof jt,o=e instanceof K,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new jt(e)),e.parent()!=i()&&e.bind(wt,n(a,wt,t,!1))):(e instanceof qt||(e=new qt(e)),e.parent()!=i()&&(e.bind(kt,n(a,kt,t,!0)),e.bind(wt,n(a,wt,t,!0)))),e.parent=i),e}}),$t={number:function(e){return dt.parseFloat(e)},date:function(e){return dt.parseDate(e)},"boolean":function(e){return typeof e===ft?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},Yt={string:"",number:0,date:new Date,"boolean":!1,"default":""},Kt=qt.extend({init:function(n){var i,r,o=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},o.defaults,n),o._initializers))for(i=0;o._initializers.length>i;i++)r=o._initializers[i],n[r]=o.defaults[r]();qt.fn.init.call(o,n),o.dirty=!1,o.idField&&(o.id=o.get(o.idField),o.id===t&&(o.id=o._defaultId))},shouldSerialize:function(e){return qt.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=this,o=e,a=i.fields||{};return e=a[e],e||(e=r(a,o)),e&&(n=e.parse,!n&&e.type&&(n=$t[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),i(t,r.get(e))||(r.dirty=!0,qt.fn.set.call(r,e,t,n)))},accept:function(e){var t,n,i=this,r=function(){return i};for(t in e)n=e[t],"_"!=t.charAt(0)&&(n=i.wrap(e[t],t,r)),i._set(t,n);i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});Kt.define=function(e,n){n===t&&(n=e,e=Kt);var i,r,o,a,s,l,c,d,u=tt({defaults:{}},n),h={},p=u.id,f=[];if(p&&(u.idField=p),u.id&&delete u.id,p&&(u.defaults[p]=u._defaultId=""),"[object Array]"===Ht.call(u.fields)){for(l=0,c=u.fields.length;c>l;l++)o=u.fields[l],typeof o===ft?h[o]={}:o.field&&(h[o.field]=o);u.fields=h}for(r in u.fields)o=u.fields[r],a=o.type||"default",s=null,d=r,r=typeof o.field===ft?o.field:r,o.nullable||(s=u.defaults[d!==r?d:r]=o.defaultValue!==t?o.defaultValue:Yt[a.toLowerCase()],"function"==typeof s&&f.push(r)),n.id===r&&(u._defaultId=s),u.defaults[d!==r?d:r]=s,o.parse=o.parse||$t[a];return f.length>0&&(u._initializers=f),i=e.extend(u),i.define=function(e){return Kt.define(i,e)},u.fields&&(i.fields=u.fields,i.idField=u.idField),i},N={selector:function(e){return ut(e)?e:Et(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},V=tt({},N,{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),H=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},U=function(){function e(e){return e.replace(Wt,"\\").replace(Ut,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ft&&(i=e(i),o=Vt.exec(i),o?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),o.filterExpr=function(e){var n,i,r,a,s,l,c=[],d={and:" && ",or:" || "},u=[],h=[],p=e.filters;for(n=0,i=p.length;i>n;n++)r=p[n],s=r.field,l=r.operator,r.filters?(a=o.filterExpr(r),r=a.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),h.push.apply(h,a.operators),u.push.apply(u,a.fields)):(typeof s===gt?(a="__f["+u.length+"](d)",u.push(s)):a=dt.expr(s),typeof l===gt?(r="__o["+h.length+"]("+a+", "+r.value+")",h.push(l)):r=U[(l||"eq").toLowerCase()](a,r.value,r.ignoreCase!==t?r.ignoreCase:!0)),c.push(r);return{expression:"("+c.join(d[e.logic])+")",fields:u,operators:h}},W={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},o.normalizeFilter=l,o.prototype={toArray:function(){return this.data},range:function(e,t){return new o(this.data.slice(e,e+t))},skip:function(e){return new o(this.data.slice(e))},take:function(e){return new o(this.data.slice(0,e))},select:function(e){return new o(H(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new o(this.data.slice(0).sort(N.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,o=a(e,t),s=[];if(n=n||N,o.length){for(i=0,r=o.length;r>i;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,r,a,s,c,d,u=this.data,h=[];if(e=l(e),!e||0===e.filters.length)return this;for(r=o.filterExpr(e),s=r.fields,c=r.operators,a=d=Function("d, __f, __o","return "+r.expression),(s.length||c.length)&&(d=function(e){return a(e,s,c)}),t=0,i=u.length;i>t;t++)n=u[t],d(n)&&h.push(n);return new o(h)},group:function(e,t){e=d(e||[]),t=t||this.data;var n,i=this,r=new o(i.data);return e.length>0&&(n=e[0],r=r.groupBy(n).select(function(i){var r=new o(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new o(i.items).group(e.slice(1),r.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:r.aggregate(n.aggregates)}})),r},groupBy:function(e){if(rt(e)||!this.data.length)return new o([]);var t,n,i,r,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),l=dt.accessor(a),c=l.get(s[0],a),d={field:a,value:c,items:[]},h=[d];for(i=0,r=s.length;r>i;i++)t=s[i],n=l.get(t,a),u(c,n)||(c=n,d={field:a,value:c,items:[]},h.push(d)),d.items.push(t);return new o(h)},_sortForGrouping:function(e,t){var n,i,r=this.data;if(!Nt){for(n=0,i=r.length;i>n;n++)r[n].__position=n;for(r=new o(r).sort(e,t,V).toArray(),n=0,i=r.length;i>n;n++)delete r[n].__position;return r}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={},r={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)h(i,e,this.data[t],t,n,r);return i}},j={sum:function(e,t,n){var i=n.get(t);return p(e)?p(i)&&(e+=i):e=i,e},count:function(e){return(e||0)+1},average:function(e,n,i,r,o,a){var s=i.get(n);return a.count===t&&(a.count=0),p(e)?p(s)&&(e+=s):e=s,p(s)&&a.count++,r==o-1&&p(e)&&(e/=a.count),e},max:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),i>e&&(p(i)||f(i))&&(e=i),e},min:function(e,t,n){var i=n.get(t);return p(e)||f(e)||(e=i),e>i&&(p(i)||f(i))&&(e=i),e}},o.process=function(e,n){n=n||{};var i,r=new o(e),s=n.group,l=d(s||[]).concat(a(n.sort||[])),c=n.filterCallback,u=n.filter,h=n.skip,p=n.take;return u&&(r=r.filter(u),c&&(r=c(r)),i=r.toArray().length),l&&(r=r.sort(l),s&&(e=r.toArray())),h!==t&&p!==t&&(r=r.range(h,p)),s&&(r=r.group(s,e)),{total:i,data:r.toArray()}},G=pt.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),q=pt.extend({init:function(e){var t,n=this;e=n.options=tt({},n.options,e),lt(Dt,function(t,n){typeof e[n]===ft&&(e[n]={url:e[n]})}),n.cache=e.cache?$.create(e.cache):{find:ct,add:ct},t=e.parameterMap,ut(e.push)&&(n.push=e.push),n.push||(n.push=At),n.parameterMap=ut(t)?t:function(e){var n={};return lt(e,function(e,i){e in t&&(e=t[e],it(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:At},create:function(e){return st(this.setup(e,mt))},read:function(n){var i,r,o,a=this,s=a.cache;n=a.setup(n,vt),i=n.success||ct,r=n.error||ct,o=s.find(n.data),o!==t?i(o):(n.success=function(e){s.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return st(this.setup(e,_t))},destroy:function(e){return st(this.setup(e,yt))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],o=ut(r.data)?r.data(e.data):r.data;return e=tt(!0,{},r,e),n=tt(!0,{},o,e.data),e.data=i.parameterMap(n,t),ut(e.url)&&(e.url=e.url(n)),e}}),$=pt.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[Mt(e)]=n)},find:function(e){return this._store[Mt(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[Mt(e)]}}),$.create=function(e){var t={inmemory:function(){return new $}};return it(e)&&ut(e.find)?e:e===!0?new $:t[e]()},Y=pt.extend({init:function(e){var t,n,i,r,o,a,s,l,c,d,u,h,p,f=this;e=e||{};for(t in e)n=e[t],f[t]=typeof n===ft?Et(n):n;r=e.modelBase||Kt,it(f.model)&&(f.model=i=r.define(f.model)),o=nt(f.data,f),f._dataAccessFunction=o,f.model&&(a=nt(f.groups,f),s=nt(f.serialize,f),l={},c={},d={},u={},h=!1,i=f.model,i.fields&&(lt(i.fields,function(e,t){var n;p=e,it(t)&&t.field?p=t.field:typeof t===ft&&(p=t),it(t)&&t.from&&(n=t.from),h=h||n&&n!==e||p!==e,c[e]=Et(n||p),d[e]=Et(e),l[n||p]=e,u[e]=n||p}),!e.serialize&&h&&(f.serialize=y(s,i,m,d,l,u))),f._dataAccessFunction=o,f.data=y(o,i,v,c,l,u),f.groups=y(a,i,_,c,l,u))},errors:function(e){return e?e.errors:null},parse:At,data:At,total:function(e){return e.length},groups:At,aggregates:function(){return{}},serialize:function(e){return e}}),K=ht.extend({init:function(e){var n,i,r,o=this;e&&(i=e.data),e=o.options=tt({},o.options,e),o._map={},o._prefetch={},o._data=[],o._pristineData=[],o._ranges=[],o._view=[],o._pristineTotal=0,o._destroyed=[],o._pageSize=e.pageSize,o._page=e.page||(e.pageSize?1:t),o._sort=a(e.sort),o._filter=l(e.filter),o._group=d(e.group),o._aggregate=e.aggregate,o._total=e.total,o._shouldDetachObservableParents=!0,ht.fn.init.call(o),o.transport=Q.create(e,i),ut(o.transport.push)&&o.transport.push({pushCreate:nt(o._pushCreate,o),pushUpdate:nt(o._pushUpdate,o),pushDestroy:nt(o._pushDestroy,o)}),null!=e.offlineStorage&&("string"==typeof e.offlineStorage?(r=e.offlineStorage,o._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,Mt(e))}}):o._storage=e.offlineStorage),o.reader=new dt.data.readers[e.schema.type||"json"](e.schema),n=o.reader.model||{},o._detachObservableParents(),o._data=o._observe(o._data),o._online=!0,o.bind(["push",xt,wt,Ct,bt,Tt,St],e)},options:{data:null,schema:{modelBase:Kt},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},online:function(e){return e===t?this._online:(this._online!=e&&(this._online=e,e&&this.sync()),t)},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||{}},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return b(e);if(!t)for(var n=0;e.length>n;n++)e.at(n)}return e},parent:ct,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return M(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n,i=this;if(e===t){if(i._data)for(n=0;i._data.length>n;n++)i._data.at(n);return i._data}i._detachObservableParents(),i._data=this._observe(e),i._pristineData=e.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(e){return e===t?this._view:(this._view=this._observeView(e),t)},_observeView:function(e){return T(e,this._data,this._ranges,this.reader.model||qt),new Gt(e,this.reader.model)},flatView:function(){var e=this.group()||[];return e.length?b(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof qt?e:new qt(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Kt||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,A(this.group(),t)):this._data.splice(e,0,t),t},pushCreate:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this.add(r),t.push(o),a=o.toJSON(),this._isServerGrouped()&&(a=A(this.group(),a)),this._pristineData.push(a)}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){var t,n,i,r,o;for(ot(e)||(e=[e]),t=[],n=0;e.length>n;n++)i=e[n],r=this._createNewModel(i),o=this.get(r.id),o?(t.push(o),o.accept(i),o.trigger("change"),this._updatePristineForModel(o,i)):this.pushCreate(i);t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){var t,n,i,r,o,a;ot(e)||(e=[e]),t=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(i=0;e.length>i;i++)r=e[i],o=this._createNewModel(r),a=!1,this._eachItem(this._data,function(e){var n,i;for(n=0;e.length>n;n++)if(i=e.at(n),i.id===o.id){t.push(i),e.splice(n,1),a=!0;break}}),a&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return n=D(o,e),n&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),this._removeModelFromRanges(e),this._updateRangesLength(),e},sync:function(){var t,n,i,r,o=this,a=[],s=[],l=o._destroyed,c=o._flatData(o._data);if(o.online()){if(!o.reader.model)return;for(t=0,n=c.length;n>t;t++)c[t].isNew()?a.push(c[t]):c[t].dirty&&s.push(c[t]);r=[],r.push.apply(r,o._send("create",a)),r.push.apply(r,o._send("update",s)),r.push.apply(r,o._send("destroy",l)),i=e.when.apply(null,r).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)o._accept(arguments[e]);o._storeData(!0),o._change({action:"sync"}),o.trigger(bt)})}else o._storeData(!0),o._change({action:"sync"}),i=e.Deferred().resolve().promise();return i},cancelChanges:function(e){var t=this;e instanceof dt.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,c=t.type;if(i.trigger(Tt,{response:o,type:c}),o&&!rt(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),ot(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==c?(r[a].accept(o[a]),"create"===c?l.push(s?A(i.group(),r[a]):o[a]):"update"===c&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){dt.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=E(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var n,i,r=function(r){return i=E(r,e),i>-1?(n=r[i],!0):t};return this._eachPristineItem(r),n},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=M(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},_promise:function(t,n,i){var r=this;return e.Deferred(function(e){r.trigger(Ct,{type:i}),r.transport[i].call(r.transport,tt({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(g(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(t){var n=this,i=n._params(t),r=e.Deferred();return n._queueRequest(i,function(){n.trigger(Ct,{type:"read"})?(n._dequeueRequest(),r.resolve()):(n.trigger(St),n._ranges=[],n.trigger("reset"),n.online()?n.transport.read({data:i,success:function(e){n.success(e),r.resolve()},error:function(){var e=Lt.call(arguments);n.error.apply(n,e),r.reject.apply(r,e)}}):null!=n.options.offlineStorage&&(n.success(n.offlineData()),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var n,i,r,o,a=this,s=a.options;if(a.trigger(Tt,{response:e,type:"read"}),a.online()){if(e=a.reader.parse(e),a._handleCustomErrors(e))return a._dequeueRequest(),t;a._total=a.reader.total(e),a._aggregate&&s.serverAggregates&&(a._aggregateResult=a._readAggregates(e)),e=a._readData(e)}else{for(e=a._readData(e),n=[],i=0;e.length>i;i++)r=e[i],o=r.__state__,"destroy"==o?this._destroyed.push(this._createNewModel(r)):n.push(r);e=n,a._total=e.length}a._pristineTotal=a._total,a._pristineData=e.slice(0),a._detachObservableParents(),a._data=a._observe(e),null!=a.options.offlineStorage&&a._eachItem(a._data,function(e){var t,n;for(t=0;e.length>t;t++)n=e.at(t),"update"==n.__state__&&(n.dirty=!0)}),a._storeData(),a._addRange(a._data),a._process(a._data),a._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;this._data.length>e;e++)this._data[e].parent&&(this._data[e].parent=ct)},_storeData:function(e){function t(e){var n,i,r,s=[];for(n=0;e.length>n;n++)i=e.at(n),r=i.toJSON(),o&&i.items?r.items=t(i.items):(r.uid=i.uid,a&&(i.isNew()?r.__state__="create":i.dirty&&(r.__state__="update"))),s.push(r);return s}var n,i,r,o=this._isServerGrouped(),a=this.reader.model;if(null!=this.options.offlineStorage){for(n=t(this._data),i=0;this._destroyed.length>i;i++)r=this._destroyed[i].toJSON(),r.__state__="destroy",n.push(r);this.offlineData(n),e&&(this._pristineData=n)}},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(Tt,{}),this.trigger(xt,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=tt({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=F(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=z(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=F(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=F(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:nt(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(xt,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t,n=this,i=n.reader.model,r=!1;return n._shouldDetachObservableParents=!0,i&&e.length&&(r=!(e[0]instanceof i)),e instanceof jt?(n._shouldDetachObservableParents=!1,r&&(e.type=n.reader.model,e.wrapAll(e,e))):(t=n.pageSize()?Gt:jt,e=new t(e,n.reader.model),e.parent=function(){return n.parent()}),n._isServerGrouped()&&k(e,i),n._changeHandler&&n._data&&n._data instanceof jt?n._data.unbind(wt,n._changeHandler):n._changeHandler=nt(n._change,n),e.bind(wt,n._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total,10),p(r._total)||(i=parseInt(r._pristineTotal,10)),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging?"sync"===o&&(i=r._pristineTotal=parseInt(r._total,10)):i=r._pristineTotal,r._total=i,r._process(r._data,e)):r.sync()},_calculateAggregates:function(e,t){t=t||{};var n=new o(e),i=t.aggregate,r=t.filter;return r&&(n=n.filter(r)),n.aggregate(i)},_process:function(e,n){var i,r=this,o={};r.options.serverPaging!==!0&&(o.skip=r._skip,o.take=r._take||r._pageSize,o.skip===t&&r._page!==t&&r._pageSize!==t&&(o.skip=(r._page-1)*r._pageSize)),r.options.serverSorting!==!0&&(o.sort=r._sort),r.options.serverFiltering!==!0&&(o.filter=r._filter),r.options.serverGrouping!==!0&&(o.group=r._group),r.options.serverAggregates!==!0&&(o.aggregate=r._aggregate,r._aggregateResult=r._calculateAggregates(e,o)),i=r._queryProcess(e,o),r.view(i.data),i.total===t||r.options.serverFiltering||(r._total=i.total),n=n||{},n.items=n.items||r._view,r.trigger(wt,n)},_queryProcess:function(e,t){return o.process(e,t)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=a(e.sort)),e.filter&&(n._filter=e.filter=l(e.filter)),e.group&&(n._group=e.group=d(e.group)),e.aggregate&&(n._aggregate=e.aggregate=c(e.aggregate))),e},query:function(n){var i,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return r||(this._data===t||0===this._data.length)&&!this._destroyed.length?this.read(this._mergeState(n)):(this.trigger(Ct,{type:"read"})||(this.trigger(St),i=this._queryProcess(this._data,this._mergeState(n)),this.options.serverFiltering||(this._total=i.total!==t?i.total:this._data.length),this._aggregateResult=this._calculateAggregates(this._data,n),this.view(i.data),this.trigger(Tt,{}),this.trigger(wt,{items:i.data})),e.Deferred().resolve().promise())},fetch:function(e){return this._query().then(nt(e,this))},_query:function(e){var t=this;return t.query(tt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=Pt.max(Pt.min(Pt.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip(),n!==t?Pt.round((n||0)/(i.take()||1))+1:t)},pageSize:function(e){var n=this;return e!==t?(n._query({pageSize:e,page:1}),t):n.take()},sort:function(e){var n=this;return e!==t?(n._query({sort:e}),t):n._sort},filter:function(e){var n=this;return e===t?n._filter:(n._query({filter:e,page:1}),t)},group:function(e){var n=this;return e!==t?(n._query({group:e}),t):n._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var n=this;return e!==t?(n._query({aggregate:e}),t):n._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return Pt.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=Pt.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0?!0:n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(e,n){var i,r,o,a,s,l,c,d;if(e=Pt.min(e||0,this.total()),i=this,r=Pt.max(Pt.floor(e/n),0)*n,o=Pt.min(r+n,i.total()),i._skipRequestsInProgress=!1,a=i._findRange(e,Pt.min(e+n,i.total())),a.length){i._skipRequestsInProgress=!0,i._pending=t,i._skip=e>i.skip()?Pt.min(o,(i.totalPages()-1)*i.take()):r,i._take=n,s=i.options.serverPaging,l=i.options.serverSorting,c=i.options.serverFiltering,d=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,s&&(i._detachObservableParents(),i._data=a=i._observe(a)),i._process(a)}finally{i.options.serverPaging=s,i.options.serverSorting=l,i.options.serverFiltering=c,i.options.serverAggregates=d}}else n!==t&&(i._rangeExists(r,o)?e>r&&i.prefetch(o,n,function(){i.range(e,n)}):i.prefetch(r,n,function(){e>r&&o<i.total()&&!i._rangeExists(o,Pt.min(o+n,i.total()))?i.prefetch(o,n,function(){i.range(e,n)}):i.range(e,n)}))},_findRange:function(e,n){var i,r,o,s,l,c,u,h,p,f,g,m,v=this,_=v._ranges,y=[],w=v.options,b=w.serverSorting||w.serverPaging||w.serverFiltering||w.serverGrouping||w.serverAggregates;for(r=0,g=_.length;g>r;r++)if(i=_[r],e>=i.start&&i.end>=e){for(f=0,o=r;g>o;o++)if(i=_[o],p=v._flatData(i.data,!0),p.length&&e+f>=i.start&&(c=i.data,u=i.end,b||(m=d(v.group()||[]).concat(a(v.sort()||[])),h=v._queryProcess(i.data,{sort:m,filter:v.filter()}),p=c=h.data,h.total!==t&&(u=h.total)),s=0,e+f>i.start&&(s=e+f-i.start),l=p.length,u>n&&(l-=u-n),f+=l-s,y=v._mergeGroups(y,c,s,l),i.end>=n&&f==n-e))return y;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),w(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n){var i=this;return function(r){var o,a,s,l=!1,c={start:e,end:t,data:[]};if(i._dequeueRequest(),i.trigger(Tt,{response:r,type:"read"}),r=i.reader.parse(r),s=i._readData(r),s.length){for(o=0,a=i._ranges.length;a>o;o++)if(i._ranges[o].start===e){l=!0,c=i._ranges[o];
break}l||i._ranges.push(c)}c.data=i._observe(s),c.end=c.start+i._flatData(c.data,!0).length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(r),i._skipRequestsInProgress||(n&&s.length?n():i.trigger(wt,{}))}},prefetch:function(e,t,n){var i=this,r=Pt.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(Ct,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n)})})},100))},_rangeExists:function(e,t){var n,i,r=this,o=r._ranges;for(n=0,i=o.length;i>n;n++)if(e>=o[n].start&&o[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){var t,n,i,r,o;for(r=0,o=this._ranges.length;o>r&&(i=this._ranges[r],this._eachItem(i.data,function(i){t=D(i,e),t&&(n=!0)}),!n);r++);},_updateRangesLength:function(){var e,t,n,i,r=0;for(n=0,i=this._ranges.length;i>n;n++)e=this._ranges[n],e.start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),Q={},Q.create=function(e,t){var n,i=e.transport;return i?(i.read=typeof i.read===ft?{url:i.read}:i.read,e.type&&(dt.data.transports=dt.data.transports||{},dt.data.schemas=dt.data.schemas||{},dt.data.transports[e.type]&&!it(dt.data.transports[e.type])?n=new dt.data.transports[e.type](tt(i,{data:t})):i=tt(!0,{},dt.data.transports[e.type],i),e.schema=tt(!0,{},dt.data.schemas[e.type],e.schema)),n||(n=ut(i.read)?i:new q(i))):n=new G({data:e.data||[]}),n},K.create=function(e){(ot(e)||e instanceof jt)&&(e={data:e});var t,n,i,r=e||{},o=r.data,a=r.fields,s=r.table,l=r.select,c={};if(o||!a||r.transport||(s?o=B(s,a):l&&(o=R(l,a))),dt.data.Model&&a&&(!r.schema||!r.schema.model)){for(t=0,n=a.length;n>t;t++)i=a[t],i.type&&(c[i.field]=i);rt(c)||(r.schema=tt(!0,r.schema,{model:{fields:c}}))}return r.data=o,s=null,r.table=null,r instanceof K?r:new K(r)},X=Kt.define({id:"id",init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};dt.data.Model.fn.init.call(t,e),typeof t.children===ft&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField,fields:t.fields}}},typeof t.children!==ft&&tt(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ft&&(n=dt.getter(n)),ut(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof J||(e=i.children=new J(i._childrenOptions),t=e.transport,n=t.parameterMap,t.parameterMap=function(e,t){return e[i.idField||"id"]=i.id,n&&(e=n(e,t)),e},e.parent=function(){return i},e.bind(wt,function(e){e.node=e.node||i,i.trigger(wt,e)}),e.bind(xt,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(xt,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var e,n={},i="_query";this.hasChildren?(this._initChildren(),e=this.children,n[this.idField||"id"]=this.id,this._loaded||(e._data=t,i="read"),e.one(wt,nt(this._childrenLoaded,this)),e[i](n)):this.loaded(!0)},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Kt.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),J=K.extend({init:function(e){var t=X.define({children:e});K.fn.init.call(this,tt(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(xt,function(t){e.trigger(xt,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=K.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:L("success"),data:L("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),K.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a;if(r=K.fn[e].call(this,t))return r;if(o=this._flatData(this._data))for(n=0,i=o.length;i>n;n++)if(a=o[n].children,a instanceof J&&(r=a[e](t)))return r},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}}),J.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=O(r,i)),t.data=n,t instanceof J?t:new J(t))},Z=dt.Observable.extend({init:function(e,t,n){dt.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),e.bind("reset",function(){i._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),t):this.useRanges?this.useRanges?((this.dataOffset>e||e>=this.skip+n)&&(i=this.range(Math.floor(e/n)*n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):t:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,i=Pt.max(Pt.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,i=this.pageSize,r=Pt.max(Pt.floor(e/i),0)*i,o=this.dataSource;return t&&(r+=i),o.inRange(e,i)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):this.prefetch?(o.prefetch(r,i,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1):!0},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),et=dt.Observable.extend({init:function(e,t){var n=this;dt.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new Z(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var n,i,r=this.buffer,o=e*this.batchSize,a=this.batchSize,s=[];for(r.offset>o&&r.at(r.offset-1),i=0;a>i&&(n=r.at(o+i),n!==t);i++)s.push(n);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),tt(!0,dt.data,{readers:{json:Y},Query:o,DataSource:K,HierarchicalDataSource:J,Node:X,ObservableObject:qt,ObservableArray:jt,LazyObservableArray:Gt,LocalTransport:G,RemoteTransport:q,Cache:$,DataReader:Y,Model:Kt,Buffer:Z,BatchBuffer:et})}(window.kendo.jQuery),function(e,t){function n(t,n,i){return v.extend({init:function(e,t,n){var i=this;v.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=M(i.dataBinding,i),i._dataBound=M(i.dataBound,i),i._itemChange=M(i.itemChange,i)},itemChange:function(e){a(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)c(r[t])},_ns:function(t){t=t||x.ui;var n=[x.ui,x.dataviz.ui,x.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),x.rolesFromNamespaces(n)},dataBound:function(e){{var i,r,o,s,l=this.widget,c=e.addedItems||l.items(),d=l[n];d.group()||[]}if(c.length)for(o=e.addedDataItems||d.flatView(),s=this.bindings[t]._parents(),i=0,r=o.length;r>i;i++)a(c[i],o[i],this._ns(e.ns),[o[i]].concat(s))},refresh:function(e){var r,o=this,a=o.widget;e=e||{},e.action||(o.destroy(),a.bind("dataBinding",o._dataBinding),a.bind("dataBound",o._dataBound),a.bind("itemChange",o._itemChange),r=o.bindings[t].get(),a[n]instanceof x.data.DataSource&&a[n]!=r&&(r instanceof x.data.DataSource?a[i](r):r&&r._dataSource?a[i](r._dataSource):a[n].data(r)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function i(e,n){var i=x.initWidget(e,{},n);return i?new w(i):t}function r(e){var t,n,i,o,a,s,l,c={};for(l=e.match(b),t=0,n=l.length;n>t;t++)i=l[t],o=i.indexOf(":"),a=i.substring(0,o),s=i.substring(o+1),"{"==s.charAt(0)&&(s=r(s)),c[a]=s;return c}function o(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function a(e,t,n,s){var c,d,u,h=e.getAttribute("data-"+x.ns+"role"),p=e.getAttribute("data-"+x.ns+"bind"),v=e.children,_=[],w=!0,b={};if(s=s||[t],(h||p)&&l(e),h&&(u=i(e,n)),p&&(p=r(p.replace(k,"")),u||(b=x.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:B,valuePrimitive:!1,autoBind:!0}),b.roles=n,u=new y(e,b)),u.source=t,d=o(p,s,f),b.template&&(d.template=new m(s,"",b.template)),d.click&&(p.events=p.events||{},p.events.click=p.click,d.click.destroy(),delete d.click),d.source&&(w=!1),p.attr&&(d.attr=o(p.attr,s,f)),p.style&&(d.style=o(p.style,s,f)),p.events&&(d.events=o(p.events,s,g)),u.bind(d)),u&&(e.kendoBindingTarget=u),w&&v){for(c=0;v.length>c;c++)_[c]=v[c];for(c=0;_.length>c;c++)a(_[c],t,n,s)}}function s(t,n){var i,r,o,s=x.rolesFromNamespaces([].slice.call(arguments,2));for(n=x.observable(n),t=e(t),i=0,r=t.length;r>i;i++)o=t[i],1===o.nodeType&&a(o,n,s)}function l(e){var t=e.kendoBindingTarget;t&&(t.destroy(),R?delete e.kendoBindingTarget:e.removeAttribute?e.removeAttribute("kendoBindingTarget"):e.kendoBindingTarget=null)}function c(e){l(e),d(e)}function d(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)c(i[t])}function u(t){var n,i;for(t=e(t),n=0,i=t.length;i>n;n++)c(t[n])}function h(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&s(n,i.source,t)}var p,f,g,m,v,_,y,w,b,k,x=window.kendo,C=x.Observable,S=x.data.ObservableObject,T=x.data.ObservableArray,D={}.toString,A={},E=x.Class,M=e.proxy,P="value",I="source",z="events",F="checked",R=!0,B="change";!function(){var e=document.createElement("a");e.innerText!==t?p="innerText":e.textContent!==t&&(p="textContent");try{delete e.test}catch(n){R=!1}}(),f=C.extend({init:function(e,t){var n=this;C.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof C,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(B,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(B,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){r.trigger(B,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)n=e.parents[++i],n instanceof S&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)n=n.parent(),n instanceof S&&(o=n.get(r));return"function"==typeof o&&(i=r.lastIndexOf("."),i>0&&(n=n.get(r.substring(0,i))),e.start(n),o=n!==e.source?o.call(n,e.source):o.call(n),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(B,e._change).bind(B,e._change)),e.stop(e.source),o},set:function(e){var t=this.currentSource||this.source,n=x.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(B,this._change),this.currentSource&&this.currentSource.unbind(B,this._change)),this.unbind()}}),g=f.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof S&&(e=t.get(n));return M(e,t)}}),m=f.extend({init:function(e,t,n){var i=this;f.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(this.source),t=x.render(this.template,e),this.stop(this.source),t}}),v=E.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(B,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),A.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),A.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),A.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),A.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),A.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),A.events=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),A.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[p]=e}}),A.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),A.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),A.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),A.value=v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),this.eventName=i.valueUpdate||B,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){var e,t;this._initChange=this.eventName!=B,e=this.element.value,t=this.element.type,"date"==t?e=x.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=x.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t&&(e=x.parseFloat(e)),this.bindings[P].set(e),this._initChange=!1},refresh:function(){var e,t;this._initChange||(e=this.bindings[P].get(),null==e&&(e=""),t=this.element.type,"date"==t?e=x.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=x.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e),this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),A.source=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n);var i=this.bindings.source.get();i instanceof x.data.DataSource&&n.autoBind!==!1&&i.fetch()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof T||n instanceof x.data.DataSource?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?x.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=x.template(t)),t},add:function(t,n){var i,r,o,s,l=this.container(),c=l.cloneNode(!1),d=l.children[t];if(e(c).html(x.render(this.template(),n)),c.children.length)for(i=this.bindings.source._parents(),r=0,o=n.length;o>r;r++)s=c.children[0],l.insertBefore(s,d||null),a(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;t.length>n;n++)i=r.children[e],c(i),r.removeChild(i)},render:function(){var t,n,i,r=this.bindings.source.get(),o=this.container(),s=this.template();if(r instanceof x.data.DataSource&&(r=r.view()),r instanceof T||"[object Array]"===D.call(r)||(r=[r]),this.bindings.template){if(d(o),e(o).html(this.bindings.template.render(r)),o.children.length)for(t=this.bindings.source._parents(),n=0,i=r.length;i>n;n++)a(o.children[n],r[n],this.options.roles,[r[n]].concat(t))}else e(o).html(x.render(s,r))}}),A.input={checked:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n=this.element,i=this.value();"radio"==n.type?this.bindings[F].set(i):"checkbox"==n.type&&(e=this.bindings[F].get(),e instanceof T?(i=this.element.value,"on"!==i&&"off"!==i&&(t=e.indexOf(i),t>-1?e.splice(t,1):e.push(i))):this.bindings[F].set(i))},refresh:function(){var e=this.bindings[F].get(),t=e,n=this.element;"checkbox"==n.type?(t instanceof T&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),n.checked=e===!0):"radio"==n.type&&null!=e&&n.value===""+e&&(n.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(B,this._change)}})},A.select={value:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=M(this.change,this),e(this.element).change(this._change)},change:function(){var e,n,i,r,o,a,s=[],l=this.element,c=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(o=0,a=l.options.length;a>o;o++)n=l.options[o],n.selected&&(r=n.attributes.value,r=r&&r.specified?n.value:n.text,s.push(r));if(c)for(e=this.bindings.source.get(),e instanceof x.data.DataSource&&(e=e.view()),i=0;s.length>i;i++)for(o=0,a=e.length;a>o;o++)if(e[o].get(c)==s[i]){s[i]=e[o];break}r=this.bindings[P].get(),r instanceof T?r.splice.apply(r,[0,r.length].concat(s)):this.bindings[P].set(d||!(r instanceof S||null===r||r===t)&&c?s[0].get(c):s[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[P].get(),a=o,s=this.options.valueField||this.options.textField,l=!1;for(a instanceof T||(a=new T([o])),i.selectedIndex=-1,n=0;a.length>n;n++)for(o=a[n],s&&o instanceof S&&(o=o.get(s)),e=0;r.length>e;e++)t=r[e].value,""===t&&""!==o&&(t=r[e].text),t==o&&(r[e].selected=!0,l=!0)},destroy:function(){e(this.element).off(B,this._change)}})},A.widget={events:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=M(this.change,this),this.widget.bind(B,this._change)},change:function(){this.bindings[F].set(this.value())},refresh:function(){this.widget.check(this.bindings[F].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(B,this._change)}}),visible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:n("source","dataSource","setDataSource"),value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof S),this._valueIsObservableArray=r instanceof T,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,c="[object Array]"===D.call(s),d=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(d||this.options.valuePrimitive))s=null;else{for((!a||a instanceof x.data.DataSource)&&(a=this.widget.dataSource.view()),c&&(t=s.length,u=s.slice(0)),r=0,o=a.length;o>r;r++)if(n=a[r],i=n.get(l),c){for(e=0;t>e;e++)if(i==u[e]){u[e]=n;break}}else if(i==s){s=d?n:i;break}u[0]&&(s=this._valueIsObservableArray?u:d||!l?u[0]:u[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){if(!this._initChange){var e,n=this.options.dataValueField||this.options.dataTextField,i=this.bindings.value.get(),r=0,o=[];if(i===t&&(i=null),n)if(i instanceof T){for(e=i.length;e>r;r++)o[r]=i[r].get(n);i=o}else i instanceof S&&(i=i.get(n));this.widget.value(i)}this._initChange=!1},destroy:function(){this.widget.unbind(B,this._change)}}),gantt:{dependencies:n("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(B,this._change),this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s,l,c=this,d=c.bindings[P].get(),u=c.options.valuePrimitive,h=u?c.widget.value():c.widget.dataItems(),p=this.options.dataValueField||this.options.dataTextField;if(h=h.slice(0),c._initChange=!0,d instanceof T){for(e=[],t=h.length,n=0,i=0,r=d[n],o=!1;r;){for(l=!1,i=0;t>i;i++)if(u?o=h[i]==r:(s=h[i],s=s.get?s.get(p):s,o=s==(r.get?r.get(p):r)),o){h.splice(i,1),t-=1,l=!0;break}l?n+=1:(e.push(r),_(d,n,1),a=n),r=d[n]}_(d,d.length,0,h),e.length&&d.trigger("change",{action:"remove",items:e,index:a}),h.length&&d.trigger("change",{action:"add",items:h,index:d.length-1})}else c.bindings[P].set(h);c._initChange=!1},refresh:function(){if(!this._initChange){var e,n,i=this.options.dataValueField||this.options.dataTextField,r=this.bindings.value.get(),o=0,a=[];if(r===t&&(r=null),i)if(r instanceof T){for(e=r.length;e>o;o++)n=r[o],a[o]=n.get?n.get(i):n;r=a}else r instanceof S&&(r=r.get(i));this.widget.value(r)}},destroy:function(){this.widget.unbind(B,this._change)}})},scheduler:{source:n("source","dataSource","setDataSource").extend({dataBound:function(e){{var t,n,i,r,o=this.widget,s=o.view(),l=e.addedItems||o.items(),c=o.dataSource;c.group()||[]}if(l.length)for(i=e.addedDataItems||c.expand(s.startDate(),s.endDate()),r=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)a(l[t],i[t],this._ns(e.ns),[i[t]].concat(r))}})}},_=function(e,t,n,i){var r,o,a,s,l;if(i=i||[],n=n||0,r=i.length,o=e.length,a=[].slice.call(e,t+n),s=a.length,r){for(r=t+r,l=0;r>t;t++)e[t]=i[l],l++;e.length=r}else if(n)for(e.length=t,n+=t;n>t;)delete e[--n];if(s){for(s=t+s,l=0;s>t;t++)e[t]=a[l],l++;e.length=s}for(t=e.length;o>t;)delete e[t],t++},y=E.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o=this.target.nodeName.toLowerCase(),a=A[o]||{};for(t in e)t==P?n=!0:t==I?i=!0:t==z?r=!0:this.applyBinding(t,e,a);i&&this.applyBinding(I,e,a),n&&this.applyBinding(P,e,a),r&&this.applyBinding(z,e,a)},applyBinding:function(e,t,n){var i,r=n[e]||A[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),w=y.extend({bind:function(e){var t,n=this,i=!1,r=!1,o=A.widget[n.target.options.name.toLowerCase()]||{};for(t in e)t==P?i=!0:t==I?r=!0:n.applyBinding(t,e,o);r&&n.applyBinding(I,e,o),i&&n.applyBinding(P,e,o)},applyBinding:function(e,t,n){var i,r=n[e]||A.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof f)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),b=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,k=/\s/g,x.unbind=u,x.bind=s,x.data.binders=A,x.data.Binder=v,x.notify=h,x.observable=function(e){return e instanceof S||(e=new S(e)),e},x.observableHierarchy=function(e){function t(e){var n,i;for(n=0;e.length>n;n++)e[n]._initChildren(),i=e[n].children,i.fetch(),e[n].items=i.data(),t(e[n].items)}var n=x.data.HierarchicalDataSource.create(e);return n.fetch(),t(n.data()),n._data._dataSource=n,n._data}}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){var t,n=[];for(t in e)n.push(t);return n}function o(e){for(var t in e)-1!=U.indexOf(t)&&-1==W.indexOf(t)&&delete e[t];return e}function a(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=P&&-1!=U.indexOf(n),!E.hasHW3D&&o&&-1==W.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[st]=a.join(" ")),s}function s(e,t){var i,r,o;return P?(i=e.css(st),i==K?"scale"==t?1:0:(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),o=0,r?o=n(r[1]):(r=i.match(B)||[0,0,0,0,0],t=t.toLowerCase(),O.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o)):parseFloat(e.css(t))}function l(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var n=f.extend(t),i=n.prototype.directions;S[l(e)]=n,S.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},T(i,function(t,i){S.Element.prototype[e+l(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function d(e,n,i,r){c(e,{directions:m,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l=this,c="out"===this._direction,d=l.element.data(n),u=!(isNaN(d)||d==i);a=u?d:t!==this._startValue?this._startValue:c?i:r,s=t!==this._endValue?this._endValue:c?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),l._shouldHide=o[n]===r}})}function u(e,t){var n=C.directions[t].vertical,i=e[n?J:X]()/2+"px";return _[t].replace("$size",i)}var h,p,f,g,m,v,_,y,w,b,k,x,C=window.kendo,S=C.effects,T=e.each,D=e.extend,A=e.proxy,E=C.support,M=E.browser,P=E.transforms,I=E.transitions,z={scale:0,scalex:0,scaley:0,scale3d:0},F={translate:0,translatex:0,translatey:0,translate3d:0},R=t!==document.documentElement.style.zoom&&!P,B=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,L=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,O=/translatex?$/i,H=/(zoom|fade|expand)(\w+)/,N=/(zoom|fade|expand)/,V=/[xy]$/i,U=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],W=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],j={rotate:"deg",scale:"",skew:"px",translate:"px"},G=P.css,q=Math.round,$="",Y="px",K="none",Q="auto",X="width",J="height",Z="hidden",et="origin",tt="abortId",nt="overflow",it="translate",rt="position",ot="completeCallback",at=G+"transition",st=G+"transform",lt=G+"backface-visibility",ct=G+"perspective",dt="1500px",ut="perspective("+dt+")",ht={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};C.directions=ht,D(e.fn,{kendoStop:function(e,t){return I?S.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),P&&!I&&(T(W,function(n,i){e.fn[i]=function(n){if(t===n)return s(this,i);var r=e(this)[0],o=i+"("+n+j[i.replace(V,"")]+")";return-1==r.style.cssText.indexOf(st)?e(this).css(st,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),h=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=W.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):h.apply(this,arguments)}),C.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),I&&(n=D({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(at,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(at,"").css(J)},n.duration)),T(t,function(t,n){e.toggleClass(n,i)})),e},C.parseEffects=function(e,t){var n={};return"string"==typeof e?T(e.split(" "),function(e,i){var r=!N.test(i),o=i.replace(H,function(e,t,n){return t+":"+n.toLowerCase()}),a=o.split(":"),s=a[1],l={};a.length>1&&(l.direction=t&&r?ht[s].reverse:s),n[a[0]]=l}):T(e,function(e){var i=this.direction;i&&t&&!N.test(e)&&(this.direction=ht[i].reverse),n[e]=this}),n},I&&D(S,{transition:function(t,n,i){var o,s,l,c,d=0,u=t.data("keys")||[];i=D({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),l=!1,c=function(){l||(l=!0,s&&(clearTimeout(s),s=null),t.removeData(tt).dequeue().css(at,"").css(at),i.complete.call(t))},i.duration=e.fx?e.fx.speeds[i.duration]||i.duration:i.duration,o=a(t,n),e.merge(u,r(o)),t.data("keys",e.unique(u)).height(),t.css(at,i.exclusive+" "+i.duration+"ms "+i.ease).css(at),t.css(o).css(st),I.event&&(t.one(I.event,c),0!==i.duration&&(d=500)),s=setTimeout(c,i.duration+d),t.data(tt,s),t.data(ot,c)
},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(ot);return o&&(i=C.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),p=C.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,r,s,l,c,d,u=this,h=t.length,p=u.element,f=u.options,g=e.Deferred(),m={},v={};for(u.effects=t,g.then(e.proxy(u,"complete")),p.data("animating",!0),i=0;h>i;i++)for(n=t[i],n.setReverse(f.reverse),n.setOptions(f),u.addRestoreProperties(n.restore),n.prepare(m,v),l=n.children(),r=0,c=l.length;c>r;r++)l[r].duration(f.duration).run();for(d in f.effects)D(v,f.effects[d].properties);for(p.is(":visible")||D(m,{display:p.data("olddisplay")||"block"}),P&&!f.reset&&(s=p.data("targetTransform"),s&&(m=D(s,m))),m=a(p,m),P&&!I&&(m=o(m)),p.css(m).css(st),i=0;h>i;i++)t[i].setup();return f.init&&f.init(),p.data("targetTransform",v),S.animate(p,v,D({},f,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),R&&!P&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),S.promise=function(e,t){var n,i,r,o=[],a=new p(e,t),s=C.parseEffects(t.effects);t.effects=s;for(r in s)n=S[l(r)],n&&(i=new n(e,s[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},D(S,{animate:function(n,r,a){var s=a.transition!==!1;delete a.transition,I&&"transition"in S&&s?S.transition(n,r,a):P?n.animate(o(r),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),o={};T(U,function(e,a){var s,l,c,d,u,h,p,f=r?r[a]+" ":null;f&&(l=r,a in z&&r[a]!==t?(s=f.match(L),P&&D(l,{scale:+s[0]})):a in F&&r[a]!==t&&(c=n.css(rt),d="absolute"==c||"fixed"==c,n.data(it)||(d?n.data(it,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(it,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),u=n.data(it),s=f.match(L),s&&(h=a==it+"y"?0:+s[1],p=a==it+"y"?+s[1]:+s[2],d?(isNaN(u.right)?isNaN(h)||D(l,{left:u.left+h}):isNaN(h)||D(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(p)||D(l,{top:u.top+p}):isNaN(p)||D(l,{bottom:u.bottom-p})):(isNaN(h)||D(l,{marginLeft:u.left+h}),isNaN(p)||D(l,{marginTop:u.top+p})))),!P&&"scale"!=a&&a in l&&delete l[a],l&&D(o,l))}),M.msie&&delete o.scale,n.animate(o,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})}}),S.animatedPromise=S.promise,f=C.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new p(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,r=i.element,s=0,l=i.restore,c=l.length,d=e.Deferred(),u={},h={},p=i.children(),f=p.length;for(d.then(e.proxy(i,"_complete")),r.data("animating",!0),s=0;c>s;s++)t=l[s],r.data(t)||r.data(t,r.css(t));for(s=0;f>s;s++)p[s].duration(i._duration).run();return i.prepare(u,h),r.is(":visible")||D(u,{display:r.data("olddisplay")||"block"}),P&&(n=r.data("targetTransform"),n&&(u=D(n,u))),u=a(r,u),P&&!I&&(u=o(u)),r.css(u).css(st),i.setup(),r.data("targetTransform",h),S.animate(r,h,{duration:i._duration,complete:d.resolve}),d.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),R&&!P&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){D(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),g=["left","right","up","down"],m=["in","out"],c("slideIn",{directions:g,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=ht[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth()),s=a/(i.options&&i.options.divisor||1)+Y,l="0px";i._reverse&&(n=e,e=t,t=n),P?(e[o.transition]=s,t[o.transition]=l):(e[o.property]=s,t[o.property]=l)}}),c("tile",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[C.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(C.fx(n).slideIn(ht[r].reverse).divisor(i).setReverse(!t)),o}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),c("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(et),s=o.offset,l=i._reverse;l||null!==a||r.data(et,parseFloat(r.css("margin-"+o.axis))),n=r.data(et)||0,t["margin-"+o.axis]=l?n:n+s}}),c("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options,o=r.offset.split(","),a=n._reverse;P?(t.translatex=a?0:o[0],t.translatey=a?0:o[1]):(t.left=a?0:o[0],t.top=a?0:o[1]),i.css("left")}}),c("expand",{directions:["horizontal","vertical"],restore:[nt],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?J:X,l=r[0].style[s],c=r.data(s),d=parseFloat(c||l),u=q(r.css(s,Q)[s]());e.overflow=Z,d=o&&o.reset?u||d:d||u,n[s]=(a?0:d)+Y,e[s]=(a?d:0)+Y,c===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,n="vertical"===e._direction?J:X,i=t.data(n);(i==Q||i===$)&&setTimeout(function(){t.css(n,Q).css(n)},0)}}),v={position:"absolute",marginLeft:0,marginTop:0,scale:1},c("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n=this,i=n.element,r=S.box(i),o=S.box(n.options.target),a=s(i,"scale"),l=S.fillScale(o,r),c=S.transformOrigin(o,r);D(e,v),t.scale=1,i.css(st,"scale(1)").css(st),i.css(st,"scale("+a+")"),e.top=r.top,e.left=r.left,e.transformOrigin=c.x+Y+" "+c.y+Y,n._reverse?e.scale=l:t.scale=l}}),_={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},y={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},c("turningPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?ht[n._direction].reverse:n._direction,o=y[r];e.zIndex=1,n._clipInHalf&&(e.clip=u(n._container,C.directions[r].reverse)),e[lt]=Z,t[st]=ut+(i?o.start:o.end),e[st]=ut+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),c("staticPage",{directions:g,init:function(e,t,n){f.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?ht[n._direction].reverse:n._direction;e.clip=u(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},face:function(e){return this._face=e,this}}),c("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).staticPage(i,l).face(!0).setReverse(o),C.fx(n.back).staticPage(r,l).setReverse(o),C.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),C.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[ct]=dt,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),c("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){f.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).turningPage(i,a).face(!0).setReverse(o),C.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[ct]=dt,e.transformStyle="preserve-3d"}}),w=!E.mobileOS.android,b=".km-touch-scrollbar, .km-actionsheet-wrapper",c("replace",{_before:e.noop,_after:e.noop,init:function(t,n,i){f.prototype.init.call(this,t),this._previous=e(n),this._transitionClass=i},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(b))){var n=this.container;n.removeClass("k-fx-end").removeClass(this._containerClass()).off(I.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),w&&n.css(nt,""),this.isAbsolute||this._both().css(rt,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n=this,i=n.element,r=n._previous,o=i.parents().filter(r.parents()).first(),a=n._both(),s=e.Deferred(),l=i.css(rt);return o.length||(o=i.parent()),this.container=o,this.deferred=s,this.isAbsolute="absolute"==l,this.isAbsolute||a.css(rt,"absolute"),w&&(t=o.css(nt),o.css(nt,"hidden")),I?(i.addClass("k-fx-hidden"),o.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),o.on(I.event,this.completeProxy),C.animationFrame(function(){i.removeClass("k-fx-hidden").addClass("k-fx-next"),r.css("display","").addClass("k-fx-current"),n._before(r,i),C.animationFrame(function(){o.removeClass("k-fx-start").addClass("k-fx-end"),n._after(r,i)})})):this.complete(),s.promise()},stop:function(){this.complete()}}),k=C.Class.extend({init:function(){var e=this;e._tickProxy=A(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,C.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):C.animationFrame(e._tickProxy))}}),x=k.extend({init:function(e){var t=this;D(t,e),k.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),D(x,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeOutBack:function(e,t,n,i,r){return r=1.70158,n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}}),S.Animation=k,S.Transition=x,S.createEffect=c,S.box=function(t){t=e(t);var n=t.offset();return n.width=t.outerWidth(),n.height=t.outerHeight(),n},S.transformOrigin=function(e,t){var n=(e.left-t.left)*t.width/(t.width-e.width),i=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(n)?0:n,y:isNaN(i)?0:i}},S.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},S.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e){function t(e){if(!e)return{};var t=e.match(v)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}var n=window.kendo,i=n.Observable,r="SCRIPT",o="init",a="show",s="hide",l="transitionStart",c="transitionEnd",d="attach",u="detach",h=/unrecognized expression/,p=i.extend({init:function(e,t){var r=this;t=t||{},i.fn.init.call(r),r.content=e,r.id=n.guid(),r.tagName=t.tagName||"div",r.model=t.model,r._wrap=t.wrap!==!1,this._evalTemplate=t.evalTemplate||!1,r._fragments={},r.bind([o,a,s,l,c],t)},render:function(t){var i=this,r=!i.element;return r&&(i.element=i._createElement()),t&&e(t).append(i.element),r&&(n.bind(i.element,i.model),i.trigger(o)),t&&(i._eachFragment(d),i.trigger(a)),i.element},clone:function(){return new f(this)},triggerBeforeShow:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideStart:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger(l,{type:e})},afterTransition:function(e){this.trigger(c,{type:e})},hide:function(){this._eachFragment(u),this.element.detach(),this.trigger(s)},destroy:function(){var e=this.element;e&&(n.unbind(e),n.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t,i,o=this,a="<"+o.tagName+" />";try{i=e(document.getElementById(o.content)||o.content),i[0].tagName===r&&(i=i.html())}catch(s){h.test(s.message)&&(i=o.content)}return"string"==typeof i?(i=i.replace(/^\s+|\s+$/g,""),o._evalTemplate&&(i=n.template(i)(o.model||{})),t=e(a).append(i),o._wrap||(t=t.contents())):(t=i,o._wrap&&(t=t.wrapAll(a).parent())),t}}),f=n.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideStart:e.noop,hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,n){this.container(e).show(t,n)},_createContainer:function(e){var t,n=this.render(),i=n.find(e);if(!i.length&&n.is(e)){if(!n.is(e))throw Error("can't find a container with the specified "+e+" selector");i=n}return t=new _(i),t.bind("accepted",function(e){e.view.render(i)}),t}}),m=p.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),v=/^(\w+)(:(\w+))?( (\w+))?$/,_=i.extend({init:function(e){i.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,i,r){if(!e.triggerBeforeShow())return this.trigger("after"),!1;r=r||e.id;var o=this,a=e===o.view?e.clone():o.view,s=o.history,l=s[s.length-2]||{},c=l.id===r,d=i||(c?s[s.length-1].transition:e.transition),u=t(d);return o.running&&o.effect.stop(),"none"===d&&(d=null),o.trigger("accepted",{view:e}),o.view=e,o.previous=a,o.running=!0,c?s.pop():s.push({id:r,transition:d}),a?(a.hideStart(),d&&n.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),c&&!i&&(u.reverse=!u.reverse),o.effect=n.fx(e.element).replace(a.element,u.type).beforeTransition(function(){e.beforeTransition("show"),a.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),a.afterTransition("hide")}).direction(u.direction).setReverse(u.reverse),o.effect.run().then(function(){o.end()})):(e.showStart(),o.end()),!0):(e.showStart(),e.showEnd(),o.after(),!0)}});n.ViewContainer=_,n.Fragment=m,n.Layout=g,n.View=p,n.ViewClone=f}(window.kendo.jQuery),function(e){function t(){this.node=null}function n(e,t,n){this.nodeName=e,this.attr=t||{},this.cssText=null,this.children=n||[]}function i(e){this.nodeValue=e}function r(e){this.html=e}function o(e){return new r(e)}function a(e,t,i){return new n(e,t,i)}function s(e){return new i(e)}function l(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node)}},n.prototype=new t,n.prototype.render=function(e,t){var n,i,r,o,a,s,l,c,d=this.children,u=d.length;if(t&&t.nodeName===this.nodeName){if(n=t.node,r=t.children,Math.abs(r.length-u)>2)return void this.render({appendChild:function(n){e.replaceChild(n,t.node)}},null);for(i=0;u>i;i++)d[i].render(n,r[i]);for(i=u,u=r.length;u>i;i++)r[i].remove()}else{for(t&&(t.remove(),t=null),n=document.createElement(this.nodeName),i=0;u>i;i++)d[i].render(n,null);e.appendChild(n)}o=this.attr;for(a in o)if(!t||o[a]!==t.attr[a])if(void 0!==n[a])if("style"!==a)n[a]=o[a];else{s="",l=o[a];for(c in l)s+=c,s+=":",s+=l[c],s+=";";t&&t.cssText===s||(n.style.cssText=s),this.cssText=s}else n.setAttribute(a,o[a]);if(t)for(a in t.attr)void 0===o[a]&&(void 0!==n[a]?"style"===a?n.style.cssText="":"className"===a?n[a]="":n.removeAttribute(a):n.removeAttribute(a));this.node=n},i.prototype=new t,i.prototype.nodeName="#text",i.prototype.render=function(e,t){var n;t&&t.nodeName===this.nodeName?(n=t.node,this.nodeValue!==t.nodeValue&&(n.nodeValue=this.nodeValue)):(t&&t.remove(),n=document.createTextNode(this.nodeValue),e.appendChild(n)),this.node=n},r.prototype={nodeName:"#html",remove:function(){for(var e=0;this.nodes.length>e;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){var n,i;if(t&&t.nodeName===this.nodeName&&t.html===this.html)this.nodes=t.nodes.slice(0);else for(t&&t.remove(),n=e.lastChild,e.insertAdjacentHTML("beforeend",this.html),this.nodes=[],i=n?n.nextSibling:e.firstChild;i;i=i.nextSibling)this.nodes.push(i)}},l.prototype={html:o,element:a,text:s,render:function(e){var t,n,i=this.children;for(t=0,n=e.length;n>t;t++)e[t].render(this.root,i[t]);for(t=n;i.length>t;t++)i[t].remove();this.children=e}},e.dom={html:o,text:s,element:a,Tree:l}}(window.kendo),function(e){function t(e){var n=Math.floor(e/26)-1;return(n>=0?t(n):"")+String.fromCharCode(65+e%26)}function n(e,n){return t(n)+(e+1)}function i(e){return 6>e.length&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),e=e.substring(1).toUpperCase(),8>e.length&&(e="FF"+e),e}var r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',o=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),a=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),s=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),l=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<sheet name="${sheets[idx].options.title}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets><calcPr calcId="145621" /></workbook>'),c=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView tabSelected="1" workbookViewId="0"># if (freezePane) { #<pane state="frozen"# if (freezePane.colSplit) { # xSplit="${freezePane.colSplit}"# } ## if (freezePane.rowSplit) { # ySplit="${freezePane.rowSplit}"# } # topLeftCell="${String.fromCharCode(65 + (freezePane.colSplit || 0))}${(freezePane.rowSplit || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25" /># if (columns) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## if (column.width) { #<col min="${ci+1}" max="${ci+1}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="${(((column.width)/7)*100+0.5)/100}" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; #<row r="${ri + 1}"># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="${cell.ref}"# if (cell.style) { # s="${cell.style}" # } ## if (cell.type) { # t="${cell.type}"# } #># if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),d=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),u=e.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),h=e.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.fontName) { #<name val="${font.fontName}" /># } else { #<name val="Calibri" /><scheme val="minor" /># } #<family val="2" /></font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfid="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.hAlign || style.vAlign) { # applyAlignment="1"# } #># if (style.hAlign || style.vAlign) { #<alignment# if (style.hAlign) { # horizontal="${style.hAlign}"# } ## if (style.vAlign) { # vertical="${style.vAlign}"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),p=e.Class.extend({init:function(e,t,n){this.options=e,this._strings=t,this._styles=n,this._mergeCells=[]},toXML:function(){var e=this.options.rows||[],t=this.options.filter;return c({freezePane:this.options.freezePane,columns:this.options.columns,data:$.map(e,$.proxy(this._row,this,e)),mergeCells:this._mergeCells,filter:t?{from:n(0,t.from),to:n(0,t.to)}:null})},_row:function(e,t,n){return this._cellIndex=0,{data:$.map(t.cells,$.proxy(this._cell,this,e,n))}},_lookupString:function(e){var t="$"+e,n=this._strings.indexes[t];return void 0!==n?e=n:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(t){var n,i=e.stringify(t);return"{}"==i?0:(n=$.inArray(i,this._styles),0>n&&(n=this._styles.push(i)-1),n+1)},_cell:function(t,i,r){var o,a,s,l,c,d,u,h,p,f,g;if(!r)return void this._cellIndex++;if(o=r.value,a={bold:r.bold,color:r.color,background:r.background,italic:r.italic,underline:r.underline,fontName:r.fontName,fontSize:r.fontSize,format:r.format,hAlign:r.hAlign,vAlign:r.vAlign},s=this.options.columns||[],l=s[this._cellIndex],l&&l.autoWidth&&(l.width=Math.max(l.width||0,(""+o).length)),c=typeof o,"string"===c?(o=this._lookupString(o),c="s"):"number"===c?c="n":"boolean"===c?(c="b",o=+o):o&&o.getTime?(c="d",o=e.timezone.remove(o,"Etc/UTC").toJSON(),a.format||(a.format="mm-dd-yy")):(c=null,o=""),a=this._lookupStyle(a),d={value:o,type:c,style:a,ref:n(i,this._cellIndex)},u=r.colSpan||1,h=r.rowSpan||1,u>1||h>1){for(p=[d],f=1;u>f;f++)this._cellIndex++,p[f]={ref:n(i,this._cellIndex)};for(g=1;h>g;g++)t[i+g]&&t[i+g].cells.splice(this._cellIndex,0,{});this._mergeCells.push(d.ref+":"+n(i+h-1,this._cellIndex)),d=p}return this._cellIndex++,d}}),f={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},g=e.Class.extend({init:function(e){this.options=e||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=$.map(this.options.sheets||[],$.proxy(function(e){return new p(e,this._strings,this._styles)},this))},toDataURL:function(){var t,n,c,p,g,m,v,_,y,w,b,k,x;if("undefined"==typeof JSZip)throw Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");for(t=new JSZip,n=t.folder("docProps"),n.file("core.xml",o({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()})),c=this._sheets.length,n.file("app.xml",a({sheets:this._sheets})),p=t.folder("_rels"),p.file(".rels",r),g=t.folder("xl"),m=g.folder("_rels"),m.file("workbook.xml.rels",d({count:c})),g.file("workbook.xml",l({sheets:this._sheets})),v=g.folder("worksheets"),_=0;c>_;_++)v.file(e.format("sheet{0}.xml",_+1),this._sheets[_].toXML());
return y=$.map(this._styles,$.parseJSON),w=function(e){return e.underline||e.bold||e.italic||e.color||e.fontName||e.fontSize},b=$.map(y,function(e){return e.color&&(e.color=i(e.color)),w(e)?e:void 0}),k=$.map(y,function(e){return e.format&&void 0===f[e.format]?e:void 0}),x=$.map(y,function(e){return e.background?(e.background=i(e.background),e):void 0}),g.file("styles.xml",h({fonts:b,fills:x,formats:k,styles:$.map(y,function(e){var t={};return w(e)&&(t.fontId=$.inArray(e,b)+1),e.background&&(t.fillId=$.inArray(e,x)+2),t.hAlign=e.hAlign,t.vAlign=e.vAlign,e.format&&(t.numFmtId=void 0!==f[e.format]?f[e.format]:165+$.inArray(e,k)),t})})),g.file("sharedStrings.xml",u(this._strings)),t.file("[Content_Types].xml",s({count:c})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+t.generate({compression:"DEFLATE"})}});e.ooxml={Workbook:g,Worksheet:p}}(kendo),function(e,t){t.ExcelExporter=t.Class.extend({init:function(n){n.columns=this._trimColumns(n.columns||[]),this.columns=e.map(this._leafColumns(n.columns||[]),this._prepareColumn),this.options=n;var i=n.dataSource;this.dataSource=i instanceof t.data.DataSource?new i.constructor(e.extend({},i.options,{page:n.allPages?0:i.page(),filter:i.filter(),pageSize:n.allPages?i.total():i.pageSize(),sort:i.sort(),group:i.group(),aggregate:i.aggregate()})):t.data.DataSource.create(i),i instanceof t.data.TreeListDataSource&&this.dataSource.data(i.view().toJSON())},_trimColumns:function(t){var n=this;return e.grep(t,function(e){var t=!(!e.field||e.hidden);return!t&&e.columns&&(t=n._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(this._leafColumns(e[t].columns)):n.push(e[t]);return n},workbook:function(){var t=this.dataSource.fetch();return t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]}},this))},_prepareColumn:function(n){return n.field&&!n.hidden?e.extend({},n,{groupHeaderTemplate:t.template(n.groupHeaderTemplate||"${title}: ${value}"),groupFooterTemplate:n.groupFooterTemplate?t.template(n.groupFooterTemplate):null,footerTemplate:n.footerTemplate?t.template(n.footerTemplate):null}):void 0},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRows:function(t,n){var i=this._depth(),r=e.map(t,e.proxy(function(t){var r,o,a,s,l,c,d,u;return this._hierarchical()&&(n=this.dataSource.level(t)+1),r=e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}),i&&t.items?(o=e.grep(this.columns,function(e){return e.field==t.field})[0],a=o&&o.title?o.title:t.field,s=o?o.groupHeaderTemplate:null,l=a+": "+t.value,c=e.extend({title:a,field:t.field,value:t.value,aggregates:t.aggregates},t.aggregates[t.field]),s&&(l=s(c)),r.push({value:l,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+i-n}),d=this._dataRows(t.items,n+1),d.unshift({type:"group-header",cells:r}),d.concat(this._footer(t,n+1))):(u=e.map(this.columns,e.proxy(this._cell,this,t)),this._hierarchical()&&(u[0].colSpan=i-n+1),{type:"data",cells:r.concat(u)})},this));return r},_footer:function(t,n){var i=[],r=!1,o=e.map(this.columns,function(e){return e.groupFooterTemplate?(r=!0,{background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(t.aggregates[e.field])}):{background:"#dfdfdf",color:"#333"}});return r&&i.push({type:"group-footer",cells:e.map(Array(n),function(){return{background:"#dfdfdf",color:"#333"}}).concat(o)}),i},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var n=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=n._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,n){var i=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(i[0].colSpan=this._depth()+1),{type:"header",cells:e.map(Array(n.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(i)}},_prependHeaderRows:function(e){var t,n=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];for(this._prepareHeaderRows(i,this.options.columns),t=i.length-1;t>=0;t--)e.unshift(this._headerRow(i[t],n))},_prepareHeaderRows:function(e,t,n,i){var r,o,a,s=i||e[e.length-1],l=e[s.index+1],c=0;for(a=0;t.length>a;a++)r=t[a],this._isColumnVisible(r)&&(o={title:r.title||r.field,colSpan:0},s.cells.push(o),r.columns&&r.columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),o.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,o,l),c+=o.colSpan-1,s.rowSpan=e.length-s.index));n&&(n.colSpan+=c)},_rows:function(){var t,n,i=this.dataSource.group(),r=this._dataRows(this.dataSource.view(),0);return this.columns.length&&(this._prependHeaderRows(r),t=!1,n=e.map(this.columns,e.proxy(function(e){return e.footerTemplate?(t=!0,{background:"#dfdfdf",color:"#333",value:e.footerTemplate(this.dataSource.aggregates()[e.field])}):{background:"#dfdfdf",color:"#333"}},this)),t&&r.push({type:"footer",cells:e.map(Array(i.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(n)})),r},_headerDepth:function(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=this._headerDepth(e[t].columns),n>r&&(r=n));return i+r},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),n=this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked}))).length;return{rowSplit:this._headerDepth(t),colSplit:n?n+this.dataSource.group().length:0}},_cell:function(e,t){return t.field?{value:e.get(t.field)}:void 0},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,n,i=this.dataSource,r=0;if(this._hierarchical()){for(e=i.view(),t=0;e.length>t;t++)n=i.level(e[t]),n>r&&(r=n);r++}else r=i.group().length;return r},_columns:function(){var t=this._depth(),n=e.map(Array(t),function(){return{width:20}});return n.concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:e.width?!1:!0}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var n=this.options.excel||{},i=new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:n.allPages,filterable:n.filterable,hierarchy:n.hierarchy});i.workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var i=new t.ooxml.Workbook(e);t.saveAs({dataURI:i.toDataURL(),fileName:e.fileName||n.fileName,proxyURL:n.proxyURL,forceProxy:n.forceProxy})}},this))}}}(kendo.jQuery,kendo),function(){kendo.data.transports.signalr=kendo.data.RemoteTransport.extend({init:function(e){var t,n=e&&e.signalr?e.signalr:{},i=n.promise;if(!i)throw Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw Error('The "promise" option must be a Promise.');if(this.promise=i,t=n.hub,!t)throw Error('The "hub" option must be set.');if("function"!=typeof t.on||"function"!=typeof t.invoke)throw Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=t,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(e,t){var n,i,r=this.hub,o=this.options.signalr.server;if(!o||!o[t])throw Error(kendo.format('The "server.{0}" option must be set.',t));n=[o[t]],i=this.parameterMap(e.data,t),$.isEmptyObject(i)||n.push(i),this.promise.done(function(){r.invoke.apply(r,n).done(e.success).fail(e.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}})}(),function(e,t,n){function i(e,r){var a,d;if(null==e||"none"==e)return null;if(e instanceof s)return e;if(e=e.toLowerCase(),a=o.exec(e))return e="transparent"==a[1]?new l(1,1,1,0):i(u.namedColors[a[1]],r),e.match=[a[1]],e;if((a=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e))?d=new c(n(a[1],16),n(a[2],16),n(a[3],16),1):(a=/^#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e))?d=new c(n(a[1]+a[1],16),n(a[2]+a[2],16),n(a[3]+a[3],16),1):(a=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),1):(a=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?d=new c(n(a[1],10),n(a[2],10),n(a[3],10),t(a[4])):(a=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,1):(a=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(d=new l(t(a[1])/100,t(a[2])/100,t(a[3])/100,t(a[4]))),d)d.match=a;else if(!r)throw Error("Cannot parse color: "+e);return d}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}var o,a,s,l,c,d,u=function(e){var t,n,i,r,o,a=this,s=u.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)};u.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return e=e||"black","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=u.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=Math.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return Math.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},u.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[n(e[1],10),n(e[2],10),n(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[n(e[1],16),n(e[2],16),n(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[n(e[1]+e[1],16),n(e[2]+e[2],16),n(e[3]+e[3],16)]}}],u.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},o=["transparent"];for(a in u.namedColors)u.namedColors.hasOwnProperty(a)&&o.push(a);o=RegExp("^("+o.join("|")+")(\\W|$)","i"),s=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&9>kendo.support.browser.version?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==i(e).toCssRgba()},diff:function(e){if(null==e)return 0/0;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new c(e.r,e.g,e.b,e.a)),e}}),l=s.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new d(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,e*=60,0>e&&(e+=360)):(t=0,e=-1),new d(e,t,s,this.a))},toBytes:function(){return new c(255*this.r,255*this.g,255*this.b,this.a)}}),c=l.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new l(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),d=s.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,c=this.h,d=this.s,u=this.v;if(0===d)t=n=i=u;else switch(c/=60,e=Math.floor(c),r=c-e,o=u*(1-d),a=u*(1-d*r),s=u*(1-d*(1-r)),e){case 0:t=u,n=s,i=o;break;case 1:t=a,n=u,i=o;break;case 2:t=o,n=u,i=s;break;case 3:t=o,n=a,i=u;break;case 4:t=s,n=o,i=u;break;default:t=u,n=o,i=a}return new l(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),u.fromBytes=function(e,t,n,i){return new c(e,t,n,null!=i?i:1)},u.fromRGB=function(e,t,n,i){return new l(e,t,n,null!=i?i:1)},u.fromHSV=function(e,t,n,i){return new d(e,t,n,null!=i?i:1)},kendo.Color=u,kendo.parseColor=i}(window.kendo.jQuery,parseFloat,parseInt),function(e){function t(e){return typeof e!==F}function n(e,t){var n=i(t);return A.round(e*n)/n}function i(e){return e?A.pow(10,e):1}function r(e,t,n){return A.max(A.min(e,n),t)}function o(e){return e*P}function a(e){return e/P}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e,n){return t(e)?e:n}function c(e){return e*e}function d(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function u(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function h(e){return u(d(e))}function p(e){var t,n=e.length,i=I,r=z;for(t=0;n>t;t++)r=A.max(r,e[t]),i=A.min(i,e[t]);return{min:i,max:r}}function f(e){return p(e).min}function g(e){return p(e).max}function m(e){return _(e).min}function v(e){return _(e).max}function _(e){var t,n,i,r=I,o=z;for(t=0,n=e.length;n>t;t++)i=e[t],null!==i&&isFinite(i)&&(r=A.min(r,i),o=A.max(o,i));return{min:r===I?void 0:r,max:o===z?void 0:o}}function y(e){return e?e[e.length-1]:void 0}function w(e,t){return e.push.apply(e,t),e}function b(e){return E.template(e,{useWithBlock:!1,paramName:"d"})}function k(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}function x(e){var t,n="";for(t=0;e.length>t;t++)n+=k(e[t][0],e[t][1]);return n}function C(e){var n,i,r="";for(n=0;e.length>n;n++)i=e[n][1],t(i)&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0}function S(e){return"string"!=typeof e&&(e+="px"),e}function T(e){var t,n,i=[];if(e)for(t=E.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function D(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}var A=Math,E=window.kendo,M=E.deepExtend,P=A.PI/180,I=Number.MAX_VALUE,z=-Number.MAX_VALUE,F="undefined",R=Date.now;R||(R=function(){return(new Date).getTime()}),M(E,{util:{MAX_NUM:I,MIN_NUM:z,append:w,arrayLimits:p,arrayMin:f,arrayMax:g,defined:t,deg:a,hashKey:u,hashObject:h,isNumber:s,isTransparent:D,last:y,limitValue:r,now:R,objectKey:d,round:n,rad:o,renderAttr:k,renderAllAttr:x,renderPos:T,renderSize:S,renderStyle:C,renderTemplate:b,sparseArrayLimits:_,sparseArrayMin:m,sparseArrayMax:v,sqr:c,valueOrDefault:l}}),E.dataviz.util=E.util}(window.kendo.jQuery),function(){function e(e){var n,i,r,a,s,l,c,d="",u=0;for(e=t(e);e.length>u;)n=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),a=n>>2,s=(3&n)<<4|i>>4,l=(15&i)<<2|r>>6,c=63&r,isNaN(i)?l=c=64:isNaN(r)&&(c=64),d=d+o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c);return d}function t(e){var t,n,i;for(e=e.replace(/\r\n/g,"\n"),t="",n=0;e.length>n;n++)i=e.charCodeAt(n),128>i?t+=r(i):2048>i?(t+=r(192|i>>>6),t+=r(128|63&i)):65536>i&&(t+=r(224|i>>>12),t+=r(128|i>>>6&63),t+=r(128|63&i));return t}var n=window.kendo,i=n.deepExtend,r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i(n.util,{encodeBase64:e,encodeUTF8:t})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)n=r[i],n[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof m?e:new m(e)}function n(e){return e&&y.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=v.atan2(i.c*n,i.a*t),0!==i.b&&(o=v.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)i=t[n],r=i.charAt(0).toUpperCase()+i.substring(1,i.length),e["set"+r]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n){e>t&&(t+=360);var i=v.abs(t-e);return n||(i=360-i),i}function c(e,t,n,i,r,o){var a=D((r-e)/n,3),s=D((o-t)/i,3);return D(T(v.atan2(s,a)))}function d(e,t,n,i,r,o,a,s){var d,u,h,p,f,g,m,y,w,b,k,x,C,S,T,D,A,E;if(t!==i)w=n-e,b=i-t,k=_(r,2),x=_(o,2),C=(x*w*(e+n)+k*b*(t+i))/(2*k*b),S=C-i,T=-(w*x)/(k*b),f=1/k+_(T,2)/x,g=2*(T*S/x-n/k),m=_(n,2)/k+_(S,2)/x-1,y=v.sqrt(_(g,2)-4*f*m),d=(-g-y)/(2*f),u=C+T*d,h=(-g+y)/(2*f),p=C+T*h;else{if(e===n)return!1;g=-2*i,m=_((n-e)*o/(2*r),2)+_(i,2)-_(o,2),y=v.sqrt(_(g,2)-4*m),d=h=(e+n)/2,u=(-g-y)/2,p=(-g+y)/2}return D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i),E=l(D,A,s),(a&&180>=E||!a&&E>180)&&(d=h,u=p,D=c(d,u,r,o,e,t),A=c(d,u,r,o,n,i)),{center:new P(d,u),startAngle:D,endAngle:A}}var u,h,p,f,g,m,v=Math,_=v.pow,y=window.kendo,w=y.Class,b=y.deepExtend,k=y.mixins.ObserversMixin,x=y.util,C=x.defined,S=x.rad,T=x.deg,D=x.round,A=v.PI/2,E=x.MIN_NUM,M=x.MAX_NUM,P=w.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new P(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return C(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return v.sqrt(t*t+n*n)},round:function(e){return this.x=D(this.x,e),this.y=D(this.y,e),this.geometryChange(),this},toArray:function(e){var t=C(e),n=t?D(this.x,e):this.x,i=t?D(this.y,e):this.y;return[n,i]}});o(P.fn,["x","y"]),b(P.fn,k),P.fn.toString=function(e,t){var n=this.x,i=this.y;return C(e)&&(n=D(n,e),i=D(i,e)),t=t||" ",n+t+i},P.create=function(e,t){return C(e)?e instanceof P?e:1===arguments.length&&2===e.length?new P(e[0],e[1]):new P(e,t):void 0},P.min=function(){var e,t,n=x.MAX_NUM,i=x.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.min(t.x,n),i=v.min(t.y,i);return new P(n,i)},P.max=function(){var e,t,n=x.MIN_NUM,i=x.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.max(t.x,n),i=v.max(t.y,i);return new P(n,i)},P.minPoint=function(){return new P(E,E)},P.maxPoint=function(){return new P(M,M)},P.ZERO=new P(0,0),u=w.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new u(this.width,this.height)},toArray:function(e){var t=C(e),n=t?D(this.width,e):this.width,i=t?D(this.height,e):this.height;return[n,i]}}),o(u.fn,["width","height"]),b(u.fn,k),u.create=function(e,t){return C(e)?e instanceof u?e:1===arguments.length&&2===e.length?new u(e[0],e[1]):new u(e,t):void 0},u.ZERO=new u(0,0),h=w.extend({init:function(e,t){this.setOrigin(e||new P),this.setSize(t||new u)},clone:function(){return new h(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",P.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",u.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return h.fromPoints(t,n,i,r)}}),b(h.fn,k),h.fromPoints=function(){var e=P.min.apply(this,arguments),t=P.max.apply(this,arguments),n=new u(t.x-e.x,t.y-e.y);return new h(e,n)},h.union=function(e,t){return h.fromPoints(P.min(e.topLeft(),t.topLeft()),P.max(e.bottomRight(),t.bottomRight()))},h.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},t.right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?h.fromPoints(new P(v.max(e.left,t.left),v.max(e.top,t.top)),new P(v.min(e.right,t.right),v.min(e.bottom,t.bottom))):void 0},p=w.extend({init:function(e,t){this.setCenter(e||new P),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new p(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(S(e))},bbox:function(e){var t,n,r,o,a=P.maxPoint(),s=P.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*A).transformCopy(e),r=this._pointAt(l.y+t*A).transformCopy(e),o=new P(n.x,r.y),a=P.min(a,o),s=P.max(s,o);return h.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new P(t.x-n*v.cos(e),t.y-n*v.sin(e))}}),o(p.fn,["radius"]),b(p.fn,k),f=w.extend({init:function(e,t){this.setCenter(e||new P),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new f(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",P.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=S(e);return new P(t.x+this.radiusX*v.cos(n),t.y+this.radiusY*v.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=v.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=a+r*d,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,c=i(this.center,this.radiusX,this.radiusY,e),d=T(c.x),u=T(c.y),p=o.pointAt(s).transformCopy(e),f=o.pointAt(l).transformCopy(e),g=P.min(p,f),m=P.max(p,f),v=r(d,s),_=r(u,s);l>v||l>_;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>_&&(n=o.pointAt(_).transformCopy(e),_+=90),p=new P(t.x,n.y),g=P.min(g,p),m=P.max(m,p);return h.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(S(t)-S(e))/3,l=new P(i.x+s*o.x,i.y+s*o.y),c=new P(r.x-s*a.x,r.y-s*a.y);return{p1:i,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,n=S(e);return new P(-t.radiusX*v.sin(n),t.radiusY*v.cos(n))}}),o(f.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),b(f.fn,k),f.fromPoints=function(e,t,n,i,r,o){var a=d(e.x,e.y,t.x,t.y,n,i,r,o);return new f(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},g=w.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new g(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new g(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return e?this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f:!1},round:function(e){return this.a=D(this.a,e),this.b=D(this.b,e),this.c=D(this.c,e),this.d=D(this.d,e),this.e=D(this.e,e),this.f=D(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(C(e))for(t=0;n.length>t;t++)n[t]=D(n[t],e);return n}}),g.fn.toString=function(e,t){return this.toArray(e).join(t||",")},g.translate=function(e,t){return new g(1,0,0,1,e,t)},g.unit=function(){return new g(1,0,0,1,0,0)},g.rotate=function(e,t,n){var i=new g;return i.a=v.cos(S(e)),i.b=v.sin(S(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},g.scale=function(e,t){return new g(e,0,0,t,0,0)},g.IDENTITY=g.unit(),m=w.extend({init:function(e){this._matrix=e||g.unit()},clone:function(){return new m(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(g.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return C(t)||(t=e),n&&(n=P.create(n),this._matrix=this._matrix.multiplyCopy(g.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(g.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(g.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=P.create(t)||P.ZERO,this._matrix=this._matrix.multiplyCopy(g.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}}),b(m.fn,k),b(y,{geometry:{Arc:f,Circle:p,Matrix:g,Point:P,Rect:h,Size:u,Transformation:m,transform:t,toMatrix:n}}),y.dataviz.geometry=y.geometry}(window.kendo.jQuery),function(e){var t,n,i,r=e.noop,o=Object.prototype.toString,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.deepExtend,d=a.util,u=d.defined,h=a.Observable.extend({init:function(t,n){a.Observable.fn.init.call(this),this.options=c({},this.options,n),this.bind(this.events,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this.element=e(t),this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{},events:["click","mouseenter","mouseleave","resize"],draw:r,clear:r,destroy:r,resize:l.fn.resize,size:l.fn.size,getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var n,i=e(t.touch?t.touch.initialTouch:t.target);!n&&i.length>0&&(n=i[0]._kendoNode,!i.is(this.element)&&0!==i.length);)i=i.parent();return n?n.srcElement:void 0},_resize:r,_handler:function(e){var t=this;return function(n){var i=t.eventTarget(n);i&&t.trigger(e,{element:i,originalEvent:n})}}});h.create=function(e,t){return i.current.create(e,t)},t=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){var e,t;for(this.srcElement&&this.srcElement.removeObserver(this),e=this.childNodes,t=0;e.length>t;t++)this.childNodes[t].destroy();this.parent=null},load:r,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){var n,i=e+t;for(n=e;i>n;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),n=s.extend({init:function(e,t){var n,i;this.prefix=t||"";for(n in e)i=e[n],i=this._wrap(i,n),this[n]=i},get:function(e){return a.getter(e,!0)(this)},set:function(e,t){var n,i=a.getter(e,!0)(this);i!==t&&(n=this._set(e,this._wrap(t,e)),n||this.optionsChange({field:this.prefix+e,value:t}))},_set:function(e,t){var i,r,o,s=e.indexOf(".")>=0;if(s)for(i=e.split("."),r="";i.length>1;){if(r+=i.shift(),o=a.getter(r,!0)(this),o||(o=new n({},r+"."),o.addObserver(this),this[r]=o),o instanceof n)return o.set(i.join("."),t),s;r+="."}return this._clear(e),a.setter(e)(this,t),s},_clear:function(e){var t=a.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=o.call(e);return null!==e&&u(e)&&"[object Object]"===i&&(e instanceof n||e instanceof s||(e=new n(e,this.prefix+t+".")),e.addObserver(this)),e}}),c(n.fn,a.mixins.ObserversMixin),i=function(){this._items=[]},i.prototype={register:function(e,t,n){var i=this._items,r=i[0],o={name:e,type:t,order:n};!r||r.order>n?i.unshift(o):i.push(o)},create:function(e,t){var n,i,r=this._items,o=r[0];if(t&&t.type)for(n=t.type.toLowerCase(),i=0;r.length>i;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e,t):void a.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},i.current=new i,c(a,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:a.Color,BaseNode:t,OptionsStore:n,Surface:h,SurfaceFactory:i}}),a.dataviz.drawing=a.drawing
}(window.kendo.jQuery),function(){var e=window.kendo,t=e.deepExtend,n=e.util.defined,i="gradient",r={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var r,o=this.options;return n(e)?(e&&e.nodeType!=i?(r={color:e},n(t)&&(r.opacity=t),o.set("fill",r)):o.set("fill",e),this):o.get("fill")},stroke:function(e,t,i){return n(e)?(this.options.set("stroke.color",e),n(t)&&this.options.set("stroke.width",t),n(i)&&this.options.set("stroke.opacity",i),this):this.options.get("stroke")}},o={extend:function(e,t){e.traverse=function(e){var n,i,r=this[t];for(n=0;r.length>n;n++)i=r[n],i.traverse?i.traverse(e):e(i);return this}}};t(e.drawing,{mixins:{Paintable:r,Traversable:o}})}(window.kendo.jQuery),function(e){function t(e,t){return d.current.measure(e,t)}var n=document,i=window.kendo,r=i.Class,o=i.deepExtend,a=i.util,s=a.defined,l=1,c=r.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var t=this,n=t._map[e];return n?(n===t._head&&n!==t._tail&&(t._head=n.newer,t._head.older=null),n!==t._tail&&(n.older&&(n.older.newer=n.newer,n.newer.older=n.older),n.older=t._tail,n.newer=null,t._tail.newer=n,t._tail=n),n.value):void 0}}),d=r.extend({init:function(){this._cache=new c(1e3)},measure:function(e,t){var i,r,o,c,d,u=a.objectKey(t),h=a.hashKey(e+u),p=this._cache.get(h);if(p)return p;i={width:0,height:0,baseline:0},r=this._measureBox,o=this._baselineMarker.cloneNode(!1);for(c in t)d=t[c],s(d)&&(r.style[c]=d);return r.innerHTML=e,r.appendChild(o),n.body.appendChild(r),(e+"").length&&(i.width=r.offsetWidth-l,i.height=r.offsetHeight,i.baseline=o.offsetTop+l),this._cache.put(h,i),r.parentNode.removeChild(r),i}});d.fn._baselineMarker=e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+l+"px; height: "+l+"px;overflow: hidden;' />")[0],d.fn._measureBox=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space:nowrap !important;' />")[0],d.current=new d,o(i.drawing,{util:{TextMetrics:d,LRUCache:c,measureText:t}})}(window.kendo.jQuery),function(e){function t(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.bbox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function n(e,t,n){var i,r,o,a;for(r=0;e.length>r;r++)o=e[r],o.visible()&&(a=t?o.clippedBBox(n):o.rawBBox(),a&&(i=i?M.union(i,a):a));return i}function i(e,t){e.origin.x-=t,e.origin.y-=t,e.size.width+=2*t,e.size.height+=2*t}function r(e,t){for(var n=0;t.length>n;n++)e[t[n]]=o(t[n])}function o(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function a(e,t){for(var n=0;t.length>n;n++)e[t[n]]=s(t[n])}function s(e){var t="_"+e;return function(e){return V(e)?(this._observerField(t,E.create(e)),this.geometryChange(),this):this[t]}}function l(e,t){for(var n=0;t.length>n;n++)e[t[n]]=c(t[n])}function c(e){return function(t){return V(t)?(this.options.set(e,t),this):this.options.get(e)}}var d,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S=window.kendo,T=S.Class,D=S.deepExtend,A=S.geometry,E=A.Point,M=A.Rect,P=A.Size,I=A.Matrix,z=A.toMatrix,F=S.drawing,R=F.OptionsStore,B=Math,L=B.pow,O=S.util,H=O.append,N=O.arrayLimits,V=O.defined,U=O.last,W=O.valueOrDefault,j=S.mixins.ObserversMixin,G=e.inArray,q=[].push,$=[].pop,Y=[].splice,K=[].shift,Q=[].slice,X=[].unshift,J=T.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t,n;e=e||{},t=e.transform,n=e.clip,t&&(e.transform=A.transform(t)),n&&!n.id&&(n.id=S.guid()),this.options=new R(e),this.options.addObserver(this)},transform:function(e){return V(e)?void this.options.set("transform",A.transform(e)):this.options.get("transform")},parentTransform:function(){for(var e,t,n=this;n.parent;)n=n.parent,e=n.transform(),e&&(t=e.matrix().multiplyCopy(t||I.unit()));return t?A.transform(t):void 0},currentTransform:function(e){var t,n,i=this.transform(),r=z(i);return V(e)||(e=this.parentTransform()),t=z(e),n=r&&t?t.multiplyCopy(r):r||t,n?A.transform(n):void 0},visible:function(e){return V(e)?(this.options.set("visible",e),this):this.options.get("visible")!==!1},clip:function(e){var t=this.options;return V(e)?(e&&!e.id&&(e.id=S.guid()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return V(e)?(this.options.set("opacity",e),this):W(this.options.get("opacity"),1)},clippedBBox:function(e){var t,n=this._clippedBBox(e);return n?(t=this.clip(),t?M.intersect(n,t.bbox(e)):n):void 0},_clippedBBox:function(e){return this.bbox(e)}});D(J.fn,j),d=T.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=q.apply(this,e);return this._add(e),t},slice:Q,pop:function(){var e=this.length,t=$.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var n=Q.call(arguments,2),i=this._splice(e,t,n);return this._change(),i},shift:function(){var e=this.length,t=K.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=X.apply(this,e);return this._add(e),t},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},_splice:function(e,t,n){var i=Y.apply(this,[e,t].concat(n));return this._clearObserver(i),this._setObserver(n),i},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;e.length>t;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;e.length>t;t++)e[t].removeObserver(this)},_change:function(){}}),D(d.fn,j),u=J.extend({nodeType:"Group",init:function(e){J.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,n){this.trigger("childrenChange",{action:e,items:t,index:n})},append:function(){return H(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insertAt:function(e,t){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},remove:function(e){var t=G(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(e>=0&&this.children.length>e){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return n(this.children,this.currentTransform(e))},currentTransform:function(e){return J.fn.currentTransform.call(this,e)||null},_reparent:function(e,t){var n,i,r;for(n=0;e.length>n;n++)i=e[n],r=i.parent,r&&r!=this&&r.remove&&r.remove(i),i.parent=t}}),F.mixins.Traversable.extend(u.fn,"children"),h=J.extend({nodeType:"Text",init:function(e,t,n){J.fn.init.call(this,n),this.content(e),this.position(t||new A.Point),this.options.font||(this.options.font="12px sans-serif"),V(this.options.fill)||this.fill("#000")},content:function(e){return V(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){var e=F.util.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure(),t=this.position().clone();return new A.Rect(t,[e.width,e.height])},bbox:function(e){var t=z(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()}}),F.mixins.Paintable.extend(h.fn),a(h.fn,["position"]),p=J.extend({nodeType:"Circle",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Circle),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this._geometry.bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._geometry.bbox()}}),F.mixins.Paintable.extend(p.fn),r(p.fn,["geometry"]),f=J.extend({nodeType:"Arc",init:function(e,t){J.fn.init.call(this,t),this.geometry(e||new A.Arc),V(this.options.stroke)||this.stroke("#000")},bbox:function(e){var t=z(this.currentTransform(e)),n=this.geometry().bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e,t=new v,n=this.geometry().curvePoints();if(n.length>0)for(t.moveTo(n[0].x,n[0].y),e=1;n.length>e;e+=3)t.curveTo(n[e],n[e+1],n[e+2]);return t}}),F.mixins.Paintable.extend(f.fn),r(f.fn,["geometry"]),g=d.extend({_change:function(){this.geometryChange()}}),m=T.extend({init:function(e,t,n){this.anchor(e||new E),this.controlIn(t),this.controlOut(n)},bboxTo:function(e,t){var n,i=this.anchor().transformCopy(t),r=e.anchor().transformCopy(t);return n=this.controlOut()&&e.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),r):this._lineBoundingBox(i,r)},_lineBoundingBox:function(e,t){return M.fromPoints(e,t)},_curveBoundingBox:function(e,t,n,i){var r=[e,t,n,i],o=this._curveExtremesFor(r,"x"),a=this._curveExtremesFor(r,"y"),s=N([o.min,o.max,e.x,i.x]),l=N([a.min,a.max,e.y,i.y]);return M.fromPoints(new E(s.min,l.min),new E(s.max,l.max))},_curveExtremesFor:function(e,t){var n=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(n.min,t,e),max:this._calculateCurveAt(n.max,t,e)}},_calculateCurveAt:function(e,t,n){var i=1-e;return L(i,3)*n[0][t]+3*L(i,2)*e*n[1][t]+3*L(e,2)*i*n[2][t]+L(e,3)*n[3][t]},_curveExtremes:function(e,t,n,i){var r,o,a=e-3*t+3*n-i,s=-2*(e-2*t+n),l=e-t,c=B.sqrt(s*s-4*a*l),d=0,u=1;return 0===a?0!==s&&(d=u=-l/s):isNaN(c)||(d=(-s+c)/(2*a),u=(-s-c)/(2*a)),r=B.max(B.min(d,u),0),(0>r||r>1)&&(r=0),o=B.min(B.max(d,u),1),(o>1||0>o)&&(o=1),{min:r,max:o}}}),a(m.fn,["anchor","controlIn","controlOut"]),D(m.fn,j),v=J.extend({nodeType:"Path",init:function(e){J.fn.init.call(this,e),this.segments=new g,this.segments.addObserver(this),V(this.options.stroke)||(this.stroke("#000"),V(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var n=V(t)?new E(e,t):e,i=new m(n);return this.segments.push(i),this},curveTo:function(e,t,n){var i,r;return this.segments.length>0&&(i=U(this.segments),r=new m(n,t),this.suspend(),i.controlOut(e),this.resume(),this.segments.push(r)),this},arc:function(e,t,n,i,r){var o,a,s,l,c;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=O.rad(e),l=new E(a.x-n*B.cos(s),a.y-i*B.sin(s)),c=new A.Arc(l,{startAngle:e,endAngle:t,radiusX:n,radiusY:i,anticlockwise:r}),this._addArcSegments(c)),this},arcTo:function(e,t,n,i,r){var o,a,s;return this.segments.length>0&&(o=U(this.segments),a=o.anchor(),s=A.Arc.fromPoints(a,e,t,n,i,r),this._addArcSegments(s)),this},_addArcSegments:function(e){var t,n;for(this.suspend(),t=e.curvePoints(),n=1;t.length>n;n+=3)this.curveTo(t[n],t[n+1],t[n+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(e){var t=z(this.currentTransform(e)),n=this._bbox(t),r=this.options.get("stroke.width");return r&&i(n,r/2),n},rawBBox:function(){return this._bbox()},_bbox:function(e){var t,n,i,r,o=this.segments,a=o.length;if(1===a)n=o[0].anchor().transformCopy(e),t=new M(n,P.ZERO);else if(a>0)for(i=1;a>i;i++)r=o[i-1].bboxTo(o[i],e),t=t?M.union(t,r):r;return t}}),F.mixins.Paintable.extend(v.fn),v.fromRect=function(e,t){return new v(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},v.fromPoints=function(e,t){var n,i,r;if(e){for(n=new v(t),i=0;e.length>i;i++)r=E.create(e[i]),r&&(0===i?n.moveTo(r):n.lineTo(r));return n}},v.fromArc=function(e,t){var n=new v(t),i=e.startAngle,r=e.pointAt(i);return n.moveTo(r.x,r.y),n.arc(i,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),n},_=J.extend({nodeType:"MultiPath",init:function(e){J.fn.init.call(this,e),this.paths=new g,this.paths.addObserver(this),V(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var n=new v;return n.moveTo(e,t),this.paths.push(n),this},lineTo:function(e,t){return this.paths.length>0&&U(this.paths).lineTo(e,t),this},curveTo:function(e,t,n){return this.paths.length>0&&U(this.paths).curveTo(e,t,n),this},arc:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arc(e,t,n,i,r),this},arcTo:function(e,t,n,i,r){return this.paths.length>0&&U(this.paths).arcTo(e,t,n,i,r),this},close:function(){return this.paths.length>0&&U(this.paths).close(),this},bbox:function(e){return t(this.paths,!0,this.currentTransform(e))},rawBBox:function(){return t(this.paths,!1)},_clippedBBox:function(e){return n(this.paths,this.currentTransform(e))}}),F.mixins.Paintable.extend(_.fn),y=J.extend({nodeType:"Image",init:function(e,t,n){J.fn.init.call(this,n),this.src(e),this.rect(t||new A.Rect)},src:function(e){return V(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=z(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()}}),r(y.fn,["rect"]),w=T.extend({init:function(e,t,n){this.options=new R({offset:e,color:t,opacity:V(n)?n:1}),this.options.addObserver(this)}}),l(w.fn,["offset","color","opacity"]),D(w.fn,j),w.create=function(e){if(V(e)){var t;return t=e instanceof w?e:e.length>1?new w(e[0],e[1],e[2]):new w(e.offset,e.color,e.opacity)}},b=d.extend({_change:function(){this.optionsChange({field:"stops"})}}),k=T.extend({nodeType:"gradient",init:function(e){this.stops=new b(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=S.guid()},userSpace:function(e){return V(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,n=[];for(e=e||[],t=0;e.length>t;t++)n.push(w.create(e[t]));return n},addStop:function(e,t,n){this.stops.push(new w(e,t,n))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}}),D(k.fn,j,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}}),x=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.start(e.start||new E),this.end(e.end||new E(1,0))}}),a(x.fn,["start","end"]),C=k.extend({init:function(e){e=e||{},k.fn.init.call(this,e),this.center(e.center||new E),this._radius=V(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return V(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return V(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}}),a(C.fn,["center"]),D(F,{Arc:f,Circle:p,Element:J,ElementsArray:d,Gradient:k,GradientStop:w,Group:u,Image:y,LinearGradient:x,MultiPath:_,Path:v,RadialGradient:C,Segment:m,Text:h})}(window.kendo.jQuery),function(e){function t(e){var t=[];return e.replace(g,function(e,n){t.push(parseFloat(n))}),t}function n(e,t,n){var i,r=t?0:1;for(i=0;e.length>i;i+=2)e.splice(i+r,0,n)}function i(e,t){return e&&t?t.scaleCopy(2).translate(-e.x,-e.y):void 0}function r(e,t,n){var i=1/3;return t=t.clone().scale(2/3),{controlOut:t.clone().translateWith(e.scaleCopy(i)),controlIn:t.translateWith(n.scaleCopy(i))}}var o=window.kendo,a=o.drawing,s=o.geometry,l=o.Class,c=s.Point,d=o.deepExtend,u=e.trim,h=o.util,p=h.last,f=/([a-z]{1})([^a-z]*)(z)?/gi,g=/[,\s]?(-?(?:\d+\.)?\d+)/g,m="m",v="z",_=l.extend({parse:function(e,n){var i,r=new a.MultiPath(n),o=new c;return e.replace(f,function(e,n,a,s){var l=n.toLowerCase(),c=l===n,d=t(u(a));if(l===m&&(c?(o.x+=d[0],o.y+=d[1]):(o.x=d[0],o.y=d[1]),r.moveTo(o.x,o.y),d.length>2&&(l="l",d.splice(0,2))),y[l])y[l](r,{parameters:d,position:o,isRelative:c,previousCommand:i}),s&&s.toLowerCase()===v&&r.close();else if(l!==m)throw Error("Error while parsing SVG path. Unsupported command: "+l);i=l}),r}}),y={l:function(e,t){var n,i,r=t.parameters,o=t.position;for(n=0;r.length>n;n+=2)i=new c(r[n],r[n+1]),t.isRelative&&i.translateWith(o),e.lineTo(i.x,i.y),o.x=i.x,o.y=i.y},c:function(e,t){var n,i,r,o,a=t.parameters,s=t.position;for(o=0;a.length>o;o+=6)n=new c(a[o],a[o+1]),i=new c(a[o+2],a[o+3]),r=new c(a[o+4],a[o+5]),t.isRelative&&(i.translateWith(s),n.translateWith(s),r.translateWith(s)),e.curveTo(n,i,r),s.x=r.x,s.y=r.y},v:function(e,t){var i=t.isRelative?0:t.position.x;n(t.parameters,!0,i),this.l(e,t)},h:function(e,t){var i=t.isRelative?0:t.position.y;n(t.parameters,!1,i),this.l(e,t)},a:function(e,t){var n,i,r,o,a,s,l=t.parameters,d=t.position;for(n=0;l.length>n;n+=7)i=l[n],r=l[n+1],o=l[n+3],a=l[n+4],s=new c(l[n+5],l[n+6]),t.isRelative&&s.translateWith(d),e.arcTo(s,i,r,o,a),d.x=s.x,d.y=s.y},s:function(e,t){var n,r,o,a,s,l=t.parameters,d=t.position,u=t.previousCommand;for(("s"==u||"c"==u)&&(a=p(p(e.paths).segments).controlIn()),s=0;l.length>s;s+=4)o=new c(l[s],l[s+1]),r=new c(l[s+2],l[s+3]),t.isRelative&&(o.translateWith(d),r.translateWith(d)),n=a?i(a,d):d.clone(),a=o,e.curveTo(n,o,r),d.x=r.x,d.y=r.y},q:function(e,t){var n,i,o,a,s=t.parameters,l=t.position;for(a=0;s.length>a;a+=4)o=new c(s[a],s[a+1]),i=new c(s[a+2],s[a+3]),t.isRelative&&(o.translateWith(l),i.translateWith(l)),n=r(l,o,i),e.curveTo(n.controlOut,n.controlIn,i),l.x=i.x,l.y=i.y},t:function(e,t){var n,o,a,s,l,d=t.parameters,u=t.position,h=t.previousCommand;for(("q"==h||"t"==h)&&(s=p(p(e.paths).segments),o=s.controlIn().clone().translateWith(u.scaleCopy(-1/3)).scale(1.5)),l=0;d.length>l;l+=2)a=new c(d[l],d[l+1]),t.isRelative&&a.translateWith(u),o=o?i(o,u):u.clone(),n=r(u,o,a),e.curveTo(n.controlOut,n.controlIn,a),u.x=a.x,u.y=a.y}};_.current=new _,a.Path.parse=function(e,t){return _.current.parse(e,t)},d(a,{PathParser:_})}(window.kendo.jQuery),function(e){function t(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(o){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}function n(){var e=document.getElementsByTagName("base")[0],t="",n=document.location.href,i=n.indexOf("#");return e&&!d.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}function i(e){return"url("+n()+"#"+e+")"}function r(e){var t,n,i,r=new F({encodeText:!0}),o=e.clippedBBox();return o&&(t=o.getOrigin(),n=new p.Group,n.transform(h.transform().translate(-t.x,-t.y)),n.children.push(e),e=n),r.load([e]),i="<?xml version='1.0' ?><svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+r.render()+"</svg>",r.destroy(),i}function o(t,n){var i=r(t);return n&&n.raw||(i="data:image/svg+xml;base64,"+g.encodeBase64(i)),e.Deferred().resolve(i).promise()}function a(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==C)}function s(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=s._element;return t.innerHTML=e,t.textContent||t.innerText}var l,c=document,d=window.kendo,u=d.deepExtend,h=d.geometry,p=d.drawing,f=p.BaseNode,g=d.util,m=g.defined,v=g.isTransparent,_=g.renderAttr,y=g.renderAllAttr,w=g.renderTemplate,b=e.inArray,k="butt",x=p.DASH_ARRAYS,C="gradient",S="none",T=".kendo",D="solid",A=" ",E="http://www.w3.org/2000/svg",M="transform",P="undefined",I=p.Surface.extend({init:function(e,n){p.Surface.fn.init.call(this,e,n),this._root=new F(this.options),K(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,t(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+T,this._click),this.element.on("mouseover"+T,this._mouseenter),this.element.on("mouseout"+T,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(T)),p.Surface.fn.destroy.call(this)},translate:function(e){var t=d.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){this._root.load([e])},clear:function(){this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},_resize:function(){this._offset&&this.translate(this._offset)},_template:w("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+E+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),z=f.extend({init:function(e){f.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),f.fn.destroy.call(this)},load:function(e,t){var n,i,r,o,a=this,s=a.element;for(o=0;e.length>o;o++)i=e[o],r=i.children,n=new Y[i.nodeType](i),m(t)?a.insertAt(n,t):a.append(n),n.createDefinitions(),r&&r.length>0&&n.load(r),s&&n.attachTo(s,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var n,i=c.createElement("div");K(i,"<svg xmlns='"+E+"' version='1.1'>"+this.render()+"</svg>"),n=i.firstChild.firstChild,n&&(m(t)?e.insertBefore(n,e.childNodes[t]):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,n,i=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,n=0;i.length>n;n++)t=e.childNodes[n],i[n].setElement(t)},clear:function(){var e,t;for(this.clearDefinitions(),this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),f.fn.removeSelf.call(this)},template:w("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,n="";for(e=0;t.length>e;e++)n+=t[e].render();return n},optionsChange:function(e){var t=e.field,n=e.value;"visible"===t?this.css("display",n?"":S):l[t]&&a(t,n)?this.updateDefinition(t,n):"opacity"===t&&this.attr("opacity",n),f.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([M,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return y(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(M)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return e.visible===!1&&t.push(["display",S]),t},renderStyle:function(){return _("style",g.renderStyle(this.mapStyle()))},renderOpacity:function(){return _("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,n,i,r=this.srcElement,o=this.definitions;if(r){n=r.options;for(t in l)e=n.get(t),e&&a(t,e)&&(o[t]=e,i=!0);i&&this.definitionChange({action:"add",definitions:o})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,t){var n=this.definitions,r=n[e],o=l[e],a={};r&&(a[e]=r,this.definitionChange({action:"remove",definitions:a}),delete n[e]),t?(a[e]=t,this.definitionChange({action:"add",definitions:a}),n[e]=t,this.attr(o,i(t.id))):r&&this.removeAttr(o)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return y(this.mapDefinitions())},mapDefinitions:function(){var e,t=this.definitions,n=[];for(e in t)n.push([l[e],i(t[e].id)]);return n}}),F=z.extend({init:function(e){z.fn.init.call(this),this.options=e,this.defs=new R},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){f.fn.clear.call(this)},template:w("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),R=z.extend({init:function(){z.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:w("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,n=e.action;"add"==n?this.addDefinitions(t):"remove"==n&&this.removeDefinitions(t)},createDefinition:function(e,t){var n;return"clip"==e?n=B:"fill"==e&&(t instanceof p.LinearGradient?n=q:t instanceof p.RadialGradient&&(n=$)),new n(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var n,i=this.definitionMap,r=t.id,o=this.element,a=i[r];a?a.count++:(n=this.createDefinition(e,t),i[r]={element:n,count:1},this.append(n),o&&n.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t=this.definitionMap,n=e.id,i=t[n];i&&(i.count--,0===i.count&&(this.remove(b(i.element,this.childNodes),1),delete t[n]))}}),B=z.extend({init:function(e){z.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:w("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),L=z.extend({template:w("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==M&&this.transformChange(e.value),z.fn.optionsChange.call(this,e)}}),O=z.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case M:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}z.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t,n,i,r,o,a=e.segments,s=a.length;if(s>0){for(t=[],o=1;s>o;o++)i=this.segmentType(a[o-1],a[o]),i!==r&&(r=i,t.push(i)),t.push("L"===i?this.printPoints(a[o].anchor()):this.printPoints(a[o-1].controlOut(),a[o].controlIn(),a[o].anchor()));return n="M"+this.printPoints(a[0].anchor())+A+t.join(A),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,n=t.length,i=[];for(e=0;n>e;e++)i.push(t[e].toString(3));return i.join(A)},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!v(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),m(e.opacity)&&t.push(["stroke-opacity",e.opacity]),m(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke",S]),t},renderStroke:function(){return y(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t,n,i,r=e.width||1,o=e.dashType;if(o&&o!=D){for(t=x[o.toLowerCase()],n=[],i=0;t.length>i;i++)n.push(t[i]*r);return n.join(" ")}},renderLinecap:function(e){var t=e.dashType,n=e.lineCap;return t&&t!=D?k:n},mapFill:function(e){var t=[];return e&&e.nodeType==C||(e&&!v(e.color)?(t.push(["fill",e.color]),m(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill",S])),t},renderFill:function(){return y(this.mapFill(this.srcElement.options.fill))},template:w("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),H=O.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),N=O.extend({renderData:function(){var e,t,n=this.srcElement.paths;if(n.length>0){for(e=[],t=0;n.length>t;t++)e.push(this.printPath(n[t]));return e.join(" ")}}}),V=O.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:w("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),U=O.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",g.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&O.fn.content.call(this,this.srcElement.content()),O.fn.optionsChange.call(this,e)},mapStyle:function(){var e=O.fn.mapStyle.call(this),t=this.srcElement.options.font,n=this.root().options;return n&&n.encodeText&&(t=d.htmlEncode(t)),e.push(["font",t]),e},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},content:function(){var e=this.srcElement.content(),t=this.root().options;return t&&t.encodeText&&(e=s(e),e=d.htmlEncode(e)),e},template:w("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #><tspan>#= d.content() #</tspan></text>")}),W=O.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),O.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return y(this.mapPosition())},mapSource:function(){return[["xlink:href",this.srcElement.src()]]},renderSource:function(){return y(this.mapSource())},template:w("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),j=z.extend({template:w("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return _("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),G=z.extend({init:function(e){z.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,n=this.srcElement,i=n.stops,r=this.element;for(t=0;i.length>t;t++)e=new j(i[t]),this.append(e),r&&e.attachTo(r)},optionsChange:function(e){"gradient.stops"==e.field?(f.fn.clear.call(this),this.loadStops()):e.field==C&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return y(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),q=G.extend({template:w("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),n=e.end(),i=[["x1",t.x],["y1",t.y],["x2",n.x],["y2",n.y],this.mapSpace()];return i}}),$=G.extend({template:w("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),n=e.radius(),i=[["cx",t.x],["cy",t.y],["r",n],this.mapSpace()];
return i}}),Y={Group:L,Text:U,Path:O,MultiPath:N,Circle:V,Arc:H,Image:W},K=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+E+"'></svg>",t=c.createElement("div"),n=typeof DOMParser!=P;t.innerHTML=e,n&&t.firstChild.namespaceURI!=E&&(K=function(e,t){var n=new DOMParser,i=n.parseFromString(t,"text/xml"),r=c.adoptNode(i.documentElement);e.innerHTML="",e.appendChild(r)})}(),s._element=document.createElement("span"),l={clip:"clip-path",fill:"fill"},d.support.svg=function(){return c.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),d.support.svg&&p.SurfaceFactory.current.register("svg",I,10),u(p,{exportSVG:o,svg:{ArcNode:H,CircleNode:V,ClipNode:B,DefinitionNode:R,GradientStopNode:j,GroupNode:L,ImageNode:W,LinearGradientNode:q,MultiPathNode:N,Node:z,PathNode:O,RadialGradientNode:$,RootNode:F,Surface:I,TextNode:U,_exportGroup:r}})}(window.kendo.jQuery),function(e){function t(t,n){var i,r,o,a,s,l,c={width:"800px",height:"600px",cors:"Anonymous"},d=t.clippedBBox();return d&&(i=d.getOrigin(),r=new w.Group,r.transform(y.transform().translate(-i.x,-i.y)),r.children.push(t),t=r,o=d.getSize(),c.width=o.width+"px",c.height=o.height+"px"),n=p(c,n),a=e("<div />").css({display:"none",width:n.width,height:n.height}).appendTo(document.body),s=new T(a,n),s.draw(t),l=s.image(),l.always(function(){s.destroy(),a.remove()}),l}function n(e,t){var n,i,r;for(r=0;t.length>r;r++)i=t[r],n=h.parseColor(i.color()),n.a*=i.opacity(),e.addColorStop(i.offset(),n.toCssRgba())}var i,r,o,a,s,l,c,d,u=document,h=window.kendo,p=h.deepExtend,f=h.util,g=f.defined,m=f.isTransparent,v=f.renderTemplate,_=f.valueOrDefault,y=h.geometry,w=h.drawing,b=w.BaseNode,k="butt",x=w.DASH_ARRAYS,C=1e3/60,S="solid",T=w.Surface.extend({init:function(t,n){w.Surface.fn.init.call(this,t,n),this.element[0].innerHTML=this._template(this);var r=this.element[0].firstElementChild;r.width=e(t).width(),r.height=e(t).height(),this._rootElement=r,this._root=new i(r)},destroy:function(){w.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(e){this._root.load([e],void 0,this.options.cors)},clear:function(){this._root.clear()},image:function(){var t,n=this._root,i=this._rootElement,r=[];return n.traverse(function(e){e.loading&&r.push(e.loading)}),t=e.Deferred(),e.when.apply(e,r).done(function(){n._invalidate();try{var e=i.toDataURL();t.resolve(e)}catch(r){t.reject(r)}}).fail(function(e){t.reject(e)}),t.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:v("<canvas style='width: 100%; height: 100%;'></canvas>")}),D=b.extend({init:function(e){b.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),b.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),r.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),b.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},load:function(e,t,n){var i,r,o,a,s=this;for(a=0;e.length>a;a++)r=e[a],o=r.children,i=new d[r.nodeType](r,n),o&&o.length>0&&i.load(o,t,n),g(t)?s.insertAt(i,t):s.append(i);s.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();g(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t}}),A=D.extend({renderTo:function(e){var t,n=this.childNodes;for(e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),t=0;n.length>t;t++)n[t].renderTo(e);e.restore()}});w.mixins.Traversable.extend(A.fn,"childNodes"),i=A.extend({init:function(t){A.fn.init.call(this),this.canvas=t,this.ctx=t.getContext("2d"),this.invalidate=h.throttle(e.proxy(this._invalidate,this),C)},destroy:function(){A.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}),w.mixins.Traversable.extend(i.fn,"childNodes"),r=D.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,n=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),n=!0):m(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),n=!0)),n},setGradientFill:function(e,t){var i,r,o,a,s=this.srcElement.rawBBox();t instanceof w.LinearGradient?(r=t.start(),o=t.end(),i=e.createLinearGradient(r.x,r.y,o.x,o.y)):t instanceof w.RadialGradient&&(a=t.center(),i=e.createRadialGradient(a.x,a.y,0,a.x,a.y,t.radius())),n(i,t.stops),e.save(),t.userSpace()||e.transform(s.width(),0,0,s.height(),s.origin.x,s.origin.y),e.fillStyle=i,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;return t&&!m(t.color)?(e.strokeStyle=t.color,e.lineWidth=_(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0):void 0},dashType:function(){var e=this.srcElement.options.stroke;return e&&e.dashType?e.dashType.toLowerCase():void 0},setLineDash:function(e){var t,n=this.dashType();n&&n!=S&&(t=x[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.dashType(),n=this.srcElement.options.stroke;t&&t!==S?e.lineCap=k:n&&n.lineCap&&(e.lineCap=n.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var n,i,r,o,a,s,l=t.segments;if(0!==l.length){for(n=l[0],i=n.anchor(),e.moveTo(i.x,i.y),r=1;l.length>r;r++)n=l[r],i=n.anchor(),o=l[r-1],a=o.controlOut(),s=n.controlIn(),a&&s?e.bezierCurveTo(a.x,a.y,s.x,s.y,i.x,i.y):e.lineTo(i.x,i.y);t.options.closed&&e.closePath()}}}),o=r.extend({renderPoints:function(e){var t,n=this.srcElement.paths;for(t=0;n.length>t;t++)r.fn.renderPoints(e,n[t])}}),a=r.extend({renderPoints:function(e){var t=this.srcElement.geometry(),n=t.center,i=t.radius;e.arc(n.x,n.y,i,0,2*Math.PI)}}),s=r.extend({renderPoints:function(e){var t=this.srcElement.toPath();r.fn.renderPoints.call(this,e,t)}}),l=r.extend({renderTo:function(e){var t=this.srcElement,n=t.position(),i=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),n.x,n.y+i.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),n.x,n.y+i.baseline)),e.restore()}}),c=r.extend({init:function(t,n){var i,o;r.fn.init.call(this,t),this.onLoad=e.proxy(this.onLoad,this),this.onError=e.proxy(this.onError,this),i=this.img=new Image,n&&(i.crossOrigin=n),i.onload=this.onLoad,i.onerror=this.onError,o=i.src=t.src(),(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=o),this.loading=e.Deferred()},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):r.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),n=t.topLeft();e.drawImage(this.img,n.x,n.y,t.width(),t.height())}}),d={Group:A,Text:l,Path:r,MultiPath:o,Circle:a,Arc:s,Image:c},h.support.canvas=function(){return!!u.createElement("canvas").getContext}(),h.support.canvas&&w.SurfaceFactory.current.register("canvas",T,20),p(h.drawing,{exportImage:t,canvas:{ArcNode:s,CircleNode:a,GroupNode:A,ImageNode:c,MultiPathNode:o,Node:D,PathNode:r,RootNode:i,Surface:T,TextNode:l}})}(window.kendo.jQuery),function(e){function t(){if(u.namespaces&&!u.namespaces.kvml){u.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var e=u.styleSheets.length>30?u.styleSheets[0]:u.createStyleSheet();e.addRule(".kvml","behavior:url(#default#VML)")}}function n(e){var t=u.createElement("kvml:"+e);return t.className="kvml",t}function i(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i.push(e[t].scaleCopy(P).toString(0,","));return i.join(" ")}function r(e,t){var n,r,a,s,l,c=e.segments,d=c.length;if(d>0){for(n=[],l=1;d>l;l++)a=o(c[l-1],c[l]),a!==s&&(s=a,n.push(a)),n.push("l"===a?i([c[l].anchor()]):i([c[l-1].controlOut(),c[l].controlIn(),c[l].anchor()]));return r="m "+i([c[0].anchor()])+" "+n.join(" "),e.options.closed&&(r+=" x"),t!==!0&&(r+=" e"),r}}function o(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}function a(e){return 0===e.indexOf("fill")||0===e.indexOf(z)}function s(e,t){var n;return n=e?l(e,t.color(),t.opacity()):l(t.color(),"#fff",1-t.opacity())}function l(e,t,n){var i=new k(e),r=new k(t),o=c(i.r,r.r,n),a=c(i.g,r.g,n),s=c(i.b,r.b,n);return new k(o,a,s).toHex()}function c(e,t,n){return h.round(n*t+(1-n)*e)}var d,u=document,h=Math,p=h.atan2,f=h.sqrt,g=window.kendo,m=g.deepExtend,v=e.noop,_=g.drawing,y=_.BaseNode,w=g.geometry,b=w.toMatrix,k=g.Color,x=g.util,C=x.isTransparent,S=x.defined,T=x.deg,D=x.round,A=x.valueOrDefault,E="none",M=".kendo",P=100,I=P*P,z="gradient",F=4,R=_.Surface.extend({init:function(e,n){_.Surface.fn.init.call(this,e,n),t(),this.element.empty(),this._root=new L,this._root.attachTo(this.element[0]),this.element.on("click"+M,this._click),this.element.on("mouseover"+M,this._mouseenter),this.element.on("mouseout"+M,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(M)),_.Surface.fn.destroy.call(this)},draw:function(e){this._root.load([e],void 0,null)},clear:function(){this._root.clear()}}),B=y.extend({init:function(e){y.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:v,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),y.fn.destroy.call(this)},clear:function(){var e,t;for(this.element&&(this.element.innerHTML=""),e=this.childNodes,t=0;e.length>t;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),y.fn.removeSelf.call(this)},createElement:function(){this.element=u.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,n,i){var r,o,a,s,l,c;for(i=A(i,1),this.srcElement&&(i*=A(this.srcElement.options.opacity,1)),r=0;e.length>r;r++)o=e[r],a=o.children,s=o.currentTransform(n),l=i*A(o.options.opacity,1),c=new ot[o.nodeType](o,s,l),a&&a.length>0&&c.load(a,t,s,i),S(t)?this.insertAt(c,t):this.append(c),c.attachTo(this.element,t)},attachTo:function(e,t){S(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",e.value!==!1?"":E)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&this.srcElement.options.visible===!1&&e.push(["display",E]),e},mapOpacityTo:function(e,t){var n=A(this.opacity,1);n*=A(t,1),e.push(["opacity",n])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;e.length>t;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;e.length>t;t++)this.css(e[t][0],e[t][1])}}),L=B.extend({createElement:function(){B.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:v}),O=g.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),H=B.extend({init:function(e){B.fn.init.call(this,e),e&&this.initClip()},observe:function(){y.fn.observe.call(this)},mapStyle:function(){var e=B.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),B.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),B.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new O(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e,t,n,i=d,r=this.srcElement.clip();return r&&(e=this.clipBBox(r),t=e.topLeft(),n=e.bottomRight(),i=g.format("rect({0}px {1}px {2}px {3}px)",t.y,n.x,n.y,t.x)),i},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),n=e.rawBBox();return n.origin.translate(-t.x,-t.y),n}}),N=H.extend({createElement:function(){B.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display",E),B.fn.attachTo.call(this,e,t),this.srcElement.options.visible!==!1&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=H.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,n=this.srcElement.currentTransform(e),i=this.childNodes,r=i.length;for(this.setClip(),t=0;r>t;t++)i[t].refreshTransform(n)},currentOpacity:function(){var e=A(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,n=t.length,i=this.currentOpacity();for(e=0;n>e;e++)t[e].refreshOpacity(i)},initClip:function(){if(H.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){H.fn.clearClip.call(this)}}),V=B.extend({init:function(e,t){this.opacity=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e,t=this.srcElement.options.stroke,n=[];return t&&!C(t.color)&&0!==t.width?(n.push(["on","true"]),n.push(["color",t.color]),n.push(["weight",(t.width||1)+"px"]),this.mapOpacityTo(n,t.opacity),S(t.dashType)&&n.push(["dashstyle",t.dashType]),S(t.lineJoin)&&n.push(["joinstyle",t.lineJoin]),S(t.lineCap)&&(e=t.lineCap.toLowerCase(),"butt"===e&&(e="butt"===e?"flat":e),n.push(["endcap",e]))):n.push(["on","false"]),n}}),U=B.extend({init:function(e,t,n){this.opacity=n,B.fn.init.call(this,e)},createElement:function(){this.element=n("fill"),this.setFill()},optionsChange:function(e){a(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var n,i=this.element;if(i){for(n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==z?t=this.mapGradient(e):C(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t,n=this.srcElement.options,i=n.fallbackFill||e.fallbackFill&&e.fallbackFill();return t=e instanceof _.LinearGradient?this.mapLinearGradient(e):e instanceof _.RadialGradient&&e.supportVML?this.mapRadialGradient(e):i?this.mapFillColor(i):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),n=e.end(),i=x.deg(p(n.y-t.y,n.x-t.x)),r=[["on","true"],["type",z],["focus",0],["method","none"],["angle",270-i]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),n=e.center(),i=(n.x-t.origin.x)/t.width(),r=(n.y-t.origin.y)/t.height(),o=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",i+" "+r],["method","none"]];return this.addColors(o),o},addColors:function(e){var t,n,i=this.srcElement.options,r=[],o=i.fill.stops,a=i.baseColor,l=this.element.colors?"colors.value":"colors",c=s(a,o[0]),d=s(a,o[o.length-1]);for(n=0;o.length>n;n++)t=o[n],r.push(h.round(100*t.offset())+"% "+s(a,t));e.push([l,r.join(",")],["color",c],["color2",d])}}),W=B.extend({init:function(e,t){this.transform=t,B.fn.init.call(this,e)},createElement:function(){this.element=n("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],n=b(e);return n?(n.round(F),t.push(["on","true"],["matrix",[n.a,n.c,n.b,n.d,0,0].join(",")],["offset",n.e+"px,"+n.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),j=H.extend({init:function(e,t,n){this.fill=this.createFillNode(e,t,n),this.stroke=new V(e,n),this.transform=this.createTransformNode(e,t),H.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),B.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,n){return new U(e,t,n)},createTransformNode:function(e,t){return new W(e,t)},createElement:function(){this.element=n("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){a(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=A(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var n,i=H.fn.mapStyle.call(this);return e&&t||(e=t=P),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]),n=this.srcElement.options.cursor,n&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",I+" "+I]])}}),G=B.extend({createElement:function(){this.element=n("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return r(this.srcElement)}}),q=j.extend({init:function(e,t,n){this.pathData=this.createDataNode(e),j.fn.init.call(this,e,t,n)},attachTo:function(e,t){this.pathData.attachTo(this.element),j.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new G(e)},geometryChange:function(){this.pathData.geometryChange(),j.fn.geometryChange.call(this)}}),$=G.extend({renderData:function(){var e,t,n,i=this.srcElement.paths;if(i.length>0){for(e=[],t=0;i.length>t;t++)n=i.length-1>t,e.push(r(i[t],n));return e.join(" ")}}}),Y=q.extend({createDataNode:function(e){return new $(e)}}),K=W.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center(),n=-t.x/e.width(),i=-t.y/e.height();return n+","+i}}),Q=j.extend({createElement:function(){this.element=n("oval"),this.setStyle()},createTransformNode:function(e,t){return new K(e,t)},geometryChange:function(){j.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,n=e.center,i=2*t,r=j.fn.mapStyle.call(this,i,i);return r.push(["left",n.x-t+"px"],["top",n.y-t+"px"]),r}}),X=G.extend({renderData:function(){return r(this.srcElement.toPath())}}),J=q.extend({createDataNode:function(e){return new X(e)}}),Z=G.extend({createElement:function(){G.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+i([new w.Point(e.topLeft().x,t.y)])+" l "+i([new w.Point(e.bottomRight().x,t.y)])}}),et=B.extend({createElement:function(){this.element=n("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),B.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),tt=q.extend({init:function(e,t,n){this.path=new et(e),q.fn.init.call(this,e,t,n)},createDataNode:function(e){return new Z(e)},attachTo:function(e,t){this.path.attachTo(this.element),q.fn.attachTo.call(this,e,t)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),q.fn.optionsChange.call(this,e)}}),nt=G.extend({renderData:function(){var e=this.srcElement.rect(),t=(new _.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();return r(t)}}),it=W.extend({init:function(e,t,n){this.opacity=n,W.fn.init.call(this,e,t)},createElement:function(){this.element=n("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),W.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,n,i,r,o,a,s,l=this.srcElement,c=l.rawBBox(),d=c.center(),u=P/2,h=P,g=c.width()/h,m=c.height()/h,v=0,_=this.transform;return _?(n=b(_),i=f(n.a*n.a+n.b*n.b),r=f(n.c*n.c+n.d*n.d),g*=i,m*=r,o=T(p(n.b,n.d)),a=T(p(-n.c,n.a)),v=(o+a)/2,0!==v?(s=l.bbox().center(),e=(s.x-u)/h,t=(s.y-u)/h):(e=(d.x*i+n.e-u)/h,t=(d.y*r+n.f-u)/h)):(e=(d.x-u)/h,t=(d.y-u)/h),g=D(g,F),m=D(m,F),e=D(e,F),t=D(t,F),v=D(v,F),[["size",g+","+m],["position",e+","+t],["angle",v]]}}),rt=q.extend({createFillNode:function(e,t,n){return new it(e,t,n)},createDataNode:function(e){return new nt(e)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),q.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),q.fn.geometryChange.call(this)},refreshTransform:function(e){q.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),ot={Group:N,Text:tt,Path:q,MultiPath:Y,Circle:Q,Arc:J,Image:rt};g.support.vml=function(){var e=g.support.browser;return e.msie&&9>e.version}(),d="inherit",g.support.browser.msie&&8>g.support.browser.version&&(d="rect(auto auto auto auto)"),g.support.vml&&_.SurfaceFactory.current.register("vml",R,30),m(_,{vml:{ArcDataNode:X,ArcNode:J,CircleTransformNode:K,CircleNode:Q,FillNode:U,GroupNode:N,ImageNode:rt,ImageFillNode:it,ImagePathDataNode:nt,MultiPathDataNode:$,MultiPathNode:Y,Node:B,PathDataNode:G,PathNode:q,RootNode:L,StrokeNode:V,Surface:R,TextNode:tt,TextPathNode:et,TextPathDataNode:Z,TransformNode:W}})}(window.kendo.jQuery),function(e,t,n){"use strict";function i(){function e(){var t,r,o;for(t=0;arguments.length>t;++t){if(r=arguments[t],r===n)throw Error("Cannot output undefined to PDF");if(r instanceof w)r.beforeRender(e),r.render(e);else if(F(r))f(r,e);else if(p(r))g(r,e);else if("number"==typeof r){if(isNaN(r))throw Error("Cannot output NaN to PDF");o=r.toFixed(7),o.indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),i.writeString(o)}else/string|boolean/.test(typeof r)?i.writeString(r+""):"function"==typeof r.get?i.write(r.get()):"object"==typeof r&&(r?e(new H(r)):i.writeString("null"))}}var t=0,i=D();return e.writeData=function(e){i.write(e)},e.withIndent=function(n){++t,n(e),--t},e.indent=function(){e(Q,d("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return i.offset()},e.toString=function(){throw Error("FIX CALLER")},e.get=function(){return i.get()},e.stream=function(){return i},e}function r(e,t){var n=e.beforeRender,i=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),n.call(e,r),i.call(e,r),r(" endobj")}}function o(e){function t(t,n){return e&&null!=e[t]?e[t]:n}var n,o,a,s,l,c,d=this,h=i(),p=0,f=[];if(d.getOption=t,d.attach=function(e){return f.indexOf(e)<0&&(r(e,++p),f.push(e)),e},d.FONTS={},d.IMAGES={},n=t("paperSize",Z.a4),"string"==typeof n&&(n=Z[n.toLowerCase()],null==n))throw Error("Unknown paper size");n[0]=y(n[0]),n[1]=y(n[1]),t("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]),o=t("margin"),o&&(o.left=y(o.left,0),o.top=y(o.top,0),o.right=y(o.right,0),o.bottom=y(o.bottom,0),t("addMargin")&&(n[0]+=o.left+o.right,n[1]+=o.top+o.bottom)),a=n[0],s=n[1],o&&(a-=o.left+o.right,s-=o.top+o.bottom),l=d.attach(new V),c=d.attach(new U([0,0,n[0],n[1]])),l.setPages(c),d.addPage=function(){var e=new N(i(),null,!0),t=new q(d,{Contents:d.attach(e),Parent:c});return t._content=e,c.addPage(d.attach(t)),t.transform(1,0,0,-1,0,n[1]),o&&(t.translate(o.left,o.top),t.rect(0,0,a,s),t.clip()),t},d.render=function(){var e,n;for(h("%PDF-1.4",Q,"%ÂÁÚÏÎ",Q,Q),e=0;f.length>e;++e)f[e].renderFull(h),h(Q,Q);for(n=h.offset(),h("xref",Q,0," ",f.length+1,Q),h("0000000000 65535 f ",Q),e=0;f.length>e;++e)h(u(f[e]._offset,10)," 00000 n ",Q);return h(Q),h("trailer",Q),h(new H({Size:f.length+1,Root:l,Info:new H({Producer:new R("Kendo UI PDF Generator"),Title:new R(t("title","")),Author:new R(t("author","")),Subject:new R(t("subject","")),Keywords:new R(t("keywords","")),Creator:new R(t("creator","Kendo UI PDF Generator")),CreationDate:t("date",new Date)})}),Q,Q),h("startxref",Q,n,Q),h("%%EOF",Q),h.stream().offset(0)}}function a(t,n){function i(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),n(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),K&&(r.responseType="arraybuffer"),r.onload=function(){200==r.status||304==r.status?n(K?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):i()},r.onerror=i,r.send(null)}function s(e,t){var n=et[e];n?t(n):a(e,function(n){if(null==n)throw Error("Cannot load font from "+e);var i=new Y.pdf.TTFFont(n);et[e]=i,t(i)})}function l(e,t){var i=tt[e];i?t(i):(i=new Image,i.onload=function(){var n,r,o,a,s,l,c,d,u,h,p=document.createElement("canvas");p.width=i.width,p.height=i.height,n=p.getContext("2d"),n.drawImage(i,0,0);try{r=n.getImageData(0,0,i.width,i.height)}catch(f){return t(tt[e]="TAINTED")}for(o=!1,a=D(),s=D(),l=r.data,c=0;l.length>c;)a.writeByte(l[c++]),a.writeByte(l[c++]),a.writeByte(l[c++]),d=l[c++],255>d&&(o=!0),s.writeByte(d);o?i=new C(i.width,i.height,a,s):(u=p.toDataURL("image/jpeg"),u=u.substr(u.indexOf(";base64,")+8),h=D(),h.writeBase64(u),h.offset(0),i=new x(i.width,i.height,h)),t(tt[e]=i)},i.onerror=function(){t(tt[e]="TAINTED")},i.crossOrigin="Anonymous",i.src=e,(i.complete||i.complete===n)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e))}function c(e){return function(t,n){var i=t.length,r=i;if(0===i)return n();for(;r-->0;)e(t[r],function(){0===--i&&n()})}}function d(e,t,n){for(;t>e.length;)e=n+e;return e}function u(e,t){return d(e+"",t,"0")}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){return e instanceof Date}function f(e,t){t("["),e.length>0&&t.withIndent(function(){for(var n=0;e.length>n;++n)n>0&&n%8===0?t.indent(e[n]):t(" ",e[n])}),t(" ]")}function g(e,t){t("(D:",u(e.getUTCFullYear(),4),u(e.getUTCMonth()+1,2),u(e.getUTCDate(),2),u(e.getUTCHours(),2),u(e.getUTCMinutes(),2),u(e.getUTCSeconds(),2),"Z)")}function m(e){return e*(72/25.4)}function v(e){return m(10*e)}function _(e){return 72*e}function y(e,n){var i,r;if("number"==typeof e)return e;if("string"==typeof e&&(i=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e),i&&(r=t(i[1]),!isNaN(r))))return"pt"==i[2]?r:{mm:m,cm:v,"in":_}[i[2]](r);if(null!=n)return n;throw Error("Can't parse unit: "+e)}function w(){}function b(e,t,n){n||(n=w),e.prototype=new n;for(var i in t)h(t,i)&&(e.prototype[i]=t[i]);return e}function k(e){return h(O,e)?O[e]:O[e]=new L(e)}function x(e,t,n){this.asStream=function(){var i=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),Filter:k("DCTDecode")});return i._resourceName=k("I"+ ++X),i}}function C(e,t,n,i){this.asStream=function(r){var o=new N(i,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceGray")},!0),a=new N(n,{Type:k("XObject"),Subtype:k("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:k("DeviceRGB"),SMask:r.attach(o)},!0);return a._resourceName=k("I"+ ++X),a}}function S(e){function t(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:d,Encode:u}}var n,i,r,o,a,s=!1,l=[],c=[],d=[],u=[];for(n=1;e.length>n;++n)i=e[n-1],r=e[n],o=i.color,a=r.color,c.push({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[o.r,o.g,o.b],C1:[a.r,a.g,a.b]}),l.push({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[o.a],C1:[a.a]}),(1>o.a||1>a.a)&&(s=!0),d.push(r.offset),u.push(0,1);return d.pop(),{hasAlpha:s,colors:t(c),opacities:s?t(l):null}}function T(e,t,n){var i="radial"==t.type,r=S(t.stops),o=i?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],a={Type:k("Shading"),ShadingType:i?3:2,ColorSpace:k("DeviceRGB"),Coords:o,Domain:[0,1],Function:r.colors,Extend:[!0,!0]},s=r.hasAlpha?{Type:k("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:k("Mask"),S:k("Luminosity"),G:e.attach(new N("/a0 gs /s0 sh",{Type:k("XObject"),Subtype:k("Form"),FormType:1,BBox:t.userSpace?[n.left,n.top+n.height,n.left+n.width,n.top]:[0,1,1,0],Group:{Type:k("Group"),S:k("Transparency"),CS:k("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:k("DeviceGray"),Coords:o,Domain:[0,1],ShadingType:i?3:2,Function:r.opacities,Extend:[!0,!0]}}}}))}}:null;return{hasAlpha:r.hasAlpha,shading:new H(a),opacity:new H(s)}}function D(e){function t(){return S>=T}function n(){return T>S?e[S++]:0}function i(t){w(S),e[S++]=255&t,S>T&&(T=S)}function r(){return n()<<8|n()}function o(e){i(e>>8),i(e)}function a(){var e=r();return e>=32768?e-65536:e}function s(e){o(0>e?e+65536:e)}function l(){return 65536*r()+r()}function c(e){o(e>>>16&65535),o(65535&e)}function d(){var e=l();return e>=2147483648?e-4294967296:e}function u(e){c(0>e?e+4294967296:e)}function h(){return l()/65536}function p(e){c(Math.round(65536*e))}function f(){return d()/65536}function g(e){u(Math.round(65536*e))}function m(e){return y(e,n)}function v(e){return String.fromCharCode.apply(String,m(e))}function _(e){for(var t=0;e.length>t;++t)i(e.charCodeAt(t))}function y(e,t){for(var n=Array(e),i=0;e>i;++i)n[i]=t();return n}var w,b,k,x,C,S=0,T=0;return null==e?e=K?new Uint8Array(256):[]:T=e.length,w=K?function(t){if(t>=e.length){var n=new Uint8Array(Math.max(t+256,2*e.length));n.set(e,0),e=n}}:function(){},b=K?function(){return new Uint8Array(e.buffer,0,T)}:function(){return e},k=K?function(t){if("string"==typeof t)return _(t);var n=t.length;w(S+n),e.set(t,S),S+=n,S>T&&(T=S)}:function(e){if("string"==typeof e)return _(e);
for(var t=0;e.length>t;++t)i(e[t])},x=K?function(t,n){if(e.buffer.slice)return new Uint8Array(e.buffer.slice(t,t+n));var i=new Uint8Array(n);return i.set(new Uint8Array(e.buffer,t,n)),i}:function(t,n){return e.slice(t,t+n)},C={eof:t,readByte:n,writeByte:i,readShort:r,writeShort:o,readLong:l,writeLong:c,readFixed:h,writeFixed:p,readShort_:a,writeShort_:s,readLong_:d,writeLong_:u,readFixed_:f,writeFixed_:g,read:m,write:k,readString:v,writeString:_,times:y,get:b,slice:x,offset:function(e){return null!=e?(S=e,C):S},skip:function(e){S+=e},toString:function(){throw Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return T},saveExcursion:function(e){var t=S;try{return e()}finally{S=t}},writeBase64:function(e){window.atob?_(window.atob(e)):k(J.decode(e))},base64:function(){return J.encode(b())}}}function A(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function E(e){var t,n=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i,i=n.exec(e);return i?(t=i[8]?parseInt(i[8],10):12,{italic:i[2]&&"italic"==i[2].toLowerCase(),variant:i[4],bold:i[6]&&/bold|700/i.test(i[6]),fontSize:t,lineHeight:i[12]?"normal"==i[12]?t:parseInt(i[12],10):null,fontFamily:i[14].split(/\s*,\s*/g).map(A)}):{fontSize:12,fontFamily:"sans-serif"}}function M(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var n,i,r,o=e.fontFamily;if(o instanceof Array){for(r=0;o.length>r;++r)if(n=t(o[r]),i=$[n])return i}else i=$[o.toLowerCase()];return i||(i="Times-Roman"),i}function P(e,t){if(1==arguments.length)for(var n in e)P(n,e[n]);else e=e.toLowerCase(),$[e]=t}function I(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}function z(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}var F,R,B,L,O,H,N,V,U,W,j,G,q,$,Y=e.kendo,K=!!e.Uint8Array,Q="\n",X=0,J=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var n,i,r,o,a,s,l,c=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),d=0,u=c.length,h=[];u>d;)n=e.indexOf(c.charAt(d++)),i=e.indexOf(c.charAt(d++)),r=e.indexOf(c.charAt(d++)),o=e.indexOf(c.charAt(d++)),a=n<<2|i>>>4,s=(15&i)<<4|r>>>2,l=(3&r)<<6|o,h.push(a),64!=r&&h.push(s),64!=o&&h.push(l);return h},encode:function(t){for(var n,i,r,o,a,s,l,c=0,d=t.length,u="";d>c;)n=t[c++],i=t[c++],r=t[c++],o=n>>>2,a=(3&n)<<4|i>>>4,s=(15&i)<<2|r>>>6,l=63&r,c-d==2?s=l=64:c-d==1&&(l=64),u+=e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(l);return u}}}(),Z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},et={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},tt={},nt=c(s),it=c(l);o.prototype={loadFonts:nt,loadImages:it,getFont:function(e){var t=this.FONTS[e];if(!t){if(t=et[e],!t)throw Error("Font "+e+" has not been loaded");t=this.attach(t===!0?new W(e):new j(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(t=tt[e],!t)throw Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,n){var i,r,o,a=t(e).toFixed(3);return e=t(a),a+=n?"S":"F",i=this._opacityGSCache||(this._opacityGSCache={}),r=i[a],r||(o={Type:k("ExtGState")},n?o.CA=e:o.ca=e,r=this.attach(new H(o)),r._resourceName=k("GS"+ ++X),i[a]=r),r},dict:function(e){return new H(e)},name:function(e){return k(e)},stream:function(e,t){return new N(t,e)}},F=Array.isArray||function(e){return e instanceof Array},w.prototype.beforeRender=function(){},R=b(function(e){this.value=e},{render:function(e){var t,n="",i=this.escape();for(t=0;i.length>t;++t)n+=String.fromCharCode(255&i.charCodeAt(t));e("(",n,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),B=b(function(e){this.value=e},{render:function(e){e("<");for(var t=0;this.value.length>t;++t)e(u(this.value.charCodeAt(t).toString(16),4));e(">")}},R),L=b(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+u(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),O={},L.get=k,H=b(function(e){this.props=e},{render:function(e){var t=this.props,n=!0;e("<<"),e.withIndent(function(){for(var i in t)h(t,i)&&!/^_/.test(i)&&(n=!1,e.indent(k(i)," ",t[i]))}),n||e.indent(),e(">>")}}),N=b(function(e,t,n){if("string"==typeof e){var i=D();i.write(e),e=i}this.data=e,this.props=t||{},this.compress=n},{render:function(t){var n=this.data.get(),i=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(i.Filter?i.Filter instanceof Array||(i.Filter=[i.Filter]):i.Filter=[],i.Filter.unshift(k("FlateDecode")),n=e.pako.deflate(n)),i.Length=n.length,t(new H(i)," stream",Q),t.writeData(n),t(Q,"endstream")}}),V=b(function(e){e=this.props=e||{},e.Type=k("Catalog")},{setPages:function(e){this.props.Pages=e}},H),U=b(function(e){this.props={Type:k("Pages"),Kids:[],Count:0,MediaBox:e}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},H),W=b(function(e){this.props={Type:k("Font"),Subtype:k("Type1"),BaseFont:k(e)},this._resourceName=k("F"+ ++X)},{encodeText:function(e){return new R(e+"")}},H),j=b(function(e,t,n){var i,r;n=this.props=n||{},n.Type=k("Font"),n.Subtype=k("Type0"),n.Encoding=k("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=k("F"+ ++X),i=t.head,this.name=t.psName,r=this.scale=t.scale,this.bbox=[i.xMin*r,i.yMin*r,i.xMax*r,i.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&7>=this.familyClass,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new B(this._sub.encodeText(e+""))},beforeRender:function(){var e,t,n,r,o=this,a=o._sub,s=a.render(),l=new N(D(s),{Length1:s.length},!0),c=o._pdf.attach(new H({Type:k("FontDescriptor"),FontName:k(o._sub.psName),FontBBox:o.bbox,Flags:o.flags,StemV:o.stemV,ItalicAngle:o.italicAngle,Ascent:o.ascent,Descent:o.descent,CapHeight:o.capHeight,XHeight:o.xHeight,FontFile2:o._pdf.attach(l)})),d=a.ncid2ogid,u=a.firstChar,h=a.lastChar,p=[];!function f(e,t){if(h>=e){var n=d[e];null==n?f(e+1):(t||p.push(e,t=[]),t.push(o._font.widthOfGlyph(n)),f(e+1,t))}}(u),e=new H({Type:k("Font"),Subtype:k("CIDFontType2"),BaseFont:k(o._sub.psName),CIDSystemInfo:new H({Registry:new R("Adobe"),Ordering:new R("Identity"),Supplement:0}),FontDescriptor:c,FirstChar:u,LastChar:h,DW:Math.round(o._font.widthOfGlyph(0)),W:p,CIDToGIDMap:o._pdf.attach(o._makeCidToGidMap())}),t=o.props,t.BaseFont=k(o._sub.psName),t.DescendantFonts=[o._pdf.attach(e)],n=new G(u,h,a.subset),r=new N(i(),null,!0),r.data(n),t.ToUnicode=o._pdf.attach(r)},_makeCidToGidMap:function(){return new N(D(this._sub.cidToGidMap()),null,!0)}},H),G=b(function(e,t,n){this.firstChar=e,this.lastChar=t,this.map=n},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){var n,i;for(n=t.firstChar;t.lastChar>=n;++n)i=t.map[n],e.indent("<",u(n.toString(16),4),">","<",u(i.toString(16),4),">")}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),q=b(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._font=null,this._fontSize=null,this._contextStack=[],t=this.props=t||{},t.Type=k("Page"),t.ProcSet=[k("PDF"),k("Text"),k("ImageB"),k("ImageC"),k("ImageI")],t.Resources=new H({Font:new H(this._fontResources),ExtGState:new H(this._gsResources),XObject:new H(this._xResources),Pattern:new H(this._patResources),Shading:new H(this._shResources)})},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,n,i,r,o){z(arguments)||(this._matrix=I(this._matrix,arguments),this._out(e," ",t," ",n," ",i," ",r," ",o," cm"),this._out(Q))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);this.transform(t,n,-n,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",Q)},endText:function(){this._textMode=!1,this._out("ET",Q)},_requireTextMode:function(){if(!this._textMode)throw Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof j||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",Q)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",Q)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",Q)},showText:function(e){this._requireFont(),this._out(this._font.encodeText(e)," Tj",Q)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",Q)},setStrokeColor:function(e,t,n){this._out(e," ",t," ",n," RG",Q)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},setFillColor:function(e,t,n){this._out(e," ",t," ",n," rg",Q)},setFillOpacity:function(e){if(1>e){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",Q)}},gradient:function(e,t){var n,i,r;this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top),n=T(this._pdf,e,t),i="S"+ ++X,this._shResources[i]=this._pdf.attach(n.shading),n.hasAlpha&&(r="O"+ ++X,this._gsResources[r]=this._pdf.attach(n.opacity),this._out("/"+r+" gs ")),this._out("/"+i+" sh",Q),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",Q)},setLineWidth:function(e){this._out(e," w",Q)},setLineCap:function(e){this._out(e," J",Q)},setLineJoin:function(e){this._out(e," j",Q)},setMitterLimit:function(e){this._out(e," M",Q)},save:function(){this._contextStack.push(this._context()),this._out("q",Q)},restore:function(){this._out("Q",Q),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",Q)},lineTo:function(e,t){this._out(e," ",t," l",Q)},bezier:function(e,t,n,i,r,o){this._out(e," ",t," ",n," ",i," ",r," ",o," c",Q)},bezier1:function(e,t,n,i){this._out(e," ",t," ",n," ",i," y",Q)},bezier2:function(e,t,n,i){this._out(e," ",t," ",n," ",i," v",Q)},close:function(){this._out("h",Q)},rect:function(e,t,n,i){this._out(e," ",t," ",n," ",i," re",Q)},ellipse:function(e,t,n,i){function r(t){return e+t}function o(e){return t+e}var a=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*a),o(i),r(n),o(i*a),r(n),o(0)),this.bezier(r(n),o(-i*a),r(n*a),o(-i),r(0),o(-i)),this.bezier(r(-n*a),o(-i),r(-n),o(-i*a),r(-n),o(0)),this.bezier(r(-n),o(i*a),r(-n*a),o(i),r(0),o(i))},circle:function(e,t,n){this.ellipse(e,t,n,n)},stroke:function(){this._out("S",Q)},nop:function(){this._out("n",Q)},clip:function(){this._out("W n",Q)},closeStroke:function(){this._out("s",Q)},fill:function(){this._out("f",Q)},fillStroke:function(){this._out("B",Q)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",Q))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,Q)})},_context:function(e){return null==e?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=e.opacity,this._matrix=e.matrix,n)}},H),$={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique"},Y.pdf={Document:o,BinaryStream:D,defineFont:P,parseFontDef:E,getFontURL:M,loadFonts:nt,loadImages:it,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(this,parseFloat),function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function i(e){var t,n,i;for(this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),t=this.tables={},n=0;this.tableCount>n;++n)i={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()},t[i.tag]=i}function r(e){function n(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}n.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var i in e)t(e,i)&&(n[i]=n.prototype[i]=e[i]);return n}function o(){var e,t="",n=_+"";for(e=0;n.length>e;++e)t+=String.fromCharCode(n.charCodeAt(e)-48+65);return++_,t}function a(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=o()+"+"+this.font.psName}function s(e,t){var n,i,r,o,a=this,s=a.contents=w(e);if("ttcf"==s.readString(4)){if(!t)throw Error("Must specify a name for TTC files");for(n=s.readLong(),i=s.readLong(),r=0;i>r;++r)if(o=s.readLong(),s.saveExcursion(function(){s.offset(o),a.parse()}),a.psName==t)return;throw Error("Font "+t+" not found in collection")}s.offset(0),a.parse()}var l,c,d,u,h,p,f,g,m,v,_,y=e.kendo.pdf,w=y.BinaryStream;i.prototype={readTable:function(e,t){var n=this.tables[e];if(!n)throw Error("Table "+e+" not found in directory");return this[e]=n.table=new t(this,n)},render:function(e){var n,i,r,o,a,s,l,c,d=Object.keys(e).length,u=Math.pow(2,Math.floor(Math.log(d)/Math.LN2)),h=16*u,p=Math.floor(Math.log(u)/Math.LN2),f=16*d-h,g=w();g.writeLong(this.scalerType),g.writeShort(d),g.writeShort(h),g.writeShort(p),g.writeShort(f),n=16*d,i=g.offset()+n,r=null,o=w();for(a in e)if(t(e,a))for(s=e[a],g.writeString(a),g.writeLong(this.checksum(s)),g.writeLong(i),g.writeLong(s.length),o.write(s),"head"==a&&(r=i),i+=s.length;i%4;)o.writeByte(0),i++;return g.write(o.get()),l=this.checksum(g.get()),c=2981146554-l,g.offset(r+8),g.writeLong(c),g.get()},checksum:function(e){e=w(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}},l=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=w();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),c=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){var t,n=w(),i=e[e.length-1]>65535;for(t=0;e.length>t;++t)i?n.writeLong(e[t]):n.writeShort(e[t]/2);return{format:i?1:0,table:n.get()}}}),d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=w();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),h=r({parse:function(e){var t,n,i;e.offset(this.offset),t=this.file,n=t.hhea,this.metrics=e.times(n.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}}),i=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics,this.leftSideBearings=e.times(i,e.readShort_)},forGlyph:function(e){var t=this.metrics,n=t.length;return n>e?t[e]:{advance:t[n-1].advance,lsb:this.leftSideBearings[e-n]}},render:function(e){var t,n,i=w();for(t=0;e.length>t;++t)n=this.forGlyph(e[t]),i.writeShort(n.advance),i.writeShort_(n.lsb);return i.get()}}),p=function(){function e(e){this.raw=e}function n(e){var t,n,r;for(this.raw=e,t=this.glyphIds=[],n=this.idOffsets=[];;){if(r=e.readShort(),n.push(e.offset()),t.push(e.readShort()),!(r&a))break;e.skip(r&i?4:2),r&l?e.skip(8):r&s?e.skip(4):r&o&&e.skip(2)}}var i,o,a,s,l,c;return e.prototype={compound:!1,render:function(){return this.raw.get()}},i=1,o=8,a=32,s=64,l=128,c=256,n.prototype={compound:!0,render:function(e){var t,n,i=w(this.raw.get());for(t=0;this.glyphIds.length>t;++t)n=this.glyphIds[t],i.offset(this.idOffsets[t]),i.writeShort(e[n]);return i.get()}},r({parse:function(){this.cache={}},glyphFor:function(i){var r,o,a,s,l,c,d,u,h,p,f,g=this.cache;return t(g,i)?g[i]:(r=this.file.loca,o=r.lengthOf(i),0===o?g[i]=null:(a=this.rawData,s=this.offset+r.offsetOf(i),l=w(a.slice(s,o)),c=l.readShort_(),d=l.readShort_(),u=l.readShort_(),h=l.readShort_(),p=l.readShort_(),f=g[i]=-1==c?new n(l):new e(l),f.numberOfContours=c,f.xMin=d,f.yMin=u,f.xMax=h,f.yMax=p,f))},render:function(e,t,n){var i,r,o,a=w(),s=[];for(i=0;t.length>i;++i)r=t[i],o=e[r],s.push(a.offset()),o&&a.write(o.render(n));return s.push(a.offset()),{table:a.get(),offsets:s}}})}(),f=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){var n,i,r,o,a,s,l,c;for(t.offset(this.offset),n=t.readShort(),i=t.readShort(),r=this.offset+t.readShort(),o=t.times(i,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+r}}),a=this.strings={},s=0;o.length>s;++s)l=o[s],t.offset(l.offset),c=t.readString(l.length),a[l.nameID]||(a[l.nameID]=[]),a[l.nameID].push(new e(c,l));this.postscriptEntry=a[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(n){var i,r,o,a,s,l,c=this.strings,d=0;for(i in c)t(c,i)&&(d+=c[i].length);r=w(),o=w(),r.writeShort(0),r.writeShort(d),r.writeShort(6+12*d);for(i in c)if(t(c,i))for(a=6==i?[new e(n,this.postscriptEntry)]:c[i],s=0;a.length>s;++s)l=a[s],r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text);return r.write(o.get()),r.get()}})}(),g=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){var t,n;switch(e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong(),this.format){case 65536:case 196608:break;case 131072:for(t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[],n=this.offset+this.length;e.offset()<n;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var n=this.glyphNameIndex[t];return e.length>n?e[n]:this.names[n-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){var n,i,r,o,a,s,l;if(196608==this.format)return this.raw();for(n=w(this.rawData.slice(this.offset,32)),n.writeLong(131072),n.offset(32),i=[],r=[],o=0;t.length>o;++o)a=t[o],s=this.glyphFor(a),l=e.indexOf(s),l>=0?i.push(l):(i.push(e.length+r.length),r.push(s));for(n.writeShort(t.length),o=0;i.length>o;++o)n.writeShort(i[o]);for(o=0;r.length>o;++o)n.writeByte(r[o].length),n.writeString(r[o]);return n.get()}})}(),m=function(){function e(e,t){var n=this;n.platformID=e.readShort(),n.platformSpecificID=e.readShort(),n.offset=t+e.readLong(),e.saveExcursion(function(){var t,i,r,o,a,s,l,c,d,u,h,p,f;switch(e.offset(n.offset),n.format=e.readShort(),n.length=e.readShort(),n.language=e.readShort(),n.isUnicode=3==n.platformID&&1==n.platformSpecificID&&4==n.format||0===n.platformID&&4==n.format,n.codeMap={},n.format){case 0:for(t=0;256>t;++t)n.codeMap[t]=e.readByte();break;case 4:for(i=e.readShort()/2,e.skip(6),r=e.times(i,e.readShort),e.skip(2),o=e.times(i,e.readShort),a=e.times(i,e.readShort_),s=e.times(i,e.readShort),l=(n.length+n.offset-e.offset())/2,c=e.times(l,e.readShort),t=0;i>t;++t)for(d=o[t],u=r[t],h=d;u>=h;++h)0===s[t]?p=h+a[t]:(f=s[t]/2-(i-t)+(h-d),p=c[f]||0,0!==p&&(p+=a[t])),n.codeMap[h]=65535&p}})}function t(e,t){function i(n){return t[e[n]]}var r,o,a,s,l,c,d,u,h,p,f,g,m,v,_,y,b,k=n(e),x=[],C=[],S=null,T=null;for(r=0;k.length>r;++r)o=k[r],a=i(o),s=a-o,(null==S||s!==T)&&(S&&C.push(S),x.push(o),T=s),S=o;for(S&&C.push(S),C.push(65535),x.push(65535),l=x.length,c=2*l,d=2*Math.pow(2,Math.floor(Math.log(l)/Math.LN2)),u=Math.log(d/2)/Math.LN2,h=c-d,p=[],f=[],g=[],r=0;l>r;++r){if(m=x[r],v=C[r],65535==m){p.push(0),f.push(0);break}if(_=i(m),m-_>=32768)for(p.push(0),f.push(2*(g.length+l-r)),y=m;v>=y;++y)g.push(i(y));else p.push(_-m),f.push(0)}return b=w(),b.writeShort(3),b.writeShort(1),b.writeLong(12),b.writeShort(4),b.writeShort(16+8*l+2*g.length),b.writeShort(0),b.writeShort(c),b.writeShort(d),b.writeShort(u),b.writeShort(h),C.forEach(b.writeShort),b.writeShort(0),x.forEach(b.writeShort),p.forEach(b.writeShort_),f.forEach(b.writeShort),g.forEach(b.writeShort),b.get()}return r({parse:function(t){var n,i=this,r=i.offset;t.offset(r),i.version=t.readShort(),n=t.readShort(),i.unicodeEntry=null,i.tables=t.times(n,function(){var n=new e(t,r);return n.isUnicode&&(i.unicodeEntry=n),n})},render:function(e,n){var i=w();return i.writeShort(0),i.writeShort(1),i.write(t(e,n)),i.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),v=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),_=1e5,a.prototype={use:function(e){var t,n,i,r,o;if("string"==typeof e){for(n="",i=0;e.length>i;++i)t=this.use(e.charCodeAt(i)),n+=String.fromCharCode(t);return n}return t=this.unicodes[e],t||(t=this.next++,this.subset[t]=e,this.unicodes[e]=t,r=this.font.cmap.getUnicodeEntry().codeMap[e],r&&(this.ncid2ogid[t]=r,null==this.ogid2ngid[r]&&(o=this.nextGid++,this.ogid2ngid[r]=o,this.ngid2ogid[o]=r))),t},encodeText:function(e){return this.use(e)},glyphIds:function(){return n(this.ogid2ngid)},glyphsFor:function(e,t){var n,i,r;for(t||(t={}),n=0;e.length>n;++n)i=e[n],t[i]||(r=t[i]=this.font.glyf.glyphFor(i),r&&r.compound&&this.glyphsFor(r.glyphIds,t));return t},render:function(){var e,i,r,o,a,s,l,c,d=this.glyphsFor(this.glyphIds());for(e in d)t(d,e)&&(e=parseInt(e,10),null==this.ogid2ngid[e]&&(i=this.nextGid++,this.ogid2ngid[e]=i,this.ngid2ogid[i]=e));return r=n(this.ngid2ogid),o=r.map(function(e){return this.ngid2ogid[e]},this),a=this.font,s=a.glyf.render(d,o,this.ogid2ngid),l=a.loca.render(s.offsets),this.lastChar=this.next-1,c={cmap:m.render(this.ncid2ogid,this.ogid2ngid),glyf:s.table,loca:l.table,hmtx:a.hmtx.render(o),hhea:a.hhea.render(o),maxp:a.maxp.render(o),post:a.post.render(o),name:a.name.render(this.psName),head:a.head.render(l.format),"OS/2":a.os2.render()},this.font.directory.render(c)},cidToGidMap:function(){var e,t,n,i=w(),r=0;for(e=this.firstChar;this.next>e;++e){for(;e>r;)i.writeShort(0),r++;t=this.ncid2ogid[e],t?(n=this.ogid2ngid[t],i.writeShort(n)):i.writeShort(0),r++}return i.get()}},s.prototype={parse:function(){var e=this.directory=new i(this.contents);this.head=e.readTable("head",l),this.loca=e.readTable("loca",c),this.hhea=e.readTable("hhea",d),this.maxp=e.readTable("maxp",u),this.hmtx=e.readTable("hmtx",h),this.glyf=e.readTable("glyf",p),this.name=e.readTable("name",f),this.post=e.readTable("post",g),this.cmap=e.readTable("cmap",m),this.os2=e.readTable("OS/2",v),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new a(this)}},y.TTFFont=s}(this),function(e){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){if(!this.trigger("pdfExport")){var t=this.options.pdf;
e.drawing.drawDOM(this.wrapper[0]).then(function(n){return e.drawing.exportPDF(n,t)}).done(function(n){e.saveAs({dataURI:n,fileName:t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})})}}}}(kendo),function(e,t){"use strict";function n(){if(!e.pdf)throw Error("kendo.pdf.js is not loaded");return e.pdf}function i(e,t){function i(e,t){return d.pdf&&null!=d.pdf[e]?d.pdf[e]:t}function r(){var r,a,s,c,d,u,p;--o>0||(r=i("paperSize","auto"),a=!1,"auto"==r&&(h?(s=h.getSize(),r=[s.width,s.height],a=!0,c=h.getOrigin(),d=new D.Group,d.transform(new A.Matrix(1,0,0,1,-c.x,-c.y)),d.append(e),e=d):r="A4"),u=new(n().Document)({paperSize:r,landscape:i("landscape",!1),margin:i("margin"),addMargin:a,title:i("title"),author:i("author"),subject:i("subject"),keywords:i("keywords"),creator:i("creator"),date:i("date")}),p=u.addPage(),l(e,p,u),t(u.render(),u,p))}var o,a=[],c=[],d=e.options,u=T(e),h=u.bbox;e=u.root,e.traverse(function(e){s({Image:function(e){c.indexOf(e.src())<0&&c.push(e.src())},Text:function(e){var t=n().parseFontDef(e.options.font),i=n().getFontURL(t);a.indexOf(i)<0&&a.push(i)}},e)}),o=2,n().loadFonts(a,r),n().loadImages(c,r)}function r(e,t){i(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function o(e,t){i(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function a(t,n,i,a){window.Blob&&!e.support.browser.safari?o(t,function(t){e.saveAs({dataURI:t,fileName:n}),a&&a(t)}):r(t,function(t){e.saveAs({dataURI:t,fileName:n,proxyURL:i}),a&&a(t)})}function s(e,t){var n=e[t.nodeType];return n?n.call.apply(n,arguments):t}function l(e,t,n){var i,r,o;e.DEBUG&&t.comment(e.DEBUG),i=e.transform(),r=e.opacity(),t.save(),null!=r&&1>r&&t.setOpacity(r),c(e,t,n),d(e,t,n),u(e,t,n),i&&(o=i.matrix(),t.transform(o.a,o.b,o.c,o.d,o.e,o.f)),s({Path:v,MultiPath:_,Circle:y,Arc:w,Text:b,Image:x,Group:k},e,t,n),t.restore()}function c(e,t){var n,i,r,o,a,s,l=e.stroke&&e.stroke();if(l){if(n=l.color){if(n=S(n),null==n)return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}if(i=l.width,null!=i){if(0===i)return;t.setLineWidth(i)}r=l.dashType,r&&t.setDashPattern(E[r],0),o=l.lineCap,o&&t.setLineCap(M[o]),a=l.lineJoin,a&&t.setLineJoin(P[a]),s=l.opacity,null!=s&&t.setStrokeOpacity(s)}}function d(e,t){var n,i,r=e.fill&&e.fill();if(r&&!(r instanceof D.Gradient)){if(n=r.color){if(n=S(n),null==n)return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}i=r.opacity,null!=i&&t.setFillOpacity(i)}}function u(e,t,n){var i=e.clip();i&&(m(i,t,n),t.clip())}function h(e){return e&&(e instanceof D.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function p(e,t,n,i){var r,o,a,s,l,c,d=e.fill();return d instanceof D.Gradient?(i?t.stroke():t.nop(),d instanceof D.LinearGradient?(r={x:d.start().x,y:d.start().y},o={x:d.end().x,y:d.end().y},a={type:"linear",start:r,end:o,userSpace:d.userSpace(),stops:d.stops.elements().map(function(e){var t,n=e.offset();return n=/%$/.test(n)?parseFloat(n)/100:parseFloat(n),t=S(e.color()),t.a*=e.opacity(),{offset:n,color:t}})},s=e.rawBBox(),l=s.topLeft(),c=s.getSize(),s={left:l.x,top:l.y,width:c.width,height:c.height},t.gradient(a,s),!0):void(window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in PDF output."))):void 0}function f(e,t,n){h(e.fill())&&h(e.stroke())?p(e,t,n,!0)||t.fillStroke():h(e.fill())?p(e,t,n,!1)||t.fill():h(e.stroke())?t.stroke():t.nop()}function g(e,t){var n,i,r,o=e.segments;if(4==o.length&&e.options.closed){for(n=[],i=0;o.length>i;++i){if(o[i].controlIn())return!1;n[i]=o[i].anchor()}if(r=n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}function m(e,t,n){var i,r,o,a,s,l,c=e.segments;if(0!==c.length&&!g(e,t,n)){for(r=0;c.length>r;++r)o=c[r],a=o.anchor(),i?(s=i.controlOut(),l=o.controlIn(),s&&l?t.bezier(s.x,s.y,l.x,l.y,a.x,a.y):t.lineTo(a.x,a.y)):t.moveTo(a.x,a.y),i=o;e.options.closed&&t.close()}}function v(e,t,n){m(e,t,n),f(e,t,n)}function _(e,t,n){var i,r=e.paths;for(i=0;r.length>i;++i)m(r[i],t,n);f(e,t,n)}function y(e,t,n){var i=e.geometry();t.circle(i.center.x,i.center.y,i.radius),f(e,t,n)}function w(e,t,n){var i,r=e.geometry().curvePoints();for(t.moveTo(r[0].x,r[0].y),i=1;r.length>i;)t.bezier(r[i].x,r[i++].y,r[i].x,r[i++].y,r[i].x,r[i++].y);f(e,t,n)}function b(e,t){var i,r=n().parseFontDef(e.options.font),o=e._position;e.fill()&&e.stroke()?i=n().TEXT_RENDERING_MODE.fillAndStroke:e.fill()?i=n().TEXT_RENDERING_MODE.fill:e.stroke()&&(i=n().TEXT_RENDERING_MODE.stroke),t.transform(1,0,0,-1,o.x,o.y+r.fontSize),t.beginText(),t.setFont(n().getFontURL(r),r.fontSize),t.setTextRenderingMode(i),t.showText(e.content()),t.endText()}function k(e,t,n){var i,r=e.children;for(i=0;r.length>i;++i)l(r[i],t,n)}function x(e,t){var n=e.src(),i=e.rect(),r=i.getOrigin(),o=i.getSize();t.transform(o.width,0,0,-o.height,r.x,r.y+o.height),t.drawImage(n)}function C(e,n){var i=t.Deferred();return e.options.set("pdf",n),D.pdf.toDataURL(e,i.resolve),i.promise()}function S(t){var n=e.parseColor(t,!0);return n?n.toRGB():null}function T(e){function t(e){return l=!0,e}function n(e){return e.visible()&&e.opacity()>0&&(h(e.fill())||h(e.stroke()))}function i(e){var t,n,i=[];for(t=0;e.length>t;++t)n=a(e[t]),null!=n&&i.push(n);return i}function r(e,t){var n,i=c,r=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix())),n=e.clip(),n&&(n=n.bbox(),n&&(n=n.bbox(d),c=c?A.Rect.intersect(c,n):n));try{return t()}finally{c=i,d=r}}function o(e){if(null==c)return!1;var t=e.rawBBox().bbox(d);return c&&t&&(t=A.Rect.intersect(t,c)),t}function a(a){if(!(a instanceof D.Group||a instanceof D.MultiPath)){var l=o(a);if(!l)return t(null);u=u?A.Rect.union(u,l):l}return s({Path:function(e){return 0!==e.segments.length&&n(e)?e:t(null)},MultiPath:function(e){if(!n(e))return t(null);var r=new D.MultiPath(e.options);return r.paths=i(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return n(e)?e:t(null)},Arc:function(e){return n(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&n(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(n){return r(n,function(){var r=new D.Group(n.options);return r.children=i(n.children),n!==e&&0===r.children.length?t(null):r})}},a)}var l,c=!1,d=A.Matrix.unit(),u=null;do l=!1,e=a(e);while(e&&l);return{root:e,bbox:u}}var D=e.drawing,A=e.geometry,E={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},M={butt:0,round:1,square:2},P={miter:0,round:1,bevel:2};e.deepExtend(D,{exportPDF:C,pdf:{toDataURL:r,toBlob:o,saveAs:a,toStream:i}})}(window.kendo,window.kendo.jQuery),function(e,t,n){"use strict";function i(e){function t(t){return i=t.exec(e.substr(a))}function n(e){return e.replace(/^\s+|\s+$/g,"")}for(var i,r=[],o=0,a=0,s=0,l=!1;e.length>a;)t(/^\s+/)?a+=i[0].length:t(/^[\(\[\{]/)?(s++,a++):t(/^[\)\]\}]/)?(s--,a++):!l&&t(/^[\"\']/)?(l=i[0],a++):"'"==l&&t(/^\\\'/)?a+=2:'"'==l&&t(/^\\\"/)?a+=2:"'"==l&&t(/^\'/)?(l=!1,a++):'"'==l&&t(/^\"/)?(l=!1,a++):t(/^\s*,\s*/)?(!l&&!s&&a>o&&(r.push(n(e.substring(o,a))),o=a+i[0].length),a+=i[0].length):a++;return a>o&&r.push(n(e.substring(o,a))),r}function r(e,t){var n=kendo.parseColor(e);return n&&(n=n.toRGB(),t?n=n.toCssRgba():0===n.a&&(n=null)),n}function o(e,t){function n(e){j[e]||(j[e]=!0,o.push(e))}function i(){--r<=0&&t()}var r,o=[];!function s(e){var t,i=a(h(u(e),"background-image"));for(/^img$/i.test(e.tagName)&&n(e.src),i&&n(i),t=e.firstChild;t;t=t.nextSibling)1==t.nodeType&&s(t)}(e),r=o.length,0===r&&i(),o.forEach(function(e){var t=j[e]=new Image;t.onload=i,t.onerror=function(){j[e]=null,i()},t.src=e,(t.complete||void 0===t.complete)&&(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=e)})}function a(e){var t=/^\s*url\((['"]?)(.*?)\1\)\s*$/i.exec(e);return t?t[2]:void 0}function s(e,t,n){var i,r;O=Object.create(O),O[e.tagName.toLowerCase()]={element:e,style:t},i=h(t,"text-decoration"),i&&"none"!=i&&(r=h(t,"color"),i.split(/\s+/g).forEach(function(e){O[e]||(O[e]=r)})),d(e)&&(O._stackingContext={element:e,group:n})}function l(){O=Object.getPrototypeOf(O)}function c(e){if(null!=O._clipbox){var t=e.bbox(O._matrix);O._clipbox=O._clipbox?V.Rect.intersect(O._clipbox,t):t}}function d(e){function t(e){return h(n,e)}var n=u(e);return"none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1?!0:void 0}function u(e){return window.getComputedStyle(e)}function h(e,t){return e.getPropertyValue(t)||W.webkit&&e.getPropertyValue("-webkit-"+t)||W.firefox&&e.getPropertyValue("-moz-"+t)||W.opera&&e.getPropertyValue("-o-"+t)||W.msie&&e.getPropertyValue("-ms-"+t)}function p(e,t,n,i){e.setProperty(t,n,i),W.webkit?e.setProperty("-webkit-"+t,n,i):W.firefox?e.setProperty("-moz-"+t,n,i):W.opera?e.setProperty("-o-"+t,n,i):W.msie&&(e.setProperty("-ms-"+t,n,i),t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,n){return t+n.toUpperCase()}),e[t]=n)}function f(e,n){return n="border-"+n,{width:t(h(e,n+"-width")),style:h(e,n+"-style"),color:r(h(e,n+"-color"),!0)}}function g(e,t){var n=e.style.cssText,i=t();return e.style.cssText=n,i}function m(e,n){var i=h(e,"border-"+n+"-radius").split(/\s+/g).map(t);return 1==i.length&&i.push(i[0]),S({x:i[0],y:i[1]})}function v(e){var t=e.getBoundingClientRect();return t=_(t,"border-*-width",e),t=_(t,"padding-*",e)}function _(e,n,i){var r,o,a,s,l;return"string"==typeof n?(r=u(i),o=t(h(r,n.replace("*","top"))),a=t(h(r,n.replace("*","right"))),s=t(h(r,n.replace("*","bottom"))),l=t(h(r,n.replace("*","left")))):"number"==typeof n&&(o=a=s=l=n),{top:e.top+o,right:e.right-a,bottom:e.bottom-s,left:e.left+l,width:e.right-e.left-a-l,height:e.bottom-e.top-s-o}}function y(e){var n,i,r=h(e,"transform");return"none"==r?null:(n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(r),n?(i=h(e,"transform-origin"),n=n[1].split(/\s*,\s*/g).map(t),i=i.split(/\s+/g).map(t),{matrix:n,origin:i}):void 0)}function w(e){return 180*e/n.PI%360}function b(e){var i=t(e);return/grad$/.test(e)?n.PI*i/200:/rad$/.test(e)?i:/turn$/.test(e)?n.PI*i*2:/deg$/.test(e)?n.PI*i/180:void 0}function k(e,t){return t=new V.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function x(e,t){e.clip(t)}function C(e,t,n,i){for(var r=new V.Arc([t,n],i).curvePoints(),o=1;r.length>o;)e.curveTo(r[o++],r[o++],r[o++])}function S(e){return(0>=e.x||0>=e.y)&&(e.x=e.y=0),e}function T(e,n,i){var r,o,a,s,l,c,d,p,g=u(e),v=m(g,"top-left"),_=m(g,"top-right"),y=m(g,"bottom-left"),w=m(g,"bottom-right");return("padding"==i||"content"==i)&&(r=f(g,"top"),o=f(g,"right"),a=f(g,"bottom"),s=f(g,"left"),v.x-=s.width,v.y-=r.width,_.x-=o.width,_.y-=r.width,w.x-=o.width,w.y-=a.width,y.x-=s.width,y.y-=a.width,"content"==i&&(l=t(h(g,"padding-top")),c=t(h(g,"padding-right")),d=t(h(g,"padding-bottom")),p=t(h(g,"padding-left")),v.x-=p,v.y-=l,_.x-=c,_.y-=l,w.x-=c,w.y-=d,y.x-=p,y.y-=d)),"number"==typeof i&&(v.x-=i,v.y-=i,_.x-=i,_.y-=i,w.x-=i,w.y-=i,y.x-=i,y.y-=i),D(n,v,_,w,y)}function D(e,t,n,i,r){var o=new N.Path({fill:null,stroke:null});return S(t),S(n),S(i),S(r),o.moveTo(e.left,e.top+t.y),t.x&&C(o,e.left+t.x,e.top+t.y,{startAngle:-180,endAngle:-90,radiusX:t.x,radiusY:t.y}),o.lineTo(e.right-n.x,e.top),n.x&&C(o,e.right-n.x,e.top+n.y,{startAngle:-90,endAngle:0,radiusX:n.x,radiusY:n.y}),o.lineTo(e.right,e.bottom-i.y),i.x&&C(o,e.right-i.x,e.bottom-i.y,{startAngle:0,endAngle:90,radiusX:i.x,radiusY:i.y}),o.lineTo(e.left+r.x,e.bottom),r.x&&C(o,e.left+r.x,e.bottom-r.y,{startAngle:90,endAngle:180,radiusX:r.x,radiusY:r.y}),o.close()}function A(e,o){function s(t){var n,i,r,o,a,s;if(/^td$/i.test(e.tagName)&&(n=O.table,n&&"collapse"==h(n.style,"border-collapse"))){if(i=f(n.style,"left").width,r=f(n.style,"top").width,0===i&&0===r)return t;if(o=n.element.getBoundingClientRect(),a=n.element.rows[0].cells[0],s=a.getBoundingClientRect(),s.top==o.top||s.left==o.left)return U.call(t).map(function(e){return{left:e.left+i,top:e.top+r,right:e.right+i,bottom:e.bottom+r,height:e.height,width:e.width}})}return t}function l(e,t,i,r,a,s,l,c){function d(t,r,o){var a=n.PI/2*t/(t+i),s={x:r.x-t,y:r.y-i},l=new N.Path({fill:{color:e},stroke:null}).moveTo(0,0);k(l,o),C(l,0,r.y,{startAngle:-90,endAngle:-w(a),radiusX:r.x,radiusY:r.y}),s.x>0&&s.y>0?(l.lineTo(s.x*n.cos(a),r.y-s.y*n.sin(a)),C(l,0,r.y,{startAngle:-w(a),endAngle:-90,radiusX:s.x,radiusY:s.y,anticlockwise:!0})):s.x>0?l.lineTo(s.x,i).lineTo(0,i):l.lineTo(s.x,i).lineTo(s.x,0),h.append(l.close())}if(!(0>=i)){var u,h=new N.Group;k(h,c),o.append(h),S(s),S(l),u=new N.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(s.x?n.max(s.x,r):0,0).lineTo(t-(l.x?n.max(l.x,a):0),0).lineTo(t-n.max(l.x,a),i).lineTo(n.max(s.x,r),i).close(),s.x&&d(r,s,[-1,0,0,1,s.x,0]),l.x&&d(a,l,[1,0,0,1,t-l.x,0])}}function d(e){var t,n,i,r,a,s,l,c=new N.Group;for(x(c,D(e,Y,K,X,Q)),o.append(c),Z&&(t=new N.Path({fill:{color:Z.toCssRgba()},stroke:null}),t.moveTo(e.left,e.top).lineTo(e.right,e.top).lineTo(e.right,e.bottom).lineTo(e.left,e.bottom).close(),c.append(t)),l=v.length;--l>=0;)n=v[l],i=y[l]||y[y.length-1],r=b[l]||b[b.length-1],a=A[l]||A[A.length-1],s=P[l]||P[P.length-1],p(c,e,n,i,r,a,s)}function p(n,i,r,o,s,l,c){function d(n,i,r,a,d){function u(){for(;m.origin.x>i.left;)m.origin.x-=r}function h(){for(;m.origin.y>i.top;)m.origin.y-=a}function p(){for(;i.right>m.origin.x;)d(n,m.clone()),m.origin.x+=r}var f,g,m,v,y=r/a,w=i;if("content-box"==l?(w=_(w,"border-*-width",e),w=_(w,"padding-*",e)):"padding-box"==l&&(w=_(w,"border-*-width",e)),/^\s*auto(\s+auto)?\s*$/.test(c)||(f=c.split(/\s+/g),r=/%$/.test(f[0])?w.width*t(f[0])/100:t(f[0]),a=1==f.length||"auto"==f[1]?r/y:/%$/.test(f[1])?w.height*t(f[1])/100:t(f[1])),g=(s+"").split(/\s+/),1==g.length&&(g[1]="50%"),g[0]=/%$/.test(g[0])?t(g[0])/100*(w.width-r):t(g[0]),g[1]=/%$/.test(g[1])?t(g[1])/100*(w.height-a):t(g[1]),m=new V.Rect([w.left+g[0],w.top+g[1]],[r,a]),"no-repeat"==o)d(n,m);else if("repeat-x"==o)u(),p();else if("repeat-y"==o)for(h();i.bottom>m.origin.y;)d(n,m.clone()),m.origin.y+=a;else if("repeat"==o)for(u(),h(),v=m.origin.clone();i.bottom>m.origin.y;)m.origin.x=v.x,p(),m.origin.y+=a}var u,h,p;r&&"none"!=r&&(/^url\(\"data:image\/svg/i.test(r)||(u=a(r),u?(h=j[u],h&&h.width>0&&h.height>0&&d(n,i,h.width,h.height,function(e,t){e.append(new N.Image(u,t))})):(p=H(r),p&&d(n,i,i.width,i.height,E(p)))))}function g(t,n,i){function r(e){return{x:e.y,y:e.x}}var a,s,c;if(0!==t.width&&0!==t.height&&(d(t),a=$.width>0&&(n&&"ltr"==J||i&&"rtl"==J),s=G.width>0&&(i&&"ltr"==J||n&&"rtl"==J),0!==L.width||0!==$.width||0!==G.width||0!==q.width)){if(L.color==G.color&&L.color==q.color&&L.color==$.color&&L.width==G.width&&L.width==q.width&&L.width==$.width&&a&&s)return t=_(t,L.width/2),c=T(e,t,L.width/2),c.options.stroke={color:L.color,width:L.width},void o.append(c);if(0===Y.x&&0===K.x&&0===X.x&&0===Q.x&&2>L.width&&2>$.width&&2>G.width&&2>q.width)return L.width>0&&o.append(new N.Path({stroke:{width:L.width,color:L.color}}).moveTo(t.left,t.top+L.width/2).lineTo(t.right,t.top+L.width/2)),q.width>0&&o.append(new N.Path({stroke:{width:q.width,color:q.color}}).moveTo(t.left,t.bottom-q.width/2).lineTo(t.right,t.bottom-q.width/2)),a&&o.append(new N.Path({stroke:{width:$.width,color:$.color}}).moveTo(t.left+$.width/2,t.top).lineTo(t.left+$.width/2,t.bottom)),void(s&&o.append(new N.Path({stroke:{width:G.width,color:G.color}}).moveTo(t.right-G.width/2,t.top).lineTo(t.right-G.width/2,t.bottom)));l(L.color,t.width,L.width,$.width,G.width,Y,K,[1,0,0,1,t.left,t.top]),l(q.color,t.width,q.width,G.width,$.width,X,Q,[-1,0,0,-1,t.right,t.bottom]),l($.color,t.height,$.width,q.width,L.width,r(Q),r(Y),[0,-1,1,0,t.left,t.bottom]),l(G.color,t.height,G.width,L.width,q.width,r(K),r(X),[0,1,-1,0,t.right,t.top])}}var v,y,b,A,P,I,F,R,B=u(e),L=f(B,"top"),G=f(B,"right"),q=f(B,"bottom"),$=f(B,"left"),Y=m(B,"top-left"),K=m(B,"top-right"),Q=m(B,"bottom-left"),X=m(B,"bottom-right"),J=h(B,"direction"),Z=h(B,"background-color");for(Z=r(Z),v=i(h(B,"background-image")),y=i(h(B,"background-repeat")),b=i(h(B,"background-position")),A=i(h(B,"background-origin")),P=i(h(B,"background-size")),W.msie&&10>W.version&&(b=i(e.currentStyle.backgroundPosition)),I=_(e.getBoundingClientRect(),"border-*-width",e),function(){var e,n,i,r,a,s,l,d=h(B,"clip"),u=/^\s*rect\((.*)\)\s*$/.exec(d);u&&(e=u[1].split(/[ ,]+/g),n="auto"==e[0]?I.top:t(e[0])+I.top,i="auto"==e[1]?I.right:t(e[1])+I.left,r="auto"==e[2]?I.bottom:t(e[2])+I.top,a="auto"==e[3]?I.left:t(e[3])+I.left,s=new N.Group,l=(new N.Path).moveTo(a,n).lineTo(i,n).lineTo(i,r).lineTo(a,r).close(),x(s,l),o.append(s),o=s,c(l))}(),F=e.getClientRects(),1==F.length&&(F=[e.getBoundingClientRect()]),F=s(F),R=0;F.length>R;++R)g(F[R],0===R,R==F.length-1);return function(){function t(){var t=T(e,I,"padding"),n=new N.Group;x(n,t),o.append(n),o=n,c(t)}/^(hidden|auto|scroll)/.test(h(B,"overflow"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-x"))?t():/^(hidden|auto|scroll)/.test(h(B,"overflow-y"))&&t()}(),M(e,o)||z(e,o),o}function E(e){return function(i,r){{var o,a,s,l,c,d,u,h,p,f,g,m,v,_=r.width(),y=r.height();r.topLeft()}switch(e.type){case"linear":switch(o=null!=e.angle?e.angle:n.PI,e.to){case"top":o=0;break;case"left":o=-n.PI/2;break;case"bottom":o=n.PI;break;case"right":o=n.PI/2;break;case"top left":case"left top":o=-n.atan2(y,_);break;case"top right":case"right top":o=n.atan2(y,_);break;case"bottom left":case"left bottom":o=n.PI+n.atan2(y,_);break;case"bottom right":case"right bottom":o=n.PI-n.atan2(y,_)}e.reverse&&(o-=n.PI),o%=2*n.PI,0>o&&(o+=2*n.PI),a=n.abs(_*n.sin(o))+n.abs(y*n.cos(o)),s=n.atan(_*n.tan(o)/y),l=n.sin(s),c=n.cos(s),d=n.abs(l)+n.abs(c),u=d/2*l,h=d/2*c,o>n.PI/2&&3*n.PI/2>=o&&(u=-u,h=-h),p=[],f=0,g=e.stops.map(function(n,i){var r,o=n.percent;return o?o=t(o)/100:n.length?o=t(n.length)/a:0===i?o=0:i==e.stops.length-1&&(o=1),r={color:n.color.toCssRgba(),offset:o},null!=o?(f=o,p.forEach(function(e,t){var n=e.stop;n.offset=e.left+(f-e.left)*(t+1)/(p.length+1)}),p=[]):p.push({left:f,stop:r}),r}),m=[.5-u,.5+h],v=[.5+u,.5-h],i.append(N.Path.fromRect(r).stroke(null).fill(new N.LinearGradient({start:m,end:v,stops:g,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function M(t,n){var i,r,o,a;return t.getAttribute(kendo.attr("role"))&&(i=kendo.widgetInstance(e(t)),i&&(i.exportDOMVisual||i.exportVisual))?(r=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual(),o=new N.Group,o.children.push(r),a=t.getBoundingClientRect(),o.transform(V.transform().translate(a.left,a.top)),n.append(o),!0):void 0}function P(e,t,n){var i=v(e),r=new V.Rect([i.left,i.top],[i.width,i.height]),o=new N.Image(t,r);x(o,T(e,i,"content")),n.append(o)}function I(e,n){var i=u(e),r=u(n),o=t(h(i,"z-index")),a=t(h(r,"z-index")),s=h(i,"position"),l=h(r,"position");return isNaN(o)&&isNaN(a)?/static|absolute/.test(s)&&/static|absolute/.test(l)?0:"static"==s?-1:"static"==l?1:0:isNaN(o)?0===a?0:a>0?-1:1:isNaN(a)?0===o?0:o>0?1:-1:t(o)-t(a)}function z(e,t){var n,i,r,o,a,s,l,c,d;switch(e.tagName.toLowerCase()){case"img":P(e,e.src,t);break;case"canvas":try{P(e,e.toDataURL("image/jpeg"),t)}catch(p){}break;case"textarea":case"input":break;default:for(n=[],i=[],r=[],o=[],a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:/\S/.test(a.data)&&F(e,a,t);break;case 1:s=u(a),l=h(s,"display"),c=h(s,"float"),d=h(s,"position"),"static"!=d?o.push(a):"inline"!=l?"none"!=c?i.push(a):n.push(a):r.push(a)}n.sort(I).forEach(function(e){B(e,t)}),i.sort(I).forEach(function(e){B(e,t)}),r.sort(I).forEach(function(e){B(e,t)}),o.sort(I).forEach(function(e){B(e,t)})}}function F(e,n,i){function r(){for(var e,t,i;!/\S/.test(s.charAt(p));){if(p>=f)return!0;p++}for(l.setStart(n,p),e=0;++p<=f;)if(++e,l.setEnd(n,p),e>1&&(d&&/\s/.test(s.charAt(p-1))||l.getClientRects().length>1)){l.setEnd(n,--p);break}t=l.getClientRects()[0],i=(""+l).replace(/\s+$/,""),o(i,t)}function o(e,t){var n,r,o;e=e.replace(/[\r\n ]+/g," "),W.msie&&!isNaN(m)&&(n=N.util.measureText(e,{font:v}),r=(t.top+t.bottom-n.height)/2,t={top:r,right:t.right,bottom:r+n.height,left:t.left,height:n.height,width:t.right-t.left}),o=new N.Text(e,new V.Point(t.left,t.top),{font:v,fill:{color:_}}),i.append(o),a(t)}function a(e){function t(t,n){var r,o;t&&(r=g/12,o=new N.Path({stroke:{width:r,color:t}}),n-=r,o.moveTo(e.left,n).lineTo(e.right,n),i.append(o))}t(O.underline,e.bottom),t(O["line-through"],e.bottom-e.height/2.7),t(O.overline,e.top)}var s,l,c,d,p,f,g,m,v,_,y=u(e);if(!(t(h(y,"text-indent"))<-500)&&(s=n.data,l=e.ownerDocument.createRange(),c=h(y,"text-align"),d="justify"==c,p=0,f=/\S\s*$/.exec(n.data).index+1,g=h(y,"font-size"),m=h(y,"line-height"),v=[h(y,"font-style"),h(y,"font-variant"),h(y,"font-weight"),g,h(y,"font-family")].join(" "),g=t(g),m=t(m),0!==g))for(_=h(y,"color");!r(););}function R(e,t){var n,i,r=O._stackingContext.group,o=r.children;for(n=0;o.length>n&&!(null!=o[n]._dom_zIndex&&o[n]._dom_zIndex>t);++n);return i=new N.Group,r.insertAt(i,n),i._dom_zIndex=t,O._clipbox&&i.clip(N.Path.fromRect(O._clipbox)),i}function B(n,i){var r,o,a,c,d,f,m;/^(style|script|link|meta|iframe|svg)$/i.test(n.tagName)||null!=O._clipbox&&(r=u(n),o=t(h(r,"opacity")),a=h(r,"visibility"),c=h(r,"display"),0!==o&&"hidden"!=a&&"none"!=c&&(d=y(r),m=h(r,"z-index"),(d||1>o)&&"auto"==m&&(m=0),"auto"!=m?f=R(i,m):(f=new N.Group,i.append(f)),f.DEBUG=e(n).data("debug"),1>o&&f.opacity(o*f.opacity()),s(n,r,f),d?g(n,function(){var e,t,i,o;p(n.style,"transform","none","important"),p(n.style,"transition","none","important"),"static"==h(r,"position")&&p(n.style,"position","relative","important"),e=n.getBoundingClientRect(),t=e.left+d.origin[0],i=e.top+d.origin[1],o=[1,0,0,1,-t,-i],o=L(o,d.matrix),o=L(o,[1,0,0,1,t,i]),o=k(f,o),O._matrix=O._matrix.multiplyCopy(o),A(n,f)}):A(n,f),l()))}function L(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],p=t[5];return[n*l+i*d,n*c+i*u,r*l+o*d,r*c+o*u,a*l+s*d+h,a*c+s*u+p]}var O,H,N=kendo.drawing,V=kendo.geometry,U=Array.prototype.slice,W=kendo.support.browser,j={};N.drawDOM=function(t){var n=e.Deferred();return t=e(t)[0],t?o(t,function(){var e=new N.Group,i=t.getBoundingClientRect();k(e,[1,0,0,1,-i.left,-i.top]),O._clipbox=!1,O._matrix=V.Matrix.unit(),O._stackingContext={element:t,group:e},B(t,e),n.resolve(e)}):n.reject("No element to export"),n.promise()},O={},H=function(){var e=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,t=/^([-0-9.]+%)/,n=/^([-0-9.]+px)/,i=/^(left|right|top|bottom|to|center)\W/,r=/^([-0-9.]+(deg|grad|rad|turn))/,o=/^(\s+)/,a=/^(\()/,s=/^(\))/,l=/^(,)/;return function(c){function d(){var e=o.exec(c);e&&(c=c.substr(e[1].length))}function u(e){d();var t=e.exec(c);return t?(c=c.substr(t[1].length),t[1]):void 0}function h(){var e,i,r=kendo.parseColor(c,!0);return r?(c=c.substr(r.match[0].length),r=r.toRGB(),(e=u(n))||(i=u(t)),{color:r,length:e,percent:i}):void 0}function p(e){var n,o,d,p,g,m,v=[],_=!1;if(u(a)){for(n=u(r),n?(n=b(n),u(l)):(o=u(i),"to"==o?o=u(i):o&&/^-/.test(e)&&(_=!0),d=u(i),u(l)),/-moz-/.test(e)&&null==n&&null==o&&(p=u(t),g=u(t),_=!0,"0%"==p?o="left":"100%"==p&&(o="right"),"0%"==g?d="top":"100%"==g&&(d="bottom"),u(l));c&&!u(s)&&(m=h());)v.push(m),u(l);return{type:"linear",angle:n,to:o&&d?o+" "+d:o?o:d?d:null,stops:v,reverse:_,orig:f}}}var f=c,g=u(e);return g?p(g):void 0}}()}(window.kendo.jQuery,parseFloat,Math),function(e){var t=e.noop,n=window.kendo,i=n.Class,r=n.util,o=n.animationFrame,a=n.deepExtend,s=i.extend({init:function(e,t){var n=this;n.options=a({},n.options,t),n.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,n=t.options,i=e.easing[n.easing],a=n.duration,s=n.delay||0,l=r.now()+s,c=l+a;0===a?(t.step(1),t.abort()):setTimeout(function(){var e=function(){var n,s,d,u;t._stopped||(n=r.now(),s=r.limitValue(n-l,0,a),d=s/a,u=i(d,s,0,1,a),t.step(u),c>n?o(e):t.abort())};e()},s)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var n,i,r,o=this._items;if(t&&t.type)for(i=t.type.toLowerCase(),r=0;o.length>r;r++)if(o[r].name.toLowerCase()===i){n=o[r];break}return n?new n.type(e,t):void 0}},l.current=new l,s.create=function(e,t,n){return l.current.create(e,t,n)},a(n.drawing,{Animation:s,AnimationFactory:l})}(window.kendo.jQuery,Math),function(e){function t(t){var n,i=s.ui.validator.ruleResolvers||{},r={};for(n in i)e.extend(!0,r,i[n].resolve(t));return r}function n(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function i(e){return e=(e+"").split("."),e.length>1?e[1].length:0}function r(t){return e(e.parseHTML?e.parseHTML(t):t)}function o(t,n){var i,r,o,a,l=e();for(o=0,a=t.length;a>o;o++)i=t[o],u.test(i.className)&&(r=i.getAttribute(s.attr("for")),r===n&&(l=l.add(i)));return l}var a,s=window.kendo,l=s.ui.Widget,c=".kendoValidator",d="k-invalid-msg",u=RegExp(d,"i"),h="k-invalid",p=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,g=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",m=":checkbox:not([disabled],[readonly])",v="[type=number],[type=range]",_="blur",y="name",w="form",b="novalidate",k=e.proxy,x=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},C=function(e,t,n){var i=e.val();return e.filter(t).length&&""!==i?x(i,n):!0},S=function(e,t){return e.length?null!=e[0].attributes[t]:!1};s.ui.validator||(s.ui.validator={rules:{},messages:{}}),a=l.extend({init:function(n,i){var r=this,o=t(n),a="["+s.attr("validate")+"!=false]";i=i||{},i.rules=e.extend({},s.ui.validator.rules,o.rules,i.rules),i.messages=e.extend({},s.ui.validator.messages,o.messages,i.messages),l.fn.init.call(r,n,i),r._errorTemplate=s.template(r.options.errorTemplate),r.element.is(w)&&r.element.attr(b,b),r._inputSelector=g+a,r._checkboxSelector=m+a,r._errors={},r._attachEvents(),r._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(S(e,"required")&&(""===n||!n||t))},pattern:function(e){return e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&""!==e.val()?x(e.val(),e.attr("pattern")):!0},min:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,n=s.parseFloat(e.val());return n>=t}return!0},max:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[max]").length&&""!==e.val()){var t=parseFloat(e.attr("max"))||0,n=s.parseFloat(e.val());return t>=n}return!0},step:function(e){if(e.filter(v+",["+s.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),a=i(r);return a?(t=Math.pow(10,a),(o-n)*t%(r*t)/Math.pow(100,a)===0):(o-n)%r===0}return!0},email:function(e){return C(e,"[type=email],["+s.attr("type")+"=email]",p)},url:function(e){return C(e,"[type=url],["+s.attr("type")+"=url]",f)},date:function(e){return e.filter("[type^=date],["+s.attr("type")+"=date]").length&&""!==e.val()?null!==s.parseDate(e.val(),e.attr(s.attr("format"))):!0}},validateOnBlur:!0},destroy:function(){l.fn.destroy.call(this),this.element.off(c)},value:function(){return this._isValidated?0===this.errors().length:!1},_submit:function(e){return this.validate()?!0:(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is(w)&&t.element.on("submit"+c,k(t._submit,t)),t.options.validateOnBlur&&(t.element.is(g)?(t.element.on(_+c,function(){t._checkElement(t.element)}),t.element.is(m)&&t.element.on("click"+c,function(){t._checkElement(t.element)})):(t.element.on(_+c,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+c,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,n,i,r=!1,o=this.value();if(this._errors={},this.element.is(g))r=this.validateInput(this.element);else{for(i=!1,e=this.element.find(this._inputSelector),t=0,n=e.length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);r=!i}return this.trigger("validate",{valid:r}),o!==r&&this.trigger("change"),r},validateInput:function(t){var i,o,a,l,c,u,p,f,g;return t=e(t),this._isValidated=!0,i=this,o=i._errorTemplate,a=i._checkValidity(t),l=a.valid,c="."+d,u=t.attr(y)||"",p=i._findMessageContainer(u).add(t.next(c).filter(function(){var t=e(this);return t.filter("["+s.attr("for")+"]").length?t.attr(s.attr("for"))===u:!0})).hide(),t.removeAttr("aria-invalid"),l?delete i._errors[u]:(f=i._extractMessage(t,a.key),i._errors[u]=f,g=r(o({message:n(f)})),i._decorateMessageContainer(g,u),p.replaceWith(g).length||g.insertAfter(t),g.show(),t.attr("aria-invalid",!0)),t.toggleClass(h,!l),l},hideMessages:function(){var e=this,t="."+d,n=e.element;n.is(g)?n.next(t).hide():n.find(t).hide()},_findMessageContainer:function(t){var n,i,r,a=s.ui.validator.messageLocators,l=e();for(i=0,r=this.element.length;r>i;i++)l=l.add(o(this.element[i].getElementsByTagName("*"),t));for(n in a)l=l.add(a[n].locate(this.element,t));return l},_decorateMessageContainer:function(e,t){var n,i=s.ui.validator.messageLocators;e.addClass(d).attr(s.attr("for"),t||"");for(n in i)i[n].decorate(e,t);e.attr("role","alert")
},_extractMessage:function(e,t){var n=this,i=n.options.messages[t],r=e.attr(y);return i=s.isFunction(i)?i(e):i,s.format(e.attr(s.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||i||"",r,e.attr(t))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),s.ui.plugin(a)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],a=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(n=a?a.changedTouches:[],t=n.length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier,type:"touch"});else r.push(o.pointers||o.msPointers?{location:a,event:e,target:e.target,currentTarget:s,id:a.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:s,location:e,type:"mouse"});return r}function i(e){for(var t=r.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var r=window.kendo,o=r.support,a=window.document,s=r.Class,l=r.Observable,c=e.now,d=e.extend,u=o.mobileOS,h=u&&u.android,p=800,f=o.browser.msie?5:0,g="press",m="hold",v="select",_="start",y="move",w="end",b="cancel",k="tap",x="release",C="gesturestart",S="gesturechange",T="gestureend",D="gesturetap",A={api:0,touch:0,mouse:9,pointer:9},E=s.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=c()},move:function(e){var t=this,n=e["page"+t.axis],i=c(),r=i-t.timeStamp||1;(n||!h)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),M=s.extend({init:function(e,t,n){d(this,{x:new E("X",n.location),y:new E("Y",n.location),type:n.type,threshold:e.threshold||A[n.type],userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,pressEvent:n,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(g,this.pressEvent)},_hold:function(){this._trigger(m,this.pressEvent)},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(P.current&&P.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(y,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._finished=!0,t._trigger(x,e),t._moved?t._trigger(w,e):t._trigger(k,e),clearTimeout(t._holdTimeout),t.dispose())},dispose:function(){var t=this.userEvents,n=t.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),n.splice(e.inArray(this,n),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger(_,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),P=l.extend({init:function(t,n){var s,c,u,h=this,A=r.guid();n=n||{},s=h.filter=n.filter,h.threshold=n.threshold||f,h.minHold=n.minHold||p,h.touches=[],h._maxTouches=n.multiTouch?2:1,h.allowSelection=n.allowSelection,h.captureUpIfMoved=n.captureUpIfMoved,h.eventNS=A,t=e(t).handler(h),l.fn.init.call(h),d(h,{element:t,surface:e(n.global&&!o.touch?a.documentElement:n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),h.surface.handler(h).on(r.applyEventMap("move",A),"_move").on(r.applyEventMap("up cancel",A),"_end"),t.on(r.applyEventMap("down",A),s,"_start"),(o.pointers||o.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(r.applyEventMap("dragstart",A),r.preventDefault),t.on(r.applyEventMap("mousedown",A),s,{root:t},"_select"),h.captureUpIfMoved&&o.eventCapture&&(c=h.surface[0],u=e.proxy(h.preventIfMoving,h),i(function(e){c.addEventListener(e,u,!0)})),h.bind([g,m,k,_,y,w,x,b,C,S,T,D,v],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&o.eventCapture&&(e=t.surface[0],i(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget)},capture:function(){P.current=this},cancel:function(){this._disposeAll(),this.trigger(b)},notify:function(e,n){var i=this,r=i.touches;if(this._isMultiTouch()){switch(e){case y:e=S;break;case w:e=T;break;case k:e=D}d(n,{touches:r},t(r[0],r[1]))}return this.trigger(e,d(n,{type:e}))},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(v,{event:e}))&&e.preventDefault()},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),c=l.length,d=t.which;if(!(d&&d>1||o._maxTouchesReached()))for(P.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();c>a&&!o._maxTouchesReached();a++)r=l[a],i=s?e(r.currentTarget):o.element,i.length&&(r=new M(o,i,r),o.touches.push(r),r.press(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s=this,l={},c=n(t),d=s.touches;for(i=0;d.length>i;i++)r=d[i],l[r.id]=r;for(i=0;c.length>i;i++)o=c[i],a=l[o.id],a&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,clientX:n,clientY:i,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});P.defaultThreshold=function(e){f=e},P.minHold=function(e){p=e},r.getTouches=n,r.touchDelta=t,r.UserEvents=P}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e,t){return parseInt(e.css(t),10)||0}function r(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=k(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),o=n.top+i(e,"borderTopWidth")+i(e,"paddingTop"),a=r+e.width()-t.outerWidth(!0),s=o+e.height()-t.outerHeight(!0);return{x:{min:r,max:a},y:{min:o,max:s}}}function a(e,n,i){for(var r,o,a=0,s=n&&n.length,l=i&&i.length;e&&e.parentNode;){for(a=0;s>a;a++)if(r=n[a],r.element[0]===e)return{target:r,targetElement:e};for(a=0;l>a;a++)if(o=i[a],f.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e};e=e.parentNode}return t}var s,l,c,d,u,h,p=window.kendo,f=p.support,g=window.document,m=p.Class,v=p.ui.Widget,_=p.Observable,y=p.UserEvents,w=e.proxy,b=e.extend,k=p.getOffset,x={},C={},S={},T=p.elementUnderCursor,D="keyup",A="change",E="dragstart",M="hold",P="drag",I="dragend",z="dragcancel",F="dragenter",R="dragleave",B="drop",L=_.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener?(e.each(p.eventMap.down.split(" "),function(){r.addEventListener(this,w(i._press,i),!0)}),e.each(p.eventMap.up.split(" "),function(){r.addEventListener(this,w(i._release,i),!0)})):(e.each(p.eventMap.down.split(" "),function(){r.attachEvent(this,w(i._press,i))}),e.each(p.eventMap.up.split(" "),function(){r.attachEvent(this,w(i._release,i))})),_.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),O=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||this.min>e},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();0!==n&&(t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(A,t))}}),H=_.extend({init:function(e){var t=this;_.fn.init.call(t),t.x=new O(b({horizontal:!0},e)),t.y=new O(b({horizontal:!1},e)),t.container=e.container,t.forcedMinScale=e.minScale,t.maxScale=e.maxScale||100,t.bind(A,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(A)}}),N=_.extend({init:function(e){var t=this;b(t,e),_.fn.init.call(t)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((n.min>o&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(A,t))}}),V=m.extend({init:function(e){var t,n,i,r,o=this;b(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new N({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new N({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},gesturechange:function(e){var i,a,s,l=o.gesture,c=l.center,d=e.center,u=e.distance/l.distance,h=o.dimensions.minScale,p=o.dimensions.maxScale;h>=r.scale&&1>u&&(u+=.8*(1-u)),r.scale*u>=p&&(u=p/r.scale),a=r.x+o.offset.left,s=r.y+o.offset.top,i={x:(a-c.x)*u+d.x-a,y:(s-c.y)*u+d.y-s},r.scaleWith(u),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),U=f.transitions.prefix+"Transform";l=f.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},c=_.extend({init:function(t){var n=this;_.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(l(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){b(this,e),this.refresh()},refresh:function(){var e,t=this,n=t.x,i=t.y;t.round&&(n=Math.round(n),i=Math.round(i)),e=l(n,i,t.scale),e!=t.coordinates&&(p.support.browser.msie&&10>p.support.browser.version?(t.element[0].style.position="absolute",t.element[0].style.left=t.x+"px",t.element[0].style.top=t.y+"px"):t.element[0].style[U]=e,t._saveCoordinates(e),t.trigger(A))},_saveCoordinates:function(e){this.coordinates=e}}),d=v.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in C?C[n].push(i):C[n]=[i]},events:[F,R,B],options:{name:"DropTarget",group:"default"},destroy:function(){var e,t=this.options.group,n=C[t]||S[t];if(n.length>1){for(v.fn.destroy.call(this),e=0;n.length>e;e++)if(n[e]==this){n.splice(e,1);break}}else d.destroyGroup(t)},_trigger:function(e,n){var i=this,r=x[i.options.group];return r?i.trigger(e,b({},n.event,{draggable:r,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(F,e)},_out:function(e){this._trigger(R,e)},_drop:function(e){var t=this,n=x[t.options.group];n&&(n.dropped=!t._trigger(B,e))}}),d.destroyGroup=function(e){var t,n=C[e]||S[e];if(n){for(t=0;n.length>t;t++)v.fn.destroy.call(n[t]);n.length=0,delete C[e],delete S[e]}},d._cache=C,u=d.extend({init:function(e,t){var n,i=this;v.fn.init.call(i,e,t),n=i.options.group,n in S?S[n].push(i):S[n]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}}),h=v.extend({init:function(e,t){var n=this;v.fn.init.call(n,e,t),n._activated=!1,n.userEvents=new y(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:w(n._start,n),hold:w(n._hold,n),move:w(n._drag,n),end:w(n._end,n),cancel:w(n._cancel,n),select:w(n._select,n)}),n._afterEndHandler=w(n._afterEnd,n),n._captureEscape=w(n._captureEscape,n)},events:[M,E,P,I,z],options:{name:"Draggable",distance:p.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var t=this;e.keyCode===p.keys.ESC&&(t._trigger(z,{event:e}),t.userEvents.cancel())},_updateHint:function(t){var n,i=this,o=i.options,a=i.boundaries,s=o.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=r(n.top,a.y),n.left=r(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(t){var n=this.options.ignore;return n&&e(t).is(n)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(n){var i,r=this,a=r.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!r._activated?(r.userEvents.cancel(),t):(r.currentTarget=n.target,r.currentTargetOffset=k(r.currentTarget),l&&(r.hint&&r.hint.stop(!0,!0).remove(),r.hint=p.isFunction(l)?e(l.call(r,r.currentTarget)):l,i=k(r.currentTarget),r.hintOffset=i,r.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(g.body),r.angular("compile",function(){return r.hint.removeAttr("ng-repeat"),{elements:r.hint.get(),scopeFrom:n.target}})),x[a.group]=r,r.dropped=!1,s&&(r.boundaries=o(s,r.hint)),r._trigger(E,n)&&(r.userEvents.cancel(),r._afterEnd()),r.userEvents.capture(),e(g).on(D,r._captureEscape),t)},_hold:function(e){this.currentTarget=e.target,this._trigger(M,e)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i=this;n.preventDefault(),i._withDropTarget(n,function(i,r){if(!i)return s&&(s._trigger(R,b(n,{dropTarget:e(s.targetElement)})),s=null),t;if(s){if(r===s.targetElement)return;s._trigger(R,b(n,{dropTarget:e(s.targetElement)}))}i._trigger(F,b(n,{dropTarget:e(r)})),s=b(i,{targetElement:r})}),i._trigger(P,b(n,{dropTarget:s})),i.hint&&i._updateHint(n)},_end:function(t){var n=this;n._withDropTarget(t,function(n,i){n&&(n._drop(b({},t,{dropTarget:e(i)})),s=null)}),n._trigger(I,t),n._cancel(t.event)},_cancel:function(){var e=this;e._activated=!1,e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,b({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var i,r,o=this,s=o.options,l=C[s.group],c=S[s.group];(l&&l.length||c&&c.length)&&(i=T(e),o.hint&&n(o.hint[0],i)&&(o.hint.hide(),i=T(e),i||(i=T(e)),o.hint.show()),r=a(i,l,c),r?t(r.target,r.targetElement):t())},destroy:function(){var e=this;v.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy(),e.currentTarget=null},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete x[t.options.group],t.trigger("destroy"),e(g).off(D,t._captureEscape)}}),p.ui.plugin(d),p.ui.plugin(u),p.ui.plugin(h),p.TapCapture=L,p.containerBoundaries=o,b(p.ui,{Pane:V,PaneDimensions:H,Movable:c})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.effects,o=i.ui,a=e.proxy,s=e.extend,l=o.Widget,c=n.Class,d=n.ui.Movable,u=n.ui.Pane,h=n.ui.PaneDimensions,p=r.Transition,f=r.Animation,g=Math.abs,m=500,v=.7,_=.96,y=10,w=55,b=.5,k=5,x="km-scroller-release",C="km-scroller-refresh",S="pull",T="change",D="resize",A="scroll",E=2,M=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e),t.userEvents.bind("gestureend",a(t.start,t)),t.tapCapture.bind("press",a(t.cancel,t))},enabled:function(){return this.dimensions.minScale>this.movable.scale},done:function(){return.01>this.dimensions.minScale-this.movable.scale},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),P=f.extend({init:function(e){var t=this;f.fn.init.call(t),s(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",a(t.start,t)),t.userEvents.bind("gestureend",a(t.start,t)),t.userEvents.bind("tap",a(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e.paneAxis.outOfBounds()?e._snapBack():e._end()},done:function(){return g(this.velocity)<1},start:function(e){var t,n=this;n.dimension.enabled&&(n.paneAxis.outOfBounds()?n._snapBack():(t=e.touch.id===E?0:e.touch[n.axis].velocity,n.velocity=Math.max(Math.min(t*n.velocityMultiplier,w),-w),n.tapCapture.captureNext(),f.fn.start.call(n)))},tick:function(){var e=this,t=e.dimension,n=e.paneAxis.outOfBounds()?b:e.friction,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:m,ease:p.easeOutExpo})}}),I=f.extend({init:function(e){var t=this;n.effects.Animation.fn.init.call(this),s(t,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return g(this.offset.y)<k&&g(this.offset.x)<k},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&n.isFunction(e)?this.callback=e:e=t},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),z=c.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new d(r),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(T,a(n.refresh,n)),n.container.append(r),t.alwaysVisible&&n.show()},refresh:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);o>=1?this.element.css("display","none"):this.element.css("display",""),a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:v,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),F=l.extend({init:function(i,r){var o,c,p,f,m,v,_,y,w,b=this;return l.fn.init.call(b,i,r),i=b.element,(b._native=b.options.useNative&&n.support.hasNativeScrolling)?(i.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),s(b,{scrollElement:i,fixedContainer:i.children().first()}),t):(i.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),o=i.children().eq(1),c=new n.TapCapture(i),p=new d(o),f=new h({element:o,container:i,forcedEnabled:b.options.zoom}),m=this.options.avoidScrolling,v=new n.UserEvents(i,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:b.options.zoom,start:function(t){f.refresh();var n=g(t.x.velocity),i=g(t.y.velocity),r=2*n>=i,o=e.contains(b.fixedContainer[0],t.event.target),a=2*i>=n;!o&&!m(t)&&b.enabled&&(f.x.enabled&&r||f.y.enabled&&a)?v.capture():v.cancel()}}),_=new u({movable:p,dimensions:f,userEvents:v,elastic:b.options.elastic}),y=new M({movable:p,dimensions:f,userEvents:v,tapCapture:c}),w=new I({moveTo:function(e){b.scrollTo(e.x,e.y)}}),p.bind(T,function(){b.scrollTop=-p.y,b.scrollLeft=-p.x,b.trigger(A,{scrollTop:b.scrollTop,scrollLeft:b.scrollLeft})}),b.options.mousewheelScrolling&&i.on("DOMMouseScroll mousewheel",a(this,"_wheelScroll")),s(b,{movable:p,dimensions:f,zoomSnapBack:y,animatedScroller:w,userEvents:v,pane:_,tapCapture:c,pulled:!1,enabled:!0,scrollElement:o,scrollTop:0,scrollLeft:0,fixedContainer:i.children().first()}),b._initAxis("x"),b._initAxis("y"),b._wheelEnd=function(){b._wheel=!1,b.userEvents.end(0,b._wheelY)},f.refresh(),b.options.pullToRefresh&&b._initPullToRefresh(),t)},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=n.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[S,A,D],_resize:function(){this._native||this.contentResized()},setOptions:function(e){var t=this;l.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(g(e)),this.scrollElement.scrollTop(g(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,n){var i,r;this._native?this.scrollTo(e,t):(i={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},pullHandled:function(){var e=this;e.refreshHint.removeClass(C),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd(),e.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=n.template(e.options.messages.pullTemplate),e.releaseTemplate=n.template(e.options.messages.releaseTemplate),e.refreshTemplate=n.template(e.options.messages.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",a(e._paneChange,e)),e.userEvents.bind("end",a(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x).addClass(C),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/b>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(C).addClass(x),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(x),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=t.pane[e],a=new z({axis:e,movable:n,dimension:i,container:t.element,alwaysVisible:t.options.visibleScrollHints});i.bind(T,function(){a.refresh()}),o.bind(T,function(){a.show()}),t[e+"inertia"]=new P({axis:e,paneAxis:o,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,friction:t.options.friction||_,velocityMultiplier:t.options.velocityMultiplier||y,end:function(){a.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});o.plugin(F)}(window.kendo.jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,o=e.proxy,a=!1,s=".kendoGroupable",l="change",c=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},u=e('<div class="k-grouping-dropclue"/>'),h=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,p=r.extend({init:function(c,h){var p,f,g=this,m=i.guid(),v=o(g._intializePositions,g),_=g._dropCuePositions=[];r.fn.init.call(g,c,h),a=i.support.isRtl(c),f=a?"right":"left",g.draggable=p=g.options.draggable||new i.ui.Draggable(g.element,{filter:g.options.draggableElements,hint:d,group:m}),g.groupContainer=e(g.options.groupContainer,g.element).kendoDropTarget({group:p.options.group,dragenter:function(e){g._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),u.css("top",n(g.groupContainer)).css(f,0).appendTo(g.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),u.remove()},drop:function(t){var n,r=t.draggable.currentTarget,o=r.attr(i.attr("field")),s=r.attr(i.attr("title")),l=g.indicator(o),c=g._dropCuePositions,d=c[c.length-1];(r.hasClass("k-group-indicator")||g._canDrag(r))&&(d?(n=g._dropCuePosition(i.getOffset(u).left+parseInt(d.element.css("marginLeft"),10)*(a?-1:1)+parseInt(d.element.css("marginRight"),10)),n&&g._canDrop(e(l),n.element,n.left)&&(n.before?n.element.before(l||g.buildIndicator(o,s)):n.element.after(l||g.buildIndicator(o,s)),g._change())):(g.groupContainer.append(g.buildIndicator(o,s)),g._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:p.options.group,dragcancel:o(g._dragCancel,g),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position(),o=a?r.left-i:r.left+t.outerWidth();v(),u.css({top:n(g.groupContainer),left:o}).appendTo(g.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){g._dragEnd(this)},drag:o(g._drag,g)}).on("click"+s,".k-button",function(t){t.preventDefault(),g._removeIndicator(e(this).parent())}).on("click"+s,".k-link",function(t){var n=e(this).parent(),r=g.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),g._change(),t.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){g._dragEnd(this)},dragcancel:o(g._dragCancel,g),dragstart:function(e){var n,i,r;return g.options.allowDrag||g._canDrag(e.currentTarget)?(v(),_.length?(n=_[_.length-1].element,i=parseInt(n.css("marginRight"),10),r=n.position().left+n.outerWidth()+i):r=0,t):(e.preventDefault(),t)},drag:o(g._drag,g)}),g.dataSource=g.options.dataSource,g.dataSource&&g._refreshHandler?g.dataSource.unbind(l,g._refreshHandler):g._refreshHandler=o(g.refresh,g),g.dataSource&&(g.dataSource.bind("change",g._refreshHandler),g.refresh())},refresh:function(){var t=this,n=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(n.group()||[],function(e){var n=e.field.replace(h,"\\$1"),r=t.element.find(t.options.filter).filter("["+i.attr("field")+"="+n+"]");return t.buildIndicator(e.field,r.attr(i.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;r.fn.destroy.call(e),e.groupContainer.off(s),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return c({field:e.replace(/"/g,"'"),dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,o,a,s=this,l=e(".k-group-indicator",s.groupContainer);return t=s.element.find(s.options.filter).map(function(){var t=e(this),r=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(r&&""!==r)for(n=r.split(","),r=[],o=0,a=n.length;a>o;o++)r.push({field:s,aggregate:n[o]});return r}).toArray(),e.map(l,function(n){return n=e(n),r=n.attr(i.attr("field")),{field:r,dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,o,s,l=this._dropCuePositions;if(u.is(":visible")&&0!==l.length)return t=Math.ceil(t),n=l[l.length-1],i=n.left,r=n.right,o=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!a||i>t&&a?t={left:n.element.position().left+(a?-o:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return t>=e.left&&e.right>=t||a&&t>e.right
})[0],t&&(t={left:a?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-o,element:t.element,before:!0})),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&u.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(i.attr("field"));return"false"!=e.attr(i.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next(),r=e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!a&&n>i.position().left||a&&n<i.position().left);return r},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),o=n.indicator(r);t!==n.options.draggable&&!t.dropped&&o&&n._removeIndicator(e(o)),n._dragCancel()},_dragCancel:function(){u.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=this,r=e(".k-group-indicator",n.groupContainer);n._dropCuePositions=e.map(r,function(n){return n=e(n),t=i.getOffset(n).left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(p)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.getOffset,r=n.ui.Widget,o="change",a="k-reorderable",s=r.extend({init:function(s,l){var c,d=this,u=n.guid()+"-reorderable";r.fn.init.call(d,s,l),s=d.element.addClass(a),l=d.options,d.draggable=c=l.draggable||new n.ui.Draggable(s,{group:u,filter:l.filter,hint:l.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),s.find(c.options.filter).kendoDropTarget({group:c.options.group,dragenter:function(e){var n,r,o,a;d._draggable&&(n=this.element,o=!d._dropTargetAllowed(n)||d._isLastDraggable(),t(e.draggable.hint,o),o||(r=i(n),a=r.left,l.inSameContainer&&!l.inSameContainer({source:n,target:d._draggable,sourceIndex:d._index(n),targetIndex:d._index(d._draggable)})?d._dropTarget=n:d._index(n)>d._index(d._draggable)&&(a+=n.outerWidth()),d.reorderDropCue.css({height:n.outerHeight(),top:r.top,left:a}).appendTo(document.body)))},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove(),d._dropTarget=null},drop:function(){var e,t,n;d._dropTarget=null,d._draggable&&(e=this.element,t=d._draggable,n=!1,d._dropTargetAllowed(e)&&!d._isLastDraggable()&&d.trigger(o,{element:d._draggable,target:e,oldIndex:d._index(t),newIndex:d._index(e),position:i(d.reorderDropCue).left>i(e).left?"after":"before"}))}}),c.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null,d._elements=null},dragstart:function(e){d._draggable=e.currentTarget,d._elements=d.element.find(d.draggable.options.filter)},drag:function(e){var t,n;d._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")&&(t=i(d._dropTarget).left,n=d._dropTarget.outerWidth(),d.reorderDropCue.css(e.pageX>t+n/2?{left:t+n}:{left:t}))}})},options:{name:"Reorderable",filter:"*"},events:[o],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&i.length>0;)e=i.pop(),r=n!==e&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]===e[0]?!1:t&&n?t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})?!0:n(this._index(i),this._index(e)):!0},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;r.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(s)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=n.isFunction,s=e.extend,l="horizontal",c="vertical",d="start",u="resize",h="resizeend",p=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=c?l:c,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:0,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[u,h,d],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this,i=n.options.min;return a(i)?i(e):i!==t?n._initialElementPosition+i:i},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(d,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(e){var n,i=this,r=i._maxPosition,o=i._minPosition,a=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=o!==t?Math.max(o,a):a,i.position=n=r!==t?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==o).css(i._position,n),i.resizing=!0,i.trigger(u,s(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(h,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e){return e.clone()}function r(e){return e.clone().removeAttr("id").css("visibility","hidden")}var o=window.kendo,a=o.ui.Widget,s="start",l="beforeMove",c="move",d="end",u="change",h="cancel",p="sort",f="remove",g="receive",m=">*",v=-1,_=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.options.placeholder||(n.options.placeholder=r),n.options.hint||(n.options.hint=i),n._draggable=n._createDraggable()},events:[s,l,c,d,u,h],options:{name:"Sortable",hint:null,placeholder:null,filter:m,holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,cursor:"auto"},destroy:function(){this._draggable.destroy(),a.fn.destroy.call(this)},_createDraggable:function(){var t=this,n=t.element,i=t.options;return new o.ui.Draggable(n,{filter:i.filter,hint:o.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,dragstart:e.proxy(t._dragstart,t),dragcancel:e.proxy(t._dragcancel,t),drag:e.proxy(t._drag,t),dragend:e.proxy(t._dragend,t)})},_dragstart:function(t){var n=this.draggedElement=t.currentTarget,i=t.target||o.elementUnderCursor(t),r=this.options.disabled,a=this.options.handler,l=this.options.placeholder,c=this.placeholder=e(o.isFunction(l)?l.call(this,n):l);r&&n.is(r)?t.preventDefault():a&&!e(i).is(a)?t.preventDefault():this.trigger(s,{item:n,draggableEvent:t})?t.preventDefault():(n.css("display","none"),n.before(c),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(h,{item:this.draggedElement}),this._resetCursor()},_drag:function(n){var i,r,o,a,s,l=this.draggedElement,c=this._findTarget(n),d={left:n.x.location,top:n.y.location},u={x:n.x.delta,y:n.y.delta},h=this.options.axis,p={item:l,list:this,draggableEvent:n};if("x"===h||"y"===h)return this._movementByAxis(h,d,u[h],p),t;if(c){if(i=this._getElementCenter(c.element),r={left:Math.round(d.left-i.left),top:Math.round(d.top-i.top)},e.extend(p,{target:c.element}),c.appendToBottom)return this._movePlaceholder(c,null,p),t;if(c.appendAfterHidden&&this._movePlaceholder(c,"next",p),this._isFloating(c.element)?0>u.x&&0>r.left?o="prev":u.x>0&&r.left>0&&(o="next"):0>u.y&&0>r.top?o="prev":u.y>0&&r.top>0&&(o="next"),o){for(s="prev"===o?jQuery.fn.prev:jQuery.fn.next,a=s.call(c.element);a.length&&!a.is(":visible");)a=s.call(a);a[0]!=this.placeholder[0]&&this._movePlaceholder(c,o,p)}}},_dragend:function(n){var i,r,o,a,s=this.placeholder,l=this.draggedElement,c=this.indexOf(l),h=this.indexOf(s),m=this.options.connectWith;return this._resetCursor(),o={action:p,item:l,oldIndex:c,newIndex:h,draggableEvent:n},h>=0?r=this.trigger(d,o):(i=s.parents(m).getKendoSortable(),o.action=f,a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(s)}),r=!(!this.trigger(d,o)&&!i.trigger(d,a))),r||h===c?(this._cancel(),t):(s.replaceWith(l),l.show(),this._draggable.dropped=!0,o={action:this.indexOf(l)!=v?p:f,item:l,oldIndex:c,newIndex:this.indexOf(l),draggableEvent:n},this.trigger(u,o),i&&(a=e.extend({},o,{action:g,oldIndex:v,newIndex:i.indexOf(l)}),i.trigger(u,a)),t)},_findTarget:function(n){var i,r,o=this._findElementUnderCursor(n),a=this.options.connectWith;return e.contains(this.element[0],o)?(i=this.items(),r=i.filter(o)[0]||i.has(o)[0],r?{element:e(r),sortable:this}:null):this.element[0]==o&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==o&&this._isLastHidden()?(r=this.items().eq(0),{element:r,sortable:this,appendAfterHidden:!0}):a?this._searchConnectedTargets(o,n):t},_findElementUnderCursor:function(e){{var t=o.elementUnderCursor(e),i=e.sender;this.items()}return n(i.hint[0],t)&&(i.hint.hide(),t=o.elementUnderCursor(e),t||(t=o.elementUnderCursor(e)),i.hint.show()),t},_searchConnectedTargets:function(t,n){var i,r,o,a,s=e(this.options.connectWith);for(a=0;s.length>a;a++)if(i=s.eq(a).getKendoSortable(),e.contains(s[a],t)){if(i)return r=i.items(),o=r.filter(t)[0]||r.has(t)[0],o?(i.placeholder=this.placeholder,{element:e(o),sortable:i}):null}else if(s[a]==t){if(i&&i._isEmpty())return{element:s.eq(a),sortable:i,appendToBottom:!0};if(this._isCursorAfterLast(i,n))return o=i.items().last(),{element:o,sortable:i}}},_isCursorAfterLast:function(e,t){var n,i,r=e.items().last(),a={left:t.x.location,top:t.y.location};return n=o.getOffset(r),n.top+=r.outerHeight(),n.left+=r.outerWidth(),i=this._isFloating(r)?n.left-a.left:n.top-a.top,0>i?!0:!1},_movementByAxis:function(t,n,i,r){var o,a="x"===t?n.left:n.top,s=0>i?this.placeholder.prev():this.placeholder.next();s.length&&!s.is(":visible")&&(s=0>i?s.prev():s.next()),e.extend(r,{target:s}),o=this._getElementCenter(s),o&&(o="x"===t?o.left:o.top),s.length&&0>i&&0>a-o?this._movePlaceholder({element:s,sortable:this},"prev",r):s.length&&i>0&&a-o>0&&this._movePlaceholder({element:s,sortable:this},"next",r)},_movePlaceholder:function(e,t,n){var i=this.placeholder;e.sortable.trigger(l,n)||(t?"prev"===t?e.element.before(i):"next"===t&&e.element.after(i):e.element.append(i),e.sortable.trigger(c,n))},_setCursor:function(){var t,n=this.options.cursor;n&&"auto"!==n&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:n}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+n+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?o.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e,t=this.options.filter;return e=t?this.element.find(t):this.element.children()},indexOf:function(e){var t=this._items(),n=this.placeholder,i=this.draggedElement;return n&&e[0]==n[0]?t.not(i).index(e):t.not(n).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});o.ui.plugin(_)}(window.kendo.jQuery),function(e,t){function n(e,t){var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||t.left>n.right||n.top>o||t.top>n.bottom)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",c="k-state-selected",d="k-state-selecting",u="k-selectable",h="change",p=".kendoSelectable",f="k-state-unselecting",g="input,a,textarea,.k-multiselect-wrap,select,button",m=r.support.browser.msie,v=!1;!function(e){!function(){e('<div class="parent"><span /></div>').on("click",">*",function(){v=!0}).find("span").click().end().off()}()}(e),i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(u),s.relatedTarget=s.options.relatedTarget,i=s.options.multiple,this.options.aria&&i&&s.element.attr("aria-multiselectable",!0),s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(v?"":"."+u+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,n=this.element,i=n.length,r=!1;for(e=e[0],t=0;i>t;t++)if(n[t]===e){r=!0;break}return r},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,d=t.event.button;!r._isElement(i.closest("."+u))||l&&3==l||d&&2==d||this._allowSelection(t.event.target)&&(n=i.hasClass(c),a&&o||r.clear(),i=i.add(r.relatedTarget(i)),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(h)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(n){var i,r=this,o=e(n.target),a=o.hasClass(c),s=n.event.ctrlKey||n.event.metaKey;if(this._allowSelection(n.event.target)){if(r._downTarget=o,!r._isElement(o.closest("."+u)))return r.userEvents.cancel(),t;r.options.useAllItems?r._items=r.element.find(r.options.filter):(i=o.closest(r.element),r._items=i.find(r.options.filter)),n.sender.capture(),r._marquee.appendTo(document.body).css({left:n.x.client+1,top:n.y.client+1,width:0,height:0}),s||r.clear(),o=o.add(r.relatedTarget(o)),a&&(r._selectElement(o,!0),s&&o.addClass(f))}},_move:function(e){var t=this,n={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};t._marquee.css(n),t._invalidateSelectables(n,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e,t=this;t._marquee.remove(),t._unselect(t.element.find(t.options.filter+"."+f)).removeClass(f),e=t.element.find(t.options.filter+"."+d),e=e.add(t.relatedTarget(e)),t.value(e),t._lastActive=t._downTarget,t._items=null},_invalidateSelectables:function(e,t){var i,r,o,a,s=this._downTarget[0],l=this._items;for(i=0,r=l.length;r>i;i++)a=l.eq(i),o=a.add(this.relatedTarget(a)),n(a,e)?a.hasClass(c)?t&&s!==a[0]&&o.removeClass(c).addClass(f):a.hasClass(d)||a.hasClass(f)||o.addClass(d):a.hasClass(d)?o.removeClass(d):t&&a.hasClass(f)&&o.removeClass(f).addClass(c)},value:function(e){var n=this,i=a(n._selectElement,n);return e?(e.each(function(){i(this)}),n._notify(h),t):n.element.find(n.options.filter+"."+c)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter)[0])},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(d),r||(i.addClass(c),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(c),this.options.aria&&e.attr(l,!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!m||m&&!e(r._activeElement()).is(g))&&t.preventDefault()},_allowSelection:function(t){return e(t).is(g)?(this.userEvents.cancel(),this._downTarget=null,!1):!0},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+c);this._unselect(e)},selectRange:function(t,n){var i,r,o,a=this;for(a.clear(),a.element.length>1&&(o=a.options.continuousItems()),o&&o.length||(o=a.element.find(a.options.filter)),t=e.inArray(e(t)[0],o),n=e.inArray(e(n)[0],o),t>n&&(r=t,t=n,n=r),a.options.useAllItems||(n+=a.element.length-1),i=t;n>=i;i++)a._selectElement(o[i]);a._notify(h)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(p),e.userEvents.destroy(),e._marquee=e._lastActive=e.element=e.userEvents=null}}),i.parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=n.keys,a="click",s="k-button",l="k-button-icon",c="k-button-icontext",d=".kendoButton",u="disabled",h="k-state-disabled",p="k-state-focused",f="k-state-selected",g=i.extend({init:function(e,t){var o=this;i.fn.init.call(o,e,t),e=o.wrapper=o.element,t=o.options,e.addClass(s).attr("role","button"),t.enable=t.enable&&!e.attr(u),o.enable(t.enable),o._tabindex(),o._graphics(),e.on(a+d,r(o._click,o)).on("focus"+d,r(o._focus,o)).on("blur"+d,r(o._blur,o)).on("keydown"+d,r(o._keydown,o)).on("keyup"+d,r(o._keyup,o)),n.notify(o)},destroy:function(){var e=this;e.wrapper.off(d),i.fn.destroy.call(e)},events:[a],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(a,{event:e})},_focus:function(){this.options.enable&&this.element.addClass(p)},_blur:function(){this.element.removeClass(p)},_keydown:function(e){var t=this;t._isNativeButton()||(e.keyCode==o.ENTER||e.keyCode==o.SPACEBAR)&&(e.keyCode==o.SPACEBAR&&(e.preventDefault(),t.options.enable&&t.element.addClass(f)),t._click(e))},_keyup:function(){this.element.removeClass(f)},_graphics:function(){var t,n,i,r=this,o=r.element,a=r.options,s=a.icon,d=a.spriteCssClass,u=a.imageUrl;(d||u||s)&&(i=!0,o.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),o.addClass(i?l:c)),s?(t=o.children("span.k-icon").first(),t[0]||(t=e('<span class="k-icon"></span>').prependTo(o)),t.addClass("k-i-"+s)):d?(t=o.children("span.k-sprite").first(),t[0]||(t=e('<span class="k-sprite"></span>').prependTo(o)),t.addClass(d)):u&&(n=o.children("img.k-image").first(),n[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(o)),n.attr("src",u))},enable:function(e){var n=this,i=n.element;e===t&&(e=!0),e=!!e,n.options.enable=e,i.toggleClass(h,!e).attr("aria-disabled",!e).attr(u,!e);try{i.blur()}catch(r){}}});n.ui.plugin(g)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:c.ns,numeric:i,title:r||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(c.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,p,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,f,n,t>=n)}var c=window.kendo,d=c.ui,u=d.Widget,h=e.proxy,p=".k-i-seek-w",f=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",_=".kendoPager",y="click",w="keydown",b="disabled",k=c.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=u.extend({init:function(t,n){var r,d,b=this;u.fn.init.call(b,t,n),n=b.options,b.dataSource=c.data.DataSource.create(n.dataSource),b.linkTemplate=c.template(b.options.linkTemplate),b.selectTemplate=c.template(b.options.selectTemplate),r=b.page(),d=b.totalPages(),b._refreshHandler=h(b.refresh,b),b.dataSource.bind(v,b._refreshHandler),n.previousNext&&(b.element.find(p).length||(b.element.append(i(p,n.messages.first,"k-pager-first")),o(b.element,r,d)),b.element.find(g).length||(b.element.append(i(g,n.messages.previous)),a(b.element,r,d))),n.numeric&&(b.list=b.element.find(".k-pager-numbers"),b.list.length||(b.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(b.element))),n.input&&(b.element.find(".k-pager-input").length||b.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+c.format(n.messages.of,d)+"</span>"),b.element.on(w+_,".k-pager-input input",h(b._keydown,b))),n.previousNext&&(b.element.find(m).length||(b.element.append(i(m,n.messages.next)),s(b.element,r,d)),b.element.find(f).length||(b.element.append(i(f,n.messages.last,"k-pager-last")),l(b.element,r,d))),n.pageSizes&&(b.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(b.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(b.element),b.element.find(".k-pager-sizes select").val(b.pageSize()),c.ui.DropDownList&&b.element.find(".k-pager-sizes select").show().kendoDropDownList(),b.element.on(v+_,".k-pager-sizes select",h(b._change,b))),n.refresh&&(b.element.find(".k-pager-refresh").length||b.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),b.element.on(y+_,".k-pager-refresh",h(b._refreshClick,b))),n.info&&(b.element.find(".k-pager-info").length||b.element.append('<span class="k-pager-info k-label" />')),b.element.on(y+_,"a",h(b._click,b)).addClass("k-pager-wrap k-widget"),n.autoBind&&b.refresh(),c.notify(b)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,c.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,d=this,u=1,h="",p=d.page(),f=d.options,g=d.pageSize(),m=d.dataSource.total(),v=d.totalPages(),_=d.linkTemplate,y=f.buttonCount;if(!e||"itemchange"!=e.action){if(f.numeric){for(p>y&&(r=p%y,u=0===r?p-y+1:p-r+1),i=Math.min(u+y-1,v),u>1&&(h+=n(_,u-1,"...",!1,f.messages.morePages)),t=u;i>=t;t++)h+=n(t==p?d.selectTemplate:_,t,t,!0);v>i&&(h+=n(_,t,"...",!1,f.messages.morePages)),""===h&&(h=d.selectTemplate({text:0})),d.list.html(h)}f.info&&(h=m>0?c.format(f.messages.display,(p-1)*g+1,Math.min(p*g,m),m):f.messages.empty,d.element.find(".k-pager-info").html(h)),f.input&&d.element.find(".k-pager-input").html(d.options.messages.page+'<input class="k-textbox">'+c.format(f.messages.of,v)).find("input").val(p).attr(b,1>m).toggleClass("k-state-disabled",1>m),f.previousNext&&(o(d.element,p,v),a(d.element,p,v),s(d.element,p,v),l(d.element,p,v)),f.pageSizes&&d.element.find(".k-pager-sizes select").val(g).filter("["+c.attr("role")+"=dropdownlist]").kendoDropDownList("value",g).kendoDropDownList("text",g)}},_keydown:function(e){if(e.keyCode===c.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(c.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});d.plugin(x)}(window.kendo.jQuery),function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,o=n.support,a=n.getOffset,s=n._activeElement,l="open",c="close",d="deactivate",u="activate",h="center",p="left",f="right",g="top",m="bottom",v="absolute",_="hidden",y="body",w="location",b="position",k="visible",x="effects",C="k-state-active",S="k-state-border",T=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",E=e(document.documentElement),M=e(window),P="scroll",I="resize scroll",z=o.transitions.css,F=z+"transform",R=e.extend,B=".kendoPopup",L=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],O=r.extend({init:function(t,i){var o,a=this;i=i||{},i.isRtl&&(i.origin=i.origin||m+" "+f,i.position=i.position||g+" "+f),r.fn.init.call(a,t,i),t=a.element,i=a.options,a.collisions=i.collision?i.collision.split(" "):[],a.downEvent=n.applyEventMap(A,n.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),o=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||o[0]||y),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+B,function(){a._hovered=!0}).on("mouseleave"+B,function(){a._hovered=!1}),a.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),R(i.animation.open,{complete:function(){a.wrapper.css({overflow:k}),a._trigger(u)}}),R(i.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+B,e.proxy(a.toggle,a))},events:[l,u,c,d],options:{name:"Popup",toggleEvent:"click",origin:m+" "+p,position:g+" "+p,anchor:y,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var t,i,r,o,a=this,s=a.options;a.wrapper.hide(),t=a.wrapper.data(w),i=e(s.anchor),t&&a.wrapper.css(t),s.anchor!=y&&(r=((i.attr("class")||"").match(T)||["","down"])[1],o=S+"-"+r,i.removeClass(o).children(D).removeClass(C).removeClass(o),a.element.removeClass(S+"-"+n.directions[r].reverse)),a._closing=!1,a._trigger(d)},destroy:function(){var t,i=this,o=i.options,a=i.element.off(B);r.fn.destroy.call(i),o.toggleTarget&&e(o.toggleTarget).off(B),o.modal||(E.unbind(i.downEvent,i._mousedownProxy),i._scrollableParents().unbind(P,i._resizeProxy),M.unbind(I,i._resizeProxy)),n.destroy(i.element.children()),a.removeData(),o.appendTo[0]===document.body&&(t=a.parent(".k-animation-container"),t[0]?t.remove():a.remove())},open:function(t,i){var r,a,s,c=this,d={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},u=c.element,h=c.options,p="down",f=e(h.anchor),m=u[0]&&u.hasClass("km-widget");if(!c.visible()){if(h.copyAnchorStyles&&(m&&"font-size"==L[0]&&L.shift(),u.css(n.getComputedStyles(f[0],L))),u.data("animating")||c._trigger(l))return;h.modal||(E.unbind(c.downEvent,c._mousedownProxy).bind(c.downEvent,c._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||(c._scrollableParents().unbind(P,c._resizeProxy).bind(P,c._resizeProxy),M.unbind(I,c._resizeProxy).bind(I,c._resizeProxy))),c.wrapper=a=n.wrap(u,h.autosize).css({overflow:_,display:"block",position:v}),o.mobileOS.android&&a.css(F,"translatez(0)"),a.css(b),e(h.appendTo)[0]==document.body&&a.css(g,"-10000px"),r=R(!0,{},h.animation.open),c.flipped=c._position(d),r.effects=n.parseEffects(r.effects,c.flipped),p=r.effects.slideIn?r.effects.slideIn.direction:p,h.anchor!=y&&(s=S+"-"+p,u.addClass(S+"-"+n.directions[p].reverse),f.addClass(s).children(D).addClass(C).addClass(s)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?c:l]()},visible:function(){return this.element.is(":"+k)},close:function(t){var i,r,o,a,s=this,l=s.options;if(s.visible()){if(i=s.wrapper[0]?s.wrapper:n.wrap(s.element).hide(),s._closing||s._trigger(c))return;s.element.find(".k-popup").each(function(){var n=e(this),i=n.data("kendoPopup");i&&i.close(t)}),E.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(P,s._resizeProxy),M.unbind(I,s._resizeProxy),t?r={hide:!0,effects:{}}:(r=R(!0,{},l.animation.close),o=s.element.data(x),a=r.effects,!a&&!n.size(a)&&o&&n.size(o)&&(r.effects=o,r.reverse=!0),s._closing=!0),s.element.kendoStop(!0),i.css({overflow:_}),s.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,c=n.eventTarget(i),d=e(c).closest(".k-popup"),u=d.parent().parent(".km-shim").length;d=d[0],(u||!d||d===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(o,c)||t(s,c)||l&&t(e(l)[0],c)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==h&&r!==h&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){var i=n.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow})},_position:function(t){var n,i,r,s,l,c,d,u,h,p=this,f=p.element.css(b,""),g=p.wrapper,m=p.options,_=e(m.viewport),y=_.offset(),k=e(m.anchor),x=m.origin.toLowerCase().split(" "),C=m.position.toLowerCase().split(" "),S=p.collisions,T=o.zoomLevel(),D=10002,A=!!(_[0]==window&&window.innerWidth&&1.02>=T),E=0,M=A?window.innerWidth:_.width(),P=A?window.innerHeight:_.height(),I=k.parents().filter(g.siblings());if(I[0])if(i=Math.max(+I.css("zIndex"),0))D=i+10;else for(n=k.parentsUntil(I),r=n.length;r>E;E++)i=+e(n[E]).css("zIndex"),i&&i>D&&(D=i+10);return g.css("zIndex",D),g.css(t&&t.isFixed?{left:t.x,top:t.y}:p._align(x,C)),s=a(g,b,k[0]===g.offsetParent()[0]),l=a(g),c=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),c.length&&(s=a(g,b,!0),l=a(g)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=y.top,l.left-=y.left),p.wrapper.data(w)||g.data(w,R({},s)),d=R({},l),u=R({},s),"fit"===S[0]&&(u.top+=p._fit(d.top,g.outerHeight(),P/T)),"fit"===S[1]&&(u.left+=p._fit(d.left,g.outerWidth(),M/T)),h=R({},u),"flip"===S[0]&&(u.top+=p._flip(d.top,f.outerHeight(),k.outerHeight(),P/T,x[0],C[0],g.outerHeight())),"flip"===S[1]&&(u.left+=p._flip(d.left,f.outerWidth(),k.outerWidth(),M/T,x[1],C[1],g.outerWidth())),f.css(b,v),g.css(u),u.left!=h.left||u.top!=h.top
},_align:function(t,n){var i,r=this,o=r.wrapper,s=e(r.options.anchor),l=t[0],c=t[1],d=n[0],u=n[1],p=a(s),g=e(r.options.appendTo),v=o.outerWidth(),_=o.outerHeight(),y=s.outerWidth(),w=s.outerHeight(),b=p.top,k=p.left,x=Math.round;return g[0]!=document.body&&(i=a(g),b-=i.top,k-=i.left),l===m&&(b+=w),l===h&&(b+=x(w/2)),d===m&&(b-=_),d===h&&(b-=x(_/2)),c===f&&(k+=y),c===h&&(k+=x(y/2)),u===f&&(k-=v),u===h&&(k-=x(v/2)),{top:b,left:k}}});i.plugin(O)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=e.extend,a=window.setTimeout,s="click",l="show",c="hide",d="k-notification",u=".k-notification-wrap .k-i-close",h="info",p="success",f="warning",g="error",m="top",v="left",_="bottom",y="right",w="up",b=".kendoNotification",k='<div class="k-widget k-notification"></div>',x='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',C=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),r=o.options,r.appendTo&&e(r.appendTo).is(t)||o.element.hide(),o._compileTemplates(r.templates),o._guid="_"+n.guid(),o._isRtl=n.support.isRtl(t),o._compileStacking(r.stacking,r.position.top),n.notify(o)},events:[l,c],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var i=this,r=n.template;i._compiled={},e.each(t,function(t,n){i._compiled[n.type]=r(n.template||e("#"+n.templateId).html())}),i._defaultCompiled=r(x)},_getCompiled:function(e){var t=this,n=t._defaultCompiled;return e?t._compiled[e]||n:n},_compileStacking:function(e,t){var n,i,r=this,o={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0};switch(e){case"down":n=_+" "+v,i=m+" "+v,delete o.paddingBottom;break;case y:n=m+" "+y,i=m+" "+v,delete o.paddingRight;break;case v:n=m+" "+v,i=m+" "+y,delete o.paddingLeft;break;case w:n=m+" "+v,i=_+" "+v,delete o.paddingTop;break;default:null!==t?(n=_+" "+v,i=m+" "+v,delete o.paddingBottom):(n=m+" "+v,i=_+" "+v,delete o.paddingTop)}r._popupOrigin=n,r._popupPosition=i,r._popupPaddings=o},_attachPopupEvents:function(e,t){function n(e){e.on(s+b,function(){t.close()})}var i,r=e.allowHideAfter,o=!isNaN(r)&&r>0;e.hideOnClick?t.bind("activate",function(){o?a(function(){n(t.element)},r):n(t.element)}):e.button&&(i=t.element.find(u),o?a(function(){n(i)},r):n(i))},_showPopup:function(t,i){var r,s,l=this,c=i.autoHideAfter,d=i.position.left,h=i.position.top;s=e("."+l._guid).last(),r=new n.ui.Popup(t,{anchor:s[0]?s:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:i.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(b),e.sender.element.find(u).off(b),e.sender.destroy()}}),l._attachPopupEvents(i,r),s[0]?r.open():(null===d&&(d=e(window).width()-t.width()-i.position.right),null===h&&(h=e(window).height()-t.height()-i.position.bottom),r.open(d,h)),r.wrapper.addClass(l._guid).css(o({margin:0},l._popupPaddings)),i.position.pinned?(r.wrapper.css("position","fixed"),s[0]&&l._togglePin(r.wrapper,!0)):s[0]||l._togglePin(r.wrapper,!1),c>0&&a(function(){r.close()},c)},_togglePin:function(t,n){var i=e(window),r=n?-1:1;t.css({top:parseInt(t.css(m),10)+r*i.scrollTop(),left:parseInt(t.css(v),10)+r*i.scrollLeft()})},_attachStaticEvents:function(e,t){function n(e){e.on(s+b,r(i._hideStatic,i,t))}var i=this,o=e.allowHideAfter,l=!isNaN(o)&&o>0;e.hideOnClick?l?a(function(){n(t)},o):n(t):e.button&&(l?a(function(){n(t.find(u))},o):n(t.find(u)))},_showStatic:function(e,t){var n=this,i=t.autoHideAfter,r=t.animation,o=t.stacking==w||t.stacking==v?"prependTo":"appendTo";e.addClass(n._guid)[o](t.appendTo).hide().kendoAnimate(r.open||!1),n._attachStaticEvents(t,e),i>0&&a(function(){n._hideStatic(e)},i)},_hideStatic:function(e){e.kendoAnimate(o(this.options.animation.close||!1,{complete:function(){e.off(b).find(u).off(b),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger(c,{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(i,r){var a,s,c=this,u=c.options,p=e(k);return r||(r=h),null!==i&&i!==t&&""!==i&&(n.isFunction(i)&&(i=i()),s={typeIcon:r,content:""},a=e.isPlainObject(i)?o(s,i):o(s,{content:i}),p.addClass(d+"-"+r).toggleClass(d+"-button",u.button).attr("data-role","alert").css({width:u.width,height:u.height}).append(c._getCompiled(r)(a)),c.angular("compile",function(){return{elements:p,data:[{dataItem:a}]}}),e(u.appendTo)[0]?c._showStatic(p,u):c._showPopup(p,u),c.trigger(l,{element:p})),c},info:function(e){return this.show(e,h)},success:function(e){return this.show(e,p)},warning:function(e){return this.show(e,f)},error:function(e){return this.show(e,g)},hide:function(){var t=this,n=t.getNotifications();return n.each(t.options.appendTo?function(n,i){t._hideStatic(e(i))}:function(t,n){var i=e(n).data("kendoPopup");i&&i.close()}),t},getNotifications:function(){var t=this,n=e("."+t._guid);return t.options.appendTo?n:n.children("."+d)},setOptions:function(e){var n,r=this;i.fn.setOptions.call(r,e),n=r.options,e.templates!==t&&r._compileTemplates(n.templates),(e.stacking!==t||e.position!==t)&&r._compileStacking(n.stacking,n.position.top)},destroy:function(){i.fn.destroy.call(this),this.getNotifications().off(b).find(u).off(b)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function i(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)i(e),e=e.parent()}var o=window.kendo,a=o.ui.Widget,s=o.ui.Popup,l=o.isFunction,c=e.isPlainObject,d=e.extend,u=e.proxy,h=e(document),p=o.isLocalUrl,f="_tt_active",g="aria-describedby",m="show",v="hide",_="error",y="contentLoad",w="requestStart",b="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',x=o.template("<iframe frameborder='0' class='"+b+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),C=".kendoTooltip",S={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},T={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},A={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},E=function(e){return e.target.data(o.ns+"title")},M=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=A[n],i._documentKeyDownHandler=u(i._documentKeyDown,i),i.element.on(i.options.showOn+C,i.options.filter,u(i._showOn,i)).on("mouseenter"+C,i.options.filter,u(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+C,i.options.filter,u(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:E,showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[m,v,y,_,w],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var n=this,i=e(t.currentTarget);n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(i):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(i)},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,a=n.options.iframe;c(i)&&i.url?("iframe"in n.options||(a=!p(i.url)),n.trigger(w,{options:i,target:e}),a?(r.hide(),t=r.find("."+b)[0],t?t.src=i.url||t.src:r.html(x({content:i})),r.find("."+b).off("load"+C).on("load"+C,function(){n.trigger(y),r.show()})):(r.empty(),o.ui.progress(r,!0),n._ajaxRequest(i))):i&&l(i)?(i=i({sender:this,target:e}),r.html(i||"")):r.html(i),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(d({type:"GET",dataType:"html",cache:!1,error:function(e,n){o.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:u(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(y)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this,t=e.popup;t&&t.options.anchor&&e._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){e=e||this.element,r(e),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(g),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+C,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(o.template(k)({callout:n.callout&&"center"!==n.position,dir:D[n.position],autoHide:n.autoHide}));t.popup=new s(i,d({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(g,i+f),this.element.attr("id",i+f)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+C,t._documentKeyDownHandler),t.trigger(m)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:n.animation},S[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+C,u(t._mouseleave,t)):i.on("click"+C,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&r.right>o&&a>r.top&&r.bottom>a)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),c=e(o.element).offset(),d=D[o.flipped?T[n]:n],u=s[r]-c[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+d).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),h.off("keydown"+C,this._documentKeyDownHandler),a.fn.destroy.call(this)}});o.ui.plugin(M)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o=!1;return t.filters&&(r=e.grep(t.filters,function(e){return o=n(e,i),e.filters?e.filters.length:e.field!=i}),o||t.filters.length===r.length||(o=!0),t.filters=r),o}var i=window.kendo,r=i.ui,o=r.Widget,a=i.keys,s=i.support,l=i.htmlEncode,c=i._activeElement,d="id",u="li",h="change",p="k-state-focused",f="k-state-hover",g="k-loading",m="open",v="close",_="select",y="selected",w="progress",b="requestEnd",k="width",x=e.extend,C=e.proxy,S=s.browser,T=S.msie&&9>S.version,D=/"/g,A={ComboBox:"DropDownList",DropDownList:"ComboBox"},E=i.ui.DataBoundWidget.extend({init:function(t,n){var i,r=this,a=r.ns;o.fn.init.call(r,t,n),t=r.element,r._isSelect=t.is(_),r._template(),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:s.kineticScrollNeeded?"":"auto"}).on("mouseenter"+a,u,function(){e(this).addClass(f)}).on("mouseleave"+a,u,function(){e(this).removeClass(f)}).on("click"+a,u,C(r._click,r)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+a,C(r._listMousedown,r)),i=t.attr(d),i&&(r.list.attr(d,i+"-list"),r.ul.attr(d,i+"_listbox"),r._optionID=i+"_option_selected"),r._header(),r._accessors(),r._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var i=this,r=i.options,o=i.dataSource,a=x({},o.filter()||{}),s=n(a,r.dataTextField);(e||s)&&i.trigger("filtering",{filter:e})||(e&&(a=a.filters||[],a.push(e)),t?o.read(a):o.filter(a))},_header:function(){var t,n=this,i=n.options.headerTemplate;e.isFunction(i)&&(i=i({})),i&&(n.list.prepend(i),t=n.ul.prev(),n.header=t[0]?t:null,n.header&&n.angular("compile",function(){return{elements:n.header}}))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var n=this,i=n._focused.add(n.filterInput),r=n._optionID;return e===t?n._current:(n._current&&(n._current.removeClass(p).removeAttr("aria-selected").removeAttr(d),i.removeAttr("aria-activedescendant")),e&&(e.addClass(p),n._scroll(e),r&&(e.attr("id",r),i.attr("aria-activedescendant",r))),n._current=e,t)},destroy:function(){var e=this,t=e.ns;o.fn.destroy.call(e),e._unbindDataSource(),e.ul.off(t),e.list.off(t),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(n){var i=this;return n===t?n=i.selectedIndex:"number"!=typeof n&&(n=e(i.items()).index(n)),i._data()[n]},_accessors:function(){var e=this,t=e.element,n=e.options,r=i.getter,o=t.attr(i.attr("text-field")),a=t.attr(i.attr("value-field"));!n.dataTextField&&o&&(n.dataTextField=o),!n.dataValueField&&a&&(n.dataValueField=a),e._text=r(n.dataTextField),e._value=r(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused.add(n.filterInput);i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n._bound&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n.element.trigger(h),n.trigger(h))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var n=this,i=!0;return n.popup.visible()&&e&&n.trigger(_,{item:e})?(n.close(),t):(n._select(e),n._triggerCascade(i),n._blur(),t)},_index:function(e){var t,n,i=this,r=i._data();for(t=0,n=r.length;n>t;t++)if(i._dataValue(r[t])==e)return t;return-1},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_height:function(e){if(e){var t,n,i=this,r=i.list,o=i.options.height,a=i.popup.visible();n=r.add(r.parent(".k-animation-container")).show(),o=i.ul[0].scrollHeight>o?o:"auto",n.height(o),"auto"!==o&&(t=i.ul[0].offsetTop,t&&(o=r.height()-t)),i.ul.height(o),a||n.hide()}},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(k)||!i)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&S.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(k,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(m)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(v)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_firstOpen:function(){this._height(this._data().length)},_popup:function(){var e=this;e.popup=new r.Popup(e.list,x({},e.options.popup,{anchor:e.wrapper,open:C(e._openHandler,e),close:C(e._closeHandler,e),animation:e.options.animation,isRtl:s.isRtl(e.wrapper)})),e.popup.one(m,C(e._firstOpen,e)),e._touchScroller=i.touchScroller(e.popup.element)},_makeUnselectable:function(){T&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(f,"mouseenter"===t.type)},_toggle:function(e,n){var i=this,r=s.touch&&s.MSPointers&&s.pointers;e=e!==t?e:!i.popup.visible(),n||r||i._focused[0]===c()||i._focused.focus(),i[e?m:v]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t,n,i=this.ul[0],r=e.offsetTop,o=e.offsetHeight,a=i.scrollTop,s=i.clientHeight,l=r+o,c=this._touchScroller;c?(t=c.dimensions.y,t.enabled&&r>t.size&&(r=r-t.size+o+4,c.scrollTo(0,-r))):(n=this.header?this.header.outerHeight():0,n+=this.filterInput?this.filterInput.outerHeight():0,i.scrollTop=a>r?r-n:l>a+s?l-s-n:a)}},_template:function(){var e=this,t=e.options,n=t.template,r=t.dataSource;e._isSelect&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),n?(n=i.template(n),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+n(e)+"</li>"}):e.template=i.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+i.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(e){var t=this,n=t.value();(!t._bound&&n||t._old!==n)&&t.trigger("cascade",{userTriggered:e})},_unbindDataSource:function(){var e=this;e.dataSource.unbind(h,e._refreshHandler).unbind(w,e._progressHandler).unbind(b,e._requestEndHandler).unbind("error",e._errorHandler)}});x(E,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),i.ui.List=E,r.Select=E.extend({init:function(e,t){E.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._bound=!1,this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._triggerCascade(),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},search:function(e){var t,n,i,r,o,a;e="string"==typeof e?e:this.text(),t=this,n=e.length,i=t.options,r=i.ignoreCase,o=i.filter,a=i.dataTextField,clearTimeout(t._typing),(!n||n>=i.minLength)&&(t._state="filter","none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},_accessor:function(e,n){var i,r=this.element[0],o=this._isSelect,a=r.selectedIndex;return e===t?(o?a>-1&&(i=r.options[a],i&&(e=i.value)):e=r.value,e):(o?(a>-1&&r.options[a].removeAttribute(y),r.selectedIndex=n,i=r.options[n],i&&i.setAttribute(y,y)):r.value=e,t)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(g),e._focused.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass(g))},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var t,n=this,r=n.element,o=n.options,a=o.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&(t=r[0].selectedIndex,t>-1&&(o.index=t),a.select=r,a.fields=[{field:o.dataTextField},{field:o.dataValueField}]),n.dataSource&&n._refreshHandler?n._unbindDataSource():(n._refreshHandler=C(n.refresh,n),n._progressHandler=C(n._showBusy,n),n._requestEndHandler=C(n._requestEnd,n),n._errorHandler=C(n._hideBusy,n)),n.dataSource=i.data.DataSource.create(a).bind(h,n._refreshHandler).bind(w,n._progressHandler).bind(b,n._requestEndHandler).bind("error",n._errorHandler)},_get:function(t){var n,i,r=this,o=r._data();if("function"==typeof t)for(n=0,i=o.length;i>n;n++)if(t(o[n])){t=n;break}if("number"==typeof t){if(0>t)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,n,i=this,r=e.keyCode,o=i.ul[0],s=i.popup.visible()?"_select":"_accept",l=i._current,c=r===a.DOWN;if(r===a.UP||c){if(e.altKey)i.toggle(c);else{if(t=o.firstChild,!t&&!i._accessor()&&"filter"!==i._state)return i._fetch||(i.dataSource.one(h,function(){i._move(e),i._fetch=!1}),i._fetch=!0,i._filterSource()),e.preventDefault(),!0;c?(!l||-1===i.selectedIndex&&!i.value()&&l[0]===t?l=t:(l=l[0].nextSibling,l||t!==o.lastChild||(l=t)),i[s](l)):(l=l?l[0].previousSibling:o.lastChild,l||t!==o.lastChild||(l=t),i[s](l))}e.preventDefault(),n=!0}else r===a.ENTER||r===a.TAB?(i.popup.visible()&&e.preventDefault(),i.popup.visible()||l&&l.hasClass("k-state-selected")||(l=null),i._accept(l,r),n=!0):r===a.ESC&&(i.popup.visible()&&e.preventDefault(),i.close(),n=!0);return n},_selectItem:function(){var e,n,i=this,r=i._bound===t,o=i.options;e=i._isSelect&&!i._initial&&!o.value&&o.index&&!i._bound,e||(n=i._selectedValue||r&&o.value||i._accessor()),n?i.value(n):r&&i.select(o.index)},_fetchItems:function(e){var n=this,i=n.ul[0].firstChild;return n._request?!0:n._bound||n._fetch||i?t:n.options.cascadeFrom?!i:(n.dataSource.one(h,function(){n._old=t,n.value(e),n._fetch=!1}),n._fetch=!0,n.dataSource.fetch(),!0)},_options:function(e,n){var i,r,o,a,s=this,c=s.element,d=e.length,u="",h=0;for(n&&(h=1,u=n);d>h;h++)i="<option",r=e[h],o=s._text(r),a=s._value(r),a!==t&&(a+="",-1!==a.indexOf('"')&&(a=a.replace(D,"&quot;")),i+=' value="'+a+'"'),i+=">",o!==t&&(i+=l(o)),i+="</option>",u+=i;c.html(u)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_cascade:function(){var t,i,r,o,a,s=this,l=s.options,c=l.cascadeFrom;if(c){if(s._selectedValue=l.value||s._accessor(),i=e("#"+c),t=i.data("kendo"+l.name),t||(t=i.data("kendo"+A[l.name])),!t)return;l.autoBind=!1,o=l.cascadeFromField||t.options.dataValueField,a=function(){s.dataSource.unbind(h,a);var e=s._selectedValue||s.value();s._userTriggered?s._clearSelection(t,!0):e?(s.value(e),s.dataSource.view()[0]&&-1!==s.selectedIndex||s._clearSelection(t,!0)):s.select(l.index),s.enable(),s._triggerCascade(s._userTriggered),s._userTriggered=!1},r=function(){var e,i,r,l=t.dataItem(),c=l?t._value(l):null;c||0===c?(e=s.dataSource.filter()||{},n(e,o),i=e.filters||[],i.push({field:o,operator:"eq",value:c}),r=function(){s.unbind("dataBound",r),a.apply(s,arguments)},s.first("dataBound",r),s.dataSource.filter(i)):(s.enable(!1),s._clearSelection(t),s._triggerCascade(s._userTriggered),s._userTriggered=!1)},t.first("cascade",function(e){s._userTriggered=e.userTriggered,r()}),t._bound?r():t.value()||s.enable(!1)}}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return o-=o%i,r=o+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,c=e.cells||12,d=e.perRow||4,u=e.content||P,h=e.empty||I,p=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>n;n++)n>0&&n%d===0&&(p+='</tr><tr role="row">'),t=l(o,n),p+=s(o,i,r)?u(t):h(t),a(o,1);return p+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(r-=r%n,o=r-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new ft;return new ft(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new ft(+e)),t>i?i=new ft(+t):i>n&&(i=new ft(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,n){t=t instanceof ft?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function d(t){e(this).toggleClass($,it.indexOf(t.type)>-1||t.type==tt)}function u(e){e.preventDefault()}function h(e){return A(e).calendars.standard}function p(e){var n=gt[e.start],i=gt[e.depth],r=A(e.culture);e.format=T(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=U),(i===t||i>n)&&(e.depth=U),e.dates||(e.dates=[])}function f(e){F&&e.find("*").attr("unselectable","on")}function g(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}function m(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate():!1}function v(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth():!1}var _,y=window.kendo,w=y.support,b=y.ui,k=b.Widget,x=y.keys,C=y.parseDate,S=y.date.adjustDST,T=y._extractFormat,D=y.template,A=y.getCulture,E=y.support.transitions,M=E?E.css+"transform-origin":"",P=D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),I=D('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),z=y.support.browser,F=z.msie&&9>z.version,R=".kendoCalendar",B="click"+R,L="keydown"+R,O="id",H="min",N="left",V="slideIn",U="month",W="century",j="change",G="navigate",q="value",$="k-state-hover",Y="k-state-disabled",K="k-state-focused",Q="k-other-month",X=' class="'+Q+'"',J="k-nav-today",Z="td:has(.k-link)",et="blur"+R,tt="focus",nt=tt+R,it=w.touch?"touchstart":"mouseenter",rt=w.touch?"touchstart"+R:"mouseenter"+R,ot=w.touch?"touchend"+R+" touchmove"+R:"mouseleave"+R,at=6e4,st=864e5,lt="_prevArrow",ct="_nextArrow",dt="aria-disabled",ut="aria-selected",ht=e.proxy,pt=e.extend,ft=Date,gt={month:0,year:1,decade:2,century:3},mt=k.extend({init:function(t,n){var i,r,o=this;k.fn.init.call(o,t,n),t=o.wrapper=o.element,n=o.options,n.url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),r=t.addClass("k-widget k-calendar").on(rt+" "+ot,Z,d).on(L,"table.k-content",ht(o._move,o)).on(B,Z,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+R,"table.k-content, .k-footer",function(){o._focusView(o.options.focusOnNav!==!1)}).attr(O),r&&(o._cellID=r+"_cell_selected"),p(n),i=C(n.value,n.format,n.culture),o._index=gt[n.start],o._current=new ft(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass(K)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass(K)},o.value(i),y.notify(o)},options:{name:"Calendar",value:null,min:new ft(1900,0,1),max:new ft(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:U,depth:U,animation:{horizontal:{effects:V,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[j,G],setOptions:function(e){var t=this;p(e),e.dates[0]||(e.dates=t.options.dates),k.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=gt[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(R),e._title.off(R),e[lt].off(R),e[ct].off(R),y.destroy(e._table),t&&y.destroy(t.off(R)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(H,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(lt,-1)},navigateToFuture:function(){this._navigate(ct,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(Y)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===gt[r]?(+n._value!=+e&&(n.value(e),n.trigger(j)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?gt[i]:i;var r,o,s,l,c=this,d=c.options,u=d.culture,h=d.min,p=d.max,g=c._title,m=c._table,v=c._oldTable,y=c._value,w=c._current,b=n&&+n>+w,k=i!==t&&i!==c._index;n||(n=w),c._current=n=new ft(+a(n,h,p)),i===t?i=c._index:c._index=i,c._view=o=_.views[i],s=o.compare,l=i===gt[W],g.toggleClass(Y,l).attr(dt,l),l=s(n,h)<1,c[lt].toggleClass(Y,l).attr(dt,l),l=s(n,p)>-1,c[ct].toggleClass(Y,l).attr(dt,l),m&&v&&v.data("animating")&&(v.kendoStop(!0,!0),m.kendoStop(!0,!0)),c._oldTable=m,(!m||c._changeView)&&(g.html(o.title(n,h,p,u)),c._table=r=e(o.content(pt({min:h,max:p,date:n,url:d.url,dates:d.dates,format:d.format,culture:u},c[o.name]))),f(r),c._animate({from:m,to:r,vertical:k,future:b}),c._focus(n),c.trigger(G)),i===gt[d.depth]&&y&&c._class("k-state-selected",o.toDateString(y)),c._class(K,o.toDateString(n)),!m&&c._cell&&c._cell.removeClass(K),c._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(e=C(e,r.format,r.culture),null!==e&&(e=new ft(+e),s(e,a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,c=t.keyCode,d=s._view,u=s._index,h=new ft(+s._current),p=y.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?c==x.RIGHT&&!p||c==x.LEFT&&p?(s.navigateToFuture(),i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(s.navigateToPast(),i=!0):c==x.UP?(s.navigateUp(),i=!0):c==x.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(c==x.RIGHT&&!p||c==x.LEFT&&p?(n=1,i=!0):c==x.LEFT&&!p||c==x.RIGHT&&p?(n=-1,i=!0):c==x.UP?(n=0===u?-7:-4,i=!0):c==x.DOWN?(n=0===u?7:4,i=!0):c==x.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):c==x.HOME||c==x.END?(r=c==x.HOME?"first":"last",o=d[r](h),h=new ft(o.getFullYear(),o.getMonth(),o.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):c==x.PAGEUP?(i=!0,s.navigateToPast()):c==x.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||d.setDate(h,n),s._focus(a(h,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.off(R),n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.off(R).remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,t,n){var i=this,r=i._active,o=i.options.animation.horizontal,a=o.effects,s=e.outerWidth();a&&-1!=a.indexOf(V)&&(e.add(t).css({width:s}),e.wrap("<div/>"),i._focusView(r,e),e.parent().css({position:"relative",width:2*s,"float":N,"margin-left":n?0:-s}),t[n?"insertAfter":"insertBefore"](e),pt(o,{effects:V+":"+(n?"right":N),complete:function(){e.off(R).remove(),i._oldTable=null,t.unwrap(),i._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(o))},_vertical:function(e,t){var n,i,r=this,o=r.options.animation.vertical,a=o.effects,s=r._active;a&&-1!=a.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),M&&(n=r._cellByDate(r._view.toDateString(r._current)),i=n.position(),i=i.left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10)+"px"),t.css(M,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(R).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(s)}}),t.kendoStop(!0,!0).kendoAnimate(o))},_cellByDate:function(t){return this._table.find("td:not(."+Q+")").filter(function(){return e(this.firstChild).attr(y.attr(q))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;
o&&o.removeAttr(ut).removeAttr("aria-label").removeAttr(O),o=i._table.find("td:not(."+Q+")").removeClass(t).filter(function(){return e(this.firstChild).attr(y.attr(q))===n}).attr(ut,!0),t!==K||i._active||i.options.focusOnNav===!1||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(O,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(nt,this._addClassProxy).on(et,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(y.attr(q)).split("/");r=new ft(r[0],r[1],r[2]),S(r,0),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(K,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",y.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(rt+" "+ot+" "+nt+" "+et,d).click(!1),t._title=e.eq(1).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateUp()}),t[lt]=e.eq(0).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToPast()}),t[ct]=e.eq(2).on(B,function(){t._active=t.options.focusOnNav!==!1,t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new ft(+n._current);e=n[e],e.hasClass(Y)||(i>3?r.setFullYear(r.getFullYear()+100*t):_.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:(n=C(n,o.format,o.culture),n&&(o[e]=new ft(+n),i=e===H?n>a:a>n,(i||v(a,n))&&(i&&(r._value=null),r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(B),e?r.addClass(J).removeClass(Y).on(B,ht(n._todayClick,n)):r.removeClass(J).addClass(Y).on(B,u))},_todayClick:function(e){var t=this,n=gt[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(j)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+y.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:D('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},e.footer=n!==!1?D(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});b.plugin(mt),_={firstDayOfMonth:function(e){return new ft(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||y.culture().calendar;for(var n=t.firstDay,i=new ft(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)_.setTime(i,-1*st);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new ft(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+r*at)},views:[{name:U,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,c=e.format,d=e.culture,u=e.url,p=u&&s[0],f=h(d),m=f.firstDay,v=f.days,w=l(v.names,m),b=l(v.namesShort,m),k=_.firstVisibleDay(a,f),x=t.first(a),C=t.last(a),T=t.toDateString,D=new ft,A='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)A+='<th scope="col" title="'+w[n]+'">'+b[n]+"</th>";return D=new ft(D.getFullYear(),D.getMonth(),D.getDate()),S(D,0),D=+D,i({cells:42,perRow:7,html:A+='</tr></thead><tbody><tr role="row">',start:new ft(k.getFullYear(),k.getMonth(),k.getDate()),min:new ft(r.getFullYear(),r.getMonth(),r.getDate()),max:new ft(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(Q),+e===D&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),p&&g(+e,s)&&(r=u.replace("{0}",y.toString(e,c,d)),i=" k-action-link"),{date:e,dates:s,ns:y.ns,title:y.toString(e,"D",d),value:e.getDate(),dateString:T(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return _.firstDayOfMonth(e)},last:function(e){var t=new ft(e.getFullYear(),e.getMonth()+1,0),n=_.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n,i=e.getMonth(),r=e.getFullYear(),o=t.getMonth(),a=t.getFullYear();return n=r>a?1:a>r?-1:i==o?0:i>o?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof ft?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):_.setTime(e,t*st),S(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new ft(r.getFullYear(),r.getMonth(),1),max:new ft(o.getFullYear(),o.getMonth(),1),start:new ft(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:y.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new ft(e.getFullYear(),0,e.getDate())},last:function(e){return new ft(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof ft?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),S(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new ft(t-t%10-1,0,1),min:new ft(e.min.getFullYear(),0,1),max:new ft(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:y.ns,dateString:n(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:W,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return a-=a%10,s-=s%10,10>s-a&&(s=a+9),i({start:new ft(t-t%100-10,0,1),min:new ft(a,0,1),max:new ft(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:y.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ft(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ft(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},_.isEqualDatePart=m,_.makeUnselectable=f,_.restrictValue=a,_.isInRange=s,_.normalize=p,_.viewsEnum=gt,y.calendar=_}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;B.normalize(t),n=e.isArray(n)?n:[n],-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,c=o.keys,d=o.template,u=o._activeElement,h="<div />",p="<span />",f=".kendoDatePicker",g="click"+f,m="open",v="close",_="change",y="disabled",w="readonly",b="k-state-default",k="k-state-focused",x="k-state-selected",C="k-state-disabled",S="k-state-hover",T="mouseenter"+f+" mouseleave"+f,D="mousedown"+f,A="id",E="min",M="max",P="month",I="aria-disabled",z="aria-expanded",F="aria-hidden",R="aria-readonly",B=o.calendar,L=B.isInRange,O=B.restrictValue,H=B.isEqualDatePart,N=e.extend,V=e.proxy,U=Date,W=function(t){var n,i=this,r=document.body,s=e(h).attr(F,"true").addClass("k-calendar-container").appendTo(r);i.options=t=t||{},n=t.id,n&&(n+="_dateview",s.attr(A,n),i._dateViewID=n),i.popup=new a.Popup(s,N(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=s,i.value(t.value)};W.prototype={_calendar:function(){var t,n=this,r=n.calendar,s=n.options;r||(t=e(h).attr(A,o.guid()).appendTo(n.popup.element).on(D,i).on(g,"td:has(.k-link)",V(n._click,n)),n.calendar=r=new a.Calendar(t),n._setOptions(s),o.calendar.makeUnselectable(r.element),r.navigate(n._value||n._current,s.start),n.value(n._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start})},setOptions:function(e){var t=this.options;this.options=N(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(E,e)},max:function(e){this._option(M,e)},toggle:function(){var e=this;e[e.popup.visible()?v:m]()},move:function(e){var n=this,i=e.keyCode,r=n.calendar,o=e.ctrlKey&&i==c.DOWN||i==c.ENTER;if(i==c.ESC)return n.close(),t;if(e.altKey)return i==c.DOWN?(n.open(),e.preventDefault()):i==c.UP&&(n.close(),e.preventDefault()),t;if(n.popup.visible())return o&&r._cell.hasClass(x)?(n.close(),e.preventDefault(),t):(n._current=r._move(e),t)},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new U(+O(e,i.min,i.max)),n&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(x)&&this.close()},_option:function(e,t){var n=this,i=n.calendar;n.options[e]=t,i&&i[e](t)}},W.normalize=n,o.DateView=W,r=s.extend({init:function(e,t){var i,r,a=this;s.fn.init.call(a,e,t),e=a.element,t=a.options,t.min=l(e.attr("min"))||l(t.min),t.max=l(e.attr("max"))||l(t.max),n(t),a._wrapper(),a.dateView=new W(N({},t,{id:e.attr(A),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(t){a.trigger(v)?t.preventDefault():(e.attr(z,!1),r.attr(F,!0))},open:function(t){var n,i=a.options;a.trigger(m)?t.preventDefault():(a.element.val()!==a._oldText&&(n=l(e.val(),i.parseFormats,i.culture),a.dateView[n?"current":"value"](n)),e.attr(z,!0),r.attr(F,!1),a._updateARIA(n))}})),r=a.dateView.div,a._icon();try{e[0].setAttribute("type","text")}catch(c){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),i=e.is("[disabled]"),i?a.enable(!1):a.readonly(e.is("[readonly]")),a._old=a._update(t.value||a.element.val()),a._oldText=e.val(),o.notify(a)},events:[m,v,_],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:P,depth:P,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t._value;s.fn.setOptions.call(t,e),e=t.options,e.min=l(e.min),e.max=l(e.max),n(e),t.dateView.setOptions(e),i&&(t.element.val(o.toString(i,e.format,e.culture)),t._updateARIA(i))},_editable:function(e){var t=this,n=t._dateIcon.off(f),r=t.element.off(f),o=t._inputWrapper.off(f),a=e.readonly,s=e.disable;a||s?(o.addClass(s?C:b).removeClass(s?b:C),r.attr(y,s).attr(w,a).attr(I,s).attr(R,a)):(o.addClass(b).removeClass(C).on(T,t._toggleHover),r.removeAttr(y).removeAttr(w).attr(I,!1).attr(R,!1).on("keydown"+f,V(t._keydown,t)).on("focusout"+f,V(t._blur,t)).on("focus"+f,function(){t._inputWrapper.addClass(k)}),n.on(g,V(t._click,t)).on(D,i))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(f),e._dateIcon.off(f),e._inputWrapper.off(f),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(E,e)},max:function(e){return this._option(M,e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(k)},_click:function(){var e=this,t=e.element;e.dateView.toggle(),o.support.touch||t[0]===u()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(_),t.trigger(_))},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val();n.popup.visible()||e.keyCode!=c.ENTER||i===t._oldText?(n.move(e),t._updateARIA(n._current)):t._change(i)},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=l(n,r.parseFormats,r.culture),n&&(r[e]=new U(+n),i.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=n._value,c=l(e,i.parseFormats,i.culture),d=null===c&&null===s||c instanceof Date&&s instanceof Date;return+c===+s&&d?(t=o.toString(c,i.format,i.culture),t!==e&&n.element.val(null===c?e:t),c):(null!==c&&H(c,r)?c=O(c,r,a):L(c,r,a)||(c=null),n._value=c,n.dateView.value(c),n.element.val(c?o.toString(c,i.format,i.culture):e),n._updateARIA(c),c)},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datepicker"),t[0]||(t=i.wrap(p).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(p).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr("aria-activedescendant"),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr("aria-activedescendant",t.attr("id")))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}var o=window.kendo,a=o.support,s=o.caret,l=o._activeElement,c=a.placeholder,d=o.ui,u=d.List,h=o.keys,p=o.data.DataSource,f="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",_="readonly",y="k-state-focused",w="k-state-selected",b="k-state-disabled",k="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,S=e.proxy,T=u.extend({init:function(t,n){var i,r=this;r.ns=x,n=e.isArray(n)?{dataSource:n}:n,u.fn.init.call(r,t,n),t=r.element,n=r.options,n.placeholder=n.placeholder||t.attr("placeholder"),c&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+x,S(r._keydown,r)).on("paste"+x,S(r._search,r)).on("focus"+x,function(){r._prev=r._accessor(),r._placeholder(!1),i.addClass(y)}).on("focusout"+x,function(){r._change(),r._placeholder(),i.removeClass(y)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),o.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},value:null},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=S(e.refresh,e),e._progressHandler=S(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){u.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(x),r=e.readonly,o=e.disable;r||o?(i.addClass(o?b:m).removeClass(o?m:b),n.attr(v,o).attr(_,r).attr(f,o).attr(g,r)):(i.addClass(m).removeClass(b).on(C,t._toggleHover),n.removeAttr(v).removeAttr(_).attr(f,!1).attr(g,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(w),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(x),e.wrapper.off(x),u.fn.destroy.call(e)},refresh:function(){var n,i=this,r=i.ul[0],a=i.popup,s=i.options,c=i._data(),d=c.length,u=i.element[0]===l();i._angularItems("cleanup"),i.trigger("dataBinding"),r.innerHTML=o.render(i.template,c),i._height(d),a.visible()&&a._position(),d&&(s.highlightFirst&&i.current(e(r.firstChild)),s.suggest&&u&&i.suggest(e(r.firstChild))),i._open&&(i._open=!1,n=d?"open":"close",i._typing&&!u&&(n="close"),a[n](),i._typing=t),i._touchScroller&&i._touchScroller.reset(),i._makeUnselectable(),i._hideBusy(),i._angularItems("compile"),i.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),n._current=null,clearTimeout(n._typing),a&&(e=i(s(n.element)[0],e,a)),t=e.length,(!t||t>=r.minLength)&&(n._open=!0,n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o}))},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),c=r.element[0],d=s(c)[0],p=r.options.separator,f=a.split(p),g=n(d,a,p),m=d;return o==h.BACKSPACE||o==h.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(i=u.inArray(e[0],r.ul[0]),e=i>-1?r._text(r._data()[i]):""),0>=d&&(d=a.toLowerCase().indexOf(e.toLowerCase())+1),i=a.substring(0,d).lastIndexOf(p),i=i>-1?d-(i+p.length):d,a=f[g].substring(0,i),e&&(i=e.toLowerCase().indexOf(a.toLowerCase()),i>-1&&(e=e.substring(i+a.length),m=d+e.length,a+=e),p&&""!==f[f.length-1]&&f.push("")),f[g]=a,r._accessor(f.join(p||"")),c===l()&&s(c,d,m),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=this._accessor(),t)},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1&&e===n.options.placeholder?"":e):(i.value=null===e?"":e,n._placeholder(),t)},_accept:function(e){var t=this.element;this._focus(e),s(t,t.val().length)},_keydown:function(t){var n=this,i=n.ul[0],r=t.keyCode,o=n._current,a=n.popup.visible();n._last=r,r===h.DOWN?(a&&n._move(o?o.next():e(i.firstChild)),t.preventDefault()):r===h.UP?(a&&n._move(o?o.prev():e(i.lastChild)),t.preventDefault()):r===h.ENTER||r===h.TAB?(r===h.ENTER&&n.popup.visible()&&t.preventDefault(),n._accept(o)):r===h.ESC?(n.popup.visible()&&t.preventDefault(),n.close()):n._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!c){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||s(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var n,i,o=this,a=o.options.separator,l=o._data();t=e(t),t[0]&&!t.hasClass(w)&&(i=u.inArray(t[0],o.ul[0]),i>-1&&(l=l[i],n=o._text(l),a&&(n=r(s(o.element)[0],o._accessor(),n,a)),o._accessor(n),o._prev=o._accessor(),o.current(t.addClass(w))))},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});d.plugin(T)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)i=t[r],i in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support.mobileOS,s=i._activeElement,l=i.keys,c=".kendoDropDownList",d="disabled",u="readonly",h="change",p="k-state-focused",f="k-state-default",g="k-state-disabled",m="aria-disabled",v="aria-readonly",_="k-state-selected",y="mouseenter"+c+" mouseleave"+c,w="tabindex",b="filter",k="accept",x=e.proxy,C=o.extend({init:function(n,r){var a,s,l,d=this,u=r&&r.index;d.ns=c,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(d,n,r),r=d.options,n=d.element.on("focus"+c,x(d._focusHandler,d)),d._inputTemplate(),d._reset(),d._prev="",d._word="",d._wrapper(),d._tabindex(),d.wrapper.data(w,d.wrapper.attr(w)),d._span(),d._popup(),d._mobile(),d._dataSource(),d._ignoreCase(),d._filterHeader(),d._aria(),d._enable(),d._oldIndex=d.selectedIndex=-1,d._cascade(),u!==t&&(r.index=u),r.autoBind?d.dataSource.fetch():-1===d.selectedIndex&&(l=r.text||"",l||(a=r.optionLabel,s=a&&0===r.index,d._isSelect?l=s?a:n.children(":selected").text():!n[0].value&&s&&(l=a)),d._textAccessor(l)),i.notify(d)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",valueTemplate:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1},events:["open","close",h,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria()},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,o.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(e.ul[0].firstChild&&e._state!==k?(e.popup.open(),e._focusElement(e.filterInput),e._scroll(e._current)):(e._open=!0,e._state="rebind",e.filterInput&&e.filterInput.val(""),e._filterSource()))},toggle:function(e){this._toggle(e,!0)},refresh:function(){var t,n,r=this,o=r._data(),a=o.length,s=r.options.optionLabel,l=r._state===b,c=r.element[0];r.trigger("dataBinding"),r._current&&r.current(null),r._angularItems("cleanup"),r.ul[0].innerHTML=i.render(r.template,o),r._angularItems("compile"),r._height(l?a||1:a),r.popup.visible()&&r.popup._position(),r._isSelect&&(t=c.selectedIndex,n=r.value(),a?s&&(s=r._option("",r._optionLabelText(s))):n&&(t=0,s=r._option(n,r.text())),r._options(o,s),c.selectedIndex=-1===t?0:t),r._hideBusy(),r._makeUnselectable(),l?r.current(e(r.ul[0].firstChild)):(r._open&&r.toggle(!!a),r._open=!1,r._fetch||(a?r._selectItem():r._textAccessor()!==s&&(r.element.val(""),r._textAccessor("")))),r._bound=!!a,r.trigger("dataBound")},text:function(e){var n,i,r=this,o=r.options.ignoreCase;return e=null===e?"":e,e===t?r._textAccessor():("string"==typeof e&&(i=o?e.toLowerCase():e,n=r._select(function(e){return e=r._text(e),o&&(e=(e+"").toLowerCase()),e===i}),n&&(e=n)),r._textAccessor(e),t)},value:function(e){var n,i,r=this;return e===t?r._accessor():(null!==e&&(e=""+e),r._selectedValue=e,i=e||r.options.optionLabel&&!r.element[0].disabled&&""===e,i&&r._fetchItems(e)||(n=r._index(e),r.select(n>-1?n:0)),t)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(p),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===b,n=window.self!==window.top;e._prevent||(t&&e._select(e._current),(!t||e.dataItem())&&e._triggerCascade(),i.support.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(p),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t.wrapper.add(t.filterInput).off(c),a=t._inputWrapper.off(y);r||i?i?(o.removeAttr(w),a.addClass(g).removeClass(f)):(a.addClass(f).removeClass(g),o.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(n.removeAttr(d).removeAttr(u),a.addClass(f).removeClass(g).on(y,t._toggleHover),o.attr(w,o.data(w)).attr(m,!1).attr(v,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||o.on("keypress"+c,x(t._keypress,t))),n.attr(d,i).attr(u,r),o.attr(m,i).attr(v,r)},_accept:function(e,t){var n=this,i=n.filterInput&&n.filterInput[0]===s();n._focus(e),n._focusElement(n.wrapper),i&&t===l.TAB&&n.wrapper.focusout()},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&"object"==typeof n?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,o=t.dataTextField,a=t.dataValueField,s=e.dataSource.view(),l=s.length,c=r,d=0;if(r&&l){for("object"==typeof r?c=r:o&&(c={},o=o.split("."),a=a.split("."),n(c,a,""),n(c,o,r)),c=new i.data.ObservableArray([c]);l>d;d++)c.push(s[d]);s=c}return s},_selectItem:function(){o.fn._selectItem.call(this),this.current()||this.select(0)},_keydown:function(e){var t,n=this,i=e.keyCode,r=e.altKey,o=n.ul[0];i===l.LEFT?i=l.UP:i===l.RIGHT&&(i=l.DOWN),e.keyCode=i,t=n._move(e),n.popup.visible()&&n.filterInput||(i===l.HOME?(t=!0,e.preventDefault(),n._select(o.firstChild)):i===l.END&&(t=!0,e.preventDefault(),n._select(o.lastChild))),r&&i===l.UP&&n._focusElement(n.wrapper),r||t||!n.filterInput||n._search()},_selectNext:function(e,n){for(var i,r=this,o=n,a=r._data(),s=a.length,l=r.options.ignoreCase,c=function(n,i){return n+="",l&&(n=n.toLowerCase()),0===n.indexOf(e)?(r._select(i),r._triggerEvents(),!0):t};s>n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;if(o>0&&s>o)for(n=0;o>=n;n++)if(i=r._text(a[n]),i&&c(i,n))return!0;return!1},_keypress:function(e){var t,n,r,o=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=o.selectedIndex,r=o._word,o.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),o._last===t&&1>=r.length&&n>-1&&(r||(r=t),o._selectNext(r,n+1))||(o._word=r+t,o._last=t,o._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){o.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,r=e===i?n:i;i&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&(n=this,i=n.options.ignoreCase,i&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex,r=e._word;if(clearTimeout(e._typing),"none"!==e.options.filter)e._typing=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay);else{if(e._typing=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.one(h,function(){n.data()[0]&&i>-1&&e._selectNext(r,i)}).fetch(),t;e._selectNext(r,i),e._triggerEvents()}},_select:function(e){var n,i,o=this,a=o._current,s=null;return e=o._get(e),e&&e[0]&&!e.hasClass(_)&&(o._state===b&&(o._state=k),a&&a.removeClass(_),i=r.List.inArray(e[0],o.ul[0]),i>-1&&(o.selectedIndex=i,s=o._data()[i],n=o._value(s),null===n&&(n=""),o._textAccessor(s),o._accessor(n!==t?n:o._text(s),i),o._selectedValue=o._accessor(),o.current(e.addClass(_)),o._optionID&&o._current.attr("aria-selected",!0))),s},_triggerEvents:function(){this.popup.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&a&&(t.options.animation.open.effects=a.android||a.meego?"fadeIn":a.ios||a.wp?"slideIn:up":t.options.animation.open.effects)},_filterHeader:function(){var t,n=this.options,i="none"!==n.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),i&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";t=i.find(r),t[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent(),e[0].style.cssText=i.style.cssText),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,n=e.options.optionLabel;return e.options.value="",e._selectedValue="",e.dataSource.view()[0]&&(n||e._userTriggered)?(e.select(0),t):(e.selectedIndex=-1,e.element.val(""),e._textAccessor(e.options.optionLabel),t)},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(r){var o,a=this.dataItem(),s=this.options,l=this.span;return r===t?l.text():(e.isPlainObject(r)||r instanceof i.data.ObservableObject?a=r:a&&this._text(a)===r||(s.dataTextField?(a={},n(a,s.dataTextField.split("."),r),n(a,s.dataValueField.split("."),this._accessor())):a=r),o=function(){return{elements:l.get(),data:[{dataItem:a}]}},this.angular("cleanup",o),l.html(this.valueTemplate(a)),this.angular("compile",o),t)}});r.plugin(C)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.caret,s=n.support,l=s.placeholder,c=n._activeElement,d=n.keys,u=".kendoComboBox",h="click"+u,p="mousedown"+u,f="disabled",g="readonly",m="change",v="k-state-default",_="k-state-focused",y="k-state-disabled",w="aria-disabled",b="aria-readonly",k="k-state-selected",x="filter",C="accept",S="rebind",T="mouseenter"+u+" mouseleave"+u,D=null,A=e.proxy,E=o.extend({init:function(t,i){var r,a=this;
a.ns=u,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),i=a.options,t=a.element.on("focus"+u,A(a._focusHandler,a)),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._oldIndex=a.selectedIndex=-1,a._cascade(),a._aria(),i.autoBind?a._filterSource():(r=i.text,!r&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{}},events:["open","close",m,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var n=this,i=n._current;return e===t?i:(i&&i.removeClass(k),o.fn.current.call(n,e),t)},destroy:function(){var e=this;e.input.off(u),e.element.off(u),e._inputWrapper.off(u),o.fn.destroy.call(e)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(_),this._placeholder(!1)},_inputFocusout:function(){var e=this;e._inputWrapper.removeClass(_),clearTimeout(e._typing),e._typing=null,e.options.text!==e.input.val()&&e.text(e.text()),e._placeholder(),e._blur(),e.element.blur()},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(u),o=t.element.add(t.input.off(u)),a=t._arrow.parent().off(h+" "+p);i||n?(r.addClass(n?y:v).removeClass(n?v:y),o.attr(f,n).attr(g,i).attr(w,n).attr(b,i)):(r.addClass(v).removeClass(y).on(T,t._toggleHover),o.removeAttr(f).removeAttr(g).attr(w,!1).attr(b,!1),a.on(h,A(t._arrowClick,t)).on(p,function(e){e.preventDefault()}),t.input.on("keydown"+u,A(t._keydown,t)).on("focus"+u,A(t._inputFocus,t)).on("focusout"+u,A(t._inputFocusout,t)))},open:function(){var e=this,t=e._state,n=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild&&t!==x||t===C&&!n?(e._open=!0,e._state=S,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var i,r,o=this,a=o.ul[0],s=o.options,l=o._state,d=o._data(),u=d.length,h=!0;o._angularItems("cleanup"),o.trigger("dataBinding"),a.innerHTML=n.render(o.template,d),o._height(u),o.popup.visible()&&o.popup._position(),o._isSelect&&(i=o.element[0].children[0],l===S&&(o._state=""),r=o._option,o._option=t,o._options(d),r&&r[0].selected?o._custom(r.val(),h):o._bound||i||o._custom("",h)),u&&(s.highlightFirst&&o.current(e(a.firstChild)),s.suggest&&o.input.val()&&o._request!==t&&o.suggest(e(a.firstChild))),l===x||o._fetch||o._selectItem(),o._open&&(o._open=!1,o._typing&&o.input[0]!==c()?o.popup.close():o.toggle(!!u),o._typing=null),o._touchScroller&&o._touchScroller.reset(),o._makeUnselectable(),o._hideBusy(),o._bound=!0,o._angularItems("compile"),o.trigger("dataBound")},suggest:function(e){var n,i=this,o=i.input[0],s=i.text(),l=a(o)[0],u=i._last;return u==d.BACKSPACE||u==d.DELETE?(i._last=t,t):(e=e||"","string"!=typeof e&&(n=r.inArray(e[0],i.ul[0]),e=n>-1?i._text(i.dataSource.view()[n]):""),0>=l&&(l=s.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=e.toLowerCase().indexOf(s.toLowerCase()),n>-1&&(s+=e.substring(n+s.length))):s=s.substring(0,l),s.length===l&&e||(o.value=s,o===c()&&a(o,l,s.length)),t)},text:function(e){var n,i,r,o,a,s;return e=null===e?"":e,n=this,i=n.input[0],r=n.options.ignoreCase,o=e,e===t?i.value:(a=n.dataItem(),a&&n._text(a)===e&&(s=n._value(a),null===s?s="":s+="",s===n._old)?(n._triggerCascade(),t):(r&&(o=o.toLowerCase()),n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===o}),0>n.selectedIndex&&(n._custom(e),i.value=e),n._prev=i.value,n._triggerCascade(),t))},toggle:function(e){this._toggle(e,!0)},value:function(e){var n,i=this,r=i.options;return e===t?i._accessor():(null!==e&&(e=""+e),i._selectedValue=e,!i._open&&e&&i._fetchItems(e)||(n=i._index(e),n>-1?i.select(n):(i.current(D),i._custom(e),(r.value!==e||r.text!==i.input.val())&&(i.text(e),i._placeholder())),i._old=i._accessor(),i._oldIndex=i.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t,n){var i=this,r=i.element,o=i._option;i._state!==x||n||(i._state=C),i._isSelect?(o||(o=i._option=e("<option/>"),r.append(o)),o.text(t),o[0].selected=!0):r.val(t),i._selectedValue=t},_filter:function(e){var n=this,i=n.options,r=n.dataSource,o=i.ignoreCase,a=function(i){var r=n._text(i);return r!==t?(r+="",""!==r&&""===e?!1:(o&&(r=r.toLowerCase()),0===r.indexOf(e))):t};return o&&(e=e.toLowerCase()),n.ul[0].firstChild?(-1!==n._highlight(a)&&(i.suggest&&n._current&&n.suggest(n._current),n.open()),n._hideBusy(),t):(r.one(m,function(){r.view()[0]&&n.search(e)}).fetch(),t)},_highlight:function(n){var i,o=this;return n===t||null===n?-1:(n=o._get(n),i=r.inArray(n[0],o.ul[0]),-1==i&&(o.options.highlightFirst&&!o.text()?(n=o.ul[0].firstChild,n&&(n=e(n))):n=D),o.current(n),i)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",s=i.name||"";s&&(s='name="'+s+'_input" '),t=o.find(a),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+s+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),l&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typing),t._typing=null,n==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!l){var n,i=this,r=i.input,o=i.options.placeholder;if(o){if(n=i.value(),e===t&&(e=!n),r.toggleClass("k-readonly",e),!e){if(n)return;o=""}r.val(o),o||r[0]!==c()||a(r[0],0,0)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay)},_select:function(e){var n,i,r=this,o=r._data(),a=r._highlight(e);r.selectedIndex=a,-1!==a&&(r._state===x&&(r._state=C),r._current.addClass(k),o=o[a],n=r._text(o),i=r._value(o),null===i&&(i=""),r._prev=r.input[0].value=n,r._accessor(i!==t?i:n,a),r._selectedValue=r._accessor(),r._placeholder(),r._optionID&&r._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,n=t.parent();n.is("span.k-widget")||(n=t.hide().wrap("<span />").parent(),n[0].style.cssText=t[0].style.cssText),e.wrapper=n.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var n=this,i=e._selectedValue||e.value(),r=i&&-1===e.selectedIndex;(t||!i||r)&&(n.value(""),n.options.value="")}});i.plugin(E)}(window.kendo.jQuery),function(e,t){function n(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if(n=e.length,n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function i(t){var n=t.firstChild;return n&&"none"===n.style.display&&(n=o(n,k)),n?e(n):n}function r(t){var n=t.lastChild;return n&&"none"===n.style.display&&(n=o(n,x)),n?e(n):n}function o(e,t){return e=e[t],e&&"none"===e.style.display&&(e=o(e,t)),e}var a=window.kendo,s=a.ui,l=s.List,c=a.keys,d=a._activeElement,u=a.data.ObservableArray,h=e.proxy,p="id",f="li",g="accept",m="filter",v="open",_="close",y="change",w="progress",b="select",k="nextSibling",x="previousSibling",C=' style="display:none"',S="aria-disabled",T="aria-readonly",D="k-state-focused",A="k-loading-hidden",E="k-state-hover",M="k-state-disabled",P="disabled",I="readonly",z=".kendoMultiSelect",F="click"+z,R="keydown"+z,B="mouseenter"+z,L="mouseleave"+z,O=B+" "+L,H=/"/g,N=e.isArray,V=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],U=l.extend({init:function(t,n){var i,r,o=this;o.ns=z,l.fn.init.call(o,t,n),o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),n=o.options,r=n.value,n.placeholder||(n.placeholder=t.data("placeholder")),i=t.attr(p),i&&(o._tagID=i+"_tag_active",i+="_taglist",o.tagList.attr(p,i)),o._aria(i),o._dataSource(),o._ignoreCase(),o._popup(),o._values=[],o._dataItems=[],o._reset(),o._enable(),o._placeholder(),n.autoBind?o.dataSource.fetch():r&&(N(r)||(r=[r]),(e.isPlainObject(r[0])||!n.dataValueField)&&(o._retrieveData=!0,o.dataSource.data(r),o.value(o._initialValues))),a.notify(o)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,_,y,b,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){l.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(p))},current:function(e){return this.currentTag(null),l.fn.current.call(this,e)},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(D).removeAttr(p),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(D).attr(p,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;clearTimeout(e._busy),clearTimeout(e._typing),e.wrapper.off(t),e.tagList.off(t),e.input.off(t),l.fn.destroy.call(e)},_wrapperMousedown:function(e){var t=this,n="input"!==e.target.nodeName.toLowerCase();n&&e.preventDefault(),-1===e.target.className.indexOf("k-delete")&&(t.input[0]!==d()&&n&&t.input.focus(),0===t.options.minLength&&t.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(D)},_inputFocusout:function(){var e=this;clearTimeout(e._typing),e.wrapper.removeClass(D),e._placeholder(!e._dataItems[0],!0),e.close(),e._state===m&&(e._state=g),e.element.blur()},_tagListClick:function(t){this._unselect(e(t.target).closest(f)),this._change(),this.close()},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(z),a=n.tagList.off(z),s=n.element.add(n.input.off(z));r||i?(i?o.addClass(M):o.removeClass(M),s.attr(P,i).attr(I,r).attr(S,i).attr(T,r)):(o.removeClass(M).on(O,n._toggleHover).on("mousedown"+z,h(n._wrapperMousedown,n)),n.input.on(R,h(n._keydown,n)).on("paste"+z,h(n._search,n)).on("focus"+z,h(n._inputFocus,n)).on("focusout"+z,h(n._inputFocusout,n)),s.removeAttr(P).removeAttr(I).attr(S,!1).attr(T,!1),a.on(B,f,function(){e(this).addClass(E)}).on(L,f,function(){e(this).removeClass(E)}).on(F,".k-delete",h(n._tagListClick,n)))},_close:function(){var e=this;e.options.autoClose||!e._visibleItems?e.close():(e.current(e.options.highlightFirst?i(e.ul[0]):null),e.popup._position())},close:function(){this.popup.close(),this.current(null)},open:function(){var e=this;e._request&&(e._retrieveData=!1),!e.ul[0].firstChild||e._state===g||e._retrieveData?(e._state="",e._open=!0,e._retrieveData=!1,e._filterSource()):e._visibleItems&&e._allowSelection()&&(e.popup.open(),e.current(e.options.highlightFirst?i(e.ul[0]):null))},toggle:function(e){e=e!==t?e:!this.popup.visible(),this[e?v:_]()},refresh:function(){var e,t=this,n=null;t.trigger("dataBinding"),e=t._render(t.dataSource.view()),t._height(e),t._setInitialValues&&(t._setInitialValues=!1,t.value(t._initialValues)),t._open&&(t._open=!1,t.toggle(e)),t.popup.visible()&&(t.popup._position(),t.options.highlightFirst&&(n=i(t.ul[0]))),t.current(n),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},search:function(e){var t,n,i=this,r=i.options,o=r.ignoreCase,a=r.filter,s=r.dataTextField,l=i.input.val();r.placeholder===l&&(l=""),clearTimeout(i._typing),e="string"==typeof e?e:l,n=e.length,(!n||n>=r.minLength)&&(i._state=m,i._open=!0,t={value:o?e.toLowerCase():e,field:s,operator:a,ignoreCase:o},i._filterSource(t,i._retrieveData),i._retrieveData=!1)},value:function(n){var i,r=this,o=e(r.tagList[0].children),a=o.length,s=0;if(n===t)return r._values;if(!r._fetchItems(n)){for(;a>s;s++)r._unselect(o.eq(s));if(null!==n){for(n=N(n)||n instanceof u?n:[n],s=0,a=n.length;a>s;s++)i=r._index(n[s]),i>-1&&r._select(i);r._old=r._values.slice()}}},_dataSource:function(){var e=this,t=e.element,n=e.options,i=n.dataSource||{};i=N(i)?{data:i}:i,i.select=t,i.fields=[{field:n.dataTextField},{field:n.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=h(e.refresh,e),e._progressHandler=h(e._showBusy,e)),e.dataSource=a.data.DataSource.create(i).bind(y,e._refreshHandler).bind(w,e._progressHandler)},_fetchItems:function(n){var i=this,r=e.isArray(n)&&0===n.length;if(!r&&n)return i._fetch||i.ul[0].firstChild?t:(i.dataSource.one(y,function(){i.value(n),i._fetch=!1}),i._fetch=!0,i.dataSource.fetch(),!0)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this,n=e.options.value||e.element.val();null===n?n=[]:(N(n)||(n=[n]),n=e._mapValues(n)),e._old=e._initialValues=n,e._setInitialValues=n[0]!==t},_mapValues:function(t){var n=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return n._value(e)})),t},_change:function(){var e=this,t=e.value();n(t,e._old)||(e._old=t.slice(),e.trigger(y),e.element.trigger(y))},_click:function(n){var i=this,r=e(n.currentTarget);if(!n.isDefaultPrevented()){if(i.trigger(b,{item:r}))return i._close(),t;i._select(r),i._change(),i._close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(n){var s=this,l=n.keyCode,d=s._currentTag,u=s._current,h=s.input.val(),p=a.support.isRtl(s.wrapper),f=s.popup.visible();if(l===c.DOWN){if(n.preventDefault(),!f)return s.open(),t;u=u?o(u[0],k):i(s.ul[0]),u&&s.current(e(u))}else if(l===c.UP)f&&(u=u?o(u[0],x):r(s.ul[0]),s.current(e(u)),s._current[0]||s.close()),n.preventDefault();else if(l===c.LEFT&&!p||l===c.RIGHT&&p)h||(d=d?d.prev():e(s.tagList[0].lastChild),d[0]&&s.currentTag(d));else if(l===c.RIGHT&&!p||l===c.LEFT&&p)!h&&d&&(d=d.next(),s.currentTag(d[0]?d:null));else if(l===c.ENTER&&f){if(u){if(s.trigger(b,{item:u}))return s._close(),t;s._select(u)}s._change(),s._close(),n.preventDefault()}else l===c.ESC?(f?n.preventDefault():s.currentTag(null),s.close()):l===c.HOME?f?s.current(i(s.ul[0])):h||(d=s.tagList[0].firstChild,d&&s.currentTag(e(d))):l===c.END?f?s.current(r(s.ul[0])):h||(d=s.tagList[0].lastChild,d&&s.currentTag(e(d))):l!==c.DELETE&&l!==c.BACKSPACE||h?(clearTimeout(s._typing),setTimeout(function(){s._scale()}),s._search()):(l!==c.BACKSPACE||d||(d=e(s.tagList[0].lastChild)),d&&d[0]&&(s._unselect(d),s._change(),s._close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(A),e._request=!1,e._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(A)},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(h(e._showBusyHandler,e),100))},_placeholder:function(e,n){var i=this,r=i.input,o=d();e===t&&(e=!1,r[0]!==o&&(e=!i._dataItems[0])),i._prev="",r.toggleClass("k-readonly",e).val(e?i.options.placeholder:""),r[0]!==o||n||a.caret(r[0],0,0),i._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,n){var i="<option",r=this._text(e),o=this._value(e);return o!==t&&(o+="",-1!==o.indexOf('"')&&(o=o.replace(H,"&quot;")),i+=' value="'+o+'"'),n&&(i+=' selected="selected"'),i+=">",r!==t&&(i+=a.htmlEncode(r)),i+="</option>"},_render:function(e){for(var t,n,i=this,r=e.length,o=i.itemTemplate,a=i._dataItems.slice(0),s=0,l=0,c="",d="";r>l;l++)t=e[l],n=i._selected(a,t),d+=o(t,l,n),c+=i._option(t,n),n||(s+=1);if(r=a.length)for(l=0;r>l;l++)c+=i._option(a[l],!0);return i.ul[0].innerHTML=d,i.element.html(c),i._visibleItems=s,s},_selected:function(e,n){var i,r=this,o=r._text,a=r._value,s=a(n),l=e.length,c=!1,d=0;for(s===t&&(s=o(n));l>d;d++)if(n=e[d],i=a(n),i===t&&(i=o(n)),i!==t&&i===s){c=!0;break}return c&&e.splice(d,1),c},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,n,i=this,r=i._values;i._allowSelection()&&(isNaN(e)?n=e.hide().data("idx"):(n=e,i.ul[0].children[n].style.display="none"),i.element[0].children[n].selected=!0,t=i.dataSource.view()[n],i.tagList.append(i.tagTemplate(t)),i._dataItems.push(t),r.push(i._dataValue(t)),i._visibleItems-=1,i.currentTag(null),i._placeholder(),i._height(i._visibleItems),i._state===m&&(i._state=g))},_unselect:function(t){var n,i,r,o,a,s=this,l=t.index();if(t.remove(),s.currentTag(null),s._values.splice(l,1),n=s._dataItems.splice(l,1)[0],i=s._dataValue(n),l=s._index(i),-1!==l)e(s.ul[0].children[l]).show(),s.element[0].children[l].selected=!1,s._visibleItems+=1,s._height(s._visibleItems);else for(l=s.dataSource.view().length,r=s.element[0].children,a=r.length;a>l;l++)if(o=r[l],o.value==i){o.selected=!1;break}s._placeholder()},_template:function(){var e,t=this,n=t.options,i=n.itemTemplate,r=n.tagTemplate,o=n.dataSource;t.element[0].length&&!o&&(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value"),e=a.template("#:"+a.expr(n.dataTextField,"data")+"#",{useWithBlock:!1}),i=i?a.template(i):e,r=r?a.template(r):e,t.itemTemplate=function(e,t,n){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(n?C:"")+">"+i(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_loader:function(){this._loading=e('<span class="k-icon k-loading '+A+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=a.getComputedStyles(this.input[0],V);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||(i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),i[0].style.cssText=n[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});s.plugin(U)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+i+o+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}function i(e,t,n){var i="";return i="increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+i+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=k.floor(c(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+="</ul>"}function o(e,t){var n=t.is("input")?1:2,i=2==n?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+i+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}function a(e){return function(t){return t+e}}function s(e){return function(){return e}}function l(e){return(e+"").replace(".",f.cultures.current.numberFormat["."])}function c(e){e=parseFloat(e,10);var t=k.pow(10,q||0);return k.round(e*t)/t}function d(e,n){var i=y(e.getAttribute(n));return null===i&&(i=t),i}function u(e){return typeof e!==Y}function h(e){return 1e4*e}var p,f=window.kendo,g=f.ui.Widget,m=f.ui.Draggable,v=e.extend,_=f.format,y=f.parseFloat,w=e.proxy,b=e.isArray,k=Math,x=f.support,C=x.pointers,S=x.msPointers,T="change",D="slide",A=".slider",E="touchstart"+A+" mousedown"+A,M=C?"pointerdown"+A:S?"MSPointerDown"+A:E,P="touchend"+A+" mouseup"+A,I=C?"pointerup":S?"MSPointerUp"+A:P,z="moveSelection",F="keydown"+A,R="click"+A,B="mouseover"+A,L="focus"+A,O="blur"+A,H=".k-draghandle",N=".k-slider-track",V=".k-tick",U="k-state-selected",W="k-state-focused",j="k-state-default",G="k-state-disabled",q=3,$="disabled",Y="undefined",K="tabindex",Q=f.getTouches,X=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),t=i.options,i._distance=c(t.max-t.min),i._isHorizontal="horizontal"==t.orientation,i._isRtl=i._isHorizontal&&f.support.isRtl(e),i._position=i._isHorizontal?"left":"bottom",i._sizeFn=i._isHorizontal?"width":"height",i._outerSize=i._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",i._createHtml(),i.wrapper=i.element.closest(".k-slider"),i._trackDiv=i.wrapper.find(N),i._setTrackDivWidth(),i._maxSelection=i._trackDiv[i._sizeFn](),i._sliderItemsInit(),i._tabindex(i.wrapper.find(H)),i[t.enabled?"enable":"disable"](),n=f.support.isRtl(i.wrapper)?-1:1,i._keyMap={37:a(-1*n*t.smallStep),40:a(-t.smallStep),39:a(1*n*t.smallStep),38:a(+t.smallStep),35:s(t.max),36:s(t.min),33:a(+t.largeStep),34:a(-t.largeStep)},f.notify(i)},events:[T,D],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh()},_sliderItemsInit:function(){var e=this,t=e.options,n=e._maxSelection/((t.max-t.min)/t.smallStep),i=e._calculateItemsWidth(k.floor(e._distance/t.smallStep));"none"!=t.tickPlacement&&n>=2&&(e._trackDiv.before(r(t,e._distance)),e._setItemsWidth(i),e._setItemsTitle()),e._calculateSteps(i),"none"!=t.tickPlacement&&n>=2&&t.largeStep>=t.smallStep&&e._setItemsLargeTick()},getSize:function(){return f.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._sizeFn](e.wrapper[e._sizeFn]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=0,a=t.length-1,s=i.wrapper.find(V),l=0,c=2,d=s.length,u=0;for(n=0;d-2>n;n++)e(s[n+1])[i._sizeFn](t[n]);if(i._isHorizontal?(e(s[o]).addClass("k-first")[i._sizeFn](t[a-1]),e(s[a]).addClass("k-last")[i._sizeFn](t[a])):(e(s[a]).addClass("k-first")[i._sizeFn](t[a]),e(s[o]).addClass("k-last")[i._sizeFn](t[a-1])),i._distance%r.smallStep!==0&&!i._isHorizontal){for(n=0;t.length>n;n++)u+=t[n];l=i._maxSelection-u,l+=parseFloat(i._trackDiv.css(i._position),10)+c,i.wrapper.find(".k-slider-items").css("padding-top",l)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(V),r=n.min,o=i.length,a=t._isHorizontal&&!t._isRtl?0:o-1,s=t._isHorizontal&&!t._isRtl?o:-1,l=t._isHorizontal&&!t._isRtl?1:-1;a-s!==0;a+=l)e(i[a]).attr("title",_(n.tooltip.format,c(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n,i,r=this,o=r.options,a=r.wrapper.find(V),s=0;if(h(o.largeStep)%h(o.smallStep)===0||r._distance/o.largeStep>=3)for(r._isHorizontal||r._isRtl||(a=e.makeArray(a).reverse()),s=0;a.length>s;s++)t=e(a[s]),n=r._values[s],i=h(n-this.options.min),i%h(o.smallStep)===0&&i%h(o.largeStep)===0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==a.length-1&&t.css("line-height",t[r._sizeFn]()+"px"))},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._sizeFn))+1,s=a/r._distance;for(r._distance/o.smallStep-k.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-k.floor(e[t]),e[t]=k.floor(e[t]);return n=k.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(k.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,a=k.ceil(n._distance/i.smallStep),s=1;if(a+=n._distance/i.smallStep%1===0?1:0,e.splice(0,0,2*e[a-2]),e.splice(a-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==a){for(;a>s;)o+=(e[s-1]+e[s])/2,n._pixelSteps[s]=o,r+=i.smallStep,n._values[s]=c(r),s++;t=n._distance%i.smallStep===0?a-1:a,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=k.max(r.smallStep*(i._maxSelection/i._distance),0),a=0,s=o/2;if(i._isHorizontal?(a=e-t.startPoint,i._isRtl&&(a=i._maxSelection-a)):a=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<a)return r.max;for(n=0;i._pixelSteps.length>n;n++)if(k.abs(i._pixelSteps[n]-a)-1<=s)return c(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o=this,a="",s=o.options.tooltip;return b(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&s.template&&(n=f.template(s.template)),b(e)||t&&t.type?n?a=n({selectionStart:i,selectionEnd:r}):(i=_(s.format,i),r=_(s.format,r),a=i+" - "+r):(t&&(t.val=e),a=n?n({value:e}):_(s.format,e)),a},_getDraggableArea:function(){var e=this,t=f.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,r=e.options,a=t.find("input");2==a.length?(a.eq(0).prop("value",l(r.selectionStart)),a.eq(1).prop("value",l(r.selectionEnd))):t.prop("value",l(r.value)),t.wrap(n(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(i(r,"increase",e._isHorizontal)).before(i(r,"decrease",e._isHorizontal)),t.before(o(r,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(H).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(W+" "+U),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var n=this,i=t.is(H)?t.index():0;window.setTimeout(function(){n.wrapper.find(H)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(W+" "+U),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e,t=this;window.clearTimeout(this._tooltipTimeout),e=t._drag||t._activeHandleDrag,e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)}}),J=X.extend({init:function(n,i){var r,o=this;n.type="text",i=v({},{value:d(n,"value"),min:d(n,"min"),max:d(n,"max"),smallStep:d(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.value)&&null!==i.value||(i.value=i.min,n.prop("value",l(i.min))),i.value=k.max(k.min(i.value,i.max),i.min),r=o.wrapper.find(H),new J.Selection(r,o,i),o._drag=new J.Drag(r,"",o,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),n!==!1&&(a.wrapper.removeClass(G).addClass(j),a.wrapper.find("input").removeAttr($),i=function(n){var i,r,o,s=Q(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),o=e(n.target),o.hasClass("k-draghandle"))return o.addClass(W+" "+U),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){a._drag._end()}),a.wrapper.find(H).attr(K,0).on(P,function(){a._setTooltipTimeout()}).on(R,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(L,w(a._focus,a)).on(O,w(a._blur,a)),r=w(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=w(function(e,t){this._clearTooltipTimeout(),(1===e.which||x.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(w(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(P,w(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(B,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+A,w(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(E,w(function(e){o(e,1)},a)).click(!1).end().eq(1).on(E,w(function(e){o(e,-1)},a)).click(f.preventDefault)),a.wrapper.find(H).off(F,!1).on(F,w(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(j).addClass(G),e(t.element).prop($,$),t.wrapper.find(".k-button").off(E).on(E,f.preventDefault).off(P).on(P,f.preventDefault).off("mouseleave"+A).on("mouseleave"+A,f.preventDefault).off(B).on(B,f.preventDefault),t.wrapper.find(V+", "+N).off(M).off(I),t.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(T,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?i.value:(e>=i.min&&i.max>=e&&i.value!=e&&(n.element.prop("value",l(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(z,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this,i=n._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():n._getFormattedValue(e,null),this.wrapper.find(H).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())
},_setValueInRange:function(e){var n=this,i=n.options;return e=c(e),isNaN(e)?(n._update(i.min),t):(e=k.max(k.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[k.max(0,k.min(e,t-1))]},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(".k-button").off(A).end().find(H).off(A).end().find(V+", "+N).off(A).end(),e._drag.draggable.destroy(),e._drag._removeTooltip(!0)}});J.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=k.ceil(c(r/n.smallStep)),a=parseInt(t._pixelSteps[o],10),s=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10),d=t._isRtl?2:0;s[t._sizeFn](t._isRtl?t._maxSelection-a:a),e.css(t._position,a-l-d)}i(n.value),t.bind([T,D,z],function(e){i(parseFloat(e.value,10))})},J.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new m(e,{distance:0,dragstart:w(r._dragstart,r),drag:w(r.drag,r),dragend:w(r.dragend,r),dragcancel:w(r.dragcancel,r)}),e.click(!1)},J.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(B),r.wrapper.find("."+W).removeClass(W+" "+U),i.element.addClass(W+" "+U),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=k.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n,i=this,r=i.owner,o=i.options.tooltip,a="",s=e(window);o.enabled&&(o.template&&(t=i.tooltipTemplate=f.template(o.template)),e(".k-slider-tooltip").remove(),i.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),a=r._getFormattedValue(i.val||r.value(),i),i.type||(n="k-callout-"+(r._isHorizontal?"s":"e"),i.tooltipInnerDiv="<div class='k-callout "+n+"'><!-- --></div>",a+=i.tooltipInnerDiv),i.tooltipDiv.html(a),i._scrollOffset={top:s.scrollTop(),left:s.scrollLeft()},i.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.selectionEnd>n.val?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(D,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n=t.options,i=n.tooltip,r="";i.enabled&&(t.tooltipDiv||t._createTooltip(),r=t.owner._getFormattedValue(c(e),t),t.type||(r+=t.tooltipInnerDiv),t.tooltipDiv.html(r),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):(n._update(t.val),t.draggable.userEvents._disposeAll()),t._end()},_end:function(){var e=this,t=e.owner;return t._focusWithMouse(e.element),t.element.on(B),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,c=o.element,d=f.getOffset(c),u=8,h=e(window),p=o.tooltipDiv.find(".k-callout"),g=o.tooltipDiv.outerWidth(),m=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(H),d=f.getOffset(t.eq(0)),n=f.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=d.left+(n.left-d.left)/2):(s=d.top+(n.top-d.top)/2,l=n.left),r=t.eq(0).outerWidth()+2*u):(s=d.top,l=d.left,r=c.outerWidth()+2*u),a._isHorizontal?(l-=parseInt((g-c[a._outerSize]())/2,10),s-=m+p.height()+u):(s-=parseInt((m-c[a._outerSize]())/2,10),l-=g+p.width()+u),a._isHorizontal?(i=o._flip(s,m,r,h.outerHeight()+o._scrollOffset.top),s+=i,l+=o._fit(l,g,h.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,g,r,h.outerWidth()+o._scrollOffset.left),s+=o._fit(s,m,h.outerHeight()+o._scrollOffset.top),l+=i),i>0&&p&&(p.removeClass(),p.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this,o=0;return o=e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},f.ui.plugin(J),p=X.extend({init:function(n,i){var r,o=this,a=e(n).find("input"),s=a.eq(0)[0],c=a.eq(1)[0];s.type="text",c.type="text",i=v({},{selectionStart:d(s,"value"),min:d(s,"min"),max:d(s,"max"),smallStep:d(s,"step")},{selectionEnd:d(c,"value"),min:d(c,"min"),max:d(c,"max"),smallStep:d(c,"step")},i),i&&i.enabled===t&&(i.enabled=!a.is("[disabled]")),X.fn.init.call(o,n,i),i=o.options,u(i.selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,a.eq(0).prop("value",l(i.min))),u(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,a.eq(1).prop("value",l(i.max))),r=o.wrapper.find(H),new p.Selection(r,o,i),o._firstHandleDrag=new J.Drag(r.eq(0),"firstHandle",o,i),o._lastHandleDrag=new J.Drag(r.eq(1),"lastHandle",o,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),n!==!1&&(r.wrapper.removeClass(G).addClass(j),r.wrapper.find("input").removeAttr($),i=function(n){var i,a,s,l,c,d,u,h=Q(n)[0];if(h){if(i=r._isHorizontal?h.location.pageX:h.location.pageY,a=r._getDraggableArea(),s=r._getValueFromPosition(i,a),l=e(n.target),l.hasClass("k-draghandle"))return r.wrapper.find("."+W).removeClass(W+" "+U),l.addClass(W+" "+U),t;o.selectionStart>s?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):s>r.selectionEnd?(c=o.selectionStart,d=s,u=r._lastHandleDrag):o.selectionEnd-s>=s-o.selectionStart?(c=s,d=o.selectionEnd,u=r._firstHandleDrag):(c=o.selectionStart,d=s,u=r._lastHandleDrag),u.dragstart(n),r._setValueInRange(c,d),r._focusWithMouse(u.element)}},r.wrapper.find(V+", "+N).on(M,i).end().on(M,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){r._activeDragHandle&&r._activeDragHandle._end()}),r.wrapper.find(H).attr(K,0).on(P,function(){r._setTooltipTimeout()}).on(R,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(L,w(r._focus,r)).on(O,w(r._blur,r)),r.wrapper.find(H).off(F,f.preventDefault).eq(0).on(F,w(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(F,w(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(j).addClass(G),e.wrapper.find("input").prop($,$),e.wrapper.find(V+", "+N).off(M).off(I),e.wrapper.find(H).attr(K,-1).off(P).off(F).off(R).off(L).off(O),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,a=o.options.selectionStart,s=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,a=o._keyMap[e.keyCode](a),a>s&&(s=a)):(r=o._activeHandleDrag=o._lastHandleDrag,s=o._keyMap[e.keyCode](s),a>s&&(a=s)),o._setValueInRange(a,s),n=Math.max(a,o.options.selectionStart),i=Math.min(s,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(T,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,o=r.selectionStart,a=r.selectionEnd;return isNaN(e)&&isNaN(n)?[o,a]:(e=c(e),n=c(n),e>=r.min&&r.max>=e&&n>=r.min&&r.max>=n&&n>=e&&(o!=e||a!=n)&&(i.element.find("input").eq(0).prop("value",l(e)).end().eq(1).prop("value",l(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return b(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(z,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(H),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=k.max(k.min(e,n.max),n.min),t=k.max(k.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(k.min(e,t),k.max(e,t))},_setZIndex:function(t){this.wrapper.find(H).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},destroy:function(){var e=this;g.fn.destroy.call(e),e.wrapper.off(A).find(V+", "+N).off(A).end().find(H).off(A),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}}),p.Selection=function(e,t,n){function i(i){i=i||[];var o=i[0]-n.min,a=i[1]-n.min,s=k.ceil(c(o/n.smallStep)),l=k.ceil(c(a/n.smallStep)),d=t._pixelSteps[s],u=t._pixelSteps[l],h=parseInt(e.eq(0)[t._outerSize]()/2,10),p=t._isRtl?2:0;e.eq(0).css(t._position,d-h-p).end().eq(1).css(t._position,u-h-p),r(d,u)}function r(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=k.abs(e-n),o[t._sizeFn](i),t._isRtl?(r=k.max(e,n),o.css("right",t._maxSelection-r-1)):(r=k.min(e,n),o.css(t._position,r-1))}i(t.value()),t.bind([T,D,z],function(e){i(e.values)})},f.ui.plugin(p)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){n=d(n),n&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){var i,r;return e=Array.prototype.slice.call(e),i=e.length,r=e.indexOf(t),0>r?0>n?e[i-1]:e[0]:(r+=n,0>r?r+=i:r%=i,e[r])}function o(e){e.preventDefault()}function a(e,t){return function(){return e.apply(t,arguments)}}var s=window.kendo,l=s.ui,c=l.Widget,d=s.parseColor,u=s.Color,h=s.keys,p="background-color",f="k-state-selected",g="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",m="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",v={apply:"Apply",cancel:"Cancel"},_=".kendoColorTools",y="click"+_,w="keydown"+_,b=s.support.browser,k=b.msie&&9>b.version,x=c.extend({init:function(e,t){var n,i=this;c.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=d(t.value),i._tabIndex=e.attr("tabIndex")||0,n=i._ariaId=t.ariaId,n&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=d(e),this._updateUI(this._value)),this._value},value:function(e){return e=this.color(e),e&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var n=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(_),this.wrapper&&this.wrapper.off(_).find("*").off(_),this.wrapper=null,c.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),C=x.extend({init:function(t,n){var i,r,o,l,c=this;if(x.fn.init.call(c,t,n),t=c.wrapper=c.element,n=c.options,i=n.palette,"websafe"==i?(i=m,n.columns=18):"basic"==i&&(i=g),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return d(e)})),c._selectedID=(n.ariaId||s.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(c._template({colors:i,columns:n.columns,tileSize:n.tileSize,value:c._value,id:n.ariaId}))).on(y,".k-item",function(t){c._select(e(t.currentTarget).css(p))}).attr("tabIndex",c._tabIndex).on(w,a(c._keydown,c)),r=n.tileSize){if(/number|string/.test(typeof r))o=l=parseFloat(r);else{if("object"!=typeof r)throw Error("Unsupported value for the 'tileSize' argument");o=parseFloat(r.width),l=parseFloat(r.height)}t.find(".k-item").css({width:o,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var n,i,a=this.wrapper,s=a.find(".k-item"),l=s.filter("."+f).get(0),c=t.keyCode;if(c==h.LEFT?n=r(s,l,-1):c==h.RIGHT?n=r(s,l,1):c==h.DOWN?n=r(s,l,this.options.columns):c==h.UP?n=r(s,l,-this.options.columns):c==h.ENTER?(o(t),l&&this._select(e(l).css(p))):c==h.ESC&&this._cancel(),n){o(t),this._current(n);try{i=d(n.css(p)),this._triggerSelect(i)}catch(u){}}},_current:function(t){this.wrapper.find("."+f).removeClass(f).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(f).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var r=d(e(this).css(p));return r&&r.equals(t)?(i=this,!1):n}),this._current(i)},_template:s.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+f+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),S=x.extend({init:function(t,n){var i=this;x.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||d("#f00")),t.find("input.k-color-value").on(w,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=d(o.value),r=i.color(),i._select(n,n.equals(r))}catch(a){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=d(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(y,".k-controls button.apply",function(){i._select(i._getHSV())}).on(y,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),k&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,x.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:v},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element,i=n.find(".k-hsv-rectangle"),r=i.find(".k-draghandle").attr("tabIndex",0).on(w,a(t._keydown,t));t._hsvEvents=new s.UserEvents(i,{global:!0,press:function(t){this.offset=s.getOffset(i),this.width=i.width(),this.height=i.height(),r.focus(),e.call(this,t.x.location,t.y.location)},start:function(){i.addClass("k-dragging"),r.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){i.removeClass("k-dragging")}}),t._hsvRect=i,t._hsvHandle=r},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),0>r[t]&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),o(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),0>n.h&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),o(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(p,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(p,u.fromHSV(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:s.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),T=c.extend({init:function(t,n){var i,r,o,a,s,l=this;c.fn.init.call(l,t,n),n=l.options,t=l.element,i=t.attr("value")||t.val(),i=i?d(i,!0):d(n.value,!0),l._value=n.value=i,r=l.wrapper=e(l._template(n)),t.hide().after(r),t.is("input")&&(t.appendTo(r),o=t.closest("label"),a=t.attr("id"),a&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){l.open(),e.preventDefault()})),l._tabIndex=t.attr("tabIndex")||0,l.enable(!t.attr("disabled")),s=t.attr("accesskey"),s&&(t.attr("accesskey",null),r.attr("accesskey",s)),l.bind("activate",function(e){e.isDefaultPrevented()||l.toggle()}),l._updateUI(i)},destroy:function(){this.wrapper.off(_).find("*").off(_),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,c.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("aria-disabled",!e),r.off(_).on("mousedown"+_,o),n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(_),e&&n.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+_,function(){i.addClass("k-state-hover")}).on("mouseleave"+_,function(){i.removeClass("k-state-hover")}).on("focus"+_,function(){i.addClass("k-state-focused")}).on("blur"+_,function(){i.removeClass("k-state-focused")}).on(w,a(t._keydown,t)).on(y,".k-icon",a(t.toggle,t)).on(y,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:s.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:v,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:x.fn.color,value:x.fn.value,_select:x.fn._select,_triggerSelect:x.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=s.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(p,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),o(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),o(e))},_getPopup:function(){var t,i,r,o,a=this,l=a._popup;return l||(t=a.options,i=t.palette?C:S,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=s.guid(),o=a._selector=new i(e('<div id="'+r+'"/>').appendTo(document.body),t),a.wrapper.attr("aria-owns",r),a._popup=l=o.wrapper.kendoPopup({anchor:a.wrapper}).data("kendoPopup"),o.bind({select:function(e){a._updateUI(d(e.value))},change:function(){a._select(o.color()),a.close()},cancel:function(){a.close()}}),l.bind({close:function(e){if(a.trigger("close"))return e.preventDefault(),n;a.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=o._selectOnHide();t?a._select(t):(a.wrapper.focus(),a._updateUI(a.color()))},open:function(e){a.trigger("open")?e.preventDefault():a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(a.color(),!0),o.focus(),a.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),l}});l.plugin(C),l.plugin(S),l.plugin(T)}(jQuery,parseInt),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var i=window.kendo,r=i.caret,o=i.keys,a=i.ui,s=a.Widget,l=i._activeElement,c=i._extractFormat,d=i.parseFloat,u=i.support.placeholder,h=i.getCulture,p=i._round,f="change",g="disabled",m="readonly",v="k-input",_="spin",y=".kendoNumericTextBox",w="touchend",b="mouseleave"+y,k="mouseenter"+y+" "+b,x="k-state-default",C="k-state-focused",S="k-state-hover",T="focus",D=".",A="k-state-selected",E="k-state-disabled",M="aria-disabled",P="aria-readonly",I=/^(-)?(\d*)$/,z=null,F=e.proxy,R=s.extend({init:function(e,n){var r,o,a,l,d,u=this,h=n&&n.step!==t;s.fn.init.call(u,e,n),n=u.options,e=u.element.on("focusout"+y,F(u._focusout,u)).attr("role","spinbutton"),n.placeholder=n.placeholder||e.attr("placeholder"),u._reset(),u._wrapper(),u._arrows(),u._input(),i.support.mobileOS?u._text.on(w+y+" "+T+y,function(t){u._toggleText(!1),t.type===T&&e.focus()}):u._text.on(T+y,F(u._click,u)),r=u.min(e.attr("min")),o=u.max(e.attr("max")),a=u._parse(e.attr("step")),n.min===z&&r!==z&&(n.min=r),n.max===z&&o!==z&&(n.max=o),h||a===z||(n.step=a),e.attr("aria-valuemin",n.min).attr("aria-valuemax",n.max),n.format=c(n.format),l=n.value,u.value(l!==z?l:e.val()),d=e.is("[disabled]"),d?u.enable(!1):u.readonly(e.is("[readonly]")),i.notify(u)},options:{name:"NumericTextBox",decimals:z,min:z,max:z,value:z,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[f,_],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+y).off("keypress"+y).off("paste"+y),r||i?(a.addClass(i?E:x).removeClass(i?x:E),o.attr(g,i).attr(m,r).attr(M,i).attr(P,r)):(a.addClass(x).removeClass(E).on(k,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(M,!1).attr(P,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(A)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(A)}),t.element.on("keydown"+y,F(t._keydown,t)).on("keypress"+y,F(t._keypress,t)).on("paste"+y,F(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(y),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e===n&&(i._update(e),i._old=i._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,n=t.options,i=n.min,r=n.max;return e===z?e:(i!==z&&i>e?e=i:r!==z&&e>r&&(e=r),e)},_arrows:function(){var t,r=this,o=function(){clearTimeout(r._spinning),t.removeClass(A)},a=r.options,s=a.spinners,l=r.element;t=l.siblings(".k-icon"),t[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),s||(t.parent().toggle(s),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new i.UserEvents(r._upArrow,{release:o}),r._downArrow=t.eq(1),r._downArrowEventHandler=new i.UserEvents(r._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,i,o,a=e.target,s=r(a)[0],l=a.value.substring(0,s),c=t._format(t.options.format),d=c[","],u=0;d&&(i=RegExp("\\"+d,"g"),o=RegExp("([\\d\\"+d+"]+)(\\"+c[D]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(u=n[0].replace(i,"").length,-1!=l.indexOf("(")&&0>t._value&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.element.trigger(f),t.trigger(f))},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(S),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass(v).show()[0],o=r.accessKey,a=n.wrapper;t=a.find(D+i),t[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i));try{r.setAttribute("type","text")}catch(s){r.type="text"}t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;t._key=n,n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER&&t._change(t.element.val())},_keypress:function(e){var t,n,i,a,s,l,c,d,u,h,p;0===e.which||e.ctrlKey||e.keyCode===o.BACKSPACE||e.keyCode===o.ENTER||(t=this,n=t.options.min,i=t.element,a=r(i),s=a[0],l=a[1],c=String.fromCharCode(e.which),d=t._format(t.options.format),u=t._key===o.NUMPAD_DOT,h=i.val(),u&&(c=d[D]),h=h.substring(0,s)+c+h.substring(l),p=t._numericRegex(d).test(h),p&&u?(i.val(h),r(i,s+c.length),e.preventDefault()):(null!==n&&n>=0&&"-"===h.charAt(0)||!p)&&e.preventDefault(),t._key=0)},_numericRegex:function(e){var t=this,n=e[D],i=t.options.decimals;return n===D&&(n="\\"+n),i===z&&(i=e.decimals),0===i?I:(t._separator!==n&&(t._separator=n,t._floatRegExp=RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===z&&t._update(i)})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i._parse(n),(n||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t.trigger(_)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return d(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,o=r.format,a=r.decimals,s=n._culture(),l=n._format(o,s);a===z&&(a=l.decimals),e=n._parse(e,s),t=e!==z,t&&(e=parseFloat(p(e,a))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,o,s)),t?(e=""+e,-1!==e.indexOf("e")&&(e=p(+e,a)),e=e.replace(D,l[D])):e="",n.element.val(e).attr("aria-valuenow",e)
},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];t=i.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(R)}(window.kendo.jQuery),function(e){function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i}))}function n(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function i(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}var r=window.kendo,o=r.ui,a=e.proxy,s="kendoPopup",l="init",c=".kendoFilterMenu",d="Is equal to",u="Is not equal to",h={number:"numerictextbox",date:"datepicker"},p={string:"text",number:"number",date:"date"},f=r.isFunction,g=o.Widget,m='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',_='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',y='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=field#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',w=g.extend({init:function(t,n){var i,o,s,l,d=this,u="string";g.fn.init.call(d,t,n),i=d.operators=n.operators||{},t=d.element,n=d.options,n.appendToElement||(s=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"),s[0]||(s=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+c,a(d._click,d))),d.link=s||e(),d.dataSource=n.dataSource,d.field=n.field||t.attr(r.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return e+""},d.model&&d.model.fields&&(l=d.model.fields[d.field],l&&(u=l.type||"string",l.parse&&(d._parse=a(l.parse,l)))),n.values&&(u="enums"),d.type=u,i=i[u]||n.operators[u];for(o in i)break;d._defaultFilter=function(){return{field:d.field,operator:o||"eq",value:""}},d._refreshHandler=a(d.refresh,d),d.dataSource.bind("change",d._refreshHandler),n.appendToElement?d._init():d.refresh()},_init:function(){var t,n=this,i=n.options.ui,o=f(i);n.pane=n.options.pane,n.pane&&(n._isMobile=!0),o||(t=i||h[n.type]),n._isMobile?n._createMobileForm(t):n._createForm(t),n.form.on("submit"+c,a(n._submit,n)).on("reset"+c,a(n._reset,n)),o&&n.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),n.form.find("["+r.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datepicker]").removeClass("k-textbox"),n.refresh(),n.trigger(l,{field:n.field,container:n.form})},_createForm:function(t){var i=this,o=i.options,l=i.operators||{},d=i.type;l=l[d]||o.operators[d],i.form=e('<form class="k-filter-menu"/>').html(r.template("boolean"===d?m:v)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:l,type:d,role:t,values:n(o.values)})),o.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(s)):i.popup=i.form[s]({anchor:i.link,open:a(i._open,i),activate:a(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(s),i.form.on("keydown"+c,a(i._keydown,i))},_createMobileForm:function(t){var i=this,o=i.options,a=i.operators||{},s=i.type;a=a[s]||o.operators[s],i.form=e("<div />").html(r.template("boolean"===s?y:_)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:a,type:s,role:t,useRole:!r.support.input.date&&"date"===s||"number"===s,inputType:p[s],values:n(o.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-submit",function(e){i.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){i._closeForm(),e.preventDefault()})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&r.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;g.fn.destroy.call(e),e.form&&(r.unbind(e.form),r.destroy(e.form),e.form.unbind(c),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(c),e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,c=o.filterModel;for(t=0,n=a.length;n>t;t++)r=a[t],r.field==o.field?(c.set("logic",e.logic),i=c.filters[l],i||(c.filters.push({field:o.field}),i=c.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_merge:function(n){var i,r,o,a=this,s=n.logic||"and",l=n.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(t(c,a.field),l=e.grep(l,function(e){return""!==e.value&&null!=e.value}),r=0,o=l.length;o>r;r++)i=l[r],i.value=a._parse(i.value);return l.length&&(c.filters.length?(n.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?n:l[0])):(c.filters=l,c.logic=s)),c},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=i(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(s),t&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==r.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:d,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:d,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:d,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:d,neq:u}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}});o.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=c.directions[e].reverse):(i.origin[0]=e,i.position[0]=c.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(x).addClass(P),t.children("a").addClass(T).children(x).addClass(P),t.filter(":not([disabled])").addClass(G),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(Y).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+T).length||t.contents().filter(function(){return!(this.nodeName.match(b)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+T+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(S+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(M),t.filter(".k-last:not(:last-child)").removeClass(D),t.filter(":first-child").addClass(M),t.filter(":last-child").addClass(D)}var l,c=window.kendo,d=c.ui,u=c._activeElement,h=c.support.touch&&c.support.mobileOS,p="mousedown",f="click",g=e.extend,m=e.proxy,v=e.each,_=c.template,y=c.keys,w=d.Widget,b=/^(ul|a|div)$/i,k=".kendoMenu",x="img",C="open",S="k-menu",T="k-link",D="k-last",A="close",E="timer",M="k-first",P="k-image",I="select",z="zIndex",F="activate",R="deactivate",B="touchstart"+k+" MSPointerDown"+k+" pointerdown"+k,L=c.support.pointers,O=c.support.msPointers,H=O||L,N=L?"pointerover":O?"MSPointerOver":"mouseenter",V=L?"pointerout":O?"MSPointerOut":"mouseleave",U=h||H,W=e(document.documentElement),j="kendoPopup",G="k-state-default",q="k-state-hover",$="k-state-focused",Y="k-state-disabled",K=".k-menu",Q=".k-menu-group",X=Q+",.k-animation-container",J=":not(.k-list) > .k-item",Z=".k-item.k-state-disabled",et=".k-item:not(.k-state-disabled)",tt=".k-item:not(.k-state-disabled) > .k-link",nt=":not(.k-item.k-separator)",it=nt+":eq(0)",rt=nt+":last",ot="div:not(.k-animation-container,.k-list-container)",at={2:1,touch:1},st={content:_("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:_("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:_("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:_("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:_("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:_("<span class='#= arrowClass(item, group) #'></span>"),sprite:_("<span class='k-sprite #= spriteCssClass #'></span>"),empty:_("")},lt={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return T},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:c.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},ct=w.extend({init:function(t,n){var i=this;w.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=m(i._focusHandler,i),t.on(B,i._focusProxy).on(f+k,Z,!1).on(f+k,et,m(i._click,i)).on("keydown"+k,m(i._keydown,i)).on("focus"+k,m(i._focus,i)).on("focus"+k,".k-content",m(i._focus,i)).on(B+" "+p+k,".k-content",m(i._preventClose,i)).on("blur"+k,m(i._removeHoverItem,i)).on("blur"+k,"[tabindex]",m(i._checkActiveElement,i)).on(N+k,et,m(i._mouseenter,i)).on(V+k,et,m(i._mouseleave,i)).on(N+k+" "+V+k+" "+p+k+" "+f+k,tt,m(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=m(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=c.format("{0}_mn_active",t[0].id)),c.notify(i)},events:[C,A,F,R,I],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:t},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=g(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),w.fn.setOptions.call(this,e)},destroy:function(){var t=this;w.fn.destroy.call(t),t.element.off(k),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler),c.destroy(t.element)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return v(n.items,function(){n.group.append(this),a(this)}),a(t),s(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.before(this),a(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return v(n.items,function(){t.after(this),a(this),s(this)}),s(t),this},_insert:function(t,n,i){var r,a,s,l,c=this;return n&&n.length||(i=c.element),s=e.isPlainObject(t),l={firstLevel:i.hasClass(S),horizontal:i.hasClass(S+"-horizontal"),expanded:!0,length:i.children().length},n&&!i.length&&(i=e(ct.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?r=e(e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t).get():e(ct.renderItem({group:l,item:g(t,{index:n})})).get()})):(r="string"==typeof t&&"<"!=t[0]?c.element.find(t):e(t),a=r.find("> ul").addClass("k-menu-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i}},remove:function(e){var t,n,i,r;return e=this.element.find(e),t=this,n=e.parentsUntil(t.element,J),i=e.parent("ul:not(.k-menu)"),e.remove(),i&&!i.children(J).length&&(r=i.parent(".k-animation-container"),r.length?r.remove():i.remove()),n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,l=a.direction,d=c.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(l)&&(l=d?s?(l+" left").replace("default","bottom"):"left":s?(l+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(E)),r.data(E,setTimeout(function(){var u,h,p,f,m,v,_,y,w=r.find(".k-menu-group:first:hidden");w[0]&&o._triggerEvent({item:r[0],type:C})===!1&&(!w.find(".k-menu-group")[0]&&w.children(".k-item").length>1?(h=e(window).height(),p=function(){w.css({maxHeight:h-(w.outerHeight()-w.height())-c.getShadows(w).bottom,overflow:"auto"})},c.support.browser.msie&&7>=c.support.browser.version?setTimeout(p,0):p()):w.css({maxHeight:"",overflow:""}),r.data(z,r.css(z)),r.css(z,o.nextItemZIndex++),u=w.data(j),f=r.parent().hasClass(S),m=f&&s,v=i(l,f,d),_=a.animation.open.effects,y=_!==t?_:"slideIn:"+n(l,f),u?(u=w.data(j),u.options.origin=v.origin,u.options.position=v.position,u.options.animation.open.effects=y):u=w.kendoPopup({activate:function(){o._triggerEvent({item:this.wrapper.parent(),type:F})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),o._triggerEvent({item:this.wrapper.parent(),type:R})},origin:v.origin,position:v.position,collision:a.popupCollision!==t?a.popupCollision:m?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:g(!0,{effects:y},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o._triggerEvent({item:t[0],type:A})?e.preventDefault():(t.css(z,t.data(z)),t.removeData(z),U&&(t.removeClass(q),o._removeHoverItem()))}}).data(j),w.removeAttr("aria-hidden"),u.open())},o.options.hoverDelay))}),o},close:function(t,n){var i=this,r=i.element;return t=r.find(t),t.length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!n&&i._isRootItem(t)&&(i.clicked=!1),clearTimeout(t.data(E)),t.data(E,setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(j);e&&(e.close(),e.element.attr("aria-hidden",!0))},i.options.hoverDelay))}),i},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(G,n).toggleClass(Y,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(c.eventTarget(t)||t.target).closest(J),i=t.type==N||-1!==p.indexOf(t.type);n.parents("li."+Y).length||n.toggleClass(q,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,i=e(t?t.currentTarget:this._hoverItem()),o=n._findRootParent(i)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!r(o,c._activeElement())&&t&&!r(o,t.currentTarget))&&n.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass($)&&(e.removeClass($),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element,n=".k-menu-init div ul";t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+S).addClass(S+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!c.support.matchesSelector.call(this,n)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(Q).length;t.delegateTarget==i.parents(K)[0]&&(n.options.openOnClick&&!n.clicked||h||(L||O)&&t.originalEvent.pointerType in at&&n._isRootItem(i.closest(J))||!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||U)&&i.siblings().each(m(function(e,t){n.close(t,!0)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(Q).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||h||(L||O)&&n.originalEvent.pointerType in at||r(n.currentTarget,n.relatedTarget||n.target)||!a||r(n.currentTarget,c._activeElement())||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,l=e(c.eventTarget(n)),d=l[0]?l[0].nodeName.toUpperCase():"",u="INPUT"==d||"SELECT"==d||"BUTTON"==d||"LABEL"==d,h=l.closest("."+T),p=l.closest(J),f=h.attr("href"),g=l.attr("href"),m=e("<a href='#' />").attr("href"),v=!!f&&f!==m,_=v&&!!f.match(/^#/),y=!!g&&g!==m,w=s.openOnClick&&o&&a._isRootItem(p);if(s.openOnClick||!p.children(ot)[0]){if(p.hasClass(Y))return n.preventDefault(),t;if(n.handled||!a._triggerEvent({item:p[0],type:I})||u||n.preventDefault(),n.handled=!0,r=p.children(X),o=r.is(":visible"),s.closeOnClick&&(!v||_)&&(!r.length||w))return p.removeClass(q).css("height"),a._oldHoverItem=a._findRootParent(p),a.close(h.parentsUntil(a.element,J)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;v&&n.enterKey&&h[0].click(),(a._isRootItem(p)&&s.openOnClick||c.support.touch||(L||O)&&a._isRootItem(p.closest(J)))&&(v||u||y||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?A:C,(s.closeOnClick||i!=A)&&a[i](p))}},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=u();return r==i.wrapper[0]||e(r).is(":kendoFocusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass($),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,l=c.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==y.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==y.RIGHT)n=o[l?"_itemLeft":"_itemRight"](s,i,r);else if(a==y.LEFT)n=o[l?"_itemRight":"_itemLeft"](s,i,r);else if(a==y.DOWN)n=o._itemDown(s,i,r);else if(a==y.UP)n=o._itemUp(s,i,r);else if(a==y.ESC)n=o._itemEsc(s,i);else if(a==y.ENTER||a==y.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(s,o._findRootParent(s)));else if(a==y.TAB)return n=o._findRootParent(s),o._moveHover(s,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-menu-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-menu-group, div.k-animation-container").length>0:!1},_moveHover:function(t,n){var i=this,r=i._ariaId;t.length&&n.length&&t.removeClass($),n.length&&(n[0].id&&(r=n[0].id),n.addClass($),i._oldHoverItem=n,r&&(i.element.removeAttr("aria-activedescendant"),e("#"+r).removeAttr("id"),n.attr("id",r),i.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(K,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(S)},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(Y))return t?n?(o.open(e),i=e.find(".k-menu-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(it)):(i=e.nextAll(it),i.length||(i=e.prevAll(rt))),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(it))):(n=e.prevAll(it),n.length||(n=e.nextAll(rt))),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(it);else{if(!n||e.hasClass(Y))return;r.open(e),i=e.find(".k-menu-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prevAll(it),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e},_triggerEvent:function(e){var t=this;return t.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,i=e(c.eventTarget(t)).closest(J);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass($)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});g(ct,{renderItem:function(e){e=g({menu:{},group:{}},e);var t=st.empty,n=e.item;return st.item(g(e,{image:n.imageUrl?st.image:t,sprite:n.spriteCssClass?st.sprite:t,itemWrapper:st.itemWrapper,renderContent:ct.renderContent,arrow:n.items||n.content?st.arrow:t,subGroup:ct.renderGroup},lt))},renderGroup:function(e){return st.group(g({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=g({length:r},e.group);r>n;n++)t+=ct.renderItem(g(e,{group:o,item:g({index:n},i[n])}));return t}},e,lt))},renderContent:function(e){return st.content(g(e,lt))}}),l=ct.extend({init:function(t,n){var i=this;ct.fn.init.call(i,t,n),i.target=e(i.options.target),i._popup(),i._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[C,A,F,R,I],setOptions:function(t){var n=this;ct.fn.setOptions.call(n,t),n.target.off(n.showOn+k,n._showProxy),n.userEvents&&n.userEvents.destroy(),n.target=e(n.options.target),t.orientation&&n.popup.wrapper[0]&&n.popup.element.unwrap(),n._wire(),ct.fn.setOptions.call(this,t)},destroy:function(){var e=this;e.target.off(e.options.showOn+k),W.off(c.support.mousedown+k,e._closeProxy),e.userEvents&&e.userEvents.destroy(),ct.fn.destroy.call(e)},open:function(n,i){var o=this;return n=e(n)[0],r(o.element[0],e(n)[0])?ct.fn.open.call(o,n):o._triggerEvent({item:o.element,type:C})===!1&&(o.popup.visible()&&o.options.filter&&o.popup.close(!0),i!==t?(o.popup.wrapper.hide(),o.popup.open(n,i)):(o.popup.options.anchor=(n?n:o.popup.anchor)||o.target,o.popup.open()),W.off(o.popup.downEvent,o.popup._mousedownProxy),W.on(c.support.mousedown+k,o._closeProxy)),o},close:function(){var t=this;r(t.element[0],e(arguments[0])[0])?ct.fn.close.call(t,arguments[0]):t.popup.visible()&&t._triggerEvent({item:t.element,type:A})===!1&&(t.popup.close(),W.off(c.support.mousedown+k,t._closeProxy),t.unbind(I,t._closeTimeoutProxy))},_showHandler:function(e){var t,n=e,i=this,o=i.options;e.event&&(n=e.event,n.pageX=e.x.location,n.pageY=e.y.location),r(i.element[0],e.relatedTarget||e.target)||(i._eventOrigin=n,n.preventDefault(),n.stopImmediatePropagation(),i.element.find("."+$).removeClass($),(o.filter&&c.support.matchesSelector.call(n.currentTarget,o.filter)||!o.filter)&&(o.alignToAnchor?i.open(n.currentTarget):(i.popup.options.anchor=n.currentTarget,i._targetChild?(t=i.target.offset(),i.open(n.pageX-t.left,n.pageY-t.top)):i.open(n.pageX,n.pageY))))},_closeHandler:function(t){var n=this,i=e(t.relatedTarget||t.target),o=i.closest(n.target.selector)[0]==n.target[0],a=i.closest(et).children(X),s=r(n.element[0],i[0]);n._eventOrigin=t,!n.popup.visible()||(3===t.which||!o)&&o||(!n.options.closeOnClick||h||(L||O)&&t.originalEvent.pointerType in at||a[0]||!s)&&s||(s?(this.unbind(I,this._closeTimeoutProxy),n.bind(I,n._closeTimeoutProxy)):n.close())
},_wire:function(){var e=this,t=e.options,n=e.target;e._showProxy=m(e._showHandler,e),e._closeProxy=m(e._closeHandler,e),e._closeTimeoutProxy=m(e.close,e),n[0]&&(c.support.mobileOS&&"contextmenu"==t.showOn?(e.userEvents=new c.UserEvents(n,{filter:t.filter,allowSelection:!1}),n.on(t.showOn+k,!1),e.userEvents.bind("hold",e._showProxy)):t.filter?n.on(t.showOn+k,t.filter,e._showProxy):n.on(t.showOn+k,e._showProxy))},_triggerEvent:function(n){var i=this,r=e(i.popup.options.anchor)[0],o=i._eventOrigin;return i._eventOrigin=t,i.trigger(n.type,g({type:n.type,item:n.item||this.element[0],target:r},o?{event:o}:{}))},_popup:function(){var e=this;e._triggerProxy=m(e._triggerEvent,e),e.popup=e.element.addClass("k-context-menu").kendoPopup({anchor:e.target||"body",copyAnchorStyles:e.options.copyAnchorStyles,collision:e.options.popupCollision||"fit",animation:e.options.animation,activate:e._triggerProxy,deactivate:e._triggerProxy}).data("kendoPopup"),e._targetChild=r(e.target[0],e.popup.element[0])}}),d.plugin(ct),d.plugin(l)}(window.kendo.jQuery),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}function i(e,t){var n,i,r,o={};for(n=0,i=e.length;i>n;n++)r=e[n],o[r[t]]=r;return o}function r(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(r(e[t].columns)):n.push(e[t]);return n}var o=window.kendo,a=o.ui,s=e.proxy,l=e.extend,c=e.grep,d=e.map,u=e.inArray,h="k-state-selected",p="asc",f="desc",g="change",m="init",v="select",_="kendoPopup",y="kendoFilterMenu",w="kendoMenu",b=".kendoColumnMenu",k=a.Widget,x=k.extend({init:function(t,n){var i,r=this;k.fn.init.call(r,t,n),t=r.element,n=r.options,r.owner=n.owner,r.dataSource=n.dataSource,r.field=t.attr(o.attr("field")),r.title=t.attr(o.attr("title")),i=t.find(".k-header-column-menu"),i[0]||(i=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),r.link=i.attr("tabindex",-1).on("click"+b,s(r._click,r)),r.wrapper=e('<div class="k-column-menu"/>')},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e._angularItems("compile"),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger(m,{field:e.field,container:e.wrapper})},events:[m],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(o.template(C)({ns:o.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper[_]({anchor:e.link,open:s(e._open,e),activate:s(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data(_),e.menu=e.wrapper.children()[w]({orientation:"vertical",closeOnClick:!1}).data(w)},_createMobileMenu:function(){var e=this,t=e.options,n=o.template(S)({ns:o.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(n),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new T(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var n=this;n.angular(t,function(){var t=n.wrapper.find(".k-columns-item input["+o.attr("field")+"]").map(function(){return e(this).closest("li")}),i=d(n._ownerColumns(),function(e){return{column:e._originalObject}});return{elements:t,data:i}})},destroy:function(){var e=this;e._angularItems("cleanup"),k.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(g,e._refreshHandler),e.options.columns&&e.owner&&e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e.menu&&(e.menu.element.off(b),e.menu.destroy()),e.wrapper.off(b),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(b),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+b))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(_).close()}),t.popup.element.on("keydown"+b,function(e){e.keyCode==o.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=r(this.owner.columns),t=c(e,function(e){var t=!0,i=n(e.title||"");return(e.menu===!1||!e.field&&!i.length)&&(t=!1),t});return d(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:u(t,e),locked:!!t.locked,_originalObject:t}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t._refreshHandler=s(t.refresh,t),t.dataSource.bind(g,t._refreshHandler),t.menu.bind(v,function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=p:r.hasClass("k-sort-desc")&&(i=f),i&&(r.parent().find(".k-sort-"+(i==p?f:p)).removeClass(h),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=null===a.compare?t:a.compare,l=o.dataSource,c=l.sort()||[];if(e.hasClass(h)&&a&&a.allowUnsort!==!1?(e.removeClass(h),n=t):e.addClass(h),a===!0||"single"===a.mode)c=[{field:o.field,dir:n,compare:s}];else{for(i=0,r=c.length;r>i;i++)if(c[i].field===o.field){c.splice(i,1);break}c.push({field:o.field,dir:n,compare:s})}l.sort(c)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=s(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t.menu.bind(v,function(n){var i,a,s,l=e(n.item),d=r(t.owner.columns);t._isMobile&&n.preventDefault(),l.parent().closest("li.k-columns-item")[0]&&(i=l.find(":checkbox"),i.attr("disabled")||(s=i.attr(o.attr("field")),a=c(d,function(e){return e.field==s||e.title==s})[0],a.hidden===!0?t.owner.showColumn(a):t.owner.hideColumn(a)))}))},_updateColumnsMenu:function(){var e,t,n,i,r,a,s=o.attr("field"),l=o.attr("locked"),h=c(this._ownerColumns(),function(e){return!e.hidden}),p=c(h,function(e){return e.originalField}),f=c(p,function(e){return e.locked===!0}).length,g=c(p,function(e){return e.locked!==!0}).length;for(h=d(h,function(e){return e.field}),a=this.wrapper.find(".k-columns-item input["+s+"]").prop("disabled",!1).prop("checked",!1),e=0,t=a.length;t>e;e++)n=a.eq(e),r="true"===n.attr(l),i=!1,u(n.attr(s),h)>-1&&(i=!0,n.prop("checked",i)),i&&(1==f&&r&&n.prop("disabled",!0),1!=g||r||n.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,n,r,a=o.attr("field"),s=o.attr("locked"),l=i(this._ownerColumns(),"field"),c=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=c.length;t>e;e++)n=c.eq(e),r=l[n.attr(a)],r&&n.attr(s,r.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n=t.options;n.filterable!==!1&&(t.filterMenu=t.wrapper.find(".k-filterable")[y](l(!0,{},{appendToElement:!0,dataSource:n.dataSource,values:n.values,field:t.field},n.filterable)).data(y),t._isMobile&&t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind(v,function(n){var i=e(n.item);i.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):i.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e,t,n,i,r=this.field,o=this.owner.columns,a=c(o,function(e){return e.field==r||e.title==r})[0];a&&(e=a.locked===!0,t=c(o,function(t){return!t.hidden&&(t.locked&&e||!t.locked&&!e)}).length,n=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),i=this.wrapper.find(".k-unlock").removeClass("k-state-disabled"),(e||1==t)&&n.addClass("k-state-disabled"),e&&1!=t||i.addClass("k-state-disabled"),this._updateColumnsLockedState())},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(h),t=0,n=r.length;n>t;t++)e=r[t],o==e.field&&i.wrapper.find(".k-sort-"+e.dir).addClass(h)}}),C='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',S='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',T=k.extend({init:function(e,t){k.fn.init.call(this,e,t),this.element.on("click"+b,"li:not(.k-separator):not(.k-state-disabled)","_click")},events:[v],_click:function(e){e.preventDefault(),this.trigger(v,{item:e.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){k.fn.destroy.call(this),this.element.off(b)}});a.plugin(x)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="dir",a="asc",s="single",l="field",c="desc",d=".kendoColumnSorter",u=".k-link",h="aria-sort",p=e.proxy,f=r.extend({init:function(e,t){var n,i=this;r.fn.init.call(i,e,t),i._refreshHandler=p(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),n=i.element.find(u),n[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(u)),i.link=n,i.element.on("click"+d,p(i._click,i))},options:{name:"ColumnSorter",mode:s,allowUnsort:!0,compare:null,filter:""},destroy:function(){var e=this;r.fn.destroy.call(e),e.element.off(d),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(){var t,i,r,s,d=this,u=d.dataSource.sort()||[],p=d.element,f=p.attr(n.attr(l));for(p.removeAttr(n.attr(o)),p.removeAttr(h),t=0,i=u.length;i>t;t++)r=u[t],f==r.field&&p.attr(n.attr(o),r.dir);s=p.attr(n.attr(o)),p.find(".k-i-arrow-n,.k-i-arrow-s").remove(),s===a?(e('<span class="k-icon k-i-arrow-n" />').appendTo(d.link),p.attr(h,"ascending")):s===c&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(d.link),p.attr(h,"descending"))},_click:function(e){var i,r,d=this,u=d.element,h=u.attr(n.attr(l)),p=u.attr(n.attr(o)),f=d.options,g=null===d.options.compare?t:d.options.compare,m=d.dataSource.sort()||[];if(e.preventDefault(),!f.filter||u.is(f.filter)){if(p=p===a?c:p===c&&f.allowUnsort?t:a,f.mode===s)m=[{field:h,dir:p,compare:g}];else if("multiple"===f.mode){for(i=0,r=m.length;r>i;i++)if(m[i].field===h){m.splice(i,1);break}m.push({field:h,dir:p,compare:g})}this.dataSource.sort(m)}}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return t=null!=t?t:"",t.type||e.type(t)||"string"}function i(t){t.find(":input:not(:button, ["+s.attr("role")+"=upload], ["+s.attr("skip")+"], [type=file]), select").each(function(){var t=s.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})}function r(e){var t,i,r=(e.model.fields||e.model)[e.field],o=n(r),a=r?r.validation:{},l=s.attr("type"),c=s.attr("bind"),d={name:e.field};for(t in a)i=a[t],f(t,_)>=0?d[l]=t:h(i)||(d[t]=p(i)?i.value||t:i),d[s.attr(t+"-msg")]=i.message;return f(o,_)>=0&&(d[l]=o),d[c]=("boolean"===o?"checked:":"value:")+e.field,d}function o(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function a(e,t){var n,i,r=e?e.validation||{}:{};for(n in r)i=r[n],p(i)&&i.value&&(i=i.value),h(i)&&(t[n]=i)}var s=window.kendo,l=s.ui,c=l.Widget,d=e.extend,u=s.support.browser.msie&&9>s.support.browser.version,h=s.isFunction,p=e.isPlainObject,f=e.inArray,g=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,m='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',v="change",_=["url","email","number","date","boolean"],y={number:function(t,n){var i=r(n);e('<input type="text"/>').attr(i).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var i=r(n),o=n.format;o&&(o=s._extractFormat(o)),i[s.attr("format")]=o,e('<input type="text"/>').attr(i).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var i=r(n);e('<input type="text" class="k-input k-textbox"/>').attr(i).appendTo(t)},"boolean":function(t,n){var i=r(n);e('<input type="checkbox" />').attr(i).appendTo(t)},values:function(t,n){var i=r(n);e("<select "+s.attr("text-field")+'="text"'+s.attr("value-field")+'="value"'+s.attr("source")+"='"+s.stringify(o(n.values)).replace(/\'/g,"&apos;")+"'"+s.attr("role")+'="dropdownlist"/>').attr(i).appendTo(t),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},w=c.extend({init:function(t,n){var i=this;n.target&&(n.$angular=n.target.options.$angular),c.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[v],options:{name:"Editable",editors:y,clearContainer:!0,errorTemplate:m},editor:function(e,t){var i=this,r=i.options.editors,o=p(e),a=o?e.field:e,l=i.options.model||{},c=o&&e.values,u=c?"values":n(t),h=o&&e.editor,f=h?e.editor:r[u],m=i.element.find("["+s.attr("container-for")+"="+a.replace(g,"\\$1")+"]");f=f?f:r.string,h&&"string"==typeof e.editor&&(f=function(t){t.append(e.editor)}),m=m.length?m:i.element,f(m,d(!0,{},o?e:{field:a},{model:l}))},_validate:function(t){var n,i=this,r=t.value,o=i._validationEventInProgress,a={},l=s.attr("bind"),c=t.field.replace(g,"\\$1"),d="checked:"+c,u="value:"+c;a[t.field]=t.value,n=e(":input["+l+'*="'+u+'"],:input['+l+'*="'+d+'"]',i.element).filter("["+s.attr("validate")+"!='false']"),n.length>1&&(n=n.filter(function(){var t=e(this),n=t.attr(l).split(","),i=f(u,n)>=0||f(d,n)>=0;return i&&(!t.is(":radio")||t.val()==r)}));try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!o&&i.trigger(v,{values:a}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),c.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),s.unbind(e.element),e.validatable&&e.validatable.destroy(),s.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var n,r,o,l,c,d,h,f,g=this,m=g.options.fields||[],v=g.options.clearContainer?g.element.empty():g.element,_=g.options.model||{},y={};for(e.isArray(m)||(m=[m]),n=0,r=m.length;r>n;n++)o=m[n],l=p(o),c=l?o.field:o,d=(_.fields||_)[c],a(d,y),g.editor(o,d);if(g.options.target&&g.angular("compile",function(){return{elements:v,data:[{dataItem:_}]}}),!r){h=_.fields||_;for(c in h)a(h[c],y)}i(v),g.validatable&&g.validatable.destroy(),s.bind(v,g.options.model),g.options.model.unbind("set",g._validateProxy),g.options.model.bind("set",g._validateProxy),g.validatable=new s.ui.Validator(v,{validateOnBlur:!1,errorTemplate:g.options.errorTemplate||t,rules:y}),f=v.find(":kendoFocusable").eq(0).focus(),u&&f.focus()}});l.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;if(!o.isMaximized&&!o.isMinimized)return n.restoreOptions={width:r.width,height:r.height},i.children(x).hide().end().children(b).find(G).parent().hide().eq(0).before(Z.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.children(b).find(Y).parent().hide():n.wrapper.children(b).find(Y).parent().show(),n}}function o(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function a(e){var t=this;t.owner=e,t._draggable=new d(e.wrapper,{filter:">"+x,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)}),t._draggable.userEvents.bind("press",p(t.addOverlay,t)),t._draggable.userEvents.bind("release",p(t.removeOverlay,t))}function s(e,t){var n=this;n.owner=e,n._draggable=new d(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)}),n._draggable.userEvents.stopPropagation=!1}var l=window.kendo,c=l.ui.Widget,d=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,p=e.proxy,f=e.extend,g=e.each,m=l.template,v="body",_=".kendoWindow",y=".k-window",w=".k-window-title",b=w+"bar",k=".k-window-content",x=".k-resize-handle",C=".k-overlay",S="k-content-frame",T="k-loading",D="k-state-hover",A="k-state-focused",E="k-window-maximized",M=":visible",P="hidden",I="cursor",z="open",F="activate",R="deactivate",B="close",L="refresh",O="resize",H="resizeEnd",N="dragstart",V="dragend",U="error",W="overflow",j="zIndex",G=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",q=".k-i-pin",$=".k-i-unpin",Y=q+","+$,K=".k-window-titlebar .k-window-action",Q=".k-window-titlebar .k-i-refresh",X=l.isLocalUrl,J=c.extend({init:function(i,r){var a,s,d,h,f,g,m,v=this,x={},C=!1,S=r&&r.actions&&!r.actions.length;c.fn.init.call(v,i,r),r=v.options,h=r.position,i=v.element,f=r.content,S&&(r.actions=[]),v.appendTo=e(r.appendTo),v._animations(),f&&!u(f)&&(f=r.content={url:f}),i.find("script").filter(o).remove(),i.parent().is(v.appendTo)||h.top!==t&&h.left!==t||(i.is(M)?(x=i.offset(),C=!0):(s=i.css("visibility"),d=i.css("display"),i.css({visibility:P,display:""}),x=i.offset(),i.css({visibility:s,display:d})),h.top===t&&(h.top=x.top),h.left===t&&(h.left=x.left)),n(r.visible)&&null!==r.visible||(r.visible=i.is(M)),a=v.wrapper=i.closest(y),i.is(".k-content")&&a[0]||(i.addClass("k-window-content k-content"),v._createWindow(i,r),a=v.wrapper=i.closest(y),v._dimensions()),v._position(),r.pinned&&v.pin(!0),f&&v.refresh(f),r.visible&&v.toFront(),g=a.children(k),v._tabindex(g),r.visible&&r.modal&&v._overlay(a.is(M)).css({opacity:.5}),a.on("mouseenter"+_,K,p(v._buttonEnter,v)).on("mouseleave"+_,K,p(v._buttonLeave,v)).on("click"+_,"> "+K,p(v._windowActionHandler,v)),g.on("keydown"+_,p(v._keydown,v)).on("focus"+_,p(v._focus,v)).on("blur"+_,p(v._blur,v)),this._resizable(),this._draggable(),m=i.attr("id"),m&&(m+="_wnd_title",a.children(b).children(w).attr("id",m),g.attr({role:"dialog","aria-labelledby":m})),a.add(a.children(".k-resize-handle,"+b)).on("mousedown"+_,p(v.toFront,v)),v.touchScroller=l.touchScroller(i),v._resizeHandler=p(v._onDocumentResize,v),v._marker=l.guid().substring(0,8),e(window).on("resize"+_+v._marker,v._resizeHandler),r.visible&&(v.trigger(z),v.trigger(F)),l.notify(v)},_buttonEnter:function(t){e(t.currentTarget).addClass(D)},_buttonLeave:function(t){e(t.currentTarget).removeClass(D)},_focus:function(){this.wrapper.addClass(A)},_blur:function(){this.wrapper.removeClass(A)},_dimensions:function(){var e,t,n=this.wrapper,r=this.options,o=r.width,a=r.height,s=r.maxHeight,l=["minWidth","minHeight","maxWidth","maxHeight"];for(this.title(r.title),e=0;l.length>e;e++)t=r[l[e]],t&&1/0!=t&&n.css(l[e],t);s&&1/0!=s&&this.element.css("maxHeight",s),o&&n.width((""+o).indexOf("%")>0?o:i(o,r.minWidth,r.maxWidth)),a&&n.height((""+a).indexOf("%")>0?a:i(a,r.minHeight,r.maxHeight)),r.visible||n.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=""+t.top),0===t.left&&(t.left=""+t.left),e.css({top:t.top||"",left:t.left||""})},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+_).children(x).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+_,b,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),g("n e s w se sw ne nw".split(" "),function(e,t){n.append(Z.resizeHandle(t))}),this.resizing=new a(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new s(this,e.dragHandle||b))},_actions:function(){var t=this.options.actions,n=this.wrapper.children(b),i=n.find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),i.html(l.render(Z.action,t))},setOptions:function(e){c.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions()},events:[z,F,R,B,L,O,H,N,V,U],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a,s,c=this,d=c.options,u=l.keys,h=e.keyCode,p=c.wrapper,f=10,g=c.options.isMaximized;e.target!=e.currentTarget||c._closing||(h==u.ESC&&c._closable()&&c._close(!1),!d.draggable||e.ctrlKey||g||(t=l.getOffset(p),h==u.UP?n=p.css("top",t.top-f):h==u.DOWN?n=p.css("top",t.top+f):h==u.LEFT?n=p.css("left",t.left-f):h==u.RIGHT&&(n=p.css("left",t.left+f))),d.resizable&&e.ctrlKey&&!g&&(h==u.UP?(n=!0,o=p.height()-f):h==u.DOWN&&(n=!0,o=p.height()+f),h==u.LEFT?(n=!0,r=p.width()-f):h==u.RIGHT&&(n=!0,r=p.width()+f),n&&(a=i(r,d.minWidth,d.maxWidth),s=i(o,d.minHeight,d.maxHeight),isNaN(a)||(p.width(a),c.options.width=a+"px"),isNaN(s)||(p.height(s),c.options.height=s+"px"),c.resize())),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(C),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(j,parseInt(i.css(j),10)-1),n},_actionForIcon:function(e){var t=/\bk-i-\w+\b/.exec(e[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[t]},_windowActionHandler:function(n){var i,r;if(!this._closing)return i=e(n.target).closest(".k-window-action").find(".k-icon"),r=this._actionForIcon(i),r?(n.preventDefault(),this[r](),!1):t},_modals:function(){var t=this,n=e(y).filter(function(){var n=e(this),i=t._object(n),r=i&&i.options;return r&&r.modal&&r.visible&&n.is(M)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")});return t=null,n},_object:function(e){var t=e.children(k);return t.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t,n,i=this,r=i.options.position,o=i.wrapper,a=e(window),s=0,l=0;return i.options.isMaximized?i:(i.options.pinned||(s=a.scrollTop(),l=a.scrollLeft()),n=l+Math.max(0,(a.width()-o.width())/2),t=s+Math.max(0,(a.height()-o.height()-parseInt(o.css("paddingTop"),10))/2),o.css({left:n,top:t}),r.top=t,r.left=n,i)},title:function(e){var t,n=this,i=n.wrapper,r=n.options,o=i.children(b),a=o.children(w);return arguments.length?(e===!1?(i.addClass("k-window-titleless"),o.remove()):(o.length?a.html(e):(i.prepend(Z.titlebar(r)),n._actions(),o=i.children(b)),t=o.outerHeight(),i.css("padding-top",t),o.css("margin-top",-t)),n.options.title=e,n):a.text()},content:function(e,t){var i=this.wrapper.children(k),r=i.children(".km-scroll-container");return i=r[0]?r:i,n(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),l.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){var e,n=[];for(e=i.length;--e>=0;)n.push({dataItem:t});return{elements:i.children(),data:n}}),this):i.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,s=r.children(k);return i.trigger(z)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&(t=i._overlay(!1),t.kendoStop(!0,!0),a.duration&&l.effects.Fade?(n=l.fx(t).fadeIn(),n.duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(M)||(s.css(W,P),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:p(this._activate,this)}))),o.isMaximized&&(i._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P)),i},_activate:function(){this.options.autoFocus&&this.element.focus(),this.trigger(F),this.wrapper.children(k).css(W,"")},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,s=o.modal?this._overlay(!0):e(t),c=o.animation.close;a?!n&&c.duration&&l.effects.Fade?(i=l.fx(s).fadeOut(),i.duration(c.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close;if(i.is(M)&&!n.trigger(B,{userTriggered:!t})){if(n._closing)return;n._closing=!0,r.visible=!1,e(y).each(function(t,n){var r=e(n).children(k);n!=i&&r.find("> ."+S).length>0&&r.children(C).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:a.reverse===!0,duration:a.duration,complete:p(this._deactivate,this)})}n.options.isMaximized&&(e("html, body").css(W,""),n._documentScrollTop&&n._documentScrollTop>0&&e(document).scrollTop(n._documentScrollTop))},_deactivate:function(){this.wrapper.hide().css("opacity",""),this.trigger(R);var e=this._object(this._modals().last());e&&e.toFront()},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(K+","+K+" .k-icon,:input,a")},_shouldFocus:function(t){var n=h(),i=this.element;return!(!this.options.autoFocus||e(n).is(i)||this._actionable(t)||i.find(n).length&&i.find(t).length)},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(j),l=s,c=t&&t.target||null;return e(y).each(function(t,n){var i=e(n),r=i.css(j),o=i.children(k);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+S).length>0&&o.append(Z.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(j,s+2),r.element.find("> .k-overlay").remove(),r._shouldFocus(c)&&(r.element.focus(),n=e(window).scrollTop(),i=parseInt(o.position().top,10),i>0&&n>i&&(n>0?e(window).scrollTop(i):o.css("top",n))),o=null,r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions;return n.isMaximized||n.isMinimized?(i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).removeClass(E).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(G).parent().show().end().end().find(Y).parent().show(),t.options.width=r.width,t.options.height=r.height,e("html, body").css(W,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.resize(),t):t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position();f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}).addClass(E),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(W,P),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.children(b).find(q).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.children(b).find($).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t,n,i=this,r=i.wrapper,o=e(window);i.options.isMaximized&&(t=o.width(),n=o.height()-parseInt(r.css("padding-top"),10),r.css({width:t,height:n}),i.options.width=t,i.options.height=n,i.resize())},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return u(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,o=t.url,o?(n(r)||(r=!X(o)),r?(i=l.find("."+S)[0],i?i.src=o||i.src:l.html(Z.contentFrame(f({},s,{content:t}))),l.find("."+S).unbind("load"+_).on("load"+_,p(this._triggerRefresh,this))):a._ajaxRequest(t)):(t.template&&a.content(m(t.template)({})),a.trigger(L)),l.toggleClass("k-window-iframecontent",!!r),a},_triggerRefresh:function(){this.trigger(L)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(Q).removeClass(T)
},_ajaxError:function(e,t){this.trigger(U,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var n=t;e&&(n=m(e)(t||{})),this.content(n,t),this.element.prop("scrollTop",0),this.trigger(L)}},_showLoading:function(){this.wrapper.find(Q).addClass(T)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(p(this._showLoading,this),100),e.ajax(f({type:"GET",dataType:"html",cache:!1,error:p(this._ajaxError,this),complete:p(this._ajaxComplete,this),success:p(this._ajaxSuccess(t.template),this)},t))},destroy:function(){var n=this;n.resizing&&n.resizing.destroy(),n.dragging&&n.dragging.destroy(),n.wrapper.off(_).children(k).off(_).end().find(".k-resize-handle,.k-window-titlebar").off(_),e(window).off("resize"+_+n._marker),clearTimeout(n._loadingIconTimeout),c.fn.destroy.call(n),n.unbind(t),l.destroy(n.wrapper),n._removeOverlay(!0),n.wrapper.empty().remove(),n.wrapper=n.appendTo=n.element=e()},_createWindow:function(){var t,n,i=this.element,r=this.options,o=l.support.isRtl(i);r.scrollable===!1&&i.attr("style","overflow:hidden;"),n=e(Z.wrapper(r)),t=i.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",o).appendTo(this.appendTo).append(i).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(o?"left":"right",n.find(".k-window-actions").outerWidth()+10),i.css("visibility","").show(),i.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),n=i=null}}),Z={wrapper:m("<div class='k-widget k-window' />"),action:m("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:m("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:m("<iframe frameborder='0' title='#= title #' class='"+S+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:m("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={addOverlay:function(){this.owner.wrapper.append(Z.overlay)},removeOverlay:function(){this.owner.wrapper.find(C).remove()},dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(r.css("padding-top"),10),n.initialPosition=l.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=l.getOffset(i.appendTo,"position"),r.children(x).not(t.currentTarget).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,c=s.options,d=a.resizeDirection,u=a.containerOffset,h=a.initialPosition,p=a.initialSize,f=Math.max(e.x.location,u.left),g=Math.max(e.y.location,u.top);d.indexOf("e")>=0?(t=f-h.left,l.width(i(t,c.minWidth,c.maxWidth))):d.indexOf("w")>=0&&(o=h.left+p.width,t=i(o-f,c.minWidth,c.maxWidth),l.css({left:o-t-u.left,width:t})),d.indexOf("s")>=0?(n=g-h.top-a.elementPadding,l.height(i(n,c.minHeight,c.maxHeight))):d.indexOf("n")>=0&&(r=h.top+p.height,n=i(r-g,c.minHeight,c.maxHeight),l.css({top:r-n-u.top,height:n})),t&&(s.options.width=t+"px"),n&&(s.options.height=n+"px"),s.resize()},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.children(x).not(t.currentTarget).show(),e(v).css(I,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialPosition).css(n.initialSize),i.trigger(H),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=l.getOffset(n.appendTo);n.trigger(N),n.initialWindowPosition=l.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append(Z.overlay).children(x).hide(),e(v).css(I,t.currentTarget.css(I))},drag:function(t){var n=this.owner,i=n.options.position,r=Math.max(t.y.client-n.startPosition.top,n.minTopPosition),o=Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),a={left:o,top:r};e(n.wrapper).css(a),i.top=r,i.left=o},_finishDrag:function(){var t=this.owner;t.wrapper.children(x).toggle(!t.options.isMinimized).end().find(C).remove(),e(v).css(I,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(y).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(V),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(J)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(k("popover")),r=s.roles;for(t=0,n=i.length;n>t;t++)o.initWidget(i[t],{},r)}function i(e){o.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){o.initWidget(e(this),{},s.roles)})}var o=window.kendo,a=o.mobile,s=a.ui,l=o.attr,c=s.Widget,d=o.ViewClone,u="init",h='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',p="beforeShow",f="show",g="afterShow",m="beforeHide",v="transitionEnd",_="transitionStart",y="hide",w="destroy",b=o.attrValue,k=o.roleSelector,x=o.directiveSelector,C=o.compileMobileDirective,S=c.extend({init:function(t,n){c.fn.init.call(this,t,n),this.params={},e.extend(this,n),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[u,p,f,g,m,y,w,_,v],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){t===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(w),c.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),o.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return this.trigger(p,{view:this})?!1:!0},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(u,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(f,{view:this}),o.resize(e)},showEnd:function(){this.trigger(g,{view:this}),this._padIfNativeScrolling()},hideStart:function(){this.trigger(m,{view:this})},hideEnd:function(){var e=this;e.element.hide(),e.trigger(y,{view:e}),e.layout&&e.layout.trigger(y,{view:e,layout:e.layout})},beforeTransition:function(e){this.trigger(_,{type:e})},afterTransition:function(e){this.trigger(v,{type:e})},_padIfNativeScrolling:function(){if(a.appLevelNativeScrolling()){var e=o.support.mobileOS&&o.support.mobileOS.android,t=a.application.os.android||a.application.skin().indexOf("android")>-1,n=e||t?"footer":"header",i=e||t?"header":"footer";this.content.css({paddingTop:this[n].height(),paddingBottom:this[i].height()})}},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},clone:function(){return new d(this)},_scroller:function(){var t=this;a.appLevelNativeScrolling()||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller(e.extend(t.options.scroller,{zoom:t.options.zoom,useNative:t.options.useNativeScrolling})),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),o.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=o.getter(i)(e.options.modelScope)),e.model=i,n(t),e.element.css("display",""),e.options.initWidgets&&(i?o.bind(t,i,s,o.ui,o.dataviz.ui):a.init(t.children())),e.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=b(e,"url")||"#"+t,"#"==this.id&&(this.id=o.guid(),e.attr("id",this.id))},_layout:function(){var e=k("content"),t=this.element;t.addClass("km-view"),this.header=t.children(k("header")).addClass("km-header"),this.footer=t.children(k("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(k("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e(h).appendTo(this.element)},_invokeNgController:function(){var e,t,n=this.element;this.options.$angular&&(e=n.controller(),t=n.scope(),e&&t.$apply(function(){n.injector().invoke(e.constructor,null,{$scope:t})}))}}),T=c.extend({init:function(e,t){c.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),n(e),this.options.$angular||o.mobile.init(this.element.children()),this.element.detach(),this.trigger(u,{layout:this})},_locate:function(e){return this.options.$angular?x(e):k(e)},options:{name:"Layout",id:null,platform:null},events:[u,f,y],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(f,{layout:t,view:e}),t.currentView=e}}),D=o.Observable,A=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,E="loadStart",M="loadComplete",P="showStart",I="sameViewRequested",z="viewShow",F="viewTypeDetermined",R="after",B=D.extend({init:function(t){var n,i,a,s,l=this;if(D.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),a=l.container,n=l._hideViews(a),l.rootView=n.first(),!l.rootView[0]&&t.rootNeeded)throw i=a[0]==o.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);l.layouts={},l.viewContainer=new o.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger(z,{view:e.view})}),l.viewContainer.bind(R,function(){l.trigger(R)}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(a),s=a.children(l._locate("modalview drawer")),l.$angular?s.each(function(t,n){C(e(n),function(){})}):r(s),this.bind(this.events,t)},events:[P,R,z,E,M,I,F],destroy:function(){o.destroy(this.container);for(var e in this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,n){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(I),!1;this.trigger(P);var i=this,r=function(n){return i.viewContainer.show(n,t,e)},a=i._findViewElement(e),s=o.widgetInstance(a);return i.url=e,i.params=n,s&&s.reload&&(s.purge(),a=[]),this.trigger(F,{remote:0===a.length,url:e}),a[0]?(s||(s=i._createView(a)),r(s)):(this.serverNavigation?location.href=e:i._loadView(e,r),!0)},append:function(e,t){var n,i,o,a=this.sandbox,s=(t||"").split("?")[0],c=this.container;return A.test(e)&&(e=RegExp.$1),a[0].innerHTML=e,c.append(a.children("script, style")),n=this._hideViews(a),o=n.first(),o.length||(n=o=a.wrapInner("<div data-role=view />").children()),s&&o.hide().attr(l("url"),s),this._setupLayouts(a),i=a.children(this._locate("modalview drawer")),c.append(a.children(this._locate("layout modalview drawer")).add(n)),r(i),this._createView(o)},_locate:function(e){return this.$angular?x(e):k(e)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?(t=this.container.children("["+l("url")+"='"+n+"']"),t[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){if(this.$angular){var t=this;return C(e,function(e){e.viewOptions={defaultTransition:t.transition,loader:t.loader,container:t.container,getLayout:t.getLayoutProxy}})}return o.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:b(e,"reload")},s.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,n){this._xhr&&this._xhr.abort(),this.trigger(E),this._xhr=e.get(o.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",n,t))},_xhrComplete:function(e,t,n){var i=!0;"object"==typeof n&&(i=0===n.status&&n.responseText.length>0,n=n.responseText),this.trigger(M),i&&e(this.append(n,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var n,i=this;t.children(i._locate("layout")).each(function(){n=i.$angular?C(e(this)):o.initWidget(e(this),{},s.roles);var t=n.options.platform;t&&t!==a.application.os.name?n.destroy():i.layouts[n.options.id]=n})}});o.mobile.ViewEngine=B,s.plugin(S),s.plugin(T)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r.captureEvents=!1,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),e.options.loading!==!1&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.captureEvents&&e.preventDefault()}var t,n=this;for(n.captureEvents=!1,t=0;r.length>t;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.roleSelector,o=i.ui,a=o.Widget,s=i.ViewEngine,l=o.View,c=i.ui.Loader,d="external",u="href",h="#!",p="navigate",f="viewShow",g="sameViewRequested",m=n.support.mobileOS,v=m.ios&&!m.appMode&&m.flatVersion>=700,_=/popover|actionsheet|modalview|drawer/,y="#:back",w=n.attrValue,b="button backbutton detailbutton listview-link",k="tab",x=a.extend({init:function(e,t){var i=this;a.fn.init.call(i,e,t),t=i.options,e=i.element,e.addClass("km-pane"),i.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,n){var r=i.transition;return i.transition=null,v&&n&&(r="none"),i.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if(e===y){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.loader=new c(e,{loading:i.options.loading}),i.viewEngine=new s({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:i.loader,showStart:function(){i.loader.transition(),i.closeActiveDialogs()},after:function(){i.loader.transitionDone()},viewShow:function(e){i.trigger(f,e)},loadStart:function(){i.loader.show()},loadComplete:function(){i.loader.hide()},sameViewRequested:function(){i.trigger(g)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(p,{url:e.url})}}),this._setPortraitWidth(),n.onResize(function(){i._setPortraitWidth()}),i._setupAppLinks()},closeActiveDialogs:function(){var t=this.element.find(r("actionsheet popover modalview")).filter(":visible");t.each(function(){n.widgetInstance(e(this),o).close()})},navigateToInitial:function(){var e=this.options.initial;e&&this.navigate(e)},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[p,f,g],append:function(e){return this.viewEngine.append(e)},destroy:function(){a.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,i=this.history,r=this.viewEngine;e.bind("init",function(t){var o,a=t.url,s=e.pushState?a:"/";r.rootView.attr(n.attr("url"),s),o=i.length,"/"===a&&o&&(e.navigate(i[o-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(g)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var e=this;this.element.handler(this).on("down",r(k),"_mouseup").on("click",r(k+" "+b),"_appLinkClick"),this.userEvents=new n.UserEvents(this.element,{filter:r(b),tap:function(t){t.event.currentTarget=t.touch.currentTarget,e._mouseup(t.event)}})},_appLinkClick:function(t){var n=e(t.currentTarget).attr("href"),i=n&&"#"!==n[0]&&this.options.serverNavigation;i||w(e(t.currentTarget),"rel")==d||t.preventDefault()},_mouseup:function(r){if(!(r.which>1||r.isDefaultPrevented())){var a=this,s=e(r.currentTarget),l=w(s,"transition"),c=w(s,"rel")||"",p=w(s,"target"),f=s.attr(u),g=v&&0===s[0].offsetHeight,m=f&&"#"!==f[0]&&this.options.serverNavigation;g||m||c===d||t===f||f===h||(s.attr(u,h),setTimeout(function(){s.attr(u,f)}),c.match(_)?(n.widgetInstance(e(f),o).openFor(s),("actionsheet"===c||"drawer"===c)&&r.stopPropagation()):("_top"===p?a=i.application.pane:p&&(a=e("#"+p).data("kendoMobilePane")),a.navigate(f,l)),r.preventDefault())}}});x.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),i=new x(t);return i.navigate(""),i},o.plugin(x)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=n.ui,r="hide",o="open",a="close",s='<div class="km-popup-wrapper" />',l='<div class="km-popup-arrow" />',c='<div class="km-popup-overlay" />',d="km-up km-down km-left km-right",u=i.Widget,h={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},p={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},f={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},g={up:"down",down:"up",left:"right",right:"left"},m=u.extend({init:function(n,i){var o,a,d=this,g=n.closest(".km-modalview-wrapper"),m=n.closest(".km-root").children(".km-pane").first(),v=g[0]?g:m;i.viewport?m=i.viewport:m[0]||(m=window),i.container?v=i.container:v[0]||(v=document.body),o={viewport:m,copyAnchorStyles:!1,autosize:!0,open:function(){d.overlay.show()},activate:e.proxy(d._activate,d),deactivate:function(){d.overlay.hide(),d._apiCall||d.trigger(r),d._apiCall=!1}},u.fn.init.call(d,n,i),n=d.element,i=d.options,n.wrap(s).addClass("km-popup").show(),a=d.options.direction.match(/left|right/)?"horizontal":"vertical",d.dimensions=f[a],d.wrapper=n.parent().css({width:i.width,height:i.height}).addClass("km-popup-wrapper km-"+i.direction).hide(),d.arrow=e(l).prependTo(d.wrapper).hide(),d.overlay=e(c).appendTo(v).hide(),o.appendTo=d.overlay,i.className&&d.overlay.addClass(i.className),d.popup=new t.ui.Popup(d.wrapper,e.extend(!0,o,p,h[i.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[r],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){u.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=e(o.element).offset(),c=o.flipped?g[n]:n,u=2*t.arrow[i.size](),h=t.element[i.size]()-t.arrow[i.size](),p=e(a)[i.size](),f=s[r]-l[r]+p/2;u>f&&(f=u),f>h&&(f=h),t.wrapper.removeClass(d).addClass("km-"+c),t.arrow.css(r,f).show()}}),v=u.extend({init:function(n,r){var o,s=this;s.initialOpen=!1,u.fn.init.call(s,n,r),o=e.extend({className:"km-popover-root",hide:function(){s.trigger(a)}},this.options.popup),s.popup=new m(s.element,o),s.popup.overlay.on("move",function(e){e.target==s.popup.overlay[0]&&e.preventDefault()}),s.pane=new i.Pane(s.element,e.extend(this.options.pane,{$angular:this.options.$angular})),s.pane.navigateToInitial(),t.notify(s,i)},options:{name:"PopOver",popup:{},pane:{}},events:[o,a],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger(o,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){u.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});i.plugin(m),i.plugin(v)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o='<div class="km-shim"/>',a="hide",s=i.Widget,l=s.extend({init:function(t,i){var l=this,c=n.mobile.application,d=n.support.mobileOS,u=c?c.os.name:d?d.name:"ios",h="ios"===u||"wp"===u||(c?c.os.skin:!1),p="blackberry"===u,f=i.align||(h?"bottom center":p?"center right":"center center"),g=i.position||(h?"bottom center":p?"center right":"center center"),m=i.effect||(h?"slideIn:up":p?"slideIn:left":"fade:in"),v=e(o).handler(l).hide();s.fn.init.call(l,t,i),l.shim=v,t=l.element,i=l.options,i.className&&l.shim.addClass(i.className),i.modal||l.shim.on("up","_hide"),(c?c.element:e(document.body)).append(v),l.popup=new r(l.element,{anchor:v,modal:!0,appendTo:v,origin:f,position:g,animation:{open:{effects:m,duration:i.duration},close:{duration:i.duration}},close:function(e){var t=!1;l._apiCall||(t=l.trigger(a)),t&&e.preventDefault(),l._apiCall=!1},deactivate:function(){v.hide()},open:function(){v.show()}}),n.notify(l)},events:[a],options:{name:"Shim",modal:!1,align:t,position:t,effect:t,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){s.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});i.plugin(l)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="close",c="command",d="li>a",u="actionsheetContext",h='<div class="km-actionsheet-wrapper" />',p=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),f=a.extend({init:function(s,l){var c,u,f,g=this,m=n.mobileOS;a.fn.init.call(g,s,l),l=g.options,f=l.type,s=g.element,u="auto"===f?m&&m.tablet:"tablet"===f,c=u?o:r,l.cancelTemplate&&(p=t.template(l.cancelTemplate)),s.addClass("km-actionsheet").append(p({cancel:g.options.cancel})).wrap(h).on("up",d,"_click").on("click",d,t.preventDefault),g.view().bind("destroy",function(){g.destroy()}),g.wrapper=s.parent().addClass(f?" km-actionsheet-"+f:""),g.shim=new c(g.wrapper,e.extend({modal:m.ios&&7>m.majorVersion,className:"km-actionsheet-root"},g.options.popup)),g._closeProxy=e.proxy(g,"_close"),g.shim.bind("hide",g._closeProxy),u&&t.onResize(g._closeProxy),t.notify(g,i)},events:[s,l,c],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=this,n=e.data(u);t.open(e,n),t.trigger(s,{target:e,context:n})},destroy:function(){a.fn.destroy.call(this),t.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(n){var i,r,o,a;n.isDefaultPrevented()||(i=e(n.currentTarget),r=i.data("action"),r&&(o={target:this.target,context:this.context},a=this.options.$angular,a?this.element.injector().get("$parse")(r)(a[0])(o):t.getter(r)(window)(o)),this.trigger(c,{target:this.target,context:this.context,currentTarget:i}),n.preventDefault(),this._close())},_close:function(e){this.trigger(l)?e.preventDefault():this.close()}});i.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===cn)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function o(e){var t,n,i={},r={};if(!At(e))for(xt(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function a(t,n,i,r,o){var a,s=n;for(n=e(),o=o||1,a=0;o>a;a++)n=n.add(t.eq(s+a));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function s(t,n,i){return e(t).add(n).find(i)}function l(e,t,n){var i,r,o,a;for(n=xt(n)?n:[n],i=0,r=n.length;r>i;i++)o=n[i],yt(o)&&o.click&&(a=o.name||o.text,t.on(on+Ot,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},Tt(o.click,e)))}function c(e,t,n){return bt(e,function(e){e=typeof e===cn?{field:e}:e;var i;return(!p(e)||n)&&(e.attributes=U(e.attributes),e.footerAttributes=U(e.footerAttributes),e.headerAttributes=U(e.headerAttributes),i=!0),e.columns&&(e.columns=c(e.columns,t,i)),wt({encoded:t,hidden:i},e)})}function d(e,t){var n=[];return u(e,t,n),n[n.length-1]}function u(e,t,n){var i,r;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(r=n.length,n.push(t[i]),u(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function h(e,t){var n=t?W:U;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function p(e){return f([e]).length>0}function f(e){return kt(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,n){var i=y(I(t)),r=y(z(t)),o=e.rowSpan;e.rowSpan=n?i>r?o-(i-r)||1:o+(r-i):i>r?o+(i-r):o-(r-i)||1}function v(t,n,i,r,o,a,s){var l,c,d=y(t),u=y([n]);d>u&&(l=Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),c=a.children(":not(.k-filter-row)"),e(Array(d-u+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),E(a,d-u),w(i,r,o,a)}function _(e,t,n){var i,r,o,a,s;for(n=n||0,o=t,t=L(t),a=0,s=t.length;s>a;a++)i=b(t[a],o),r=e.find(">tr:not(.k-filter-row)").eq(i.row).find(".k-header:not(.k-group-cell,.k-hierarchy-cell)").eq(i.cell),r.attr(ut.attr("index"),n+a);return t.length}function y(e){var t,n,i=1,r=0;for(t=0;e.length>t;t++)e[t].columns&&(n=y(e[t].columns),n>r&&(r=n));return i+r}function w(t,n,i,r){var o,a,s=x(t[0],n),l=i.find(">tr:not(.k-filter-row):eq("+s.row+")>th.k-header"),c=e(),d=s.cell;for(o=0;t.length>o;o++)c=c.add(l.eq(d+o));for(r.find(">tr:not(.k-filter-row)").eq(s.row).append(c),a=[],o=0;t.length>o;o++)t[o].columns&&(a=a.concat(t[o].columns));a.length&&w(a,n,i,r)}function b(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=b(e,t[o].columns,n+1,i)))break;i[n]++}return r}function k(e,t,n,i){var r,o,a;return t.columns?(t=t.columns,t[i?0:t.length-1]):(r=d(t,e),o=r?r.columns:e,a=Ct(t,o),0===a&&i?a++:a!=o.length-1||i?(a>0||0===a&&!i)&&(a+=i?-1:1):a--,t=o[Math.max(a,0)],t&&t!=n&&t.columns?k(e,t,n,i):null)}function x(e,t,n,i){var r,o;for(n=n||0,i=i||{},i[n]=i[n]||0,o=0;t.length>o;o++){if(t[o]==e){r={cell:i[n],row:n};break}if(t[o].columns&&(r=x(e,t[o].columns,n+1,i)))break;t[o].hidden||i[n]++}return r}function C(e){var t=S(I(e));return t.concat(S(z(e)))}function S(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(S(i))),n}function T(e){var t,n,i=0;for(n=0;e.length>n;n++)t=e[n],t.columns?i+=T(t.columns):t.hidden&&i++;return i}function D(e){var t,n,i,r=0;for(n=0,i=e.length;i>n;n++)t=e[n].style.width,t&&-1==t.indexOf("%")&&(r+=parseInt(t,10));return r}function A(e,t){var n,i,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;r.length>i;i++)n=r[i].rowSpan,n>1&&(r[i].rowSpan=n-t||1)}function E(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}function M(t){var n,i=t.find("tr:not(.k-filter-row)"),r=i.filter(function(){return!e(this).children().length}).remove().length,o=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;o.length>n;n++)o[n].rowSpan>1&&(o[n].rowSpan-=r);return i.length-r}function P(e,t,n,i,r){var o,a,s,l=[];for(o=0,s=e.length;s>o;o++)a=n[i]||[],a.push(t.eq(r+o)),n[i]=a,e[o].columns&&(l=l.concat(e[o].columns));l.length&&P(l,t,n,i+1,r+e.length)}function I(e){return kt(e,function(e){return e.locked})}function z(e){return kt(e,function(e){return!e.locked})}function F(e){return kt(e,function(e){return!e.locked&&p(e)})}function R(e){return kt(e,function(e){return e.locked&&p(e)})}function B(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(B(e[t].columns)):n.push(e[t]));return n}function L(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(L(e[t].columns)):n.push(e[t]);return n}function O(t){var n,i=t.find(">tr:not(.k-filter-row)"),r=e();return i.length>1&&(r=i.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.rowSpan>1})),r=r.add(i.last().find("th:not(.k-group-cell,.k-hierarchy-cell)")),n=ut.attr("index"),r.sort(function(t,i){return t=parseInt(e(t).attr(n),10),i=parseInt(e(i).attr(n),10),t>i?1:i>t?-1:0}),r}function H(t){var n,i,r,o,a,s,l,c=t.closest("table"),d=e().add(t),u=t.closest("tr"),h=c.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(n=h.eq(p-1),i=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),r=0,o=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),a=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),s=0;a.length>s;s++)r+=a[s].colSpan||1;for(o+=Math.max(r-1,0),r=0,s=0;i.length>s;s++)if(l=i.eq(s),r+=l.attr("colSpan")?l[0].colSpan:1,o>=s&&r>o){d=H(l).add(d);
break}}return d}function N(t){var n,i,r,o,a,s,l,c,d=t.closest("table"),u=e().add(t),h=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),f=p.index(h)+t[0].rowSpan,g=ut.attr("colspan");if(p.length-1>=f){for(n=h.next(),i=h.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,o=0;r.length>o;o++)a+=parseInt(r.eq(o).attr(g),10)||1;for(s=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),l=parseInt(t.attr(g),10)||1,o=0;l>o;)n=s.eq(o+a),u=u.add(N(n)),c=parseInt(n.attr(g),10),c>1&&(l-=c-1),o++}return u}function V(t,n,i){var r,o=t;return gt?t[0].innerHTML=i:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,o[0]),t=e(t)),t}function U(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",wt({},e,{style:t})}function W(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function j(t,n,i,r){var o,a=t.find(">colgroup"),s=bt(n,function(e){return o=e.width,o&&0!==parseInt(o,10)?ut.format('<col style="width:{0}"/>',typeof o===cn?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(r+1).join('<col class="k-group-col">')+s.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),wn.msie&&8==wn.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function G(e,t){var n,i,r=0;for(n=0,i=t.length;i>n;n++)t[n].locked&&(e.eq(n).insertBefore(e.eq(r)),r++)}function q(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)t=e[n],r[t.value]=t.text;return r}function $(e,t,n){var i=n&&n.length&&yt(n[0])&&"value"in n[0],r=i?q(n)[e]:e;return r=null!=r?r:"",t?ut.format(t,r):r}function Y(e,t,n){for(var i,r=0,o=e[r];o;){if(i=n?!0:"none"!==o.style.display,i&&!mn.test(o.className)&&--t<0){o.style.display=n?"":"none";break}o=e[++r]}}function K(t,n){for(var i,r,o=0,a=t.length;a>o;o+=1)r=t.eq(o),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),Y(r[0].cells,n,!1))}function Q(t,n){for(var i,r,o,a=0,s=t.length;s>a;a+=1)r=t.eq(a),r.is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+1)):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)+1),j(i.find(">form>table"),f(o),!1,0),r=i.find("tr:first")),Y(r[0].cells,n,!0))}function X(e,t,n){n=n||1;var i,r,o;for(r=0,o=e.length;o>r;r++)i=e.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+n),i=t.eq(r).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-n)}function J(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;n>t;t+=1)i+=parseInt(r[t].style.width,10);return i}function Z(e,t){var n,i,r,o;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(n=e.offsetHeight,i=t.offsetHeight,n>i?(r=t.rows[t.rows.length-1],vn.test(r.className)&&(r=t.rows[t.rows.length-2]),o=n-i):(r=e.rows[e.rows.length-1],vn.test(r.className)&&(r=e.rows[e.rows.length-2]),o=i-n),r.style.height=r.offsetHeight+o+"px")}function et(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":r>i&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function tt(e,t){var n,i,r;if(typeof e===cn&&e===t)return e;if(yt(e)&&e.name===t)return e;if(xt(e))for(n=0,i=e.length;i>n;n++)if(r=e[n],typeof r===cn&&r===t||r.name===t)return r;return null}function nt(t,n){var i,r,o,a=wn.msie;if(n===!0){if(t=e(t),i=!0,i&&(r=t.parent().scrollTop(),o=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(s){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(r),t.parent().scrollLeft(o))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function it(t){var n=e(t.currentTarget),i=n.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),a=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),s=n.closest("table")[0];ut.support.touch||a&&n.find(ut.roleSelector("filtercell")).length||(s===r[0]||s===r[1]||s===o[0]||s===o[1])&&(e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.current(n),(i||!a)&&setTimeout(function(){kn&&e(ut._activeElement()).hasClass("k-widget")||nt(s,!0)}),i&&t.preventDefault()))}function rt(t,n,i,r){if(t=e(t),r){var o=n;n=i,i=o}return n.not(t).length!=n.length?t:n.eq(t[0]==i[0]?0:1)}function ot(e,n,i,r,o){var a,s,l,c=o?"prevAll":"nextAll";if(e){if(a=e.parent()[c](Ft).first(),!a[0]&&(o||e.is("th"))||!o&&e[0].rowSpan>1){if(n=rt(n,i,r,o),nt(n),o&&!e.is(".k-header"))return O(n.find("thead:first")).eq(e.index());a=n.find((o?">thead>":">tbody>")+Ft).first()}!o&&e[0].colSpan>1&&e.is(".k-header")?e=N(e).eq(1):e.is(".k-header")&&o?(l=H(e),e=l.eq(l.length-2)):(s=e.attr(ut.attr("index")),(s===t||o)&&(s=e.index()),e=a.children().eq(s)),e[0]&&e.is(Rt)||(e=a.children(Rt).first())}else e=i.find(Bt);return e}function at(e,t,n,i,r){var o=n.length>1;return e?e.prevAll(":visible")[0]?e=e.prevAll(It).first():o&&(t==n[1]?(nt(n[0]),e=r(e.parent()).children(It).last()):t==i[1]&&(nt(i[0]),e=i.eq(0).find("tr>"+It).last())):e=n.find(Bt),e}function st(e,t,n,i,r){var o=n.length>1;return e?e.nextAll(":visible")[0]?e=e.nextAll(It).first():o&&(t==n[0]?(nt(n[1]),e=r(e.parent()).children(It).first()):t==i[0]&&(nt(i[1]),e=i.eq(1).find("tr>"+It).first())):e=n.find(Bt),e}function lt(e,t,n,i,r){var o=2==n.length,a=!0,s=r?e.prevAll(It+":first"):e.nextAll(":visible:first");return s.length||(s=e.parent(),o&&(a=r&&t==n[0]||!r&&t==n[1],s=i(s)),a&&(s=s[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),s=s.children(It+(r?":last":":first"))),s}function ct(e,t,i){return'<tr class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function dt(e){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ut=window.kendo,ht=ut.ui,pt=ut.data.DataSource,ft=ht.Groupable,gt=ut.support.tbodyInnerHtml,mt=ut._activeElement,vt=ht.Widget,_t=ut.keys,yt=e.isPlainObject,wt=e.extend,bt=e.map,kt=e.grep,xt=e.isArray,Ct=e.inArray,St=Array.prototype.push,Tt=e.proxy,Dt=ut.isFunction,At=e.isEmptyObject,Et=Math,Mt="progress",Pt="error",It=":not(.k-group-cell):not(.k-hierarchy-cell):visible",zt="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Ft="tr:not(.k-footer-template):visible",Rt=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Bt=Ft+":first>"+Rt+":first",Lt="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Ot=".kendoGrid",Ht="edit",Nt="save",Vt="remove",Ut="detailInit",Wt="filterMenuInit",jt="columnMenuInit",Gt="change",qt="columnHide",$t="columnShow",Yt="saveChanges",Kt="dataBound",Qt="detailExpand",Xt="detailCollapse",Jt="k-state-focused",Zt="k-state-selected",en="columnResize",tn="columnReorder",nn="columnLock",rn="columnUnlock",on="click",an="height",sn="tabIndex",ln="function",cn="string",dn="Are you sure you want to delete this record?",un="Delete",hn="Cancel",pn=/(\}|\#)/gi,fn=/#/gi,gn="[\\x20\\t\\r\\n\\f]",mn=RegExp("(^|"+gn+")(k-group-cell|k-hierarchy-cell)("+gn+"|$)"),vn=RegExp("(^|"+gn+")(k-filter-row)("+gn+"|$)"),_n='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',yn=!1,wn=ut.support.browser,bn=wn.msie&&7==wn.version,kn=wn.msie&&8==wn.version,xn=vt.extend({init:function(e,t){var n=this;vt.fn.init.call(n,e,t),n._refreshHandler=Tt(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Gt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Gt,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;vt.fn.destroy.call(e),e.dataSource.unbind(Gt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Ot),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=ut.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(yn?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(n._wheelScroll,n)),ut.support.kineticScrollNeeded&&(n.drag=new ut.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Ot,Tt(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar.scrollTop(),i=ut.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),this.verticalScrollbar.scrollTop(n+-i))}},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,o=i.skip()||0,a=t._rangeStart||o,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),c=Et.max(Et.floor(n/r),0),d=Et.max(c+Et.floor(s/r),0);t._scrollTop=n-a*r,t._scrollbarTop=n,t._fetch(c,d,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,o=i.itemHeight,a=r.take(),s=i._rangeStart||r.skip()||0,l=Et.floor(e/a)*a,c=!1,d=.33;return s>e?(c=!0,s=Et.max(0,t-a),i._scrollTop=(e-s)*o,i._page(s,a)):t>=s+a&&!n?(c=!0,s=e,i._scrollTop=o,i._page(s,a)):i._fetching||(l+a-a*d>e&&e>a&&r.prefetch(l-a,a),t>l+a*d&&r.prefetch(l+a,a)),c},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(ut.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i,r=this,o="",a=25e4,s=r.dataSource,l=r._rangeStart,c=ut.support.kineticScrollNeeded?0:ut.support.scrollbar(),d=r.wrapper[0];for(ut.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),n=r.itemHeight=r.options.itemHeight()||0,i=d.scrollWidth>d.offsetWidth?c:0,e=s.total()*n+i,t=0;t<Et.floor(e/a);t++)o+='<div style="width:1px;height:'+a+'px"></div>';e%a&&(o+='<div style="width:1px;height:'+e%a+'px"></div>'),r.verticalScrollbar.html(o),d.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=s.skip(),1===s.page()&&(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),Cn={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Sn=ut.ui.DataBoundWidget.extend({init:function(t,n,i){var r=this;n=xt(n)?{dataSource:n}:n,vt.fn.init.call(r,t,n),i&&(r._events=i),yn=ut.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Ot,r._resizeHandler)),ut.notify(r)},events:[Gt,"dataBinding","cancel","pdfExport",Kt,Qt,Xt,Ut,Wt,jt,Ht,Nt,Vt,Yt,en,tn,$t,qt,nn,rn],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:hn,confirmation:dn,confirmDelete:un},commands:{create:Cn.create.text,cancel:Cn.cancel.text,save:Cn.save.text,destroy:Cn.destroy.text,edit:Cn.edit.text,update:Cn.update.text,canceledit:Cn.canceledit.text,excel:Cn.excel.text,pdf:Cn.pdf.text}}},destroy:function(){var t,n=this;vt.fn.destroy.call(n),n._resizeHandler&&e(window).off("resize"+Ot,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&n.selectable.destroy(),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyColumnAttachments(),n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Ot),ut.destroy(n.wrapper),n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i=wt(!0,{},this.options);return i.columns=ut.deepExtend([],this.columns),n=this.dataSource,i.dataSource=e.extend(!0,{},n.options),i.dataSource.page=n.page(),i.dataSource.filter=n.filter(),i.dataSource.pageSize=n.pageSize(),i.dataSource.sort=n.sort(),i.dataSource.group=n.group(),i.dataSource.aggregate=n.aggregate(),i.$angular=t,i},setOptions:function(e){var t,n,i,r=this.getOptions();ut.deepExtend(r,e),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,r,n),this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=ut.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=L(i.columns||[]);for(t=0,n=r.length;n>t;t++)e=r[t].command,e&&l(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),bn&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r,o,a,s,l,c,d=this,u=d.options.columnResizeHandleWidth,h=d.options.scrollable,p=d.resizeHandle,f=this._groups();if(p&&d.lockedContent&&p.data("th")[0]!==n[0]&&(p.remove(),p=null),p||(p=d.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(p)),yn)i=n.position().left,h&&(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=wn.msie?a.scrollLeft():0,l=wn.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0,c=wn.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0,i-=l-c+s);else{for(i=n[0].offsetWidth,r=O(n.closest("thead")),o=0;r.length>o&&r[o]!=n[0];o++)i+=r[o].offsetWidth;f>0&&(i+=t.find(".k-group-cell:first").outerWidth()*f)}p.css({top:n.position().top,left:i-u,height:n.outerHeight(),width:3*u}).data("th",n).show()},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+Ot,"th",function(i){var o,a,s,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(o=i.clientX,a=e(window).scrollLeft(),s=l.offset().left+(yn?0:this.offsetWidth),o+a>s-n&&s+n>o+a?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ut.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Tt(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,o,a,s,l,c=this,d=c.options,u=this._isMobile,h=ut.support.mobileOS?0:ut.support.scrollbar();d.resizable&&(t=d.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,u?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new ht.Resizable(t.add(c.lockedHeader),{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var h,p,f,g;l=e(t.currentTarget).data("th"),u&&c._hideResizeHandle(),h=l.closest("table"),p=e.inArray(l[0],O(l.closest("thead")).filter(":visible")),a=h.parent().hasClass("k-grid-header-locked"),f=a?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),r(c.wrapper,"col-resize"),s=d.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+p+")"),n=t.x.location,i=l.outerWidth(),o=a?f.children("tbody").outerWidth():c.tbody.outerWidth()},resize:function(t){var r,u,p,f,g,m,v=yn?-1:1,_=i+t.x.location*v-n*v;d.scrollable?(a&&c.lockedFooter?r=c.lockedFooter.children("table"):c.footer&&(r=c.footer.find(">.k-grid-footer-wrap>table")),r&&r[0]||(r=e()),u=l.closest("table"),p=a?c.lockedTable:c.table,f=!1,g=c.wrapper.width()-h,m=_,a&&o-i+m>g&&(m=i+(g-o-2*h),0>m&&(m=_),f=!0),m>10&&(s.css("width",m),o&&(m=f?g-2*h:o+t.x.location*v-n*v,p.add(u).add(r).css("width",m),a||(c._footerWidth=m)))):_>10&&s.css("width",_)},resizeend:function(){var e,t,n,o=l.outerWidth();r(c.wrapper,""),i!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),n=l.attr(ut.attr("index")),n||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),e=L(c.columns)[n],e.width=o,c.trigger(en,{column:e,oldWidth:i,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ut.guid(),filter:t.content?".k-grid-header:first "+Lt:"table:first>.k-grid-header "+Lt,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(ut.attr("title"))||t.attr(ut.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var r=e[t],o=e[i],a=d(r,n.columns);return e=a?a.columns:n.columns,Ct(o,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var r=C(n.columns);return r[e].lockable!==!1&&t(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(C(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=C(n.columns),r=i[e.oldIndex],o=t(i,e.oldIndex,e.newIndex);n.trigger(tn,{newIndex:o,oldIndex:Ct(r,i),column:r}),n.reorderColumn(o,r,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,r,o,l,c=this,d=x(e[0],c.columns),u=x(t,c.columns),h=[];for(i=0;e.length>i;i++)e[i].columns&&(h=h.concat(e[i].columns));r=s(c.lockedHeader,c.thead,"tr:eq("+d.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),o=I(e).length,l=I([t]).length,h.length?(o>0&&0===l?v(e,t,h,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===o&&l>0&&v(e,t,h,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),t=k(c.columns,t,e[0],n),t&&c._reorderHeader(h,t,n)):o!==l&&m(r[d.cell],c.columns,o),a(r,d.cell,u.cell,n,e.length)},_reorderContent:function(t,n,i){var r,o,l,c,d=this,u=e(),h=t[0],p=Ct(h,L(d.columns)),f=Ct(n,L(d.columns)),g=Ct(h,B(d.columns)),m=Ct(n,B(d.columns)),v=I(d.columns).length,_=!!n.locked,y=d.footer||d.wrapper.find(".k-grid-footer"),w=r=m;for(n.hidden&&(_?(m=d.lockedTable.find("colgroup"),w=d.lockedHeader.find("colgroup"),r=e(d.lockedFooter).find(">table>colgroup")):(m=d.tbody.prev(),w=d.thead.prev(),r=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),d._hasFilterRow()&&a(d.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length),a(s(d.lockedHeader,d.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,w,i,t.length),d.options.scrollable&&a(s(d.lockedTable,d.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,m,i,t.length),y&&y.length&&(a(s(d.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),g,r,i,t.length),a(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)),o=d.tbody.children(":not(.k-grouping-row,.k-detail-row)"),d.lockedTable&&(v>f?p>=v&&X(d.lockedTable.find(">tbody>tr.k-grouping-row"),d.table.find(">tbody>tr.k-grouping-row"),t.length):v>p&&X(d.table.find(">tbody>tr.k-grouping-row"),d.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=d.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=o.length;c>l;l+=1)a(s(u[l],o[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)},reorderColumn:function(e,n,i){var r,o,a=this,s=d(n,a.columns),l=s?s.columns:a.columns,c=Ct(n,l),u=l[e],h=!!u.locked,p=I(a.columns).length;c!==e&&(n.locked||!h||1!=z(a.columns).length)&&(!n.locked||h||1!=p)&&(a._hideResizeHandle(),i===t&&(i=c>e),o=[n],a._reorderHeader(o,u,i),a.lockedHeader&&(M(a.thead),M(a.lockedHeader)),u.columns&&(u=L(u.columns),u=u[i?0:u.length-1]),n.columns&&(o=L(n.columns)),a._reorderContent(o,u,i),r=!!n.locked,r=r!=h,n.locked=h,l.splice(i?e:e+1,0,n),l.splice(e>c?c:c+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(h?a.trigger(nn,{column:n}):a.trigger(rn,{column:n})))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=_(e,I(this.columns))),_(this.thead,z(this.columns),t)},lockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=I(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:kt(n,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=I(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=L(I(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(ut.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,r=n.options.editable,o=function(){var t=mt(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};r&&(t=n._editMode(),"incell"===t?r.update!==!1&&n.wrapper.on(on+Ot,"tr:not(.k-grouping-row) > td",function(t){var r=e(this),o=n.lockedTable&&r.closest("table")[0]===n.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==n.tbody[0]&&!o||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(mt()).blur(),n.closeCell(),n.editCell(r)):n.editCell(r))}).on("focusin"+Ot,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+Ot,function(){n.timer=setTimeout(o,1)}):r.update!==!1&&n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),r.destroy!==!1?n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(on+Ot,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,r,o;t=e(t),n=this,i=L(n.columns)[n.cellIndex(t)],r=n._modelForContainer(t),n.closeCell(),!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger(Nt,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),o=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&et(o[0],n._relatedRow(o).addClass("k-grid-edit-row")[0]),n.trigger(Ht,{container:t,model:r}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?ut.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),Z(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(on+Ot,"a.k-grid-cancel",e._editCancelClickHandler),t.off(on+Ot,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(Gt,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o,a=this,s=a._editContainer;s&&(n=s.closest("tr").attr(ut.attr("uid")),o=a.dataSource.getByUid(n),t&&a.trigger("cancel",{container:s,model:o})||(s.removeClass("k-edit-cell"),i=L(a.columns)[a.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(s,i,o),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),a.lockedContent&&et(r.css("height","")[0],a._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=wt({},ut.Template,i.options.templateSettings),a=ut.template(i._cellTmpl(t,r),o);r.count>0&&(a=Tt(a,r.storage)),e.empty().html(a(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t).hide(),n=i._modelForContainer(t),n&&!i.trigger(Vt,{row:t,model:n})?(i.dataSource.remove(n),("inline"===r||"popup"===r)&&i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a=this;n instanceof ut.data.ObservableObject?i=n:(n=e(n),i=a._modelForContainer(n)),r=a._editMode(),a.cancelRow(),i&&(a._attachModelChange(i),"popup"===r?a._createPopupEditor(i):"inline"===r?a._createInlineEditor(n,i):"incell"===r&&e(n).children(It).each(function(){var n=e(this),r=L(a.columns)[n.index()];return i=a._modelForContainer(n),i&&(!i.editable||i.editable(r.field))&&r.field?(a.editCell(n),!1):t}),o=a.editView?a.editView.element:a._editContainer,o&&(this._editCancelClickHandler||(this._editCancelClickHandler=Tt(this._editCancelClick,this)),o.on(on+Ot,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Tt(this._editUpdateClick,this)),o.on(on+Ot,"a.k-grid-update",this._editUpdateClickHandler)))
},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,r=i.options.navigatable,o=i.editable.options.model,a=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:a,model:o})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),r&&(i.current(i.items().eq(n).children().filter(Rt).first()),nt(i.table,!0)))},_createPopupEditor:function(n){var i,r,o,a,s,l,c,d,u,h,p,f=this,g="<div "+ut.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=L(f.columns),_=f.options.editable,y=_.template,w=yt(_)?_.window:{},b=wt({},ut.Template,f.options.templateSettings);if(w=w||{},y)for(typeof y===cn&&(y=window.unescape(y)),g+=ut.template(y,b)(n),o=0,a=v.length;a>o;o++)i=v[o],i.command&&(d=tt(i.command,"edit"),d&&(r=d));else for(o=0,a=v.length;a>o;o++)i=v[o],i.command?i.command&&(d=tt(i.command,"edit"),d&&(r=d)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(h={storage:{},count:0},s=ut.template(f._cellTmpl(i,h),b),h.count>0&&(s=Tt(s,h.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+ut.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&yt(r)&&(r.text&&yt(r.text)&&(l=r.text.update,c=r.text.cancel),r.attr&&(u=r.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ut.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:l,attr:u})+(w.title||"Edit")+f._createButton({name:"canceledit",text:c,attr:u})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:l,attr:u})+f._createButton({name:"canceledit",text:c,attr:u}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(wt({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),f.trigger("cancel",{container:p,model:n}))return i.preventDefault(),t;var r=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f.current(f.items().eq(r).children().filter(Rt).first()),nt(f.table,!0))}}},w))),f.editable=f._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Ht,{container:p,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),i=L(a.columns)[a.cellIndex(r)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(o=tt(i.command,"edit"))){r.empty();var t,l,c;yt(o)&&(o.text&&yt(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(c=o.attr)),e(a._createButton({name:"update",text:t,attr:c})+a._createButton({name:"canceledit",text:l,attr:c})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(ut.attr("container-for"),i.field),r.empty()}),a._editContainer=t,a.editable=new ut.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:s,model:n,clearContainer:!1}),t.length>1&&(et(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Ht,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),t._displayRow("popup"!==t._editMode()?n:t.tbody.find("["+ut.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(Nt,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,o=this,a=o._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");a&&(o.lockedContent&&(n=e((l?o.lockedAltRowTemplate:o.lockedRowTemplate)(a)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?o.altRowTemplate:o.rowTemplate)(a)),t.replaceWith(i),o.angular("compile",function(){return{elements:i.get(),data:[{dataItem:a}]}}),s&&o.options.selectable&&o.select(i.add(n)),n&&et(i[0],n[0]),r=i.next(),r.hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,r,o,a=this;return a._isMobile?(i=ut.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),r=e(i(t)).appendTo(a.view.element),o=a._actionSheet=new ut.mobile.ui.ActionSheet(r,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var i=e(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||a._removeRow(n)},popup:a._actionSheetPopupOptions}),o.open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=n===!0||typeof n===cn?t.options.messages.editable.confirmation:n.confirmation;return i!==!1&&null!=i?(typeof i===ln&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},e)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(Yt)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o,a=this,s=a.dataSource,l=a._editMode(),c=a.options.editable.createAt||"",d=s.pageSize(),u=s.view()||[];(a.editable&&a.editable.end()||!a.editable)&&("incell"!=l&&a.cancelRow(),e=s.indexOf(u[0]),"bottom"==c.toLowerCase()&&(e+=u.length,d&&!s.options.serverPaging&&u.length>=d&&(e-=1)),0>e&&(e=s.page()>s.totalPages()?(s.page()-1)*d:0),t=s.insert(e,{}),n=t.uid,i=a.lockedContent?a.lockedTable:a.table,r=i.find("tr["+ut.attr("uid")+"="+n+"]"),o=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(r)),"inline"===l&&r.length?a.editRow(r):"popup"===l?a.editRow(t):o.length&&a.editCell(o),"bottom"==c.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,r=this,o=L(r.columns),a=r._modelForContainer(e);for(n=0,i=o.length;i>n;n++)if(t=o[n],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(Dt(r)||(r=typeof r===cn?r:n._toolbarTmpl(r).replace(fn,"\\#"),r=Tt(ut.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),o&&o.create!==!1&&t.on(on+Ot,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(on+Ot,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(on+Ot,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(on+Ot,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(on+Ot,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(xt(e))for(t=0,n=e.length;n>t;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var n,r=e.template||_n,o=typeof e===cn?e:e.name||e.text,a=Cn[o]?Cn[o].className:"k-grid-"+(o||"").replace(/\s/g,""),s={className:a,text:o,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(o||yt(e)&&e.template))throw Error("Custom commands should have name specified");return yt(e)?(e.className&&Ct(s.className,e.className.split(" "))<0?e.className+=" "+s.className:e.className===t&&(e.className=s.className),"edit"===o&&yt(e.text)&&(e=wt(!0,{},e),e.text=e.text.edit),e.attr&&(yt(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===cn&&(n=e.attr.match(/class="(.+?)"/),n&&Ct(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1]))),s=wt(!0,s,Cn[o],{text:l[o]},e)):s=wt(!0,s,Cn[o],{text:l[o]}),ut.template(r)(s)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(on+Ot,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(on+Ot,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=Lt+"["+ut.attr("field")+"]",o=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&i.enabled!==!1&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new ft(n,wt({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:o,filter:o,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,r,o,a,s,l,c,d;if(this.lockedContent){for(i=this,r=i.table.add(i.lockedTable),o=e(t,r[0]),a=e(t,r[1]),s=n?I(i.columns).length:1,l=n?i.columns.length-s:1,c=[],d=0;o.length>d;d+=s)St.apply(c,o.slice(d,d+s)),St.apply(c,a.splice(0,l));return c}},_selectable:function(){var n,i,r,o,a=this,s=[],l=a._isLocked(),c=a.options.selectable;c&&(a.selectable&&a.selectable.destroy(),c=ut.ui.Selectable.parseOptions(c),n=c.multiple,i=c.cell,a._hasDetails()&&(s[s.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(s[s.length]=".k-grouping-row,.k-group-footer"),s=s.join(","),""!==s&&(s=":not("+s+")"),r=a.table,l&&(r=r.add(a.lockedTable)),o=">"+(i?zt:"tbody>tr"+s),a.selectable=new ut.ui.Selectable(r,{filter:o,aria:!0,multiple:n,change:function(){a.trigger(Gt)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,r,o,s;if(!i&&l){for(r=e(),o=0,s=t.length;s>o;o++)n=a._relatedRow(t[o]),Ct(n[0],t)<0&&(r=r.add(n));return r}},continuousItems:function(){return a._continuousItems(o,i)}}),a.options.navigatable&&r.on("keydown"+Ot,function(o){var s=a.current(),c=o.target;if(o.keyCode===_t.SPACEBAR&&e.inArray(c,r)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),s=i?s:s.parent(),l&&!i&&(s=s.add(a._relatedRow(s))),n)if(o.ctrlKey){if(s.hasClass(Zt))return s.removeClass(Zt),a.trigger(Gt),t}else a.selectable.clear();else a.selectable.clear();a.selectable.value(s)}}))},_relatedRow:function(t){var n,i,r=this.lockedTable;return t=e(t),r?(n=t.closest(this.table.add(this.lockedTable)),i=n.find(">tbody>tr").index(t),n=n[0]===this.table[0]?r:this.table,n.find(">tbody>tr").eq(i)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(Gt)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),i._isLocked()&&(n=n.add(n.map(function(){return i._relatedRow(this)}))),r.value(n),t):r.value()},current:function(e){var n,i=this,r=i.options.scrollable,o=i._current,a=i.table.add(i.thead.parent());return e!==t&&e.length&&(o&&o[0]===e[0]||(o&&(o.removeClass(Jt).removeAttr("id"),a.removeAttr("aria-activedescendant")),e.attr("id",i._cellId),i._current=e.addClass(Jt),a.attr("aria-activedescendant",i._cellId),e.length&&r&&(n=e.closest("table").parent(),n.is(".k-grid-content")?i._scrollTo(e.parent()[0],i.content[0]):n.is(".k-grid-content-locked")&&(i._scrollTo(i._relatedRow(e.parent())[0],i.content[0]),i.lockedContent[0].scrollTop=i.content[0].scrollTop),n.is(".k-grid-content-locked,.k-grid-header-locked")||(r.virtual?i._scrollTo(e[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(e[0],i.content[0]))))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Jt),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],o=e[i?"offsetWidth":"offsetHeight"],a=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+o,c=0;c=a>r?r:l>a+s?s>=o?l-s:r:a,t[i?"scrollLeft":"scrollTop"]=c},_navigatable:function(){var t=this,n=Tt(t.current,t),i=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),o=(t._isLocked(),i),a=ut.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=i.add(r),r.attr(sn,-1)),o.off("mousedown"+Ot+" focus"+Ot+" focusout"+Ot+" keydown"+Ot),r.on("keydown"+Ot,function(e){e.altKey&&e.keyCode==_t.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr(sn,Et.max(i.attr(sn)||0,0)).on("mousedown"+Ot+" keydown"+Ot,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(ut.support.touch?"touchstart"+Ot:"mousedown"+Ot,Ft+">"+Rt,Tt(it,t)).on("focus"+Ot,function(){if(!ut.support.touch){var t=n();t&&t.is(":visible")?t.addClass(Jt):n(e(this).find(Bt)),i.attr(sn,-1),r.attr(sn,-1),e(this).attr(sn,0)}}).on("focusout"+Ot,function(){var e=n();e&&e.removeClass(Jt)}).on("keydown"+Ot,function(o){var s,l,c,d,u,h=o.keyCode,p=!1,f=!o.isDefaultPrevented()&&!e(o.target).is(":button,a,:input,a>.k-icon"),g=t.options.pageable,m=t.dataSource,v="incell"==t._editMode(),_=o.shiftKey,y=Tt(t._relatedRow,t),w=n();if(w&&w.is("th")&&(f=!0),f&&h==_t.UP)n(ot(w,o.currentTarget,i,r,!0)),p=!0;else if(f&&h==_t.DOWN)n(ot(w,o.currentTarget,i,r)),p=!0;else if(f&&h==(a?_t.RIGHT:_t.LEFT))n(at(w,o.currentTarget,i,r,y)),p=!0;else if(f&&h==(a?_t.LEFT:_t.RIGHT))n(st(w,o.currentTarget,i,r,y)),p=!0;else if(f&&g&&_t.PAGEDOWN==h)m.page(m.page()+1),p=!0;else if(f&&g&&_t.PAGEUP==h)m.page(m.page()-1),p=!0;else if(h==_t.ENTER||_t.F2==h){if(w=w?w:i.find(Bt),!w.length)return;e(o.target).is("table")||e.contains(w[0],o.target)||(w=e(o.target).closest("[role=gridcell]")),w.is("th")?(w.find(".k-link").click(),p=!0):w.parent().is(".k-master-row,.k-grouping-row")?(w.parent().find(".k-icon:first").click(),p=!0):(c=w.find(":kendoFocusable:first"),!w.hasClass("k-edit-cell")&&c[0]&&w.hasClass("k-state-focused")?(c.focus(),p=!0):t.options.editable&&!e(o.target).is(":button,.k-button,textarea")&&(d=e(o.target).closest("[role=gridcell]"),d[0]||(d=w),t._handleEditing(d,!1,v?o.currentTarget:i[0]),p=!0))}else _t.ESC==h?(s=mt(),w&&e.contains(w[0],s)&&!w.hasClass("k-edit-cell")&&!w.parent().hasClass("k-grid-edit-row")?(nt(o.currentTarget,!0),p=!0):!t._editContainer||w&&!t._editContainer.has(w[0])&&w[0]!==t._editContainer[0]||(v?t.closeCell(!0):(l=e(w).parent().index(),s&&s.blur(),t.cancelRow(),l>=0&&t.current(i.find(">tbody>tr").eq(l).children().filter(Rt).first())),wn.msie&&9>wn.version&&document.body.focus(),nt(v?o.currentTarget:i[0],!0),p=!0)):_t.TAB==h&&(w=e(w),t.options.editable&&v&&(u=e(mt()).closest(".k-edit-cell"),u[0]&&u[0]!==w[0]&&(w=u)),u=lt(w,o.currentTarget,i,y,_),!w.is("th")&&u.length&&t.options.editable&&v&&(t._handleEditing(w,u,u.closest(i)),p=!0));p&&(o.preventDefault(),o.stopPropagation())}))},_handleEditing:function(n,i,r){var o,a,s=this,l=e(mt()),c=s._editMode(),d=wn.msie,u=d&&9>wn.version,h=s._editContainer;if(r=e(r),a="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),s.editable){if(e.contains(h[0],l[0])&&(wn.opera||u?l.change().triggerHandler("blur"):(l.blur(),d&&l.blur())),!s.editable)return nt(r),t;if(!s.editable.end())return s.current("incell"==c?h:h.children().filter(It).first()),o=h.find(":kendoFocusable:first")[0],o&&o.focus(),t;"incell"==c?s.closeCell():(s.saveRow(),a=!0)}i&&s.current(i),u&&document.body.focus(),nt(r,!0),(!a&&!i||i)&&("incell"==c?s.editCell(s.current()):s.editRow(s.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(an,n),t.css(an,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=n.mobile===!0&&ut.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ut.ns+'role="view" data-'+ut.ns+'init-widgets="false"></div>').parent(),this.pane=ut.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(an,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,r,o=this,a=o.options,s=a.scrollable,l=s!==!0&&s.virtual&&!o.virtualScrollable,c=!ut.support.kineticScrollNeeded||l?ut.support.scrollbar():0;s&&(t=o.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(o.table)),t.css(yn?"padding-left":"padding-right",s.virtual?c+1:c),n=e('<table role="grid" />'),bn&&n.attr("cellspacing",0),n.append(o.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),o.content=o.table.parent(),o.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(o.content=o.content.parent()),o.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(o.content=o.table.wrap('<div class="k-grid-content" />').parent()),l&&(o.virtualScrollable=new xn(o.content,{dataSource:o.dataSource,itemHeight:function(){return o._averageRowHeight()}})),o.scrollables=t.children(".k-grid-header-wrap"),i=o.wrapper.find(".k-grid-footer"),i.length&&(o.scrollables=o.scrollables.add(i.children(".k-grid-footer-wrap"))),s.virtual?o.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}):(o.content.unbind("scroll"+Ot).bind("scroll"+Ot,function(){o.scrollables.scrollLeft(this.scrollLeft),o.lockedContent&&(o.lockedContent[0].scrollTop=this.scrollTop)}),r=o.content.data("kendoTouchScroller"),r&&r.destroy(),r=ut.touchScroller(o.content),r&&r.movable&&(o.touchScroller=r,r.movable.bind("change",function(e){o.scrollables.scrollLeft(-e.sender.x),o.lockedContent&&o.lockedContent.scrollTop(-e.sender.y)}),o.one(Kt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_setContentWidth:function(){var t,n=this,i="k-grid-content-expander",r='<div class="'+i+'"></div>',o=n.resizable;n.options.scrollable&&n.wrapper.is(":visible")&&(t=n.table.parent().children("."+i),n._setContentWidthHandler=Tt(n._setContentWidth,n),n.dataSource&&n.dataSource.view().length?t[0]&&(t.remove(),o&&o.unbind("resize",n._setContentWidthHandler)):(t[0]||(t=e(r).appendTo(n.table.parent()),o&&o.bind("resize",n._setContentWidthHandler)),n.thead&&t.width(n.thead.width())),n._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),o=ut.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=D(a),c=D(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*o),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=o),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=ut.support.scrollbar();n.scrollable&&t.wrapper.is(":visible")&&(i-=r.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*o?(t.lockedContent&&(o=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?o:0,t.lockedContent.height(i-o)),t.content.height(i)):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),e=t.table.outerHeight()/n,i!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=xt(r)?{data:r}:r,yt(r)&&(wt(r,{table:n.table,fields:n.columns}),e=i.pageable,yt(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(Gt,n._refreshHandler).unbind(Mt,n._progressHandler).unbind(Pt,n._errorHandler):(n._refreshHandler=Tt(n.refresh,n),n._progressHandler=Tt(n._requestStart,n),n._errorHandler=Tt(n._error,n)),n.dataSource=pt.create(r).bind(Gt,n._refreshHandler).bind(Mt,n._progressHandler).bind(Pt,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a,s,l,c,d,u=this,h=u.tbody,p=t.model,f=u.tbody.find("tr["+ut.attr("uid")+"="+p.uid+"]"),g=f.hasClass("k-alt"),m=u._items(h).index(f),v=u.lockedContent;if(v&&(n=u._relatedRow(f)),f.add(n).children(".k-edit-cell").length&&!u.options.rowTemplate)f.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),r=L(u.columns)[u.cellIndex(i)],r.field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(u._displayCell(i,r,p),e('<span class="k-dirty"/>').prependTo(i)))});else if(!f.hasClass("k-grid-edit-row")){for(s=e().add(f),v&&(o=(g?u.lockedAltRowTemplate:u.lockedRowTemplate)(p),s=s.add(n),n.replaceWith(o)),o=(g?u.altRowTemplate:u.rowTemplate)(p),f.replaceWith(o),o=u._items(h).eq(m),v&&(f=f.add(n),n=u._relatedRow(o)[0],et(o[0],n),o=o.add(n)),a=u.options.selectable,a&&f.hasClass("k-state-selected")&&u.select(o),c=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=o.children(":not(.k-group-cell,.k-hierarchy-cell)"),m=0,d=u.columns.length;d>m;m++)r=u.columns[m],i=l.eq(m),a&&c.eq(m).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);u.trigger("itemChange",{item:o,data:p,ns:ht})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof ut.ui.Pager?i:new ut.ui.Pager(t,wt({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,r,a=this,s=a.dataSource.aggregates(),l="",c=a.footerTemplate,d=a.options,u=a.footer||a.wrapper.find(".k-grid-footer");c?(s=At(s)?o(a.dataSource.aggregate()):s,l=e(a._wrapFooter(c(s))),u.length?(n=l,a.angular("cleanup",function(){return{elements:u.get()}}),u.replaceWith(n),u=a.footer=n):u=a.footer=d.scrollable?d.pageable?l.insertBefore(a.wrapper.children("div.k-grid-pager")):l.appendTo(a.wrapper):l.insertBefore(a.tbody),a.angular("compile",function(){return{elements:u.find("td").get(),data:bt(a.columns,function(e){return{column:e,aggregate:s[e.field]}})}})):u&&!a.footer&&(a.footer=u),u.length&&(d.scrollable&&(t=u.attr("tabindex",-1).children(".k-grid-footer-wrap"),a.scrollables=a.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),a._footerWidth&&u.find("table").css("width",a._footerWidth),t&&(i=a.content.scrollLeft(),r=d.scrollable!==!0&&d.scrollable.virtual&&!a.virtualScrollable,r&&(i=a.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),a.lockedContent&&(a._appendLockedColumnFooter(),a._applyLockedContainersWidth(),a._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",r=ut.support.mobileOS?0:ut.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(bn?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(yn?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,o,a,s,l,c,d=this,u=L(d.columns),h=d.options,p=h.columnMenu,f=kt(d.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){d.trigger(jt,{field:e.field,container:e.container})},v=function(e){nt(e.closest("table"),!0)},_=h.$angular;if(p)for("boolean"==typeof p&&(p={}),a=O(d.thead),s=0,l=a.length;l>s;s++)n=u[s],c=a.eq(s),n.command||!n.field&&!c.attr("data-"+ut.ns+"field")||(e=c.data("kendoColumnMenu"),e&&e.destroy(),r=n.sortable!==!1&&p.sortable!==!1&&h.sortable!==!1?wt({},h.sortable,{compare:(n.sortable||{}).compare}):!1,o=h.filterable&&n.filterable!==!1&&p.filterable!==!1?wt({pane:d.pane},n.filterable,h.filterable):!1,i={dataSource:d.dataSource,values:n.values,columns:p.columns,sortable:r,filterable:o,messages:p.messages,owner:d,closeCallback:v,init:m,pane:d.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&n.lockable!==!1&&I(u).length>0},_&&(i.$angular=_),c.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,r,o,a,s=this,l=L(s.columns),c=function(e){s.trigger(Wt,{field:e.field,container:e.container})},d=function(e){nt(e.closest("table"),!0)},u=s.options.filterable;if(u&&typeof u.mode==cn&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!s.options.columnMenu)for(t=O(s.thead),i=0,r=t.length;r>i;i++)n=t.eq(i),l[i].filterable===!1||l[i].command||!l[i].field&&!n.attr("data-"+ut.ns+"field")||(e=n.data("kendoFilterMenu"),e&&e.destroy(),o=l[i].filterable,a=wt({},u,o,{dataSource:s.dataSource,values:l[i].values,closeCallback:d,init:c,pane:s.pane}),o&&o.messages&&(a.messages=wt(!0,{},u.messages,o.messages)),n.kendoFilterMenu(a))},_filterRow:function(){var t,n,i,r,o,a,s,l,c,d,u,h,p=this;if(p._hasFilterRow())for(t=L(p.columns),n=p.options.filterable,i=p.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),r=0;t.length>r;r++)if(a=t[r],s=p.options.filterable.operators,l=!1,c=e("<th/>"),d=a.field,a.hidden&&c.hide(),i.append(c),d&&a.filterable!==!1){if(u=a.filterable&&a.filterable.cell||{},o=p.options.dataSource,o instanceof pt&&(o=p.options.dataSource.options),h=wt(!0,{},n.messages),a.filterable&&wt(!0,h,a.filterable.messages),u.enabled===!1){c.html("&nbsp;");continue}u.dataSource&&(o=u.dataSource,l=!0),a.filterable&&a.filterable.operators&&(s=a.filterable.operators),e("<span/>").attr(ut.attr("field"),d).kendoFilterCell({dataSource:p.dataSource,suggestDataSource:o,customDataSource:l,field:d,messages:h,values:a.values,template:u.template,delay:u.delay,inputWidth:u.inputWidth,suggestionOperator:u.suggestionOperator,minLength:u.minLength,dataTextField:u.dataTextField,operator:u.operator,operators:s,showOperators:u.showOperators}).appendTo(c)}else c.html("&nbsp;")},_sortable:function(){var e,t,n,i,r,o,a=this,s=L(a.columns),l=a.options.sortable;if(l){for(i=O(a.thead),r=0,o=i.length;o>r;r++)e=s[r],e.sortable!==!1&&!e.command&&e.field&&(n=i.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+ut.ns+"field",e.field).kendoColumnSorter(wt({},l,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,r,o=this,a=o.table,s=a.find("col"),l=o.options.dataSource;if(t=t.length?t:bt(a.find("th"),function(t,n){t=e(t);var i=t.attr(ut.attr("sortable")),r=t.attr(ut.attr("filterable")),o=t.attr(ut.attr("type")),a=t.attr(ut.attr("groupable")),l=t.attr(ut.attr("field")),c=t.attr(ut.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(ut.attr("template")),width:s.eq(n).css("width")}}),n=!(o.table.find("tbody tr").length>0&&(!l||!l.transport)),o.options.scrollable){if(r=t,i=I(t),t=z(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked columns");G(o.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),r),t=i.concat(t)}o.columns=c(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,o){var a,s,l,c,d=this,u=wt({},ut.Template,d.options.templateSettings),h=t.length,p={storage:{},count:0},f=d._hasDetails(),g=[],m=d._groups();if(!e){for(e="<tr",r&&g.push("k-alt"),f&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),h&&(e+=" "+ut.attr("uid")+'="#='+ut.expr("uid",u.paramName)+'#"'),e+=" role='row'>",m>0&&!o&&(e+=n(m)),f&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),a=0;h>a;a++)l=t[a],s=l.template,c=typeof s,e+="<td"+i(l.attributes)+" role='gridcell'>",e+=d._cellTmpl(l,p),e+="</td>";e+="</tr>"}return e=ut.template(e,u),p.count>0?Tt(e,p.storage):e},_headerCellText:function(e){var t=this,n=wt({},ut.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,o=e.title||e.field||"";return r===ln?o=ut.template(i,n)({}):r===cn&&(o=i),o},_cellTmpl:function(e,t){var n,i,r=this,o=wt({},ut.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,c="",d=e.format,u=typeof a,h=e.values;if(e.command){if(xt(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=r._createButton(e.command[n]);return c.replace(fn,"\\#")}return r._createButton(e.command).replace(fn,"\\#")}return u===ln?(t.storage["tmpl"+t.count]=a,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===cn?c+=a:h&&h.length&&yt(h[0])&&"value"in h[0]&&l?(c+="#var v ="+ut.stringify(q(h)).replace(fn,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",d&&(c+='kendo.format("'+d.replace(pn,"\\$1")+'",'),l?(l=ut.expr(l,s),c+=l+"==null?'':"+l):c+="''",d&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate(),s=L(t.columns),l=L(I(t.columns)),c=n.scrollable?L(z(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);
t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!At(a)||!At(a)&&!o.length||kt(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,a,"footerTemplate","k-footer-template")),r&&kt(s,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,a,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,a,s){var l,c,d,u,h,p=this,f=wt({},ut.Template,p.options.templateSettings),g=f.paramName,m="",v={},_=0,y={},w=p._groups(),b=o(t);for(m+='<tr class="'+a+'">',w>0&&!s&&(m+=n(w)),p._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),l=0,c=e.length;c>l;l++)h=e[l],d=h[r],u=typeof d,m+="<td"+i(h.footerAttributes)+">",d?(u!==ln&&(y=b[h.field]?wt({},f,{paramName:g+"['"+h.field+"']"}):{},d=ut.template(d,y)),v["tmpl"+_]=d,m+="#=this.tmpl"+_+"("+g+")#",_++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=ut.template(m,f),_>0?Tt(m,v):m},_detailTmpl:function(e){var t=this,i="",r=wt({},ut.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=f(L(t.columns)).length,d=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",d===ln?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=ut.template(i,r),s>0?Tt(i,a):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ut]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==cn&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e){return e.filterable===!1});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&I(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(on+Ot,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),i=s.next(),c&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger(Ut,{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(a?Qt:Xt,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var r,o,a,s,l,c=this,d="",u=L(c.columns);for(r=0,s=e.length;s>r;r++)o=e[r].column||e[r],a=c._headerCellText(o),l=Ct(o,u),o.command?(d+="<th"+i(o.headerAttributes),n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=">"+a+"</th>"):(d+="<th role='columnheader' "+ut.attr("field")+"='"+(o.field||"")+"' ",n&&!e[r].colSpan&&(d+=" rowspan='"+n+"'"),e[r].colSpan>1&&(d+='colspan="'+(e[r].colSpan-T(o.columns))+'" ',d+=ut.attr("colspan")+"='"+e[r].colSpan+"'"),o.title&&(d+=ut.attr("title")+'="'+o.title.replace(/'/g,"'")+'" '),o.groupable!==t&&(d+=ut.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&o.aggregates.length&&(d+=ut.attr("aggregates")+"='"+o.aggregates+"'"),l>-1&&(d+=ut.attr("index")+"='"+l+"'"),d+=i(o.headerAttributes),d+=">"+a+"</th>");return d},_appendLockedColumnContent:function(){var t,n,i,r,o,a=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),d=0,u=0;for(t=0,n=a.length;n>t;t++)if(a[t].locked)if(p(a[t])){for(r=1,a[t].columns&&(r=L(a[t].columns).length-T(a[t].columns)),r=r||1,o=0;r>o;o++)c=c.add(l.eq(t+u+o-d));u+=r-1}else d++;i=e('<div class="k-grid-content-locked"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,o=r.find(".k-footer-template>td"),a=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),d=e();for(c=c.add(o.filter(".k-group-cell")),t=0,n=L(I(i.columns)).length;n>t;t++)c=c.add(o.eq(t+l));for(d=d.add(a.filter(".k-group-col")),t=0,n=L(R(i.columns)).length;n>t;t++)d=d.add(a.eq(t+l));c.appendTo(s.find("tr")),d.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,o,a,s,l,c,d,u,h,f=this,m=this.columns,v=[],_=0,y=e(),w=f._hasFilterRow(),b=0,k=e(),x=0,C=e(),S=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),D=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),E=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),I=0;for(n=0,r=m.length;r>n;n++){if(m[n].locked){if(l=D.eq(n),x=L(m[n].columns||[]).length,p(m[n])){for(m[n].columns&&(c=x-T(m[n].columns)),c=c||1,d=0;c>d;d++)y=y.add(S.eq(n+I+d-_));I+=c-1}for(P([m[n]],N(l),v,0,0),x=x||1,u=0;x>u;u++)k=k.add(E.eq(b+u));b+=x}m[n].columns&&(_+=T(m[n].columns)),p(m[n])||_++}if(v.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(bn?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(v.length+1).join("<tr></tr>"),i+=(w?'<tr class="k-filter-row" />':"")+"</thead></table></div>",s=e(i),S=s.find("colgroup"),S.append(f.thead.prev().find("col.k-group-col").add(y)),o=s.find("thead tr:not(.k-filter-row)"),n=0,r=v.length;r>n;n++)C=g(v[n]),o.eq(n).append(f.thead.find("tr:eq("+n+") .k-group-cell").add(C));h=M(this.thead),h>v.length&&A(s,h),a=s.find(".k-filter-row"),a.append(f.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=s.prependTo(t),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ut.destroy(e),e.off(Ot).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,r,o=this,a=o.columns,s=o._hasDetails()&&a.length,l=o._hasFilterRow(),c="",d=o.table.find(">thead"),u=o.element.find("thead:first").length>0;if(d.length||(d=e("<thead/>").insertBefore(o.tbody)),o.lockedHeader&&o.thead?(n=o.thead.find("tr:has(th):not(.k-filter-row)").html(""),o._removeLockedContainers()):n=o.element.find(u?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&(n=d.children().first(),!n.length)){for(i=[{rowSpan:1,cells:[],index:0}],o._prepareColumns(i,a),t=0;i.length>t;t++)c+="<tr>",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(i[t].cells,i[t].rowSpan),c+="</tr>";n=e(c)}l&&(r=e("<tr/>"),r.addClass("k-filter-row"),s&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'),d.append(r)),n.children().length?s&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(c="",s&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),c+=o._createHeaderCells(a),n.html(c)),n.attr("role","row").find("th").addClass("k-header"),o.options.scrollable||d.addClass("k-grid-header"),n.find("script").remove().end().prependTo(d),o.thead&&o._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:d.find("th").get()}}),this.angular("compile",function(){return{elements:d.find("th").get(),data:bt(a,function(e){return{column:e}})}}),o.thead=d.attr("role","rowgroup"),o._sortable(),o._filterable(),o._filterRow(),o._scrollable(),o._updateCols(),o._columnMenu(),this.options.scrollable&&I(this.columns).length&&(o._appendLockedColumnHeader(o.thead.closest(".k-grid-header")),o._appendLockedColumnContent(),o.lockedContent.bind("DOMMouseScroll"+Ot+" mousewheel"+Ot,Tt(o._wheelScroll,o)),o._applyLockedContainersWidth()),o._updateFirstColumnClass(),o._resizable(),o._draggable(),o._reorderable(),o.groupable&&o._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,r=i.columns||[],o=i._hasDetails()&&r.length;o||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),r=z(r),n.length&&r[0]&&!r[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),r=I(i.columns),n.length&&r[0]&&!r[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var r,o,a=i||e[e.length-1],s=e[a.index+1],l=0;for(r=0;t.length>r;r++)o={column:t[r],colSpan:0},a.cells.push(o),t[r].columns&&t[r].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),o.colSpan=t[r].columns.length,this._prepareColumns(e,t[r].columns,o,s),l+=o.colSpan-1,a.rowSpan=e.length-a.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,r;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),r=ut.wheelDeltaY(t),r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Ot,!1),n.scrollTop(i+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),j(e,B(R(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?j(e,B(F(this.columns)),this._hasDetails(),0):j(e,B(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e,t){var n,i,r=this,o="",a=t.rowTemplate,s=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)o+=n%2?s(e[n]):a(e[n]),r._data.push(e[n]);return o},_groupRowHtml:function(e,t,n,i,r,o){var a,s,l=this,c="",d=e.field,u=kt(l.columns,function(e){return e.field==d})[0]||{},h=u.groupHeaderTemplate,p=(u.title||d)+": "+$(e.value,u.format,u.values),f=l._groupAggregatesDefaultObject||{},g=wt(f,e.aggregates),m=wt({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=r.groupFooterTemplate,_=e.items;if(h&&(p=typeof h===ln?h(m):ut.template(h)(m)),c+=i(t,n,p),e.hasSubgroups)for(a=0,s=_.length;s>a;a++)c+=l._groupRowHtml(_[a],o?t:t-1,n+1,i,r,o);else c+=l._rowsHtml(_,r);return v&&(c+=v(g)),c},collapseGroup:function(t){t=e(t);var n,i,r,o,a,s=this.options.groupable,l=s.showFooter,c=l?0:1,d=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),t=t.nextAll("tr"),r=0,o=t.length;o>r&&(a=t.eq(r),i=a.find(".k-group-cell").length,a.hasClass("k-grouping-row")?c++:a.hasClass("k-group-footer")&&c--,!(n>=i||a.hasClass("k-group-footer")&&0>c));r++)a.hide(),d.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,o,a,s=this,l=e(),c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),t=t.nextAll("tr"),o=0,a=t.length;a>o&&(i=t.eq(o),r=i.find(".k-group-cell").length,!(n>=r));o++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),l.eq(o).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&s.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),l.eq(o+1).show())),i.hasClass("k-grouping-row")&&c++,i.hasClass("k-group-footer")&&(1==c?(i.show(),l.eq(o).show()):c--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,o=i.find("tr:first").find("th.k-group-cell").length,a=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>o?(e(Array(t-o+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&a.find("th.k-group-cell").hide()):o>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=J(t.eq(0)),t.width(n._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable),t.width(J(t.eq(0))))},hideColumn:function(n){var i,r,o,a,l,c,d,u,g,m,v=this,_=0,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.columns,b=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).filter(":visible").length:0;if(n="number"==typeof n?w[n]:yt(n)?kt(S(w),function(e){return e===n})[0]:kt(S(w),function(e){return e.field===n})[0],n&&p(n)){if(n.columns&&n.columns.length){for(c=x(n,w),h(n,!1),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+c.row+")>th"),c.cell,!1),o=0;n.columns.length>o;o++)this.hideColumn(n.columns[o]);return v.trigger(qt,{column:n}),t}if(g=Ct(n,f(L(w))),h(n,!1),v._setParentsVisibility(n,!1),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,d=g,v.lockedHeader&&b>g?m=v.lockedHeader.find(">table>thead"):d-=b,i=O(m).filter(":visible").eq(d),i[0].style.display="none",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!1),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!1)),v.lockedTable&&b>g?K(v.lockedTable.find(">tbody>tr"),g):K(v.tbody.children(),g-b),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight(),v._syncLockedFooterHeight();else{for(a=v.thead.prev().find("col"),o=0,u=a.length;u>o;o+=1){if(l=a[o].style.width,!l||-1!=l.indexOf("%")){_=0;break}_+=parseInt(l,10)}r=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),v._footerWidth=null,_&&(r.width(_),v._footerWidth=_),wn.msie&&8==wn.version&&(r.css("display","inline-table"),setTimeout(function(){r.css("display","table")},1))}v._updateFirstColumnClass(),v.trigger(qt,{column:n})}},_setParentsVisibility:function(t,n){var i,r,o,a,l,c=this.columns,d=[],p=n?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(u(t,c,d)&&d.length)for(i=d.length-1;i>=0;i--)r=d[i],o=b(r,c),a=s(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),p(r)&&(h(r,n),a[0].style.display=n?"":"none"),a.filter("["+ut.attr("colspan")+"]").length&&(l=parseInt(a.attr(ut.attr("colspan")),10),a[0].colSpan=l-T(r.columns)||1)},showColumn:function(n){var i,r,o,a,l,c,d,u,f,g,m,v=this,_=v.columns,y=v.footer||v.wrapper.find(".k-grid-footer"),w=v.lockedHeader?O(v.lockedHeader.find(">table>thead")).length:0;if(n="number"==typeof n?_[n]:yt(n)?kt(S(_),function(e){return e===n})[0]:kt(S(_),function(e){return e.field===n})[0],n&&!p(n)){if(n.columns&&n.columns.length){for(d=x(n,_),h(n,!0),Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+d.row+")>th"),d.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return v.trigger($t,{column:n}),t}if(g=Ct(n,L(_)),h(n,!0),v._setParentsVisibility(n,!0),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,c=g,v.lockedHeader&&w>g?m=v.lockedHeader.find(">table>thead"):c-=w,o=O(m).eq(c),o[0].style.display="",Y(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!0),y[0]&&(v._updateCols(y.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(y.find(">.k-grid-footer-locked>table")),Y(y.find(".k-footer-template>td"),g,!0)),v.lockedTable&&w>g?Q(v.lockedTable.find(">tbody>tr"),g):Q(v.tbody.children(),g-w),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),n.width){for(l=0,f=v.thead.prev().find("col"),i=0,r=f.length;r>i;i+=1){if(u=f[i].style.width,u.indexOf("%")>-1){l=0;break}l+=parseInt(u,10)}v._footerWidth=null,l&&(a.width(l),v._footerWidth=l)}else a.width("");v._updateFirstColumnClass(),v.trigger($t,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ut.ui.progress(t,e)},_resize:function(){this.content&&(this._setContentHeight(),this._setContentWidth())},_isActiveInTable:function(){var t=mt();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),o=i.options.navigatable,a=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,c=l+B(f(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(s=a.is("th"),n=0,s&&(n=i.thead.find("th:not(.k-group-cell)").index(a))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._setContentHeight(),i._setContentWidth(),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.content.trigger("scroll")),n>=0&&(i._removeCurrent(),i.current(s?i.thead.find("th:not(.k-group-cell)").eq(n):i.table.add(i.lockedTable).find(Bt).first()),i._current&&nt(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._angularItems("compile"),i.trigger(Kt)))},_renderContent:function(e,t,n){var i,r,a=this,s="",l=null!=a.lockedContent,c={rowTemplate:a.rowTemplate,altRowTemplate:a.altRowTemplate,groupFooterTemplate:a.groupFooterTemplate};if(t=l?t-B(R(a.columns)).length:t,n>0)for(t=l?t-n:t,a.detailTemplate&&t++,a.groupFooterTemplate&&(a._groupAggregatesDefaultObject=o(a.dataSource.aggregate())),i=0,r=e.length;r>i;i++)s+=a._groupRowHtml(e[i],t,0,l?dt:ct,c,l);else s+=a._rowsHtml(e,c);a.tbody=V(a.tbody,a.table,s)},_renderLockedContent:function(e,t,n){var i,r,o,a="",s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(o=this.lockedTable,n>0)for(t-=f(L(z(this.columns))).length,i=0,r=e.length;r>i;i++)a+=this._groupRowHtml(e[i],t,0,ct,s);else a=this._rowsHtml(e,s);V(o.children("tbody"),o,a),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,r,o,a=e[0].rows,s=a.length,l=t[0].rows,c=e.add(t),d=c.length,u=[];for(n=0;s>n&&l[n];n++)a[n].style.height&&(a[n].style.height=l[n].style.height=""),i=a[n].offsetHeight,r=l[n].offsetHeight,o=0,i>r?o=i:r>i&&(o=r),u.push(o);for(n=0;d>n;n++)c[n].style.display="none";for(n=0;s>n;n++)u[n]&&(a[n].style.height=l[n].style.height=u[n]+"px");for(n=0;d>n;n++)c[n].style.display=""}});ut.ExcelMixin&&ut.ExcelMixin.extend(Sn.prototype),ut.PDFMixin&&ut.PDFMixin.extend(Sn.prototype),ht.plugin(Sn),ht.plugin(xn)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,c=">*",d="progress",u="error",h="k-state-focused",p="k-state-selected",f="k-edit-item",g="edit",m="remove",v="save",_="click",y=".kendoListView",w=e.proxy,b=n._activeElement,k=n.ui.progress,x=n.data.DataSource,C=n.ui.DataBoundWidget.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r._templates(),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,g,m,v],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){s.fn.setOptions.call(this,e),this._templates()},_templates:function(){var e=this.options;this.template=n.template(e.template||""),this.altTemplate=n.template(e.altTemplate||e.template),this.editTemplate=n.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var i=n.attr("uid"),r=e(t).closest("["+i+"]").attr(i);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(d,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=w(e.refresh,e),e._progressHandler=w(e._progress,e),e._errorHandler=w(e._error,e)),e.dataSource=x.create(e.options.dataSource).bind(i,e._refreshHandler).bind(d,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){k(this.element,!0)},_error:function(){k(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,c,d=this,u=d.dataSource.view(),h="",p=d.template,f=d.altTemplate,g=b();if(e=e||{},"itemchange"===e.action)return d._hasBindingTarget()||d.editable||(i=e.items[0],s=d.items().filter("["+n.attr("uid")+"="+i.uid+"]"),s.length>0&&(l=s.index(),d.angular("cleanup",function(){return{elements:[s]}}),s.replaceWith(p(i)),s=d.items().eq(l),s.attr(n.attr("uid"),i.uid),d.angular("compile",function(){return{elements:[s],data:[{dataItem:i}]}}),d.trigger("itemChange",{item:s,data:i}))),t;if(!d.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(d._angularItems("cleanup"),d._destroyEditable(),l=0,c=u.length;c>l;l++)h+=l%2?f(u[l]):p(u[l]);for(d.element.html(h),r=d.items(),l=0,c=u.length;c>l;l++)r.eq(l).attr(n.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");d.element[0]===g&&d.options.navigatable&&d.current(r.eq(0)),d._angularItems("compile"),d.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=n.ui.Selectable.parseOptions(a).multiple,o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:c,change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+y,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(p))return r.removeClass(p),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(h),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(h).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],c=e(n)[a+i](),d=e(n)[r.toLowerCase()]();s+l>c+d?e(n)[a+i](s+l-d):c>s&&e(n)[a+i](s)},i("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element,o=function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()};i&&(t._tabindex(),r.on("focus"+y,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+y,function(){t._current&&t._current.removeClass(h)}).on("keydown"+y,function(i){var o,a,s=i.keyCode,c=t.current(),d=e(i.target),u=!d.is(":button,textarea,a,a>.t-icon,input"),h=d.is(":text"),p=n.preventDefault,g=r.find("."+f),m=b();if(!(!u&&!h&&l.ESC!=s||h&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)c&&(c=c.prev()),t.current(c&&c[0]?c:t._item("last")),p(i);else if(l.DOWN===s||l.RIGHT===s)c&&(c=c.next()),t.current(c&&c[0]?c:t._item("first")),p(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),p(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),p(i);else if(l.HOME===s)t.current(t._item("first")),p(i);else if(l.END===s)t.current(t._item("last")),p(i);else if(l.ENTER===s)0!==g.length&&(u||h)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(c);else if(l.ESC===s){if(g=r.find("."+f),0===g.length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+y+" touchstart"+y,c,w(o,t)))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(i)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),r.value(n),t):r.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(e){var t,i,r,o=this,a=o.editable,s=o.template,l=!0;return a&&(e&&(l=a.end()),l&&(a.element.index()%2&&(s=o.altTemplate),t=o._modelFromElement(a.element),o._destroyEditable(),r=a.element.index(),a.element.replaceWith(s(t)),i=o.items().eq(r),i.attr(n.attr("uid"),t.uid),o._hasBindingTarget()&&n.bind(i,t))),l},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),e=r.items().filter("["+n.attr("uid")+"="+a+"]"),i=e.index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(f).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1,target:r}).data("kendoEditable"),r.trigger(g,{model:o,item:t})},save:function(){var e,t=this,n=t.editable;n&&(n=n.element,e=t._modelFromElement(n),!t.trigger(v,{model:e,item:n})&&t._closeEditable(!0)&&t.dataSource.sync())},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.trigger(m,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable(!1)))},_crudHandlers:function(){var t=this,i=_+y;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(y),e.pager&&e.pager.destroy(),n.destroy(e.element)}});n.ui.plugin(C)}(window.kendo.jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:s(t.value),extension:a(t.value),size:null}]}function r(t){return e.map(t,function(e){return o(e)})}function o(e){var t=e.name||e.fileName;return{name:y.htmlEncode(t),extension:a(t),size:e.size||e.fileSize,rawFile:e}}function a(e){var t=e.match(k);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n){var i=y.guid();return e.map(t,function(e){return e.uid=n?y.guid():i,e})}function c(t,n,i){var r,o;n._supportsRemove()&&(r=t.data("fileNames"),o=e.map(r,function(e){return e.name}),n._submitRemove(o,i,function(e,i,o){n._removeFileEntry(t),n.trigger(T,{operation:"remove",files:r,response:e,XMLHttpRequest:o})},function(e){n.trigger(D,{operation:"remove",files:r,XMLHttpRequest:e}),b("Server response: "+e.responseText)}))}function d(t,n,i){var r=!1,o="";try{o=e.parseJSON(u(t)),r=!0}catch(a){i()}r&&n(o)}function u(e){return(t===e||""===e)&&(e="{}"),e}function h(e){e.stopPropagation(),e.preventDefault()}function p(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){var e=new Date-o;e>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function g(t){return e(t.target).closest(".k-file")}function m(){var n={},i=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){n[this.name]=this.value}),r!==t&&i!==t&&(n[r]=i),n}var v,_,y=window.kendo,w=y.ui.Widget,b=y.logToConsole,k=/\.([^\.]+)$/,x=".kendoUpload",C="select",S="upload",T="success",D="error",A="complete",E="cancel",M="progress",P="remove",I=w.extend({init:function(t,n){var i,r,o,a=this;w.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=x+"-"+y.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new _(a):new v(a),a._async=!0,o=a.options.files,o.length>0&&a._renderInitialFiles(o)):a._module=new z(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a)),a.element.val()&&a._onInputChange({target:a.element})},events:[C,S,T,D,A,E,M,P],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;w.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",t._supportsMultiple()?t.multiple:!1),t.toggle(t.options.enabled)},enable:function(e){e=t===e?!0:e,this.toggle(e)
},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(x),w.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().attr("tabindex","-1").removeAttr("id").off(x),n._activeInput(i),n.element.focus()}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",n._supportsMultiple()?n.multiple:!1).attr("autocomplete","off").on("click"+x,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+x,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+x,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+x,e.proxy(n._onInputChange,n)).on("keydown"+x,e.proxy(n._onInputKeyDown,n))},_onInputKeyDown:function(e){var t=this,n=t.wrapper.find(".k-upload-action:first");e.keyCode===y.keys.TAB&&n.length>0&&(e.preventDefault(),n.focus())},_onInputChange:function(t){var n=this,i=e(t.target),r=l(n._inputFiles(i),n._isAsyncNonBatch()),o=n.trigger(C,{files:r});o?(n._addInput(i),i.remove()):n._module.onSelect({target:i},r)},_onDrop:function(t){var n,i=t.originalEvent.dataTransfer,o=this,a=i.files,s=l(r(a),o._isAsyncNonBatch());h(t),a.length>0&&(n=o.trigger(C,{files:s}),n||o._module.onSelect({target:e(".k-dropzone",o.wrapper)},s))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(t=l(t,!0),o=0;t.length>o;o++)n=t[o],i=r._enqueueFile(n.name,{fileNames:[n]}),i.addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._fileAction(i,P)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;n.length>o;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a=this,s=n.fileNames[0].uid,l=e(".k-upload-files",a.wrapper),c=a.options,d=c.template;return 0===l.length&&(l=e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper),a.options.showFileList||l.hide(),a.wrapper.removeClass("k-upload-empty")),i=e(".k-file",l),d?(o=a._prepareTemplateData(t,n),d=y.template(d),r=e("<li class='k-file'>"+d(o)+"</li>"),r.find(".k-upload-action").addClass("k-button k-button-bare")):r=a._prepareDefaultFileEntryTemplate(t,n),r.attr(y.attr("uid"),s).appendTo(l).data(n),a._async||e(".k-progress",r).width("100%"),!a.multiple&&i.length>0&&a._module.onRemove({target:e(i,a.wrapper)}),r},_removeFileEntry:function(t){var n,i,r=this,o=t.closest(".k-upload-files");t.remove(),n=e(".k-file",o),i=e(".k-file-success, .k-file-error",o),i.length===n.length&&this._hideUploadButton(),0===n.length&&(o.remove(),r.wrapper.addClass("k-upload-empty"),r._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}},o=r[n];o&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(o.text)},_renderAction:function(t,n,i){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span></button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(n=e(t.target).closest(".k-upload-action"),i=n.find(".k-icon"),r=n.closest(".k-file"),o={files:r.data("fileNames")},i.hasClass("k-delete")?a.trigger(P,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(E,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){var e=this,t=e.wrapper;return t.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){var i;this.options.template?e(".k-progress",t.target).width(n+"%"):(i=e(".k-upload-pct",t.target),0===i.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(M,{files:g(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=g(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,P):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=g(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(D,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),b("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i,r=this,o=r.localization,a=e(".k-file",r.wrapper).not(".k-file-success, .k-file-error");0===a.length&&(t=e(".k-file.k-file-error",r.wrapper),n=e(".k-upload-status-total",r.wrapper),i=e(".k-icon",n).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?o.statusWarning:o.statusUploaded),n.text(r.localization.headerStatusUploaded).append(i))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this,r=i.element;t!==this._module.onAbort&&this._module.onAbort(),r.value||(n=e(r),n.attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(y.support.browser.opera||y.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),n=!t&&/safari/.test(e),i=n&&/windows/.test(e);return!i&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,h).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),p(n,t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),p(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,i,r){var o=this,a=o.options.async.removeField||"fileNames",s=e.extend(n,m());s[a]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:s,success:i,error:r})},_wrapInput:function(e){var t=this,n=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),n.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(A)},_inputFiles:function(e){return i(e)}}),z=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};z.prototype={onSelect:function(t,i){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i}),o._fileAction(r,P)},onRemove:function(e){var t=g(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},I._frameId=0,v.prototype={onSelect:function(t,n){var i=this.upload,r=e(t.target),o=this.prepareUpload(r,n);i.options.async.autoUpload?this.performUpload(o):(i._supportsRemove()&&this.upload._fileAction(o,P),i._showUploadButton())},prepareUpload:function(t,i){var r,o,a,s=this.upload,l=e(s.element),c=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",c),r=this.createFrame(s.name+"_"+I._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(S,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,m());for(i in o.data)r=n.find("input[name='"+i+"']"),0===r.length&&(r=e("<input>",{type:"hidden",name:i}).prependTo(n)),r.val(o.data[i]);s._fileAction(t,E),s._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(r){n="Error trying to get server response: "+r}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};d(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):c(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},_=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},_.prototype={onSelect:function(t,n){var i=this.upload,r=this,o=e(t.target),a=this.prepareUpload(o,n);e.each(a,function(){i.options.async.autoUpload?r.performUpload(this):(i._supportsRemove()&&i._fileAction(this,P),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(a.options.async.batch===!0)n=e.map(t,function(e){return e.name}).join(", "),o=a._enqueueFile(n,{fileNames:t}),o.data("files",t),l.push(o);else for(i=0;s>i;i++)r=t[i],n=r.name,o=a._enqueueFile(n,{fileNames:[r]}),o.data("files",[r]),l.push(o);return l},performUpload:function(t){var n,i=this.upload,r=this.createFormData(),o=this.createXHR(),a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(S,a))this.removeFileEntry(t);else{i._fileAction(t,E),i._hideUploadButton(),i._showHeaderUploadStatus(),a.data=e.extend({},a.data,m());for(n in a.data)r.append(n,a.data[n]);this.populateFormData(r,t.data("files")),i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onCancel:function(e){var t=g(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=g(e);this.performUpload(t)},onRemove:function(e,t){var n=g(e);n.hasClass("k-file-success")?c(n,this.upload,t):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(D,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials=this.upload.options.async.withCredentials,i.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var n,i=this.upload,r=t.length;for(n=0;r>n;n++)e.append(i.options.async.saveField||i.name,t[n].rawFile);return e},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&299>=r.status?d(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},y.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r;e.on("dragenter"+x,function(){t(),r=new Date,i||(i=setInterval(function(){var e=new Date-r;e>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+x,function(){r=new Date})}function i(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function r(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function o(e,t){var n=e[t];return h(n)?n.from||n.field||t:n}var a,s,l,c,d=window.kendo,u=d.ui.Widget,h=e.isPlainObject,p=e.proxy,f=e.extend,g=d.support.placeholder,m=d.support.browser,v=d.isFunction,_=/(^\/|\/$)/g,y="change",w="apply",b="error",k="click",x=".kendoFileBrowser",C=".kendoBreadcrumbs",S=".kendoSearchBox",T="name",D="size",A="type",E={field:A,dir:"asc"},M=d.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),P='<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>';f(!0,d.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),f(!0,d.data,{transports:{filebrowser:d.data.RemoteTransport.extend({init:function(t){d.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),v(this.options[t])?this.options[t].call(this,n):d.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),a=m.msie&&8>m.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},s=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n.element.addClass("k-filebrowser"),n.element.on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",p(n._deleteClick,n)).on(k+x,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",p(n._addClick,n)).on("keydown"+x,"li.k-state-selected input",p(n._directoryKeyDown,n)).on("blur"+x,"li.k-state-selected input",p(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[b,y,w],destroy:function(){var e=this;u.fn.destroy.call(e),e.dataSource.unbind(b,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(x),d.destroy(e.element)},value:function(){var e,n=this,r=n._selectedItem(),o=n.options.transport.fileUrl;return r&&"f"===r.get(A)?(e=i(n.path(),r.get(T)).replace(_,""),o&&(e=v(o)?o(e):d.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView,n=e.select();return n.length?this.dataSource.getByUid(n.attr(d.attr("uid"))):t},_toolbar:function(){var t=this,n=d.template(P),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:p(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(n(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=p(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+x,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+x,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,n=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(n).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=d.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return o(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,s=T,l=D;o.test(a)?(e.data={path:n.path()},t=n._createFile(a),t?n.upload.one("success",function(e){t.set(s,e.response[n._getFieldName(s)]),t.set(l,e.response[n._getFieldName(l)]),n._tiles=n.listView.items().filter("["+d.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(d.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data(),o=A,a=T;for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get(o)&&r[t].get(a).toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=A,s=i.dataSource.view(),l=i._findFile(e);if(l&&!i._showMessage(d.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(l)return l;for(t=0,n=s.length;n>t;t++)if("f"===s[t].get(a)){r=t;break}return o[a]="f",o[T]=e,o[D]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=A,o=T,a=n.dataSource.data(),s=n._nameDirectory(),l=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);l.set(r,"d"),l.set(o,s),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+d.attr("uid")+"="+l.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,l.uid)?n._nameDirectory():t):e.model.set(o,s)}),n.dataSource.insert(++i,l)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data(),o=A,a=T;for(n=0,i=r.length;i>n;n++)if("d"===r[n].get(o)&&r[n].get(a).toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=A,l=T;for(n=0,i=o.length;i>n;n++)"d"===o[n].get(s)&&o[n].get(l).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(l));if(e.inArray(r,a)>-1){n=2;do t=r+" ("+n+")",n++;while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:A,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:T,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+x,"li",p(t._dblClick,t)),t.listView=new d.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+d.attr("type")+"=f]"):this.wrapper.append(M({text:t.options.messages.emptyFolder}))},change:p(t._listViewChange,t)})},_dblClick:function(t){var n,r=this,o=e(t.currentTarget);o.hasClass("k-edit-item")&&r._directoryBlur(),o.filter("["+d.attr("type")+"=d]").length?(n=r.dataSource.getByUid(o.attr(d.attr("uid"))),n&&(r.path(i(r.path(),n.get(T))),r.breadcrumbs.value(r.path()))):o.filter("["+d.attr("type")+"=f]").length&&r.trigger(w)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(A)&&this.trigger(y))},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=f({},E),o={field:T,dir:"asc"},a={type:i.type||"filebrowser",sort:[r,o]};h(i)&&(i.path=p(t.path,t),a.transport=i),h(n.schema)?a.schema=n.schema:i.type&&h(d.data.schemas[i.type])&&(e=d.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(b,t._errorHandler):t._errorHandler=p(t._error,t),t.dataSource=d.data.DataSource.create(a).bind(b,t._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(b,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+="#if("+A+' == "d") { #',e+='<input class="k-input" '+d.attr("bind")+'="value:'+T+'"/>',e+="#}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},_itemTmpl:function(){var e='<li class="k-tile" '+d.attr("uid")+'="#=uid#" ';return e+=d.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${"+T+"}</strong>",e+="#if("+A+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+D+")}</span> #}#",e+="</li>",p(d.template(e),{sizeFormatter:r})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(_,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(_,"")),"/"===i||""===i?"":i+"/")}}),l=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),g&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+S,p(n._keydown,n)).on("change"+S,p(n._updateValue,n)),n.wrapper.on(k+S,"a",p(n._click,n)),g||n.element.on("focus"+S,p(n._focus,n)).on("blur"+S,p(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[y],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(S),u.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(y))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){g||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),g||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),c=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+C,"input",p(n._focus,n)).on("blur"+C,"input",p(n._blur,n)).on("keydown"+C,"input",p(n._keydown,n)).on(k+C,"a.k-i-arrow-n:first",p(n._rootClick,n)).on(k+C,"a:not(.k-i-arrow-n)",p(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[y],destroy:function(){var e=this;u.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(C)},_update:function(e){e="/"===(e||"").charAt(0)?e:"/"+(e||""),e!==this.value()&&(this.value(e),this.trigger(y))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),t=i.find(".k-breadcrumbs-wrap"),t.length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o,a="",s=this.value();for(s!==t&&s.match(/^\//)||(s="/"+(s||"")),n=s.split("/"),r=0,o=n.length;o>r;r++)i=n[r],i&&(a||(a+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),a+='<a class="k-link" href="#">'+n[r]+"</a>",a+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(a)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper,r=i.width()-n.options.gap,o=n.overlay.find("a");o.each(function(n){t=e(this),t.parent().width()>r&&(n==o.length-1?t.width(r):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value
},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),d.ui.plugin(s),d.ui.plugin(c),d.ui.plugin(l)}(window.kendo.jQuery),function(e,t){function n(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r,o,a=window.kendo,s=a.ui.FileBrowser,l=e.isPlainObject,c=e.proxy,d=e.extend,u=a.support.browser,h=a.isFunction,p=/(^\/|\/$)/g,f="error",g=".kendoImageBrowser",m="name",v="size",_="type",y={field:_,dir:"asc"},w=a.template('<li class="k-tile-empty"><strong>${text}</strong></li>');d(!0,a.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),d(!0,a.data,{transports:{imagebrowser:a.data.RemoteTransport.extend({init:function(t){a.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),h(this.options[t])?this.options[t].call(this,n):a.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),r=u.msie&&8>u.version?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},o=s.extend({init:function(e,t){var n=this;t=t||{},s.fn.init.call(n,e,t),n.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,i=this,r=i._selectedItem(),o=i.options.transport.imageUrl;return r&&"f"===r.get(_)?(e=n(i.path(),r.get(m)).replace(p,""),o&&(e=h(o)?o(e):a.format(o,encodeURIComponent(e))),e):t},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),s=e.files[0].name,l=m,c=v;o.test(s)?(e.data={path:n.path()},t=n._createFile(s),t?(t._uploading=!0,n.upload.one("success",function(e){delete t._uploading,t.set(l,e.response[n._getFieldName(l)]),t.set(c,e.response[n._getFieldName(c)]),n._tiles=n.listView.items().filter("["+a.attr("type")+"=f]"),n._scroll()})):e.preventDefault()):(e.preventDefault(),n._showMessage(a.format(i.messages.invalidFileType,s,r)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+g,c(t._scroll,t)).on("dblclick"+g,"li",c(t._dblClick,t)),t.listView=new a.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+a.attr("type")+"=f]"),t._scroll()):this.wrapper.append(w({text:t.options.messages.emptyFolder}))},change:c(t._listViewChange,t)})},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=d({},y),o={field:m,dir:"asc"},s={type:i.type||"imagebrowser",sort:[r,o]};l(i)&&(i.path=c(t.path,t),s.transport=i),l(n.schema)?s.schema=n.schema:i.type&&l(a.data.schemas[i.type])&&(e=a.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(f,t._errorHandler):t._errorHandler=c(t._error,t),t.dataSource=a.data.DataSource.create(s).bind(f,t._errorHandler)},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(a.attr("uid"))),o=r.get(m),s=n.options.transport.thumbnailUrl,l=e("<img />",{alt:o}),c="?";r._uploading||(l.hide().on("load"+g,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(l),h(s)?s=s(n.path(),encodeURIComponent(o)):(s.indexOf("?")>=0&&(c="&"),s=s+c+"path="+n.path()+encodeURIComponent(o)),l.attr("src",s),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),i=e.list.scrollTop(),o=i+n;e._tiles.each(function(){var n=r(this),a=n+this.offsetHeight;return(n>=i&&o>n||a>=i&&o>a)&&e._loadImage(this),n>o?!1:t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e=this,t='<li class="k-tile" '+a.attr("uid")+'="#=uid#" ';return t+=a.attr("type")+'="${'+_+'}">',t+="#if("+_+' == "d") { #',t+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',t+="#}#",t+="<strong>${"+m+"}</strong>",t+="#if("+_+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+v+")}</span> #}#",t+="</li>",c(a.template(t),{sizeFormatter:i})}}),a.ui.plugin(o)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.support.mobileOS,d=a.support.browser,u=e.extend,h=e.proxy,p=a.deepExtend,f=".kendoEditor",g=a.keys,m=s.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return a.template(e.template,{useWithBlock:!1})(e)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',formatByName:function(t,n){for(var i=0;n.length>i;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),b.defaultTools[e]=t},registerFormat:function(e,t){b.fn.options.formats[e]=t}},_={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},y=!c||c.ios&&c.flatVersion>=500||!c.ios&&t!==document.documentElement.contentEditable,w={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},b=l.extend({init:function(t,n){var i,r,o,s,c=this,d=a.ui.editor;y&&(l.fn.init.call(c,t,n),c.options=p({},c.options,n),t=c.element,s=d.Dom.name(t[0]),t.closest("form").on("submit"+f,function(){c.update()}),o=u({},c.options),o.editor=c,"textarea"==s?(c._wrapTextarea(),r=c.wrapper.find(".k-editor-toolbar"),t[0].id&&r.attr("aria-controls",t[0].id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),o.popup=!0,r=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),c.toolbar=new d.Toolbar(r[0],o),c.toolbar.bindTo(c),"textarea"==s&&setTimeout(function(){var e=c.wrapper[0].style.height,t=parseInt(e,10),n=c.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&n>t&&c.wrapper.height(t-(n-t))}),c._initializeContentElement(c),c.keyboard=new d.Keyboard([new d.TypingHandler(c),new d.BackspaceHandler(c),new d.SystemHandler(c)]),c.clipboard=new d.Clipboard(this),c.undoRedoStack=new d.UndoRedoStack,i=n&&n.value?n.value:c.textarea?t.val().replace(/[\r\n\v\f\t ]+/gi," "):t[0].innerHTML,c.value(i),e(document).on("mousedown",h(c._endTyping,c)).on("mouseup",h(c._mouseup,c)),a.notify(c))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(t){}},_selectionChange:function(){d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=v.editorWrapperTemplate,a=e(o).insertBefore(n).width(i).height(r),s=a.find(".k-editable-area");n.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=a},_createContentElement:function(t){var n,i,r,o=this,s=o.textarea,l=o.options.domain,c=l||document.domain,d="",u='javascript:""';return(l||c!=location.hostname)&&(d='<script>document.domain="'+c+'"</script>',u="javascript:document.write('"+d+"')"),s.hide(),n=e("<iframe />",{frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").insertBefore(s),n.src=u,i=n.contentWindow||n,r=i.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(r.body)}),r.open(),r.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+d+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),r.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),n!=t&&this.trigger("change")},_initializeContentElement:function(){var n,i,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),n=r.document=r.window.contentDocument||r.window.document,r.body=n.body,i=r.window,e(n).on("mouseup"+f,h(r._mouseup,r))):(r.window=window,n=r.document=document,r.body=r.element[0],i=r.body,r.toolbar.decorateFrom(r.body)),e(i).on("blur"+f,h(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(o){}a.support.touch&&e(n).on("selectionchange"+f,h(this._selectionChange,this)).on("keydown"+f,function(){a._activeElement()!=n.body&&r.window.focus()}),e(r.body).on("keydown"+f,function(e){var n,i,o,a,s,l;return e.keyCode===g.F10?(setTimeout(h(r.toolbar.focus,r.toolbar),100),e.preventDefault(),t):((e.keyCode==g.LEFT||e.keyCode==g.RIGHT)&&(n=r.getRange(),i=e.keyCode==g.LEFT,o=n[i?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],s=i?-1:1,i&&(a-=1),a+s>0&&3==o.nodeType&&"﻿"==o.nodeValue[a]&&(n.setStart(o,a+s),n.collapse(!0),r.selectRange(n))),(l=r.keyboard.toolFromShortcut(r.toolbar.tools,e))?(e.preventDefault(),/^(undo|redo)$/.test(l)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(l),!1):(r.keyboard.clearTimeout(),r.keyboard.keydown(e),t))}).on("keyup"+f,function(t){var n=[8,9,33,34,35,36,37,38,39,40,40,45,46];(e.inArray(t.keyCode,n)>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)}).on("mousedown"+f,function(t){if(r._selectionStarted=!0,!d.gecko){var n=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+f,function(e){var t,n=a.ui.editor.Dom;"img"===n.name(e.target)&&(t=r.createRange(),t.selectNode(e.target),r.selectRange(t))}).on("cut"+f+" paste"+f,function(e){r.clipboard["on"+e.type](e)}).on("focusin"+f,function(){e(this).addClass("k-state-active"),r.toolbar.show(),r.textarea&&r.selectRange(r.getRange())}).on("focusout"+f,function(){setTimeout(function(){var t=a._activeElement(),n=r.body,i=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea&&(e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:_,formats:{},encoded:!0,domain:null,serialization:{entities:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],w.basic,w.alignment,w.lists,w.indenting,w.links,["insertImage"],w.tables)},destroy:function(){var t=this;l.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("mousedown",h(t._endTyping,t)).off("mouseup",h(t._mouseup,t)),t._focusOutside(),t.toolbar.destroy(),a.destroy(t.wrapper)},_focusOutside:function(){if(a.support.browser.msie&&this.textarea){var t=e("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus();t.blur().remove()}},state:function(e){var t,n,i=b.defaultTools[e],r=i&&(i.options.finder||i.finder),o=a.ui.editor.RangeUtils;return r?(t=this.getRange(),n=o.textNodes(t),!n.length&&t.collapsed&&(n=[t.startContainer]),r.getFormat?r.getFormat(n):r.isFormatted(n)):!1},value:function(e){var n=this.body,i=a.ui.editor,r=i.Serializer.domToXhtml(n,this.options.serialization);return e===t?r:(e!=r&&(i.Serializer.htmlToDom(e,n),d.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),t)},saveSelection:function(t){t=t||this.getRange();var n=t.commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(t))},_focusBody:function(){var e,t=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,r=a._activeElement();r!=t&&r!=n&&(e=i.scrollTop,t.focus(),i.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(e){return a.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.clipboard.paste(e,t)},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),r=a.toolbar.toolById(e),!r)for(o in b.defaultTools)if(o.toLowerCase()==e){r=b.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(u({range:i},n))),a.trigger("execute",{name:e,command:s}),/^(undo|redo)$/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=h(a._selectionChange,a),t;a._selectionChange()}}});b.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(b),n=s.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:e.noop}),n.exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){var t=this;return new a.ui.editor.FormatCommand(u(e,{formatter:t.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),r=d.msie&&9>d.version?"﻿":"",o='<br class="k-br" />',d.msie&&(10>d.version?o="﻿":11>d.version&&(o=" ")),u(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:r,emptyElementContent:o}})}(window.jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,c,d,u,h=window.kendo,p=e.map,f=e.extend,g=h.support.browser,m="style",v="float",_="cssFloat",y="styleFloat",w="class",b="k-marker",k=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),x="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=x.concat(["ul","ol","li"]),S=t(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),D=t(T),A=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),E=function(e){1==e.nodeType&&e.normalize()};g.msie&&g.version>=8&&(E=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;;){if(n=n.nextSibling,!n)break;3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,u.remove(t)),t=n}}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,r=/\ufeff/g,o=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,d={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},u={block:S,inline:D,findNodeIndex:function(e,t){var n=0;if(!e)return-1;for(;;){if(e=e.previousSibling,!e)break;t&&3==e.nodeType||n++}return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!u.isDataNode(t)&&(e.contains(t,u.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(i){return!1}},isAncestorOrSelf:function(e,t){return u.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(u.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return u.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n=e.cloneNode(!1),i="",r=e;r.nextSibling&&3==r.nextSibling.nodeType&&r.nextSibling.nodeValue;)i+=r.nextSibling.nodeValue,r=r.nextSibling;e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=i,u.insertAfter(n,e)},attrEquals:function(e,t){var n,i;for(n in t)if(i=e[n],n==v&&(i=e[h.support.cssFloat?_:y]),"object"==typeof i){if(!u.attrEquals(i,t[n]))return!1}else if(i!=t[n])return!1;return!0},blockParentOrBody:function(e){return u.parentOfType(e,C)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)r=u.parentOfType(t[n],u.blockElements),r&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:E,blockElements:C,nonListBlockElements:x,inlineElements:T,empty:k,fillAttrs:A,toHex:function(e){var t=i.exec(e);return t?"#"+p(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e,t){var n=!t||t.entities?c:l;return e.replace(n,function(e){var t=e.charCodeAt(0),n=d[t];return n?"&"+n+";":e})},stripBom:function(e){return(e||"").replace(r,"")},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||u.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},emptyNode:function(t){var n=e.grep(t.childNodes,function(e){return u.is(e,"br")?!1:u.insignificant(e)?!1:3==e.nodeType&&o.test(e.nodeValue)?!1:u.is(e,"p")&&u.emptyNode(e)?!1:!0});return!n.length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!u.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=u.lastTextNode(t))return n;return n},is:function(e,t){return u.name(e)==t},isMarker:function(e){return e.className==b},isWhitespace:function(e){return n.test(e.nodeValue)},isBlock:function(e){return S[u.name(e)]},isEmpty:function(e){return k[u.name(e)]},isInline:function(e){return D[u.name(e)]},scrollContainer:function(e){var t=u.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return n=h.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(u.isDataNode(t)?t.parentNode:t),o=u.windowFromDocument(t.ownerDocument),a=o.innerHeight,s=u.scrollContainer(t.ownerDocument);"br"==u.name(r[0])&&(r=r.parent()),n=r.offset().top,i=r[0].offsetHeight,i+n>s.scrollTop+a&&(s.scrollTop=i+n-a)},persistScrollTop:function(e){a=u.scrollContainer(e).scrollTop},restoreScrollTop:function(e){u.scrollContainer(e).scrollTop=a},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],u.isDataNode(n)?(u.stripBom(n.nodeValue).length||u.remove(n),u.isWhitespace(n)&&u.insertBefore(n,e)):n.className!=b&&(u.trim(n),n.childNodes.length||u.isEmpty(n)||u.remove(n));return e},closest:function(e,t){for(;e&&u.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return u.sibling(e,"nextSibling")},prev:function(e){return u.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!u.ofType(e,t));return e},ofType:function(t,n){return e.inArray(u.name(t),n)>=0},changeTag:function(e,t,n){var i,r,o,a,s,l=u.create(e.ownerDocument,t),c=e.attributes;if(!n)for(i=0,r=c.length;r>i;i++)s=c[i],s.specified&&(o=s.nodeName,a=s.nodeValue,o==w?l.className=a:o==m?l.style.cssText=e.style.cssText:l.setAttribute(o,a));for(;e.firstChild;)l.appendChild(e.firstChild);return u.insertBefore(l,e),u.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return u.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return u.attr(e.createElement(t),n)},attr:function(e,t){t=f({},t),t&&m in t&&(u.style(e,t.style),delete t.style);for(var n in t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return f(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(e,t){for(var n in t)n==v&&(n=h.support.cssFloat?_:y),e.style[n]="";""===e.style.cssText&&e.removeAttribute(m)},inlineStyle:function(t,n,i){var r,o=e(u.create(t.ownerDocument,n,i));return t.appendChild(o[0]),r=p(s,function(e){return g.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":u.getEffectiveBackground(e.parent())},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");o=e.trim(o),o.length?t.className=o:t.removeAttribute(w)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(t){var n,i,r;return n=1==t.length?u.parentOfType(t[0],["ul","ol"]):u.commonAncestor.apply(null,t),n||(n=u.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),u.isInline(n)&&(n=u.blockParentOrBody(n)),i=p(t,u.editableParent),r=u.commonAncestor(i)[0],e.contains(n,r)&&(n=r),n},closestEditable:function(t,n){var i=u.parentOfType(t,n),r=u.editableParent(t);return i&&r&&e.contains(i,r)?i=r:!i&&r&&(i=r),i},closestEditableOfType:function(e,t){var n=u.closestEditable(e,t);return n&&u.ofType(n,t)?n:void 0},filter:function(e,t,n){for(var i,r=0,o=t.length,a=[];o>r;r++)i=u.name(t[r]),(!n&&i==e||n&&i!=e)&&a.push(t[r]);return a},ensureTrailingBreaks:function(t){var n=e(t).find("p,td,th"),i=n.length,r=0;
if(i)for(;i>r;r++)u.ensureTrailingBreak(n[r]);else u.ensureTrailingBreak(t)},ensureTrailingBreak:function(e){var t,n=e.lastChild,i=n&&u.name(n);(!i||"br"!=i&&"img"!=i||"br"==i&&"k-br"!=n.className)&&(t=e.ownerDocument.createElement("br"),t.className="k-br",e.appendChild(t))}},h.ui.editor.Dom=u}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.ui.editor,a=o.Dom,s=e.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,d=/<br[^>]*>/i,u=/^\d+(\.\d*)?(px)?$/i,h=/<p><\/p>/i,p=/([\w|\-]+)\s*:\s*([^;]+);?/i,f=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(e){var t='<br class="k-br">';return e=e||"",e.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script$1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,t+"<$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+t)},_fillEmptyElements:function(t){e(t).find("p").each(function(){var t,n=e(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(t=this;t.firstChild&&3!=t.firstChild.nodeType;)t=t.firstChild;1!=t.nodeType||a.empty[a.name(t)]||(t.innerHTML=r.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,n,i,r=e.getElementsByTagName("ol");for(t=0;r.length>t;t++)n=r[t],i=n.getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,n,i,r=this.attributes;for(t=0,n=r.length;n>t;t++)e=r[t],i=e.nodeName,e.specified&&/^on/i.test(i)&&(this.removeAttribute(i),this.setAttribute("k-script-"+i,e.nodeValue))})},htmlToDom:function(t,n){var o,s,l=r.support.browser,c=l.msie,d=c&&9>l.version;return t=i.toEditableHtml(t),d&&(t="<br/>"+t,o="originalsrc",s="originalhref",t=t.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,s+'="$1"'),t=t.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"')),n.innerHTML=t,d?(a.remove(n.firstChild),e(n).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[s]&&(e.setAttribute("href",e[s]),e.removeAttribute(s)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):c&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(i,o){function s(t){var n,i,r,o,s=e.trim,l=s(t).split(";"),d=l.length;for(n=0,d=l.length;d>n;n++)l[n].length&&(i=p.exec(l[n]),i&&(r=s(i[1].toLowerCase()),o=s(i[2]),"font-size-adjust"!=r&&"font-stretch"!=r&&(r.indexOf("color")>=0?o=a.toHex(o):r.indexOf("font")>=0?o=o.replace(c,"'"):/\burl\(/g.test(o)&&(o=o.replace(c,"")),b.push(r),b.push(":"),b.push(o),b.push(";"))))}function m(n){var i,l,c,d,h,p,m,v,_,y=[],w=n.attributes;for(a.is(n,"img")&&(m=n.style.width,v=n.style.height,_=e(n),m&&u.test(m)&&(_.attr("width",parseInt(m,10)),a.unstyle(n,{width:t})),v&&u.test(v)&&(_.attr("height",parseInt(v,10)),a.unstyle(n,{height:t}))),l=0,c=w.length;c>l;l++)i=w[l],d=i.nodeName,h=i.nodeValue,p=i.specified,"value"==d&&"value"in n&&n.value?p=!0:"type"==d&&"text"==h?p=!0:"class"!=d||h?f.test(d)?p=!1:"complete"==d?p=!1:"altHtml"==d?p=!1:"start"==d&&(a.is(n,"ul")||a.is(n,"ol"))?p=!1:d.indexOf("_moz")>=0?p=!1:g.test(d)&&(p=!!o.scripts):p=!1,p&&y.push(i);if(y.length)for(y.sort(function(e,t){return e.nodeName>t.nodeName?1:t.nodeName>e.nodeName?-1:0}),l=0,c=y.length;c>l;l++)i=y[l],d=i.nodeName,h=i.nodeValue,("class"!=d||"k-table"!=h)&&(d=d.replace(g,""),b.push(" "),b.push(d),b.push('="'),"style"==d?s(h||n.style.cssText):b.push("src"==d||"href"==d?r.htmlEncode(n.getAttribute(d,2)):a.fillAttrs[d]?d:h),b.push('"'))}function v(e,t,n){for(var i=e.firstChild;i;i=i.nextSibling)y(i,t,n)}function _(e){return e.nodeValue.replace(/\ufeff/g,"")}function y(e,i,r){var s,l,c,d,u,h=e.nodeType;if(1==h){if(s=a.name(e),!s||a.insignificant(e))return;if(a.isInline(e)&&1==e.childNodes.length&&3==e.firstChild.nodeType&&!_(e.firstChild))return;if(!o.scripts&&"telerik:script"==s)return;if(l=k[s])return l.start(e),v(e,!1,l.skipEncoding),l.end(e),t;b.push("<"),b.push(s),m(e),a.empty[s]?b.push(" />"):(b.push(">"),v(e,i||a.is(e,"pre")),b.push("</"),b.push(s),b.push(">"))}else 3==h?(d=_(e),!i&&n&&(c=e.parentNode,u=e.previousSibling,u||(u=(a.isInline(c)?c:e).previousSibling),(!u||""===u.innerHTML||a.isBlock(u))&&(d=d.replace(/^[\r\n\v\f\t ]+/,"")),d=d.replace(/ +/," ")),b.push(r?d:a.encode(d,o))):4==h?(b.push("<![CDATA["),b.push(e.data),b.push("]]>")):8==h&&(e.data.indexOf("[CDATA[")<0?(b.push("<!--"),b.push(e.data),b.push("-->")):(b.push("<!"),b.push(e.data),b.push(">")))}function w(e){var t=e.childNodes.length,n=t&&3==e.firstChild.nodeType;return n&&(1==t||2==t&&a.insignificant(e.lastChild))}var b=[],k={"telerik:script":{start:function(e){b.push("<script"),m(e),b.push(">")},end:function(){b.push("</script>")},skipEncoding:!0},b:{start:function(){b.push("<strong>")},end:function(){b.push("</strong>")}},i:{start:function(){b.push("<em>")},end:function(){b.push("</em>")}},u:{start:function(){b.push('<span style="text-decoration:underline;">')},end:function(){b.push("</span>")}},iframe:{start:function(e){b.push("<iframe"),m(e),b.push(">")},end:function(){b.push("</iframe>")}},font:{start:function(e){var t,n,i;b.push('<span style="'),t=e.getAttribute("color"),n=l[e.getAttribute("size")],i=e.getAttribute("face"),t&&(b.push("color:"),b.push(a.toHex(t)),b.push(";")),i&&(b.push("font-face:"),b.push(i),b.push(";")),n&&(b.push("font-size:"),b.push(n),b.push(";")),b.push('">')},end:function(){b.push("</span>")}}};return o=o||{},w(i)?a.encode(_(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),o):(v(i),b=b.join(""),""===b.replace(d,"").replace(h,"")?"":b)}},s(o,{Serializer:i})}(window.kendo.jQuery),function(e){function t(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return p(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-p(r)-1;for(o=h.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:p(s)-p(a)}function n(e,n){function i(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(n){return!0}}i(e)&&(n?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!h.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),h.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}function o(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=f(r),l=s?r:r.childNodes[o]||null,c=s?r.parentNode:r,d=t.ownerDocument,u=d.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),c||(c=d.body),"img"==c.nodeName.toLowerCase()?(u.moveToElementText(c),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u)):(i=c.insertBefore(h.create(d,"a"),l),u.moveToElementText(i),h.remove(i),u[n?"moveStart":"moveEnd"]("character",a),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u))}function a(e,t,n,i){var r,o,a,s,l,c,d,u=h.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;u.innerHTML="﻿",g.collapse(i),o=g.parentElement(),h.isAncestorOrSelf(n,o)||(o=n);do v?o.insertBefore(u,u.previousSibling):(o.appendChild(u),v=!0),g.moveToElementText(u);while((r=g.compareEndPoints(m,e))>0&&u.previousSibling);a=u.nextSibling,-1==r&&f(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),h.remove(u),c=[a,g.text.length]):(s=!i&&u.previousSibling,l=i&&u.nextSibling,f(l)?c=[l,0]:f(s)?c=[s,s.length]:(d=p(u),c=o.nextSibling&&d==o.childNodes.length-1?[o.nextSibling,0]:[o,d]),h.remove(u)),t[i?"setStart":"setEnd"].apply(t,c)}var s=window.kendo,l=s.Class,c=e.extend,d=s.ui.editor,u=s.support.browser,h=d.Dom,p=h.findNodeIndex,f=h.isDataNode,g=h.findClosestAncestor,m=h.getNodeLength,v=h.normalize,_={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new b(e.document)},selectionFromRange:function(e){var t=T.documentFromRange(e);return _.selectionFromDocument(t)},selectionFromDocument:function(e){return _.selectionFromWindow(h.windowFromDocument(e))}},y=l.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,i(this),n(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,i(this),n(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,p(e))},setStartAfter:function(e){this.setStart(e.parentNode,p(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,p(e))},setEndAfter:function(e){this.setEnd(e.parentNode,p(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(g(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function n(e){for(;e.next();)e.hasPartialSubtree()?n(e.getSubtreeIterator()):e.remove()}(new w(t))},cloneContents:function(){var e=T.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new w(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(g(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=T.documentFromRange(t),function i(n){for(var r,o=e.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1),r.appendChild(i(n.getSubtreeIterator()))):n.remove(t.originalRange),o.appendChild(r);return o}(new w(n))},insertNode:function(e){var t=this;f(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&h.splitDataNode(t.startContainer,t.startOffset),h.insertAfter(e,t.startContainer)):h.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new y(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return("#text"==e?this.startContainer.nodeValue:e)+"("+this.startOffset+") : "+("#text"==t?this.endContainer.nodeValue:t)+"("+this.endOffset+")"}}),w=l.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||f(t.startContainer)?g(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||f(t.endContainer)?g(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,f(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function t(){return i._current=i._next,i._next=i._current&&i._current.nextSibling!=i._end?i._current.nextSibling:null,i._current}for(var n,i=this;n=t();)i.hasPartialSubtree()?i.getSubtreeIterator().traverse(e):e(n);return n},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;f(a._current)&&(s||l)?(t=s?a.range.startOffset:0,n=l?a.range.endOffset:a._current.length,i=n-t,e&&(s||l)&&(a._current==e.startContainer&&e.startOffset>=t&&(e.startOffset-=i),a._current==e.endContainer&&e.endOffset>=n&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=p(a._current),r==e.startContainer&&e.startOffset>=o&&(e.startOffset-=1),r==e.endContainer&&e.endOffset>o&&(e.endOffset-=1)),h.remove(a._current))},hasPartialSubtree:function(){return!f(this._current)&&(h.isAncestorOrSelf(this._current,this.range.startContainer)||h.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),h.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),h.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new w(t)}}),b=l.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();o(t,e,!1),o(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,n,i,o,s,l,c,d=new y(this.ownerDocument),u=this.ownerDocument.selection;try{if(e=u.createRange(),t=e.item?e.item(0):e.parentElement(),t.ownerDocument!=this.ownerDocument)return d}catch(h){return d}if("Control"==u.type)d.selectNode(e.item(0));else if(n=r(e),a(e,d,n,!0),a(e,d,n,!1),9==d.startContainer.nodeType&&d.setStart(d.endContainer,d.startOffset),9==d.endContainer.nodeType&&d.setEnd(d.startContainer,d.endOffset),0===e.compareEndPoints("StartToEnd",e)&&d.collapse(!1),i=d.startContainer,o=d.endContainer,s=this.ownerDocument.body,!(d.collapsed||0!==d.startOffset||d.endOffset!=m(d.endContainer)||i==o&&f(i)&&i.parentNode==s)){for(l=!1,c=!1;0===p(i)&&i==i.parentNode.firstChild&&i!=s;)i=i.parentNode,l=!0;for(;p(o)==m(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=s;)o=o.parentNode,c=!0;i==s&&o==s&&l&&c&&(d.setStart(i,0),d.setEnd(o,m(s)))}return d}}),k=l.extend({init:function(e){this.enumerate=function(){function t(e){if(h.is(e,"img")||3==e.nodeType&&(!h.isWhitespace(e)||"﻿"==e.nodeValue))n.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var n=[];return new w(e).traverse(t),n}}}),x=l.extend({init:function(e,t){var n=this;n.range=e,n.rootNode=T.documentFromRange(e),n.body=t||n.getEditable(e),"body"!=h.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(e.startContainer),n.endContainer=n.nodeToPath(e.endContainer),n.startOffset=n.offset(e.startContainer,e.startOffset),n.endOffset=n.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)t=e.nodeType,(3!=t||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;r&&3==r.nodeType&&a>r.nodeValue.length;)a-=r.nodeValue.length,r=r.nextSibling;r&&a>=0&&e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),C=l.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=h.create(T.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=f(a)?a.nodeValue.length:p(a)),t=o.caret.parentNode,n=a?p(a):0,h.remove(o.caret),v(t),i=t.childNodes[n],f(i)?e.setStart(i,s):i?(r=h.lastTextNode(i),r?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i)):(u.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!T.isExpandable(e),a=T.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=T.expand(e)),n=e.cloneRange(),n.collapse(!1),r.end=h.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),n=e.cloneRange(),n.collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("﻿"),h.insertAfter(i.cloneNode(),r.start),h.insertBefore(i,r.end)),e.setStartBefore(r.start),e.setEndAfter(r.end),v(e.commonAncestorContainer),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"﻿"==e.previousSibling.nodeValue&&h.remove(e.previousSibling),t.nextSibling&&"﻿"==t.nextSibling.nodeValue&&h.remove(t.nextSibling)},remove:function(e){var t,n,i,r,o,a,s,l,c,d,u,g,m,_=this,y=_.start,w=_.end;for(v(e.commonAncestorContainer);!y.nextSibling&&y.parentNode;)y=y.parentNode;for(;!w.previousSibling&&w.parentNode;)w=w.parentNode;if(t=y.previousSibling&&3==y.previousSibling.nodeType&&y.nextSibling&&3==y.nextSibling.nodeType,n=w.previousSibling&&3==w.previousSibling.nodeType&&w.nextSibling&&3==w.nextSibling.nodeType,i=t&&n,y=y.nextSibling,w=w.previousSibling,r=!1,o=!1,y==_.end&&(o=!!_.start.previousSibling,y=w=_.start.previousSibling||_.end.nextSibling,r=!0),h.remove(_.start),h.remove(_.end),!y||!w)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);if(a=r?f(y)?y.nodeValue.length:y.childNodes.length:0,s=f(w)?w.nodeValue.length:w.childNodes.length,3==y.nodeType)for(;y.previousSibling&&3==y.previousSibling.nodeType;)y=y.previousSibling,a+=y.nodeValue.length;if(3==w.nodeType)for(;w.previousSibling&&3==w.previousSibling.nodeType;)w=w.previousSibling,s+=w.nodeValue.length;for(l=p(y),c=y.parentNode,d=p(w),u=w.parentNode,g=y;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&l--;for(m=w;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&d--;v(c),3==y.nodeType&&(y=c.childNodes[l]),v(u),3==w.nodeType&&(w=u.childNodes[d]),r?(3==y.nodeType?e.setStart(y,a):e[o?"setStartAfter":"setStartBefore"](y),e.collapse(!0)):(3==y.nodeType?e.setStart(y,a):e.setStartBefore(y),3==w.nodeType?e.setEnd(w,s):e.setEndAfter(w)),_.caret&&_.removeCaret(e)}}),S=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,T={nodes:function(e){var t=T.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=T.textNodes(e),t.length||(t=h.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return u.msie&&9>u.version?new y(e):e.createRange()},selectRange:function(e){var t,n=T.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),t=_.selectionFromRange(e),t.removeAllRanges(),t.addRange(e)},stringify:function(e){return s.format("{0}:{1} - {2}:{3}",h.name(e.startContainer),e.startOffset,h.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=h.trim(r)),h[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},mapAll:function(t,n){var i=[];return new w(t).traverse(function(t){var r=n(t);r&&e.inArray(r,i)<0&&i.push(r)}),i},getAll:function(e,t){var n=t;return"string"==typeof t&&(t=function(e){return h.is(e,n)}),T.mapAll(e,function(e){return t(e)?e:void 0})},getMarkers:function(e){return T.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=T.getAll(e,"img");return 1==t.length?t[0]:void 0},wrapSelectedElements:function(e){function t(e,t){var n,i=h.getNodeLength(t);if(e==i)return!0;for(n=e;i>n;n++)if(!h.insignificant(t.childNodes[n]))return!1;return!0}for(var n=h.editableParent(e.startContainer),i=h.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=n;)e.setStart(e.startContainer.parentNode,h.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,h.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return f(a)&&f(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(S),r=n.search(S),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=T.documentFromRange(e);return s==l||s==l.body?!1:(t=e.cloneRange(),(n=s.nodeValue)?(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(S)),r&&(a=r.search(S)),o&&a):!1)}};c(d,{SelectionUtils:_,W3CRange:y,RangeIterator:w,W3CSelection:b,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:T})}(window.kendo.jQuery),function(e){function t(e,t){var n=e.selectionRestorePoint=new d(e.getRange()),i=new f(t,n);return i.editor=e,e.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,r=n.ui.editor,o=r.EditorUtils,a=o.registerTool,s=r.Dom,l=r.Tool,c=r.ToolTemplate,d=r.RestorePoint,u=r.Marker,h=e.extend,p=i.extend({init:function(e){this.options=e,this.restorePoint=new d(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,i){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=i.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=t.body,o=new d(i,r),a=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(a,n),n.postProcess&&n.postProcess(t,t.getRange()),e=new f(o,new d(t.getRange(),r)),e.editor=t,t.undoRedoStack.push(e),t.focus()}}),m=l.extend({initialize:function(e,t){var n=t.editor,i=this.options,o=i.items?i.items:n.options.insertHtml;new r.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new g(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=i.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),_=i.extend({init:function(e){this.editor=e},keydown:function(n){var i,r=this,o=r.editor,a=o.keyboard,s=a.isTypingKey(n),l=h(e.Event(),n);return r.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):l.isDefaultPrevented()||!s||a.isTypingInProgress()?!1:(i=o.getRange(),r.startRestorePoint=new d(i),a.startTyping(function(){r.endRestorePoint=t(o,r.startRestorePoint)}),!0)},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),t.isTypingInProgress()?(t.endTyping(),!0):!1}}),y=i.extend({init:function(e){this.editor=e},keydown:function(e){var i,r,o,a,l;if(e.keyCode===n.keys.BACKSPACE){if(i=this.editor,r=i.getRange(),o=n.support.browser.msie?"":'<br _moz_dirty="" />',r.collapsed)return;e.preventDefault(),a=new d(r),l=r.commonAncestorContainer,/t(able|body|r)/i.test(s.name(l))&&r.selectNode(s.closest(l,"table")),r.deleteContents(),l=r.commonAncestorContainer,"p"===s.name(l)&&""===l.innerHTML&&(l.innerHTML=o,r.setStart(l,0),r.collapse(!0),i.selectRange(r)),t(i,a)}},keyup:function(){}}),w=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new d(n.getRange()),!0):i.isSystem(e)?(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0):!1},keyup:function(){var e=this;return e.systemCommandIsInProgress&&e.changed()?(e.systemCommandIsInProgress=!1,e.createUndoCommand(),!0):!1}}),b=i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e||229==e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options),(r.key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),k=i.extend({init:function(e){this.editor=e,this.cleaners=[new C,new S,new T]},htmlToFragment:function(e){var t=this.editor,n=t.document,i=s.create(n,"div"),r=n.createDocumentFragment();for(i.innerHTML=e;i.firstChild;)r.appendChild(i.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,n=this.editor;if(!this._inProgress)return this._inProgress=!0,e=n.getRange(),t=new d(e),s.persistScrollTop(n.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var n=this,i=n.editor,r=n._startModification();r&&(e.call(n,i,r.range),setTimeout(function(){t.call(n,i,r.range),n._endModification(r)}))},oncut:function(){this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t,n){var i=t.getAsFile(),r=new FileReader;r.onload=n||e.noop,r.readAsDataURL(i)},_triggerPaste:function(e,t){var n={html:e||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,t||{})},_handleImagePaste:function(e){var t,n,i,r;if("FileReader"in window&&(t=this,n=e.clipboardData||e.originalEvent.clipboardData,i=n&&(n.items||n.files),i&&i.length&&/^image\//i.test(i[0].type)&&(r=t._startModification())))return this._fileToDataURL(i[0],function(e){t._triggerPaste('<img src="'+e.target.result+'" />'),t._endModification(r)}),!0},onpaste:function(t){this._handleImagePaste(t)||this._contentModification(function(i,r){var o,a,l,c=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"﻿"}),d=n.support.browser;i.body.appendChild(c),d.msie&&11>d.version?(t.preventDefault(),o=i.createRange(),o.selectNodeContents(c),i.selectRange(o),a=i.document.body.createTextRange(),a.moveToElementText(c),e(i.body).unbind("paste"),a.execCommand("Paste"),e(i.body).bind("paste",e.proxy(this.onpaste,this))):(l=i.createRange(),l.selectNodeContents(c),i.selectRange(l)),r.deleteContents()},function(t,n){var i,r="";t.selectRange(n),i=e(t.body).children(".k-paste-container"),i.each(function(){var e=this.lastChild;e&&s.is(e,"br")&&s.remove(e),r+=this.innerHTML}),i.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return s.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(t,n){var i,o,a,l,c,d,p,f,g,m,v,_=this.editor;for(n=h({clean:!1,split:!0},n),i=0,o=this.cleaners.length;o>i;i++)this.cleaners[i].applicable(t)&&(t=this.cleaners[i].clean(t));if(n.clean&&(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),t=t.replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(t),_.focus(),l=_.getRange(),l.deleteContents(),l.startContainer==_.document&&l.selectNodeContents(_.body),c=new u,d=c.addCaret(l),p=this.splittableParent(a,d),f=!1,g=p!=_.body&&!s.is(p,"td"),n.split&&g&&(a||s.isInline(p))&&(l.selectNode(d),r.RangeUtils.split(l,p,!0),f=!0),m=this.htmlToFragment(t),m.firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,o=m.childNodes.length;o>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(e(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),p=this.splittableParent(a,d),f){for(;d.parentNode!=p;)s.unwrap(d.parentNode);s.unwrap(d.parentNode)}s.normalize(l.commonAncestorContainer),d.style.display="inline",s.restoreScrollTop(_.document),s.scrollTo(d),c.removeCaret(l),_.selectRange(l)}}),x=i.extend({clean:function(e){var t,n,i=this,r=i.replacements;for(t=0,n=r.length;n>t;t+=2)e=e.replace(r[t],r[t+1]);return e}}),C=x.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return/<script[^>]*>/i.test(e)}}),S=x.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "
}]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivx]+\.$/i.test(e.firstChild.nodeValue)&&s.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&s.remove(e.firstChild),t=e.innerHTML),s.remove(e),s.create(document,"li",{innerHTML:t})},lists:function(t){var n,i,r,o,a,l,c,d,u,h=e(s.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},g=t;for(r=0;h.length>r;r++)if(o=h[r],a=this.listType(o.innerHTML),i=s.name(o),"td"!=i)if(a&&"p"==i){if(l=parseFloat(o.style.marginLeft||0),c=f[a][l],(l>p||!c)&&(c=s.create(document,a),g==t?s.insertBefore(c,o):g.appendChild(c),f[a][l]=c),n!=a)for(d in f)for(u in f[d])e.contains(c,f[d][u])&&delete f[d][u];g=this._convertToLi(o),c.appendChild(g),p=l,n=a}else o.innerHTML?(f={ul:{},ol:{}},g=t,p=-1):s.remove(o)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)"colspan"!=s.name(t[n])&&e.removeAttributeNode(t[n])},createColGroup:function(t){var i=t.cells,r=e(t).closest("table"),o=r.children("colgroup");2>i.length||(o.length&&(i=o.children(),o[0].parentNode.removeChild(o[0])),o=e(e.map(i,function(e){var t=e.width;return t&&0!==parseInt(t,10)?n.format('<col style="width:{0}px;"/>',t):"<col />"}).join("")),o.is("colgroup")||(o=e("<colgroup/>").append(o)),o.prependTo(r))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(r.length==i.length){for(n=0;r.length>n;n++)s.unwrap(r[n]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(t){var n,i,r,o,a;for(n=0;t.length>n;n++)for(this.removeAttributes(t[n]),o=e(t[n]),a=o.children("p"),i=0,r=a.length;r>i;i++)r-1>i&&s.insertAfter(s.create(document,"br"),a[i]),s.unwrap(a[i])},removeDefaultColors:function(e){for(var t=0;e.length>t;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&s.unwrap(e[t])},tables:function(t){var n,i,r,o,a,s=e(t).find("table"),l=this;for(o=0;s.length>o;o++){for(n=s[o].rows,r=i=n[0],a=1;n.length>a;a++)n[a].cells.length>r.cells.length&&(r=n[a]);l.createColGroup(r),l.convertHeaders(i),l.removeAttributes(s[o]),l.removeParagraphs(s.eq(o).find("td,th")),l.removeDefaultColors(s.eq(o).find("span"))}},headers:function(t){var n,i=e(t).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(e){var t,n=this;return e=x.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=s.create(document,"div",{innerHTML:e}),n.headers(t),n.lists(t),n.tables(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),T=x.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});h(r,{Command:p,GenericCommand:f,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:_,SystemHandler:w,BackspaceHandler:y,Keyboard:b,Clipboard:k,Cleaner:x,MSWordFormatCleaner:S,WebkitFormatCleaner:T}),a("insertHtml",new m({template:new c({template:o.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,c=i.Dom,d=i.RangeUtils,u=e.extend,h=i.EditorUtils.registerTool,p=i.EditorUtils.registerFormat,f="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==f?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==f&&o.lastChild.className==f?0:i+n},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:c.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,n,i,r,o,a=this.format,s=c.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&c.ofType(i,r)&&s(i,o))return i;for(;i;)if(i=c.parentOfType(i,r),i&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){this.finder=new g(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=d.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=[];for(t=0,n=e.length;n>t;t++)i=e[t],r=this.finder.findSuitable(i),r?c.attr(r,this.attributes):r=this.wrap(i),o.push(r);this.consolidate(o)},remove:function(e){var t,n,i;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(this.attributes&&this.attributes.style?(c.unstyle(i,this.attributes.style),i.style.cssText||i.attributes["class"]||c.unwrap(i)):c.unwrap(i))},split:function(e){var t,n,i=d.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)n=this.finder.findFormat(i[t]),n&&d.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==f&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);c.remove(t)}}}),v=g.extend({init:function(e,t){this.format=e,this.greedyProperty=t,g.fn.init.call(this,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,d,u,h,p,f,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(r=g[n],o=r.nodeName,a=r.nodeValue,r.specified&&"style"==o)for(s=m(a||t.style.cssText).split(";"),d=0,u=s.length;u>d;d++)if(l=s[d],l.length){if(h=l.split(":"),p=m(h[0].toLowerCase()),f=m(h[1]),p!=this.greedyProperty)continue;return p.indexOf("color")>=0?c.toHex(f):f}},getFormatInner:function(t){var n,i,r,o=e(c.isDataNode(t)?t.parentNode:t),a=o.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=a.length;i>n;n++)if(r="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),_=m.extend({init:function(e,n,i){m.fn.init.call(this,e,n),this.values=n,this.finder=new v(e,i),i&&(this.greedyProperty=t.toCamelCase(i))},activate:function(e,t){var n=this.greedyProperty,i="apply";this.split(e),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](t)}}),y=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),w=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),b=w.extend({init:function(e){a.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]||[]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new v(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=u({},k.fn.options,this.options),l=s.palette;n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}}),n.wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:w,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:y,FontTool:b,ColorTool:k}),p("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new y({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new y({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new y({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new y({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new y({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new y({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),h("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),h("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),h("fontName",new b({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new b({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t,n=window.kendo,i=n.Class,r=e.extend,o=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=o.Dom,l=o.Command,c=o.ToolTemplate,d=o.FormatTool,u=o.EditorUtils,h=u.registerTool,p=u.registerFormat,f=o.RangeUtils,g=i.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(r=t[n],!r||!s.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o,a=this.format,l=[];for(n=0,i=t.length;i>n;n++){for(o=a.length-1;o>=0&&!(r=s.ofType(t[n],a[o].tags)?t[n]:s.parentOfType(t[n],a[o].tags));o--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,l)<0&&l.push(r)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(e){var t,n,i,r,o,a=this.format,l=s.editableParent(e);for(t=0,n=a.length;n>t;t++)for(i=e,r=a[t].tags,o=a[t].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,r)&&s.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(s.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i,r,o,a,l,c=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(c)&&(c=s.blockParentOrBody(c)),i=s.significantChildNodes(c),r=s.findNodeIndex(i[0]),o=s.create(c.ownerDocument,e,t),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,t),o.childNodes.length&&(s.insertBefore(o,l),o=o.cloneNode(!1)),r=s.findNodeIndex(l)+1):o.appendChild(l);o.firstChild&&s.insertAt(c,o,r)},apply:function(t){function n(e){return r({},e&&e.attr,d)}var i,o,a,l,c,d=this.values,h=s.filter("img",t),p=u.formatByName("img",this.format),f=n(p);if(e.each(h,function(){s.attr(this,f)}),h.length!=t.length)if(o=s.filter("img",t,!0),a=this.finder.findSuitable(o),a.length)for(l=0,c=a.length;c>l;l++)i=u.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),o)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(o=s.name(i),"div"!=o||i.getAttribute("class")?(r=u.formatByName(o,this.format),r.attr.style&&s.unstyle(i,r.attr.style),r.attr.className&&s.removeClass(i,r.attr.className)):s.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=i.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,r,a,l,c,d=this.format,u=s.blockParents(e),h=d[0].tags[0];if(u.length)for(t=0,n=u.length;n>t;t++)c=s.name(u[t]),"li"==c?(i=u[t].parentNode,r=new o.ListFormatter(i.nodeName.toLowerCase(),h),a=this.editor.createRange(),a.selectNode(u[t]),r.toggle(a)):h&&("td"==c||u[t].attributes.contentEditable)?new m(d,this.values).apply(u[t].childNodes):(l=s.changeTag(u[t],h),s.attr(l,d[0].attr));else new m(d,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=f.textNodes(e),t.length||(t=s.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),_=l.extend({init:function(e){e.formatter=e.formatter(),l.fn.init.call(this,e)}}),y=d.extend({init:function(e){d.fn.init.call(this,r(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}});r(o,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:_,BlockFormatTool:y}),t=["ul","ol","li"],p("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"left",listStylePosition:""}}}]),h("justifyLeft",new y({format:a.justifyLeft,template:new c({template:u.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),h("justifyCenter",new y({format:a.justifyCenter,template:new c({template:u.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:t,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),h("justifyRight",new y({format:a.justifyRight,template:new c({template:u.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:t,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),h("justifyFull",new y({format:a.justifyFull,template:new c({template:u.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,c=i.RangeUtils,d=i.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return i.className="k-marker",t.insertNode(i),i.parentNode||(n=t.commonAncestorContainer,n.innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.is(t,"img"))e.setStartBefore(t);else{e.selectNodeContents(t);var n=c.textNodes(e)[0];if(n)r.is(n,"img")?e.setStartBefore(n):e.selectNodeContents(n);else{for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;e.selectNodeContents(t)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,n,o,a,d,u,h,p=this.getRange(),f=c.documentFromRange(p),g=i.emptyElementContent,m=this.shouldTrim(p);p.deleteContents(),a=this._insertMarker(f,p),d=r.closestEditableOfType(a,["li"]),u=r.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),d?r.emptyNode(d)&&(o=r.create(f,"p"),d.nextSibling&&(h=p.cloneRange(),h.selectNode(d),c.split(h,d.parentNode)),r.insertAfter(o,d.parentNode),r.remove(1==d.parentNode.childNodes.length?d.parentNode:d),o.innerHTML=g,n=o):u&&this._blankAfter(a)&&(o=r.create(f,"p"),r.insertAfter(o,u),o.innerHTML=g,r.remove(a),n=o),n||(d||u||new s([{tags:["p"]}]).apply([a]),p.selectNode(a),e=r.parentOfType(a,[d?"li":u?r.name(u):"p"]),c.split(p,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),this.clean(t),this.clean(n,{links:!0}),l(t)),l(n),this._moveFocus(p,n),p.collapse(!0),r.scrollTo(n),c.selectRange(p)},clean:function(e,t){var n=e;if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;if(!r.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&(e.innerHTML=i.emptyElementContent),t&&t.links)for(;e!=n;){if(r.is(e,"a")&&r.emptyNode(e)){r.unwrap(e);break}e=e.parentNode}}}}),h=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(c.documentFromRange(n),"br"),o=t.support.browser,a=o.msie&&11>o.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!r.isWhitespace(i.nextSibling)||(e=i.cloneNode(!0),e.className="k-br",r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),c.selectRange(n)}});n(i,{ParagraphCommand:u,NewLineCommand:h}),d("insertLineBreak",new a({key:13,shift:!0,command:h})),d("insertParagraph",new a({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,c=r.ToolTemplate,d=r.FormatTool,u=r.BlockFormatFinder,h=a.textNodes,p=r.EditorUtils.registerTool,f=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;e.length>n;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(1>i.length)return!1;if(i.length!=e.length)return!1;for(n=0;i.length>n&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=o.parentOfType(e[0],this.tags);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new f(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;t.length>n;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;t.length>n;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if(n=e.previousSibling,n&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},split:function(t){var n,i,r,s,l,c,d=h(t);if(d.length)for(n=o.parentOfType(d[0],["li"]),i=o.parentOfType(d[d.length-1],["li"]),t.setStartBefore(n),t.setEndAfter(i),r=0,s=d.length;s>r;r++)l=this.finder.findFormat(d[r]),l&&(c=e(l).parents("ul,ol"),c[0]?a.split(t,c.last()[0],!0):a.split(t,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){u.push(this)}var r,a,s,l,c=this.tag,d=o.closestSplittableParent(n),u=[],h=this.finder.findSuitable(n);for(h||(h=new f("ul"==c?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(d))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(d),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;r.length>a;a++)s=r[a],l=(!h||!o.isAncestorOrSelf(h,s))&&this.suitable(s,n),l&&(h&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):u.push(s));u.length==r.length&&this.breakable(d)&&(u=[d]),h||(h=o.create(d.ownerDocument,c),o.insertBefore(h,u[0])),this.wrap(h,u),o.is(h,c)||o.changeTag(h,c),this.merge(c,h)},apply:function(e){var t,n,i,r=0,a=[];do i=o.closestEditable(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++;while(e.length>r);for(a.push({section:t,nodes:n}),r=0;a.length>r;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(t){var n,i,r,a,s=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=t.firstChild;i;i=i.nextSibling){for(r=o.create(t.ownerDocument,l||"p");i.firstChild;)a=i.firstChild,o.isBlock(a)?(r.firstChild&&(s.appendChild(r),r=o.create(t.ownerDocument,l||"p")),s.appendChild(a)):r.appendChild(a);r.firstChild&&s.appendChild(r)}n=e(t).parents("ul,ol"),n[0]?(o.insertAfter(s,n.last()[0]),n.last().remove()):o.insertAfter(s,t),o.remove(t)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=this.finder.findFormat(e[n]),t&&this.unwrap(t)},toggle:function(e){var t,n=this,i=h(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),i=h(e),i.length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=d.extend({init:function(e){this.options=e,d.fn.init.call(this,i(e,{finder:new f(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:f,ListFormatter:g,ListCommand:m,ListTool:v}),p("insertUnorderedList",new v({tag:"ul",template:new c({template:s.buttonTemplate,title:"Insert unordered list"})})),p("insertOrderedList",new v({tag:"ol",template:new c({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=e.proxy,o=t.ui.editor,a=o.Dom,s=o.RangeUtils,l=o.EditorUtils,c=o.Command,d=o.Tool,u=o.ToolTemplate,h=o.InlineFormatter,p=o.InlineFormatFinder,f=s.textNodes,g=o.EditorUtils.registerTool,m=n.extend({findSuitable:function(e){return a.parentOfType(e,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(e,t){var n,i,r,o,l,c=f(e);t.innerHTML?(n=s.getMarkers(e),i=s.documentFromRange(e),e.deleteContents(),o=a.create(i,"a",t),e.insertNode(o),l=o.parentNode,"a"==a.name(l)&&a.insertAfter(o,l),a.emptyNode(l)&&a.remove(l),n.length>1&&(a.insertAfter(n[n.length-1],o),a.insertAfter(n[1],o),a[c.length>0?"insertBefore":"insertAfter"](n[0],o))):(r=new h([{tags:["a"]}],t),r.finder=this.finder,r.apply(c))}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){new h([{tags:["a"]}]).remove(f(e))}},this.options=e,c.fn.init.call(this,e)}}),y=c.extend({init:function(e){var t=this;t.options=e,c.fn.init.call(t,e),t.formatter=new v,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(t.attributes=null,t.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t,n,i,o,s=this.getRange().collapsed,l=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),t=f(this._range),n=t.length?this.formatter.finder.findSuitable(t[0]):null,i=t.length&&"img"==a.name(t[0]),o=this.createDialog(this._dialogTemplate(),{title:l.createLink,close:r(this._close,this),visible:!1}),o.find(".k-dialog-insert").click(r(this._apply,this)).end().find(".k-dialog-close").click(r(this._close,this)).end().find(".k-edit-field input").keydown(r(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this.linkText(t)).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",n?"_blank"==n.target:!1).end().find(".k-editor-link-text-row").toggle(!i),t.length>0&&!s&&(this._initialText=e("#k-editor-link-text",o).val()),this._dialog=o.data("kendoWindow").center().open(),e("#k-editor-link-url",o).focus().select()},_keydown:function(e){var n=t.keys;e.keyCode==n.ENTER?this._apply(e):e.keyCode==n.ESC&&this._close(e)},_apply:function(t){var n,i,r,o=this._dialog.element,s=e("#k-editor-link-url",o).val(),l=e("#k-editor-link-text",o);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},n=e("#k-editor-link-title",o).val(),n&&(this.attributes.title=n),l.is(":visible")&&(i=l.val(),i||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),r=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t="";return 1==e.length?t=e[0].nodeValue:e.length&&(t=e[0].nodeValue+e[1].nodeValue),a.stripBom(t||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),w=d.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),d.fn.init.call(this,e.extend(t,{command:_}))},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:_,LinkCommand:y,UnlinkTool:w}),g("createLink",new d({key:"K",ctrl:!0,command:y,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new w({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=r.LinkFormatter,h=c.textNodes,p=n.keys,f="#k-editor-file-url",g="#k-editor-file-title",m=d.extend({init:function(e){var t=this;d.fn.init.call(t,e),t.formatter=new u,t.async=!0,t.attributes={}},insertFile:function(e,t){var n=this.attributes,i=c.documentFromRange(t);if(n.href&&"http://"!=n.href){if(!e)return e=a.create(i,"a",{href:n.href}),e.innerHTML=n.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("﻿"),e),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();this.formatter.apply(t,this.attributes),e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=t.find(f).val().replace(/ /g,"%20"),i=t.find(g).val();l.attributes={href:n,innerHTML:""!==i?i:n},m=l.insertFile(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==p.ENTER?e(t):t.keyCode==p.ESC&&r(t)}var s,l=this,d=l.lockRange(),u=h(d),m=!1,v=u.length?this.formatter.finder.findSuitable(u[0]):null,_=l.editor.options,y=_.messages,w=_.fileBrowser,b=!!(n.ui.FileBrowser&&w&&w.transport&&w.transport.read!==t),k={title:y.insertFile,visible:!1,resizable:b};k.close=r,b&&(k.width=750),s=this.createDialog(l._dialogTemplate(b),k).toggleClass("k-filebrowser-dialog",b).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(f).val(v?v.getAttribute("href",2):"http://").end().find(g).val(v?v.title:"").end().data("kendoWindow"),b&&new n.ui.FileBrowser(s.element.find(".k-filebrowser"),i({},w,{change:function(){s.element.find(f).val(this.value())},apply:e})),s.center().open(),s.element.find(f).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,c=r.RangeUtils,d=r.Command,u=n.keys,h="#k-editor-image-url",p="#k-editor-image-title",f="#k-editor-image-width",g="#k-editor-image-height",m=d.extend({init:function(e){var t=this;
d.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n,i=this.attributes,r=c.documentFromRange(t);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})},!e)return e=a.create(r,"img",i),e.onload=e.onerror=function(){n()},t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(r.createTextNode("﻿"),e),n(),t.setStartAfter(e),t.setEndAfter(e),c.selectRange(t),!0;a.attr(e,i),n()}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(c.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var t=s.element,n=parseInt(t.find(f).val(),10),i=parseInt(t.find(g).val(),10);l.attributes={src:t.find(h).val().replace(/ /g,"%20"),alt:t.find(p).val()},l.attributes.width=null,l.attributes.height=null,!isNaN(n)&&n>0&&(l.attributes.width=n),!isNaN(i)&&i>0&&(l.attributes.height=i),m=l.insertImage(v,d),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(d)).focus(),m||l.releaseRange(d)}function o(t){t.keyCode==u.ENTER?e(t):t.keyCode==u.ESC&&r(t)}var s,l=this,d=l.lockRange(),m=!1,v=c.image(d),_=v&&v.getAttribute("width")||"",y=v&&v.getAttribute("height")||"",w=l.editor.options,b=w.messages,k=w.imageBrowser,x=!!(n.ui.ImageBrowser&&k&&k.transport&&k.transport.read!==t),C={title:b.insertImage,visible:!1,resizable:x};C.close=r,x&&(C.width=750),s=this.createDialog(l._dialogTemplate(x),C).toggleClass("k-filebrowser-dialog",x).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(h).val(v?v.getAttribute("src",2):"http://").end().find(p).val(v?v.alt:"").end().find(f).val(_).end().find(g).val(y).end().data("kendoWindow"),x&&new n.ui.ImageBrowser(s.element.find(".k-imagebrowser"),i({},k,{change:function(){s.element.find(h).val(this.value())},apply:e})),s.center().open(),s.element.find(h).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new r.Tool({command:m,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(t,r){var o=this;i.fn.init.call(o,t,r),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),o.value(o.options.title),o.bind("open",function(){if(o.options.autoSize){var e,t=o.list;t.css({whiteSpace:"nowrap",width:"auto"}),e=t.width(),e?e+=20:e=o._listWidth,t.css("width",e+n.support.scrollbar()),o._listWidth=e}})},options:{name:"SelectBox"},_initSelectOverlay:function(){var t,i,r,o,a=this,s=a.value(),l=this.dataSource.view(),c="",d=n.htmlEncode;for(i=0;l.length>i;i++)t=l[i],c+="<option value='"+d(t.value)+"'",t.value==s&&(c+=" selected"),c+=">"+d(t.text)+"</option>";r=e("<select class='k-select-overlay'>"+c+"</select>"),o=e(this.element).closest(".k-widget"),o.next(".k-select-overlay").remove(),r.insertAfter(o),r.on("change",function(){a.value(this.value),a.trigger("change")})},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(e!==i.fn.value.call(n)&&(n.text(n.options.title),n._current&&n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1),t)},decorate:function(t){var n,i,o,a,s=this,l=s.dataSource,c=l.data();for(t&&s.list.css("background-color",r.getEffectiveBackground(e(t))),n=0;c.length>n;n++)i=c[n].tag||"span",o=c[n].className,a=r.inlineStyle(t,i,{className:o}),a=a.replace(/"/g,"'"),c[n].style=a+";display:inline-block";l.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction"),o=r?"Right":"Left",a="td"!=s.name(n)?"margin"+o:"padding"+o;return i===t?n.style[a]||0:(i>0?n.style[a]=i+"px":(n.style[a]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,c=l.registerTool,d=a.Command,u=a.Tool,h=a.ToolTemplate,p=a.RangeUtils,f=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,c,d,u,h,p,f=this.finder.findSuitable(t),g=[];if(f.length){for(i=0,r=f.length;r>i;i++)s.is(f[i],"li")?e(f[i]).index()?e.inArray(f[i].parentNode,g)<0&&g.push(f[i]):g.push(f[i].parentNode):g.push(f[i]);for(;g.length;)if(o=g.shift(),s.is(o,"li"))if(a=o.parentNode,l=e(o).prev("li"),c=l.find("ul,ol").last(),d=e(o).children("ul,ol")[0],d&&l[0])c[0]?(c.append(o),c.append(e(d).children()),s.remove(d)):(l.append(d),d.insertBefore(o,d.firstChild));else for(d=l.children("ul,ol")[0],d||(d=s.create(o.ownerDocument,s.name(a)),l.append(d));o&&o.parentNode==a;)d.appendChild(o),o=g.shift();else for(u=parseInt(n(o),10)+30,n(o,u),h=0;g.length>h;h++)e.contains(o,g[h])&&g.splice(h,1)}else p=new m([{tags:["p"]}],{style:{marginLeft:30}}),p.apply(t)},remove:function(t){var i,r,o,a,s,l,c,d,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if(c=e(u[r]),c.is("li")){if(a=c.parent(),s=a.parent(),s.is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;l=c.nextAll("li"),l.length&&e(a[0].cloneNode(!1)).appendTo(c).append(l),s.is("li")?c.insertAfter(s):c.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];d=parseInt(n(i),10)-30,n(i,d)}}}),_=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(p.nodes(e))}},d.fn.init.call(this,e)}}),y=d.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(p.nodes(e))}},d.fn.init.call(this,e)}}),w=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new g([{tags:f}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,c,d=this.finder.findSuitable(r);for(l=0,c=d.length;c>l;l++)if(o=n(d[l]),o||(a=e(d[l]).parents("ul,ol").length,o=s.is(d[l],"li")&&(a>1||n(d[l].parentNode))||s.ofType(d[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:y,OutdentTool:w}),c("indent",new u({command:_,template:new h({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new w({command:y,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.EditorUtils,o=i.Command,a=i.Tool,s=i.ToolTemplate,l=o.extend({init:function(e){var t=this;t.options=e,o.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){o.value(s.find(d).val()),i(e),r.change&&r.change(),o.trigger("change")}function i(e){e.preventDefault(),s.data("kendoWindow").destroy(),o.focus()}var r=this,o=r.editor,a=o.options.messages,s=e(t.template(l.template)(a)).appendTo(document.body),c=l.indent(o.value()),d=".k-editor-textarea";this.createDialog(s,{title:a.viewHtml,close:i,visible:!1}).find(d).val(c).end().find(".k-dialog-update").click(n).end().find(".k-dialog-close").click(i).end().data("kendoWindow").center().open(),s.find(d).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:r.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.editor,i=n.Tool,r=n.ToolTemplate,o=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,c=n.RangeUtils,d=l.registerTool,u=o.extend({init:function(e){var n=this;i.fn.init.call(n,t.deepExtend({},n.options,e)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(t=n.indexOf("."),0===t?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var i=t.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:t.range,formatter:function(){var t,r=(i.tag||i.context||"span").split(","),o=[{tags:r,attr:{className:i.className||""}}];return t=e.inArray(r[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(o):new n.GreedyBlockFormatter(o)}})},initialize:function(e,n){var r=n.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||r.options[a],title:r.options.messages[a],autoSize:!0,change:function(){i.exec(r,a,this.dataItem().toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;t.length>e;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a,s,l,c;for(i=0;t.length>i;i++)if(r=t[i],o=r.tag||r.context||"",a=r.className?"."+r.className:"",s=o+a,l=e(n[0]).closest(s)[0]){if(1==n.length)return r.value;for(c=1;n.length>c&&e(n[c]).closest(s)[0];c++)if(c==n.length-1)return r.value}return""},update:function(t,n){var i,r,a,l,c,d=e(t).data(this.type);if(d){for(i=d.dataSource,r=i.data(),c=s.commonAncestor.apply(null,n),a=0;r.length>a;a++)l=r[a].context,r[a].visible=!l||!!e(c).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),o.fn.update.call(this,t,n),d.value(this.getFormattingValue(i.view(),n)),d.wrapper.toggleClass("k-state-disabled",!i.view().length)}}}),h=a.extend({exec:function(){var e,t=this.lockRange(!0),i=this.options.remove||"strong,em,span".split(",");c.wrapSelectedElements(t),e=new n.RangeIterator(t),e.traverse(function r(e){if(e&&!s.isMarker(e)){if(1==e.nodeType&&!s.insignificant(e)){for(var t=e.childNodes.length-1;t>=0;t--)r(e.childNodes[t]);e.removeAttribute("style"),e.removeAttribute("class")}i.indexOf(s.name(e))>-1&&s.unwrap(e)}}),this.releaseRange(t)}});e.extend(n,{FormattingTool:u,CleanFormatCommand:h}),d("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),d("cleanFormatting",new i({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui,i=n.editor,r=n.Widget,o=e.extend,a=e.proxy,s=t.keys,l=".kendoEditor",c="a.k-tool:not(.k-state-disabled),.k-widget.k-colorpicker,.k-selectbox,.k-dropdown,.k-combobox .k-input",d=r.extend({init:function(e,t){var n=this;t=o({},t,{name:"EditorToolbar"}),r.fn.init.call(n,e,t),t.popup&&n._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting"]},_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",a(n.refreshTools,n)),n._editor=t,n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==s.RIGHT||i==s.LEFT?n.close():i==s.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolName(this),o=n.tools[r],a=o&&o.options,s=t.options.messages,l=a&&a.tooltip||s[r],c=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=s[r+"Inherit"],c.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(c,{title:n._appendShortcutSequence(l,o),editor:n._editor}),c.closest(".k-widget",n.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",a(n.refreshTools,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,i=this,r=i.window,o=i.options.editor;r&&(e=r.wrapper,t=o.element,e.is(":visible")&&i.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),r._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-e.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),r.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,n=this._editor.element.attr(e);t.attr(e,n||0).focus().find(c).first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in t.ui.Editor.defaultTools)},expandTools:function(n){var r,a,s,l,c=this._nativeTools,d=t.deepExtend({},t.ui.Editor.defaultTools),u={};for(a=0;n.length>a;a++)r=n[a],l=r.name,e.isPlainObject(r)?l&&d[l]?(u[l]=o({},d[l]),o(u[l].options,r)):(s=o({cssClass:"k-i-custom",type:"button",title:""},r),s.name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=i.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),u[l]={options:s}):d[r]&&(u[r]=d[r]);for(a=0;c.length>a;a++)u[c[a]]||(u[c[a]]=d[c[a]]);return u},render:function(){function n(n){var i;return n.getHtml?i=n.getHtml():(e.isFunction(n)||(n=t.template(n)),i=n(o)),e.trim(i)}function i(){h.children().length&&h.appendTo(v)}function r(){h=e("<li class='k-tool-group' role='presentation' />")}var o,s,l,c,d,u,h,p,f=this,g=f.tools,m=f._editor.element,v=f.element.empty(),_=f._editor.options.tools,y=t.support.browser;for(v.empty(),r(),p=0;_.length>p;p++)c=_[p].name||_[p],o=g[c]&&g[c].options,!o&&e.isPlainObject(c)&&(o=c),s=o&&o.template,"break"==c&&(i(),e("<li class='k-row-break' />").appendTo(f.element),r()),s&&(u=f.toolGroupFor(c),d!=u&&(i(),r(),d=u),s=n(s),l=e(s).appendTo(h),"custom"==u&&(i(),r()),o.exec&&l.hasClass("k-tool")&&l.click(a(o.exec,m[0])));i(),e(f.element).children(":has(> .k-tool)").addClass("k-button-group"),f.options.popup&&y.msie&&9>y.version&&f.window.wrapper.find("*").attr("unselectable","on"),f.updateGroups(),f.angular("compile",function(){return{elements:f.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return"none"!==this.style.display}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var n=e(this).data("kendoSelectBox");n&&n.decorate(t)})},destroy:function(){r.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy()},_attachEvents:function(){var t=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",r=n+".k-state-disabled";t.element.off(l).on("mouseenter"+l,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+l,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+l,n,function(e){e.preventDefault()}).on("keydown"+l,c,function(n){function i(e,n){var i=t.element.find(c),r=i.index(o)+e;return n&&(r=Math.max(0,Math.min(i.length-1,r))),i[r]}var r,o=this,a=n.keyCode;a==s.RIGHT||a==s.LEFT?e(o).hasClass(".k-dropdown")||(r=i(a==s.RIGHT?1:-1,!0)):a==s.ESC?r=t._editor:a!=s.TAB||n.ctrlKey||n.altKey||(n.shiftKey?r=i(-1):(r=i(1),r||(r=t._editor))),r&&(n.preventDefault(),r.focus())}).on("click"+l,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+l,r,function(e){e.preventDefault()})},_toolName:function(t){var n,i;if(t)return n=t.className,/k-tool\b/i.test(n)&&(n=t.firstChild.className),i=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)}),i[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var n=this,i=n._editor,r=i.getRange(),o=t.ui.editor.RangeUtils.textNodes(r);o.length||(o=[r.startContainer]),n.items().each(function(){var t=n.tools[n._toolName(this)];t&&t.update&&t.update(e(this),o)}),this.update()},update:function(){this.element.children().children().each(function(){var t=e(this);t.css("display",t.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});e.extend(i,{Toolbar:d})}(window.jQuery),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.RangeUtils,l=r.Command,c=".kendoEditor",d="k-state-active",u="k-state-selected",h=r.Tool,p=r.ToolTemplate,f=r.InsertHtmlCommand,g=r.BlockFormatFinder,m=r.EditorUtils.registerTool,v="<td>"+r.emptyElementContent+"</td>",_=new g([{tags:["table"]}]),y=f.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,n){var i=e("table[data-last]",t.document).removeAttr("data-last");n.selectNodeContents(i.find("td")[0]),t.selectRange(n)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,f.fn.exec.call(this)}}),w=h.extend({initialize:function(t,n){h.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_keydown:function(e){var n=t.keys,i=e.keyCode;i==n.DOWN&&e.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(t){var n=e(t.target).closest(".k-tool");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){this.popup().close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),b=w.extend({init:function(t){this.cols=8,this.rows=6,w.fn.init.call(this,e.extend(t,{command:y,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+n.scrollLeft()-u.left)/i)+1}}var i,r,o=this,a=o._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),d=s.eq(s.length-1),u=t.getOffset(l),h=t.getOffset(d),p=o.cols,f=o.rows;h.left+=d[0].offsetWidth,h.top+=d[0].offsetHeight,i=(h.left-u.left)/p,r=(h.top-u.top)/f,a.on("mousemove"+c,function(e){o._setTableSize(n(e))}).on("mouseleave"+c,function(){o._setTableSize()}).on("mouseup"+c,function(e){o._exec(n(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&this.rows>=e.row&&this.cols>=e.col},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,r=i.find(".k-status"),o=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(r.text(t.format(s.createTableHint,n.row,n.col)),o.each(function(t){e(this).toggleClass(u,n.col>t%a&&n.row>t/a)})):(r.text(s.dialogCancel),o.removeClass(u))},_keydown:function(e){var n,i,r,o,a,s,l,c;w.fn._keydown.call(this,e),n=t.keys,i=e.keyCode,r=this._popup.element.find(".k-ct-cell"),o=Math.max(r.filter(".k-state-selected").last().index(),0),a=Math.floor(o/this.cols),s=o%this.cols,l=!1,i!=n.DOWN||e.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),c={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(c):this._setTableSize(c),l&&(e.preventDefault(),e.stopImmediatePropagation())},_open:function(){var e=this._editor.options.messages;w.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){w.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var n;w.fn.update.call(this,e),n=_.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),k=l.extend({exec:function(){for(var e,t,n,i,a=this.lockRange(!0),s=a.endContainer;"td"!=o.name(s);)s=s.parentNode;for(t=s.parentNode,e=t.children.length,n=t.cloneNode(!0),i=0;t.cells.length>i;i++)n.cells[i].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(n,t):o.insertAfter(n,t),this.releaseRange(a)}}),x=l.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table"),c=l.rows,d=this.options.position;for(e=o.findNodeIndex(s),t=0;c.length>t;t++)n=c[t].cells[e],i=n.cloneNode(),i.innerHTML=r.emptyElementContent,"before"==d?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var t,n,i,r=this.lockRange(),a=s.mapAll(r,function(t){return e(t).closest("tr")[0]}),l=o.closest(a[0],"table");if(a.length>=l.rows.length)t=o.next(l),(!t||o.insignificant(t))&&(t=o.prev(l)),o.remove(l);else for(n=0;a.length>n;n++)i=a[n],o.removeTextSiblings(i),t=o.next(i)||o.prev(i),t=t.cells[0],o.remove(i);t&&(r.setStart(t,0),r.collapse(!0),this.editor.selectRange(r))}}),S=l.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0),l=a[0].cells.length;if(1==l)e=o.next(r),(!e||o.insignificant(e))&&(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;a.length>t;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),T=h.extend({command:function(e){return e=n(e,this.options),"delete"==e.action?"row"==e.type?new C(e):new S(e):"row"==e.type?new k(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!_.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:w,TableCommand:y,InsertTableTool:b,TableModificationTool:T,InsertRowCommand:k,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),m("createTable",new b({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new T({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new T({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new T({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new T({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new T({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new T({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.caret,r=n.keys,o=n.ui,a=o.Widget,s=".kendoMaskedTextBox",l=e.proxy,c=(n.support.propertyChangeEvent?"propertychange":"input")+s,d="k-state-disabled",u="disabled",h="readonly",p="change",f=a.extend({init:function(t,r){var o,l,c=this;a.fn.init.call(c,t,r),c._rules=e.extend({},c.rules,c.options.rules),t=c.element,o=t[0],c.wrapper=t,c._tokenize(),c._reset(),c.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+s,function(){var e=o.value;e?c._togglePrompt(!0):o.value=c._old=c._emptyMask,c._oldValue=e,c._timeoutId=setTimeout(function(){i(t,0,e?c._maskLength:0)})}).on("focusout"+s,function(){var e=t.val();clearTimeout(c._timeoutId),o.value=c._old="",e!==c._emptyMask&&(o.value=c._old=e),c._change(),c._togglePrompt()}),l=t.is("[disabled]"),l?c.enable(!1):c.readonly(t.is("[readonly]")),c.value(c.options.value||t.val()),n.notify(c)},options:{name:"MaskedTextBox",promptChar:"_",clearPromptChar:!1,culture:"",rules:{},value:"",mask:""},events:[p],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){var n=this;a.fn.setOptions.call(n,t),n._rules=e.extend({},n.rules,n.options.rules),n._tokenize(),this._unbindInput(),this._bindInput(),n.value(n.element.val())},destroy:function(){var e=this;e.element.off(s),e._form&&e._form.off("reset",e._resetHandler),a.fn.destroy.call(e)},value:function(e){var i=this.element,r=this._emptyMask;return e===t?this.element.val():(null===e&&(e=""),r?(e=this._unmask(e+""),i.val(e?r:""),this._mask(0,this._maskLength,e),e=i.val(),this._oldValue=e,n._activeElement()!==i&&(e===r?i.val(""):this._togglePrompt()),t):(i.val(e),t))},_togglePrompt:function(e){var t=this.element[0],n=t.value;this.options.clearPromptChar&&(n=e?this._oldValue:n.replace(RegExp(this.options.promptChar,"g")," "),t.value=this._old=n)},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_bindInput:function(){var e=this;e._maskLength&&e.element.on("keydown"+s,l(e._keydown,e)).on("keypress"+s,l(e._keypress,e)).on("paste"+s,l(e._paste,e)).on(c,l(e._propertyChange,e))},_unbindInput:function(){this.element.off("keydown"+s).off("keypress"+s).off("paste"+s).off(c)},_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly;t._unbindInput(),r||i?n.attr(u,i).attr(h,r).toggleClass(d,i):(n.removeAttr(u).removeAttr(h).removeClass(d),t._bindInput())},_change:function(){var e=this,t=e.value();t!==e._oldValue&&(e._oldValue=t,e.trigger(p),e.element.trigger(p))},_propertyChange:function(){var e,t,n=this,r=n.element[0],o=r.value;o===n._old||n._pasting||(t=i(r)[0],e=n._unmask(o.substring(t),t),r.value=n._old=o.substring(0,t)+n._emptyMask.substring(t),n._mask(t,t,e),i(r,t))},_paste:function(e){var t=this,n=e.target,r=i(n),o=r[0],a=r[1],s=t._unmask(n.value.substring(a),a);t._pasting=!0,setTimeout(function(){var e=n.value,r=e.substring(o,i(n)[0]);n.value=t._old=e.substring(0,o)+t._emptyMask.substring(o),t._mask(o,o,r),o=i(n)[0],t._mask(o,o,s),i(n,o),t._pasting=!1})},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))},_keydown:function(e){var n,o=e.keyCode,a=this.element[0],s=i(a),l=s[0],c=s[1],d=o===r.BACKSPACE;d||o===r.DELETE?(l===c&&(d?l-=1:c+=1,n=this._find(l,d)),n!==t&&n!==l?(d&&(n+=1),i(a,n)):l>-1&&this._mask(l,c,"",d),e.preventDefault()):o===r.ENTER&&this._change()},_keypress:function(e){var t,n;0===e.which||e.ctrlKey||e.keyCode===r.ENTER||(t=String.fromCharCode(e.which),n=i(this.element),this._mask(n[0],n[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault())},_find:function(e,t){var n=this.element.val()||this._emptyMask,i=1;for(t===!0&&(i=-1);e>-1||this._maskLength>=e;){if(n.charAt(e)!==this.tokens[e])return e;e+=i}return-1},_mask:function(e,r,o,a){var s,l,c,d,u=this.element[0],h=u.value||this._emptyMask,p=this.options.promptChar,f=0;for(e=this._find(e,a),e>r&&(r=e),l=this._unmask(h.substring(r),r),o=this._unmask(o,e),s=o.length,o&&(l=l.replace(RegExp("^_{0,"+s+"}"),"")),o+=l,h=h.split(""),c=o.charAt(f);this._maskLength>e;)h[e]=c||p,c=o.charAt(++f),d===t&&f>s&&(d=e),e=this._find(e+1);u.value=this._old=h.join(""),n._activeElement()===u&&(d===t&&(d=this._maskLength),i(u,d))},_unmask:function(t,n){var i,r,o,a,s,l,c,d;if(!t)return"";for(t=(t+"").split(""),o=0,a=n||0,s=this.options.promptChar,l=t.length,c=this.tokens.length,d="";c>a&&(i=t[o],r=this.tokens[a],i===r||i===s?(d+=i===s?s:"",o+=1,a+=1):"string"!=typeof r?((r.test&&r.test(i)||e.isFunction(r)&&r(i))&&(d+=i,a+=1),o+=1):a+=1,!(o>=l)););return d},_tokenize:function(){for(var e,t,i,r,o=[],a=0,s=this.options.mask||"",l=s.split(""),c=l.length,d=0,u="",h=this.options.promptChar,p=n.getCulture(this.options.culture).numberFormat,f=this._rules;c>d;d++)if(e=l[d],t=f[e])o[a]=t,u+=h,a+=1;else for("."===e||","===e?e=p[e]:"$"===e?e=p.currency.symbol:"\\"===e&&(d+=1,e=l[d]),e=e.split(""),i=0,r=e.length;r>i;i++)o[a]=e[i],u+=e[i],a+=1;this.tokens=o,this._emptyMask=u,this._maskLength=u.length}});o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(e){var n="string"==typeof e?[{name:e}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function i(e){var n="string"==typeof e?[{name:[e],expand:!1}]:e,i="[object Array]"===_t.call(n)?n:n!==t?[n]:[];return wt(i,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===_t.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(e,t,n,i){var o,a,s,l;if(n||(n=t),i||(i=0),l=n.members[i],l&&!l.measure){if(s=l.children,a=s.length,n===t?e[pt.stringify([l.name])]=!!a:a&&(e[pt.stringify(lt(n,i))]=!0),a)for(o=0;a>o;o++)r(e,t,s[o],i);
r(e,t,n,i+1)}}function o(t){var n,i,o={};t.length&&r(o,t[0]),n=[];for(i in o)n.push({name:e.parseJSON(i),expand:o[i]});return n}function a(e,t){var n,i,r,o,a=t.tuples||[],s=a[0];if(s&&s.members.length>e.length)for(n=s.members,i=0;n.length>i;i++)if(!n[i].measure){for(r=!1,o=0;e.length>o;o++)if(0===O(e[o]).indexOf(n[i].hierarchy)){r=!0;break}r||e.push({name:[n[i].name],expand:!1})}}function s(e){var t,n=[],i=e.members;for(t=0;i.length>t;t++)i[t].measure||n.push({name:[i[t].name],expand:i[t].children.length>0});return n}function l(e,t,n){var r,o;return e=e||{},a(t,e),n.length>1&&t.push({name:"Measures",measure:!0,children:i(n)}),r={members:t},e.tuples&&(o=x(e.tuples,r),o.tuple&&(t=s(o.tuple))),t}function c(e,t,n,i,r,o,a){var s,l,c,d,u,h,p,f=0,g=t;for(l in n[i].aggregates)s=n[i].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[g]={ordinal:g,value:s,fmtValue:u?pt.format(u,s):s},++f,g+=a;h=n[i].items;for(c in h){p=h[c].index*f,p=g+p*a;for(l in h[c].aggregates)s=h[c].aggregates[l],d=r[l],u=o[l],s=d?d(s):s.accumulator,e[p]={ordinal:p,value:s,fmtValue:u?pt.format(u,s):s},p+=a}}function d(e,t,n,i,r,o){var a,s,l,c,d,u,h,p=0;for(s in n[i].aggregates)a=n[i].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t++,value:a,fmtValue:d?pt.format(d,a):a},++p;u=n[i].items;for(l in u){h=u[l].index*p;for(s in u[l].aggregates)a=u[l].aggregates[s],c=r[s],d=o[s],a=c?c(a):a.accumulator,e[e.length]={ordinal:t+h++,value:a,fmtValue:d?pt.format(d,a):a}}}function u(e){var t=pt.getter(e.field,!0);return function(n,i){return e.aggregate(t(n.dataItem),i,n)}}function h(e){return"number"==typeof e&&!isNaN(e)}function p(e){return e&&e.getTime}function f(e,n,i){return e.tuples.length<_(n.tuples,i)?n:t}function g(e,t,n,i,r){var o,a,s,l=e.length,c=_(t,i),d=i.length||1;for(a=0;n>a;a++)for(o=0;l>o;o++)s=v(e[o],t)*d,s+=o%d,r[a*l+o].ordinal=a*c+s}function m(e,t,n,i,r){var o,a,s,l=e.length,c=(_(t,i),i.length||1);for(a=0;l>a;a++)for(s=v(e[a],t),s*=c,s+=a%c,o=0;n>o;o++)r[a*n+o].ordinal=s*n+o}function v(e,t){return x(t,e).index}function _(e,t){var n,i,r;if(!e.length)return 0;for(n=e.slice(),i=n.shift(),r=1;i;)i.members?[].push.apply(n,i.members):i.children&&(i.measure||(r+=i.children.length),[].push.apply(n,i.children)),i=n.shift();return t.length&&(r*=t.length),r}function y(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function w(e,t,n){var i,r,o;if(!e)return 0;for(i=Math.max(n.length,1),r=e.members.slice(0,t),o=r.shift();o;)o.children?[].push.apply(r,o.children):(i++,[].push.apply(r,o.members)),o=r.shift();return i}function b(e,t,n){var i,r,o,a,s,l;if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};if(i=x(e,t[0]),!i.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};if(r=i.tuple.members,o=t[0].members,a=-1,r.length!==o.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(s=0,l=r.length;l>s;s++)!r[s].measure&&o[s].children[0]&&(-1==a&&o[s].children.length&&(a=s),r[s].children=o[s].children);return n=Math.max(n.length,1),{parsedRoot:i.tuple,index:i.index*n,memberIndex:a,tuples:e}}function k(e,t){var n,i,r=!0;for(e=e.members,t=t.members,n=0,i=e.length;i>n;n++)e[n].measure||t[n].measure||(r=r&&O(e[n])===O(t[n]));return r}function x(e,t){var n,i,r,o,a,s,l,c=0;for(n=0,i=e.length;i>n;n++){if(r=e[n],k(r,t))return{tuple:r,index:c};for(c++,a=0,s=r.members.length;s>a;a++)if(l=r.members[a],!l.measure&&(o=x(l.children,t),c+=o.index,o.tuple))return{tuple:o.tuple,index:c}}return{index:c}}function C(e,t){var n,i,r,o="";for(i=0,r=e.length;r>i;i++)n=e[i],o+=n.name,t[o]||(t[o]=n)}function S(e,t){var n,i,r,o,a=e.members,s="",l="";for(n=0,i=a.length;i>n;n++){if(r=a[n],o){if(t[s+r.name]){s+=r.name,o=t[s];continue}return t[s+r.parentName]?t[s+r.parentName]:(r.parentName&&(l+=r.parentName),t[l])}if(s+=r.name,o=t[r.parentName],!o&&(o=t[s],!o))return null;o&&(l+=o.name)}return o}function T(e,t){var n,i,r,o;if(0===t.length)return-1;for(n=t[0],i=e.members,r=0,o=i.length;o>r;r++)if(i[r].name==n.name)return r}function D(n,i){if(!(0>i)){var r={name:"Measures",measure:!0,children:[e.extend({members:[],dataIndex:n.dataIndex},n.members[i])]};n.members.splice(i,1,r),n.dataIndex=t}}function A(e,t){var n,i,r,o,a,s;if(1>e.length)return[];for(n=[],i={},r=T(e[0],t),o=0;e.length>o;o++)a=e[o],a.dataIndex=o,D(a,r),s=S(a,i),s?s.children.push(0>r||!s.measure?a:a.members[r].children[0]):n.push(a),C(a.members,i);return n}function E(e,t){var n,i,r,o,a,s,l,c,d;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),a=0;r>a;a++)for(l=o*a,c=o*i[a],s=0;o>s;s++)d=parseInt(c+s,10),n[parseInt(l+s,10)]=t[d]||{value:"",fmtValue:"",ordinal:d};return n}function M(e,t){var n,i,r,o,a,s,l,c;if(!e||!e.length)return t;for(n=[],i=P(e),r=i.length,o=Math.max(t.length/r,1),s=0;o>s;s++)for(l=r*s,a=0;r>a;a++)c=i[a]+l,n[l+a]=t[c]||{value:"",fmtValue:"",ordinal:c};return n}function P(e){var n,i,r,o,a,s,l;for(e=e.slice(),n=[],i=e.shift();i;){for(i.dataIndex!==t&&n.push(i.dataIndex),a=0,r=0,o=i.members.length;o>r;r++)l=i.members[r],s=l.children,l.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[a,0].concat(s)),a+=s.length;i=e.shift()}return n}function I(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function z(e,t){var n=e.length-1,i=e[n],r=F(t,i);return r&&r.dir?i="ORDER("+i+".Children,"+r.field+".CurrentMember.MEMBER_CAPTION,"+r.dir+")":i+=".Children",e[n]=i,e}function F(e,t){for(var n=0,i=e.length;i>n;n++)if(0===t.indexOf(e[n].field))return e[n];return null}function R(e){var t,n="CROSSJOIN({";return e.length>2?(t=e.pop(),n+=R(e)):(n+=e.shift(),t=e.pop()),n+="},{",n+=t,n+="})"}function B(e,t){var n=e.slice(0);return t.length>1&&n.push("{"+L(t).join(",")+"}"),R(n)}function L(e){for(var n,i=0,r=e.length,o=[];r>i;i++)n=e[i],o.push(n.name!==t?n.name:n);return o}function O(e){return e=e.name||e,"[object Array]"===_t.call(e)&&(e=e[e.length-1]),e}function H(e){for(var t=e.length,n=[],i=0;t>i;i++)n.push(e[i].name[0]);return n}function N(e,t){var n,i,r,o=0,a=e.length,s=t.length;for(t=t.slice(0);a>o;o++)for(n=e[o],r=0;s>r;r++)if(i=I(t[r]),-1!==n.indexOf(i)){t[r]=n;break}return t}function V(e){for(var t,n,i,r,o,a,s=[],l=[],c=[],d=0,u=e.length;u>d;d++)if(t=e[d],r=t.name,a=!1,"[object Array]"!==_t.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(o=I(r[0]),n=0,i=c.length;i>n;n++)if(0===c[n].name[0].indexOf(o)){a=!0;break}a||c.push(t),t.expand&&s.push(t)}return s=s.concat(l),{root:c,expanded:s}}function U(e,t,n){var i,r,o,a,s,l,c,d,u="";if(e=e||[],i=V(e),r=i.root,o=H(r),a=[],i=i.expanded,s=i.length,l=0,d=[],o.length>1||t.length>1){for(a.push(B(o,t));s>l;l++)c=z(i[l].name,n),d=N(c,o),a.push(B(d,t));u+=a.join(",")}else{for(;s>l;l++)c=z(i[l].name,n),d.push(c[0]);u+=o.concat(d).join(",")}return u}function W(e){var t="",n=e.value,i=e.field,r=e.operator;return"in"==r?(t+="{",t+=n,t+="}"):(t+="Filter(",t+=i+".Children",t+=pt.format(Y[r],i,n),t+=")"),t}function j(e,t){var n,i,r="",o=e.filters,a=o.length;for(i=a-1;i>=0;i--)n="SELECT (",n+=W(o[i]),n+=") ON 0",i==a-1?(n+=" FROM ["+t+"]",r=n):r=n+" FROM ( "+r+" )";return r}function G(e,t,n){var i,r,o="";if(t){o+="<"+e+">";for(r in t)i=t[r],n&&(r=r.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+r+">"+i+"</"+r+">";o+="</"+e+">"}else o+="<"+e+"/>";return o}function q(e){if(null==e)return[];var t=_t.call(e);return"[object Array]"!==t?[e]:e}function $(e){var t,n,i,r,o={tuples:[]},a=q(pt.getter("Tuples.Tuple",!0)(e)),s=pt.getter("Caption['#text']"),l=pt.getter("UName['#text']"),c=pt.getter("LName['#text']"),d=pt.getter("LNum['#text']"),u=pt.getter("CHILDREN_CARDINALITY['#text']",!0),h=pt.getter("['@Hierarchy']"),p=pt.getter("PARENT_UNIQUE_NAME['#text']",!0);for(t=0;a.length>t;t++){for(n=[],i=q(a[t].Member),r=0;i.length>r;r++)n.push({children:[],caption:s(i[r]),name:l(i[r]),levelName:c(i[r]),levelNum:d(i[r]),hasChildren:parseInt(u(i[r]),10)>0,parentName:p(i[r]),hierarchy:h(i[r])});o.tuples.push({members:n})}return o}var Y,K,Q,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,ct,dt,ut,ht,pt=window.kendo,ft=pt.ui,gt=pt.Class,mt=ft.Widget,vt=pt.data.DataSource,_t={}.toString,yt=function(e){return e},wt=e.map,bt=e.extend,kt=pt.isFunction,xt="change",Ct="error",St="progress",Tt="stateReset",Dt="auto",At="<div/>",Et=".kendoPivotGrid",Mt="__row_total__",Pt="dataBinding",It="dataBound",zt="expandMember",Ft="collapseMember",Rt="k-i-arrow-s",Bt="k-i-arrow-e",Lt="#: data.member.caption || data.member.name #",Ot='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',Ht='<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',Nt='#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',Vt='<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>',Ut={sum:function(e,t){var n=t.accumulator;return h(n)?h(e)&&(n+=e):n=e,n},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,n){var i=n.accumulator;return n.count===t&&(n.count=0),h(i)?h(e)&&(i+=e):i=e,h(e)&&n.count++,i},result:function(e){var t=e.accumulator;return h(t)&&(t/=e.count),t}},max:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),e>n&&(h(e)||p(e))&&(n=e),n},min:function(e,t){var n=t.accumulator;return h(n)||p(n)||(n=e),n>e&&(h(e)||p(e))&&(n=e),n}},Wt=gt.extend({init:function(e){this.options=bt({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){var n,i,r,o;if(t=t||{},n={},"[object Array]"===_t.call(t)){for(r=0,o=t.length;o>r;r++)i=t[r],"string"==typeof i?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_asTuples:function(e,n,i){var r,o,a,s,l,c,d,u,h,p;if(i=i||[],r=this.dimensions||[],o=[],h=i.length||1,n.length||i.length)for(c=0;h>c;c++){for(a={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),a.members[a.members.length]={children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(a.members[a.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),o[o.length]=a}for(p in e)for(c=0;h>c;c++){for(d={members:[]},s=0,l=n.length;l>s;s++)u=O(n[s].name),d.members[d.members.length]=0===e[p].parentName.indexOf(u)?{children:[],caption:e[p].value,name:e[p].name,levelName:e[p].name,levelNum:1,hasChildren:!1,parentName:u,hierarchy:u}:{children:[],caption:(r[u]||{}).caption||"All",name:u,levelName:u,levelNum:"0",hasChildren:!0,parentName:t,hierarchy:u};h>1&&(d.members[d.members.length]={children:[],caption:i[c].caption,name:i[c].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),o[o.length]=d}return o},_toDataArray:function(e,t,n,i,r){var o,a,s,l,c,d,u={},h={},p=0,f=n&&n.length;if(f)for(o=this.measures||{};f>p;p++)s=n[p].name,a=o[s],a.result&&(h[s]=a.result),a.format&&(u[s]=a.format);l=[],c=0,r(l,c,e,Mt,h,u,t);for(d in e)d!==Mt&&(c+=i,r(l,c,e,d,h,u,t));return l},_matchDescriptors:function(e,t,n,i){for(var r,o,a,s,l;i>0;)if(r=t[--i],o=O(r).split("&"),o.length>1&&(a=o[0],s=o[1],l=n[a],l(e)!=s))return!1;return!0},_isExpanded:function(e){for(var t=0,n=e.length;n>t;t++)if(e[t].expand)return!0;return!1},_calculateAggregate:function(e,t,n){var i,r,o,a={};for(o=0;e.length>o;o++)r=e[o].descriptor.name,i=n.aggregates[r]||{},i.accumulator=e[o].aggregator(t,i),a[r]=i;return a},_processColumns:function(e,n,i,r,o,a,s,l){var c,d,u,h,p,f,g=o.dataItem;for(f=0;n.length>f;f++)if(d=n[f],d.expand){if(!this._matchDescriptors(g,n,i,f))continue;u=O(d),c=i[u](g),c=c!==t?""+c:c,u=u+"&"+c,h=r[u]||{index:s.columnIndex,name:u,parentName:u,value:c},p=a.items[u]||{aggregates:{}},a.items[u]={index:h.index,aggregates:this._calculateAggregate(e,o,p)},l&&(r[u]||s.columnIndex++,r[u]=h)}},_measureAggregators:function(e){var t,n,i,r,o,a,s=e.measures||[],l=this.measures||{},c=[];if(s.length){for(i=0,r=s.length;r>i;i++)if(t=s[i],n=l[t.name],o=null,n){if(a=n.aggregate,"string"==typeof a){if(o=Ut[a.toLowerCase()],!o)throw Error("There is no such aggregate function");n.aggregate=o.aggregate||o,n.result=o.result}c.push({descriptor:t,caption:n.caption,result:n.result,aggregator:u(n)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_buildGetters:function(e){var t,n,i,r,o,a={};for(r=0,o=e.length;o>r;r++)t=e[r],i=O(t),n=i.split("&"),n.length>1?a[n[0]]=pt.getter(n[0],!0):a[i]=pt.getter(i,!0);return a},process:function(e,n){var r,o,a,s,l,u,h,p,f,g,m,v,_,y,w,b,k,x,C,S,T,D,A,E,M,P;if(e=e||[],n=n||{},r=n.measures||[],o="rows"===n.measuresAxis,a=(o?n.rows:n.columns)||[],s=(o?n.columns:n.rows)||[],!a.length&&s.length&&(!r.length||r.length&&o)&&(a=s,s=[],o=!1),a.length||s.length||(o=!1),!a.length&&r.length&&(a=i(n.measures)),l={},u={},h={},f={columnIndex:0},g=this._measureAggregators(n),m=this._buildGetters(a),v=this._buildGetters(s),_=!1,a.length||s.length)for(b=this._isExpanded(s),_=!0,k=0,x=e.length;x>k;k++)for(y=e[k],w={dataItem:y,index:k},C=l[Mt]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,C,f,!b),C.aggregates=this._calculateAggregate(g,w,C),l[Mt]=C,S=0,T=s.length;T>S;S++)if(D=s[S],D.expand){if(!this._matchDescriptors(y,s,v,S))continue;A=O(D),p=v[A](y),p=p!==t?""+p:p,h[p]={name:A+"&"+p,parentName:A,value:p},E=l[p]||{items:{},aggregates:{}},this._processColumns(g,a,m,u,w,E,f,!0),E.aggregates=this._calculateAggregate(g,w,E),l[p]=E}return _&&e.length?(!(g.length>1)||n.columns&&n.columns.length||(a=[]),u=this._asTuples(u,a,g),h=this._asTuples(h,s,[]),M=u.length,o&&(M=1,P=u,u=h,h=P),l=this._toDataArray(l,u.length,n.measures,M,o?c:d),l=this._normalizeData(l,u.length,h.length)):l=u=h=[],{axes:{columns:{tuples:u},rows:{tuples:h}},data:l}},_normalizeData:function(e,t,n){var i,r,o=(t||1)*(n||1),a=Array(o),s=e.length;if(s===o)return e;for(r=0;o>r;r++)a[r]={value:"",fmtValue:"",ordinal:r};for(r=0;s>r;r++)i=e[r],i&&(a[i.ordinal]=i);return a}}),jt=gt.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||kt(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){return this.transport.discover?this.transport.discover(e):(e.success({}),t)},catalog:function(n){var i,r=this.options||{};return n===t?(r.connection||{}).catalog:(i=r.connection||{},i.catalog=n,this.options.connection=i,e.extend(this.transport.options,{connection:i}),t)},cube:function(e){var n,i=this.options||{};return e===t?(i.connection||{}).cube:(n=i.connection||{},n.cube=e,this.options.connection=n,bt(!0,this.transport.options,{connection:n}),t)}}),Gt=vt.extend({init:function(t){var r,o=((t||{}).schema||{}).cube,a="columns",s={axes:yt,cubes:yt,catalogs:yt,measures:yt,dimensions:yt,hierarchies:yt,levels:yt,members:yt};o&&(s=e.extend(s,this._cubeSchema(o)),this.cubeBuilder=new Wt(o)),vt.fn.init.call(this,bt(!0,{},{schema:s},t)),this.transport=new jt(this.options.transport||{},this.transport),this._columns=i(this.options.columns),this._rows=i(this.options.rows),r=this.options.measures||[],null!==this.options.measures&&"[object Object]"===_t.call(this.options.measures)&&(r=this.options.measures.values||[],a=this.options.measures.axis||"columns"),this._measures=n(r||[]),this._measuresAxis=a,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t,n=[],i=e.dimensions;for(t in i)n.push({name:t,caption:i[t].caption||t,uniqueName:t,defaultHierarchy:t,type:1});return e.measures&&n.push({name:"Measures",caption:"Measures",uniqueName:"Measures",type:2}),n},hierarchies:function(){return[]},measures:function(){var t,n=[],i=e.measures;for(t in i)n.push({name:t,caption:t,uniqueName:t,aggregator:t});return n}}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){return e===t?this.transport.catalog():(this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([]),t)},cube:function(e){return e===t?this.transport.cube():(this.transport.cube(e),this._axes={},this._mergeState({}),this.data([]),t)},axes:function(){return this._axes},columns:function(e){return e===t?this._columns:(this._clearAxesData=!0,this._columns=i(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()}),t)},rows:function(e){return e===t?this._rows:(this._clearAxesData=!0,this._rows=i(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()}),t)},measures:function(e){return e===t?this._measures:(this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:n(e)}),t)},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var n,r,o,a="columns"===t?"columns":"rows",s="columns"===t?"rows":"columns",c=i(e),d=O(c[c.length-1]);for(this._lastExpanded=a,c=l(this.axes()[a],c,this.measures()),n=0;c.length>n;n++)if(r=O(c[n]),r===d){if(c[n].expand)return;c[n].expand=!0}else c[n].expand=!1;o={},o[a]=c,o[s]=this._descriptorsForAxis(s),this._query(o)},_descriptorsForAxis:function(e){var t=this.axes(),n=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(n=o(t[e].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,t=t||{},t.items=t.items||this._view,this.trigger(xt,t)},_query:function(e){var t=this;return e||(this._clearAxesData=!0),t.query(bt({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var n=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(n),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(n)},_mergeState:function(e){return e=vt.fn._mergeState.call(this,e),e!==t&&(this._measures=n(e.measures),e.columns?e.columns=i(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=i(e.rows):e.rows||(this._rows=[])),e},filter:function(e){return e===t?this._filter:(this._clearAxesData=!0,this._query({filter:e,page:1}),t)},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),vt.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){var n,i,r,o,a,s,l,c,d,u,h;return this.cubeBuilder&&(n=this.cubeBuilder.process(e,this._requestData),e=n.data,t=n.axes),c=this.columns().length,d=this.rows().length,u=t.columns&&t.columns.tuples,c||!d||!u||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),c||d||"rows"!==this.measuresAxis()||!u||(t={columns:{},rows:t.columns}),this._axes={columns:y(this._axes.columns),rows:y(this._axes.rows)},t={columns:y(t.columns),rows:y(t.rows)},i=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,this._rowMeasures()),this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:i,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(o=t.columns.tuples,s=this._columnMeasures(),a=f(t.columns,this._axes.columns,s),a&&(l="columns",t.columns=a,g(o,a.tuples,t.rows.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.columns.tuples,s),rowsLength:t.rows.tuples.length,data:e}))):"columns"==this._lastExpanded&&(o=t.rows.tuples,s=this._rowMeasures(),a=f(t.rows,this._axes.rows,s),a&&(l="rows",t.rows=a,m(o,a.tuples,t.columns.tuples.length,s,e),e=this._normalizeData({columnsLength:_(t.rows.tuples,s),rowsLength:t.columns.tuples.length,data:e}))),this._lastExpanded=null,h=this._mergeAxes(t,e,l),this._axes=h.axes,h.data},_readData:function(e){var t=this.reader.axes(e),n=this.reader.data(e);return this._processResult(n,t)},_createTuple:function(e,t,n){var i,r,o,a,s,l=e.members,c=l.length,d={members:[]},u=0;for(t&&(c-=1);c>u;u++)r=l[u],a=+r.levelNum,i=r.name,o=r.parentName,s=r.caption||i,n&&(s="All",0===a?o=r.name:a-=1,i=o),d.members.push({name:i,children:[],caption:s,levelName:o,levelNum:""+a,hasChildren:n,hierarchy:o,parentName:n?"":o});return t&&d.members.push({name:t.name,children:[]}),d},_hasRoot:function(e,t){var n,i,r,o,a,s;if(t.length)return x(t,e).tuple;for(n=e.members,r=!0,a=0,s=n.length;s>a;a++)if(i=n[a],o=+i.levelNum||0,0!==o){r=!1;break}return r},_mergeAxes:function(e,t,n){var i,r,o,a,s,l=this._columnMeasures(),c=this._rowMeasures(),d=this.axes(),u=e.rows.tuples.length,h=_(d.columns.tuples,l),p=e.columns.tuples.length;return"columns"==n?(p=h,r=e.columns.tuples):(r=A(e.columns.tuples,l),t=M(r,t)),o=b(d.columns.tuples,r,l),"rows"==n?(u=_(e.rows.tuples,c),r=e.rows.tuples):(r=A(e.rows.tuples,c),t=E(r,t)),a=b(d.rows.tuples,r,c),d.columns.tuples=o.tuples,d.rows.tuples=a.tuples,h!==_(d.columns.tuples,l)?(i=o.index+w(o.parsedRoot,o.memberIndex,l),s=h+p,t=this._mergeColumnData(t,i,u,p,s)):(i=a.index+w(a.parsedRoot,a.memberIndex,c),t=this._mergeRowData(t,i,u,p)),{axes:d,data:t}},_mergeColumnData:function(e,t,n,i,r){var o,a,s,l=this.data().toJSON(),c=0,d=Math.max(this._columnMeasures().length,1);for(n=Math.max(n,1),l.length>0&&(c=d,r-=d),o=0;n>o;o++)a=t+o*r,s=e.splice(0,i),s.splice(0,c),[].splice.apply(l,[a,0].concat(s));return l},_mergeRowData:function(e,t,n,i){var r,o,a,s=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(i=Math.max(i,1),s.length>0&&(n-=l,e.splice(0,i*l)),r=0;n>r;r++)a=e.splice(0,i),o=t*i+r*i,[].splice.apply(s,[o,0].concat(a));return s},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){var n=this;return e===t?n._data:(this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()}),t)},_normalizeTuples:function(e,t,n){var i,r,o,a=n.length||1,s=0,l=[],c={},d=0;if(e.length){if(!this._hasRoot(e[0],t)){for(;a>s;s++)l.push(this._createTuple(e[0],n[s],!0)),c[s]=s;e.splice.apply(e,[0,e.length].concat(l).concat(e)),s=a}if(n.length)for(o=i=e[s],r=i.members.length-1;i;){if(d>=a&&(d=0),i.members[r].name!==n[d].name&&(e.splice(s,0,this._createTuple(i,n[d])),c[s]=s),s+=1,d+=1,i=e[s],a>d&&(!i||ct(o,r-1)!==ct(i,r-1))){for(;a>d;d++)e.splice(s,0,this._createTuple(o,n[d])),c[s]=s,s+=1;i=e[s]}o=i}return c}},_normalizeData:function(e){var n,i,r=e.data,o=e.columnIndexes||{},a=e.rowIndexes||{},s=e.columnsLength||1,l=s*(e.rowsLength||1),c=0,d=0,u=0,h=Array(l);if(r.length===l)return r;for(;l>c;c++){if(a[parseInt(c/s,10)]!==t)for(i=0;s>i;i++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;if(o[c%s]!==t&&(h[c]={value:"",fmtValue:"",ordinal:c},c+=1),n=r[d]){if(n.ordinal-u>1)for(u+=1;n.ordinal>u;u++)h[c]={value:"",fmtValue:"",ordinal:c},c+=1;u=n.ordinal,n.ordinal=c,h[c]=n,d+=1}else h[c]={value:"",fmtValue:"",ordinal:c}}return h},discover:function(t,n){var i=this,r=i.transport;return e.Deferred(function(e){r.discover(bt({success:function(t){t=i.reader.parse(t),i._handleCustomErrors(t)||(n&&(t=n(t)),e.resolve(t))},error:function(t,n,r){e.reject(t),i.error(t,n,r)}},t))}).promise().done(function(){i.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this;return t.discover({data:{command:"schemaMembers",restrictions:bt({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},function(e){return t.reader.members(e)})},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(Tt));var t=vt.fn._params.call(this,e);return t=bt({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});Gt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof Gt)&&t instanceof pt.data.DataSource)throw Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof Gt?t:new Gt(t)},Y={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},K={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},Q={read:function(e){var t,n,i,r,o,a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';return a+="SELECT NON EMPTY {",t=e.columns||[],n=e.rows||[],i=e.measures||[],r="rows"===e.measuresAxis,o=e.sort||[],!t.length&&n.length&&(!i.length||i.length&&r)&&(t=n,n=[],r=!1),t.length||n.length||(r=!1),t.length?a+=U(t,r?[]:i,o):i.length&&!r&&(a+=L(i).join(",")),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||r&&i.length>1)&&(a+=", NON EMPTY {",a+=n.length?U(n,r?i:[],o):L(i).join(","),a+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(a+=" FROM ",a+="(",a+=j(e.filter,e.connection.cube),a+=")"):a+=" FROM ["+e.connection.cube+"]",1==i.length&&t.length&&(a+=" WHERE ("+L(i).join(",")+")"),a+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>",a.replace(/\&/g,"&amp;")},discover:function(t){t=t||{};var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+(K[t.command]||t.command)+"</RequestType>",n+="<Restrictions>"+G("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),n+="<Properties>"+G("PropertyList",t.properties)+"</Properties>",n+="</Discover></Body></Envelope>"}},X=pt.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=bt(!0,{},this.options,e),pt.data.RemoteTransport.call(this,e),kt(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,n){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),pt.data.RemoteTransport.fn.setup.call(this,t,n)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return Q[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),J={cubes:{name:pt.getter("CUBE_NAME['#text']",!0),caption:pt.getter("CUBE_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),type:pt.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:pt.getter("CATALOG_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0)},measures:{name:pt.getter("MEASURE_NAME['#text']",!0),caption:pt.getter("MEASURE_CAPTION['#text']",!0),uniqueName:pt.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),aggregator:pt.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:pt.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:pt.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:pt.getter("KPI_NAME['#text']",!0),caption:pt.getter("KPI_CAPTION['#text']",!0),value:pt.getter("KPI_VALUE['#text']",!0),goal:pt.getter("KPI_GOAL['#text']",!0),status:pt.getter("KPI_STATUS['#text']",!0),trend:pt.getter("KPI_TREND['#text']",!0),statusGraphic:pt.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:pt.getter("KPI_TREND_GRAPHIC['#text']",!0),description:pt.getter("KPI_DESCRIPTION['#text']",!0),groupName:pt.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:pt.getter("DIMENSION_NAME['#text']",!0),caption:pt.getter("DIMENSION_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:pt.getter("DEFAULT_HIERARCHY['#text']",!0),type:pt.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:pt.getter("HIERARCHY_NAME['#text']",!0),caption:pt.getter("HIERARCHY_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:pt.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:pt.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:pt.getter("LEVEL_NAME['#text']",!0),caption:pt.getter("LEVEL_CAPTION['#text']",!0),description:pt.getter("DESCRIPTION['#text']",!0),uniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:pt.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:pt.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:pt.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:pt.getter("MEMBER_NAME['#text']",!0),caption:pt.getter("MEMBER_CAPTION['#text']",!0),uniqueName:pt.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:pt.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:pt.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:pt.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:pt.getter("CHILDREN_CARDINALITY['#text']",!0)}},Z=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],et=pt.data.XmlDataReader.extend({init:function(e){pt.data.XmlDataReader.call(this,e),this._extend(e)
},_extend:function(e){for(var t,n,i=0,r=Z.length;r>i;i++)t=Z[i],n=e[t],n&&n!==yt&&(this[t]=n)},parse:function(e){var t=pt.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return pt.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=pt.getter("['Fault']",!0)(e);return t?[{faultstring:pt.getter("faultstring['#text']",!0)(t),faultcode:pt.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){var t,n,i;return e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("Axes.Axis",!0)(e)),n=$(t[0]),i={},t.length>2&&(i=$(t[1])),{columns:n,rows:i}},data:function(e){var t,n,i,r,o,a;for(e=pt.getter("ExecuteResponse.return.root",!0)(e),t=q(pt.getter("CellData.Cell",!0)(e)),n=[],i=pt.getter("['@CellOrdinal']"),r=pt.getter("Value['#text']"),o=pt.getter("FmtValue['#text']"),a=0;t.length>a;a++)n.push({value:r(t[a]),fmtValue:o(t[a]),ordinal:parseInt(i(t[a]),10)});return n},_mapSchema:function(e,t){var n,i,r,o,a;for(e=pt.getter("DiscoverResponse.return.root",!0)(e),n=q(pt.getter("row",!0)(e)),i=[],r=0;n.length>r;r++){o={};for(a in t)o[a]=t[a](n[r]);i.push(o)}return i},measures:function(e){return this._mapSchema(e,J.measures)},kpis:function(e){return this._mapSchema(e,J.kpis)},hierarchies:function(e){return this._mapSchema(e,J.hierarchies)},levels:function(e){return this._mapSchema(e,J.levels)},dimensions:function(e){return this._mapSchema(e,J.dimensions)},cubes:function(e){return this._mapSchema(e,J.cubes)},catalogs:function(e){return this._mapSchema(e,J.catalogs)},members:function(e){return this._mapSchema(e,J.members)}}),bt(!0,pt.data,{PivotDataSource:Gt,XmlaTransport:X,XmlaDataReader:et,PivotCubeBuilder:Wt,transports:{xmla:X},readers:{xmla:et}}),tt=function(e,t){if(!e)return null;for(var n=0,i=e.length;i>n;n++)if(e[n].field===t)return e[n];return null},nt=function(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r},pt.ui.PivotSettingTarget=mt.extend({init:function(t,n){var i=this;mt.fn.init.call(i,t,n),i.element.addClass("k-pivot-setting"),i.dataSource=pt.data.PivotDataSource.create(n.dataSource),i._refreshHandler=e.proxy(i.refresh,i),i.dataSource.first(xt,i._refreshHandler),n.template||(i.options.template="<div data-"+pt.ns+'name="${data.name || data}">${data.name || data}'+(i.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),i.template=pt.template(i.options.template),i.emptyTemplate=pt.template(i.options.emptyTemplate),i._sortable(),i.element.on("click"+Et,".k-button,.k-item",function(t){var n=e(t.target),r=n.closest("["+pt.attr("name")+"]").attr(pt.attr("name"));r&&(n.hasClass("k-setting-delete")?i.remove(r):i.options.sortable&&n[0]===t.currentTarget&&i.sort({field:r,dir:n.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(n.filterable||n.sortable)&&(i.fieldMenu=new ft.PivotFieldMenu(i.element,{messages:i.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:i.dataSource})),i.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(xt,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(xt,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var n=t.item.attr(pt.attr("name"));"receive"==t.action?e.add(n):"remove"==t.action?e.remove(n):"sort"==t.action&&e.move(n,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var n,i,r=-1;for(n=0,i=t.length;i>n;n++)if(O(t[n])===e){r=n;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t,n,i=2==e.type||"aggregator"in e||this._isKPI(e);return i?"measures"===this.options.setting:"measures"===this.options.setting?i:(t=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName,this._indexOf(n,t)>-1?!1:(t=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,t)>-1?!1:!0))},add:function(t){var n,i,r=this.dataSource[this.options.setting]();for(t=e.isArray(t)?t.slice(0):[t],n=0,i=t.length;i>n;n++)-1!==this._indexOf(t[n],r)&&(t.splice(n,1),n-=1,i-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var n=this.dataSource[this.options.setting](),i=this._indexOf(e,n);i>-1&&(e=n.splice(i,1)[0],n.splice(t,0,e),this.dataSource[this.options.setting](n))},remove:function(e){var t=this.dataSource[this.options.setting](),n=this._indexOf(e,t);n>-1&&(t.splice(n,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,n=t===!0||t.allowUnsort,i=n&&"asc"===e.dir,r=this.dataSource.sort()||[],o=nt(r,e.field);i&&r.length!==o.length&&(e=null),e&&o.push(e),this.dataSource.sort(o)},refresh:function(){var e,n="",i=this.dataSource[this.options.setting](),r=i.length,o=0;if(r)for(;r>o;o++)e=i[o],e=e.name===t?{name:e}:e,n+=this.template(bt({sortIcon:this._sortIcon(e.name)},e));else n=this.emptyTemplate(this.options.messages.empty);this.element.html(n)},destroy:function(){mt.fn.destroy.call(this),this.dataSource.unbind(xt,this._refreshHandler),this.element.off(Et),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=this.dataSource.sort(),n=tt(t,O(e)),i="";return n&&(i="k-i-sort-"+n.dir),i}}),it=mt.extend({init:function(n,i){var r,o,a=this;mt.fn.init.call(a,n,i),a._dataSource(),a._bindConfigurator(),a._wrapper(),a._createLayout(),a._columnBuilder=r=new dt,a._rowBuilder=o=new ut,a._contentBuilder=new ht,a._templates(),a.columnsHeader.add(a.rowsHeader).on("click","span.k-icon",function(){var n,i,s,l,c=e(this),d=r,u="expandColumn",h=c.attr(pt.attr("path")),p={axis:"columns",path:e.parseJSON(h)};c.parent().is("td")&&(d=o,u="expandRow",p.axis="rows"),i=c.hasClass(Rt),s=d.metadata[h],l=s.expanded===t,n=i?Ft:zt,a.trigger(n,p)||(d.metadata[h].expanded=!i,c.toggleClass(Rt,!i).toggleClass(Bt,i),!i&&l?a.dataSource[u](p.path):a.refresh())}),a._scrollable(),a.options.autoBind&&a.dataSource.fetch(),pt.notify(a)},events:[Pt,It,zt,Ft],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,n=this.options.dataCellTemplate,i=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=pt.template(e||Lt,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=pt.template(n||Nt,{useWithBlock:!!n}),this._contentBuilder.kpiStatusTemplate=pt.template(i||Ot,{useWithBlock:!!i}),this._contentBuilder.kpiTrendTemplate=pt.template(r||Ht,{useWithBlock:!!r}),this._rowBuilder.template=pt.template(t||Lt,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var n,i=this._contentBuilder,r=i.columnIndexes[e||0],o=i.rowIndexes[t||0];return r&&o?(n=o.index*i.rowLength+r.index,{columnTuple:r.tuple,rowTuple:o.tuple,measure:r.measure||o.measure,dataItem:this.dataSource.view()[n]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){mt.fn.setOptions.call(this,e),this._templates()},_dataSource:function(){var t=this,n=t.options.dataSource;n=e.isArray(n)?{data:n}:n,t.dataSource&&this._refreshHandler?t.dataSource.unbind(xt,t._refreshHandler).unbind(Tt,t._stateResetHandler).unbind(St,t._progressHandler).unbind(Ct,t._errorHandler):(t._refreshHandler=e.proxy(t.refresh,t),t._progressHandler=e.proxy(t._requestStart,t),t._stateResetHandler=e.proxy(t._stateReset,t),t._errorHandler=e.proxy(t._error,t)),t.dataSource=pt.data.PivotDataSource.create(n).bind(xt,t._refreshHandler).bind(St,t._progressHandler).bind(Tt,t._stateResetHandler).bind(Ct,t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(At).addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,n){var i='<span tabindex="0" class="k-button" data-'+pt.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(o+='<span class="k-icon k-si-close k-setting-delete"></span>'),o&&(i+='<span class="k-field-actions">'+o+"</span>"),i+="</span>",new pt.ui.PivotSettingTarget(t,e.extend({template:i,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},n))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this,n=e(Vt),i=n.find(".k-pivot-rowheaders"),r=n.find(".k-pivot-table"),o=e(At).addClass("k-grid k-widget");t._measureFields(),t.columnFields=e(At).addClass("k-pivot-toolbar k-header k-settings-columns"),t.rowFields=e(At).addClass("k-pivot-toolbar k-header k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",pt.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),t.content=e('<div class="k-grid-content" />'),i.append(t.measureFields),i.append(t.rowFields),i.append(t.rowsHeader),o.append(t.columnsHeader.parent()),o.append(t.content),r.append(t.columnFields),r.append(o),t.wrapper.append(n),t.columnsHeaderTree=new pt.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new pt.dom.Tree(t.rowsHeader[0]),t.contentTree=new pt.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){pt.ui.progress(this.wrapper,e)},_resize:function(){var e=this.columnsHeader.children("table");this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),e.css("table-layout",Dt),clearTimeout(this._layoutTimeout),this._layoutTimeout=setTimeout(function(){e.css("table-layout","fixed")}))},_setSectionsWidth:function(){var e=this.rowsHeader,t=e.parent(".k-pivot-rowheaders").width(Dt),n=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth());n=Math.max(e.children("table").width(),n),t.width(n)},_setSectionsHeight:function(){var e=this.measureFields.height(Dt).height(),t=this.columnFields.height(Dt).height(),n=this.rowFields.height(Dt).innerHeight(),i=this.columnsHeader.height(Dt).innerHeight(),r=n-this.rowFields.height(),o=t>e?t:e,a=i>n?i:n;this.measureFields.height(o),this.columnFields.height(o),this.rowFields.height(a-r),this.columnsHeader.height(a)},_setContentWidth:function(){var e=this.content.find("table"),t=this.content.width(),n=e.children("colgroup").children().length,i=100,r=n*this.options.columnWidth;r>t&&(i=Math.ceil(r/t*100)),e.add(this.columnsHeader.children("table")).css("min-width",i+"%")},_setContentHeight:function(){var e=this,n=e.content,i=e.rowsHeader,r=e.wrapper.innerHeight(),o=pt.support.scrollbar(),a=n[0].offsetHeight===n[0].clientHeight;if(e.wrapper.is(":visible")){if(!r)return a&&(o=0),i.height(n.height()-o),t;r-=e.columnFields.outerHeight(),r-=e.columnsHeader.outerHeight(),2*o>=r&&(r=2*o+1,a||(r+=o)),n.height(r),a&&(o=0),i.height(r-o)}},_axisMeasures:function(e){var t=[],n=this.dataSource,i=n.measures(),r=i.length>1||i[0]&&i[0].type;return n.measuresAxis()===e&&(0===n[e]().length||r)&&(t=i),t},refresh:function(){var e,t=this,n=t.dataSource,i=n.axes(),r=(i.columns||{}).tuples||[],o=(i.rows||{}).tuples||[],a=t._columnBuilder,s=t._rowBuilder,l={},c={};t.trigger(Pt,{action:"rebind"})||(a.measures=this._axisMeasures("columns"),t.columnsHeaderTree.render(a.build(r)),t.rowsHeaderTree.render(s.build(o)),l={indexes:a._indexes,measures:a.measures,metadata:a.metadata},c={indexes:s._indexes,measures:this._axisMeasures("rows"),metadata:s.metadata},t.contentTree.render(t._contentBuilder.build(n.view(),l,c)),t._resize(),t.touchScroller?t.touchScroller.contentResized():(e=pt.touchScroller(t.content),e&&e.movable&&(t.touchScroller=e,e.movable.bind("change",function(e){t.columnsHeader.scrollLeft(-e.sender.x),t.rowsHeader.scrollTop(-e.sender.y)}))),t._progress(!1),t.trigger(It))},_scrollable:function(){var t=this,n=t.columnsHeader,i=t.rowsHeader;t.content.scroll(function(){n.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+Et+" mousewheel"+Et,e.proxy(t._wheelScroll,t))},_wheelScroll:function(t){var n,i;t.ctrlKey||(n=pt.wheelDeltaY(t),i=this.content.scrollTop(),n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Et,!1),this.rowsHeader.scrollTop(i+-n),this.content.scrollTop(i+-n)))}}),rt=pt.dom.element,ot=pt.dom.html,at=pt.dom.text,st=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},lt=function(e,t){for(var n=[],i=0;t>=i;i++)n.push(e.members[i].name);return n},ct=function(e,t){for(var n="",i=0;t>=i;i++)n+=e.members[i].name;return n},dt=gt.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("th",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r,o=this.rows,a=o.length,s=0;a>s;s++)if(e=o[s],1!==e.rowSpan)for(i=e.children,n=0,t=i.length;t>n;n++)r=i[n],r.tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,n=t.length,i=0;n>i&&t[i]!==e;i++);return i},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,n=0,i=0;if(t)for(;t>i;i++)n+=e[i].attr.colSpan||1;return n||(n=this.measures),n},_row:function(e,t,n){var i,r,o=this.rootTuple.members[t].name,a=e.members[t].levelNum,s=o+a,l=this.map,c=l[s];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===n||(c.parentMember=n,c.colSpan=0)):(c=rt("tr",null,[]),c.parentMember=n,c.colSpan=0,c.rowSpan=1,l[s]=c,i=l[o+(+a-1)],i&&(r=i.children,c.notFirst=r[1]&&-1===r[1].attr.className.indexOf("k-alt")?!0:i.notFirst),this.rows.splice(this._rowIndex(i)+1,0,c)),c},_measures:function(e,t,n){var i,r,o,a=this.map,s=a.measureRow;for(s||(s=rt("tr",null,[]),a.measureRow=s,this.rows.push(s)),r=0,o=e.length;o>r;r++)i=e[r],s.children.push(rt("th",{className:"k-header"+(n||"")},[this._content(i,t)]));return o},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_cell:function(e,t){return rt("th",{className:"k-header"+e},t)},_buildRows:function(e,n,i){var r,o,a,s,l,c,d,u,h,p,f=e.members,g=f[n],m=f[n+1],v=[],_=0;if(g.measure)return this._measures(g.children,e),t;if(u=pt.stringify(lt(e,n)),r=this._row(e,n,i),a=g.children,s=a.length,p=this.metadata[u],p||(this.metadata[u]=p=st(+g.levelNum,n)),this._indexes.push({path:u,tuple:e}),g.hasChildren&&(p.expanded===!1&&(s=0,p.children=0),d={className:"k-icon "+(s?Rt:Bt)},d[pt.attr("path")]=u,v.push(rt("span",d))),v.push(this._content(g,e)),l=this._cell(r.notFirst?" k-first":"",v),r.children.push(l),r.colSpan+=1,s){for(c=this._cell(" k-alt",[this._content(g,e)]),r.children.push(c);s>_;_++)o=this._buildRows(a[_],n,g);h=o.colSpan,l.attr.colSpan=h,p.children=h,p.members=1,r.colSpan+=h,r.rowSpan=o.rowSpan+1,m&&(h=m.measure?this._measures(m.children,e," k-alt"):this._buildRows(e,n+1).colSpan,c.attr.colSpan=h,h-=1,p.members+=h,r.colSpan+=h)}else m&&(h=m.measure?this._measures(m.children,e):this._buildRows(e,n+1).colSpan,p.members=h,h>1&&(l.attr.colSpan=h,r.colSpan+=h-1));return p.children>p.maxChildren&&(p.maxChildren=p.children),p.members>p.maxMembers&&(p.maxMembers=p.members),(c||l).tupleAll=!0,r}}),ut=gt.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),n=this._colGroup();return[rt("table",null,[n,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this.rows[0].children.length,t=[],n=0;e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_normalize:function(){for(var e,t,n,i,r=this.rows,o=r.length,a=0,s=this.rootTuple.members,l=s[0].name,c=s.length,d=0,u=this.map;o>a;a++)for(e=r[a],d=0;c>d;d++)n=this[s[d].name],t=e.colSpan["dim"+d],t&&n>t.levelNum&&(t.attr.colSpan=n-t.levelNum+1);e=u[l],i=u[l+"all"],e&&(e.children[0].attr.className="k-first"),i&&(i.children[0].attr.className+=" k-first")},_row:function(e){var t=rt("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return ot(this.template({member:e,tuple:t}))},_buildRows:function(e,t){var n,i,r,o,a,s,l,c,d,u=this.map,h=e.members,p=h[t],f=h[t+1],g=p.children,m=g.length,v=+p.levelNum+1,_=this.rootTuple.members[t].name,y=lt(e,t-1).join(""),w=y+(p.parentName||""),b=u[w+"all"]||u[w],k=[];if(!b||b.hasChild?b=this._row():b.hasChild=!0,p.measure){for(c={className:b.allCell?"k-grid-footer":""},b.children.push(rt("td",c,[this._content(g[0],e)])),b.rowSpan=m,d=1;m>d;d++)this._row([rt("td",c,[this._content(g[d],e)])]);return b}if(u[y+p.name]=b,n=pt.stringify(lt(e,t)),o=this.metadata[n],o||(this.metadata[n]=o=st(v-1,t)),this._indexes.push({path:n,tuple:e}),p.hasChildren&&(o.expanded===!1&&(m=0,o.children=0),a={className:"k-icon "+(m?Rt:Bt)},a[pt.attr("path")]=n,k.push(rt("span",a))),k.push(this._content(p,e)),l=rt("td",{className:b.allCell&&!m?"k-grid-footer":""},k),l.levelNum=v,b.children.push(l),b.colSpan["dim"+t]=l,(!this[_]||v>this[_])&&(this[_]=v),m){for(b.allCell=!1,b.hasChild=!1,d=0;m>d;d++)i=this._buildRows(g[d],t),b!==i&&(b.rowSpan+=i.rowSpan);b.rowSpan>1&&(l.attr.rowSpan=b.rowSpan),o.children=b.rowSpan,s=rt("td",{className:"k-grid-footer"},[this._content(p,e)]),s.levelNum=v,r=this._row([s]),r.colSpan["dim"+t]=s,r.allCell=!0,u[y+p.name+"all"]=r,f&&(i=this._buildRows(e,t+1),s.attr.rowSpan=i.rowSpan),b.rowSpan+=r.rowSpan,o.members=r.rowSpan}else f&&(b.hasChild=!1,this._buildRows(e,t+1),(s||l).attr.rowSpan=b.rowSpan,o.members=b.rowSpan);return o.children>o.maxChildren&&(o.maxChildren=o.children),o.members>o.maxMembers&&(o.maxMembers=o.members),b}}),ht=gt.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,n,i){var r,o,a=n.indexes[0],s=n.metadata[a?a.path:t];return this.columnAxis=n,this.rowAxis=i,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:n.measures.length||1,this.rowLength||(this.rowLength=1),r=this._tbody(),o=this._colGroup(),[rt("table",null,[o,r])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],n=0;for(this.rows[0]&&(e=this.rows[0].children.length);e>n;n++)t.push(rt("col",null));return rt("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis),this.rowIndexes=this._indexes(this.rowAxis),this._buildRows()):this.rows.push(rt("tr",null,[rt("td",null,[ot("&nbsp;")])])),rt("tbody",null,this.rows)},_indexes:function(e){var n,i,r,o,a,s=[],l=e.indexes,c=e.metadata,d=e.measures,u=d.length||1,h=0,p=0,f=0,g=l.length;if(!g){for(r=0;u>r;r++)s[r]={index:r,measure:d[r],tuple:null};return s}for(;g>f;f++){if(n=l[f],i=c[n.path],o=i.children+i.members,a=0,o&&(o-=u),i.expanded===!1&&i.children!==i.maxChildren&&(a=i.maxChildren),i.parentMember&&0===i.levelNum&&(o=-1),o>-1){for(r=0;u>r;r++)s[o+p+r]={children:o,index:h,measure:d[r],tuple:n.tuple},h+=1;for(;s[p]!==t;)p+=1}h+=a}return s},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,n=0;t>n;n++)this.rows.push(this._buildRow(e[n]))},_buildRow:function(e){for(var t,n,i,r,o,a,s=e.index*this.rowLength,l=this.columnIndexes,c=l.length,d=[],u=0;c>u;u++)t=l[u],r={},t.children&&(r.className="k-alt"),i="",o=this.data[s+t.index],a=t.measure||e.measure,n={columnTuple:t.tuple,rowTuple:e.tuple,measure:a,dataItem:o},""!==o.value&&a&&a.type&&("status"===a.type?i=this.kpiStatusTemplate(n):"trend"===a.type&&(i=this.kpiTrendTemplate(n))),i||(i=this.dataTemplate(n)),d.push(rt("td",r,[ot(i)]));return r={},e.children&&(r.className="k-grid-footer"),rt("tr",r,d)}}),ft.plugin(it)}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return f.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox [type=checkbox]")}function o(e){return function(t,n){n=n.closest(G);var i,r=n.parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function a(t,n){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),p.test(i.className)?n.insertBefore(i,n.firstChild):n.appendChild(i)}function s(t){var n=t.children("div"),i=t.children("ul"),r=n.children(".k-icon"),o=t.children(":checkbox"),s=n.children(".k-in");t.hasClass("k-treeview")||(n.length||(n=e("<div />").prependTo(t)),!r.length&&i.length?r=e("<span class='k-icon' />").prependTo(n):i.length&&i.children().length||(r.remove(),i.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(n).append(o),s.length||(s=t.children("a").eq(0).addClass("k-in"),s.length||(s=e("<span class='k-in' />")),s.appendTo(n),n.length&&a(n[0].nextSibling,s[0])))}function l(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new g.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:f.support.mobileOS?-40/f.support.zoomLevel():10},dragstart:k(t.dragstart,t),dragcancel:k(t.dragcancel,t),drag:k(t.drag,t),dragend:k(t.dragend,t),$angular:e.options.$angular})}var c,d,u,h,p,f=window.kendo,g=f.ui,m=f.data,v=e.extend,_=f.template,y=e.isArray,w=g.Widget,b=m.HierarchicalDataSource,k=e.proxy,x=f.keys,C=".kendoTreeView",S="select",T="check",D="navigate",A="expand",E="change",M="error",P="checked",I="indeterminate",z="collapse",F="dragstart",R="drag",B="drop",L="dragend",O="dataBound",H="click",N="visibility",V="undefined",U="k-state-hover",W="k-treeview",j=":visible",G=".k-item",q="string",$="aria-selected",Y="aria-disabled",K={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Q=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===q};d=n(".k-group"),u=n(".k-group,.k-content"),h=function(e){return e.children("div").children(".k-icon")},p=/k-sprite/,c=f.ui.DataBoundWidget.extend({init:function(e,t){var n,i,r=this,o=!1,a=t&&!!t.dataSource;y(t)&&(n=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==V&&y(t.dataSource)&&(t.loadOnDemand=!1),w.prototype.init.call(r,e,t),e=r.element,t=r.options,i=e.is("ul")&&e||e.hasClass(W)&&e.children("ul"),o=!a&&i.length,o&&(t.dataSource.list=i),r._animation(),r._accessors(),r._templates(),e.hasClass(W)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),i&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.root.attr("role","tree"),r._dataSource(o),r._attachEvents(),r._dragging(),o?r._syncHtmlAndDataSource():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=f.format("{0}_tv_active",r.element[0].id)),f.notify(r)},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+C,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+C,n,function(){e(this).addClass(U)}).on("mouseleave"+C,n,function(){e(this).removeClass(U)}).on(H+C,n,k(t._click,t)).on("dblclick"+C,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on(H+C,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+C,k(t._keydown,t)).on("focus"+C,k(t._focus,t)).on("blur"+C,k(t._blur,t)).on("mousedown"+C,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",k(t._mousedown,t)).on("change"+C,".k-checkbox :checkbox",k(t._checkboxChange,t)).on("click"+C,".k-checkbox :checkbox",k(t._checkboxClick,t)).on("click"+C,".k-request-retry",k(t._retryRequest,t)).on("click"+C,function(n){e(n.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data(I)&&(n.data(I,!1).prop(I,!1).prop(P,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){var n,i,o,a,s,l,c,d;for(e=e||this.root,t=t||this.dataSource,n=t.view(),i=f.attr("uid"),o=f.attr("expanded"),a=this.options.checkboxes,s=e.children("li"),l=0;s.length>l;l++)d=n[l],c=s.eq(l),c.attr("role","treeitem").attr(i,d.uid),d.expanded="true"===c.attr(o),a&&(d.checked=r(c).prop(P)),this._syncHtmlAndDataSource(c.children("ul"),d.children)},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=v({reverse:!0},t.expand)),v(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new l(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,t=e.options,n=k(e._fieldAccessor,e);t.template&&typeof t.template==q?t.template=_(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+=0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(e.expanded!==!0?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); ## var spriteCssClass = "+n("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag#  class='#= r.textClass(item) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+f.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= r.itemElement(data) #</li>"),loading:i("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:i("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e,this._dataSource(),this.dataSource.fetch(),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this),this._errorHandler=k(this._error,this),this.dataSource.bind(E,this._refreshHandler),this.dataSource.bind(M,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(E,this._refreshHandler),e.unbind(M,this._errorHandler))},_dataSource:function(e){function t(e){for(var n=0;e.length>n;n++)e[n]._initChildren(),e[n].children.fetch(),t(e[n].children.view())}var n=this,i=n.options,r=i.dataSource;r=y(r)?{data:r}:r,n._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=r=b.create(r),e&&(r.fetch(),t(r.view())),n._bindDataSource()},events:[F,R,B,L,O,A,z,S,E,D,T],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this,r=i.options,o=i.element;for(e in K)t=r[K[e]],n=o.attr(f.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),y(t)||(t=[t]),r[K[e]]=t},_fieldAccessor:function(t){var n=this.options[K[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+f.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+="})"},setOptions:function(e){w.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(G)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();r.length>i;i++)r[i][P]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=d(e),a=!0;if(o.length&&(t=r(o.children()),n=t.length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;
break}}else a=!t[0].indeterminate;return r(e).data(I,!a).prop(I,!a).prop(P,a&&t[0].checked)}},updateIndeterminate:function(e){var t,n,i;if(e=e||this.wrapper,t=d(e).children(),t.length){for(n=0;t.length>n;n++)this.updateIndeterminate(t.eq(n));i=this._setIndeterminate(e),i&&i.prop(P)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),t=n.children("div").find(".k-checkbox :checkbox"),t.prop(I)===!1?this.dataItem(n).set(P,t.prop(P)):this.dataItem(n).checked=!1,this._bubbleIndeterminate(n))}},_checkboxChange:function(t){var n=e(t.target),i=n.prop(P),r=n.closest(G);this.dataItem(r).set(P,i),this._trigger(T,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(G))},_mousedown:function(t){var n=e(t.currentTarget).closest(G);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;f.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do n=n.parentNode,n.scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop));while(n!=o);for(t.focus(),e=0;i.length>e;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==q&&(t=this.element.find(t)),Q(t)||(t=t[0]),i=o.test(t.className);do t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0);while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r?(n=d(e).children().first(),n.length||(n=t(e))):n=t(e):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=d(n).children().last(),t.length);)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),c=f.support.isRtl(r.element);n.target==n.currentTarget&&(!c&&o==x.RIGHT||c&&o==x.LEFT?s?i=r._nextVisible(a):r.expand(a):!c&&o==x.LEFT||c&&o==x.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==x.DOWN?i=r._nextVisible(a):o==x.UP?i=r._previousVisible(a):o==x.HOME?i=r._nextVisible(e()):o==x.END?i=r._previousVisible(e()):o==x.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(S,a)||r.select(a):o==x.SPACEBAR&&l.length&&(l.prop(P,!l.prop(P)).data(I,!1).prop(I,!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(D,i),r.current(i))))},_click:function(t){var n,i=this,r=e(t.currentTarget),o=u(r.closest(G)),a=r.attr("href");n=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:o.length&&!o.children().length,n&&t.preventDefault(),r.hasClass(".k-state-selected")||i._trigger(S,r)||i.select(r)},_wrapper:function(){var e,t,n=this,i=n.element,r="k-widget k-treeview";i.is("ul")?(e=i.wrap("<div />").parent(),t=i):(e=i,t=e.children("ul").eq(0)),n.wrapper=e.addClass(r),n.root=t},_group:function(e){var t=this,n=e.hasClass(W),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,r=this,o=t.children("li");n=v({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},s(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;n&&(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),e+=" />",n=v({template:e},t.checkboxes),typeof n.template==q&&(n.template=_(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||(n=n||{},n.expanded=typeof n.expanded!=V?n.expanded:this._expanded(e),n.index=typeof n.index!=V?n.index:e.index(),n.enabled=typeof n.enabled!=V?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=V?t.firstLevel:e.parent().parent().hasClass(W),t.length=typeof t.length!=V?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(G))})},dataItem:function(t){var n=e(t).closest(G).attr(f.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var a,l,c,u,h=this,p=d(i),f=p.children().length+1,g={firstLevel:i.hasClass(W),expanded:!o,length:f},m="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)u=t[c],u.index=n+c,m+=h._renderItem({group:g,item:u});if(l=e(m),l.length){for(h.angular("compile",function(){return{elements:l.get(),data:t.map(function(e){return{dataItem:e}})}}),p.length||(p=e(h._renderGroup({group:g})).appendTo(i)),r(l,p),i.hasClass("k-item")&&(s(i),h._updateNodeClasses(i)),h._updateNodeClasses(l.prev().first()),h._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)u=t[c],u.hasChildren&&(a=u.children.data(),a.length&&h._insertNode(a,u.index,l.eq(c),v,!h._expanded(l.eq(c))));return l}},_updateNode:function(t,n){function i(){p=!0}function r(e,t){e.find(".k-checkbox :checkbox").prop(P,t).data(I,!1).prop(I,!1)}var o,a,s,l,c,d=this,h={treeview:d.options,item:s},p=!1;if("selected"==t)s=n[0],a=d.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[t]).end(),s[t]?(d.current(a),a.attr($,!0)):a.attr($,!1);else for(e.inArray(t,d.options.dataTextField)>=0?p=!0:(h.item=n[0],h.item.bind("get",i),d.templates.itemContent(h),h.item.unbind("set",i)),o=0;n.length>o;o++)h.item=s=n[o],("spriteCssClass"==t||"imageUrl"==t||p)&&d.findByUid(s.uid).find(">div>.k-in").html(d.templates.itemContent(h)),t==P?(a=d.findByUid(s.uid),l=s[t],r(a.children("div"),l),d.options.checkboxes.checkChildren&&(r(a.children(".k-group"),l),d._setChecked(s.children,l),d._bubbleIndeterminate(a))):"expanded"==t?d._toggle(d.findByUid(s.uid),s,s[t]):"enabled"==t&&(a=d.findByUid(s.uid),a.find(".k-checkbox :checkbox").prop("disabled",!s[t]),c=!u(a).is(j),a.removeAttr(Y),s[t]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),c=!0,a.attr($,!1).attr(Y,!0)),d._updateNodeClasses(a,{},{enabled:s[t],expanded:!c}))},_appendItems:function(e,t,n){var i=d(n),r=i.children(),o=!this._expanded(n);typeof e==V&&(e=r.length),this._insertNode(t,e,n,function(t,n){e>=r.length?t.appendTo(n):t.insertBefore(r.eq(e))},o),this._expanded(n)&&(this._updateNodeClasses(n),d(n).css("display","block"))},refresh:function(n){var i,r,o,a,l,c,u=this.wrapper,h=n.node,p=n.action,f=n.items,m=this.options,v=m.loadOnDemand,_=m.checkboxes&&m.checkboxes.checkChildren;if(n.field){if(!f[0]||!f[0].level)return;return this._updateNode(n.field,f)}if(h&&(u=this.findByUid(h.uid),this._progress(u,!1)),_&&"remove"!=p){for(r=!1,i=0;f.length>i;i++)if("checked"in f[i]){r=!0;break}if(!r&&h&&h.checked)for(i=0;f.length>i;i++)f[i].checked=!0}if("add"==p)this._appendItems(n.index,f,u);else if("remove"==p)this._remove(this.findByUid(f[0].uid),!1);else if(h)if(d(u).empty(),f.length)for(this._appendItems(n.index,f,u),o=d(u).children(),v&&_&&this._bubbleIndeterminate(o.last()),i=0;o.length>i;i++)a=o.eq(i),this.trigger("itemChange",{item:a,data:this.dataItem(a),ns:g});else s(u),this.trigger("itemChange",{item:u,data:h,ns:g});else l=this._renderGroup({items:f,group:{firstLevel:!0,expanded:!0}}),this.root.length?(this._angularItems("cleanup"),c=e(l),this.root.attr("class",c.attr("class")).html(c.html())):this.root=this.wrapper.html(l).children("ul"),this.root.attr("role","tree"),this._angularItems("compile");for(i=0;f.length>i;i++)(!v||f[i].expanded)&&f[i].load();this.trigger(O,{node:h?u:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),h(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2==arguments.length?!!t:!0,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=i._current=e(n,o).closest(G),r.find(".k-in:first").addClass("k-state-focused"),a=r[0].id||a,a&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(G),r.find(".k-state-selected").each(function(){var e=i.dataItem(this);e.set("selected",!1),delete e.selected}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(E),t):r.find(".k-state-selected").closest(G)},_toggle:function(e,t,n){var i,r,o=this.options,a=u(e),s=n?"expand":"collapse";if(!a.data("animating")&&!this._trigger(s,e))if(this._expanded(e,n),i=t&&t.loaded(),r=!a.children().length,!n||i&&!r){if(this._updateNodeClasses(e,{},{expanded:n}),a.css("display")==(n?"block":"none"))return;n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(v({reset:!0},o.animation[s],{complete:function(){n&&a.css("height","")}}))}else o.loadOnDemand&&this._progress(e,!0),a.remove(),t.load()},toggle:function(t,n){t=e(t),h(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;w.fn.destroy.call(e),e.wrapper.off(C),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),f.destroy(e.element),e.root=e.wrapper=e.element=null},_expanded:function(e,n){var i=f.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(u(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element,i=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e,t?n.html(i):n.empty()):h(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[K.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,n,i){var r,o=this._objectOrSelf(n||t),a=o.dataSource;return n&&n[0]!=o.element[0]&&(r=o.dataItem(n),r.loaded()||(o._progress(n,!0),r.load()),n!=this.root&&(a=r.children,a&&a instanceof b||(r._initChildren(),r.loaded(!0),a=r.children))),e=this._toObservableData(e),i.call(this,a,e)},_toObservableData:function(t){var n,i,r=t;return(t instanceof window.jQuery||Q(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(f.attr("uid")),r=n.getByUid(i),r&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof f.data.ObservableArray?t=t.toJSON():y(t)||(t=[t]);var i=e.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,n,i){var r=this,o=r.root;return i=i||e.noop,n&&(o=d(n)),r._dataSourceMove(t,o,n,function(e,t){function o(){n&&r._expanded(n,!0);var i=e.data(),o=Math.max(i.length,0);return r._insert(i,t,o)}var a;return e.data()?(a=o(),i(a),a):(e.one(E,function(){i(o())}),null)})},_remove:function(t,n){var i,r,o,a=this;return t=e(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(s(i),a._updateNodeClasses(i)),a._updateNodeClasses(r),a._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(G)},findByUid:function(e){return this.element.find(".k-item["+f.attr("uid")+"="+e+"]")},expandPath:function(n,i){var r,o,a;for(n=n.slice(0),r=this,o=this.dataSource,a=o.get(n[0]),i=i||e.noop;n.length>0&&(a.expanded||a.loaded());)a.set("expanded",!0),n.shift(),a=o.get(n[0]);return n.length?(o.bind("change",function(e){var t=e.node&&e.node.id;t&&t===n[0]&&(n.shift(),n.length?o.get(n[0]).set("expanded",!0):i.call(r))}),a.set("expanded",!0),t):i.call(r)},_parents:function(e){for(var t=e&&e.parentNode(),n=[];t;)n.push(t),t=t.parentNode();return n},expandTo:function(e){var t,n;for(e instanceof f.data.Node||(e=this.dataSource.get(e)),t=this._parents(e),n=0;t.length>n;n++)t[n].set("expanded",!0)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),l.prototype={_removeTouchHover:function(){var e=this;f.support.touch&&e.hovered&&(e.hovered.find("."+U).removeClass(U),e.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var n=this,i=n.treeview,r=n.sourceNode=t.currentTarget.closest(G);i.trigger(F,{sourceNode:r[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(N,"hidden").appendTo(i.element)},drag:function(t){var n,i,r,o,a,s,l,c,d,u,h=this,p=h.treeview,g=h.sourceNode,m=h.dropTarget=e(f.eventTarget(t)),v=m.closest(".k-treeview");v.length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",i=m.closest(".k-top,.k-mid,.k-bot"),i.length?(o=i.outerHeight(),a=f.getOffset(i).top,s=m.closest(".k-in"),l=o/(s.length>0?4:2),c=a+l>t.y.location,d=t.y.location>a+o-l,h._removeTouchHover(),u=s.length&&!c&&!d,h.hovered=u?v:!1,h.dropHint.css(N,u?"hidden":"visible"),s.toggleClass(U,u),u?n="k-add":(r=i.position(),r.top+=c?0:o,h.dropHint.css(r)[c?"prependTo":"appendTo"](m.closest(G).children("div:first")),c&&i.hasClass("k-top")&&(n="k-insert-top"),d&&i.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=h.dropHint[0]&&(n=v[0]!=p.element[0]?"k-add":"k-denied")):(n="k-denied",h._removeTouchHover()),p.trigger(R,{sourceNode:g[0],dropTarget:m[0],pageY:t.y.location,pageX:t.x.location,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&h.dropHint.css(N,"hidden"),h._hintStatus(n)},dragcancel:function(){this.dropHint.remove()},dragend:function(){function e(e){a.updateIndeterminate(),a.trigger(L,{sourceNode:e&&e[0],destinationNode:n[0],dropPosition:s})}var n,i,r,o=this,a=o.treeview,s="over",l=o.sourceNode,c=o.dropHint,d=o.dropTarget;return"visible"==c.css(N)?(s=c.prevAll(".k-in").length>0?"after":"before",n=c.closest(G)):d&&(n=d.closest(".k-treeview .k-item"),n.length||(n=d.closest(".k-treeview"))),i={sourceNode:l[0],destinationNode:n[0],valid:"k-denied"!=o._hintStatus(),setValid:function(e){this.valid=e},dropTarget:d[0],dropPosition:s},r=a.trigger(B,i),c.remove(),o._removeTouchHover(),!i.valid||r?(o._draggable.dropped=i.valid,t):(o._draggable.dropped=!0,"over"==s?a.append(l,n,e):("before"==s?l=a.insertBefore(l,n):"after"==s&&(l=a.insertAfter(l,n)),e(l)),t)},destroy:function(){this._draggable.destroy()}},g.plugin(c)}(window.kendo.jQuery),function(e,t){function n(e,t){var n,i,r=[];for(n=0,i=e.length;i>n;n++)e[n].field!==t&&r.push(e[n]);return r}function i(e,t,n){var i,r,o,a;if(!e)return[];for(e=e.filters,i=0,r=[],o=e.length;o>i;i++)a=e[i].operator,(n||"in"===a)&&a!==n||e[i].field!==t||r.push(e[i]);return r}function r(t,n,r){var o,a=0,s=r.length;if(t=i(t,n,"in")[0])for(o=t.value.split(",");s>a;a++)r[a].checked=e.inArray(r[a].uniqueName,o)>=0;else for(;s>a;a++)r[a].checked=!0}function o(e,t){var n,i=e.length;for(n=0;i>n;n++)e[n].checked&&0!==e[n].level()&&t.push(e[n].uniqueName),e[n].hasChildren&&o(e[n].children.view(),t)}var a=window.kendo,s=a.ui,l="kendoContextMenu",c=e.proxy,d=".kendoPivotFieldMenu",u=s.Widget,h=u.extend({init:function(e,t){u.fn.init.call(this,e,t),this._dataSource(),this._layout(),a.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(a.template(f)({ns:a.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper[l]({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:c(this._menuOpen,this),select:c(this._select,this),copyAnchorStyles:!1}).data(l),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=c(this._filter,this);this._filterOperator=new a.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+d,t).on("click"+d,".k-button-filter",t).on("click"+d,".k-button-clear",c(this._reset,this))},_setFilterForm:function(e){var t="",n="";e&&(t=e.operator,n=e.value),this._filterOperator.value(t),this._filterValue.val(n)},_clearFilters:function(e){var t,n,r=this.dataSource.filter()||{},o=0;for(r.filters=r.filters||[],t=i(r,e),n=t.length;n>o;o++)r.filters.splice(r.filters.indexOf(t[o]),1);return r},_filter:function(e){var n,i,r=this,o=r._filterValue.val();return e.preventDefault(),o?(n={field:r.currentMember,operator:r._filterOperator.value(),value:o},i=r._clearFilters(r.currentMember),i.filters.push(n),r.dataSource.filter(i),r.menu.close(),t):(r.menu.close(),t)},_reset:function(e){var t=this,n=t._clearFilters(t.currentMember);e.preventDefault(),n.filters[0]||(n={}),t.dataSource.filter(n),t._setFilterForm(null),t.menu.close()},_sort:function(e){var t=this.currentMember,i=this.dataSource.sort()||[];i=n(i,t),i.push({field:t,dir:e}),this.dataSource.sort(i),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=a.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(a.template(g)({messages:t})).on("click"+d,".k-button-ok",c(this._applyIncludes,this)).on("click"+d,".k-button-cancel",c(this._closeWindow,this)),this.includeWindow=new s.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:c(this._windowOpen,this)})},_applyIncludes:function(e){var t,n=[],r=this.treeView.dataSource.view(),a=r[0].checked,s=this.dataSource.filter(),l=i(s,this.currentMember,"in")[0];o(r,n),l&&(a?(s.filters.splice(s.filters.indexOf(l),1),s.filters.length||(s={})):l.value=n.join(","),t=s),n.length&&(t||a||(t={field:this.currentMember,operator:"in",value:n.join(",")},s&&(s.filters.push(t),t=s))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var e=this;return a.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(t){var n={},i=e.treeView.dataSource.get(t.data.uniqueName),o=t.data.uniqueName;o?(n.memberUniqueName=i.uniqueName.replace(/\&/g,"&amp;"),n.treeOp=1):n.levelUniqueName=e.currentMember+".[(ALL)]",e.dataSource.schemaMembers(n).done(function(n){r(e.dataSource.filter(),e.currentMember,n),t.success(n)}).fail(t.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new s.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"name",checkboxes:{checkChildren:!0},dataBound:function(){s.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){var n;t.event&&(n=a.attr("name"),this.currentMember=e(t.event.target).closest("["+n+"]").attr(n),this.options.filterable&&this._setFilterForm(i(this.dataSource.filter(),this.currentMember)[0]))},_select:function(t){var n=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),n.hasClass("k-include-item")?this.includeWindow.center().open():n.hasClass("k-sort-asc")?this._sort("asc"):n.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),s.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){u.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.reeeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),p='<div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div>',f='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li>'+p+"</li></ul></li># } #</ul>",g='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';s.plugin(h)}(window.kendo.jQuery),function(e,t){function n(t,i){var r,o,a=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))a=t.filters;else if(t.field==i)return t;for(e.isArray(t)&&(a=t),r=0;a.length>r;r++)if(o=n(a[r],i))return o}function i(t,n){t.filters&&(t.filters=e.grep(t.filters,function(e){return i(e,n),e.filters?e.filters.length:e.field!=n}))}function r(e,t){var n=o.getter(t,!0);return function(t){for(var i,r,o=e(t),a=[],s=0,l={};o.length>s;)i=o[s++],r=n(i),l.hasOwnProperty(r)||(a.push(i),l[r]=!0);return a}}var o=window.kendo,a=o.ui,s=o.data.DataSource,l=a.Widget,c="change",d="boolean",u="enums",h="string",p="Is equal to",f="Is not equal to",g=e.proxy,m=l.extend({init:function(n,i){var r,a,s,p,f,m,v,_,y,w;n=e(n).addClass("k-filtercell"),r=this.wrapper=e("<span/>").appendTo(n),a=this,m=a.operators=i.operators||{},v=a.input=e("<input/>").attr(o.attr("bind"),"value: value").appendTo(r),l.fn.init.call(a,n[0],i),i=a.options,s=a.dataSource=i.dataSource,a.model=s.reader.model,f=i.type=h,_=o.getter("reader.model.fields",!0)(s)||{},y=_[i.field],y&&y.type&&(f=i.type=y.type),i.values&&(i.type=f=u),m=m[f]||i.operators[f],a._parse=function(e){return e+""},a.model&&a.model.fields&&(w=a.model.fields[i.field],w&&w.parse&&(a._parse=g(w.parse,w))),a.viewModel=p=o.observable({operator:i.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e}}),p.bind(c,g(a.updateDsFilter,a)),f==h&&a.initSuggestDataSource(i),null!==i.inputWidth&&v.width(i.inputWidth),a._setInputType(i,f),f!=d&&i.showOperators!==!1?a._createOperatorDropDown(m):r.addClass("k-operator-hidden"),a._createClearIcon(),o.bind(this.wrapper,p),f==h&&(i.template||a.setAutoCompleteSource()),f==u&&a.setComboBoxSource(a.options.values),a._refreshUI(),a._refreshHandler=g(a._refreshUI,a),a.dataSource.bind(c,a._refreshHandler)},_setInputType:function(t,n){var i,r,a,s,l,c=this,p=c.input;"function"==typeof t.template?t.template.call(c.viewModel,{element:c.input,dataSource:c.suggestDataSource}):n==h?p.attr(o.attr("role"),"autocomplete").attr(o.attr("text-field"),t.dataTextField||t.field).attr(o.attr("filter"),t.suggestionOperator).attr(o.attr("delay"),t.delay).attr(o.attr("min-length"),t.minLength).attr(o.attr("value-primitive"),!0):"date"==n?p.attr(o.attr("role"),"datepicker"):n==d?(p.remove(),i=e("<input type='radio'/>"),r=c.wrapper,a=o.guid(),s=e("<label/>").text(t.messages.isTrue).append(i),i.attr(o.attr("bind"),"checked:value").attr("name",a).val("true"),l=s.clone().text(t.messages.isFalse),i.clone().val("false").appendTo(l),r.append([s,l])):"number"==n?p.attr(o.attr("role"),"numerictextbox"):n==u&&p.attr(o.attr("role"),"combobox").attr(o.attr("text-field"),"text").attr(o.attr("suggest"),!0).attr(o.attr("filter"),"contains").attr(o.attr("value-field"),"value").attr(o.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var n,i,r=[];for(n in t)r.push({text:t[n],value:n});i=e('<input class="k-dropdown-operator" '+o.attr("bind")+'="value: operator"/>').appendTo(this.wrapper),this.operatorDropDown=i.kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var n=e.suggestDataSource;n instanceof s||(!e.customDataSource&&n&&(n.group=t),n=this.suggestDataSource=s.create(n)),e.customDataSource||(n._pageSize=t,n.reader.data=r(n.reader.data,this.options.field)),this.suggestDataSource=n},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=s.create({data:e}),n=this.input.data("kendoComboBox");n&&n.setDataSource(t)},_refreshUI:function(){var t=this,i=n(t.dataSource.filter(),this.options.field)||{},r=t.viewModel;t.manuallyUpdatingVM=!0,i=e.extend(!0,{},i),t.options.type==d&&r.value!==i.value&&t.wrapper.find(":radio").prop("checked",!1),i.operator&&r.set("operator",i.operator),r.set("value",i.value),t.manuallyUpdatingVM=!1},updateDsFilter:function(n){var i,r,o,a=this,s=a.viewModel;a.manuallyUpdatingVM||"operator"==n.field&&s.value===t||(i=e.extend({},a.viewModel.toJSON(),{field:a.options.field}),r={logic:"and",filters:[]},i.value!==t&&null!==i.value&&r.filters.push(i),o=a._merge(r),a.dataSource.filter(o.filters.length?o:{}))},_merge:function(t){var n,r,o,a=this,s=t.logic||"and",l=t.filters,c=a.dataSource.filter()||{filters:[],logic:"and"};for(i(c,a.options.field),r=0,o=l.length;o>r;r++)n=l[r],n.value=a._parse(n.value);return l=e.grep(l,function(e){return""!==e.value&&null!==e.value}),l.length&&(c.filters.length?(t.filters=l,"and"!==c.logic&&(c.filters=[{logic:c.logic,filters:c.filters}],c.logic="and"),c.filters.push(l.length>1?t:l[0])):(c.filters=l,c.logic=s)),c},_createClearIcon:function(){var t=this;e("<button type='button' class='k-button k-button-icon'/>").attr(o.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(g(t.clearFilter,t)).appendTo(t.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},destroy:function(){var e=this;e.filterModel=null,l.fn.destroy.call(e),o.destroy(e.element)},events:[c],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:p,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:p,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:p,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:p,neq:f}}}});a.plugin(m)}(window.kendo.jQuery),function(e,t){function n(t){t=e(t),t.children(v).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(I)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(x),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(x),t.filter(":last-child").addClass(g)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,c=r.template,d=o.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",p="img",f="href",g="k-last",m="k-link",v="."+m,_="error",y=".k-item",w=".k-group",b=w+":visible",k="k-image",x="k-first",C="expand",S="select",T="k-content",D="activate",A="collapse",E="mouseenter",M="mouseleave",P="contentLoad",I="k-state-active",z="> .k-panel",F="> .k-content",R="k-state-focused",B="k-state-disabled",L="k-state-selected",O="."+L,H="k-state-highlight",N=y+":not(.k-state-disabled)",V=N+" > .k-link",U=y+".k-state-disabled > .k-link",W="> li > "+O+", .k-panel > li > "+O,j="k-state-default",G="aria-disabled",q="aria-expanded",$="aria-hidden",Y="aria-selected",K=":visible",Q=":empty",X="single",J={content:c("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},Z={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=q+"='"+(e.expanded?"true":"false")+"' "),e.enabled===!1&&(t+=G+"='true'"),t
},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" "+B:t.expanded===!0?" "+I:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=m;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==!0?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},et=d.extend({init:function(t,n){var i,o=this;d.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+h,V,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(E+h+" "+M+h,V,o._toggleHover).on("click"+h,U,!1).on("keydown"+h,e.proxy(o._keydown,o)).on("focus"+h,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+h,function(){o._current(null)}).attr("role","menu"),i=t.find("li."+I+" > ."+T),i[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[C,A,S,D,_,P],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){d.fn.destroy.call(this),this.element.off(h),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),d.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=n!==!1,t=this.element.find(t),t.each(function(o,a){a=e(a);var s=a.find(z).add(a.find(F));if(!a.hasClass(B)&&s.length>0){if(i.options.expandMode==X&&i._collapseAllExpanded(a))return i;t.find("."+H).removeClass(H),a.addClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(C,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=n!==!1,t=i.element.find(t),t.each(function(t,o){o=e(o);var a=o.find(z).add(o.find(F));!o.hasClass(B)&&a.is(K)&&(o.removeClass(H),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(A,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){e=this.element.find(e),e.toggleClass(j,t).toggleClass(B,!t).attr(G,!t)},select:function(n){var i=this;return n===t?i.element.find(W).parent():(n=i.element.find(n),n.length?n.each(function(){var n=e(this),r=n.children(v);return n.hasClass(B)?i:(i._triggerEvent(S,n)||i._updateSelected(r),t)}):this._updateSelected(n),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(z):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){e=this.element.find(e);var t=this,r=e.parentsUntil(t.element,y),o=e.parent("ul");return e.remove(),!o||o.hasClass("k-panelbar")||o.children(y).length||o.remove(),r.length&&(r=r.eq(0),n(r),i(r)),t},reload:function(t){var n=this;t=n.element.find(t),t.each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+T),!t.is(K))})},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(b);return t[0]?t.children(N).last():e},_current:function(e){var n=this,i=n._focused,r=n._itemId;return e===t?i:(n.element.removeAttr("aria-activedescendant"),i&&(i[0].id===r&&i.removeAttr("id"),i.children(v).removeClass(R)),e&&(r=e[0].id||r,e.attr("id",r).children(v).addClass(R),n.element.attr("aria-activedescendant",r)),n._focused=e,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(v)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(b),n=e.nextAll(":visible").first();return t[0]&&(n=t.children("."+x)),n[0]||(n=e.parent(b).parent(y).next()),n[0]||(n=this._first()),n.hasClass(B)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prevAll(":visible").first();if(n[0])for(t=n;t[0];)t=t.children(b).children("."+g),t[0]&&(n=t);else n=e.parent(b).parent(y),n[0]||(n=this._last());return n.hasClass(B)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var r,o,a=this,l=e.isPlainObject(t),c=n&&n[0];return c||(i=a.element),o={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(I),length:i.children().length},c&&!i.length&&(i=e(et.renderGroup({group:o})).appendTo(n)),l||e.isArray(t)?(r=e.map(l?[t]:t,function(t,n){return e("string"==typeof t?t:et.renderItem({group:o,item:s(t,{index:n})}))}),c&&n.attr(q,!1)):(r="string"==typeof t&&"<"!=t[0]?a.element.find(t):e(t),a._updateItemsClasses(r)),{items:r,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+B).length||n.toggleClass("k-state-hover",t.type==E)},_updateClasses:function(){var t,r,o=this;t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),t.parent().attr(q,!1).not("."+I).children("ul").attr($,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],c=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children(p).addClass(k),o=t.children("a").addClass(m),o[0]&&(o.attr("href",l),o.children(p).addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(G,!0).removeAttr("disabled"),t.children("div").addClass(T).attr("role","region").attr($,!0).hide().parent().attr(q,!1),o=t.children(O),o[0]&&(a&&a.removeAttr(Y).children(O).removeClass(L),o.addClass(L),this._selected=t.attr(Y,!0)),t.children(v)[0]||(i="<span class='"+m+"'/>",s&&s[n]&&t[0].parentNode==c&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(v).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s,l=this,c=l.element;if(!e.parents("li."+B).length&&e.closest(".k-widget")[0]==c[0]){if(o=e.closest(v),a=o.closest(y),l._updateSelected(o),n=a.find(z).add(a.find(F)),i=o.attr(f),r=i&&("#"==i.charAt(i.length-1)||-1!=i.indexOf("#"+l.element[0].id+"-")),t=!(!r&&!n.length),n.data("animating"))return t;if(l._triggerEvent(S,a)&&(t=!0),t!==!1)return l.options.expandMode==X&&l._collapseAllExpanded(a)?t:(n.length&&(s=n.is(K),l._triggerEvent(s?A:C,a)||(t=l._toggleItem(a,s))),t)}},_toggleItem:function(e,n){var i,r,o=this,a=e.find(z),s=e.find(v),l=s.attr(f);return a.length?(this._toggleGroup(a,n),i=!0):(r=e.children("."+T),r.length&&(i=!0,r.is(Q)&&l!==t?o._ajaxRequest(e,r,n):o._toggleGroup(r,n))),i},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is(K)==t&&(e.parent().attr(q,!t).attr($,t).toggleClass(I,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(D,e.closest(y))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1,o=t.find(z).add(t.find(F));return o.is(K)&&(r=!0),o.is(K)||0===o.length||(n=t.siblings(),n.find(z).add(n.find(F)).filter(function(){return e(this).is(K)}).each(function(t,n){n=e(n),r=i._triggerEvent(A,n.closest(y)),r||i._toggleGroup(n,!0)})),r},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(v),s=setTimeout(function(){o.addClass("k-loading")},100),l={},c=a.attr(f);e.ajax({type:"GET",cache:!1,url:c,dataType:"html",data:l,error:function(e,t){o.removeClass("k-loading"),r.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){function o(){return{elements:n.get()}}try{r.angular("cleanup",o),n.html(e),r.angular("compile",o)}catch(a){var s=window.console;s&&s.error&&s.error(a.name+": "+a.message+" in "+c),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(P,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){var n=this;return n.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(y),r=t._selected;r&&r.removeAttr(Y),t._selected=i.attr(Y,!0),n.find(W).removeClass(L),n.find("> ."+H+", .k-panel > ."+H).removeClass(H),e.addClass(L),e.parentsUntil(n,y).filter(":has(.k-header)").addClass(H),t._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(et,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=J.empty,n=e.item;return J.item(s(e,{image:n.imageUrl?J.image:t,sprite:n.spriteCssClass?J.sprite:t,itemWrapper:J.itemWrapper,renderContent:et.renderContent,arrow:n.items||n.content||n.contentUrl?J.arrow:t,subGroup:et.renderGroup},Z))},renderGroup:function(e){return J.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=et.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,Z))},renderContent:function(e){return J.content(s(e,Z))}}),r.ui.plugin(et)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o="horizontal",a="vertical",s=0,l=100,c=0,d=5,u="k-progressbar",h="k-progressbar-reverse",p="k-progressbar-indeterminate",f="k-complete",g="k-state-selected",m="k-progress-status",v="k-state-selected",_="k-state-default",y="k-state-disabled",w={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},b="change",k="complete",x="boolean",C=Math,S=e.extend,T=e.proxy,D=100,A=400,E=3,M={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"},P=r.extend({init:function(e,t){var n=this;r.fn.init.call(this,e,t),t=n.options,n._progressProperty=t.orientation===o?"width":"height",n._fields(),t.value=n._validateValue(t.value),n._validateType(t.type),n._wrapper(),n._progressAnimation(),t.value!==t.min&&t.value!==!1&&n._updateProgress()},setOptions:function(e){var t=this;r.fn.setOptions.call(t,e),e.hasOwnProperty("reverse")&&t.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&t.enable(e.enable),t._progressAnimation(),t._validateValue(),t._updateProgress()},events:[b,k],options:{name:"ProgressBar",orientation:o,reverse:!1,min:s,max:l,value:c,enable:!0,type:w.VALUE,chunkCount:d,showStatus:!0,animation:{}},_fields:function(){var t=this;t._isStarted=!1,t.progressWrapper=t.progressStatus=e()},_validateType:function(i){var r=!1;if(e.each(w,function(e,n){return n===i?(r=!0,!1):t}),!r)throw Error(n.format("Invalid ProgressBar type '{0}'",i))},_wrapper:function(){var e,t=this,n=t.wrapper=t.element,i=t.options,r=i.orientation;n.addClass("k-widget "+u),n.addClass(u+"-"+(r===o?o:a)),i.enable===!1&&n.addClass(y),i.reverse&&n.addClass(h),i.value===!1&&n.addClass(p),i.type===w.CHUNK?t._addChunkProgressWrapper():i.showStatus&&(t.progressStatus=t.wrapper.prepend(M.progressStatus).find("."+m),e=i.value!==!1?i.value:i.min,t.progressStatus.text(i.type===w.VALUE?e:t._calculatePercentage(e)+"%"))},value:function(e){return this._value(e)},_value:function(e){var n,i=this,r=i.options;return e===t?r.value:(typeof e!==x?(e=i._roundValue(e),isNaN(e)||(n=i._validateValue(e),n!==r.value&&(i.wrapper.removeClass(p),r.value=n,i._isStarted=!0,i._updateProgress()))):e||(i.wrapper.addClass(p),r.value=!1),t)},_roundValue:function(e){e=parseFloat(e);var t=C.pow(10,E);return C.floor(e*t)/t},_validateValue:function(e){var t=this,n=t.options;if(e!==!1){if(n.min>=e||e===!0)return n.min;if(e>=n.max)return n.max}else if(e===!1)return!1;return isNaN(t._roundValue(e))?n.min:e},_updateProgress:function(){var e=this,t=e.options,n=e._calculatePercentage();t.type===w.CHUNK?(e._updateChunks(n),e._onProgressUpdateAlways(t.value)):e._updateProgressWrapper(n)},_updateChunks:function(e){var t,n=this,i=n.options,r=i.chunkCount,s=parseInt(D/r*100,10)/100,l=parseInt(100*e,10)/100,c=C.floor(l/s);t=n.wrapper.find(i.orientation===o&&!i.reverse||i.orientation===a&&i.reverse?"li.k-item:lt("+c+")":"li.k-item:gt(-"+(c+1)+")"),n.wrapper.find("."+v).removeClass(v).addClass(_),t.removeClass(_).addClass(v)},_updateProgressWrapper:function(e){var t=this,n=t.options,i=t.wrapper.find("."+g),r=t._isStarted?t._animation.duration:0,o={};0===i.length&&t._addRegularProgressWrapper(),o[t._progressProperty]=e+"%",t.progressWrapper.animate(o,{duration:r,start:T(t._onProgressAnimateStart,t),progress:T(t._onProgressAnimate,t),complete:T(t._onProgressAnimateComplete,t,n.value),always:T(t._onProgressUpdateAlways,t,n.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,n=this,i=n.options,r=parseFloat(e.elem.style[n._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(n.progressWrapper[0].style[n._progressProperty]),n.progressWrapper.find(".k-progress-status-wrap").css(n._progressProperty,t+"%")),i.type!==w.CHUNK&&98>=r&&n.progressWrapper.removeClass(f)},_onProgressAnimateComplete:function(e){var t=this,n=t.options,i=parseFloat(t.progressWrapper[0].style[t._progressProperty]);n.type!==w.CHUNK&&i>98&&t.progressWrapper.addClass(f),n.showStatus&&t.progressStatus.text(n.type===w.VALUE?e:C.floor(t._calculatePercentage(e))+"%"),e===n.min&&t.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this,n=t.options;t._isStarted&&t.trigger(b,{value:e}),e===n.max&&t._isStarted&&t.trigger(k,{value:n.max})},enable:function(e){var n=this,i=n.options;i.enable=t===e?!0:e,n.wrapper.toggleClass(y,!i.enable)},destroy:function(){var e=this;r.fn.destroy.call(e)},_addChunkProgressWrapper:function(){var e,t=this,n=t.options,i=t.wrapper,r=D/n.chunkCount,o="";for(1>=n.chunkCount&&(n.chunkCount=d),o+="<ul class='k-reset'>",e=n.chunkCount-1;e>=0;e--)o+="<li class='k-item k-state-default'></li>";o+="</ul>",i.append(o).find(".k-item").css(t._progressProperty,r+"%").first().addClass("k-first").end().last().addClass("k-last"),t._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this,t=e.options,n=e.wrapper.find(".k-item:last"),i=parseFloat(n[0].style[e._progressProperty]),r=D-t.chunkCount*i;r>0&&n.css(e._progressProperty,i+r+"%")},_addRegularProgressWrapper:function(){var t=this;t.progressWrapper=e("<div class='"+g+"'></div>").appendTo(t.wrapper),t.options.showStatus&&(t.progressWrapper.append(M.progressStatus),t.progressStatus=t.wrapper.find("."+m))},_calculateChunkSize:function(){var e=this,t=e.options.chunkCount,n=e.wrapper.find("ul.k-reset");return(parseInt(n.css(e._progressProperty),10)-(t-1))/t},_calculatePercentage:function(e){var n=this,i=n.options,r=e!==t?e:i.value,o=i.min,a=i.max;return n._onePercent=C.abs((a-o)/100),C.abs((r-o)/n._onePercent)},_progressAnimation:function(){var e=this,t=e.options,n=t.animation;e._animation=n===!1?{duration:0}:S({duration:A},t.animation)}});n.ui.plugin(P)}(window.kendo.jQuery),function(e,t){function n(t){t.children(g).addClass(C),t.children("a").addClass(y).children(g).addClass(C),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(F),t.filter("li[disabled]").addClass(z).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(R+" "+O),t.attr("role","tab"),t.filter("."+R).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+y).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<a class='"+y+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(S),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(S),t.filter(":last-child").addClass(w)}var r=window.kendo,o=r.ui,a=r.keys,s=e.map,l=e.each,c=e.trim,d=e.extend,u=r.template,h=o.Widget,p=/^(a|div)$/i,f=".kendoTabStrip",g="img",m="href",v="prev",_="show",y="k-link",w="k-last",b="click",k="error",x=":empty",C="k-image",S="k-first",T="select",D="activate",A="k-content",E="contentUrl",M="mouseenter",P="mouseleave",I="contentLoad",z="k-state-disabled",F="k-state-default",R="k-state-active",B="k-state-focused",L="k-state-hover",O="k-tab-on-top",H=".k-item:not(."+z+")",N=".k-tabstrip-items > "+H+":not(."+R+")",V={content:u("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},U={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},W=h.extend({init:function(t,n){var i,o,a=this;h.fn.init.call(a,t,n),a._animations(a.options),n=a.options,a._wrapper(),a._isRtl=r.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+y).data(E,a.options.contentUrls[t])}),a.wrapper.on(M+f+" "+P+f,N,a._toggleHover).on("focus"+f,e.proxy(a._active,a)).on("blur"+f,function(){a._current(null)}),a._keyDownProxy=e.proxy(a._keydown,a),n.navigatable&&a.wrapper.on("keydown"+f,a._keyDownProxy),a.wrapper.children(".k-tabstrip-items").on(b+f,".k-state-disabled .k-link",!1).on(b+f," > "+H,function(t){var n,i=a.wrapper[0];if(i!==document.activeElement)if(n=r.support.browser.msie)try{i.setActive()}catch(o){i.focus()}else i.focus();a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+R),o=a.contentHolder(i.index()),i[0]&&o.length>0&&0===o[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),r.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+R);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(H)[e]()},_item:function(e,t){var n;return n=t===v?"last":"first",e?(e=e[t](),e[0]||(e=this._endItem(n)),e.hasClass(z)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(B)),e&&(e.hasClass(R)||e.addClass(B),n.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),s=i._isRtl;if(e.target==e.currentTarget){if(r==a.DOWN||r==a.RIGHT)n=s?v:"next";else if(r==a.UP||r==a.LEFT)n=s?"next":v;else if(r==a.ENTER||r==a.SPACEBAR)i._click(o),e.preventDefault();else{if(r==a.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==a.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,o,a=this,s=a.options,l=r.getter(s.dataTextField),c=r.getter(s.dataContentField),d=r.getter(s.dataContentUrlField),u=r.getter(s.dataImageUrlField),h=r.getter(s.dataUrlField),p=r.getter(s.dataSpriteCssClass),f=[],g=a.dataSource.view();for(e=e||{},i=e.action,i&&(g=e.items),t=0,o=g.length;o>t;t++)n={text:l(g[t])},s.dataContentField&&(n.content=c(g[t])),s.dataContentUrlField&&(n.contentUrl=d(g[t])),s.dataUrlField&&(n.url=h(g[t])),s.dataImageUrlField&&(n.imageUrl=u(g[t])),s.dataSpriteCssClass&&(n.spriteCssClass=p(g[t])),f[t]=n;if("add"==e.action)e.index<a.tabGroup.children().length?a.insertBefore(f,a.tabGroup.children().eq(e.index)):a.append(f);else if("remove"==e.action)for(t=0;g.length>t;t++)a.remove(e.index);else"itemchange"==e.action?(t=a.dataSource.view().indexOf(g[0]),e.field===s.dataTextField&&a.tabGroup.children().eq(t).find(".k-link").text(g[0].get(e.field))):(a.trigger("dataBinding"),a.remove("li"),a.append(f),a.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this,n=t.options.animation;t._animations(e),e.animation=d(!0,n,e.animation),e.navigatable?t.wrapper.on("keydown"+f,t._keyDownProxy):t.wrapper.off("keydown"+f,t._keyDownProxy),h.fn.setOptions.call(t,e)},events:[T,D,_,k,I,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1},destroy:function(){var e=this;h.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(f),e.wrapper.children(".k-tabstrip-items").off(f),e.scrollWrap.children(".k-tabstrip").unwrap(),r.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+R):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){i=e(i),i.hasClass(R)||n.trigger(T,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),i=t.find("."+y).data(E),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return l(n.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),i(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.before(this),a.before(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){n=this.tabGroup.find(n);var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.after(this),a.after(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n,i=this,o=typeof t;return"string"===o?t=i.tabGroup.find(t):"number"===o&&(t=i.tabGroup.children().eq(t)),n=t.map(function(){var t=i.contentElement(e(this).index());return r.destroy(t),t}),t.remove(),n.remove(),i._updateContentElements(),i},_create:function(i){var r,o,a,l=e.isPlainObject(i),c=this;return l||e.isArray(i)?(i=e.isArray(i)?i:[i],r=s(i,function(t,n){return e(W.renderItem({group:c.tabGroup,item:d(t,{index:n})}))}),o=s(i,function(n,i){return"string"==typeof n.content||n.contentUrl?e(W.renderContent({item:d(n,{index:i})})):t})):(r="string"==typeof i&&"<"!=i[0]?c.element.find(i):e(i),o=e(),r.each(function(){if(a=e("<div class='"+A+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;a=e(c.contentElement(t))}o=o.add(a)}),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(F,n).toggleClass(z,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),r=s.tabGroup.find("li").addClass("k-item"),r.length&&(o=r.filter("."+R).index(),a=o>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(O),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(A).eq(a).addClass(R).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.tabGroup.find(".k-item"),o=(t.element.attr("id")||r.guid())+"-",a=t.wrapper.children("div");a.length&&i.length>a.length?(a.each(function(e){var t=parseInt(this.id.replace(o,""),10),n=i.filter("[aria-controls="+o+t+"]"),r=o+(e+1);n.data("aria",r),this.setAttribute("id",r)}),i.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):i.each(function(i){var r=a.eq(i),s=o+(i+1);this.setAttribute("aria-controls",s),!r.length&&n[i]?e("<div class='"+A+"'/>").appendTo(t.wrapper).attr("id",s):(r.attr("id",s),e(this).children(".k-loading")[0]||n[i]||e("<span class='k-loading k-complete'/>").prependTo(this)),r.attr("role","tabpanel"),r.filter(":not(."+R+")").attr("aria-hidden",!0).attr("aria-expanded",!1),r.filter("."+R).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),r.kineticScrollNeeded&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){var e=this;e.wrapper=e.element.is("ul")?e.element.wrapAll("<div />").parent():e.element,e.scrollWrap=e.wrapper.parent(".k-tabstrip-wrapper"),e.scrollWrap[0]||(e.scrollWrap=e.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_sizeScrollWrap:function(e){this.scrollWrap.css("height",Math.floor(e.outerHeight(!0))+this.tabsHeight).css("height")},_toggleHover:function(t){e(t.currentTarget).toggleClass(L,t.type==M)},_click:function(e){var t,n,i=this,r=e.find("."+y),o=r.attr(m),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+z+(a?"":",."+R)))return!0;if(n=r.data(E)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(T,{item:e[0],contentElement:s[0]}))return!0;if(t!==!1)return a&&e.is("."+R)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o;e=t.tabGroup.find(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(e.kendoAddClass(F,{duration:i.duration}),e.kendoRemoveClass(R,{duration:i.duration})):(e.addClass(F),e.removeClass(R)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+R).kendoStop(!0,!0).kendoAnimate(o).removeClass(R).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,o,a,s,l,c,u,h,p,f,g,m,v;if(!this.tabGroup.children("[data-animating]").length)return e=this.tabGroup.find(e),t=this,n=t.options.animation,i=n.open,o=d({},n.close),a=o&&"effects"in o,s=e.parent().children(),l=s.filter("."+R),c=s.index(e),o=d(a?o:d({reverse:!0},i),{hide:!0}),r.size(i.effects)?(l.kendoRemoveClass(R,{duration:o.duration}),e.kendoRemoveClass(L,{duration:o.duration})):(l.removeClass(R),e.removeClass(L)),u=t.contentAnimators,t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===u.length?(l.removeClass(O),e.addClass(O).css("z-index"),e.addClass(R),t._current(e),t.trigger("change"),!1):(h=u.filter("."+R),p=t.contentHolder(c),f=p.closest(".k-content"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===p.length?(h.removeClass(R).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(o),!1):(e.attr("data-animating",!0),g=(e.children("."+y).data(E)||!1)&&p.is(x),m=function(){l.removeClass(O),e.addClass(O).css("z-index"),r.size(i.effects)?(l.kendoAddClass(F,{duration:i.duration}),e.kendoAddClass(R,{duration:i.duration})):(l.addClass(F),e.addClass(R)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(f),f.addClass(R).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(d({init:function(){t.trigger(_,{item:e[0],contentElement:p[0]}),r.resize(p)}},i,{complete:function(){e.removeAttr("data-animating"),t.trigger(D,{item:e[0],contentElement:p[0]}),r.resize(p),t.scrollWrap.css("height","").css("height")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,p,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change"))},h.removeClass(R),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(d({complete:v},o)):v(),!0))},contentElement:function(e){var n,i,o,a;if(isNaN(e-0))return t;if(n=this.contentElements&&this.contentElements[0]&&!r.kineticScrollNeeded?this.contentElements:this.contentAnimators,e=n&&0>e?n.length+e:e,i=RegExp("-"+(e+1)+"$"),n)for(o=0,a=n.length;a>o;o++)if(i.test(n.eq(o).closest(".k-content")[0].id))return n[o];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return r.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,o){var a,s,l,c,d,u,h,p,f;t=this.tabGroup.find(t),a=this,s=e.ajaxSettings.xhr,l=t.find("."+y),c={},d=t.width()/2,u=!1,h=t.find(".k-loading").removeClass("k-complete"),h[0]||(h=e("<span class='k-loading'/>").prependTo(t)),p=2*d-h.width(),f=function(){h.animate({marginLeft:(parseInt(h.css("marginLeft"),10)||0)<d?p:0},500,f)
},r.support.browser.msie&&10>r.support.browser.version&&setTimeout(f,40),o=o||l.data(E)||l.attr(m),a.inRequest=!0,a.xhr=e.ajax({type:"GET",cache:!1,url:o,dataType:"html",data:c,xhr:function(){var t=this,n=s(),i=t.progressUpload?"progressUpload":t.progress?"progress":!1;return n&&e.each([n,n.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){i&&t[i](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),n},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";h.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){a.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),h.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){a.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&h.remove()},success:function(e){var s,l,c;h.addClass("k-complete");try{s=this,l=10,s.noProgress&&(h.width(l+"%"),u=setInterval(function(){s.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),a.angular("cleanup",function(){return{elements:n.get()}}),r.destroy(n),n.html(e)}catch(d){c=window.console,c&&c.error&&c.error(d.name+": "+d.message+" in "+o),this.error(this.xhr,"error")}i&&i.call(a,n),a.angular("compile",function(){return{elements:n.get()}}),a.trigger(I,{item:t[0],contentElement:n[0]})}})}});d(W,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=V.empty,n=e.item;return V.item(d(e,{image:n.imageUrl?V.image:t,sprite:n.spriteCssClass?V.sprite:t,itemWrapper:V.itemWrapper},U))},renderContent:function(e){return V.content(d(e,U))}}),r.ui.plugin(W)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*z))}function i(){var e=new $,t=new $(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new $(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function r(e){return 60*e.getHours()*z+e.getMinutes()*z+1e3*e.getSeconds()+e.getMilliseconds()}function o(e,t,n){var i,o=r(t),a=r(n);return e&&o!=a?(i=r(e),o>i&&(i+=F),o>a&&(a+=F),i>=o&&a>=i):!0}function a(e){var t=e.parseFormats;e.format=f(e.format||d.getCulture(e.culture).calendars.standard.patterns.t),t=j(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l,c,d=window.kendo,u=d.keys,h=d.parseDate,p=d._activeElement,f=d._extractFormat,g=d.support,m=g.browser,v=d.ui,_=v.Widget,y="open",w="close",b="change",k=".kendoTimePicker",x="click"+k,C="k-state-default",S="disabled",T="readonly",D="li",A="<span/>",E="k-state-focused",M="k-state-hover",P="mouseenter"+k+" mouseleave"+k,I="mousedown"+k,z=6e4,F=864e5,R="k-state-selected",B="k-state-disabled",L="aria-selected",O="aria-expanded",H="aria-hidden",N="aria-disabled",V="aria-readonly",U="aria-activedescendant",W="id",j=e.isArray,G=e.extend,q=e.proxy,$=Date,Y=new $;Y=new $(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:g.kineticScrollNeeded?"":"auto"}).on(x,D,q(n._click,n)).on("mouseenter"+k,D,function(){e(this).addClass(M)}).on("mouseleave"+k,D,function(){e(this).removeClass(M)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(I,s),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(W,n._timeViewID)),n._popup(),n._heightHandler=q(n._height,n),n.template=d.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(R).removeAttr(L).removeAttr(W),n&&(n=e(n).addClass(R).attr(W,i._optionID).attr(L,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(k),e.list.off(k),e._touchScroller&&e._touchScroller.destroy(),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,r=i.format,a=d.toString,s=n.template,l=e.length,c=0,u="";l>c;c++)t=e[c],o(t,i.min,i.max)&&(u+=s(a(t,r,i.culture)));n._html(u)},refresh:function(){var e,t,o,a=this,s=a.options,l=s.format,c=i(),u=0>c,h=s.min,p=s.max,f=r(h),g=r(p),m=s.interval*z,v=d.toString,_=a.template,y=new $(+h),w=y.getDate(),b=0,k="";for(o=u?(F+c*z)/m:F/m,f!=g&&(f>g&&(g+=F),o=(g-f)/m+1),t=parseInt(o,10);o>b;b++)b&&n(y,m,u),g&&t==b&&(e=r(y),w<y.getDate()&&(e+=F),e>g&&(y=new $(+p))),k+=_(v(y,l,s.culture));a._html(k)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e){var t=this;t.ul[0].innerHTML=e,t.popup.unbind(y,t._heightHandler),t.popup.one(y,t._heightHandler),t.current(null),t.select(t._value)},scroll:function(e){if(e){var t,n=this.ul[0],i=e.offsetTop,r=e.offsetHeight,o=n.scrollTop,a=n.clientHeight,s=i+r,l=this._touchScroller;l?(t=this.list.height(),i>t&&(i=i-t+r),l.scrollTo(0,-i)):n.scrollTop=o>i?i:s>o+a?s-a:o}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=d.toString(t,i.format,i.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},setOptions:function(e){var t=this.options;e.min=h(e.min),e.max=h(e.max),this.options=G(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget);t.isDefaultPrevented()||(n.select(i),n.options.change(i.text(),!0),n.close())},_height:function(){var e=this,t=e.list,n=t.parent(".k-animation-container"),i=e.options.height;e.ul[0].children.length&&t.add(n).show().height(e.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this,n=t.options,i=t._value||Y;return e instanceof $?e:(e=h(e,n.parseFormats,n.culture),e&&(e=new $(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(m.mozilla||m.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new v.Popup(t,G(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:g.isRtl(n.anchor)})),e._touchScroller=d.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===u.DOWN;if(i===u.UP||a){if(e.altKey)return n.toggle(a),t;o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild,o&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===u.ENTER||i===u.TAB||i===u.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},l.getMilliseconds=r,d.TimeView=l,c=_.extend({init:function(e,t){var n,i,r,o=this;_.fn.init.call(o,e,t),e=o.element,t=o.options,t.min=h(e.attr("min"))||h(t.min),t.max=h(e.attr("max"))||h(t.max),a(t),o._wrapper(),o.timeView=i=new l(G({},t,{id:e.attr(W),anchor:o.wrapper,format:t.format,change:function(t,n){n?o._change(t):e.val(t)},open:function(t){o.timeView._adjustListWidth(),o.trigger(y)?t.preventDefault():(e.attr(O,!0),n.attr(H,!1))},close:function(t){o.trigger(w)?t.preventDefault():(e.attr(O,!1),n.attr(H,!0))},active:function(t){e.removeAttr(U),t&&e.attr(U,i._optionID)}})),n=i.ul,o._icon(),o._reset();try{e[0].setAttribute("type","text")}catch(s){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":i._timeViewID}),r=e.is("[disabled]"),r?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),d.notify(o)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[y,w,b],setOptions:function(e){var t=this,n=t._value;_.fn.setOptions.call(t,e),e=t.options,a(e),t.timeView.setOptions(e),n&&t.element.val(d.toString(n,e.format,e.culture))},dataBind:function(e){j(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(k),o=t.element.off(k),a=t._inputWrapper.off(k);i||n?(a.addClass(n?B:C).removeClass(n?C:B),o.attr(S,n).attr(T,i).attr(N,n).attr(V,i)):(a.addClass(C).removeClass(B).on(P,t._toggleHover),o.removeAttr(S).removeAttr(T).attr(N,!1).attr(V,!1).on("keydown"+k,q(t._keydown,t)).on("focusout"+k,q(t._blur,t)).on("focus"+k,function(){t._inputWrapper.addClass(E)}),r.on(x,q(t._click,t)).on(I,s))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;_.fn.destroy.call(e),e.timeView.destroy(),e.element.off(k),e._arrow.off(k),e._inputWrapper.off(k),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(E)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),g.touch||t[0]===p()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.element.trigger(b),t.trigger(b))},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===u.ENTER&&r!==t._oldText&&t._change(r)},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i.timeView._parse(n),n&&(n=new $(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(M,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,r=i._parse(e);return o(r,n.min,n.max)||(r=null),t._value=r,t.element.val(r?d.toString(r,n.format,n.culture):e),i.value(r),r},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-timepicker"),t[0]||(t=i.wrap(A).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(A).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))}}),v.plugin(c)}(window.kendo.jQuery),function(e,t){function n(n){var i=e(n.useButtonTag?"<button></button>":"<a></a>");return i.data({type:"button"}),i.attr($,n.uid),n.attributes&&i.attr(n.attributes),n.togglable&&(i.addClass(m),n.selected&&i.addClass(k)),n.enable===!1&&i.addClass(x),n.url===t||n.useButtonTag||(i.attr("href",n.url),n.mobile&&i.attr(c.attr("role"),"button")),n.group&&i.attr(c.attr("group"),n.group),!n.togglable&&n.click&&h(n.click)&&i.data("click",n.click),n.togglable&&n.toggle&&h(n.toggle)&&i.data("toggle",n.toggle),i}function i(e){var t,n=Y.button.base(e);return n.addClass(f),e.primary&&n.addClass(T),e.align&&n.addClass("k-align-"+e.align),e.id&&n.attr("id",e.id),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function r(e){var t,n=Y.button.base(e);return n.addClass(g+" "+f),e.primary&&n.addClass(T),e.id&&n.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function o(t,n){var i,r,o,a=t.icon,s=t.spriteCssClass,l=t.imageUrl;(s||l||a)&&(i=!0,n.contents().not("span.k-sprite,span."+D+",img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),n.addClass(i?E:M)),a?(r=n.children("span."+D).first(),r[0]||(r=e('<span class="'+D+'"></span>').prependTo(n)),r.addClass(A+a)):s?(r=n.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(n)),r.addClass(s)):l&&(o=n.children("img.k-image").first(),o[0]||(o=e('<img alt="icon" class="k-image" />').prependTo(n)),o.attr("src",l))}function a(){var e,t=this.options.anchor,n=t.outerWidth();c.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function s(e){e.target.is(".k-toggle-button")||e.target.toggleClass(k,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}var c=window.kendo,d=c.ui.Widget,u=e.proxy,h=c.isFunction,p="k-toolbar",f="k-button",g="k-overflow-button",m="k-toggle-button",v="k-button-group",_="k-split-button",y="k-separator",w="k-popup",b="k-toolbar-resizable",k="k-state-active",x="k-state-disabled",C="k-group-start",S="k-group-end",T="k-primary",D="k-icon",A="k-i-",E="k-button-icon",M="k-button-icontext",P="k-list-container k-split-container",I="k-split-button-arrow",z="k-overflow-anchor",F="k-overflow-container",R="k-toolbar-first-visible",B="k-toolbar-last-visible",L="click",O="toggle",H="open",N="close",V="overflowOpen",U="overflowClose",W="never",j="auto",G="always",q="k-overflow-hidden",$=c.attr("uid"),Y={button:{base:n,toolbar:i,overflow:r},buttonGroup:{base:function(t,n,i){var r,o,a=t.buttons;if(a){for(t.attributes&&i.attr(t.attributes),i.data({type:"buttonGroup"}),i.attr($,t.uid),o=0;a.length>o;o++)a[o].uid||(a[o].uid=c.guid()),r=n(e.extend({mobile:t.mobile},a[o])),r.appendTo(i);i.children().first().addClass(C),i.children().last().addClass(S)}},toolbar:function(t){var n=e("<div></div>");return Y.buttonGroup.base(t,Y.button.toolbar,n),n.addClass(v),t.align&&n.addClass("k-align-"+t.align),t.id&&n.attr("id",t.id),n},overflow:function(t){var n=e("<li></li>");return Y.buttonGroup.base(t,Y.button.overflow,n),n.addClass((t.mobile?"":v)+" k-overflow-group"),t.id&&n.attr("id",t.id+"_overflow"),n}},splitButton:{toolbar:function(t){var n,i,r,o=e('<div class="'+_+'"></div>'),s=Y.button.toolbar(t),c=e('<a class="'+f+" "+I+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),d=e('<ul class="'+P+'"></ul>'),u=t.menuButtons;for(s.appendTo(o),c.appendTo(o),d.appendTo(o),r=0;u.length>r;r++)i=Y.button.toolbar(e.extend({mobile:t.mobile,click:t.click},u[r])),i.wrap("<li></li>").parent().appendTo(d);return t.align&&o.addClass("k-align-"+t.align),t.id||(t.id=t.uid),o.attr("id",t.id+"_wrapper"),d.attr("id",t.id+"_optionlist").attr($,t.rootUid),t.mobile&&(d=l(d)),n=d.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:o,copyAnchorStyles:!1,animation:t.animation,open:a}).data("kendoPopup"),o.data({type:"splitButton",kendoPopup:n}),o.attr($,t.uid),o},overflow:function(t){var n,i,r=e('<li class="'+_+'"></li>'),o=Y.button.overflow(t),a=t.menuButtons;for(o.appendTo(r),i=0;a.length>i;i++)n=Y.button.overflow(e.extend({mobile:t.mobile},a[i])),n.appendTo(r);return t.id&&r.attr("id",t.id+"_overflow"),r.data({type:"splitButton"}),r.attr($,t.uid),r}},separator:{base:function(t,n){var i=e(n?"<li>&nbsp;</li>":"<div>&nbsp;</div>");return i.data({type:"separator"}),i.attr($,t.uid),t.attributes&&i.attr(t.attributes),i.addClass(y),i},toolbar:function(e){return Y.separator.base(e,!1)},overflow:function(e){return Y.separator.base(e,!0)}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},K=d.extend({init:function(t,n){var i,r=this;if(d.fn.init.call(r,t,n),n=r.options,t=r.wrapper=r.element,t.addClass(p+" k-widget"),this.uid=c.guid(),t.attr($,this.uid),r.isMobile="boolean"==typeof n.mobile?n.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),D="km-icon",A="km-",f="km-button",v="km-buttongroup km-widget",k="km-state-active",x="km-state-disabled"),n.resizable?(r._renderOverflow(),t.addClass(b),r.overflowUserEvents=new c.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+z,tap:u(r._toggleOverflow,r)}),c.onResize(function(){r.resize()})):r.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)r.add(n.items[i]);r.userEvents=new c.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+$+"="+this.uid+"] ."+f+", ["+$+"="+this.uid+"] ."+g,tap:u(r._buttonClick,r),press:s,release:s}),n.resizable&&this._toggleOverflowAnchor(),c.notify(r)},events:[L,O,H,N,V,U],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+_).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),d.fn.destroy.call(t)},add:function(t){var n,i,r=Y[t.type],o=t.template,a=this,s=a.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:c.guid(),animation:a.animation,mobile:a.isMobile,rootUid:a.uid}),o&&!l&&(t.overflow=W),t.overflow!==W&&a.options.resizable&&(l?i=e(h(l)?l(t):l):r&&(i=(r.overflow||e.noop)(t)),i&&i.length&&("LI"!==i.prop("tagName")&&(i.removeAttr($),i=i.wrap("<li></li>").parent(),i.attr($,t.uid)),a._attributes(i,t),i.addClass(s).appendTo(a.popup.container),i.data("overflow")===j&&i.addClass(q),a.angular("compile",function(){return{elements:i.get()}}))),t.overflow!==G&&(o?(n=h(o)?o(t):o,n instanceof jQuery||(n=e(n.replace(/^\s+|\s+$/g,""))),n=n.wrap("<div></div>").parent(),n.attr($,t.uid)):r&&(n=(r.toolbar||e.noop)(t)),n&&n.length&&(a._attributes(n,t),a.options.resizable?(n.appendTo(a.element).css("visibility","hidden"),a._shrink(a.element.innerWidth()),n.css("visibility","visible")):n.appendTo(a.element),a.angular("compile",function(){return{elements:n.get()}})))},remove:function(e){var t,n,i=this.element.find(e);!i.length&&this.options.resizable?(i=this.popup.element.find(e),n=i.parent().attr($)):n=i.attr($),t=i.data("type"),i.parent("."+_).data("type")&&(t="splitButton",i=i.parent()),"splitButton"===t&&i.data("kendoPopup").destroy(),i.add(this.popup.element.find("["+$+"='"+n+"']")).remove()},enable:function(n,i){var r=this.element.find(n).attr($);!r&&this.popup&&(r=this.popup.element.find(n).parent("li").attr($)),t===i&&(i=!0),i?e("["+$+"='"+r+"']").removeClass(x):e("["+$+"='"+r+"']").addClass(x)},getSelectedFromGroup:function(e){return this.element.find("."+m+"[data-group='"+e+"']").filter("."+k)},toggle:function(t,n){var i,r=e(t),o=r.data("uid"),a=r.data("group");r.hasClass(m)&&(a&&this.element.add(this.popup.element).find("."+m+"[data-group='"+a+"']").filter("."+k).removeClass(k),e.contains(this.element[0],r[0])?(i=this.popup.element.find("["+$+"='"+o+"']"),"LI"===i.prop("tagName")&&(i=i.find("."+m+":first"))):(o=o?o:r.parent().data("uid"),i=this.element.find("["+$+"='"+o+"']")),r.add(i).toggleClass(k,n))},_attributes:function(e,t){e.attr(c.attr("overflow"),t.overflow||j)},_renderOverflow:function(){var t=this,n=Y.overflowContainer;t.overflowAnchor=e(Y.overflowAnchor).addClass(f),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=l(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new c.ui.Popup(n,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var i=c.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):i.css("margin-left",(i.outerWidth()-i.width())/2+1),t.trigger(V)&&n.preventDefault()},close:function(e){t.trigger(U)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+F):t.popup.element,t.popup.container.attr($,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+q+", ."+w+")").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l,c,d,u,p=this;if(n.preventDefault(),r=e(n.target).closest("."+f,p.element),!r.hasClass(z)&&(!r.length&&p.popup&&(r=e(n.target).closest("."+g,p.popup.container)),a=r.hasClass(g)?r.parent("li").hasClass(x):r.hasClass(x),!a)){if(n.target.closest("."+I).length)return p._toggle(n),t;u=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(m)?(l=r.data("group"),c=h(r.data("toggle"))?r.data("toggle"):null,p.toggle(r),s=r.hasClass(k),d={target:r,group:l,checked:s,id:u},c&&c.call(p,d),p.trigger(O,d)):(c=h(r.data("click"))?r.data("click"):null,d={target:r,id:u},c&&c.call(p,d),p.trigger(L,d)),r.hasClass(g)&&p.popup.close(),o=r.closest(".k-split-container"),o[0]&&(i=o.data("kendoPopup"),(i?i:o.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var n,i=e(t.target).closest("."+_),r=i.data("kendoPopup");t.preventDefault(),i.hasClass(x)||(n=r.element.is(":visible")?this.trigger(N,{target:i}):this.trigger(H,{target:i}),n||r.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(n=this.element.children(":visible:not([data-overflow='never'], ."+z+")"),i=n.length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(q)},_showItem:function(e,t){return e.length&&t>this._childrenWidth()+e.outerWidth(!0)?(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(q),!0):!1},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(R+" "+B),n.first().add(i.first()).addClass(R),n.last().add(i.last()).addClass(B)}});c.ui.plugin(K)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function i(e){e.preventDefault()}function r(t){var n,i=o.getCulture(t.culture).calendars.standard.patterns;t.format=c(t.format||i.g),t.timeFormat=n=c(t.timeFormat||i.t),o.DateView.normalize(t),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var o=window.kendo,a=o.TimeView,s=o.parseDate,l=o._activeElement,c=o._extractFormat,d=o.calendar,u=d.isInRange,h=d.restrictValue,p=d.isEqualDatePart,f=a.getMilliseconds,g=o.ui,m=g.Widget,v="open",_="close",y="change",w=".kendoDateTimePicker",b="click"+w,k="disabled",x="readonly",C="k-state-default",S="k-state-focused",T="k-state-hover",D="k-state-disabled",A="mouseenter"+w+" mouseleave"+w,E="mousedown"+w,M="month",P="<span/>",I="aria-activedescendant",z="aria-expanded",F="aria-hidden",R="aria-owns",B="aria-disabled",L="aria-readonly",O=Date,H=new O(1900,0,1),N=new O(2099,11,31),V={view:"date"},U={view:"time"},W=e.extend,j=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),e=i.element,t=i.options,t.min=s(e.attr("min"))||s(t.min),t.max=s(e.attr("max"))||s(t.max),r(t),i._wrapper(),i._views(),i._icons(),i._reset(),i._template();try{e[0].setAttribute("type","text")}catch(a){e[0].type="text"}e.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),i._midnight=f(t.min)+f(t.max)===0,n=e.is("[disabled]"),n?i.enable(!1):i.readonly(e.is("[readonly]")),i._old=i._update(t.value||i.element.val()),i._oldText=e.val(),o.notify(i)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new O(H),max:new O(N),interval:30,height:200,footer:"",start:M,depth:M,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:[v,_,y],setOptions:function(e){var t,n,i,a=this,l=a._value;m.fn.setOptions.call(a,e),e=a.options,e.min=t=s(e.min),e.max=n=s(e.max),r(e),i=e.value||a._value||a.dateView._current,t&&!p(t,i)&&(t=new O(H)),n&&!p(n,i)&&(n=new O(N)),a.dateView.setOptions(e),a.timeView.setOptions(W({},e,{format:e.timeFormat,min:t,max:n})),l&&(a.element.val(o.toString(l,e.format,e.culture)),a._updateARIA(l))},_editable:function(t){var n=this,r=n.element.off(w),a=n._dateIcon.off(w),s=n._timeIcon.off(w),c=n._inputWrapper.off(w),d=t.readonly,u=t.disable;d||u?(c.addClass(u?D:C).removeClass(u?C:D),r.attr(k,u).attr(x,d).attr(B,u).attr(L,d)):(c.addClass(C).removeClass(D).on(A,n._toggleHover),r.removeAttr(k).removeAttr(x).attr(B,!1).attr(L,!1).on("keydown"+w,e.proxy(n._keydown,n)).on("focus"+w,function(){n._inputWrapper.addClass(S)}).on("focusout"+w,function(){n._inputWrapper.removeClass(S),r.val()!==n._oldText&&n._change(r.val()),n.close("date"),n.close("time")}),a.on(E,i).on(b,function(){n.toggle("date"),o.support.touch||r[0]===l()||r.focus()}),s.on(E,i).on(b,function(){n.toggle("time"),o.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;m.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(w),e._dateIcon.off(w),e._timeIcon.off(w),e._inputWrapper.off(w),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(y),t.element.trigger(y))},_option:function(e,i){var r,o,a=this,l=a.options,c=a.timeView,d=c.options,u=a._value||a._old;if(i===t)return l[e];if(i=s(i,l.parseFormats,l.culture)){if(l.min.getTime()===l.max.getTime()&&(d.dates=[]),l[e]=new O(i.getTime()),a.dateView[e](i),a._midnight=f(l.min)+f(l.max)===0,u&&(r=p(l.min,u),o=p(l.max,u)),r||o){if(d[e]=i,r&&!o&&(d.max=n(l.interval)),o){if(a._midnight)return c.dataBind([N]),t;r||(d.min=H)}}else d.max=N,d.min=H;c.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_update:function(t){var i,r,a,l,c,d=this,f=d.options,g=f.min,m=f.max,v=f.dates,_=d.timeView,y=d._value,w=s(t,f.parseFormats,f.culture),b=null===w&&null===y||w instanceof Date&&y instanceof Date;return+w===+y&&b?(c=o.toString(w,f.format,f.culture),c!==t&&d.element.val(null===w?t:c),w):(null!==w&&p(w,g)?w=h(w,g,m):u(w,g,m)||(w=null),d._value=w,_.value(w),d.dateView.value(w),w&&(a=d._old,r=_.options,v[0]&&(v=e.grep(v,function(e){return p(w,e)}),v[0]&&(_.dataBind(v),l=!0)),l||(p(w,g)&&(r.min=g,r.max=n(f.interval),i=!0),p(w,m)&&(d._midnight?(_.dataBind([N]),l=!0):(r.max=m,i||(r.min=H),i=!0))),!l&&(!a&&i||a&&!p(a,w))&&(i||(r.max=N,r.min=H),_.bind())),d.element.val(w?o.toString(w,f.format,f.culture):t),d._updateARIA(w),w)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,r=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===o.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===o.keys.ENTER&&r!==t._oldText&&t._change(r)},_views:function(){var e,t,n,i,r,l,c=this,d=c.element,h=c.options,p=d.attr("id");c.dateView=e=new o.DateView(W({},h,{id:p,anchor:c.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+h.min,o=+h.max;(i===r||i===o)&&(t=new O(+c._value),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),u(t,r,o)&&(n=t)),c._change(n),c.close("date")},close:function(e){c.trigger(_,V)?e.preventDefault():(d.attr(z,!1),n.attr(F,!0),t.popup.visible()||d.removeAttr(R))},open:function(t){c.trigger(v,V)?t.preventDefault():(c.element.val()!==c._oldText&&(l=s(d.val(),h.parseFormats,h.culture),c.dateView[l?"current":"value"](l)),n.attr(F,!1),d.attr(z,!0).attr(R,e._dateViewID),c._updateARIA(l))}})),n=e.div,r=h.min.getTime(),c.timeView=t=new a({id:p,value:h.value,anchor:c.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new O(H),max:new O(N),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(n,i){n=t._parse(n),h.min>n?(n=new O(+h.min),t.options.min=n):n>h.max&&(n=new O(+h.max),t.options.max=n),i?(c._timeSelected=!0,c._change(n)):(d.val(o.toString(n,h.format,h.culture)),e.value(n),c._updateARIA(n))},close:function(t){c.trigger(_,U)?t.preventDefault():(i.attr(F,!0),d.attr(z,!1),e.popup.visible()||d.removeAttr(R))},open:function(e){t._adjustListWidth(),c.trigger(v,U)?e.preventDefault():(i.attr(F,!1),d.attr(z,!0).attr(R,t._timeViewID),t.options.active(t.current()))},active:function(e){d.removeAttr(I),e&&d.attr(I,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datetimepicker"),t[0]||(t=i.wrap(P).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(P).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=o.template(this.options.ARIATemplate)},_updateARIA:function(e){var t,n=this,i=n.dateView.calendar;n.element.removeAttr(I),i&&(t=i._cell,t.attr("aria-label",n._ariaTemplate({current:e||i.current()})),n.element.attr(I,t.attr("id")))}});g.plugin(j)}(window.kendo.jQuery),function(e,t){function n(e){return v.test(e)}function i(e){return m.test(e)||/^\d+$/.test(e)
}function r(e){return!n(e)&&!i(e)}function o(e,t){var i=parseInt(e,10);return n(e)&&(i=Math.floor(i*t/100)),i}function a(e,n){return function(i,r){var o,a=this.element.find(i).data(E);return 1==arguments.length?a[e]:(a[e]=r,n&&(o=this.element.data("kendo"+this.options.name),o.resize(!0)),t)}}function s(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,p(t,n===S?c:l),t._resizable=new d.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var l,c,d=window.kendo,u=d.ui,h=d.keys,p=e.extend,f=e.proxy,g=u.Widget,m=/^\d+(\.\d+)?px$/i,v=/^\d+(\.\d+)?%$/i,_=".kendoSplitter",y="expand",w="collapse",b="contentLoad",k="error",x="resize",C="layoutChange",S="horizontal",T="vertical",D="mouseenter",A="click",E="pane",M="mouseleave",P="k-state-focused",I="k-"+E,z="."+I,F=g.extend({init:function(e,t){var n,i=this;g.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?S:T,i._dimension=n?"width":"height",i._keys={decrease:n?h.LEFT:h.UP,increase:n?h.RIGHT:h.DOWN},i._resizeStep=10,i._marker=d.guid().substring(0,8),i._initPanes(),i.resizing=new s(i),i.element.triggerHandler("init"+_)},events:[y,w,b,k,x,C],_attachEvents:function(){var t=this,n=t.options.orientation;t.element.children(".k-splitbar-draggable-"+n).on("keydown"+_,e.proxy(t._keydown,t)).on("mousedown"+_,function(e){e.currentTarget.focus()}).on("focus"+_,function(t){e(t.currentTarget).addClass(P)}).on("blur"+_,function(n){e(n.currentTarget).removeClass(P),t.resizing&&t.resizing.end()}).on(D+_,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(M+_,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+_,function(){t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+_,function(){t._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+_,f(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on(A+_,t._arrowClick(w)).end().children(".k-expand-next, .k-expand-prev").on(A+_,t._arrowClick(y)).end().end(),e(window).on("resize"+_+t._marker,f(t.resize,t))},_detachEvents:function(){var t=this;t.element.children(".k-splitbar-draggable-"+t.orientation).off(_).end().children(".k-splitbar").off("dblclick"+_).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(_),e(window).off("resize"+_+t._marker)},options:{name:"Splitter",orientation:S,panes:[]},destroy:function(){g.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),d.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,c=r===s.decrease;l||c?(t.ctrlKey?(n=a[c?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(w,a[c?"prev":"next"]()):i._triggerAction(y,n)):o&&o.move((c?-1:1)*i._resizeStep,a),t.preventDefault()):r===h.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(n,i){"script"!=i.nodeName.toLowerCase()&&t._initPane(i,e[n])}),this.resize()},_initPane:function(t,n){t=e(t).attr("role","group").addClass(I),t.data(E,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,r=this;e=r.element.find(e),i=e.data(E),t=t||i.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),d.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger(b,{pane:e[0]})},error:function(t,n){r.trigger(k,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&(n=r.children(".k-icon:not(.k-resize-handle)"),1===n.length&&(n.is(".k-collapse-prev")?i._triggerAction(w,r.prev()):n.is(".k-collapse-next")?i._triggerAction(w,r.next()):n.is(".k-expand-prev")?i._triggerAction(y,r.prev()):n.is(".k-expand-next")&&i._triggerAction(y,r.next())))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=t.resizable!==!1&&n.resizable!==!1,a=t.collapsible,s=t.collapsed,l=n.collapsible,c=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||c)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!c).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!c)+i("k-expand-prev",a&&s&&!c)+i("k-resize-handle",o)+i("k-collapse-next",l&&!c&&!s)+i("k-expand-next",l&&c&&!s)),o||a||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(z).first().data(E),r=n.nextAll(z).first().data(E);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(z)},_resize:function(){var n,i,a,s,l,c,u,h,p,f,g=this,m=g.element,v=m.children(z),_=g.orientation==S,y=m.children(".k-splitbar"),w=y.length,b=_?"width":"height",k=m[b]();0===w?(w=v.length-1,v.slice(0,w).after("<div tabindex='0' class='k-splitbar' data-marker='"+g._marker+"' />"),g._updateSplitBars(),y=m.children(".k-splitbar")):g._updateSplitBars(),y.each(function(){k-=this[_?"offsetWidth":"offsetHeight"]}),n=0,i=0,a=e(),v.css({position:"absolute",top:0})[b](function(){var s,l=e(this),c=l.data(E)||{};if(l.removeClass("k-state-collapsed"),c.collapsed)s=c.collapsedSize?o(c.collapsedSize,k):0,l.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(c.size))return a=a.add(this),t;s=o(c.size,k)}return i++,n+=s,s}),k-=n,s=a.length,l=Math.floor(k/s),a.slice(0,s-1).css(b,l).end().eq(s-1).css(b,k-(s-1)*l),c=0,u=_?"height":"width",h=_?"left":"top",p=_?"offsetWidth":"offsetHeight",0===s&&(f=v.filter(function(){return!(e(this).data(E)||{}).collapsed}).last(),f[b](k+f[0][p])),m.children().css(u,m[u]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[h]=Math.floor(c)+"px",c+=t[p])}),g._detachEvents(),g._attachEvents(),d.resize(v),g.trigger(C)},toggle:function(e,n){var i,r=this;e=r.element.find(e),i=e.data(E),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed===t?!1:i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),r.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.resize(!0)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertBefore(e(n));return i._addPane(t,r,o)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this,r=i.wrapper.children(".k-pane").index(n),o=e("<div />").insertAfter(e(n));return i._addPane(t,r+1,o)},remove:function(t){t=e(t);var n=this;return t.length&&(d.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:a("size",!0),min:a("min"),max:a("max")});u.plugin(F),l={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},c={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},s.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),o=r.prev(),a=r.next(),s=o.data(E),l=a.data(E),c=parseInt(o[0].style[n.positioningProperty],10),d=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],u=parseInt(n._element.css(n.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(i(e)?t:u*t/100)||0},p=h(s.min),f=h(s.max)||d-c,g=h(l.min),m=h(l.max)||d-c;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(d-g,c+f),n._minPosition=Math.max(c+p,d-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,o,a,s,l,c,u,h=this,p=e(t.currentTarget),f=h.owner;return f._panes().children(".k-splitter-overlay").remove(),t.keyCode!==d.keys.ESC&&(n=t.position,i=p.prev(),o=p.next(),a=i.data(E),s=o.data(E),l=n-parseInt(i[0].style[h.positioningProperty],10),c=parseInt(o[0].style[h.positioningProperty],10)+o[0][h.sizingDomProperty]-n-p[0][h.sizingDomProperty],u=h._element.children(z).filter(function(){return r(e(this).data(E).size)}).length,(!r(a.size)||u>1)&&(r(a.size)&&u--,a.size=l+"px"),(!r(s.size)||u>1)&&(s.size=c+"px"),f.resize(!0)),!1}}}(window.kendo.jQuery),function(e){function t(e,t){function n(e,r){var o,a;if(r=r[t])for(o=i[e]=i[e]||[],a=0;r.length>a;a++)o.push(r[a]),n(e+1,r[a])}var i=[];return n(0,e),i}function n(){return M.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}function o(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th>&nbsp;</th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function a(t,n,o){var a,s,l,c,d,u,h,p,f,g,m=[];for(s=0;t.length>s;s++){for(l=t[s],c=[],d=n/l.length,a=0;l.length>a;a++)u=l[a],c.push('<th colspan="'+(u.colspan||d)+'" class="'+(u.className||"")+'">'+u.text+"</th>");m.push(c.join(""))}if(h=[],o){for(p=t[t.length-1],f=[],g=o.cellContent,a=0;p.length>a;a++)f.push('<td class="'+(p[a].className||"")+'">'+(g?g(a):"&nbsp;")+"</th>");h.push(f.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(m)+r(h,"k-scheduler-header-all-day")+"</div></div>")}function s(t,n){var r,o,a,s,l,c=Array(n).join().split(","),d=[];for(o=0;t.length>o;o++)for(a=t[o],s=n/a.length,r=0;a.length>r;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),c[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)d.push(c[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(d)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/></div>')}function c(){return D=D?D:M.support.scrollbar()}function d(e,t,n){var i,r,o,a,s;for(i=e.length-1;i>=0;i--)r=u(e[i]),o=r.start,s=r.end,a=t>=o&&s>=t,(a||o>=t&&n>=s||o>=t&&n>=o)&&(t>o&&(t=o),s>n&&(n=s));return h(e,t,n)}function u(e){return{start:e.start,end:e.end}}function h(e,t,n){var i,r,o=[];for(i=0;e.length>i;i++)r=u(e[i]),(t>r.start&&r.end>t||r.start>=t&&n>=r.end)&&o.push(e[i]);return o}function p(e){return g(e)}function f(e){return g(e)}function g(e){var t,n,i,r,o,a,s,l=[];for(t=0;e.length>t;t++){for(n=e[t],i=u(n),r=null,o=0,a=l.length;a>o;o++)if(s=i.start>l[o].end,l[o].start>i.start||s){r=l[o],i.end>r.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},l.push(r)),r.events.push(n)}return l}function m(e,t,n,i){var r,o,a,s,l=t[0];if(l){for(r=[],o=l.dataSource.view(),a=0;o.length>a;a++)s={text:i({text:M.htmlEncode(M.getter(l.dataTextField)(o[a])),color:M.getter(l.dataColorField)(o[a]),field:l.field,title:l.title,name:l.name,value:M.getter(l.dataValueField)(o[a])}),className:"k-slot-cell"},s[e]=m(e,t.slice(1),n,i),r.push(s);return r}return n}function v(t){return function(n){if(e.isArray(n)||n instanceof M.data.ObservableArray){for(var i=0;n.length>i;i++)if(n[i]==t)return!0;return!1}return n==t}}function _(e){e.className=e.className.replace(E,"")+" k-state-selected"}var y,w,b,k,x,C,S,T,D,A,E,M=window.kendo,P=M.ui,I=P.Widget,z=M.keys,F=".kendoSchedulerView",R=Math,B='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';M.ui.scheduler={},y=M.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new x(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a;for(i=0;n.length>i;i++)for(r=n[i],o=0;o<r.count();o++)if(a=r.at(o),e>=a.offsetLeft&&a.offsetLeft+a.clientWidth>e&&t>=a.offsetTop&&a.offsetTop+a.clientHeight>=t)return a},refresh:function(){var e;for(e=0;this._daySlotCollections.length>e;e++)this._daySlotCollections[e].refresh();for(e=0;this._timeSlotCollections.length>e;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n,i=this._timeSlotCollections,r=this._startSlot(e,i);return!r.inRange&&e>=r.slot.end&&(r=null),n=r,t>e&&(n=this._endSlot(t,i)),n&&!n.inRange&&n.slot.start>=t&&(n=null),null===r&&null===n?[]:(null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].first()}),null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].last()}),this._continuousRange(b,i,r,n))},daySlotRanges:function(e,t,n){var i,r=this._daySlotCollections,o=this._startSlot(e,r,n);if(!o.inRange&&e>=o.slot.end&&(o=null),i=o,t>e&&(i=this._endSlot(t,r,n)),i&&!i.inRange&&i.slot.start>=t&&(i=null),null===o&&null===i)return[];if(null===o)do e+=M.date.MS_PER_DAY,o=this._startSlot(e,r,n);while(!o.inRange&&e>=o.slot.end);if(null===i)do t-=M.date.MS_PER_DAY,i=this._endSlot(t,r,n);while(!i.inRange&&i.slot.start>=t);return this._continuousRange(k,r,o,i)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,c,d=n.slot,u=i.slot,h=d.collectionIndex,p=u.collectionIndex,f=[];for(r=h;p>=r;r++)o=t[r],a=o.first(),s=o.last(),l=!1,c=!1,r==h&&(c=!n.inRange),r==p&&(l=!i.inRange),d.start>a.start&&(a=d),s.start>u.start&&(s=u),p>h&&(r==h?l=!0:r==p?c=!0:l=c=!0),f.push(new e({start:a,end:s,collection:o,head:l,tail:c}));return f},slotRanges:function(e,t){var n=e.startTime||M.date.toUtcTime(e.start),i=e.endTime||M.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):this.timeSlotRanges(n,i)},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=M.date.toUtcTime(e)),"number"!=typeof t&&(t=M.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;t.length>n;n++)if(i=t[n],i.startInRange(e))return i;return null},_endCollection:function(e,t,n){var i,r;for(i=0;t.length>i;i++)if(r=t[i],r.endInRange(e,n))return r;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot),r=i[e.collectionIndex+n];return r?r[t?"last":"first"]():void 0},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this,i=function(e,i,r){var o=0===r;return!t&&!e&&o&&n.daySlotCollectionCount()?n._daySlotCollections[0].at(i):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,i)},downSlot:function(e,t){var n=this,i=function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,i)},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex,a=this._getCollections(r);return r?i+=t:o+=t,n=a[o],n?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,i=s[a],i?i.at(r):void 0)},_collection:function(e,t){var n=t?this._daySlotCollections:this._timeSlotCollections;return n[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),i=r.slotByStartDate(e,n),i||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t,n),o=!0;return r||(r=t[t.length-1],o=!1),i=r.slotByEndDate(e,n),i||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),w=M.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),b=w.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},outerRect:function(e,t,n){return this._rect("offset",e,t,n)},_rect:function(e,t,n,i){var r,o,a,s,l,c,d,u,h=this.start,p=this.end,f=M.support.isRtl(h.element);return"number"!=typeof t&&(t=M.date.toUtcTime(t)),"number"!=typeof n&&(n=M.date.toUtcTime(n)),i?(r=h.offsetTop,o=p.offsetTop+p[e+"Height"],f?(a=p.offsetLeft,s=h.offsetLeft+h[e+"Width"]):(a=h.offsetLeft,s=p.offsetLeft+p[e+"Width"])):(l=t-h.start,0>l&&(l=0),c=h.end-h.start,r=h.offsetTop+h[e+"Height"]*l/c,d=p.end-n,0>d&&(d=0),u=p.end-p.start,o=p.offsetTop+p[e+"Height"]-p[e+"Height"]*d/u,f?(a=Math.round(p.offsetLeft+p[e+"Width"]*d/u),s=Math.round(h.offsetLeft+h[e+"Width"]-h[e+"Width"]*l/c)):(a=Math.round(h.offsetLeft+h[e+"Width"]*l/c),s=Math.round(p.offsetLeft+p[e+"Width"]-p[e+"Width"]*d/u))),{top:r,bottom:o,left:0===a?a:a+1,right:s}},innerRect:function(e,t,n){return this._rect("client",e,t,n)}}),k=w.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),x=M.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=M.date.toUtcTime(e),this._end=M.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){for(var e=0;this._slots.length>e;e++)this._slots[e].refresh()},startInRange:function(e){return e>=this._start&&this._end>e},endInRange:function(e,t){var n=t?this._end>e:this._end>=e;return e>=this._start&&n},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=M.date.toUtcTime(e)),t=0;this._slots.length>t;t++)if(n=this._slots[t],n.startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=M.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;this._slots.length>n;n++)if(i=this._slots[n],i.endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n,i){var r=new S(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},addDaySlot:function(e,t,n,i){var r=new T(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),C=M.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){return M.timezone.toLocalDate(this.start)},endDate:function(){return M.timezone.toLocalDate(this.end)},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(){return this.start},endOffset:function(){return this.end}}),S=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.isHorizontal=a?!0:!1},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return e?this.offsetLeft+t:this.offsetLeft+t},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e},startOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.start;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s},endOffset:function(t,n,i){var r,o,a,s,l;if(i)return this.end;if(r=e(this.element).offset(),o=this.end-this.start,this.isHorizontal){if(l=M.support.isRtl(this.element),a=t-r.left,s=Math.floor(o*(a/this.offsetWidth)),l)return this.start+o-s}else a=n-r.top,s=Math.floor(o*(a/this.offsetHeight));return this.start+s}}),T=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return M.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return M.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return e>=this.start&&this.end>e},endInRange:function(e){return e>this.start&&this.end>=e}}),M.ui.SchedulerView=I.extend({init:function(t,n){I.fn.init.call(this,t,n),this._scrollbar=c(),this._isRtl=M.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=M.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_isMobile:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&M.support.mobileOS&&!M.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new y(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return M.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,e.isAllDay);return i&&(e.groupIndex+=t?-1:1),i},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,c=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i),r&&(s=l=r)),s=c[a](s),l=c[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),o=this._changeGroupContinuously(e,o,n,i),o&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i),r&&(a=s=r)),o=i?"upSlot":"downSlot",a=l[o](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,n=this.groups[0];this.inRange(e)?n.daySlotCollectionCount()||(e.isAllDay=!1):(t=n.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,n){var i,r,o,a,s,l,c=!1,d=this.groups[e.groupIndex];if(d.timeSlotCollectionCount()||(e.isAllDay=!0),i=d.ranges(e.start,e.end,e.isAllDay,!1),t===z.DOWN||t===z.UP){if(c=!0,a=t===z.UP,this._updateDirection(e,i,n,a,!0),s=this._verticalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!0))return c}else if((t===z.LEFT||t===z.RIGHT)&&(c=!0,a=t===z.LEFT,this._updateDirection(e,i,n,a,!1),s=this._horizontalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return c;return c&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward,l&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate())):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),c},moveToEventInGroup:function(t,n,i,r){for(var o,a,s=t._continuousEvents||[],l=r?-1:1,c=s.length,d=r?c-1:0;c>d&&d>-1;){if(a=s[d],(!r&&a.start.startDate()>=n.startDate()||r&&a.start.startDate()<=n.startDate())&&(i.length&&(a=s[d+l]),a&&-1===e.inArray(a.uid,i))){o=!!a;break}d+=l}return a},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,r=this.groups[i],r&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,void this._scrollTo(e,this.content[0]))},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s,l=e.isAllDay,c=this.groups[e.groupIndex];for(c.timeSlotCollectionCount()||(l=!0),this._selectedSlots=[],t=c.ranges(e.start,e.end,l,!1),r=0;t.length>r;r++)for(o=t[r],a=o.collection,s=o.start.index;o.end.index>=s;s++)i=a.at(s),n=i.element,n.setAttribute("aria-selected",!0),_(n),this._selectedSlots.push({start:i.startDate(),end:i.endDate(),element:n});e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),t.events=[],n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element),t.events.push(a[n].uid));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),this._selectedSlots=[],r=!0),r},inRange:function(e){var t=this.startDate(),n=M.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_resourceValue:function(e,t){return e.valuePrimitive&&(t=M.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o,a=this.groupedResources,s={};if(a.length)for(t=e.groupIndex,n=a.length-1;n>=0;n--)i=a[n],r=this._resourceValue(i,i.dataSource.view()[t%i.dataSource.total()]),i.multiple&&(r=[r]),o=M.setter(i.field),o(s,r),t=Math.floor(t/i.dataSource.total());return s},_createResizeHint:function(t,n,i,r){return e(B).css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i,s=0;s=r>n?n:a>r+o?o>=i?a-o:n:r,t.scrollTop=s},_shouldInverseResourceColor:function(e){var t=new A(e.color).isDark(),n=this.element.css("color"),i=new A(n).isDark();return t==i},_eventTmpl:function(t,n){var i,r=this.options,o=e.extend({},M.Template,r.templateSettings),a=o.paramName,s="",l=typeof t,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=t,s+="#=this.tmpl"+c.count+"("+a+")#",c.count++):"string"===l&&(s+=t),i=M.template(M.format(n,s),o),c.count>0&&(i=e.proxy(i,c.storage)),i},eventResources:function(e){var t,n,i,r,o,a,s,l,c,d,u=[],h=this.options;if(!h.resources)return u;for(t=0;h.resources.length>t;t++)if(n=h.resources[t],i=n.field,r=M.getter(i)(e))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;r.length>a;a++){for(s=null,l=r[a],n.valuePrimitive||(l=M.getter(n.dataValueField)(l)),c=0;o.length>c;c++)if(o[c].get(n.dataValueField)==l){s=o[c];break}null!==s&&(d=M.getter(n.dataColorField)(s),u.push({field:n.field,title:n.title,name:n.name,text:M.getter(n.dataTextField)(s),value:l,color:d}))}return u},createLayout:function(i){var r,o,a,s,l,c=-1;for(i.rows||(i.rows=[]),r=0;i.rows.length>r;r++)if(i.rows[r].allDay){c=r;break}o=i.rows[c],c>=0&&i.rows.splice(c,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a,s=this,l=s.element.find(">.k-scheduler-toolbar"),c=s.element.innerHeight(),d=this._scrollbar,u=0,h=this._isRtl?"left":"right";for(t=0;l.length>t;t++)c-=l.eq(t).outerHeight();s.datesHeader&&(u=s.datesHeader.outerHeight()),s.timesHeader&&s.timesHeader.outerHeight()>u&&(u=s.timesHeader.outerHeight()),s.datesHeader&&s.timesHeader&&(n=s.datesHeader.find("table:first tr"),s.timesHeader.find("tr").height(function(t){e(this).height(n.eq(t).height())})),u&&(c-=u),s.footer&&(c-=s.footer.outerHeight()),i=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},r=s.content[0],o=M.support.kineticScrollNeeded?0:d,i(s.element)&&(s.content.height(c>2*d?c:2*d+1),s.times.height(r.clientHeight),a=s.times.find("table"),a.length&&a.height(s.content.find("table")[0].clientHeight)),r.offsetWidth-r.clientWidth>0?(s.table.addClass("k-scrollbar-v"),s.datesHeader.css("padding-"+h,o-parseInt(s.datesHeader.children().css("border-"+h+"-width"),10))):s.datesHeader.css("padding-"+h,""),r.offsetHeight-r.clientHeight>0||r.clientHeight>s.content.children(".k-scheduler-table").height()?s.table.addClass("k-scrollbar-h"):s.table.removeClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=o(t.length,n,i);var r=t[t.length-1].length;return this.datesHeader=a(t,r,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())
},_bottomSection:function(t,n,i){return this.times=s(n,i),this.content=l(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll"+F,function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),t=M.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t,n){return m("columns",e,t,n)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,n){return m("rows",e,t,n)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;I.fn.destroy.call(this),e.table&&(M.destroy(e.table),e.table.remove()),e.groups=null,e.table=null,e.content=null,e.times=null,e.datesHeader=null,e.timesHeader=null,e.footer=null,e._resizeHint=null,e._moveHint=null},calendarInfo:function(){return M.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1),i.last()):(i=r._collection(r.daySlotCollectionCount()-1,!0),i.at(o.index)):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0),i.last())},nextGroupSlot:function(e,t,n){var i,r,o=this.groups[t],a=o.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o.timeSlotCollectionCount()?(r=o.daySlotCollectionCount(),i=o._collection(r?0:a.collectionIndex,r),n?i.first():i.at(a.collectionIndex)):(i=o._collection(0,!0),i.at(a.index)):o.timeSlotCollectionCount()?(i=o._collection(0,n),n?i.first():i.at(a.index)):(i=o._collection(a.collectionIndex,!0),i.first())},_updateEventForMove:function(){},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}}),A=function(e){var t,n,i,r,o,a=this,s=A.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;s.length>r;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)},A.prototype={resolveColor:function(e){return e=e||"#000","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=A.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return R.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this,t=e.percBrightness();return 180>t}},A.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],A.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},E=/\s*k-state-selected/,e.extend(P.SchedulerView,{createColumns:p,createRows:f,rangeIndex:u,collidingEvents:d,groupEqFilter:v})}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return c(t,m(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function o(e,t,n,i){var r,o=e._continuousEvents,a=o[o.length-1],l=p(t.start.startDate()).getTime();if(i&&a&&p(a.start.startDate()).getTime()==l){for(r=o.length-1;r>-1&&!(o[r].isAllDay||p(o[r].start.startDate()).getTime()<l);r--);o.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}else o.push({element:n,isAllDay:i,uid:n.attr(s.attr("uid")),start:t.start,end:t.end})}function a(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}var s=window.kendo,l=s.ui,c=s.date.setTime,d=l.SchedulerView,u=e.extend,h=e.proxy,p=s.date.getDate,f=s.date.MS_PER_MINUTE,g=s.date.MS_PER_DAY,m=s.date.getMilliseconds,v=".kendoMultiDayView",_=s.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),y=s.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),w=s.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),b='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',k='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',x=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=a(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},_currentTimeMarkerUpdater:function(){var t,n,i,r,o,a,l,c,d,u,h=new Date,p=this.options;for(p.currentTimeMarker.useLocalTimezone===!1&&(t=p.dataSource.options.schema.timezone,p.dataSource&&t&&(n=s.timezone.offset(h,t),h=s.timezone.convert(h,h.getTimezoneOffset(),n))),this.times.find(".k-current-time").remove(),i=p.group&&"horizontal"!=p.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],a=s.date.toUtcTime(h),l=o.timeSlotRanges(a,a+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(h),d&&(u=e("<div class='k-current-time'></div>"),u.appendTo(this.times).css({top:Math.round(l[0].innerRect(h,new Date(h.getTime()+1),!1).top),height:"1px",right:"1px",left:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(h(this._currentTimeMarkerUpdater,n),e))},_updateResizeHint:function(e,t,n,i){var r,o,a,l,c,u,h,p,f,g,m=e.isMultiDay(),v=this.groups[t],_=v.ranges(n,i,m,e.isAllDay);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],a=o.startSlot(),l=a.offsetWidth,c=a.clientHeight,u=a.offsetTop,m?l=o.innerWidth():(h=o.outerRect(n,i,this.options.snap),u=h.top,c=h.bottom-h.top),p=d.fn._createResizeHint.call(this,a.offsetLeft,u,l,c),this._resizeHint=this._resizeHint.add(p);f="t",g=this.content,m&&(f="M/dd",g=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),g.length||(g=this.content)),this._resizeHint.appendTo(g),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(s.toString(s.timezone.toLocalDate(n),f)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(s.toString(s.timezone.toLocalDate(i),f))},_updateMoveHint:function(e,t,n){var i,r,o,a,l,c,d,u=e.isMultiDay(),h=this.groups[t],p=s.date.toUtcTime(e.start)+n,f=p+e.duration(),g=h.ranges(p,f,u,e.isAllDay);for(p=s.timezone.toLocalDate(p),f=s.timezone.toLocalDate(f),this._removeMoveHint(),!u&&(0===m(f)||m(f)<m(this.startTime()))&&g.length>1&&g.pop(),i=0;g.length>i;i++)r=g[i],o=r.start,a=this._createEventElement(e.clone({start:p,end:f}),!u),a.addClass("k-event-drag-hint"),l={left:o.offsetLeft+2,top:o.offsetTop},this._isRtl&&(l.left=.1*o.clientWidth+o.offsetLeft+2),u?l.width=r.innerWidth()-4:(c=r.outerRect(p,f,this.options.snap),l.top=c.top,l.height=c.bottom-c.top,l.width=.9*o.clientWidth-4),a.css(l),this._moveHint=this._moveHint.add(a);d=this.content,u&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var n,i,r,o;for(this._isVerticallyGrouped()?(i=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):i=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),i=this.content.offset(),e-=i.left,t-=i.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),o=0;this.groups.length>o;o++)if(r=this.groups[o],n=r.timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p,f,g,v,_,y=this._timeSlotInterval(),w=this.content.find("tr:not(.k-scheduler-header-all-day)");for(w.attr("role","row"),n=w.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=w[o].children,c=this.groups[i],o%n===0&&(a=m(new Date(+this.startTime()))),d=s*t;(s+1)*t>d;d++)u=l[d],h=d%t,p=c.getTimeSlotCollection(h),f=this._dates[h],g=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),v=g+a,_=v+y,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),p.addTimeSlot(u,v,_);a+=y,o++}},_daySlotGroups:function(e,t){var n,i,r,o,a,l,c,d,u,h,p,f;for(n=this.element.find(this._isVerticallyGrouped()?".k-scheduler-header-all-day":".k-scheduler-header-all-day tr"),n.attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=this.groups[i],a=o.getDaySlotCollection(0),l=n[r].children,c=0,this._isVerticallyGrouped()||(c=i),d=0,u=c*t;(c+1)*t>u;u++)h=l[u],u%t===0&&(d=0),p=this._dates[d],f=Date.UTC(p.getFullYear(),p.getMonth(),p.getDate()),d++,h.setAttribute("role","gridcell"),h.setAttribute("aria-selected",!1),a.addDaySlot(h,f,f+s.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],s.date.addDays(this._dates[n],1));this.options.allDaySlot&&t.addDaySlotCollection(this._dates[0],s.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:s.date.today(),endTime:s.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:_,allDayEventTemplate:y,dateHeaderTemplate:w,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=u({},s.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,k),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,b),this.majorTimeHeaderTemplate=s.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=s.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=s.template(e.dateHeaderTemplate,t),this.slotTemplate=s.template(e.slotTemplate,t),this.allDaySlotTemplate=s.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=s.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+v,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+v,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.pageX,n.pageY),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}).on("dblclick"+v,".k-scheduler-header-all-day td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+v,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(s.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.x.location,n.y.location),i&&(r=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({start:i.startDate(),end:i.endDate()},r)})),n.preventDefault())}}),t._allDayUserEvents=new s.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:u({},{isAllDay:!0,start:s.date.getDate(i.startDate()),end:s.date.getDate(i.startDate())},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new s.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(s.attr("uid"))}),n.preventDefault()}}))},_layout:function(e){var t,n,i,r=[],o=[],a=this.options,l=this;for(t=0;e.length>t;t++)n={},n.text=l.dateHeaderTemplate({date:e[t]}),s.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return i=this.groupedResources,a.allDaySlot&&o.push({text:a.messages.allDay,allDay:!0,cellContent:function(t){var n=t;return t=i.length&&"vertical"!==l._groupOrientation()?t%e.length:t,l.allDaySlotTemplate({date:e[t],resources:function(){return l._resourceBySlot({groupIndex:n})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,a={text:r({date:e}),className:i?"k-slot-cell":""};o.push(a)}),i.length&&("vertical"===this._groupOrientation()?o=this._createRowsLayout(i,o,this.groupHeaderTemplate):r=this._createColumnsLayout(i,r,this.groupHeaderTemplate)),{columns:r,rows:o}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+v,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_forTimeRange:function(e,t,i,r){var o,a,s,l,d,u,h,p,v,_,y,w,b,k,x,C;for(e=n(e),t=n(t),o=this,a=m(e),s=m(t),l=o.options.minorTickCount,d=o.options.majorTick*f,u=d/l||1,h=new Date(+e),p=h.getDate(),_=0,w="",y=g/u,a!=s&&(a>s&&(s+=g),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=l-1>b,C=b===l-1,w+=i(h,k,x,C),c(h,u,!1);return s&&(v=m(h),p<h.getDate()&&(v+=g),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_content:function(e){var t,n,i,r=this,o=r.options,a=r.startTime(),l=this.endTime(),c=1,d=1,u=e.length,h="",p=this.groupedResources,f=this.slotTemplate,g=this.allDaySlotTemplate,m=!1;for(p.length&&(m="vertical"===r._groupOrientation(),m?(d=this._rowCountForLevel(this.rowLevels.length-2),o.allDaySlot&&(t=function(t){var n,i,o='<tr class="k-scheduler-header-all-day">',a=function(){return r._resourceBySlot({groupIndex:t})};for(n=0,i=e.length;i>n;n++)o+="<td>"+g({date:e[n],resources:a})+"</td>";return o+"</tr>"})):c=this._columnCountForLevel(this.columnLevels.length-2)),h+="<tbody>",n=function(t,n){var o,a,l,d,h="",p="",g=0;for(h="<tr"+(n?' class="k-middle-row"':"")+">",d=function(e){return function(){return r._resourceBySlot({groupIndex:e})}};c>g;g++)for(o=0,a=u;a>o;o++)p="",s.date.isToday(e[o])&&(p+="k-today"),(s.date.getMilliseconds(t)<s.date.getMilliseconds(r.options.workDayStart)||s.date.getMilliseconds(t)>=s.date.getMilliseconds(r.options.workDayEnd)||!r._isWorkDay(e[o]))&&(p+=" k-nonwork-hour"),h+="<td"+(""!==p?' class="'+p+'"':"")+">",l=s.date.getDate(e[o]),s.date.setTime(l,s.date.getMilliseconds(t)),h+=f({date:l,resources:d(m?i:g)}),h+="</td>";return h+="</tr>"},i=0;d>i;i++)h+=t?t(i):"",h+=this._forTimeRange(a,l,n);h+="</tbody>",this.content.find("table").append(h)},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),n=this.element.find(".k-scheduler-header-all-day td"),n.length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+v,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=m(this.endTime())||g;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return s.date.nextDay(this.endDate())},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(v),e.element&&e.element.off(v),e.footer&&e.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),n=m(this.startTime()),i=m(this.endTime())||s.date.MS_PER_DAY,r=m(e.start),o=m(e.end)||s.date.MS_PER_DAY;return t&&r>=n&&i>=o},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},_timeSlotIndex:function(e){var t=this.options,n=m(e),i=m(this.startTime()),r=t.majorTick/t.minorTickCount*f;return(n-i)/r},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var n,r,o,a,l=this._dates||[],c=1;for(n=0,r=l.length;r>n;n++)if(o=s.date.getDate(l[n]),a=new Date(s.date.getDate(l[n]).getTime()+g-(t?0:1)),i(e,o,a))return n*c;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,l,c,u=n.innerWidth(),h=n.start.index,p=n.end.index,f=d.collidingEvents(n.events(),h,p),g=this._headerColumnCount||0,m=2,v=h!==p?5:4,_=this._allDayHeaderHeight,y=n.startSlot();for(t.css({left:y.offsetLeft+m,width:u-v}),n.addEvent({slotIndex:h,start:h,end:p,element:t}),f.push({slotIndex:h,start:h,end:p,element:t}),i=d.createRows(f),i.length&&i.length>g&&(this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(s=i[o].events,l=0,c=s.length;c>l;l++)e(s[l].element).css({top:r+o*_})},_arrangeColumns:function(e,t,n,i){var r,o,a,s,l,c,u,h,p,f,g,m=i.start;for(e={element:e,slotIndex:m.index,start:t,end:t+n},o=m.clientWidth,a=.1*o,l=i.events(),c=d.collidingEvents(l,e.start,e.end),i.addEvent(e),c.push(e),r=d.createColumns(c),u=(o-a)/r.length,h=0,p=r.length;p>h;h++)for(s=r[h].events,f=0,g=s.length;g>f;f++)s[f].element[0].style.width=u-4+"px",s[f].element[0].style.left=(this._isRtl?a:0)+m.offsetLeft+h*u+2+"px"},_positionEvent:function(e,t,n){var i=e.startTime||e.start,r=e.endTime||e.end,o=n.innerRect(i,r,!1),a=o.bottom-o.top-2;0>a&&(a=0),t.css({top:o.top,height:a}),this._arrangeColumns(t,o.top,t[0].clientHeight,n)},_createEventElement:function(t,n,r,o){var a,l,c,d,h,f,v=n?this.eventTemplate:this.allDayEventTemplate,_=this.options,y=_.editable,w=this._isMobile(),b=y&&y.destroy!==!1&&!w,k=y&&y.resize!==!1,x=p(this.startDate()),C=p(this.endDate()),S=m(this.startTime()),T=m(this.endTime()),D=t._time("start"),A=t._time("end");return S>=T&&(T=m(new Date(this.endTime().getTime()+g-1))),n||t.isAllDay||(C=new Date(C.getTime()+g)),l=t.start,c=t.end,t.isAllDay&&(c=p(t.end)),!i(p(l),x,C)&&!i(c,x,C)||n&&S>D&&A>T?a=!0:p(l)<x||n&&S>D?o=!0:(c>C&&!n||n&&A>T)&&(r=!0),d=this.eventResources(t),t.startTime&&(l=new Date(D),l=s.timezone.apply(l,"Etc/UTC")),t.endTime&&(c=new Date(A),c=s.timezone.apply(c,"Etc/UTC")),h=u({},{ns:s.ns,resizable:k,showDelete:b,middle:a,head:r,tail:o,singleDay:1==this._dates.length,resources:d,inverseColor:d&&d[0]?this._shouldInverseResourceColor(d[0]):!1},t,{start:l,end:c}),f=e(v(h)),this.angular("compile",function(){return{elements:f,data:[{dataItem:h}]}}),f},_isInTimeSlot:function(e){var t,n=this.startTime(),i=this.endTime(),o=e.startTime||e.start,a=e.endTime||e.end;return m(i)===m(s.date.getDate(i))&&(i=s.date.getDate(i),c(i,g-1)),e._date("end")>e._date("start")&&(a=+e._date("end")+(g-1)),a-=e._date("end"),o-=e._date("start"),i=m(i),n=m(n),n===o&&o===a?!0:(t=o!==i,r(o,n,i,t)||r(a,n,i,t)||r(n,o,a)||r(i,o,a))},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,r=t.lastSlot().end-1,o=s.date.toUtcTime(e.start),a=s.date.toUtcTime(e.end);return(i(o,n,r)||i(a,n,r)||i(n,o,a)||i(r,o,a))&&(!i(a,n,n)||i(a,o,o)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n;if(this._height!==e&&(this._height=e,t=this.element.find(".k-scheduler-header-all-day td"),t.length))for(t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),n=0;this.groups.length>n;n++)this.groups[n].refresh()},_renderEvents:function(e,t){var n,i,r,a,s,l,c,d,u,h,p,f,m,v,_,y=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))if(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=g,s=a&&!this._isVerticallyGrouped()?y:this.content,a)this.options.allDaySlot&&(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),c.length&&(l=this._createEventElement(n,!a),this._positionAllDayEvent(l,c[0]),o(d,c[0],l,!0),l.appendTo(s)));else if(this._isInTimeSlot(n))for(d=this.groups[t],d._continuousEvents||(d._continuousEvents=[]),c=d.slotRanges(n),u=c.length,h=0;u>h;h++)p=c[h],f=n.start,m=n.end,u>1&&(0===h?m=p.end.endDate():h==u-1?f=p.start.startDate():(f=p.start.startDate(),m=p.end.endDate())),v=n.clone({start:f,end:m,startTime:n.startTime,endTime:n.endTime}),this._isInTimeSlot(v)&&(_=p.head,l=this._createEventElement(n,!a,_,p.tail),l.appendTo(s),this._positionEvent(v,l,p),o(d,p,l,!1))},render:function(t){var n,r,o,a,l;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new s.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=this,o=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return e.isMultiDay()&&i(t,p(e.start),p(e.end))}).length}))}),a=Math.max.apply(null,o),this._updateAllDayHeaderHeight((a+1)*this._allDayHeaderHeight),l=0;n.length>l;l++)this._renderEvents(n[l],l);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,n){var i,r,o,a,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),a=new s.data.Query(e).filter({field:l.field,operator:d.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(a,t.slice(1),n):n.push(a);else n.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,n,i){var r,o,a,s;return i?t:(r=n?this.previousDate():this.nextDate(),o=e.start,a=e.end,e.start=new Date(r),e.end=new Date(r),s=e.isAllDay?g:m(a),c(e.start,m(o)),c(e.end,s),this._isVerticallyGrouped()||(e.groupIndex=n?this.groups.length-1:0),e.events=[],!0)}});u(!0,l,{MultiDayView:x,DayView:x.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:x.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,n=this.options.date,i=s.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=s.date.nextDay(i);this._render(r)}}),WorkWeekView:x.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}"},name:"workWeek",nextDate:function(){return s.date.dayOfWeek(s.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return s.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=s.date.dayOfWeek(e,this.options.workWeekStart,-1),n=s.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=s.date.nextDay(t);this._render(i)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)t=e[n],t.groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView",l='<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>';a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),n=this.options,n.editable&&(n.editable=e.extend({"delete":!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=this._eventTmpl(n.eventTemplate,l),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")
},_layout:function(){var e,t,n,i=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];if(this._isMobilePhoneView()||i.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"}),e=this.groupedResources,e.length){for(t=[],n=0;e.length>n;n++)t.push({text:"",className:"k-scheduler-groupcolumn"});i=t.concat(i)}return{columns:i}},_tasks:function(e){var t,n,i,r,a,s,l,c=[];for(t=0;e.length>t;t++)if(n=e[t],i=n.start,r=n.end,a=(o.date.getDate(r)-o.date.getDate(i))/o.date.MS_PER_DAY+1,s=n.clone(),s.startDate=o.date.getDate(i),s.startDate>=this.startDate()&&c.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,s=n.clone(),s.start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),s.end<=this.endDate()&&s.start>=this.startDate()&&c.push(s);return new o.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,c,d,u,h=[],p=this.options.editable,f=p&&p.destroy!==!1&&!this._isMobile(),g=this._isMobilePhoneView();for(n=0;e.length>n;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;r.length>s;s++){if(l=r[s],c=[],d=g?[]:c,0===n&&0===s&&t.length)for(u=0;t.length>u;u++)d.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[u].rowSpan,this._groupTemplate({value:t[u].text}),t[u].className));0===s&&(g?(d.push(o.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:i}))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+d.join("")+"</tr>")):c.push(o.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l.startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),h.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+c.join("")+"</tr>")}return h.join("")},render:function(e){var t,n,r=this.content.find("table").empty(),o=[];e.length>0&&(t=this.groupedResources,t.length?(o=this._createGroupConfiguration(e,t,null),this._renderGroups(o,r,[])):(o=this._tasks(e),r.append(this._renderTaskGroups(o,[])))),n=this._eventsList=i(o),this._angularItems(r,n),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[],i=t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+o.attr("uid")+"="+t.uid+"]")});return{elements:i,data:n}})},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)o=n.splice(0),o.push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,c,d,u,h,p,f=i[0],g=[],m=f.dataSource.view(),v=this._isMobilePhoneView();for(s=0;m.length>s;s++)l=n(f,m[s]),c=new o.data.Query(e).filter({field:f.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray(),c.length&&(d=this._tasks(c),u=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),h={text:o.getter(f.dataTextField)(m[s]),value:l,rowSpan:0,className:u},i.length>1?(h.groups=this._createGroupConfiguration(c,i.slice(1),h),r&&(r.rowSpan+=h.rowSpan)):(h.items=d,p=t(h.items),v&&(p+=h.items.length),h.rowSpan=p,r&&(r.rowSpan+=p)),g.push(h));return g},selectionByElement:function(t){var n,i,r;return t=e(t),t.hasClass("k-scheduler-datecolumn")?void 0:(this._isMobile()?(r=t.parent(),n=r.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r)):n=t.parent().index(),i=this._eventsList[n],{index:n,start:i.start,end:i.end,isAllDay:i.isAllDay,uid:i.uid})},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r],n&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r)),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),function(e){function t(e,t){return e.slice(t).concat(e.slice(0,t))}function n(e,t){for(var n=t.firstDay,i=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)r.date.setTime(i,-1*d);return i}function i(e,t,n){var i,r=t,o=n;return i=e,i>=r&&o>=i}var r=window.kendo,o=r.ui,a=o.SchedulerView,s=".kendoMonthView",l=e.extend,c=r.date.getDate,d=r.date.MS_PER_DAY,u=6,h=7,p=r.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),f='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',g=r.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),m=r.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');o.MonthView=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l,c;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,c=r?s&&l||l:s&&l,c&&(e.backward=i))},_changeViewPeriod:function(e,t,n){var i=n?7:1;return t&&(i*=-1),e.start=r.date.addDays(e.start,i),e.end=r.date.addDays(e.end,i),(!n||n&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1,r=this.groups[e.groupIndex];return r.continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){var n;return n=e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,f),this.dayTemplate=r.template(e.dayTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return r.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return r.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return r.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=r.date.firstDayOfMonth(t),this._lastDayOfMonth=r.date.lastDayOfMonth(t),this._startDate=n(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+s,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-scheduler-content td",function(n){var i,r=e(n.currentTarget).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i,r=e(n.target).offset(),o=t._slotByPosition(r.left,r.top);o&&(i=t._resourceBySlot(o),t.trigger("add",{eventInfo:l({isAllDay:!0,start:o.startDate(),end:o.startDate()},i)})),n.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar(e);t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(e){var t,n,i,o,a=this.startDate(),s=h*u,l=h,c=[a],d="",p=1,f=this._isVerticallyGrouped(),g=this.groupedResources;for(g.length&&(f||(p=this._columnCountForLevel(g.length-1))),this._slotIndices={},t=0,n=s/l;n>t;t++){for(d+="<tr>",c.push(a),i=t*l,o=0;p>o;o++)d+=this._createRow(a,i,l,f?e:o);a=r.date.addDays(a,l),d+="</tr>"}return this._weekStartDates=c,this._endDate=r.date.previousDay(a),d},_createRow:function(e,t,n,i){var o,a=this,s=a._firstDayOfMonth,l=a._lastDayOfMonth,d=a.dayTemplate,u="",h="",p=function(){return a._resourceBySlot({groupIndex:i})};for(o=0;n>o;o++)u="",r.date.isToday(e)&&(u+="k-today"),r.date.isInDateRange(e,s,l)||(u+=" k-other-month"),h+="<td ",""!==u&&(h+='class="'+u+'"'),h+=">",h+=d({date:e,resources:p}),h+="</td>",a._slotIndices[c(e).getTime()]=t+o,e=r.date.nextDay(e);return h},_layout:function(){var n,i,r,o=this.calendarInfo(),a=this._isMobile()?o.days.namesShort:o.days.names,s=t(a,o.firstDay),l=e.map(s,function(e){return{text:e}}),c=this.groupedResources;if(c.length)if(this._isVerticallyGrouped()){for(i=[],r=0;6>r;r++)i.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});n=this._createRowsLayout(c,i,this.groupHeaderTemplate)}else l=this._createColumnsLayout(c,l,this.groupHeaderTemplate);return{columns:l,rows:n}},_createEventElement:function(t){var n,i=this.options,o=i.editable,a=this._isMobile();return t.showDelete=o&&o.destroy!==!1&&!a,t.resizable=o&&o.resize!==!1&&!a,t.ns=r.ns,t.resources=this.eventResources(t),t.inverseColor=t.resources&&t.resources[0]?this._shouldInverseResourceColor(t.resources[0]):!1,n=e(this.eventTemplate(t)),this.angular("compile",function(){return{elements:n,data:[{dataItem:t}]}}),n},_isInDateSlot:function(e){var t=this.groups[0],n=t.firstSlot().start,o=t.lastSlot().end-1,a=r.date.toUtcTime(e.start),s=r.date.toUtcTime(e.end);return(i(a,n,o)||i(s,n,o)||i(n,a,s)||i(o,a,s))&&(!i(s,n,n)||i(s,a,a)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[c(e).getTime()]},_positionMobileEvent:function(t,n,i){var o,s,l,c,d,u,h,p=t.start;t.start.offsetLeft>t.end.offsetLeft&&(p=t.end),o=t.start.index,s=o,l=3,c=a.collidingEvents(t.events(),o,s),c.push({element:n,start:o,end:s}),d=a.createRows(c),u=t.collection.at(o),h=u.container,h||(h=e(r.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',p.offsetTop+p.firstChildTop+p.firstChildHeight-3+"px",p.offsetLeft+"px",p.offsetWidth+"px")),u.container=h,this.content[0].appendChild(h[0])),l>=d.length&&(t.addEvent({element:n,start:o,end:s,groupIndex:p.groupIndex}),i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),h[0].appendChild(n[0]))},_positionEvent:function(t,n,i){var o,s,l,c,d,u,h,p,f,g,v,_,y,w,b,k=this.options.eventHeight,x=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(x=t.end),o=t.start.index,s=t.end.index,l=x.eventCount,c=a.collidingEvents(t.events(),o,s),d=o!==s?5:4,c.push({element:n,start:o,end:s}),u=a.createRows(c),h=0,p=Math.min(u.length,l);p>h;h++)for(f=u[h].events,g=x.offsetTop+x.firstChildHeight+h*k+3*h+"px",v=0,_=f.length;_>v;v++)f[v].element[0].style.top=g;if(u.length>l)for(y=o;s>=y;y++){if(w=t.collection,b=w.at(y),b.more)return;b.more=e(m({ns:r.ns,start:y,end:y,width:b.clientWidth-2,left:b.offsetLeft+2,top:b.offsetTop+b.firstChildHeight+l*k+3*l})),this.content[0].appendChild(b.more[0])}else t.addEvent({element:n,start:o,end:s,groupIndex:x.groupIndex}),n[0].style.width=t.innerWidth()-d+"px",n[0].style.left=x.offsetLeft+2+"px",n[0].style.height=k+"px",i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),this.content[0].appendChild(n[0])},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;this.groups.length>n;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,n=e.start.offsetTop,i=e.innerWidth(),r=e.start.clientHeight-2,o=a.fn._createResizeHint.call(this,t,n,i,r);o.appendTo(this.content),this._resizeHint=this._resizeHint.add(o)},_updateResizeHint:function(e,t,n,i){var o,a,s;for(this._removeResizeHint(),o=this.groups[t],a=o.ranges(n,i,!0,e.isAllDay),s=0;a.length>s;s++)this._createResizeHint(a[s]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(n),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(i),"M/dd"))},_updateMoveHint:function(e,t,n){var i,o,a,s,l,c=r.date.toUtcTime(e.start)+n,d=c+e.duration(),u=this.groups[t],h=u.ranges(c,d,!0,e.isAllDay);for(this._removeMoveHint(),i=0;h.length>i;i++)o=h[i],a=o.startSlot(),s=o.endSlot(),l=this._createEventElement(e.clone({head:o.head,tail:o.tail})),l.css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,n,i,o,a,s,l,c,d,p,f,g,m,v,_,y,w=this._groupCount(),b=h,k=u;for(this.groups=[],e=0;w>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),n=0;w>n;n++)for(i=0,o=0,this._isVerticallyGrouped()&&(o=n),a=o*k;(o+1)*k>a;a++)for(s=this.groups[n],l=s.addDaySlotCollection(r.date.addDays(this.startDate(),i),r.date.addDays(this.startDate(),i+b)),c=t[a],d=c.children,p=0,c.setAttribute("role","row"),this._isVerticallyGrouped()||(p=n),f=p*b;(p+1)*b>f;f++)g=d[f],m=g.clientHeight,v=g.children.length?g.children[0].offsetHeight+3:0,_=r.date.toUtcTime(r.date.addDays(this.startDate(),i)),i++,y=Math.floor((m-v-this.options.moreButtonHeight)/(this.options.eventHeight+3)),g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),l.addDaySlot(g,_,_+r.date.MS_PER_DAY,y)},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p=this._isMobilePhoneView();for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for(o=this.groups[t],o._continuousEvents||(o._continuousEvents=[]),a=o.slotRanges(n,!0),s=a.length,l=0;s>l;l++)c=a[l],d=n.start,u=n.end,s>1&&(0===l?u=c.end.endDate():l==s-1?d=c.start.startDate():(d=c.start.startDate(),u=c.end.endDate())),h=n.clone({start:d,end:u,head:c.head,tail:c.tail}),p?this._positionMobileEvent(c,this._createEventElement(h),o):this._positionEvent(c,this._createEventElement(h),o)},_renderGroups:function(e,t,n,i){var o,s,l,c,d=t[0];if(d)for(o=d.dataSource.view(),s=0;o.length>s;s++)l=this._resourceValue(d,o[s]),c=new r.data.Query(e).filter({field:d.field,operator:a.groupEqFilter(l)}).toArray(),t.length>1?n=this._renderGroups(c,t.slice(1),n++,i+1):this._renderEvents(c,n++);return n},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(s),this.element&&this.element.off(s),a.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(this.options.editable.create!==!1&&this._addUserEvents.destroy(),this.options.editable.update!==!1&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:p,eventTemplate:g}})}(window.kendo.jQuery),function(e,t){function n(e,t){var n;return 0!==e&&t>e?n=t-e:(n=e%t,n&&(n=t-n)),n}function i(e){var t=e.getMonth(),n=m(e)?et[t]:tt[t];return n+e.getDate()}function r(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),X(e,0),i=e.getFullYear(),n!==t?(Q(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),X(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function o(e,t){var n=J(e).getDay(),i=7-(n+7-(t||7))||7;return 0>i&&(i+=7),Math.ceil((e.getDate()-i)/7)+1}function a(e,t){return e+(t>e?7:0)}function s(e,t,n){var i,r,s,l,c,d=t.offset;return d?(i=new Date(e.getFullYear(),e.getMonth()+1,0),r=o(i,n),s=a(t.day,n),l=s<a(new Date(e.getFullYear(),e.getMonth(),1).getDay(),n),c=s>a(i.getDay(),n),0>d?d=r+(d+1-(c?1:0)):l&&(d+=1),r-=c?1:0,(l?1:0)>d||d>r?null:d):o(e,n)}function l(e,t){return o(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function c(e,t,n){return o(e,n)===s(e,t,n)}function d(e,t,n){for(var i,r,l,c,d=a(t.getDay(),n),u=e.length,h=[],p=0;u>p;p++)if(r=e[p],c=o(t,n),i=s(t,r,n),null!==i)if(i>c)h.push(r);else if(c===i)if(l=a(r.day,n),l>d)h.push(r);else if(d===l)return null;return h}function u(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function h(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||t.start>n||n>t.end||0===n&&0>t.start)return null;e[i]=n}return e.sort(v)}function p(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(n=e[o],i=n.length,r=n.substring(i-2).toUpperCase(),r=rt[r],r===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function f(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)t=e[i],"string"==typeof t?n=t:(n=""+it[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}function g(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:nt[t]}function m(e){return e=e.getFullYear(),e%4===0&&e%100!==0||e%400===0}function v(e,t){return e-t}function _(e,t){var n,i,r=0,o=[];if(e)for(e=e.split(";"),n=e.length;n>r;r++)i=S(e[r],t),i&&o.push(i);return o}function y(t,n,i){for(var r=e.isArray(t)?t:_(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function w(e,t){var n,i,r=0,o=[].concat(e);for(n=o.length;n>r;r++)i=o[r],i=U.timezone.convert(i,t||i.getTimezoneOffset(),"Etc/UTC"),o[r]=U.toString(i,lt);return o.join(";")+";"}function b(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),0,1);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth(),1);break;case"weekly":Q(n,t.weekStart,-1)}return t.hours&&n.setHours(0),t.minutes&&n.setMinutes(0),t.seconds&&n.setSeconds(0),n}function k(e,t){var n=new Date(e);switch(t.freq){case"yearly":n.setFullYear(n.getFullYear(),11,31);break;case"monthly":n.setFullYear(n.getFullYear(),n.getMonth()+1,0);break;case"weekly":Q(n,t.weekStart,-1),n.setDate(n.getDate()+6)}return t.hours&&n.setHours(23),t.minutes&&n.setMinutes(59),t.seconds&&n.setSeconds(59),n}function x(e,t,n){var i,r,o,a,s=e.slice(n._startIdx),l=s.length,c=n.positions,d=[];for(o=0,a=c.length;a>o;o++)i=c[o],0>i?i=l+i:i-=1,r=s[i],r&&r.start>=t&&d.push(r);return e=e.slice(0,n._startIdx).concat(d),n._startIdx=e.length,e}function C(e,n,i,r){var o,a,s,l,c,d,u,h,p,f,g,m,v,C,S,T,A,E,M,P,I,z,F=D(e.recurrenceRule,r),R=[];if(!F)return[e];for(P=F.positions,I=P?0:1,f=F.start,g=F.end,(f||g)&&(e=e.clone({start:f?new Date(f.value[0]):t,end:g?new Date(g.value[0]):t})),A=e.start,T=A.getTime(),S=Z(A),C=_(e.recurrenceException,r),!C[0]&&F.exdates&&(C=F.exdates.value,e.set("recurrenceException",w(C,r))),h=n=new Date(n),i=new Date(i),v=F.freq,M=mt[v],E=F.count,F.until&&i>F.until&&(i=new Date(F.until)),m="yearly"===v||"monthly"===v||"weekly"===v,T>n||E||F.interval>1||m?n=new Date(T):(l=n.getHours(),c=n.getMinutes(),d=n.getSeconds(),F.hours||(l=A.getHours()),F.minutes||(c=A.getMinutes()),F.seconds||(d=A.getSeconds()),n.setHours(l,c,d,A.getMilliseconds())),F._startPeriod=new Date(n),P&&(n=b(n,F),i=k(i,F),z=Z(i)-Z(n),0>z&&(l=n.getHours(),i.setHours(l,n.getMinutes(),n.getSeconds(),n.getMilliseconds()),Y.adjustDST(i,l)),F._startPeriod=new Date(n),F._endPeriod=k(n,F),F._startIdx=0),u=e.duration(),F._startTime=o=Y.toInvariantTime(n),M.setup&&M.setup(F,A,n),M.limit(n,i,F);i>=n;)if(s=new Date(n),K(s,u),p=n>=h||s>h,(p&&!y(C,n,r)||P)&&(o=Y.toUtcTime(Y.getDate(n))+Z(F._startTime),a=o+u,T!==n.getTime()||S!==Z(F._startTime)?R.push(e.toOccurrence({start:new Date(n),end:s,startTime:o,endTime:a})):(e.startTime=o,e.endTime=a,R.push(e))),P){if(M.next(n,F),M.limit(n,i,F),n>F._endPeriod&&(R=x(R,A,F),F._endPeriod=k(n,F),I=R.length),E&&E===I)break}else{if(E&&E===I)break;I++,M.next(n,F),M.limit(n,i,F)}return R}function S(e,t){return e=U.parseDate(e,ot),e&&t&&(e=W.convert(e,e.getTimezoneOffset(),t)),e}function T(e,n){var i,r,o,a,s,l,c,d,u=e.split(";");for(c=0,d=u.length;d>c;c++)if(i=u[c].split(":"),r=i[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o)for(o=o.split(","),s=0,l=o.length;l>s;s++)o[s]=S(o[s],a||n);return o?{value:o,tzid:a}:t}function D(n,i){var r,o,a,s,l,c,d,u,f,g={},m=0,v=!1,_=function(e,t){var n=e.day,i=t.day;return u>n&&(n+=7),u>i&&(i+=7),n-i};if(!n)return null;for(c=n.split("\n"),c[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")&&-1===n.indexOf("EXDATE")||(c=n.split(" ")),m=0,a=c.length;a>m;m++)l=c[m],-1!==l.indexOf("DTSTART")?g.start=T(l,i):-1!==l.indexOf("DTEND")?g.end=T(l,i):-1!==l.indexOf("EXDATE")?g.exdates=T(l,i):s=-1!==l.indexOf("RRULE")?l.substring(6):l;for(s=s.split(";"),m=0,a=s.length;a>m;m++)switch(d=s[m],r=d.split("="),o=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":g.freq=o[0].toLowerCase();break;case"UNTIL":g.until=S(o[0],i);break;case"COUNT":g.count=parseInt(o[0],10);break;case"INTERVAL":g.interval=parseInt(o[0],10);break;case"BYSECOND":g.seconds=h(o,{start:0,end:60}),v=!0;break;case"BYMINUTE":g.minutes=h(o,{start:0,end:59}),v=!0;break;case"BYHOUR":g.hours=h(o,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":g.monthDays=h(o,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":g.yearDays=h(o,{start:-366,end:366}),v=!0;break;case"BYMONTH":g.months=h(o,{start:1,end:12}),v=!0;break;case"BYDAY":g.weekDays=f=p(o),v=!0;break;case"BYWEEKNO":g.weeks=h(o,{start:-53,end:53}),v=!0;break;case"BYSETPOS":g.positions=h(o,{start:-366,end:366});break;case"WKST":g.weekStart=u=rt[o[0]]}return g.freq===t||g.count!==t&&g.until?null:(g.interval||(g.interval=1),u===t&&(g.weekStart=u=U.culture().calendar.firstDay),f&&(g.weekDays=f.sort(_)),g.positions&&!v&&(g.positions=null),g._hasRuleValue=v,g)}function A(e,t){for(var n,i=e.value,r=e.tzid||"",o=i.length,a=0;o>a;a++)n=i[a],n=W.convert(n,r||t||n.getTimezoneOffset(),"Etc/UTC"),i[a]=U.toString(n,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+i.join(",")+" "}function E(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.exdates||"",a=e.start||"",s=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=W.convert(l,n||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+U.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+f(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),i!==t&&(r+=";WKST="+it[i]),a&&(a="DTSTART"+A(a,n)),s&&(s="DTEND"+A(s,n)),o&&(o="EXDATE"+A(o,n)),(a||s||o)&&(r=a+s+o+"RRULE:"+r),r}var M,P,I,z,F,R,B,L,O,H,N,V,U=window.kendo,W=U.timezone,j=U.Class,G=U.ui,q=G.Widget,$=G.DropDownList,Y=U.date,K=Y.setTime,Q=Y.setDayOfWeek,X=Y.adjustDST,J=Y.firstDayOfMonth,Z=Y.getMilliseconds,et=[0,31,60,91,121,152,182,213,244,274,305,335,366],tt=[0,31,59,90,120,151,181,212,243,273,304,334,365],nt=[31,28,30,31,30,31,30,31,30,31,30,31],it={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},rt={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},ot=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],at=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],st=at.length,lt="yyyyMMddTHHmmssZ",ct={months:function(e,t,n){var i=n.months,r=u(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0]-1,1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=g(e),o=u(n.monthDays,e.getDate(),l),null===o)return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(v)[0]),X(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,n){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=m(e)?366:365,o=u(n.yearDays,i(e),l),null===o)return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(v)[0]),X(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var i,o,a,s=n.weekStart,l=!1,c=e.getHours(),d=function(e){return 0>e&&(e=53+e),e};t>e;){if(o=u(n.weeks,r(e,s),d),null===o)return l;if(l=!0,i=e.getFullYear(),o.length){a=7*o.sort(v)[0]-1,e.setFullYear(i,0,a),Q(e,s,-1),X(e,c);break}e.setFullYear(i+1,0,1)}return l},weekDays:function(e,t,n){var i,r,a=n.weekDays,s=n.weekStart,u=d(a,e,s),h=e.getHours();if(null===u)return!1;if(i=u[0],i||(i=a[0],Q(e,s)),r=i.day,i.offset)for(;t>=e&&!c(e,i,s);)o(e,s)===l(e,s)?(e.setMonth(e.getMonth()+1,1),X(e,h)):(e.setDate(e.getDate()+7),X(e,h),Q(e,s,-1));return e.getDay()!==r&&Q(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=u(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),X(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),X(e,a),a=i[0],e.setHours(a),X(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=e.getMinutes(),o=u(i,r),a=n._startTime.getHours(),s=!1;return null!==o&&(s=!0,o.length?o=o[0]:(a+=1,o=i[0]),n.seconds&&e.setSeconds(0),e.setHours(a,o),a%=24,X(e,a),n._startTime.setHours(a,o,e.getSeconds())),s},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=u(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},dt=j.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l,c=i.interval;n>=e;){for(a=o=t,l=e.getDate(),s=0;st>s;s++){if(r=at[s],i[r]){if(a=ct[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if((1===c||!this.interval(i,e))&&s===st)break}},interval:function(e,t){var i,o,a=new Date(e._startPeriod),s=new Date(t),l=t.getHours(),c=e.weekStart,d=e.interval,u=e.freq,h=!1,p=0,f=0,g=1;return"hourly"===u?(i=s.getTimezoneOffset()-a.getTimezoneOffset(),o=e._startTime.getHours(),s=s.getTime(),l!==o&&(s+=(o-l)*Y.MS_PER_HOUR),s-=a,i&&(s-=i*Y.MS_PER_MINUTE),i=Math.floor(s/Y.MS_PER_HOUR),p=n(i,d),0!==p&&(this._hour(t,e,p),h=!0)):"daily"===u?(Y.setTime(s,-a),i=Math.floor(s/Y.MS_PER_DAY),p=n(i,d),0!==p&&(this._date(t,e,p),h=!0)):"weekly"===u?(i=52*(t.getFullYear()-a.getFullYear()),p=r(t,c)-r(a,c)+i,p=n(p,d),0!==p&&(Y.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*p),X(t,l),h=!0)):"monthly"===u?(i=t.getFullYear()-a.getFullYear(),i=t.getMonth()-a.getMonth()+12*i,p=n(i,d),0!==p&&(g=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+p,g),X(t,l),h=!0)):"yearly"===u&&(i=t.getFullYear()-a.getFullYear(),p=n(i,d),e.months||(f=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(g=t.getDate()),0!==p&&(t.setFullYear(t.getFullYear()+p,f,g),X(t,l),h=!0)),h},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),X(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),X(e,i)||this._hour(e,t)}}),ut=dt.extend({next:function(e,t){dt.fn.next(e,t)||this._hour(e,t,1)
},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),ht=dt.extend({next:function(e,t){dt.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),pt=ht.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),ft=dt.extend({next:function(e,t){var n,i;if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?dt.fn.normalize(e):(n.setDate(e.day),X(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||n.setDate(t.getDate())}}),gt=ft.extend({next:function(e,t){var n,i=e.getHours();if(!dt.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),X(e,i);e.getDate()!==n;)e.setDate(n),X(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),X(e,i),this._hour(e,t)},setup:function(){}}),mt={hourly:new ut,daily:new ht,weekly:new pt,monthly:new ft,yearly:new gt},vt="click";U.recurrence={rule:{parse:D,serialize:E},expand:C,dayInYear:i,weekInYear:r,weekInMonth:o,numberOfWeeks:l,isException:y,toExceptionString:w},M=function(e){for(var t=U.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},P=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),I=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],z=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],F=[{day:0,offset:0},{day:6,offset:0}],R=q.extend({init:function(e,t){var n,i=this,r=t&&t.frequencies;q.fn.init.call(i,e,t),i.wrapper=i.element,t=i.options,t.start=n=t.start||Y.today(),r&&(t.frequencies=r),"string"==typeof n&&(t.start=U.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=U.culture().calendar.firstDay),i._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=this,n=(t._weekDay.element||t._weekDay).val(),i=+(t._weekDayOffset.element||t._weekDayOffset).val(),r=null,o=null;e||("day"===n?(r=I,o=i):"weekday"===n?(r=z,o=i):"weekend"===n?(r=F,o=i):r=[{offset:i,day:+n}]),t._value.weekDays=r,t._value.positions=o},_weekDayView:function(){var e,t,n,i,r=this,o=r._value.weekDays,a=r._value.positions,s=r._weekDayOffset;o&&(n=o.length,a&&(7===n?(t="day",e=a):5===n?(t="weekday",e=a):2===n&&(t="weekend",e=a)),t||(o=o[0],t=o.day,e=o.offset||""),i=s.value?"value":"val",s[i](e),r._weekDay[i](t))},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n._trigger()};o[0]&&(n._weekDayOffset=new $(n._container.find(".k-recur-weekday-offset"),{change:a,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],n._weekDay=new $(o,{value:n.options.start.getDay(),change:a,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),n._weekDayView())},_initWeekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a._container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(vt+a._namespace,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:+e.value,offset:0}}),a.options.mobile||a._trigger()}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,n=e._container.find(".k-recur-monthday");n[0]&&(e._monthDay=new U.ui.NumericTextBox(n,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();t.monthDays=n?[n]:n,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),n=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e._until=t.kendoDatePicker({min:r&&n>r?r:n,value:r||n,change:function(){i.until=this.value(),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}}),B=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),n._initFrequency(),n._initContainer(),n.value(n.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){var e=this;e._frequency.destroy(),e._container.find("input[type=radio],input[type=checkbox]").off(vt+e._namespace),U.destroy(e._container),R.fn.destroy.call(e)},value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},n._frequency.value(n._value.freq||""),n._initView(n._frequency.value()),t)},_initContainer:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this._container=n},_initFrequency:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");r=e.map(r,function(e){return{text:o[e],value:e}}),t=r[0],t&&"never"===t.value&&(t.value=""),n.element.append(a),n._frequency=new $(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n._initView(n._frequency.value()),n.trigger("change")}})},_initView:function(e){var n=this,i=n._value,r=n.options,o={frequency:e||"never",weekDayCheckBoxes:M,firstWeekDay:r.firstWeekDay,messages:r.messages[e],end:r.messages.end};return U.destroy(n._container),n._container.html(P(o)),e?(i.freq=e,"weekly"!==e||i.weekDays||(i.weekDays=[{day:r.start.getDay(),offset:0}]),n._initInterval(),n._initWeekDays(),n._initMonthDay(),n._initWeekDay(),n._initMonth(),n._initCount(),n._initUntil(),n._period(),n._end(),t):(n._value={},t)},_initMonth:function(){var t,n=this,i=n._value,r=i.months||[n.options.start.getMonth()+1],o=n._container.find(".k-recur-month");o[0]&&(t={change:function(){i.months=[+this.value()],n.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(U.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},n._month1=new $(o[0],t),n._month2=new $(o[1],t),r&&(r=r[0],n._month1.value(r),n._month2.value(r)))},_end:function(){var e,t=this,n=t._value,i=t._container,r=t._namespace,o=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=i.find(".k-recur-end-never").on(vt+r,o),t._buttonCount=i.find(".k-recur-end-count").on(vt+r,o),t._buttonUntil=i.find(".k-recur-end-until").on(vt+r,o),n.count?e="count":n.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,n="monthly"===t.freq,i=n?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(n?"month":"year")+"-radio",o=e._container.find(r);(n||"yearly"===t.freq)&&(o.on(vt+e._namespace,function(t){i.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=o.eq(0),e._buttonWeekDay=o.eq(1),i.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,n,i,r,o=this;"count"===e?(o._buttonCount.prop("checked",!0),i=!0,r=!1,t=o._count.value(),n=null):"until"===e?(o._buttonUntil.prop("checked",!0),i=!1,r=!0,t=null,n=o._until.value()):(o._buttonNever.prop("checked",!0),i=r=!1,t=n=null),o._count.enable(i),o._until.enable(r),o._value.count=t,o._value.until=n},_toggleMonthDay:function(e){var t,n=this,i=!1,r=!0,o=!1;"monthday"===e?(n._buttonMonthDay.prop("checked",!0),t=[n._monthDay.value()],i=!0,r=!1,o=!0):(n._buttonWeekDay.prop("checked",!0),t=null),n._weekDay.enable(r),n._weekDayOffset.enable(r),n._monthDay.enable(i),n._value.monthDays=t,n._weekDayRule(o)},_toggleYear:function(e){var t,n=this,i=!1,r=!0;"monthday"===e?(i=!0,r=!1,t=n._month1.value()):t=n._month2.value(),n._month1.enable(i),n._month2.enable(r),n._value.months=[t],n._toggleMonthDay(e)}}),G.plugin(B),L=U.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),O=U.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),H=U.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),N=U.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),V=R.extend({init:function(e,t){var n=this;R.fn.init.call(n,e,t),t=n.options,n._optionTemplate=U.template('<option value="#:value#">#:text#</option>'),n.value(t.value),n._pane=t.pane,n._initRepeatButton(),n._initRepeatEnd(),n._defaultValue=n._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?E(n._value,i):"":(n._value=D(e,i)||{},t)},destroy:function(){this._destroyView(),U.destroy(this._endFields),this._repeatButton.off(vt+this._namespace),R.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,n=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+n+"</a>").on(vt+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,n=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),i=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on(vt+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(n);t._endFields=n.add(i).toggleClass("k-state-disabled",!t._value.freq),t._endButton=i.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,n=t.never;return e.count?n=U.format("{0} {1}",t.after,e.count):e.until&&(n=U.format("{0} {1:d}",t.on,e.until)),n},_initFrequency:function(){var t=this,n=t.options.messages.frequencies,i=N({dataSource:e.map(this.options.frequencies,function(e){return{text:n[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:U.ns});t._view.element.find(".k-recur-pattern").append(i).on(vt+t._namespace,".k-scheduler-navigation li",function(n){var i=e(this);n.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:i.children("a").attr(U.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t,n=this,i=n.options.messages.end.patterns,r=n._value,o="";r.count?o="count":r.until&&(o="until"),t=N({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:o,ns:U.ns}),n._view.element.find(".k-recur-pattern").append(t).on(vt+n._namespace,".k-scheduler-navigation li",function(t){var i=e(this),o=null,a=null;t.preventDefault(),i.addClass("k-state-selected").siblings().removeClass("k-state-selected"),n._initEndView(i.children("a").attr(U.attr("value"))),n._count?(o=n._count.value(),a=null):n._until&&(o=null,a=n._until.val?U.parseDate(n._until.val(),"yyyy-MM-dd"):n._until.value()),r.count=o,r.until=a})},_createView:function(t){var n=this,i=n.options,r=i.messages,o=r["repeat"===t?"repeatTitle":"endTitle"],a='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+r.cancel+"</a>"+r.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+r.update+"</a></div>",s=n._pane.view().id;n._view=n._pane.append(a+L({headerTitle:o})),n._view.element.on(vt+n._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(n.trigger("change"),n._defaultValue=e.extend({},n._value)):n._value=n._defaultValue;var i=n._value.freq;n._endButton.text(n._endText()),n._endFields.toggleClass("k-state-disabled",!i),n._repeatButton.text(r.frequencies[i||"never"]),n._pane.one("viewShow",function(){n._destroyView()}),n._pane.navigate(s,n.options.animations.right)}),n._container=n._view.element.find(".k-recur-view"),"repeat"===t?(n._initFrequency(),n._initRepeatView()):(n._initEndNavigation(),n._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this,n=e._value.freq||"never",i={frequency:n,weekDayCheckBoxes:M,firstWeekDay:e.options.firstWeekDay,messages:e.options.messages[n]},r=O(i),o=e._container,a=e._value;return U.destroy(o),o.html(r),r?("weekly"!==n||a.weekDays||(a.weekDays=[{day:e.options.start.getDay(),offset:0}]),e._initInterval(),e._initMonthDay(),e._initWeekDays(),e._initWeekDay(),e._initMonth(),e._period(),t):(e._value={},t)},_initEndView:function(e){var n,i=this,r=i._value;e===t&&(r.count?e="count":r.until&&(e="until")),n={endPattern:e,messages:i.options.messages.end},U.destroy(i._container),i._container.html(H(n)),i._initCount(),i._initUntil()},_initWeekDay:function(){var t,n=this,i=n.options.messages.weekdays,r=n.options.messages.offsetPositions,o=n._container.find(".k-recur-weekday"),a=function(){n._weekDayRule(),n.trigger("change")};o[0]&&(n._weekDayOffset=n._container.find(".k-recur-weekday-offset").html(n._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(a),t=[{text:i.day,value:"day"},{text:i.weekday,value:"weekday"},{text:i.weekend,value:"weekend"}],t=t.concat(e.map(U.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),n._weekDay=o.html(n._options(t)).change(a).val(n.options.start.getDay()),n._weekDayView())},_initMonth:function(){var t,n=this,i=n._value,r=n.options.start,o=i.months||[r.getMonth()+1],a=n._container.find(".k-recur-month"),s=U.culture().calendar.months.names;a[0]&&(t=e.map(s,function(e,t){return{text:e,value:t+1}}),a.html(n._options(t)).change(function(){i.months=[+this.value]}),n._monthSelect=a,o&&a.val(o[0]))},_period:function(){var t,n,i,r=this,o=r._value,a=r._container,s=r.options.messages[o.freq],l=a.find(".k-repeat-rule"),c=a.find(".k-weekday-view"),d=a.find(".k-monthday-view");l[0]&&(t=o.weekDays?"weekday":"monthday",n=N({value:t,dataSource:[{text:s.dayOfMonth,value:"monthday"},{text:s.dayOfWeek,value:"weekday"}],ns:U.ns}),i=function(e){var t=r._weekDay.val(),n=r._weekDayOffset.val(),i=r._monthDay.value(),a=r._monthSelect?r._monthSelect.val():null;"monthday"===e?(o.weekDays=null,o.monthDays=i?[i]:i,o.months=a?[+a]:a,c.hide(),d.show()):(o.monthDays=null,o.months=a?[+a]:a,o.weekDays=[{offset:+n,day:+t}],c.show(),d.hide())},l.append(n).on(vt+r._namespace,".k-scheduler-navigation li",function(t){var n,r=e(this).addClass("k-state-selected");t.preventDefault(),r.siblings().removeClass("k-state-selected"),n=r.children("a").attr(U.attr("value")),i(n)}),i(t))},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until,o=r&&n>r?r:n;e._until=U.support.input.date?t.attr("min",U.toString(o,"yyyy-MM-dd")).val(U.toString(r||n,"yyyy-MM-dd")).on("change",function(){i.until=U.parseDate(this.value,"yyyy-MM-dd")}):t.kendoDatePicker({min:o,value:r||n,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var n=0,i="",r=e.length,o=this._optionTemplate;for(t&&(i+=o({value:"",text:t}));r>n;n++)i+=o(e[n]);return i}}),G.plugin(V)}(window.kendo.jQuery),function(e,t){function n(e){var t=new Date(1980,1,1,0,0,0);return l(t,p(e)),t}function i(e,t,n){return e>=t&&n>=e}function r(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function o(e){var t,n=0;if(e.columns){for(t=0;e.columns.length>t;t++)n+=o(e.columns[t]);return e.colspan=n,n}return e.colspan=1,1}var a=window.kendo,s=a.ui,l=a.date.setTime,c=s.SchedulerView,d=e.extend,u=e.proxy,h=a.date.getDate,p=a.date.getMilliseconds,f=a.date.MS_PER_DAY,g=a.date.MS_PER_MINUTE,m=".kendoTimelineView",v=a.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),_=a.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',w=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._workDays=r(n.options),n._templates(),n._editable(),n.calculateDateRange(),n._groups(),n._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t,n,i,r,o,s,l,c,d,u,h,p=new Date,f=this.options;if(this.datesHeader.find(".k-current-time").remove(),this._isInDateSlot({start:p,end:p}))for(f.currentTimeMarker.useLocalTimezone===!1&&(t=f.dataSource.options.schema.timezone,f.dataSource&&t&&(n=a.timezone.offset(p,t),p=a.timezone.convert(p,p.getTimezoneOffset(),n))),i=f.group&&"vertical"!=f.group.orientation?this.groups.length:1,r=0;i>r;r++){if(o=this.groups[r],s=a.date.toUtcTime(p),l=o.timeSlotRanges(s,s+1),0===l.length)return;c=l[0].collection,d=c.slotByStartDate(p),d&&(u=e("<div class='k-current-time'></div>"),h=this.datesHeader,u.appendTo(h.find(".k-scheduler-header-wrap")).css({left:Math.round(l[0].innerRect(p,new Date(p.getTime()+1),!1).left),width:"1px",bottom:"1px",top:0}))}},_currentTime:function(){var e,n=this,i=n.options.currentTimeMarker;i!==!1&&i.updateInterval!==t&&(e=i.updateInterval,n._currentTimeMarkerUpdater(),n._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,n),e))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+m,".k-scheduler-content td",function(e){var n,i=t._slotByPosition(e.pageX,e.pageY);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+m,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t.options.editable.create!==!1&&(t._addUserEvents=new a.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(e){var n,i=t._slotByPosition(e.x.location,e.y.location);i&&(n=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},n)})),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new a.UserEvents(t.element,{filter:".k-event",tap:function(n){var i=e(n.target).closest(".k-event");i.hasClass("k-event-active")||t.trigger("edit",{uid:i.attr(a.attr("uid"))}),n.preventDefault()}}))},_slotByPosition:function(e,t){var n,i,r,o,s=this.content,l=s.offset();for(e-=l.left,t-=l.top,this._isRtl?(o=a.support.browser,o.mozilla?(e+=s[0].scrollWidth-s[0].offsetWidth,e+=s[0].scrollLeft):o.msie?(e-=s.scrollLeft(),e+=s[0].scrollWidth-this.content[0].offsetWidth):o.webkit&&(e+=s[0].scrollLeft)):e+=s[0].scrollLeft,t+=s[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),r=0;this.groups.length>r;r++)if(i=this.groups[r],n=i.timeSlotByPosition(e,t))return n;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",date:a.date.today(),startTime:a.date.today(),endTime:a.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:v,dateHeaderTemplate:_,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_render:function(e){var t=this;e=e||[],t._dates=e,t._startDate=e[0],t._endDate=e[e.length-1||0],t._calculateSlotRanges(),t.createLayout(t._layout(e)),t._content(e),t._footer(),t._setContentWidth(),t.refreshLayout(),this.timesHeader.find("table tr:last").hide(),this.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content,t=e.width(),n=this.content.find("table"),i=n.find("tr:first").children().length,r=100,o=i*this.options.columnWidth;o>t&&(r=Math.ceil(o/t*100)),n.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e,t,n,i,r=this._dates,o=this.startTime(),s=this.endTime();for(p(s)===p(a.date.getDate(s))&&(s=a.date.getDate(s),l(s,f-1)),s=p(s),o=p(o),e=[],t=0;r.length>t;t++)n=h(r[t]),l(n,o),i=h(r[t]),l(i,s),e.push({start:a.date.toUtcTime(n),end:a.date.toUtcTime(i)});this._slotRanges=e},_forTimeRange:function(e,t,i,r){var o,a,s,c,d,u,h,m,v,_,y,w,b,k,x,C,S,T;for(e=n(e),t=n(t),o=this,a=p(e),s=p(t),c=o.options.minorTickCount,d=o.options.majorTick*g,u=d/c||1,h=new Date(+e),m=h.getDate(),_=0,w="",y=f/u,a!=s&&(a>s&&(s+=f),y=(s-a)/u),y=Math.round(y);y>_;_++)b=_%(d/u),k=0===b,x=c-1>b,C=b===c-1,S=c,y%c!==0&&(T=c>y-(_+1),k&&T&&(S=y%c)),w+=i(h,k,x,C,S),l(h,u,!1);return s&&(v=p(h),m<h.getDate()&&(v+=f),v>s&&(h=new Date(+t))),r&&(w+=r(h)),w},_layout:function(e){var t,n,i,r=[],s=[],l=this,c=[{text:l.options.messages.defaultRowText}],d=[];for(t=0;l.options.minorTickCount>t;t++)d.push({text:"",className:""});for(this._forTimeRange(l.startTime(),l.endTime(),function(e,t,n,i,a){var s,c=l.majorTimeHeaderTemplate;t&&(s={text:c({date:e}),className:i?"k-slot-cell":"",columns:d.slice(0,a)},o(s),r.push(s))}),n=0;e.length>n;n++)s.push({text:a.format("{0:m}",e[n]),className:"k-slot-cell",columns:r.slice(0)});return i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?c=l._createRowsLayout(i,null,this.groupHeaderTemplate):s=l._createColumnsLayout(i,s,this.groupHeaderTemplate)),{columns:s,rows:c}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.showWorkHours?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.showWorkHours})}))},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t,n=e.getDay(),i=this._workDays;for(t=0;i.length>t;t++)if(i[t]===n)return!0;return!1},_content:function(e){var t,n,i,r,o,s=this,l=s.options,c=s.startTime(),d=this.endTime(),u=1,h=1,p=e.length,f="",g=this.groupedResources,m=this.slotTemplate,v=!1;for(g.length&&(v="vertical"===s._groupOrientation(),v?h=s._groupCount():u=s._groupCount()),f+="<tbody>",t=function(t){var o,c="",d="",u=function(e){return function(){return s._resourceBySlot({groupIndex:e})}};return a.date.isToday(e[r])&&(d+="k-today"),(a.date.getMilliseconds(t)<a.date.getMilliseconds(l.workDayStart)||a.date.getMilliseconds(t)>=a.date.getMilliseconds(l.workDayEnd)||!s._isWorkDay(e[r]))&&(d+=" k-nonwork-hour"),c+="<td"+(""!==d?' class="'+d+'"':"")+">",o=a.date.getDate(e[r]),a.date.setTime(o,a.date.getMilliseconds(t)),c+=m({date:o,resources:u(v?n:i)}),c+="</td>"},n=0;h>n;n++){for(f+="<tr>",i=0;u>i;i++)for(r=0,o=p;o>r;r++)f+=this._forTimeRange(c,d,t);f+="</tr>"}f+="</tbody>",this.content.find("table").append(f)},_groups:function(){var e,t,n,i,r=this._groupCount(),o=this._dates,s=o.length;for(this.groups=[],e=0;r>e;e++)t=this._addResourceView(e),n=o[0],i=o[o.length-1||0],t.addTimeSlotCollection(n,a.date.addDays(i,1));
this._timeSlotGroups(r,s)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,c,d,u,h,f,g,m,v,_,y,w,b=this._timeSlotInterval(),k=this._isVerticallyGrouped(),x=this.content.find("tr"),C=x.length;for(x.attr("role","row"),k&&(C=Math.floor(C/e)),n=0;e>n;n++)for(i=0,r=this.groups[n],k&&(i=n),a=i*C,s=0,k||(s=n),l=x[a].children,c=l.length/(k?1:e),d=c/t,u=0;t>u;u++)for(h=u*d+c*s,o=p(new Date(+this.startTime())),f=0;d>f;f++)g=l[f+h],m=r.getTimeSlotCollection(0),v=this._dates[u],_=Date.UTC(v.getFullYear(),v.getMonth(),v.getDate()),y=_+o,w=y+b,g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),m.addTimeSlot(g,y,w,!0),o+=b},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*g},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(t){var n,r,o,s,l,c;for(this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray(),n=[],this._eventsByResource(t,this.groupedResources,n),r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(n,function(n){return e.grep(n,function(e){return i(t,h(e.start),h(e.end))}).length}))}),o=[],s=0,l=0;n.length>l;l++)c={groupIndex:l,maxRowCount:0,events:{}},o.push(c),this._renderEvents(n[l],l,c),c.maxRowCount>s&&(s=c.maxRowCount);this._setRowsHeight(o,n.length,s),this._positionEvents(o,n.length),this.trigger("activate")},_positionEvents:function(e,t){var n,i,r,o;for(n=0;t>n;n++){i=e[n].events;for(r in i)o=i[r],this._positionEvent(o)}},_setRowsHeight:function(e,t,n){var i,r,o,s,l,c=this.options.eventHeight+2,d=this._getBottomRowOffset();for(t=this._isVerticallyGrouped()?t:1,i=0;t>i;i++)r=this._isVerticallyGrouped()?e[i].maxRowCount:n,r=r?r:1,o=(c+2)*r+d,s=this.times.find(a.format("tr:nth-child({0})",i+1)),l=this.content.find(a.format("tr:nth-child({0})",i+1)),s.height(o),l.height(o);this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,n=.5*this.options.eventHeight,i=this._isMobile();return i?(e=30,t=60):(e=15,t=30),n>t?n=t:e>n&&(n=e),n},_positionEvent:function(e){var t,n,i=this.options.eventHeight+2,r=e.slotRange.innerRect(e.start,e.end,!1);r.top=e.slotRange.start.offsetTop,t=r.right-r.left-2,0>t&&(t=0),n=r.left,this._isRtl&&(n-=this.content[0].scrollWidth-this.content[0].offsetWidth),e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(i+2)+"px",left:n,width:t})},_refreshSlots:function(){for(var e=0;this.groups.length>e;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,n){var i,r,o,s,l=t[0];if(l)for(i=l.dataSource.view(),r=0;i.length>r;r++)o=this._resourceValue(l,i[r]),s=new a.data.Query(e).filter({field:l.field,operator:c.groupEqFilter(o)}).toArray(),t.length>1?this._eventsByResource(s,t.slice(1),n):n.push(s);else n.push(e)},_isInDateSlot:function(e){var t=e.start,n=e.end,i=h(this._startDate),r=a.date.addDays(h(this._endDate),1);return r>t&&n>=i?!0:!1},_isInTimeSlot:function(e){var t,n=e.startTime||a.date.toUtcTime(e.start),i=e.endTime||a.date.toUtcTime(e.end),r=this._slotRanges;for(n===i&&(i+=1),t=0;r.length>t;t++)if(r[t].end>n&&i>r[t].start)return!0;return!1},_adjustEvent:function(e){var t,n=e.start,i=e.end,r=e._time("start"),o=e._time("end"),s=p(this.startTime()),c=p(this.endTime()),d=null,u=null,g=!1,m=!1;return e.isAllDay?(d=h(n),s>r&&(l(d,s),m=!0),u=h(i),c===p(h(this.endTime()))?u=a.date.addDays(u,1):(l(u,c),g=!0)):(c=0===c?f:c,s>r?(d=h(n),l(d,s),m=!0):r>c&&(d=h(n),d=a.date.addDays(d,1),l(d,s),m=!0),o>c?(u=h(i),l(u,c),g=!0):s>o&&(u=h(i),u=a.date.addDays(u,-1),l(u,c),g=!0)),t=e.clone({start:d?d:n,end:u?u:i,startTime:d?a.date.toUtcTime(d):e.startTime,endTime:u?a.date.toUtcTime(u):e.endTime,isAllDay:!1}),{occurrence:t,head:g,tail:m}},_renderEvents:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p;for(r=0,o=e.length;o>r;r++)i=e[r],this._isInDateSlot(i)&&(a=i.isAllDay||i.end.getTime()-i.start.getTime()>=f,s=this.content,(a||this._isInTimeSlot(i))&&(l=this._adjustEvent(i),c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(l.occurrence,!1),u=d[0],this._isInTimeSlot(l.occurrence)&&(h=this._createEventElement(l.occurrence,i,u.head||l.head,u.tail||l.tail),h.appendTo(s).css({top:0,height:this.options.eventHeight}),p={start:l.occurrence.startTime||l.occurrence.start,end:l.occurrence.endTime||l.occurrence.end,element:h,uid:i.uid,slotRange:u,rowIndex:0,offsetTop:0},n.events[i.uid]=p,this.addContinuousEvent(c,u,h,i.isAllDay),this._arrangeRows(p,u,n))))},addContinuousEvent:function(e,t,n,i){var r=e._continuousEvents;r.push({element:n,isAllDay:i,uid:n.attr(a.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,n,i,r){var o,s,l=this.eventTemplate,c=this.options.editable,u=this._isMobile(),h=c&&c.destroy!==!1&&!u,p=c&&c.resize!==!1,f=n._time("start"),g=n._time("end"),m=n.start,v=n.end,_=this.eventResources(n);return n.startTime&&(m=new Date(f),m=a.timezone.apply(m,"Etc/UTC")),n.endTime&&(v=new Date(g),v=a.timezone.apply(v,"Etc/UTC")),o=d({},{ns:a.ns,resizable:p,showDelete:h,head:i,tail:r,singleDay:1==this._dates.length,resources:_,inverseColor:_&&_[0]?this._shouldInverseResourceColor(_[0]):!1},n,{start:m,end:v}),s=e(l(o)),this.angular("compile",function(){return{elements:s,data:[{dataItem:o}]}}),s},_arrangeRows:function(e,t,n){var i,r,o,a,s,l,d=t.start.index,u=t.end.index,h=c.collidingEvents(t.events(),d,u);for(t.addEvent({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),h.push({slotIndex:d,start:d,end:u,element:e.element,uid:e.uid}),i=c.createRows(h),i.length>n.maxRowCount&&(n.maxRowCount=i.length),r=0,o=i.length;o>r;r++)for(a=i[r].events,s=0,l=a.length;l>s;s++)n.events[a[s].uid].rowIndex=r},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){var t=this._adjustEvent(e.clone());return t.occurrence},_updateEventForMove:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,n){var i,r,o,a,s,l,c,d,u,h,p,f=this.groups[t],g=e.clone({start:e.start,end:e.end}),m=g.duration();for(g.start=new Date(g.start.getTime()+n),g.end=new Date(+g.start+m),i=this._adjustEvent(g),r=f.slotRanges(i.occurrence,!1),this._removeMoveHint(),o=0;r.length>o;o++)a=r[o],s=a.start,l=this._createEventElement(i.occurrence,i.occurrence,!1,!1),l.addClass("k-event-drag-hint"),c=a.innerRect(i.occurrence.start,i.occurrence.end,this.options.snap),d=c.right-c.left-2,0>d&&(d=0),u=c.left,this._isRtl&&(u-=this.content[0].scrollWidth-this.content[0].offsetWidth),h={left:u,top:s.offsetTop,height:s.offsetHeight-2,width:d},l.css(h),this._moveHint=this._moveHint.add(l);p=this.content,this._moveHint.appendTo(p)},_updateResizeHint:function(e,t,n,i){var r,o,s,l,d,u,h,p,f,g,m,v=this.groups[t],_=v.ranges(n,i,!1,!1);for(this._removeResizeHint(),r=0;_.length>r;r++)o=_[r],s=o.startSlot(),l=o.innerRect(n,i,!1),l.top=s.offsetTop,d=l.right-l.left,u=s.offsetHeight,h=l.left,p=this.content,this._isRtl&&(h-=p[0].scrollWidth-p[0].offsetWidth),f=c.fn._createResizeHint.call(this,h,l.top,d,u),this._resizeHint=this._resizeHint.add(f);g="t",m=this.content,this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(n),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),g))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,n,i,r){var o=t[0].start,a=t[t.length-1].end;n&&!r&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.last())},nextGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?o:(i=r._collection(0,n),i.first())},_verticalSlots:function(e,t,n,i){var r=i?"leftSlot":"rightSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isVerticallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_horizontalSlots:function(e,t,n,i){var r=i?"upSlot":"downSlot",o=t[0].start,a=t[t.length-1].end,s=this.groups[e.groupIndex];return o=s[r](o),a=s[r](a),n||!this._isHorizontallyGrouped()||o&&a||(o=a=this._changeGroup(e,i)),{startSlot:o,endSlot:a}},_changeViewPeriod:function(e,t){var n,i=t?this.previousDate():this.nextDate(),r=e.start,o=e.end;return e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0),n=o-r,t?(o=p(this.endTime()),o=0===o?f:o,l(e.start,o-n),l(e.end,o)):(r=p(this.startTime()),l(e.start,r),l(e.end,r+n)),e.events=[],!0},move:function(e,t,n){var i,r,o,s,l,c=!1,d=this.groups[e.groupIndex],u=a.keys,h=d.ranges(e.start,e.end,!1,!1);if(t===u.DOWN||t===u.UP)c=!0,o=t===u.UP,this._updateDirection(e,h,n,o,!0),s=this._verticalSlots(e,h,n,o);else if(!(t!==u.LEFT&&t!==u.RIGHT||(c=!0,o=t===u.LEFT,this._updateDirection(e,h,n,o,!1),s=this._horizontalSlots(e,h,n,o),s.startSlot&&s.endSlot||n||!this._changeViewPeriod(e,o,!1))))return c;return c&&(i=s.startSlot,r=s.endSlot,n?(l=e.backward,l&&i?e.start=i.startDate():!l&&r&&(e.end=r.endDate())):i&&r&&(e.start=i.startDate(),e.end=r.endDate()),e.events=[]),c},destroy:function(){var e=this;e.element&&e.element.off(m),e.footer&&e.footer.remove(),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),c.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())}});d(!0,s,{TimelineView:w,TimelineWeekView:w.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=a.date.nextDay(i);this._render(r)}}),TimelineWorkWeekView:w.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return a.date.dayOfWeek(a.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=a.date.dayOfWeek(e,this.options.workWeekStart,-1),n=a.date.dayOfWeek(t,this.options.workWeekEnd,1),i=[];n>=t;)i.push(t),t=a.date.nextDay(t);this._render(i)}}),TimelineMonthView:w.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,0,0,0),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineWeek",calculateDateRange:function(){var e,t,n=this.options.date,i=a.date.firstDayOfMonth(n),r=a.date.lastDayOfMonth(n),o=[];for(e=0,t=r.getDate();t>e;e++)o.push(i),i=a.date.nextDay(i);this._render(o)}})})}(window.kendo.jQuery),function(e,t){function n(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function i(e,t){var n=t.timezone;n&&(e[A.attr("timezone")]=n)}function r(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare,n&&U(n)&&n.message&&(e[A.attr("dateCompare-msg")]=n.message))}function o(e,t){return function(n){return n=e(n),s(n,"apply",t),n||[]}}function a(e,t){return function(n){return n&&("[object Array]"===G.call(n)||n instanceof A.data.ObservableArray||(n=[n])),s(n,"remove",t,!0),n=e(n),n||[]}}function s(e,t,n,i){var r,o,a;for(e=e||[],o=0,a=e.length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=A.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=A.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=A.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=A.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=A.timezone[t](r.start,n),r.end=A.timezone[t](r.end,n)),i&&delete r.uid;return e}function l(e,t){for(var n,i=e.length,r=0;i>r;r++)if(n=e[r],n.uid===t)return n}function c(e,t,n){return e=n?A.timezone.convert(e,t,n):A.timezone.remove(e,t)}function d(e){var t,n,i,r,o,a,s,l,d,u,h,p;return e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i[0]&&n[0]&&(a=A.widgetInstance(n,A.ui),s=A.widgetInstance(i,A.ui),l=t.data("kendoEditable"),d=l?l.options.model:null,a&&s?(r=a.value(),o=s.value()):(r=A.parseDate(n.val()),o=A.parseDate(i.val())),r&&o))?(d&&(u=n.attr(A.attr("timezone")),h=d.startTimezone,p=d.endTimezone,h=h||p,p=p||h,h&&(r=c(r,h,u),o=c(o,p,u))),o>=r):!0}function u(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}function h(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function p(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function f(t){return function(n){e(A.format('<select data-{0}bind="value:{1}">',A.ns,t.field)).appendTo(n).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:A.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function g(t){return function(n){var i,r,o="",a=t.dataSource.view();for(i=0,r=a.length;r>i;i++)o+=A.format('<option value="{0}">{1}</option>',A.getter(t.dataValueField)(a[i]),A.getter(t.dataTextField)(a[i]));e(A.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',A.ns,t.field,o,t.valuePrimitive)).appendTo(n)}}function m(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return A.date.setTime(r,t),n=new Date(r.getTime()),A.date.setTime(n,i,!0),{start:r,end:n}}var v,_,y,w,b,k,x,C,S,T,D,A=window.kendo,E=A.date,M=A.support.input,P=E.MS_PER_DAY,I=E.getDate,z=A.date.getMilliseconds,F=A.recurrence,R=A.keys,B=A.ui,L=B.Widget,O="string",H=B.Popup,N=B.Calendar,V=A.data.DataSource,U=e.isPlainObject,W=e.extend,j=e.proxy,G=Object.prototype.toString,q=e.isArray,$=".kendoScheduler",Y="click",K="change",Q="cancel",X="remove",J="save",Z="add",et="edit",tt=/(?:value:start|value:end)(?:,|$)/,nt=I(new Date),it="recurrenceException",rt="Are you sure you want to delete this event?",ot="Do you want to delete only this event occurrence or the whole series?",at="Do you want to edit only this event occurrence or the whole series?",st='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',lt=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),ct=A.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul><ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),dt=function(t,n){var o={name:n.field},a=M.date?"":A.attr("role")+'="datepicker" ',s=A.attr("role")+'="datetimepicker" ',l=n.model.isAllDay,c=A.attr("validate")+"='"+!l+"'",d=A.attr("validate")+"='"+l+"'";i(o,n),r(o,n),e('<input type="datetime-local" required '+A.attr("type")+'="date" '+s+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+c+"/>").attr(o).appendTo(t),e('<input type="date" required '+A.attr("type")+'="date" '+a+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+d+"/>").attr(o).appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ut=function(t,n){var o={name:n.field},a=n.model.isAllDay,s=A.attr("validate")+"='"+!a+"' ",l=A.attr("validate")+"='"+a+"' ";i(o,n),r(o,n),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datetimepicker" '+A.attr("bind")+'="value:'+n.field+',invisible:isAllDay" '+s+"/>").attr(o).appendTo(t),e('<input type="text" required '+A.attr("type")+'="date" '+A.attr("role")+'="datepicker" '+A.attr("bind")+'="value:'+n.field+',visible:isAllDay" '+l+"/>").attr(o).appendTo(t),e("<span "+A.attr("bind")+'="text: '+n.field+'Timezone"></span>').appendTo(t),"end"===n.field&&e("<span "+A.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+A.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ht=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},pt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoMobileRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages,pane:n.pane,value:n.model[n.field]})},ft=function(t,i){var r=n(i.model,i.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(i.click).appendTo(t)},gt=function(t,n){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+n.messages.timezoneEditorButton+"</a>").click(n.click).appendTo(t)},mt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:n.noTimezone})},vt=function(t,n){e("<div "+A.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor({optionLabel:n.noTimezone})},_t=A.Class.extend({init:function(t,n){var i=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=i,this.data=o(e.proxy(this.data,this),i),this.serialize=a(e.proxy(this.serialize,this),i)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),yt=A.data.Model.define({init:function(e){var t=this;A.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],n=e+"Time";return this[n]?this[n]-A.date.toUtcTime(A.date.getDate(t)):z(t)},_date:function(e){var t=e+"Time";return this[t]?this[t]-this._time(e):A.date.getDate(this[e])},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*A.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,n){return F?F.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this.startTime&&this.set("startTime",A.date.toUtcTime(this.start)),this.endTime&&this.set("endTime",A.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=A.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=A.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e.startTime,delete e.endTime,e},shouldSerialize:function(e){return A.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;A.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=A.date.getDate(this.start),i=new Date(this.end),r=A.date.getMilliseconds(i),0===r&&t&&(r=P),this.set("start",n),t===!0?(A.date.setTime(i,-r),n>i&&(i=n)):A.date.setTime(i,P-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:d,message:"End date should be greater than or equal to the start date"}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),wt=V.extend({init:function(e){V.fn.init.call(this,W(!0,{},{schema:{modelBase:yt,model:yt}},e)),this.reader=new _t(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(t=new Date(t.getTime()+P-1),i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+P-1)},{field:"end",operator:"gte",value:e}]}]},n=new A.data.Query(u(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),V.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof yt)){var n=t;t=this._createNewModel(),t.accept(n)}return(t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),V.fn.insert.call(this,e,t)}},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),V.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&V.fn.remove.call(this,n),n=t.shift();e.set(it,"")},_removeExceptionDate:function(e){var t,n;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(n=e.start,t.set(it,t.recurrenceException.replace(F.toExceptionString(n,this.reader.timezone),""))))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";F.isException(r,t,n)||i.set(it,r+F.toExceptionString(t,n))}});wt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof wt)&&t instanceof A.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof wt?t:new wt(t)},W(!0,A.data,{SchedulerDataSource:wt,SchedulerDataReader:_t,SchedulerEvent:yt}),v={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},_={mobile:{dateRange:dt,timezonePopUp:ft,timezone:mt,recurrence:pt,description:'<textarea name="description" class="k-textbox"/>',multipleResources:g,resources:p},desktop:{dateRange:ut,timezonePopUp:gt,timezone:vt,recurrence:ht,description:'<textarea name="description" class="k-textbox"/>',multipleResources:f,resources:p}},y=A.Observable.extend({init:function(e,t){A.Observable.fn.init.call(this),this.element=e,this.options=W(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=j(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var n,i,r,o=this.container,a=this.editable.options.model.isAllDay,s=A.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){n=e(this),tt.test(n.attr(s))&&(i=n.is("["+A.attr("role")+"=datetimepicker],[type*=datetime]"),r=a!==i,n.attr(A.attr("validate"),r))})}},fields:function(e,t){var n,i,r=this,o=r.options.messages,a=r.options.timezone,s=function(e){e.preventDefault(),r._initTimezoneEditor(t,this)},l=[{field:"title",title:o.editor.title},{field:"start",title:o.editor.start,editor:e.dateRange,timezone:a},{field:"end",title:o.editor.end,editor:e.dateRange,timezone:a},{field:"isAllDay",title:o.editor.allDayEvent}];A.timezone.windows_zones&&(l.push({field:"timezone",title:o.editor.timezone,editor:e.timezonePopUp,click:s,messages:o.editor,model:t}),l.push({field:"startTimezone",title:o.editor.startTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone}),l.push({field:"endTimezone",title:o.editor.endTimezone,editor:e.timezone,noTimezone:o.editor.noTimezone})),t.recurrenceId||l.push({field:"recurrenceRule",title:o.editor.repeat,editor:e.recurrence,timezone:a,messages:o.recurrenceEditor,pane:this.pane}),"description"in t&&l.push({field:"description",title:o.editor.description,editor:e.description});for(n=0;this.options.resources.length>n;n++)i=this.options.resources[n],l.push({field:i.field,title:i.title,editor:i.multiple?e.multipleResources(i):e.resources(i)});return l},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.messages,l=W({},A.Template,this.options.templateSettings),c=l.paramName,d=this.options.editable.template,u="";if(d)typeof d===O&&(d=window.unescape(d)),u+=A.template(d,l)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],"startTimezone"===o.field&&(u+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',u+='<div class="k-edit-form-container">',u+='<div class="k-edit-label"></div>',u+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),u+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(n.push(o),u+="<div "+A.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(a="#:",o.field?(o=A.expr(o.field,c),a+=o+"==null?'':"+o):a+="''",a+="#",a=A.template(a,l),u+='<div class="k-edit-field">'+a(e)+"</div>"),"endTimezone"===o.field&&(u+=this._createEndTimezoneButton());return u},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),w=y.extend({init:function(){y.fn.init.apply(this,arguments),this.pane=A.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=A.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var i,r=this,o=r.pane,a=r.options.messages,s=r.timezoneView,l=r.container.find(".k-scheduler-timezones"),c=l.find(".k-timezone-toggle"),d=l.find(".k-edit-label:last").add(l.find(".k-edit-field:last")),u=function(e){if("startTimezone"===e.field){var n=t.startTimezone;c.prop("disabled",!n),n||(d.hide(),t.set("endTimezone",""),c.prop("checked",!1))}};r._startTimezone=t.startTimezone||"",r._endTimezone=t.endTimezone||"",s||(i='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a.cancel+"</a>"+a.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+a.save+"</a></div></div>",this.timezoneView=s=o.append(i),s.contentElement().append(l.show()),s.element.on(Y+$,".k-scheduler-cancel, .k-scheduler-update",function(i){var s,l;i.preventDefault(),i.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&r._revertTimezones(t),t.unbind("change",u),s=o.element.find("#edit").data("kendoMobileView"),l=n(t,a.editor.noTimezone),s.contentElement().find(".k-timezone-button").text(l),o.navigate(s,r.options.animations.right)}),c.click(function(){d.toggle(c.prop("checked")),t.set("endTimezone","")}),t.bind("change",u)),c.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?d.show():d.hide(),o.navigate(s,r.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var n,i,r="",o='<ul><li class="km-actionsheet-title">'+t.title+"</li>",a=this.element.find(".k-event["+A.attr("uid")+"='"+t.model.uid+"']");for(this.container&&(a=this.container.find(".k-scheduler-delete"),a[0]&&(r="phone")),n=0;t.buttons.length>n;n++)o+=this._createActionSheetButton(t.buttons[n]);
o+="</ul>",i=e(o).appendTo(this.pane.view().element).kendoMobileActionSheet({type:r,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(n){var r=i.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(n.currentTarget));r>-1&&(i.close(),t.buttons[r].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet"),i.open(a)},editEvent:function(t){var n,i,r,o,a,s=this.pane,l="",c=this.options.messages,d=c.save,u=c.destroy,h=c.cancel,p=c.editor.editorTitle;return l+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+A.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+h+"</a>"+p+'<a href="#" class="k-button k-scheduler-update">'+d+"</a></div>",n=this.fields(_.mobile,t),i=this,r=[],l+=this._buildEditTemplate(t,n,r),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&(l+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+u+"</a></div>"),l+="</div>",o=s.append(l),a=this.container=o.element,this.editable=a.kendoEditable({fields:r,model:t,clearContainer:!1,target:i.options.target,validateOnBlur:!0}).data("kendoEditable"),a.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:a,model:t})?this.trigger("cancel",{container:a,model:t}):(a.on(Y+$,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){var r,o;n.preventDefault(),n.stopPropagation(),r=e(this),r.hasClass("k-scheduler-edit")?s.navigate("#edit",i.options.animations.right):(o="cancel",r.hasClass("k-scheduler-update")?o="save":r.hasClass("k-scheduler-delete")&&(o="remove"),i.trigger(o,{container:a,model:t}))}),s.navigate(o,i.options.animations.left),t.bind("change",i.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(A.roleSelector("view")).not(this.view.element)},close:function(){var e,t,n,i;if(this.container){for(this.pane.navigate("",this.options.animations.right),e=this._views(),n=0,i=e.length;i>n;n++)t=e.eq(n).data("kendoMobileView"),t&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),b=y.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var n,i,r,o=this,a=o.options.editable,s="<div "+A.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,c=l.save,d=l.cancel,u=l.destroy,h=this.fields(_.desktop,t),p=[];return s+=this._buildEditTemplate(t,h,p),i=U(a)?a.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:c,attr:n})+this.createButton({name:"canceledit",text:d,attr:n}),t.isNew()||a.destroy===!1||(s+=this.createButton({name:"delete",text:u,attr:n})),s+="</div></div></div>",r=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(W({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(Q,{container:r,model:t})&&e.preventDefault()}},i)),o.editable=r.kendoEditable({fields:p,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(et,{container:r,model:t})?o.trigger(Q,{container:r,model:t}):(r.data("kendoWindow").center().open(),r.on(Y+$,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(Q,{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:r,model:t})}),r.on(Y+$,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(X,{container:r,model:t})}),t.bind("change",o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var n,i,r,o=A.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',n=0;t.buttons.length>n;n++)o+=this.createButton(t.buttons[n]);o+="</div></div></div>",i=this.element,this.popup&&this.popup.destroy(),r=this.popup=e(o).appendTo(i).eq(0).on("click",".k-button",function(n){n.preventDefault(),r.close();var i=e(n.currentTarget).index();t.buttons[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),i.focus()}}).getKendoWindow(),r.center().open()},_initTimezoneEditor:function(e,t){var n,i=this,r=i.container.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),s=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),c=i._timezonePopup,d=function(t){if("startTimezone"===t.field){var n=e.startTimezone;o.prop("disabled",!n),n||(a.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,c||(i._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){e.unbind("change",d),n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){a.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),n.close()}),l.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),e.bind("change",d)),o.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?a.show():a.hide(),n=c.data("kendoWindow"),n.center().open()}}),k=L.extend({init:function(t,n){var i=this;L.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=j(i.resize,i),i.wrapper.on("mousedown"+$+" selectstart"+$,function(e){e.preventDefault()}),i.options.editable&&i.options.editable.resize!==!1&&i._resizable(),i._movable(),e(window).on("resize"+$,i._resizeHandler),i.options.messages&&i.options.messages.recurrence&&(F.options=i.options.messages.recurrence),i._selectable(),i._ariaId=A.guid(),i._createEditor()},_isMobile:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return e.mobile===!0&&A.support.mobileOS&&!A.support.mobileOS.tablet||"phone"===e.mobile},_selectable:function(){var t,n=this,i=n.wrapper,r=A.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r+$,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var t=e.which,r=e.button,o=A.support.browser,a=t&&3===t||r&&2==r;A.support.mobileOS&&e.isDefaultPrevented()||(a||n._createSelection(e.currentTarget),i.focus(),o.msie&&9>o.version&&setTimeout(function(){i.focus()}))}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var n=e.which,r=e.button,o=n&&3===n||r&&2==r;o||i.on("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+$+" mouseleave"+$,function(){i.off("mousemove"+$,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+$,function(){n._selection||n._createSelection(e(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+$,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+$,j(n._keydown,n)),i.on("keyup"+$,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var e,t,n,i,r=this,o=r.view(),a=r.wrapper,s=o.current(),l=r._selection;s&&(s.removeAttribute("id"),s.removeAttribute("aria-label"),a.removeAttr("aria-activedescendant")),o.select(l),s=o.current(),s&&r._old!==s&&(t=l,n=r._selectedEvents(),i=o._selectedSlots,n[0]?(t=n[0]||l,e=A.format(r.options.messages.ariaEventLabel,t.title,t.start,t.start)):e=A.format(r.options.messages.ariaSlotLabel,t.start,t.end),s.setAttribute("id",r._ariaId),s.setAttribute("aria-label",e),a.attr("aria-activedescendant",r._ariaId),r._old=s,r.trigger("change",{start:l.start,end:l.end,events:n,slots:i,resources:o._resourceBySlot(l)}))},_selectedEvents:function(){for(var e,t=this._selection.events,n=t.length,i=0,r=[];n>i;i++)e=this.occurrenceByUid(t[i]),e&&r.push(e);return r},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)),i&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:s.start>=o&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select()))},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===R.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===R.ENTER?a.events.length?o.update!==!1&&n.editEvent(a.events[0]):o.create!==!1&&(a.isAllDay&&(a=e.extend({},a,{end:A.date.addDays(a.end,-1)})),n.addEvent(W({},a,r._resourceBySlot(a)))):i===R.DELETE&&o!==!1&&o.destroy!==!1?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,n=t.attr(A.attr("uid")),i=this.view().selectionByElement(t),i&&(r.groupIndex=i.groupIndex||0),n&&(i=l(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(n=this.view(),e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&r.start&&r.end?(i=r.end>e.end,r.end=e.endDate?e.endDate():e.end,i&&n._timeSlotInterval&&A.date.setTime(r.end,-n._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:nt,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[X,et,Q,J,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){var t,n=this;L.fn.destroy.call(n),n.dataSource&&(n.dataSource.unbind(K,n._refreshHandler),n.dataSource.unbind("progress",n._progressHandler),n.dataSource.unbind("error",n._errorHandler)),n.calendar&&(n.calendar.destroy(),n.popup.destroy()),n.view()&&n.view().destroy(),n._editor&&n._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t=n.element.add(n.wrapper).add(n.toolbar).add(n.popup),t.off($),clearTimeout(n._moveTimer),n._model=null,n.toolbar=null,n.element=null,e(window).off("resize"+$,n._resizeHandler),A.destroy(n.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-event, .k-task")},_movable:function(){var n,i,r,o,a,s,l=this,c=l._isMobile(),d=l.options.editable&&l.options.editable.move!==!1,u=l.options.editable&&l.options.editable.resize!==!1;(d||u&&c)&&(l._moveDraggable=new A.ui.Draggable(l.element,{distance:0,filter:".k-event",ignore:".k-resize-handle",holdToDrag:c}),d&&l._moveDraggable.bind("dragstart",function(e){var o=l.view(),d=e.currentTarget;return o.options.editable&&o.options.editable.move!==!1?c&&!d.hasClass("k-event-active")?(l.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t):(a=l.occurrenceByUid(d.attr(A.attr("uid"))),s=a.clone(),o._updateEventForMove(s),n=o._slotByPosition(e.x.startLocation,e.y.startLocation),r=n.startOffset(e.x.startLocation,e.y.startLocation,l.options.snap),i=n,(!n||l.trigger("moveStart",{event:a}))&&e.preventDefault(),t):(e.preventDefault(),t)}).bind("drag",function(e){var t,n,c=l.view(),d=c._slotByPosition(e.x.location,e.y.location);d&&(o=d.startOffset(e.x.location,e.y.location,l.options.snap),t=o-r,c._updateMoveHint(s,d.groupIndex,t),n=m(s,t),l.trigger("move",{event:a,slot:{element:d.element,start:d.startDate(),end:d.endDate()},resources:c._resourceBySlot(d),start:n.start,end:n.end})?c._updateMoveHint(s,d.groupIndex,t):i=d)}).bind("dragend",function(t){var c,d,u,h,p,f,g;l.view()._removeMoveHint(),c=o-r,d=m(s,c),u=d.start,h=d.end,p=l.view()._resourceBySlot(i),f=l.view()._resourceBySlot(n),g=l.trigger("moveEnd",{event:a,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:u,end:h,resources:p}),g||s.start.getTime()==u.getTime()&&s.end.getTime()==h.getTime()&&A.stringify(p)==A.stringify(f)||(l.view()._updateEventForMove(a),l._updateEvent(null,a,e.extend({start:u,end:h},p))),t.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){l.view()._removeMoveHint(),this.cancelHold()}),c&&(l._moveDraggable.bind("hold",function(e){l.element.find(".k-scheduler-monthview").length&&e.preventDefault(),l.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),l._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o,a,s=this;s._resizeDraggable=new A.ui.Draggable(s.element,{distance:0,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget),c=l.closest(".k-event"),d=c.attr(A.attr("uid")),u=s.view();r=s.occurrenceByUid(d),o=r.clone(),u._updateEventForResize(o),a=u._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:r})&&t.preventDefault(),n=A.date.toUtcTime(o.start),i=A.date.toUtcTime(o.end)},drag:function(l){var c,d,u,h,p,f;a&&(c=e(l.currentTarget),d=t(c),u=s.view(),h=u._slotByPosition(l.x.location,l.y.location),h&&a.groupIndex==h.groupIndex&&(a=h,p=n,f=i,"south"==d?!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==d?!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==d?a.isDaySlot&&A.date.toUtcTime(A.date.getDate(a.endDate()))>=A.date.toUtcTime(A.date.getDate(o.start))?i=o.isAllDay?a.startOffset(l.x.location,l.y.location,s.options.snap):a.endOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&a.end-A.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(i=a.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==d&&(a.isDaySlot&&A.date.toUtcTime(A.date.getDate(o.end))>=A.date.toUtcTime(A.date.getDate(a.startDate()))?n=a.startOffset(l.x.location,l.y.location,s.options.snap):!a.isDaySlot&&A.date.toUtcTime(o.end)-a.start>=u._timeSlotInterval()&&(n=a.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:A.timezone.toLocalDate(n),end:A.timezone.toLocalDate(i),resources:u._resourceBySlot(a)})?(n=p,i=f):u._updateResizeHint(o,a.groupIndex,n,i)))},dragend:function(l){var c,d=e(l.currentTarget),u=new Date(o.start.getTime()),h=new Date(o.end.getTime()),p=t(d);s.view()._removeResizeHint(),"south"==p?h=A.timezone.toLocalDate(i):"north"==p?u=A.timezone.toLocalDate(n):"east"==p?h=a.isDaySlot?A.date.getDate(A.timezone.toLocalDate(i)):A.timezone.toLocalDate(i):"west"==p&&(a.isDaySlot?(u=new Date(A.timezone.toLocalDate(n)),u.setHours(0),u.setMinutes(0)):u=A.timezone.toLocalDate(n)),c=s.trigger("resizeEnd",{event:r,slot:{element:a.element,start:a.startDate(),end:a.endDate()},start:u,end:h,resources:s.view()._resourceBySlot(a)}),!c&&h.getTime()>=u.getTime()&&(o.start.getTime()!=u.getTime()||o.end.getTime()!=h.getTime())&&(s.view()._updateEventForResize(r),s._updateEvent(p,r,{start:u,end:h})),a=null,r=null},dragcancel:function(){s.view()._removeResizeHint(),a=null,r=null}})},_updateEvent:function(e,t,n){var i=this,r=function(e,t){try{i._preventRefresh=!0,e.update(n),i._convertDates(e)}finally{i._preventRefresh=!1}i.trigger(J,{event:e})||(t&&t(),i._updateSelection(e),i.dataSource.sync())},o=function(e){return e.recurrenceRule?i.dataSource.getByUid(e.uid):i.dataSource.get(e.recurrenceId)},a=function(){var a,s,l=o(t);("south"==e||"north"==e)&&(n.start&&(a=A.date.getDate(l.start),A.date.setTime(a,z(n.start)),n.start=a),n.end&&(s=A.date.getDate(l.end),A.date.setTime(s,z(n.end)),n.end=s)),i.dataSource._removeExceptions(l),r(l)},s=function(){var e=o(t),n=function(){i._convertDates(e)},a=e.toOccurrence({start:t.start,end:t.end});r(i.dataSource.add(a),n)},l=i.options.messages.recurrenceMessages;t.recurrenceRule||t.isOccurrence()?i.showDialog({model:t,title:l.editWindowTitle,text:l.editRecurring?l.editRecurring:at,buttons:[{text:l.editWindowOccurrence,click:s},{text:l.editWindowSeries,click:a}]}):r(i.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+A.attr("uid")+"]"),this.dataSource.getByUid(t.attr(A.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var n,i,r,o=this.options.editable;o===!0||o.confirmation!==!1?(n=this.options.messages,i=typeof o.confirmation===O?o.confirmation:rt,r=[{name:"destroy",text:n.destroy,click:function(){e()}}],this._isMobile()&&A.mobile.ui.Pane||r.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this.showDialog({model:t,text:i,title:n.deleteWindowTitle,buttons:r})):e()},addEvent:function(e){var t,n,i=this._editor.editable,r=this.dataSource;e=e||{},n=this.trigger("add",{event:e}),!n&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=r.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,n,i=this._editor;i&&(e=i.editable,t=i.container,n=this._modelForContainer(t),t&&e&&e.end()&&!this.trigger(J,{container:t,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync()))},cancelEvent:function(){var e,t=this._editor,n=t.container;n&&(e=this._modelForContainer(n),e&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._createPopupEditor(e)},_editRecurringDialog:function(e){var t=this,n=function(){e.isException()?t._editEvent(e):t.addEvent(e)},i=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:at,buttons:[{text:r.editWindowOccurrence,click:n},{text:r.editWindowSeries,click:i}]})},_createButton:function(e){var t=e.template||st,n=typeof e===O?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||U(e)&&e.template))throw Error("Custom commands should have name specified");return U(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&U(e.text)&&(e=W(!0,{},e),e.text=e.text.edit),i=W(!0,i,v[n],e)):i=W(!0,i,v[n]),A.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=A.timezone.convert(e.start,n,i),a=A.timezone.convert(e.end,n,r)):(o=A.timezone.convert(e.start,i,n),a=A.timezone.convert(e.end,r,n)):(o=A.timezone[t](e.start,i),a=A.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_createEditor:function(){var e,n=this;e=n._editor=this._isMobile()&&A.mobile.ui.Pane?new w(this.wrapper,W({},this.options,{target:this,timezone:n.dataSource.reader.timezone,resources:n.resources,createButton:j(this._createButton,this)})):new b(this.wrapper,W({},this.options,{target:this,createButton:j(this._createButton,this),timezone:n.dataSource.reader.timezone,resources:n.resources})),e.bind("cancel",function(e){return n.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(n.cancelEvent(),n.focus(),t)}),e.bind("edit",function(e){n.trigger(et,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){n.saveEvent()}),e.bind("remove",function(e){n.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;(!e.isNew()||e.isOccurrence())&&(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)},n))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=l(this._data,e)),t},occurrencesInRange:function(e,t){return new A.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(X,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t=this,n=e,i=function(){var e=n.recurrenceId?n:n.toOccurrence(),i=t.dataSource.get(e.recurrenceId);t._convertDates(i),t._removeEvent(e)},r=function(){n.recurrenceId&&(n=t.dataSource.get(n.recurrenceId)),t._removeEvent(n)},o=t.options.messages.recurrenceMessages;t.showDialog({model:e,title:o.deleteWindowTitle,text:o.deleteRecurring?o.deleteRecurring:ot,buttons:[{text:o.deleteWindowOccurrence,click:i},{text:o.deleteWindowSeries,click:r}]})},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(X,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(X,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(Z,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(Z,this._viewAddHandler),t._viewEditHandler&&e.unbind(et,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(et,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(n="isWorkDay"in e,i=n?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected"))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},resize:function(e){var t=this.getSize(),n=this._size,i=this.view();i&&i.groups&&(e||!n||t.width!==n.width||t.height!==n.height)&&(this.refresh({action:"resize"}),this._size=t)},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!A.date.isInDateRange(e,I(n),I(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=U(i),n=i.type,typeof n===O&&(n=A.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,h(W(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l,c=this.options.views;for(this.views={},a=0,s=c.length;s>a;a++)l=!1,e=c[a],i=U(e),i?(o=r=e.type?e.type:e,typeof o!==O&&(r=e.title,l=!0)):o=r=e,t=x[r],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=W({title:r},t,i?e:{}),r&&(this.views[r]=e,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=q(n)?{data:n}:n,!t.timezone||n instanceof wt?n instanceof wt&&(t.timezone=n.schema?n.schema.timezone:""):n=W(!0,n,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(K,e._refreshHandler).unbind("progress",e._progressHandler).unbind("error",e._errorHandler):(e._refreshHandler=j(e.refresh,e),e._progressHandler=j(e._requestStart,e),e._errorHandler=j(e._error,e)),e.dataSource=A.data.SchedulerDataSource.create(n).bind(K,e._refreshHandler).bind("progress",e._progressHandler).bind("error",e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");A.ui.progress(t,e)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;s.length>t;t++){if(n=s[t],i=n.field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null!=n.valuePrimitive?n.valuePrimitive:!0,multiple:n.multiple||!1,dataSource:A.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=A.observable({selectedDate:new Date(this.options.date),formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,n=t.height,i=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),e._isMobilePhoneView()&&e.wrapper.addClass("k-scheduler-phone"),n&&e.wrapper.height(n),i&&e.wrapper.width(i)},date:function(e){return null!=e&&I(e)>=I(this.options.min)&&I(e)<=I(this.options.max)&&this._model.set("selectedDate",e),I(this._model.get("selectedDate"))},_toolbar:function(){var n,i,r=this,o=r.options,a=[];o.toolbar&&(a=e.isArray(o.toolbar)?o.toolbar:[o.toolbar]),n=this._isMobilePhoneView()?ct:lt,i=e(n({messages:o.messages,pdf:e.grep(a,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:A.ns,views:r.views})),r.wrapper.append(i),r.toolbar=i,A.bind(r.toolbar,r._model),i.on(Y+$,".k-pdf",function(e){e.preventDefault(),r.saveAsPDF()}),i.on(Y+$,".k-scheduler-navigation li",function(n){var i=e(this),o=new Date(r.date()),a="";if(n.preventDefault(),i.hasClass("k-nav-today"))a="today",o=new Date;else if(i.hasClass("k-nav-next"))a="next",o=r.view().nextDate();else if(i.hasClass("k-nav-prev"))a="previous",o=r.view().previousDate();else if(i.hasClass("k-nav-current")&&!r._isMobilePhoneView())return r._showCalendar(),t;r.trigger("navigate",{view:r._selectedViewName,action:a,date:o})||r.date(o)}),i.on(Y+$,".k-scheduler-views li",function(t){t.preventDefault();var n=e(this).attr(A.attr("name"));r.trigger("navigate",{view:n,action:"changeView",date:r.date()})||r.view(n)}),i.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new H(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new N(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,n=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},n&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.endDate()),n.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var n,i=this.view();return i._slotByPosition?(n=i._slotByPosition(e,t),n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null):null},slotByElement:function(t){var n=e(t).offset();
return this.slotByPosition(n.left,n.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),x={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}},B.plugin(k),A.PDFMixin&&A.PDFMixin.extend(k.prototype),C=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitleId=A.guid(),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new A.ui.DropDownList(n,{dataSource:A.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel,cascade:function(){this.value()||t._zone.wrapper.hide()}})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new A.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,cascade:function(){t._value=this.value(),t.trigger("change")},dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.value(""),t)}}),B.plugin(C),S=A.template('<option value="#=other_zone#">#=name#</option>'),T=A.template('<option value="#=zone#">#=territory#</option>'),D=L.extend({init:function(e,t){var n=this,i=A.timezone.windows_zones;if(!i||!A.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");L.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new A.data.Query(i),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,T))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,n){var i=0,r="",o=e.length;for(n&&(r+=t({other_zone:"",name:n}));o>i;i++)r+=t(e[i]);return r},_zoneTitlePicker:function(){var t=this,n=t._options(A.timezone.zones_titles,S,t.options.optionLabel);t._zoneTitle=e("<select>"+n+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,n=t._zone;t._bindZones(e),e&&n[0].children.length>1?n.show():n.hide(),t._value=n[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){L.fn.destroy.call(this),A.destroy(this.wrapper)},value:function(e){var n,i=this,r=i._zone,o="",a="";return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n&&(a=n.zone,o=n.other_zone),i._zoneTitle.val(o),i._bindZones(o),r.val(a),a=r[0].value,a&&r[0].children.length>1?r.show():r.hide(),i._value=a,t)}}),B.plugin(D)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=20,a=t.Class.extend({init:function(n,i,o){o=e.extend({minXDelta:30,maxYDelta:20,maxDuration:1e3},o),new t.UserEvents(n,{surface:o.surface,allowSelection:!0,start:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},move:function(e){var t=e.touch,n=e.event.timeStamp-t.startTime,a=t.x.initialDelta>0?"right":"left";r(t.x.initialDelta)>=o.minXDelta&&r(t.y.initialDelta)<o.maxYDelta&&o.maxDuration>n&&(i({direction:a,touch:t,target:t.target}),t.cancel())}})}}),s=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,minHold:r.minHold,multiTouch:r.multiTouch,allowSelection:!0,press:o("touchstart"),hold:o("hold"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;i&&n.options.doubleTapTimeout>r.endTime-i.endTime&&t.touchDelta(r,i).distance<o?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this,n=t.options,i=e.touch,o=e.event.timeStamp-i.startTime,a=i.x.initialDelta>0?"right":"left";r(i.x.initialDelta)>=n.minXDelta&&r(i.y.initialDelta)<n.maxYDelta&&n.maxDuration>o&&(t.trigger("swipe",{direction:a,touch:e.touch}),i.cancel())}});window.jQuery.fn.kendoMobileSwipe=function(e,t){this.each(function(){new a(this,e,t)})},t.ui.plugin(s)}(window.kendo.jQuery),function(e){function t(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(o("span",{className:r}));return i}function n(){var t=i._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var i=window.kendo,r=i.dom,o=r.element,a=r.text,s=i.support.mobileOS,l=i.ui,c=l.Widget,d=e.extend,u=e.map,h=e.isFunction,p=i.keys,f={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},g="string",m=".kendoGanttList",v="click",_=".",y={wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},w=l.GanttList=c.extend({init:function(e,t){c.fn.init.call(this,e,t),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._attachEvents(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){c.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this.touch&&this.touch.destroy(),this.content.off(m),this.header=null,this.content=null,this.levels=null,i.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0},_attachEvents:function(){var t=this,n=w.styles;t.content.on(v+m,"td > span."+n.icon+":not(."+n.iconHidden+")",function(n){var i=e(this),r=t._modelFromElement(i);r.set("expanded",!r.get("expanded")),n.stopPropagation()})},_domTrees:function(){this.headerTree=new r.Tree(this.header[0]),this.contentTree=new r.Tree(this.content[0])},_columns:function(){var e=this.options.columns,t=function(){this.field="",this.title="",this.editable=!1,this.sortable=!1};this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:f[e]}:e,d(new t,e)})},_layout:function(){var e=this.element,t=w.styles;e.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'></div>"),this.header=e.find(_+t.gridHeaderWrap),this.content=e.find(_+t.gridContent)},_header:function(){var e=this.headerTree,t=o("colgroup",null,this._cols()),n=o("thead",{role:"rowgroup"},[o("tr",{role:"row"},this._ths())]),i=o("table",{style:{"min-width":this.options.listWidth+"px"},role:"grid"},[t,n]);e.render([i])},_render:function(e){var t,n,i;this.levels=[{field:null,value:0}],t=o("colgroup",null,this._cols()),n=o("tbody",{role:"rowgroup"},this._trs(e)),i=o("table",{style:{"min-width":this.options.listWidth+"px"},tabIndex:0,role:"treegrid"},[t,n]),this.contentTree.render([i]),this.trigger("render")},_ths:function(){var e,t,n,i,r=this.columns,s=[];for(n=0,i=r.length;i>n;n++)e=r[n],t={"data-field":e.field,"data-title":e.title,className:w.styles.header,role:"columnheader"},s.push(o("th",t,[a(e.title)]));return s},_cols:function(){var e,t,n,i,r,a=this.columns,s=[];for(i=0,r=a.length;r>i;i++)e=a[i],n=e.width,t=n&&0!==parseInt(n,10)?{style:{width:typeof n===g?n:n+"px"}}:null,s.push(o("col",t,[]));return s},_trs:function(e){var t,n,i,r,o,a=[],s=[],l=w.styles;for(r=0,o=e.length;o>r;r++)t=e[r],i=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),n={"data-uid":t.uid,"data-level":i,role:"row"},t.summary&&(n["aria-expanded"]=t.expanded),r%2!==0&&s.push(l.alt),t.summary&&s.push(l.group),s.length&&(n.className=s.join(" ")),a.push(this._tds({task:t,attr:n,level:i})),s=[];return a},_tds:function(e){var t,n,i,r=[],a=this.columns;for(n=0,i=a.length;i>n;n++)t=a[n],r.push(this._td({task:e.task,column:t,level:e.level}));return o("tr",e.attr,r)},_td:function(e){var n,r,s=[],l=this.options.resourcesField,c=w.styles,d=e.task,u=e.column,h=d.get(u.field)||[];if(u.field==l){for(n=[],r=0;h.length>r;r++)n.push(i.format("{0} [{1}]",h[r].get("name"),h[r].get("formatedValue")));n=n.join(", ")}else n=u.format?i.format(u.format,h):h;return"title"===u.field&&(s=t({level:e.level,className:c.iconPlaceHolder}),s.push(o("span",{className:c.icon+" "+(d.summary?d.expanded?c.iconCollapse:c.iconExpand:c.iconHidden)}))),s.push(o("span",null,[a(n)])),o("td",{role:"gridcell"},s)},_levels:function(e){var t,n,i,r=this.levels,o=e.summary,a=e.idx,s=e.id;for(n=0,i=r.length;i>n;n++)if(t=r[n],t.field==a)return o&&r.push({field:s,value:t.value+1}),t.value},_sortable:function(){var e,t,n,r,o,a=this.options.resourcesField,s=this.columns,l=this.header.find("th");for(r=0,o=l.length;o>r;r++)e=s[r],e.sortable&&e.field!==a&&(n=l.eq(r),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+i.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}));l=null},_selectable:function(){var t=this,n=this.options.selectable;n&&this.content.on(v+m,"tr",function(n){var i=e(this);n.ctrlKey?t.clearSelection():t.select(i)})},select:function(e){var t=this.content.find(e),n=w.styles.selected;return t.length?(t.siblings(_+n).removeClass(n).attr("aria-selected",!1).end().addClass(n).attr("aria-selected",!0),void this.trigger("change")):this.content.find(_+n)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(w.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var t=this,i=w.styles,r="span."+i.icon+":not("+i.iconHidden+")",o=function(){t.editable&&t.editable.end()&&t._closeCell()},a=function(t){var r=e(t.currentTarget);r.hasClass(i.editCell)||n()};this.options.editable&&(this._startEditHandler=function(n){var i=n.currentTarget?e(n.currentTarget):n,r=t._columnFromElement(i);t.editable||r.editable&&t._editCell({cell:i,column:r})},t.content.on("focusin"+m,function(){clearTimeout(t.timer),t.timer=null}).on("focusout"+m,function(){t.timer=setTimeout(o,1)}).on("keydown"+m,function(e){var i,r,a=e.keyCode;switch(a){case p.ENTER:n(),o();break;case p.ESC:t.editable&&(i=t._editableContainer,r=t._modelFromElement(i),t.trigger("cancel",{model:r,cell:i})||t._closeCell(!0))}}),s?t.touch=t.content.kendoTouch({filter:"td",touchstart:function(e){a(e.touch)},doubletap:function(n){e(n.touch.initialTouch).is(r)||t._startEditHandler(n.touch)}}).data("kendoTouch"):t.content.on("mousedown"+m,"td",function(e){a(e)}).on("dblclick"+m,"td",function(n){e(n.target).is(r)||t._startEditHandler(n)}))},_editCell:function(t){var n,r=this.options.resourcesField,o=w.styles,a=t.cell,s=t.column,l=this._modelFromElement(a),c=this.dataSource._createNewModel(l.toJSON()),d=c.fields[s.field]||c[s.field],u=d.validation,p=i.attr("type"),f=i.attr("bind"),g={name:s.field,required:d.validation?d.validation.required===!0:!1};return s.field===r?void s.editor(a,c):(this._editableContent=a.children().detach(),this._editableContainer=a,a.data("modelCopy",c),"date"!==d.type&&"date"!==e.type(d)||!/H|m|s|F|g|u/.test(s.format)||("start"===s.field&&delete d.validation.dateCompare,g[f]="value:"+s.field,g[p]="date",n=function(t,n){e('<input type="text"/>').attr(g).appendTo(t).kendoDateTimePicker({format:n.format})}),this.editable=a.addClass(o.editCell).kendoEditable({fields:{field:s.field,format:s.format,editor:s.editor||n},model:c,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+i.attr("for")+'="'+s.field+'" class="k-invalid-msg"/>').hide().appendTo(a),a.find("[name="+s.field+"]").attr(i.attr("dateCompare-msg"),u.message)),void(this.trigger("edit",{model:l,cell:a})&&this._closeCell(!0)))},_closeCell:function(e){var t=w.styles,n=this._editableContainer,i=this._modelFromElement(n),r=this._columnFromElement(n),o=r.field,a=n.data("modelCopy"),s={};s[o]=a.get(o),n.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===o&&(s.end=new Date(s.start.getTime()+i.duration())),this.trigger("update",{task:i,updateInfo:s}))},_draggable:function(){var t,n=this,r=null,o=!0,a=w.styles,l="tr["+i.attr("level")+" = 0]:last",c={},u=function(){r=null,t=null,o=!0,c={}},h=function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){o=!1;break}t=n.dataSource.taskParent(t)}},p=function(){var n=e(t).height(),r=i.getOffset(t).top;d(t,{beforeLimit:r+.25*n,afterLimit:r+.75*n})},f=function(e){var n,r=e.location,o=a.dropAdd,s="add",l=parseInt(t.attr(i.attr("level")),10);t.beforeLimit>=r?(n=t.prev(),o=a.dropTop,s="insert-before"):r>=t.afterLimit&&(n=t.next(),o=a.dropBottom,s="insert-after"),n&&parseInt(n.attr(i.attr("level")),10)===l&&(o=a.dropMiddle),c.className=o,c.command=s},g=function(){return n._reorderDraggable.hint.children(_+a.dragStatus).removeClass(a.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:s,group:"listGroup",filter:"tr[data-uid]",ignore:_+a.input,hint:function(t){return e('<div class="'+a.header+" "+a.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+a.icon+" "+a.dragStatus+'" /><span class="'+a.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){n.editable&&e.preventDefault(),r=n._modelFromElement(e.currentTarget),this.hint.children(_+a.dragClueText).text(r.get("title"))},drag:function(e){o&&(f(e.y),g().addClass(c.className))},dragend:function(){u()},dragcancel:function(){u()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(e){t=e.dropTarget,h(n._modelFromElement(t)),p(),g().toggleClass(a.dropDenied,!o)},dragleave:function(){o=!0,g()},drop:function(){var e=n._modelFromElement(t),i=e.orderId,a={parentId:e.parentId};if(o){switch(c.command){case"add":a.parentId=e.id;break;case"insert-before":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i-1:i;break;case"insert-after":a.orderId=e.parentId===r.parentId&&e.orderId>r.orderId?i:i+1}n.trigger("update",{task:r,updateInfo:a})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:_+a.gridContent,drop:function(){var e=n._modelFromElement(n.content.find(l)),t=e.orderId,i={parentId:null,orderId:null!==r.parentId?t+1:t};n.trigger("update",{task:r,updateInfo:i})}}).data("kendoDropTargetArea"))},_modelFromElement:function(e){var t=e.closest("tr"),n=this.dataSource.getByUid(t.attr(i.attr("uid")));return n},_columnFromElement:function(e){var t=e.closest("td"),n=t.parent(),i=n.children().index(t);return this.columns[i]}});d(!0,l.GanttList,{styles:y})}(window.kendo.jQuery),function(e){function t(e){return delete e.name,delete e.prefix,delete e.views,e}function n(e){var t=[],n=e.workWeekStart;for(t.push(n);e.workWeekEnd!=n;)n>6?n-=7:n++,t.push(n);return t}function i(){var t=kendo._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var r,o,a=kendo.ui.Widget,s=kendo.dom.element,l=kendo.dom.text,c=e.isPlainObject,d=e.extend,u=kendo.support.browser,h=kendo.keys,p=kendo.data.Query,f=".kendoGanttTimeline",g="click",m="dblclick",v="keydown",_=".",y=kendo.template("#=kendo.toString(start, 't')#"),w=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),b=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),k=kendo.template("#=kendo.toString(start, 'MMM')#"),x=kendo.template("#=kendo.toString(start, 'yyyy')#"),C=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),S=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>Start: #=kendo.toString(start, "ddd M/dd HH:mm")#</div><div>End: #=kendo.toString(end, "ddd M/dd HH:mm")#</div></div></div>'),T=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),D={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},A={alt:"k-alt",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"},E=kendo.ui.GanttView=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find(_+E.styles.gridHeader),this.content=this.element.find(_+E.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=n(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._dependencyTree=t.dependencyTree,this._taskCoordinates={}},destroy:function(){a.fn.destroy.call(this),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight()},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),n=this._colgroup(),i=this._headerTree,r=s("thead",null,t),o=s("table",{style:{width:this._tableWidth+"px"}},[n,r]);i.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){var e,t,n,i,r=this.headerRow[0].children,o=this._timeSlots();for(n=0,i=r.length;i>n;n++)t=r[n],e=o[n],e.offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,n=e.length,i=E.styles,r=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e);this._taskTree.render([r,o,a]),t=this.content.find(_+i.rowsTable),this._contentHeight=t.height(),this._rowHeight=t.find("tr").height(),this.content.find(_+i.columnsTable).height(this._contentHeight)},_rowsTable:function(e){var t,n,i=[],r=E.styles,o=[null,{className:r.alt}];for(n=0;e>n;n++)t=s("tr",o[n%2],[s("td",null,[l(" ")])]),i.push(t);return this._createTable(1,i,{className:r.rowsTable})},_columnsTable:function(){var e,t,n,i,r,o=[],a=E.styles,c=this._timeSlots(),d=c.length,u=0;for(r=0;d>r;r++)t=c[r],i={},n=t.span,u+=n,1!==n&&(i.colspan=n),t.isNonWorking&&(i.className=a.nonWorking),o.push(s("td",i,[l(" ")]));return e=s("tr",null,o),this._createTable(u,[e],{className:a.columnsTable})},_tasksTable:function(e){var t,n,i,r,o,a,l,c=[],d=E.styles,u=this._taskCoordinates={},h=this._calculateMilestoneWidth(),p=Math.round(h.width),f=this.options.resourcesField,g=[d.resource,d.resourceAlt],m=this._calculateResourcesMargin(),v=function(e){var t=i.left,n=t+i.width;r.isMilestone()&&(t-=p/2,n=t+p),u[r.id]={start:t,end:n,rowIndex:e}};for(a=0,l=e.length;l>a;a++)r=e[a],i=this._taskPosition(r),t=s("tr",null),n=s("td",null,[this._renderTask(e[a],i)]),r[f]&&r[f].length&&(o=Math.max(i.width||h.clientWidth,0)+i.left,n.children.push(s("div",{className:d.resourcesWrap,style:{left:o+"px",width:this._tableWidth-(o+m)+"px"}},this._renderResources(r[f],g[a%2])))),t.children.push(n),c.push(t),v(a);return this._createTable(1,c,{className:E.styles.tasksTable})},_createTable:function(e,t,n){var i,r,o,a=[];for(o=0;e>o;o++)a.push(s("col"));return i=s("colgroup",null,a),r=s("tbody",null,t),n.style||(n.style={}),n.style.width=this._tableWidth+"px",s("table",n,[i,r])},_calculateTableWidth:function(){var e,t,n,i,r=this._timeSlots(),o=0,a=0;for(n=0,i=r.length;i>n;n++)e=r[n].span,a+=e,e>o&&(o=e);return t=Math.round(a*this.options.slotSize/o)},_calculateMilestoneWidth:function(){var t,n=E.styles.task+" "+E.styles.taskMilestone,i=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(i),t={width:i[0].getBoundingClientRect().width,clientWidth:i[0].clientWidth},i.remove(),t},_calculateResourcesMargin:function(){var t,n=e("<div class='"+E.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(n),t=parseInt(n.css("margin-left"),10),n.remove(),t},_renderTask:function(e,t){var n,i,r,o=this.options.editable,a=t.left,l=E.styles,c=l.taskWrap;return e.summary?i=this._renderSummary(e,t):e.isMilestone()?(i=this._renderMilestone(e,t),c+=" "+l.taskMilestoneWrap):i=this._renderSingleTask(e,t),n=s("div",{className:c,style:{left:a+"px"}},[i]),o&&(n.children.push(s("div",{className:l.taskDot+" "+l.taskDotStart})),n.children.push(s("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!o||(r=Math.round(t.width*e.percentComplete),n.children.push(s("div",{className:l.taskDragHandle,style:{left:r+"px"}}))),n},_renderSingleTask:function(e,t){var n,i=E.styles,r=Math.round(t.width*e.percentComplete),o=s("div",{className:i.taskContent},[s("div",{className:i.taskTemplate},[l(e.title)])]);return this.options.editable&&(o.children.push(s("span",{className:i.taskActions},[s("a",{className:i.link+" "+i.taskDelete,href:"#"},[s("span",{className:i.icon+" "+i.iconDelete})])])),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleWest})),o.children.push(s("span",{className:i.taskResizeHandle+" "+i.taskResizeHandleEast}))),n=s("div",{className:i.task+" "+i.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2,0)+"px"}},[s("div",{className:i.taskComplete,style:{width:r+"px"}}),o])},_renderMilestone:function(e){var t=E.styles,n=s("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid});return n},_renderSummary:function(e,t){var n=E.styles,i=Math.round(t.width*e.percentComplete),r=s("div",{className:n.task+" "+n.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[s("div",{className:n.taskSummaryProgress,style:{width:i+"px"}},[s("div",{className:n.taskSummaryComplete,style:{width:t.width+"px"}})])]);return r},_renderResources:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push(s("span",{className:t,style:{color:n.get("color")}},[l(n.get("name"))]));return o},_taskPosition:function(e){var t=Math.round,n=t(this._offset(e.start)),i=t(this._offset(e.end));return{left:n,width:i-n}},_offset:function(e){var t,n,i,r=this._timeSlots(),o=this._slotIndex("start",e),a=r[o];return e>a.end?a.offsetLeft+a.offsetWidth:a.start>e?a.offsetLeft:(t=e-a.start,n=a.end-a.start,i=t/n*a.offsetWidth,a.offsetLeft+i)},_slotIndex:function(e,t){var n,i=this._timeSlots(),r=0,o=i.length-1;do n=Math.ceil((o+r)/2),t>i[n][e]?r=n:(n===o&&n--,o=n);while(r!==o);return r},_timeByPosition:function(e,t,n){var i,r,o,a=this._slotByPosition(e);return t?n?a.end:a.start:(i=e-(this.content.offset().left-this.content.scrollLeft()),r=a.end-a.start,o=r*((i-a.offsetLeft)/a.offsetWidth),new Date(a.start.getTime()+o))},_slotByPosition:function(e){var t=e-(this.content.offset().left-this.content.scrollLeft()),n=this._slotIndex("offsetLeft",t);return this._timeSlots()[n]},_renderDependencies:function(e){var t,n,i=[],r=this._dependencyTree;for(t=0,n=e.length;n>t;t++)i.push.apply(i,this._renderDependency(e[t]));r.render(i)},_renderDependency:function(e){var t,n,i,r,o=this._taskCoordinates[e.predecessorId],a=this._taskCoordinates[e.successorId];if(!o||!a)return[];for(n="_render"+["FF","FS","SF","SS"][e.type],t=this[n](o,a),i=0,r=t.length;r>i;i++)t[i].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var n=this._dependencyFF(e,t,!1);return n[n.length-1].children[0]=this._arrow(!0),n},_renderSS:function(e,t){var n=this._dependencyFF(t,e,!0);return n[0].children[0]=this._arrow(!1),n.reverse()},_renderFS:function(e,t){var n=this._dependencyFS(e,t,!1);return n[n.length-1].children[0]=this._arrow(!1),n},_renderSF:function(e,t){var n=this._dependencyFS(t,e,!0);return n[0].children[0]=this._arrow(!0),n.reverse()},_dependencyFF:function(e,t,n){var i,r=this,o=[],a=0,s=0,l=0,c=0,d=n?"start":"end",u=2,h=1,p=this._rowHeight,f=10,g=e.rowIndex*p+Math.floor(p/2)-1,m=t.rowIndex*p+Math.floor(p/2)-1,v=E.styles,_=function(){o.push(r._line(v.line+" "+v.lineHorizontal,{left:a+"px",top:s+"px",width:l+"px"}))},y=function(){o.push(r._line(v.line+" "+v.lineVertical,{left:a+"px",top:s+"px",height:c+"px"}))};return a=e[d],s=g,l=f,i=t[d]-e[d],i>0!==n&&(l=Math.abs(i)+f),n?(a-=l,l-=h,_()):(_(),a+=l-u),s>m?(c=s-m,c+=u,s=m,y()):(c=m-s,c+=u,y(),s+=c-u),l=Math.abs(a-t[d]),n||(l-=h,a-=l),_(),o},_dependencyFS:function(e,t,n){var i=this,r=[],o=0,a=0,s=0,l=0,c=this._rowHeight,d=Math.floor(c/2),u=10,h=2*u,p=t.start-e.end,f=2,g=1,m=e.rowIndex*c+Math.floor(c/2)-1,v=t.rowIndex*c+Math.floor(c/2)-1,_=E.styles,y=function(){r.push(i._line(_.line+" "+_.lineHorizontal,{left:o+"px",top:a+"px",width:s+"px"}))},w=function(){r.push(i._line(_.line+" "+_.lineVertical,{left:o+"px",top:a+"px",height:l+"px"}))};return o=e.end,a=m,s=u,n&&(o+=g,p>h&&(s=p-(u-f)),s-=g),y(),o+=s-f,h>=p&&(l=n?Math.abs(v-m)-d:d,m>v?(a-=l,l+=f,w()):(w(),a+=l),s=e.end-t.start+h,u>s&&(s=u),o-=s-f,y()),m>v?(l=a-v,a=v,l+=f,w()):(l=v-a,w(),a+=l),s=t.start-o,n||(s-=g),y(),r},_line:function(e,t){return s("div",{className:e,style:t})},_arrow:function(e){return s("span",{className:e?E.styles.arrowWest:E.styles.arrowEast})},_colgroup:function(){var e,t,n,i=this._timeSlots(),r=i.length,o=[];for(e=0;r>e;e++)for(t=0,n=i[e].span;n>t;t++)o.push(s("col"));return s("colgroup",null,o)},_createDragHint:function(e){this._dragHint=e.clone().addClass(E.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var n,i,r=E.styles,o=this._taskCoordinates[t.id].rowIndex*this._rowHeight;this._resizeHint=e(C({styles:r})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(S({styles:r,start:t.start,end:t.end})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),n=this._resizeTooltip.outerHeight(),i=o-n,0>i&&(i=o+this._rowHeight),this._resizeTooltipTop=i},_updateResizeHint:function(t,n,i){var r=this._offset(t),o=this._offset(n),a=o-r,s=i?r:o,l=this._tableWidth-17,c=this._resizeTooltipWidth;this._resizeHint.css({left:r,width:a}),this._resizeTooltip&&this._resizeTooltip.remove(),s-=Math.round(c/2),0>s?s=0:s+c>l&&(s=l-c),this._resizeTooltip=e(S({styles:E.styles,start:t,end:n})).css({top:this._resizeTooltipTop,left:s,"min-width":c}),this.content.append(this._resizeTooltip)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,n,i){var r,o,a,s;this._removePercentCompleteTooltip(),r=this._percentCompleteResizeTooltip=e(T({styles:E.styles,text:i})).appendTo(this.element),o=Math.round(r.outerWidth()/2),a=r.find(_+E.styles.callout),s=Math.round(a.outerWidth()/2),r.css({top:t-(r.outerHeight()+s),left:n-o}),a.css("left",o-s)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,n){this._removeDependencyDragHint(),n?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,n){var i=E.styles,r=n.x-t.x,o=n.y-t.y,a=Math.sqrt(r*r+o*o),s=Math.atan(o/r);0>r&&(s+=Math.PI),e("<div class='"+i.line+" "+i.lineHorizontal+" "+i.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:a,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+s+"rad)","-ms-transform":"rotate("+s+"rad)","-webkit-transform":"rotate("+s+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,n){var i=e("<kvml:line class='"+E.styles.dependencyHint+"' style='position:absolute; top: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+n.x+"px,"+n.y+"px'></kvml:line>").appendTo(this.content);
i[0].outerHTML=i[0].outerHTML},_removeDependencyDragHint:function(){this.content.find(_+E.styles.dependencyHint).remove()},_scrollTo:function(e){var t=e.offset().left,n=e.width(),i=t+n,r=e.closest("tr"),o=r.offset().top,a=r.height(),s=o+a,l=this.content,c=l.offset(),d=c.top,u=l.height(),h=d+u,p=c.left,f=l.width(),g=p+f,m=kendo.support.scrollbar();d>o?l.scrollTop(l.scrollTop()+(o-d)):s>h&&l.scrollTop(l.scrollTop()+(s+m-h)),p>t&&n>f&&g>i||i>g&&f>n?l.scrollLeft(l.scrollLeft()+(i+m-g)):(i>g&&n>f&&t>p||p>t&&f>n)&&l.scrollLeft(l.scrollLeft()+(t-p))},_timeSlots:function(){return this._slots[this._slots.length-1]},_headers:function(e){var t,n,i,r,o,a,c,d,u=[],h=E.styles;for(o=0,a=e.length;a>o;o++){for(t=e[o],n=[],c=0,d=t.length;d>c;c++)i=t[c],r=l(i.text),n.push(s("th",{colspan:i.span,className:h.header+(i.isNonWorking?" "+h.nonWorking:"")},[r]));u.push(s("tr",null,n))}return u},_hours:function(e,t){var n,i,r,o=[],a=this.options,s=a.workDayStart.getHours(),l=a.workDayEnd.getHours(),c=a.hourSpan;for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),r=n.getHours(),i=r>=s&&l>r,n.setHours(n.getHours()+c),r==n.getHours()&&n.setHours(n.getHours()+2*c),(!a.showWorkHours||i)&&o.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return o},_days:function(e,t){var n,i,r=[];for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.nextDay(e),i=this._isWorkDay(e),(!this.options.showWorkDays||i)&&r.push({start:e,end:n,isNonWorking:!i,span:1}),e=n;return r},_weeks:function(e,t){var n,i,r,o=[],a=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);t>e;)n=kendo.date.dayOfWeek(kendo.date.addDays(e,1),a,1),n>t&&(n=t),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_months:function(e,t){var n,i,r,o=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setMonth(n.getMonth()+1),i=this._days(e,n),r=i.length,r>0&&o.push({start:i[0].start,end:i[r-1].end,span:r}),e=n;return o},_years:function(e,t){var n,i=[];for(e=new Date(e),t=new Date(t);t>e;)n=new Date(e),n.setFullYear(n.getFullYear()+1),i.push({start:e,end:n,span:12}),e=n;return i},_slotHeaders:function(e,t){var n,i,r,o=[];for(i=0,r=e.length;r>i;i++)n=e[i],o.push({text:t(n),isNonWorking:!!n.isNonWorking,span:n.span});return o},_isWorkDay:function(e){var t,n,i=e.getDay(),r=this._workDays;for(t=0,n=r.length;n>t;t++)if(r[t]===i)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard}});d(!0,E,{styles:A}),kendo.ui.GanttDayView=E.extend({name:"day",options:{timeHeaderTemplate:y,dayHeaderTemplate:w},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,n,i,r=[],o=this._days(this.start,this.end),a=[];for(n=0,i=o.length;i>n;n++)e=o[n],t=this._hours(e.start,e.end),e.span=t.length,a.push.apply(a,t);return r.push(o),r.push(a),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=E.extend({name:"week",options:{dayHeaderTemplate:w,weekHeaderTemplate:b},range:function(e){var t=this.calendarInfo(),n=t.firstDay;this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,n,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(e.end,n,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=E.extend({name:"month",options:{weekHeaderTemplate:b,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=E.extend({name:"year",options:{yearHeaderTemplate:x,monthHeaderTemplate:k},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],n=this._months(this.start,this.end);return e(n).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(n),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}}),r={wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"},o=kendo.ui.GanttTimeline=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year"}},snap:!0,selectable:!0,editable:!0},destroy:function(){a.fn.destroy.call(this),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var e=o.styles;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.gridHeader+"'><div class='"+e.gridHeaderWrap+"'></div></div>").append("<div class='"+e.gridContentWrap+"'><div class='"+e.tasksWrapper+"'></div><div class='"+e.dependenciesWrapper+"'></div></div>")},_domTrees:function(){var e=o.styles,t=kendo.dom.Tree,n=this.wrapper;this._headerTree=new t(n.find(_+e.gridHeaderWrap)[0]),this._taskTree=new t(n.find(_+e.tasksWrapper)[0]),this._dependencyTree=new t(n.find(_+e.dependenciesWrapper)[0])},_views:function(){var e,t,n,i,r,o,a,s=this.options.views;for(this.views={},o=0,a=s.length;a>o;o++)e=s[o],t=c(e),t&&e.selectable===!1||(n=t?"string"!=typeof e.type?e.title:e.type:e,i=D[n],i&&(t&&(e.type=i.type),i.title=this.options.messages.views[n]),e=d({title:n},i,t?e:{}),n&&(this.views[n]=e,(!r||e.selected)&&(r=n)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_initializeView:function(e){var n,i=this.views[e];if(i){if(n=i.type,"string"==typeof n&&(n=kendo.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,t(d(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree},i,this.options)))}return i},_unbindView:function(e){e&&e.destroy()},_range:function(e){var t,n,i={field:"start",dir:"asc"},r={field:"end",dir:"desc"};return e&&e.length?(t=new p(e).sort(i).toArray()[0].start||new Date,n=new p(e).sort(r).toArray()[0].end||new Date,{start:new Date(t),end:new Date(n)}):{start:new Date,end:new Date}},_render:function(e){var t=this.view(),n=this._range(e);this._tasks=e,t.range(n),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){var t,n,i=this._tasks,r=i.length;for(n=0;r>n;n++)if(t=i[n],t.uid===e)return t},_draggable:function(){var e,t,n,r,a,s=this,l=this.options.snap,c=o.styles,d=function(){s.view()._removeDragHint(),e&&e.css("opacity",1),e=null,t=null,a=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+c.task,holdToDrag:kendo.support.mobileOS,ignore:_+c.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(i){var o=s.view();return e=i.currentTarget.parent(),t=s._taskByUid(i.currentTarget.attr("data-uid")),s.trigger("moveStart",{task:t})?void i.preventDefault():(n=t.start,r=o._timeByPosition(i.x.location,l)-n,o._createDragHint(e),e.css("opacity",.5),void(a=!0))}).bind("drag",kendo.throttle(function(e){var i,o;a&&(i=s.view(),o=new Date(i._timeByPosition(e.x.location,l)-r),s.trigger("move",{task:t,start:o})||(n=o,i._updateDragHint(n)))},15)).bind("dragend",function(){s.trigger("moveEnd",{task:t,start:n}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){i()}))},_resizable:function(){var e,t,n,r,a,s,l=this,c=this.options.snap,d=o.styles,u=function(){l.view()._removeResizeHint(),e=null,t=null,s=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+d.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(i){return a=i.currentTarget.hasClass(d.taskResizeHandleWest),e=i.currentTarget.closest(_+d.task),t=l._taskByUid(e.attr("data-uid")),l.trigger("resizeStart",{task:t})?void i.preventDefault():(n=t.start,r=t.end,l.view()._createResizeHint(t),void(s=!0))}).bind("drag",kendo.throttle(function(e){var i,o;s&&(i=l.view(),o=i._timeByPosition(e.x.location,c,!a),a?n=r>o?o:r:r=o>n?o:n,l.trigger("resize",{task:t,start:n,end:r})||i._updateResizeHint(n,r,a))},15)).bind("dragend",function(){l.trigger("resizeEnd",{task:t,resizeStart:a,start:n,end:r}),u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){i()}))},_percentResizeDraggable:function(){var e,t,n,r,a,s,l,c,d,u,h=this,p=o.styles,f=function(){h.view()._removePercentCompleteTooltip(),t=null,e=null,u=!1},g=function(e){t.find(_+p.taskComplete).width(e).end().siblings(_+p.taskDragHandle).css("left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+p.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(i){t=i.currentTarget.siblings(_+p.task),e=h._taskByUid(t.attr("data-uid")),l=e.percentComplete,n=t.offset(),r=this.element.offset(),a=t.find(_+p.taskComplete).width(),s=t.outerWidth(),u=!0}).bind("drag",kendo.throttle(function(e){if(u){var t=Math.max(0,Math.min(s,a+e.x.initialDelta));l=Math.round(t/s*100),g(t),c=n.top-r.top,d=n.left+t-r.left,h.view()._updatePercentCompleteTooltip(c,d,l)}},15)).bind("dragend",function(){h.trigger("percentResizeEnd",{task:e,percentComplete:l/100}),f()}).bind("dragcancel",function(){g(a),f()}).userEvents.bind("select",function(){i()}))},_createDependencyDraggable:function(){var t,n,r,a,s,l,c=this,d=e(),h=e(),p=u.msie&&9>u.version,f=o.styles,g=function(){t.css("display","").removeClass(f.hovered),t.parent().removeClass(f.origin),t=null,m(!1),h=e(),d=e(),c.view()._removeDependencyDragHint(),n=!1},m=function(e){h.hasClass(f.origin)||(h.find(_+f.taskDot).css("display",e?"block":""),d.toggleClass(f.hovered,e))};this.options.editable&&(p&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:_+f.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(e){t=e.currentTarget.css("display","block").addClass(f.hovered),t.parent().addClass(f.origin);var i=t.offset();s=c.view().content,l=s.offset(),r=Math.round(i.left+s.scrollLeft()-l.left+t.outerHeight()/2),a=Math.round(i.top+s.scrollTop()-l.top+t.outerWidth()/2),n=!0}).bind("drag",kendo.throttle(function(t){var i,o,u;n&&(c.view()._removeDependencyDragHint(),i=e(kendo.elementUnderCursor(t)),o=t.x.location+s.scrollLeft()-l.left,u=t.y.location+s.scrollTop()-l.top,c.view()._updateDependencyDragHint({x:r,y:a},{x:o,y:u},p),m(!1),d=i.hasClass(f.taskDot)?i:e(),h=i.closest(_+f.taskWrap),m(!0))},15)).bind("dragend",function(){var e,n,i,r,o;d.length&&(e=t.hasClass(f.taskDotStart),n=d.hasClass(f.taskDotStart),i=e?n?3:2:n?1:0,r=c._taskByUid(t.siblings(_+f.task).attr("data-uid")),o=c._taskByUid(d.siblings(_+f.task).attr("data-uid")),r!==o&&c.trigger("dependencyDragEnd",{type:i,predecessor:r,successor:o})),g()}).bind("dragcancel",function(){g()}).userEvents.bind("select",function(){i()}))},_selectable:function(){var t=this,n=o.styles;this.options.selectable&&this.wrapper.on(g+f,_+n.task,function(n){n.stopPropagation(),n.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on(g+f,_+n.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on(g+f,_+n.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),n=o.styles;return t.length?(this.clearSelection(),t.addClass(n.selected),void(kendo.support.mobileOS&&t.parent().addClass(n.taskWrapActive))):this.wrapper.find(_+n.task+_+n.selected)},selectDependency:function(t){var n,i=this.wrapper.find(t),r=o.styles;return i.length?(this.clearSelection(),this.trigger("clear"),n=e(i).attr("data-uid"),void this.wrapper.find(_+r.line+"[data-uid='"+n+"']").addClass(r.selected)):this.wrapper.find(_+r.line+_+r.selected)},clearSelection:function(){var e=o.styles;this.wrapper.find(_+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find(_+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,n=o.styles;this.options.editable&&(this._tabindex(),this.wrapper.on(g+f,_+n.taskDelete,function(i){t.trigger("removeTask",{uid:e(this).closest(_+n.task).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}).on(m+f,_+n.task,function(n){t.trigger("editTask",{uid:e(this).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}).on(v+f,function(e){var n;e.keyCode===h.DELETE&&(n=t.selectDependency(),n.length&&(t.trigger("removeDependency",{uid:n.attr("data-uid")}),t.clearSelection()))}))}}),d(!0,o,{styles:r})}(window.kendo.jQuery),function(e,t){function n(e){return"["+f.attr("uid")+(e?"='"+e+"']":"]")}function i(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function r(e){var t,n,i,r,o,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),n=f.widgetInstance(e,f.ui),i={},r=e;r!==window&&!o;)r=r.parent(),o=r.data("kendoEditable");return(a=o?o.options.model:null)?(i.start=a.start,i.end=a.end,i[t]=n?n.value():f.parseDate(e.value()),i.end>=i.start):!0}return!0}function o(t,n){var i=t.parents("["+f.attr("role")+'="gantt"]'),r=[],o=a(i);t.attr(I,0),n&&o.each(function(t,n){r[t]=e(n).scrollTop()});try{t[0].setActive()}catch(s){t[0].focus()}n&&o.each(function(t,n){e(n).scrollTop(r[t])})}function a(t){return e(t).parentsUntil("body").filter(function(e,t){var n=f.getComputedStyles(t,["overflow"]);return"visible"!=n.overflow}).add(window)}var s,l,c,d,u,h,p,f=window.kendo,g=f.support.browser,m=f.Observable,v=f.ui.Widget,_=f.data.DataSource,y=f.data.ObservableObject,w=f.data.ObservableArray,b=f.data.Query,k=e.isArray,x=e.inArray,C=f.isFunction,S=e.proxy,T=e.extend,D=e.isPlainObject,A=e.map,E=f.keys,M=".kendoGantt",P="p0",I="tabIndex",z="click",F="width",R="string",B={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"}},L="aria-activedescendant",O="gantt_active_cell",H="action-option-focused",N=".",V="Are you sure you want to delete this task?",U="Are you sure you want to delete this dependency?",W='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span>#=text#</button>',j='<a class="#=className#" #=attr# href="\\#">#=text#</a>',G=f.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),q=f.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),$=f.template('<div class="#=styles.footerWrapper#"><div class="#=styles.actions#"><button class="#=styles.button#" data-action="#=action.data#"><span class="#=styles.iconPlus#"></span>#=action.title#</button></div></div>'),Y=function(t,n){var i={name:n.field},r=n.model.fields[n.field].validation;r&&D(r)&&r.message&&(i[f.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+f.attr("type")+'="date" '+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+n.field+'" '+f.attr("validate")+"='true' />").attr(i).appendTo(t),e("<span "+f.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},K=function(t,n){e('<a href="#" class="'+n.styles.button+'">'+n.messages.assingButton+"</a>").click(n.click).appendTo(t)},Q={wrapper:"k-widget k-gantt",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",viewButtonDefault:"k-state-default",viewButton:"k-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},X={append:{text:"Add Task",action:"add",className:Q.toolbar.appendButton,iconClass:Q.toolbar.iconPlus},pdf:{text:"Export to PDF",className:Q.toolbar.pdfButton,iconClass:Q.toolbar.iconPdf}},J=m.extend({init:function(e,t){m.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=p.styles,n=this.list.find(N+t.focused),i=n[e]();i.length&&(n.removeClass(t.focused).removeAttr("id"),i.addClass(t.focused).attr("id",H),this.list.find("ul").removeAttr(L).attr(L,H))},_popup:function(){var t=this,n=p.styles,i="li"+N+n.item,r=this.options.messages.actions,o=this.options.navigatable;this.list=e(q({styles:n,actions:[{data:"add",text:r.addChild},{data:"insert-before",text:r.insertBefore},{data:"insert-after",text:r.insertAfter}]})),this.element.append(this.list),this.popup=new f.ui.Popup(this.list,T({anchor:this.element,open:function(){t._adjustListWidth()},animation:this.options.animation},B[this.options.direction])),this.element.on(z+M,N+n.toolbar.appendButton,function(i){var r=e(this),a=r.attr(f.attr("action"));i.preventDefault(),a?t.trigger("command",{type:a}):(t.popup.open(),o&&t.list.find("li:first").addClass(n.focused).attr("id",H).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":H}).focus())}),this.list.find(i).hover(function(){e(this).addClass(n.hovered)},function(){e(this).removeClass(n.hovered)}).end().on(z+M,i,function(){t.trigger("command",{type:e(this).attr(f.attr("action"))}),t.popup.close()}),o&&(this.popup.bind("close",function(){t.list.find(i).removeClass(n.focused).end().find("ul").attr(I,0),t.element.parents("["+f.attr("role")+'="gantt"]').find(N+n.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+M,function(e){var i=e.keyCode;switch(i){case E.UP:e.preventDefault(),t._current("prev");break;case E.DOWN:e.preventDefault(),t._current("next");break;case E.ENTER:t.list.find(N+n.focused).click();break;case E.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.element;(n.data(F)||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(F,i))},destroy:function(){this.popup.destroy(),this.element.off(M),this.list.off(M),this.unbind()}}),Z=function(e,t){return function(n){var i,r;if(n=k(i)?{data:n}:n,i=n||{},r=i.data,i.data=r,!(i instanceof e)&&i instanceof _)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return i instanceof e?i:new e(i)}},et=f.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),tt=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:et,model:et}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),n=this.successors(e);return t.push.apply(t,n),t},_dependencies:function(e,t){var n=this.view(),i={field:e,operator:"eq",value:t};return n=new b(n).filter(i).toArray()}});tt.create=Z(tt,"GanttDependencyDataSource"),s=f.data.Model.define({duration:function(){var e=this.end,t=this.start;return e-t},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,n,i=["start","end"];for(n=0;i.length>n;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:""},start:{type:"date",validation:{required:!0,dateCompare:r,message:"Start date should be before or equal to the end date"}},end:{type:"date",validation:{required:!0,dateCompare:r,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),l=_.extend({init:function(e){_.fn.init.call(this,T(!0,{},{schema:{modelBase:s,model:s}},e))},remove:function(e){var t=e.get("parentId"),n=this.taskAllChildren(e);return this._removeItems(n),e=_.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){return e?(e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)):t},insert:function(e,n){return n?(n=this._toGanttTask(n),n.set("orderId",e),n=_.fn.insert.call(this,e,n),this._reorderSiblings(n,this.taskSiblings(n).length-1),this._resolveSummaryFields(this.taskParent(n)),n):t},taskChildren:function(e){var n,i=this.view(),r={field:"parentId",operator:"eq",value:null},o=this._sort||{field:"orderId",dir:"asc"};if(e){if(n=e.get("id"),n===t||null===n)return[];r.value=n}return i=new b(i).filter(r).sort(o).toArray()},taskAllChildren:function(e){var t=[],n=this,i=function(e){var r=n.taskChildren(e);t.push.apply(t,r),A(r,i)};return e?i(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,n=this.taskParent(e);null!==n;)t+=1,n=this.taskParent(n);return t},taskTree:function(e){var t,n,i,r,o=[],a=this.taskChildren(e);for(n=0,i=a.length;i>n;n++)t=a[n],o.push(t),t.get("expanded")&&(r=this.taskTree(t),o.push.apply(o,r));return o},update:function(e,n){var i,r,o=this,a=function(e,t){var n,i,r=o.taskAllChildren(e);for(n=0,i=r.length;i>n;n++)r[n]._offset(t)},s=function(e){var t=e.field,n=e.sender;switch(t){case"start":o._resolveSummaryStart(o.taskParent(n)),a(n,n.get(t).getTime()-i.getTime());break;case"end":o._resolveSummaryEnd(o.taskParent(n));break;case"percentComplete":o._resolveSummaryPercentComplete(o.taskParent(n));break;case"orderId":o._reorderSiblings(n,i)}};n.parentId!==t&&(i=e.get("parentId"),i!==n.parentId&&(e.set("parentId",n.parentId),o._childRemoved(i,e.get("orderId")),e.set("orderId",o.taskSiblings(e).length-1),o._resolveSummaryFields(o.taskParent(e))),delete n.parentId),e.bind("change",s);for(r in n)i=e.get(r),e.set(r,n[r]);e.unbind("change",s)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].start.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].start.getTime(),a>n&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"start",n)},_resolveSummaryEnd:function(e){var t=this,n=function(e){var n,i,r,o=t.taskChildren(e),a=o[0].end.getTime();for(i=1,r=o.length;r>i;i++)n=o[i].end.getTime(),n>a&&(a=n);return new Date(a)};this._updateSummaryRecursive(e,"end",n)},_resolveSummaryPercentComplete:function(e){var t=this,n=function(e){var n=t.taskChildren(e),i=new b(n).aggregate([{field:"percentComplete",aggregate:"average"}]);return i.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",n)},_updateSummaryRecursive:function(e,t,n){var i,r;e&&(i=n(e),e.set(t,i),r=this.taskParent(e),r&&this._updateSummaryRecursive(r,t,n))},_childRemoved:function(e,t){var n,i,r=null===e?null:this.get(e),o=this.taskChildren(r);for(n=t,i=o.length;i>n;n++)o[n].set("orderId",n);this._resolveSummaryFields(r)},_reorderSiblings:function(e,t){var n,i=e.get("orderId"),r=i>t,o=r?t:i,a=r?i:t,s=r?o:o+1,l=this.taskSiblings(e);for(a=Math.min(a,l.length-1),n=o;a>=n;n++)l[n]!==e&&(l[n].set("orderId",s),s+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof s)){var t=e;e=this._createNewModel(),e.accept(t)}return e}}),l.create=Z(l,"GanttDataSource"),T(!0,f.data,{GanttDataSource:l,GanttTask:s,GanttDependencyDataSource:tt,GanttDependency:et}),c={desktop:{dateRange:Y,resources:K}},d=f.Observable.extend({init:function(e,t){f.Observable.fn.init.call(this),this.element=e,this.options=T(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(e,t){var n=this,i=this.options.messages.editor,r=this.options.resources,o=function(e){e.preventDefault(),r.editor(n.container.find(N+p.styles.popup.resourcesField),t)},a=[{field:"title",title:i.title},{field:"start",title:i.start,editor:e.dateRange},{field:"end",title:i.end,editor:e.dateRange},{field:"percentComplete",title:i.percentComplete,format:P}];return t.get(r.field)&&a.push({field:r.field,title:i.resources,messages:i,editor:e.resources,click:o,styles:p.styles.popup}),a},_buildEditTemplate:function(e,t,n){var i,r,o,a,s=this.options.resources,l=this.options.editable.template,c=T({},f.Template,this.options.templateSettings),d=c.paramName,u=p.styles.popup,h="";if(l)typeof l===R&&(l=window.unescape(l)),h+=f.template(l,c)(e);else for(i=0,r=t.length;r>i;i++)o=t[i],h+='<div class="'+u.editLabel+'"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",o.field===s.field&&(h+='<div class="'+u.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(o.field)?(n.push(o),h+="<div "+f.attr("container-for")+'="'+o.field+'" class="'+u.editField+'"></div>'):(a="#:",o.field?(o=f.expr(o.field,d),a+=o+"==null?'':"+o):a+="''",a+="#",a=f.template(a,c),h+='<div class="'+u.editField+'">'+a(e)+"</div>");return h}}),u=d.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?this.container.data("kendoWindow").bind("deactivate",t).close():t()},showDialog:function(t){var n,i,r,o,a=t.buttons,s=p.styles.popup,l=f.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',s.form,s.formContainer,s.message,t.text,s.buttonsContainer);for(n=0,i=a.length;i>n;n++)l+=this.createButton(a[n]);l+="</div></div></div>",r=this.element,this.popup&&this.popup.destroy(),o=this.popup=e(l).appendTo(r).eq(0).on("click",N+s.button,function(t){t.preventDefault(),o.close();var n=e(t.currentTarget).index();a[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow(),o.center().open()},_createPopupEditor:function(t){var n,i,r=this,o={},a=this.options.messages,s=p.styles,l=s.popup,d=f.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',f.attr("uid"),t.uid,l.form,l.editForm,l.formContainer),u=this.fields(c.desktop,t),h=[];return d+=this._buildEditTemplate(t,u,h),d+='<div class="'+l.buttonsContainer+'">',d+=this.createButton({name:"update",text:a.save,className:p.styles.primary}),d+=this.createButton({name:"cancel",text:a.cancel}),d+=this.createButton({name:"delete",text:a.destroy}),d+="</div></div></div>",n=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(T({modal:!0,resizable:!1,draggable:!0,title:a.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&r.trigger("cancel",{container:n,model:t})&&e.preventDefault()}},o)),i=n.kendoEditable({fields:h,model:t,clearContainer:!1,validateOnBlur:!0,target:r.options.target}).data("kendoEditable"),this.trigger("edit",{container:n,model:t})?r.trigger("cancel",{container:n,model:t}):(n.data("kendoWindow").center().open(),n.on(z+M,N+s.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("cancel",{container:n,model:t})}),n.on(z+M,N+s.buttonSave,function(e){var i,o,a,s,l;for(e.preventDefault(),e.stopPropagation(),i=r.fields(c.desktop,t),o={},s=0,l=i.length;l>s;s++)a=i[s].field,o[a]=t.get(a);r.trigger("save",{container:n,model:t,updateInfo:o})}),n.on(z+M,N+s.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),r.trigger("remove",{container:n,model:t})})),i}}),h=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",S(this.destroy,this)).close()
},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,v.fn.destroy.call(this),f.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=p.styles,n=this.grid,i=this._cancelProxy=S(this._cancel,this);this.container.on(z+M,N+t.buttonCancel,this._cancelProxy),this._saveProxy=S(this._save,this),this.container.on(z+M,N+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&i(e)}),n.wrapper.on(z+M,"input[type='checkbox']",function(){var t=e(this),i=e(t).closest("tr"),r=n.dataSource.getByUid(i.attr(f.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(M),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(N+p.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=p.styles.popup,n=f.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);n=e(n),this.container=n.find(N+t.resourcesFormContainer),this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this,n=this.options.messages,i=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new f.ui.Grid(i,{columns:[{field:"name",title:n.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:n.unitsHeader,template:function(e){var t=e.format,n=null!==e.value?e.value:"";return t?f.toString(n,t):n}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id",type:"number"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,n=this.options.buttons,i='<div class="'+p.styles.popup.buttonsContainer+'">';for(e=0,t=n.length;t>e;e++)i+=this.createButton(n[e]);i+="</div>",this.container.append(i)},_updateModel:function(){var e,t,n,i=[],r=this.grid.dataSource.data();for(t=0,n=r.length;n>t;t++)e=r[t].get("value"),null!==e&&e>0&&i.push(r[t]);this.model[this.resourcesField]=i}}),p=v.extend({init:function(e,t){k(t)&&(t={dataSource:t}),v.fn.init.call(this,e,t),this._wrapper(),this._resources(),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),f.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assingButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%"},select:function(e){var n=this.list;return e?(n.select(e),t):n.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){v.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(M),e(window).off("resize"+M,this._resizeHandler),e(this.wrapper).off(M),this.toolbar=null,this.footer=null},_attachEvents:function(){this._resizeHandler=S(this.resize,this),e(window).on("resize"+M,this._resizeHandler)},_wrapper:function(){var e=p.styles,t=[e.icon,e.resizeHandle].join(" "),n=this.options,i=n.height,r=n.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(N+e.list).width(n.listWidth),i&&this.wrapper.height(i),r&&this.wrapper.width(r)},_toolbar:function(){var t,n,i=this,r=p.styles,o=N+r.toolbar.views+" > li",a=N+r.toolbar.pdfButton,s=r.hovered,l=this.options.toolbar,c=e("<div class='"+r.toolbar.actions+"'>");C(l)||(l=typeof l===R?l:this._actions(l),l=S(f.template(l),this)),n=e(G({ns:f.ns,views:this.timeline.views,styles:r.toolbar})),c.append(l({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(c).append(n),this.wrapper.prepend(t),this.toolbar=t,t.on(z+M,o,function(t){t.preventDefault();var n=e(this).attr(f.attr("name"));i.trigger("navigate",{view:n})||i.view(n)}).on(z+M,a,function(){i.saveAsPDF()}),this.wrapper.find(N+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(s)},function(){e(this).removeClass(s)})},_actions:function(){var e,t,n=this.options,i=n.toolbar,r="";if(!k(i)){if(!n.editable)return r;i=["append"]}for(e=0,t=i.length;t>e;e++)r+=this._createButton(i[e]);return r},_footer:function(){if(this.options.editable){var t=e($({styles:p.styles.toolbar,action:{data:"add",title:this.options.messages.actions.append}}));this.wrapper.append(t),this.footer=t}},_createButton:function(e){var t=e.template||W,n=this.options.messages.actions,i=typeof e===R?e:e.name||e.text,r=X[i]?X[i].className:"k-gantt-"+(i||"").replace(/\s/g,""),o={iconClass:"",action:"",text:i,className:r,styles:p.styles.toolbar};if(!(i||D(e)&&e.template))throw Error("Custom commands should have name specified");return o=T(!0,o,X[i],{text:n[i]}),D(e)&&(e.className&&x(o.className,e.className.split(" "))<0&&(e.className+=" "+o.className),o=T(!0,o,e)),f.template(t)(o)},_adjustDimensions:function(){var e=this.element,t=p.styles,n=N+t.list,i=N+t.timeline,r=N+t.splitBar,o=this.toolbar.outerHeight(),a=this.footer?this.footer.outerHeight():0,s=e.height(),l=e.width(),c=e.find(r).outerWidth(),d=e.find(n).outerWidth();e.children([n,i,r].join(",")).height(s-(o+a)).end().children(i).width(l-(c+d))},_scrollTo:function(e){var t=this.timeline.view(),i=f.attr("uid"),r="string"==typeof e?e:e.closest("tr"+n()).attr(i),o=t.content.find(n(r));0!==o.length&&t._scrollTo(o)},_dropDowns:function(){var e=this,t=N+p.styles.toolbar.actions,n=this.options.messages.actions,i=this.dataSource,r=this.timeline,o=function(t){var n,o=t.type,a=i._createNewModel(),s=e.dataItem(e.select()),l=i.taskParent(s),c=r.view()._timeSlots()[0],d="add"===o?s:l;a.set("title","New task"),d?(a.set("parentId",d.get("id")),a.set("start",d.get("start")),a.set("end",d.get("end"))):(a.set("start",c.start),a.set("end",c.end)),"add"!==o&&(n=s.get("orderId"),n="insert-before"===o?n:n+1),e._createTask(a,n)};this.options.editable&&(this.footerDropDown=new J(this.footer.children(t).eq(0),{messages:{actions:n},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new J(this.toolbar.children(t).eq(0),{messages:{actions:n},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",o),this.headerDropDown.bind("command",o))},_list:function(){var e,t,n=this,i=n.options.navigatable,r=p.styles,a=this.wrapper.find(N+r.list),s=a.find("> div"),l=this.wrapper.find(N+r.toolbar.actions+" > button"),c={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,listWidth:a.outerWidth(),resourcesField:this.resources.field},d=c.columns,u=function(){i&&(n._current(n._cachedCurrent),o(n.list.content.find("table"),!0)),delete n._cachedCurrent};for(t=0;d.length>t;t++)e=d[t],e.field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=S(this._createResourceEditor,this));this.list=new f.ui.GanttList(s,c),this.list.bind("render",function(){n._navigatable()},!0).bind("edit",function(e){n._cachedCurrent=e.cell,n.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){n.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),u()}).bind("update",function(e){n._updateTask(e.task,e.updateInfo),u()}).bind("change",function(){n.trigger("change");var e=n.list.select();e.length?(l.removeAttr("data-action","add"),n.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),n.timeline.clearSelection())})},_timeline:function(){var e=this,t=p.styles,n=i(T(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(N+t.timeline+" > div");this.timeline=new f.ui.GanttTimeline(r,n),this.timeline.bind("navigate",function(n){e.toolbar.find(N+t.toolbar.views+" > li").removeClass(t.selected).end().find(N+t.toolbar.viewButton+"-"+n.view.replace(/\./g,"\\.").toLowerCase()).addClass(t.selected),e.refresh()}).bind("moveStart",function(t){e.trigger("moveStart",{task:t.task})&&t.preventDefault()}).bind("move",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("move",{task:n,start:i,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var n=t.task,i=t.start,r=new Date(i.getTime()+n.duration());e.trigger("moveEnd",{task:n,start:i,end:r})||e._updateTask(e.dataSource.getByUid(n.uid),{start:i,end:r})}).bind("resizeStart",function(t){e.trigger("resizeStart",{task:t.task})&&t.preventDefault()}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var n=t.task,i={};t.resizeStart?i.start=t.start:i.end=t.end,e.trigger("resizeEnd",{task:n,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(n.uid),i)}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragEnd",function(t){var n=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(n)}).bind("select",function(t){e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options,t=e.dataSource;t=k(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=S(this.refresh,this),this._progressHandler=S(this._requestStart,this),this._errorHandler=S(this._error,this)),this.dataSource=f.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=k(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=S(this.refreshDependencies,this),this._dependencyErrorHandler=S(this._error,this)),this.dependencies=f.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},T(this.resources,e),this.resources.dataSource=f.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=S(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},T(this.assignments,e),this.assignments.dataSource=f.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this,n=this._editor=new u(this.wrapper,T({},this.options,{target:this,resources:{field:this.resources.field,editor:S(this._createResourceEditor,this)},createButton:S(this._createPopupButton,this)}));n.bind("cancel",function(n){var i=e.dataSource.getByUid(n.model.uid);return e.trigger("cancel",{container:n.container,task:i})?(n.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var n=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:n})&&t.preventDefault()}).bind("save",function(t){var n=e.dataSource.getByUid(t.model.uid);e.saveTask(n,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)})},_createResourceEditor:function(e,t){var n=this,i=t instanceof y?t:t.model,r=i.get("id"),o=this.options.messages,a=n.resources.field,s=this._resourceEditor=new h(e,{resourcesField:a,data:this._wrapResourceData(r),model:i,messages:T({},o.editor),buttons:[{name:"update",text:o.save,className:p.styles.primary},{name:"cancel",text:o.cancel}],createButton:S(this._createPopupButton,this),save:function(e){n._updateAssignments(e.model.get("id"),e.model.get(a))}});s.open()},_createPopupButton:function(e){var t=e.name||e.text,n={className:p.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)&&(e.className&&(e.className+=" "+n.className),n=T(!0,n,e)),f.template(j)(n)},view:function(e){return this.timeline.view(e)},dataItem:function(e){var t,n;return e?(t=this.list,n=t.content.find(e),t._modelFromElement(n)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var n,i,r,o,a,s,l,c=this.assignments.dataSource,d=this.assignments.dataTaskIdField,u=this.assignments.dataResourceIdField,h=this.assignments.dataValueField,p=!1,f=new b(c.view()).filter({field:d,operator:"eq",value:e}).toArray();f.length;){for(n=f[0],o=0,a=t.length;a>o;o++)if(i=t[o],n.get(u)===i.get("id")){r=t[o].get("value"),n.set(h,r),t.splice(o,1),p=!0;break}p||c.remove(n),p=!1,f.shift()}for(s=0,l=t.length;l>s;s++)i=t[s],n=c._createNewModel(),n[d]=e,n[u]=i.get("id"),n[h]=i.get("value"),c.add(n);c.sync()},cancelTask:function(){var e=this._editor,t=e.container;t&&e.close()},editTask:function(e){var t,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&(t=this.dataSource._createNewModel(n.toJSON()),t.uid=n.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var n=this._editor,i=n.container,r=n.editable;i&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var n=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[n]&&this._updateAssignments(e.get("id"),t[n]),this._syncDataSource())},removeTask:function(e){var t=this,n="string"==typeof e?this.dataSource.getByUid(e):e;n&&this._taskConfirm(function(e){e||t._removeTask(n)},n)},_createTask:function(e,n){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,n===t?i.add(e):i.insert(n,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},removeDependency:function(e){var t=this,n="string"==typeof e?this.dependencies.getByUid(e):e;n&&this._dependencyConfirm(function(e){e||t._removeDependency(n)},n)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var n=0,i=t.length;i>n;n++)this.dependencies.remove(t[n]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeResourceAssignments:function(e){var t,n,i=this.assignments.dataSource,r=i.view(),o={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(r=new b(r).filter(o).toArray(),this._preventRefresh=!0,t=0,n=r.length;n>t;t++)i.remove(r[t]);this._preventRefresh=!1,i.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeResourceAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_taskConfirm:function(e,t){this._confirm(e,{model:t,text:V,title:this.options.messages.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){this._confirm(e,{model:t,text:U,title:this.options.messages.deleteDependencyWindowTitle})},_confirm:function(e,t){var n,i,r=this.options.editable;r===!0||r.confirmation!==!1?(n=this.options.messages,i=[{name:"delete",text:n.destroy,className:p.styles.primary,click:function(){e()}},{name:"cancel",text:n.cancel,click:function(){e(!0)}}],this.showDialog(T(!0,{},t,{buttons:i}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,i,r,o,a;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource,t=e.taskTree(),i=this._scrollToUid,a=-1,this.current&&(o=this.current.closest("tr").attr(f.attr("uid")),a=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(t),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(t),this.timeline._render(t),this.timeline._renderDependencies(this.dependencies.view()),i&&(this._scrollTo(i),this.select(n(i))),(i||o)&&a>=0&&(r=this.list.content.find("tr"+n(i||o)+" > td:eq("+a+")"),this._current(r)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,n,i=this.resources,r=this.assignments,o=function(){var e=r.dataSource.view(),t={field:r.dataTaskIdField};return e=new b(e).group(t).toArray()},a=o(),s=function(e,t){var n,r,o=e.get("id");for(f.setter(i.field)(e,new w([])),n=0,r=a.length;r>n;n++)a[n].value===o&&t(e,a[n].items)},l=function(e,t){var n,o,a,s,l,c,d,u;for(n=0,o=t.length;o>n;n++)a=t[n],s=i.dataSource.get(a.get(r.dataResourceIdField)),l=a.get(r.dataValueField),c=a.get(r.dataResourceIdField),d=s.get(i.dataFormatField)||P,u=f.toString(l,d),e[i.field].push(new y({id:c,name:s.get(i.dataTextField),color:s.get(i.dataColorField),value:l,formatedValue:u}))};for(t=0,n=e.length;n>t;t++)s(e[t],l)},_wrapResourceData:function(e){var t,n,i,r=this,o=[],a=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),l=new b(s).filter({field:r.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),c=function(e){var t=null;return new b(l).filter({field:r.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(r.assignments.dataValueField)}),t};for(n=0,i=a.length;i>n;n++)t=a[n],o.push({id:t.get("id"),name:t.get(r.resources.dataTextField),format:t.get(r.resources.dataFormatField)||P,value:c(t.id)});return o},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){f.ui.progress(this.element,e)},_resizable:function(){var t,n,i,r=this.wrapper,o=p.styles,a=N+o.gridContent,s=r.find(N+o.list),l=r.find(N+o.timeline);this._resizeDraggable=r.find(N+o.splitBar).height(s.height()).hover(function(){e(this).addClass(o.splitBarHover)},function(){e(this).removeClass(o.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:N+o.splitBar,start:function(){t=s.width(),n=l.width(),i=l.find(a).scrollLeft()},resize:function(e){var r=e.x.initialDelta;0>t+r||0>n-r||(s.width(t+r),l.width(n-r),l.find(a).scrollLeft(i+r))}}).data("kendoResizable")},_scrollable:function(){var t=p.styles,n=N+t.gridContent,i=N+t.gridHeaderWrap,r=this.timeline.element,o=this.list.element;r.find(n).on("scroll",function(){r.find(i).scrollLeft(this.scrollLeft),o.find(n).scrollTop(this.scrollTop)}),o.find(n).on("scroll",function(){o.find(i).scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+M+" mousewheel"+M,function(t){var i=r.find(n),o=i.scrollTop(),a=f.wheelDeltaY(t);a&&(t.preventDefault(),e(t.currentTarget).one("wheel"+M,!1),i.scrollTop(o+-a))})},_navigatable:function(){var i,r=this,a=this.options.navigatable,s=this.options.editable,l=this.list.header.find("table"),c=this.list.content.find("table"),d=p.styles,u=this.timeline.element.find(N+d.gridContent),h=l.add(c),g=n(),m={collapse:!1,expand:!0},v=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;u.scrollLeft(u.scrollLeft()+(e?-t:t))},_=function(e){var t=r.current.parent("tr"+n()),i=r.current.index(),a=t[e]();0!==r.select().length&&r.clearSelection(),0!==a.length?(r._current(a.children("td:eq("+i+")")),r._scrollTo(r.current)):r.current.is("td")&&"prev"==e?o(l):r.current.is("th")&&"next"==e&&o(c)},y=function(e){var t=r.current[e]();0!==t.length&&(r._current(t),i=r.current.index())},w=function(e){var t=r.dataItem(r.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},b=function(){var e,t;r.options.editable&&!r.list.editable&&(e=r.select(),t=f.attr("uid"),e.length&&r.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+M,"tr"+g+", div"+g+":not("+N+d.line+")",function(t){var i,l=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(i=l.is("tr")?e(t.target).closest("td"):r.list.content.find("tr"+n(l.attr(f.attr("uid")))+" > td:first"),r._current(i)),!a&&!s||c||setTimeout(function(){o(r.list.content.find("table"),!0)},2))}),a!==!0?(c.on("keydown"+M,function(e){e.keyCode==E.DELETE&&b()}),t):(h.on("focus"+M,function(){var t=this===c.get(0)?"td":"th",n=(e(this),r.select()),o=r.current||e(n.length?n:this).find(t+":eq("+(i||0)+")");r._current(o)}).on("blur"+M,function(){r._current(),this==l&&e(this).attr(I,-1)}).on("keydown"+M,function(e){var t,n=e.keyCode;if(r.current)switch(t=r.current.is("td"),n){case E.RIGHT:e.preventDefault(),e.altKey?v():e.ctrlKey?w(m.expand):y("next");break;case E.LEFT:e.preventDefault(),e.altKey?v(!0):e.ctrlKey?w(m.collapse):y("prev");break;case E.UP:e.preventDefault(),_("prev");break;case E.DOWN:e.preventDefault(),_("next");break;case E.SPACEBAR:e.preventDefault(),t&&r.select(r.current.closest("tr"));break;case E.ENTER:e.preventDefault(),t?r.options.editable&&(r._cachedCurrent=r.current,r.list._startEditHandler(r.current),e.stopPropagation()):r.current.children("a.k-link").click();break;case E.ESC:e.stopPropagation();break;case E.DELETE:t&&b();break;default:n>=49&&57>=n&&r.view(r.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var n,i=p.styles;this.current&&this.current.length&&this.current.removeClass(i.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(i.focused).attr("id",O),n=e(f._activeElement()),n.is("table")&&this.wrapper.find(n).length>0&&n.removeAttr(L).attr(L,O)):this.current=null},_dataBind:function(){var t,n=this;n.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){n._preventRefresh=!1,n._preventDependencyRefresh=!1,n.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.list._adjustHeight()}}),f.PDFMixin&&f.PDFMixin.extend(p.prototype),f.ui.plugin(p),T(!0,p,{styles:Q})}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=[],r=e.className;for(t=0,n=e.level;n>t;t++)i.push(c("span",{className:r}));return i}var i,r,o,a=kendo.data,s=e.extend,l=kendo.dom,c=l.element,d=l.text,u=l.html,h=kendo.ui,p=h.DataBoundWidget,f=a.DataSource,g=a.ObservableArray,m=a.Query,v=a.Model,_=e.proxy,y=e.map,w=e.grep,b="string",k="change",x="error",C="progress",S=".",T=".kendoTreeList",D="click",A="mousedown",E="edit",M="save",P="expand",I="collapse",z="remove",F="dataBinding",R="dataBound",B="cancel",L="filterMenuInit",O={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},H={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},N=v.define({id:"id",fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){v.fn.init.call(this,e),this._loaded=!1},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return v.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e}}),V=f.extend({init:function(e){f.fn.init.call(this,s(!0,{},{schema:{modelBase:N,model:N}},e))},_readData:function(e){var t,n,i=[],r=this.data();for(t=0,n=r.length;n>t;t++)i.push(r[t]);return i.concat(f.fn._readData.call(this,e))},_readAggregates:function(e){var t=s(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),f.fn.remove.call(this,e)},_filterCallback:function(e){var t,n,i=[],r=e.toArray(),o={};for(t=0;r.length>t;t++)for(n=r[t];n&&(o[n.id]=!0,!o[n.parentId]);)o[n.parentId]=!0,n=this.parentNode(n),n&&i.push(n);return new m(r.concat(i))},_subtree:function(e,t){var n,i,r=e[t]||[],o=this._defaultParentId();for(n=0,i=r.length;i>n;n++)r[n].id!==o&&(r=r.concat(this._subtree(e,r[n].id)));return r},_childrenMap:function(e){var t,n,i,r,o={};for(e=this._observeView(e),t=0;e.length>t;t++)n=e[t],i=n.id,r=n.parentId,o[i]=o[i]||[],o[r]=o[r]||[],o[r].push(n);return o},_calculateAggregates:function(e,t){var n,i,r,o,a,s;for(t=t||{},n={},a=t.filter,a&&(e=m.process(e,{filter:a,filterCallback:_(this._filterCallback,this)}).data),s=this._childrenMap(e),n[this._defaultParentId()]=new m(this._subtree(s,this._defaultParentId())).aggregate(t.aggregate),o=0;e.length>o;o++)i=e[o],r=this._subtree(s,i.id),n[i.id]=new m(r).aggregate(t.aggregate);return n},_queryProcess:function(e,t){var n,i,r,o,a,s,l;for(t=t||{},t.filterCallback=_(this._filterCallback,this),n=this._defaultParentId(),i=m.process(e,t),r=this._childrenMap(i.data),e=r[n]||[],a=0;e.length>a;a++)s=e[a],s.id!==n&&(l=r[s.id],o=!(!l||!l.length),s.loaded()||s.loaded(o),(s.loaded()||s.hasChildren!==!0)&&(s.hasChildren=o),o&&e.splice.apply(e,[a+1,0].concat(l)));return i.data=e,i},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},read:function(e){return e&&e.id||(this._data=this._observe([])),f.fn.read.call(this,e)},load:function(e){var t="_query";return!e.loaded()&&e.hasChildren&&(t="read"),this[t]({id:e.id}).then(_(this._modelLoaded,this,e.id),_(this._modelError,this,e.id))},_byParentId:function(e,t){var n,i,r=[],o=this.view();if(e===t)return[];for(i=0;o.length>i;i++)n=o.at(i),n.parentId==e&&r.push(n);return r},_defaultParentId:function(){return this.reader.model.fn.defaults.parentId},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof N||(e=this.get(e));do e=this.parentNode(e),t++;while(e);return t},filter:function(e){var n=f.fn.filter;return e===t?n.call(this,e):(n.call(this,e),t)}});V.create=function(t){return e.isArray(t)?t={data:t}:t instanceof g&&(t={data:t.toJSON()}),t instanceof V?t:new V(t)},i=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=s(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new h.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,n,i,r=[];for(t=0,n=e.length;n>t;t++)i=e[t],this._isEditable(i)&&r.push({field:i.field,format:i.format,editor:i.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty(),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),r=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._attachHandlers(),this.open()},events:[B,M],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,n=[];
this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(n),this.fields=[]):this._appendFields(n),this._appendButtons(n),new l.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new h.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===b&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(u(t))},_appendFields:function(e){var t,n,i,r=this.options.columns;for(t=0,n=r.length;n>t;t++)i=r[t],i.command||(e.push(u('<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>")),e.push(this._isEditable(i)?u("<div "+kendo.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'):c("div",{"class":"k-edit-field"},[this.options.fieldRenderer(i,this.model)])))},_appendButtons:function(e){e.push(c("div",{"class":"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=_(this._cancel,this);this.wrapper.on(D+T,".k-grid-cancel",this._cancelProxy),this._saveProxy=_(this._save,this),this.wrapper.on(D+T,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(T)},_cancel:function(e){this.trigger(B,e)},_save:function(){this.trigger(M)},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",_(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),i.fn.destroy.call(this)}}),o=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._sortable(),this._filterable(),this._selectable(),this._attachEvents(),this._toolbar(),this._scrollable(),this.options.autoBind&&this.dataSource.fetch(),this._adjustHeight(),kendo.notify(this)},_scrollable:function(){var e,t;this.options.scrollable&&(e=this.header.closest(".k-grid-header-wrap"),this.content.closest(".k-grid-content").bind("scroll"+T,function(){e.scrollLeft(this.scrollLeft)}),t=kendo.touchScroller(this.content.closest("div")),t&&t.movable&&(this._touchScroller=t))},_progress:function(){var e=this.options.messages;this.content.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:O.icon+" "+O.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){e=e||{},"itemchange"==e.action&&this.editor||this.trigger(F)||(this._angularItems("cleanup"),this._angularFooters("cleanup"),this._cancelEditor(),this._render(),this._adjustHeight(),this._angularItems("compile"),this._angularFooters("compile"),this.trigger(R))},_angularFooters:function(t){var n,i,r,o=this.dataSource.aggregates(),a=this.content.find("tr").filter(function(){return e(this).hasClass(O.footerTemplate)});for(n=0;a.length>n;n++)i=a.eq(n),r=o[i.attr("data-parentId")],this._angularFooter(t,i.find("td").get(),r)},_angularFooter:function(e,t,n){var i=this.columns;this.angular(e,function(){return{elements:t,data:y(i,function(e){return{column:e,aggregate:n&&n[e.field]}})}})},items:function(){return this.content.find("tr").filter(function(){return!e(this).hasClass(O.footerTemplate)})},_showStatus:function(t){var n=this.element.find(".k-status");n.length||(n=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this.content.closest(S+O.gridContent).hide(),n.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),this.content.closest(S+O.gridContent).show()},_adjustHeight:function(){var e,t=this.element,n=t.find(S+O.gridContentWrap),i=t.find(S+O.gridHeader),r=t.find(S+O.gridToolbar);t.height(this.options.height),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),e.height(""),t!=n)},e(t)&&n.height(t.height()-i.outerHeight()-r.outerHeight())},destroy:function(){p.fn.destroy.call(this);var e=this.dataSource;e.unbind(k,this._refreshHandler),e.unbind(x,this._errorHandler),e.unbind(C,this._progressHandler),this._destroyEditor(),this.element.off(T),this._touchScroller&&this._touchScroller.destroy(),this._refreshHandler=this._errorHandler=this._progressHandler=null,this.header=this.content=this.element=null,this._statusTree=this._headerTree=this._contentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},filterable:!1,editable:!1},events:[k,E,M,z,P,I,F,R,B,L],_toggle:function(e,n){var i=e.loaded();e._error&&(e.expanded=!1,e._error=t),(i||!e.expanded)&&(t===n&&(n=!e.expanded),e.expanded=n,i||this.dataSource.load(e).always(_(this.refresh,this)),this.refresh())},expand:function(e){this._toggle(this.dataItem(e),!0)},collapse:function(e){this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.currentTarget),i=this.dataItem(n),r=i.expanded?I:P;this.trigger(r,{model:i})||this._toggle(i),t.preventDefault()},_attachEvents:function(){var e=S+O.iconCollapse+", ."+O.iconExpand+", ."+O.refresh,t=S+O.retry,n=this.dataSource;this.element.on(A+T,e,_(this._toggleChildren,this)).on(D+T,t,_(n.fetch,n)).on(D+T,".k-button[data-command]",_(this._commandClick,this))},_commandByName:function(e){var t,n,i,r=this.columns;if(e=e.toLowerCase(),H[e])return H[e];for(t=0;r.length>t;t++)if(i=r[t].command)for(n=0;i.length>n;n++)if(i[n].name.toLowerCase()==e)return i[n]},_commandClick:function(n){var i=e(n.currentTarget),r=i.attr("data-command"),o=this._commandByName(r),a=i.closest("tr");a=a.length?a:t,o&&(o.methodName?this[o.methodName](a):o.click&&o.click.call(this,n))},_columns:function(){var e,t=this.options.columns||[];this.columns=y(t,function(e){return e="string"==typeof e?{field:e}:e,s({encoded:!0},e)}),e=w(this.columns,function(e){return e.expandable}),this.columns.length&&!e.length&&(this.columns[0].expandable=!0),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,n,i=this.columns;for(e=0,t=i.length;t>e;e++)n=i[e],n.template&&(n.template=kendo.template(n.template)),n.headerTemplate&&(n.headerTemplate=kendo.template(n.headerTemplate)),n.footerTemplate&&(n.footerTemplate=kendo.template(n.footerTemplate))},_columnAttributes:function(){var e,t,n,i,r,o,a=this.columns;for(e=0,t=a.length;t>e;e++)if(n=a[e].attributes,n&&n.style)for(i=n.style.split(";"),n.style={},r=0;i.length>r;r++)o=i[r].split(":"),n.style[o[0]]=o[1]},_layout:function(){var e,t,n=this.element,i=this._colgroup(),r="";this.wrapper=n.addClass(O.wrapper),r="<div class='#= gridHeader #' style=\"padding-right: "+kendo.support.scrollbar()+"px;\"><div class='#= gridHeaderWrap #'><table role='grid'>"+i+"<thead role='rowgroup' /></table></div></div><div class='#= gridContentWrap #'><table role='treegrid' tabindex='0'>"+i+"<tbody /></table></div>",this.options.scrollable||(r="<table role='treegrid' tabindex='0'>"+i+"<thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(r="<div class='#= header # #= gridToolbar #' />"+r),n.append(kendo.template(r)(O)+"<div class='k-status' />"),this.toolbar=n.find(S+O.gridToolbar),e=this.header=n.find(S+O.gridHeader).find("thead").addBack().filter("thead"),this._headerTree=new l.Tree(this.header[0]),this._headerTree.render([c("tr",{role:"row"},this._ths())]),t=this.columns,this.angular("compile",function(){return{elements:e.find("th.k-header").get(),data:y(t,function(e){return{column:e}})}}),this.content=n.find(S+O.gridContentWrap).find("tbody"),this.content.length||(this.content=n.find("tbody")),this._contentTree=new l.Tree(this.content[0]),this._statusTree=new l.Tree(this.element.children(".k-status")[0])},_toolbar:function(){var t,n=this.options.toolbar,i=this.toolbar;n&&(e.isArray(n)?(t=this._buildCommands(n),new l.Tree(i[0]).render(t)):i.append(kendo.template(n)({})),this.angular("compile",function(){return{elements:i.get()}}))},_render:function(e){var t,n,i;e=e||{},t=this.options.messages,n=this.dataSource.rootNodes(),i=this.dataSource.aggregates(),this._absoluteIndex=0,e.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[O.button,O.retry].join(" "),messages:t})):n.length?(this._hideStatus(),this._contentTree.render(this._trs({aggregates:e.aggregates,data:n,visible:!0,level:0}))):this._showStatus(kendo.htmlEncode(t.noRows))},_ths:function(){var e,t,n,i,r,o,a=this.columns,s=[];for(r=0,o=a.length;o>r;r++)e=a[r],n=[],i=[O.header],t=e.headerTemplate?e.headerTemplate({}):e.title||e.field||"",n.push(e.sortable?c("a",{href:"#",className:O.link},[d(t)]):e.headerTemplate?u(t):d(t)),s.push(c("th",{"data-field":e.field,"data-title":e.title,className:i.join(" "),role:"columnheader"},n));return s},_colgroup:function(){var e,t,n,i=this.columns,r=[];for(t=0,n=i.length;n>t;t++)r.push("<col "),e=i[t].width,e&&0!==parseInt(e,10)&&(r.push("style='width:"),r.push("string"==typeof e?e:e+"px"),r.push("'")),r.push("/>");return"<colgroup>"+r.join("")+"</colgroup>"},_trs:function(e){var n,i,r,o,a,s,l,c,d=[],u=e.level,h=e.data,p=this.dataSource,f=p.aggregates()||{};for(s=0,l=h.length;l>s;s++)r=[],n=h[s],a=n.loaded()&&p.childNodes(n),o=a&&a.length,i={"data-uid":n.uid,role:"row"},o&&(i["aria-expanded"]=!!n.expanded),this._absoluteIndex%2!==0&&r.push(O.alt),e.visible?this._absoluteIndex++:i.style={display:"none"},o&&r.push(O.group),n._edit&&r.push("k-grid-edit-row"),i.className=r.join(" ")||t,d.push(this._tds({model:n,attr:i,level:u},_(this._td,this))),o&&(d=d.concat(this._trs({parentId:n.id,aggregates:f,visible:e.visible&&!!n.expanded,data:a,level:u+1})));return this._hasFooterTemplate()&&(c=e.parentId||null,i={className:O.footerTemplate,"data-parentId":c},e.visible||(i.style={display:"none"}),d.push(this._tds({model:f[c],attr:i,level:u},this._footerTd))),d},_footerTd:function(t){var i=[],r=t.column,o=t.column.footerTemplate||e.noop,a=t.model[r.field]||{},l={role:"gridcell"};return r.expandable&&(i=i.concat(n({level:t.level+1,className:O.iconPlaceHolder}))),r.attributes&&s(l,r.attributes),i.push(d(o(a)||"")),c("td",l,i)},_hasFooterTemplate:function(){return!!w(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t){var n,i,r,o=[],a=this.columns;for(i=0,r=a.length;r>i;i++)n=a[i],o.push(t({model:e.model,column:n,level:e.level}));return c("tr",e.attr,o)},_td:function(e){var t,i=[],r=e.model,o=e.column,a={role:"gridcell"};return r._edit&&o.field&&r.editable(o.field)?a[kendo.attr("container-for")]=o.field:(o.expandable&&(i=n({level:e.level,className:O.iconPlaceHolder}),t=[O.icon],t.push(r.hasChildren?r.expanded?O.iconCollapse:O.iconExpand:O.iconHidden),r._error?t.push(O.refresh):!r.loaded()&&r.expanded&&t.push(O.loading),i.push(c("span",{className:t.join(" ")}))),o.attributes&&s(a,o.attributes),o.command?i=this._buildCommands(r._edit?["update","canceledit"]:o.command):i.push(this._cellContent(o,r))),c("td",a,i)},_cellContent:function(e,n){var i;return e.template?i=e.template(n):e.field&&(i=n.get(e.field),e.format&&(i=kendo.format(e.format,i))),t===i&&(i=""),e.template||!e.encoded?u(i):d(i)},_buildCommands:function(e){var t,n=[];for(t=0;e.length>t;t++)n.push(this._button(e[t]));return n},_button:function(e){var t=(e.name||e).toLowerCase(),n=this.options.messages.commands[t],i=[];return e=s({},H[t],{text:n},e),e.imageClass&&i.push(c("span",{className:["k-icon",e.imageClass].join(" ")})),c("button",{"data-command":t,className:["k-button k-button-icontext",e.className].join(" ")},i.concat([d(e.text||e.name)]))},_sortable:function(){var e,t,n,i,r,o=this.columns,a=this.header.find("th"),l=kendo.attr("field"),c=this.options.sortable;if(c)for(i=0,r=a.length;r>i;i++)e=o[i],e.sortable!==!1&&!e.command&&e.field&&(n=a.eq(i),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr(l,e.field).kendoColumnSorter(s({},c,e.sortable,{dataSource:this.dataSource})))},_filterable:function(){var e,t,n,i,r=this.header.find("th"),o=this.options.filterable;if(o)for(i=_(function(e){this.trigger(L,{field:e.field,container:e.container})},this),e=0,t=r.length;t>e;e++)n=this.columns[e],n.command||n.filterable===!1||r.eq(e).kendoFilterMenu(s(!0,{},o,n.filterable,{dataSource:this.dataSource,init:i}))},_change:function(){this.trigger(k)},_selectable:function(){var e,t=this.options.selectable;t&&(t=kendo.ui.Selectable.parseOptions(t),e=">tr:not(.k-footer-template)",t.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(this.content,{filter:e,aria:!0,multiple:t.multiple,change:_(this._change,this)}))},select:function(e){var n=this.selectable;return t===e||n.options.multiple||(n.clear(),e=e.first()),n.value(e)},clearSelection:function(){var e=this.select();e.length&&(this.selectable.clear(),this.trigger(k))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind(k,this._refreshHandler),t.unbind(x,this._errorHandler),t.unbind(C,this._progressHandler)),this._refreshHandler=_(this.refresh,this),this._errorHandler=_(this._error,this),this._progressHandler=_(this._progress,this),t=this.dataSource=V.create(e),t.bind(k,this._refreshHandler),t.bind(x,this._errorHandler),t.bind(C,this._progressHandler)},setDataSource:function(e){this._dataSource(e),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){var n=e(t).closest("tr"),i=this.dataSource.getByUid(n.attr(kendo.attr("uid")));return i},editRow:function(e){var t;typeof e===b&&(e=this.content.find(e)),t=this.dataItem(e),t&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger(E,{container:this.editor.element,model:t}))},_cancelEdit:function(e){e=s(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger(B,e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.element},t.end()&&!this.trigger(M,e)&&this.dataSource.sync())},addRow:function(e){var n=this.editor,i=0,r={};if(!n||n.end())return e?(e instanceof N||(e=this.dataItem(e)),r.parentId=e.id,i=this.dataSource.indexOf(e)+1,e.set("expanded",!0),this.dataSource.load(e).then(_(this._insertAt,this,r,i)),t):(this._insertAt(r,i),t)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var n=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]");this.editRow(n)},removeRow:function(e){var t=this.dataItem(e),n={model:t,row:e};t&&!this.trigger(z,n)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t=this.content.find("["+kendo.attr("uid")+"="+e.uid+"]"),n=this._editMode(),o={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template};"inline"==n?this.editor=new i(t,o):(s(o,{window:this.options.editable.window,commandRenderer:_(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:_(this.saveRow,this),cancel:_(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new r(t,o))},_editMode:function(){var e="inline",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()}}),kendo.ExcelMixin&&kendo.ExcelMixin.extend(o.prototype),kendo.PDFMixin&&kendo.PDFMixin.extend(o.prototype),s(!0,kendo.data,{TreeListDataSource:V,TreeListModel:N}),s(!0,kendo.ui,{TreeList:o}),h.plugin(o)}(window.kendo.jQuery),function(e){function t(e){for(var t,n=0,i=e.length;i>n;n++)if(2==e[n].type){t=!0;break}t&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}function n(e){return{name:e.uniqueName,type:e.type}}function i(e){for(var t=0,n=e.length;n>t;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}function r(t){var n=e(t).closest(".k-pivot-setting");return n.length?n.data("kendoPivotSettingTarget"):null}function o(e,t,n){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:n}}function a(e){var t=e.name;return[o(t,e.value,"value"),o(t,e.goal,"goal"),o(t,e.status,"status"),o(t,e.trend,"trend")]}var s=window.kendo,l=s.ui,c=l.Widget,d=".kendoPivotConfigurator",u="mouseenter"+d+" mouseleave"+d,h=s.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),p=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),s.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=e.proxy(this.refresh,this),this.dataSource=s.data.PivotDataSource.create(this.options.dataSource),this.dataSource.bind("change",this._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var n=this;return s.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(r){var o,s,l;e.isEmptyObject(r.data)?(o=n.dataSource.schemaDimensions(),o.done(function(e){n.dataSource.cubeBuilder||t(e),r.success(e)}).fail(r.error)):(s=n.treeView.dataSource.get(r.data.uniqueName),"[KPIs]"===s.uniqueName?(l=!0,o=n.dataSource.schemaKPIs(),o.done(function(e){r.success(i(e))}).fail(r.error)):"kpi"==s.type&&(l=!0,r.success(a(s))),l||(o=2==s.type?n.dataSource.schemaMeasures():s.dimensionUniqueName?n.dataSource.schemaLevels(r.data.uniqueName):n.dataSource.schemaHierarchies(r.data.uniqueName),o.done(r.success).fail(r.error)))}}})},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var t=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form),i='# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.name #';this.treeView=e("<div/>").appendTo(t).kendoTreeView({template:i,dataTextField:"name",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",n=r(e.dropTarget);n&&n.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){var t,i,o,s,l,c;if(e.preventDefault(),t=r(e.dropTarget),i=this.dataItem(e.sourceNode),t&&t.validate(i)){if(c=i.defaultHierarchy||i.uniqueName,"kpi"===i.type)for(l=a(i),s=l.length,c=[],o=0;s>o;o++)c.push(n(l[o]));else i.type&&(c=[n(i)]);t.add(c)}}}).data("kendoTreeView")},_createTarget:function(t,n){var i='<li class="k-item k-header" data-'+s.ns+'name="${data.name}">${data.name}',r=n.sortable,o="";return r&&(o+="#if (data.sortIcon) {#",o+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',o+="#}#"),(n.filterable||r)&&(o+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),o+='<span class="k-icon k-si-close k-setting-delete"></span>',i+='<span class="k-field-actions">'+o+"</span></li>",new s.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var n=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return n.find(".k-list").append(t.clone()),n},template:i,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},n))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),n=e(h({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),i=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(n.last()),r=e(h({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),o=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),a=e(h({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(a.last()),l=this.options;this.columns=this._createTarget(i,{filterable:l.filterable,sortable:l.sortable,connectWith:o,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(o,{filterable:l.filterable,setting:"rows",connectWith:i,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(s,{setting:"measures",messages:{empty:l.messages.measures}}),i.add(o).add(s).on(u,".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,n=this.element,i=this.options.height;i&&n.is(":visible")&&(n.height(i),t=n.children(".k-columns").children("div.k-state-default"),e=(n.outerHeight()-n.innerHeight())/2,i=i-(t.outerHeight(!0)-t.height())-e,t.height(i))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize()},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(d),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});l.plugin(p)}(window.kendo.jQuery),function(e,t,n){"use strict";function i(e){var t=k;try{return k=function(e){return e()},e()}finally{k=t}}function r(e,i,r,o){i[r]=t.copy(e.$eval(o)),i[r]===n&&o.match(/^\w*$/)&&C.warn(r+" attribute resolved to undefined. Maybe you meant to use a string literal like: '"+o+"'?")}function o(i,o,s,l,c){function d(){var n,d,h,f,g,m,v,_,y;return s.kRebind&&(n=e(e(o)[0].cloneNode(!0))),d=l.replace(/^kendo/,""),h=t.extend({},s.defaultOptions,i.$eval(s.kOptions||s.options)),(f=e(o)[l])?(g=f.widget.prototype.options,m=f.widget.prototype.events,e.each(s,function(e,t){var n,o,a,s;"source"!==e&&"kDataSource"!==e&&(n="data"+e.charAt(0).toUpperCase()+e.slice(1),0===e.indexOf("on")&&(o=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()}),m.indexOf(o)>-1&&(h[o]=t)),g.hasOwnProperty(n)?r(i,h,n,t):g.hasOwnProperty(e)&&!A[e]?r(i,h,e,t):D[e]||(a=e.match(/^k(On)?([A-Z].*)/),a&&(s=a[2].charAt(0).toLowerCase()+a[2].slice(1),a[1]&&"kOnLabel"!=e?h[s]=t:("kOnLabel"==e&&(s="onLabel"),r(i,h,s,t)))))}),v=s.kDataSource||s.source,v&&(h.dataSource=T(i,o,d,v)),h.$angular=[i],o.is("select")&&!function(t){if(t.length>0){var n=e(t[0]);!/\S/.test(n.text())&&/^\?/.test(n.val())&&n.remove()}}(o[0].options),_=f.call(o,S=h).data(l),a(_,i,s,l,c),i.$emit("kendoWidgetCreated",_),y=u(i,_),s.kRebind&&p(_,i,o,n,s.kRebind,y),_):(window.console.error("Could not find: "+l),null)}var h,f=s.kNgDelay,g=i.$eval(f);return f&&!g?(h=i.$watch(f,function(e,t){e!==t&&(h(),o.removeAttr(s.$attr.kNgDelay),f=null,k(d))}),n):d()}function a(e,t,n,i,r){if(n[r]){var o=b(n[r]).assign;if(!o)throw Error(r+" attribute used but expression in it is not assignable: "+n[i]);o(t,e)}}function s(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}function l(e){return E.test(e[0].tagName)}function c(e,t,i,r,o){var a,c,d,u;e.value&&(a=l(i)?function(){return s(i)}:function(){return e.value()},r.$render=function(){var t=r.$viewValue;t===n&&(t=r.$modelValue),setTimeout(function(){e&&e.value(t)},0)},c=!1,l(i)&&i.on("change",function(){c=!0}),d=function(e){return function(){var n;c||(c=!1,e&&o&&(n=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),n&&o.$setPristine()),m(t))}},e.first("change",d(!1)),e.first("dataBound",d(!0)),u=a(),u!=r.$viewValue&&(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine())}function d(e,t,i){var r,o,a;return"function"!=typeof e.value?(C.warn("k-ng-model specified on a widget that does not have the value() method: "+e.options.name),n):(r=b(i),o=r.assign,a=!1,e.$angular_setLogicValue(r(t)),t.$watch(i,function(t,i){t===n&&(t=null),a||t!==i&&e.$angular_setLogicValue(t)}),e.first("change",function(){a=!0,t.$apply(function(){o(t,e.$angular_getLogicValue())}),a=!1}),n)}function u(e,t){var n=e.$on("$destroy",function(){n(),t&&(t.element&&(t=g(t.element),t&&t.destroy()),t=null)});return n}function h(t,n){function i(){a.disconnect()}function r(){a.observe(e(n)[0],{attributes:!0})}var o,a;window.MutationObserver&&t.wrapper&&(o=[].slice.call(e(n)[0].classList),a=new MutationObserver(function(n){i(),t&&(n.forEach(function(n){var i,r=e(t.wrapper)[0];switch(n.attributeName){case"class":i=[].slice.call(n.target.classList),i.forEach(function(e){o.indexOf(e)<0&&(r.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),o.forEach(function(e){i.indexOf(e)<0&&(r.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),o=i;break;case"disabled":"function"==typeof t.enable&&t.enable(!e(n.target).attr("disabled"));break;case"readonly":"function"==typeof t.readonly&&t.readonly(!!e(n.target).attr("readonly"))}}),r())}),r(),t.first("destroy",i))}function p(t,n,i,r,o,a){var s=n.$watch(o,function(o,l){var c,d,u;o!==l&&(s(),c=e(t.wrapper)[0],d=e(t.element)[0],u=i.injector().get("$compile"),t.destroy(),a&&a(),t=null,c&&d&&(c.parentNode.replaceChild(d,c),e(i).replaceWith(r)),u(r)(n))},!0);m(n)}function f(e,n){function i(e,t){y.directive(e,["directiveFactory",function(n){return n.create(t,e)}])}var r,o,a,s,l=n?"Mobile":"";l+=e.fn.options.name,r=l,o="kendo"+l.charAt(0)+l.substr(1).toLowerCase(),l="kendo"+l,a=l.replace(/([A-Z])/g,"-$1"),-1==P.indexOf(l.replace("kendo",""))&&(s=l===o?[l]:[l,o],t.forEach(s,function(e){y.directive(e,function(){return{restrict:"E",replace:!0,template:function(e){var t=M[r]||"div";return"<"+t+" "+a+">"+e.html()+"</"+t+">"}}})})),I.indexOf(l.replace("kendo",""))>-1||(i(l,l),o!=l&&i(o,l))}function g(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function m(e,t){var n=e.$root||e,i=/^\$(digest|apply)$/.test(n.$$phase);t?i?t():n.$apply(t):i||n.$digest()}function v(t,n){t.$destroy(),n&&e(n).removeData("$scope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function _(n,i,r){var o,a,s;if(e.isArray(n))return t.forEach(n,function(e){_(e,i,r)});if("string"==typeof n){for(o=n.split("."),a=kendo;a&&o.length>0;)a=a[o.shift()];if(!a)return z.push([n,i,r]),!1;n=a.prototype}return s=n[i],n[i]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return s.apply(e,arguments.length>0?arguments:t)}},t)},!0}var y,w,b,k,x,C,S,T,D,A,E,M,P,I,z,F;t&&(y=t.module("kendo.directives",[]),w=t.injector(["ng"]),b=w.get("$parse"),k=w.get("$timeout"),C=w.get("$log"),T=function(){var e={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},t=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,i,r,o){var a=e[r]||"DataSource",s=t(n.$eval(o),a);return n.$watch(o,function(e,n){var r,o;e!==n&&(r=t(e,a),o=g(i),o&&"function"==typeof o.setDataSource&&o.setDataSource(r))}),s}}(),D={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},A={name:!0,title:!0,style:!0},E=/^(input|select|textarea)$/i,y.factory("directiveFactory",["$compile",function(t){var n,i=0,r=!1;return x=t,n=function(t,n){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){this.template=function(e,n){t[e]=kendo.stringify(n)}}],link:function(a,s,l,u){var p=u[0],f=u[1],g=e(s),m=t.replace(/([A-Z])/g,"-$1"),v="hidden"!==g.css("visibility");g.attr(m,g.attr("data-"+m)),g[0].removeAttribute("data-"+m),v&&g.css("visibility","hidden"),++i,k(function(){v&&g.css("visibility","");var u=o(a,s,l,t,n);u&&(p&&c(u,a,s,p,f),l.kNgModel&&d(u,a,l.kNgModel),h(u,s),--i,0===i&&(r||(r=!0,a.$emit("kendoRendered"),e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))))})}}},{create:n}}]),M={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},P=["MobileView","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],I=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"],t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView"],function(e){I.push(e),e="kendo"+e,y.directive(e,function(){return{restrict:"A",link:function(t,n,i){o(t,n,i,e,e)}}})}),function(){function e(e){return function(n){t.forEach(n,function(t){t.fn&&t.fn.options&&t.fn.options.name&&/^[A-Z]/.test(t.fn.options.name)&&f(t,e)})}}t.forEach([kendo.ui,kendo.dataviz&&kendo.dataviz.ui],e(!1)),t.forEach([kendo.mobile&&kendo.mobile.ui],e(!0))}(),z=[],_(kendo.ui,"plugin",function(t,n,i){this.next(),z=e.grep(z,function(e){return!_.apply(null,e)}),f(t,"Mobile"==i)}),_(["ui.Widget","mobile.ui.Widget"],"angular",function(r,o){var a,s=this.self;return"init"==r?(!o&&S&&(o=S),S=null,o&&o.$angular&&(s.$angular_scope=o.$angular[0],s.$angular_init(s.element,o)),n):(a=s.$angular_scope,a&&i(function(){var i,l,c=o(),d=c.elements,u=c.data;if(d.length>0)switch(r){case"cleanup":t.forEach(d,function(e){var n=t.element(e).scope();n&&n!==a&&n.$$kendoScope&&v(n,e)});break;case"compile":i=s.element.injector(),l=i?i.get("$compile"):x,t.forEach(d,function(i,r){var o,s;c.scopeFrom?o=t.element(c.scopeFrom).scope():(s=u&&u[r],s!==n&&(o=e.extend(a.$new(),s),o.$$kendoScope=!0)),l(i)(o||a)}),m(a)}}),n)}),_("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),_("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),_("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem();return e?this.self.options.valuePrimitive?e[this.self.options.dataValueField]:e.toJSON():null}),_("ui.Select","$angular_setLogicValue",function(e){var t=this.self,n=t.options,i=n.dataValueField;i&&!n.valuePrimitive&&(e=null!=e?e[n.dataValueField||n.dataTextField]:null),t.value(e)}),_("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems(),n=this.self.options.dataValueField;return n&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[n]})),t}),_("ui.MultiSelect","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataValueField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]
})),n.value(t)}),_("ui.AutoComplete","$angular_getLogicValue",function(){var e,t,n,i,r,o=this.self.options,a=this.self.value().split(o.separator),s=o.valuePrimitive,l=this.self.dataSource.data(),c=[];for(e=0,t=l.length;t>e;e++)for(n=l[e],i=o.dataTextField?n[o.dataTextField]:n,r=0;a.length>r;r++)if(i===a[r]){c.push(s?i:n.toJSON());break}return c}),_("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,i=n.options.dataTextField;i&&!n.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),n.value(t)}),_("ui.Widget","$angular_init",function(t,n){var i,r,o,a,s=this.self;if(n&&!e.isArray(n))for(i=s.$angular_scope,r=s.events.length;--r>=0;)o=s.events[r],a=n[o],a&&"string"==typeof a&&(n[o]=s.$angular_makeEventHandler(o,i,a))}),_("ui.Widget","$angular_makeEventHandler",function(e,t,n){return n=b(n),function(e){m(t,function(){n(t,{kendoEvent:e})})}}),_(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,n,i){return"change"!=e?this.next():(i=b(i),function(e){var r,o,a,s,l,c,d,u,h,p=e.sender,f=p.options,g={kendoEvent:e};for(t.isString(f.selectable)&&(r=-1!==f.selectable.indexOf("cell"),o=-1!==f.selectable.indexOf("multiple")),a=g.selected=this.select(),s=g.data=[],l=g.columns=[],d=0;a.length>d;d++)u=r?a[d].parentNode:a[d],h=p.dataItem(u),r?(t.element.inArray(h,s)<0&&s.push(h),c=t.element(a[d]).index(),t.element.inArray(c,l)<0&&l.push(c)):s.push(h);o||(g.dataItem=g.data=s[0],g.selected=a[0]),m(n,function(){i(n,g)})})}),_("ui.Grid","$angular_init",function(i,r){if(this.next(),r.columns){var o=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==n&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,o.paramName)+"#</span>")})}}),_("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),_("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),y.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,n){o(e,t,n,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileView","kendoMobileView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,n){n._instance._layout(),n._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,n._instance=o(e,t,n,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,n){n._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,n){o(e,t,n,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,n,i){n.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),o(t,n,i,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,n){n.defaultOptions=e.viewOptions,o(e,t,n,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);y.directive(t,function(){return{restrict:"A",priority:2,link:function(n,i,r){i.attr(kendo.attr(kendo.toHyphens(e)),n.$eval(r[t]))}}})}),F={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var e={};t.forEach(F,function(n,i){t.forEach(n,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+i)})}),t.forEach(e,function(e,t){var n="k"+t,i=kendo.toHyphens(n);y.directive(n,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[n]){t.removeAttr(i);var o=t[0].outerHTML;return function(r,a,s,l){for(var c;!c&&l.length;)c=l.shift();c?(c.template(n,o),t.remove()):C.warn(i+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}())}(window.kendo.jQuery,window.angular);return window.kendo},typeof define=="function"&&define.amd?define:function(_,f){f()});
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js":[function(require,module,exports){
//  This function is trigger the Right SideMenu
(function (window) {
    'use strict';

    function classReg(className) {
        return new RegExp("(^|\\s+)" + className + "(\\s+|$)");
    }

    var hasClass, addClass, removeClass;

    if ('classList' in document.documentElement) {
        hasClass = function (elem, c) {
            return elem.classList.contains(c);
        };
        addClass = function (elem, c) {
            elem.classList.add(c);
        };
        removeClass = function (elem, c) {
            elem.classList.remove(c);
        };
    }
    else {
        hasClass = function (elem, c) {
            return classReg(c).test(elem.className);
        };
        addClass = function (elem, c) {
            if (!hasClass(elem, c)) {
                elem.className = elem.className + ' ' + c;
            }
        };
        removeClass = function (elem, c) {
            elem.className = elem.className.replace(classReg(c), ' ');
        };
    }

    function toggleClass(elem, c) {
        var fn = hasClass(elem, c) ? removeClass : addClass;
        fn(elem, c);
    }

    window.right_menu = {
        // full names
        hasClass: hasClass,
        addClass: addClass,
        removeClass: removeClass,
        toggleClass: toggleClass,
        // short names
        has: hasClass,
        add: addClass,
        remove: removeClass,
        toggle: toggleClass
    };
})(window);

var layout = function () {
    this.menuRightButtonClick = function (menuRightButton, menuRight) {        
        right_menu.toggle(menuRightButton, 'active');
        right_menu.toggle(document.getElementById(menuRight), 'cbp-spmenu-open');
        right_menu.toggle(menuRightButton, 'right-menu-button-open');
    };
}

module.exports = layout;
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js":[function(require,module,exports){
(function (process){
﻿process.env.BROWSERIFYSHIM_DIAGNOSTICS = 1
// Start loading the main app file. Put all of
// your application logic in there.
var $ = jQuery = require('./kendo/2014.3.1119/jquery.min.js');
var m = require('./mithril.js');
//require('./bootstrap.min.js');
require("./ripples.min.js");
require("./material.min.js");
require('./kendo/2014.3.1119/kendo.web.min.js');
require('./jquery.hotkeys.js');
require('./velocity.js');
//        <!-- Top level Mithril References -->
require('./app/app.route.js');
//        <!-- App References -->
require('./core.js');
require('./layout.js');
require('./controls.js');

$(document).ready(function () {
    $.material.init();
});
}).call(this,require('_process'))
},{"./app/app.route.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\app\\app.route.js","./controls.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\controls.js","./core.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\core.js","./jquery.hotkeys.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\jquery.hotkeys.js","./kendo/2014.3.1119/jquery.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\jquery.min.js","./kendo/2014.3.1119/kendo.web.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\kendo\\2014.3.1119\\kendo.web.min.js","./layout.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\layout.js","./material.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js","./mithril.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js","./ripples.min.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js","./velocity.js":"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js","_process":"C:\\Users\\htn01\\AppData\\Roaming\\npm\\node_modules\\watchify\\node_modules\\browserify\\node_modules\\process\\browser.js"}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\material.min.js":[function(require,module,exports){
(function(n){function t(n){return typeof n.which=="undefined"?!0:typeof n.which=="number"&&n.which>0?!n.ctrlKey&&!n.metaKey&&!n.altKey&&n.which!=8:!1}n.expr[":"].notmdproc=function(t){return n(t).data("mdproc")?!1:!0};n.material={options:{withRipples:".tile,.btn:not(.btn-link),.card-image,.navbar a:not(.withoutripple),.dropdown-menu a,.nav-tabs a:not(.withoutripple),.withripple",inputElements:"input.form-control, textarea.form-control, select.form-control",checkboxElements:".checkbox > label > input[type=checkbox]",radioElements:".radio > label > input[type=radio]"},checkbox:function(t){n(t?t:this.options.checkboxElements).filter(":notmdproc").data("mdproc",!0).after("<span class=ripple><\/span><span class=check><\/span>")},radio:function(t){n(t?t:this.options.radioElements).filter(":notmdproc").data("mdproc",!0).after("<span class=circle><\/span><span class=check><\/span>")},input:function(i){n(i?i:this.options.inputElements).filter(":notmdproc").data("mdproc",!0).each(function(){var t=n(this),i,r;t.wrap("<div class=form-control-wrapper><\/div>");t.after("<span class=material-input><\/span>");t.hasClass("floating-label")&&(i=t.attr("placeholder"),t.attr("placeholder",null).removeClass("floating-label"),t.after("<div class=floating-label>"+i+"<\/div>"));(t.val()===null||t.val()=="undefined"||t.val()==="")&&t.addClass("empty");t.parent().next().is("[type=file]")&&(t.parent().addClass("fileinput"),r=t.parent().next().detach(),t.after(r))});n(document).on("change",".checkbox input",function(){n(this).blur()}).on("keydown paste",".form-control",function(i){t(i)&&n(this).removeClass("empty")}).on("keyup change",".form-control",function(){var t=n(this);t.val()===""?t.addClass("empty"):t.removeClass("empty")}).on("focus",".form-control-wrapper.fileinput",function(){n(this).find("input").addClass("focus")}).on("blur",".form-control-wrapper.fileinput",function(){n(this).find("input").removeClass("focus")}).on("change",".form-control-wrapper.fileinput [type=file]",function(){var t="";n.each(n(this)[0].files,function(n,i){console.log(i);t+=i.name+", "});t=t.substring(0,t.length-2);t?n(this).prev().removeClass("empty"):n(this).prev().addClass("empty");n(this).prev().val(t)})},ripples:function(n){ripples.init(n?n:this.options.withRipples)},init:function(){this.ripples();this.input();this.checkbox();this.radio();document.arrive&&document.arrive("input, textarea, select",function(){n.material.init()}),function(){var i=setInterval(function(){n("input").each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100),t;setTimeout(function(){clearInterval(i)},1e4);n(document).on("focus","input",function(){var i=n(this).parents("form").find("input");t=setInterval(function(){i.each(function(){n(this).val()!==n(this).attr("value")&&n(this).trigger("change")})},100)}).on("blur","input",function(){clearInterval(t)})}()}}})(jQuery);
/*
//# sourceMappingURL=material.min.js.map
*/
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\mithril.js":[function(require,module,exports){
var m = (function app(window, undefined) {
	var OBJECT = "[object Object]", ARRAY = "[object Array]", STRING = "[object String]", FUNCTION = "function";
	var type = {}.toString;
	var parser = /(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g, attrParser = /\[(.+?)(?:=("|'|)(.*?)\2)?\]/;
	var voidElements = /^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;

	// caching commonly used variables
	var $document, $location, $requestAnimationFrame, $cancelAnimationFrame;

	// self invoking function needed because of the way mocks work
	function initialize(window){
		$document = window.document;
		$location = window.location;
		$cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;
		$requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;
	}

	initialize(window);


	/*
	 * @typedef {String} Tag
	 * A string that looks like -> div.classname#id[param=one][param2=two]
	 * Which describes a DOM node
	 */

	/*
	 *
	 * @param {Tag} The DOM node tag
	 * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs
	 * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array, or splat (optional)
	 *
	 */
	function m() {
		var args = [].slice.call(arguments);
		var hasAttrs = args[1] != null && type.call(args[1]) == OBJECT && !("tag" in args[1]) && !("subtree" in args[1]);
		var attrs = hasAttrs ? args[1] : {};
		var classAttrName = "class" in attrs ? "class" : "className";
		var cell = {tag: "div", attrs: {}};
		var match, classes = [];
		if (type.call(args[0]) != STRING) throw new Error("selector in m(selector, attrs, children) should be a string")
		while (match = parser.exec(args[0])) {
			if (match[1] == "" && match[2]) cell.tag = match[2];
			else if (match[1] == "#") cell.attrs.id = match[2];
			else if (match[1] == ".") classes.push(match[2]);
			else if (match[3][0] == "[") {
				var pair = attrParser.exec(match[3]);
				cell.attrs[pair[1]] = pair[3] || (pair[2] ? "" :true)
			}
		}
		if (classes.length > 0) cell.attrs[classAttrName] = classes.join(" ");


		var children = hasAttrs ? args[2] : args[1];
		if (type.call(children) == ARRAY) {
			cell.children = children
		}
		else {
			cell.children = hasAttrs ? args.slice(2) : args.slice(1)
		}

		for (var attrName in attrs) {
			if (attrName == classAttrName) cell.attrs[attrName] = (cell.attrs[attrName] || "") + " " + attrs[attrName];
			else cell.attrs[attrName] = attrs[attrName]
		}
		return cell
	}
	function build(parentElement, parentTag, parentCache, parentIndex, data, cached, shouldReattach, index, editable, namespace, configs) {
		//`build` is a recursive function that manages creation/diffing/removal of DOM elements based on comparison between `data` and `cached`
		//the diff algorithm can be summarized as this:
		//1 - compare `data` and `cached`
		//2 - if they are different, copy `data` to `cached` and update the DOM based on what the difference is
		//3 - recursively apply this algorithm for every array and for the children of every virtual element

		//the `cached` data structure is essentially the same as the previous redraw's `data` data structure, with a few additions:
		//- `cached` always has a property called `nodes`, which is a list of DOM elements that correspond to the data represented by the respective virtual element
		//- in order to support attaching `nodes` as a property of `cached`, `cached` is *always* a non-primitive object, i.e. if the data was a string, then cached is a String instance. If data was `null` or `undefined`, cached is `new String("")`
		//- `cached also has a `configContext` property, which is the state storage object exposed by config(element, isInitialized, context)
		//- when `cached` is an Object, it represents a virtual element; when it's an Array, it represents a list of elements; when it's a String, Number or Boolean, it represents a text node

		//`parentElement` is a DOM element used for W3C DOM API calls
		//`parentTag` is only used for handling a corner case for textarea values
		//`parentCache` is used to remove nodes in some multi-node cases
		//`parentIndex` and `index` are used to figure out the offset of nodes. They're artifacts from before arrays started being flattened and are likely refactorable
		//`data` and `cached` are, respectively, the new and old nodes being diffed
		//`shouldReattach` is a flag indicating whether a parent node was recreated (if so, and if this node is reused, then this node must reattach itself to the new parent)
		//`editable` is a flag that indicates whether an ancestor is contenteditable
		//`namespace` indicates the closest HTML namespace as it cascades down from an ancestor
		//`configs` is a list of config functions to run after the topmost `build` call finishes running

		//there's logic that relies on the assumption that null and undefined data are equivalent to empty strings
		//- this prevents lifecycle surprises from procedural helpers that mix implicit and explicit return statements (e.g. function foo() {if (cond) return m("div")}
		//- it simplifies diffing code
		if (data == null) data = "";
		if (data.subtree === "retain") return cached;
		var cachedType = type.call(cached), dataType = type.call(data);
		if (cached == null || cachedType != dataType) {
			if (cached != null) {
				if (parentCache && parentCache.nodes) {
					var offset = index - parentIndex;
					var end = offset + (dataType == ARRAY ? data : cached.nodes).length;
					clear(parentCache.nodes.slice(offset, end), parentCache.slice(offset, end))
				}
				else if (cached.nodes) clear(cached.nodes, cached)
			}
			cached = new data.constructor;
			if (cached.tag) cached = {}; //if constructor creates a virtual dom element, use a blank object as the base cached node instead of copying the virtual el (#277)
			cached.nodes = []
		}

		if (dataType == ARRAY) {
			//recursively flatten array
			for (var i = 0; i < data.length; i++) {
				if (type.call(data[i]) == ARRAY) {
					data = data.concat.apply([], data);
					i-- //check current index again and flatten until there are no more nested arrays at that index
				}
			}
			
			var nodes = [], intact = cached.length === data.length, subArrayCount = 0;

			//keys algorithm: sort elements without recreating them if keys are present
			//1) create a map of all existing keys, and mark all for deletion
			//2) add new keys to map and mark them for addition
			//3) if key exists in new list, change action from deletion to a move
			//4) for each key, handle its corresponding action as marked in previous steps
			//5) copy unkeyed items into their respective gaps
			var DELETION = 1, INSERTION = 2 , MOVE = 3;
			var existing = {}, unkeyed = [], shouldMaintainIdentities = false;
			for (var i = 0; i < cached.length; i++) {
				if (cached[i] && cached[i].attrs && cached[i].attrs.key != null) {
					shouldMaintainIdentities = true;
					existing[cached[i].attrs.key] = {action: DELETION, index: i}
				}
			}
			if (shouldMaintainIdentities) {
				for (var i = 0; i < data.length; i++) {
					if (data[i] && data[i].attrs) {
						if (data[i].attrs.key != null) {
							var key = data[i].attrs.key;
							if (!existing[key]) existing[key] = {action: INSERTION, index: i};
							else existing[key] = {
								action: MOVE,
								index: i,
								from: existing[key].index,
								element: parentElement.childNodes[existing[key].index] || $document.createElement("div")
							}
						}
						else unkeyed.push({index: i, element: parentElement.childNodes[i] || $document.createElement("div")})
					}
				}
				var actions = Object.keys(existing).map(function(key) {return existing[key]});
				var changes = actions.sort(function(a, b) {return a.action - b.action || a.index - b.index});
				var newCached = cached.slice();

				for (var i = 0, change; change = changes[i]; i++) {
					if (change.action == DELETION) {
						clear(cached[change.index].nodes, cached[change.index]);
						newCached.splice(change.index, 1)
					}
					if (change.action == INSERTION) {
						var dummy = $document.createElement("div");
						dummy.key = data[change.index].attrs.key;
						parentElement.insertBefore(dummy, parentElement.childNodes[change.index] || null);
						newCached.splice(change.index, 0, {attrs: {key: data[change.index].attrs.key}, nodes: [dummy]})
					}

					if (change.action == MOVE) {
						if (parentElement.childNodes[change.index] !== change.element && change.element !== null) {
							parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null)
						}
						newCached[change.index] = cached[change.from]
					}
				}
				for (var i = 0; i < unkeyed.length; i++) {
					var change = unkeyed[i];
					parentElement.insertBefore(change.element, parentElement.childNodes[change.index] || null);
					newCached[change.index] = cached[change.index]
				}
				cached = newCached;
				cached.nodes = [];
				for (var i = 0, child; child = parentElement.childNodes[i]; i++) cached.nodes.push(child)
			}
			//end key algorithm

			for (var i = 0, cacheCount = 0; i < data.length; i++) {
				//diff each item in the array
				var item = build(parentElement, parentTag, cached, index, data[i], cached[cacheCount], shouldReattach, index + subArrayCount || subArrayCount, editable, namespace, configs);
				if (item === undefined) continue;
				if (!item.nodes.intact) intact = false;
				if (item.$trusted) {
					//fix offset of next element if item was a trusted string w/ more than one html element
					//the first clause in the regexp matches elements
					//the second clause (after the pipe) matches text nodes
					subArrayCount += (item.match(/<[^\/]|\>\s*[^<]/g) || []).length
				}
				else subArrayCount += type.call(item) == ARRAY ? item.length : 1;
				cached[cacheCount++] = item
			}
			if (!intact) {
				//diff the array itself
				
				//update the list of DOM nodes by collecting the nodes from each item
				for (var i = 0; i < data.length; i++) {
					if (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)
				}
				//remove items from the end of the array if the new array is shorter than the old one
				//if errors ever happen here, the issue is most likely a bug in the construction of the `cached` data structure somewhere earlier in the program
				for (var i = 0, node; node = cached.nodes[i]; i++) {
					if (node.parentNode != null && nodes.indexOf(node) < 0) clear([node], [cached[i]])
				}
				if (data.length < cached.length) cached.length = data.length;
				cached.nodes = nodes
			}
		}
		else if (data != null && dataType == OBJECT) {
			if (!data.attrs) data.attrs = {};
			if (!cached.attrs) cached.attrs = {};

			var dataAttrKeys = Object.keys(data.attrs);
			var hasKeys = dataAttrKeys.length > ("key" in data.attrs ? 1 : 0)
			//if an element is different enough from the one in cache, recreate it
			if (data.tag != cached.tag || dataAttrKeys.join() != Object.keys(cached.attrs).join() || data.attrs.id != cached.attrs.id) {
				if (cached.nodes.length) clear(cached.nodes);
				if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload()
			}
			if (type.call(data.tag) != STRING) return;

			var node, isNew = cached.nodes.length === 0;
			if (data.attrs.xmlns) namespace = data.attrs.xmlns;
			else if (data.tag === "svg") namespace = "http://www.w3.org/2000/svg";
			else if (data.tag === "math") namespace = "http://www.w3.org/1998/Math/MathML";
			if (isNew) {
				if (data.attrs.is) node = namespace === undefined ? $document.createElement(data.tag, data.attrs.is) : $document.createElementNS(namespace, data.tag, data.attrs.is);
				else node = namespace === undefined ? $document.createElement(data.tag) : $document.createElementNS(namespace, data.tag);
				cached = {
					tag: data.tag,
					//set attributes first, then create children
					attrs: dataAttrKeys.length ? setAttributes(node, data.tag, data.attrs, {}, namespace) : {},
					children: data.children != null && data.children.length > 0 ?
						build(node, data.tag, undefined, undefined, data.children, cached.children, true, 0, data.attrs.contenteditable ? node : editable, namespace, configs) :
						data.children,
					nodes: [node]
				};
				if (cached.children && !cached.children.nodes) cached.children.nodes = [];
				//edge case: setting value on <select> doesn't work before children exist, so set it again after children have been created
				if (data.tag == "select" && data.attrs.value) setAttributes(node, data.tag, {value: data.attrs.value}, {}, namespace);
				parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			else {
				node = cached.nodes[0];
				if (dataAttrKeys.length) setAttributes(node, data.tag, data.attrs, cached.attrs, namespace);
				cached.children = build(node, data.tag, undefined, undefined, data.children, cached.children, false, 0, data.attrs.contenteditable ? node : editable, namespace, configs);
				cached.nodes.intact = true;
				if (shouldReattach === true && node != null) parentElement.insertBefore(node, parentElement.childNodes[index] || null)
			}
			//schedule configs to be called. They are called after `build` finishes running
			if (typeof data.attrs["config"] == FUNCTION) {
				var context = cached.configContext = cached.configContext || {};

				// bind
				var callback = function(data, args) {
					return function() {
						return data.attrs["config"].apply(data, args)
					}
				};
				configs.push(callback(data, [node, !isNew, context, cached]))
			}
		}
		else if (typeof dataType != FUNCTION) {
			//handle text nodes
			var nodes;
			if (cached.nodes.length === 0) {
				if (data.$trusted) {
					nodes = injectHTML(parentElement, index, data)
				}
				else {
					nodes = [$document.createTextNode(data)];
					if (!parentElement.nodeName.match(voidElements)) parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null)
				}
				cached = "string number boolean".indexOf(typeof data) > -1 ? new data.constructor(data) : data;
				cached.nodes = nodes
			}
			else if (cached.valueOf() !== data.valueOf() || shouldReattach === true) {
				nodes = cached.nodes;
				if (!editable || editable !== $document.activeElement) {
					if (data.$trusted) {
						clear(nodes, cached);
						nodes = injectHTML(parentElement, index, data)
					}
					else {
						//corner case: replacing the nodeValue of a text node that is a child of a textarea/contenteditable doesn't work
						//we need to update the value property of the parent textarea or the innerHTML of the contenteditable element instead
						if (parentTag === "textarea") parentElement.value = data;
						else if (editable) editable.innerHTML = data;
						else {
							if (nodes[0].nodeType == 1 || nodes.length > 1) { //was a trusted string
								clear(cached.nodes, cached);
								nodes = [$document.createTextNode(data)]
							}
							parentElement.insertBefore(nodes[0], parentElement.childNodes[index] || null);
							nodes[0].nodeValue = data
						}
					}
				}
				cached = new data.constructor(data);
				cached.nodes = nodes
			}
			else cached.nodes.intact = true
		}

		return cached
	}
	function setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {
		for (var attrName in dataAttrs) {
			var dataAttr = dataAttrs[attrName];
			var cachedAttr = cachedAttrs[attrName];
			if (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {
				cachedAttrs[attrName] = dataAttr;
				try {
					//`config` isn't a real attributes, so ignore it
					//we don't ignore `key` because it must be unique and having it on the DOM helps debugging
					if (attrName === "config") continue;
					//hook event handlers to the auto-redrawing system
					else if (typeof dataAttr == FUNCTION && attrName.indexOf("on") == 0) {
						node[attrName] = autoredraw(dataAttr, node)
					}
					//handle `style: {...}`
					else if (attrName === "style" && dataAttr != null && type.call(dataAttr) == OBJECT) {
						for (var rule in dataAttr) {
							if (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) node.style[rule] = dataAttr[rule]
						}
						for (var rule in cachedAttr) {
							if (!(rule in dataAttr)) node.style[rule] = ""
						}
					}
					//handle SVG
					else if (namespace != null) {
						if (attrName === "href") node.setAttributeNS("http://www.w3.org/1999/xlink", "href", dataAttr);
						else if (attrName === "className") node.setAttribute("class", dataAttr);
						else node.setAttribute(attrName, dataAttr)
					}
					//handle cases that are properties (but ignore cases where we should use setAttribute instead)
					//- list and form are typically used as strings, but are DOM element references in js
					//- when using CSS selectors (e.g. `m("[style='']")`), style is used as a string, but it's an object in js
					else if (attrName in node && !(attrName == "list" || attrName == "style" || attrName == "form")) {
						//#348 don't set the value if not needed otherwise cursor placement breaks in Chrome
						if (node[attrName] != dataAttr) node[attrName] = dataAttr
					}
					else node.setAttribute(attrName, dataAttr)
				}
				catch (e) {
					//swallow IE's invalid argument errors to mimic HTML's fallback-to-doing-nothing-on-invalid-attributes behavior
					if (e.message.indexOf("Invalid argument") < 0) throw e
				}
			}
			//#348 dataAttr may not be a string, so use loose comparison (double equal) instead of strict (triple equal)
			else if (attrName === "value" && tag === "input" && node.value != dataAttr) {
				node.value = dataAttr
			}
		}
		return cachedAttrs
	}
	function clear(nodes, cached) {
		for (var i = nodes.length - 1; i > -1; i--) {
			if (nodes[i] && nodes[i].parentNode) {
				try {nodes[i].parentNode.removeChild(nodes[i])}
				catch (e) {} //ignore if this fails due to order of events (see http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)
				cached = [].concat(cached);
				if (cached[i]) unload(cached[i])
			}
		}
		if (nodes.length != 0) nodes.length = 0
	}
	function unload(cached) {
		if (cached.configContext && typeof cached.configContext.onunload == FUNCTION) cached.configContext.onunload();
		if (cached.children) {
			if (type.call(cached.children) == ARRAY) {
				for (var i = 0; i < cached.children.length; i++) unload(cached.children[i])
			}
			else if (cached.children.tag) unload(cached.children)
		}
	}
	function injectHTML(parentElement, index, data) {
		var nextSibling = parentElement.childNodes[index];
		if (nextSibling) {
			var isElement = nextSibling.nodeType != 1;
			var placeholder = $document.createElement("span");
			if (isElement) {
				parentElement.insertBefore(placeholder, nextSibling || null);
				placeholder.insertAdjacentHTML("beforebegin", data);
				parentElement.removeChild(placeholder)
			}
			else nextSibling.insertAdjacentHTML("beforebegin", data)
		}
		else parentElement.insertAdjacentHTML("beforeend", data);
		var nodes = [];
		while (parentElement.childNodes[index] !== nextSibling) {
			nodes.push(parentElement.childNodes[index]);
			index++
		}
		return nodes
	}
	function autoredraw(callback, object) {
		return function(e) {
			e = e || event;
			m.redraw.strategy("diff");
			m.startComputation();
			try {return callback.call(object, e)}
			finally {
				m.endComputation()
			}
		}
	}

	var html;
	var documentNode = {
		appendChild: function(node) {
			if (html === undefined) html = $document.createElement("html");
			if ($document.documentElement && $document.documentElement !== node) {
				$document.replaceChild(node, $document.documentElement)
			}
			else $document.appendChild(node);
			this.childNodes = $document.childNodes
		},
		insertBefore: function(node) {
			this.appendChild(node)
		},
		childNodes: []
	};
	var nodeCache = [], cellCache = {};
	m.render = function(root, cell, forceRecreation) {
		var configs = [];
		if (!root) throw new Error("Please ensure the DOM element exists before rendering a template into it.");
		var id = getCellCacheKey(root);
		var isDocumentRoot = root == $document;
		var node = isDocumentRoot || root == $document.documentElement ? documentNode : root;
		if (isDocumentRoot && cell.tag != "html") cell = {tag: "html", attrs: {}, children: cell};
		if (cellCache[id] === undefined) clear(node.childNodes);
		if (forceRecreation === true) reset(root);
		cellCache[id] = build(node, null, undefined, undefined, cell, cellCache[id], false, 0, null, undefined, configs);
		for (var i = 0; i < configs.length; i++) configs[i]()
	};
	function getCellCacheKey(element) {
		var index = nodeCache.indexOf(element);
		return index < 0 ? nodeCache.push(element) - 1 : index
	}

	m.trust = function(value) {
		value = new String(value);
		value.$trusted = true;
		return value
	};

	function gettersetter(store) {
		var prop = function() {
			if (arguments.length) store = arguments[0];
			return store
		};

		prop.toJSON = function() {
			return store
		};

		return prop
	}

	m.prop = function (store) {
		//note: using non-strict equality check here because we're checking if store is null OR undefined
		if (((store != null && type.call(store) == OBJECT) || typeof store == FUNCTION) && typeof store.then == FUNCTION) {
			return propify(store)
		}

		return gettersetter(store)
	};

	var roots = [], modules = [], controllers = [], lastRedrawId = null, lastRedrawCallTime = 0, computePostRedrawHook = null, prevented = false, topModule;
	var FRAME_BUDGET = 16; //60 frames per second = 1 call per 16 ms
	m.module = function(root, module) {
		var index = roots.indexOf(root);
		if (index < 0) index = roots.length;
		var isPrevented = false;
		if (controllers[index] && typeof controllers[index].onunload == FUNCTION) {
			var event = {
				preventDefault: function() {isPrevented = true}
			};
			controllers[index].onunload(event)
		}
		if (!isPrevented) {
			m.redraw.strategy("all");
			m.startComputation();
			roots[index] = root;
			var currentModule = topModule = module;
			var controller = new module.controller;
			//controllers may call m.module recursively (via m.route redirects, for example)
			//this conditional ensures only the last recursive m.module call is applied
			if (currentModule == topModule) {
				controllers[index] = controller;
				modules[index] = module
			}
			m.endComputation();
			return controllers[index]
		}
	};
	m.redraw = function(force) {
		//lastRedrawId is a positive number if a second redraw is requested before the next animation frame
		//lastRedrawID is null if it's the first redraw and not an event handler
		if (lastRedrawId && force !== true) {
			//when setTimeout: only reschedule redraw if time between now and previous redraw is bigger than a frame, otherwise keep currently scheduled timeout
			//when rAF: always reschedule redraw
			if (new Date - lastRedrawCallTime > FRAME_BUDGET || $requestAnimationFrame == window.requestAnimationFrame) {
				if (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId);
				lastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)
			}
		}
		else {
			redraw();
			lastRedrawId = $requestAnimationFrame(function() {lastRedrawId = null}, FRAME_BUDGET)
		}
	};
	m.redraw.strategy = m.prop();
	function redraw() {
		var mode = m.redraw.strategy();
		for (var i = 0; i < roots.length; i++) {
			if (controllers[i] && mode != "none") {
				m.render(roots[i], modules[i].view(controllers[i]), mode == "all")
			}
		}
		//after rendering within a routed context, we need to scroll back to the top, and fetch the document title for history.pushState
		if (computePostRedrawHook) {
			computePostRedrawHook();
			computePostRedrawHook = null
		}
		lastRedrawId = null;
		lastRedrawCallTime = new Date;
		m.redraw.strategy("diff")
	}

	var pendingRequests = 0;
	m.startComputation = function() {pendingRequests++};
	m.endComputation = function() {
		pendingRequests = Math.max(pendingRequests - 1, 0);
		if (pendingRequests == 0) m.redraw()
	};

	m.withAttr = function(prop, withAttrCallback) {
		return function(e) {
			e = e || event;
			var currentTarget = e.currentTarget || this;
			withAttrCallback(prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop))
		}
	};

	//routing
	var modes = {pathname: "", hash: "#", search: "?"};
	var redirect = function() {}, routeParams = {}, currentRoute;
	m.route = function() {
		//m.route()
		if (arguments.length === 0) return currentRoute;
		else if (arguments.length === 3 && type.call(arguments[1]) == STRING) {
			var root = arguments[0], defaultRoute = arguments[1], router = arguments[2];
			redirect = function(source) {
				var path = currentRoute = normalizeRoute(source);
				if (!routeByValue(root, router, path)) {
					m.route(defaultRoute, true)
				}
			};
			var listener = m.route.mode == "hash" ? "onhashchange" : "onpopstate";
			window[listener] = function() {
				if (currentRoute != normalizeRoute($location[m.route.mode])) {
					redirect($location[m.route.mode])
				}
			};
			computePostRedrawHook = setScroll;
			window[listener]()
		}
		//config: m.route
		else if (arguments[0].addEventListener) {
			var element = arguments[0];
			var isInitialized = arguments[1];
			var context = arguments[2];
			element.href = (m.route.mode !== 'pathname' ? $location.pathname : '') + modes[m.route.mode] + this.attrs.href;
			element.removeEventListener("click", routeUnobtrusive);
			element.addEventListener("click", routeUnobtrusive)
		}
		//m.route(route, params)
		else if (type.call(arguments[0]) == STRING) {
			currentRoute = arguments[0];
			var args = arguments[1] || {}
			var queryIndex = currentRoute.indexOf("?")
			var params = queryIndex > -1 ? parseQueryString(currentRoute.slice(queryIndex + 1)) : {}
			for (var i in args) params[i] = args[i]
			var querystring = buildQueryString(params)
			var currentPath = queryIndex > -1 ? currentRoute.slice(0, queryIndex) : currentRoute
			if (querystring) currentRoute = currentPath + (currentPath.indexOf("?") === -1 ? "?" : "&") + querystring;

			var shouldReplaceHistoryEntry = (arguments.length == 3 ? arguments[2] : arguments[1]) === true;

			if (window.history.pushState) {
				computePostRedrawHook = function() {
					window.history[shouldReplaceHistoryEntry ? "replaceState" : "pushState"](null, $document.title, modes[m.route.mode] + currentRoute);
					setScroll()
				};
				redirect(modes[m.route.mode] + currentRoute)
			}
			else $location[m.route.mode] = currentRoute
		}
	};
	m.route.param = function(key) {return routeParams[key]};
	m.route.mode = "search";
	function normalizeRoute(route) {return route.slice(modes[m.route.mode].length)}
	function routeByValue(root, router, path) {
		routeParams = {};

		var queryStart = path.indexOf("?");
		if (queryStart !== -1) {
			routeParams = parseQueryString(path.substr(queryStart + 1, path.length));
			path = path.substr(0, queryStart)
		}

		for (var route in router) {
			if (route == path) {
				m.module(root, router[route]);
				return true
			}

			var matcher = new RegExp("^" + route.replace(/:[^\/]+?\.{3}/g, "(.*?)").replace(/:[^\/]+/g, "([^\\/]+)") + "\/?$");

			if (matcher.test(path)) {
				path.replace(matcher, function() {
					var keys = route.match(/:[^\/]+/g) || [];
					var values = [].slice.call(arguments, 1, -2);
					for (var i = 0; i < keys.length; i++) routeParams[keys[i].replace(/:|\./g, "")] = decodeURIComponent(values[i])
					m.module(root, router[route])
				});
				return true
			}
		}
	}
	function routeUnobtrusive(e) {
		e = e || event;
		if (e.ctrlKey || e.metaKey || e.which == 2) return;
		if (e.preventDefault) e.preventDefault();
		else e.returnValue = false;
		var currentTarget = e.currentTarget || this;
		var args = m.route.mode == "pathname" && currentTarget.search ? parseQueryString(currentTarget.search.slice(1)) : {};
		m.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length), args)
	}
	function setScroll() {
		if (m.route.mode != "hash" && $location.hash) $location.hash = $location.hash;
		else window.scrollTo(0, 0)
	}
	function buildQueryString(object, prefix) {
		var str = [];
		for(var prop in object) {
			var key = prefix ? prefix + "[" + prop + "]" : prop, value = object[prop];
			str.push(value != null && type.call(value) == OBJECT ? buildQueryString(value, key) : encodeURIComponent(key) + "=" + encodeURIComponent(value))
		}
		return str.join("&")
	}
	function parseQueryString(str) {
		var pairs = str.split("&"), params = {};
		for (var i = 0; i < pairs.length; i++) {
			var pair = pairs[i].split("=");
			params[decodeSpace(pair[0])] = pair[1] ? decodeSpace(pair[1]) : ""
		}
		return params
	}
	function decodeSpace(string) {
		return decodeURIComponent(string.replace(/\+/g, " "))
	}
	function reset(root) {
		var cacheKey = getCellCacheKey(root);
		clear(root.childNodes, cellCache[cacheKey]);
		cellCache[cacheKey] = undefined
	}

	m.deferred = function () {
		var deferred = new Deferred();
		deferred.promise = propify(deferred.promise);
		return deferred
	};
	function propify(promise) {
		var prop = m.prop();
		promise.then(prop);
		prop.then = function(resolve, reject) {
			return propify(promise.then(resolve, reject))
		};
		return prop
	}
	//Promiz.mithril.js | Zolmeister | MIT
	//a modified version of Promiz.js, which does not conform to Promises/A+ for two reasons:
	//1) `then` callbacks are called synchronously (because setTimeout is too slow, and the setImmediate polyfill is too big
	//2) throwing subclasses of Error cause the error to be bubbled up instead of triggering rejection (because the spec does not account for the important use case of default browser error handling, i.e. message w/ line number)
	function Deferred(successCallback, failureCallback) {
		var RESOLVING = 1, REJECTING = 2, RESOLVED = 3, REJECTED = 4;
		var self = this, state = 0, promiseValue = 0, next = [];

		self["promise"] = {};

		self["resolve"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = RESOLVING;

				fire()
			}
			return this
		};

		self["reject"] = function(value) {
			if (!state) {
				promiseValue = value;
				state = REJECTING;

				fire()
			}
			return this
		};

		self.promise["then"] = function(successCallback, failureCallback) {
			var deferred = new Deferred(successCallback, failureCallback);
			if (state == RESOLVED) {
				deferred.resolve(promiseValue)
			}
			else if (state == REJECTED) {
				deferred.reject(promiseValue)
			}
			else {
				next.push(deferred)
			}
			return deferred.promise
		};

		function finish(type) {
			state = type || REJECTED;
			next.map(function(deferred) {
				state == RESOLVED && deferred.resolve(promiseValue) || deferred.reject(promiseValue)
			})
		}

		function thennable(then, successCallback, failureCallback, notThennableCallback) {
			if (((promiseValue != null && type.call(promiseValue) == OBJECT) || typeof promiseValue == FUNCTION) && typeof then == FUNCTION) {
				try {
					// count protects against abuse calls from spec checker
					var count = 0;
					then.call(promiseValue, function(value) {
						if (count++) return;
						promiseValue = value;
						successCallback()
					}, function (value) {
						if (count++) return;
						promiseValue = value;
						failureCallback()
					})
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					failureCallback()
				}
			} else {
				notThennableCallback()
			}
		}

		function fire() {
			// check if it's a thenable
			var then;
			try {
				then = promiseValue && promiseValue.then
			}
			catch (e) {
				m.deferred.onerror(e);
				promiseValue = e;
				state = REJECTING;
				return fire()
			}
			thennable(then, function() {
				state = RESOLVING;
				fire()
			}, function() {
				state = REJECTING;
				fire()
			}, function() {
				try {
					if (state == RESOLVING && typeof successCallback == FUNCTION) {
						promiseValue = successCallback(promiseValue)
					}
					else if (state == REJECTING && typeof failureCallback == "function") {
						promiseValue = failureCallback(promiseValue);
						state = RESOLVING
					}
				}
				catch (e) {
					m.deferred.onerror(e);
					promiseValue = e;
					return finish()
				}

				if (promiseValue == self) {
					promiseValue = TypeError();
					finish()
				}
				else {
					thennable(then, function () {
						finish(RESOLVED)
					}, finish, function () {
						finish(state == RESOLVING && RESOLVED)
					})
				}
			})
		}
	}
	m.deferred.onerror = function(e) {
		if (type.call(e) == "[object Error]" && !e.constructor.toString().match(/ Error/)) throw e
	};

	m.sync = function(args) {
		var method = "resolve";
		function synchronizer(pos, resolved) {
			return function(value) {
				results[pos] = value;
				if (!resolved) method = "reject";
				if (--outstanding == 0) {
					deferred.promise(results);
					deferred[method](results)
				}
				return value
			}
		}

		var deferred = m.deferred();
		var outstanding = args.length;
		var results = new Array(outstanding);
		if (args.length > 0) {
			for (var i = 0; i < args.length; i++) {
				args[i].then(synchronizer(i, true), synchronizer(i, false))
			}
		}
		else deferred.resolve([]);

		return deferred.promise
	};
	function identity(value) {return value}

	function ajax(options) {
		if (options.dataType && options.dataType.toLowerCase() === "jsonp") {
			var callbackKey = "mithril_callback_" + new Date().getTime() + "_" + (Math.round(Math.random() * 1e16)).toString(36);
			var script = $document.createElement("script");

			window[callbackKey] = function(resp) {
				$document.body.removeChild(script);
				options.onload({
					type: "load",
					target: {
						responseText: resp
					}
				});
				window[callbackKey] = undefined
			};

			script.onerror = function(e) {
				$document.body.removeChild(script);

				options.onerror({
					type: "error",
					target: {
						status: 500,
						responseText: JSON.stringify({error: "Error making jsonp request"})
					}
				});
				window[callbackKey] = undefined;

				return false
			};

			script.onload = function(e) {
				return false
			};

			script.src = options.url
				+ (options.url.indexOf("?") > 0 ? "&" : "?")
				+ (options.callbackKey ? options.callbackKey : "callback")
				+ "=" + callbackKey
				+ "&" + buildQueryString(options.data || {});
			$document.body.appendChild(script)
		}
		else {
			var xhr = new window.XMLHttpRequest;
			xhr.open(options.method, options.url, true, options.user, options.password);
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					if (xhr.status >= 200 && xhr.status < 300) options.onload({type: "load", target: xhr});
					else options.onerror({type: "error", target: xhr})
				}
			};
			if (options.serialize == JSON.stringify && options.data && options.method != "GET") {
				xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8")
			}
			if (options.deserialize == JSON.parse) {
				xhr.setRequestHeader("Accept", "application/json, text/*");
			}
			if (typeof options.config == FUNCTION) {
				var maybeXhr = options.config(xhr, options);
				if (maybeXhr != null) xhr = maybeXhr
			}

			var data = options.method == "GET" || !options.data ? "" : options.data
			if (data && (type.call(data) != STRING && data.constructor != window.FormData)) {
				throw "Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";
			}
			xhr.send(data);
			return xhr
		}
	}
	function bindData(xhrOptions, data, serialize) {
		if (xhrOptions.method == "GET" && xhrOptions.dataType != "jsonp") {
			var prefix = xhrOptions.url.indexOf("?") < 0 ? "?" : "&";
			var querystring = buildQueryString(data);
			xhrOptions.url = xhrOptions.url + (querystring ? prefix + querystring : "")
		}
		else xhrOptions.data = serialize(data);
		return xhrOptions
	}
	function parameterizeUrl(url, data) {
		var tokens = url.match(/:[a-z]\w+/gi);
		if (tokens && data) {
			for (var i = 0; i < tokens.length; i++) {
				var key = tokens[i].slice(1);
				url = url.replace(tokens[i], data[key]);
				delete data[key]
			}
		}
		return url
	}

	m.request = function(xhrOptions) {
		if (xhrOptions.background !== true) m.startComputation();
		var deferred = m.deferred();
		var isJSONP = xhrOptions.dataType && xhrOptions.dataType.toLowerCase() === "jsonp";
		var serialize = xhrOptions.serialize = isJSONP ? identity : xhrOptions.serialize || JSON.stringify;
		var deserialize = xhrOptions.deserialize = isJSONP ? identity : xhrOptions.deserialize || JSON.parse;
		var extract = xhrOptions.extract || function(xhr) {
			return xhr.responseText.length === 0 && deserialize === JSON.parse ? null : xhr.responseText
		};
		xhrOptions.url = parameterizeUrl(xhrOptions.url, xhrOptions.data);
		xhrOptions = bindData(xhrOptions, xhrOptions.data, serialize);
		xhrOptions.onload = xhrOptions.onerror = function(e) {
			try {
				e = e || event;
				var unwrap = (e.type == "load" ? xhrOptions.unwrapSuccess : xhrOptions.unwrapError) || identity;
				var response = unwrap(deserialize(extract(e.target, xhrOptions)));
				if (e.type == "load") {
					if (type.call(response) == ARRAY && xhrOptions.type) {
						for (var i = 0; i < response.length; i++) response[i] = new xhrOptions.type(response[i])
					}
					else if (xhrOptions.type) response = new xhrOptions.type(response)
				}
				deferred[e.type == "load" ? "resolve" : "reject"](response)
			}
			catch (e) {
				m.deferred.onerror(e);
				deferred.reject(e)
			}
			if (xhrOptions.background !== true) m.endComputation()
		};
		ajax(xhrOptions);
		deferred.promise(xhrOptions.initialValue);
		return deferred.promise
	};

	//testing API
	m.deps = function(mock) {
		initialize(window = mock || window);
		return window;
	};
	//for internal testing only, do not use `m.deps.factory`
	m.deps.factory = app;

	return m
})(typeof window != "undefined" ? window : {});

if (typeof module != "undefined" && module !== null && module.exports) module.exports = m;
else if (typeof define == "function" && define.amd) define(function() {return m});

},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\ripples.min.js":[function(require,module,exports){
window.ripples={init:function(n){"use strict";function o(n,t){var i=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return i.call(n,t)}var s=100,h=500,t=function(n,t,i){typeof n=="string"&&(n=[n]);n.forEach(function(n){document.addEventListener(n,function(n){var r=typeof n.detail!="number"?n.detail:n.target;o(r,t)&&i(n,r)})})},r=function(n,t,i){var s=t,l=s.parentNode,r=document.createElement("div"),u=l.getBoundingClientRect(),c={x:n.clientX-u.left,y:(window.ontouchstart?n.clientY-window.scrollY:n.clientY)-u.top},f="scale("+Math.round(s.offsetWidth/5)+")",v=new CustomEvent("rippleEnd",{detail:r}),y,o,a;n.touches&&(c={x:n.touches[0].clientX-u.left,y:n.touches[0].clientY-u.top});e=r;r.className="ripple";r.setAttribute("style","left:"+c.x+"px; top:"+c.y+"px;");o=window.getComputedStyle(l).color;o=o.replace("rgb","rgba").replace(")",", "+.3+")");s.appendChild(r);y=window.getComputedStyle(r).opacity;r.dataset.animating=1;r.className="ripple ripple-on";a=[r.getAttribute("style"),"background-color: "+o,"-ms-transform: "+f,"-moz-transform"+f,"-webkit-transform"+f,"transform: "+f];r.setAttribute("style",a.join(";"));setTimeout(function(){r.dataset.animating=0;document.dispatchEvent(v);i&&i()},h)},u=function(n){n.className="ripple ripple-on ripple-out";setTimeout(function(){n.remove()},s)},i=!1,f,e;t(["mousedown","touchstart"],"*",function(){i=!0});t(["mouseup","touchend","mouseout"],"*",function(){i=!1});f=function(n,t){if(t.getElementsByClassName("ripple-wrapper").length===0){t.className+=" withripple";var i=document.createElement("div");i.className="ripple-wrapper";t.appendChild(i);window.ontouchstart===null&&r(n,i,function(){i.getElementsByClassName("ripple")[0].remove()})}};t(["mouseover","touchstart"],n,f);t(["mousedown","touchstart"],".ripple-wrapper",function(n,t){(n.which===0||n.which===1||n.which===2)&&r(n,t)});t("rippleEnd",".ripple-wrapper .ripple",function(n,t){var r=t.parentNode.getElementsByClassName("ripple");(!i||r[0]==t&&r.length>1)&&u(t)});t(["mouseup","touchend","mouseout"],".ripple-wrapper",function(){var n=e;n&&n.dataset.animating!=1&&u(n)})}};
/*
//# sourceMappingURL=ripples.min.js.map
*/
},{}],"C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\velocity.js":[function(require,module,exports){
/*! VelocityJS.org (1.1.0). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */

/*************************
   Velocity jQuery Shim
*************************/

/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */

/* This file contains the jQuery functions that Velocity relies on, thereby removing Velocity's dependency on a full copy of jQuery, and allowing it to work in any environment. */
/* These shimmed functions are only used if jQuery isn't present. If both this shim and jQuery are loaded, Velocity defaults to jQuery proper. */
/* Browser support: Using this shim instead of jQuery proper removes support for IE8. */

;(function (window) {
    /***************
         Setup
    ***************/

    /* If jQuery is already loaded, there's no point in loading this shim. */
    if (window.jQuery) {
        return;
    }

    /* jQuery base. */
    var $ = function (selector, context) {
        return new $.fn.init(selector, context);
    };

    /********************
       Private Methods
    ********************/

    /* jQuery */
    $.isWindow = function (obj) {
        /* jshint eqeqeq: false */
        return obj != null && obj == obj.window;
    };

    /* jQuery */
    $.type = function (obj) {
        if (obj == null) {
            return obj + "";
        }

        return typeof obj === "object" || typeof obj === "function" ?
            class2type[toString.call(obj)] || "object" :
            typeof obj;
    };

    /* jQuery */
    $.isArray = Array.isArray || function (obj) {
        return $.type(obj) === "array";
    };

    /* jQuery */
    function isArraylike (obj) {
        var length = obj.length,
            type = $.type(obj);

        if (type === "function" || $.isWindow(obj)) {
            return false;
        }

        if (obj.nodeType === 1 && length) {
            return true;
        }

        return type === "array" || length === 0 || typeof length === "number" && length > 0 && (length - 1) in obj;
    }

    /***************
       $ Methods
    ***************/

    /* jQuery: Support removed for IE<9. */
    $.isPlainObject = function (obj) {
        var key;

        if (!obj || $.type(obj) !== "object" || obj.nodeType || $.isWindow(obj)) {
            return false;
        }

        try {
            if (obj.constructor &&
                !hasOwn.call(obj, "constructor") &&
                !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                return false;
            }
        } catch (e) {
            return false;
        }

        for (key in obj) {}

        return key === undefined || hasOwn.call(obj, key);
    };

    /* jQuery */
    $.each = function(obj, callback, args) {
        var value,
            i = 0,
            length = obj.length,
            isArray = isArraylike(obj);

        if (args) {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.apply(obj[i], args);

                    if (value === false) {
                        break;
                    }
                }
            }

        } else {
            if (isArray) {
                for (; i < length; i++) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            } else {
                for (i in obj) {
                    value = callback.call(obj[i], i, obj[i]);

                    if (value === false) {
                        break;
                    }
                }
            }
        }

        return obj;
    };

    /* Custom */
    $.data = function (node, key, value) {
        /* $.getData() */
        if (value === undefined) {
            var id = node[$.expando],
                store = id && cache[id];

            if (key === undefined) {
                return store;
            } else if (store) {
                if (key in store) {
                    return store[key];
                }
            }
        /* $.setData() */
        } else if (key !== undefined) {
            var id = node[$.expando] || (node[$.expando] = ++$.uuid);

            cache[id] = cache[id] || {};
            cache[id][key] = value;

            return value;
        }
    };

    /* Custom */
    $.removeData = function (node, keys) {
        var id = node[$.expando],
            store = id && cache[id];

        if (store) {
            $.each(keys, function(_, key) {
                delete store[key];
            });
        }
    };

    /* jQuery */
    $.extend = function () {
        var src, copyIsArray, copy, name, options, clone,
            target = arguments[0] || {},
            i = 1,
            length = arguments.length,
            deep = false;

        if (typeof target === "boolean") {
            deep = target;

            target = arguments[i] || {};
            i++;
        }

        if (typeof target !== "object" && $.type(target) !== "function") {
            target = {};
        }

        if (i === length) {
            target = this;
            i--;
        }

        for (; i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name];
                    copy = options[name];

                    if (target === copy) {
                        continue;
                    }

                    if (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {
                        if (copyIsArray) {
                            copyIsArray = false;
                            clone = src && $.isArray(src) ? src : [];

                        } else {
                            clone = src && $.isPlainObject(src) ? src : {};
                        }

                        target[name] = $.extend(deep, clone, copy);

                    } else if (copy !== undefined) {
                        target[name] = copy;
                    }
                }
            }
        }

        return target;
    };

    /* jQuery 1.4.3 */
    $.queue = function (elem, type, data) {
        function $makeArray (arr, results) {
            var ret = results || [];

            if (arr != null) {
                if (isArraylike(Object(arr))) {
                    /* $.merge */
                    (function(first, second) {
                        var len = +second.length,
                            j = 0,
                            i = first.length;

                        while (j < len) {
                            first[i++] = second[j++];
                        }

                        if (len !== len) {
                            while (second[j] !== undefined) {
                                first[i++] = second[j++];
                            }
                        }

                        first.length = i;

                        return first;
                    })(ret, typeof arr === "string" ? [arr] : arr);
                } else {
                    [].push.call(ret, arr);
                }
            }

            return ret;
        }

        if (!elem) {
            return;
        }

        type = (type || "fx") + "queue";

        var q = $.data(elem, type);

        if (!data) {
            return q || [];
        }

        if (!q || $.isArray(data)) {
            q = $.data(elem, type, $makeArray(data));
        } else {
            q.push(data);
        }

        return q;
    };

    /* jQuery 1.4.3 */
    $.dequeue = function (elems, type) {
        /* Custom: Embed element iteration. */
        $.each(elems.nodeType ? [ elems ] : elems, function(i, elem) {
            type = type || "fx";

            var queue = $.queue(elem, type),
                fn = queue.shift();

            if (fn === "inprogress") {
                fn = queue.shift();
            }

            if (fn) {
                if (type === "fx") {
                    queue.unshift("inprogress");
                }

                fn.call(elem, function() {
                    $.dequeue(elem, type);
                });
            }
        });
    };

    /******************
       $.fn Methods
    ******************/

    /* jQuery */
    $.fn = $.prototype = {
        init: function (selector) {
            /* Just return the element wrapped inside an array; don't proceed with the actual jQuery node wrapping process. */
            if (selector.nodeType) {
                this[0] = selector;

                return this;
            } else {
                throw new Error("Not a DOM node.");
            }
        },

        offset: function () {
            /* jQuery altered code: Dropped disconnected DOM node checking. */
            var box = this[0].getBoundingClientRect ? this[0].getBoundingClientRect() : { top: 0, left: 0 };

            return {
                top: box.top + (window.pageYOffset || document.scrollTop  || 0)  - (document.clientTop  || 0),
                left: box.left + (window.pageXOffset || document.scrollLeft  || 0) - (document.clientLeft || 0)
            };
        },

        position: function () {
            /* jQuery */
            function offsetParent() {
                var offsetParent = this.offsetParent || document;

                while (offsetParent && (!offsetParent.nodeType.toLowerCase === "html" && offsetParent.style.position === "static")) {
                    offsetParent = offsetParent.offsetParent;
                }

                return offsetParent || document;
            }

            /* Zepto */
            var elem = this[0],
                offsetParent = offsetParent.apply(elem),
                offset = this.offset(),
                parentOffset = /^(?:body|html)$/i.test(offsetParent.nodeName) ? { top: 0, left: 0 } : $(offsetParent).offset()

            offset.top -= parseFloat(elem.style.marginTop) || 0;
            offset.left -= parseFloat(elem.style.marginLeft) || 0;

            if (offsetParent.style) {
                parentOffset.top += parseFloat(offsetParent.style.borderTopWidth) || 0
                parentOffset.left += parseFloat(offsetParent.style.borderLeftWidth) || 0
            }

            return {
                top: offset.top - parentOffset.top,
                left: offset.left - parentOffset.left
            };
        }
    };

    /**********************
       Private Variables
    **********************/

    /* For $.data() */
    var cache = {};
    $.expando = "velocity" + (new Date().getTime());
    $.uuid = 0;

    /* For $.queue() */
    var class2type = {},
        hasOwn = class2type.hasOwnProperty,
        toString = class2type.toString;

    var types = "Boolean Number String Function Array Date RegExp Object Error".split(" ");
    for (var i = 0; i < types.length; i++) {
        class2type["[object " + types[i] + "]"] = types[i].toLowerCase();
    }

    /* Makes $(node) possible, without having to call init. */
    $.fn.init.prototype = $.fn;

    /* Globalize Velocity onto the window, and assign its Utilities property. */
    window.Velocity = { Utilities: $ };
})(window);

/******************
    Velocity.js
******************/

;(function (factory) {
    /* CommonJS module. */
    if (typeof module === "object" && typeof module.exports === "object") {
        module.exports = factory();
    /* AMD module. */
    } else if (typeof define === "function" && define.amd) {
        define(factory);
    /* Browser globals. */
    } else {
        factory();
    }
}(function() {
return function (global, window, document, undefined) {

    /***************
        Summary
    ***************/

    /*
    - CSS: CSS stack that works independently from the rest of Velocity.
    - animate(): Core animation method that iterates over the targeted elements and queues the incoming call onto each element individually.
      - Pre-Queueing: Prepare the element for animation by instantiating its data cache and processing the call's options.
      - Queueing: The logic that runs once the call has reached its point of execution in the element's $.queue() stack.
                  Most logic is placed here to avoid risking it becoming stale (if the element's properties have changed).
      - Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
    - tick(): The single requestAnimationFrame loop responsible for tweening all in-progress calls.
    - completeCall(): Handles the cleanup process for each Velocity call.
    */

    /*********************
       Helper Functions
    *********************/

    /* IE detection. Gist: https://gist.github.com/julianshapiro/9098609 */
    var IE = (function() {
        if (document.documentMode) {
            return document.documentMode;
        } else {
            for (var i = 7; i > 4; i--) {
                var div = document.createElement("div");

                div.innerHTML = "<!--[if IE " + i + "]><span></span><![endif]-->";

                if (div.getElementsByTagName("span").length) {
                    div = null;

                    return i;
                }
            }
        }

        return undefined;
    })();

    /* rAF shim. Gist: https://gist.github.com/julianshapiro/9497513 */
    var rAFShim = (function() {
        var timeLast = 0;

        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {
            var timeCurrent = (new Date()).getTime(),
                timeDelta;

            /* Dynamically set delay on a per-tick basis to match 60fps. */
            /* Technique by Erik Moller. MIT license: https://gist.github.com/paulirish/1579671 */
            timeDelta = Math.max(0, 16 - (timeCurrent - timeLast));
            timeLast = timeCurrent + timeDelta;

            return setTimeout(function() { callback(timeCurrent + timeDelta); }, timeDelta);
        };
    })();

    /* Array compacting. Copyright Lo-Dash. MIT License: https://github.com/lodash/lodash/blob/master/LICENSE.txt */
    function compactSparseArray (array) {
        var index = -1,
            length = array ? array.length : 0,
            result = [];

        while (++index < length) {
            var value = array[index];

            if (value) {
                result.push(value);
            }
        }

        return result;
    }

    function sanitizeElements (elements) {
        /* Unwrap jQuery/Zepto objects. */
        if (Type.isWrapped(elements)) {
            elements = [].slice.call(elements);
        /* Wrap a single element in an array so that $.each() can iterate with the element instead of its node's children. */
        } else if (Type.isNode(elements)) {
            elements = [ elements ];
        }

        return elements;
    }

    var Type = {
        isString: function (variable) {
            return (typeof variable === "string");
        },
        isArray: Array.isArray || function (variable) {
            return Object.prototype.toString.call(variable) === "[object Array]";
        },
        isFunction: function (variable) {
            return Object.prototype.toString.call(variable) === "[object Function]";
        },
        isNode: function (variable) {
            return variable && variable.nodeType;
        },
        /* Copyright Martin Bohm. MIT License: https://gist.github.com/Tomalak/818a78a226a0738eaade */
        isNodeList: function (variable) {
            return typeof variable === "object" &&
                /^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(variable)) &&
                variable.length !== undefined &&
                (variable.length === 0 || (typeof variable[0] === "object" && variable[0].nodeType > 0));
        },
        /* Determine if variable is a wrapped jQuery or Zepto element. */
        isWrapped: function (variable) {
            return variable && (variable.jquery || (window.Zepto && window.Zepto.zepto.isZ(variable)));
        },
        isSVG: function (variable) {
            return window.SVGElement && (variable instanceof window.SVGElement);
        },
        isEmptyObject: function (variable) {
            for (var name in variable) {
                return false;
            }

            return true;
        }
    };

    /*****************
       Dependencies
    *****************/

    var $,
        isJQuery = false;

    if (global.fn && global.fn.jquery) {
        $ = global;
        isJQuery = true;
    } else {
        $ = window.Velocity.Utilities;
    }

    if (IE <= 8 && !isJQuery) {
        throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");
    } else if (IE <= 7) {
        /* Revert to jQuery's $.animate(), and lose Velocity's extra features. */
        jQuery.fn.velocity = jQuery.fn.animate;

        /* Now that $.fn.velocity is aliased, abort this Velocity declaration. */
        return;
    }

    /*****************
        Constants
    *****************/

    var DURATION_DEFAULT = 400,
        EASING_DEFAULT = "swing";

    /*************
        State
    *************/

    /* Note: The global object also doubles as a publicly-accessible data store for the purposes of unit testing. */
    /* Note: Alias the lowercase and uppercase variants of "velocity" to minimize user confusion due to the lowercase nature of the $.fn extension. */
    var Velocity = {
        /* Container for page-wide Velocity state data. */
        State: {
            /* Detect mobile devices to determine if mobileHA should be turned on. */
            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            /* The mobileHA option's behavior changes on older Android devices (Gingerbread, versions 2.3.3-2.3.7). */
            isAndroid: /Android/i.test(navigator.userAgent),
            isGingerbread: /Android 2\.3\.[3-7]/i.test(navigator.userAgent),
            isChrome: window.chrome,
            isFirefox: /Firefox/i.test(navigator.userAgent),
            /* Create a cached element for re-use when checking for CSS property prefixes. */
            prefixElement: document.createElement("div"),
            /* Cache every prefix match to avoid repeating lookups. */
            prefixMatches: {},
            /* Cache the anchor used for animating window scrolling. */
            scrollAnchor: null,
            /* Cache the property names associated with the scroll anchor. */
            scrollPropertyLeft: null,
            scrollPropertyTop: null,
            /* Keep track of whether our RAF tick is running. */
            isTicking: false,
            /* Container for every in-progress call to Velocity. */
            calls: []
        },
        /* Velocity's custom CSS stack. Made global for unit testing. */
        CSS: { /* Defined below. */ },
        /* Defined by Velocity's optional jQuery shim. */
        Utilities: $,
        /* Container for the user's custom animation redirects that are referenced by name in place of a properties map object. */
        Redirects: { /* Manually registered by the user. */ },
        Easings: { /* Defined below. */ },
        /* Attempt to use ES6 Promises by default. Users can override this with a third-party promises library. */
        Promise: window.Promise,
        /* Page-wide option defaults, which can be overriden by the user. */
        defaults: {
            queue: "",
            duration: DURATION_DEFAULT,
            easing: EASING_DEFAULT,
            begin: undefined,
            complete: undefined,
            progress: undefined,
            display: undefined,
            visibility: undefined,
            loop: false,
            delay: false,
            mobileHA: true,
            /* Set to false to prevent property values from being cached between consecutive Velocity-initiated chain calls. */
            _cacheValues: true
        },
        /* A design goal of Velocity is to cache data wherever possible in order to avoid DOM requerying.
           Accordingly, each element has a data cache instantiated on it. */
        init: function (element) {
            $.data(element, "velocity", {
                /* Store whether this is an SVG element, since its properties are retrieved and updated differently than standard HTML elements. */
                isSVG: Type.isSVG(element),
                /* Keep track of whether the element is currently being animated by Velocity.
                   This is used to ensure that property values are not transferred between non-consecutive (stale) calls. */
                isAnimating: false,
                /* A reference to the element's live computedStyle object. Learn more here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
                computedStyle: null,
                /* Tween data is cached for each animation on the element so that data can be passed across calls --
                   in particular, end values are used as subsequent start values in consecutive Velocity calls. */
                tweensContainer: null,
                /* The full root property values of each CSS hook being animated on this element are cached so that:
                   1) Concurrently-animating hooks sharing the same root can have their root values' merged into one while tweening.
                   2) Post-hook-injection root values can be transferred over to consecutively chained Velocity calls as starting root values. */
                rootPropertyValueCache: {},
                /* A cache for transform updates, which must be manually flushed via CSS.flushTransformCache(). */
                transformCache: {}
            });
        },
        /* A parallel to jQuery's $.css(), used for getting/setting Velocity's hooked CSS properties. */
        hook: null, /* Defined below. */
        /* Velocity-wide animation time remapping for testing purposes. */
        mock: false,
        version: { major: 1, minor: 1, patch: 0 },
        /* Set to 1 or 2 (most verbose) to output debug info to console. */
        debug: false
    };

    /* Retrieve the appropriate scroll anchor and property name for the browser: https://developer.mozilla.org/en-US/docs/Web/API/Window.scrollY */
    if (window.pageYOffset !== undefined) {
        Velocity.State.scrollAnchor = window;
        Velocity.State.scrollPropertyLeft = "pageXOffset";
        Velocity.State.scrollPropertyTop = "pageYOffset";
    } else {
        Velocity.State.scrollAnchor = document.documentElement || document.body.parentNode || document.body;
        Velocity.State.scrollPropertyLeft = "scrollLeft";
        Velocity.State.scrollPropertyTop = "scrollTop";
    }

    /* Shorthand alias for jQuery's $.data() utility. */
    function Data (element) {
        /* Hardcode a reference to the plugin name. */
        var response = $.data(element, "velocity");

        /* jQuery <=1.4.2 returns null instead of undefined when no match is found. We normalize this behavior. */
        return response === null ? undefined : response;
    };

    /**************
        Easing
    **************/

    /* Step easing generator. */
    function generateStep (steps) {
        return function (p) {
            return Math.round(p * steps) * (1 / steps);
        };
    }

    /* Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    function generateBezier (mX1, mY1, mX2, mY2) {
        var NEWTON_ITERATIONS = 4,
            NEWTON_MIN_SLOPE = 0.001,
            SUBDIVISION_PRECISION = 0.0000001,
            SUBDIVISION_MAX_ITERATIONS = 10,
            kSplineTableSize = 11,
            kSampleStepSize = 1.0 / (kSplineTableSize - 1.0),
            float32ArraySupported = "Float32Array" in window;

        /* Must contain four arguments. */
        if (arguments.length !== 4) {
            return false;
        }

        /* Arguments must be numbers. */
        for (var i = 0; i < 4; ++i) {
            if (typeof arguments[i] !== "number" || isNaN(arguments[i]) || !isFinite(arguments[i])) {
                return false;
            }
        }

        /* X values must be in the [0, 1] range. */
        mX1 = Math.min(mX1, 1);
        mX2 = Math.min(mX2, 1);
        mX1 = Math.max(mX1, 0);
        mX2 = Math.max(mX2, 0);

        var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);

        function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }
        function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }
        function C (aA1)      { return 3.0 * aA1; }

        function calcBezier (aT, aA1, aA2) {
            return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;
        }

        function getSlope (aT, aA1, aA2) {
            return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
        }

        function newtonRaphsonIterate (aX, aGuessT) {
            for (var i = 0; i < NEWTON_ITERATIONS; ++i) {
                var currentSlope = getSlope(aGuessT, mX1, mX2);

                if (currentSlope === 0.0) return aGuessT;

                var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
                aGuessT -= currentX / currentSlope;
            }

            return aGuessT;
        }

        function calcSampleValues () {
            for (var i = 0; i < kSplineTableSize; ++i) {
                mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
            }
        }

        function binarySubdivide (aX, aA, aB) {
            var currentX, currentT, i = 0;

            do {
                currentT = aA + (aB - aA) / 2.0;
                currentX = calcBezier(currentT, mX1, mX2) - aX;
                if (currentX > 0.0) {
                  aB = currentT;
                } else {
                  aA = currentT;
                }
            } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);

            return currentT;
        }

        function getTForX (aX) {
            var intervalStart = 0.0,
                currentSample = 1,
                lastSample = kSplineTableSize - 1;

            for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {
                intervalStart += kSampleStepSize;
            }

            --currentSample;

            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]),
                guessForT = intervalStart + dist * kSampleStepSize,
                initialSlope = getSlope(guessForT, mX1, mX2);

            if (initialSlope >= NEWTON_MIN_SLOPE) {
                return newtonRaphsonIterate(aX, guessForT);
            } else if (initialSlope == 0.0) {
                return guessForT;
            } else {
                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);
            }
        }

        var _precomputed = false;

        function precompute() {
            _precomputed = true;
            if (mX1 != mY1 || mX2 != mY2) calcSampleValues();
        }

        var f = function (aX) {
            if (!_precomputed) precompute();
            if (mX1 === mY1 && mX2 === mY2) return aX;
            if (aX === 0) return 0;
            if (aX === 1) return 1;

            return calcBezier(getTForX(aX), mY1, mY2);
        };

        f.getControlPoints = function() { return [{ x: mX1, y: mY1 }, { x: mX2, y: mY2 }]; };

        var str = "generateBezier(" + [mX1, mY1, mX2, mY2] + ")";
        f.toString = function () { return str; };

        return f;
    }

    /* Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */
    /* Given a tension, friction, and duration, a simulation at 60FPS will first run without a defined duration in order to calculate the full path. A second pass
       then adjusts the time delta -- using the relation between actual time and duration -- to calculate the path for the duration-constrained animation. */
    var generateSpringRK4 = (function () {
        function springAccelerationForState (state) {
            return (-state.tension * state.x) - (state.friction * state.v);
        }

        function springEvaluateStateWithDerivative (initialState, dt, derivative) {
            var state = {
                x: initialState.x + derivative.dx * dt,
                v: initialState.v + derivative.dv * dt,
                tension: initialState.tension,
                friction: initialState.friction
            };

            return { dx: state.v, dv: springAccelerationForState(state) };
        }

        function springIntegrateState (state, dt) {
            var a = {
                    dx: state.v,
                    dv: springAccelerationForState(state)
                },
                b = springEvaluateStateWithDerivative(state, dt * 0.5, a),
                c = springEvaluateStateWithDerivative(state, dt * 0.5, b),
                d = springEvaluateStateWithDerivative(state, dt, c),
                dxdt = 1.0 / 6.0 * (a.dx + 2.0 * (b.dx + c.dx) + d.dx),
                dvdt = 1.0 / 6.0 * (a.dv + 2.0 * (b.dv + c.dv) + d.dv);

            state.x = state.x + dxdt * dt;
            state.v = state.v + dvdt * dt;

            return state;
        }

        return function springRK4Factory (tension, friction, duration) {

            var initState = {
                    x: -1,
                    v: 0,
                    tension: null,
                    friction: null
                },
                path = [0],
                time_lapsed = 0,
                tolerance = 1 / 10000,
                DT = 16 / 1000,
                have_duration, dt, last_state;

            tension = parseFloat(tension) || 500;
            friction = parseFloat(friction) || 20;
            duration = duration || null;

            initState.tension = tension;
            initState.friction = friction;

            have_duration = duration !== null;

            /* Calculate the actual time it takes for this animation to complete with the provided conditions. */
            if (have_duration) {
                /* Run the simulation without a duration. */
                time_lapsed = springRK4Factory(tension, friction);
                /* Compute the adjusted time delta. */
                dt = time_lapsed / duration * DT;
            } else {
                dt = DT;
            }

            while (true) {
                /* Next/step function .*/
                last_state = springIntegrateState(last_state || initState, dt);
                /* Store the position. */
                path.push(1 + last_state.x);
                time_lapsed += 16;
                /* If the change threshold is reached, break. */
                if (!(Math.abs(last_state.x) > tolerance && Math.abs(last_state.v) > tolerance)) {
                    break;
                }
            }

            /* If duration is not defined, return the actual time required for completing this animation. Otherwise, return a closure that holds the
               computed path and returns a snapshot of the position according to a given percentComplete. */
            return !have_duration ? time_lapsed : function(percentComplete) { return path[ (percentComplete * (path.length - 1)) | 0 ]; };
        };
    }());

    /* jQuery easings. */
    Velocity.Easings = {
        linear: function(p) { return p; },
        swing: function(p) { return 0.5 - Math.cos( p * Math.PI ) / 2 },
        /* Bonus "spring" easing, which is a less exaggerated version of easeInOutElastic. */
        spring: function(p) { return 1 - (Math.cos(p * 4.5 * Math.PI) * Math.exp(-p * 6)); }
    };

    /* CSS3 and Robert Penner easings. */
    $.each(
        [
            [ "ease", [ 0.25, 0.1, 0.25, 1.0 ] ],
            [ "ease-in", [ 0.42, 0.0, 1.00, 1.0 ] ],
            [ "ease-out", [ 0.00, 0.0, 0.58, 1.0 ] ],
            [ "ease-in-out", [ 0.42, 0.0, 0.58, 1.0 ] ],
            [ "easeInSine", [ 0.47, 0, 0.745, 0.715 ] ],
            [ "easeOutSine", [ 0.39, 0.575, 0.565, 1 ] ],
            [ "easeInOutSine", [ 0.445, 0.05, 0.55, 0.95 ] ],
            [ "easeInQuad", [ 0.55, 0.085, 0.68, 0.53 ] ],
            [ "easeOutQuad", [ 0.25, 0.46, 0.45, 0.94 ] ],
            [ "easeInOutQuad", [ 0.455, 0.03, 0.515, 0.955 ] ],
            [ "easeInCubic", [ 0.55, 0.055, 0.675, 0.19 ] ],
            [ "easeOutCubic", [ 0.215, 0.61, 0.355, 1 ] ],
            [ "easeInOutCubic", [ 0.645, 0.045, 0.355, 1 ] ],
            [ "easeInQuart", [ 0.895, 0.03, 0.685, 0.22 ] ],
            [ "easeOutQuart", [ 0.165, 0.84, 0.44, 1 ] ],
            [ "easeInOutQuart", [ 0.77, 0, 0.175, 1 ] ],
            [ "easeInQuint", [ 0.755, 0.05, 0.855, 0.06 ] ],
            [ "easeOutQuint", [ 0.23, 1, 0.32, 1 ] ],
            [ "easeInOutQuint", [ 0.86, 0, 0.07, 1 ] ],
            [ "easeInExpo", [ 0.95, 0.05, 0.795, 0.035 ] ],
            [ "easeOutExpo", [ 0.19, 1, 0.22, 1 ] ],
            [ "easeInOutExpo", [ 1, 0, 0, 1 ] ],
            [ "easeInCirc", [ 0.6, 0.04, 0.98, 0.335 ] ],
            [ "easeOutCirc", [ 0.075, 0.82, 0.165, 1 ] ],
            [ "easeInOutCirc", [ 0.785, 0.135, 0.15, 0.86 ] ]
        ], function(i, easingArray) {
            Velocity.Easings[easingArray[0]] = generateBezier.apply(null, easingArray[1]);
        });

    /* Determine the appropriate easing type given an easing input. */
    function getEasing(value, duration) {
        var easing = value;

        /* The easing option can either be a string that references a pre-registered easing,
           or it can be a two-/four-item array of integers to be converted into a bezier/spring function. */
        if (Type.isString(value)) {
            /* Ensure that the easing has been assigned to jQuery's Velocity.Easings object. */
            if (!Velocity.Easings[value]) {
                easing = false;
            }
        } else if (Type.isArray(value) && value.length === 1) {
            easing = generateStep.apply(null, value);
        } else if (Type.isArray(value) && value.length === 2) {
            /* springRK4 must be passed the animation's duration. */
            /* Note: If the springRK4 array contains non-numbers, generateSpringRK4() returns an easing
               function generated with default tension and friction values. */
            easing = generateSpringRK4.apply(null, value.concat([ duration ]));
        } else if (Type.isArray(value) && value.length === 4) {
            /* Note: If the bezier array contains non-numbers, generateBezier() returns false. */
            easing = generateBezier.apply(null, value);
        } else {
            easing = false;
        }

        /* Revert to the Velocity-wide default easing type, or fall back to "swing" (which is also jQuery's default)
           if the Velocity-wide default has been incorrectly modified. */
        if (easing === false) {
            if (Velocity.Easings[Velocity.defaults.easing]) {
                easing = Velocity.defaults.easing;
            } else {
                easing = EASING_DEFAULT;
            }
        }

        return easing;
    }

    /*****************
        CSS Stack
    *****************/

    /* The CSS object is a highly condensed and performant CSS stack that fully replaces jQuery's.
       It handles the validation, getting, and setting of both standard CSS properties and CSS property hooks. */
    /* Note: A "CSS" shorthand is aliased so that our code is easier to read. */
    var CSS = Velocity.CSS = {

        /*************
            RegEx
        *************/

        RegEx: {
            isHex: /^#([A-f\d]{3}){1,2}$/i,
            /* Unwrap a property value's surrounding text, e.g. "rgba(4, 3, 2, 1)" ==> "4, 3, 2, 1" and "rect(4px 3px 2px 1px)" ==> "4px 3px 2px 1px". */
            valueUnwrap: /^[A-z]+\((.*)\)$/i,
            wrappedValueAlreadyExtracted: /[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,
            /* Split a multi-value property into an array of subvalues, e.g. "rgba(4, 3, 2, 1) 4px 3px 2px 1px" ==> [ "rgba(4, 3, 2, 1)", "4px", "3px", "2px", "1px" ]. */
            valueSplit: /([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig
        },

        /************
            Lists
        ************/

        Lists: {
            colors: [ "fill", "stroke", "stopColor", "color", "backgroundColor", "borderColor", "borderTopColor", "borderRightColor", "borderBottomColor", "borderLeftColor", "outlineColor" ],
            transformsBase: [ "translateX", "translateY", "scale", "scaleX", "scaleY", "skewX", "skewY", "rotateZ" ],
            transforms3D: [ "transformPerspective", "translateZ", "scaleZ", "rotateX", "rotateY" ]
        },

        /************
            Hooks
        ************/

        /* Hooks allow a subproperty (e.g. "boxShadowBlur") of a compound-value CSS property
           (e.g. "boxShadow: X Y Blur Spread Color") to be animated as if it were a discrete property. */
        /* Note: Beyond enabling fine-grained property animation, hooking is necessary since Velocity only
           tweens properties with single numeric values; unlike CSS transitions, Velocity does not interpolate compound-values. */
        Hooks: {
            /********************
                Registration
            ********************/

            /* Templates are a concise way of indicating which subproperties must be individually registered for each compound-value CSS property. */
            /* Each template consists of the compound-value's base name, its constituent subproperty names, and those subproperties' default values. */
            templates: {
                "textShadow": [ "Color X Y Blur", "black 0px 0px 0px" ],
                /* Todo: Add support for inset boxShadows. (webkit places it last whereas IE places it first.) */
                "boxShadow": [ "Color X Y Blur Spread", "black 0px 0px 0px 0px" ],
                "clip": [ "Top Right Bottom Left", "0px 0px 0px 0px" ],
                "backgroundPosition": [ "X Y", "0% 0%" ],
                "transformOrigin": [ "X Y Z", "50% 50% 0px" ],
                "perspectiveOrigin": [ "X Y", "50% 50%" ]
            },

            /* A "registered" hook is one that has been converted from its template form into a live,
               tweenable property. It contains data to associate it with its root property. */
            registered: {
                /* Note: A registered hook looks like this ==> textShadowBlur: [ "textShadow", 3 ],
                   which consists of the subproperty's name, the associated root property's name,
                   and the subproperty's position in the root's value. */
            },
            /* Convert the templates into individual hooks then append them to the registered object above. */
            register: function () {
                /* Color hooks registration: Colors are defaulted to white -- as opposed to black -- since colors that are
                   currently set to "transparent" default to their respective template below when color-animated,
                   and white is typically a closer match to transparent than black is. An exception is made for text ("color"),
                   which is almost always set closer to black than white. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    var rgbComponents = (CSS.Lists.colors[i] === "color") ? "0 0 0 1" : "255 255 255 1";
                    CSS.Hooks.templates[CSS.Lists.colors[i]] = [ "Red Green Blue Alpha", rgbComponents ];
                }

                var rootProperty,
                    hookTemplate,
                    hookNames;

                /* In IE, color values inside compound-value properties are positioned at the end the value instead of at the beginning.
                   Thus, we re-arrange the templates accordingly. */
                if (IE) {
                    for (rootProperty in CSS.Hooks.templates) {
                        hookTemplate = CSS.Hooks.templates[rootProperty];
                        hookNames = hookTemplate[0].split(" ");

                        var defaultValues = hookTemplate[1].match(CSS.RegEx.valueSplit);

                        if (hookNames[0] === "Color") {
                            /* Reposition both the hook's name and its default value to the end of their respective strings. */
                            hookNames.push(hookNames.shift());
                            defaultValues.push(defaultValues.shift());

                            /* Replace the existing template for the hook's root property. */
                            CSS.Hooks.templates[rootProperty] = [ hookNames.join(" "), defaultValues.join(" ") ];
                        }
                    }
                }

                /* Hook registration. */
                for (rootProperty in CSS.Hooks.templates) {
                    hookTemplate = CSS.Hooks.templates[rootProperty];
                    hookNames = hookTemplate[0].split(" ");

                    for (var i in hookNames) {
                        var fullHookName = rootProperty + hookNames[i],
                            hookPosition = i;

                        /* For each hook, register its full name (e.g. textShadowBlur) with its root property (e.g. textShadow)
                           and the hook's position in its template's default value string. */
                        CSS.Hooks.registered[fullHookName] = [ rootProperty, hookPosition ];
                    }
                }
            },

            /*****************************
               Injection and Extraction
            *****************************/

            /* Look up the root property associated with the hook (e.g. return "textShadow" for "textShadowBlur"). */
            /* Since a hook cannot be set directly (the browser won't recognize it), style updating for hooks is routed through the hook's root property. */
            getRoot: function (property) {
                var hookData = CSS.Hooks.registered[property];

                if (hookData) {
                    return hookData[0];
                } else {
                    /* If there was no hook match, return the property name untouched. */
                    return property;
                }
            },
            /* Convert any rootPropertyValue, null or otherwise, into a space-delimited list of hook values so that
               the targeted hook can be injected or extracted at its standard position. */
            cleanRootPropertyValue: function(rootProperty, rootPropertyValue) {
                /* If the rootPropertyValue is wrapped with "rgb()", "clip()", etc., remove the wrapping to normalize the value before manipulation. */
                if (CSS.RegEx.valueUnwrap.test(rootPropertyValue)) {
                    rootPropertyValue = rootPropertyValue.match(CSS.RegEx.valueUnwrap)[1];
                }

                /* If rootPropertyValue is a CSS null-value (from which there's inherently no hook value to extract),
                   default to the root's default value as defined in CSS.Hooks.templates. */
                /* Note: CSS null-values include "none", "auto", and "transparent". They must be converted into their
                   zero-values (e.g. textShadow: "none" ==> textShadow: "0px 0px 0px black") for hook manipulation to proceed. */
                if (CSS.Values.isCSSNullValue(rootPropertyValue)) {
                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                }

                return rootPropertyValue;
            },
            /* Extracted the hook's value from its root property's value. This is used to get the starting value of an animating hook. */
            extractValue: function (fullHookName, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1];

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its constituent hook values then grab the desired hook at its standard position. */
                    return rootPropertyValue.toString().match(CSS.RegEx.valueSplit)[hookPosition];
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            },
            /* Inject the hook's value into its root property's value. This is used to piece back together the root property
               once Velocity has updated one of its individually hooked values through tweening. */
            injectValue: function (fullHookName, hookValue, rootPropertyValue) {
                var hookData = CSS.Hooks.registered[fullHookName];

                if (hookData) {
                    var hookRoot = hookData[0],
                        hookPosition = hookData[1],
                        rootPropertyValueParts,
                        rootPropertyValueUpdated;

                    rootPropertyValue = CSS.Hooks.cleanRootPropertyValue(hookRoot, rootPropertyValue);

                    /* Split rootPropertyValue into its individual hook values, replace the targeted value with hookValue,
                       then reconstruct the rootPropertyValue string. */
                    rootPropertyValueParts = rootPropertyValue.toString().match(CSS.RegEx.valueSplit);
                    rootPropertyValueParts[hookPosition] = hookValue;
                    rootPropertyValueUpdated = rootPropertyValueParts.join(" ");

                    return rootPropertyValueUpdated;
                } else {
                    /* If the provided fullHookName isn't a registered hook, return the rootPropertyValue that was passed in. */
                    return rootPropertyValue;
                }
            }
        },

        /*******************
           Normalizations
        *******************/

        /* Normalizations standardize CSS property manipulation by pollyfilling browser-specific implementations (e.g. opacity)
           and reformatting special properties (e.g. clip, rgba) to look like standard ones. */
        Normalizations: {
            /* Normalizations are passed a normalization target (either the property's name, its extracted value, or its injected value),
               the targeted element (which may need to be queried), and the targeted property value. */
            registered: {
                clip: function (type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "clip";
                        /* Clip needs to be unwrapped and stripped of its commas during extraction. */
                        case "extract":
                            var extracted;

                            /* If Velocity also extracted this value, skip extraction. */
                            if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                extracted = propertyValue;
                            } else {
                                /* Remove the "rect()" wrapper. */
                                extracted = propertyValue.toString().match(CSS.RegEx.valueUnwrap);

                                /* Strip off commas. */
                                extracted = extracted ? extracted[1].replace(/,(\s+)?/g, " ") : propertyValue;
                            }

                            return extracted;
                        /* Clip needs to be re-wrapped during injection. */
                        case "inject":
                            return "rect(" + propertyValue + ")";
                    }
                },

                blur: function(type, element, propertyValue) {
                    switch (type) {
                        case "name":
                            return "-webkit-filter";
                        case "extract":
                            var extracted = parseFloat(propertyValue);

                            /* If extracted is NaN, meaning the value isn't already extracted. */
                            if (!(extracted || extracted === 0)) {
                                var blurComponent = propertyValue.toString().match(/blur\(([0-9]+[A-z]+)\)/i);

                                /* If the filter string had a blur component, return just the blur value and unit type. */
                                if (blurComponent) {
                                    extracted = blurComponent[1];
                                /* If the component doesn't exist, default blur to 0. */
                                } else {
                                    extracted = 0;
                                }
                            }

                            return extracted;
                        /* Blur needs to be re-wrapped during injection. */
                        case "inject":
                            /* For the blur effect to be fully de-applied, it needs to be set to "none" instead of 0. */
                            if (!parseFloat(propertyValue)) {
                                return "none";
                            } else {
                                return "blur(" + propertyValue + ")";
                            }
                    }
                },

                /* <=IE8 do not support the standard opacity property. They use filter:alpha(opacity=INT) instead. */
                opacity: function (type, element, propertyValue) {
                    if (IE <= 8) {
                        switch (type) {
                            case "name":
                                return "filter";
                            case "extract":
                                /* <=IE8 return a "filter" value of "alpha(opacity=\d{1,3})".
                                   Extract the value and convert it to a decimal value to match the standard CSS opacity property's formatting. */
                                var extracted = propertyValue.toString().match(/alpha\(opacity=(.*)\)/i);

                                if (extracted) {
                                    /* Convert to decimal value. */
                                    propertyValue = extracted[1] / 100;
                                } else {
                                    /* When extracting opacity, default to 1 since a null value means opacity hasn't been set. */
                                    propertyValue = 1;
                                }

                                return propertyValue;
                            case "inject":
                                /* Opacified elements are required to have their zoom property set to a non-zero value. */
                                element.style.zoom = 1;

                                /* Setting the filter property on elements with certain font property combinations can result in a
                                   highly unappealing ultra-bolding effect. There's no way to remedy this throughout a tween, but dropping the
                                   value altogether (when opacity hits 1) at leasts ensures that the glitch is gone post-tweening. */
                                if (parseFloat(propertyValue) >= 1) {
                                    return "";
                                } else {
                                  /* As per the filter property's spec, convert the decimal value to a whole number and wrap the value. */
                                  return "alpha(opacity=" + parseInt(parseFloat(propertyValue) * 100, 10) + ")";
                                }
                        }
                    /* With all other browsers, normalization is not required; return the same values that were passed in. */
                    } else {
                        switch (type) {
                            case "name":
                                return "opacity";
                            case "extract":
                                return propertyValue;
                            case "inject":
                                return propertyValue;
                        }
                    }
                }
            },

            /*****************************
                Batched Registrations
            *****************************/

            /* Note: Batched normalizations extend the CSS.Normalizations.registered object. */
            register: function () {

                /*****************
                    Transforms
                *****************/

                /* Transforms are the subproperties contained by the CSS "transform" property. Transforms must undergo normalization
                   so that they can be referenced in a properties map by their individual names. */
                /* Note: When transforms are "set", they are actually assigned to a per-element transformCache. When all transform
                   setting is complete complete, CSS.flushTransformCache() must be manually called to flush the values to the DOM.
                   Transform setting is batched in this way to improve performance: the transform style only needs to be updated
                   once when multiple transform subproperties are being animated simultaneously. */
                /* Note: IE9 and Android Gingerbread have support for 2D -- but not 3D -- transforms. Since animating unsupported
                   transform properties results in the browser ignoring the *entire* transform string, we prevent these 3D values
                   from being normalized for these browsers so that tweening skips these properties altogether
                   (since it will ignore them as being unsupported by the browser.) */
                if (!(IE <= 9) && !Velocity.State.isGingerbread) {
                    /* Note: Since the standalone CSS "perspective" property and the CSS transform "perspective" subproperty
                    share the same name, the latter is given a unique token within Velocity: "transformPerspective". */
                    CSS.Lists.transformsBase = CSS.Lists.transformsBase.concat(CSS.Lists.transforms3D);
                }

                for (var i = 0; i < CSS.Lists.transformsBase.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that transformName's value is
                    paired with its respective function. (Otherwise, all functions would take the final for loop's transformName.) */
                    (function() {
                        var transformName = CSS.Lists.transformsBase[i];

                        CSS.Normalizations.registered[transformName] = function (type, element, propertyValue) {
                            switch (type) {
                                /* The normalized property name is the parent "transform" property -- the property that is actually set in CSS. */
                                case "name":
                                    return "transform";
                                /* Transform values are cached onto a per-element transformCache object. */
                                case "extract":
                                    /* If this transform has yet to be assigned a value, return its null value. */
                                    if (Data(element) === undefined || Data(element).transformCache[transformName] === undefined) {
                                        /* Scale CSS.Lists.transformsBase default to 1 whereas all other transform properties default to 0. */
                                        return /^scale/i.test(transformName) ? 1 : 0;
                                    /* When transform values are set, they are wrapped in parentheses as per the CSS spec.
                                       Thus, when extracting their values (for tween calculations), we strip off the parentheses. */
                                    } else {
                                        return Data(element).transformCache[transformName].replace(/[()]/g, "");
                                    }
                                case "inject":
                                    var invalid = false;

                                    /* If an individual transform property contains an unsupported unit type, the browser ignores the *entire* transform property.
                                       Thus, protect users from themselves by skipping setting for transform values supplied with invalid unit types. */
                                    /* Switch on the base transform type; ignore the axis by removing the last letter from the transform's name. */
                                    switch (transformName.substr(0, transformName.length - 1)) {
                                        /* Whitelist unit types for each transform. */
                                        case "translate":
                                            invalid = !/(%|px|em|rem|vw|vh|\d)$/i.test(propertyValue);
                                            break;
                                        /* Since an axis-free "scale" property is supported as well, a little hack is used here to detect it by chopping off its last letter. */
                                        case "scal":
                                        case "scale":
                                            /* Chrome on Android has a bug in which scaled elements blur if their initial scale
                                               value is below 1 (which can happen with forcefeeding). Thus, we detect a yet-unset scale property
                                               and ensure that its first value is always 1. More info: http://stackoverflow.com/questions/10417890/css3-animations-with-transform-causes-blurred-elements-on-webkit/10417962#10417962 */
                                            if (Velocity.State.isAndroid && Data(element).transformCache[transformName] === undefined && propertyValue < 1) {
                                                propertyValue = 1;
                                            }

                                            invalid = !/(\d)$/i.test(propertyValue);
                                            break;
                                        case "skew":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                        case "rotate":
                                            invalid = !/(deg|\d)$/i.test(propertyValue);
                                            break;
                                    }

                                    if (!invalid) {
                                        /* As per the CSS spec, wrap the value in parentheses. */
                                        Data(element).transformCache[transformName] = "(" + propertyValue + ")";
                                    }

                                    /* Although the value is set on the transformCache object, return the newly-updated value for the calling code to process as normal. */
                                    return Data(element).transformCache[transformName];
                            }
                        };
                    })();
                }

                /*************
                    Colors
                *************/

                /* Since Velocity only animates a single numeric value per property, color animation is achieved by hooking the individual RGBA components of CSS color properties.
                   Accordingly, color values must be normalized (e.g. "#ff0000", "red", and "rgb(255, 0, 0)" ==> "255 0 0 1") so that their components can be injected/extracted by CSS.Hooks logic. */
                for (var i = 0; i < CSS.Lists.colors.length; i++) {
                    /* Wrap the dynamically generated normalization function in a new scope so that colorName's value is paired with its respective function.
                       (Otherwise, all functions would take the final for loop's colorName.) */
                    (function () {
                        var colorName = CSS.Lists.colors[i];

                        /* Note: In IE<=8, which support rgb but not rgba, color properties are reverted to rgb by stripping off the alpha component. */
                        CSS.Normalizations.registered[colorName] = function(type, element, propertyValue) {
                            switch (type) {
                                case "name":
                                    return colorName;
                                /* Convert all color values into the rgb format. (Old IE can return hex values and color names instead of rgb/rgba.) */
                                case "extract":
                                    var extracted;

                                    /* If the color is already in its hookable form (e.g. "255 255 255 1") due to having been previously extracted, skip extraction. */
                                    if (CSS.RegEx.wrappedValueAlreadyExtracted.test(propertyValue)) {
                                        extracted = propertyValue;
                                    } else {
                                        var converted,
                                            colorNames = {
                                                black: "rgb(0, 0, 0)",
                                                blue: "rgb(0, 0, 255)",
                                                gray: "rgb(128, 128, 128)",
                                                green: "rgb(0, 128, 0)",
                                                red: "rgb(255, 0, 0)",
                                                white: "rgb(255, 255, 255)"
                                            };

                                        /* Convert color names to rgb. */
                                        if (/^[A-z]+$/i.test(propertyValue)) {
                                            if (colorNames[propertyValue] !== undefined) {
                                                converted = colorNames[propertyValue]
                                            } else {
                                                /* If an unmatched color name is provided, default to black. */
                                                converted = colorNames.black;
                                            }
                                        /* Convert hex values to rgb. */
                                        } else if (CSS.RegEx.isHex.test(propertyValue)) {
                                            converted = "rgb(" + CSS.Values.hexToRgb(propertyValue).join(" ") + ")";
                                        /* If the provided color doesn't match any of the accepted color formats, default to black. */
                                        } else if (!(/^rgba?\(/i.test(propertyValue))) {
                                            converted = colorNames.black;
                                        }

                                        /* Remove the surrounding "rgb/rgba()" string then replace commas with spaces and strip
                                           repeated spaces (in case the value included spaces to begin with). */
                                        extracted = (converted || propertyValue).toString().match(CSS.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g, " ");
                                    }

                                    /* So long as this isn't <=IE8, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    if (!(IE <= 8) && extracted.split(" ").length === 3) {
                                        extracted += " 1";
                                    }

                                    return extracted;
                                case "inject":
                                    /* If this is IE<=8 and an alpha component exists, strip it off. */
                                    if (IE <= 8) {
                                        if (propertyValue.split(" ").length === 4) {
                                            propertyValue = propertyValue.split(/\s+/).slice(0, 3).join(" ");
                                        }
                                    /* Otherwise, add a fourth (alpha) component if it's missing and default it to 1 (visible). */
                                    } else if (propertyValue.split(" ").length === 3) {
                                        propertyValue += " 1";
                                    }

                                    /* Re-insert the browser-appropriate wrapper("rgb/rgba()"), insert commas, and strip off decimal units
                                       on all values but the fourth (R, G, and B only accept whole numbers). */
                                    return (IE <= 8 ? "rgb" : "rgba") + "(" + propertyValue.replace(/\s+/g, ",").replace(/\.(\d)+(?=,)/g, "") + ")";
                            }
                        };
                    })();
                }
            }
        },

        /************************
           CSS Property Names
        ************************/

        Names: {
            /* Camelcase a property name into its JavaScript notation (e.g. "background-color" ==> "backgroundColor").
               Camelcasing is used to normalize property names between and across calls. */
            camelCase: function (property) {
                return property.replace(/-(\w)/g, function (match, subMatch) {
                    return subMatch.toUpperCase();
                });
            },

            /* For SVG elements, some properties (namely, dimensional ones) are GET/SET via the element's HTML attributes (instead of via CSS styles). */
            SVGAttribute: function (property) {
                var SVGAttributes = "width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";

                /* Certain browsers require an SVG transform to be applied as an attribute. (Otherwise, application via CSS is preferable due to 3D support.) */
                if (IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) {
                    SVGAttributes += "|transform";
                }

                return new RegExp("^(" + SVGAttributes + ")$", "i").test(property);
            },

            /* Determine whether a property should be set with a vendor prefix. */
            /* If a prefixed version of the property exists, return it. Otherwise, return the original property name.
               If the property is not at all supported by the browser, return a false flag. */
            prefixCheck: function (property) {
                /* If this property has already been checked, return the cached value. */
                if (Velocity.State.prefixMatches[property]) {
                    return [ Velocity.State.prefixMatches[property], true ];
                } else {
                    var vendors = [ "", "Webkit", "Moz", "ms", "O" ];

                    for (var i = 0, vendorsLength = vendors.length; i < vendorsLength; i++) {
                        var propertyPrefixed;

                        if (i === 0) {
                            propertyPrefixed = property;
                        } else {
                            /* Capitalize the first letter of the property to conform to JavaScript vendor prefix notation (e.g. webkitFilter). */
                            propertyPrefixed = vendors[i] + property.replace(/^\w/, function(match) { return match.toUpperCase(); });
                        }

                        /* Check if the browser supports this property as prefixed. */
                        if (Type.isString(Velocity.State.prefixElement.style[propertyPrefixed])) {
                            /* Cache the match. */
                            Velocity.State.prefixMatches[property] = propertyPrefixed;

                            return [ propertyPrefixed, true ];
                        }
                    }

                    /* If the browser doesn't support this property in any form, include a false flag so that the caller can decide how to proceed. */
                    return [ property, false ];
                }
            }
        },

        /************************
           CSS Property Values
        ************************/

        Values: {
            /* Hex to RGB conversion. Copyright Tim Down: http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb */
            hexToRgb: function (hex) {
                var shortformRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i,
                    longformRegex = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,
                    rgbParts;

                hex = hex.replace(shortformRegex, function (m, r, g, b) {
                    return r + r + g + g + b + b;
                });

                rgbParts = longformRegex.exec(hex);

                return rgbParts ? [ parseInt(rgbParts[1], 16), parseInt(rgbParts[2], 16), parseInt(rgbParts[3], 16) ] : [ 0, 0, 0 ];
            },

            isCSSNullValue: function (value) {
                /* The browser defaults CSS values that have not been set to either 0 or one of several possible null-value strings.
                   Thus, we check for both falsiness and these special strings. */
                /* Null-value checking is performed to default the special strings to 0 (for the sake of tweening) or their hook
                   templates as defined as CSS.Hooks (for the sake of hook injection/extraction). */
                /* Note: Chrome returns "rgba(0, 0, 0, 0)" for an undefined color whereas IE returns "transparent". */
                return (value == 0 || /^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(value));
            },

            /* Retrieve a property's default unit type. Used for assigning a unit type when one is not supplied by the user. */
            getUnitType: function (property) {
                if (/^(rotate|skew)/i.test(property)) {
                    return "deg";
                } else if (/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(property)) {
                    /* The above properties are unitless. */
                    return "";
                } else {
                    /* Default to px for all other properties. */
                    return "px";
                }
            },

            /* HTML elements default to an associated display type when they're not set to display:none. */
            /* Note: This function is used for correctly setting the non-"none" display value in certain Velocity redirects, such as fadeIn/Out. */
            getDisplayType: function (element) {
                var tagName = element && element.tagName.toString().toLowerCase();

                if (/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(tagName)) {
                    return "inline";
                } else if (/^(li)$/i.test(tagName)) {
                    return "list-item";
                } else if (/^(tr)$/i.test(tagName)) {
                    return "table-row";
                /* Default to "block" when no match is found. */
                } else {
                    return "block";
                }
            },

            /* The class add/remove functions are used to temporarily apply a "velocity-animating" class to elements while they're animating. */
            addClass: function (element, className) {
                if (element.classList) {
                    element.classList.add(className);
                } else {
                    element.className += (element.className.length ? " " : "") + className;
                }
            },

            removeClass: function (element, className) {
                if (element.classList) {
                    element.classList.remove(className);
                } else {
                    element.className = element.className.toString().replace(new RegExp("(^|\\s)" + className.split(" ").join("|") + "(\\s|$)", "gi"), " ");
                }
            }
        },

        /****************************
           Style Getting & Setting
        ****************************/

        /* The singular getPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        getPropertyValue: function (element, property, rootPropertyValue, forceStyleLookup) {
            /* Get an element's computed property value. */
            /* Note: Retrieving the value of a CSS property cannot simply be performed by checking an element's
               style attribute (which only reflects user-defined values). Instead, the browser must be queried for a property's
               *computed* value. You can read more about getComputedStyle here: https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle */
            function computePropertyValue (element, property) {
                /* When box-sizing isn't set to border-box, height and width style values are incorrectly computed when an
                   element's scrollbars are visible (which expands the element's dimensions). Thus, we defer to the more accurate
                   offsetHeight/Width property, which includes the total dimensions for interior, border, padding, and scrollbar.
                   We subtract border and padding to get the sum of interior + scrollbar. */
                var computedValue = 0;

                /* IE<=8 doesn't support window.getComputedStyle, thus we defer to jQuery, which has an extensive array
                   of hacks to accurately retrieve IE8 property values. Re-implementing that logic here is not worth bloating the
                   codebase for a dying browser. The performance repercussions of using jQuery here are minimal since
                   Velocity is optimized to rarely (and sometimes never) query the DOM. Further, the $.css() codepath isn't that slow. */
                if (IE <= 8) {
                    computedValue = $.css(element, property); /* GET */
                /* All other browsers support getComputedStyle. The returned live object reference is cached onto its
                   associated element so that it does not need to be refetched upon every GET. */
                } else {
                    /* Browsers do not return height and width values for elements that are set to display:"none". Thus, we temporarily
                       toggle display to the element type's default value. */
                    var toggleDisplay = false;

                    if (/^(width|height)$/.test(property) && CSS.getPropertyValue(element, "display") === 0) {
                        toggleDisplay = true;
                        CSS.setPropertyValue(element, "display", CSS.Values.getDisplayType(element));
                    }

                    function revertDisplay () {
                        if (toggleDisplay) {
                            CSS.setPropertyValue(element, "display", "none");
                        }
                    }

                    if (!forceStyleLookup) {
                        if (property === "height" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxHeight = element.offsetHeight - (parseFloat(CSS.getPropertyValue(element, "borderTopWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderBottomWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingTop")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingBottom")) || 0);
                            revertDisplay();

                            return contentBoxHeight;
                        } else if (property === "width" && CSS.getPropertyValue(element, "boxSizing").toString().toLowerCase() !== "border-box") {
                            var contentBoxWidth = element.offsetWidth - (parseFloat(CSS.getPropertyValue(element, "borderLeftWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "borderRightWidth")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingLeft")) || 0) - (parseFloat(CSS.getPropertyValue(element, "paddingRight")) || 0);
                            revertDisplay();

                            return contentBoxWidth;
                        }
                    }

                    var computedStyle;

                    /* For elements that Velocity hasn't been called on directly (e.g. when Velocity queries the DOM on behalf
                       of a parent of an element its animating), perform a direct getComputedStyle lookup since the object isn't cached. */
                    if (Data(element) === undefined) {
                        computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If the computedStyle object has yet to be cached, do so now. */
                    } else if (!Data(element).computedStyle) {
                        computedStyle = Data(element).computedStyle = window.getComputedStyle(element, null); /* GET */
                    /* If computedStyle is cached, use it. */
                    } else {
                        computedStyle = Data(element).computedStyle;
                    }

                    /* IE and Firefox do not return a value for the generic borderColor -- they only return individual values for each border side's color.
                       As a polyfill for querying individual border side colors, just return the top border's color. */
                    if ((IE || Velocity.State.isFirefox) && property === "borderColor") {
                        property = "borderTopColor";
                    }

                    /* IE9 has a bug in which the "filter" property must be accessed from computedStyle using the getPropertyValue method
                       instead of a direct property lookup. The getPropertyValue method is slower than a direct lookup, which is why we avoid it by default. */
                    if (IE === 9 && property === "filter") {
                        computedValue = computedStyle.getPropertyValue(property); /* GET */
                    } else {
                        computedValue = computedStyle[property];
                    }

                    /* Fall back to the property's style value (if defined) when computedValue returns nothing,
                       which can happen when the element hasn't been painted. */
                    if (computedValue === "" || computedValue === null) {
                        computedValue = element.style[property];
                    }

                    revertDisplay();
                }

                /* For top, right, bottom, and left (TRBL) values that are set to "auto" on elements of "fixed" or "absolute" position,
                   defer to jQuery for converting "auto" to a numeric value. (For elements with a "static" or "relative" position, "auto" has the same
                   effect as being set to 0, so no conversion is necessary.) */
                /* An example of why numeric conversion is necessary: When an element with "position:absolute" has an untouched "left"
                   property, which reverts to "auto", left's value is 0 relative to its parent element, but is often non-zero relative
                   to its *containing* (not parent) element, which is the nearest "position:relative" ancestor or the viewport (and always the viewport in the case of "position:fixed"). */
                if (computedValue === "auto" && /^(top|right|bottom|left)$/i.test(property)) {
                    var position = computePropertyValue(element, "position"); /* GET */

                    /* For absolute positioning, jQuery's $.position() only returns values for top and left;
                       right and bottom will have their "auto" value reverted to 0. */
                    /* Note: A jQuery object must be created here since jQuery doesn't have a low-level alias for $.position().
                       Not a big deal since we're currently in a GET batch anyway. */
                    if (position === "fixed" || (position === "absolute" && /top|left/i.test(property))) {
                        /* Note: jQuery strips the pixel unit from its returned values; we re-add it here to conform with computePropertyValue's behavior. */
                        computedValue = $(element).position()[property] + "px"; /* GET */
                    }
                }

                return computedValue;
            }

            var propertyValue;

            /* If this is a hooked property (e.g. "clipLeft" instead of the root property of "clip"),
               extract the hook's value from a normalized rootPropertyValue using CSS.Hooks.extractValue(). */
            if (CSS.Hooks.registered[property]) {
                var hook = property,
                    hookRoot = CSS.Hooks.getRoot(hook);

                /* If a cached rootPropertyValue wasn't passed in (which Velocity always attempts to do in order to avoid requerying the DOM),
                   query the DOM for the root property's value. */
                if (rootPropertyValue === undefined) {
                    /* Since the browser is now being directly queried, use the official post-prefixing property name for this lookup. */
                    rootPropertyValue = CSS.getPropertyValue(element, CSS.Names.prefixCheck(hookRoot)[0]); /* GET */
                }

                /* If this root has a normalization registered, peform the associated normalization extraction. */
                if (CSS.Normalizations.registered[hookRoot]) {
                    rootPropertyValue = CSS.Normalizations.registered[hookRoot]("extract", element, rootPropertyValue);
                }

                /* Extract the hook's value. */
                propertyValue = CSS.Hooks.extractValue(hook, rootPropertyValue);

            /* If this is a normalized property (e.g. "opacity" becomes "filter" in <=IE8) or "translateX" becomes "transform"),
               normalize the property's name and value, and handle the special case of transforms. */
            /* Note: Normalizing a property is mutually exclusive from hooking a property since hook-extracted values are strictly
               numerical and therefore do not require normalization extraction. */
            } else if (CSS.Normalizations.registered[property]) {
                var normalizedPropertyName,
                    normalizedPropertyValue;

                normalizedPropertyName = CSS.Normalizations.registered[property]("name", element);

                /* Transform values are calculated via normalization extraction (see below), which checks against the element's transformCache.
                   At no point do transform GETs ever actually query the DOM; initial stylesheet values are never processed.
                   This is because parsing 3D transform matrices is not always accurate and would bloat our codebase;
                   thus, normalization extraction defaults initial transform values to their zero-values (e.g. 1 for scaleX and 0 for translateX). */
                if (normalizedPropertyName !== "transform") {
                    normalizedPropertyValue = computePropertyValue(element, CSS.Names.prefixCheck(normalizedPropertyName)[0]); /* GET */

                    /* If the value is a CSS null-value and this property has a hook template, use that zero-value template so that hooks can be extracted from it. */
                    if (CSS.Values.isCSSNullValue(normalizedPropertyValue) && CSS.Hooks.templates[property]) {
                        normalizedPropertyValue = CSS.Hooks.templates[property][1];
                    }
                }

                propertyValue = CSS.Normalizations.registered[property]("extract", element, normalizedPropertyValue);
            }

            /* If a (numeric) value wasn't produced via hook extraction or normalization, query the DOM. */
            if (!/^[\d-]/.test(propertyValue)) {
                /* For SVG elements, dimensional properties (which SVGAttribute() detects) are tweened via
                   their HTML attribute values instead of their CSS style values. */
                if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                    /* Since the height/width attribute values must be set manually, they don't reflect computed values.
                       Thus, we use use getBBox() to ensure we always get values for elements with undefined height/width attributes. */
                    if (/^(height|width)$/i.test(property)) {
                        propertyValue = element.getBBox()[property];
                    /* Otherwise, access the attribute value directly. */
                    } else {
                        propertyValue = element.getAttribute(property);
                    }
                } else {
                    propertyValue = computePropertyValue(element, CSS.Names.prefixCheck(property)[0]); /* GET */
                }
            }

            /* Since property lookups are for animation purposes (which entails computing the numeric delta between start and end values),
               convert CSS null-values to an integer of value 0. */
            if (CSS.Values.isCSSNullValue(propertyValue)) {
                propertyValue = 0;
            }

            if (Velocity.debug >= 2) console.log("Get " + property + ": " + propertyValue);

            return propertyValue;
        },

        /* The singular setPropertyValue, which routes the logic for all normalizations, hooks, and standard CSS properties. */
        setPropertyValue: function(element, property, propertyValue, rootPropertyValue, scrollData) {
            var propertyName = property;

            /* In order to be subjected to call options and element queueing, scroll animation is routed through Velocity as if it were a standard CSS property. */
            if (property === "scroll") {
                /* If a container option is present, scroll the container instead of the browser window. */
                if (scrollData.container) {
                    scrollData.container["scroll" + scrollData.direction] = propertyValue;
                /* Otherwise, Velocity defaults to scrolling the browser window. */
                } else {
                    if (scrollData.direction === "Left") {
                        window.scrollTo(propertyValue, scrollData.alternateValue);
                    } else {
                        window.scrollTo(scrollData.alternateValue, propertyValue);
                    }
                }
            } else {
                /* Transforms (translateX, rotateZ, etc.) are applied to a per-element transformCache object, which is manually flushed via flushTransformCache().
                   Thus, for now, we merely cache transforms being SET. */
                if (CSS.Normalizations.registered[property] && CSS.Normalizations.registered[property]("name", element) === "transform") {
                    /* Perform a normalization injection. */
                    /* Note: The normalization logic handles the transformCache updating. */
                    CSS.Normalizations.registered[property]("inject", element, propertyValue);

                    propertyName = "transform";
                    propertyValue = Data(element).transformCache[property];
                } else {
                    /* Inject hooks. */
                    if (CSS.Hooks.registered[property]) {
                        var hookName = property,
                            hookRoot = CSS.Hooks.getRoot(property);

                        /* If a cached rootPropertyValue was not provided, query the DOM for the hookRoot's current value. */
                        rootPropertyValue = rootPropertyValue || CSS.getPropertyValue(element, hookRoot); /* GET */

                        propertyValue = CSS.Hooks.injectValue(hookName, propertyValue, rootPropertyValue);
                        property = hookRoot;
                    }

                    /* Normalize names and values. */
                    if (CSS.Normalizations.registered[property]) {
                        propertyValue = CSS.Normalizations.registered[property]("inject", element, propertyValue);
                        property = CSS.Normalizations.registered[property]("name", element);
                    }

                    /* Assign the appropriate vendor prefix before performing an official style update. */
                    propertyName = CSS.Names.prefixCheck(property)[0];

                    /* A try/catch is used for IE<=8, which throws an error when "invalid" CSS values are set, e.g. a negative width.
                       Try/catch is avoided for other browsers since it incurs a performance overhead. */
                    if (IE <= 8) {
                        try {
                            element.style[propertyName] = propertyValue;
                        } catch (error) { if (Velocity.debug) console.log("Browser does not support [" + propertyValue + "] for [" + propertyName + "]"); }
                    /* SVG elements have their dimensional properties (width, height, x, y, cx, etc.) applied directly as attributes instead of as styles. */
                    /* Note: IE8 does not support SVG elements, so it's okay that we skip it for SVG animation. */
                    } else if (Data(element) && Data(element).isSVG && CSS.Names.SVGAttribute(property)) {
                        /* Note: For SVG attributes, vendor-prefixed property names are never used. */
                        /* Note: Not all CSS properties can be animated via attributes, but the browser won't throw an error for unsupported properties. */
                        element.setAttribute(property, propertyValue);
                    } else {
                        element.style[propertyName] = propertyValue;
                    }

                    if (Velocity.debug >= 2) console.log("Set " + property + " (" + propertyName + "): " + propertyValue);
                }
            }

            /* Return the normalized property name and value in case the caller wants to know how these values were modified before being applied to the DOM. */
            return [ propertyName, propertyValue ];
        },

        /* To increase performance by batching transform updates into a single SET, transforms are not directly applied to an element until flushTransformCache() is called. */
        /* Note: Velocity applies transform properties in the same order that they are chronogically introduced to the element's CSS styles. */
        flushTransformCache: function(element) {
            var transformString = "";

            /* Certain browsers require that SVG transforms be applied as an attribute. However, the SVG transform attribute takes a modified version of CSS's transform string
               (units are dropped and, except for skewX/Y, subproperties are merged into their master property -- e.g. scaleX and scaleY are merged into scale(X Y). */
            if ((IE || (Velocity.State.isAndroid && !Velocity.State.isChrome)) && Data(element).isSVG) {
                /* Since transform values are stored in their parentheses-wrapped form, we use a helper function to strip out their numeric values.
                   Further, SVG transform properties only take unitless (representing pixels) values, so it's okay that parseFloat() strips the unit suffixed to the float value. */
                function getTransformFloat (transformProperty) {
                    return parseFloat(CSS.getPropertyValue(element, transformProperty));
                }

                /* Create an object to organize all the transforms that we'll apply to the SVG element. To keep the logic simple,
                   we process *all* transform properties -- even those that may not be explicitly applied (since they default to their zero-values anyway). */
                var SVGTransforms = {
                    translate: [ getTransformFloat("translateX"), getTransformFloat("translateY") ],
                    skewX: [ getTransformFloat("skewX") ], skewY: [ getTransformFloat("skewY") ],
                    /* If the scale property is set (non-1), use that value for the scaleX and scaleY values
                       (this behavior mimics the result of animating all these properties at once on HTML elements). */
                    scale: getTransformFloat("scale") !== 1 ? [ getTransformFloat("scale"), getTransformFloat("scale") ] : [ getTransformFloat("scaleX"), getTransformFloat("scaleY") ],
                    /* Note: SVG's rotate transform takes three values: rotation degrees followed by the X and Y values
                       defining the rotation's origin point. We ignore the origin values (default them to 0). */
                    rotate: [ getTransformFloat("rotateZ"), 0, 0 ]
                };

                /* Iterate through the transform properties in the user-defined property map order.
                   (This mimics the behavior of non-SVG transform animation.) */
                $.each(Data(element).transformCache, function(transformName) {
                    /* Except for with skewX/Y, revert the axis-specific transform subproperties to their axis-free master
                       properties so that they match up with SVG's accepted transform properties. */
                    if (/^translate/i.test(transformName)) {
                        transformName = "translate";
                    } else if (/^scale/i.test(transformName)) {
                        transformName = "scale";
                    } else if (/^rotate/i.test(transformName)) {
                        transformName = "rotate";
                    }

                    /* Check that we haven't yet deleted the property from the SVGTransforms container. */
                    if (SVGTransforms[transformName]) {
                        /* Append the transform property in the SVG-supported transform format. As per the spec, surround the space-delimited values in parentheses. */
                        transformString += transformName + "(" + SVGTransforms[transformName].join(" ") + ")" + " ";

                        /* After processing an SVG transform property, delete it from the SVGTransforms container so we don't
                           re-insert the same master property if we encounter another one of its axis-specific properties. */
                        delete SVGTransforms[transformName];
                    }
                });
            } else {
                var transformValue,
                    perspective;

                /* Transform properties are stored as members of the transformCache object. Concatenate all the members into a string. */
                $.each(Data(element).transformCache, function(transformName) {
                    transformValue = Data(element).transformCache[transformName];

                    /* Transform's perspective subproperty must be set first in order to take effect. Store it temporarily. */
                    if (transformName === "transformPerspective") {
                        perspective = transformValue;
                        return true;
                    }

                    /* IE9 only supports one rotation type, rotateZ, which it refers to as "rotate". */
                    if (IE === 9 && transformName === "rotateZ") {
                        transformName = "rotate";
                    }

                    transformString += transformName + transformValue + " ";
                });

                /* If present, set the perspective subproperty first. */
                if (perspective) {
                    transformString = "perspective" + perspective + " " + transformString;
                }
            }

            CSS.setPropertyValue(element, "transform", transformString);
        }
    };

    /* Register hooks and normalizations. */
    CSS.Hooks.register();
    CSS.Normalizations.register();

    /* Allow hook setting in the same fashion as jQuery's $.css(). */
    Velocity.hook = function (elements, arg2, arg3) {
        var value = undefined;

        elements = sanitizeElements(elements);

        $.each(elements, function(i, element) {
            /* Initialize Velocity's per-element data cache if this element hasn't previously been animated. */
            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /* Get property value. If an element set was passed in, only return the value for the first element. */
            if (arg3 === undefined) {
                if (value === undefined) {
                    value = Velocity.CSS.getPropertyValue(element, arg2);
                }
            /* Set property value. */
            } else {
                /* sPV returns an array of the normalized propertyName/propertyValue pair used to update the DOM. */
                var adjustedSet = Velocity.CSS.setPropertyValue(element, arg2, arg3);

                /* Transform properties don't automatically set. They have to be flushed to the DOM. */
                if (adjustedSet[0] === "transform") {
                    Velocity.CSS.flushTransformCache(element);
                }

                value = adjustedSet;
            }
        });

        return value;
    };

    /*****************
        Animation
    *****************/

    var animate = function() {

        /******************
            Call Chain
        ******************/

        /* Logic for determining what to return to the call stack when exiting out of Velocity. */
        function getChain () {
            /* If we are using the utility function, attempt to return this call's promise. If no promise library was detected,
               default to null instead of returning the targeted elements so that utility function's return value is standardized. */
            if (isUtility) {
                return promiseData.promise || null;
            /* Otherwise, if we're using $.fn, return the jQuery-/Zepto-wrapped element set. */
            } else {
                return elementsWrapped;
            }
        }

        /*************************
           Arguments Assignment
        *************************/

        /* To allow for expressive CoffeeScript code, Velocity supports an alternative syntax in which "properties" and "options"
           objects are defined on a container object that's passed in as Velocity's sole argument. */
        /* Note: Some browsers automatically populate arguments with a "properties" object. We detect it by checking for its default "names" property. */
        var syntacticSugar = (arguments[0] && (($.isPlainObject(arguments[0].properties) && !arguments[0].properties.names) || Type.isString(arguments[0].properties))),
            /* Whether Velocity was called via the utility function (as opposed to on a jQuery/Zepto object). */
            isUtility,
            /* When Velocity is called via the utility function ($.Velocity()/Velocity()), elements are explicitly
               passed in as the first parameter. Thus, argument positioning varies. We normalize them here. */
            elementsWrapped,
            argumentIndex;

        var elements,
            propertiesMap,
            options;

        /* Detect jQuery/Zepto elements being animated via the $.fn method. */
        if (Type.isWrapped(this)) {
            isUtility = false;

            argumentIndex = 0;
            elements = this;
            elementsWrapped = this;
        /* Otherwise, raw elements are being animated via the utility function. */
        } else {
            isUtility = true;

            argumentIndex = 1;
            elements = syntacticSugar ? arguments[0].elements : arguments[0];
        }

        elements = sanitizeElements(elements);

        if (!elements) {
            return;
        }

        if (syntacticSugar) {
            propertiesMap = arguments[0].properties;
            options = arguments[0].options;
        } else {
            propertiesMap = arguments[argumentIndex];
            options = arguments[argumentIndex + 1];
        }

        /* The length of the element set (in the form of a nodeList or an array of elements) is defaulted to 1 in case a
           single raw DOM element is passed in (which doesn't contain a length property). */
        var elementsLength = elements.length,
            elementsIndex = 0;

        /***************************
            Argument Overloading
        ***************************/

        /* Support is included for jQuery's argument overloading: $.animate(propertyMap [, duration] [, easing] [, complete]).
           Overloading is detected by checking for the absence of an object being passed into options. */
        /* Note: The stop action does not accept animation options, and is therefore excluded from this check. */
        if (propertiesMap !== "stop" && !$.isPlainObject(options)) {
            /* The utility function shifts all arguments one position to the right, so we adjust for that offset. */
            var startingArgumentPosition = argumentIndex + 1;

            options = {};

            /* Iterate through all options arguments */
            for (var i = startingArgumentPosition; i < arguments.length; i++) {
                /* Treat a number as a duration. Parse it out. */
                /* Note: The following RegEx will return true if passed an array with a number as its first item.
                   Thus, arrays are skipped from this check. */
                if (!Type.isArray(arguments[i]) && (/^(fast|normal|slow)$/i.test(arguments[i]) || /^\d/.test(arguments[i]))) {
                    options.duration = arguments[i];
                /* Treat strings and arrays as easings. */
                } else if (Type.isString(arguments[i]) || Type.isArray(arguments[i])) {
                    options.easing = arguments[i];
                /* Treat a function as a complete callback. */
                } else if (Type.isFunction(arguments[i])) {
                    options.complete = arguments[i];
                }
            }
        }

        /***************
            Promises
        ***************/

        var promiseData = {
                promise: null,
                resolver: null,
                rejecter: null
            };

        /* If this call was made via the utility function (which is the default method of invocation when jQuery/Zepto are not being used), and if
           promise support was detected, create a promise object for this call and store references to its resolver and rejecter methods. The resolve
           method is used when a call completes naturally or is prematurely stopped by the user. In both cases, completeCall() handles the associated
           call cleanup and promise resolving logic. The reject method is used when an invalid set of arguments is passed into a Velocity call. */
        /* Note: Velocity employs a call-based queueing architecture, which means that stopping an animating element actually stops the full call that
           triggered it -- not that one element exclusively. Similarly, there is one promise per call, and all elements targeted by a Velocity call are
           grouped together for the purposes of resolving and rejecting a promise. */
        if (isUtility && Velocity.Promise) {
            promiseData.promise = new Velocity.Promise(function (resolve, reject) {
                promiseData.resolver = resolve;
                promiseData.rejecter = reject;
            });
        }

        /*********************
           Action Detection
        *********************/

        /* Velocity's behavior is categorized into "actions": Elements can either be specially scrolled into view,
           or they can be started, stopped, or reversed. If a literal or referenced properties map is passed in as Velocity's
           first argument, the associated action is "start". Alternatively, "scroll", "reverse", or "stop" can be passed in instead of a properties map. */
        var action;

        switch (propertiesMap) {
            case "scroll":
                action = "scroll";
                break;

            case "reverse":
                action = "reverse";
                break;

            case "stop":
                /*******************
                    Action: Stop
                *******************/

                /* Clear the currently-active delay on each targeted element. */
                $.each(elements, function(i, element) {
                    if (Data(element) && Data(element).delayTimer) {
                        /* Stop the timer from triggering its cached next() function. */
                        clearTimeout(Data(element).delayTimer.setTimeout);

                        /* Manually call the next() function so that the subsequent queue items can progress. */
                        if (Data(element).delayTimer.next) {
                            Data(element).delayTimer.next();
                        }

                        delete Data(element).delayTimer;
                    }
                });

                var callsToStop = [];

                /* When the stop action is triggered, the elements' currently active call is immediately stopped. The active call might have
                   been applied to multiple elements, in which case all of the call's elements will be subjected to stopping. When an element
                   is stopped, the next item in its animation queue is immediately triggered. */
                /* An additional argument may be passed in to clear an element's remaining queued calls. Either true (which defaults to the "fx" queue)
                   or a custom queue string can be passed in. */
                /* Note: The stop command runs prior to Queueing since its behavior is intended to take effect *immediately*,
                   regardless of the element's current queue state. */

                /* Iterate through every active call. */
                $.each(Velocity.State.calls, function(i, activeCall) {
                    /* Inactive calls are set to false by the logic inside completeCall(). Skip them. */
                    if (activeCall) {
                        /* Iterate through the active call's targeted elements. */
                        $.each(activeCall[1], function(k, activeElement) {
                            var queueName = Type.isString(options) ? options : "";

                            if (options !== undefined && activeCall[2].queue !== queueName) {
                                return true;
                            }

                            /* Iterate through the calls targeted by the stop command. */
                            $.each(elements, function(l, element) {
                                /* Check that this call was applied to the target element. */
                                if (element === activeElement) {
                                    /* Optionally clear the remaining queued calls. */
                                    if (options !== undefined) {
                                        /* Iterate through the items in the element's queue. */
                                        $.each($.queue(element, queueName), function(_, item) {
                                            /* The queue array can contain an "inprogress" string, which we skip. */
                                            if (Type.isFunction(item)) {
                                                /* Pass the item's callback a flag indicating that we want to abort from the queue call.
                                                   (Specifically, the queue will resolve the call's associated promise then abort.)  */
                                                item(null, true);
                                            }
                                        });

                                        /* Clearing the $.queue() array is achieved by resetting it to []. */
                                        $.queue(element, queueName, []);
                                    }

                                    if (Data(element) && queueName === "") {
                                        /* Since "reverse" uses cached start values (the previous call's endValues),
                                           these values must be changed to reflect the final value that the elements were actually tweened to. */
                                        $.each(Data(element).tweensContainer, function(m, activeTween) {
                                            activeTween.endValue = activeTween.currentValue;
                                        });
                                    }

                                    callsToStop.push(i);
                                }
                            });
                        });
                    }
                });

                /* Prematurely call completeCall() on each matched active call, passing an additional flag to indicate
                   that the complete callback and display:none setting should be skipped since we're completing prematurely. */
                $.each(callsToStop, function(i, j) {
                    completeCall(j, true);
                });

                if (promiseData.promise) {
                    /* Immediately resolve the promise associated with this stop call since stop runs synchronously. */
                    promiseData.resolver(elements);
                }

                /* Since we're stopping, and not proceeding with queueing, exit out of Velocity. */
                return getChain();

            default:
                /* Treat a non-empty plain object as a literal properties map. */
                if ($.isPlainObject(propertiesMap) && !Type.isEmptyObject(propertiesMap)) {
                    action = "start";

                /****************
                    Redirects
                ****************/

                /* Check if a string matches a registered redirect (see Redirects above). */
                } else if (Type.isString(propertiesMap) && Velocity.Redirects[propertiesMap]) {
                    var opts = $.extend({}, options),
                        durationOriginal = opts.duration,
                        delayOriginal = opts.delay || 0;

                    /* If the backwards option was passed in, reverse the element set so that elements animate from the last to the first. */
                    if (opts.backwards === true) {
                        elements = $.extend(true, [], elements).reverse();
                    }

                    /* Individually trigger the redirect for each element in the set to prevent users from having to handle iteration logic in their redirect. */
                    $.each(elements, function(elementIndex, element) {
                        /* If the stagger option was passed in, successively delay each element by the stagger value (in ms). Retain the original delay value. */
                        if (parseFloat(opts.stagger)) {
                            opts.delay = delayOriginal + (parseFloat(opts.stagger) * elementIndex);
                        } else if (Type.isFunction(opts.stagger)) {
                            opts.delay = delayOriginal + opts.stagger.call(element, elementIndex, elementsLength);
                        }

                        /* If the drag option was passed in, successively increase/decrease (depending on the presense of opts.backwards)
                           the duration of each element's animation, using floors to prevent producing very short durations. */
                        if (opts.drag) {
                            /* Default the duration of UI pack effects (callouts and transitions) to 1000ms instead of the usual default duration of 400ms. */
                            opts.duration = parseFloat(durationOriginal) || (/^(callout|transition)/.test(propertiesMap) ? 1000 : DURATION_DEFAULT);

                            /* For each element, take the greater duration of: A) animation completion percentage relative to the original duration,
                               B) 75% of the original duration, or C) a 200ms fallback (in case duration is already set to a low value).
                               The end result is a baseline of 75% of the redirect's duration that increases/decreases as the end of the element set is approached. */
                            opts.duration = Math.max(opts.duration * (opts.backwards ? 1 - elementIndex/elementsLength : (elementIndex + 1) / elementsLength), opts.duration * 0.75, 200);
                        }

                        /* Pass in the call's opts object so that the redirect can optionally extend it. It defaults to an empty object instead of null to
                           reduce the opts checking logic required inside the redirect. */
                        Velocity.Redirects[propertiesMap].call(element, element, opts || {}, elementIndex, elementsLength, elements, promiseData.promise ? promiseData : undefined);
                    });

                    /* Since the animation logic resides within the redirect's own code, abort the remainder of this call.
                       (The performance overhead up to this point is virtually non-existant.) */
                    /* Note: The jQuery call chain is kept intact by returning the complete element set. */
                    return getChain();
                } else {
                    var abortError = "Velocity: First argument (" + propertiesMap + ") was not a property map, a known action, or a registered redirect. Aborting.";

                    if (promiseData.promise) {
                        promiseData.rejecter(new Error(abortError));
                    } else {
                        console.log(abortError);
                    }

                    return getChain();
                }
        }

        /**************************
            Call-Wide Variables
        **************************/

        /* A container for CSS unit conversion ratios (e.g. %, rem, and em ==> px) that is used to cache ratios across all elements
           being animated in a single Velocity call. Calculating unit ratios necessitates DOM querying and updating, and is therefore
           avoided (via caching) wherever possible. This container is call-wide instead of page-wide to avoid the risk of using stale
           conversion metrics across Velocity animations that are not immediately consecutively chained. */
        var callUnitConversionData = {
                lastParent: null,
                lastPosition: null,
                lastFontSize: null,
                lastPercentToPxWidth: null,
                lastPercentToPxHeight: null,
                lastEmToPx: null,
                remToPx: null,
                vwToPx: null,
                vhToPx: null
            };

        /* A container for all the ensuing tween data and metadata associated with this call. This container gets pushed to the page-wide
           Velocity.State.calls array that is processed during animation ticking. */
        var call = [];

        /************************
           Element Processing
        ************************/

        /* Element processing consists of three parts -- data processing that cannot go stale and data processing that *can* go stale (i.e. third-party style modifications):
           1) Pre-Queueing: Element-wide variables, including the element's data storage, are instantiated. Call options are prepared. If triggered, the Stop action is executed.
           2) Queueing: The logic that runs once this call has reached its point of execution in the element's $.queue() stack. Most logic is placed here to avoid risking it becoming stale.
           3) Pushing: Consolidation of the tween data followed by its push onto the global in-progress calls container.
        */

        function processElement () {

            /*************************
               Part I: Pre-Queueing
            *************************/

            /***************************
               Element-Wide Variables
            ***************************/

            var element = this,
                /* The runtime opts object is the extension of the current call's options and Velocity's page-wide option defaults. */
                opts = $.extend({}, Velocity.defaults, options),
                /* A container for the processed data associated with each property in the propertyMap.
                   (Each property in the map produces its own "tween".) */
                tweensContainer = {},
                elementUnitConversionData;

            /******************
               Element Init
            ******************/

            if (Data(element) === undefined) {
                Velocity.init(element);
            }

            /******************
               Option: Delay
            ******************/

            /* Since queue:false doesn't respect the item's existing queue, we avoid injecting its delay here (it's set later on). */
            /* Note: Velocity rolls its own delay function since jQuery doesn't have a utility alias for $.fn.delay()
               (and thus requires jQuery element creation, which we avoid since its overhead includes DOM querying). */
            if (parseFloat(opts.delay) && opts.queue !== false) {
                $.queue(element, opts.queue, function(next) {
                    /* This is a flag used to indicate to the upcoming completeCall() function that this queue entry was initiated by Velocity. See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    /* The ensuing queue item (which is assigned to the "next" argument that $.queue() automatically passes in) will be triggered after a setTimeout delay.
                       The setTimeout is stored so that it can be subjected to clearTimeout() if this animation is prematurely stopped via Velocity's "stop" command. */
                    Data(element).delayTimer = {
                        setTimeout: setTimeout(next, parseFloat(opts.delay)),
                        next: next
                    };
                });
            }

            /*********************
               Option: Duration
            *********************/

            /* Support for jQuery's named durations. */
            switch (opts.duration.toString().toLowerCase()) {
                case "fast":
                    opts.duration = 200;
                    break;

                case "normal":
                    opts.duration = DURATION_DEFAULT;
                    break;

                case "slow":
                    opts.duration = 600;
                    break;

                default:
                    /* Remove the potential "ms" suffix and default to 1 if the user is attempting to set a duration of 0 (in order to produce an immediate style change). */
                    opts.duration = parseFloat(opts.duration) || 1;
            }

            /************************
               Global Option: Mock
            ************************/

            if (Velocity.mock !== false) {
                /* In mock mode, all animations are forced to 1ms so that they occur immediately upon the next rAF tick.
                   Alternatively, a multiplier can be passed in to time remap all delays and durations. */
                if (Velocity.mock === true) {
                    opts.duration = opts.delay = 1;
                } else {
                    opts.duration *= parseFloat(Velocity.mock) || 1;
                    opts.delay *= parseFloat(Velocity.mock) || 1;
                }
            }

            /*******************
               Option: Easing
            *******************/

            opts.easing = getEasing(opts.easing, opts.duration);

            /**********************
               Option: Callbacks
            **********************/

            /* Callbacks must functions. Otherwise, default to null. */
            if (opts.begin && !Type.isFunction(opts.begin)) {
                opts.begin = null;
            }

            if (opts.progress && !Type.isFunction(opts.progress)) {
                opts.progress = null;
            }

            if (opts.complete && !Type.isFunction(opts.complete)) {
                opts.complete = null;
            }

            /*********************************
               Option: Display & Visibility
            *********************************/

            /* Refer to Velocity's documentation (VelocityJS.org/#displayAndVisibility) for a description of the display and visibility options' behavior. */
            /* Note: We strictly check for undefined instead of falsiness because display accepts an empty string value. */
            if (opts.display !== undefined && opts.display !== null) {
                opts.display = opts.display.toString().toLowerCase();

                /* Users can pass in a special "auto" value to instruct Velocity to set the element to its default display value. */
                if (opts.display === "auto") {
                    opts.display = Velocity.CSS.Values.getDisplayType(element);
                }
            }

            if (opts.visibility !== undefined && opts.visibility !== null) {
                opts.visibility = opts.visibility.toString().toLowerCase();
            }

            /**********************
               Option: mobileHA
            **********************/

            /* When set to true, and if this is a mobile device, mobileHA automatically enables hardware acceleration (via a null transform hack)
               on animating elements. HA is removed from the element at the completion of its animation. */
            /* Note: Android Gingerbread doesn't support HA. If a null transform hack (mobileHA) is in fact set, it will prevent other tranform subproperties from taking effect. */
            /* Note: You can read more about the use of mobileHA in Velocity's documentation: VelocityJS.org/#mobileHA. */
            opts.mobileHA = (opts.mobileHA && Velocity.State.isMobile && !Velocity.State.isGingerbread);

            /***********************
               Part II: Queueing
            ***********************/

            /* When a set of elements is targeted by a Velocity call, the set is broken up and each element has the current Velocity call individually queued onto it.
               In this way, each element's existing queue is respected; some elements may already be animating and accordingly should not have this current Velocity call triggered immediately. */
            /* In each queue, tween data is processed for each animating property then pushed onto the call-wide calls array. When the last element in the set has had its tweens processed,
               the call array is pushed to Velocity.State.calls for live processing by the requestAnimationFrame tick. */
            function buildQueue (next) {

                /*******************
                   Option: Begin
                *******************/

                /* The begin callback is fired once per call -- not once per elemenet -- and is passed the full raw DOM element set as both its context and its first argument. */
                if (opts.begin && elementsIndex === 0) {
                    /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                    try {
                        opts.begin.call(elements, elements);
                    } catch (error) {
                        setTimeout(function() { throw error; }, 1);
                    }
                }

                /*****************************************
                   Tween Data Construction (for Scroll)
                *****************************************/

                /* Note: In order to be subjected to chaining and animation options, scroll's tweening is routed through Velocity as if it were a standard CSS property animation. */
                if (action === "scroll") {
                    /* The scroll action uniquely takes an optional "offset" option -- specified in pixels -- that offsets the targeted scroll position. */
                    var scrollDirection = (/^x$/i.test(opts.axis) ? "Left" : "Top"),
                        scrollOffset = parseFloat(opts.offset) || 0,
                        scrollPositionCurrent,
                        scrollPositionCurrentAlternate,
                        scrollPositionEnd;

                    /* Scroll also uniquely takes an optional "container" option, which indicates the parent element that should be scrolled --
                       as opposed to the browser window itself. This is useful for scrolling toward an element that's inside an overflowing parent element. */
                    if (opts.container) {
                        /* Ensure that either a jQuery object or a raw DOM element was passed in. */
                        if (Type.isWrapped(opts.container) || Type.isNode(opts.container)) {
                            /* Extract the raw DOM element from the jQuery wrapper. */
                            opts.container = opts.container[0] || opts.container;
                            /* Note: Unlike other properties in Velocity, the browser's scroll position is never cached since it so frequently changes
                               (due to the user's natural interaction with the page). */
                            scrollPositionCurrent = opts.container["scroll" + scrollDirection]; /* GET */

                            /* $.position() values are relative to the container's currently viewable area (without taking into account the container's true dimensions
                               -- say, for example, if the container was not overflowing). Thus, the scroll end value is the sum of the child element's position *and*
                               the scroll container's current scroll position. */
                            /* Note: jQuery does not offer a utility alias for $.position(), so we have to incur jQuery object conversion here.
                               This syncs up with an ensuing batch of GETs, so it fortunately does not trigger layout thrashing. */
                            scrollPositionEnd = (scrollPositionCurrent + $(element).position()[scrollDirection.toLowerCase()]) + scrollOffset; /* GET */
                        /* If a value other than a jQuery object or a raw DOM element was passed in, default to null so that this option is ignored. */
                        } else {
                            opts.container = null;
                        }
                    } else {
                        /* If the window itself is being scrolled -- not a containing element -- perform a live scroll position lookup using
                           the appropriate cached property names (which differ based on browser type). */
                        scrollPositionCurrent = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + scrollDirection]]; /* GET */
                        /* When scrolling the browser window, cache the alternate axis's current value since window.scrollTo() doesn't let us change only one value at a time. */
                        scrollPositionCurrentAlternate = Velocity.State.scrollAnchor[Velocity.State["scrollProperty" + (scrollDirection === "Left" ? "Top" : "Left")]]; /* GET */

                        /* Unlike $.position(), $.offset() values are relative to the browser window's true dimensions -- not merely its currently viewable area --
                           and therefore end values do not need to be compounded onto current values. */
                        scrollPositionEnd = $(element).offset()[scrollDirection.toLowerCase()] + scrollOffset; /* GET */
                    }

                    /* Since there's only one format that scroll's associated tweensContainer can take, we create it manually. */
                    tweensContainer = {
                        scroll: {
                            rootPropertyValue: false,
                            startValue: scrollPositionCurrent,
                            currentValue: scrollPositionCurrent,
                            endValue: scrollPositionEnd,
                            unitType: "",
                            easing: opts.easing,
                            scrollData: {
                                container: opts.container,
                                direction: scrollDirection,
                                alternateValue: scrollPositionCurrentAlternate
                            }
                        },
                        element: element
                    };

                    if (Velocity.debug) console.log("tweensContainer (scroll): ", tweensContainer.scroll, element);

                /******************************************
                   Tween Data Construction (for Reverse)
                ******************************************/

                /* Reverse acts like a "start" action in that a property map is animated toward. The only difference is
                   that the property map used for reverse is the inverse of the map used in the previous call. Thus, we manipulate
                   the previous call to construct our new map: use the previous map's end values as our new map's start values. Copy over all other data. */
                /* Note: Reverse can be directly called via the "reverse" parameter, or it can be indirectly triggered via the loop option. (Loops are composed of multiple reverses.) */
                /* Note: Reverse calls do not need to be consecutively chained onto a currently-animating element in order to operate on cached values;
                   there is no harm to reverse being called on a potentially stale data cache since reverse's behavior is simply defined
                   as reverting to the element's values as they were prior to the previous *Velocity* call. */
                } else if (action === "reverse") {
                    /* Abort if there is no prior animation data to reverse to. */
                    if (!Data(element).tweensContainer) {
                        /* Dequeue the element so that this queue entry releases itself immediately, allowing subsequent queue entries to run. */
                        $.dequeue(element, opts.queue);

                        return;
                    } else {
                        /*********************
                           Options Parsing
                        *********************/

                        /* If the element was hidden via the display option in the previous call,
                           revert display to "auto" prior to reversal so that the element is visible again. */
                        if (Data(element).opts.display === "none") {
                            Data(element).opts.display = "auto";
                        }

                        if (Data(element).opts.visibility === "hidden") {
                            Data(element).opts.visibility = "visible";
                        }

                        /* If the loop option was set in the previous call, disable it so that "reverse" calls aren't recursively generated.
                           Further, remove the previous call's callback options; typically, users do not want these to be refired. */
                        Data(element).opts.loop = false;
                        Data(element).opts.begin = null;
                        Data(element).opts.complete = null;

                        /* Since we're extending an opts object that has already been extended with the defaults options object,
                           we remove non-explicitly-defined properties that are auto-assigned values. */
                        if (!options.easing) {
                            delete opts.easing;
                        }

                        if (!options.duration) {
                            delete opts.duration;
                        }

                        /* The opts object used for reversal is an extension of the options object optionally passed into this
                           reverse call plus the options used in the previous Velocity call. */
                        opts = $.extend({}, Data(element).opts, opts);

                        /*************************************
                           Tweens Container Reconstruction
                        *************************************/

                        /* Create a deepy copy (indicated via the true flag) of the previous call's tweensContainer. */
                        var lastTweensContainer = $.extend(true, {}, Data(element).tweensContainer);

                        /* Manipulate the previous tweensContainer by replacing its end values and currentValues with its start values. */
                        for (var lastTween in lastTweensContainer) {
                            /* In addition to tween data, tweensContainers contain an element property that we ignore here. */
                            if (lastTween !== "element") {
                                var lastStartValue = lastTweensContainer[lastTween].startValue;

                                lastTweensContainer[lastTween].startValue = lastTweensContainer[lastTween].currentValue = lastTweensContainer[lastTween].endValue;
                                lastTweensContainer[lastTween].endValue = lastStartValue;

                                /* Easing is the only option that embeds into the individual tween data (since it can be defined on a per-property basis).
                                   Accordingly, every property's easing value must be updated when an options object is passed in with a reverse call.
                                   The side effect of this extensibility is that all per-property easing values are forcefully reset to the new value. */
                                if (!Type.isEmptyObject(options)) {
                                    lastTweensContainer[lastTween].easing = opts.easing;
                                }

                                if (Velocity.debug) console.log("reverse tweensContainer (" + lastTween + "): " + JSON.stringify(lastTweensContainer[lastTween]), element);
                            }
                        }

                        tweensContainer = lastTweensContainer;
                    }

                /*****************************************
                   Tween Data Construction (for Start)
                *****************************************/

                } else if (action === "start") {

                    /*************************
                        Value Transferring
                    *************************/

                    /* If this queue entry follows a previous Velocity-initiated queue entry *and* if this entry was created
                       while the element was in the process of being animated by Velocity, then this current call is safe to use
                       the end values from the prior call as its start values. Velocity attempts to perform this value transfer
                       process whenever possible in order to avoid requerying the DOM. */
                    /* If values aren't transferred from a prior call and start values were not forcefed by the user (more on this below),
                       then the DOM is queried for the element's current values as a last resort. */
                    /* Note: Conversely, animation reversal (and looping) *always* perform inter-call value transfers; they never requery the DOM. */
                    var lastTweensContainer;

                    /* The per-element isAnimating flag is used to indicate whether it's safe (i.e. the data isn't stale)
                       to transfer over end values to use as start values. If it's set to true and there is a previous
                       Velocity call to pull values from, do so. */
                    if (Data(element).tweensContainer && Data(element).isAnimating === true) {
                        lastTweensContainer = Data(element).tweensContainer;
                    }

                    /***************************
                       Tween Data Calculation
                    ***************************/

                    /* This function parses property data and defaults endValue, easing, and startValue as appropriate. */
                    /* Property map values can either take the form of 1) a single value representing the end value,
                       or 2) an array in the form of [ endValue, [, easing] [, startValue] ].
                       The optional third parameter is a forcefed startValue to be used instead of querying the DOM for
                       the element's current value. Read Velocity's docmentation to learn more about forcefeeding: VelocityJS.org/#forcefeeding */
                    function parsePropertyValue (valueData, skipResolvingEasing) {
                        var endValue = undefined,
                            easing = undefined,
                            startValue = undefined;

                        /* Handle the array format, which can be structured as one of three potential overloads:
                           A) [ endValue, easing, startValue ], B) [ endValue, easing ], or C) [ endValue, startValue ] */
                        if (Type.isArray(valueData)) {
                            /* endValue is always the first item in the array. Don't bother validating endValue's value now
                               since the ensuing property cycling logic does that. */
                            endValue = valueData[0];

                            /* Two-item array format: If the second item is a number, function, or hex string, treat it as a
                               start value since easings can only be non-hex strings or arrays. */
                            if ((!Type.isArray(valueData[1]) && /^[\d-]/.test(valueData[1])) || Type.isFunction(valueData[1]) || CSS.RegEx.isHex.test(valueData[1])) {
                                startValue = valueData[1];
                            /* Two or three-item array: If the second item is a non-hex string or an array, treat it as an easing. */
                            } else if ((Type.isString(valueData[1]) && !CSS.RegEx.isHex.test(valueData[1])) || Type.isArray(valueData[1])) {
                                easing = skipResolvingEasing ? valueData[1] : getEasing(valueData[1], opts.duration);

                                /* Don't bother validating startValue's value now since the ensuing property cycling logic inherently does that. */
                                if (valueData[2] !== undefined) {
                                    startValue = valueData[2];
                                }
                            }
                        /* Handle the single-value format. */
                        } else {
                            endValue = valueData;
                        }

                        /* Default to the call's easing if a per-property easing type was not defined. */
                        if (!skipResolvingEasing) {
                            easing = easing || opts.easing;
                        }

                        /* If functions were passed in as values, pass the function the current element as its context,
                           plus the element's index and the element set's size as arguments. Then, assign the returned value. */
                        if (Type.isFunction(endValue)) {
                            endValue = endValue.call(element, elementsIndex, elementsLength);
                        }

                        if (Type.isFunction(startValue)) {
                            startValue = startValue.call(element, elementsIndex, elementsLength);
                        }

                        /* Allow startValue to be left as undefined to indicate to the ensuing code that its value was not forcefed. */
                        return [ endValue || 0, easing, startValue ];
                    }

                    /* Cycle through each property in the map, looking for shorthand color properties (e.g. "color" as opposed to "colorRed"). Inject the corresponding
                       colorRed, colorGreen, and colorBlue RGB component tweens into the propertiesMap (which Velocity understands) and remove the shorthand property. */
                    $.each(propertiesMap, function(property, value) {
                        /* Find shorthand color properties that have been passed a hex string. */
                        if (RegExp("^" + CSS.Lists.colors.join("$|^") + "$").test(property)) {
                            /* Parse the value data for each shorthand. */
                            var valueData = parsePropertyValue(value, true),
                                endValue = valueData[0],
                                easing = valueData[1],
                                startValue = valueData[2];

                            if (CSS.RegEx.isHex.test(endValue)) {
                                /* Convert the hex strings into their RGB component arrays. */
                                var colorComponents = [ "Red", "Green", "Blue" ],
                                    endValueRGB = CSS.Values.hexToRgb(endValue),
                                    startValueRGB = startValue ? CSS.Values.hexToRgb(startValue) : undefined;

                                /* Inject the RGB component tweens into propertiesMap. */
                                for (var i = 0; i < colorComponents.length; i++) {
                                    var dataArray = [ endValueRGB[i] ];

                                    if (easing) {
                                        dataArray.push(easing);
                                    }

                                    if (startValueRGB !== undefined) {
                                        dataArray.push(startValueRGB[i]);
                                    }

                                    propertiesMap[property + colorComponents[i]] = dataArray;
                                }

                                /* Remove the intermediary shorthand property entry now that we've processed it. */
                                delete propertiesMap[property];
                            }
                        }
                    });

                    /* Create a tween out of each property, and append its associated data to tweensContainer. */
                    for (var property in propertiesMap) {

                        /**************************
                           Start Value Sourcing
                        **************************/

                        /* Parse out endValue, easing, and startValue from the property's data. */
                        var valueData = parsePropertyValue(propertiesMap[property]),
                            endValue = valueData[0],
                            easing = valueData[1],
                            startValue = valueData[2];

                        /* Now that the original property name's format has been used for the parsePropertyValue() lookup above,
                           we force the property to its camelCase styling to normalize it for manipulation. */
                        property = CSS.Names.camelCase(property);

                        /* In case this property is a hook, there are circumstances where we will intend to work on the hook's root property and not the hooked subproperty. */
                        var rootProperty = CSS.Hooks.getRoot(property),
                            rootPropertyValue = false;

                        /* Properties that are not supported by the browser (and do not have an associated normalization) will
                           inherently produce no style changes when set, so they are skipped in order to decrease animation tick overhead.
                           Property support is determined via prefixCheck(), which returns a false flag when no supported is detected. */
                        /* Note: Since SVG elements have some of their properties directly applied as HTML attributes,
                           there is no way to check for their explicit browser support, and so we skip skip this check for them. */
                        if (!Data(element).isSVG && CSS.Names.prefixCheck(rootProperty)[1] === false && CSS.Normalizations.registered[rootProperty] === undefined) {
                            if (Velocity.debug) console.log("Skipping [" + rootProperty + "] due to a lack of browser support.");

                            continue;
                        }

                        /* If the display option is being set to a non-"none" (e.g. "block") and opacity (filter on IE<=8) is being
                           animated to an endValue of non-zero, the user's intention is to fade in from invisible, thus we forcefeed opacity
                           a startValue of 0 if its startValue hasn't already been sourced by value transferring or prior forcefeeding. */
                        if (((opts.display !== undefined && opts.display !== null && opts.display !== "none") || (opts.visibility !== undefined && opts.visibility !== "hidden")) && /opacity|filter/.test(property) && !startValue && endValue !== 0) {
                            startValue = 0;
                        }

                        /* If values have been transferred from the previous Velocity call, extract the endValue and rootPropertyValue
                           for all of the current call's properties that were *also* animated in the previous call. */
                        /* Note: Value transferring can optionally be disabled by the user via the _cacheValues option. */
                        if (opts._cacheValues && lastTweensContainer && lastTweensContainer[property]) {
                            if (startValue === undefined) {
                                startValue = lastTweensContainer[property].endValue + lastTweensContainer[property].unitType;
                            }

                            /* The previous call's rootPropertyValue is extracted from the element's data cache since that's the
                               instance of rootPropertyValue that gets freshly updated by the tweening process, whereas the rootPropertyValue
                               attached to the incoming lastTweensContainer is equal to the root property's value prior to any tweening. */
                            rootPropertyValue = Data(element).rootPropertyValueCache[rootProperty];
                        /* If values were not transferred from a previous Velocity call, query the DOM as needed. */
                        } else {
                            /* Handle hooked properties. */
                            if (CSS.Hooks.registered[property]) {
                               if (startValue === undefined) {
                                    rootPropertyValue = CSS.getPropertyValue(element, rootProperty); /* GET */
                                    /* Note: The following getPropertyValue() call does not actually trigger a DOM query;
                                       getPropertyValue() will extract the hook from rootPropertyValue. */
                                    startValue = CSS.getPropertyValue(element, property, rootPropertyValue);
                                /* If startValue is already defined via forcefeeding, do not query the DOM for the root property's value;
                                   just grab rootProperty's zero-value template from CSS.Hooks. This overwrites the element's actual
                                   root property value (if one is set), but this is acceptable since the primary reason users forcefeed is
                                   to avoid DOM queries, and thus we likewise avoid querying the DOM for the root property's value. */
                                } else {
                                    /* Grab this hook's zero-value template, e.g. "0px 0px 0px black". */
                                    rootPropertyValue = CSS.Hooks.templates[rootProperty][1];
                                }
                            /* Handle non-hooked properties that haven't already been defined via forcefeeding. */
                            } else if (startValue === undefined) {
                                startValue = CSS.getPropertyValue(element, property); /* GET */
                            }
                        }

                        /**************************
                           Value Data Extraction
                        **************************/

                        var separatedValue,
                            endValueUnitType,
                            startValueUnitType,
                            operator = false;

                        /* Separates a property value into its numeric value and its unit type. */
                        function separateValue (property, value) {
                            var unitType,
                                numericValue;

                            numericValue = (value || "0")
                                .toString()
                                .toLowerCase()
                                /* Match the unit type at the end of the value. */
                                .replace(/[%A-z]+$/, function(match) {
                                    /* Grab the unit type. */
                                    unitType = match;

                                    /* Strip the unit type off of value. */
                                    return "";
                                });

                            /* If no unit type was supplied, assign one that is appropriate for this property (e.g. "deg" for rotateZ or "px" for width). */
                            if (!unitType) {
                                unitType = CSS.Values.getUnitType(property);
                            }

                            return [ numericValue, unitType ];
                        }

                        /* Separate startValue. */
                        separatedValue = separateValue(property, startValue);
                        startValue = separatedValue[0];
                        startValueUnitType = separatedValue[1];

                        /* Separate endValue, and extract a value operator (e.g. "+=", "-=") if one exists. */
                        separatedValue = separateValue(property, endValue);
                        endValue = separatedValue[0].replace(/^([+-\/*])=/, function(match, subMatch) {
                            operator = subMatch;

                            /* Strip the operator off of the value. */
                            return "";
                        });
                        endValueUnitType = separatedValue[1];

                        /* Parse float values from endValue and startValue. Default to 0 if NaN is returned. */
                        startValue = parseFloat(startValue) || 0;
                        endValue = parseFloat(endValue) || 0;

                        /***************************************
                           Property-Specific Value Conversion
                        ***************************************/

                        /* Custom support for properties that don't actually accept the % unit type, but where pollyfilling is trivial and relatively foolproof. */
                        if (endValueUnitType === "%") {
                            /* A %-value fontSize/lineHeight is relative to the parent's fontSize (as opposed to the parent's dimensions),
                               which is identical to the em unit's behavior, so we piggyback off of that. */
                            if (/^(fontSize|lineHeight)$/.test(property)) {
                                /* Convert % into an em decimal value. */
                                endValue = endValue / 100;
                                endValueUnitType = "em";
                            /* For scaleX and scaleY, convert the value into its decimal format and strip off the unit type. */
                            } else if (/^scale/.test(property)) {
                                endValue = endValue / 100;
                                endValueUnitType = "";
                            /* For RGB components, take the defined percentage of 255 and strip off the unit type. */
                            } else if (/(Red|Green|Blue)$/i.test(property)) {
                                endValue = (endValue / 100) * 255;
                                endValueUnitType = "";
                            }
                        }

                        /***************************
                           Unit Ratio Calculation
                        ***************************/

                        /* When queried, the browser returns (most) CSS property values in pixels. Therefore, if an endValue with a unit type of
                           %, em, or rem is animated toward, startValue must be converted from pixels into the same unit type as endValue in order
                           for value manipulation logic (increment/decrement) to proceed. Further, if the startValue was forcefed or transferred
                           from a previous call, startValue may also not be in pixels. Unit conversion logic therefore consists of two steps:
                           1) Calculating the ratio of %/em/rem/vh/vw relative to pixels
                           2) Converting startValue into the same unit of measurement as endValue based on these ratios. */
                        /* Unit conversion ratios are calculated by inserting a sibling node next to the target node, copying over its position property,
                           setting values with the target unit type then comparing the returned pixel value. */
                        /* Note: Even if only one of these unit types is being animated, all unit ratios are calculated at once since the overhead
                           of batching the SETs and GETs together upfront outweights the potential overhead
                           of layout thrashing caused by re-querying for uncalculated ratios for subsequently-processed properties. */
                        /* Todo: Shift this logic into the calls' first tick instance so that it's synced with RAF. */
                        function calculateUnitRatios () {

                            /************************
                                Same Ratio Checks
                            ************************/

                            /* The properties below are used to determine whether the element differs sufficiently from this call's
                               previously iterated element to also differ in its unit conversion ratios. If the properties match up with those
                               of the prior element, the prior element's conversion ratios are used. Like most optimizations in Velocity,
                               this is done to minimize DOM querying. */
                            var sameRatioIndicators = {
                                    myParent: element.parentNode || document.body, /* GET */
                                    position: CSS.getPropertyValue(element, "position"), /* GET */
                                    fontSize: CSS.getPropertyValue(element, "fontSize") /* GET */
                                },
                                /* Determine if the same % ratio can be used. % is based on the element's position value and its parent's width and height dimensions. */
                                samePercentRatio = ((sameRatioIndicators.position === callUnitConversionData.lastPosition) && (sameRatioIndicators.myParent === callUnitConversionData.lastParent)),
                                /* Determine if the same em ratio can be used. em is relative to the element's fontSize. */
                                sameEmRatio = (sameRatioIndicators.fontSize === callUnitConversionData.lastFontSize);

                            /* Store these ratio indicators call-wide for the next element to compare against. */
                            callUnitConversionData.lastParent = sameRatioIndicators.myParent;
                            callUnitConversionData.lastPosition = sameRatioIndicators.position;
                            callUnitConversionData.lastFontSize = sameRatioIndicators.fontSize;

                            /***************************
                               Element-Specific Units
                            ***************************/

                            /* Note: IE8 rounds to the nearest pixel when returning CSS values, thus we perform conversions using a measurement
                               of 100 (instead of 1) to give our ratios a precision of at least 2 decimal values. */
                            var measurement = 100,
                                unitRatios = {};

                            if (!sameEmRatio || !samePercentRatio) {
                                var dummy = Data(element).isSVG ? document.createElementNS("http://www.w3.org/2000/svg", "rect") : document.createElement("div");

                                Velocity.init(dummy);
                                sameRatioIndicators.myParent.appendChild(dummy);

                                /* To accurately and consistently calculate conversion ratios, the element's cascaded overflow and box-sizing are stripped.
                                   Similarly, since width/height can be artificially constrained by their min-/max- equivalents, these are controlled for as well. */
                                /* Note: Overflow must be also be controlled for per-axis since the overflow property overwrites its per-axis values. */
                                $.each([ "overflow", "overflowX", "overflowY" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, "hidden");
                                });
                                Velocity.CSS.setPropertyValue(dummy, "position", sameRatioIndicators.position);
                                Velocity.CSS.setPropertyValue(dummy, "fontSize", sameRatioIndicators.fontSize);
                                Velocity.CSS.setPropertyValue(dummy, "boxSizing", "content-box");

                                /* width and height act as our proxy properties for measuring the horizontal and vertical % ratios. */
                                $.each([ "minWidth", "maxWidth", "width", "minHeight", "maxHeight", "height" ], function(i, property) {
                                    Velocity.CSS.setPropertyValue(dummy, property, measurement + "%");
                                });
                                /* paddingLeft arbitrarily acts as our proxy property for the em ratio. */
                                Velocity.CSS.setPropertyValue(dummy, "paddingLeft", measurement + "em");

                                /* Divide the returned value by the measurement to get the ratio between 1% and 1px. Default to 1 since working with 0 can produce Infinite. */
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth = (parseFloat(CSS.getPropertyValue(dummy, "width", null, true)) || 1) / measurement; /* GET */
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight = (parseFloat(CSS.getPropertyValue(dummy, "height", null, true)) || 1) / measurement; /* GET */
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx = (parseFloat(CSS.getPropertyValue(dummy, "paddingLeft")) || 1) / measurement; /* GET */

                                sameRatioIndicators.myParent.removeChild(dummy);
                            } else {
                                unitRatios.emToPx = callUnitConversionData.lastEmToPx;
                                unitRatios.percentToPxWidth = callUnitConversionData.lastPercentToPxWidth;
                                unitRatios.percentToPxHeight = callUnitConversionData.lastPercentToPxHeight;
                            }

                            /***************************
                               Element-Agnostic Units
                            ***************************/

                            /* Whereas % and em ratios are determined on a per-element basis, the rem unit only needs to be checked
                               once per call since it's exclusively dependant upon document.body's fontSize. If this is the first time
                               that calculateUnitRatios() is being run during this call, remToPx will still be set to its default value of null,
                               so we calculate it now. */
                            if (callUnitConversionData.remToPx === null) {
                                /* Default to browsers' default fontSize of 16px in the case of 0. */
                                callUnitConversionData.remToPx = parseFloat(CSS.getPropertyValue(document.body, "fontSize")) || 16; /* GET */
                            }

                            /* Similarly, viewport units are %-relative to the window's inner dimensions. */
                            if (callUnitConversionData.vwToPx === null) {
                                callUnitConversionData.vwToPx = parseFloat(window.innerWidth) / 100; /* GET */
                                callUnitConversionData.vhToPx = parseFloat(window.innerHeight) / 100; /* GET */
                            }

                            unitRatios.remToPx = callUnitConversionData.remToPx;
                            unitRatios.vwToPx = callUnitConversionData.vwToPx;
                            unitRatios.vhToPx = callUnitConversionData.vhToPx;

                            if (Velocity.debug >= 1) console.log("Unit ratios: " + JSON.stringify(unitRatios), element);

                            return unitRatios;
                        }

                        /********************
                           Unit Conversion
                        ********************/

                        /* The * and / operators, which are not passed in with an associated unit, inherently use startValue's unit. Skip value and unit conversion. */
                        if (/[\/*]/.test(operator)) {
                            endValueUnitType = startValueUnitType;
                        /* If startValue and endValue differ in unit type, convert startValue into the same unit type as endValue so that if endValueUnitType
                           is a relative unit (%, em, rem), the values set during tweening will continue to be accurately relative even if the metrics they depend
                           on are dynamically changing during the course of the animation. Conversely, if we always normalized into px and used px for setting values, the px ratio
                           would become stale if the original unit being animated toward was relative and the underlying metrics change during the animation. */
                        /* Since 0 is 0 in any unit type, no conversion is necessary when startValue is 0 -- we just start at 0 with endValueUnitType. */
                        } else if ((startValueUnitType !== endValueUnitType) && startValue !== 0) {
                            /* Unit conversion is also skipped when endValue is 0, but *startValueUnitType* must be used for tween values to remain accurate. */
                            /* Note: Skipping unit conversion here means that if endValueUnitType was originally a relative unit, the animation won't relatively
                               match the underlying metrics if they change, but this is acceptable since we're animating toward invisibility instead of toward visibility,
                               which remains past the point of the animation's completion. */
                            if (endValue === 0) {
                                endValueUnitType = startValueUnitType;
                            } else {
                                /* By this point, we cannot avoid unit conversion (it's undesirable since it causes layout thrashing).
                                   If we haven't already, we trigger calculateUnitRatios(), which runs once per element per call. */
                                elementUnitConversionData = elementUnitConversionData || calculateUnitRatios();

                                /* The following RegEx matches CSS properties that have their % values measured relative to the x-axis. */
                                /* Note: W3C spec mandates that all of margin and padding's properties (even top and bottom) are %-relative to the *width* of the parent element. */
                                var axis = (/margin|padding|left|right|width|text|word|letter/i.test(property) || /X$/.test(property) || property === "x") ? "x" : "y";

                                /* In order to avoid generating n^2 bespoke conversion functions, unit conversion is a two-step process:
                                   1) Convert startValue into pixels. 2) Convert this new pixel value into endValue's unit type. */
                                switch (startValueUnitType) {
                                    case "%":
                                        /* Note: translateX and translateY are the only properties that are %-relative to an element's own dimensions -- not its parent's dimensions.
                                           Velocity does not include a special conversion process to account for this behavior. Therefore, animating translateX/Y from a % value
                                           to a non-% value will produce an incorrect start value. Fortunately, this sort of cross-unit conversion is rarely done by users in practice. */
                                        startValue *= (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* px acts as our midpoint in the unit conversion process; do nothing. */
                                        break;

                                    default:
                                        startValue *= elementUnitConversionData[startValueUnitType + "ToPx"];
                                }

                                /* Invert the px ratios to convert into to the target unit. */
                                switch (endValueUnitType) {
                                    case "%":
                                        startValue *= 1 / (axis === "x" ? elementUnitConversionData.percentToPxWidth : elementUnitConversionData.percentToPxHeight);
                                        break;

                                    case "px":
                                        /* startValue is already in px, do nothing; we're done. */
                                        break;

                                    default:
                                        startValue *= 1 / elementUnitConversionData[endValueUnitType + "ToPx"];
                                }
                            }
                        }

                        /*********************
                           Relative Values
                        *********************/

                        /* Operator logic must be performed last since it requires unit-normalized start and end values. */
                        /* Note: Relative *percent values* do not behave how most people think; while one would expect "+=50%"
                           to increase the property 1.5x its current value, it in fact increases the percent units in absolute terms:
                           50 points is added on top of the current % value. */
                        switch (operator) {
                            case "+":
                                endValue = startValue + endValue;
                                break;

                            case "-":
                                endValue = startValue - endValue;
                                break;

                            case "*":
                                endValue = startValue * endValue;
                                break;

                            case "/":
                                endValue = startValue / endValue;
                                break;
                        }

                        /**************************
                           tweensContainer Push
                        **************************/

                        /* Construct the per-property tween object, and push it to the element's tweensContainer. */
                        tweensContainer[property] = {
                            rootPropertyValue: rootPropertyValue,
                            startValue: startValue,
                            currentValue: startValue,
                            endValue: endValue,
                            unitType: endValueUnitType,
                            easing: easing
                        };

                        if (Velocity.debug) console.log("tweensContainer (" + property + "): " + JSON.stringify(tweensContainer[property]), element);
                    }

                    /* Along with its property data, store a reference to the element itself onto tweensContainer. */
                    tweensContainer.element = element;
                }

                /*****************
                    Call Push
                *****************/

                /* Note: tweensContainer can be empty if all of the properties in this call's property map were skipped due to not
                   being supported by the browser. The element property is used for checking that the tweensContainer has been appended to. */
                if (tweensContainer.element) {
                    /* Apply the "velocity-animating" indicator class. */
                    CSS.Values.addClass(element, "velocity-animating");

                    /* The call array houses the tweensContainers for each element being animated in the current call. */
                    call.push(tweensContainer);

                    /* Store the tweensContainer and options if we're working on the default effects queue, so that they can be used by the reverse command. */
                    if (opts.queue === "") {
                        Data(element).tweensContainer = tweensContainer;
                        Data(element).opts = opts;
                    }

                    /* Switch on the element's animating flag. */
                    Data(element).isAnimating = true;

                    /* Once the final element in this call's element set has been processed, push the call array onto
                       Velocity.State.calls for the animation tick to immediately begin processing. */
                    if (elementsIndex === elementsLength - 1) {
                        /* To speed up iterating over this array, it is compacted (falsey items -- calls that have completed -- are removed)
                           when its length has ballooned to a point that can impact tick performance. This only becomes necessary when animation
                           has been continuous with many elements over a long period of time; whenever all active calls are completed, completeCall() clears Velocity.State.calls. */
                        if (Velocity.State.calls.length > 10000) {
                            Velocity.State.calls = compactSparseArray(Velocity.State.calls);
                        }

                        /* Add the current call plus its associated metadata (the element set and the call's options) onto the global call container.
                           Anything on this call container is subjected to tick() processing. */
                        Velocity.State.calls.push([ call, elements, opts, null, promiseData.resolver ]);

                        /* If the animation tick isn't running, start it. (Velocity shuts it off when there are no active calls to process.) */
                        if (Velocity.State.isTicking === false) {
                            Velocity.State.isTicking = true;

                            /* Start the tick loop. */
                            tick();
                        }
                    } else {
                        elementsIndex++;
                    }
                }
            }

            /* When the queue option is set to false, the call skips the element's queue and fires immediately. */
            if (opts.queue === false) {
                /* Since this buildQueue call doesn't respect the element's existing queue (which is where a delay option would have been appended),
                   we manually inject the delay property here with an explicit setTimeout. */
                if (opts.delay) {
                    setTimeout(buildQueue, opts.delay);
                } else {
                    buildQueue();
                }
            /* Otherwise, the call undergoes element queueing as normal. */
            /* Note: To interoperate with jQuery, Velocity uses jQuery's own $.queue() stack for queuing logic. */
            } else {
                $.queue(element, opts.queue, function(next, clearQueue) {
                    /* If the clearQueue flag was passed in by the stop command, resolve this call's promise. (Promises can only be resolved once,
                       so it's fine if this is repeatedly triggered for each element in the associated call.) */
                    if (clearQueue === true) {
                        if (promiseData.promise) {
                            promiseData.resolver(elements);
                        }

                        /* Do not continue with animation queueing. */
                        return true;
                    }

                    /* This flag indicates to the upcoming completeCall() function that this queue entry was initiated by Velocity.
                       See completeCall() for further details. */
                    Velocity.velocityQueueEntryFlag = true;

                    buildQueue(next);
                });
            }

            /*********************
                Auto-Dequeuing
            *********************/

            /* As per jQuery's $.queue() behavior, to fire the first non-custom-queue entry on an element, the element
               must be dequeued if its queue stack consists *solely* of the current call. (This can be determined by checking
               for the "inprogress" item that jQuery prepends to active queue stack arrays.) Regardless, whenever the element's
               queue is further appended with additional items -- including $.delay()'s or even $.animate() calls, the queue's
               first entry is automatically fired. This behavior contrasts that of custom queues, which never auto-fire. */
            /* Note: When an element set is being subjected to a non-parallel Velocity call, the animation will not begin until
               each one of the elements in the set has reached the end of its individually pre-existing queue chain. */
            /* Note: Unfortunately, most people don't fully grasp jQuery's powerful, yet quirky, $.queue() function.
               Lean more here: http://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me */
            if ((opts.queue === "" || opts.queue === "fx") && $.queue(element)[0] !== "inprogress") {
                $.dequeue(element);
            }
        }

        /**************************
           Element Set Iteration
        **************************/

        /* If the "nodeType" property exists on the elements variable, we're animating a single element.
           Place it in an array so that $.each() can iterate over it. */
        $.each(elements, function(i, element) {
            /* Ensure each element in a set has a nodeType (is a real element) to avoid throwing errors. */
            if (Type.isNode(element)) {
                processElement.call(element);
            }
        });

        /******************
           Option: Loop
        ******************/

        /* The loop option accepts an integer indicating how many times the element should loop between the values in the
           current call's properties map and the element's property values prior to this call. */
        /* Note: The loop option's logic is performed here -- after element processing -- because the current call needs
           to undergo its queue insertion prior to the loop option generating its series of constituent "reverse" calls,
           which chain after the current call. Two reverse calls (two "alternations") constitute one loop. */
        var opts = $.extend({}, Velocity.defaults, options),
            reverseCallsCount;

        opts.loop = parseInt(opts.loop);
        reverseCallsCount = (opts.loop * 2) - 1;

        if (opts.loop) {
            /* Double the loop count to convert it into its appropriate number of "reverse" calls.
               Subtract 1 from the resulting value since the current call is included in the total alternation count. */
            for (var x = 0; x < reverseCallsCount; x++) {
                /* Since the logic for the reverse action occurs inside Queueing and therefore this call's options object
                   isn't parsed until then as well, the current call's delay option must be explicitly passed into the reverse
                   call so that the delay logic that occurs inside *Pre-Queueing* can process it. */
                var reverseOptions = {
                    delay: opts.delay,
                    progress: opts.progress
                };

                /* If a complete callback was passed into this call, transfer it to the loop redirect's final "reverse" call
                   so that it's triggered when the entire redirect is complete (and not when the very first animation is complete). */
                if (x === reverseCallsCount - 1) {
                    reverseOptions.display = opts.display;
                    reverseOptions.visibility = opts.visibility;
                    reverseOptions.complete = opts.complete;
                }

                animate(elements, "reverse", reverseOptions);
            }
        }

        /***************
            Chaining
        ***************/

        /* Return the elements back to the call chain, with wrapped elements taking precedence in case Velocity was called via the $.fn. extension. */
        return getChain();
    };

    /* Turn Velocity into the animation function, extended with the pre-existing Velocity object. */
    Velocity = $.extend(animate, Velocity);
    /* For legacy support, also expose the literal animate method. */
    Velocity.animate = animate;

    /**************
        Timing
    **************/

    /* Ticker function. */
    var ticker = window.requestAnimationFrame || rAFShim;

    /* Inactive browser tabs pause rAF, which results in all active animations immediately sprinting to their completion states when the tab refocuses.
       To get around this, we dynamically switch rAF to setTimeout (which the browser *doesn't* pause) when the tab loses focus. We skip this for mobile
       devices to avoid wasting battery power on inactive tabs. */
    /* Note: Tab focus detection doesn't work on older versions of IE, but that's okay since they don't support rAF to begin with. */
    if (!Velocity.State.isMobile && document.hidden !== undefined) {
        document.addEventListener("visibilitychange", function() {
            /* Reassign the rAF function (which the global tick() function uses) based on the tab's focus state. */
            if (document.hidden) {
                ticker = function(callback) {
                    /* The tick function needs a truthy first argument in order to pass its internal timestamp check. */
                    return setTimeout(function() { callback(true) }, 16);
                };

                /* The rAF loop has been paused by the browser, so we manually restart the tick. */
                tick();
            } else {
                ticker = window.requestAnimationFrame || rAFShim;
            }
        });
    }

    /************
        Tick
    ************/

    /* Note: All calls to Velocity are pushed to the Velocity.State.calls array, which is fully iterated through upon each tick. */
    function tick (timestamp) {
        /* An empty timestamp argument indicates that this is the first tick occurence since ticking was turned on.
           We leverage this metadata to fully ignore the first tick pass since RAF's initial pass is fired whenever
           the browser's next tick sync time occurs, which results in the first elements subjected to Velocity
           calls being animated out of sync with any elements animated immediately thereafter. In short, we ignore
           the first RAF tick pass so that elements being immediately consecutively animated -- instead of simultaneously animated
           by the same Velocity call -- are properly batched into the same initial RAF tick and consequently remain in sync thereafter. */
        if (timestamp) {
            /* We ignore RAF's high resolution timestamp since it can be significantly offset when the browser is
               under high stress; we opt for choppiness over allowing the browser to drop huge chunks of frames. */
            var timeCurrent = (new Date).getTime();

            /********************
               Call Iteration
            ********************/

            /* Iterate through each active call. */
            for (var i = 0, callsLength = Velocity.State.calls.length; i < callsLength; i++) {
                /* When a Velocity call is completed, its Velocity.State.calls entry is set to false. Continue on to the next call. */
                if (!Velocity.State.calls[i]) {
                    continue;
                }

                /************************
                   Call-Wide Variables
                ************************/

                var callContainer = Velocity.State.calls[i],
                    call = callContainer[0],
                    opts = callContainer[2],
                    timeStart = callContainer[3],
                    firstTick = !!timeStart;

                /* If timeStart is undefined, then this is the first time that this call has been processed by tick().
                   We assign timeStart now so that its value is as close to the real animation start time as possible.
                   (Conversely, had timeStart been defined when this call was added to Velocity.State.calls, the delay
                   between that time and now would cause the first few frames of the tween to be skipped since
                   percentComplete is calculated relative to timeStart.) */
                /* Further, subtract 16ms (the approximate resolution of RAF) from the current time value so that the
                   first tick iteration isn't wasted by animating at 0% tween completion, which would produce the
                   same style value as the element's current value. */
                if (!timeStart) {
                    timeStart = Velocity.State.calls[i][3] = timeCurrent - 16;
                }

                /* The tween's completion percentage is relative to the tween's start time, not the tween's start value
                   (which would result in unpredictable tween durations since JavaScript's timers are not particularly accurate).
                   Accordingly, we ensure that percentComplete does not exceed 1. */
                var percentComplete = Math.min((timeCurrent - timeStart) / opts.duration, 1);

                /**********************
                   Element Iteration
                **********************/

                /* For every call, iterate through each of the elements in its set. */
                for (var j = 0, callLength = call.length; j < callLength; j++) {
                    var tweensContainer = call[j],
                        element = tweensContainer.element;

                    /* Check to see if this element has been deleted midway through the animation by checking for the
                       continued existence of its data cache. If it's gone, skip animating this element. */
                    if (!Data(element)) {
                        continue;
                    }

                    var transformPropertyExists = false;

                    /**********************************
                       Display & Visibility Toggling
                    **********************************/

                    /* If the display option is set to non-"none", set it upfront so that the element can become visible before tweening begins.
                       (Otherwise, display's "none" value is set in completeCall() once the animation has completed.) */
                    if (opts.display !== undefined && opts.display !== null && opts.display !== "none") {
                        if (opts.display === "flex") {
                            var flexValues = [ "-webkit-box", "-moz-box", "-ms-flexbox", "-webkit-flex" ];

                            $.each(flexValues, function(i, flexValue) {
                                CSS.setPropertyValue(element, "display", flexValue);
                            });
                        }

                        CSS.setPropertyValue(element, "display", opts.display);
                    }

                    /* Same goes with the visibility option, but its "none" equivalent is "hidden". */
                    if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                        CSS.setPropertyValue(element, "visibility", opts.visibility);
                    }

                    /************************
                       Property Iteration
                    ************************/

                    /* For every element, iterate through each property. */
                    for (var property in tweensContainer) {
                        /* Note: In addition to property tween data, tweensContainer contains a reference to its associated element. */
                        if (property !== "element") {
                            var tween = tweensContainer[property],
                                currentValue,
                                /* Easing can either be a pre-genereated function or a string that references a pre-registered easing
                                   on the Velocity.Easings object. In either case, return the appropriate easing *function*. */
                                easing = Type.isString(tween.easing) ? Velocity.Easings[tween.easing] : tween.easing;

                            /******************************
                               Current Value Calculation
                            ******************************/

                            /* If this is the last tick pass (if we've reached 100% completion for this tween),
                               ensure that currentValue is explicitly set to its target endValue so that it's not subjected to any rounding. */
                            if (percentComplete === 1) {
                                currentValue = tween.endValue;
                            /* Otherwise, calculate currentValue based on the current delta from startValue. */
                            } else {
                                currentValue = tween.startValue + ((tween.endValue - tween.startValue) * easing(percentComplete));

                                /* If no value change is occurring, don't proceed with DOM updating. */
                                if (!firstTick && (currentValue === tween.currentValue)) {
                                    continue;
                                }
                            }

                            tween.currentValue = currentValue;

                            /******************
                               Hooks: Part I
                            ******************/

                            /* For hooked properties, the newly-updated rootPropertyValueCache is cached onto the element so that it can be used
                               for subsequent hooks in this call that are associated with the same root property. If we didn't cache the updated
                               rootPropertyValue, each subsequent update to the root property in this tick pass would reset the previous hook's
                               updates to rootPropertyValue prior to injection. A nice performance byproduct of rootPropertyValue caching is that
                               subsequently chained animations using the same hookRoot but a different hook can use this cached rootPropertyValue. */
                            if (CSS.Hooks.registered[property]) {
                                var hookRoot = CSS.Hooks.getRoot(property),
                                    rootPropertyValueCache = Data(element).rootPropertyValueCache[hookRoot];

                                if (rootPropertyValueCache) {
                                    tween.rootPropertyValue = rootPropertyValueCache;
                                }
                            }

                            /*****************
                                DOM Update
                            *****************/

                            /* setPropertyValue() returns an array of the property name and property value post any normalization that may have been performed. */
                            /* Note: To solve an IE<=8 positioning bug, the unit type is dropped when setting a property value of 0. */
                            var adjustedSetData = CSS.setPropertyValue(element, /* SET */
                                                                       property,
                                                                       tween.currentValue + (parseFloat(currentValue) === 0 ? "" : tween.unitType),
                                                                       tween.rootPropertyValue,
                                                                       tween.scrollData);

                            /*******************
                               Hooks: Part II
                            *******************/

                            /* Now that we have the hook's updated rootPropertyValue (the post-processed value provided by adjustedSetData), cache it onto the element. */
                            if (CSS.Hooks.registered[property]) {
                                /* Since adjustedSetData contains normalized data ready for DOM updating, the rootPropertyValue needs to be re-extracted from its normalized form. ?? */
                                if (CSS.Normalizations.registered[hookRoot]) {
                                    Data(element).rootPropertyValueCache[hookRoot] = CSS.Normalizations.registered[hookRoot]("extract", null, adjustedSetData[1]);
                                } else {
                                    Data(element).rootPropertyValueCache[hookRoot] = adjustedSetData[1];
                                }
                            }

                            /***************
                               Transforms
                            ***************/

                            /* Flag whether a transform property is being animated so that flushTransformCache() can be triggered once this tick pass is complete. */
                            if (adjustedSetData[0] === "transform") {
                                transformPropertyExists = true;
                            }
                        }
                    }

                    /****************
                        mobileHA
                    ****************/

                    /* If mobileHA is enabled, set the translate3d transform to null to force hardware acceleration.
                       It's safe to override this property since Velocity doesn't actually support its animation (hooks are used in its place). */
                    if (opts.mobileHA) {
                        /* Don't set the null transform hack if we've already done so. */
                        if (Data(element).transformCache.translate3d === undefined) {
                            /* All entries on the transformCache object are later concatenated into a single transform string via flushTransformCache(). */
                            Data(element).transformCache.translate3d = "(0px, 0px, 0px)";

                            transformPropertyExists = true;
                        }
                    }

                    if (transformPropertyExists) {
                        CSS.flushTransformCache(element);
                    }
                }

                /* The non-"none" display value is only applied to an element once -- when its associated call is first ticked through.
                   Accordingly, it's set to false so that it isn't re-processed by this call in the next tick. */
                if (opts.display !== undefined && opts.display !== "none") {
                    Velocity.State.calls[i][2].display = false;
                }
                if (opts.visibility !== undefined && opts.visibility !== "hidden") {
                    Velocity.State.calls[i][2].visibility = false;
                }


                /* Pass the elements and the timing data (percentComplete, msRemaining, and timeStart) into the progress callback. */
                if (opts.progress) {
                    opts.progress.call(callContainer[1],
                                       callContainer[1],
                                       percentComplete,
                                       Math.max(0, (timeStart + opts.duration) - timeCurrent),
                                       timeStart);
                }

                /* If this call has finished tweening, pass its index to completeCall() to handle call cleanup. */
                if (percentComplete === 1) {
                    completeCall(i);
                }
            }
        }

        /* Note: completeCall() sets the isTicking flag to false when the last call on Velocity.State.calls has completed. */
        if (Velocity.State.isTicking) {
            ticker(tick);
        }
    }

    /**********************
        Call Completion
    **********************/

    /* Note: Unlike tick(), which processes all active calls at once, call completion is handled on a per-call basis. */
    function completeCall (callIndex, isStopped) {
        /* Ensure the call exists. */
        if (!Velocity.State.calls[callIndex]) {
            return false;
        }

        /* Pull the metadata from the call. */
        var call = Velocity.State.calls[callIndex][0],
            elements = Velocity.State.calls[callIndex][1],
            opts = Velocity.State.calls[callIndex][2],
            resolver = Velocity.State.calls[callIndex][4];

        var remainingCallsExist = false;

        /*************************
           Element Finalization
        *************************/

        for (var i = 0, callLength = call.length; i < callLength; i++) {
            var element = call[i].element;

            /* If the user set display to "none" (intending to hide the element), set it now that the animation has completed. */
            /* Note: display:none isn't set when calls are manually stopped (via Velocity("stop"). */
            /* Note: Display gets ignored with "reverse" calls and infinite loops, since this behavior would be undesirable. */
            if (!isStopped && !opts.loop) {
                if (opts.display === "none") {
                    CSS.setPropertyValue(element, "display", opts.display);
                }

                if (opts.visibility === "hidden") {
                    CSS.setPropertyValue(element, "visibility", opts.visibility);
                }
            }

            /* If the element's queue is empty (if only the "inprogress" item is left at position 0) or if its queue is about to run
               a non-Velocity-initiated entry, turn off the isAnimating flag. A non-Velocity-initiatied queue entry's logic might alter
               an element's CSS values and thereby cause Velocity's cached value data to go stale. To detect if a queue entry was initiated by Velocity,
               we check for the existence of our special Velocity.queueEntryFlag declaration, which minifiers won't rename since the flag
               is assigned to jQuery's global $ object and thus exists out of Velocity's own scope. */
            if (opts.loop !== true && ($.queue(element)[1] === undefined || !/\.velocityQueueEntryFlag/i.test($.queue(element)[1]))) {
                /* The element may have been deleted. Ensure that its data cache still exists before acting on it. */
                if (Data(element)) {
                    Data(element).isAnimating = false;
                    /* Clear the element's rootPropertyValueCache, which will become stale. */
                    Data(element).rootPropertyValueCache = {};

                    var transformHAPropertyExists = false;
                    /* If any 3D transform subproperty is at its default value (regardless of unit type), remove it. */
                    $.each(CSS.Lists.transforms3D, function(i, transformName) {
                        var defaultValue = /^scale/.test(transformName) ? 1 : 0,
                            currentValue = Data(element).transformCache[transformName];

                        if (Data(element).transformCache[transformName] !== undefined && new RegExp("^\\(" + defaultValue + "[^.]").test(currentValue)) {
                            transformHAPropertyExists = true;

                            delete Data(element).transformCache[transformName];
                        }
                    });

                    /* Mobile devices have hardware acceleration removed at the end of the animation in order to avoid hogging the GPU's memory. */
                    if (opts.mobileHA) {
                        transformHAPropertyExists = true;
                        delete Data(element).transformCache.translate3d;
                    }

                    /* Flush the subproperty removals to the DOM. */
                    if (transformHAPropertyExists) {
                        CSS.flushTransformCache(element);
                    }

                    /* Remove the "velocity-animating" indicator class. */
                    CSS.Values.removeClass(element, "velocity-animating");
                }
            }

            /*********************
               Option: Complete
            *********************/

            /* Complete is fired once per call (not once per element) and is passed the full raw DOM element set as both its context and its first argument. */
            /* Note: Callbacks aren't fired when calls are manually stopped (via Velocity("stop"). */
            if (!isStopped && opts.complete && !opts.loop && (i === callLength - 1)) {
                /* We throw callbacks in a setTimeout so that thrown errors don't halt the execution of Velocity itself. */
                try {
                    opts.complete.call(elements, elements);
                } catch (error) {
                    setTimeout(function() { throw error; }, 1);
                }
            }

            /**********************
               Promise Resolving
            **********************/

            /* Note: Infinite loops don't return promises. */
            if (resolver && opts.loop !== true) {
                resolver(elements);
            }

            /****************************
               Option: Loop (Infinite)
            ****************************/

            if (opts.loop === true && !isStopped) {
                /* If a rotateX/Y/Z property is being animated to 360 deg with loop:true, swap tween start/end values to enable
                   continuous iterative rotation looping. (Otherise, the element would just rotate back and forth.) */
                $.each(Data(element).tweensContainer, function(propertyName, tweenContainer) {
                    if (/^rotate/.test(propertyName) && parseFloat(tweenContainer.endValue) === 360) {
                        tweenContainer.endValue = 0;
                        tweenContainer.startValue = 360;
                    }
                });

                Velocity(element, "reverse", { loop: true, delay: opts.delay });
            }

            /***************
               Dequeueing
            ***************/

            /* Fire the next call in the queue so long as this call's queue wasn't set to false (to trigger a parallel animation),
               which would have already caused the next call to fire. Note: Even if the end of the animation queue has been reached,
               $.dequeue() must still be called in order to completely clear jQuery's animation queue. */
            if (opts.queue !== false) {
                $.dequeue(element, opts.queue);
            }
        }

        /************************
           Calls Array Cleanup
        ************************/

        /* Since this call is complete, set it to false so that the rAF tick skips it. This array is later compacted via compactSparseArray().
          (For performance reasons, the call is set to false instead of being deleted from the array: http://www.html5rocks.com/en/tutorials/speed/v8/) */
        Velocity.State.calls[callIndex] = false;

        /* Iterate through the calls array to determine if this was the final in-progress animation.
           If so, set a flag to end ticking and clear the calls array. */
        for (var j = 0, callsLength = Velocity.State.calls.length; j < callsLength; j++) {
            if (Velocity.State.calls[j] !== false) {
                remainingCallsExist = true;

                break;
            }
        }

        if (remainingCallsExist === false) {
            /* tick() will detect this flag upon its next iteration and subsequently turn itself off. */
            Velocity.State.isTicking = false;

            /* Clear the calls array so that its length is reset. */
            delete Velocity.State.calls;
            Velocity.State.calls = [];
        }
    }

    /******************
        Frameworks
    ******************/

    /* Both jQuery and Zepto allow their $.fn object to be extended to allow wrapped elements to be subjected to plugin calls.
       If either framework is loaded, register a "velocity" extension pointing to Velocity's core animate() method.  Velocity
       also registers itself onto a global container (window.jQuery || window.Zepto || window) so that certain features are
       accessible beyond just a per-element scope. This master object contains an .animate() method, which is later assigned to $.fn
       (if jQuery or Zepto are present). Accordingly, Velocity can both act on wrapped DOM elements and stand alone for targeting raw DOM elements. */
    global.Velocity = Velocity;

    if (global !== window) {
        /* Assign the element function to Velocity's core animate() method. */
        global.fn.velocity = animate;
        /* Assign the object function's defaults to Velocity's global defaults object. */
        global.fn.velocity.defaults = Velocity.defaults;
    }

    /***********************
       Packaged Redirects
    ***********************/

    /* slideUp, slideDown */
    $.each([ "Down", "Up" ], function(i, direction) {
        Velocity.Redirects["slide" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                begin = opts.begin,
                complete = opts.complete,
                computedValues = { height: "", marginTop: "", marginBottom: "", paddingTop: "", paddingBottom: "" },
                inlineValues = {};

            if (opts.display === undefined) {
                /* Show the element before slideDown begins and hide the element after slideUp completes. */
                /* Note: Inline elements cannot have dimensions animated, so they're reverted to inline-block. */
                opts.display = (direction === "Down" ? (Velocity.CSS.Values.getDisplayType(element) === "inline" ? "inline-block" : "block") : "none");
            }

            opts.begin = function() {
                /* If the user passed in a begin callback, fire it now. */
                begin && begin.call(elements, elements);

                /* Cache the elements' original vertical dimensional property values so that we can animate back to them. */
                for (var property in computedValues) {
                    /* Cache all inline values, we reset to upon animation completion. */
                    inlineValues[property] = element.style[property];

                    /* For slideDown, use forcefeeding to animate all vertical properties from 0. For slideUp,
                       use forcefeeding to start from computed values and animate down to 0. */
                    var propertyValue = Velocity.CSS.getPropertyValue(element, property);
                    computedValues[property] = (direction === "Down") ? [ propertyValue, 0 ] : [ 0, propertyValue ];
                }

                /* Force vertical overflow content to clip so that sliding works as expected. */
                inlineValues.overflow = element.style.overflow;
                element.style.overflow = "hidden";
            }

            opts.complete = function() {
                /* Reset element to its pre-slide inline values once its slide animation is complete. */
                for (var property in inlineValues) {
                    element.style[property] = inlineValues[property];
                }

                /* If the user passed in a complete callback, fire it now. */
                complete && complete.call(elements, elements);
                promiseData && promiseData.resolver(elements);
            };

            Velocity(element, computedValues, opts);
        };
    });

    /* fadeIn, fadeOut */
    $.each([ "In", "Out" ], function(i, direction) {
        Velocity.Redirects["fade" + direction] = function (element, options, elementsIndex, elementsSize, elements, promiseData) {
            var opts = $.extend({}, options),
                propertiesMap = { opacity: (direction === "In") ? 1 : 0 },
                originalComplete = opts.complete;

            /* Since redirects are triggered individually for each element in the animated set, avoid repeatedly triggering
               callbacks by firing them only when the final element has been reached. */
            if (elementsIndex !== elementsSize - 1) {
                opts.complete = opts.begin = null;
            } else {
                opts.complete = function() {
                    if (originalComplete) {
                        originalComplete.call(elements, elements);
                    }

                    promiseData && promiseData.resolver(elements);
                }
            }

            /* If a display was passed in, use it. Otherwise, default to "none" for fadeOut or the element-specific default for fadeIn. */
            /* Note: We allow users to pass in "null" to skip display setting altogether. */
            if (opts.display === undefined) {
                opts.display = (direction === "In" ? "auto" : "none");
            }

            Velocity(this, propertiesMap, opts);
        };
    });

    return Velocity;
}((window.jQuery || window.Zepto || window), window, document);
}));

/******************
   Known Issues
******************/

/* The CSS spec mandates that the translateX/Y/Z transforms are %-relative to the element itself -- not its parent.
Velocity, however, doesn't make this distinction. Thus, converting to or from the % unit with these subproperties
will produce an inaccurate conversion value. The same issue exists with the cx/cy attributes of SVG circles and ellipses. */

},{}]},{},["C:\\Users\\htn01\\Documents\\GitHub\\EvolveWebAppTemplate\\Scripts\\main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFx3YXRjaGlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCIuLlxcLi5cXC4uXFxBcHBEYXRhXFxSb2FtaW5nXFxucG1cXG5vZGVfbW9kdWxlc1xcd2F0Y2hpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxwcm9jZXNzXFxicm93c2VyLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAuY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcYXBwLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxhcHAucm91dGUuanMiLCJTY3JpcHRzXFxhcHBcXGFwcC5zZXR0aW5ncy5qcyIsIlNjcmlwdHNcXGFwcFxcY29udHJvbGxlcnNcXHRvZG8uY29udHJvbGxlci5qcyIsIlNjcmlwdHNcXGFwcFxcbW9kZWxzXFx0b2RvLm1vZGVsLmpzIiwiU2NyaXB0c1xcYXBwXFxtb2R1bGVzXFxib2R5Lm1vZHVsZS5qcyIsIlNjcmlwdHNcXGFwcFxcbW9kdWxlc1xcY2xlYXJzY3JlZW4ubW9kdWxlLmpzIiwiU2NyaXB0c1xcYXBwXFxtb2R1bGVzXFxsZWZ0bWVudS5tb2R1bGUuanMiLCJTY3JpcHRzXFxhcHBcXG1vZHVsZXNcXHJpZ2h0bWVudS5tb2R1bGUuanMiLCJTY3JpcHRzXFxhcHBcXHZpZXdzXFxhcHAudmlldy5qcyIsIlNjcmlwdHNcXGFwcFxcdmlld3NcXHRvZG8udmlldy5qcyIsIlNjcmlwdHNcXGNvbnRyb2xzLmpzIiwiU2NyaXB0c1xcY29yZS5qcyIsIlNjcmlwdHNcXGpxdWVyeS5ob3RrZXlzLmpzIiwiU2NyaXB0c1xca2VuZG9cXDIwMTQuMy4xMTE5XFxqcXVlcnkubWluLmpzIiwiU2NyaXB0c1xca2VuZG9cXDIwMTQuMy4xMTE5XFxrZW5kby53ZWIubWluLmpzIiwiU2NyaXB0c1xcbGF5b3V0LmpzIiwiU2NyaXB0c1xcbWFpbi5qcyIsIlNjcmlwdHNcXG1hdGVyaWFsLm1pbi5qcyIsIlNjcmlwdHNcXG1pdGhyaWwuanMiLCJTY3JpcHRzXFxyaXBwbGVzLm1pbi5qcyIsIlNjcmlwdHNcXHZlbG9jaXR5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6OUJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbnByb2Nlc3MubmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYW5TZXRJbW1lZGlhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5zZXRJbW1lZGlhdGU7XG4gICAgdmFyIGNhbk11dGF0aW9uT2JzZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyO1xuICAgIHZhciBjYW5Qb3N0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAmJiB3aW5kb3cucG9zdE1lc3NhZ2UgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXJcbiAgICA7XG5cbiAgICBpZiAoY2FuU2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShmKSB9O1xuICAgIH1cblxuICAgIHZhciBxdWV1ZSA9IFtdO1xuXG4gICAgaWYgKGNhbk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIGhpZGRlbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBxdWV1ZUxpc3QgPSBxdWV1ZS5zbGljZSgpO1xuICAgICAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHF1ZXVlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShoaWRkZW5EaXYsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgICAgIGlmICghcXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuRGl2LnNldEF0dHJpYnV0ZSgneWVzJywgJ25vJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZuKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoY2FuUG9zdCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGV2LnNvdXJjZTtcbiAgICAgICAgICAgIGlmICgoc291cmNlID09PSB3aW5kb3cgfHwgc291cmNlID09PSBudWxsKSAmJiBldi5kYXRhID09PSAncHJvY2Vzcy10aWNrJykge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCdwcm9jZXNzLXRpY2snLCAnKicpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSkoKTtcblxucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG4vLyBUT0RPKHNodHlsbWFuKVxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG4iLCIvL2FwcC5jb250cm9sbGVyLmpzXHJcbnZhciBhcHAgPSByZXF1aXJlKCcuL2FwcC5tb2RlbC5qcycpO1xyXG5cclxuYXBwLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbn1cclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwLmNvbnRyb2xsZXIiLCIvL2FwcC5tb2RlbC5qc1xyXG52YXIgYXBwID0ge1xyXG59XHJcblxyXG5hcHAuQXBwID0gZnVuY3Rpb24gKGRhdGEpIHtcclxufVxyXG5cclxuYXBwLmNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2FwcC5jb250cm9sbGVyLmpzJyk7XHJcblxyXG5hcHAudmlldyA9IHJlcXVpcmUoJy4vdmlld3MvYXBwLnZpZXcuanMnKTtcclxuXHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwOyIsInZhciBtID0gcmVxdWlyZSgnLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgYXBwID0gcmVxdWlyZSgnLi9hcHAubW9kZWwuanMnKTtcclxudmFyIHNldHRpbmdzID0gcmVxdWlyZSgnLi9hcHAuc2V0dGluZ3MuanMnKTtcclxudmFyIGJvZHkgPSByZXF1aXJlKCcuL21vZHVsZXMvYm9keS5tb2R1bGUuanMnKTtcclxudmFyIGxlZnRtZW51ID0gcmVxdWlyZSgnLi9tb2R1bGVzL2xlZnRtZW51Lm1vZHVsZS5qcycpO1xyXG52YXIgcmlnaHRtZW51ID0gcmVxdWlyZSgnLi9tb2R1bGVzL3JpZ2h0bWVudS5tb2R1bGUuanMnKTtcclxudmFyIGNsZWFyc2NyZWVuID0gcmVxdWlyZSgnLi9tb2R1bGVzL2NsZWFyc2NyZWVuLm1vZHVsZS5qcycpO1xyXG52YXIgdG9kbyA9IHJlcXVpcmUoJy4vbW9kZWxzL3RvZG8ubW9kZWwuanMnKTtcclxuXHJcbm0ucm91dGUubW9kZSA9IFwiaGFzaFwiO1xyXG5cclxuLy9zZXR1cCByb3V0ZXMgZm9yIG1haW4gY29udGVudCB0byBzdGFydCB3LyB0aGUgYC9gIHN5bWJvbFxyXG5tLnJvdXRlKHNldHRpbmdzLnJvb3RDb250YWluZXIsIFwiL1wiLCB7XHJcbiAgICBcIi9cIjogYm9keSxcclxuICAgIFwiL2hvbWVcIjogYXBwLFxyXG4gICAgXCIvcHJvZmlsZVwiOiBhcHAsXHJcbiAgICBcIi90b2RvXCI6IHRvZG9cclxufSk7XHJcblxyXG4vL1NldCB1cCBzaWRlIG1lbnVzXHJcbm0ubW9kdWxlKHNldHRpbmdzLmxlZnRNZW51LCBsZWZ0bWVudSk7XHJcbm0ubW9kdWxlKHNldHRpbmdzLnJpZ2h0TWVudSwgcmlnaHRtZW51KTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy9hIHNhbXBsZSBtb2R1bGVcclxuLy92YXIgZGFzaGJvYXJkID0ge1xyXG4vLyAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICB0aGlzLmlkID0gbS5yb3V0ZS5wYXJhbShcInVzZXJJRFwiKTtcclxuLy8gICAgfSxcclxuLy8gICAgdmlldzogZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuLy8gICAgICAgIHJldHVybiBtKFwiZGl2XCIsIGNvbnRyb2xsZXIuaWQpO1xyXG4vLyAgICB9XHJcbi8vfVxyXG5cclxuLy92YXIgcHJvZmlsZSA9IHtcclxuLy8gICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgdGhpcy5pZCA9IG0ucm91dGUucGFyYW0oXCJ1c2VySURcIik7XHJcbi8vICAgIH0sXHJcbi8vICAgIHZpZXc6IGZ1bmN0aW9uIChjb250cm9sbGVyKSB7XHJcbi8vICAgICAgICByZXR1cm4gbShcImRpdlwiKTtcclxuLy8gICAgfVxyXG4vL31cclxuXHJcbi8vZGVmaW5lIGEgcm91dGVcclxuLy9tLnJvdXRlKCRyb290Q29udGFpbmVyLCBcIi9wcm9maWxlL2pvaG5kb2VcIiwge1xyXG4vLyAgICBcIi9wcm9maWxlLzp1c2VySURcIjogZGFzaGJvYXJkXHJcbi8vfSk7IiwidmFyIHNldHRpbmdzID0ge1xyXG4gICAgcm9vdENvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbnRhaW5lclwiKVswXSxcclxuICAgIGxlZnRNZW51OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZnQtbWVudVwiKSxcclxuICAgIHJpZ2h0TWVudTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1tZW51XCIpXHJcbn07XHJcbi8vQnJvd3NlcmlmeSBEaXJlY3RpdmVzXHJcbm1vZHVsZS5leHBvcnRzID0gc2V0dGluZ3M7IiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciB0b2RvID0gcmVxdWlyZSgnLi4vbW9kZWxzL3RvZG8ubW9kZWwuanMnKTtcclxuXHJcbnRvZG8uY29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdCA9IG5ldyB0b2RvLlRvZG9MaXN0KCk7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gbS5wcm9wKFwiXCIpO1xyXG5cclxuICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2gobmV3IHRvZG8uVG9kbyh7IGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uKCkgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKTtcclxufVxyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSB0b2RvLmNvbnRyb2xsZXIiLCJ2YXIgbSA9IHJlcXVpcmUoJy4uLy4uL21pdGhyaWwuanMnKTtcclxudmFyIHRvZG8gPSB7fVxyXG5cclxudG9kby5Ub2RvID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBtLnByb3AoZGF0YS5kZXNjcmlwdGlvbik7XHJcbiAgICB0aGlzLmRvbmUgPSBtLnByb3AoZmFsc2UpO1xyXG59XHJcblxyXG50b2RvLlRvZG9MaXN0ID0gQXJyYXk7XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHRvZG87IC8vPC0tIFRoaXMgZXhwb3J0IGhhcyB0byBiZSBiZWZvcmUgdGhlIHJlcXVpcmVzIGZvciB0b2RvLmNvbnRyb2xsZXIsIGJlY2F1c2UgdG9kby5jb250cm9sbGVyIHJlbGllcyBvbiB0b2RvIG1vZHVsZSAoY2lyY3VsYXIgZGVwZW5kZW5jeSlcclxuXHJcbnRvZG8uY29udHJvbGxlciA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL3RvZG8uY29udHJvbGxlci5qcycpO1xyXG5cclxudG9kby52aWV3ID0gcmVxdWlyZSgnLi4vdmlld3MvdG9kby52aWV3LmpzJyk7IiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciBib2R5ID0ge31cclxuXHJcbmJvZHkuQm9keSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbn1cclxuXHJcbmJvZHkuY29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxufVxyXG5cclxuYm9keS52aWV3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBbbShcIi5tYWluXCIsIFtcclxuXHRcdCAgICAgICAgbShcInVsLnRpbGUtZ3JpZC5jbGVhcmZpeFtpZD0ndGlsZS1ncmlkJ11cIiwgW1xyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMlwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiwgXCJSZWdpc3RlclwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMVwiLCB7IG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsgd2luZG93LmxvY2F0aW9uID0gJy8jL2hvbWUnOyB9IH0sIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiLCBcIkRhc2hib2FyZFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtNFwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiwgXCJBZG1pblwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMVwiLCB7IG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsgd2luZG93LmxvY2F0aW9uID0gJy8jL3RvZG8nOyB9IH0sIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiLCBcInRvZG9cIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTEudGlsZS1zcGFuLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS0xXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMlwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTExXCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pLFxyXG5cdFx0XHQgICAgICAgIG0oXCJsaS50aWxlLmljb24tY2xpbWEtMlwiLCBbXHJcblx0XHRcdFx0ICAgICAgICBtKFwiaDNcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLXRlbXBcIiksXHJcblx0XHRcdFx0ICAgICAgICBtKFwiLnRpbGUtb3ZlcmxheVwiLCBbXHJcblx0XHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtY2xvc2VcIiwgXCJjbG9zZVwiKVxyXG5cdFx0XHRcdCAgICAgICAgXSlcclxuXHRcdFx0ICAgICAgICBdKSxcclxuXHRcdFx0ICAgICAgICBtKFwibGkudGlsZS5pY29uLWNsaW1hLTIudGlsZS1zcGFuLTJcIiwgW1xyXG5cdFx0XHRcdCAgICAgICAgbShcImgzXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS10ZW1wXCIpLFxyXG5cdFx0XHRcdCAgICAgICAgbShcIi50aWxlLW92ZXJsYXlcIiwgW1xyXG5cdFx0XHRcdFx0ICAgICAgICBtKFwic3Bhbi50aWxlLWNsb3NlXCIsIFwiY2xvc2VcIilcclxuXHRcdFx0XHQgICAgICAgIF0pXHJcblx0XHRcdCAgICAgICAgXSksXHJcblx0XHRcdCAgICAgICAgbShcImxpLnRpbGUuaWNvbi1jbGltYS00LnRpbGUtc3Bhbi00XCIsIFtcclxuXHRcdFx0XHQgICAgICAgIG0oXCJoM1wiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCJzcGFuLnRpbGUtdGVtcFwiKSxcclxuXHRcdFx0XHQgICAgICAgIG0oXCIudGlsZS1vdmVybGF5XCIsIFtcclxuXHRcdFx0XHRcdCAgICAgICAgbShcInNwYW4udGlsZS1jbG9zZVwiLCBcImNsb3NlXCIpXHJcblx0XHRcdFx0ICAgICAgICBdKVxyXG5cdFx0XHQgICAgICAgIF0pXHJcblx0XHQgICAgICAgIF0pXHJcbiAgICAgICAgXSldXHJcbiAgICBdO1xyXG59XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGJvZHkiLCJ2YXIgY2xlYXJTY3JlZW4gPSB7fVxyXG5jbGVhclNjcmVlbi5jb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxufVxyXG5jbGVhclNjcmVlbi52aWV3ID0gZnVuY3Rpb24gKCkgeyB9XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsZWFyU2NyZWVuIiwidmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciBsZWZ0bWVudSA9IHt9XHJcblxyXG5sZWZ0bWVudS5MZWZ0TWVudSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbn1cclxuXHJcbmxlZnRtZW51LmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbn1cclxuXHJcbmxlZnRtZW51LnZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gW1xyXG5cdFx0bShcInVsXCIsIFtcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtaG9tZS5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRGFzaGJvYXJkXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaS5oYXMtc3VibmF2XCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtbGFwdG9wLmZhLTJ4XCIpLFxyXG5cdFx0XHRcdFx0bShcInNwYW4ubmF2LXRleHRcIiwgXCJVSSBDb21wb25lbnRzXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaS5oYXMtc3VibmF2XCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtbGlzdC5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRm9ybXNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpLmhhcy1zdWJuYXZcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1mb2xkZXItb3Blbi5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiUGFnZXNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtYmFyLWNoYXJ0LW8uZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIkdyYXBocyBhbmQgU3RhdGlzdGljc1wiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pLFxyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1mb250LmZhLTJ4XCIpLFxyXG5cdFx0XHRcdFx0bShcInNwYW4ubmF2LXRleHRcIiwgXCJUeXBvZ3JhcGh5IGFuZCBJY29uc1wiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pLFxyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS10YWJsZS5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiVGFibGVzXCIpXHJcblx0XHRcdFx0XSlcclxuXHRcdFx0XSksXHJcblx0XHRcdG0oXCJsaVwiLCBbXHJcblx0XHRcdFx0bShcImFbaHJlZj0nIyddXCIsIFtcclxuXHRcdFx0XHRcdG0oXCJpLmZhLmZhLW1hcC1tYXJrZXIuZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIk1hcHNcIilcclxuXHRcdFx0XHRdKVxyXG5cdFx0XHRdKSxcclxuXHRcdFx0bShcImxpXCIsIFtcclxuXHRcdFx0XHRtKFwiYVtocmVmPScjJ11cIiwgW1xyXG5cdFx0XHRcdFx0bShcImkuZmEuZmEtaW5mby5mYS0yeFwiKSxcclxuXHRcdFx0XHRcdG0oXCJzcGFuLm5hdi10ZXh0XCIsIFwiRG9jdW1lbnRhdGlvblwiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pXHJcblx0XHRdKSxcclxuXHRcdG0oXCJ1bC5sb2dvdXRcIiwgW1xyXG5cdFx0XHRtKFwibGlcIiwgW1xyXG5cdFx0XHRcdG0oXCJhW2hyZWY9JyMnXVwiLCBbXHJcblx0XHRcdFx0XHRtKFwiaS5mYS5mYS1wb3dlci1vZmYuZmEtMnhcIiksXHJcblx0XHRcdFx0XHRtKFwic3Bhbi5uYXYtdGV4dFwiLCBcIkxvZ291dFwiKVxyXG5cdFx0XHRcdF0pXHJcblx0XHRcdF0pXHJcblx0XHRdKVxyXG4gICAgXTtcclxufVxyXG5cclxuLy9Ccm93c2VyaWZ5IERpcmVjdGl2ZXNcclxubW9kdWxlLmV4cG9ydHMgPSBsZWZ0bWVudSIsInZhciBtID0gcmVxdWlyZSgnLi4vLi4vbWl0aHJpbC5qcycpO1xyXG52YXIgcmlnaHRtZW51ID0ge31cclxudmFyIExheW91dCA9IHJlcXVpcmUoJy4uLy4uL2xheW91dC5qcycpO1xyXG5sYXlvdXQgPSBuZXcgTGF5b3V0KCk7XHJcblxyXG5yaWdodG1lbnUucmlnaHRtZW51ID0gZnVuY3Rpb24gKGRhdGEpIHtcclxufVxyXG5cclxucmlnaHRtZW51LmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbn1cclxuXHJcbnJpZ2h0bWVudS52aWV3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBtKFwibmF2LmNicC1zcG1lbnUuY2JwLXNwbWVudS12ZXJ0aWNhbC5jYnAtc3BtZW51LXJpZ2h0W2lkPSdyaWdodC1tZW51LWJvZHknXVwiLCBbXHJcblx0XHQgICAgbShcImgzXCIsIFwiTWVudVwiKSxcclxuXHRcdCAgICBtKFwiYVtocmVmPScjJ11cIiwgXCJSZWdpc3RlclwiKSxcclxuXHRcdCAgICBtKFwiYVtocmVmPScjJ11cIiwgXCJBZG1pbmlzdHJhdGlvblwiKVxyXG4gICAgICAgIF0pLFxyXG4gICAgICAgIG0oXCJkaXYuZmEuZmEtY29nLmZhLTJ4LnJpZ2h0LW1lbnUtYnV0dG9uW2lkPSdyaWdodC1tZW51LWJ1dHRvbiddXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyBsYXlvdXQubWVudVJpZ2h0QnV0dG9uQ2xpY2sodGhpcywgJ3JpZ2h0LW1lbnUtYm9keScpOyB9IH0sIFwiXCIpXHJcbiAgICBdO1xyXG59XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHJpZ2h0bWVudSIsIi8vYXBwLnZpZXcuanNcclxudmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciBhcHAgPSByZXF1aXJlKCcuLi9hcHAubW9kZWwuanMnKTtcclxudmFyIENvbnRyb2xzID0gcmVxdWlyZSgnLi4vLi4vY29udHJvbHMuanMnKTtcclxuY29udHJvbHMgPSBuZXcgQ29udHJvbHMoKTtcclxuXHJcbmFwcC52aWV3ID0gZnVuY3Rpb24gKGN0cmwpIHtcclxuICAgIHJldHVybiBbXHJcblx0bShcIi5qdW1ib3Ryb25cIiwgW1xyXG5cdFx0bShcImgxXCIsIFwiQVNQLk5FVFwiKSxcclxuXHRcdG0oXCJwLmxlYWRcIiwgXCJBU1AuTkVUIGlzIGEgZnJlZSB3ZWIgZnJhbWV3b3JrIGZvciBidWlsZGluZyBncmVhdCBXZWIgc2l0ZXMgYW5kIFdlYiBhcHBsaWNhdGlvbnMgdXNpbmcgSFRNTCwgQ1NTLCBhbmQgSmF2YVNjcmlwdC5cIiksXHJcblx0XHRtKFwicFwiLCBbXHJcbiAgICAgICAgICAgIFttKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J2hpdG1lJ11cIiwgeyBvbmNsaWNrIDogZnVuY3Rpb24gKCkgeyBuZXcgY29udHJvbHMuUG9wdXBEaWFsb2coKS5zaG93KG51bGwsICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/JywgJ0NvbmZpcm1hdGlvbiBOZWVkZWQnLCBmdW5jdGlvbiAoKSB7IGFsZXJ0KCdZb3UgcHJlc3NlZCBZZXMgXl4nKTt9LCBmdW5jdGlvbiAoKSB7IGFsZXJ0KCdZb3UgcHJlc3NlZCBObyBUVCcpO30pO30gfSwgXCJIaXQgTWUhXCIpLCBcIlxcblwiLFxyXG4gICAgICAgICAgICAgbShcImJ1dHRvbi5idG4uYnRuLXByaW1hcnkuYnRuLWxnW2lkPSd5ZXMnXVwiLCB7IG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsgY29udHJvbHMuc2hvd05vdGlmaWNhdGlvbignWUVTISEnLCAnSnVzdCBhIFRlc3QnLCAnU3VjY2VzcycsIDUwMDAsIDMwLCAzMCwgbnVsbCk7IH0gfSwgXCJZZXNcIiksIFwiXFxuXCIsXHJcbiAgICAgICAgICAgICBtKFwiYnV0dG9uLmJ0bi5idG4tcHJpbWFyeS5idG4tbGdbaWQ9J25vJ11cIiwgeyBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IGNvbnRyb2xzLnNob3dOb3RpZmljYXRpb24oJ05PISEnLCAnSnVzdCBhIFRlc3QnLCAnRXJyb3InLCA1MDAwLCBjb250cm9scy5ub3RpZmljYXRpb25SaWdodFBvcywgY29udHJvbHMubm90aWZpY2F0aW9uVG9wUG9zLCBudWxsKTsgfSB9LCBcIk5vXCIpLCBcIlxcblwiLFxyXG4gICAgICAgICAgICAgbShcImJ1dHRvbi5idG4uYnRuLXByaW1hcnkuYnRuLWxnW2lkPSdtYXliZSddXCIsIHsgb25jbGljazogZnVuY3Rpb24gKCkgeyBjb250cm9scy5zaG93Tm90aWZpY2F0aW9uKCdNQVlCRSBTTy4uLicsICdKdXN0IGEgVGVzdCcsICdXYXJuaW5nJywgNTAwMCwgY29udHJvbHMubm90aWZpY2F0aW9uUmlnaHRQb3MsIGNvbnRyb2xzLm5vdGlmaWNhdGlvblRvcFBvcywgbnVsbCk7IH0gfSwgXCJNYXliZSBTb1wiKV1cclxuXHRcdF0pXHJcblx0XSksXHJcblx0bShcIi5yb3dcIiwgW1xyXG5cdFx0bShcIi5jb2wtbWQtNFwiLCBbXHJcblx0XHRcdG0oXCJoMlwiLCBcIllvdXIgaW5mb3JtYXRpb25cIiksXHJcblx0XHRcdG0oXCJwXCIsIFwiVGhpcyBzZWN0aW9uIHNob3dzIGhvdyB5b3UgY2FuIGNhbGwgQVNQLk5FVCBXZWIgQVBJIHRvIGdldCB0aGUgdXNlciBkZXRhaWxzLlwiKSxcclxuXHRcdFx0bShcInBbZGF0YS1iaW5kPSd0ZXh0OiBteUhvbWV0b3duJ11cIiksXHJcblx0XHRcdG0oXCJwXCIsIFttKFwiYS5idG4uYnRuLWRlZmF1bHRbaHJlZj0naHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSWQ9MjczNzMyJ11cIiwgXCJMZWFybiBtb3JlIMK7XCIpXSlcclxuXHRcdF0pLFxyXG5cdFx0bShcIi5jb2wtbWQtNFwiLCBbXHJcblx0XHRcdG0oXCJoMlwiLCBcIkdldHRpbmcgc3RhcnRlZFwiKSxcclxuXHRcdFx0bShcInBcIiwgXCJcXG4gICAgICAgICAgICAgICAgICAgIEFTUC5ORVQgU2luZ2xlIFBhZ2UgQXBwbGljYXRpb24gKFNQQSkgaGVscHMgeW91IGJ1aWxkIGFwcGxpY2F0aW9ucyB0aGF0IGluY2x1ZGUgc2lnbmlmaWNhbnQgY2xpZW50LXNpZGUgaW50ZXJhY3Rpb25zIHVzaW5nIEhUTUwsIENTUywgYW5kIEphdmFTY3JpcHQuXFxuICAgICAgICAgICAgICAgICAgICBJdCdzIG5vdyBlYXNpZXIgdGhhbiBldmVyIGJlZm9yZSB0byBnZXR0aW5nIHN0YXJ0ZWQgd3JpdGluZyBoaWdobHkgaW50ZXJhY3RpdmUgd2ViIGFwcGxpY2F0aW9ucy5cXG4gICAgICAgICAgICAgICAgXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBbbShcImEuYnRuLmJ0bi1kZWZhdWx0W2hyZWY9J2h0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lkPTI3MzczMiddXCIsIFwiTGVhcm4gbW9yZSDCu1wiKV0pXHJcblx0XHRdKSxcclxuXHRcdG0oXCIuY29sLW1kLTRcIiwgW1xyXG5cdFx0XHRtKFwiaDJcIiwgXCJXZWIgSG9zdGluZ1wiKSxcclxuXHRcdFx0bShcInBcIiwgXCJZb3UgY2FuIGVhc2lseSBmaW5kIGEgd2ViIGhvc3RpbmcgY29tcGFueSB0aGF0IG9mZmVycyB0aGUgcmlnaHQgbWl4IG9mIGZlYXR1cmVzIGFuZCBwcmljZSBmb3IgeW91ciBhcHBsaWNhdGlvbnMuXCIpLFxyXG5cdFx0XHRtKFwicFwiLCBbbShcImEuYnRuLmJ0bi1kZWZhdWx0W2hyZWY9J2h0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lkPTMwMTg2NyddXCIsIFwiTGVhcm4gbW9yZSDCu1wiKV0pXHJcblx0XHRdKVxyXG5cdF0pXHJcbiAgICBdO1xyXG59XHJcblxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcC52aWV3IiwiLyoqXHJcbiAqIEpTWCB2ZXJzaW9uIG9mIHRoZSBNaXRocmlsIEdldHRpbmcgU3RhcnRlZCBkb2N1bWVudGF0aW9uJ3MgVE9ETyBleGFtcGxlLlxyXG4gKiBodHRwOi8vbGhvcmllLmdpdGh1Yi5pby9taXRocmlsL2dldHRpbmctc3RhcnRlZC5odG1sXHJcbiAqIEBqc3ggbVxyXG4gKi9cclxudmFyIG0gPSByZXF1aXJlKCcuLi8uLi9taXRocmlsLmpzJyk7XHJcbnZhciB0b2RvID0gcmVxdWlyZSgnLi4vbW9kZWxzL3RvZG8ubW9kZWwuanMnKTtcclxuXHJcbnRvZG8udmlldyA9IGZ1bmN0aW9uIChjdHJsKSB7XHJcbiAgICByZXR1cm4gbShcImh0bWxcIiwgW1xyXG4gICAgICAgIG0oXCJib2R5XCIsIFtcclxuICAgICAgICAgICAgbShcImlucHV0XCIsICB7b25jaGFuZ2U6bS53aXRoQXR0cigndmFsdWUnLCBjdHJsLmRlc2NyaXB0aW9uKSwgdmFsdWU6IGN0cmwuZGVzY3JpcHRpb24oKX0pLCAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBtKFwiYnV0dG9uXCIsIHtvbmNsaWNrOmN0cmwuYWRkfSwgW1wiQWRkXCJdKSxcclxuICAgICAgICAgICAgbShcInRhYmxlXCIsIFsgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGN0cmwubGlzdC5tYXAoZnVuY3Rpb24gKHRhc2ssIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0oXCJ0clwiLCBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0oXCJ0ZFwiLCBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKFwiaW5wdXRcIiwgIHt0eXBlOidjaGVja2JveCcsIG9uY2xpY2s6IG0ud2l0aEF0dHIoJ2NoZWNrZWQnLCB0YXNrLmRvbmUpLCBjaGVja2VkOiB0YXNrLmRvbmUoKX0pICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtKFwidGRcIiwge3N0eWxlOnt0ZXh0RGVjb3JhdGlvbjogdGFzay5kb25lKCkgPyAnbGluZS10aHJvdWdoJyA6ICdub25lJ319LCBbdGFzay5kZXNjcmlwdGlvbigpXSlcclxuICAgICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXSlcclxuICAgICAgICBdKVxyXG4gICAgXSlcclxufVxyXG4vL0Jyb3dzZXJpZnkgRGlyZWN0aXZlc1xyXG5tb2R1bGUuZXhwb3J0cyA9IHRvZG8udmlldyIsIi8vKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8jcmVnaW9uIEtlbmRvIFVJIENvbnRyb2xzXHJcbi8vKioqKioqKioqKioqKioqKioqKioqKipcclxudmFyIGNvbnRyb2xzID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uUmlnaHRQb3MgPSAzMDtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uVG9wUG9zID0gMzA7XHJcbiAgICAvLyNyZWdpb24gTm90aWZpY2F0aW9uIE1lc3NhZ2VzXHJcbiAgICB0aGlzLmdldERpYWxvZ0NyaXRpY2FsaXR5ID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ3N1Y2Nlc3MnKSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiU3VjY2Vzc1wiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Vycm9yJykgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVycm9yXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZmFpbCcpID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJFcnJvclwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIldhcm5pbmdcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnNob3dOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobWVzc2FnZVRleHQsIHRpdGxlVGV4dCwgbW9kZSwgdGltZU91dCwgcG9zUmlnaHQsIHBvc1RvcCwgYXBwZW5kVG8pIHtcclxuICAgICAgICB2YXIgYXBwZW5kVGFyZ2V0ID0gYXBwZW5kVG87XHJcbiAgICAgICAgaWYgKHR5cGVvZiAobm90aWZpY2F0aW9uSGFuZGxlKSA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkhhbmRsZSA9ICQoXCIjbm90aWZpY2F0aW9uU3BhblwiKS5rZW5kb05vdGlmaWNhdGlvbih7XHJcbiAgICAgICAgICAgICAgICBcInBvc2l0aW9uXCI6IHsgXCJyaWdodFwiOiBwb3NSaWdodCwgXCJ0b3BcIjogcG9zVG9wIH0sXHJcbiAgICAgICAgICAgICAgICBcImF1dG9IaWRlQWZ0ZXJcIjogdGltZU91dCxcclxuICAgICAgICAgICAgICAgIFwic3RhY2tpbmdcIjogXCJkb3duXCIsXHJcbiAgICAgICAgICAgICAgICBcInRlbXBsYXRlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgeyBcInR5cGVcIjogXCJlcnJvclwiLCBcInRlbXBsYXRlSWRcIjogXCJlcnJvclRlbXBsYXRlXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcIndhcm5pbmdcIiwgXCJ0ZW1wbGF0ZUlkXCI6IFwid2FybmluZ1RlbXBsYXRlXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcInN1Y2Nlc3NcIiwgXCJ0ZW1wbGF0ZUlkXCI6IFwic3VjY2Vzc1RlbXBsYXRlXCIgfVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9ICQoXCIjbm90aWZpY2F0aW9uU3BhblwiKS5kYXRhKFwia2VuZG9Ob3RpZmljYXRpb25cIik7XHJcbiAgICAgICAgbm90aWZpY2F0aW9uLnNob3coe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlVGV4dCxcclxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlVGV4dCxcclxuICAgICAgICB9LCBtb2RlLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uIE5vdGlmaWNhdGlvbiBNZXNzYWdlc1xyXG4gICAgLy8jcmVnaW9uIFBvcHVwIERpYWxvZ1xyXG4gICAgdGhpcy5Qb3B1cERpYWxvZyA9IGZ1bmN0aW9uIChtdXRlKSB7XHJcbiAgICAgICAgdGhpcy5tdXRlID0gbXV0ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGUsIG1lc3NhZ2VUZXh0LCB0aXRsZVRleHQsIGNvbmZpcm1DYWxsYmFjaywgY2FuY2VsQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGRmZCA9IG5ldyAkLkRlZmVycmVkKCk7IC8vUHJvbWlzZSBvYmplY3QgdG8gcGVyZm9ybSBhY3Rpb25zIGJhc2VkIG9uIHVzZXIgaW5wdXQgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubXV0ZSA9PSBmYWxzZSAmJiBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZS5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPSAkLmV2ZW50LmZpeChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUZXh0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjbW9kYWwtY29uZmlybWF0aW9uXCIpLmh0bWwoXCI8ZGl2IGNsYXNzPVxcXCJjb25maXJtQ29udGVudFxcXCI+PHAgY2xhc3M9XFxcIm1vZGFsLW1lc3NhZ2VcXFwiPlwiICsgbWVzc2FnZVRleHQgKyBcIjwvcD48YnV0dG9uIGNsYXNzPVxcXCJtb2RhbC1jb25maXJtIGstYnV0dG9uXFxcIj5ZZXM8L2J1dHRvbj4mbmJzcDs8YnV0dG9uIGNsYXNzPVxcXCJtb2RhbC1jYW5jZWwgay1idXR0b25cXFwiPk5vPC9idXR0b24+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBrZW5kb1dpbmRvdyA9ICQoXCI8ZGl2IC8+XCIpLmtlbmRvV2luZG93KHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiA0MDAsXHJcbiAgICAgICAgICAgICAgICAvL2hlaWdodDogMTIwLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlVGV4dCxcclxuICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11dGUgPT0gZmFsc2UgfHwgdGhpcy5tdXRlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAga2VuZG9XaW5kb3cuZGF0YShcImtlbmRvV2luZG93XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQoJChcIiNtb2RhbC1jb25maXJtYXRpb25cIikuaHRtbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jZW50ZXIoKS5vcGVuKCk7XHJcblxyXG4gICAgICAgICAgICAgICAga2VuZG9XaW5kb3cuZmluZChcIi5tb2RhbC1jb25maXJtLC5tb2RhbC1jYW5jZWxcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwibW9kYWwtY29uZmlybVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZmQucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybUNhbGxiYWNrICE9PSB1bmRlZmluZWQgJiYgY29uZmlybUNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcIm1vZGFsLWNhbmNlbFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiBjYW5jZWxDYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAga2VuZG9XaW5kb3cuZGF0YShcImtlbmRvV2luZG93XCIpLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25maXJtQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiBjb25maXJtQ2FsbGJhY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGZkLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkZmQucHJvbWlzZSgpOyAvL1JldHVybnMgYSBwcm9taXNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uIFBvcHVwIERpYWxvZyBTZWN0aW9uXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBjb250cm9scztcclxuXHJcbi8vKioqKioqKioqKioqKioqKioqKioqKipcclxuLy8jZW5kcmVnaW9uIFxyXG4vLyoqKioqKioqKioqKioqKioqKioqKioqIiwiLy8jcmVnaW9uIEtleWJvYXJkIFNob3J0Y3V0c1xyXG4gICAgalF1ZXJ5KGRvY3VtZW50KS5iaW5kKCdrZXlwcmVzcycsICdkJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgJChcIiNEcm9wZG93blwiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAnaCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjaGl0bWVcIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgfSk7XHJcbiAgICBqUXVlcnkoZG9jdW1lbnQpLmJpbmQoJ2tleXByZXNzJywgJ3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAkKFwiI3llc1wiKS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICB9KTtcclxuICAgIGpRdWVyeShkb2N1bWVudCkuYmluZCgna2V5cHJlc3MnLCAnbicsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICQoXCIjbm9cIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgfSk7XHJcbiAgICBqUXVlcnkoZG9jdW1lbnQpLmJpbmQoJ2tleXByZXNzJywgJ20nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAkKFwiI21heWJlXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgIH0pO1xyXG4vLyNlbmRyZWdpb24gS2V5Ym9hcmQgU2hvcnRjdXRzIiwiLypqc2xpbnQgYnJvd3NlcjogdHJ1ZSovXHJcbi8qanNsaW50IGpxdWVyeTogdHJ1ZSovXHJcblxyXG4vKlxyXG4gKiBqUXVlcnkgSG90a2V5cyBQbHVnaW5cclxuICogQ29weXJpZ2h0IDIwMTAsIEpvaG4gUmVzaWdcclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuXHJcbiAqXHJcbiAqIEJhc2VkIHVwb24gdGhlIHBsdWdpbiBieSBUenVyeSBCYXIgWW9jaGF5OlxyXG4gKiBodHRwOi8vZ2l0aHViLmNvbS90enVyeWJ5L2hvdGtleXNcclxuICpcclxuICogT3JpZ2luYWwgaWRlYSBieTpcclxuICogQmlubnkgViBBLCBodHRwOi8vd3d3Lm9wZW5qcy5jb20vc2NyaXB0cy9ldmVudHMva2V5Ym9hcmRfc2hvcnRjdXRzL1xyXG4gKi9cclxuXHJcbi8qXHJcbiAqIE9uZSBzbWFsbCBjaGFuZ2UgaXM6IG5vdyBrZXlzIGFyZSBwYXNzZWQgYnkgb2JqZWN0IHsga2V5czogJy4uLicgfVxyXG4gKiBNaWdodCBiZSB1c2VmdWwsIHdoZW4geW91IHdhbnQgdG8gcGFzcyBzb21lIG90aGVyIGRhdGEgdG8geW91ciBoYW5kbGVyXHJcbiAqL1xyXG52YXIgalF1ZXJ5ID0gcmVxdWlyZSgnLi9rZW5kby8yMDE0LjMuMTExOS9qcXVlcnkubWluLmpzJyk7XHJcbihmdW5jdGlvbihqUXVlcnkpIHtcclxuXHJcbiAgalF1ZXJ5LmhvdGtleXMgPSB7XHJcbiAgICB2ZXJzaW9uOiBcIjAuOFwiLFxyXG5cclxuICAgIHNwZWNpYWxLZXlzOiB7XHJcbiAgICAgIDg6IFwiYmFja3NwYWNlXCIsXHJcbiAgICAgIDk6IFwidGFiXCIsXHJcbiAgICAgIDEwOiBcInJldHVyblwiLFxyXG4gICAgICAxMzogXCJyZXR1cm5cIixcclxuICAgICAgMTY6IFwic2hpZnRcIixcclxuICAgICAgMTc6IFwiY3RybFwiLFxyXG4gICAgICAxODogXCJhbHRcIixcclxuICAgICAgMTk6IFwicGF1c2VcIixcclxuICAgICAgMjA6IFwiY2Fwc2xvY2tcIixcclxuICAgICAgMjc6IFwiZXNjXCIsXHJcbiAgICAgIDMyOiBcInNwYWNlXCIsXHJcbiAgICAgIDMzOiBcInBhZ2V1cFwiLFxyXG4gICAgICAzNDogXCJwYWdlZG93blwiLFxyXG4gICAgICAzNTogXCJlbmRcIixcclxuICAgICAgMzY6IFwiaG9tZVwiLFxyXG4gICAgICAzNzogXCJsZWZ0XCIsXHJcbiAgICAgIDM4OiBcInVwXCIsXHJcbiAgICAgIDM5OiBcInJpZ2h0XCIsXHJcbiAgICAgIDQwOiBcImRvd25cIixcclxuICAgICAgNDU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgIDQ2OiBcImRlbFwiLFxyXG4gICAgICA1OTogXCI7XCIsXHJcbiAgICAgIDYxOiBcIj1cIixcclxuICAgICAgOTY6IFwiMFwiLFxyXG4gICAgICA5NzogXCIxXCIsXHJcbiAgICAgIDk4OiBcIjJcIixcclxuICAgICAgOTk6IFwiM1wiLFxyXG4gICAgICAxMDA6IFwiNFwiLFxyXG4gICAgICAxMDE6IFwiNVwiLFxyXG4gICAgICAxMDI6IFwiNlwiLFxyXG4gICAgICAxMDM6IFwiN1wiLFxyXG4gICAgICAxMDQ6IFwiOFwiLFxyXG4gICAgICAxMDU6IFwiOVwiLFxyXG4gICAgICAxMDY6IFwiKlwiLFxyXG4gICAgICAxMDc6IFwiK1wiLFxyXG4gICAgICAxMDk6IFwiLVwiLFxyXG4gICAgICAxMTA6IFwiLlwiLFxyXG4gICAgICAxMTE6IFwiL1wiLFxyXG4gICAgICAxMTI6IFwiZjFcIixcclxuICAgICAgMTEzOiBcImYyXCIsXHJcbiAgICAgIDExNDogXCJmM1wiLFxyXG4gICAgICAxMTU6IFwiZjRcIixcclxuICAgICAgMTE2OiBcImY1XCIsXHJcbiAgICAgIDExNzogXCJmNlwiLFxyXG4gICAgICAxMTg6IFwiZjdcIixcclxuICAgICAgMTE5OiBcImY4XCIsXHJcbiAgICAgIDEyMDogXCJmOVwiLFxyXG4gICAgICAxMjE6IFwiZjEwXCIsXHJcbiAgICAgIDEyMjogXCJmMTFcIixcclxuICAgICAgMTIzOiBcImYxMlwiLFxyXG4gICAgICAxNDQ6IFwibnVtbG9ja1wiLFxyXG4gICAgICAxNDU6IFwic2Nyb2xsXCIsXHJcbiAgICAgIDE3MzogXCItXCIsXHJcbiAgICAgIDE4NjogXCI7XCIsXHJcbiAgICAgIDE4NzogXCI9XCIsXHJcbiAgICAgIDE4ODogXCIsXCIsXHJcbiAgICAgIDE4OTogXCItXCIsXHJcbiAgICAgIDE5MDogXCIuXCIsXHJcbiAgICAgIDE5MTogXCIvXCIsXHJcbiAgICAgIDE5MjogXCJgXCIsXHJcbiAgICAgIDIxOTogXCJbXCIsXHJcbiAgICAgIDIyMDogXCJcXFxcXCIsXHJcbiAgICAgIDIyMTogXCJdXCIsXHJcbiAgICAgIDIyMjogXCInXCJcclxuICAgIH0sXHJcblxyXG4gICAgc2hpZnROdW1zOiB7XHJcbiAgICAgIFwiYFwiOiBcIn5cIixcclxuICAgICAgXCIxXCI6IFwiIVwiLFxyXG4gICAgICBcIjJcIjogXCJAXCIsXHJcbiAgICAgIFwiM1wiOiBcIiNcIixcclxuICAgICAgXCI0XCI6IFwiJFwiLFxyXG4gICAgICBcIjVcIjogXCIlXCIsXHJcbiAgICAgIFwiNlwiOiBcIl5cIixcclxuICAgICAgXCI3XCI6IFwiJlwiLFxyXG4gICAgICBcIjhcIjogXCIqXCIsXHJcbiAgICAgIFwiOVwiOiBcIihcIixcclxuICAgICAgXCIwXCI6IFwiKVwiLFxyXG4gICAgICBcIi1cIjogXCJfXCIsXHJcbiAgICAgIFwiPVwiOiBcIitcIixcclxuICAgICAgXCI7XCI6IFwiOiBcIixcclxuICAgICAgXCInXCI6IFwiXFxcIlwiLFxyXG4gICAgICBcIixcIjogXCI8XCIsXHJcbiAgICAgIFwiLlwiOiBcIj5cIixcclxuICAgICAgXCIvXCI6IFwiP1wiLFxyXG4gICAgICBcIlxcXFxcIjogXCJ8XCJcclxuICAgIH0sXHJcblxyXG4gICAgLy8gZXhjbHVkZXM6IGJ1dHRvbiwgY2hlY2tib3gsIGZpbGUsIGhpZGRlbiwgaW1hZ2UsIHBhc3N3b3JkLCByYWRpbywgcmVzZXQsIHNlYXJjaCwgc3VibWl0LCB1cmxcclxuICAgIHRleHRBY2NlcHRpbmdJbnB1dFR5cGVzOiBbXHJcbiAgICAgIFwidGV4dFwiLCBcInBhc3N3b3JkXCIsIFwibnVtYmVyXCIsIFwiZW1haWxcIiwgXCJ1cmxcIiwgXCJyYW5nZVwiLCBcImRhdGVcIiwgXCJtb250aFwiLCBcIndlZWtcIiwgXCJ0aW1lXCIsIFwiZGF0ZXRpbWVcIixcclxuICAgICAgXCJkYXRldGltZS1sb2NhbFwiLCBcInNlYXJjaFwiLCBcImNvbG9yXCIsIFwidGVsXCJdLFxyXG5cclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgZmlsdGVyVGV4dElucHV0czogdHJ1ZVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGtleUhhbmRsZXIoaGFuZGxlT2JqKSB7XHJcbiAgICBpZiAodHlwZW9mIGhhbmRsZU9iai5kYXRhID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGhhbmRsZU9iai5kYXRhID0ge1xyXG4gICAgICAgIGtleXM6IGhhbmRsZU9iai5kYXRhXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT25seSBjYXJlIHdoZW4gYSBwb3NzaWJsZSBpbnB1dCBoYXMgYmVlbiBzcGVjaWZpZWRcclxuICAgIGlmICghaGFuZGxlT2JqLmRhdGEgfHwgIWhhbmRsZU9iai5kYXRhLmtleXMgfHwgdHlwZW9mIGhhbmRsZU9iai5kYXRhLmtleXMgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBvcmlnSGFuZGxlciA9IGhhbmRsZU9iai5oYW5kbGVyLFxyXG4gICAgICBrZXlzID0gaGFuZGxlT2JqLmRhdGEua2V5cy50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKTtcclxuXHJcbiAgICBoYW5kbGVPYmouaGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIC8vICAgICAgRG9uJ3QgZmlyZSBpbiB0ZXh0LWFjY2VwdGluZyBpbnB1dHMgdGhhdCB3ZSBkaWRuJ3QgZGlyZWN0bHkgYmluZCB0b1xyXG4gICAgICBpZiAodGhpcyAhPT0gZXZlbnQudGFyZ2V0ICYmICgvdGV4dGFyZWF8c2VsZWN0L2kudGVzdChldmVudC50YXJnZXQubm9kZU5hbWUpIHx8XHJcbiAgICAgICAgICAoalF1ZXJ5LmhvdGtleXMub3B0aW9ucy5maWx0ZXJUZXh0SW5wdXRzICYmXHJcbiAgICAgICAgICAgIGpRdWVyeS5pbkFycmF5KGV2ZW50LnRhcmdldC50eXBlLCBqUXVlcnkuaG90a2V5cy50ZXh0QWNjZXB0aW5nSW5wdXRUeXBlcykgPiAtMSkpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgc3BlY2lhbCA9IGV2ZW50LnR5cGUgIT09IFwia2V5cHJlc3NcIiAmJiBqUXVlcnkuaG90a2V5cy5zcGVjaWFsS2V5c1tldmVudC53aGljaF0sXHJcbiAgICAgICAgY2hhcmFjdGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC53aGljaCkudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICBtb2RpZiA9IFwiXCIsXHJcbiAgICAgICAgcG9zc2libGUgPSB7fTtcclxuXHJcbiAgICAgIGpRdWVyeS5lYWNoKFtcImFsdFwiLCBcImN0cmxcIiwgXCJzaGlmdFwiXSwgZnVuY3Rpb24oaW5kZXgsIHNwZWNpYWxLZXkpIHtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50W3NwZWNpYWxLZXkgKyAnS2V5J10gJiYgc3BlY2lhbCAhPT0gc3BlY2lhbEtleSkge1xyXG4gICAgICAgICAgbW9kaWYgKz0gc3BlY2lhbEtleSArICcrJztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gbWV0YUtleSBpcyB0cmlnZ2VyZWQgb2ZmIGN0cmxLZXkgZXJyb25vdXNseVxyXG4gICAgICBpZiAoZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSAmJiBzcGVjaWFsICE9PSBcIm1ldGFcIikge1xyXG4gICAgICAgIG1vZGlmICs9IFwibWV0YStcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGV2ZW50Lm1ldGFLZXkgJiYgc3BlY2lhbCAhPT0gXCJtZXRhXCIgJiYgbW9kaWYuaW5kZXhPZihcImFsdCtjdHJsK3NoaWZ0K1wiKSA+IC0xKSB7XHJcbiAgICAgICAgbW9kaWYgPSBtb2RpZi5yZXBsYWNlKFwiYWx0K2N0cmwrc2hpZnQrXCIsIFwiaHlwZXIrXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3BlY2lhbCkge1xyXG4gICAgICAgIHBvc3NpYmxlW21vZGlmICsgc3BlY2lhbF0gPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHBvc3NpYmxlW21vZGlmICsgY2hhcmFjdGVyXSA9IHRydWU7XHJcbiAgICAgICAgcG9zc2libGVbbW9kaWYgKyBqUXVlcnkuaG90a2V5cy5zaGlmdE51bXNbY2hhcmFjdGVyXV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBcIiRcIiBjYW4gYmUgdHJpZ2dlcmVkIGFzIFwiU2hpZnQrNFwiIG9yIFwiU2hpZnQrJFwiIG9yIGp1c3QgXCIkXCJcclxuICAgICAgICBpZiAobW9kaWYgPT09IFwic2hpZnQrXCIpIHtcclxuICAgICAgICAgIHBvc3NpYmxlW2pRdWVyeS5ob3RrZXlzLnNoaWZ0TnVtc1tjaGFyYWN0ZXJdXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHBvc3NpYmxlW2tleXNbaV1dKSB7XHJcbiAgICAgICAgICByZXR1cm4gb3JpZ0hhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBqUXVlcnkuZWFjaChbXCJrZXlkb3duXCIsIFwia2V5dXBcIiwgXCJrZXlwcmVzc1wiXSwgZnVuY3Rpb24oKSB7XHJcbiAgICBqUXVlcnkuZXZlbnQuc3BlY2lhbFt0aGlzXSA9IHtcclxuICAgICAgYWRkOiBrZXlIYW5kbGVyXHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxufSkoalF1ZXJ5IHx8IHRoaXMualF1ZXJ5IHx8IHdpbmRvdy5qUXVlcnkpO1xyXG4iLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZXhwb3J0cywgcmVxdWlyZSwgZGVmaW5lLCBicm93c2VyaWZ5X3NoaW1fX2RlZmluZV9fbW9kdWxlX19leHBvcnRfXykge1xuLyohIGpRdWVyeSB2MS45LjEgfCAoYykgMjAwNSwgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZVxuLy9AIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXBcbiovKGZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXR5cGVvZiB0LG89ZS5kb2N1bWVudCxhPWUubG9jYXRpb24scz1lLmpRdWVyeSx1PWUuJCxsPXt9LGM9W10scD1cIjEuOS4xXCIsZj1jLmNvbmNhdCxkPWMucHVzaCxoPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSxiPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBiLmZuLmluaXQoZSx0LHIpfSx4PS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSx3PS9cXFMrL2csVD0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csTj0vXig/Oig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEM9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLGs9L15bXFxdLDp7fVxcc10qJC8sRT0vKD86Xnw6fCwpKD86XFxzKlxcWykrL2csUz0vXFxcXCg/OltcIlxcXFxcXC9iZm5ydF18dVtcXGRhLWZBLUZdezR9KS9nLEE9L1wiW15cIlxcXFxcXHJcXG5dKlwifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxcZCtcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvZyxqPS9eLW1zLS8sRD0vLShbXFxkYS16XSkvZ2ksTD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LEg9ZnVuY3Rpb24oZSl7KG8uYWRkRXZlbnRMaXN0ZW5lcnx8XCJsb2FkXCI9PT1lLnR5cGV8fFwiY29tcGxldGVcIj09PW8ucmVhZHlTdGF0ZSkmJihxKCksYi5yZWFkeSgpKX0scT1mdW5jdGlvbigpe28uYWRkRXZlbnRMaXN0ZW5lcj8oby5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEgsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixILCExKSk6KG8uZGV0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixIKSxlLmRldGFjaEV2ZW50KFwib25sb2FkXCIsSCkpfTtiLmZuPWIucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3RvcjpiLGluaXQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLGE7aWYoIWUpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKGk9XCI8XCI9PT1lLmNoYXJBdCgwKSYmXCI+XCI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpOLmV4ZWMoZSksIWl8fCFpWzFdJiZuKXJldHVybiFufHxuLmpxdWVyeT8obnx8cikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKG4pLmZpbmQoZSk7aWYoaVsxXSl7aWYobj1uIGluc3RhbmNlb2YgYj9uWzBdOm4sYi5tZXJnZSh0aGlzLGIucGFyc2VIVE1MKGlbMV0sbiYmbi5ub2RlVHlwZT9uLm93bmVyRG9jdW1lbnR8fG46bywhMCkpLEMudGVzdChpWzFdKSYmYi5pc1BsYWluT2JqZWN0KG4pKWZvcihpIGluIG4pYi5pc0Z1bmN0aW9uKHRoaXNbaV0pP3RoaXNbaV0obltpXSk6dGhpcy5hdHRyKGksbltpXSk7cmV0dXJuIHRoaXN9aWYoYT1vLmdldEVsZW1lbnRCeUlkKGlbMl0pLGEmJmEucGFyZW50Tm9kZSl7aWYoYS5pZCE9PWlbMl0pcmV0dXJuIHIuZmluZChlKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09YX1yZXR1cm4gdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTpiLmlzRnVuY3Rpb24oZSk/ci5yZWFkeShlKTooZS5zZWxlY3RvciE9PXQmJih0aGlzLnNlbGVjdG9yPWUuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWUuY29udGV4dCksYi5tYWtlQXJyYXkoZSx0aGlzKSl9LHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBoLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9Yi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiBiLmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4gYi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhoLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhiLm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6ZCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sYi5mbi5pbml0LnByb3RvdHlwZT1iLmZuLGIuZXh0ZW5kPWIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsbixyLGksbyxhLHM9YXJndW1lbnRzWzBdfHx7fSx1PTEsbD1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1sxXXx8e30sdT0yKSxcIm9iamVjdFwiPT10eXBlb2Ygc3x8Yi5pc0Z1bmN0aW9uKHMpfHwocz17fSksbD09PXUmJihzPXRoaXMsLS11KTtsPnU7dSsrKWlmKG51bGwhPShvPWFyZ3VtZW50c1t1XSkpZm9yKGkgaW4gbyllPXNbaV0scj1vW2ldLHMhPT1yJiYoYyYmciYmKGIuaXNQbGFpbk9iamVjdChyKXx8KG49Yi5pc0FycmF5KHIpKSk/KG4/KG49ITEsYT1lJiZiLmlzQXJyYXkoZSk/ZTpbXSk6YT1lJiZiLmlzUGxhaW5PYmplY3QoZSk/ZTp7fSxzW2ldPWIuZXh0ZW5kKGMsYSxyKSk6ciE9PXQmJihzW2ldPXIpKTtyZXR1cm4gc30sYi5leHRlbmQoe25vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PWImJihlLiQ9dSksdCYmZS5qUXVlcnk9PT1iJiYoZS5qUXVlcnk9cyksYn0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT9iLnJlYWR5V2FpdCsrOmIucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXtpZihlPT09ITA/IS0tYi5yZWFkeVdhaXQ6IWIuaXNSZWFkeSl7aWYoIW8uYm9keSlyZXR1cm4gc2V0VGltZW91dChiLnJlYWR5KTtiLmlzUmVhZHk9ITAsZSE9PSEwJiYtLWIucmVhZHlXYWl0PjB8fChuLnJlc29sdmVXaXRoKG8sW2JdKSxiLmZuLnRyaWdnZXImJmIobykudHJpZ2dlcihcInJlYWR5XCIpLm9mZihcInJlYWR5XCIpKX19LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT09Yi50eXBlKGUpfSxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiYXJyYXlcIj09PWIudHlwZShlKX0saXNXaW5kb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmU9PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHxcIm9iamVjdFwiOnR5cGVvZiBlfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe2lmKCFlfHxcIm9iamVjdFwiIT09Yi50eXBlKGUpfHxlLm5vZGVUeXBlfHxiLmlzV2luZG93KGUpKXJldHVybiExO3RyeXtpZihlLmNvbnN0cnVjdG9yJiYheS5jYWxsKGUsXCJjb25zdHJ1Y3RvclwiKSYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSxcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITF9Y2F0Y2gobil7cmV0dXJuITF9dmFyIHI7Zm9yKHIgaW4gZSk7cmV0dXJuIHI9PT10fHx5LmNhbGwoZSxyKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXtpZighZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHQ9dHx8bzt2YXIgcj1DLmV4ZWMoZSksaT0hbiYmW107cmV0dXJuIHI/W3QuY3JlYXRlRWxlbWVudChyWzFdKV06KHI9Yi5idWlsZEZyYWdtZW50KFtlXSx0LGkpLGkmJmIoaSkucmVtb3ZlKCksYi5tZXJnZShbXSxyLmNoaWxkTm9kZXMpKX0scGFyc2VKU09OOmZ1bmN0aW9uKG4pe3JldHVybiBlLkpTT04mJmUuSlNPTi5wYXJzZT9lLkpTT04ucGFyc2Uobik6bnVsbD09PW4/bjpcInN0cmluZ1wiPT10eXBlb2YgbiYmKG49Yi50cmltKG4pLG4mJmsudGVzdChuLnJlcGxhY2UoUyxcIkBcIikucmVwbGFjZShBLFwiXVwiKS5yZXBsYWNlKEUsXCJcIikpKT9GdW5jdGlvbihcInJldHVybiBcIituKSgpOihiLmVycm9yKFwiSW52YWxpZCBKU09OOiBcIituKSx0KX0scGFyc2VYTUw6ZnVuY3Rpb24obil7dmFyIHIsaTtpZighbnx8XCJzdHJpbmdcIiE9dHlwZW9mIG4pcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLFwidGV4dC94bWxcIikpOihyPW5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKSxyLmFzeW5jPVwiZmFsc2VcIixyLmxvYWRYTUwobikpfWNhdGNoKG8pe3I9dH1yZXR1cm4gciYmci5kb2N1bWVudEVsZW1lbnQmJiFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxiLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK24pLHJ9LG5vb3A6ZnVuY3Rpb24oKXt9LGdsb2JhbEV2YWw6ZnVuY3Rpb24odCl7dCYmYi50cmltKHQpJiYoZS5leGVjU2NyaXB0fHxmdW5jdGlvbih0KXtlLmV2YWwuY2FsbChlLHQpfSkodCl9LGNhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGosXCJtcy1cIikucmVwbGFjZShELEwpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLGE9TShlKTtpZihuKXtpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihhKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTp2JiYhdi5jYWxsKFwiXFx1ZmVmZlxcdTAwYTBcIik/ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/XCJcIjp2LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6KGUrXCJcIikucmVwbGFjZShULFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKE0oT2JqZWN0KGUpKT9iLm1lcmdlKG4sXCJzdHJpbmdcIj09dHlwZW9mIGU/W2VdOmUpOmQuY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZih0KXtpZihnKXJldHVybiBnLmNhbGwodCxlLG4pO2ZvcihyPXQubGVuZ3RoLG49bj8wPm4/TWF0aC5tYXgoMCxyK24pOm46MDtyPm47bisrKWlmKG4gaW4gdCYmdFtuXT09PWUpcmV0dXJuIG59cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGUsbil7dmFyIHI9bi5sZW5ndGgsaT1lLmxlbmd0aCxvPTA7aWYoXCJudW1iZXJcIj09dHlwZW9mIHIpZm9yKDtyPm87bysrKWVbaSsrXT1uW29dO2Vsc2Ugd2hpbGUobltvXSE9PXQpZVtpKytdPW5bbysrXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPVtdLG89MCxhPWUubGVuZ3RoO2ZvcihuPSEhbjthPm87bysrKXI9ISF0KGVbb10sbyksbiE9PXImJmkucHVzaChlW29dKTtyZXR1cm4gaX0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPTAsbz1lLmxlbmd0aCxhPU0oZSkscz1bXTtpZihhKWZvcig7bz5pO2krKylyPXQoZVtpXSxpLG4pLG51bGwhPXImJihzW3MubGVuZ3RoXT1yKTtlbHNlIGZvcihpIGluIGUpcj10KGVbaV0saSxuKSxudWxsIT1yJiYoc1tzLmxlbmd0aF09cik7cmV0dXJuIGYuYXBwbHkoW10scyl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihlLG4pe3ZhciByLGksbztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgbiYmKG89ZVtuXSxuPWUsZT1vKSxiLmlzRnVuY3Rpb24oZSk/KHI9aC5jYWxsKGFyZ3VtZW50cywyKSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobnx8dGhpcyxyLmNvbmNhdChoLmNhbGwoYXJndW1lbnRzKSkpfSxpLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Yi5ndWlkKyssaSk6dH0sYWNjZXNzOmZ1bmN0aW9uKGUsbixyLGksbyxhLHMpe3ZhciB1PTAsbD1lLmxlbmd0aCxjPW51bGw9PXI7aWYoXCJvYmplY3RcIj09PWIudHlwZShyKSl7bz0hMDtmb3IodSBpbiByKWIuYWNjZXNzKGUsbix1LHJbdV0sITAsYSxzKX1lbHNlIGlmKGkhPT10JiYobz0hMCxiLmlzRnVuY3Rpb24oaSl8fChzPSEwKSxjJiYocz8obi5jYWxsKGUsaSksbj1udWxsKTooYz1uLG49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBjLmNhbGwoYihlKSxuKX0pKSxuKSlmb3IoO2w+dTt1KyspbihlW3VdLHIscz9pOmkuY2FsbChlW3VdLHUsbihlW3VdLHIpKSk7cmV0dXJuIG8/ZTpjP24uY2FsbChlKTpsP24oZVswXSxyKTphfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KSxiLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7aWYoIW4paWYobj1iLkRlZmVycmVkKCksXCJjb21wbGV0ZVwiPT09by5yZWFkeVN0YXRlKXNldFRpbWVvdXQoYi5yZWFkeSk7ZWxzZSBpZihvLmFkZEV2ZW50TGlzdGVuZXIpby5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEgsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixILCExKTtlbHNle28uYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixIKSxlLmF0dGFjaEV2ZW50KFwib25sb2FkXCIsSCk7dmFyIHI9ITE7dHJ5e3I9bnVsbD09ZS5mcmFtZUVsZW1lbnQmJm8uZG9jdW1lbnRFbGVtZW50fWNhdGNoKGkpe31yJiZyLmRvU2Nyb2xsJiZmdW5jdGlvbiBhKCl7aWYoIWIuaXNSZWFkeSl7dHJ5e3IuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KGEsNTApfXEoKSxiLnJlYWR5KCl9fSgpfXJldHVybiBuLnByb21pc2UodCl9LGIuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtsW1wiW29iamVjdCBcIit0K1wiXVwiXT10LnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBNKGUpe3ZhciB0PWUubGVuZ3RoLG49Yi50eXBlKGUpO3JldHVybiBiLmlzV2luZG93KGUpPyExOjE9PT1lLm5vZGVUeXBlJiZ0PyEwOlwiYXJyYXlcIj09PW58fFwiZnVuY3Rpb25cIiE9PW4mJigwPT09dHx8XCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGUpfXI9YihvKTt2YXIgXz17fTtmdW5jdGlvbiBGKGUpe3ZhciB0PV9bZV09e307cmV0dXJuIGIuZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fWIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9XCJzdHJpbmdcIj09dHlwZW9mIGU/X1tlXXx8RihlKTpiLmV4dGVuZCh7fSxlKTt2YXIgbixyLGksbyxhLHMsdT1bXSxsPSFlLm9uY2UmJltdLGM9ZnVuY3Rpb24odCl7Zm9yKHI9ZS5tZW1vcnkmJnQsaT0hMCxhPXN8fDAscz0wLG89dS5sZW5ndGgsbj0hMDt1JiZvPmE7YSsrKWlmKHVbYV0uYXBwbHkodFswXSx0WzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXtyPSExO2JyZWFrfW49ITEsdSYmKGw/bC5sZW5ndGgmJmMobC5zaGlmdCgpKTpyP3U9W106cC5kaXNhYmxlKCkpfSxwPXthZGQ6ZnVuY3Rpb24oKXtpZih1KXt2YXIgdD11Lmxlbmd0aDsoZnVuY3Rpb24gaSh0KXtiLmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPWIudHlwZShuKTtcImZ1bmN0aW9uXCI9PT1yP2UudW5pcXVlJiZwLmhhcyhuKXx8dS5wdXNoKG4pOm4mJm4ubGVuZ3RoJiZcInN0cmluZ1wiIT09ciYmaShuKX0pfSkoYXJndW1lbnRzKSxuP289dS5sZW5ndGg6ciYmKHM9dCxjKHIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHUmJmIuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgcjt3aGlsZSgocj1iLmluQXJyYXkodCx1LHIpKT4tMSl1LnNwbGljZShyLDEpLG4mJihvPj1yJiZvLS0sYT49ciYmYS0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT9iLmluQXJyYXkoZSx1KT4tMTohKCF1fHwhdS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB1PVtdLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdT1sPXI9dCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiF1fSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGw9dCxyfHxwLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbH0sZmlyZVdpdGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHxbXSx0PVtlLHQuc2xpY2U/dC5zbGljZSgpOnRdLCF1fHxpJiYhbHx8KG4/bC5wdXNoKHQpOmModCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gcC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWl9fTtyZXR1cm4gcH0sYi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciB0PVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsYi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLGIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsYi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxuPVwicGVuZGluZ1wiLHI9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBpLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm4gYi5EZWZlcnJlZChmdW5jdGlvbihuKXtiLmVhY2godCxmdW5jdGlvbih0LG8pe3ZhciBhPW9bMF0scz1iLmlzRnVuY3Rpb24oZVt0XSkmJmVbdF07aVtvWzFdXShmdW5jdGlvbigpe3ZhciBlPXMmJnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJmIuaXNGdW5jdGlvbihlLnByb21pc2UpP2UucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6blthK1wiV2l0aFwiXSh0aGlzPT09cj9uLnByb21pc2UoKTp0aGlzLHM/W2VdOmFyZ3VtZW50cyl9KX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9iLmV4dGVuZChlLHIpOnJ9fSxpPXt9O3JldHVybiByLnBpcGU9ci50aGVuLGIuZWFjaCh0LGZ1bmN0aW9uKGUsbyl7dmFyIGE9b1syXSxzPW9bM107cltvWzFdXT1hLmFkZCxzJiZhLmFkZChmdW5jdGlvbigpe249c30sdFsxXmVdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKSxpW29bMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGlbb1swXStcIldpdGhcIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdK1wiV2l0aFwiXT1hLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWguY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT0xIT09cnx8ZSYmYi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLG89MT09PWk/ZTpiLkRlZmVycmVkKCksYT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9oLmNhbGwoYXJndW1lbnRzKTpyLG49PT1zP28ubm90aWZ5V2l0aCh0LG4pOi0taXx8by5yZXNvbHZlV2l0aCh0LG4pfX0scyx1LGw7aWYocj4xKWZvcihzPUFycmF5KHIpLHU9QXJyYXkociksbD1BcnJheShyKTtyPnQ7dCsrKW5bdF0mJmIuaXNGdW5jdGlvbihuW3RdLnByb21pc2UpP25bdF0ucHJvbWlzZSgpLmRvbmUoYSh0LGwsbikpLmZhaWwoby5yZWplY3QpLnByb2dyZXNzKGEodCx1LHMpKTotLWk7cmV0dXJuIGl8fG8ucmVzb2x2ZVdpdGgobCxuKSxvLnByb21pc2UoKX19KSxiLnN1cHBvcnQ9ZnVuY3Rpb24oKXt2YXIgdCxuLHIsYSxzLHUsbCxjLHAsZixkPW8uY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihkLnNldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiLFwidFwiKSxkLmlubmVySFRNTD1cIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiLG49ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikscj1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXSwhbnx8IXJ8fCFuLmxlbmd0aClyZXR1cm57fTtzPW8uY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxsPXMuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSxhPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXSxyLnN0eWxlLmNzc1RleHQ9XCJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNVwiLHQ9e2dldFNldEF0dHJpYnV0ZTpcInRcIiE9PWQuY2xhc3NOYW1lLGxlYWRpbmdXaGl0ZXNwYWNlOjM9PT1kLmZpcnN0Q2hpbGQubm9kZVR5cGUsdGJvZHk6IWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpLmxlbmd0aCxzdHlsZTovdG9wLy50ZXN0KHIuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikpLGhyZWZOb3JtYWxpemVkOlwiL2FcIj09PXIuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSxvcGFjaXR5Oi9eMC41Ly50ZXN0KHIuc3R5bGUub3BhY2l0eSksY3NzRmxvYXQ6ISFyLnN0eWxlLmNzc0Zsb2F0LGNoZWNrT246ISFhLnZhbHVlLG9wdFNlbGVjdGVkOmwuc2VsZWN0ZWQsZW5jdHlwZTohIW8uY3JlYXRlRWxlbWVudChcImZvcm1cIikuZW5jdHlwZSxodG1sNUNsb25lOlwiPDpuYXY+PC86bmF2PlwiIT09by5jcmVhdGVFbGVtZW50KFwibmF2XCIpLmNsb25lTm9kZSghMCkub3V0ZXJIVE1MLGJveE1vZGVsOlwiQ1NTMUNvbXBhdFwiPT09by5jb21wYXRNb2RlLGRlbGV0ZUV4cGFuZG86ITAsbm9DbG9uZUV2ZW50OiEwLGlubGluZUJsb2NrTmVlZHNMYXlvdXQ6ITEsc2hyaW5rV3JhcEJsb2NrczohMSxyZWxpYWJsZU1hcmdpblJpZ2h0OiEwLGJveFNpemluZ1JlbGlhYmxlOiEwLHBpeGVsUG9zaXRpb246ITF9LGEuY2hlY2tlZD0hMCx0Lm5vQ2xvbmVDaGVja2VkPWEuY2xvbmVOb2RlKCEwKS5jaGVja2VkLHMuZGlzYWJsZWQ9ITAsdC5vcHREaXNhYmxlZD0hbC5kaXNhYmxlZDt0cnl7ZGVsZXRlIGQudGVzdH1jYXRjaChoKXt0LmRlbGV0ZUV4cGFuZG89ITF9YT1vLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksdC5pbnB1dD1cIlwiPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxhLnZhbHVlPVwidFwiLGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksdC5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZSxhLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcInRcIiksYS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLHU9by5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdS5hcHBlbmRDaGlsZChhKSx0LmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLHQuY2hlY2tDbG9uZT11LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxkLmF0dGFjaEV2ZW50JiYoZC5hdHRhY2hFdmVudChcIm9uY2xpY2tcIixmdW5jdGlvbigpe3Qubm9DbG9uZUV2ZW50PSExfSksZC5jbG9uZU5vZGUoITApLmNsaWNrKCkpO2ZvcihmIGlue3N1Ym1pdDohMCxjaGFuZ2U6ITAsZm9jdXNpbjohMH0pZC5zZXRBdHRyaWJ1dGUoYz1cIm9uXCIrZixcInRcIiksdFtmK1wiQnViYmxlc1wiXT1jIGluIGV8fGQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITE7cmV0dXJuIGQuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGQuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLHQuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWQuc3R5bGUuYmFja2dyb3VuZENsaXAsYihmdW5jdGlvbigpe3ZhciBuLHIsYSxzPVwicGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiLHU9by5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07dSYmKG49by5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4XCIsdS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChkKSxkLmlubmVySFRNTD1cIjx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT5cIixhPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKSxhWzBdLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpub25lXCIscD0wPT09YVswXS5vZmZzZXRIZWlnaHQsYVswXS5zdHlsZS5kaXNwbGF5PVwiXCIsYVsxXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQucmVsaWFibGVIaWRkZW5PZmZzZXRzPXAmJjA9PT1hWzBdLm9mZnNldEhlaWdodCxkLmlubmVySFRNTD1cIlwiLGQuc3R5bGUuY3NzVGV4dD1cImJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElO1wiLHQuYm94U2l6aW5nPTQ9PT1kLm9mZnNldFdpZHRoLHQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQ9MSE9PXUub2Zmc2V0VG9wLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj1cIjElXCIhPT0oZS5nZXRDb21wdXRlZFN0eWxlKGQsbnVsbCl8fHt9KS50b3AsdC5ib3hTaXppbmdSZWxpYWJsZT1cIjRweFwiPT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShkLG51bGwpfHx7d2lkdGg6XCI0cHhcIn0pLndpZHRoLHI9ZC5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHIuc3R5bGUuY3NzVGV4dD1kLnN0eWxlLmNzc1RleHQ9cyxyLnN0eWxlLm1hcmdpblJpZ2h0PXIuc3R5bGUud2lkdGg9XCIwXCIsZC5zdHlsZS53aWR0aD1cIjFweFwiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiBkLnN0eWxlLnpvb20hPT1pJiYoZC5pbm5lckhUTUw9XCJcIixkLnN0eWxlLmNzc1RleHQ9cytcIndpZHRoOjFweDtwYWRkaW5nOjFweDtkaXNwbGF5OmlubGluZTt6b29tOjFcIix0LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9Mz09PWQub2Zmc2V0V2lkdGgsZC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixkLmlubmVySFRNTD1cIjxkaXY+PC9kaXY+XCIsZC5maXJzdENoaWxkLnN0eWxlLndpZHRoPVwiNXB4XCIsdC5zaHJpbmtXcmFwQmxvY2tzPTMhPT1kLm9mZnNldFdpZHRoLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmKHUuc3R5bGUuem9vbT0xKSksdS5yZW1vdmVDaGlsZChuKSxuPWQ9YT1yPW51bGwpfSksbj1zPXU9bD1yPWE9bnVsbCx0fSgpO3ZhciBPPS8oPzpcXHtbXFxzXFxTXSpcXH18XFxbW1xcc1xcU10qXFxdKSQvLEI9LyhbQS1aXSkvZztmdW5jdGlvbiBQKGUsbixyLGkpe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIG8sYSxzPWIuZXhwYW5kbyx1PVwic3RyaW5nXCI9PXR5cGVvZiBuLGw9ZS5ub2RlVHlwZSxwPWw/Yi5jYWNoZTplLGY9bD9lW3NdOmVbc10mJnM7aWYoZiYmcFtmXSYmKGl8fHBbZl0uZGF0YSl8fCF1fHxyIT09dClyZXR1cm4gZnx8KGw/ZVtzXT1mPWMucG9wKCl8fGIuZ3VpZCsrOmY9cykscFtmXXx8KHBbZl09e30sbHx8KHBbZl0udG9KU09OPWIubm9vcCkpLChcIm9iamVjdFwiPT10eXBlb2Ygbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgbikmJihpP3BbZl09Yi5leHRlbmQocFtmXSxuKTpwW2ZdLmRhdGE9Yi5leHRlbmQocFtmXS5kYXRhLG4pKSxvPXBbZl0saXx8KG8uZGF0YXx8KG8uZGF0YT17fSksbz1vLmRhdGEpLHIhPT10JiYob1tiLmNhbWVsQ2FzZShuKV09ciksdT8oYT1vW25dLG51bGw9PWEmJihhPW9bYi5jYW1lbENhc2UobildKSk6YT1vLGF9fWZ1bmN0aW9uIFIoZSx0LG4pe2lmKGIuYWNjZXB0RGF0YShlKSl7dmFyIHIsaSxvLGE9ZS5ub2RlVHlwZSxzPWE/Yi5jYWNoZTplLHU9YT9lW2IuZXhwYW5kb106Yi5leHBhbmRvO2lmKHNbdV0pe2lmKHQmJihvPW4/c1t1XTpzW3VdLmRhdGEpKXtiLmlzQXJyYXkodCk/dD10LmNvbmNhdChiLm1hcCh0LGIuY2FtZWxDYXNlKSk6dCBpbiBvP3Q9W3RdOih0PWIuY2FtZWxDYXNlKHQpLHQ9dCBpbiBvP1t0XTp0LnNwbGl0KFwiIFwiKSk7Zm9yKHI9MCxpPXQubGVuZ3RoO2k+cjtyKyspZGVsZXRlIG9bdFtyXV07aWYoIShuPyQ6Yi5pc0VtcHR5T2JqZWN0KShvKSlyZXR1cm59KG58fChkZWxldGUgc1t1XS5kYXRhLCQoc1t1XSkpKSYmKGE/Yi5jbGVhbkRhdGEoW2VdLCEwKTpiLnN1cHBvcnQuZGVsZXRlRXhwYW5kb3x8cyE9cy53aW5kb3c/ZGVsZXRlIHNbdV06c1t1XT1udWxsKX19fWIuZXh0ZW5kKHtjYWNoZTp7fSxleHBhbmRvOlwialF1ZXJ5XCIrKHArTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksbm9EYXRhOntlbWJlZDohMCxvYmplY3Q6XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIixhcHBsZXQ6ITB9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT9iLmNhY2hlW2VbYi5leHBhbmRvXV06ZVtiLmV4cGFuZG9dLCEhZSYmISQoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBQKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBSKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUChlLHQsbiwhMCl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSx0LCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlvbihlKXtpZihlLm5vZGVUeXBlJiYxIT09ZS5ub2RlVHlwZSYmOSE9PWUubm9kZVR5cGUpcmV0dXJuITE7dmFyIHQ9ZS5ub2RlTmFtZSYmYi5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4hdHx8dCE9PSEwJiZlLmdldEF0dHJpYnV0ZShcImNsYXNzaWRcIik9PT10fX0pLGIuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxvPXRoaXNbMF0sYT0wLHM9bnVsbDtpZihlPT09dCl7aWYodGhpcy5sZW5ndGgmJihzPWIuZGF0YShvKSwxPT09by5ub2RlVHlwZSYmIWIuX2RhdGEobyxcInBhcnNlZEF0dHJzXCIpKSl7Zm9yKHI9by5hdHRyaWJ1dGVzO3IubGVuZ3RoPmE7YSsrKWk9clthXS5uYW1lLGkuaW5kZXhPZihcImRhdGEtXCIpfHwoaT1iLmNhbWVsQ2FzZShpLnNsaWNlKDUpKSxXKG8saSxzW2ldKSk7Yi5fZGF0YShvLFwicGFyc2VkQXR0cnNcIiwhMCl9cmV0dXJuIHN9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Yi5kYXRhKHRoaXMsZSl9KTpiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKG4pe3JldHVybiBuPT09dD9vP1cobyxlLGIuZGF0YShvLGUpKTpudWxsOih0aGlzLmVhY2goZnVuY3Rpb24oKXtiLmRhdGEodGhpcyxlLG4pfSksdCl9LG51bGwsbixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IucmVtb3ZlRGF0YSh0aGlzLGUpfSl9fSk7ZnVuY3Rpb24gVyhlLG4scil7aWYocj09PXQmJjE9PT1lLm5vZGVUeXBlKXt2YXIgaT1cImRhdGEtXCIrbi5yZXBsYWNlKEIsXCItJDFcIikudG9Mb3dlckNhc2UoKTtpZihyPWUuZ2V0QXR0cmlidXRlKGkpLFwic3RyaW5nXCI9PXR5cGVvZiByKXt0cnl7cj1cInRydWVcIj09PXI/ITA6XCJmYWxzZVwiPT09cj8hMTpcIm51bGxcIj09PXI/bnVsbDorcitcIlwiPT09cj8rcjpPLnRlc3Qocik/Yi5wYXJzZUpTT04ocik6cn1jYXRjaChvKXt9Yi5kYXRhKGUsbixyKX1lbHNlIHI9dH1yZXR1cm4gcn1mdW5jdGlvbiAkKGUpe3ZhciB0O2Zvcih0IGluIGUpaWYoKFwiZGF0YVwiIT09dHx8IWIuaXNFbXB0eU9iamVjdChlW3RdKSkmJlwidG9KU09OXCIhPT10KXJldHVybiExO3JldHVybiEwfWIuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4scil7dmFyIGk7cmV0dXJuIGU/KG49KG58fFwiZnhcIikrXCJxdWV1ZVwiLGk9Yi5fZGF0YShlLG4pLHImJighaXx8Yi5pc0FycmF5KHIpP2k9Yi5fZGF0YShlLG4sYi5tYWtlQXJyYXkocikpOmkucHVzaChyKSksaXx8W10pOnR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fFwiZnhcIjt2YXIgbj1iLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPWIuX3F1ZXVlSG9va3MoZSx0KSxhPWZ1bmN0aW9uKCl7Yi5kZXF1ZXVlKGUsdCl9O1wiaW5wcm9ncmVzc1wiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksby5jdXI9aSxpJiYoXCJmeFwiPT09dCYmbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLGEsbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10K1wicXVldWVIb29rc1wiO3JldHVybiBiLl9kYXRhKGUsbil8fGIuX2RhdGEoZSxuLHtlbXB0eTpiLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe2IuX3JlbW92ZURhdGEoZSx0K1wicXVldWVcIiksYi5fcmVtb3ZlRGF0YShlLG4pfSl9KX19KSxiLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSxuKXt2YXIgcj0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlJiYobj1lLGU9XCJmeFwiLHItLSkscj5hcmd1bWVudHMubGVuZ3RoP2IucXVldWUodGhpc1swXSxlKTpuPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWIucXVldWUodGhpcyxlLG4pO2IuX3F1ZXVlSG9va3ModGhpcyxlKSxcImZ4XCI9PT1lJiZcImlucHJvZ3Jlc3NcIiE9PXRbMF0mJmIuZGVxdWV1ZSh0aGlzLGUpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZGVxdWV1ZSh0aGlzLGUpfSl9LGRlbGF5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9Yi5meD9iLmZ4LnNwZWVkc1tlXXx8ZTplLHQ9dHx8XCJmeFwiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLG4pe3ZhciByLGk9MSxvPWIuRGVmZXJyZWQoKSxhPXRoaXMscz10aGlzLmxlbmd0aCx1PWZ1bmN0aW9uKCl7LS1pfHxvLnJlc29sdmVXaXRoKGEsW2FdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGUmJihuPWUsZT10KSxlPWV8fFwiZnhcIjt3aGlsZShzLS0pcj1iLl9kYXRhKGFbc10sZStcInF1ZXVlSG9va3NcIiksciYmci5lbXB0eSYmKGkrKyxyLmVtcHR5LmFkZCh1KSk7cmV0dXJuIHUoKSxvLnByb21pc2Uobil9fSk7dmFyIEkseixYPS9bXFx0XFxyXFxuXS9nLFU9L1xcci9nLFY9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksWT0vXig/OmF8YXJlYSkkL2ksSj0vXig/OmNoZWNrZWR8c2VsZWN0ZWR8YXV0b2ZvY3VzfGF1dG9wbGF5fGFzeW5jfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkKSQvaSxHPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2ksUT1iLnN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLEs9Yi5zdXBwb3J0LmlucHV0O2IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtiLnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsYi5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiBlPWIucHJvcEZpeFtlXXx8ZSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tlXT10LGRlbGV0ZSB0aGlzW2VdfWNhdGNoKG4pe319KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhPTAscz10aGlzLmxlbmd0aCx1PVwic3RyaW5nXCI9PXR5cGVvZiBlJiZlO2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8XCJcIikubWF0Y2godyl8fFtdO3M+YTthKyspaWYobj10aGlzW2FdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oXCIgXCIrbi5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoWCxcIiBcIik6XCIgXCIpKXtvPTA7d2hpbGUoaT10W28rK10pMD5yLmluZGV4T2YoXCIgXCIraStcIiBcIikmJihyKz1pK1wiIFwiKTtuLmNsYXNzTmFtZT1iLnRyaW0ocil9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8sYT0wLHM9dGhpcy5sZW5ndGgsdT0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGUmJmU7aWYoYi5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHxcIlwiKS5tYXRjaCh3KXx8W107cz5hO2ErKylpZihuPXRoaXNbYV0scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPyhcIiBcIituLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShYLFwiIFwiKTpcIlwiKSl7bz0wO3doaWxlKGk9dFtvKytdKXdoaWxlKHIuaW5kZXhPZihcIiBcIitpK1wiIFwiKT49MClyPXIucmVwbGFjZShcIiBcIitpK1wiIFwiLFwiIFwiKTtuLmNsYXNzTmFtZT1lP2IudHJpbShyKTpcIlwifXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlLHI9XCJib29sZWFuXCI9PXR5cGVvZiB0O3JldHVybiBiLmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKG4pe2IodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbix0aGlzLmNsYXNzTmFtZSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1uKXt2YXIgbyxhPTAscz1iKHRoaXMpLHU9dCxsPWUubWF0Y2godyl8fFtdO3doaWxlKG89bFthKytdKXU9cj91OiFzLmhhc0NsYXNzKG8pLHNbdT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShvKX1lbHNlKG49PT1pfHxcImJvb2xlYW5cIj09PW4pJiYodGhpcy5jbGFzc05hbWUmJmIuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT9cIlwiOmIuX2RhdGEodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiIFwiK2UrXCIgXCIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoXCIgXCIrdGhpc1tuXS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoWCxcIiBcIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciBuLHIsaSxvPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9Yi5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgbyxhPWIodGhpcyk7MT09PXRoaXMubm9kZVR5cGUmJihvPWk/ZS5jYWxsKHRoaXMsbixhLnZhbCgpKTplLG51bGw9PW8/bz1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBvP28rPVwiXCI6Yi5pc0FycmF5KG8pJiYobz1iLm1hcChvLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP1wiXCI6ZStcIlwifSkpLHI9Yi52YWxIb29rc1t0aGlzLnR5cGVdfHxiLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sciYmXCJzZXRcImluIHImJnIuc2V0KHRoaXMsbyxcInZhbHVlXCIpIT09dHx8KHRoaXMudmFsdWU9bykpfSk7aWYobylyZXR1cm4gcj1iLnZhbEhvb2tzW28udHlwZV18fGIudmFsSG9va3Nbby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxyJiZcImdldFwiaW4gciYmKG49ci5nZXQobyxcInZhbHVlXCIpKSE9PXQ/bjoobj1vLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBuP24ucmVwbGFjZShVLFwiXCIpOm51bGw9PW4/XCJcIjpuKX19fSksYi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPVwic2VsZWN0LW9uZVwiPT09ZS50eXBlfHwwPmksYT1vP251bGw6W10scz1vP2krMTpyLmxlbmd0aCx1PTA+aT9zOm8/aTowO2Zvcig7cz51O3UrKylpZihuPXJbdV0sISghbi5zZWxlY3RlZCYmdSE9PWl8fChiLnN1cHBvcnQub3B0RGlzYWJsZWQ/bi5kaXNhYmxlZDpudWxsIT09bi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl8fG4ucGFyZW50Tm9kZS5kaXNhYmxlZCYmYi5ub2RlTmFtZShuLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKHQ9YihuKS52YWwoKSxvKXJldHVybiB0O2EucHVzaCh0KX1yZXR1cm4gYX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49Yi5tYWtlQXJyYXkodCk7cmV0dXJuIGIoZSkuZmluZChcIm9wdGlvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD1iLmluQXJyYXkoYih0aGlzKS52YWwoKSxuKT49MH0pLG4ubGVuZ3RofHwoZS5zZWxlY3RlZEluZGV4PS0xKSxufX19LGF0dHI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvLGEscyx1PWUubm9kZVR5cGU7aWYoZSYmMyE9PXUmJjghPT11JiYyIT09dSlyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09aT9iLnByb3AoZSxuLHIpOihhPTEhPT11fHwhYi5pc1hNTERvYyhlKSxhJiYobj1uLnRvTG93ZXJDYXNlKCksbz1iLmF0dHJIb29rc1tuXXx8KEoudGVzdChuKT96OkkpKSxyPT09dD9vJiZhJiZcImdldFwiaW4gbyYmbnVsbCE9PShzPW8uZ2V0KGUsbikpP3M6KHR5cGVvZiBlLmdldEF0dHJpYnV0ZSE9PWkmJihzPWUuZ2V0QXR0cmlidXRlKG4pKSxudWxsPT1zP3Q6cyk6bnVsbCE9PXI/byYmYSYmXCJzZXRcImluIG8mJihzPW8uc2V0KGUscixuKSkhPT10P3M6KGUuc2V0QXR0cmlidXRlKG4scitcIlwiKSxyKTooYi5yZW1vdmVBdHRyKGUsbiksdCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9Yi5wcm9wRml4W25dfHxuLEoudGVzdChuKT8hUSYmRy50ZXN0KG4pP2VbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiK24pXT1lW3JdPSExOmVbcl09ITE6Yi5hdHRyKGUsbixcIlwiKSxlLnJlbW92ZUF0dHJpYnV0ZShRP246cil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWIuc3VwcG9ydC5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT10JiZiLm5vZGVOYW1lKGUsXCJpbnB1dFwiKSl7dmFyIG49ZS52YWx1ZTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7dGFiaW5kZXg6XCJ0YWJJbmRleFwiLHJlYWRvbmx5OlwicmVhZE9ubHlcIixcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwiLG1heGxlbmd0aDpcIm1heExlbmd0aFwiLGNlbGxzcGFjaW5nOlwiY2VsbFNwYWNpbmdcIixjZWxscGFkZGluZzpcImNlbGxQYWRkaW5nXCIscm93c3BhbjpcInJvd1NwYW5cIixjb2xzcGFuOlwiY29sU3BhblwiLHVzZW1hcDpcInVzZU1hcFwiLGZyYW1lYm9yZGVyOlwiZnJhbWVCb3JkZXJcIixjb250ZW50ZWRpdGFibGU6XCJjb250ZW50RWRpdGFibGVcIn0scHJvcDpmdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBhPTEhPT1zfHwhYi5pc1hNTERvYyhlKSxhJiYobj1iLnByb3BGaXhbbl18fG4sbz1iLnByb3BIb29rc1tuXSksciE9PXQ/byYmXCJzZXRcImluIG8mJihpPW8uc2V0KGUscixuKSkhPT10P2k6ZVtuXT1yOm8mJlwiZ2V0XCJpbiBvJiZudWxsIT09KGk9by5nZXQoZSxuKSk/aTplW25dfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIG49ZS5nZXRBdHRyaWJ1dGVOb2RlKFwidGFiaW5kZXhcIik7cmV0dXJuIG4mJm4uc3BlY2lmaWVkP3BhcnNlSW50KG4udmFsdWUsMTApOlYudGVzdChlLm5vZGVOYW1lKXx8WS50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDp0fX19fSksej17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI9Yi5wcm9wKGUsbiksaT1cImJvb2xlYW5cIj09dHlwZW9mIHImJmUuZ2V0QXR0cmlidXRlKG4pLG89XCJib29sZWFuXCI9PXR5cGVvZiByP0smJlE/bnVsbCE9aTpHLnRlc3Qobik/ZVtiLmNhbWVsQ2FzZShcImRlZmF1bHQtXCIrbildOiEhaTplLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIG8mJm8udmFsdWUhPT0hMT9uLnRvTG93ZXJDYXNlKCk6dH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP2IucmVtb3ZlQXR0cihlLG4pOksmJlF8fCFHLnRlc3Qobik/ZS5zZXRBdHRyaWJ1dGUoIVEmJmIucHJvcEZpeFtuXXx8bixuKTplW2IuY2FtZWxDYXNlKFwiZGVmYXVsdC1cIituKV09ZVtuXT0hMCxufX0sSyYmUXx8KGIuYXR0ckhvb2tzLnZhbHVlPXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1lLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIGIubm9kZU5hbWUoZSxcImlucHV0XCIpP2UuZGVmYXVsdFZhbHVlOnImJnIuc3BlY2lmaWVkP3IudmFsdWU6dH0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gYi5ub2RlTmFtZShlLFwiaW5wdXRcIik/KGUuZGVmYXVsdFZhbHVlPW4sdCk6SSYmSS5zZXQoZSxuLHIpfX0pLFF8fChJPWIudmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oZSxuKXt2YXIgcj1lLmdldEF0dHJpYnV0ZU5vZGUobik7cmV0dXJuIHImJihcImlkXCI9PT1ufHxcIm5hbWVcIj09PW58fFwiY29vcmRzXCI9PT1uP1wiXCIhPT1yLnZhbHVlOnIuc3BlY2lmaWVkKT9yLnZhbHVlOnR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHIpO3JldHVybiBpfHxlLnNldEF0dHJpYnV0ZU5vZGUoaT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKHIpKSxpLnZhbHVlPW4rPVwiXCIsXCJ2YWx1ZVwiPT09cnx8bj09PWUuZ2V0QXR0cmlidXRlKHIpP246dH19LGIuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17Z2V0OkkuZ2V0LHNldDpmdW5jdGlvbihlLHQsbil7SS5zZXQoZSxcIlwiPT09dD8hMTp0LG4pfX0sYi5lYWNoKFtcIndpZHRoXCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oZSxuKXtiLmF0dHJIb29rc1tuXT1iLmV4dGVuZChiLmF0dHJIb29rc1tuXSx7c2V0OmZ1bmN0aW9uKGUscil7cmV0dXJuXCJcIj09PXI/KGUuc2V0QXR0cmlidXRlKG4sXCJhdXRvXCIpLHIpOnR9fSl9KSksYi5zdXBwb3J0LmhyZWZOb3JtYWxpemVkfHwoYi5lYWNoKFtcImhyZWZcIixcInNyY1wiLFwid2lkdGhcIixcImhlaWdodFwiXSxmdW5jdGlvbihlLG4pe2IuYXR0ckhvb2tzW25dPWIuZXh0ZW5kKGIuYXR0ckhvb2tzW25dLHtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHI9ZS5nZXRBdHRyaWJ1dGUobiwyKTtyZXR1cm4gbnVsbD09cj90OnJ9fSl9KSxiLmVhY2goW1wiaHJlZlwiLFwic3JjXCJdLGZ1bmN0aW9uKGUsdCl7Yi5wcm9wSG9va3NbdF09e2dldDpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUodCw0KX19fSkpLGIuc3VwcG9ydC5zdHlsZXx8KGIuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dHx8dH0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD10K1wiXCJ9fSksYi5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwoYi5wcm9wSG9va3Muc2VsZWN0ZWQ9Yi5leHRlbmQoYi5wcm9wSG9va3Muc2VsZWN0ZWQse2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSksYi5zdXBwb3J0LmVuY3R5cGV8fChiLnByb3BGaXguZW5jdHlwZT1cImVuY29kaW5nXCIpLGIuc3VwcG9ydC5jaGVja09ufHxiLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7Yi52YWxIb29rc1t0aGlzXT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6ZS52YWx1ZX19fSksYi5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe2IudmFsSG9va3NbdGhpc109Yi5leHRlbmQoYi52YWxIb29rc1t0aGlzXSx7c2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIGIuaXNBcnJheShuKT9lLmNoZWNrZWQ9Yi5pbkFycmF5KGIoZSkudmFsKCksbik+PTA6dH19KX0pO3ZhciBaPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxldD0vXmtleS8sdHQ9L14oPzptb3VzZXxjb250ZXh0bWVudSl8Y2xpY2svLG50PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxydD0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBpdCgpe3JldHVybiEwfWZ1bmN0aW9uIG90KCl7cmV0dXJuITF9Yi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLG4scixvLGEpe3ZhciBzLHUsbCxjLHAsZixkLGgsZyxtLHksdj1iLl9kYXRhKGUpO2lmKHYpe3IuaGFuZGxlciYmKGM9cixyPWMuaGFuZGxlcixhPWMuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD1iLmd1aWQrKyksKHU9di5ldmVudHMpfHwodT12LmV2ZW50cz17fSksKGY9di5oYW5kbGUpfHwoZj12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGI9PT1pfHxlJiZiLmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT90OmIuZXZlbnQuZGlzcGF0Y2guYXBwbHkoZi5lbGVtLGFyZ3VtZW50cyl9LGYuZWxlbT1lKSxuPShufHxcIlwiKS5tYXRjaCh3KXx8W1wiXCJdLGw9bi5sZW5ndGg7d2hpbGUobC0tKXM9cnQuZXhlYyhuW2xdKXx8W10sZz15PXNbMV0sbT0oc1syXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sZz0oYT9wLmRlbGVnYXRlVHlwZTpwLmJpbmRUeXBlKXx8ZyxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sZD1iLmV4dGVuZCh7dHlwZTpnLG9yaWdUeXBlOnksZGF0YTpvLGhhbmRsZXI6cixndWlkOnIuZ3VpZCxzZWxlY3RvcjphLG5lZWRzQ29udGV4dDphJiZiLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoYSksbmFtZXNwYWNlOm0uam9pbihcIi5cIil9LGMpLChoPXVbZ10pfHwoaD11W2ddPVtdLGguZGVsZWdhdGVDb3VudD0wLHAuc2V0dXAmJnAuc2V0dXAuY2FsbChlLG8sbSxmKSE9PSExfHwoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihnLGYsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoXCJvblwiK2csZikpKSxwLmFkZCYmKHAuYWRkLmNhbGwoZSxkKSxkLmhhbmRsZXIuZ3VpZHx8KGQuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLGE/aC5zcGxpY2UoaC5kZWxlZ2F0ZUNvdW50KyssMCxkKTpoLnB1c2goZCksYi5ldmVudC5nbG9iYWxbZ109ITA7ZT1udWxsfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLHAsZixkLGgsZyxtPWIuaGFzRGF0YShlKSYmYi5fZGF0YShlKTtpZihtJiYoYz1tLmV2ZW50cykpe3Q9KHR8fFwiXCIpLm1hdGNoKHcpfHxbXCJcIl0sbD10Lmxlbmd0aDt3aGlsZShsLS0paWYocz1ydC5leGVjKHRbbF0pfHxbXSxkPWc9c1sxXSxoPShzWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLGQpe3A9Yi5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxkLGY9Y1tkXXx8W10scz1zWzJdJiZSZWdFeHAoXCIoXnxcXFxcLilcIitoLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSx1PW89Zi5sZW5ndGg7d2hpbGUoby0tKWE9ZltvXSwhaSYmZyE9PWEub3JpZ1R5cGV8fG4mJm4uZ3VpZCE9PWEuZ3VpZHx8cyYmIXMudGVzdChhLm5hbWVzcGFjZSl8fHImJnIhPT1hLnNlbGVjdG9yJiYoXCIqKlwiIT09cnx8IWEuc2VsZWN0b3IpfHwoZi5zcGxpY2UobywxKSxhLnNlbGVjdG9yJiZmLmRlbGVnYXRlQ291bnQtLSxwLnJlbW92ZSYmcC5yZW1vdmUuY2FsbChlLGEpKTt1JiYhZi5sZW5ndGgmJihwLnRlYXJkb3duJiZwLnRlYXJkb3duLmNhbGwoZSxoLG0uaGFuZGxlKSE9PSExfHxiLnJlbW92ZUV2ZW50KGUsZCxtLmhhbmRsZSksZGVsZXRlIGNbZF0pfWVsc2UgZm9yKGQgaW4gYyliLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO2IuaXNFbXB0eU9iamVjdChjKSYmKGRlbGV0ZSBtLmhhbmRsZSxiLl9yZW1vdmVEYXRhKGUsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihuLHIsaSxhKXt2YXIgcyx1LGwsYyxwLGYsZCxoPVtpfHxvXSxnPXkuY2FsbChuLFwidHlwZVwiKT9uLnR5cGU6bixtPXkuY2FsbChuLFwibmFtZXNwYWNlXCIpP24ubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihsPWY9aT1pfHxvLDMhPT1pLm5vZGVUeXBlJiY4IT09aS5ub2RlVHlwZSYmIW50LnRlc3QoZytiLmV2ZW50LnRyaWdnZXJlZCkmJihnLmluZGV4T2YoXCIuXCIpPj0wJiYobT1nLnNwbGl0KFwiLlwiKSxnPW0uc2hpZnQoKSxtLnNvcnQoKSksdT0wPmcuaW5kZXhPZihcIjpcIikmJlwib25cIitnLG49bltiLmV4cGFuZG9dP246bmV3IGIuRXZlbnQoZyxcIm9iamVjdFwiPT10eXBlb2YgbiYmbiksbi5pc1RyaWdnZXI9ITAsbi5uYW1lc3BhY2U9bS5qb2luKFwiLlwiKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFjZT9SZWdFeHAoXCIoXnxcXFxcLilcIittLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLG4ucmVzdWx0PXQsbi50YXJnZXR8fChuLnRhcmdldD1pKSxyPW51bGw9PXI/W25dOmIubWFrZUFycmF5KHIsW25dKSxwPWIuZXZlbnQuc3BlY2lhbFtnXXx8e30sYXx8IXAudHJpZ2dlcnx8cC50cmlnZ2VyLmFwcGx5KGkscikhPT0hMSkpe2lmKCFhJiYhcC5ub0J1YmJsZSYmIWIuaXNXaW5kb3coaSkpe2ZvcihjPXAuZGVsZWdhdGVUeXBlfHxnLG50LnRlc3QoYytnKXx8KGw9bC5wYXJlbnROb2RlKTtsO2w9bC5wYXJlbnROb2RlKWgucHVzaChsKSxmPWw7Zj09PShpLm93bmVyRG9jdW1lbnR8fG8pJiZoLnB1c2goZi5kZWZhdWx0Vmlld3x8Zi5wYXJlbnRXaW5kb3d8fGUpfWQ9MDt3aGlsZSgobD1oW2QrK10pJiYhbi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKW4udHlwZT1kPjE/YzpwLmJpbmRUeXBlfHxnLHM9KGIuX2RhdGEobCxcImV2ZW50c1wiKXx8e30pW24udHlwZV0mJmIuX2RhdGEobCxcImhhbmRsZVwiKSxzJiZzLmFwcGx5KGwscikscz11JiZsW3VdLHMmJmIuYWNjZXB0RGF0YShsKSYmcy5hcHBseSYmcy5hcHBseShsLHIpPT09ITEmJm4ucHJldmVudERlZmF1bHQoKTtpZihuLnR5cGU9ZywhKGF8fG4uaXNEZWZhdWx0UHJldmVudGVkKCl8fHAuX2RlZmF1bHQmJnAuX2RlZmF1bHQuYXBwbHkoaS5vd25lckRvY3VtZW50LHIpIT09ITF8fFwiY2xpY2tcIj09PWcmJmIubm9kZU5hbWUoaSxcImFcIil8fCFiLmFjY2VwdERhdGEoaSl8fCF1fHwhaVtnXXx8Yi5pc1dpbmRvdyhpKSkpe2Y9aVt1XSxmJiYoaVt1XT1udWxsKSxiLmV2ZW50LnRyaWdnZXJlZD1nO3RyeXtpW2ddKCl9Y2F0Y2godil7fWIuZXZlbnQudHJpZ2dlcmVkPXQsZiYmKGlbdV09Zil9cmV0dXJuIG4ucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZT1iLmV2ZW50LmZpeChlKTt2YXIgbixyLGksbyxhLHM9W10sdT1oLmNhbGwoYXJndW1lbnRzKSxsPShiLl9kYXRhKHRoaXMsXCJldmVudHNcIil8fHt9KVtlLnR5cGVdfHxbXSxjPWIuZXZlbnQuc3BlY2lhbFtlLnR5cGVdfHx7fTtpZih1WzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURpc3BhdGNofHxjLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPWIuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsbCksbj0wO3doaWxlKChvPXNbbisrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1vLmVsZW0sYT0wO3doaWxlKChpPW8uaGFuZGxlcnNbYSsrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9yZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChpLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9aSxlLmRhdGE9aS5kYXRhLHI9KChiLmV2ZW50LnNwZWNpYWxbaS5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGkuaGFuZGxlcikuYXBwbHkoby5lbGVtLHUpLHIhPT10JiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLG4pe3ZhciByLGksbyxhLHM9W10sdT1uLmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYoIWUuYnV0dG9ufHxcImNsaWNrXCIhPT1lLnR5cGUpKWZvcig7bCE9dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKGwuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09ZS50eXBlKSl7Zm9yKG89W10sYT0wO3U+YTthKyspaT1uW2FdLHI9aS5zZWxlY3RvcitcIiBcIixvW3JdPT09dCYmKG9bcl09aS5uZWVkc0NvbnRleHQ/YihyLHRoaXMpLmluZGV4KGwpPj0wOmIuZmluZChyLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksb1tyXSYmby5wdXNoKGkpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIG4ubGVuZ3RoPnUmJnMucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOm4uc2xpY2UodSl9KSxzfSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVtiLmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scixpPWUudHlwZSxhPWUscz10aGlzLmZpeEhvb2tzW2ldO3N8fCh0aGlzLmZpeEhvb2tzW2ldPXM9dHQudGVzdChpKT90aGlzLm1vdXNlSG9va3M6ZXQudGVzdChpKT90aGlzLmtleUhvb2tzOnt9KSxyPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyBiLkV2ZW50KGEpLHQ9ci5sZW5ndGg7d2hpbGUodC0tKW49clt0XSxlW25dPWFbbl07cmV0dXJuIGUudGFyZ2V0fHwoZS50YXJnZXQ9YS5zcmNFbGVtZW50fHxvKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxlLm1ldGFLZXk9ISFlLm1ldGFLZXkscy5maWx0ZXI/cy5maWx0ZXIoZSxhKTplfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxhLHM9bi5idXR0b24sdT1uLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1lLnBhZ2VYJiZudWxsIT1uLmNsaWVudFgmJihpPWUudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fG8sYT1pLmRvY3VtZW50RWxlbWVudCxyPWkuYm9keSxlLnBhZ2VYPW4uY2xpZW50WCsoYSYmYS5zY3JvbGxMZWZ0fHxyJiZyLnNjcm9sbExlZnR8fDApLShhJiZhLmNsaWVudExlZnR8fHImJnIuY2xpZW50TGVmdHx8MCksZS5wYWdlWT1uLmNsaWVudFkrKGEmJmEuc2Nyb2xsVG9wfHxyJiZyLnNjcm9sbFRvcHx8MCktKGEmJmEuY2xpZW50VG9wfHxyJiZyLmNsaWVudFRvcHx8MCkpLCFlLnJlbGF0ZWRUYXJnZXQmJnUmJihlLnJlbGF0ZWRUYXJnZXQ9dT09PWUudGFyZ2V0P24udG9FbGVtZW50OnUpLGUud2hpY2h8fHM9PT10fHwoZS53aGljaD0xJnM/MToyJnM/Mzo0JnM/MjowKSxlfX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcyxcImlucHV0XCIpJiZcImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dH19LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PW8uYWN0aXZlRWxlbWVudCYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChlKXt9fSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PW8uYWN0aXZlRWxlbWVudCYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7ZS5yZXN1bHQhPT10JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1iLmV4dGVuZChuZXcgYi5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO3I/Yi5ldmVudC50cmlnZ2VyKGksbnVsbCx0KTpiLmV2ZW50LmRpc3BhdGNoLmNhbGwodCxpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSxiLnJlbW92ZUV2ZW50PW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVwib25cIit0O2UuZGV0YWNoRXZlbnQmJih0eXBlb2YgZVtyXT09PWkmJihlW3JdPW51bGwpLGUuZGV0YWNoRXZlbnQocixuKSl9LGIuRXZlbnQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGIuRXZlbnQ/KGUmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUucmV0dXJuVmFsdWU9PT0hMXx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP2l0Om90KTp0aGlzLnR5cGU9ZSxuJiZiLmV4dGVuZCh0aGlzLG4pLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxiLm5vdygpLHRoaXNbYi5leHBhbmRvXT0hMCx0KTpuZXcgYi5FdmVudChlLG4pfSxiLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOm90LGlzUHJvcGFnYXRpb25TdG9wcGVkOm90LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOm90LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWl0LGUmJihlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9aXQsZSYmKGUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpLGUuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1pdCx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sYi5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCJ9LGZ1bmN0aW9uKGUsdCl7Yi5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtcbnJldHVybighaXx8aSE9PXImJiFiLmNvbnRhaW5zKHIsaSkpJiYoZS50eXBlPW8ub3JpZ1R5cGUsbj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSxiLnN1cHBvcnQuc3VibWl0QnViYmxlc3x8KGIuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcyxcImZvcm1cIik/ITE6KGIuZXZlbnQuYWRkKHRoaXMsXCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXRcIixmdW5jdGlvbihlKXt2YXIgbj1lLnRhcmdldCxyPWIubm9kZU5hbWUobixcImlucHV0XCIpfHxiLm5vZGVOYW1lKG4sXCJidXR0b25cIik/bi5mb3JtOnQ7ciYmIWIuX2RhdGEocixcInN1Ym1pdEJ1YmJsZXNcIikmJihiLmV2ZW50LmFkZChyLFwic3VibWl0Ll9zdWJtaXRcIixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksYi5fZGF0YShyLFwic3VibWl0QnViYmxlc1wiLCEwKSl9KSx0KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UuX3N1Ym1pdF9idWJibGUmJihkZWxldGUgZS5fc3VibWl0X2J1YmJsZSx0aGlzLnBhcmVudE5vZGUmJiFlLmlzVHJpZ2dlciYmYi5ldmVudC5zaW11bGF0ZShcInN1Ym1pdFwiLHRoaXMucGFyZW50Tm9kZSxlLCEwKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIGIubm9kZU5hbWUodGhpcyxcImZvcm1cIik/ITE6KGIuZXZlbnQucmVtb3ZlKHRoaXMsXCIuX3N1Ym1pdFwiKSx0KX19KSxiLnN1cHBvcnQuY2hhbmdlQnViYmxlc3x8KGIuZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIFoudGVzdCh0aGlzLm5vZGVOYW1lKT8oKFwiY2hlY2tib3hcIj09PXRoaXMudHlwZXx8XCJyYWRpb1wiPT09dGhpcy50eXBlKSYmKGIuZXZlbnQuYWRkKHRoaXMsXCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlXCIsZnVuY3Rpb24oZSl7XCJjaGVja2VkXCI9PT1lLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdF9jaGFuZ2VkPSEwKX0pLGIuZXZlbnQuYWRkKHRoaXMsXCJjbGljay5fY2hhbmdlXCIsZnVuY3Rpb24oZSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhZS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLGIuZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIix0aGlzLGUsITApfSkpLCExKTooYi5ldmVudC5hZGQodGhpcyxcImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2VcIixmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtaLnRlc3QodC5ub2RlTmFtZSkmJiFiLl9kYXRhKHQsXCJjaGFuZ2VCdWJibGVzXCIpJiYoYi5ldmVudC5hZGQodCxcImNoYW5nZS5fY2hhbmdlXCIsZnVuY3Rpb24oZSl7IXRoaXMucGFyZW50Tm9kZXx8ZS5pc1NpbXVsYXRlZHx8ZS5pc1RyaWdnZXJ8fGIuZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIix0aGlzLnBhcmVudE5vZGUsZSwhMCl9KSxiLl9kYXRhKHQsXCJjaGFuZ2VCdWJibGVzXCIsITApKX0pLHQpfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG49ZS50YXJnZXQ7cmV0dXJuIHRoaXMhPT1ufHxlLmlzU2ltdWxhdGVkfHxlLmlzVHJpZ2dlcnx8XCJyYWRpb1wiIT09bi50eXBlJiZcImNoZWNrYm94XCIhPT1uLnR5cGU/ZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dH0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gYi5ldmVudC5yZW1vdmUodGhpcyxcIi5fY2hhbmdlXCIpLCFaLnRlc3QodGhpcy5ub2RlTmFtZSl9fSksYi5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHxiLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihlLHQpe3ZhciBuPTAscj1mdW5jdGlvbihlKXtiLmV2ZW50LnNpbXVsYXRlKHQsZS50YXJnZXQsYi5ldmVudC5maXgoZSksITApfTtiLmV2ZW50LnNwZWNpYWxbdF09e3NldHVwOmZ1bmN0aW9uKCl7MD09PW4rKyYmby5hZGRFdmVudExpc3RlbmVyKGUsciwhMCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7MD09PS0tbiYmby5yZW1vdmVFdmVudExpc3RlbmVyKGUsciwhMCl9fX0pLGIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLG4scixpLG8pe3ZhciBhLHM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe1wic3RyaW5nXCIhPXR5cGVvZiBuJiYocj1yfHxuLG49dCk7Zm9yKGEgaW4gZSl0aGlzLm9uKGEsbixyLGVbYV0sbyk7cmV0dXJuIHRoaXN9aWYobnVsbD09ciYmbnVsbD09aT8oaT1uLHI9bj10KTpudWxsPT1pJiYoXCJzdHJpbmdcIj09dHlwZW9mIG4/KGk9cixyPXQpOihpPXIscj1uLG49dCkpLGk9PT0hMSlpPW90O2Vsc2UgaWYoIWkpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1vJiYocz1pLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGIoKS5vZmYoZSkscy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZ3VpZD1zLmd1aWR8fChzLmd1aWQ9Yi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtiLmV2ZW50LmFkZCh0aGlzLGUsaSxyLG4pfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLG87aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIGk9ZS5oYW5kbGVPYmosYihlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoaS5uYW1lc3BhY2U/aS5vcmlnVHlwZStcIi5cIitpLm5hbWVzcGFjZTppLm9yaWdUeXBlLGkuc2VsZWN0b3IsaS5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKXtmb3IobyBpbiBlKXRoaXMub2ZmKG8sbixlW29dKTtyZXR1cm4gdGhpc31yZXR1cm4obj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKSYmKHI9bixuPXQpLHI9PT0hMSYmKHI9b3QpLHRoaXMuZWFjaChmdW5jdGlvbigpe2IuZXZlbnQucmVtb3ZlKHRoaXMsZSxyLG4pfSl9LGJpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsXCIqKlwiKTp0aGlzLm9mZih0LGV8fFwiKipcIixuKX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtiLmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpc1swXTtyZXR1cm4gcj9iLmV2ZW50LnRyaWdnZXIoZSxuLHIsITApOnR9fSksZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsLGMscCxmLGQsaCxnLG0seSx2LHg9XCJzaXp6bGVcIistbmV3IERhdGUsdz1lLmRvY3VtZW50LFQ9e30sTj0wLEM9MCxrPWl0KCksRT1pdCgpLFM9aXQoKSxBPXR5cGVvZiB0LGo9MTw8MzEsRD1bXSxMPUQucG9wLEg9RC5wdXNoLHE9RC5zbGljZSxNPUQuaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sXz1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsRj1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE89Ri5yZXBsYWNlKFwid1wiLFwidyNcIiksQj1cIihbKl4kfCF+XT89KVwiLFA9XCJcXFxcW1wiK18rXCIqKFwiK0YrXCIpXCIrXytcIiooPzpcIitCK18rXCIqKD86KFsnXFxcIl0pKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXSkqPylcXFxcM3woXCIrTytcIil8KXwpXCIrXytcIipcXFxcXVwiLFI9XCI6KFwiK0YrXCIpKD86XFxcXCgoKFsnXFxcIl0pKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXSkqPylcXFxcM3woKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrUC5yZXBsYWNlKDMsOCkrXCIpKil8LiopXFxcXCl8KVwiLFc9UmVnRXhwKFwiXlwiK18rXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK18rXCIrJFwiLFwiZ1wiKSwkPVJlZ0V4cChcIl5cIitfK1wiKixcIitfK1wiKlwiKSxJPVJlZ0V4cChcIl5cIitfK1wiKihbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmPit+XSlcIitfK1wiKlwiKSx6PVJlZ0V4cChSKSxYPVJlZ0V4cChcIl5cIitPK1wiJFwiKSxVPXtJRDpSZWdFeHAoXCJeIyhcIitGK1wiKVwiKSxDTEFTUzpSZWdFeHAoXCJeXFxcXC4oXCIrRitcIilcIiksTkFNRTpSZWdFeHAoXCJeXFxcXFtuYW1lPVsnXFxcIl0/KFwiK0YrXCIpWydcXFwiXT9cXFxcXVwiKSxUQUc6UmVnRXhwKFwiXihcIitGLnJlcGxhY2UoXCJ3XCIsXCJ3KlwiKStcIilcIiksQVRUUjpSZWdFeHAoXCJeXCIrUCksUFNFVURPOlJlZ0V4cChcIl5cIitSKSxDSElMRDpSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK18rXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitfK1wiKig/OihbKy1dfClcIitfK1wiKihcXFxcZCspfCkpXCIrXytcIipcXFxcKXwpXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpSZWdFeHAoXCJeXCIrXytcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrXytcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrXytcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sVj0vW1xceDIwXFx0XFxyXFxuXFxmXSpbK35dLyxZPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIGNvZGUvLEo9L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sRz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFE9L15oXFxkJC9pLEs9Lyd8XFxcXC9nLFo9L1xcPVtcXHgyMFxcdFxcclxcblxcZl0qKFteJ1wiXFxdXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXF0vZyxldD0vXFxcXChbXFxkYS1mQS1GXXsxLDZ9W1xceDIwXFx0XFxyXFxuXFxmXT98LikvZyx0dD1mdW5jdGlvbihlLHQpe3ZhciBuPVwiMHhcIit0LTY1NTM2O3JldHVybiBuIT09bj90OjA+bj9TdHJpbmcuZnJvbUNoYXJDb2RlKG4rNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bj4+MTAsNTYzMjB8MTAyMyZuKX07dHJ5e3EuY2FsbCh3LmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLDApWzBdLm5vZGVUeXBlfWNhdGNoKG50KXtxPWZ1bmN0aW9uKGUpe3ZhciB0LG49W107d2hpbGUodD10aGlzW2UrK10pbi5wdXNoKHQpO3JldHVybiBufX1mdW5jdGlvbiBydChlKXtyZXR1cm4gWS50ZXN0KGUrXCJcIil9ZnVuY3Rpb24gaXQoKXt2YXIgZSx0PVtdO3JldHVybiBlPWZ1bmN0aW9uKG4scil7cmV0dXJuIHQucHVzaChuKz1cIiBcIik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIGVbdC5zaGlmdCgpXSxlW25dPXJ9fWZ1bmN0aW9uIG90KGUpe3JldHVybiBlW3hdPSEwLGV9ZnVuY3Rpb24gYXQoZSl7dmFyIHQ9cC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4gZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3Q9bnVsbH19ZnVuY3Rpb24gc3QoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsLGYsZyxtLHY7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OncpIT09cCYmYyh0KSx0PXR8fHAsbj1ufHxbXSwhZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuIG47aWYoMSE9PShzPXQubm9kZVR5cGUpJiY5IT09cylyZXR1cm5bXTtpZighZCYmIXIpe2lmKGk9Si5leGVjKGUpKWlmKGE9aVsxXSl7aWYoOT09PXMpe2lmKG89dC5nZXRFbGVtZW50QnlJZChhKSwhb3x8IW8ucGFyZW50Tm9kZSlyZXR1cm4gbjtpZihvLmlkPT09YSlyZXR1cm4gbi5wdXNoKG8pLG59ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihvPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkmJnkodCxvKSYmby5pZD09PWEpcmV0dXJuIG4ucHVzaChvKSxufWVsc2V7aWYoaVsyXSlyZXR1cm4gSC5hcHBseShuLHEuY2FsbCh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpLDApKSxuO2lmKChhPWlbM10pJiZULmdldEJ5Q2xhc3NOYW1lJiZ0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixxLmNhbGwodC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpLDApKSxufWlmKFQucXNhJiYhaC50ZXN0KGUpKXtpZihmPSEwLGc9eCxtPXQsdj05PT09cyYmZSwxPT09cyYmXCJvYmplY3RcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bD1mdChlKSwoZj10LmdldEF0dHJpYnV0ZShcImlkXCIpKT9nPWYucmVwbGFjZShLLFwiXFxcXCQmXCIpOnQuc2V0QXR0cmlidXRlKFwiaWRcIixnKSxnPVwiW2lkPSdcIitnK1wiJ10gXCIsdT1sLmxlbmd0aDt3aGlsZSh1LS0pbFt1XT1nK2R0KGxbdV0pO209Vi50ZXN0KGUpJiZ0LnBhcmVudE5vZGV8fHQsdj1sLmpvaW4oXCIsXCIpfWlmKHYpdHJ5e3JldHVybiBILmFwcGx5KG4scS5jYWxsKG0ucXVlcnlTZWxlY3RvckFsbCh2KSwwKSksbn1jYXRjaChiKXt9ZmluYWxseXtmfHx0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIHd0KGUucmVwbGFjZShXLFwiJDFcIiksdCxuLHIpfWE9c3QuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiB0P1wiSFRNTFwiIT09dC5ub2RlTmFtZTohMX0sYz1zdC5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgbj1lP2Uub3duZXJEb2N1bWVudHx8ZTp3O3JldHVybiBuIT09cCYmOT09PW4ubm9kZVR5cGUmJm4uZG9jdW1lbnRFbGVtZW50PyhwPW4sZj1uLmRvY3VtZW50RWxlbWVudCxkPWEobiksVC50YWdOYW1lTm9Db21tZW50cz1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxULmF0dHJpYnV0ZXM9YXQoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9XCI8c2VsZWN0Pjwvc2VsZWN0PlwiO3ZhciB0PXR5cGVvZiBlLmxhc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKTtyZXR1cm5cImJvb2xlYW5cIiE9PXQmJlwic3RyaW5nXCIhPT10fSksVC5nZXRCeUNsYXNzTmFtZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9XCI8ZGl2IGNsYXNzPSdoaWRkZW4gZSc+PC9kaXY+PGRpdiBjbGFzcz0naGlkZGVuJz48L2Rpdj5cIixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVcIikubGVuZ3RoPyhlLmxhc3RDaGlsZC5jbGFzc05hbWU9XCJlXCIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVcIikubGVuZ3RoKTohMX0pLFQuZ2V0QnlOYW1lPWF0KGZ1bmN0aW9uKGUpe2UuaWQ9eCswLGUuaW5uZXJIVE1MPVwiPGEgbmFtZT0nXCIreCtcIic+PC9hPjxkaXYgbmFtZT0nXCIreCtcIic+PC9kaXY+XCIsZi5pbnNlcnRCZWZvcmUoZSxmLmZpcnN0Q2hpbGQpO3ZhciB0PW4uZ2V0RWxlbWVudHNCeU5hbWUmJm4uZ2V0RWxlbWVudHNCeU5hbWUoeCkubGVuZ3RoPT09MituLmdldEVsZW1lbnRzQnlOYW1lKHgrMCkubGVuZ3RoO3JldHVybiBULmdldElkTm90TmFtZT0hbi5nZXRFbGVtZW50QnlJZCh4KSxmLnJlbW92ZUNoaWxkKGUpLHR9KSxpLmF0dHJIYW5kbGU9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPVwiPGEgaHJlZj0nIyc+PC9hPlwiLGUuZmlyc3RDaGlsZCYmdHlwZW9mIGUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUhPT1BJiZcIiNcIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSk/e306e2hyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLDIpfSx0eXBlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZShcInR5cGVcIil9fSxULmdldElkTm90TmFtZT8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1BJiYhZCl7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbiYmbi5wYXJlbnROb2RlP1tuXTpbXX19LGkuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShldCx0dCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZShcImlkXCIpPT09dH19KTooaS5maW5kLklEPWZ1bmN0aW9uKGUsbil7aWYodHlwZW9mIG4uZ2V0RWxlbWVudEJ5SWQhPT1BJiYhZCl7dmFyIHI9bi5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gcj9yLmlkPT09ZXx8dHlwZW9mIHIuZ2V0QXR0cmlidXRlTm9kZSE9PUEmJnIuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpLnZhbHVlPT09ZT9bcl06dDpbXX19LGkuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShldCx0dCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUhPT1BJiZlLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gbiYmbi52YWx1ZT09PXR9fSksaS5maW5kLlRBRz1ULnRhZ05hbWVOb0NvbW1lbnRzP2Z1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09QT9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOnR9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKFwiKlwiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30saS5maW5kLk5BTUU9VC5nZXRCeU5hbWUmJmZ1bmN0aW9uKGUsbil7cmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlOYW1lIT09QT9uLmdldEVsZW1lbnRzQnlOYW1lKG5hbWUpOnR9LGkuZmluZC5DTEFTUz1ULmdldEJ5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLG4pe3JldHVybiB0eXBlb2Ygbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPT09QXx8ZD90Om4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKX0sZz1bXSxoPVtcIjpmb2N1c1wiXSwoVC5xc2E9cnQobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihhdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8aC5wdXNoKFwiXFxcXFtcIitfK1wiKig/OmNoZWNrZWR8ZGlzYWJsZWR8aXNtYXB8bXVsdGlwbGV8cmVhZG9ubHl8c2VsZWN0ZWR8dmFsdWUpXCIpLGUucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8aC5wdXNoKFwiOmNoZWNrZWRcIil9KSxhdChmdW5jdGlvbihlKXtlLmlubmVySFRNTD1cIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGk9JycvPlwiLGUucXVlcnlTZWxlY3RvckFsbChcIltpXj0nJ11cIikubGVuZ3RoJiZoLnB1c2goXCJbKl4kXT1cIitfK1wiKig/OlxcXCJcXFwifCcnKVwiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fGgucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksZS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxoLnB1c2goXCIsLio6XCIpfSkpLChULm1hdGNoZXNTZWxlY3Rvcj1ydChtPWYubWF0Y2hlc1NlbGVjdG9yfHxmLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zi53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGYub01hdGNoZXNTZWxlY3Rvcnx8Zi5tc01hdGNoZXNTZWxlY3RvcikpJiZhdChmdW5jdGlvbihlKXtULmRpc2Nvbm5lY3RlZE1hdGNoPW0uY2FsbChlLFwiZGl2XCIpLG0uY2FsbChlLFwiW3MhPScnXTp4XCIpLGcucHVzaChcIiE9XCIsUil9KSxoPVJlZ0V4cChoLmpvaW4oXCJ8XCIpKSxnPVJlZ0V4cChnLmpvaW4oXCJ8XCIpKSx5PXJ0KGYuY29udGFpbnMpfHxmLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEoIXJ8fDEhPT1yLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhyKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodCl3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sdj1mLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIGU9PT10Pyh1PSEwLDApOihyPXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCkpPzEmcnx8ZS5wYXJlbnROb2RlJiYxMT09PWUucGFyZW50Tm9kZS5ub2RlVHlwZT9lPT09bnx8eSh3LGUpPy0xOnQ9PT1ufHx5KHcsdCk/MTowOjQmcj8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSx0KXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUsYT10LnBhcmVudE5vZGUscz1bZV0sbD1bdF07aWYoZT09PXQpcmV0dXJuIHU9ITAsMDtpZighb3x8IWEpcmV0dXJuIGU9PT1uPy0xOnQ9PT1uPzE6bz8tMTphPzE6MDtpZihvPT09YSlyZXR1cm4gdXQoZSx0KTtyPWU7d2hpbGUocj1yLnBhcmVudE5vZGUpcy51bnNoaWZ0KHIpO3I9dDt3aGlsZShyPXIucGFyZW50Tm9kZSlsLnVuc2hpZnQocik7d2hpbGUoc1tpXT09PWxbaV0paSsrO3JldHVybiBpP3V0KHNbaV0sbFtpXSk6c1tpXT09PXc/LTE6bFtpXT09PXc/MTowfSx1PSExLFswLDBdLnNvcnQodiksVC5kZXRlY3REdXBsaWNhdGVzPXUscCk6cH0sc3QubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzdChlLG51bGwsbnVsbCx0KX0sc3QubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpLHQ9dC5yZXBsYWNlKFosXCI9JyQxJ11cIiksISghVC5tYXRjaGVzU2VsZWN0b3J8fGR8fGcmJmcudGVzdCh0KXx8aC50ZXN0KHQpKSl0cnl7dmFyIG49bS5jYWxsKGUsdCk7aWYobnx8VC5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBufWNhdGNoKHIpe31yZXR1cm4gc3QodCxwLG51bGwsW2VdKS5sZW5ndGg+MH0sc3QuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSkseShlLHQpfSxzdC5hdHRyPWZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuKGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpLGR8fCh0PXQudG9Mb3dlckNhc2UoKSksKG49aS5hdHRySGFuZGxlW3RdKT9uKGUpOmR8fFQuYXR0cmlidXRlcz9lLmdldEF0dHJpYnV0ZSh0KTooKG49ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKXx8ZS5nZXRBdHRyaWJ1dGUodCkpJiZlW3RdPT09ITA/dDpuJiZuLnNwZWNpZmllZD9uLnZhbHVlOm51bGx9LHN0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrZSl9LHN0LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2lmKHU9IVQuZGV0ZWN0RHVwbGljYXRlcyxlLnNvcnQodiksdSl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9O2Z1bmN0aW9uIHV0KGUsdCl7dmFyIG49dCYmZSxyPW4mJih+dC5zb3VyY2VJbmRleHx8aiktKH5lLnNvdXJjZUluZGV4fHxqKTtpZihyKXJldHVybiByO2lmKG4pd2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG49PT10KXJldHVybi0xO3JldHVybiBlPzE6LTF9ZnVuY3Rpb24gbHQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBjdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1ufHxcImJ1dHRvblwiPT09bikmJnQudHlwZT09PWV9fWZ1bmN0aW9uIHB0KGUpe3JldHVybiBvdChmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxvdChmdW5jdGlvbihuLHIpe3ZhciBpLG89ZShbXSxuLmxlbmd0aCx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSluW2k9b1thXV0mJihuW2ldPSEocltpXT1uW2ldKSl9KX0pfW89c3QuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPVwiXCIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZigxPT09aXx8OT09PWl8fDExPT09aSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPW8odCk7cmV0dXJuIG59LGk9c3Quc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86b3QsbWF0Y2g6VSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UoZXQsdHQpLGVbM109KGVbNF18fGVbNV18fFwiXCIpLnJlcGxhY2UoZXQsdHQpLFwifj1cIj09PWVbMl0mJihlWzNdPVwiIFwiK2VbM10rXCIgXCIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHN0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKFwiZXZlblwiPT09ZVszXXx8XCJvZGRcIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHxcIm9kZFwiPT09ZVszXSkpOmVbM10mJnN0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBVLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVs0XT9lWzJdPWVbNF06biYmei50ZXN0KG4pJiYodD1mdChuLCEwKSkmJih0PW4uaW5kZXhPZihcIilcIixuLmxlbmd0aC10KS1uLmxlbmd0aCkmJihlWzBdPWVbMF0uc2xpY2UoMCx0KSxlWzJdPW4uc2xpY2UoMCx0KSksZS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGUpe3JldHVyblwiKlwiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTooZT1lLnJlcGxhY2UoZXQsdHQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7cmV0dXJuIHQubm9kZU5hbWUmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWV9KX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9a1tlK1wiIFwiXTtyZXR1cm4gdHx8KHQ9UmVnRXhwKFwiKF58XCIrXytcIilcIitlK1wiKFwiK18rXCJ8JClcIikpJiZrKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09QSYmZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPXN0LmF0dHIocixlKTtyZXR1cm4gbnVsbD09aT9cIiE9XCI9PT10OnQ/KGkrPVwiXCIsXCI9XCI9PT10P2k9PT1uOlwiIT1cIj09PXQ/aSE9PW46XCJePVwiPT09dD9uJiYwPT09aS5pbmRleE9mKG4pOlwiKj1cIj09PXQ/biYmaS5pbmRleE9mKG4pPi0xOlwiJD1cIj09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjpcIn49XCI9PT10PyhcIiBcIitpK1wiIFwiKS5pbmRleE9mKG4pPi0xOlwifD1cIj09PXQ/aT09PW58fGkuc2xpY2UoMCxuLmxlbmd0aCsxKT09PW4rXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz1cIm50aFwiIT09ZS5zbGljZSgwLDMpLGE9XCJsYXN0XCIhPT1lLnNsaWNlKC00KSxzPVwib2YtdHlwZVwiPT09dDtyZXR1cm4gMT09PXImJjA9PT1pP2Z1bmN0aW9uKGUpe3JldHVybiEhZS5wYXJlbnROb2RlfTpmdW5jdGlvbih0LG4sdSl7dmFyIGwsYyxwLGYsZCxoLGc9byE9PWE/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIsbT10LnBhcmVudE5vZGUseT1zJiZ0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksdj0hdSYmIXM7aWYobSl7aWYobyl7d2hpbGUoZyl7cD10O3doaWxlKHA9cFtnXSlpZihzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpcmV0dXJuITE7aD1nPVwib25seVwiPT09ZSYmIWgmJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihoPVthP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0sYSYmdil7Yz1tW3hdfHwobVt4XT17fSksbD1jW2VdfHxbXSxkPWxbMF09PT1OJiZsWzFdLGY9bFswXT09PU4mJmxbMl0scD1kJiZtLmNoaWxkTm9kZXNbZF07d2hpbGUocD0rK2QmJnAmJnBbZ118fChmPWQ9MCl8fGgucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W04sZCxmXTticmVha319ZWxzZSBpZih2JiYobD0odFt4XXx8KHRbeF09e30pKVtlXSkmJmxbMF09PT1OKWY9bFsxXTtlbHNlIHdoaWxlKHA9KytkJiZwJiZwW2ddfHwoZj1kPTApfHxoLnBvcCgpKWlmKChzP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih2JiYoKHBbeF18fChwW3hdPXt9KSlbZV09W04sZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8c3QuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2UpO3JldHVybiByW3hdP3IodCk6ci5sZW5ndGg+MT8obj1bZSxlLFwiXCIsdF0saS5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/b3QoZnVuY3Rpb24oZSxuKXt2YXIgaSxvPXIoZSx0KSxhPW8ubGVuZ3RoO3doaWxlKGEtLSlpPU0uY2FsbChlLG9bYV0pLGVbaV09IShuW2ldPW9bYV0pfSk6ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSwwLG4pfSk6cn19LHBzZXVkb3M6e25vdDpvdChmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9cyhlLnJlcGxhY2UoVyxcIiQxXCIpKTtyZXR1cm4gclt4XT9vdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhPXIoZSxudWxsLGksW10pLHM9ZS5sZW5ndGg7d2hpbGUocy0tKShvPWFbc10pJiYoZVtzXT0hKHRbc109bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6b3QoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBzdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOm90KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fG8odCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzpvdChmdW5jdGlvbihlKXtyZXR1cm4gWC50ZXN0KGV8fFwiXCIpfHxzdC5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2UpLGU9ZS5yZXBsYWNlKGV0LHR0KS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3ZhciBuO2RvIGlmKG49ZD90LmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHx0LmdldEF0dHJpYnV0ZShcImxhbmdcIik6dC5sYW5nKXJldHVybiBuPW4udG9Mb3dlckNhc2UoKSxuPT09ZXx8MD09PW4uaW5kZXhPZihlK1wiLVwiKTt3aGlsZSgodD10LnBhcmVudE5vZGUpJiYxPT09dC5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWUubG9jYXRpb24mJmUubG9jYXRpb24uaGFzaDtyZXR1cm4gbiYmbi5zbGljZSgxKT09PXQuaWR9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1mfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXAuYWN0aXZlRWxlbWVudCYmKCFwLmhhc0ZvY3VzfHxwLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8fmUudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PXQmJiEhZS5jaGVja2VkfHxcIm9wdGlvblwiPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxlLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVOYW1lPlwiQFwifHwzPT09ZS5ub2RlVHlwZXx8ND09PWUubm9kZVR5cGUpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4haS5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEcudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT10JiZcImJ1dHRvblwiPT09ZS50eXBlfHxcImJ1dHRvblwiPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cImlucHV0XCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6cHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnB0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpwdChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOnB0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpwdChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpwdChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpwdChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX07Zm9yKG4gaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW25dPWx0KG4pO2ZvcihuIGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW25dPWN0KG4pO2Z1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scixvLGEscyx1LGwsYz1FW2UrXCIgXCJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO3M9ZSx1PVtdLGw9aS5wcmVGaWx0ZXI7d2hpbGUocyl7KCFufHwocj0kLmV4ZWMocykpKSYmKHImJihzPXMuc2xpY2UoclswXS5sZW5ndGgpfHxzKSx1LnB1c2gobz1bXSkpLG49ITEsKHI9SS5leGVjKHMpKSYmKG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZShXLFwiIFwiKX0pLHM9cy5zbGljZShuLmxlbmd0aCkpO2ZvcihhIGluIGkuZmlsdGVyKSEocj1VW2FdLmV4ZWMocykpfHxsW2FdJiYhKHI9bFthXShyKSl8fChuPXIuc2hpZnQoKSxvLnB1c2goe3ZhbHVlOm4sdHlwZTphLG1hdGNoZXM6cn0pLHM9cy5zbGljZShuLmxlbmd0aCkpO2lmKCFuKWJyZWFrfXJldHVybiB0P3MubGVuZ3RoOnM/c3QuZXJyb3IoZSk6RShlLHUpLnNsaWNlKDApfWZ1bmN0aW9uIGR0KGUpe3ZhciB0PTAsbj1lLmxlbmd0aCxyPVwiXCI7Zm9yKDtuPnQ7dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gaHQoZSx0LG4pe3ZhciBpPXQuZGlyLG89biYmXCJwYXJlbnROb2RlXCI9PT1pLGE9QysrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LG4scyl7dmFyIHUsbCxjLHA9TitcIiBcIithO2lmKHMpe3doaWxlKHQ9dFtpXSlpZigoMT09PXQubm9kZVR5cGV8fG8pJiZlKHQsbixzKSlyZXR1cm4hMH1lbHNlIHdoaWxlKHQ9dFtpXSlpZigxPT09dC5ub2RlVHlwZXx8bylpZihjPXRbeF18fCh0W3hdPXt9KSwobD1jW2ldKSYmbFswXT09PXApe2lmKCh1PWxbMV0pPT09ITB8fHU9PT1yKXJldHVybiB1PT09ITB9ZWxzZSBpZihsPWNbaV09W3BdLGxbMV09ZSh0LG4scyl8fHIsbFsxXT09PSEwKXJldHVybiEwfX1mdW5jdGlvbiBndChlKXtyZXR1cm4gZS5sZW5ndGg+MT9mdW5jdGlvbih0LG4scil7dmFyIGk9ZS5sZW5ndGg7d2hpbGUoaS0tKWlmKCFlW2ldKHQsbixyKSlyZXR1cm4hMTtyZXR1cm4hMH06ZVswXX1mdW5jdGlvbiBtdChlLHQsbixyLGkpe3ZhciBvLGE9W10scz0wLHU9ZS5sZW5ndGgsbD1udWxsIT10O2Zvcig7dT5zO3MrKykobz1lW3NdKSYmKCFufHxuKG8scixpKSkmJihhLnB1c2gobyksbCYmdC5wdXNoKHMpKTtyZXR1cm4gYX1mdW5jdGlvbiB5dChlLHQsbixyLGksbyl7cmV0dXJuIHImJiFyW3hdJiYocj15dChyKSksaSYmIWlbeF0mJihpPXl0KGksbykpLG90KGZ1bmN0aW9uKG8sYSxzLHUpe3ZhciBsLGMscCxmPVtdLGQ9W10saD1hLmxlbmd0aCxnPW98fHh0KHR8fFwiKlwiLHMubm9kZVR5cGU/W3NdOnMsW10pLG09IWV8fCFvJiZ0P2c6bXQoZyxmLGUscyx1KSx5PW4/aXx8KG8/ZTpofHxyKT9bXTphOm07aWYobiYmbihtLHkscyx1KSxyKXtsPW10KHksZCkscihsLFtdLHMsdSksYz1sLmxlbmd0aDt3aGlsZShjLS0pKHA9bFtjXSkmJih5W2RbY11dPSEobVtkW2NdXT1wKSl9aWYobyl7aWYoaXx8ZSl7aWYoaSl7bD1bXSxjPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmbC5wdXNoKG1bY109cCk7aShudWxsLHk9W10sbCx1KX1jPXkubGVuZ3RoO3doaWxlKGMtLSkocD15W2NdKSYmKGw9aT9NLmNhbGwobyxwKTpmW2NdKT4tMSYmKG9bbF09IShhW2xdPXApKX19ZWxzZSB5PW10KHk9PT1hP3kuc3BsaWNlKGgseS5sZW5ndGgpOnkpLGk/aShudWxsLGEseSx1KTpILmFwcGx5KGEseSl9KX1mdW5jdGlvbiB2dChlKXt2YXIgdCxuLHIsbz1lLmxlbmd0aCxhPWkucmVsYXRpdmVbZVswXS50eXBlXSxzPWF8fGkucmVsYXRpdmVbXCIgXCJdLHU9YT8xOjAsYz1odChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHMsITApLHA9aHQoZnVuY3Rpb24oZSl7cmV0dXJuIE0uY2FsbCh0LGUpPi0xfSxzLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIWEmJihyfHxuIT09bCl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO28+dTt1KyspaWYobj1pLnJlbGF0aXZlW2VbdV0udHlwZV0pZj1baHQoZ3QoZiksbildO2Vsc2V7aWYobj1pLmZpbHRlcltlW3VdLnR5cGVdLmFwcGx5KG51bGwsZVt1XS5tYXRjaGVzKSxuW3hdKXtmb3Iocj0rK3U7bz5yO3IrKylpZihpLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIHl0KHU+MSYmZ3QoZiksdT4xJiZkdChlLnNsaWNlKDAsdS0xKSkucmVwbGFjZShXLFwiJDFcIiksbixyPnUmJnZ0KGUuc2xpY2UodSxyKSksbz5yJiZ2dChlPWUuc2xpY2UocikpLG8+ciYmZHQoZSkpfWYucHVzaChuKX1yZXR1cm4gZ3QoZil9ZnVuY3Rpb24gYnQoZSx0KXt2YXIgbj0wLG89dC5sZW5ndGg+MCxhPWUubGVuZ3RoPjAscz1mdW5jdGlvbihzLHUsYyxmLGQpe3ZhciBoLGcsbSx5PVtdLHY9MCxiPVwiMFwiLHg9cyYmW10sdz1udWxsIT1kLFQ9bCxDPXN8fGEmJmkuZmluZC5UQUcoXCIqXCIsZCYmdS5wYXJlbnROb2RlfHx1KSxrPU4rPW51bGw9PVQ/MTpNYXRoLnJhbmRvbSgpfHwuMTtmb3IodyYmKGw9dSE9PXAmJnUscj1uKTtudWxsIT0oaD1DW2JdKTtiKyspe2lmKGEmJmgpe2c9MDt3aGlsZShtPWVbZysrXSlpZihtKGgsdSxjKSl7Zi5wdXNoKGgpO2JyZWFrfXcmJihOPWsscj0rK24pfW8mJigoaD0hbSYmaCkmJnYtLSxzJiZ4LnB1c2goaCkpfWlmKHYrPWIsbyYmYiE9PXYpe2c9MDt3aGlsZShtPXRbZysrXSltKHgseSx1LGMpO2lmKHMpe2lmKHY+MCl3aGlsZShiLS0peFtiXXx8eVtiXXx8KHlbYl09TC5jYWxsKGYpKTt5PW10KHkpfUguYXBwbHkoZix5KSx3JiYhcyYmeS5sZW5ndGg+MCYmdit0Lmxlbmd0aD4xJiZzdC51bmlxdWVTb3J0KGYpfXJldHVybiB3JiYoTj1rLGw9VCkseH07cmV0dXJuIG8/b3Qocyk6c31zPXN0LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10sbz1TW2UrXCIgXCJdO2lmKCFvKXt0fHwodD1mdChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz12dCh0W25dKSxvW3hdP3IucHVzaChvKTppLnB1c2gobyk7bz1TKGUsYnQoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIHh0KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKXN0KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiB3dChlLHQsbixyKXt2YXIgbyxhLHUsbCxjLHA9ZnQoZSk7aWYoIXImJjE9PT1wLmxlbmd0aCl7aWYoYT1wWzBdPXBbMF0uc2xpY2UoMCksYS5sZW5ndGg+MiYmXCJJRFwiPT09KHU9YVswXSkudHlwZSYmOT09PXQubm9kZVR5cGUmJiFkJiZpLnJlbGF0aXZlW2FbMV0udHlwZV0pe2lmKHQ9aS5maW5kLklEKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LHR0KSx0KVswXSwhdClyZXR1cm4gbjtlPWUuc2xpY2UoYS5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9bz1VLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6YS5sZW5ndGg7d2hpbGUoby0tKXtpZih1PWFbb10saS5yZWxhdGl2ZVtsPXUudHlwZV0pYnJlYWs7aWYoKGM9aS5maW5kW2xdKSYmKHI9Yyh1Lm1hdGNoZXNbMF0ucmVwbGFjZShldCx0dCksVi50ZXN0KGFbMF0udHlwZSkmJnQucGFyZW50Tm9kZXx8dCkpKXtpZihhLnNwbGljZShvLDEpLGU9ci5sZW5ndGgmJmR0KGEpLCFlKXJldHVybiBILmFwcGx5KG4scS5jYWxsKHIsMCkpLG47YnJlYWt9fX1yZXR1cm4gcyhlLHApKHIsdCxkLG4sVi50ZXN0KGUpKSxufWkucHNldWRvcy5udGg9aS5wc2V1ZG9zLmVxO2Z1bmN0aW9uIFR0KCl7fWkuZmlsdGVycz1UdC5wcm90b3R5cGU9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgVHQsYygpLHN0LmF0dHI9Yi5hdHRyLGIuZmluZD1zdCxiLmV4cHI9c3Quc2VsZWN0b3JzLGIuZXhwcltcIjpcIl09Yi5leHByLnBzZXVkb3MsYi51bmlxdWU9c3QudW5pcXVlU29ydCxiLnRleHQ9c3QuZ2V0VGV4dCxiLmlzWE1MRG9jPXN0LmlzWE1MLGIuY29udGFpbnM9c3QuY29udGFpbnN9KGUpO3ZhciBhdD0vVW50aWwkLyxzdD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyx1dD0vXi5bXjojXFxbXFwuLF0qJC8sbHQ9Yi5leHByLm1hdGNoLm5lZWRzQ29udGV4dCxjdD17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtiLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT10aGlzLmxlbmd0aDtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gcj10aGlzLHRoaXMucHVzaFN0YWNrKGIoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MDtpPnQ7dCsrKWlmKGIuY29udGFpbnMoclt0XSx0aGlzKSlyZXR1cm4hMH0pKTtmb3Iobj1bXSx0PTA7aT50O3QrKyliLmZpbmQoZSx0aGlzW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT9iLnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPSh0aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrXCIgXCI6XCJcIikrZSxufSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQsbj1iKGUsdGhpcykscj1uLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3I+dDt0KyspaWYoYi5jb250YWlucyh0aGlzLG5bdF0pKXJldHVybiEwfSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZnQodGhpcyxlLCExKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZnQodGhpcyxlLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlP2x0LnRlc3QoZSk/YihlLHRoaXMuY29udGV4dCkuaW5kZXgodGhpc1swXSk+PTA6Yi5maWx0ZXIoZSx0aGlzKS5sZW5ndGg+MDp0aGlzLmZpbHRlcihlKS5sZW5ndGg+MCl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9bHQudGVzdChlKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGU/YihlLHR8fHRoaXMuY29udGV4dCk6MDtmb3IoO2k+cjtyKyspe249dGhpc1tyXTt3aGlsZShuJiZuLm93bmVyRG9jdW1lbnQmJm4hPT10JiYxMSE9PW4ubm9kZVR5cGUpe2lmKGE/YS5pbmRleChuKT4tMTpiLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpe28ucHVzaChuKTticmVha31uPW4ucGFyZW50Tm9kZX19cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/Yi51bmlxdWUobyk6byl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlP1wic3RyaW5nXCI9PXR5cGVvZiBlP2IuaW5BcnJheSh0aGlzWzBdLGIoZSkpOmIuaW5BcnJheShlLmpxdWVyeT9lWzBdOmUsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9iKGUsdCk6Yi5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj1iLm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGIudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksYi5mbi5hbmRTZWxmPWIuZm4uYWRkQmFjaztmdW5jdGlvbiBwdChlLHQpe2RvIGU9ZVt0XTt3aGlsZShlJiYxIT09ZS5ub2RlVHlwZSk7cmV0dXJuIGV9Yi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBiLmRpcihlLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5kaXIoZSxcInBhcmVudE5vZGVcIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gcHQoZSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBwdChlLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBiLmRpcihlLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZGlyKGUsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGIuZGlyKGUsXCJuZXh0U2libGluZ1wiLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBiLmRpcihlLFwicHJldmlvdXNTaWJsaW5nXCIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBiLnNpYmxpbmcoKGUucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsZSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiBiLnNpYmxpbmcoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGIubm9kZU5hbWUoZSxcImlmcmFtZVwiKT9lLmNvbnRlbnREb2N1bWVudHx8ZS5jb250ZW50V2luZG93LmRvY3VtZW50OmIubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7Yi5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPWIubWFwKHRoaXMsdCxuKTtyZXR1cm4gYXQudGVzdChlKXx8KHI9biksciYmXCJzdHJpbmdcIj09dHlwZW9mIHImJihpPWIuZmlsdGVyKHIsaSkpLGk9dGhpcy5sZW5ndGg+MSYmIWN0W2VdP2IudW5pcXVlKGkpOmksdGhpcy5sZW5ndGg+MSYmc3QudGVzdChlKSYmKGk9aS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLGIuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuJiYoZT1cIjpub3QoXCIrZStcIilcIiksMT09PXQubGVuZ3RoP2IuZmluZC5tYXRjaGVzU2VsZWN0b3IodFswXSxlKT9bdFswXV06W106Yi5maW5kLm1hdGNoZXMoZSx0KX0sZGlyOmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1bXSxvPWVbbl07d2hpbGUobyYmOSE9PW8ubm9kZVR5cGUmJihyPT09dHx8MSE9PW8ubm9kZVR5cGV8fCFiKG8pLmlzKHIpKSkxPT09by5ub2RlVHlwZSYmaS5wdXNoKG8pLG89b1tuXTtyZXR1cm4gaX0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZnQoZSx0LG4pe2lmKHQ9dHx8MCxiLmlzRnVuY3Rpb24odCkpcmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUscil7dmFyIGk9ISF0LmNhbGwoZSxyLGUpO3JldHVybiBpPT09bn0pO2lmKHQubm9kZVR5cGUpcmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD09PW59KTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7dmFyIHI9Yi5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSk7aWYodXQudGVzdCh0KSlyZXR1cm4gYi5maWx0ZXIodCxyLCFuKTt0PWIuZmlsdGVyKHQscil9cmV0dXJuIGIuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBiLmluQXJyYXkoZSx0KT49MD09PW59KX1mdW5jdGlvbiBkdChlKXt2YXIgdD1odC5zcGxpdChcInxcIiksbj1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihuLmNyZWF0ZUVsZW1lbnQpd2hpbGUodC5sZW5ndGgpbi5jcmVhdGVFbGVtZW50KHQucG9wKCkpO3JldHVybiBufXZhciBodD1cImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW9cIixndD0vIGpRdWVyeVxcZCs9XCIoPzpudWxsfFxcZCspXCIvZyxtdD1SZWdFeHAoXCI8KD86XCIraHQrXCIpW1xcXFxzLz5dXCIsXCJpXCIpLHl0PS9eXFxzKy8sdnQ9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLGJ0PS88KFtcXHc6XSspLyx4dD0vPHRib2R5L2ksd3Q9Lzx8JiM/XFx3KzsvLFR0PS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksTnQ9L14oPzpjaGVja2JveHxyYWRpbykkL2ksQ3Q9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxrdD0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLEV0PS9edHJ1ZVxcLyguKikvLFN0PS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxBdD17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLGxlZ2VuZDpbMSxcIjxmaWVsZHNldD5cIixcIjwvZmllbGRzZXQ+XCJdLGFyZWE6WzEsXCI8bWFwPlwiLFwiPC9tYXA+XCJdLHBhcmFtOlsxLFwiPG9iamVjdD5cIixcIjwvb2JqZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpiLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZT9bMCxcIlwiLFwiXCJdOlsxLFwiWDxkaXY+XCIsXCI8L2Rpdj5cIl19LGp0PWR0KG8pLER0PWp0LmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudChcImRpdlwiKSk7QXQub3B0Z3JvdXA9QXQub3B0aW9uLEF0LnRib2R5PUF0LnRmb290PUF0LmNvbGdyb3VwPUF0LmNhcHRpb249QXQudGhlYWQsQXQudGg9QXQudGQsYi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P2IudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fG8pLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSx3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKGIuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2IodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD1iKGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiYxPT09ZS5maXJzdENoaWxkLm5vZGVUeXBlKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7Yih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9Yih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1iLmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXtiKHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Yi5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8Yih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMCxmdW5jdGlvbihlKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiZ0aGlzLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmdGhpcy5pbnNlcnRCZWZvcmUoZSx0aGlzLmZpcnN0Q2hpbGQpfSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7Zm9yKDtudWxsIT0obj10aGlzW3JdKTtyKyspKCFlfHxiLmZpbHRlcihlLFtuXSkubGVuZ3RoPjApJiYodHx8MSE9PW4ubm9kZVR5cGV8fGIuY2xlYW5EYXRhKE90KG4pKSxuLnBhcmVudE5vZGUmJih0JiZiLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmTXQoT3QobixcInNjcmlwdFwiKSksbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKXsxPT09ZS5ub2RlVHlwZSYmYi5jbGVhbkRhdGEoT3QoZSwhMSkpO3doaWxlKGUuZmlyc3RDaGlsZCllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7ZS5vcHRpb25zJiZiLm5vZGVOYW1lKGUsXCJzZWxlY3RcIikmJihlLm9wdGlvbnMubGVuZ3RoPTApfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGIuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIDE9PT1uLm5vZGVUeXBlP24uaW5uZXJIVE1MLnJlcGxhY2UoZ3QsXCJcIik6dDtpZighKFwic3RyaW5nXCIhPXR5cGVvZiBlfHxUdC50ZXN0KGUpfHwhYi5zdXBwb3J0Lmh0bWxTZXJpYWxpemUmJm10LnRlc3QoZSl8fCFiLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJnl0LnRlc3QoZSl8fEF0WyhidC5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pKXtlPWUucmVwbGFjZSh2dCxcIjwkMT48LyQyPlwiKTt0cnl7Zm9yKDtpPnI7cisrKW49dGhpc1tyXXx8e30sMT09PW4ubm9kZVR5cGUmJihiLmNsZWFuRGF0YShPdChuLCExKSksbi5pbm5lckhUTUw9ZSk7bj0wfWNhdGNoKG8pe319biYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihlKXt2YXIgdD1iLmlzRnVuY3Rpb24oZSk7cmV0dXJuIHR8fFwic3RyaW5nXCI9PXR5cGVvZiBlfHwoZT1iKGUpLm5vdCh0aGlzKS5kZXRhY2goKSksdGhpcy5kb21NYW5pcChbZV0sITAsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTtuJiYoYih0aGlzKS5yZW1vdmUoKSxuLmluc2VydEJlZm9yZShlLHQpKX0pfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLG4scil7ZT1mLmFwcGx5KFtdLGUpO3ZhciBpLG8sYSxzLHUsbCxjPTAscD10aGlzLmxlbmd0aCxkPXRoaXMsaD1wLTEsZz1lWzBdLG09Yi5pc0Z1bmN0aW9uKGcpO2lmKG18fCEoMT49cHx8XCJzdHJpbmdcIiE9dHlwZW9mIGd8fGIuc3VwcG9ydC5jaGVja0Nsb25lKSYmQ3QudGVzdChnKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBvPWQuZXEoaSk7bSYmKGVbMF09Zy5jYWxsKHRoaXMsaSxuP28uaHRtbCgpOnQpKSxvLmRvbU1hbmlwKGUsbixyKX0pO2lmKHAmJihsPWIuYnVpbGRGcmFnbWVudChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxpPWwuZmlyc3RDaGlsZCwxPT09bC5jaGlsZE5vZGVzLmxlbmd0aCYmKGw9aSksaSkpe2ZvcihuPW4mJmIubm9kZU5hbWUoaSxcInRyXCIpLHM9Yi5tYXAoT3QobCxcInNjcmlwdFwiKSxIdCksYT1zLmxlbmd0aDtwPmM7YysrKW89bCxjIT09aCYmKG89Yi5jbG9uZShvLCEwLCEwKSxhJiZiLm1lcmdlKHMsT3QobyxcInNjcmlwdFwiKSkpLHIuY2FsbChuJiZiLm5vZGVOYW1lKHRoaXNbY10sXCJ0YWJsZVwiKT9MdCh0aGlzW2NdLFwidGJvZHlcIik6dGhpc1tjXSxvLGMpO2lmKGEpZm9yKHU9c1tzLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LGIubWFwKHMscXQpLGM9MDthPmM7YysrKW89c1tjXSxrdC50ZXN0KG8udHlwZXx8XCJcIikmJiFiLl9kYXRhKG8sXCJnbG9iYWxFdmFsXCIpJiZiLmNvbnRhaW5zKHUsbykmJihvLnNyYz9iLmFqYXgoe3VybDpvLnNyYyx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pOmIuZ2xvYmFsRXZhbCgoby50ZXh0fHxvLnRleHRDb250ZW50fHxvLmlubmVySFRNTHx8XCJcIikucmVwbGFjZShTdCxcIlwiKSkpO2w9aT1udWxsfXJldHVybiB0aGlzfX0pO2Z1bmN0aW9uIEx0KGUsdCl7cmV0dXJuIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodClbMF18fGUuYXBwZW5kQ2hpbGQoZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCkpfWZ1bmN0aW9uIEh0KGUpe3ZhciB0PWUuZ2V0QXR0cmlidXRlTm9kZShcInR5cGVcIik7cmV0dXJuIGUudHlwZT0odCYmdC5zcGVjaWZpZWQpK1wiL1wiK2UudHlwZSxlfWZ1bmN0aW9uIHF0KGUpe3ZhciB0PUV0LmV4ZWMoZS50eXBlKTtyZXR1cm4gdD9lLnR5cGU9dFsxXTplLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksZX1mdW5jdGlvbiBNdChlLHQpe3ZhciBuLHI9MDtmb3IoO251bGwhPShuPWVbcl0pO3IrKyliLl9kYXRhKG4sXCJnbG9iYWxFdmFsXCIsIXR8fGIuX2RhdGEodFtyXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIF90KGUsdCl7aWYoMT09PXQubm9kZVR5cGUmJmIuaGFzRGF0YShlKSl7dmFyIG4scixpLG89Yi5fZGF0YShlKSxhPWIuX2RhdGEodCxvKSxzPW8uZXZlbnRzO2lmKHMpe2RlbGV0ZSBhLmhhbmRsZSxhLmV2ZW50cz17fTtmb3IobiBpbiBzKWZvcihyPTAsaT1zW25dLmxlbmd0aDtpPnI7cisrKWIuZXZlbnQuYWRkKHQsbixzW25dW3JdKX1hLmRhdGEmJihhLmRhdGE9Yi5leHRlbmQoe30sYS5kYXRhKSl9fWZ1bmN0aW9uIEZ0KGUsdCl7dmFyIG4scixpO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwhYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmdFtiLmV4cGFuZG9dKXtpPWIuX2RhdGEodCk7Zm9yKHIgaW4gaS5ldmVudHMpYi5yZW1vdmVFdmVudCh0LHIsaS5oYW5kbGUpO3QucmVtb3ZlQXR0cmlidXRlKGIuZXhwYW5kbyl9XCJzY3JpcHRcIj09PW4mJnQudGV4dCE9PWUudGV4dD8oSHQodCkudGV4dD1lLnRleHQscXQodCkpOlwib2JqZWN0XCI9PT1uPyh0LnBhcmVudE5vZGUmJih0Lm91dGVySFRNTD1lLm91dGVySFRNTCksYi5zdXBwb3J0Lmh0bWw1Q2xvbmUmJmUuaW5uZXJIVE1MJiYhYi50cmltKHQuaW5uZXJIVE1MKSYmKHQuaW5uZXJIVE1MPWUuaW5uZXJIVE1MKSk6XCJpbnB1dFwiPT09biYmTnQudGVzdChlLnR5cGUpPyh0LmRlZmF1bHRDaGVja2VkPXQuY2hlY2tlZD1lLmNoZWNrZWQsdC52YWx1ZSE9PWUudmFsdWUmJih0LnZhbHVlPWUudmFsdWUpKTpcIm9wdGlvblwiPT09bj90LmRlZmF1bHRTZWxlY3RlZD10LnNlbGVjdGVkPWUuZGVmYXVsdFNlbGVjdGVkOihcImlucHV0XCI9PT1ufHxcInRleHRhcmVhXCI9PT1uKSYmKHQuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlKX19Yi5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGUsdCl7Yi5mbltlXT1mdW5jdGlvbihlKXt2YXIgbixyPTAsaT1bXSxvPWIoZSksYT1vLmxlbmd0aC0xO2Zvcig7YT49cjtyKyspbj1yPT09YT90aGlzOnRoaXMuY2xvbmUoITApLGIob1tyXSlbdF0obiksZC5hcHBseShpLG4uZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhpKX19KTtmdW5jdGlvbiBPdChlLG4pe3ZhciByLG8sYT0wLHM9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1pP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUobnx8XCIqXCIpOnR5cGVvZiBlLnF1ZXJ5U2VsZWN0b3JBbGwhPT1pP2UucXVlcnlTZWxlY3RvckFsbChufHxcIipcIik6dDtpZighcylmb3Iocz1bXSxyPWUuY2hpbGROb2Rlc3x8ZTtudWxsIT0obz1yW2FdKTthKyspIW58fGIubm9kZU5hbWUobyxuKT9zLnB1c2gobyk6Yi5tZXJnZShzLE90KG8sbikpO3JldHVybiBuPT09dHx8biYmYi5ub2RlTmFtZShlLG4pP2IubWVyZ2UoW2VdLHMpOnN9ZnVuY3Rpb24gQnQoZSl7TnQudGVzdChlLnR5cGUpJiYoZS5kZWZhdWx0Q2hlY2tlZD1lLmNoZWNrZWQpfWIuZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGEscyx1PWIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpO2lmKGIuc3VwcG9ydC5odG1sNUNsb25lfHxiLmlzWE1MRG9jKGUpfHwhbXQudGVzdChcIjxcIitlLm5vZGVOYW1lK1wiPlwiKT9vPWUuY2xvbmVOb2RlKCEwKTooRHQuaW5uZXJIVE1MPWUub3V0ZXJIVE1MLER0LnJlbW92ZUNoaWxkKG89RHQuZmlyc3RDaGlsZCkpLCEoYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmYi5zdXBwb3J0Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxiLmlzWE1MRG9jKGUpKSlmb3Iocj1PdChvKSxzPU90KGUpLGE9MDtudWxsIT0oaT1zW2FdKTsrK2EpclthXSYmRnQoaSxyW2FdKTtpZih0KWlmKG4pZm9yKHM9c3x8T3QoZSkscj1yfHxPdChvKSxhPTA7bnVsbCE9KGk9c1thXSk7YSsrKV90KGksclthXSk7ZWxzZSBfdChlLG8pO3JldHVybiByPU90KG8sXCJzY3JpcHRcIiksci5sZW5ndGg+MCYmTXQociwhdSYmT3QoZSxcInNjcmlwdFwiKSkscj1zPWk9bnVsbCxvfSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLHA9ZS5sZW5ndGgsZj1kdCh0KSxkPVtdLGg9MDtmb3IoO3A+aDtoKyspaWYobz1lW2hdLG98fDA9PT1vKWlmKFwib2JqZWN0XCI9PT1iLnR5cGUobykpYi5tZXJnZShkLG8ubm9kZVR5cGU/W29dOm8pO2Vsc2UgaWYod3QudGVzdChvKSl7cz1zfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksdT0oYnQuZXhlYyhvKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksYz1BdFt1XXx8QXQuX2RlZmF1bHQscy5pbm5lckhUTUw9Y1sxXStvLnJlcGxhY2UodnQsXCI8JDE+PC8kMj5cIikrY1syXSxpPWNbMF07d2hpbGUoaS0tKXM9cy5sYXN0Q2hpbGQ7aWYoIWIuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmeXQudGVzdChvKSYmZC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUoeXQuZXhlYyhvKVswXSkpLCFiLnN1cHBvcnQudGJvZHkpe289XCJ0YWJsZVwiIT09dXx8eHQudGVzdChvKT9cIjx0YWJsZT5cIiE9PWNbMV18fHh0LnRlc3Qobyk/MDpzOnMuZmlyc3RDaGlsZCxpPW8mJm8uY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUoaS0tKWIubm9kZU5hbWUobD1vLmNoaWxkTm9kZXNbaV0sXCJ0Ym9keVwiKSYmIWwuY2hpbGROb2Rlcy5sZW5ndGgmJm8ucmVtb3ZlQ2hpbGQobClcbn1iLm1lcmdlKGQscy5jaGlsZE5vZGVzKSxzLnRleHRDb250ZW50PVwiXCI7d2hpbGUocy5maXJzdENoaWxkKXMucmVtb3ZlQ2hpbGQocy5maXJzdENoaWxkKTtzPWYubGFzdENoaWxkfWVsc2UgZC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUobykpO3MmJmYucmVtb3ZlQ2hpbGQocyksYi5zdXBwb3J0LmFwcGVuZENoZWNrZWR8fGIuZ3JlcChPdChkLFwiaW5wdXRcIiksQnQpLGg9MDt3aGlsZShvPWRbaCsrXSlpZigoIXJ8fC0xPT09Yi5pbkFycmF5KG8scikpJiYoYT1iLmNvbnRhaW5zKG8ub3duZXJEb2N1bWVudCxvKSxzPU90KGYuYXBwZW5kQ2hpbGQobyksXCJzY3JpcHRcIiksYSYmTXQocyksbikpe2k9MDt3aGlsZShvPXNbaSsrXSlrdC50ZXN0KG8udHlwZXx8XCJcIikmJm4ucHVzaChvKX1yZXR1cm4gcz1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhLHM9MCx1PWIuZXhwYW5kbyxsPWIuY2FjaGUscD1iLnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxmPWIuZXZlbnQuc3BlY2lhbDtmb3IoO251bGwhPShuPWVbc10pO3MrKylpZigodHx8Yi5hY2NlcHREYXRhKG4pKSYmKG89blt1XSxhPW8mJmxbb10pKXtpZihhLmV2ZW50cylmb3IociBpbiBhLmV2ZW50cylmW3JdP2IuZXZlbnQucmVtb3ZlKG4scik6Yi5yZW1vdmVFdmVudChuLHIsYS5oYW5kbGUpO2xbb10mJihkZWxldGUgbFtvXSxwP2RlbGV0ZSBuW3VdOnR5cGVvZiBuLnJlbW92ZUF0dHJpYnV0ZSE9PWk/bi5yZW1vdmVBdHRyaWJ1dGUodSk6blt1XT1udWxsLGMucHVzaChvKSl9fX0pO3ZhciBQdCxSdCxXdCwkdD0vYWxwaGFcXChbXildKlxcKS9pLEl0PS9vcGFjaXR5XFxzKj1cXHMqKFteKV0qKS8senQ9L14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvLFh0PS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxVdD0vXm1hcmdpbi8sVnQ9UmVnRXhwKFwiXihcIit4K1wiKSguKikkXCIsXCJpXCIpLFl0PVJlZ0V4cChcIl4oXCIreCtcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSxKdD1SZWdFeHAoXCJeKFsrLV0pPShcIit4K1wiKVwiLFwiaVwiKSxHdD17Qk9EWTpcImJsb2NrXCJ9LFF0PXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxLdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxadD1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sZW49W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIHRuKGUsdCl7aWYodCBpbiBlKXJldHVybiB0O3ZhciBuPXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSxyPXQsaT1lbi5sZW5ndGg7d2hpbGUoaS0tKWlmKHQ9ZW5baV0rbix0IGluIGUpcmV0dXJuIHQ7cmV0dXJuIHJ9ZnVuY3Rpb24gbm4oZSx0KXtyZXR1cm4gZT10fHxlLFwibm9uZVwiPT09Yi5jc3MoZSxcImRpc3BsYXlcIil8fCFiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKX1mdW5jdGlvbiBybihlLHQpe3ZhciBuLHIsaSxvPVtdLGE9MCxzPWUubGVuZ3RoO2Zvcig7cz5hO2ErKylyPWVbYV0sci5zdHlsZSYmKG9bYV09Yi5fZGF0YShyLFwib2xkZGlzcGxheVwiKSxuPXIuc3R5bGUuZGlzcGxheSx0PyhvW2FdfHxcIm5vbmVcIiE9PW58fChyLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PXIuc3R5bGUuZGlzcGxheSYmbm4ocikmJihvW2FdPWIuX2RhdGEocixcIm9sZGRpc3BsYXlcIix1bihyLm5vZGVOYW1lKSkpKTpvW2FdfHwoaT1ubihyKSwobiYmXCJub25lXCIhPT1ufHwhaSkmJmIuX2RhdGEocixcIm9sZGRpc3BsYXlcIixpP246Yi5jc3MocixcImRpc3BsYXlcIikpKSk7Zm9yKGE9MDtzPmE7YSsrKXI9ZVthXSxyLnN0eWxlJiYodCYmXCJub25lXCIhPT1yLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRpc3BsYXk9dD9vW2FdfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGV9Yi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLG4pe3JldHVybiBiLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsbixyKXt2YXIgaSxvLGE9e30scz0wO2lmKGIuaXNBcnJheShuKSl7Zm9yKG89UnQoZSksaT1uLmxlbmd0aDtpPnM7cysrKWFbbltzXV09Yi5jc3MoZSxuW3NdLCExLG8pO3JldHVybiBhfXJldHVybiByIT09dD9iLnN0eWxlKGUsbixyKTpiLmNzcyhlLG4pfSxlLG4sYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBybih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBybih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiYm9vbGVhblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7KHQ/ZTpubih0aGlzKSk/Yih0aGlzKS5zaG93KCk6Yih0aGlzKS5oaWRlKCl9KX19KSxiLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPVd0KGUsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1uP1wiMVwiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6Yi5zdXBwb3J0LmNzc0Zsb2F0P1wiY3NzRmxvYXRcIjpcInN0eWxlRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgbyxhLHMsdT1iLmNhbWVsQ2FzZShuKSxsPWUuc3R5bGU7aWYobj1iLmNzc1Byb3BzW3VdfHwoYi5jc3NQcm9wc1t1XT10bihsLHUpKSxzPWIuY3NzSG9va3Nbbl18fGIuY3NzSG9va3NbdV0scj09PXQpcmV0dXJuIHMmJlwiZ2V0XCJpbiBzJiYobz1zLmdldChlLCExLGkpKSE9PXQ/bzpsW25dO2lmKGE9dHlwZW9mIHIsXCJzdHJpbmdcIj09PWEmJihvPUp0LmV4ZWMocikpJiYocj0ob1sxXSsxKSpvWzJdK3BhcnNlRmxvYXQoYi5jc3MoZSxuKSksYT1cIm51bWJlclwiKSwhKG51bGw9PXJ8fFwibnVtYmVyXCI9PT1hJiZpc05hTihyKXx8KFwibnVtYmVyXCIhPT1hfHxiLmNzc051bWJlclt1XXx8KHIrPVwicHhcIiksYi5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PXJ8fDAhPT1uLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwobFtuXT1cImluaGVyaXRcIikscyYmXCJzZXRcImluIHMmJihyPXMuc2V0KGUscixpKSk9PT10KSkpdHJ5e2xbbl09cn1jYXRjaChjKXt9fX0sY3NzOmZ1bmN0aW9uKGUsbixyLGkpe3ZhciBvLGEscyx1PWIuY2FtZWxDYXNlKG4pO3JldHVybiBuPWIuY3NzUHJvcHNbdV18fChiLmNzc1Byb3BzW3VdPXRuKGUuc3R5bGUsdSkpLHM9Yi5jc3NIb29rc1tuXXx8Yi5jc3NIb29rc1t1XSxzJiZcImdldFwiaW4gcyYmKGE9cy5nZXQoZSwhMCxyKSksYT09PXQmJihhPVd0KGUsbixpKSksXCJub3JtYWxcIj09PWEmJm4gaW4gS3QmJihhPUt0W25dKSxcIlwiPT09cnx8cj8obz1wYXJzZUZsb2F0KGEpLHI9PT0hMHx8Yi5pc051bWVyaWMobyk/b3x8MDphKTphfSxzd2FwOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYT17fTtmb3IobyBpbiB0KWFbb109ZS5zdHlsZVtvXSxlLnN0eWxlW29dPXRbb107aT1uLmFwcGx5KGUscnx8W10pO2ZvcihvIGluIHQpZS5zdHlsZVtvXT1hW29dO3JldHVybiBpfX0pLGUuZ2V0Q29tcHV0ZWRTdHlsZT8oUnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfSxXdD1mdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9cnx8UnQoZSksdT1zP3MuZ2V0UHJvcGVydHlWYWx1ZShuKXx8c1tuXTp0LGw9ZS5zdHlsZTtyZXR1cm4gcyYmKFwiXCIhPT11fHxiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KHU9Yi5zdHlsZShlLG4pKSxZdC50ZXN0KHUpJiZVdC50ZXN0KG4pJiYoaT1sLndpZHRoLG89bC5taW5XaWR0aCxhPWwubWF4V2lkdGgsbC5taW5XaWR0aD1sLm1heFdpZHRoPWwud2lkdGg9dSx1PXMud2lkdGgsbC53aWR0aD1pLGwubWluV2lkdGg9byxsLm1heFdpZHRoPWEpKSx1fSk6by5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlJiYoUnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY3VycmVudFN0eWxlfSxXdD1mdW5jdGlvbihlLG4scil7dmFyIGksbyxhLHM9cnx8UnQoZSksdT1zP3Nbbl06dCxsPWUuc3R5bGU7cmV0dXJuIG51bGw9PXUmJmwmJmxbbl0mJih1PWxbbl0pLFl0LnRlc3QodSkmJiF6dC50ZXN0KG4pJiYoaT1sLmxlZnQsbz1lLnJ1bnRpbWVTdHlsZSxhPW8mJm8ubGVmdCxhJiYoby5sZWZ0PWUuY3VycmVudFN0eWxlLmxlZnQpLGwubGVmdD1cImZvbnRTaXplXCI9PT1uP1wiMWVtXCI6dSx1PWwucGl4ZWxMZWZ0K1wicHhcIixsLmxlZnQ9aSxhJiYoby5sZWZ0PWEpKSxcIlwiPT09dT9cImF1dG9cIjp1fSk7ZnVuY3Rpb24gb24oZSx0LG4pe3ZhciByPVZ0LmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzFdLShufHwwKSkrKHJbMl18fFwicHhcIik6dH1mdW5jdGlvbiBhbihlLHQsbixyLGkpe3ZhciBvPW49PT0ocj9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PXQ/MTowLGE9MDtmb3IoOzQ+bztvKz0yKVwibWFyZ2luXCI9PT1uJiYoYSs9Yi5jc3MoZSxuK1p0W29dLCEwLGkpKSxyPyhcImNvbnRlbnRcIj09PW4mJihhLT1iLmNzcyhlLFwicGFkZGluZ1wiK1p0W29dLCEwLGkpKSxcIm1hcmdpblwiIT09biYmKGEtPWIuY3NzKGUsXCJib3JkZXJcIitadFtvXStcIldpZHRoXCIsITAsaSkpKTooYSs9Yi5jc3MoZSxcInBhZGRpbmdcIitadFtvXSwhMCxpKSxcInBhZGRpbmdcIiE9PW4mJihhKz1iLmNzcyhlLFwiYm9yZGVyXCIrWnRbb10rXCJXaWR0aFwiLCEwLGkpKSk7cmV0dXJuIGF9ZnVuY3Rpb24gc24oZSx0LG4pe3ZhciByPSEwLGk9XCJ3aWR0aFwiPT09dD9lLm9mZnNldFdpZHRoOmUub2Zmc2V0SGVpZ2h0LG89UnQoZSksYT1iLnN1cHBvcnQuYm94U2l6aW5nJiZcImJvcmRlci1ib3hcIj09PWIuY3NzKGUsXCJib3hTaXppbmdcIiwhMSxvKTtpZigwPj1pfHxudWxsPT1pKXtpZihpPVd0KGUsdCxvKSwoMD5pfHxudWxsPT1pKSYmKGk9ZS5zdHlsZVt0XSksWXQudGVzdChpKSlyZXR1cm4gaTtyPWEmJihiLnN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGV8fGk9PT1lLnN0eWxlW3RdKSxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrYW4oZSx0LG58fChhP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLHIsbykrXCJweFwifWZ1bmN0aW9uIHVuKGUpe3ZhciB0PW8sbj1HdFtlXTtyZXR1cm4gbnx8KG49bG4oZSx0KSxcIm5vbmVcIiE9PW4mJm58fChQdD0oUHR8fGIoXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpLmNzcyhcImNzc1RleHRcIixcImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudFwiKSkuYXBwZW5kVG8odC5kb2N1bWVudEVsZW1lbnQpLHQ9KFB0WzBdLmNvbnRlbnRXaW5kb3d8fFB0WzBdLmNvbnRlbnREb2N1bWVudCkuZG9jdW1lbnQsdC53cml0ZShcIjwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PlwiKSx0LmNsb3NlKCksbj1sbihlLHQpLFB0LmRldGFjaCgpKSxHdFtlXT1uKSxufWZ1bmN0aW9uIGxuKGUsdCl7dmFyIG49Yih0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj1iLmNzcyhuWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gbi5yZW1vdmUoKSxyfWIuZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGUsbil7Yi5jc3NIb29rc1tuXT17Z2V0OmZ1bmN0aW9uKGUscixpKXtyZXR1cm4gcj8wPT09ZS5vZmZzZXRXaWR0aCYmWHQudGVzdChiLmNzcyhlLFwiZGlzcGxheVwiKSk/Yi5zd2FwKGUsUXQsZnVuY3Rpb24oKXtyZXR1cm4gc24oZSxuLGkpfSk6c24oZSxuLGkpOnR9LHNldDpmdW5jdGlvbihlLHQscil7dmFyIGk9ciYmUnQoZSk7cmV0dXJuIG9uKGUsdCxyP2FuKGUsbixyLGIuc3VwcG9ydC5ib3hTaXppbmcmJlwiYm9yZGVyLWJveFwiPT09Yi5jc3MoZSxcImJveFNpemluZ1wiLCExLGkpLGkpOjApfX19KSxiLnN1cHBvcnQub3BhY2l0eXx8KGIuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEl0LnRlc3QoKHQmJmUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLmZpbHRlcjplLnN0eWxlLmZpbHRlcil8fFwiXCIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrXCJcIjp0P1wiMVwiOlwiXCJ9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuPWUuc3R5bGUscj1lLmN1cnJlbnRTdHlsZSxpPWIuaXNOdW1lcmljKHQpP1wiYWxwaGEob3BhY2l0eT1cIisxMDAqdCtcIilcIjpcIlwiLG89ciYmci5maWx0ZXJ8fG4uZmlsdGVyfHxcIlwiO24uem9vbT0xLCh0Pj0xfHxcIlwiPT09dCkmJlwiXCI9PT1iLnRyaW0oby5yZXBsYWNlKCR0LFwiXCIpKSYmbi5yZW1vdmVBdHRyaWJ1dGUmJihuLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKSxcIlwiPT09dHx8ciYmIXIuZmlsdGVyKXx8KG4uZmlsdGVyPSR0LnRlc3Qobyk/by5yZXBsYWNlKCR0LGkpOm8rXCIgXCIraSl9fSksYihmdW5jdGlvbigpe2Iuc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0fHwoYi5jc3NIb29rcy5tYXJnaW5SaWdodD17Z2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/Yi5zd2FwKGUse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sV3QsW2UsXCJtYXJnaW5SaWdodFwiXSk6dH19KSwhYi5zdXBwb3J0LnBpeGVsUG9zaXRpb24mJmIuZm4ucG9zaXRpb24mJmIuZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oZSxuKXtiLmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4gcj8ocj1XdChlLG4pLFl0LnRlc3Qocik/YihlKS5wb3NpdGlvbigpW25dK1wicHhcIjpyKTp0fX19KX0pLGIuZXhwciYmYi5leHByLmZpbHRlcnMmJihiLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIDA+PWUub2Zmc2V0V2lkdGgmJjA+PWUub2Zmc2V0SGVpZ2h0fHwhYi5zdXBwb3J0LnJlbGlhYmxlSGlkZGVuT2Zmc2V0cyYmXCJub25lXCI9PT0oZS5zdHlsZSYmZS5zdHlsZS5kaXNwbGF5fHxiLmNzcyhlLFwiZGlzcGxheVwiKSl9LGIuZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIWIuZXhwci5maWx0ZXJzLmhpZGRlbihlKX0pLGIuZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGUsdCl7Yi5jc3NIb29rc1tlK3RdPXtleHBhbmQ6ZnVuY3Rpb24obil7dmFyIHI9MCxpPXt9LG89XCJzdHJpbmdcIj09dHlwZW9mIG4/bi5zcGxpdChcIiBcIik6W25dO2Zvcig7ND5yO3IrKylpW2UrWnRbcl0rdF09b1tyXXx8b1tyLTJdfHxvWzBdO3JldHVybiBpfX0sVXQudGVzdChlKXx8KGIuY3NzSG9va3NbZSt0XS5zZXQ9b24pfSk7dmFyIGNuPS8lMjAvZyxwbj0vXFxbXFxdJC8sZm49L1xccj9cXG4vZyxkbj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksaG49L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2IuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gYi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPWIucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGU/Yi5tYWtlQXJyYXkoZSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhYih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmaG4udGVzdCh0aGlzLm5vZGVOYW1lKSYmIWRuLnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFOdC50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPWIodGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpiLmlzQXJyYXkobik/Yi5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKGZuLFwiXFxyXFxuXCIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoZm4sXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSksYi5wYXJhbT1mdW5jdGlvbihlLG4pe3ZhciByLGk9W10sbz1mdW5jdGlvbihlLHQpe3Q9Yi5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10P1wiXCI6dCxpW2kubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfTtpZihuPT09dCYmKG49Yi5hamF4U2V0dGluZ3MmJmIuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxiLmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhYi5pc1BsYWluT2JqZWN0KGUpKWIuZWFjaChlLGZ1bmN0aW9uKCl7byh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihyIGluIGUpZ24ocixlW3JdLG4sbyk7cmV0dXJuIGkuam9pbihcIiZcIikucmVwbGFjZShjbixcIitcIil9O2Z1bmN0aW9uIGduKGUsdCxuLHIpe3ZhciBpO2lmKGIuaXNBcnJheSh0KSliLmVhY2godCxmdW5jdGlvbih0LGkpe258fHBuLnRlc3QoZSk/cihlLGkpOmduKGUrXCJbXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBpP3Q6XCJcIikrXCJdXCIsaSxuLHIpfSk7ZWxzZSBpZihufHxcIm9iamVjdFwiIT09Yi50eXBlKHQpKXIoZSx0KTtlbHNlIGZvcihpIGluIHQpZ24oZStcIltcIitpK1wiXVwiLHRbaV0sbixyKX1iLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7Yi5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSksYi5mbi5ob3Zlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX07dmFyIG1uLHluLHZuPWIubm93KCksYm49L1xcPy8seG49LyMuKiQvLHduPS8oWz8mXSlfPVteJl0qLyxUbj0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKilcXHI/JC9nbSxObj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxDbj0vXig/OkdFVHxIRUFEKSQvLGtuPS9eXFwvXFwvLyxFbj0vXihbXFx3ListXSs6KSg/OlxcL1xcLyhbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxTbj1iLmZuLmxvYWQsQW49e30sam49e30sRG49XCIqL1wiLmNvbmNhdChcIipcIik7dHJ5e3luPWEuaHJlZn1jYXRjaChMbil7eW49by5jcmVhdGVFbGVtZW50KFwiYVwiKSx5bi5ocmVmPVwiXCIseW49eW4uaHJlZn1tbj1Fbi5leGVjKHluLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBIbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtcInN0cmluZ1wiIT10eXBlb2YgdCYmKG49dCx0PVwiKlwiKTt2YXIgcixpPTAsbz10LnRvTG93ZXJDYXNlKCkubWF0Y2godyl8fFtdO2lmKGIuaXNGdW5jdGlvbihuKSl3aGlsZShyPW9baSsrXSlcIitcIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8XCIqXCIsKGVbcl09ZVtyXXx8W10pLnVuc2hpZnQobikpOihlW3JdPWVbcl18fFtdKS5wdXNoKG4pfX1mdW5jdGlvbiBxbihlLG4scixpKXt2YXIgbz17fSxhPWU9PT1qbjtmdW5jdGlvbiBzKHUpe3ZhciBsO3JldHVybiBvW3VdPSEwLGIuZWFjaChlW3VdfHxbXSxmdW5jdGlvbihlLHUpe3ZhciBjPXUobixyLGkpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBjfHxhfHxvW2NdP2E/IShsPWMpOnQ6KG4uZGF0YVR5cGVzLnVuc2hpZnQoYykscyhjKSwhMSl9KSxsfXJldHVybiBzKG4uZGF0YVR5cGVzWzBdKXx8IW9bXCIqXCJdJiZzKFwiKlwiKX1mdW5jdGlvbiBNbihlLG4pe3ZhciByLGksbz1iLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGkgaW4gbiluW2ldIT09dCYmKChvW2ldP2U6cnx8KHI9e30pKVtpXT1uW2ldKTtyZXR1cm4gciYmYi5leHRlbmQoITAsZSxyKSxlfWIuZm4ubG9hZD1mdW5jdGlvbihlLG4scil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUmJlNuKXJldHVybiBTbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGksbyxhLHM9dGhpcyx1PWUuaW5kZXhPZihcIiBcIik7cmV0dXJuIHU+PTAmJihpPWUuc2xpY2UodSxlLmxlbmd0aCksZT1lLnNsaWNlKDAsdSkpLGIuaXNGdW5jdGlvbihuKT8ocj1uLG49dCk6biYmXCJvYmplY3RcIj09dHlwZW9mIG4mJihhPVwiUE9TVFwiKSxzLmxlbmd0aD4wJiZiLmFqYXgoe3VybDplLHR5cGU6YSxkYXRhVHlwZTpcImh0bWxcIixkYXRhOm59KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChpP2IoXCI8ZGl2PlwiKS5hcHBlbmQoYi5wYXJzZUhUTUwoZSkpLmZpbmQoaSk6ZSl9KS5jb21wbGV0ZShyJiZmdW5jdGlvbihlLHQpe3MuZWFjaChyLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX0pLHRoaXN9LGIuZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGUsdCl7Yi5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLGIuZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oZSxuKXtiW25dPWZ1bmN0aW9uKGUscixpLG8pe3JldHVybiBiLmlzRnVuY3Rpb24ocikmJihvPW98fGksaT1yLHI9dCksYi5hamF4KHt1cmw6ZSx0eXBlOm4sZGF0YVR5cGU6byxkYXRhOnIsc3VjY2VzczppfSl9fSksYi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnluLHR5cGU6XCJHRVRcIixpc0xvY2FsOk5uLnRlc3QobW5bMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOkRuLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIn0sY29udmVydGVyczp7XCIqIHRleHRcIjplLlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6Yi5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOmIucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P01uKE1uKGUsYi5hamF4U2V0dGluZ3MpLHQpOk1uKGIuYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOkhuKEFuKSxhamF4VHJhbnNwb3J0OkhuKGpuKSxhamF4OmZ1bmN0aW9uKGUsbil7XCJvYmplY3RcIj09dHlwZW9mIGUmJihuPWUsZT10KSxuPW58fHt9O3ZhciByLGksbyxhLHMsdSxsLGMscD1iLmFqYXhTZXR1cCh7fSxuKSxmPXAuY29udGV4dHx8cCxkPXAuY29udGV4dCYmKGYubm9kZVR5cGV8fGYuanF1ZXJ5KT9iKGYpOmIuZXZlbnQsaD1iLkRlZmVycmVkKCksZz1iLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLG09cC5zdGF0dXNDb2RlfHx7fSx5PXt9LHY9e30seD0wLFQ9XCJjYW5jZWxlZFwiLE49e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZigyPT09eCl7aWYoIWMpe2M9e307d2hpbGUodD1Ubi5leGVjKGEpKWNbdFsxXS50b0xvd2VyQ2FzZSgpXT10WzJdfXQ9Y1tlLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT10P251bGw6dH0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT14P2E6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPWUudG9Mb3dlckNhc2UoKTtyZXR1cm4geHx8KGU9dltuXT12W25dfHxlLHlbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4geHx8KHAubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKDI+eClmb3IodCBpbiBlKW1bdF09W21bdF0sZVt0XV07ZWxzZSBOLmFsd2F5cyhlW04uc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGUpe3ZhciB0PWV8fFQ7cmV0dXJuIGwmJmwuYWJvcnQodCksaygwLHQpLHRoaXN9fTtpZihoLnByb21pc2UoTikuY29tcGxldGU9Zy5hZGQsTi5zdWNjZXNzPU4uZG9uZSxOLmVycm9yPU4uZmFpbCxwLnVybD0oKGV8fHAudXJsfHx5bikrXCJcIikucmVwbGFjZSh4bixcIlwiKS5yZXBsYWNlKGtuLG1uWzFdK1wiLy9cIikscC50eXBlPW4ubWV0aG9kfHxuLnR5cGV8fHAubWV0aG9kfHxwLnR5cGUscC5kYXRhVHlwZXM9Yi50cmltKHAuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbXCJcIl0sbnVsbD09cC5jcm9zc0RvbWFpbiYmKHI9RW4uZXhlYyhwLnVybC50b0xvd2VyQ2FzZSgpKSxwLmNyb3NzRG9tYWluPSEoIXJ8fHJbMV09PT1tblsxXSYmclsyXT09PW1uWzJdJiYoclszXXx8KFwiaHR0cDpcIj09PXJbMV0/ODA6NDQzKSk9PShtblszXXx8KFwiaHR0cDpcIj09PW1uWzFdPzgwOjQ0MykpKSkscC5kYXRhJiZwLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2YgcC5kYXRhJiYocC5kYXRhPWIucGFyYW0ocC5kYXRhLHAudHJhZGl0aW9uYWwpKSxxbihBbixwLG4sTiksMj09PXgpcmV0dXJuIE47dT1wLmdsb2JhbCx1JiYwPT09Yi5hY3RpdmUrKyYmYi5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLHAudHlwZT1wLnR5cGUudG9VcHBlckNhc2UoKSxwLmhhc0NvbnRlbnQ9IUNuLnRlc3QocC50eXBlKSxvPXAudXJsLHAuaGFzQ29udGVudHx8KHAuZGF0YSYmKG89cC51cmwrPShibi50ZXN0KG8pP1wiJlwiOlwiP1wiKStwLmRhdGEsZGVsZXRlIHAuZGF0YSkscC5jYWNoZT09PSExJiYocC51cmw9d24udGVzdChvKT9vLnJlcGxhY2Uod24sXCIkMV89XCIrdm4rKyk6bysoYm4udGVzdChvKT9cIiZcIjpcIj9cIikrXCJfPVwiK3ZuKyspKSxwLmlmTW9kaWZpZWQmJihiLmxhc3RNb2RpZmllZFtvXSYmTi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixiLmxhc3RNb2RpZmllZFtvXSksYi5ldGFnW29dJiZOLnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsYi5ldGFnW29dKSksKHAuZGF0YSYmcC5oYXNDb250ZW50JiZwLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZOLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixwLmNvbnRlbnRUeXBlKSxOLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixwLmRhdGFUeXBlc1swXSYmcC5hY2NlcHRzW3AuZGF0YVR5cGVzWzBdXT9wLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PXAuZGF0YVR5cGVzWzBdP1wiLCBcIitEbitcIjsgcT0wLjAxXCI6XCJcIik6cC5hY2NlcHRzW1wiKlwiXSk7Zm9yKGkgaW4gcC5oZWFkZXJzKU4uc2V0UmVxdWVzdEhlYWRlcihpLHAuaGVhZGVyc1tpXSk7aWYocC5iZWZvcmVTZW5kJiYocC5iZWZvcmVTZW5kLmNhbGwoZixOLHApPT09ITF8fDI9PT14KSlyZXR1cm4gTi5hYm9ydCgpO1Q9XCJhYm9ydFwiO2ZvcihpIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KU5baV0ocFtpXSk7aWYobD1xbihqbixwLG4sTikpe04ucmVhZHlTdGF0ZT0xLHUmJmQudHJpZ2dlcihcImFqYXhTZW5kXCIsW04scF0pLHAuYXN5bmMmJnAudGltZW91dD4wJiYocz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ti5hYm9ydChcInRpbWVvdXRcIil9LHAudGltZW91dCkpO3RyeXt4PTEsbC5zZW5kKHksayl9Y2F0Y2goQyl7aWYoISgyPngpKXRocm93IEM7aygtMSxDKX19ZWxzZSBrKC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIGsoZSxuLHIsaSl7dmFyIGMseSx2LHcsVCxDPW47MiE9PXgmJih4PTIscyYmY2xlYXJUaW1lb3V0KHMpLGw9dCxhPWl8fFwiXCIsTi5yZWFkeVN0YXRlPWU+MD80OjAsciYmKHc9X24ocCxOLHIpKSxlPj0yMDAmJjMwMD5lfHwzMDQ9PT1lPyhwLmlmTW9kaWZpZWQmJihUPU4uZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLFQmJihiLmxhc3RNb2RpZmllZFtvXT1UKSxUPU4uZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLFQmJihiLmV0YWdbb109VCkpLDIwND09PWU/KGM9ITAsQz1cIm5vY29udGVudFwiKTozMDQ9PT1lPyhjPSEwLEM9XCJub3Rtb2RpZmllZFwiKTooYz1GbihwLHcpLEM9Yy5zdGF0ZSx5PWMuZGF0YSx2PWMuZXJyb3IsYz0hdikpOih2PUMsKGV8fCFDKSYmKEM9XCJlcnJvclwiLDA+ZSYmKGU9MCkpKSxOLnN0YXR1cz1lLE4uc3RhdHVzVGV4dD0obnx8QykrXCJcIixjP2gucmVzb2x2ZVdpdGgoZixbeSxDLE5dKTpoLnJlamVjdFdpdGgoZixbTixDLHZdKSxOLnN0YXR1c0NvZGUobSksbT10LHUmJmQudHJpZ2dlcihjP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFtOLHAsYz95OnZdKSxnLmZpcmVXaXRoKGYsW04sQ10pLHUmJihkLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbTixwXSksLS1iLmFjdGl2ZXx8Yi5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gTn0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIGIuZ2V0KGUsdCxuLFwic2NyaXB0XCIpfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYi5nZXQoZSx0LG4sXCJqc29uXCIpfX0pO2Z1bmN0aW9uIF9uKGUsbixyKXt2YXIgaSxvLGEscyx1PWUuY29udGVudHMsbD1lLmRhdGFUeXBlcyxjPWUucmVzcG9uc2VGaWVsZHM7Zm9yKHMgaW4gYylzIGluIHImJihuW2Nbc11dPXJbc10pO3doaWxlKFwiKlwiPT09bFswXSlsLnNoaWZ0KCksbz09PXQmJihvPWUubWltZVR5cGV8fG4uZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKG8pZm9yKHMgaW4gdSlpZih1W3NdJiZ1W3NdLnRlc3Qobykpe2wudW5zaGlmdChzKTticmVha31pZihsWzBdaW4gcilhPWxbMF07ZWxzZXtmb3IocyBpbiByKXtpZighbFswXXx8ZS5jb252ZXJ0ZXJzW3MrXCIgXCIrbFswXV0pe2E9czticmVha31pfHwoaT1zKX1hPWF8fGl9cmV0dXJuIGE/KGEhPT1sWzBdJiZsLnVuc2hpZnQoYSksclthXSk6dH1mdW5jdGlvbiBGbihlLHQpe3ZhciBuLHIsaSxvLGE9e30scz0wLHU9ZS5kYXRhVHlwZXMuc2xpY2UoKSxsPXVbMF07aWYoZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdVsxXSlmb3IoaSBpbiBlLmNvbnZlcnRlcnMpYVtpLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tpXTtmb3IoO3I9dVsrK3NdOylpZihcIipcIiE9PXIpe2lmKFwiKlwiIT09bCYmbCE9PXIpe2lmKGk9YVtsK1wiIFwiK3JdfHxhW1wiKiBcIityXSwhaSlmb3IobiBpbiBhKWlmKG89bi5zcGxpdChcIiBcIiksb1sxXT09PXImJihpPWFbbCtcIiBcIitvWzBdXXx8YVtcIiogXCIrb1swXV0pKXtpPT09ITA/aT1hW25dOmFbbl0hPT0hMCYmKHI9b1swXSx1LnNwbGljZShzLS0sMCxyKSk7YnJlYWt9aWYoaSE9PSEwKWlmKGkmJmVbXCJ0aHJvd3NcIl0pdD1pKHQpO2Vsc2UgdHJ5e3Q9aSh0KX1jYXRjaChjKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmk/YzpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitsK1wiIHRvIFwiK3J9fX1sPXJ9cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6dH19Yi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGIuZ2xvYmFsRXZhbChlKSxlfX19KSxiLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihlKXtlLmNhY2hlPT09dCYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9XCJHRVRcIixlLmdsb2JhbD0hMSl9KSxiLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgbixyPW8uaGVhZHx8YihcImhlYWRcIilbMF18fG8uZG9jdW1lbnRFbGVtZW50O3JldHVybntzZW5kOmZ1bmN0aW9uKHQsaSl7bj1vLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksbi5hc3luYz0hMCxlLnNjcmlwdENoYXJzZXQmJihuLmNoYXJzZXQ9ZS5zY3JpcHRDaGFyc2V0KSxuLnNyYz1lLnVybCxuLm9ubG9hZD1uLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlLHQpeyh0fHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpJiYobi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxuLnBhcmVudE5vZGUmJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxuPW51bGwsdHx8aSgyMDAsXCJzdWNjZXNzXCIpKX0sci5pbnNlcnRCZWZvcmUobixyLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe24mJm4ub25sb2FkKHQsITApfX19fSk7dmFyIE9uPVtdLEJuPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87Yi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9T24ucG9wKCl8fGIuZXhwYW5kbytcIl9cIit2bisrO3JldHVybiB0aGlzW2VdPSEwLGV9fSksYi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKG4scixpKXt2YXIgbyxhLHMsdT1uLmpzb25wIT09ITEmJihCbi50ZXN0KG4udXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBuLmRhdGEmJiEobi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmQm4udGVzdChuLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIHV8fFwianNvbnBcIj09PW4uZGF0YVR5cGVzWzBdPyhvPW4uanNvbnBDYWxsYmFjaz1iLmlzRnVuY3Rpb24obi5qc29ucENhbGxiYWNrKT9uLmpzb25wQ2FsbGJhY2soKTpuLmpzb25wQ2FsbGJhY2ssdT9uW3VdPW5bdV0ucmVwbGFjZShCbixcIiQxXCIrbyk6bi5qc29ucCE9PSExJiYobi51cmwrPShibi50ZXN0KG4udXJsKT9cIiZcIjpcIj9cIikrbi5qc29ucCtcIj1cIitvKSxuLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBzfHxiLmVycm9yKG8rXCIgd2FzIG5vdCBjYWxsZWRcIiksc1swXX0sbi5kYXRhVHlwZXNbMF09XCJqc29uXCIsYT1lW29dLGVbb109ZnVuY3Rpb24oKXtzPWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW29dPWEsbltvXSYmKG4uanNvbnBDYWxsYmFjaz1yLmpzb25wQ2FsbGJhY2ssT24ucHVzaChvKSkscyYmYi5pc0Z1bmN0aW9uKGEpJiZhKHNbMF0pLHM9YT10fSksXCJzY3JpcHRcIik6dH0pO3ZhciBQbixSbixXbj0wLCRuPWUuQWN0aXZlWE9iamVjdCYmZnVuY3Rpb24oKXt2YXIgZTtmb3IoZSBpbiBQbilQbltlXSh0LCEwKX07ZnVuY3Rpb24gSW4oKXt0cnl7cmV0dXJuIG5ldyBlLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe319ZnVuY3Rpb24gem4oKXt0cnl7cmV0dXJuIG5ldyBlLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaCh0KXt9fWIuYWpheFNldHRpbmdzLnhocj1lLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiZJbigpfHx6bigpfTpJbixSbj1iLmFqYXhTZXR0aW5ncy54aHIoKSxiLnN1cHBvcnQuY29ycz0hIVJuJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gUm4sUm49Yi5zdXBwb3J0LmFqYXg9ISFSbixSbiYmYi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG4pe2lmKCFuLmNyb3NzRG9tYWlufHxiLnN1cHBvcnQuY29ycyl7dmFyIHI7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaSxvKXt2YXIgYSxzLHU9bi54aHIoKTtpZihuLnVzZXJuYW1lP3Uub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyxuLnVzZXJuYW1lLG4ucGFzc3dvcmQpOnUub3BlbihuLnR5cGUsbi51cmwsbi5hc3luYyksbi54aHJGaWVsZHMpZm9yKHMgaW4gbi54aHJGaWVsZHMpdVtzXT1uLnhockZpZWxkc1tzXTtuLm1pbWVUeXBlJiZ1Lm92ZXJyaWRlTWltZVR5cGUmJnUub3ZlcnJpZGVNaW1lVHlwZShuLm1pbWVUeXBlKSxuLmNyb3NzRG9tYWlufHxpW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGlbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7dHJ5e2ZvcihzIGluIGkpdS5zZXRSZXF1ZXN0SGVhZGVyKHMsaVtzXSl9Y2F0Y2gobCl7fXUuc2VuZChuLmhhc0NvbnRlbnQmJm4uZGF0YXx8bnVsbCkscj1mdW5jdGlvbihlLGkpe3ZhciBzLGwsYyxwO3RyeXtpZihyJiYoaXx8ND09PXUucmVhZHlTdGF0ZSkpaWYocj10LGEmJih1Lm9ucmVhZHlzdGF0ZWNoYW5nZT1iLm5vb3AsJG4mJmRlbGV0ZSBQblthXSksaSk0IT09dS5yZWFkeVN0YXRlJiZ1LmFib3J0KCk7ZWxzZXtwPXt9LHM9dS5zdGF0dXMsbD11LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFwic3RyaW5nXCI9PXR5cGVvZiB1LnJlc3BvbnNlVGV4dCYmKHAudGV4dD11LnJlc3BvbnNlVGV4dCk7dHJ5e2M9dS5zdGF0dXNUZXh0fWNhdGNoKGYpe2M9XCJcIn1zfHwhbi5pc0xvY2FsfHxuLmNyb3NzRG9tYWluPzEyMjM9PT1zJiYocz0yMDQpOnM9cC50ZXh0PzIwMDo0MDR9fWNhdGNoKGQpe2l8fG8oLTEsZCl9cCYmbyhzLGMscCxsKX0sbi5hc3luYz80PT09dS5yZWFkeVN0YXRlP3NldFRpbWVvdXQocik6KGE9KytXbiwkbiYmKFBufHwoUG49e30sYihlKS51bmxvYWQoJG4pKSxQblthXT1yKSx1Lm9ucmVhZHlzdGF0ZWNoYW5nZT1yKTpyKCl9LGFib3J0OmZ1bmN0aW9uKCl7ciYmcih0LCEwKX19fX0pO3ZhciBYbixVbixWbj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sWW49UmVnRXhwKFwiXig/OihbKy1dKT18KShcIit4K1wiKShbYS16JV0qKSRcIixcImlcIiksSm49L3F1ZXVlSG9va3MkLyxHbj1bbnJdLFFuPXtcIipcIjpbZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpcy5jcmVhdGVUd2VlbihlLHQpLG89WW4uZXhlYyh0KSxhPWkuY3VyKCkscz0rYXx8MCx1PTEsbD0yMDtpZihvKXtpZihuPStvWzJdLHI9b1szXXx8KGIuY3NzTnVtYmVyW2VdP1wiXCI6XCJweFwiKSxcInB4XCIhPT1yJiZzKXtzPWIuY3NzKGkuZWxlbSxlLCEwKXx8bnx8MTtkbyB1PXV8fFwiLjVcIixzLz11LGIuc3R5bGUoaS5lbGVtLGUscytyKTt3aGlsZSh1IT09KHU9aS5jdXIoKS9hKSYmMSE9PXUmJi0tbCl9aS51bml0PXIsaS5zdGFydD1zLGkuZW5kPW9bMV0/cysob1sxXSsxKSpuOm59cmV0dXJuIGl9XX07ZnVuY3Rpb24gS24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1huPXR9KSxYbj1iLm5vdygpfWZ1bmN0aW9uIFpuKGUsdCl7Yi5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj0oUW5bdF18fFtdKS5jb25jYXQoUW5bXCIqXCJdKSxpPTAsbz1yLmxlbmd0aDtmb3IoO28+aTtpKyspaWYocltpXS5jYWxsKGUsdCxuKSlyZXR1cm59KX1mdW5jdGlvbiBlcihlLHQsbil7dmFyIHIsaSxvPTAsYT1Hbi5sZW5ndGgscz1iLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihpKXJldHVybiExO3ZhciB0PVhufHxLbigpLG49TWF0aC5tYXgoMCxsLnN0YXJ0VGltZStsLmR1cmF0aW9uLXQpLHI9bi9sLmR1cmF0aW9ufHwwLG89MS1yLGE9MCx1PWwudHdlZW5zLmxlbmd0aDtmb3IoO3U+YTthKyspbC50d2VlbnNbYV0ucnVuKG8pO3JldHVybiBzLm5vdGlmeVdpdGgoZSxbbCxvLG5dKSwxPm8mJnU/bjoocy5yZXNvbHZlV2l0aChlLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTplLHByb3BzOmIuZXh0ZW5kKHt9LHQpLG9wdHM6Yi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LG4pLG9yaWdpbmFsUHJvcGVydGllczp0LG9yaWdpbmFsT3B0aW9uczpuLHN0YXJ0VGltZTpYbnx8S24oKSxkdXJhdGlvbjpuLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbih0LG4pe3ZhciByPWIuVHdlZW4oZSxsLm9wdHMsdCxuLGwub3B0cy5zcGVjaWFsRWFzaW5nW3RdfHxsLm9wdHMuZWFzaW5nKTtyZXR1cm4gbC50d2VlbnMucHVzaChyKSxyfSxzdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPTAscj10P2wudHdlZW5zLmxlbmd0aDowO2lmKGkpcmV0dXJuIHRoaXM7Zm9yKGk9ITA7cj5uO24rKylsLnR3ZWVuc1tuXS5ydW4oMSk7cmV0dXJuIHQ/cy5yZXNvbHZlV2l0aChlLFtsLHRdKTpzLnJlamVjdFdpdGgoZSxbbCx0XSksdGhpc319KSxjPWwucHJvcHM7Zm9yKHRyKGMsbC5vcHRzLnNwZWNpYWxFYXNpbmcpO2E+bztvKyspaWYocj1HbltvXS5jYWxsKGwsZSxjLGwub3B0cykpcmV0dXJuIHI7cmV0dXJuIFpuKGwsYyksYi5pc0Z1bmN0aW9uKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKGUsbCksYi5meC50aW1lcihiLmV4dGVuZCh1LHtlbGVtOmUsYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsLnByb2dyZXNzKGwub3B0cy5wcm9ncmVzcykuZG9uZShsLm9wdHMuZG9uZSxsLm9wdHMuY29tcGxldGUpLmZhaWwobC5vcHRzLmZhaWwpLmFsd2F5cyhsLm9wdHMuYWx3YXlzKX1mdW5jdGlvbiB0cihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKGkgaW4gZSlpZihyPWIuY2FtZWxDYXNlKGkpLG89dFtyXSxuPWVbaV0sYi5pc0FycmF5KG4pJiYobz1uWzFdLG49ZVtpXT1uWzBdKSxpIT09ciYmKGVbcl09bixkZWxldGUgZVtpXSksYT1iLmNzc0hvb2tzW3JdLGEmJlwiZXhwYW5kXCJpbiBhKXtuPWEuZXhwYW5kKG4pLGRlbGV0ZSBlW3JdO2ZvcihpIGluIG4paSBpbiBlfHwoZVtpXT1uW2ldLHRbaV09byl9ZWxzZSB0W3JdPW99Yi5BbmltYXRpb249Yi5leHRlbmQoZXIse3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXtiLmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVtcIipcIl0pOmU9ZS5zcGxpdChcIiBcIik7dmFyIG4scj0wLGk9ZS5sZW5ndGg7Zm9yKDtpPnI7cisrKW49ZVtyXSxRbltuXT1RbltuXXx8W10sUW5bbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9Hbi51bnNoaWZ0KGUpOkduLnB1c2goZSl9fSk7ZnVuY3Rpb24gbnIoZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMscCxmPXRoaXMsZD1lLnN0eWxlLGg9e30sZz1bXSxtPWUubm9kZVR5cGUmJm5uKGUpO24ucXVldWV8fChjPWIuX3F1ZXVlSG9va3MoZSxcImZ4XCIpLG51bGw9PWMudW5xdWV1ZWQmJihjLnVucXVldWVkPTAscD1jLmVtcHR5LmZpcmUsYy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Yy51bnF1ZXVlZHx8cCgpfSksYy51bnF1ZXVlZCsrLGYuYWx3YXlzKGZ1bmN0aW9uKCl7Zi5hbHdheXMoZnVuY3Rpb24oKXtjLnVucXVldWVkLS0sYi5xdWV1ZShlLFwiZnhcIikubGVuZ3RofHxjLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIHR8fFwid2lkdGhcImluIHQpJiYobi5vdmVyZmxvdz1bZC5vdmVyZmxvdyxkLm92ZXJmbG93WCxkLm92ZXJmbG93WV0sXCJpbmxpbmVcIj09PWIuY3NzKGUsXCJkaXNwbGF5XCIpJiZcIm5vbmVcIj09PWIuY3NzKGUsXCJmbG9hdFwiKSYmKGIuc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0JiZcImlubGluZVwiIT09dW4oZS5ub2RlTmFtZSk/ZC56b29tPTE6ZC5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxuLm92ZXJmbG93JiYoZC5vdmVyZmxvdz1cImhpZGRlblwiLGIuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzfHxmLmFsd2F5cyhmdW5jdGlvbigpe2Qub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxkLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGQub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSk7Zm9yKGkgaW4gdClpZihhPXRbaV0sVm4uZXhlYyhhKSl7aWYoZGVsZXRlIHRbaV0sdT11fHxcInRvZ2dsZVwiPT09YSxhPT09KG0/XCJoaWRlXCI6XCJzaG93XCIpKWNvbnRpbnVlO2cucHVzaChpKX1pZihvPWcubGVuZ3RoKXtzPWIuX2RhdGEoZSxcImZ4c2hvd1wiKXx8Yi5fZGF0YShlLFwiZnhzaG93XCIse30pLFwiaGlkZGVuXCJpbiBzJiYobT1zLmhpZGRlbiksdSYmKHMuaGlkZGVuPSFtKSxtP2IoZSkuc2hvdygpOmYuZG9uZShmdW5jdGlvbigpe2IoZSkuaGlkZSgpfSksZi5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7Yi5fcmVtb3ZlRGF0YShlLFwiZnhzaG93XCIpO2Zvcih0IGluIGgpYi5zdHlsZShlLHQsaFt0XSl9KTtmb3IoaT0wO28+aTtpKyspcj1nW2ldLGw9Zi5jcmVhdGVUd2VlbihyLG0/c1tyXTowKSxoW3JdPXNbcl18fGIuc3R5bGUoZSxyKSxyIGluIHN8fChzW3JdPWwuc3RhcnQsbSYmKGwuZW5kPWwuc3RhcnQsbC5zdGFydD1cIndpZHRoXCI9PT1yfHxcImhlaWdodFwiPT09cj8xOjApKX19ZnVuY3Rpb24gcnIoZSx0LG4scixpKXtyZXR1cm4gbmV3IHJyLnByb3RvdHlwZS5pbml0KGUsdCxuLHIsaSl9Yi5Ud2Vlbj1ycixyci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnJyLGluaXQ6ZnVuY3Rpb24oZSx0LG4scixpLG8pe3RoaXMuZWxlbT1lLHRoaXMucHJvcD1uLHRoaXMuZWFzaW5nPWl8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KGIuY3NzTnVtYmVyW25dP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9cnIucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOnJyLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPXJyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz10PXRoaXMub3B0aW9ucy5kdXJhdGlvbj9iLmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTplLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOnJyLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LHJyLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1yci5wcm90b3R5cGUscnIucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBudWxsPT1lLmVsZW1bZS5wcm9wXXx8ZS5lbGVtLnN0eWxlJiZudWxsIT1lLmVsZW0uc3R5bGVbZS5wcm9wXT8odD1iLmNzcyhlLmVsZW0sZS5wcm9wLFwiXCIpLHQmJlwiYXV0b1wiIT09dD90OjApOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7Yi5meC5zdGVwW2UucHJvcF0/Yi5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYobnVsbCE9ZS5lbGVtLnN0eWxlW2IuY3NzUHJvcHNbZS5wcm9wXV18fGIuY3NzSG9va3NbZS5wcm9wXSk/Yi5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0scnIucHJvcEhvb2tzLnNjcm9sbFRvcD1yci5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSxiLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49Yi5mblt0XTtiLmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8XCJib29sZWFuXCI9PXR5cGVvZiBlP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShpcih0LCEwKSxlLHIsaSl9fSksYi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIobm4pLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9Yi5pc0VtcHR5T2JqZWN0KGUpLG89Yi5zcGVlZCh0LG4sciksYT1mdW5jdGlvbigpe3ZhciB0PWVyKHRoaXMsYi5leHRlbmQoe30sZSksbyk7YS5maW5pc2g9ZnVuY3Rpb24oKXt0LnN0b3AoITApfSwoaXx8Yi5fZGF0YSh0aGlzLFwiZmluaXNoXCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIGEuZmluaXNoPWEsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChhKTp0aGlzLnF1ZXVlKG8ucXVldWUsYSl9LHN0b3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQocil9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlJiYocj1uLG49ZSxlPXQpLG4mJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLG49bnVsbCE9ZSYmZStcInF1ZXVlSG9va3NcIixvPWIudGltZXJzLGE9Yi5fZGF0YSh0aGlzKTtpZihuKWFbbl0mJmFbbl0uc3RvcCYmaShhW25dKTtlbHNlIGZvcihuIGluIGEpYVtuXSYmYVtuXS5zdG9wJiZKbi50ZXN0KG4pJiZpKGFbbl0pO2ZvcihuPW8ubGVuZ3RoO24tLTspb1tuXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tuXS5xdWV1ZSE9PWV8fChvW25dLmFuaW0uc3RvcChyKSx0PSExLG8uc3BsaWNlKG4sMSkpOyh0fHwhcikmJmIuZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49Yi5fZGF0YSh0aGlzKSxyPW5bZStcInF1ZXVlXCJdLGk9bltlK1wicXVldWVIb29rc1wiXSxvPWIudGltZXJzLGE9cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCxiLnF1ZXVlKHRoaXMsZSxbXSksaSYmaS5jdXImJmkuY3VyLmZpbmlzaCYmaS5jdXIuZmluaXNoLmNhbGwodGhpcyksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7YT50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBpcihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPVp0W2ldLHJbXCJtYXJnaW5cIituXT1yW1wicGFkZGluZ1wiK25dPWU7cmV0dXJuIHQmJihyLm9wYWNpdHk9ci53aWR0aD1lKSxyfWIuZWFjaCh7c2xpZGVEb3duOmlyKFwic2hvd1wiKSxzbGlkZVVwOmlyKFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTppcihcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGUsdCl7Yi5mbltlXT1mdW5jdGlvbihlLG4scil7cmV0dXJuIHRoaXMuYW5pbWF0ZSh0LGUsbixyKX19KSxiLnNwZWVkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lJiZcIm9iamVjdFwiPT10eXBlb2YgZT9iLmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fGIuaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhYi5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj1iLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiByLmR1cmF0aW9uP3IuZHVyYXRpb246ci5kdXJhdGlvbiBpbiBiLmZ4LnNwZWVkcz9iLmZ4LnNwZWVkc1tyLmR1cmF0aW9uXTpiLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ci5xdWV1ZXx8ci5xdWV1ZT09PSEwKSYmKHIucXVldWU9XCJmeFwiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXtiLmlzRnVuY3Rpb24oci5vbGQpJiZyLm9sZC5jYWxsKHRoaXMpLHIucXVldWUmJmIuZGVxdWV1ZSh0aGlzLHIucXVldWUpfSxyfSxiLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9fSxiLnRpbWVycz1bXSxiLmZ4PXJyLnByb3RvdHlwZS5pbml0LGIuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLG49Yi50aW1lcnMscj0wO2ZvcihYbj1iLm5vdygpO24ubGVuZ3RoPnI7cisrKWU9bltyXSxlKCl8fG5bcl0hPT1lfHxuLnNwbGljZShyLS0sMSk7bi5sZW5ndGh8fGIuZnguc3RvcCgpLFhuPXR9LGIuZngudGltZXI9ZnVuY3Rpb24oZSl7ZSgpJiZiLnRpbWVycy5wdXNoKGUpJiZiLmZ4LnN0YXJ0KCl9LGIuZnguaW50ZXJ2YWw9MTMsYi5meC5zdGFydD1mdW5jdGlvbigpe1VufHwoVW49c2V0SW50ZXJ2YWwoYi5meC50aWNrLGIuZnguaW50ZXJ2YWwpKX0sYi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChVbiksVW49bnVsbH0sYi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sYi5meC5zdGVwPXt9LGIuZXhwciYmYi5leHByLmZpbHRlcnMmJihiLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gYi5ncmVwKGIudGltZXJzLGZ1bmN0aW9uKHQpe3JldHVybiBlPT09dC5lbGVtfSkubGVuZ3RofSksYi5mbi5vZmZzZXQ9ZnVuY3Rpb24oZSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZT09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7Yi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciBuLHIsbz17dG9wOjAsbGVmdDowfSxhPXRoaXNbMF0scz1hJiZhLm93bmVyRG9jdW1lbnQ7aWYocylyZXR1cm4gbj1zLmRvY3VtZW50RWxlbWVudCxiLmNvbnRhaW5zKG4sYSk/KHR5cGVvZiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PWkmJihvPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLHI9b3Iocykse3RvcDpvLnRvcCsoci5wYWdlWU9mZnNldHx8bi5zY3JvbGxUb3ApLShuLmNsaWVudFRvcHx8MCksbGVmdDpvLmxlZnQrKHIucGFnZVhPZmZzZXR8fG4uc2Nyb2xsTGVmdCktKG4uY2xpZW50TGVmdHx8MCl9KTpvfSxiLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1iLmNzcyhlLFwicG9zaXRpb25cIik7XCJzdGF0aWNcIj09PXImJihlLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIik7dmFyIGk9YihlKSxvPWkub2Zmc2V0KCksYT1iLmNzcyhlLFwidG9wXCIpLHM9Yi5jc3MoZSxcImxlZnRcIiksdT0oXCJhYnNvbHV0ZVwiPT09cnx8XCJmaXhlZFwiPT09cikmJmIuaW5BcnJheShcImF1dG9cIixbYSxzXSk+LTEsbD17fSxjPXt9LHAsZjt1PyhjPWkucG9zaXRpb24oKSxwPWMudG9wLGY9Yy5sZWZ0KToocD1wYXJzZUZsb2F0KGEpfHwwLGY9cGFyc2VGbG9hdChzKXx8MCksYi5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwoZSxuLG8pKSxudWxsIT10LnRvcCYmKGwudG9wPXQudG9wLW8udG9wK3ApLG51bGwhPXQubGVmdCYmKGwubGVmdD10LmxlZnQtby5sZWZ0K2YpLFwidXNpbmdcImluIHQ/dC51c2luZy5jYWxsKGUsbCk6aS5jc3MobCl9fSxiLmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49e3RvcDowLGxlZnQ6MH0scj10aGlzWzBdO3JldHVyblwiZml4ZWRcIj09PWIuY3NzKHIsXCJwb3NpdGlvblwiKT90PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGU9dGhpcy5vZmZzZXRQYXJlbnQoKSx0PXRoaXMub2Zmc2V0KCksYi5ub2RlTmFtZShlWzBdLFwiaHRtbFwiKXx8KG49ZS5vZmZzZXQoKSksbi50b3ArPWIuY3NzKGVbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxuLmxlZnQrPWIuY3NzKGVbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpLHt0b3A6dC50b3Atbi50b3AtYi5jc3MocixcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OnQubGVmdC1uLmxlZnQtYi5jc3MocixcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vZmZzZXRQYXJlbnR8fG8uZG9jdW1lbnRFbGVtZW50O3doaWxlKGUmJiFiLm5vZGVOYW1lKGUsXCJodG1sXCIpJiZcInN0YXRpY1wiPT09Yi5jc3MoZSxcInBvc2l0aW9uXCIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fG8uZG9jdW1lbnRFbGVtZW50fSl9fSksYi5lYWNoKHtzY3JvbGxMZWZ0OlwicGFnZVhPZmZzZXRcIixzY3JvbGxUb3A6XCJwYWdlWU9mZnNldFwifSxmdW5jdGlvbihlLG4pe3ZhciByPS9ZLy50ZXN0KG4pO2IuZm5bZV09ZnVuY3Rpb24oaSl7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxpLG8pe3ZhciBhPW9yKGUpO3JldHVybiBvPT09dD9hP24gaW4gYT9hW25dOmEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W2ldOmVbaV06KGE/YS5zY3JvbGxUbyhyP2IoYSkuc2Nyb2xsTGVmdCgpOm8scj9vOmIoYSkuc2Nyb2xsVG9wKCkpOmVbaV09byx0KX0sZSxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gb3IoZSl7cmV0dXJuIGIuaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZT9lLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvdzohMX1iLmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oZSxuKXtiLmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2UsY29udGVudDpuLFwiXCI6XCJvdXRlclwiK2V9LGZ1bmN0aW9uKHIsaSl7Yi5mbltpXT1mdW5jdGlvbihpLG8pe3ZhciBhPWFyZ3VtZW50cy5sZW5ndGgmJihyfHxcImJvb2xlYW5cIiE9dHlwZW9mIGkpLHM9cnx8KGk9PT0hMHx8bz09PSEwP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIGIuYWNjZXNzKHRoaXMsZnVuY3Rpb24obixyLGkpe3ZhciBvO3JldHVybiBiLmlzV2luZG93KG4pP24uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrZV06OT09PW4ubm9kZVR5cGU/KG89bi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgobi5ib2R5W1wic2Nyb2xsXCIrZV0sb1tcInNjcm9sbFwiK2VdLG4uYm9keVtcIm9mZnNldFwiK2VdLG9bXCJvZmZzZXRcIitlXSxvW1wiY2xpZW50XCIrZV0pKTppPT09dD9iLmNzcyhuLHIscyk6Yi5zdHlsZShuLHIsaSxzKX0sbixhP2k6dCxhLG51bGwpfX0pfSksZS5qUXVlcnk9ZS4kPWIsXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYn0pfSkod2luZG93KTtcbjsgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18odHlwZW9mICQgIT0gXCJ1bmRlZmluZWRcIiA/ICQgOiB3aW5kb3cuJCk7XG5cbn0pLmNhbGwoZ2xvYmFsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uIGRlZmluZUV4cG9ydChleCkgeyBtb2R1bGUuZXhwb3J0cyA9IGV4OyB9KTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiLypcbiogS2VuZG8gVUkgdjIwMTQuMy4xMTE5IChodHRwOi8vd3d3LnRlbGVyaWsuY29tL2tlbmRvLXVpKVxuKiBDb3B5cmlnaHQgMjAxNCBUZWxlcmlrIEFELiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKlxuKiBLZW5kbyBVSSBjb21tZXJjaWFsIGxpY2Vuc2VzIG1heSBiZSBvYnRhaW5lZCBhdFxuKiBodHRwOi8vd3d3LnRlbGVyaWsuY29tL3B1cmNoYXNlL2xpY2Vuc2UtYWdyZWVtZW50L2tlbmRvLXVpLWNvbXBsZXRlXG4qIElmIHlvdSBkbyBub3Qgb3duIGEgY29tbWVyY2lhbCBsaWNlbnNlLCB0aGlzIGZpbGUgc2hhbGwgYmUgZ292ZXJuZWQgYnkgdGhlIHRyaWFsIGxpY2Vuc2UgdGVybXMuXG4qL1xuKGZ1bmN0aW9uKGYsZGVmaW5lKXtkZWZpbmUoW10sZil9KShmdW5jdGlvbigpeyFmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiByKGUsdCl7aWYodClyZXR1cm5cIidcIitlLnNwbGl0KFwiJ1wiKS5qb2luKFwiXFxcXCdcIikuc3BsaXQoJ1xcXFxcIicpLmpvaW4oJ1xcXFxcXFxcXFxcXFwiJykucmVwbGFjZSgvXFxuL2csXCJcXFxcblwiKS5yZXBsYWNlKC9cXHIvZyxcIlxcXFxyXCIpLnJlcGxhY2UoL1xcdC9nLFwiXFxcXHRcIikrXCInXCI7dmFyIG49ZS5jaGFyQXQoMCksaT1lLnN1YnN0cmluZygxKTtyZXR1cm5cIj1cIj09PW4/XCIrKFwiK2krXCIpK1wiOlwiOlwiPT09bj9cIitlKFwiK2krXCIpK1wiOlwiO1wiK2UrXCI7bys9XCJ9ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuIGUrPVwiXCIsdD10fHwyLG49dC1lLmxlbmd0aCxuP05bdF0uc3Vic3RyaW5nKDAsbikrZTplfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9ZS5jc3MoZ3Quc3VwcG9ydC50cmFuc2l0aW9ucy5jc3MrXCJib3gtc2hhZG93XCIpfHxlLmNzcyhcImJveC1zaGFkb3dcIiksbj10P3QubWF0Y2goVHQpfHxbMCwwLDAsMCwwXTpbMCwwLDAsMCwwXSxpPWJ0Lm1heCgrblszXSwrKG5bNF18fDApKTtyZXR1cm57bGVmdDotblsxXStpLHJpZ2h0OituWzFdK2ksYm90dG9tOituWzJdK2l9fWZ1bmN0aW9uIHModCxuKXt2YXIgaSxyLG8scyxsLGMsZCx1LGg9eHQuYnJvd3NlcixwPVwicnRsXCI9PXQuY3NzKFwiZGlyZWN0aW9uXCIpO3JldHVybiB0LnBhcmVudCgpLmhhc0NsYXNzKFwiay1hbmltYXRpb24tY29udGFpbmVyXCIpPyhkPXQucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKSx1PWRbMF0uc3R5bGUsZC5pcyhcIjpoaWRkZW5cIikmJmQuc2hvdygpLGk9Q3QudGVzdCh1LndpZHRoKXx8Q3QudGVzdCh1LmhlaWdodCksaXx8ZC5jc3Moe3dpZHRoOnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0Lm91dGVySGVpZ2h0KCksYm94U2l6aW5nOlwiY29udGVudC1ib3hcIixtb3pCb3hTaXppbmc6XCJjb250ZW50LWJveFwiLHdlYmtpdEJveFNpemluZzpcImNvbnRlbnQtYm94XCJ9KSk6KHI9YSh0KSxvPXRbMF0uc3R5bGUud2lkdGgscz10WzBdLnN0eWxlLmhlaWdodCxsPUN0LnRlc3QobyksYz1DdC50ZXN0KHMpLGgub3BlcmEmJihyLmxlZnQ9ci5yaWdodD1yLmJvdHRvbT01KSxpPWx8fGMsIWwmJighbnx8biYmbykmJihvPXQub3V0ZXJXaWR0aCgpKSwhYyYmKCFufHxuJiZzKSYmKHM9dC5vdXRlckhlaWdodCgpKSx0LndyYXAoZShcIjxkaXYvPlwiKS5hZGRDbGFzcyhcImstYW5pbWF0aW9uLWNvbnRhaW5lclwiKS5jc3Moe3dpZHRoOm8saGVpZ2h0OnMsbWFyZ2luTGVmdDpyLmxlZnQqKHA/MTotMSkscGFkZGluZ0xlZnQ6ci5sZWZ0LHBhZGRpbmdSaWdodDpyLnJpZ2h0LHBhZGRpbmdCb3R0b206ci5ib3R0b219KSksaSYmdC5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixib3hTaXppbmc6XCJib3JkZXItYm94XCIsbW96Qm94U2l6aW5nOlwiYm9yZGVyLWJveFwiLHdlYmtpdEJveFNpemluZzpcImJvcmRlci1ib3hcIn0pKSxoLm1zaWUmJmJ0LmZsb29yKGgudmVyc2lvbik8PTcmJih0LmNzcyh7em9vbToxfSksdC5jaGlsZHJlbihcIi5rLW1lbnVcIikud2lkdGgodC53aWR0aCgpKSksdC5wYXJlbnQoKX1mdW5jdGlvbiBsKGUpe3ZhciB0PTEsbj1hcmd1bWVudHMubGVuZ3RoO2Zvcih0PTE7bj50O3QrKyljKGUsYXJndW1lbnRzW3RdKTtyZXR1cm4gZX1mdW5jdGlvbiBjKGUsdCl7dmFyIG4saSxyLG8sYSxzPWd0LmRhdGEuT2JzZXJ2YWJsZUFycmF5LGw9Z3QuZGF0YS5MYXp5T2JzZXJ2YWJsZUFycmF5LGQ9Z3QuZGF0YS5EYXRhU291cmNlLHU9Z3QuZGF0YS5IaWVyYXJjaGljYWxEYXRhU291cmNlO2ZvcihuIGluIHQpaT10W25dLHI9dHlwZW9mIGksbz1yPT09UHQmJm51bGwhPT1pP2kuY29uc3RydWN0b3I6bnVsbCxvJiZvIT09QXJyYXkmJm8hPT1zJiZvIT09bCYmbyE9PWQmJm8hPT11P2kgaW5zdGFuY2VvZiBEYXRlP2Vbbl09bmV3IERhdGUoaS5nZXRUaW1lKCkpOk0oaS5jbG9uZSk/ZVtuXT1pLmNsb25lKCk6KGE9ZVtuXSxlW25dPXR5cGVvZiBhPT09UHQ/YXx8e306e30sYyhlW25dLGkpKTpyIT09RnQmJihlW25dPWkpO3JldHVybiBlfWZ1bmN0aW9uIGQoZSx0LGkpe2Zvcih2YXIgciBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkocikmJnRbcl0udGVzdChlKSlyZXR1cm4gcjtyZXR1cm4gaSE9PW4/aTplfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUucmVwbGFjZSgvKFthLXpdW0EtWl0pL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApK1wiLVwiK2UuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBoKGUpe3JldHVybiBlLnJlcGxhY2UoL1xcLShcXHcpL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSl9ZnVuY3Rpb24gcCh0LG4pe3ZhciBpLHI9e307cmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlPyhpPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodCxcIlwiKSxuJiZlLmVhY2gobixmdW5jdGlvbihlLHQpe3JbdF09aS5nZXRQcm9wZXJ0eVZhbHVlKHQpfSkpOihpPXQuY3VycmVudFN0eWxlLG4mJmUuZWFjaChuLGZ1bmN0aW9uKGUsdCl7clt0XT1pW2godCldfSkpLGd0LnNpemUocil8fChyPWkpLHJ9ZnVuY3Rpb24gZihlKXt2YXIgdCxuPTA7Zm9yKHQgaW4gZSllLmhhc093blByb3BlcnR5KHQpJiZcInRvSlNPTlwiIT10JiZuKys7cmV0dXJuIG59ZnVuY3Rpb24gZyhlLG4saSl7bnx8KG49XCJvZmZzZXRcIik7dmFyIHI9ZVtuXSgpO3JldHVybiB4dC5icm93c2VyLm1zaWUmJih4dC5wb2ludGVyc3x8eHQubXNQb2ludGVycykmJiFpJiYoci50b3AtPXQucGFnZVlPZmZzZXQtZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxyLmxlZnQtPXQucGFnZVhPZmZzZXQtZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpLHJ9ZnVuY3Rpb24gbShlKXt2YXIgdD17fTtyZXR1cm4gdnQoXCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5zcGxpdChcIiBcIik6ZSxmdW5jdGlvbihlKXt0W2VdPXRoaXN9KSx0fWZ1bmN0aW9uIHYoZSl7cmV0dXJuIG5ldyBndC5lZmZlY3RzLkVsZW1lbnQoZSl9ZnVuY3Rpb24gXyhlLHQsbixpKXtyZXR1cm4gdHlwZW9mIGU9PT1FdCYmKE0odCkmJihpPXQsdD00MDAsbj0hMSksTShuKSYmKGk9bixuPSExKSx0eXBlb2YgdD09PXp0JiYobj10LHQ9NDAwKSxlPXtlZmZlY3RzOmUsZHVyYXRpb246dCxyZXZlcnNlOm4sY29tcGxldGU6aX0pLG10KHtlZmZlY3RzOnt9LGR1cmF0aW9uOjQwMCxyZXZlcnNlOiExLGluaXQ6d3QsdGVhcmRvd246d3QsaGlkZTohMX0sZSx7Y29tcGxldGVDYWxsYmFjazplLmNvbXBsZXRlLGNvbXBsZXRlOnd0fSl9ZnVuY3Rpb24geSh0LG4saSxyLG8pe2Zvcih2YXIgYSxzPTAsbD10Lmxlbmd0aDtsPnM7cysrKWE9ZSh0W3NdKSxhLnF1ZXVlKGZ1bmN0aW9uKCl7VS5wcm9taXNlKGEsXyhuLGkscixvKSl9KTtyZXR1cm4gdH1mdW5jdGlvbiB3KGUsdCxuLGkpe3JldHVybiB0JiYodD10LnNwbGl0KFwiIFwiKSx2dCh0LGZ1bmN0aW9uKHQsbil7ZS50b2dnbGVDbGFzcyhuLGkpfSkpLGV9ZnVuY3Rpb24gYihlKXtyZXR1cm4oXCJcIitlKS5yZXBsYWNlKFcsXCImYW1wO1wiKS5yZXBsYWNlKGosXCImbHQ7XCIpLnJlcGxhY2UoJCxcIiZndDtcIikucmVwbGFjZShHLFwiJnF1b3Q7XCIpLnJlcGxhY2UocSxcIiYjMzk7XCIpfWZ1bmN0aW9uIGsoZSx0KXt2YXIgaTtyZXR1cm4gMD09PXQuaW5kZXhPZihcImRhdGFcIikmJih0PXQuc3Vic3RyaW5nKDQpLHQ9dC5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSt0LnN1YnN0cmluZygxKSksdD10LnJlcGxhY2UobnQsXCItJDFcIiksaT1lLmdldEF0dHJpYnV0ZShcImRhdGEtXCIrZ3QubnMrdCksbnVsbD09PWk/aT1uOlwibnVsbFwiPT09aT9pPW51bGw6XCJ0cnVlXCI9PT1pP2k9ITA6XCJmYWxzZVwiPT09aT9pPSExOkR0LnRlc3QoaSk/aT1wYXJzZUZsb2F0KGkpOmV0LnRlc3QoaSkmJiF0dC50ZXN0KGkpJiYoaT1GdW5jdGlvbihcInJldHVybiAoXCIraStcIilcIikoKSksaX1mdW5jdGlvbiB4KHQsaSl7dmFyIHIsbyxhPXt9O2ZvcihyIGluIGkpbz1rKHQsciksbyE9PW4mJihaLnRlc3QocikmJihvPWd0LnRlbXBsYXRlKGUoXCIjXCIrbykuaHRtbCgpKSksYVtyXT1vKTtyZXR1cm4gYX1mdW5jdGlvbiBDKHQsbil7cmV0dXJuIGUuY29udGFpbnModCxuKT8tMToxfWZ1bmN0aW9uIFMoKXt2YXIgdD1lKHRoaXMpO3JldHVybiBlLmluQXJyYXkodC5hdHRyKFwiZGF0YS1cIitndC5ucytcInJvbGVcIiksW1wic2xpZGVyXCIsXCJyYW5nZXNsaWRlclwiXSk+LTF8fHQuaXMoXCI6dmlzaWJsZVwiKX1mdW5jdGlvbiBUKGUsdCl7dmFyIG49ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3Qobik/IWUuZGlzYWJsZWQ6XCJhXCI9PT1uP2UuaHJlZnx8dDp0KSYmRChlKX1mdW5jdGlvbiBEKHQpe3JldHVybiFlKHQpLnBhcmVudHMoKS5hZGRCYWNrKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJoaWRkZW5cIj09PWUuY3NzKHRoaXMsXCJ2aXNpYmlsaXR5XCIpfHxlLmV4cHIuZmlsdGVycy5oaWRkZW4odGhpcyl9KS5sZW5ndGh9ZnVuY3Rpb24gQShlLHQpe3JldHVybiBuZXcgQS5mbi5pbml0KGUsdCl9dmFyIEUsTSxQLEkseixGLFIsQixMLE8sSCxOLFYsVSxXLGosRyxxLCQsWSxLLFEsWCxKLFosZXQsdHQsbnQsaXQscnQsb3QsYXQsc3QsbHQsY3QsZHQsdXQsaHQscHQsZnQsZ3Q9dC5rZW5kbz10LmtlbmRvfHx7Y3VsdHVyZXM6e319LG10PWUuZXh0ZW5kLHZ0PWUuZWFjaCxfdD1lLmlzQXJyYXkseXQ9ZS5wcm94eSx3dD1lLm5vb3AsYnQ9TWF0aCxrdD10LkpTT058fHt9LHh0PXt9LEN0PS8lLyxTdD0vXFx7KFxcZCspKDpbXlxcfV0rKT9cXH0vZyxUdD0vKFxcZCsoPzpcXC4/KVxcZCopcHhcXHMqKFxcZCsoPzpcXC4/KVxcZCopcHhcXHMqKFxcZCsoPzpcXC4/KVxcZCopcHhcXHMqKFxcZCspPy9pLER0PS9eKFxcK3wtPylcXGQrKFxcLj8pXFxkKiQvLEF0PVwiZnVuY3Rpb25cIixFdD1cInN0cmluZ1wiLE10PVwibnVtYmVyXCIsUHQ9XCJvYmplY3RcIixJdD1cIm51bGxcIix6dD1cImJvb2xlYW5cIixGdD1cInVuZGVmaW5lZFwiLFJ0PXt9LEJ0PXt9LEx0PVtdLnNsaWNlLE90PXQuR2xvYmFsaXplO2d0LnZlcnNpb249XCIyMDE0LjMuMTExOVwiLGkuZXh0ZW5kPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1mdW5jdGlvbigpe30scj10aGlzLG89ZSYmZS5pbml0P2UuaW5pdDpmdW5jdGlvbigpe3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtpLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuPW8uZm49by5wcm90b3R5cGU9bmV3IGk7Zm9yKHQgaW4gZSluW3RdPW51bGwhPWVbdF0mJmVbdF0uY29uc3RydWN0b3I9PT1PYmplY3Q/bXQoITAse30saS5wcm90b3R5cGVbdF0sZVt0XSk6ZVt0XTtyZXR1cm4gbi5jb25zdHJ1Y3Rvcj1vLG8uZXh0ZW5kPXIuZXh0ZW5kLG99LGkucHJvdG90eXBlLl9pbml0T3B0aW9ucz1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9bCh7fSx0aGlzLm9wdGlvbnMsZSl9LE09Z3QuaXNGdW5jdGlvbj1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfSxQPWZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdFByZXZlbnRlZD0hMH0sST1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWZhdWx0UHJldmVudGVkPT09ITB9LHo9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLl9ldmVudHM9e319LGJpbmQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciByLG8sYSxzLGwsYz10aGlzLGQ9dHlwZW9mIGU9PT1FdD9bZV06ZSx1PXR5cGVvZiB0PT09QXQ7aWYodD09PW4pe2ZvcihyIGluIGUpYy5iaW5kKHIsZVtyXSk7cmV0dXJuIGN9Zm9yKHI9MCxvPWQubGVuZ3RoO28+cjtyKyspZT1kW3JdLHM9dT90OnRbZV0scyYmKGkmJihhPXMscz1mdW5jdGlvbigpe2MudW5iaW5kKGUscyksYS5hcHBseShjLGFyZ3VtZW50cyl9LHMub3JpZ2luYWw9YSksbD1jLl9ldmVudHNbZV09Yy5fZXZlbnRzW2VdfHxbXSxsLnB1c2gocykpO3JldHVybiBjfSxvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5iaW5kKGUsdCwhMCl9LGZpcnN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT10aGlzLHM9dHlwZW9mIGU9PT1FdD9bZV06ZSxsPXR5cGVvZiB0PT09QXQ7Zm9yKG49MCxpPXMubGVuZ3RoO2k+bjtuKyspZT1zW25dLHI9bD90OnRbZV0sciYmKG89YS5fZXZlbnRzW2VdPWEuX2V2ZW50c1tlXXx8W10sby51bnNoaWZ0KHIpKTtyZXR1cm4gYX0sdHJpZ2dlcjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89ci5fZXZlbnRzW2VdO2lmKG8pe2Zvcih0PXR8fHt9LHQuc2VuZGVyPXIsdC5fZGVmYXVsdFByZXZlbnRlZD0hMSx0LnByZXZlbnREZWZhdWx0PVAsdC5pc0RlZmF1bHRQcmV2ZW50ZWQ9SSxvPW8uc2xpY2UoKSxuPTAsaT1vLmxlbmd0aDtpPm47bisrKW9bbl0uY2FsbChyLHQpO3JldHVybiB0Ll9kZWZhdWx0UHJldmVudGVkPT09ITB9cmV0dXJuITF9LHVuYmluZDpmdW5jdGlvbihlLHQpe3ZhciBpLHI9dGhpcyxvPXIuX2V2ZW50c1tlXTtpZihlPT09bilyLl9ldmVudHM9e307ZWxzZSBpZihvKWlmKHQpZm9yKGk9by5sZW5ndGgtMTtpPj0wO2ktLSkob1tpXT09PXR8fG9baV0ub3JpZ2luYWw9PT10KSYmby5zcGxpY2UoaSwxKTtlbHNlIHIuX2V2ZW50c1tlXT1bXTtyZXR1cm4gcn19KSxGPS9eXFx3Ky8sUj0vXFwkXFx7KFtefV0qKVxcfS9nLEI9L1xcXFxcXH0vZyxMPS9fX0NVUkxZX18vZyxPPS9cXFxcIy9nLEg9L19fU0hBUlBfXy9nLE49W1wiXCIsXCIwXCIsXCIwMFwiLFwiMDAwXCIsXCIwMDAwXCJdLEU9e3BhcmFtTmFtZTpcImRhdGFcIix1c2VXaXRoQmxvY2s6ITAscmVuZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPVwiXCI7Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspcis9ZSh0W25dKTtyZXR1cm4gcn0sY29tcGlsZTpmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhPW10KHt9LHRoaXMsdCkscz1hLnBhcmFtTmFtZSxsPXMubWF0Y2goRilbMF0sYz1hLnVzZVdpdGhCbG9jayxkPVwidmFyIG8sZT1rZW5kby5odG1sRW5jb2RlO1wiO2lmKE0oZSkpcmV0dXJuIGU7Zm9yKGQrPWM/XCJ3aXRoKFwiK3MrXCIpe1wiOlwiXCIsZCs9XCJvPVwiLGk9ZS5yZXBsYWNlKEIsXCJfX0NVUkxZX19cIikucmVwbGFjZShSLFwiIz1lKCQxKSNcIikucmVwbGFjZShMLFwifVwiKS5yZXBsYWNlKE8sXCJfX1NIQVJQX19cIikuc3BsaXQoXCIjXCIpLG89MDtpLmxlbmd0aD5vO28rKylkKz1yKGlbb10sbyUyPT09MCk7ZCs9Yz9cIjt9XCI6XCI7XCIsZCs9XCJyZXR1cm4gbztcIixkPWQucmVwbGFjZShILFwiI1wiKTt0cnl7cmV0dXJuIG49RnVuY3Rpb24obCxkKSxuLl9zbG90Q291bnQ9TWF0aC5mbG9vcihpLmxlbmd0aC8yKSxufWNhdGNoKHUpe3Rocm93IEVycm9yKGd0LmZvcm1hdChcIkludmFsaWQgdGVtcGxhdGU6J3swfScgR2VuZXJhdGVkIGNvZGU6J3sxfSdcIixlLGQpKX19fSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIGEubGFzdEluZGV4PTAsYS50ZXN0KGUpPydcIicrZS5yZXBsYWNlKGEsZnVuY3Rpb24oZSl7dmFyIHQ9c1tlXTtyZXR1cm4gdHlwZW9mIHQ9PT1FdD90OlwiXFxcXHVcIisoXCIwMDAwXCIrZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfSkrJ1wiJzonXCInK2UrJ1wiJ31mdW5jdGlvbiB0KG8sYSl7dmFyIHMsYyxkLHUsaCxwLGY9bixnPWFbb107aWYoZyYmdHlwZW9mIGc9PT1QdCYmdHlwZW9mIGcudG9KU09OPT09QXQmJihnPWcudG9KU09OKG8pKSx0eXBlb2Ygcj09PUF0JiYoZz1yLmNhbGwoYSxvLGcpKSxwPXR5cGVvZiBnLHA9PT1FdClyZXR1cm4gZShnKTtpZihwPT09TXQpcmV0dXJuIGlzRmluaXRlKGcpP2crXCJcIjpJdDtpZihwPT09enR8fHA9PT1JdClyZXR1cm4gZytcIlwiO2lmKHA9PT1QdCl7aWYoIWcpcmV0dXJuIEl0O2lmKG4rPWksaD1bXSxcIltvYmplY3QgQXJyYXldXCI9PT1sLmFwcGx5KGcpKXtmb3IodT1nLmxlbmd0aCxzPTA7dT5zO3MrKyloW3NdPXQocyxnKXx8SXQ7cmV0dXJuIGQ9MD09PWgubGVuZ3RoP1wiW11cIjpuP1wiW1xcblwiK24raC5qb2luKFwiLFxcblwiK24pK1wiXFxuXCIrZitcIl1cIjpcIltcIitoLmpvaW4oXCIsXCIpK1wiXVwiLG49ZixkfWlmKHImJnR5cGVvZiByPT09UHQpZm9yKHU9ci5sZW5ndGgscz0wO3U+cztzKyspdHlwZW9mIHJbc109PT1FdCYmKGM9cltzXSxkPXQoYyxnKSxkJiZoLnB1c2goZShjKSsobj9cIjogXCI6XCI6XCIpK2QpKTtlbHNlIGZvcihjIGluIGcpT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoZyxjKSYmKGQ9dChjLGcpLGQmJmgucHVzaChlKGMpKyhuP1wiOiBcIjpcIjpcIikrZCkpO3JldHVybiBkPTA9PT1oLmxlbmd0aD9cInt9XCI6bj9cIntcXG5cIituK2guam9pbihcIixcXG5cIituKStcIlxcblwiK2YrXCJ9XCI6XCJ7XCIraC5qb2luKFwiLFwiKStcIn1cIixuPWYsZH19dmFyIG4saSxyLGE9L1tcXFxcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx4OWZcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZyxzPXtcIlxcYlwiOlwiXFxcXGJcIixcIlx0XCI6XCJcXFxcdFwiLFwiXFxuXCI6XCJcXFxcblwiLFwiXFxmXCI6XCJcXFxcZlwiLFwiXFxyXCI6XCJcXFxcclwiLCdcIic6J1xcXFxcIicsXCJcXFxcXCI6XCJcXFxcXFxcXFwifSxsPXt9LnRvU3RyaW5nO3R5cGVvZiBEYXRlLnByb3RvdHlwZS50b0pTT04hPT1BdCYmKERhdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGlzRmluaXRlKGUudmFsdWVPZigpKT9vKGUuZ2V0VVRDRnVsbFllYXIoKSw0KStcIi1cIitvKGUuZ2V0VVRDTW9udGgoKSsxKStcIi1cIitvKGUuZ2V0VVRDRGF0ZSgpKStcIlRcIitvKGUuZ2V0VVRDSG91cnMoKSkrXCI6XCIrbyhlLmdldFVUQ01pbnV0ZXMoKSkrXCI6XCIrbyhlLmdldFVUQ1NlY29uZHMoKSkrXCJaXCI6bnVsbH0sU3RyaW5nLnByb3RvdHlwZS50b0pTT049TnVtYmVyLnByb3RvdHlwZS50b0pTT049Qm9vbGVhbi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVPZigpfSksdHlwZW9mIGt0LnN0cmluZ2lmeSE9PUF0JiYoa3Quc3RyaW5naWZ5PWZ1bmN0aW9uKGUsbyxhKXt2YXIgcztpZihuPVwiXCIsaT1cIlwiLHR5cGVvZiBhPT09TXQpZm9yKHM9MDthPnM7cys9MSlpKz1cIiBcIjtlbHNlIHR5cGVvZiBhPT09RXQmJihpPWEpO2lmKHI9byxvJiZ0eXBlb2YgbyE9PUF0JiYodHlwZW9mIG8hPT1QdHx8dHlwZW9mIG8ubGVuZ3RoIT09TXQpKXRocm93IEVycm9yKFwiSlNPTi5zdHJpbmdpZnlcIik7cmV0dXJuIHQoXCJcIix7XCJcIjplfSl9KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoZSl7aWYoZS5udW1iZXJGb3JtYXQpcmV0dXJuIGU7aWYodHlwZW9mIGU9PT1FdCl7dmFyIHQ9Z3QuY3VsdHVyZXM7cmV0dXJuIHRbZV18fHRbZS5zcGxpdChcIi1cIilbMF1dfHxudWxsfXJldHVybiBudWxsfXJldHVybiBudWxsfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJihlPXQoZSkpLGV8fGd0LmN1bHR1cmVzLmN1cnJlbnR9ZnVuY3Rpb24gcihlKXtlLmdyb3VwU2l6ZXM9ZS5ncm91cFNpemUsZS5wZXJjZW50Lmdyb3VwU2l6ZXM9ZS5wZXJjZW50Lmdyb3VwU2l6ZSxlLmN1cnJlbmN5Lmdyb3VwU2l6ZXM9ZS5jdXJyZW5jeS5ncm91cFNpemV9ZnVuY3Rpb24gYShlLHQscil7cj1pKHIpO3ZhciBhPXIuY2FsZW5kYXJzLnN0YW5kYXJkLHM9YS5kYXlzLGw9YS5tb250aHM7cmV0dXJuIHQ9YS5wYXR0ZXJuc1t0XXx8dCx0LnJlcGxhY2UoZCxmdW5jdGlvbih0KXt2YXIgaSxyLGM7cmV0dXJuXCJkXCI9PT10P3I9ZS5nZXREYXRlKCk6XCJkZFwiPT09dD9yPW8oZS5nZXREYXRlKCkpOlwiZGRkXCI9PT10P3I9cy5uYW1lc0FiYnJbZS5nZXREYXkoKV06XCJkZGRkXCI9PT10P3I9cy5uYW1lc1tlLmdldERheSgpXTpcIk1cIj09PXQ/cj1lLmdldE1vbnRoKCkrMTpcIk1NXCI9PT10P3I9byhlLmdldE1vbnRoKCkrMSk6XCJNTU1cIj09PXQ/cj1sLm5hbWVzQWJicltlLmdldE1vbnRoKCldOlwiTU1NTVwiPT09dD9yPWwubmFtZXNbZS5nZXRNb250aCgpXTpcInl5XCI9PT10P3I9byhlLmdldEZ1bGxZZWFyKCklMTAwKTpcInl5eXlcIj09PXQ/cj1vKGUuZ2V0RnVsbFllYXIoKSw0KTpcImhcIj09PXQ/cj1lLmdldEhvdXJzKCklMTJ8fDEyOlwiaGhcIj09PXQ/cj1vKGUuZ2V0SG91cnMoKSUxMnx8MTIpOlwiSFwiPT09dD9yPWUuZ2V0SG91cnMoKTpcIkhIXCI9PT10P3I9byhlLmdldEhvdXJzKCkpOlwibVwiPT09dD9yPWUuZ2V0TWludXRlcygpOlwibW1cIj09PXQ/cj1vKGUuZ2V0TWludXRlcygpKTpcInNcIj09PXQ/cj1lLmdldFNlY29uZHMoKTpcInNzXCI9PT10P3I9byhlLmdldFNlY29uZHMoKSk6XCJmXCI9PT10P3I9YnQuZmxvb3IoZS5nZXRNaWxsaXNlY29uZHMoKS8xMDApOlwiZmZcIj09PXQ/KHI9ZS5nZXRNaWxsaXNlY29uZHMoKSxyPjk5JiYocj1idC5mbG9vcihyLzEwKSkscj1vKHIpKTpcImZmZlwiPT09dD9yPW8oZS5nZXRNaWxsaXNlY29uZHMoKSwzKTpcInR0XCI9PT10P3I9ZS5nZXRIb3VycygpPDEyP2EuQU1bMF06YS5QTVswXTpcInp6elwiPT09dD8oaT1lLmdldFRpbWV6b25lT2Zmc2V0KCksYz0wPmkscj0oXCJcIitidC5hYnMoaS82MCkpLnNwbGl0KFwiLlwiKVswXSxpPWJ0LmFicyhpKS02MCpyLHI9KGM/XCIrXCI6XCItXCIpK28ocikscis9XCI6XCIrbyhpKSk6KFwienpcIj09PXR8fFwielwiPT09dCkmJihyPWUuZ2V0VGltZXpvbmVPZmZzZXQoKS82MCxjPTA+cixyPShcIlwiK2J0LmFicyhyKSkuc3BsaXQoXCIuXCIpWzBdLHI9KGM/XCIrXCI6XCItXCIpKyhcInp6XCI9PT10P28ocik6cikpLHIhPT1uP3I6dC5zbGljZSgxLHQubGVuZ3RoLTEpfSl9ZnVuY3Rpb24gcyhlLHQscil7cj1pKHIpO3ZhciBvLGEscyxjLGQsdyxiLGsseCxDLFMsVCxELEEsRSxNLFAsSSx6LEYsUixCLEwsTz1yLm51bWJlckZvcm1hdCxIPU8uZ3JvdXBTaXplWzBdLE49T1ttXSxWPU9bZ10sVT1PLmRlY2ltYWxzLFc9Ty5wYXR0ZXJuWzBdLGo9W10sRz0wPmUscT1mLCQ9ZixZPS0xO2lmKGU9PT1uKXJldHVybiBmO2lmKCFpc0Zpbml0ZShlKSlyZXR1cm4gZTtpZighdClyZXR1cm4gci5uYW1lLmxlbmd0aD9lLnRvTG9jYWxlU3RyaW5nKCk6XCJcIitlO2lmKGQ9dS5leGVjKHQpKXtpZih0PWRbMV0udG9Mb3dlckNhc2UoKSxhPVwiY1wiPT09dCxzPVwicFwiPT09dCwoYXx8cykmJihPPWE/Ty5jdXJyZW5jeTpPLnBlcmNlbnQsSD1PLmdyb3VwU2l6ZVswXSxOPU9bbV0sVj1PW2ddLFU9Ty5kZWNpbWFscyxvPU8uc3ltYm9sLFc9Ty5wYXR0ZXJuW0c/MDoxXSksYz1kWzJdLGMmJihVPStjKSxcImVcIj09PXQpcmV0dXJuIGM/ZS50b0V4cG9uZW50aWFsKFUpOmUudG9FeHBvbmVudGlhbCgpO2lmKHMmJihlKj0xMDApLGU9bChlLFUpLEc9MD5lLGU9ZS5zcGxpdChnKSx3PWVbMF0sYj1lWzFdLEcmJih3PXcuc3Vic3RyaW5nKDEpKSwkPXcsaz13Lmxlbmd0aCxrPj1IKWZvcigkPWYsQz0wO2s+QztDKyspQz4wJiYoay1DKSVIPT09MCYmKCQrPU4pLCQrPXcuY2hhckF0KEMpO2lmKGImJigkKz1WK2IpLFwiblwiPT09dCYmIUcpcmV0dXJuICQ7Zm9yKGU9ZixDPTAsUz1XLmxlbmd0aDtTPkM7QysrKVQ9Vy5jaGFyQXQoQyksZSs9XCJuXCI9PT1UPyQ6XCIkXCI9PT1UfHxcIiVcIj09PVQ/bzpUO3JldHVybiBlfWlmKEcmJihlPS1lKSwodC5pbmRleE9mKFwiJ1wiKT4tMXx8dC5pbmRleE9mKCdcIicpPi0xfHx0LmluZGV4T2YoXCJcXFxcXCIpPi0xKSYmKHQ9dC5yZXBsYWNlKGgsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGFyQXQoMCkucmVwbGFjZShcIlxcXFxcIixcIlwiKSxuPWUuc2xpY2UoMSkucmVwbGFjZSh0LFwiXCIpO3JldHVybiBqLnB1c2gobikseX0pKSx0PXQuc3BsaXQoXCI7XCIpLEcmJnRbMV0pdD10WzFdLEE9ITA7ZWxzZSBpZigwPT09ZSl7aWYodD10WzJdfHx0WzBdLC0xPT10LmluZGV4T2YodikmJi0xPT10LmluZGV4T2YoXykpcmV0dXJuIHR9ZWxzZSB0PXRbMF07aWYoRj10LmluZGV4T2YoXCIlXCIpLFI9dC5pbmRleE9mKFwiJFwiKSxzPS0xIT1GLGE9LTEhPVIscyYmKGUqPTEwMCksYSYmXCJcXFxcXCI9PT10W1ItMV0mJih0PXQuc3BsaXQoXCJcXFxcXCIpLmpvaW4oXCJcIiksYT0hMSksKGF8fHMpJiYoTz1hP08uY3VycmVuY3k6Ty5wZXJjZW50LEg9Ty5ncm91cFNpemVbMF0sTj1PW21dLFY9T1tnXSxVPU8uZGVjaW1hbHMsbz1PLnN5bWJvbCksRD10LmluZGV4T2YobSk+LTEsRCYmKHQ9dC5yZXBsYWNlKHAsZikpLEU9dC5pbmRleE9mKGcpLFM9dC5sZW5ndGgsLTEhPUU/KGI9KFwiXCIrZSkuc3BsaXQoXCJlXCIpLGI9YlsxXT9sKGUsTWF0aC5hYnMoYlsxXSkpOmJbMF0sYj1iLnNwbGl0KGcpWzFdfHxmLFA9dC5sYXN0SW5kZXhPZihfKS1FLE09dC5sYXN0SW5kZXhPZih2KS1FLEk9UD4tMSx6PU0+LTEsQz1iLmxlbmd0aCxJfHx6fHwodD10LnN1YnN0cmluZygwLEUpK3Quc3Vic3RyaW5nKEUrMSksUz10Lmxlbmd0aCxFPS0xLEM9MCksSSYmUD5NP0M9UDpNPlAmJih6JiZDPk0/Qz1NOkkmJlA+QyYmKEM9UCkpLEM+LTEmJihlPWwoZSxDKSkpOmU9bChlKSxNPXQuaW5kZXhPZih2KSxCPVA9dC5pbmRleE9mKF8pLFk9LTE9PU0mJi0xIT1QP1A6LTEhPU0mJi0xPT1QP006TT5QP1A6TSxNPXQubGFzdEluZGV4T2YodiksUD10Lmxhc3RJbmRleE9mKF8pLEw9LTE9PU0mJi0xIT1QP1A6LTEhPU0mJi0xPT1QP006TT5QP006UCxZPT1TJiYoTD1ZKSwtMSE9WSl7aWYoJD0oXCJcIitlKS5zcGxpdChnKSx3PSRbMF0sYj0kWzFdfHxmLGs9dy5sZW5ndGgseD1iLmxlbmd0aCxHJiYtMSplPj0wJiYoRz0hMSksRClpZihrPT09SCYmRS1CPmspdz1OK3c7ZWxzZSBpZihrPkgpe2ZvcigkPWYsQz0wO2s+QztDKyspQz4wJiYoay1DKSVIPT09MCYmKCQrPU4pLCQrPXcuY2hhckF0KEMpO3c9JH1mb3IoZT10LnN1YnN0cmluZygwLFkpLEcmJiFBJiYoZSs9XCItXCIpLEM9WTtTPkM7QysrKXtpZihUPXQuY2hhckF0KEMpLC0xPT1FKXtpZihrPkwtQyl7ZSs9dzticmVha319ZWxzZSBpZigtMSE9UCYmQz5QJiYocT1mKSxrPj1FLUMmJkUtQz4tMSYmKGUrPXcsQz1FKSxFPT09Qyl7ZSs9KGI/VjpmKStiLEMrPUwtRSsxO2NvbnRpbnVlfVQ9PT1fPyhlKz1ULHE9VCk6VD09PXYmJihlKz1xKX1pZihMPj1ZJiYoZSs9dC5zdWJzdHJpbmcoTCsxKSksYXx8cyl7Zm9yKCQ9ZixDPTAsUz1lLmxlbmd0aDtTPkM7QysrKVQ9ZS5jaGFyQXQoQyksJCs9XCIkXCI9PT1UfHxcIiVcIj09PVQ/bzpUO2U9JH1pZihTPWoubGVuZ3RoKWZvcihDPTA7Uz5DO0MrKyllPWUucmVwbGFjZSh5LGpbQ10pfXJldHVybiBlfXZhciBsLGMsZD0vZGRkZHxkZGR8ZGR8ZHxNTU1NfE1NTXxNTXxNfHl5eXl8eXl8SEh8SHxoaHxofG1tfG18ZmZmfGZmfGZ8dHR8c3N8c3x6enp8enp8enxcIlteXCJdKlwifCdbXiddKicvZyx1PS9eKG58Y3xwfGUpKFxcZCopJC9pLGg9LyhcXFxcLil8KFsnXVteJ10qWyddPyl8KFtcIl1bXlwiXSpbXCJdPykvZyxwPS9cXCwvZyxmPVwiXCIsZz1cIi5cIixtPVwiLFwiLHY9XCIjXCIsXz1cIjBcIix5PVwiPz9cIix3PVwiZW4tVVNcIixiPXt9LnRvU3RyaW5nO2d0LmN1bHR1cmVzW1wiZW4tVVNcIl09e25hbWU6dyxudW1iZXJGb3JtYXQ6e3BhdHRlcm46W1wiLW5cIl0sZGVjaW1hbHM6MixcIixcIjpcIixcIixcIi5cIjpcIi5cIixncm91cFNpemU6WzNdLHBlcmNlbnQ6e3BhdHRlcm46W1wiLW4gJVwiLFwibiAlXCJdLGRlY2ltYWxzOjIsXCIsXCI6XCIsXCIsXCIuXCI6XCIuXCIsZ3JvdXBTaXplOlszXSxzeW1ib2w6XCIlXCJ9LGN1cnJlbmN5OntwYXR0ZXJuOltcIigkbilcIixcIiRuXCJdLGRlY2ltYWxzOjIsXCIsXCI6XCIsXCIsXCIuXCI6XCIuXCIsZ3JvdXBTaXplOlszXSxzeW1ib2w6XCIkXCJ9fSxjYWxlbmRhcnM6e3N0YW5kYXJkOntkYXlzOntuYW1lczpbXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSxuYW1lc0FiYnI6W1wiU3VuXCIsXCJNb25cIixcIlR1ZVwiLFwiV2VkXCIsXCJUaHVcIixcIkZyaVwiLFwiU2F0XCJdLG5hbWVzU2hvcnQ6W1wiU3VcIixcIk1vXCIsXCJUdVwiLFwiV2VcIixcIlRoXCIsXCJGclwiLFwiU2FcIl19LG1vbnRoczp7bmFtZXM6W1wiSmFudWFyeVwiLFwiRmVicnVhcnlcIixcIk1hcmNoXCIsXCJBcHJpbFwiLFwiTWF5XCIsXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLG5hbWVzQWJicjpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdfSxBTTpbXCJBTVwiLFwiYW1cIixcIkFNXCJdLFBNOltcIlBNXCIsXCJwbVwiLFwiUE1cIl0scGF0dGVybnM6e2Q6XCJNL2QveXl5eVwiLEQ6XCJkZGRkLCBNTU1NIGRkLCB5eXl5XCIsRjpcImRkZGQsIE1NTU0gZGQsIHl5eXkgaDptbTpzcyB0dFwiLGc6XCJNL2QveXl5eSBoOm1tIHR0XCIsRzpcIk0vZC95eXl5IGg6bW06c3MgdHRcIixtOlwiTU1NTSBkZFwiLE06XCJNTU1NIGRkXCIsczpcInl5eXknLSdNTSctJ2RkVEhIJzonbW0nOidzc1wiLHQ6XCJoOm1tIHR0XCIsVDpcImg6bW06c3MgdHRcIix1OlwieXl5eSctJ01NJy0nZGQgSEgnOidtbSc6J3NzJ1onXCIseTpcIk1NTU0sIHl5eXlcIixZOlwiTU1NTSwgeXl5eVwifSxcIi9cIjpcIi9cIixcIjpcIjpcIjpcIixmaXJzdERheTowLHR3b0RpZ2l0WWVhck1heDoyMDI5fX19LGd0LmN1bHR1cmU9ZnVuY3Rpb24oZSl7dmFyIGksbz1ndC5jdWx0dXJlcztyZXR1cm4gZT09PW4/by5jdXJyZW50OihpPXQoZSl8fG9bd10saS5jYWxlbmRhcj1pLmNhbGVuZGFycy5zdGFuZGFyZCxvLmN1cnJlbnQ9aSxPdCYmIU90LmxvYWQmJnIoaS5udW1iZXJGb3JtYXQpLG4pfSxndC5maW5kQ3VsdHVyZT10LGd0LmdldEN1bHR1cmU9aSxndC5jdWx0dXJlKHcpLGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHwwLGU9KFwiXCIrZSkuc3BsaXQoXCJlXCIpLGU9TWF0aC5yb3VuZCgrKGVbMF0rXCJlXCIrKGVbMV0/K2VbMV0rdDp0KSkpLGU9KFwiXCIrZSkuc3BsaXQoXCJlXCIpLGU9KyhlWzBdK1wiZVwiKyhlWzFdPytlWzFdLXQ6LXQpKSxlLnRvRml4ZWQodCl9LGM9ZnVuY3Rpb24oZSx0LGkpe2lmKHQpe2lmKFwiW29iamVjdCBEYXRlXVwiPT09Yi5jYWxsKGUpKXJldHVybiBhKGUsdCxpKTtpZih0eXBlb2YgZT09PU10KXJldHVybiBzKGUsdCxpKX1yZXR1cm4gZSE9PW4/ZTpcIlwifSxPdCYmIU90LmxvYWQmJihjPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gZS5pc1BsYWluT2JqZWN0KGkpJiYoaT1pLm5hbWUpLE90LmZvcm1hdCh0LG4saSl9KSxndC5mb3JtYXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzO3JldHVybiBlLnJlcGxhY2UoU3QsZnVuY3Rpb24oZSxuLGkpe3ZhciByPXRbcGFyc2VJbnQobiwxMCkrMV07cmV0dXJuIGMocixpP2kuc3Vic3RyaW5nKDEpOlwiXCIpfSl9LGd0Ll9leHRyYWN0Rm9ybWF0PWZ1bmN0aW9uKGUpe3JldHVyblwiezA6XCI9PT1lLnNsaWNlKDAsMykmJihlPWUuc2xpY2UoMyxlLmxlbmd0aC0xKSksZX0sZ3QuX2FjdGl2ZUVsZW1lbnQ9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hY3RpdmVFbGVtZW50fX0sZ3QuX3JvdW5kPWwsZ3QudG9TdHJpbmc9Y30oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0LG4pe3JldHVybiEoZT49dCYmbj49ZSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5jaGFyQXQoMCl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZS5tYXAodCxpKX1mdW5jdGlvbiBvKGUsdCl7dHx8MjMhPT1lLmdldEhvdXJzKCl8fGUuc2V0SG91cnMoZS5nZXRIb3VycygpKzIpfWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxpPVtdO24+dDt0KyspaVt0XT0oZVt0XStcIlwiKS50b0xvd2VyQ2FzZSgpO3JldHVybiBpfWZ1bmN0aW9uIHMoZSl7dmFyIHQsbj17fTtmb3IodCBpbiBlKW5bdF09YShlW3RdKTtyZXR1cm4gbn1mdW5jdGlvbiBsKGUsaSxhKXtpZighZSlyZXR1cm4gbnVsbDt2YXIgbCxjLGQsdSxmLGcsbSxfLHksdyxiLGsseCxDPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2lbQl09PT1lOyl0KyssQisrO3JldHVybiB0PjAmJihCLT0xKSx0fSxTPWZ1bmN0aW9uKHQpe3ZhciBuPXZbdF18fFJlZ0V4cChcIl5cXFxcZHsxLFwiK3QrXCJ9XCIpLGk9ZS5zdWJzdHIoTCx0KS5tYXRjaChuKTtyZXR1cm4gaT8oaT1pWzBdLEwrPWkubGVuZ3RoLHBhcnNlSW50KGksMTApKTpudWxsfSxUPWZ1bmN0aW9uKHQsbil7Zm9yKHZhciBpLHIsbyxhPTAscz10Lmxlbmd0aDtzPmE7YSsrKWlmKGk9dFthXSxyPWkubGVuZ3RoLG89ZS5zdWJzdHIoTCxyKSxuJiYobz1vLnRvTG93ZXJDYXNlKCkpLG89PWkpcmV0dXJuIEwrPXIsYSsxO3JldHVybiBudWxsfSxEPWZ1bmN0aW9uKCl7dmFyIHQ9ITE7cmV0dXJuIGUuY2hhckF0KEwpPT09aVtCXSYmKEwrKyx0PSEwKSx0fSxBPWEuY2FsZW5kYXJzLnN0YW5kYXJkLEU9bnVsbCxNPW51bGwsUD1udWxsLEk9bnVsbCx6PW51bGwsRj1udWxsLFI9bnVsbCxCPTAsTD0wLE89ITEsSD1uZXcgRGF0ZSxOPUEudHdvRGlnaXRZZWFyTWF4fHwyMDI5LFY9SC5nZXRGdWxsWWVhcigpO2ZvcihpfHwoaT1cImRcIiksdT1BLnBhdHRlcm5zW2ldLHUmJihpPXUpLGk9aS5zcGxpdChcIlwiKSxkPWkubGVuZ3RoO2Q+QjtCKyspaWYobD1pW0JdLE8pXCInXCI9PT1sP089ITE6RCgpO2Vsc2UgaWYoXCJkXCI9PT1sKXtpZihjPUMoXCJkXCIpLEEuX2xvd2VyRGF5c3x8KEEuX2xvd2VyRGF5cz1zKEEuZGF5cykpLFA9Mz5jP1MoMik6VChBLl9sb3dlckRheXNbMz09Yz9cIm5hbWVzQWJiclwiOlwibmFtZXNcIl0sITApLG51bGw9PT1QfHx0KFAsMSwzMSkpcmV0dXJuIG51bGx9ZWxzZSBpZihcIk1cIj09PWwpe2lmKGM9QyhcIk1cIiksQS5fbG93ZXJNb250aHN8fChBLl9sb3dlck1vbnRocz1zKEEubW9udGhzKSksTT0zPmM/UygyKTpUKEEuX2xvd2VyTW9udGhzWzM9PWM/XCJuYW1lc0FiYnJcIjpcIm5hbWVzXCJdLCEwKSxudWxsPT09TXx8dChNLDEsMTIpKXJldHVybiBudWxsO00tPTF9ZWxzZSBpZihcInlcIj09PWwpe2lmKGM9QyhcInlcIiksRT1TKGMpLG51bGw9PT1FKXJldHVybiBudWxsOzI9PWMmJihcInN0cmluZ1wiPT10eXBlb2YgTiYmKE49VitwYXJzZUludChOLDEwKSksRT1WLVYlMTAwK0UsRT5OJiYoRS09MTAwKSl9ZWxzZSBpZihcImhcIj09PWwpe2lmKEMoXCJoXCIpLEk9UygyKSwxMj09SSYmKEk9MCksbnVsbD09PUl8fHQoSSwwLDExKSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwiSFwiPT09bCl7aWYoQyhcIkhcIiksST1TKDIpLG51bGw9PT1JfHx0KEksMCwyMykpcmV0dXJuIG51bGx9ZWxzZSBpZihcIm1cIj09PWwpe2lmKEMoXCJtXCIpLHo9UygyKSxudWxsPT09enx8dCh6LDAsNTkpKXJldHVybiBudWxsfWVsc2UgaWYoXCJzXCI9PT1sKXtpZihDKFwic1wiKSxGPVMoMiksbnVsbD09PUZ8fHQoRiwwLDU5KSlyZXR1cm4gbnVsbH1lbHNlIGlmKFwiZlwiPT09bCl7aWYoYz1DKFwiZlwiKSx4PWUuc3Vic3RyKEwsYykubWF0Y2godlszXSksUj1TKGMpLG51bGwhPT1SJiYoeD14WzBdLmxlbmd0aCwzPngmJihSKj1NYXRoLnBvdygxMCwzLXgpKSxjPjMmJihSPXBhcnNlSW50KChcIlwiK1IpLnN1YnN0cmluZygwLDMpLDEwKSkpLG51bGw9PT1SfHx0KFIsMCw5OTkpKXJldHVybiBudWxsfWVsc2UgaWYoXCJ0XCI9PT1sKXtpZihjPUMoXCJ0XCIpLF89QS5BTSx5PUEuUE0sMT09PWMmJihfPXIoXykseT1yKHkpKSxmPVQoeSksIWYmJiFUKF8pKXJldHVybiBudWxsfWVsc2UgaWYoXCJ6XCI9PT1sKXtpZihnPSEwLGM9QyhcInpcIiksXCJaXCI9PT1lLnN1YnN0cihMLDEpKXtEKCk7Y29udGludWV9aWYobT1lLnN1YnN0cihMLDYpLm1hdGNoKGM+Mj9wOmgpLCFtKXJldHVybiBudWxsO2lmKG09bVswXS5zcGxpdChcIjpcIiksdz1tWzBdLGI9bVsxXSwhYiYmdy5sZW5ndGg+MyYmKEw9dy5sZW5ndGgtMixiPXcuc3Vic3RyaW5nKEwpLHc9dy5zdWJzdHJpbmcoMCxMKSksdz1wYXJzZUludCh3LDEwKSx0KHcsLTEyLDEzKSlyZXR1cm4gbnVsbDtpZihjPjImJihiPXBhcnNlSW50KGIsMTApLGlzTmFOKGIpfHx0KGIsMCw1OSkpKXJldHVybiBudWxsfWVsc2UgaWYoXCInXCI9PT1sKU89ITAsRCgpO2Vsc2UgaWYoIUQoKSlyZXR1cm4gbnVsbDtyZXR1cm4gaz1udWxsIT09SXx8bnVsbCE9PXp8fEZ8fG51bGwsbnVsbD09PUUmJm51bGw9PT1NJiZudWxsPT09UCYmaz8oRT1WLE09SC5nZXRNb250aCgpLFA9SC5nZXREYXRlKCkpOihudWxsPT09RSYmKEU9ViksbnVsbD09PVAmJihQPTEpKSxmJiYxMj5JJiYoSSs9MTIpLGc/KHcmJihJKz0tdyksYiYmKHorPS1iKSxlPW5ldyBEYXRlKERhdGUuVVRDKEUsTSxQLEkseixGLFIpKSk6KGU9bmV3IERhdGUoRSxNLFAsSSx6LEYsUiksbyhlLEkpKSwxMDA+RSYmZS5zZXRGdWxsWWVhcihFKSxlLmdldERhdGUoKSE9PVAmJmc9PT1uP251bGw6ZX1mdW5jdGlvbiBjKGUpe3ZhciB0PVwiLVwiPT09ZS5zdWJzdHIoMCwxKT8tMToxO3JldHVybiBlPWUuc3Vic3RyaW5nKDEpLGU9NjAqcGFyc2VJbnQoZS5zdWJzdHIoMCwyKSwxMCkrcGFyc2VJbnQoZS5zdWJzdHJpbmcoMiksMTApLHQqZX12YXIgZD0vXFx1MDBBMC9nLHU9L1tlRV1bXFwtK10/WzAtOV0rLyxoPS9bK3xcXC1dXFxkezEsMn0vLHA9L1srfFxcLV1cXGR7MSwyfTo/XFxkezJ9LyxmPS9eXFwvRGF0ZVxcKCguKj8pXFwpXFwvJC8sZz0vWystXVxcZCovLG09W1wiR1wiLFwiZ1wiLFwiZFwiLFwiRlwiLFwiRFwiLFwieVwiLFwibVwiLFwiVFwiLFwidFwiXSx2PXsyOi9eXFxkezEsMn0vLDM6L15cXGR7MSwzfS8sNDovXlxcZHs0fS99LF89e30udG9TdHJpbmc7Z3QucGFyc2VEYXRlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzO2lmKFwiW29iamVjdCBEYXRlXVwiPT09Xy5jYWxsKGUpKXJldHVybiBlO2lmKGk9MCxyPW51bGwsZSYmMD09PWUuaW5kZXhPZihcIi9EXCIpJiYocj1mLmV4ZWMoZSkpKXJldHVybiByPXJbMV0scz1nLmV4ZWMoci5zdWJzdHJpbmcoMSkpLHI9bmV3IERhdGUocGFyc2VJbnQociwxMCkpLHMmJihzPWMoc1swXSkscj1ndC50aW1lem9uZS5hcHBseShyLDApLHI9Z3QudGltZXpvbmUuY29udmVydChyLDAsLTEqcykpLHI7aWYobj1ndC5nZXRDdWx0dXJlKG4pLCF0KXtmb3IodD1bXSxhPW4uY2FsZW5kYXIucGF0dGVybnMsbz1tLmxlbmd0aDtvPmk7aSsrKXRbaV09YVttW2ldXTtpPTAsdD1bXCJ5eXl5L01NL2RkIEhIOm1tOnNzXCIsXCJ5eXl5L01NL2RkIEhIOm1tXCIsXCJ5eXl5L01NL2RkXCIsXCJkZGQgTU1NIGRkIHl5eXkgSEg6bW06c3NcIixcInl5eXktTU0tZGRUSEg6bW06c3MuZmZmZmZmZnp6elwiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZ6enpcIixcInl5eXktTU0tZGRUSEg6bW06c3N6enpcIixcInl5eXktTU0tZGRUSEg6bW06c3MuZmZmZmZmZlwiLFwieXl5eS1NTS1kZFRISDptbTpzcy5mZmZcIixcInl5eXktTU0tZGRUSEg6bW16enpcIixcInl5eXktTU0tZGRUSEg6bW16elwiLFwieXl5eS1NTS1kZFRISDptbTpzc1wiLFwieXl5eS1NTS1kZFRISDptbVwiLFwieXl5eS1NTS1kZCBISDptbTpzc1wiLFwieXl5eS1NTS1kZCBISDptbVwiLFwieXl5eS1NTS1kZFwiLFwiSEg6bW06c3NcIixcIkhIOm1tXCJdLmNvbmNhdCh0KX1mb3IodD1fdCh0KT90Olt0XSxvPXQubGVuZ3RoO28+aTtpKyspaWYocj1sKGUsdFtpXSxuKSlyZXR1cm4gcjtyZXR1cm4gcn0sZ3QucGFyc2VJbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1ndC5wYXJzZUZsb2F0KGUsdCk7cmV0dXJuIG4mJihuPTB8biksbn0sZ3QucGFyc2VGbG9hdD1mdW5jdGlvbihlLHQsbil7aWYoIWUmJjAhPT1lKXJldHVybiBudWxsO2lmKHR5cGVvZiBlPT09TXQpcmV0dXJuIGU7ZT1cIlwiK2UsdD1ndC5nZXRDdWx0dXJlKHQpO3ZhciBpLHIsbz10Lm51bWJlckZvcm1hdCxhPW8ucGVyY2VudCxzPW8uY3VycmVuY3ksbD1zLnN5bWJvbCxjPWEuc3ltYm9sLGg9ZS5pbmRleE9mKFwiLVwiKTtyZXR1cm4gdS50ZXN0KGUpPyhlPXBhcnNlRmxvYXQoZS5yZXBsYWNlKG9bXCIuXCJdLFwiLlwiKSksaXNOYU4oZSkmJihlPW51bGwpLGUpOmg+MD9udWxsOihoPWg+LTEsZS5pbmRleE9mKGwpPi0xfHxuJiZuLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNcIik+LTE/KG89cyxpPW8ucGF0dGVyblswXS5yZXBsYWNlKFwiJFwiLGwpLnNwbGl0KFwiblwiKSxlLmluZGV4T2YoaVswXSk+LTEmJmUuaW5kZXhPZihpWzFdKT4tMSYmKGU9ZS5yZXBsYWNlKGlbMF0sXCJcIikucmVwbGFjZShpWzFdLFwiXCIpLGg9ITApKTplLmluZGV4T2YoYyk+LTEmJihyPSEwLG89YSxsPWMpLGU9ZS5yZXBsYWNlKFwiLVwiLFwiXCIpLnJlcGxhY2UobCxcIlwiKS5yZXBsYWNlKGQsXCIgXCIpLnNwbGl0KG9bXCIsXCJdLnJlcGxhY2UoZCxcIiBcIikpLmpvaW4oXCJcIikucmVwbGFjZShvW1wiLlwiXSxcIi5cIiksZT1wYXJzZUZsb2F0KGUpLGlzTmFOKGUpP2U9bnVsbDpoJiYoZSo9LTEpLGUmJnImJihlLz0xMDApLGUpfSxPdCYmIU90LmxvYWQmJihndC5wYXJzZURhdGU9ZnVuY3Rpb24oZSx0LG4pe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09Xy5jYWxsKGUpP2U6T3QucGFyc2VEYXRlKGUsdCxuKX0sZ3QucGFyc2VGbG9hdD1mdW5jdGlvbih0LGkpe3JldHVybiB0eXBlb2YgdD09PU10P3Q6dD09PW58fG51bGw9PT10P251bGw6KGUuaXNQbGFpbk9iamVjdChpKSYmKGk9aS5uYW1lKSx0PU90LnBhcnNlRmxvYXQodCxpKSxpc05hTih0KT9udWxsOnQpfSl9KCksZnVuY3Rpb24oKXt2YXIgaSxyLG8sYSxzLGwsYzt4dC5fc2Nyb2xsYmFyPW4seHQuc2Nyb2xsYmFyPWZ1bmN0aW9uKGUpe2lmKGlzTmFOKHh0Ll9zY3JvbGxiYXIpfHxlKXt2YXIgdCxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIG4uc3R5bGUuY3NzVGV4dD1cIm92ZXJmbG93OnNjcm9sbDtvdmVyZmxvdy14OmhpZGRlbjt6b29tOjE7Y2xlYXI6Ym90aDtkaXNwbGF5OmJsb2NrXCIsbi5pbm5lckhUTUw9XCImbmJzcDtcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLHh0Ll9zY3JvbGxiYXI9dD1uLm9mZnNldFdpZHRoLW4uc2Nyb2xsV2lkdGgsZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChuKSx0fXJldHVybiB4dC5fc2Nyb2xsYmFyfSx4dC5pc1J0bD1mdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5jbG9zZXN0KFwiLmstcnRsXCIpLmxlbmd0aD4wfSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTt0cnl7aS5pbm5lckhUTUw9XCI8dHI+PHRkPjwvdGQ+PC90cj5cIix4dC50Ym9keUlubmVySHRtbD0hMH1jYXRjaCh1KXt4dC50Ym9keUlubmVySHRtbD0hMX14dC50b3VjaD1cIm9udG91Y2hzdGFydFwiaW4gdCx4dC5tc1BvaW50ZXJzPXQuTVNQb2ludGVyRXZlbnQseHQucG9pbnRlcnM9dC5Qb2ludGVyRXZlbnQscj14dC50cmFuc2l0aW9ucz0hMSxvPXh0LnRyYW5zZm9ybXM9ITEsYT1cIkhUTUxFbGVtZW50XCJpbiB0P0hUTUxFbGVtZW50LnByb3RvdHlwZTpbXSx4dC5oYXNIVzNEPVwiV2ViS2l0Q1NTTWF0cml4XCJpbiB0JiZcIm0xMVwiaW4gbmV3IHQuV2ViS2l0Q1NTTWF0cml4fHxcIk1velBlcnNwZWN0aXZlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGV8fFwibXNQZXJzcGVjdGl2ZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLHZ0KFtcIk1velwiLFwid2Via2l0XCIsXCJPXCIsXCJtc1wiXSxmdW5jdGlvbigpe3ZhciBlLHQ9XCJcIit0aGlzLGE9dHlwZW9mIGkuc3R5bGVbdCtcIlRyYW5zaXRpb25cIl09PT1FdDtyZXR1cm4gYXx8dHlwZW9mIGkuc3R5bGVbdCtcIlRyYW5zZm9ybVwiXT09PUV0PyhlPXQudG9Mb3dlckNhc2UoKSxvPXtjc3M6XCJtc1wiIT1lP1wiLVwiK2UrXCItXCI6XCJcIixwcmVmaXg6dCxldmVudDpcIm9cIj09PWV8fFwid2Via2l0XCI9PT1lP2U6XCJcIn0sYSYmKHI9byxyLmV2ZW50PXIuZXZlbnQ/ci5ldmVudCtcIlRyYW5zaXRpb25FbmRcIjpcInRyYW5zaXRpb25lbmRcIiksITEpOm59KSxpPW51bGwseHQudHJhbnNmb3Jtcz1vLHh0LnRyYW5zaXRpb25zPXIseHQuZGV2aWNlUGl4ZWxSYXRpbz10LmRldmljZVBpeGVsUmF0aW89PT1uPzE6dC5kZXZpY2VQaXhlbFJhdGlvO3RyeXt4dC5zY3JlZW5XaWR0aD10Lm91dGVyV2lkdGh8fHQuc2NyZWVuP3Quc2NyZWVuLmF2YWlsV2lkdGg6dC5pbm5lcldpZHRoLHh0LnNjcmVlbkhlaWdodD10Lm91dGVySGVpZ2h0fHx0LnNjcmVlbj90LnNjcmVlbi5hdmFpbEhlaWdodDp0LmlubmVySGVpZ2h0fWNhdGNoKHUpe3h0LnNjcmVlbldpZHRoPXQuc2NyZWVuLmF2YWlsV2lkdGgseHQuc2NyZWVuSGVpZ2h0PXQuc2NyZWVuLmF2YWlsSGVpZ2h0fXh0LmRldGVjdE9TPWZ1bmN0aW9uKGUpe3ZhciBuLGkscj0hMSxvPVtdLGE9IS9tb2JpbGUgc2FmYXJpL2kudGVzdChlKSxzPXt3cDovKFdpbmRvd3MgUGhvbmUoPzogT1MpPylcXHMoXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxmaXJlOi8oU2lsaylcXC8oXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyxhbmRyb2lkOi8oQW5kcm9pZHxBbmRyb2lkLiooPzpPcGVyYXxGaXJlZm94KS4qP1xcLylcXHMqKFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS8saXBob25lOi8oaVBob25lfGlQb2QpLipPU1xccysoXFxkKylbXFwuX10oW1xcZFxcLl9dKykvLGlwYWQ6LyhpUGFkKS4qT1NcXHMrKFxcZCspW1xcLl9dKFtcXGRfXSspLyxtZWVnbzovKE1lZUdvKS4rTm9raWFCcm93c2VyXFwvKFxcZCspXFwuKFtcXGRcXC5fXSspLyx3ZWJvczovKHdlYk9TKVxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLGJsYWNrYmVycnk6LyhCbGFja0JlcnJ5fEJCMTApLio/VmVyc2lvblxcLyhcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLHBsYXlib29rOi8oUGxheUJvb2spLio/VGFibGV0XFxzKk9TXFxzKihcXGQrKVxcLihcXGQrKFxcLlxcZCspPykvLHdpbmRvd3M6LyhNU0lFKVxccysoXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pLyx0aXplbjovKHRpemVuKS4qP1ZlcnNpb25cXC8oXFxkKylcXC4oXFxkKyhcXC5cXGQrKT8pL2ksc2FpbGZpc2g6LyhzYWlsZmlzaCkuKnJ2OihcXGQrKVxcLihcXGQrKFxcLlxcZCspPykuKmZpcmVmb3gvaSxmZm9zOi8oTW9iaWxlKS4qcnY6KFxcZCspXFwuKFxcZCsoXFwuXFxkKyk/KS4qRmlyZWZveC99LGw9e2lvczovXmkocGhvbmV8cGFkfHBvZCkkL2ksYW5kcm9pZDovXmFuZHJvaWR8ZmlyZSQvaSxibGFja2JlcnJ5Oi9eYmxhY2tiZXJyeXxwbGF5Ym9vay9pLHdpbmRvd3M6L3dpbmRvd3MvLHdwOi93cC8sZmxhdDovc2FpbGZpc2h8ZmZvc3x0aXplbi9pLG1lZWdvOi9tZWVnby99LGM9e3RhYmxldDovcGxheWJvb2t8aXBhZHxmaXJlL2l9LHU9e29taW5pOi9PcGVyYVxcc01pbmkvaSxvbW9iaWxlOi9PcGVyYVxcc01vYmkvaSxmaXJlZm94Oi9GaXJlZm94fEZlbm5lYy9pLG1vYmlsZXNhZmFyaTovdmVyc2lvblxcLy4qc2FmYXJpL2ksaWU6L01TSUV8V2luZG93c1xcc1Bob25lL2ksY2hyb21lOi9jaHJvbWV8Y3Jpb3MvaSx3ZWJraXQ6L3dlYmtpdC9pfTtmb3IoaSBpbiBzKWlmKHMuaGFzT3duUHJvcGVydHkoaSkmJihvPWUubWF0Y2goc1tpXSkpKXtpZihcIndpbmRvd3NcIj09aSYmXCJwbHVnaW5zXCJpbiBuYXZpZ2F0b3IpcmV0dXJuITE7cj17fSxyLmRldmljZT1pLHIudGFibGV0PWQoaSxjLCExKSxyLmJyb3dzZXI9ZChlLHUsXCJkZWZhdWx0XCIpLHIubmFtZT1kKGksbCkscltyLm5hbWVdPSEwLHIubWFqb3JWZXJzaW9uPW9bMl0sci5taW5vclZlcnNpb249b1szXS5yZXBsYWNlKFwiX1wiLFwiLlwiKSxuPXIubWlub3JWZXJzaW9uLnJlcGxhY2UoXCIuXCIsXCJcIikuc3Vic3RyKDAsMiksci5mbGF0VmVyc2lvbj1yLm1ham9yVmVyc2lvbituK0FycmF5KDMtKDM+bi5sZW5ndGg/bi5sZW5ndGg6MikpLmpvaW4oXCIwXCIpLHIuY29yZG92YT10eXBlb2YgdC5QaG9uZUdhcCE9PUZ0fHx0eXBlb2YgdC5jb3Jkb3ZhIT09RnQsci5hcHBNb2RlPXQubmF2aWdhdG9yLnN0YW5kYWxvbmV8fC9maWxlfGxvY2FsfHdtYXBwLy50ZXN0KHQubG9jYXRpb24ucHJvdG9jb2wpfHxyLmNvcmRvdmEsci5hbmRyb2lkJiYoMS41Pnh0LmRldmljZVBpeGVsUmF0aW8mJjQwMD5yLmZsYXRWZXJzaW9ufHxhKSYmKHh0LnNjcmVlbldpZHRoPjgwMHx8eHQuc2NyZWVuSGVpZ2h0PjgwMCkmJihyLnRhYmxldD1pKTticmVha31yZXR1cm4gcn0scz14dC5tb2JpbGVPUz14dC5kZXRlY3RPUyhuYXZpZ2F0b3IudXNlckFnZW50KSx4dC53cERldmljZVBpeGVsUmF0aW89cy53cD9zY3JlZW4ud2lkdGgvMzIwOjAseHQua2luZXRpY1Njcm9sbE5lZWRlZD1zJiYoeHQudG91Y2h8fHh0Lm1zUG9pbnRlcnN8fHh0LnBvaW50ZXJzKSx4dC5oYXNOYXRpdmVTY3JvbGxpbmc9ITEsKHMuaW9zfHxzLmFuZHJvaWQmJnMubWFqb3JWZXJzaW9uPjJ8fHMud3ApJiYoeHQuaGFzTmF0aXZlU2Nyb2xsaW5nPXMpLHh0Lm1vdXNlQW5kVG91Y2hQcmVzZW50PXh0LnRvdWNoJiYhKHh0Lm1vYmlsZU9TLmlvc3x8eHQubW9iaWxlT1MuYW5kcm9pZCkseHQuZGV0ZWN0QnJvd3Nlcj1mdW5jdGlvbihlKXt2YXIgdCxuPSExLGk9W10scj17d2Via2l0Oi8oY2hyb21lKVsgXFwvXShbXFx3Ll0rKS9pLHNhZmFyaTovKHdlYmtpdClbIFxcL10oW1xcdy5dKykvaSxvcGVyYTovKG9wZXJhKSg/Oi4qdmVyc2lvbnwpWyBcXC9dKFtcXHcuXSspL2ksbXNpZTovKG1zaWVcXHN8dHJpZGVudC4qPyBydjopKFtcXHcuXSspL2ksbW96aWxsYTovKG1vemlsbGEpKD86Lio/IHJ2OihbXFx3Ll0rKXwpL2l9O2Zvcih0IGluIHIpaWYoci5oYXNPd25Qcm9wZXJ0eSh0KSYmKGk9ZS5tYXRjaChyW3RdKSkpe249e30sblt0XT0hMCxuW2lbMV0udG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIilbMF0uc3BsaXQoXCIvXCIpWzBdXT0hMCxuLnZlcnNpb249cGFyc2VJbnQoZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxpWzJdLDEwKTticmVha31yZXR1cm4gbn0seHQuYnJvd3Nlcj14dC5kZXRlY3RCcm93c2VyKG5hdmlnYXRvci51c2VyQWdlbnQpLHh0Lnpvb21MZXZlbD1mdW5jdGlvbigpe3RyeXtyZXR1cm4geHQudG91Y2g/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoL3QuaW5uZXJXaWR0aDp4dC5icm93c2VyLm1zaWUmJnh0LmJyb3dzZXIudmVyc2lvbj49MTA/KHRvcHx8dCkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoLyh0b3B8fHQpLmlubmVyV2lkdGg6MX1jYXRjaChlKXtyZXR1cm4gMX19LHh0LmNzc0JvcmRlclNwYWNpbmc9biE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5ib3JkZXJTcGFjaW5nJiYhKHh0LmJyb3dzZXIubXNpZSYmOD54dC5icm93c2VyLnZlcnNpb24pLGZ1bmN0aW9uKHQpe3ZhciBuPVwiXCIsaT1lKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkscj1wYXJzZUludCh0LnZlcnNpb24sMTApO3QubXNpZT9uPVwiaWVcIjp0Lm1vemlsbGE/bj1cImZmXCI6dC5zYWZhcmk/bj1cInNhZmFyaVwiOnQud2Via2l0P249XCJ3ZWJraXRcIjp0Lm9wZXJhJiYobj1cIm9wZXJhXCIpLG4mJihuPVwiay1cIituK1wiIGstXCIrbityKSx4dC5tb2JpbGVPUyYmKG4rPVwiIGstbW9iaWxlXCIpLGkuYWRkQ2xhc3Mobil9KHh0LmJyb3dzZXIpLHh0LmV2ZW50Q2FwdHVyZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcixsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx4dC5wbGFjZWhvbGRlcj1cInBsYWNlaG9sZGVyXCJpbiBsLHh0LnByb3BlcnR5Q2hhbmdlRXZlbnQ9XCJvbnByb3BlcnR5Y2hhbmdlXCJpbiBsLHh0LmlucHV0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9W1wibnVtYmVyXCIsXCJkYXRlXCIsXCJ0aW1lXCIsXCJtb250aFwiLFwid2Vla1wiLFwiZGF0ZXRpbWVcIixcImRhdGV0aW1lLWxvY2FsXCJdLG49dC5sZW5ndGgsaT1cInRlc3RcIixyPXt9LG89MDtuPm87bysrKWU9dFtvXSxsLnNldEF0dHJpYnV0ZShcInR5cGVcIixlKSxsLnZhbHVlPWkscltlLnJlcGxhY2UoXCItXCIsXCJcIildPVwidGV4dFwiIT09bC50eXBlJiZsLnZhbHVlIT09aTtyZXR1cm4gcn0oKSxsLnN0eWxlLmNzc1RleHQ9XCJmbG9hdDpsZWZ0O1wiLHh0LmNzc0Zsb2F0PSEhbC5zdHlsZS5jc3NGbG9hdCxsPW51bGwseHQuc3RhYmxlU29ydD1mdW5jdGlvbigpe3ZhciBlLHQ9NTEzLG49W3tpbmRleDowLGZpZWxkOlwiYlwifV07Zm9yKGU9MTt0PmU7ZSsrKW4ucHVzaCh7aW5kZXg6ZSxmaWVsZDpcImFcIn0pO3JldHVybiBuLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5maWVsZD50LmZpZWxkPzE6dC5maWVsZD5lLmZpZWxkPy0xOjB9KSwxPT09blswXS5pbmRleH0oKSx4dC5tYXRjaGVzU2VsZWN0b3I9YS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGEubW96TWF0Y2hlc1NlbGVjdG9yfHxhLm1zTWF0Y2hlc1NlbGVjdG9yfHxhLm9NYXRjaGVzU2VsZWN0b3J8fGEubWF0Y2hlc1NlbGVjdG9yfHxhLm1hdGNoZXN8fGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPyh0aGlzLnBhcmVudE5vZGV8fGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHQpfHxbXTplKHQpLGk9bi5sZW5ndGg7aS0tOylpZihuW2ldPT10aGlzKXJldHVybiEwO3JldHVybiExfSx4dC5wdXNoU3RhdGU9dC5oaXN0b3J5JiZ0Lmhpc3RvcnkucHVzaFN0YXRlLGM9ZG9jdW1lbnQuZG9jdW1lbnRNb2RlLHh0Lmhhc2hDaGFuZ2U9XCJvbmhhc2hjaGFuZ2VcImluIHQmJiEoeHQuYnJvd3Nlci5tc2llJiYoIWN8fDg+PWMpKX0oKSxWPXtsZWZ0OntyZXZlcnNlOlwicmlnaHRcIn0scmlnaHQ6e3JldmVyc2U6XCJsZWZ0XCJ9LGRvd246e3JldmVyc2U6XCJ1cFwifSx1cDp7cmV2ZXJzZTpcImRvd25cIn0sdG9wOntyZXZlcnNlOlwiYm90dG9tXCJ9LGJvdHRvbTp7cmV2ZXJzZTpcInRvcFwifSxcImluXCI6e3JldmVyc2U6XCJvdXRcIn0sb3V0OntyZXZlcnNlOlwiaW5cIn19LFU9e30sZS5leHRlbmQoVSx7ZW5hYmxlZDohMCxFbGVtZW50OmZ1bmN0aW9uKHQpe3RoaXMuZWxlbWVudD1lKHQpfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7ZS5pcyhcIjp2aXNpYmxlXCIpfHxlLmNzcyh7ZGlzcGxheTplLmRhdGEoXCJvbGRkaXNwbGF5XCIpfHxcImJsb2NrXCJ9KS5jc3MoXCJkaXNwbGF5XCIpLHQuaGlkZSYmZS5kYXRhKFwib2xkZGlzcGxheVwiLGUuY3NzKFwiZGlzcGxheVwiKSkuaGlkZSgpLHQuaW5pdCYmdC5pbml0KCksdC5jb21wbGV0ZUNhbGxiYWNrJiZ0LmNvbXBsZXRlQ2FsbGJhY2soZSksZS5kZXF1ZXVlKCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITEsdGhpcy5wcm9taXNlPXRoaXMucHJvbWlzZVNoaW19LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMCx0aGlzLnByb21pc2U9dGhpcy5hbmltYXRlZFByb21pc2V9fSksVS5wcm9taXNlU2hpbT1VLnByb21pc2UsXCJrZW5kb0FuaW1hdGVcImluIGUuZm58fG10KGUuZm4se2tlbmRvU3RvcDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN0b3AoZSx0KX0sa2VuZG9BbmltYXRlOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB5KHRoaXMsZSx0LG4saSl9LGtlbmRvQWRkQ2xhc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZ3QudG9nZ2xlQ2xhc3ModGhpcyxlLHQsITApfSxrZW5kb1JlbW92ZUNsYXNzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGd0LnRvZ2dsZUNsYXNzKHRoaXMsZSx0LCExKX0sa2VuZG9Ub2dnbGVDbGFzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGd0LnRvZ2dsZUNsYXNzKHRoaXMsZSx0LG4pfX0pLFc9LyYvZyxqPS88L2csRz0vXCIvZyxxPS8nL2csJD0vPi9nLFk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFyZ2V0fSx4dC50b3VjaCYmKFk9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJvcmlnaW5hbEV2ZW50XCJpbiBlP2Uub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlczpcImNoYW5nZWRUb3VjaGVzXCJpbiBlP2UuY2hhbmdlZFRvdWNoZXM6bnVsbDtyZXR1cm4gdD9kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRbMF0uY2xpZW50WCx0WzBdLmNsaWVudFkpOmUudGFyZ2V0fSx2dChbXCJzd2lwZVwiLFwic3dpcGVMZWZ0XCIsXCJzd2lwZVJpZ2h0XCIsXCJzd2lwZVVwXCIsXCJzd2lwZURvd25cIixcImRvdWJsZVRhcFwiLFwidGFwXCJdLGZ1bmN0aW9uKHQsbil7ZS5mbltuXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5iaW5kKG4sZSl9fSkpLHh0LnRvdWNoP3h0Lm1vYmlsZU9TPyh4dC5tb3VzZWRvd249XCJ0b3VjaHN0YXJ0XCIseHQubW91c2V1cD1cInRvdWNoZW5kXCIseHQubW91c2Vtb3ZlPVwidG91Y2htb3ZlXCIseHQubW91c2VjYW5jZWw9XCJ0b3VjaGNhbmNlbFwiLHh0LmNsaWNrPVwidG91Y2hlbmRcIix4dC5yZXNpemU9XCJvcmllbnRhdGlvbmNoYW5nZVwiKTooeHQubW91c2Vkb3duPVwibW91c2Vkb3duIHRvdWNoc3RhcnRcIix4dC5tb3VzZXVwPVwibW91c2V1cCB0b3VjaGVuZFwiLHh0Lm1vdXNlbW92ZT1cIm1vdXNlbW92ZSB0b3VjaG1vdmVcIix4dC5tb3VzZWNhbmNlbD1cIm1vdXNlbGVhdmUgdG91Y2hjYW5jZWxcIix4dC5jbGljaz1cImNsaWNrXCIseHQucmVzaXplPVwicmVzaXplXCIpOnh0LnBvaW50ZXJzPyh4dC5tb3VzZW1vdmU9XCJwb2ludGVybW92ZVwiLHh0Lm1vdXNlZG93bj1cInBvaW50ZXJkb3duXCIseHQubW91c2V1cD1cInBvaW50ZXJ1cFwiLHh0Lm1vdXNlY2FuY2VsPVwicG9pbnRlcmNhbmNlbFwiLHh0LmNsaWNrPVwicG9pbnRlcnVwXCIseHQucmVzaXplPVwib3JpZW50YXRpb25jaGFuZ2UgcmVzaXplXCIpOnh0Lm1zUG9pbnRlcnM/KHh0Lm1vdXNlbW92ZT1cIk1TUG9pbnRlck1vdmVcIix4dC5tb3VzZWRvd249XCJNU1BvaW50ZXJEb3duXCIseHQubW91c2V1cD1cIk1TUG9pbnRlclVwXCIseHQubW91c2VjYW5jZWw9XCJNU1BvaW50ZXJDYW5jZWxcIix4dC5jbGljaz1cIk1TUG9pbnRlclVwXCIseHQucmVzaXplPVwib3JpZW50YXRpb25jaGFuZ2UgcmVzaXplXCIpOih4dC5tb3VzZW1vdmU9XCJtb3VzZW1vdmVcIix4dC5tb3VzZWRvd249XCJtb3VzZWRvd25cIix4dC5tb3VzZXVwPVwibW91c2V1cFwiLHh0Lm1vdXNlY2FuY2VsPVwibW91c2VsZWF2ZVwiLHh0LmNsaWNrPVwiY2xpY2tcIix4dC5yZXNpemU9XCJyZXNpemVcIiksSz1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE9dHx8XCJkXCIscz0xO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW89ZVtpXSxcIlwiIT09byYmKG49by5pbmRleE9mKFwiW1wiKSwwIT09biYmKC0xPT1uP289XCIuXCIrbzoocysrLG89XCIuXCIrby5zdWJzdHJpbmcoMCxuKStcIiB8fCB7fSlcIitvLnN1YnN0cmluZyhuKSkpLHMrKyxhKz1vKyhyLTE+aT9cIiB8fCB7fSlcIjpcIilcIikpO3JldHVybiBBcnJheShzKS5qb2luKFwiKFwiKSthfSxRPS9eKFthLXpdKzopP1xcL1xcLy9pLG10KGd0LHt1aTpndC51aXx8e30sZng6Z3QuZnh8fHYsZWZmZWN0czpndC5lZmZlY3RzfHxVLG1vYmlsZTpndC5tb2JpbGV8fHt9LGRhdGE6Z3QuZGF0YXx8e30sZGF0YXZpejpndC5kYXRhdml6fHx7fSxrZXlzOntJTlNFUlQ6NDUsREVMRVRFOjQ2LEJBQ0tTUEFDRTo4LFRBQjo5LEVOVEVSOjEzLEVTQzoyNyxMRUZUOjM3LFVQOjM4LFJJR0hUOjM5LERPV046NDAsRU5EOjM1LEhPTUU6MzYsU1BBQ0VCQVI6MzIsUEFHRVVQOjMzLFBBR0VET1dOOjM0LEYyOjExMyxGMTA6MTIxLEYxMjoxMjMsTlVNUEFEX1BMVVM6MTA3LE5VTVBBRF9NSU5VUzoxMDksTlVNUEFEX0RPVDoxMTB9LHN1cHBvcnQ6Z3Quc3VwcG9ydHx8eHQsYW5pbWF0ZTpndC5hbmltYXRlfHx5LG5zOlwiXCIsYXR0cjpmdW5jdGlvbihlKXtyZXR1cm5cImRhdGEtXCIrZ3QubnMrZX0sZ2V0U2hhZG93czphLHdyYXA6cyxkZWVwRXh0ZW5kOmwsZ2V0Q29tcHV0ZWRTdHlsZXM6cCxzaXplOmYsdG9DYW1lbENhc2U6aCx0b0h5cGhlbnM6dSxnZXRPZmZzZXQ6Z3QuZ2V0T2Zmc2V0fHxnLHBhcnNlRWZmZWN0czpndC5wYXJzZUVmZmVjdHN8fG0sdG9nZ2xlQ2xhc3M6Z3QudG9nZ2xlQ2xhc3N8fHcsZGlyZWN0aW9uczpndC5kaXJlY3Rpb25zfHxWLE9ic2VydmFibGU6eixDbGFzczppLFRlbXBsYXRlOkUsdGVtcGxhdGU6eXQoRS5jb21waWxlLEUpLHJlbmRlcjp5dChFLnJlbmRlcixFKSxzdHJpbmdpZnk6eXQoa3Quc3RyaW5naWZ5LGt0KSxldmVudFRhcmdldDpZLGh0bWxFbmNvZGU6Yixpc0xvY2FsVXJsOmZ1bmN0aW9uKGUpe3JldHVybiBlJiYhUS50ZXN0KGUpfSxleHByOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT1lfHxcIlwiLHR5cGVvZiB0PT1FdCYmKG49dCx0PSExKSxuPW58fFwiZFwiLGUmJlwiW1wiIT09ZS5jaGFyQXQoMCkmJihlPVwiLlwiK2UpLGU9dD9LKGUuc3BsaXQoXCIuXCIpLG4pOm4rZX0sZ2V0dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZSt0O3JldHVybiBSdFtuXT1SdFtuXXx8RnVuY3Rpb24oXCJkXCIsXCJyZXR1cm4gXCIrZ3QuZXhwcihlLHQpKX0sc2V0dGVyOmZ1bmN0aW9uKGUpe3JldHVybiBCdFtlXT1CdFtlXXx8RnVuY3Rpb24oXCJkLHZhbHVlXCIsZ3QuZXhwcihlKStcIj12YWx1ZVwiKX0sYWNjZXNzb3I6ZnVuY3Rpb24oZSl7cmV0dXJue2dldDpndC5nZXR0ZXIoZSksc2V0Omd0LnNldHRlcihlKX19LGd1aWQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49XCJcIjtmb3IoZT0wOzMyPmU7ZSsrKXQ9MTYqYnQucmFuZG9tKCl8MCwoOD09ZXx8MTI9PWV8fDE2PT1lfHwyMD09ZSkmJihuKz1cIi1cIiksbis9KDEyPT1lPzQ6MTY9PWU/MyZ0fDg6dCkudG9TdHJpbmcoMTYpO3JldHVybiBufSxyb2xlU2VsZWN0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvKFxcUyspL2csXCJbXCIrZ3QuYXR0cihcInJvbGVcIikrXCI9JDFdLFwiKS5zbGljZSgwLC0xKX0sZGlyZWN0aXZlU2VsZWN0b3I6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnNwbGl0KFwiIFwiKTtpZihuKWZvcih0PTA7bi5sZW5ndGg+dDt0KyspXCJ2aWV3XCIhPW5bdF0mJihuW3RdPW5bdF0ucmVwbGFjZSgvKFxcdyopKHZpZXd8YmFyfHN0cmlwfG92ZXIpJC8sXCIkMS0kMlwiKSk7cmV0dXJuIG4uam9pbihcIiBcIikucmVwbGFjZSgvKFxcUyspL2csXCJrZW5kby1tb2JpbGUtJDEsXCIpLnNsaWNlKDAsLTEpfSx0cmlnZ2VyZWRCeUlucHV0OmZ1bmN0aW9uKGUpe3JldHVybi9eKGxhYmVsfGlucHV0fHRleHRhcmVhfHNlbGVjdCkkL2kudGVzdChlLnRhcmdldC50YWdOYW1lKX0sbG9nVG9Db25zb2xlOmZ1bmN0aW9uKGUpe3ZhciBpPXQuY29uc29sZTshZ3Quc3VwcHJlc3NMb2cmJm4hPT1pJiZpLmxvZyYmaS5sb2coZSl9fSksWD16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcztpLmVsZW1lbnQ9Z3QualF1ZXJ5KGUpLmhhbmRsZXIoaSksaS5hbmd1bGFyKFwiaW5pdFwiLHQpLHouZm4uaW5pdC5jYWxsKGkpLG49dD90LmRhdGFTb3VyY2U6bnVsbCxuJiYodD1tdCh7fSx0LHtkYXRhU291cmNlOnt9fSkpLHQ9aS5vcHRpb25zPW10KCEwLHt9LGkub3B0aW9ucyx0KSxuJiYodC5kYXRhU291cmNlPW4pLGkuZWxlbWVudC5hdHRyKGd0LmF0dHIoXCJyb2xlXCIpKXx8aS5lbGVtZW50LmF0dHIoZ3QuYXR0cihcInJvbGVcIiksKHQubmFtZXx8XCJcIikudG9Mb3dlckNhc2UoKSksaS5lbGVtZW50LmRhdGEoXCJrZW5kb1wiK3QucHJlZml4K3QubmFtZSxpKSxpLmJpbmQoaS5ldmVudHMsdCl9LGV2ZW50czpbXSxvcHRpb25zOntwcmVmaXg6XCJcIn0sX2hhc0JpbmRpbmdUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZWxlbWVudFswXS5rZW5kb0JpbmRpbmdUYXJnZXR9LF90YWJpbmRleDpmdW5jdGlvbihlKXtlPWV8fHRoaXMud3JhcHBlcjt2YXIgdD10aGlzLmVsZW1lbnQsbj1cInRhYmluZGV4XCIsaT1lLmF0dHIobil8fHQuYXR0cihuKTt0LnJlbW92ZUF0dHIobiksZS5hdHRyKG4saXNOYU4oaSk/MDppKX0sc2V0T3B0aW9uczpmdW5jdGlvbih0KXt0aGlzLl9zZXRFdmVudHModCksZS5leHRlbmQodGhpcy5vcHRpb25zLHQpfSxfc2V0RXZlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXRoaXMsaT0wLHI9bi5ldmVudHMubGVuZ3RoO3I+aTtpKyspdD1uLmV2ZW50c1tpXSxuLm9wdGlvbnNbdF0mJmVbdF0mJm4udW5iaW5kKHQsbi5vcHRpb25zW3RdKTtuLmJpbmQobi5ldmVudHMsZSl9LHJlc2l6ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldFNpemUoKSxuPXRoaXMuX3NpemU7KGV8fCFufHx0LndpZHRoIT09bi53aWR0aHx8dC5oZWlnaHQhPT1uLmhlaWdodCkmJih0aGlzLl9zaXplPXQsdGhpcy5fcmVzaXplKHQpLHRoaXMudHJpZ2dlcihcInJlc2l6ZVwiLHQpKX0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiBndC5kaW1lbnNpb25zKHRoaXMuZWxlbWVudCl9LHNpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KHRoaXMuc2V0U2l6ZShlKSxuKTp0aGlzLmdldFNpemUoKX0sc2V0U2l6ZTplLm5vb3AsX3Jlc2l6ZTplLm5vb3AsZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50LnJlbW92ZURhdGEoXCJrZW5kb1wiK2Uub3B0aW9ucy5wcmVmaXgrZS5vcHRpb25zLm5hbWUpLGUuZWxlbWVudC5yZW1vdmVEYXRhKFwiaGFuZGxlclwiKSxlLnVuYmluZCgpfSxhbmd1bGFyOmZ1bmN0aW9uKCl7fX0pLEo9WC5leHRlbmQoe2RhdGFJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZmxhdFZpZXcoKX0sX2FuZ3VsYXJJdGVtczpmdW5jdGlvbih0KXt2YXIgbj10aGlzO24uYW5ndWxhcih0LGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOm4uaXRlbXMoKSxkYXRhOmUubWFwKG4uZGF0YUl0ZW1zKCksZnVuY3Rpb24oZSl7cmV0dXJue2RhdGFJdGVtOmV9fSl9fSl9fSksZ3QuZGltZW5zaW9ucz1mdW5jdGlvbihlLHQpe3ZhciBuPWVbMF07cmV0dXJuIHQmJmUuY3NzKHQpLHt3aWR0aDpuLm9mZnNldFdpZHRoLGhlaWdodDpuLm9mZnNldEhlaWdodH19LGd0Lm5vdGlmeT13dCxaPS90ZW1wbGF0ZSQvaSxldD0vXlxccyooPzpcXHsoPzoufFxcclxcbnxcXG4pKlxcfXxcXFsoPzoufFxcclxcbnxcXG4pKlxcXSlcXHMqJC8sdHQ9L15cXHsoXFxkKykoOlteXFx9XSspP1xcfXxeXFxbW0EtWmEtel9dKlxcXSQvLG50PS8oW0EtWl0pL2csZ3QuaW5pdFdpZGdldD1mdW5jdGlvbihpLHIsbyl7dmFyIGEscyxsLGMsZCx1LGgscCxmLGcsbSx2LF87aWYobz9vLnJvbGVzJiYobz1vLnJvbGVzKTpvPWd0LnVpLnJvbGVzLGk9aS5ub2RlVHlwZT9pOmlbMF0sdT1pLmdldEF0dHJpYnV0ZShcImRhdGEtXCIrZ3QubnMrXCJyb2xlXCIpKXtmPS0xPT09dS5pbmRleE9mKFwiLlwiKSxsPWY/b1t1XTpndC5nZXR0ZXIodSkodCksbT1lKGkpLmRhdGEoKSx2PWw/XCJrZW5kb1wiK2wuZm4ub3B0aW9ucy5wcmVmaXgrbC5mbi5vcHRpb25zLm5hbWU6XCJcIixnPWY/UmVnRXhwKFwiXmtlbmRvLipcIit1K1wiJFwiLFwiaVwiKTpSZWdFeHAoXCJeXCIrditcIiRcIixcImlcIik7XG5mb3IoXyBpbiBtKWlmKF8ubWF0Y2goZykpe2lmKF8hPT12KXJldHVybiBtW19dO2E9bVtfXX1pZihsKXtmb3IocD1rKGksXCJkYXRhU291cmNlXCIpLHI9ZS5leHRlbmQoe30seChpLGwuZm4ub3B0aW9ucykscikscCYmKHIuZGF0YVNvdXJjZT10eXBlb2YgcD09PUV0P2d0LmdldHRlcihwKSh0KTpwKSxjPTAsZD1sLmZuLmV2ZW50cy5sZW5ndGg7ZD5jO2MrKylzPWwuZm4uZXZlbnRzW2NdLGg9ayhpLHMpLGghPT1uJiYocltzXT1ndC5nZXR0ZXIoaCkodCkpO3JldHVybiBhP2UuaXNFbXB0eU9iamVjdChyKXx8YS5zZXRPcHRpb25zKHIpOmE9bmV3IGwoaSxyKSxhfX19LGd0LnJvbGVzRnJvbU5hbWVzcGFjZXM9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdO2ZvcihlWzBdfHwoZT1bZ3QudWksZ3QuZGF0YXZpei51aV0pLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaVt0XT1lW3RdLnJvbGVzO3JldHVybiBtdC5hcHBseShudWxsLFt7fV0uY29uY2F0KGkucmV2ZXJzZSgpKSl9LGd0LmluaXQ9ZnVuY3Rpb24odCl7dmFyIG49Z3Qucm9sZXNGcm9tTmFtZXNwYWNlcyhMdC5jYWxsKGFyZ3VtZW50cywxKSk7ZSh0KS5maW5kKFwiW2RhdGEtXCIrZ3QubnMrXCJyb2xlXVwiKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe2d0LmluaXRXaWRnZXQodGhpcyx7fSxuKX0pfSxndC5kZXN0cm95PWZ1bmN0aW9uKHQpe2UodCkuZmluZChcIltkYXRhLVwiK2d0Lm5zK1wicm9sZV1cIikuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPWUodGhpcykuZGF0YSgpO2Zvcih0IGluIG4pMD09PXQuaW5kZXhPZihcImtlbmRvXCIpJiZ0eXBlb2Ygblt0XS5kZXN0cm95PT09QXQmJm5bdF0uZGVzdHJveSgpfSl9LGd0LnJlc2l6ZT1mdW5jdGlvbih0LG4pe3ZhciBpLHI9ZSh0KS5maW5kKFwiW2RhdGEtXCIrZ3QubnMrXCJyb2xlXVwiKS5hZGRCYWNrKCkuZmlsdGVyKFMpO3IubGVuZ3RoJiYoaT1lLm1ha2VBcnJheShyKSxpLnNvcnQoQyksZS5lYWNoKGksZnVuY3Rpb24oKXt2YXIgdD1ndC53aWRnZXRJbnN0YW5jZShlKHRoaXMpKTt0JiZ0LnJlc2l6ZShuKX0pKX0sZ3QucGFyc2VPcHRpb25zPXgsbXQoZ3QudWkse1dpZGdldDpYLERhdGFCb3VuZFdpZGdldDpKLHJvbGVzOnt9LHByb2dyZXNzOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscz10LmZpbmQoXCIuay1sb2FkaW5nLW1hc2tcIiksbD1ndC5zdXBwb3J0LGM9bC5icm93c2VyO24/cy5sZW5ndGh8fChpPWwuaXNSdGwodCkscj1pP1wicmlnaHRcIjpcImxlZnRcIixhPXQuc2Nyb2xsTGVmdCgpLG89Yy53ZWJraXQmJmk/dFswXS5zY3JvbGxXaWR0aC10LndpZHRoKCktMiphOjAscz1lKFwiPGRpdiBjbGFzcz0nay1sb2FkaW5nLW1hc2snPjxzcGFuIGNsYXNzPSdrLWxvYWRpbmctdGV4dCc+TG9hZGluZy4uLjwvc3Bhbj48ZGl2IGNsYXNzPSdrLWxvYWRpbmctaW1hZ2UnLz48ZGl2IGNsYXNzPSdrLWxvYWRpbmctY29sb3InLz48L2Rpdj5cIikud2lkdGgoXCIxMDAlXCIpLmhlaWdodChcIjEwMCVcIikuY3NzKFwidG9wXCIsdC5zY3JvbGxUb3AoKSkuY3NzKHIsTWF0aC5hYnMoYSkrbykucHJlcGVuZFRvKHQpKTpzJiZzLnJlbW92ZSgpfSxwbHVnaW46ZnVuY3Rpb24odCxpLHIpe3ZhciBvLGE9dC5mbi5vcHRpb25zLm5hbWU7aT1pfHxndC51aSxyPXJ8fFwiXCIsaVthXT10LGkucm9sZXNbYS50b0xvd2VyQ2FzZSgpXT10LG89XCJnZXRLZW5kb1wiK3IrYSxhPVwia2VuZG9cIityK2EsZS5mblthXT1mdW5jdGlvbihpKXt2YXIgcixvPXRoaXM7cmV0dXJuIHR5cGVvZiBpPT09RXQ/KHI9THQuY2FsbChhcmd1bWVudHMsMSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQscyxsPWUuZGF0YSh0aGlzLGEpO2lmKCFsKXRocm93IEVycm9yKGd0LmZvcm1hdChcIkNhbm5vdCBjYWxsIG1ldGhvZCAnezB9JyBvZiB7MX0gYmVmb3JlIGl0IGlzIGluaXRpYWxpemVkXCIsaSxhKSk7aWYodD1sW2ldLHR5cGVvZiB0IT09QXQpdGhyb3cgRXJyb3IoZ3QuZm9ybWF0KFwiQ2Fubm90IGZpbmQgbWV0aG9kICd7MH0nIG9mIHsxfVwiLGksYSkpO3JldHVybiBzPXQuYXBwbHkobCxyKSxzIT09bj8obz1zLCExKTpufSkpOnRoaXMuZWFjaChmdW5jdGlvbigpe25ldyB0KHRoaXMsaSl9KSxvfSxlLmZuW2FdLndpZGdldD10LGUuZm5bb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhKGEpfX19KSxpdD17YmluZDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxudWxsT2JqZWN0OiEwLG9wdGlvbnM6e319LHJ0PVguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7WC5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuZWxlbWVudC5hdXRvQXBwbHlOUygpLHRoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQsdGhpcy5lbGVtZW50LmFkZENsYXNzKFwia20td2lkZ2V0XCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7WC5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5lbGVtZW50LmtlbmRvRGVzdHJveSgpfSxvcHRpb25zOntwcmVmaXg6XCJNb2JpbGVcIn0sZXZlbnRzOltdLHZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQuY2xvc2VzdChndC5yb2xlU2VsZWN0b3IoXCJ2aWV3IHNwbGl0dmlldyBtb2RhbHZpZXcgZHJhd2VyXCIpKTtyZXR1cm4gZ3Qud2lkZ2V0SW5zdGFuY2UoZSxndC5tb2JpbGUudWkpfHxpdH0sdmlld0hhc05hdGl2ZVNjcm9sbGluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMudmlldygpO3JldHVybiBlJiZlLm9wdGlvbnMudXNlTmF0aXZlU2Nyb2xsaW5nfSxjb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQuY2xvc2VzdChndC5yb2xlU2VsZWN0b3IoXCJ2aWV3IGxheW91dCBtb2RhbHZpZXcgZHJhd2VyIHNwbGl0dmlld1wiKSk7cmV0dXJuIGd0LndpZGdldEluc3RhbmNlKGUuZXEoMCksZ3QubW9iaWxlLnVpKXx8aXR9fSksbXQoZ3QubW9iaWxlLHtpbml0OmZ1bmN0aW9uKGUpe2d0LmluaXQoZSxndC5tb2JpbGUudWksZ3QudWksZ3QuZGF0YXZpei51aSl9LGFwcExldmVsTmF0aXZlU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGd0Lm1vYmlsZS5hcHBsaWNhdGlvbiYmZ3QubW9iaWxlLmFwcGxpY2F0aW9uLm9wdGlvbnMmJmd0Lm1vYmlsZS5hcHBsaWNhdGlvbi5vcHRpb25zLnVzZU5hdGl2ZVNjcm9sbGluZ30scm9sZXM6e30sdWk6e1dpZGdldDpydCxEYXRhQm91bmRXaWRnZXQ6Si5leHRlbmQocnQucHJvdG90eXBlKSxyb2xlczp7fSxwbHVnaW46ZnVuY3Rpb24oZSl7Z3QudWkucGx1Z2luKGUsZ3QubW9iaWxlLnVpLFwiTW9iaWxlXCIpfX19KSxsKGd0LmRhdGF2aXose2luaXQ6ZnVuY3Rpb24oZSl7Z3QuaW5pdChlLGd0LmRhdGF2aXoudWkpfSx1aTp7cm9sZXM6e30sdGhlbWVzOnt9LHZpZXdzOltdLHBsdWdpbjpmdW5jdGlvbihlKXtndC51aS5wbHVnaW4oZSxndC5kYXRhdml6LnVpKX19LHJvbGVzOnt9fSksZ3QudG91Y2hTY3JvbGxlcj1mdW5jdGlvbih0LG4pe3JldHVybiBlKHQpLm1hcChmdW5jdGlvbih0LGkpe3JldHVybiBpPWUoaSkseHQua2luZXRpY1Njcm9sbE5lZWRlZCYmZ3QubW9iaWxlLnVpLlNjcm9sbGVyJiYhaS5kYXRhKFwia2VuZG9Nb2JpbGVTY3JvbGxlclwiKT8oaS5rZW5kb01vYmlsZVNjcm9sbGVyKG4pLGkuZGF0YShcImtlbmRvTW9iaWxlU2Nyb2xsZXJcIikpOiExfSlbMF19LGd0LnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0sZ3Qud2lkZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8sYSxzPWUuZGF0YShndC5ucytcInJvbGVcIiksbD1bXTtpZihzKXtpZihcImNvbnRlbnRcIj09PXMmJihzPVwic2Nyb2xsZXJcIiksbilpZihuWzBdKWZvcihpPTAscj1uLmxlbmd0aDtyPmk7aSsrKWwucHVzaChuW2ldLnJvbGVzW3NdKTtlbHNlIGwucHVzaChuLnJvbGVzW3NdKTtlbHNlIGw9W2d0LnVpLnJvbGVzW3NdLGd0LmRhdGF2aXoudWkucm9sZXNbc10sZ3QubW9iaWxlLnVpLnJvbGVzW3NdXTtmb3Iocy5pbmRleE9mKFwiLlwiKT49MCYmKGw9W2d0LmdldHRlcihzKSh0KV0pLGk9MCxyPWwubGVuZ3RoO3I+aTtpKyspaWYobz1sW2ldLG8mJihhPWUuZGF0YShcImtlbmRvXCIrby5mbi5vcHRpb25zLnByZWZpeCtvLmZuLm9wdGlvbnMubmFtZSkpKXJldHVybiBhfX0sZ3Qub25SZXNpemU9ZnVuY3Rpb24obil7dmFyIGk9bjtyZXR1cm4geHQubW9iaWxlT1MuYW5kcm9pZCYmKGk9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KG4sNjAwKX0pLGUodCkub24oeHQucmVzaXplLGkpLGl9LGd0LnVuYmluZFJlc2l6ZT1mdW5jdGlvbihuKXtlKHQpLm9mZih4dC5yZXNpemUsbil9LGd0LmF0dHJWYWx1ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLmRhdGEoZ3QubnMrdCl9LGd0LmRheXM9e1N1bmRheTowLE1vbmRheToxLFR1ZXNkYXk6MixXZWRuZXNkYXk6MyxUaHVyc2RheTo0LEZyaWRheTo1LFNhdHVyZGF5OjZ9LGUuZXh0ZW5kKGUuZXhwcltcIjpcIl0se2tlbmRvRm9jdXNhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPWUuYXR0cih0LFwidGFiaW5kZXhcIik7cmV0dXJuIFQodCwhaXNOYU4obikmJm4+LTEpfX0pLG90PVtcIm1vdXNlZG93blwiLFwibW91c2Vtb3ZlXCIsXCJtb3VzZWVudGVyXCIsXCJtb3VzZWxlYXZlXCIsXCJtb3VzZW92ZXJcIixcIm1vdXNlb3V0XCIsXCJtb3VzZXVwXCIsXCJjbGlja1wiXSxhdD1cImxhYmVsLCBpbnB1dCwgW2RhdGEtcmVsPWV4dGVybmFsXVwiLHN0PXtzZXR1cE1vdXNlTXV0ZTpmdW5jdGlvbigpe3ZhciB0LG49MCxpPW90Lmxlbmd0aCxyPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtpZighc3QubW91c2VUcmFwJiZ4dC5ldmVudENhcHR1cmUpZm9yKHN0Lm1vdXNlVHJhcD0hMCxzdC5idXN0Q2xpY2s9ITEsc3QuY2FwdHVyZU1vdXNlPSExLHQ9ZnVuY3Rpb24odCl7c3QuY2FwdHVyZU1vdXNlJiYoXCJjbGlja1wiPT09dC50eXBlP3N0LmJ1c3RDbGljayYmIWUodC50YXJnZXQpLmlzKGF0KSYmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKTp0LnN0b3BQcm9wYWdhdGlvbigpKX07aT5uO24rKylyLmFkZEV2ZW50TGlzdGVuZXIob3Rbbl0sdCwhMCl9LG11dGVNb3VzZTpmdW5jdGlvbihlKXtzdC5jYXB0dXJlTW91c2U9ITAsZS5kYXRhLmJ1c3RDbGljayYmKHN0LmJ1c3RDbGljaz0hMCksY2xlYXJUaW1lb3V0KHN0Lm1vdXNlVHJhcFRpbWVvdXRJRCl9LHVuTXV0ZU1vdXNlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHN0Lm1vdXNlVHJhcFRpbWVvdXRJRCksc3QubW91c2VUcmFwVGltZW91dElEPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzdC5jYXB0dXJlTW91c2U9ITEsc3QuYnVzdENsaWNrPSExfSw0MDApfX0sbHQ9e2Rvd246XCJ0b3VjaHN0YXJ0IG1vdXNlZG93blwiLG1vdmU6XCJtb3VzZW1vdmUgdG91Y2htb3ZlXCIsdXA6XCJtb3VzZXVwIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCIsY2FuY2VsOlwibW91c2VsZWF2ZSB0b3VjaGNhbmNlbFwifSx4dC50b3VjaCYmKHh0Lm1vYmlsZU9TLmlvc3x8eHQubW9iaWxlT1MuYW5kcm9pZCk/bHQ9e2Rvd246XCJ0b3VjaHN0YXJ0XCIsbW92ZTpcInRvdWNobW92ZVwiLHVwOlwidG91Y2hlbmQgdG91Y2hjYW5jZWxcIixjYW5jZWw6XCJ0b3VjaGNhbmNlbFwifTp4dC5wb2ludGVycz9sdD17ZG93bjpcInBvaW50ZXJkb3duXCIsbW92ZTpcInBvaW50ZXJtb3ZlXCIsdXA6XCJwb2ludGVydXBcIixjYW5jZWw6XCJwb2ludGVyY2FuY2VsIHBvaW50ZXJsZWF2ZVwifTp4dC5tc1BvaW50ZXJzJiYobHQ9e2Rvd246XCJNU1BvaW50ZXJEb3duXCIsbW92ZTpcIk1TUG9pbnRlck1vdmVcIix1cDpcIk1TUG9pbnRlclVwXCIsY2FuY2VsOlwiTVNQb2ludGVyQ2FuY2VsIE1TUG9pbnRlckxlYXZlXCJ9KSwheHQubXNQb2ludGVyc3x8XCJvbm1zcG9pbnRlcmVudGVyXCJpbiB0fHxlLmVhY2goe01TUG9pbnRlckVudGVyOlwiTVNQb2ludGVyT3ZlclwiLE1TUG9pbnRlckxlYXZlOlwiTVNQb2ludGVyT3V0XCJ9LGZ1bmN0aW9uKHQsbil7ZS5ldmVudC5zcGVjaWFsW3RdPXtkZWxlZ2F0ZVR5cGU6bixiaW5kVHlwZTpuLGhhbmRsZTpmdW5jdGlvbih0KXt2YXIgaSxyPXRoaXMsbz10LnJlbGF0ZWRUYXJnZXQsYT10LmhhbmRsZU9iajtyZXR1cm4oIW98fG8hPT1yJiYhZS5jb250YWlucyhyLG8pKSYmKHQudHlwZT1hLm9yaWdUeXBlLGk9YS5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0LnR5cGU9biksaX19fSksY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGx0W2VdfHxlfSxkdD0vKFteIF0rKS9nLGd0LmFwcGx5RXZlbnRNYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lLnJlcGxhY2UoZHQsY3QpLHQmJihlPWUucmVwbGFjZShkdCxcIiQxLlwiK3QpKSxlfSx1dD1lLmZuLm9uLG10KCEwLEEsZSksQS5mbj1BLnByb3RvdHlwZT1uZXcgZSxBLmZuLmNvbnN0cnVjdG9yPUEsQS5mbi5pbml0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG4mJm4gaW5zdGFuY2VvZiBlJiYhKG4gaW5zdGFuY2VvZiBBKSYmKG49QShuKSksZS5mbi5pbml0LmNhbGwodGhpcyx0LG4saHQpfSxBLmZuLmluaXQucHJvdG90eXBlPUEuZm4saHQ9QShkb2N1bWVudCksbXQoQS5mbix7aGFuZGxlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhKFwiaGFuZGxlclwiLGUpLHRoaXN9LGF1dG9BcHBseU5TOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGEoXCJrZW5kb05TXCIsZXx8Z3QuZ3VpZCgpKSx0aGlzfSxvbjpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhPXRoaXMscz1hLmRhdGEoXCJrZW5kb05TXCIpO3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD91dC5jYWxsKGEsYXJndW1lbnRzWzBdKTooZT1hLHQ9THQuY2FsbChhcmd1bWVudHMpLHR5cGVvZiB0W3QubGVuZ3RoLTFdPT09RnQmJnQucG9wKCksbj10W3QubGVuZ3RoLTFdLGk9Z3QuYXBwbHlFdmVudE1hcCh0WzBdLHMpLHh0Lm1vdXNlQW5kVG91Y2hQcmVzZW50JiZpLnNlYXJjaCgvbW91c2V8Y2xpY2svKT4tMSYmdGhpc1swXSE9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmKHN0LnNldHVwTW91c2VNdXRlKCkscj0yPT09dC5sZW5ndGg/bnVsbDp0WzFdLG89aS5pbmRleE9mKFwiY2xpY2tcIik+LTEmJmkuaW5kZXhPZihcInRvdWNoZW5kXCIpPi0xLHV0LmNhbGwodGhpcyx7dG91Y2hzdGFydDpzdC5tdXRlTW91c2UsdG91Y2hlbmQ6c3QudW5NdXRlTW91c2V9LHIse2J1c3RDbGljazpvfSkpLHR5cGVvZiBuPT09RXQmJihlPWEuZGF0YShcImhhbmRsZXJcIiksbj1lW25dLHRbdC5sZW5ndGgtMV09ZnVuY3Rpb24odCl7bi5jYWxsKGUsdCl9KSx0WzBdPWksdXQuYXBwbHkoYSx0KSxhKX0sa2VuZG9EZXN0cm95OmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fHRoaXMuZGF0YShcImtlbmRvTlNcIiksZSYmdGhpcy5vZmYoXCIuXCIrZSksdGhpc319KSxndC5qUXVlcnk9QSxndC5ldmVudE1hcD1sdCxndC50aW1lem9uZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbixpLHIsbz10WzNdLGE9dFs0XSxzPXRbNV0sbD10WzhdO3JldHVybiBsfHwodFs4XT1sPXt9KSxsW2VdP2xbZV06KGlzTmFOKGEpPzA9PT1hLmluZGV4T2YoXCJsYXN0XCIpPyhuPW5ldyBEYXRlKERhdGUuVVRDKGUsZFtvXSsxLDEsc1swXS0yNCxzWzFdLHNbMl0sMCkpLGk9dVthLnN1YnN0cig0LDMpXSxyPW4uZ2V0VVRDRGF5KCksbi5zZXRVVENEYXRlKG4uZ2V0VVRDRGF0ZSgpK2ktci0oaT5yPzc6MCkpKTphLmluZGV4T2YoXCI+PVwiKT49MCYmKG49bmV3IERhdGUoRGF0ZS5VVEMoZSxkW29dLGEuc3Vic3RyKDUpLHNbMF0sc1sxXSxzWzJdLDApKSxpPXVbYS5zdWJzdHIoMCwzKV0scj1uLmdldFVUQ0RheSgpLG4uc2V0VVRDRGF0ZShuLmdldFVUQ0RhdGUoKStpLXIrKHI+aT83OjApKSk6bj1uZXcgRGF0ZShEYXRlLlVUQyhlLGRbb10sYSxzWzBdLHNbMV0sc1syXSwwKSksbFtlXT1uKX1mdW5jdGlvbiB0KHQsbixpKXt2YXIgcixvLGEscztyZXR1cm4obj1uW2ldKT8oYT1uZXcgRGF0ZSh0KS5nZXRVVENGdWxsWWVhcigpLG49alF1ZXJ5LmdyZXAobixmdW5jdGlvbihlKXt2YXIgdD1lWzBdLG49ZVsxXTtyZXR1cm4gYT49dCYmKG4+PWF8fHQ9PWEmJlwib25seVwiPT1ufHxcIm1heFwiPT1uKX0pLG4ucHVzaCh0KSxuLnNvcnQoZnVuY3Rpb24odCxuKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgdCYmKHQ9K2UoYSx0KSksXCJudW1iZXJcIiE9dHlwZW9mIG4mJihuPStlKGEsbikpLHQtbn0pLHM9bltqUXVlcnkuaW5BcnJheSh0LG4pLTFdfHxuW24ubGVuZ3RoLTFdLGlzTmFOKHMpP3M6bnVsbCk6KHI9aS5zcGxpdChcIjpcIiksbz0wLHIubGVuZ3RoPjEmJihvPTYwKnJbMF0rICtyWzFdKSxbLTFlNixcIm1heFwiLFwiLVwiLFwiSmFuXCIsMSxbMCwwLDBdLG8sXCItXCJdKX1mdW5jdGlvbiBuKGUsdCxuKXt2YXIgaSxyLG8sYT10W25dO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT10W2FdKSwhYSl0aHJvdyBFcnJvcignVGltZXpvbmUgXCInK24rJ1wiIGlzIGVpdGhlciBpbmNvcnJlY3QsIG9yIGtlbmRvLnRpbWV6b25lcy5taW4uanMgaXMgbm90IGluY2x1ZGVkLicpO2ZvcihpPWEubGVuZ3RoLTE7aT49MCYmKHI9YVtpXVszXSwhKHImJmU+cikpO2ktLSk7aWYobz1hW2krMV0sIW8pdGhyb3cgRXJyb3IoJ1RpbWV6b25lIFwiJytuKydcIiBub3QgZm91bmQgb24gJytlK1wiLlwiKTtyZXR1cm4gb31mdW5jdGlvbiBpKGUsaSxyLG8pe3R5cGVvZiBlIT1NdCYmKGU9RGF0ZS5VVEMoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSxlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSkpO3ZhciBhPW4oZSxpLG8pO3JldHVybnt6b25lOmEscnVsZTp0KGUscixhWzFdKX19ZnVuY3Rpb24gcihlLHQpe3ZhciBuLHIsbztyZXR1cm5cIkV0Yy9VVENcIj09dHx8XCJFdGMvR01UXCI9PXQ/MDoobj1pKGUsdGhpcy56b25lcyx0aGlzLnJ1bGVzLHQpLHI9bi56b25lLG89bi5ydWxlLGd0LnBhcnNlRmxvYXQobz9yWzBdLW9bNl06clswXSkpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1pKGUsdGhpcy56b25lcyx0aGlzLnJ1bGVzLHQpLHI9bi56b25lLG89bi5ydWxlLGE9clsyXTtyZXR1cm4gYS5pbmRleE9mKFwiL1wiKT49MD9hLnNwbGl0KFwiL1wiKVtvJiYrb1s2XT8xOjBdOmEuaW5kZXhPZihcIiVzXCIpPj0wP2EucmVwbGFjZShcIiVzXCIsbyYmXCItXCIhPW9bN10/b1s3XTpcIlwiKTphfWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciBpLHI7cmV0dXJuIHR5cGVvZiB0PT1FdCYmKHQ9dGhpcy5vZmZzZXQoZSx0KSksdHlwZW9mIG49PUV0JiYobj10aGlzLm9mZnNldChlLG4pKSxpPWUuZ2V0VGltZXpvbmVPZmZzZXQoKSxlPW5ldyBEYXRlKGUuZ2V0VGltZSgpKzZlNCoodC1uKSkscj1lLmdldFRpbWV6b25lT2Zmc2V0KCksbmV3IERhdGUoZS5nZXRUaW1lKCkrNmU0KihyLWkpKX1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIHRoaXMuY29udmVydChlLGUuZ2V0VGltZXpvbmVPZmZzZXQoKSx0KX1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIHRoaXMuY29udmVydChlLHQsZS5nZXRUaW1lem9uZU9mZnNldCgpKX1mdW5jdGlvbiBjKGUpe3JldHVybiB0aGlzLmFwcGx5KG5ldyBEYXRlKGUpLFwiRXRjL1VUQ1wiKX12YXIgZD17SmFuOjAsRmViOjEsTWFyOjIsQXByOjMsTWF5OjQsSnVuOjUsSnVsOjYsQXVnOjcsU2VwOjgsT2N0OjksTm92OjEwLERlYzoxMX0sdT17U3VuOjAsTW9uOjEsVHVlOjIsV2VkOjMsVGh1OjQsRnJpOjUsU2F0OjZ9O3JldHVybnt6b25lczp7fSxydWxlczp7fSxvZmZzZXQ6cixjb252ZXJ0OmEsYXBwbHk6cyxyZW1vdmU6bCxhYmJyOm8sdG9Mb2NhbERhdGU6Y319KCksZ3QuZGF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gMD09PXQmJjIzPT09ZS5nZXRIb3VycygpPyhlLnNldEhvdXJzKGUuZ2V0SG91cnMoKSsyKSwhMCk6ITF9ZnVuY3Rpb24gdCh0LG4saSl7dmFyIHI9dC5nZXRIb3VycygpO2k9aXx8MSxuPShuLXQuZ2V0RGF5KCkrNyppKSU3LHQuc2V0RGF0ZSh0LmdldERhdGUoKStuKSxlKHQscil9ZnVuY3Rpb24gbihlLG4saSl7cmV0dXJuIGU9bmV3IERhdGUoZSksdChlLG4saSksZX1mdW5jdGlvbiBpKGUpe3JldHVybiBuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDEpfWZ1bmN0aW9uIHIoZSl7dmFyIHQ9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSsxLDApLG49aShlKSxyPU1hdGguYWJzKHQuZ2V0VGltZXpvbmVPZmZzZXQoKS1uLmdldFRpbWV6b25lT2Zmc2V0KCkpO3JldHVybiByJiZ0LnNldEhvdXJzKG4uZ2V0SG91cnMoKStyLzYwKSx0fWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQ9bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSx0LmdldERhdGUoKSwwLDAsMCksZSh0LDApLHR9ZnVuY3Rpb24gYShlKXtyZXR1cm4gRGF0ZS5VVEMoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSxlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5nZXRUaW1lKCktbyhlKX1mdW5jdGlvbiBsKGUsdCxuKXt2YXIgaSxyPXModCksbz1zKG4pO3JldHVybiBlJiZyIT1vPyh0Pj1uJiYobis9bSksaT1zKGUpLHI+aSYmKGkrPW0pLHI+byYmKG8rPW0pLGk+PXImJm8+PWkpOiEwfWZ1bmN0aW9uIGMoZSx0LG4pe3ZhciBpLHI9dC5nZXRUaW1lKCksbz1uLmdldFRpbWUoKTtyZXR1cm4gcj49byYmKG8rPW0pLGk9ZS5nZXRUaW1lKCksaT49ciYmbz49aX1mdW5jdGlvbiBkKHQsbil7dmFyIGk9dC5nZXRIb3VycygpO3JldHVybiB0PW5ldyBEYXRlKHQpLHUodCxuKm0pLGUodCxpKSx0fWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciBpLHI9ZS5nZXRUaW1lem9uZU9mZnNldCgpO2Uuc2V0VGltZShlLmdldFRpbWUoKSt0KSxufHwoaT1lLmdldFRpbWV6b25lT2Zmc2V0KCktcixlLnNldFRpbWUoZS5nZXRUaW1lKCkraSpnKSl9ZnVuY3Rpb24gaCgpe3JldHVybiBvKG5ldyBEYXRlKX1mdW5jdGlvbiBwKGUpe3JldHVybiBvKGUpLmdldFRpbWUoKT09aCgpLmdldFRpbWUoKX1mdW5jdGlvbiBmKGUpe3ZhciB0PW5ldyBEYXRlKDE5ODAsMSwxLDAsMCwwKTtyZXR1cm4gZSYmdC5zZXRIb3VycyhlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSksdH12YXIgZz02ZTQsbT04NjRlNTtyZXR1cm57YWRqdXN0RFNUOmUsZGF5T2ZXZWVrOm4sc2V0RGF5T2ZXZWVrOnQsZ2V0RGF0ZTpvLGlzSW5EYXRlUmFuZ2U6Yyxpc0luVGltZVJhbmdlOmwsaXNUb2RheTpwLG5leHREYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSwxKX0scHJldmlvdXNEYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSwtMSl9LHRvVXRjVGltZTphLE1TX1BFUl9EQVk6bSxNU19QRVJfSE9VUjo2MCpnLE1TX1BFUl9NSU5VVEU6ZyxzZXRUaW1lOnUsYWRkRGF5czpkLHRvZGF5OmgsdG9JbnZhcmlhbnRUaW1lOmYsZmlyc3REYXlPZk1vbnRoOmksbGFzdERheU9mTW9udGg6cixnZXRNaWxsaXNlY29uZHM6c319KCksZ3Quc3RyaXBXaGl0ZXNwYWNlPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZihkb2N1bWVudC5jcmVhdGVOb2RlSXRlcmF0b3IpZm9yKHQ9ZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKGUsTm9kZUZpbHRlci5TSE9XX1RFWFQsZnVuY3Rpb24odCl7cmV0dXJuIHQucGFyZW50Tm9kZT09ZT9Ob2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQ6Tm9kZUZpbHRlci5GSUxURVJfUkVKRUNUfSwhMSk7dC5uZXh0Tm9kZSgpOyl0LnJlZmVyZW5jZU5vZGUmJiF0LnJlZmVyZW5jZU5vZGUudGV4dENvbnRlbnQudHJpbSgpJiZ0LnJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0LnJlZmVyZW5jZU5vZGUpO2Vsc2UgZm9yKG49MDtlLmNoaWxkTm9kZXMubGVuZ3RoPm47bisrKWk9ZS5jaGlsZE5vZGVzW25dLDMhPWkubm9kZVR5cGV8fC9cXFMvLnRlc3QoaS5ub2RlVmFsdWUpfHwoZS5yZW1vdmVDaGlsZChpKSxuLS0pLDE9PWkubm9kZVR5cGUmJmd0LnN0cmlwV2hpdGVzcGFjZShpKX0scHQ9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMWUzLzYwKX0sZ3QuYW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oZSl7cHQuY2FsbCh0LGUpfSxmdD1bXSxndC5xdWV1ZUFuaW1hdGlvbj1mdW5jdGlvbihlKXtmdFtmdC5sZW5ndGhdPWUsMT09PWZ0Lmxlbmd0aCYmZ3QucnVuTmV4dEFuaW1hdGlvbigpfSxndC5ydW5OZXh0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7Z3QuYW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtmdFswXSYmKGZ0LnNoaWZ0KCkoKSxmdFswXSYmZ3QucnVuTmV4dEFuaW1hdGlvbigpKX0pfSxndC5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNwbGl0KFwiP1wiKVsxXXx8XCJcIixuPXt9LGk9dC5zcGxpdCgvJnw9Lykscj1pLmxlbmd0aCxvPTA7cj5vO28rPTIpXCJcIiE9PWlbb10mJihuW2RlY29kZVVSSUNvbXBvbmVudChpW29dKV09ZGVjb2RlVVJJQ29tcG9uZW50KGlbbysxXSkpO3JldHVybiBufSxndC5lbGVtZW50VW5kZXJDdXJzb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZS54LmNsaWVudCxlLnkuY2xpZW50KX0sZ3Qud2hlZWxEZWx0YVk9ZnVuY3Rpb24oZSl7dmFyIHQsaT1lLm9yaWdpbmFsRXZlbnQscj1pLndoZWVsRGVsdGFZO3JldHVybiBpLndoZWVsRGVsdGE/KHI9PT1ufHxyKSYmKHQ9aS53aGVlbERlbHRhKTppLmRldGFpbCYmaS5heGlzPT09aS5WRVJUSUNBTF9BWElTJiYodD0xMCotaS5kZXRhaWwpLHR9LGd0LnRocm90dGxlPWZ1bmN0aW9uKGUsdCl7dmFyIGkscj0wO3JldHVybiF0fHwwPj10P2U6ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKCl7ZS5hcHBseShhLGwpLHI9K25ldyBEYXRlfXZhciBhPXRoaXMscz0rbmV3IERhdGUtcixsPWFyZ3VtZW50cztyZXR1cm4gcj8oaSYmY2xlYXJUaW1lb3V0KGkpLHM+dD9vKCk6aT1zZXRUaW1lb3V0KG8sdC1zKSxuKTpvKCl9fSxndC5jYXJldD1mdW5jdGlvbih0LGkscil7dmFyIG8sYSxzLGwsYz1pIT09bjtpZihyPT09biYmKHI9aSksdFswXSYmKHQ9dFswXSksIWN8fCF0LmRpc2FibGVkKXt0cnl7dC5zZWxlY3Rpb25TdGFydCE9PW4/Yz8odC5mb2N1cygpLHQuc2V0U2VsZWN0aW9uUmFuZ2UoaSxyKSk6aT1bdC5zZWxlY3Rpb25TdGFydCx0LnNlbGVjdGlvbkVuZF06ZG9jdW1lbnQuc2VsZWN0aW9uJiYoZSh0KS5pcyhcIjp2aXNpYmxlXCIpJiZ0LmZvY3VzKCksbz10LmNyZWF0ZVRleHRSYW5nZSgpLGM/KG8uY29sbGFwc2UoITApLG8ubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsaSksby5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsci1pKSxvLnNlbGVjdCgpKTooYT1vLmR1cGxpY2F0ZSgpLG8ubW92ZVRvQm9va21hcmsoZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkuZ2V0Qm9va21hcmsoKSksYS5zZXRFbmRQb2ludChcIkVuZFRvU3RhcnRcIixvKSxzPWEudGV4dC5sZW5ndGgsbD1zK28udGV4dC5sZW5ndGgsaT1bcyxsXSkpfWNhdGNoKGQpe2k9W119cmV0dXJuIGl9fSxndC5jb21waWxlTW9iaWxlRGlyZWN0aXZlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dC5hbmd1bGFyO3JldHVybiBlLmF0dHIoXCJkYXRhLVwiK2d0Lm5zK1wicm9sZVwiLGVbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJrZW5kby1tb2JpbGUtXCIsXCJcIikucmVwbGFjZShcIi1cIixcIlwiKSksaS5lbGVtZW50KGUpLmluamVjdG9yKCkuaW52b2tlKFtcIiRjb21waWxlXCIsZnVuY3Rpb24odCl7dmFyIHI9aS5lbGVtZW50KGUpLnNjb3BlKCk7biYmbihyKSx0KGUpKHIpLHIuJGRpZ2VzdCgpfV0pLGd0LndpZGdldEluc3RhbmNlKGUsZ3QubW9iaWxlLnVpKX0sZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsbixpKXt2YXIgcj1lKFwiPGZvcm0+XCIpLmF0dHIoe2FjdGlvbjppLG1ldGhvZDpcIlBPU1RcIn0pLG89dC5zcGxpdChcIjtiYXNlNjQsXCIpO2UoXCI8aW5wdXQ+XCIpLmF0dHIoe3ZhbHVlOm9bMF0ucmVwbGFjZShcImRhdGE6XCIsXCJcIiksbmFtZTpcImNvbnRlbnRUeXBlXCIsdHlwZTpcImhpZGRlblwifSkuYXBwZW5kVG8ociksZShcIjxpbnB1dD5cIikuYXR0cih7dmFsdWU6b1sxXSxuYW1lOlwiYmFzZTY0XCIsdHlwZTpcImhpZGRlblwifSkuYXBwZW5kVG8ociksZShcIjxpbnB1dD5cIikuYXR0cih7dmFsdWU6bixuYW1lOlwiZmlsZU5hbWVcIix0eXBlOlwiaGlkZGVuXCJ9KS5hcHBlbmRUbyhyKSxyLmFwcGVuZFRvKFwiYm9keVwiKS5zdWJtaXQoKS5yZW1vdmUoKX1mdW5jdGlvbiBpKGUsdCl7dmFyIG4saSxyLG8sYSxzPWU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2ZvcihuPWUuc3BsaXQoXCI7YmFzZTY0LFwiKSxpPW5bMF0scj1hdG9iKG5bMV0pLG89bmV3IFVpbnQ4QXJyYXkoci5sZW5ndGgpLGE9MDtyLmxlbmd0aD5hO2ErKylvW2FdPXIuY2hhckNvZGVBdChhKTtzPW5ldyBCbG9iKFtvLmJ1ZmZlcl0se3R5cGU6aX0pfW5hdmlnYXRvci5tc1NhdmVCbG9iKHMsdCl9ZnVuY3Rpb24gcihlLG4pe3QuQmxvYiYmZSBpbnN0YW5jZW9mIEJsb2ImJihlPVVSTC5jcmVhdGVPYmplY3RVUkwoZSkpLG8uZG93bmxvYWQ9bixvLmhyZWY9ZTt2YXIgaT1kb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO2kuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCEwLCExLHQsMCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCksby5kaXNwYXRjaEV2ZW50KGkpfXZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGE9XCJkb3dubG9hZFwiaW4gbztndC5zYXZlQXM9ZnVuY3Rpb24oZSl7dmFyIHQ9bjtlLmZvcmNlUHJveHl8fChhP3Q9cjpuYXZpZ2F0b3IubXNTYXZlQmxvYiYmKHQ9aSkpLHQoZS5kYXRhVVJJLGUuZmlsZU5hbWUsZS5wcm94eVVSTCl9fSgpfShqUXVlcnksd2luZG93KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXtpZighdClyZXR1cm4gZTtlK1wiL1wiPT09dCYmKGU9dCk7dmFyIG49UmVnRXhwKFwiXlwiK3QsXCJpXCIpO3JldHVybiBuLnRlc3QoZSl8fChlPXQrXCIvXCIrZSkscC5wcm90b2NvbCtcIi8vXCIrKHAuaG9zdCtcIi9cIitlKS5yZXBsYWNlKC9cXC9cXC8rL2csXCIvXCIpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGU/XCIjIVwiOlwiI1wifWZ1bmN0aW9uIHIoZSl7dmFyIHQ9cC5ocmVmO3JldHVyblwiIyFcIj09PWUmJnQuaW5kZXhPZihcIiNcIik+LTEmJnQuaW5kZXhPZihcIiMhXCIpPDA/bnVsbDp0LnNwbGl0KGUpWzFdfHxcIlwifWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gMD09PXQuaW5kZXhPZihlKT90LnN1YnN0cihlLmxlbmd0aCkucmVwbGFjZSgvXFwvXFwvL2csXCIvXCIpOnR9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9eKCMpPy8sXCIjXCIpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUucmVwbGFjZSgvXigjKCEpPyk/LyxcIiMhXCIpfXZhciBsPXdpbmRvdy5rZW5kbyxjPVwiY2hhbmdlXCIsZD1cImJhY2tcIix1PVwic2FtZVwiLGg9bC5zdXBwb3J0LHA9d2luZG93LmxvY2F0aW9uLGY9d2luZG93Lmhpc3RvcnksZz01MCxtPWwuc3VwcG9ydC5icm93c2VyLm1zaWUsdj0vXiMqLyxfPXdpbmRvdy5kb2N1bWVudCx5PWwuQ2xhc3MuZXh0ZW5kKHtiYWNrOmZ1bmN0aW9uKCl7bT9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5iYWNrKCl9KTpmLmJhY2soKX0sZm9yd2FyZDpmdW5jdGlvbigpe20/c2V0VGltZW91dChmdW5jdGlvbigpe2YuZm9yd2FyZCgpfSk6Zi5mb3J3YXJkKCl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBmLmxlbmd0aH0scmVwbGFjZUxvY2F0aW9uOmZ1bmN0aW9uKGUpe3AucmVwbGFjZShlKX19KSx3PXkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMucm9vdD1lfSxuYXZpZ2F0ZTpmdW5jdGlvbihlKXtmLnB1c2hTdGF0ZSh7fSxfLnRpdGxlLG4oZSx0aGlzLnJvb3QpKX0scmVwbGFjZTpmdW5jdGlvbihlKXtmLnJlcGxhY2VTdGF0ZSh7fSxfLnRpdGxlLG4oZSx0aGlzLnJvb3QpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMucm9vdCxlKX0sY3VycmVudDpmdW5jdGlvbigpe3ZhciBlPXAucGF0aG5hbWU7cmV0dXJuIHAuc2VhcmNoJiYoZSs9cC5zZWFyY2gpLG8odGhpcy5yb290LGUpfSxjaGFuZ2U6ZnVuY3Rpb24odCl7ZSh3aW5kb3cpLmJpbmQoXCJwb3BzdGF0ZS5rZW5kb1wiLHQpfSxzdG9wOmZ1bmN0aW9uKCl7ZSh3aW5kb3cpLnVuYmluZChcInBvcHN0YXRlLmtlbmRvXCIpfSxub3JtYWxpemVDdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG89ZS5yb290LGE9cC5wYXRobmFtZSxzPXIoaShlLmhhc2hCYW5nKSk7bz09PWErXCIvXCImJih0PW8pLG89PT1hJiZzJiYodD1uKHMucmVwbGFjZSh2LFwiXCIpLG8pKSx0JiZmLnB1c2hTdGF0ZSh7fSxfLnRpdGxlLHQpfX0pLGI9eS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5faWQ9bC5ndWlkKCksdGhpcy5wcmVmaXg9aShlKSx0aGlzLmZpeD1lP3M6YX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSl7cC5oYXNoPXRoaXMuZml4KGUpfSxyZXBsYWNlOmZ1bmN0aW9uKGUpe3RoaXMucmVwbGFjZUxvY2F0aW9uKHRoaXMuZml4KGUpKX0sbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBlLmluZGV4T2YodGhpcy5wcmVmaXgpPDA/ZTplLnNwbGl0KHRoaXMucHJlZml4KVsxXX0sY2hhbmdlOmZ1bmN0aW9uKHQpe2guaGFzaENoYW5nZT9lKHdpbmRvdykub24oXCJoYXNoY2hhbmdlLlwiK3RoaXMuX2lkLHQpOnRoaXMuX2ludGVydmFsPXNldEludGVydmFsKHQsZyl9LHN0b3A6ZnVuY3Rpb24oKXtlKHdpbmRvdykub2ZmKFwiaGFzaGNoYW5nZS5cIit0aGlzLl9pZCksY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCl9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLnByZWZpeCl9LG5vcm1hbGl6ZUN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9cC5wYXRobmFtZSxuPWUucm9vdDtyZXR1cm4gZS5wdXNoU3RhdGUmJm4hPT10Pyh0aGlzLnJlcGxhY2VMb2NhdGlvbihuK3RoaXMucHJlZml4K28obix0KSksITApOiExfX0pLGs9bC5PYnNlcnZhYmxlLmV4dGVuZCh7c3RhcnQ6ZnVuY3Rpb24odCl7aWYodD10fHx7fSx0aGlzLmJpbmQoW2MsZCx1XSx0KSwhdGhpcy5fc3RhcnRlZCl7dGhpcy5fc3RhcnRlZD0hMCx0LnJvb3Q9dC5yb290fHxcIi9cIjt2YXIgbixpPXRoaXMuY3JlYXRlQWRhcHRlcih0KTtpLm5vcm1hbGl6ZUN1cnJlbnQodCl8fChuPWkuY3VycmVudCgpLGUuZXh0ZW5kKHRoaXMse2FkYXB0ZXI6aSxyb290OnQucm9vdCxoaXN0b3J5TGVuZ3RoOmkubGVuZ3RoKCksY3VycmVudDpuLGxvY2F0aW9uczpbbl19KSxpLmNoYW5nZShlLnByb3h5KHRoaXMsXCJfY2hlY2tVcmxcIikpKX19LGNyZWF0ZUFkYXB0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGgucHVzaFN0YXRlJiZlLnB1c2hTdGF0ZT9uZXcgdyhlLnJvb3QpOm5ldyBiKGUuaGFzaEJhbmcpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRlZCYmKHRoaXMuYWRhcHRlci5zdG9wKCksdGhpcy51bmJpbmQoYyksdGhpcy5fc3RhcnRlZD0hMSl9LGNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLmJpbmQoYyxlKX0scmVwbGFjZTpmdW5jdGlvbihlLHQpe3RoaXMuX25hdmlnYXRlKGUsdCxmdW5jdGlvbih0KXt0LnJlcGxhY2UoZSksdGhpcy5sb2NhdGlvbnNbdGhpcy5sb2NhdGlvbnMubGVuZ3RoLTFdPXRoaXMuY3VycmVudH0pfSxuYXZpZ2F0ZTpmdW5jdGlvbihlLG4pe3JldHVyblwiIzpiYWNrXCI9PT1lPyh0aGlzLmJhY2tDYWxsZWQ9ITAsdGhpcy5hZGFwdGVyLmJhY2soKSx0KToodGhpcy5fbmF2aWdhdGUoZSxuLGZ1bmN0aW9uKHQpe3QubmF2aWdhdGUoZSksdGhpcy5sb2NhdGlvbnMucHVzaCh0aGlzLmN1cnJlbnQpfSksdCl9LF9uYXZpZ2F0ZTpmdW5jdGlvbihlLG4saSl7dmFyIHI9dGhpcy5hZGFwdGVyO3JldHVybiBlPXIubm9ybWFsaXplKGUpLHRoaXMuY3VycmVudD09PWV8fHRoaXMuY3VycmVudD09PWRlY29kZVVSSUNvbXBvbmVudChlKT8odGhpcy50cmlnZ2VyKHUpLHQpOigobnx8IXRoaXMudHJpZ2dlcihjLHt1cmw6ZX0pKSYmKHRoaXMuY3VycmVudD1lLGkuY2FsbCh0aGlzLHIpLHRoaXMuaGlzdG9yeUxlbmd0aD1yLmxlbmd0aCgpKSx0KX0sX2NoZWNrVXJsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hZGFwdGVyLG49ZS5jdXJyZW50KCksaT1lLmxlbmd0aCgpLHI9dGhpcy5oaXN0b3J5TGVuZ3RoPT09aSxvPW49PT10aGlzLmxvY2F0aW9uc1t0aGlzLmxvY2F0aW9ucy5sZW5ndGgtMl0mJnIsYT10aGlzLmJhY2tDYWxsZWQscz10aGlzLmN1cnJlbnQ7cmV0dXJuIG51bGw9PT1ufHx0aGlzLmN1cnJlbnQ9PT1ufHx0aGlzLmN1cnJlbnQ9PT1kZWNvZGVVUklDb21wb25lbnQobik/ITA6KHRoaXMuaGlzdG9yeUxlbmd0aD1pLHRoaXMuYmFja0NhbGxlZD0hMSx0aGlzLmN1cnJlbnQ9bixvJiZ0aGlzLnRyaWdnZXIoXCJiYWNrXCIse3VybDpzLHRvOm59KT8oZS5mb3J3YXJkKCksdGhpcy5jdXJyZW50PXMsdCk6dGhpcy50cmlnZ2VyKGMse3VybDpuLGJhY2tCdXR0b25QcmVzc2VkOiFhfSk/KG8/ZS5mb3J3YXJkKCk6KGUuYmFjaygpLHRoaXMuaGlzdG9yeUxlbmd0aC0tKSx0aGlzLmN1cnJlbnQ9cyx0KToobz90aGlzLmxvY2F0aW9ucy5wb3AoKTp0aGlzLmxvY2F0aW9ucy5wdXNoKG4pLHQpKX19KTtsLkhpc3Rvcnk9ayxsLkhpc3RvcnkuSGlzdG9yeUFkYXB0ZXI9eSxsLkhpc3RvcnkuSGFzaEFkYXB0ZXI9YixsLkhpc3RvcnkuUHVzaFN0YXRlQWRhcHRlcj13LGwuYWJzb2x1dGVVUkw9bixsLmhpc3Rvcnk9bmV3IGt9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0P2U6XCIoW14vXSspXCJ9ZnVuY3Rpb24gdCh0LG4pe3JldHVybiBSZWdFeHAoXCJeXCIrdC5yZXBsYWNlKGYsXCJcXFxcJCZcIikucmVwbGFjZSh1LFwiKD86JDEpP1wiKS5yZXBsYWNlKGgsZSkucmVwbGFjZShwLFwiKC4qPylcIikrXCIkXCIsbj9cImlcIjpcIlwiKX1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnJlcGxhY2UoLyhcXD8uKil8KCMuKikvZyxcIlwiKX12YXIgaT13aW5kb3cua2VuZG8scj1pLmhpc3Rvcnksbz1pLk9ic2VydmFibGUsYT1cImluaXRcIixzPVwicm91dGVNaXNzaW5nXCIsbD1cImNoYW5nZVwiLGM9XCJiYWNrXCIsZD1cInNhbWVcIix1PS9cXCgoLio/KVxcKS9nLGg9LyhcXChcXD8pPzpcXHcrL2cscD0vXFwqXFx3Ky9nLGY9L1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nLGc9aS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSxuLGkpe2UgaW5zdGFuY2VvZiBSZWdFeHB8fChlPXQoZSxpKSksdGhpcy5yb3V0ZT1lLHRoaXMuX2NhbGxiYWNrPW59LGNhbGxiYWNrOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbz0wLGE9aS5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zKGUpO2ZvcihlPW4oZSksdD10aGlzLnJvdXRlLmV4ZWMoZSkuc2xpY2UoMSkscj10Lmxlbmd0aDtyPm87bysrKXZvaWQgMCE9PXRbb10mJih0W29dPWRlY29kZVVSSUNvbXBvbmVudCh0W29dKSk7dC5wdXNoKGEpLHRoaXMuX2NhbGxiYWNrLmFwcGx5KG51bGwsdCl9LHdvcmtzV2l0aDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yb3V0ZS50ZXN0KG4oZSkpPyh0aGlzLmNhbGxiYWNrKGUpLCEwKTohMX19KSxtPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2V8fChlPXt9KSxvLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLnJvdXRlcz1bXSx0aGlzLnB1c2hTdGF0ZT1lLnB1c2hTdGF0ZSx0aGlzLmhhc2hCYW5nPWUuaGFzaEJhbmcsdGhpcy5yb290PWUucm9vdCx0aGlzLmlnbm9yZUNhc2U9ZS5pZ25vcmVDYXNlIT09ITEsdGhpcy5iaW5kKFthLHMsbCxkXSxlKX0sZGVzdHJveTpmdW5jdGlvbigpe3IudW5iaW5kKGwsdGhpcy5fdXJsQ2hhbmdlZFByb3h5KSxyLnVuYmluZChkLHRoaXMuX3NhbWVQcm94eSksci51bmJpbmQoYyx0aGlzLl9iYWNrUHJveHkpLHRoaXMudW5iaW5kKCl9LHN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49ZnVuY3Rpb24oKXt0Ll9zYW1lKCl9LGk9ZnVuY3Rpb24oZSl7dC5fYmFjayhlKX0sbz1mdW5jdGlvbihlKXt0Ll91cmxDaGFuZ2VkKGUpfTtyLnN0YXJ0KHtzYW1lOm4sY2hhbmdlOm8sYmFjazppLHB1c2hTdGF0ZTp0LnB1c2hTdGF0ZSxoYXNoQmFuZzp0Lmhhc2hCYW5nLHJvb3Q6dC5yb290fSksZT17dXJsOnIuY3VycmVudHx8XCIvXCIscHJldmVudERlZmF1bHQ6JC5ub29wfSx0LnRyaWdnZXIoYSxlKXx8dC5fdXJsQ2hhbmdlZChlKSx0aGlzLl91cmxDaGFuZ2VkUHJveHk9byx0aGlzLl9iYWNrUHJveHk9aX0scm91dGU6ZnVuY3Rpb24oZSx0KXt0aGlzLnJvdXRlcy5wdXNoKG5ldyBnKGUsdCx0aGlzLmlnbm9yZUNhc2UpKX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXtpLmhpc3RvcnkubmF2aWdhdGUoZSx0KX0scmVwbGFjZTpmdW5jdGlvbihlLHQpe2kuaGlzdG9yeS5yZXBsYWNlKGUsdCl9LF9iYWNrOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihjLHt1cmw6ZS51cmwsdG86ZS50b30pJiZlLnByZXZlbnREZWZhdWx0KCl9LF9zYW1lOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGQpfSxfdXJsQ2hhbmdlZDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxhPWUudXJsO2lmKGF8fChhPVwiL1wiKSx0aGlzLnRyaWdnZXIobCx7dXJsOmUudXJsLHBhcmFtczppLnBhcnNlUXVlcnlTdHJpbmdQYXJhbXMoZS51cmwpLGJhY2tCdXR0b25QcmVzc2VkOmUuYmFja0J1dHRvblByZXNzZWR9KSlyZXR1cm4gdm9pZCBlLnByZXZlbnREZWZhdWx0KCk7Zm9yKHQ9MCxuPXRoaXMucm91dGVzLG89bi5sZW5ndGg7bz50O3QrKylpZihyPW5bdF0sci53b3Jrc1dpdGgoYSkpcmV0dXJuO3RoaXMudHJpZ2dlcihzLHt1cmw6YSxwYXJhbXM6aS5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zKGEpLGJhY2tCdXR0b25QcmVzc2VkOmUuYmFja0J1dHRvblByZXNzZWR9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0pO2kuUm91dGVyPW19KCksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHIscyl7dmFyIGwsYyxkLHUsaCxwLGYsZyxtPVtdLHY9ci5sb2dpY3x8XCJhbmRcIixfPXIuZmlsdGVycztmb3IobD0wLGM9Xy5sZW5ndGg7Yz5sO2wrKylyPV9bbF0sZD1yLmZpZWxkLGY9ci52YWx1ZSxwPXIub3BlcmF0b3Isci5maWx0ZXJzP3I9bihyLHMpOihnPXIuaWdub3JlQ2FzZSxkPWQucmVwbGFjZSgvXFwuL2csXCIvXCIpLHI9b1twXSxzJiYocj1hW3BdKSxyJiZmIT09dCYmKHU9ZS50eXBlKGYpLFwic3RyaW5nXCI9PT11PyhoPVwiJ3sxfSdcIixmPWYucmVwbGFjZSgvJy9nLFwiJydcIiksZz09PSEwJiYoZD1cInRvbG93ZXIoXCIrZCtcIilcIikpOmg9XCJkYXRlXCI9PT11P3M/XCJ7MTp5eXl5LU1NLWRkVEhIOm1tOnNzKzAwOjAwfVwiOlwiZGF0ZXRpbWUnezE6eXl5eS1NTS1kZFRISDptbTpzc30nXCI6XCJ7MX1cIixyLmxlbmd0aD4zP1wic3Vic3RyaW5nb2ZcIiE9PXI/aD1cInswfSh7Mn0sXCIraCtcIilcIjooaD1cInswfShcIitoK1wiLHsyfSlcIixcImRvZXNub3Rjb250YWluXCI9PT1wJiYocz8oaD1cInswfSh7Mn0sJ3sxfScpIGVxIC0xXCIscj1cImluZGV4b2ZcIik6aCs9XCIgZXEgZmFsc2VcIikpOmg9XCJ7Mn0gezB9IFwiK2gscj1pLmZvcm1hdChoLHIsZixkKSkpLG0ucHVzaChyKTtyZXR1cm4gcj1tLmpvaW4oXCIgXCIrditcIiBcIiksbS5sZW5ndGg+MSYmKHI9XCIoXCIrcitcIilcIikscn12YXIgaT13aW5kb3cua2VuZG8scj1lLmV4dGVuZCxvPXtlcTpcImVxXCIsbmVxOlwibmVcIixndDpcImd0XCIsZ3RlOlwiZ2VcIixsdDpcImx0XCIsbHRlOlwibGVcIixjb250YWluczpcInN1YnN0cmluZ29mXCIsZG9lc25vdGNvbnRhaW46XCJzdWJzdHJpbmdvZlwiLGVuZHN3aXRoOlwiZW5kc3dpdGhcIixzdGFydHN3aXRoOlwic3RhcnRzd2l0aFwifSxhPXIoe30sbyx7Y29udGFpbnM6XCJjb250YWluc1wifSkscz17cGFnZVNpemU6ZS5ub29wLHBhZ2U6ZS5ub29wLGZpbHRlcjpmdW5jdGlvbihlLHQsaSl7dCYmKGUuJGZpbHRlcj1uKHQsaSkpfSxzb3J0OmZ1bmN0aW9uKHQsbil7dmFyIGk9ZS5tYXAobixmdW5jdGlvbihlKXt2YXIgdD1lLmZpZWxkLnJlcGxhY2UoL1xcLi9nLFwiL1wiKTtyZXR1cm5cImRlc2NcIj09PWUuZGlyJiYodCs9XCIgZGVzY1wiKSx0fSkuam9pbihcIixcIik7aSYmKHQuJG9yZGVyYnk9aSl9LHNraXA6ZnVuY3Rpb24oZSx0KXt0JiYoZS4kc2tpcD10KX0sdGFrZTpmdW5jdGlvbihlLHQpe3QmJihlLiR0b3A9dCl9fSxsPXtyZWFkOntkYXRhVHlwZTpcImpzb25wXCJ9fTtyKCEwLGkuZGF0YSx7c2NoZW1hczp7b2RhdGE6e3R5cGU6XCJqc29uXCIsZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gZS5kLnJlc3VsdHN8fFtlLmRdfSx0b3RhbDpcImQuX19jb3VudFwifX0sdHJhbnNwb3J0czp7b2RhdGE6e3JlYWQ6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvbnBcIixqc29ucDpcIiRjYWxsYmFja1wifSx1cGRhdGU6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24vanNvblwiLHR5cGU6XCJQVVRcIn0sY3JlYXRlOntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIixjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL2pzb25cIix0eXBlOlwiUE9TVFwifSxkZXN0cm95OntjYWNoZTohMCxkYXRhVHlwZTpcImpzb25cIix0eXBlOlwiREVMRVRFXCJ9LHBhcmFtZXRlck1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsbyxhLGM7aWYoZT1lfHx7fSx0PXR8fFwicmVhZFwiLGM9KHRoaXMub3B0aW9uc3x8bClbdF0sYz1jP2MuZGF0YVR5cGU6XCJqc29uXCIsXCJyZWFkXCI9PT10KXtyPXskaW5saW5lY291bnQ6XCJhbGxwYWdlc1wifSxcImpzb25cIiE9YyYmKHIuJGZvcm1hdD1cImpzb25cIik7Zm9yKGEgaW4gZSlzW2FdP3NbYV0ocixlW2FdLG4pOnJbYV09ZVthXX1lbHNle2lmKFwianNvblwiIT09Yyl0aHJvdyBFcnJvcihcIk9ubHkganNvbiBkYXRhVHlwZSBjYW4gYmUgdXNlZCBmb3IgXCIrdCtcIiBvcGVyYXRpb24uXCIpO2lmKFwiZGVzdHJveVwiIT09dCl7Zm9yKGEgaW4gZSlvPWVbYV0sXCJudW1iZXJcIj09dHlwZW9mIG8mJihlW2FdPW8rXCJcIik7cj1pLnN0cmluZ2lmeShlKX19cmV0dXJuIHJ9fX19KSxyKCEwLGkuZGF0YSx7c2NoZW1hczp7XCJvZGF0YS12NFwiOnt0eXBlOlwianNvblwiLGRhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudmFsdWU/ZS52YWx1ZTooZGVsZXRlIGVbXCJvZGF0YS5tZXRhZGF0YVwiXSxbZV0pfSx0b3RhbDpmdW5jdGlvbihlKXtyZXR1cm4gZVtcIkBvZGF0YS5jb3VudFwiXX19fSx0cmFuc3BvcnRzOntcIm9kYXRhLXY0XCI6e3JlYWQ6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwifSx1cGRhdGU6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24vanNvbjtJRUVFNzU0Q29tcGF0aWJsZT10cnVlXCIsdHlwZTpcIlBVVFwifSxjcmVhdGU6e2NhY2hlOiEwLGRhdGFUeXBlOlwianNvblwiLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24vanNvbjtJRUVFNzU0Q29tcGF0aWJsZT10cnVlXCIsdHlwZTpcIlBPU1RcIn0sZGVzdHJveTp7Y2FjaGU6ITAsZGF0YVR5cGU6XCJqc29uXCIsdHlwZTpcIkRFTEVURVwifSxwYXJhbWV0ZXJNYXA6ZnVuY3Rpb24oZSx0KXt2YXIgbj1pLmRhdGEudHJhbnNwb3J0cy5vZGF0YS5wYXJhbWV0ZXJNYXAoZSx0LCEwKTtyZXR1cm5cInJlYWRcIj09dCYmKG4uJGNvdW50PSEwLGRlbGV0ZSBuLiRpbmxpbmVjb3VudCksbn19fX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPWUuaXNBcnJheSxyPWUuaXNQbGFpbk9iamVjdCxvPWUubWFwLGE9ZS5lYWNoLHM9ZS5leHRlbmQsbD1uLmdldHRlcixjPW4uQ2xhc3MsZD1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdCxsLGMsZCx1PXRoaXMsaD1lLnRvdGFsLHA9ZS5tb2RlbCxmPWUucGFyc2UsZz1lLmVycm9ycyxtPWUuc2VyaWFsaXplLHY9ZS5kYXRhO3AmJihyKHApJiYodD1lLm1vZGVsQmFzZXx8bi5kYXRhLk1vZGVsLHAuZmllbGRzJiZhKHAuZmllbGRzLGZ1bmN0aW9uKGUsdCl7dD1yKHQpJiZ0LmZpZWxkP3ModCx7ZmllbGQ6dS5nZXR0ZXIodC5maWVsZCl9KTp7ZmllbGQ6dS5nZXR0ZXIodCl9LHAuZmllbGRzW2VdPXR9KSxsPXAuaWQsbCYmKGM9e30sY1t1LnhwYXRoVG9NZW1iZXIobCwhMCldPXtmaWVsZDp1LmdldHRlcihsKX0scC5maWVsZHM9cyhjLHAuZmllbGRzKSxwLmlkPXUueHBhdGhUb01lbWJlcihsKSkscD10LmRlZmluZShwKSksdS5tb2RlbD1wKSxoJiYoXCJzdHJpbmdcIj09dHlwZW9mIGg/KGg9dS5nZXR0ZXIoaCksdS50b3RhbD1mdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoaChlKSwxMCl9KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBoJiYodS50b3RhbD1oKSksZyYmKFwic3RyaW5nXCI9PXR5cGVvZiBnPyhnPXUuZ2V0dGVyKGcpLHUuZXJyb3JzPWZ1bmN0aW9uKGUpe3JldHVybiBnKGUpfHxudWxsfSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZyYmKHUuZXJyb3JzPWcpKSx2JiYoXCJzdHJpbmdcIj09dHlwZW9mIHY/KHY9dS54cGF0aFRvTWVtYmVyKHYpLHUuZGF0YT1mdW5jdGlvbihlKXt2YXIgdCxuPXUuZXZhbHVhdGUoZSx2KTtyZXR1cm4gbj1pKG4pP246W25dLHUubW9kZWwmJnAuZmllbGRzPyh0PW5ldyB1Lm1vZGVsLG8obixmdW5jdGlvbihlKXtpZihlKXt2YXIgbixpPXt9O2ZvcihuIGluIHAuZmllbGRzKWlbbl09dC5fcGFyc2UobixwLmZpZWxkc1tuXS5maWVsZChlKSk7cmV0dXJuIGl9fSkpOm59KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB2JiYodS5kYXRhPXYpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmJiYoZD11LnBhcnNlLHUucGFyc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9Zi5jYWxsKHUsZSk7cmV0dXJuIGQuY2FsbCh1LHQpfSksXCJmdW5jdGlvblwiPT10eXBlb2YgbSYmKHUuc2VyaWFsaXplPW0pfSx0b3RhbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhKGUpLmxlbmd0aH0sZXJyb3JzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UuZXJyb3JzOm51bGx9LHNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gZX0scGFyc2VET006ZnVuY3Rpb24oZSl7dmFyIG4scixvLGEscyxsLGMsZD17fSx1PWUuYXR0cmlidXRlcyxoPXUubGVuZ3RoO2ZvcihjPTA7aD5jO2MrKylsPXVbY10sZFtcIkBcIitsLm5vZGVOYW1lXT1sLm5vZGVWYWx1ZTtmb3Iocj1lLmZpcnN0Q2hpbGQ7cjtyPXIubmV4dFNpYmxpbmcpbz1yLm5vZGVUeXBlLDM9PT1vfHw0PT09bz9kW1wiI3RleHRcIl09ci5ub2RlVmFsdWU6MT09PW8mJihuPXRoaXMucGFyc2VET00ociksYT1yLm5vZGVOYW1lLHM9ZFthXSxpKHMpP3MucHVzaChuKTpzPXMhPT10P1tzLG5dOm4sZFthXT1zKTtyZXR1cm4gZH0sZXZhbHVhdGU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4scixvLGEscyxsPXQuc3BsaXQoXCIuXCIpO249bC5zaGlmdCgpOylpZihlPWVbbl0saShlKSl7Zm9yKHI9W10sdD1sLmpvaW4oXCIuXCIpLHM9MCxvPWUubGVuZ3RoO28+cztzKyspYT10aGlzLmV2YWx1YXRlKGVbc10sdCksYT1pKGEpP2E6W2FdLHIucHVzaC5hcHBseShyLGEpO3JldHVybiByfXJldHVybiBlfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgbixpLHI9e307cmV0dXJuIG49dC5kb2N1bWVudEVsZW1lbnR8fGUucGFyc2VYTUwodCkuZG9jdW1lbnRFbGVtZW50LGk9dGhpcy5wYXJzZURPTShuKSxyW24ubm9kZU5hbWVdPWkscn0seHBhdGhUb01lbWJlcjpmdW5jdGlvbihlLHQpe3JldHVybiBlPyhlPWUucmVwbGFjZSgvXlxcLy8sXCJcIikucmVwbGFjZSgvXFwvL2csXCIuXCIpLGUuaW5kZXhPZihcIkBcIik+PTA/ZS5yZXBsYWNlKC9cXC4/KEAuKikvLHQ/XCIkMVwiOidbXCIkMVwiXScpOmUuaW5kZXhPZihcInRleHQoKVwiKT49MD9lLnJlcGxhY2UoLyhcXC4/dGV4dFxcKFxcKSkvLHQ/XCIjdGV4dFwiOidbXCIjdGV4dFwiXScpOmUpOlwiXCJ9LGdldHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gbCh0aGlzLnhwYXRoVG9NZW1iZXIoZSksITApfX0pO2UuZXh0ZW5kKCEwLG4uZGF0YSx7WG1sRGF0YVJlYWRlcjpkLHJlYWRlcnM6e3htbDpkfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4saSl7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvLGE9e307Zm9yKG8gaW4gcilhW29dPXJbb107YS5maWVsZD1pP24rXCIuXCIrci5maWVsZDpuLHQ9PXd0JiZlLl9ub3RpZnlDaGFuZ2UmJmUuX25vdGlmeUNoYW5nZShhKSxlLnRyaWdnZXIodCxhKX19ZnVuY3Rpb24gaSh0LG4pe2lmKHQ9PT1uKXJldHVybiEwO3ZhciByLG89ZS50eXBlKHQpLGE9ZS50eXBlKG4pO2lmKG8hPT1hKXJldHVybiExO2lmKFwiZGF0ZVwiPT09bylyZXR1cm4gdC5nZXRUaW1lKCk9PT1uLmdldFRpbWUoKTtpZihcIm9iamVjdFwiIT09byYmXCJhcnJheVwiIT09bylyZXR1cm4hMTtmb3IociBpbiB0KWlmKCFpKHRbcl0sbltyXSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcihlLHQpe3ZhciBuLGk7Zm9yKGkgaW4gZSl7aWYobj1lW2ldLGl0KG4pJiZuLmZpZWxkJiZuLmZpZWxkPT09dClyZXR1cm4gbjtpZihuPT09dClyZXR1cm4gbn1yZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGUpe3RoaXMuZGF0YT1lfHxbXX1mdW5jdGlvbiBhKGUsbil7aWYoZSl7dmFyIGk9dHlwZW9mIGU9PT1mdD97ZmllbGQ6ZSxkaXI6bn06ZSxyPW90KGkpP2k6aSE9PXQ/W2ldOltdO3JldHVybiBhdChyLGZ1bmN0aW9uKGUpe3JldHVybiEhZS5kaXJ9KX19ZnVuY3Rpb24gcyhlKXt2YXIgdCxuLGkscixvPWUuZmlsdGVycztpZihvKWZvcih0PTAsbj1vLmxlbmd0aDtuPnQ7dCsrKWk9b1t0XSxyPWkub3BlcmF0b3IsciYmdHlwZW9mIHI9PT1mdCYmKGkub3BlcmF0b3I9V1tyLnRvTG93ZXJDYXNlKCldfHxyKSxzKGkpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUmJiFydChlKT8oKG90KGUpfHwhZS5maWx0ZXJzKSYmKGU9e2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpvdChlKT9lOltlXX0pLHMoZSksZSk6dH1mdW5jdGlvbiBjKGUpe3JldHVybiBvdChlKT9lOltlXX1mdW5jdGlvbiBkKGUsbil7dmFyIGk9dHlwZW9mIGU9PT1mdD97ZmllbGQ6ZSxkaXI6bn06ZSxyPW90KGkpP2k6aSE9PXQ/W2ldOltdO3JldHVybiBIKHIsZnVuY3Rpb24oZSl7cmV0dXJue2ZpZWxkOmUuZmllbGQsZGlyOmUuZGlyfHxcImFzY1wiLGFnZ3JlZ2F0ZXM6ZS5hZ2dyZWdhdGVzfX0pfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZSYmZS5nZXRUaW1lJiZ0JiZ0LmdldFRpbWU/ZS5nZXRUaW1lKCk9PT10LmdldFRpbWUoKTplPT09dH1mdW5jdGlvbiBoKGUsdCxuLGkscixvKXt2YXIgYSxzLGwsYyxkO2Zvcih0PXR8fFtdLGM9dC5sZW5ndGgsYT0wO2M+YTthKyspcz10W2FdLGw9cy5hZ2dyZWdhdGUsZD1zLmZpZWxkLGVbZF09ZVtkXXx8e30sb1tkXT1vW2RdfHx7fSxvW2RdW2xdPW9bZF1bbF18fHt9LGVbZF1bbF09altsLnRvTG93ZXJDYXNlKCldKGVbZF1bbF0sbixkdC5hY2Nlc3NvcihkKSxpLHIsb1tkXVtsXSl9ZnVuY3Rpb24gcChlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGUmJmUuZ2V0VGltZX1mdW5jdGlvbiBnKGUpe3ZhciB0LG49ZS5sZW5ndGgsaT1BcnJheShuKTtmb3IodD0wO24+dDt0KyspaVt0XT1lW3RdLnRvSlNPTigpO3JldHVybiBpfWZ1bmN0aW9uIG0oZSx0LG4saSxyKXt2YXIgbyxhLHMsbCxjO2ZvcihsPTAsYz1lLmxlbmd0aDtjPmw7bCsrKXtvPWVbbF07Zm9yKGEgaW4gdClzPXJbYV0scyYmcyE9PWEmJihvW3NdPXRbYV0obyksZGVsZXRlIG9bYV0pfX1mdW5jdGlvbiB2KGUsdCxuLGkscil7dmFyIG8sYSxzLGwsYztmb3IobD0wLGM9ZS5sZW5ndGg7Yz5sO2wrKyl7bz1lW2xdO2ZvcihhIGluIHQpb1thXT1uLl9wYXJzZShhLHRbYV0obykpLHM9clthXSxzJiZzIT09YSYmZGVsZXRlIG9bc119fWZ1bmN0aW9uIF8oZSx0LG4saSxyKXt2YXIgbyxhLHMsbDtmb3IoYT0wLGw9ZS5sZW5ndGg7bD5hO2ErKylvPWVbYV0scz1pW28uZmllbGRdLHMmJnMhPW8uZmllbGQmJihvLmZpZWxkPXMpLG8udmFsdWU9bi5fcGFyc2Uoby5maWVsZCxvLnZhbHVlKSxvLmhhc1N1Ymdyb3Vwcz9fKG8uaXRlbXMsdCxuLGkscik6dihvLml0ZW1zLHQsbixpLHIpfWZ1bmN0aW9uIHkoZSx0LG4saSxyLG8pe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYT1lKGEpLGEmJiFydChpKSYmKFwiW29iamVjdCBBcnJheV1cIj09PUh0LmNhbGwoYSl8fGEgaW5zdGFuY2VvZiBqdHx8KGE9W2FdKSxuKGEsaSxuZXcgdCxyLG8pKSxhfHxbXX19ZnVuY3Rpb24gdyhlLHQsbixpKXtmb3IodmFyIHIsbyxhLHM9MDt0Lmxlbmd0aCYmaSYmKHI9dFtzXSxvPXIuaXRlbXMsYT1vLmxlbmd0aCxlJiZlLmZpZWxkPT09ci5maWVsZCYmZS52YWx1ZT09PXIudmFsdWU/KGUuaGFzU3ViZ3JvdXBzJiZlLml0ZW1zLmxlbmd0aD93KGUuaXRlbXNbZS5pdGVtcy5sZW5ndGgtMV0sci5pdGVtcyxuLGkpOihvPW8uc2xpY2UobixuK2kpLGUuaXRlbXM9ZS5pdGVtcy5jb25jYXQobykpLHQuc3BsaWNlKHMtLSwxKSk6ci5oYXNTdWJncm91cHMmJm8ubGVuZ3RoP3cocixvLG4saSk6KG89by5zbGljZShuLG4raSksci5pdGVtcz1vLHIuaXRlbXMubGVuZ3RofHx0LnNwbGljZShzLS0sMSkpLDA9PT1vLmxlbmd0aD9uLT1hOihuPTAsaS09by5sZW5ndGgpLCEoKytzPj10Lmxlbmd0aCkpOyk7dC5sZW5ndGg+cyYmdC5zcGxpY2Uocyx0Lmxlbmd0aC1zKX1mdW5jdGlvbiBiKGUpe3ZhciB0LG4saSxyLG8sYT1bXTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpZihvPWUuYXQodCksby5oYXNTdWJncm91cHMpYT1hLmNvbmNhdChiKG8uaXRlbXMpKTtlbHNlIGZvcihpPW8uaXRlbXMscj0wO2kubGVuZ3RoPnI7cisrKWEucHVzaChpLmF0KHIpKTtyZXR1cm4gYX1mdW5jdGlvbiBrKGUsdCl7dmFyIG4saSxyO2lmKHQpZm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspcj1lLmF0KG4pLHIuaGFzU3ViZ3JvdXBzP2soci5pdGVtcyx0KTpyLml0ZW1zPW5ldyBHdChyLml0ZW1zLHQpfWZ1bmN0aW9uIHgoZSx0KXtmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYoZVtuXS5oYXNTdWJncm91cHMpe2lmKHgoZVtuXS5pdGVtcyx0KSlyZXR1cm4hMH1lbHNlIGlmKHQoZVtuXS5pdGVtcyxlW25dKSlyZXR1cm4hMH1mdW5jdGlvbiBDKGUsdCxuLGkpe2Zvcih2YXIgcj0wO2UubGVuZ3RoPnImJmVbcl0uZGF0YSE9PXQmJiFTKGVbcl0uZGF0YSxuLGkpO3IrKyk7fWZ1bmN0aW9uIFMoZSx0LG4pe2Zvcih2YXIgaT0wLHI9ZS5sZW5ndGg7cj5pO2krKyl7aWYoZVtpXSYmZVtpXS5oYXNTdWJncm91cHMpcmV0dXJuIFMoZVtpXS5pdGVtcyx0LG4pO2lmKGVbaV09PT10fHxlW2ldPT09bilyZXR1cm4gZVtpXT1uLCEwfX1mdW5jdGlvbiBUKGUsbixpLHIpe3ZhciBvLGEscyxsO2ZvcihvPTAsYT1lLmxlbmd0aDthPm87bysrKWlmKHM9ZVtvXSxzJiYhKHMgaW5zdGFuY2VvZiByKSlpZihzLmhhc1N1Ymdyb3VwcyE9PXQpVChzLml0ZW1zLG4saSxyKTtlbHNlIGZvcihsPTA7bi5sZW5ndGg+bDtsKyspaWYobltsXT09PXMpe2Vbb109bi5hdChsKSxDKGksbixzLGVbb10pO2JyZWFrfX1mdW5jdGlvbiBEKGUsdCl7dmFyIG4saSxyO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKHI9ZS5hdChuKSxyLnVpZD09dC51aWQpcmV0dXJuIGUuc3BsaWNlKG4sMSkscn1mdW5jdGlvbiBBKGUsdCl7dmFyIG4saSxyLG87Zm9yKHI9ZS5sZW5ndGgtMSxvPTA7cj49bztyLS0paT1lW3JdLG49e3ZhbHVlOnQuZ2V0KGkuZmllbGQpLGZpZWxkOmkuZmllbGQsaXRlbXM6bj9bbl06W3RdLGhhc1N1Ymdyb3VwczohIW4sYWdncmVnYXRlczp7fX07cmV0dXJuIG59ZnVuY3Rpb24gRShlLHQpe3JldHVybiB0P1AoZSxmdW5jdGlvbihlKXtyZXR1cm4gZS51aWQ/ZS51aWQ9PXQudWlkOmVbdC5pZEZpZWxkXT09PXQuaWR9KTotMX1mdW5jdGlvbiBNKGUsdCl7cmV0dXJuIHQ/UChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLnVpZD09dC51aWR9KTotMX1mdW5jdGlvbiBQKGUsdCl7dmFyIG4saTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylpZih0KGVbbl0pKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIEkoZSx0KXt2YXIgbixpO3JldHVybiBlJiYhcnQoZSk/KG49ZVt0XSxpPWl0KG4pP24uZnJvbXx8bi5maWVsZHx8dDplW3RdfHx0LHV0KGkpP3Q6aSk6dH1mdW5jdGlvbiB6KGUsdCl7dmFyIG4saSxyLG89e307Zm9yKHIgaW4gZSlcImZpbHRlcnNcIiE9PXImJihvW3JdPWVbcl0pO2lmKGUuZmlsdGVycylmb3Ioby5maWx0ZXJzPVtdLG49MCxpPWUuZmlsdGVycy5sZW5ndGg7aT5uO24rKylvLmZpbHRlcnNbbl09eihlLmZpbHRlcnNbbl0sdCk7ZWxzZSBvLmZpZWxkPUkodC5maWVsZHMsby5maWVsZCk7cmV0dXJuIG99ZnVuY3Rpb24gRihlLHQpe3ZhciBuLGkscixvLGEscz1bXTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyl7cj17fSxvPWVbbl07Zm9yKGEgaW4gbylyW2FdPW9bYV07ci5maWVsZD1JKHQuZmllbGRzLHIuZmllbGQpLHIuYWdncmVnYXRlcyYmb3Qoci5hZ2dyZWdhdGVzKSYmKHIuYWdncmVnYXRlcz1GKHIuYWdncmVnYXRlcyx0KSkscy5wdXNoKHIpfXJldHVybiBzfWZ1bmN0aW9uIFIodCxuKXt2YXIgaSxyLG8sYSxzLGw9ZSh0KVswXS5jaGlsZHJlbixjPVtdLGQ9blswXSx1PW5bMV07Zm9yKGk9MCxyPWwubGVuZ3RoO3I+aTtpKyspbz17fSxzPWxbaV0scy5kaXNhYmxlZHx8KG9bZC5maWVsZF09cy50ZXh0LGE9cy5hdHRyaWJ1dGVzLnZhbHVlLGE9YSYmYS5zcGVjaWZpZWQ/cy52YWx1ZTpzLnRleHQsb1t1LmZpZWxkXT1hLGMucHVzaChvKSk7cmV0dXJuIGN9ZnVuY3Rpb24gQih0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQ9ZSh0KVswXS50Qm9kaWVzWzBdLHU9ZD9kLnJvd3M6W10saD1uLmxlbmd0aCxwPVtdO2ZvcihpPTAscj11Lmxlbmd0aDtyPmk7aSsrKXtmb3Iocz17fSxjPSEwLGE9dVtpXS5jZWxscyxvPTA7aD5vO28rKylsPWFbb10sXCJ0aFwiIT09bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYoYz0hMSxzW25bb10uZmllbGRdPWwuaW5uZXJIVE1MKTtjfHxwLnB1c2gocyl9cmV0dXJuIHB9ZnVuY3Rpb24gTChlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLG49Sy5mbltlXS5hcHBseSh0aGlzLEx0LmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHRoaXMuX2RhdGEhPXQmJnRoaXMuX2F0dGFjaEJ1YmJsZUhhbmRsZXJzKCksbn19ZnVuY3Rpb24gTyh0LG4pe2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZS5maWx0ZXIodCkuYWRkKGUuZmluZCh0KSl9dmFyIHIsbyxhLHMsbCxjLGQsdSxoPWUodCkuY2hpbGRyZW4oKSxwPVtdLGY9blswXS5maWVsZCxnPW5bMV0mJm5bMV0uZmllbGQsbT1uWzJdJiZuWzJdLmZpZWxkLHY9blszXSYmblszXS5maWVsZDtmb3Iocj0wLG89aC5sZW5ndGg7bz5yO3IrKylhPXtfbG9hZGVkOiEwfSxzPWguZXEociksYz1zWzBdLmZpcnN0Q2hpbGQsdT1zLmNoaWxkcmVuKCksdD11LmZpbHRlcihcInVsXCIpLHU9dS5maWx0ZXIoXCI6bm90KHVsKVwiKSxsPXMuYXR0cihcImRhdGEtaWRcIiksbCYmKGEuaWQ9bCksYyYmKGFbZl09Mz09Yy5ub2RlVHlwZT9jLm5vZGVWYWx1ZTp1LnRleHQoKSksZyYmKGFbZ109aSh1LFwiYVwiKS5hdHRyKFwiaHJlZlwiKSksdiYmKGFbdl09aSh1LFwiaW1nXCIpLmF0dHIoXCJzcmNcIikpLG0mJihkPWkodSxcIi5rLXNwcml0ZVwiKS5wcm9wKFwiY2xhc3NOYW1lXCIpLGFbbV09ZCYmZS50cmltKGQucmVwbGFjZShcImstc3ByaXRlXCIsXCJcIikpKSx0Lmxlbmd0aCYmKGEuaXRlbXM9Tyh0LmVxKDApLG4pKSxcInRydWVcIj09cy5hdHRyKFwiZGF0YS1oYXNDaGlsZHJlblwiKSYmKGEuaGFzQ2hpbGRyZW49ITApLHAucHVzaChhKTtyZXR1cm4gcH12YXIgSCxOLFYsVSxXLGosRyxxLCQsWSxLLFEsWCxKLFosZXQsdHQ9ZS5leHRlbmQsbnQ9ZS5wcm94eSxpdD1lLmlzUGxhaW5PYmplY3QscnQ9ZS5pc0VtcHR5T2JqZWN0LG90PWUuaXNBcnJheSxhdD1lLmdyZXAsc3Q9ZS5hamF4LGx0PWUuZWFjaCxjdD1lLm5vb3AsZHQ9d2luZG93LmtlbmRvLHV0PWR0LmlzRnVuY3Rpb24saHQ9ZHQuT2JzZXJ2YWJsZSxwdD1kdC5DbGFzcyxmdD1cInN0cmluZ1wiLGd0PVwiZnVuY3Rpb25cIixtdD1cImNyZWF0ZVwiLHZ0PVwicmVhZFwiLF90PVwidXBkYXRlXCIseXQ9XCJkZXN0cm95XCIsd3Q9XCJjaGFuZ2VcIixidD1cInN5bmNcIixrdD1cImdldFwiLHh0PVwiZXJyb3JcIixDdD1cInJlcXVlc3RTdGFydFwiLFN0PVwicHJvZ3Jlc3NcIixUdD1cInJlcXVlc3RFbmRcIixEdD1bbXQsdnQsX3QseXRdLEF0PWZ1bmN0aW9uKGUpe3JldHVybiBlfSxFdD1kdC5nZXR0ZXIsTXQ9ZHQuc3RyaW5naWZ5LFB0PU1hdGgsSXQ9W10ucHVzaCx6dD1bXS5qb2luLEZ0PVtdLnBvcCxSdD1bXS5zcGxpY2UsQnQ9W10uc2hpZnQsTHQ9W10uc2xpY2UsT3Q9W10udW5zaGlmdCxIdD17fS50b1N0cmluZyxOdD1kdC5zdXBwb3J0LnN0YWJsZVNvcnQsVnQ9L15cXC9EYXRlXFwoKC4qPylcXClcXC8kLyxVdD0vKFxccit8XFxuKykvZyxXdD0vKD89WydcXFxcXSkvZyxqdD1odC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24udHlwZT10fHxxdCxodC5mbi5pbml0LmNhbGwobiksbi5sZW5ndGg9ZS5sZW5ndGgsbi53cmFwQWxsKGUsbil9LGF0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5sZW5ndGgsaT1BcnJheShuKTtcbmZvcihlPTA7bj5lO2UrKyl0PXRoaXNbZV0sdCBpbnN0YW5jZW9mIHF0JiYodD10LnRvSlNPTigpKSxpW2VdPXQ7cmV0dXJuIGl9LHBhcmVudDpjdCx3cmFwQWxsOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1mdW5jdGlvbigpe3JldHVybiByfTtmb3IodD10fHxbXSxuPTAsaT1lLmxlbmd0aDtpPm47bisrKXRbbl09ci53cmFwKGVbbl0sbyk7cmV0dXJuIHR9LHdyYXA6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7cmV0dXJuIG51bGwhPT1lJiZcIltvYmplY3QgT2JqZWN0XVwiPT09SHQuY2FsbChlKSYmKG49ZSBpbnN0YW5jZW9mIGkudHlwZXx8ZSBpbnN0YW5jZW9mIEt0LG58fChlPWUgaW5zdGFuY2VvZiBxdD9lLnRvSlNPTigpOmUsZT1uZXcgaS50eXBlKGUpKSxlLnBhcmVudD10LGUuYmluZCh3dCxmdW5jdGlvbihlKXtpLnRyaWdnZXIod3Qse2ZpZWxkOmUuZmllbGQsbm9kZTplLm5vZGUsaW5kZXg6ZS5pbmRleCxpdGVtczplLml0ZW1zfHxbdGhpc10sYWN0aW9uOmUubm9kZT9lLmFjdGlvbnx8XCJpdGVtY2hhbmdlXCI6XCJpdGVtY2hhbmdlXCJ9KX0pKSxlfSxwdXNoOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmxlbmd0aCxuPXRoaXMud3JhcEFsbChhcmd1bWVudHMpO3JldHVybiBlPUl0LmFwcGx5KHRoaXMsbiksdGhpcy50cmlnZ2VyKHd0LHthY3Rpb246XCJhZGRcIixpbmRleDp0LGl0ZW1zOm59KSxlfSxzbGljZTpMdCxzb3J0OltdLnNvcnQsam9pbjp6dCxwb3A6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUZ0LmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcInJlbW92ZVwiLGluZGV4OmUtMSxpdGVtczpbdF19KSx0fSxzcGxpY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXRoaXMud3JhcEFsbChMdC5jYWxsKGFyZ3VtZW50cywyKSk7aWYoaT1SdC5hcHBseSh0aGlzLFtlLHRdLmNvbmNhdChhKSksaS5sZW5ndGgpZm9yKHRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwicmVtb3ZlXCIsaW5kZXg6ZSxpdGVtczppfSkscj0wLG89aS5sZW5ndGg7bz5yO3IrKylpW3JdLmNoaWxkcmVuJiZpW3JdLnVuYmluZCh3dCk7cmV0dXJuIG4mJnRoaXMudHJpZ2dlcih3dCx7YWN0aW9uOlwiYWRkXCIsaW5kZXg6ZSxpdGVtczphfSksaX0sc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aCx0PUJ0LmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcInJlbW92ZVwiLGluZGV4OjAsaXRlbXM6W3RdfSksdH0sdW5zaGlmdDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy53cmFwQWxsKGFyZ3VtZW50cyk7cmV0dXJuIGU9T3QuYXBwbHkodGhpcyx0KSx0aGlzLnRyaWdnZXIod3Qse2FjdGlvbjpcImFkZFwiLGluZGV4OjAsaXRlbXM6dH0pLGV9LGluZGV4T2Y6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXM7Zm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LGZvckVhY2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj10aGlzLmxlbmd0aDtuPnQ7dCsrKWUodGhpc1t0XSx0LHRoaXMpfSxtYXA6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1bXSxpPXRoaXMubGVuZ3RoO2k+dDt0Kyspblt0XT1lKHRoaXNbdF0sdCx0aGlzKTtyZXR1cm4gbn0sZmlsdGVyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT1bXSxyPXRoaXMubGVuZ3RoO3I+bjtuKyspdD10aGlzW25dLGUodCxuLHRoaXMpJiYoaVtpLmxlbmd0aF09dCk7cmV0dXJuIGl9LGZpbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxpPXRoaXMubGVuZ3RoO2k+bjtuKyspaWYodD10aGlzW25dLGUodCxuLHRoaXMpKXJldHVybiB0fSxldmVyeTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLGk9dGhpcy5sZW5ndGg7aT5uO24rKylpZih0PXRoaXNbbl0sIWUodCxuLHRoaXMpKXJldHVybiExO3JldHVybiEwfSxzb21lOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT10aGlzLmxlbmd0aDtpPm47bisrKWlmKHQ9dGhpc1tuXSxlKHQsbix0aGlzKSlyZXR1cm4hMDtyZXR1cm4hMX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuc3BsaWNlKHQsMSl9LGVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5zcGxpY2UoMCx0aGlzLmxlbmd0aCl9fSksR3Q9anQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7aHQuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMudHlwZT10fHxxdDtmb3IodmFyIG49MDtlLmxlbmd0aD5uO24rKyl0aGlzW25dPWVbbl07dGhpcy5sZW5ndGg9bix0aGlzLl9wYXJlbnQ9bnQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdGhpcyl9LGF0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbZV07cmV0dXJuIHQgaW5zdGFuY2VvZiB0aGlzLnR5cGU/dC5wYXJlbnQ9dGhpcy5fcGFyZW50OnQ9dGhpc1tlXT10aGlzLndyYXAodCx0aGlzLl9wYXJlbnQpLHR9fSkscXQ9aHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9ZnVuY3Rpb24oKXtyZXR1cm4gaX07aHQuZm4uaW5pdC5jYWxsKHRoaXMpO2ZvcihuIGluIGUpdD1lW25dLFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiYhdC5nZXRUaW1lJiZcIl9cIiE9bi5jaGFyQXQoMCkmJih0PWkud3JhcCh0LG4scikpLGlbbl09dDtpLnVpZD1kdC5ndWlkKCl9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShlKSYmXCJfZXZlbnRzXCIhPT1lJiZ0eXBlb2YgdGhpc1tlXSE9PWd0JiZcInVpZFwiIT09ZX0sZm9yRWFjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcyl0aGlzLnNob3VsZFNlcmlhbGl6ZSh0KSYmZSh0aGlzW3RdLHQpfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZSx0LG49e307Zm9yKHQgaW4gdGhpcyl0aGlzLnNob3VsZFNlcmlhbGl6ZSh0KSYmKGU9dGhpc1t0XSwoZSBpbnN0YW5jZW9mIHF0fHxlIGluc3RhbmNlb2YganQpJiYoZT1lLnRvSlNPTigpKSxuW3RdPWUpO3JldHVybiBufSxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO3JldHVybiBuLnRyaWdnZXIoa3Qse2ZpZWxkOmV9KSx0PVwidGhpc1wiPT09ZT9uOmR0LmdldHRlcihlLCEwKShuKX0sX3NldDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMsYT1lLmluZGV4T2YoXCIuXCIpPj0wO2lmKGEpZm9yKG49ZS5zcGxpdChcIi5cIiksaT1cIlwiO24ubGVuZ3RoPjE7KXtpZihpKz1uLnNoaWZ0KCkscj1kdC5nZXR0ZXIoaSwhMCkobyksciBpbnN0YW5jZW9mIHF0KXJldHVybiByLnNldChuLmpvaW4oXCIuXCIpLHQpLGE7aSs9XCIuXCJ9cmV0dXJuIGR0LnNldHRlcihlKShvLHQpLGF9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1lLmluZGV4T2YoXCIuXCIpPj0wLHI9ZHQuZ2V0dGVyKGUsITApKG4pO3IhPT10JiYobi50cmlnZ2VyKFwic2V0XCIse2ZpZWxkOmUsdmFsdWU6dH0pfHwoaXx8KHQ9bi53cmFwKHQsZSxmdW5jdGlvbigpe3JldHVybiBufSkpLCghbi5fc2V0KGUsdCl8fGUuaW5kZXhPZihcIihcIik+PTB8fGUuaW5kZXhPZihcIltcIik+PTApJiZuLnRyaWdnZXIod3Qse2ZpZWxkOmV9KSkpfSxwYXJlbnQ6Y3Qsd3JhcDpmdW5jdGlvbihlLHQsaSl7dmFyIHIsbyxhPXRoaXMscz1IdC5jYWxsKGUpO3JldHVybiBudWxsPT1lfHxcIltvYmplY3QgT2JqZWN0XVwiIT09cyYmXCJbb2JqZWN0IEFycmF5XVwiIT09c3x8KHI9ZSBpbnN0YW5jZW9mIGp0LG89ZSBpbnN0YW5jZW9mIEssXCJbb2JqZWN0IE9iamVjdF1cIiE9PXN8fG98fHI/KFwiW29iamVjdCBBcnJheV1cIj09PXN8fHJ8fG8pJiYocnx8b3x8KGU9bmV3IGp0KGUpKSxlLnBhcmVudCgpIT1pKCkmJmUuYmluZCh3dCxuKGEsd3QsdCwhMSkpKTooZSBpbnN0YW5jZW9mIHF0fHwoZT1uZXcgcXQoZSkpLGUucGFyZW50KCkhPWkoKSYmKGUuYmluZChrdCxuKGEsa3QsdCwhMCkpLGUuYmluZCh3dCxuKGEsd3QsdCwhMCkpKSksZS5wYXJlbnQ9aSksZX19KSwkdD17bnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiBkdC5wYXJzZUZsb2F0KGUpfSxkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBkdC5wYXJzZURhdGUoZSl9LFwiYm9vbGVhblwiOmZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZT09PWZ0P1widHJ1ZVwiPT09ZS50b0xvd2VyQ2FzZSgpOm51bGwhPWU/ISFlOmV9LHN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9lK1wiXCI6ZX0sXCJkZWZhdWx0XCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSxZdD17c3RyaW5nOlwiXCIsbnVtYmVyOjAsZGF0ZTpuZXcgRGF0ZSxcImJvb2xlYW5cIjohMSxcImRlZmF1bHRcIjpcIlwifSxLdD1xdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obil7dmFyIGkscixvPXRoaXM7aWYoKCFufHxlLmlzRW1wdHlPYmplY3QobikpJiYobj1lLmV4dGVuZCh7fSxvLmRlZmF1bHRzLG4pLG8uX2luaXRpYWxpemVycykpZm9yKGk9MDtvLl9pbml0aWFsaXplcnMubGVuZ3RoPmk7aSsrKXI9by5faW5pdGlhbGl6ZXJzW2ldLG5bcl09by5kZWZhdWx0c1tyXSgpO3F0LmZuLmluaXQuY2FsbChvLG4pLG8uZGlydHk9ITEsby5pZEZpZWxkJiYoby5pZD1vLmdldChvLmlkRmllbGQpLG8uaWQ9PT10JiYoby5pZD1vLl9kZWZhdWx0SWQpKX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBxdC5mbi5zaG91bGRTZXJpYWxpemUuY2FsbCh0aGlzLGUpJiZcInVpZFwiIT09ZSYmIShcImlkXCIhPT10aGlzLmlkRmllbGQmJlwiaWRcIj09PWUpJiZcImRpcnR5XCIhPT1lJiZcIl9hY2Nlc3NvcnNcIiE9PWV9LF9wYXJzZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxvPWUsYT1pLmZpZWxkc3x8e307cmV0dXJuIGU9YVtlXSxlfHwoZT1yKGEsbykpLGUmJihuPWUucGFyc2UsIW4mJmUudHlwZSYmKG49JHRbZS50eXBlLnRvTG93ZXJDYXNlKCldKSksbj9uKHQpOnR9LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hY3Rpb247KFwiYWRkXCI9PXR8fFwicmVtb3ZlXCI9PXQpJiYodGhpcy5kaXJ0eT0hMCl9LGVkaXRhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlPSh0aGlzLmZpZWxkc3x8e30pW2VdLGU/ZS5lZGl0YWJsZSE9PSExOiEwfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXM7ci5lZGl0YWJsZShlKSYmKHQ9ci5fcGFyc2UoZSx0KSxpKHQsci5nZXQoZSkpfHwoci5kaXJ0eT0hMCxxdC5mbi5zZXQuY2FsbChyLGUsdCxuKSkpfSxhY2NlcHQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1mdW5jdGlvbigpe3JldHVybiBpfTtmb3IodCBpbiBlKW49ZVt0XSxcIl9cIiE9dC5jaGFyQXQoMCkmJihuPWkud3JhcChlW3RdLHQscikpLGkuX3NldCh0LG4pO2kuaWRGaWVsZCYmKGkuaWQ9aS5nZXQoaS5pZEZpZWxkKSksaS5kaXJ0eT0hMX0saXNOZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZD09PXRoaXMuX2RlZmF1bHRJZH19KTtLdC5kZWZpbmU9ZnVuY3Rpb24oZSxuKXtuPT09dCYmKG49ZSxlPUt0KTt2YXIgaSxyLG8sYSxzLGwsYyxkLHU9dHQoe2RlZmF1bHRzOnt9fSxuKSxoPXt9LHA9dS5pZCxmPVtdO2lmKHAmJih1LmlkRmllbGQ9cCksdS5pZCYmZGVsZXRlIHUuaWQscCYmKHUuZGVmYXVsdHNbcF09dS5fZGVmYXVsdElkPVwiXCIpLFwiW29iamVjdCBBcnJheV1cIj09PUh0LmNhbGwodS5maWVsZHMpKXtmb3IobD0wLGM9dS5maWVsZHMubGVuZ3RoO2M+bDtsKyspbz11LmZpZWxkc1tsXSx0eXBlb2Ygbz09PWZ0P2hbb109e306by5maWVsZCYmKGhbby5maWVsZF09byk7dS5maWVsZHM9aH1mb3IociBpbiB1LmZpZWxkcylvPXUuZmllbGRzW3JdLGE9by50eXBlfHxcImRlZmF1bHRcIixzPW51bGwsZD1yLHI9dHlwZW9mIG8uZmllbGQ9PT1mdD9vLmZpZWxkOnIsby5udWxsYWJsZXx8KHM9dS5kZWZhdWx0c1tkIT09cj9kOnJdPW8uZGVmYXVsdFZhbHVlIT09dD9vLmRlZmF1bHRWYWx1ZTpZdFthLnRvTG93ZXJDYXNlKCldLFwiZnVuY3Rpb25cIj09dHlwZW9mIHMmJmYucHVzaChyKSksbi5pZD09PXImJih1Ll9kZWZhdWx0SWQ9cyksdS5kZWZhdWx0c1tkIT09cj9kOnJdPXMsby5wYXJzZT1vLnBhcnNlfHwkdFthXTtyZXR1cm4gZi5sZW5ndGg+MCYmKHUuX2luaXRpYWxpemVycz1mKSxpPWUuZXh0ZW5kKHUpLGkuZGVmaW5lPWZ1bmN0aW9uKGUpe3JldHVybiBLdC5kZWZpbmUoaSxlKX0sdS5maWVsZHMmJihpLmZpZWxkcz11LmZpZWxkcyxpLmlkRmllbGQ9dS5pZEZpZWxkKSxpfSxOPXtzZWxlY3RvcjpmdW5jdGlvbihlKXtyZXR1cm4gdXQoZSk/ZTpFdChlKX0sY29tcGFyZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBlPXQoZSksbj10KG4pLG51bGw9PWUmJm51bGw9PW4/MDpudWxsPT1lPy0xOm51bGw9PW4/MTplLmxvY2FsZUNvbXBhcmU/ZS5sb2NhbGVDb21wYXJlKG4pOmU+bj8xOm4+ZT8tMTowfX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcGFyZXx8dGhpcy5jb21wYXJlKGUuZmllbGQpO3JldHVyblwiZGVzY1wiPT1lLmRpcj9mdW5jdGlvbihlLG4pe3JldHVybiB0KG4sZSwhMCl9OnR9LGNvbWJpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIGkscixvPWVbMF0odCxuKTtmb3IoaT0xLHI9ZS5sZW5ndGg7cj5pO2krKylvPW98fGVbaV0odCxuKTtyZXR1cm4gb319fSxWPXR0KHt9LE4se2FzYzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXQoZSkscj10KG4pO3JldHVybiBpJiZpLmdldFRpbWUmJnImJnIuZ2V0VGltZSYmKGk9aS5nZXRUaW1lKCkscj1yLmdldFRpbWUoKSksaT09PXI/ZS5fX3Bvc2l0aW9uLW4uX19wb3NpdGlvbjpudWxsPT1pPy0xOm51bGw9PXI/MTppLmxvY2FsZUNvbXBhcmU/aS5sb2NhbGVDb21wYXJlKHIpOmk+cj8xOi0xfX0sZGVzYzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGVjdG9yKGUpO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXQoZSkscj10KG4pO3JldHVybiBpJiZpLmdldFRpbWUmJnImJnIuZ2V0VGltZSYmKGk9aS5nZXRUaW1lKCkscj1yLmdldFRpbWUoKSksaT09PXI/ZS5fX3Bvc2l0aW9uLW4uX19wb3NpdGlvbjpudWxsPT1pPzE6bnVsbD09cj8tMTpyLmxvY2FsZUNvbXBhcmU/ci5sb2NhbGVDb21wYXJlKGkpOnI+aT8xOi0xfX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2UuZGlyXShlLmZpZWxkKX19KSxIPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmxlbmd0aCxyPUFycmF5KGkpO2ZvcihuPTA7aT5uO24rKylyW25dPXQoZVtuXSxuLGUpO3JldHVybiByfSxVPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZS5yZXBsYWNlKFd0LFwiXFxcXFwiKS5yZXBsYWNlKFV0LFwiXCIpfWZ1bmN0aW9uIHQodCxuLGkscil7dmFyIG87cmV0dXJuIG51bGwhPWkmJih0eXBlb2YgaT09PWZ0JiYoaT1lKGkpLG89VnQuZXhlYyhpKSxvP2k9bmV3IERhdGUoK29bMV0pOnI/KGk9XCInXCIraS50b0xvd2VyQ2FzZSgpK1wiJ1wiLG49XCIoXCIrbitcIiB8fCAnJykudG9Mb3dlckNhc2UoKVwiKTppPVwiJ1wiK2krXCInXCIpLGkuZ2V0VGltZSYmKG49XCIoXCIrbitcIj9cIituK1wiLmdldFRpbWUoKTpcIituK1wiKVwiLGk9aS5nZXRUaW1lKCkpKSxuK1wiIFwiK3QrXCIgXCIraX1yZXR1cm57ZXE6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPT1cIixlLG4saSl9LG5lcTpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCIhPVwiLGUsbixpKX0sZ3Q6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPlwiLGUsbixpKX0sZ3RlOmZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdChcIj49XCIsZSxuLGkpfSxsdDpmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQoXCI8XCIsZSxuLGkpfSxsdGU6ZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0KFwiPD1cIixlLG4saSl9LHN0YXJ0c3dpdGg6ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5sYXN0SW5kZXhPZignXCIrbitcIicsIDApID09IDBcIn0sZW5kc3dpdGg6ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5pbmRleE9mKCdcIituK1wiJywgXCIrdCtcIi5sZW5ndGggLSBcIisobnx8XCJcIikubGVuZ3RoK1wiKSA+PSAwXCJ9LGNvbnRhaW5zOmZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gaSYmKHQ9XCIoXCIrdCtcIiB8fCAnJykudG9Mb3dlckNhc2UoKVwiLG4mJihuPW4udG9Mb3dlckNhc2UoKSkpLG4mJihuPWUobikpLHQrXCIuaW5kZXhPZignXCIrbitcIicpID49IDBcIn0sZG9lc25vdGNvbnRhaW46ZnVuY3Rpb24odCxuLGkpe3JldHVybiBpJiYodD1cIihcIit0K1wiIHx8ICcnKS50b0xvd2VyQ2FzZSgpXCIsbiYmKG49bi50b0xvd2VyQ2FzZSgpKSksbiYmKG49ZShuKSksdCtcIi5pbmRleE9mKCdcIituK1wiJykgPT0gLTFcIn19fSgpLG8uZmlsdGVyRXhwcj1mdW5jdGlvbihlKXt2YXIgbixpLHIsYSxzLGwsYz1bXSxkPXthbmQ6XCIgJiYgXCIsb3I6XCIgfHwgXCJ9LHU9W10saD1bXSxwPWUuZmlsdGVycztmb3Iobj0wLGk9cC5sZW5ndGg7aT5uO24rKylyPXBbbl0scz1yLmZpZWxkLGw9ci5vcGVyYXRvcixyLmZpbHRlcnM/KGE9by5maWx0ZXJFeHByKHIpLHI9YS5leHByZXNzaW9uLnJlcGxhY2UoL19fb1xcWyhcXGQrKVxcXS9nLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9K3QsXCJfX29bXCIrKGgubGVuZ3RoK3QpK1wiXVwifSkucmVwbGFjZSgvX19mXFxbKFxcZCspXFxdL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD0rdCxcIl9fZltcIisodS5sZW5ndGgrdCkrXCJdXCJ9KSxoLnB1c2guYXBwbHkoaCxhLm9wZXJhdG9ycyksdS5wdXNoLmFwcGx5KHUsYS5maWVsZHMpKToodHlwZW9mIHM9PT1ndD8oYT1cIl9fZltcIit1Lmxlbmd0aCtcIl0oZClcIix1LnB1c2gocykpOmE9ZHQuZXhwcihzKSx0eXBlb2YgbD09PWd0PyhyPVwiX19vW1wiK2gubGVuZ3RoK1wiXShcIithK1wiLCBcIityLnZhbHVlK1wiKVwiLGgucHVzaChsKSk6cj1VWyhsfHxcImVxXCIpLnRvTG93ZXJDYXNlKCldKGEsci52YWx1ZSxyLmlnbm9yZUNhc2UhPT10P3IuaWdub3JlQ2FzZTohMCkpLGMucHVzaChyKTtyZXR1cm57ZXhwcmVzc2lvbjpcIihcIitjLmpvaW4oZFtlLmxvZ2ljXSkrXCIpXCIsZmllbGRzOnUsb3BlcmF0b3JzOmh9fSxXPXtcIj09XCI6XCJlcVwiLGVxdWFsczpcImVxXCIsaXNlcXVhbHRvOlwiZXFcIixlcXVhbHRvOlwiZXFcIixlcXVhbDpcImVxXCIsXCIhPVwiOlwibmVxXCIsbmU6XCJuZXFcIixub3RlcXVhbHM6XCJuZXFcIixpc25vdGVxdWFsdG86XCJuZXFcIixub3RlcXVhbHRvOlwibmVxXCIsbm90ZXF1YWw6XCJuZXFcIixcIjxcIjpcImx0XCIsaXNsZXNzdGhhbjpcImx0XCIsbGVzc3RoYW46XCJsdFwiLGxlc3M6XCJsdFwiLFwiPD1cIjpcImx0ZVwiLGxlOlwibHRlXCIsaXNsZXNzdGhhbm9yZXF1YWx0bzpcImx0ZVwiLGxlc3N0aGFuZXF1YWw6XCJsdGVcIixcIj5cIjpcImd0XCIsaXNncmVhdGVydGhhbjpcImd0XCIsZ3JlYXRlcnRoYW46XCJndFwiLGdyZWF0ZXI6XCJndFwiLFwiPj1cIjpcImd0ZVwiLGlzZ3JlYXRlcnRoYW5vcmVxdWFsdG86XCJndGVcIixncmVhdGVydGhhbmVxdWFsOlwiZ3RlXCIsZ2U6XCJndGVcIixub3RzdWJzdHJpbmdvZjpcImRvZXNub3Rjb250YWluXCJ9LG8ubm9ybWFsaXplRmlsdGVyPWwsby5wcm90b3R5cGU9e3RvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxyYW5nZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgbyh0aGlzLmRhdGEuc2xpY2UoZSxlK3QpKX0sc2tpcDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8odGhpcy5kYXRhLnNsaWNlKGUpKX0sdGFrZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8odGhpcy5kYXRhLnNsaWNlKDAsZSkpfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvKEgodGhpcy5kYXRhLGUpKX0sb3JkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj17ZGlyOnR9O3JldHVybiBlJiYoZS5jb21wYXJlP24uY29tcGFyZT1lLmNvbXBhcmU6bi5maWVsZD1lKSxuZXcgbyh0aGlzLmRhdGEuc2xpY2UoMCkuc29ydChOLmNyZWF0ZShuKSkpfSxvcmRlckJ5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9yZGVyKGUsXCJhc2NcIil9LG9yZGVyQnlEZXNjZW5kaW5nOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9yZGVyKGUsXCJkZXNjXCIpfSxzb3J0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89YShlLHQpLHM9W107aWYobj1ufHxOLG8ubGVuZ3RoKXtmb3IoaT0wLHI9by5sZW5ndGg7cj5pO2krKylzLnB1c2gobi5jcmVhdGUob1tpXSkpO3JldHVybiB0aGlzLm9yZGVyQnkoe2NvbXBhcmU6bi5jb21iaW5lKHMpfSl9cmV0dXJuIHRoaXN9LGZpbHRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixhLHMsYyxkLHU9dGhpcy5kYXRhLGg9W107aWYoZT1sKGUpLCFlfHwwPT09ZS5maWx0ZXJzLmxlbmd0aClyZXR1cm4gdGhpcztmb3Iocj1vLmZpbHRlckV4cHIoZSkscz1yLmZpZWxkcyxjPXIub3BlcmF0b3JzLGE9ZD1GdW5jdGlvbihcImQsIF9fZiwgX19vXCIsXCJyZXR1cm4gXCIrci5leHByZXNzaW9uKSwocy5sZW5ndGh8fGMubGVuZ3RoKSYmKGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSxzLGMpfSksdD0wLGk9dS5sZW5ndGg7aT50O3QrKyluPXVbdF0sZChuKSYmaC5wdXNoKG4pO3JldHVybiBuZXcgbyhoKX0sZ3JvdXA6ZnVuY3Rpb24oZSx0KXtlPWQoZXx8W10pLHQ9dHx8dGhpcy5kYXRhO3ZhciBuLGk9dGhpcyxyPW5ldyBvKGkuZGF0YSk7cmV0dXJuIGUubGVuZ3RoPjAmJihuPWVbMF0scj1yLmdyb3VwQnkobikuc2VsZWN0KGZ1bmN0aW9uKGkpe3ZhciByPW5ldyBvKHQpLmZpbHRlcihbe2ZpZWxkOmkuZmllbGQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmkudmFsdWUsaWdub3JlQ2FzZTohMX1dKTtyZXR1cm57ZmllbGQ6aS5maWVsZCx2YWx1ZTppLnZhbHVlLGl0ZW1zOmUubGVuZ3RoPjE/bmV3IG8oaS5pdGVtcykuZ3JvdXAoZS5zbGljZSgxKSxyLnRvQXJyYXkoKSkudG9BcnJheSgpOmkuaXRlbXMsaGFzU3ViZ3JvdXBzOmUubGVuZ3RoPjEsYWdncmVnYXRlczpyLmFnZ3JlZ2F0ZShuLmFnZ3JlZ2F0ZXMpfX0pKSxyfSxncm91cEJ5OmZ1bmN0aW9uKGUpe2lmKHJ0KGUpfHwhdGhpcy5kYXRhLmxlbmd0aClyZXR1cm4gbmV3IG8oW10pO3ZhciB0LG4saSxyLGE9ZS5maWVsZCxzPXRoaXMuX3NvcnRGb3JHcm91cGluZyhhLGUuZGlyfHxcImFzY1wiKSxsPWR0LmFjY2Vzc29yKGEpLGM9bC5nZXQoc1swXSxhKSxkPXtmaWVsZDphLHZhbHVlOmMsaXRlbXM6W119LGg9W2RdO2ZvcihpPTAscj1zLmxlbmd0aDtyPmk7aSsrKXQ9c1tpXSxuPWwuZ2V0KHQsYSksdShjLG4pfHwoYz1uLGQ9e2ZpZWxkOmEsdmFsdWU6YyxpdGVtczpbXX0saC5wdXNoKGQpKSxkLml0ZW1zLnB1c2godCk7cmV0dXJuIG5ldyBvKGgpfSxfc29ydEZvckdyb3VwaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuZGF0YTtpZighTnQpe2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKXJbbl0uX19wb3NpdGlvbj1uO2ZvcihyPW5ldyBvKHIpLnNvcnQoZSx0LFYpLnRvQXJyYXkoKSxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWRlbGV0ZSByW25dLl9fcG9zaXRpb247cmV0dXJuIHJ9cmV0dXJuIHRoaXMuc29ydChlLHQpLnRvQXJyYXkoKX0sYWdncmVnYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT17fSxyPXt9O2lmKGUmJmUubGVuZ3RoKWZvcih0PTAsbj10aGlzLmRhdGEubGVuZ3RoO24+dDt0KyspaChpLGUsdGhpcy5kYXRhW3RdLHQsbixyKTtyZXR1cm4gaX19LGo9e3N1bTpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5nZXQodCk7cmV0dXJuIHAoZSk/cChpKSYmKGUrPWkpOmU9aSxlfSxjb3VudDpmdW5jdGlvbihlKXtyZXR1cm4oZXx8MCkrMX0sYXZlcmFnZTpmdW5jdGlvbihlLG4saSxyLG8sYSl7dmFyIHM9aS5nZXQobik7cmV0dXJuIGEuY291bnQ9PT10JiYoYS5jb3VudD0wKSxwKGUpP3AocykmJihlKz1zKTplPXMscChzKSYmYS5jb3VudCsrLHI9PW8tMSYmcChlKSYmKGUvPWEuY291bnQpLGV9LG1heDpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5nZXQodCk7cmV0dXJuIHAoZSl8fGYoZSl8fChlPWkpLGk+ZSYmKHAoaSl8fGYoaSkpJiYoZT1pKSxlfSxtaW46ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uZ2V0KHQpO3JldHVybiBwKGUpfHxmKGUpfHwoZT1pKSxlPmkmJihwKGkpfHxmKGkpKSYmKGU9aSksZX19LG8ucHJvY2Vzcz1mdW5jdGlvbihlLG4pe249bnx8e307dmFyIGkscj1uZXcgbyhlKSxzPW4uZ3JvdXAsbD1kKHN8fFtdKS5jb25jYXQoYShuLnNvcnR8fFtdKSksYz1uLmZpbHRlckNhbGxiYWNrLHU9bi5maWx0ZXIsaD1uLnNraXAscD1uLnRha2U7cmV0dXJuIHUmJihyPXIuZmlsdGVyKHUpLGMmJihyPWMocikpLGk9ci50b0FycmF5KCkubGVuZ3RoKSxsJiYocj1yLnNvcnQobCkscyYmKGU9ci50b0FycmF5KCkpKSxoIT09dCYmcCE9PXQmJihyPXIucmFuZ2UoaCxwKSkscyYmKHI9ci5ncm91cChzLGUpKSx7dG90YWw6aSxkYXRhOnIudG9BcnJheSgpfX0sRz1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5kYXRhPWUuZGF0YX0scmVhZDpmdW5jdGlvbihlKXtlLnN1Y2Nlc3ModGhpcy5kYXRhKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe2Uuc3VjY2VzcyhlLmRhdGEpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7ZS5zdWNjZXNzKGUuZGF0YSl9LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7ZS5zdWNjZXNzKGUuZGF0YSl9fSkscT1wdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO2U9bi5vcHRpb25zPXR0KHt9LG4ub3B0aW9ucyxlKSxsdChEdCxmdW5jdGlvbih0LG4pe3R5cGVvZiBlW25dPT09ZnQmJihlW25dPXt1cmw6ZVtuXX0pfSksbi5jYWNoZT1lLmNhY2hlPyQuY3JlYXRlKGUuY2FjaGUpOntmaW5kOmN0LGFkZDpjdH0sdD1lLnBhcmFtZXRlck1hcCx1dChlLnB1c2gpJiYobi5wdXNoPWUucHVzaCksbi5wdXNofHwobi5wdXNoPUF0KSxuLnBhcmFtZXRlck1hcD11dCh0KT90OmZ1bmN0aW9uKGUpe3ZhciBuPXt9O3JldHVybiBsdChlLGZ1bmN0aW9uKGUsaSl7ZSBpbiB0JiYoZT10W2VdLGl0KGUpJiYoaT1lLnZhbHVlKGkpLGU9ZS5rZXkpKSxuW2VdPWl9KSxufX0sb3B0aW9uczp7cGFyYW1ldGVyTWFwOkF0fSxjcmVhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHN0KHRoaXMuc2V0dXAoZSxtdCkpfSxyZWFkOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLmNhY2hlO249YS5zZXR1cChuLHZ0KSxpPW4uc3VjY2Vzc3x8Y3Qscj1uLmVycm9yfHxjdCxvPXMuZmluZChuLmRhdGEpLG8hPT10P2kobyk6KG4uc3VjY2Vzcz1mdW5jdGlvbihlKXtzLmFkZChuLmRhdGEsZSksaShlKX0sZS5hamF4KG4pKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBzdCh0aGlzLnNldHVwKGUsX3QpKX0sZGVzdHJveTpmdW5jdGlvbihlKXtyZXR1cm4gc3QodGhpcy5zZXR1cChlLHl0KSl9LHNldHVwOmZ1bmN0aW9uKGUsdCl7ZT1lfHx7fTt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnNbdF0sbz11dChyLmRhdGEpP3IuZGF0YShlLmRhdGEpOnIuZGF0YTtyZXR1cm4gZT10dCghMCx7fSxyLGUpLG49dHQoITAse30sbyxlLmRhdGEpLGUuZGF0YT1pLnBhcmFtZXRlck1hcChuLHQpLHV0KGUudXJsKSYmKGUudXJsPWUudXJsKG4pKSxlfX0pLCQ9cHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5fc3RvcmU9e319LGFkZDpmdW5jdGlvbihlLG4pe2UhPT10JiYodGhpcy5fc3RvcmVbTXQoZSldPW4pfSxmaW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdG9yZVtNdChlKV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fc3RvcmU9e319LHJlbW92ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fc3RvcmVbTXQoZSldfX0pLCQuY3JlYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXtpbm1lbW9yeTpmdW5jdGlvbigpe3JldHVybiBuZXcgJH19O3JldHVybiBpdChlKSYmdXQoZS5maW5kKT9lOmU9PT0hMD9uZXcgJDp0W2VdKCl9LFk9cHQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY9dGhpcztlPWV8fHt9O2Zvcih0IGluIGUpbj1lW3RdLGZbdF09dHlwZW9mIG49PT1mdD9FdChuKTpuO3I9ZS5tb2RlbEJhc2V8fEt0LGl0KGYubW9kZWwpJiYoZi5tb2RlbD1pPXIuZGVmaW5lKGYubW9kZWwpKSxvPW50KGYuZGF0YSxmKSxmLl9kYXRhQWNjZXNzRnVuY3Rpb249byxmLm1vZGVsJiYoYT1udChmLmdyb3VwcyxmKSxzPW50KGYuc2VyaWFsaXplLGYpLGw9e30sYz17fSxkPXt9LHU9e30saD0hMSxpPWYubW9kZWwsaS5maWVsZHMmJihsdChpLmZpZWxkcyxmdW5jdGlvbihlLHQpe3ZhciBuO3A9ZSxpdCh0KSYmdC5maWVsZD9wPXQuZmllbGQ6dHlwZW9mIHQ9PT1mdCYmKHA9dCksaXQodCkmJnQuZnJvbSYmKG49dC5mcm9tKSxoPWh8fG4mJm4hPT1lfHxwIT09ZSxjW2VdPUV0KG58fHApLGRbZV09RXQoZSksbFtufHxwXT1lLHVbZV09bnx8cH0pLCFlLnNlcmlhbGl6ZSYmaCYmKGYuc2VyaWFsaXplPXkocyxpLG0sZCxsLHUpKSksZi5fZGF0YUFjY2Vzc0Z1bmN0aW9uPW8sZi5kYXRhPXkobyxpLHYsYyxsLHUpLGYuZ3JvdXBzPXkoYSxpLF8sYyxsLHUpKX0sZXJyb3JzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UuZXJyb3JzOm51bGx9LHBhcnNlOkF0LGRhdGE6QXQsdG90YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RofSxncm91cHM6QXQsYWdncmVnYXRlczpmdW5jdGlvbigpe3JldHVybnt9fSxzZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSksSz1odC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dGhpcztlJiYoaT1lLmRhdGEpLGU9by5vcHRpb25zPXR0KHt9LG8ub3B0aW9ucyxlKSxvLl9tYXA9e30sby5fcHJlZmV0Y2g9e30sby5fZGF0YT1bXSxvLl9wcmlzdGluZURhdGE9W10sby5fcmFuZ2VzPVtdLG8uX3ZpZXc9W10sby5fcHJpc3RpbmVUb3RhbD0wLG8uX2Rlc3Ryb3llZD1bXSxvLl9wYWdlU2l6ZT1lLnBhZ2VTaXplLG8uX3BhZ2U9ZS5wYWdlfHwoZS5wYWdlU2l6ZT8xOnQpLG8uX3NvcnQ9YShlLnNvcnQpLG8uX2ZpbHRlcj1sKGUuZmlsdGVyKSxvLl9ncm91cD1kKGUuZ3JvdXApLG8uX2FnZ3JlZ2F0ZT1lLmFnZ3JlZ2F0ZSxvLl90b3RhbD1lLnRvdGFsLG8uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSEwLGh0LmZuLmluaXQuY2FsbChvKSxvLnRyYW5zcG9ydD1RLmNyZWF0ZShlLGkpLHV0KG8udHJhbnNwb3J0LnB1c2gpJiZvLnRyYW5zcG9ydC5wdXNoKHtwdXNoQ3JlYXRlOm50KG8uX3B1c2hDcmVhdGUsbykscHVzaFVwZGF0ZTpudChvLl9wdXNoVXBkYXRlLG8pLHB1c2hEZXN0cm95Om50KG8uX3B1c2hEZXN0cm95LG8pfSksbnVsbCE9ZS5vZmZsaW5lU3RvcmFnZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLm9mZmxpbmVTdG9yYWdlPyhyPWUub2ZmbGluZVN0b3JhZ2Usby5fc3RvcmFnZT17Z2V0SXRlbTpmdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHIpKX0sc2V0SXRlbTpmdW5jdGlvbihlKXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShyLE10KGUpKX19KTpvLl9zdG9yYWdlPWUub2ZmbGluZVN0b3JhZ2UpLG8ucmVhZGVyPW5ldyBkdC5kYXRhLnJlYWRlcnNbZS5zY2hlbWEudHlwZXx8XCJqc29uXCJdKGUuc2NoZW1hKSxuPW8ucmVhZGVyLm1vZGVsfHx7fSxvLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLG8uX2RhdGE9by5fb2JzZXJ2ZShvLl9kYXRhKSxvLl9vbmxpbmU9ITAsby5iaW5kKFtcInB1c2hcIix4dCx3dCxDdCxidCxUdCxTdF0sZSl9LG9wdGlvbnM6e2RhdGE6bnVsbCxzY2hlbWE6e21vZGVsQmFzZTpLdH0sb2ZmbGluZVN0b3JhZ2U6bnVsbCxzZXJ2ZXJTb3J0aW5nOiExLHNlcnZlclBhZ2luZzohMSxzZXJ2ZXJGaWx0ZXJpbmc6ITEsc2VydmVyR3JvdXBpbmc6ITEsc2VydmVyQWdncmVnYXRlczohMSxiYXRjaDohMX0sb25saW5lOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9vbmxpbmU6KHRoaXMuX29ubGluZSE9ZSYmKHRoaXMuX29ubGluZT1lLGUmJnRoaXMuc3luYygpKSx0KX0sb2ZmbGluZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXRoaXMub3B0aW9ucy5vZmZsaW5lU3RvcmFnZT9udWxsOmUhPT10P3RoaXMuX3N0b3JhZ2Uuc2V0SXRlbShlKTp0aGlzLl9zdG9yYWdlLmdldEl0ZW0oKXx8e319LF9pc1NlcnZlckdyb3VwZWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwKCl8fFtdO3JldHVybiB0aGlzLm9wdGlvbnMuc2VydmVyR3JvdXBpbmcmJmUubGVuZ3RofSxfcHVzaENyZWF0ZTpmdW5jdGlvbihlKXt0aGlzLl9wdXNoKGUsXCJwdXNoQ3JlYXRlXCIpfSxfcHVzaFVwZGF0ZTpmdW5jdGlvbihlKXt0aGlzLl9wdXNoKGUsXCJwdXNoVXBkYXRlXCIpfSxfcHVzaERlc3Ryb3k6ZnVuY3Rpb24oZSl7dGhpcy5fcHVzaChlLFwicHVzaERlc3Ryb3lcIil9LF9wdXNoOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fcmVhZERhdGEoZSk7bnx8KG49ZSksdGhpc1t0XShuKX0sX2ZsYXREYXRhOmZ1bmN0aW9uKGUsdCl7aWYoZSl7aWYodGhpcy5faXNTZXJ2ZXJHcm91cGVkKCkpcmV0dXJuIGIoZSk7aWYoIXQpZm9yKHZhciBuPTA7ZS5sZW5ndGg+bjtuKyspZS5hdChuKX1yZXR1cm4gZX0scGFyZW50OmN0LGdldDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZmxhdERhdGEodGhpcy5fZGF0YSk7Zm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XS5pZD09ZSlyZXR1cm4gaVt0XX0sZ2V0QnlVaWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuX2ZsYXREYXRhKHRoaXMuX2RhdGEpO2lmKGkpZm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspaWYoaVt0XS51aWQ9PWUpcmV0dXJuIGlbdF19LGluZGV4T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcy5fZGF0YSxlKX0sYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGEuYXQoZSl9LGRhdGE6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO2lmKGU9PT10KXtpZihpLl9kYXRhKWZvcihuPTA7aS5fZGF0YS5sZW5ndGg+bjtuKyspaS5fZGF0YS5hdChuKTtyZXR1cm4gaS5fZGF0YX1pLl9kZXRhY2hPYnNlcnZhYmxlUGFyZW50cygpLGkuX2RhdGE9dGhpcy5fb2JzZXJ2ZShlKSxpLl9wcmlzdGluZURhdGE9ZS5zbGljZSgwKSxpLl9zdG9yZURhdGEoKSxpLl9yYW5nZXM9W10saS50cmlnZ2VyKFwicmVzZXRcIiksaS5fYWRkUmFuZ2UoaS5fZGF0YSksaS5fdG90YWw9aS5fZGF0YS5sZW5ndGgsaS5fcHJpc3RpbmVUb3RhbD1pLl90b3RhbCxpLl9wcm9jZXNzKGkuX2RhdGEpfSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl92aWV3Oih0aGlzLl92aWV3PXRoaXMuX29ic2VydmVWaWV3KGUpLHQpfSxfb2JzZXJ2ZVZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIFQoZSx0aGlzLl9kYXRhLHRoaXMuX3Jhbmdlcyx0aGlzLnJlYWRlci5tb2RlbHx8cXQpLG5ldyBHdChlLHRoaXMucmVhZGVyLm1vZGVsKX0sZmxhdFZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwKCl8fFtdO3JldHVybiBlLmxlbmd0aD9iKHRoaXMuX3ZpZXcpOnRoaXMuX3ZpZXd9LGFkZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbnNlcnQodGhpcy5fZGF0YS5sZW5ndGgsZSl9LF9jcmVhdGVOZXdNb2RlbDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIubW9kZWw/bmV3IHRoaXMucmVhZGVyLm1vZGVsKGUpOmUgaW5zdGFuY2VvZiBxdD9lOm5ldyBxdChlKX0saW5zZXJ0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWUsZT0wKSx0IGluc3RhbmNlb2YgS3R8fCh0PXRoaXMuX2NyZWF0ZU5ld01vZGVsKHQpKSx0aGlzLl9pc1NlcnZlckdyb3VwZWQoKT90aGlzLl9kYXRhLnNwbGljZShlLDAsQSh0aGlzLmdyb3VwKCksdCkpOnRoaXMuX2RhdGEuc3BsaWNlKGUsMCx0KSx0fSxwdXNoQ3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtvdChlKXx8KGU9W2VdKSx0PVtdLG49dGhpcy5vcHRpb25zLmF1dG9TeW5jLHRoaXMub3B0aW9ucy5hdXRvU3luYz0hMTt0cnl7Zm9yKGk9MDtlLmxlbmd0aD5pO2krKylyPWVbaV0sbz10aGlzLmFkZChyKSx0LnB1c2gobyksYT1vLnRvSlNPTigpLHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpJiYoYT1BKHRoaXMuZ3JvdXAoKSxhKSksdGhpcy5fcHJpc3RpbmVEYXRhLnB1c2goYSl9ZmluYWxseXt0aGlzLm9wdGlvbnMuYXV0b1N5bmM9bn10Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwiY3JlYXRlXCIsaXRlbXM6dH0pfSxwdXNoVXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87Zm9yKG90KGUpfHwoZT1bZV0pLHQ9W10sbj0wO2UubGVuZ3RoPm47bisrKWk9ZVtuXSxyPXRoaXMuX2NyZWF0ZU5ld01vZGVsKGkpLG89dGhpcy5nZXQoci5pZCksbz8odC5wdXNoKG8pLG8uYWNjZXB0KGkpLG8udHJpZ2dlcihcImNoYW5nZVwiKSx0aGlzLl91cGRhdGVQcmlzdGluZUZvck1vZGVsKG8saSkpOnRoaXMucHVzaENyZWF0ZShpKTt0Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwidXBkYXRlXCIsaXRlbXM6dH0pfSxwdXNoRGVzdHJveTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9yZW1vdmVJdGVtcyhlKTt0Lmxlbmd0aCYmdGhpcy50cmlnZ2VyKFwicHVzaFwiLHt0eXBlOlwiZGVzdHJveVwiLGl0ZW1zOnR9KX0sX3JlbW92ZUl0ZW1zOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtvdChlKXx8KGU9W2VdKSx0PVtdLG49dGhpcy5vcHRpb25zLmF1dG9TeW5jLHRoaXMub3B0aW9ucy5hdXRvU3luYz0hMTt0cnl7Zm9yKGk9MDtlLmxlbmd0aD5pO2krKylyPWVbaV0sbz10aGlzLl9jcmVhdGVOZXdNb2RlbChyKSxhPSExLHRoaXMuX2VhY2hJdGVtKHRoaXMuX2RhdGEsZnVuY3Rpb24oZSl7dmFyIG4saTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWlmKGk9ZS5hdChuKSxpLmlkPT09by5pZCl7dC5wdXNoKGkpLGUuc3BsaWNlKG4sMSksYT0hMDticmVha319KSxhJiYodGhpcy5fcmVtb3ZlUHJpc3RpbmVGb3JNb2RlbChvKSx0aGlzLl9kZXN0cm95ZWQucG9wKCkpfWZpbmFsbHl7dGhpcy5vcHRpb25zLmF1dG9TeW5jPW59cmV0dXJuIHR9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLl9pc1NlcnZlckdyb3VwZWQoKTtyZXR1cm4gdGhpcy5fZWFjaEl0ZW0oaS5fZGF0YSxmdW5jdGlvbihvKXtyZXR1cm4gbj1EKG8sZSksbiYmcj8obi5pc05ldyYmbi5pc05ldygpfHxpLl9kZXN0cm95ZWQucHVzaChuKSwhMCk6dH0pLHRoaXMuX3JlbW92ZU1vZGVsRnJvbVJhbmdlcyhlKSx0aGlzLl91cGRhdGVSYW5nZXNMZW5ndGgoKSxlfSxzeW5jOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9W10scz1bXSxsPW8uX2Rlc3Ryb3llZCxjPW8uX2ZsYXREYXRhKG8uX2RhdGEpO2lmKG8ub25saW5lKCkpe2lmKCFvLnJlYWRlci5tb2RlbClyZXR1cm47Zm9yKHQ9MCxuPWMubGVuZ3RoO24+dDt0KyspY1t0XS5pc05ldygpP2EucHVzaChjW3RdKTpjW3RdLmRpcnR5JiZzLnB1c2goY1t0XSk7cj1bXSxyLnB1c2guYXBwbHkocixvLl9zZW5kKFwiY3JlYXRlXCIsYSkpLHIucHVzaC5hcHBseShyLG8uX3NlbmQoXCJ1cGRhdGVcIixzKSksci5wdXNoLmFwcGx5KHIsby5fc2VuZChcImRlc3Ryb3lcIixsKSksaT1lLndoZW4uYXBwbHkobnVsbCxyKS50aGVuKGZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IoZT0wLHQ9YXJndW1lbnRzLmxlbmd0aDt0PmU7ZSsrKW8uX2FjY2VwdChhcmd1bWVudHNbZV0pO28uX3N0b3JlRGF0YSghMCksby5fY2hhbmdlKHthY3Rpb246XCJzeW5jXCJ9KSxvLnRyaWdnZXIoYnQpfSl9ZWxzZSBvLl9zdG9yZURhdGEoITApLG8uX2NoYW5nZSh7YWN0aW9uOlwic3luY1wifSksaT1lLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKTtyZXR1cm4gaX0sY2FuY2VsQ2hhbmdlczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UgaW5zdGFuY2VvZiBkdC5kYXRhLk1vZGVsP3QuX2NhbmNlbE1vZGVsKGUpOih0Ll9kZXN0cm95ZWQ9W10sdC5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSx0Ll9kYXRhPXQuX29ic2VydmUodC5fcHJpc3RpbmVEYXRhKSx0Lm9wdGlvbnMuc2VydmVyUGFnaW5nJiYodC5fdG90YWw9dC5fcHJpc3RpbmVUb3RhbCksdC5fY2hhbmdlKCkpfSxoYXNDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuX2RhdGE7aWYodGhpcy5fZGVzdHJveWVkLmxlbmd0aClyZXR1cm4hMDtmb3IoZT0wLHQ9bi5sZW5ndGg7dD5lO2UrKylpZihuW2VdLmlzTmV3KCl8fG5bZV0uZGlydHkpcmV0dXJuITA7cmV0dXJuITF9LF9hY2NlcHQ6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9dC5tb2RlbHMsbz10LnJlc3BvbnNlLGE9MCxzPWkuX2lzU2VydmVyR3JvdXBlZCgpLGw9aS5fcHJpc3RpbmVEYXRhLGM9dC50eXBlO2lmKGkudHJpZ2dlcihUdCx7cmVzcG9uc2U6byx0eXBlOmN9KSxvJiYhcnQobykpe2lmKG89aS5yZWFkZXIucGFyc2UobyksaS5faGFuZGxlQ3VzdG9tRXJyb3JzKG8pKXJldHVybjtvPWkucmVhZGVyLmRhdGEobyksb3Qobyl8fChvPVtvXSl9ZWxzZSBvPWUubWFwKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9KU09OKCl9KTtmb3IoXCJkZXN0cm95XCI9PT1jJiYoaS5fZGVzdHJveWVkPVtdKSxhPTAsbj1yLmxlbmd0aDtuPmE7YSsrKVwiZGVzdHJveVwiIT09Yz8oclthXS5hY2NlcHQob1thXSksXCJjcmVhdGVcIj09PWM/bC5wdXNoKHM/QShpLmdyb3VwKCksclthXSk6b1thXSk6XCJ1cGRhdGVcIj09PWMmJmkuX3VwZGF0ZVByaXN0aW5lRm9yTW9kZWwoclthXSxvW2FdKSk6aS5fcmVtb3ZlUHJpc3RpbmVGb3JNb2RlbChyW2FdKX0sX3VwZGF0ZVByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSx0KXt0aGlzLl9leGVjdXRlT25QcmlzdGluZUZvck1vZGVsKGUsZnVuY3Rpb24oZSxuKXtkdC5kZWVwRXh0ZW5kKG5bZV0sdCl9KX0sX2V4ZWN1dGVPblByaXN0aW5lRm9yTW9kZWw6ZnVuY3Rpb24oZSxuKXt0aGlzLl9lYWNoUHJpc3RpbmVJdGVtKGZ1bmN0aW9uKGkpe3ZhciByPUUoaSxlKTtyZXR1cm4gcj4tMT8obihyLGkpLCEwKTp0fSl9LF9yZW1vdmVQcmlzdGluZUZvck1vZGVsOmZ1bmN0aW9uKGUpe3RoaXMuX2V4ZWN1dGVPblByaXN0aW5lRm9yTW9kZWwoZSxmdW5jdGlvbihlLHQpe3Quc3BsaWNlKGUsMSl9KX0sX3JlYWREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2lzU2VydmVyR3JvdXBlZCgpP3RoaXMucmVhZGVyLmdyb3Vwczp0aGlzLnJlYWRlci5kYXRhO3JldHVybiB0LmNhbGwodGhpcy5yZWFkZXIsZSl9LF9lYWNoUHJpc3RpbmVJdGVtOmZ1bmN0aW9uKGUpe3RoaXMuX2VhY2hJdGVtKHRoaXMuX3ByaXN0aW5lRGF0YSxlKX0sX2VhY2hJdGVtOmZ1bmN0aW9uKGUsdCl7ZSYmZS5sZW5ndGgmJih0aGlzLl9pc1NlcnZlckdyb3VwZWQoKT94KGUsdCk6dChlKSl9LF9wcmlzdGluZUZvck1vZGVsOmZ1bmN0aW9uKGUpe3ZhciBuLGkscj1mdW5jdGlvbihyKXtyZXR1cm4gaT1FKHIsZSksaT4tMT8obj1yW2ldLCEwKTp0fTtyZXR1cm4gdGhpcy5fZWFjaFByaXN0aW5lSXRlbShyKSxufSxfY2FuY2VsTW9kZWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcHJpc3RpbmVGb3JNb2RlbChlKTt0aGlzLl9lYWNoSXRlbSh0aGlzLl9kYXRhLGZ1bmN0aW9uKG4pe3ZhciBpPU0obixlKTtpPj0wJiYoIXR8fGUuaXNOZXcoKSYmIXQuX19zdGF0ZV9fP24uc3BsaWNlKGksMSk6bltpXS5hY2NlcHQodCkpfSl9LF9wcm9taXNlOmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzO3JldHVybiBlLkRlZmVycmVkKGZ1bmN0aW9uKGUpe3IudHJpZ2dlcihDdCx7dHlwZTppfSksci50cmFuc3BvcnRbaV0uY2FsbChyLnRyYW5zcG9ydCx0dCh7c3VjY2VzczpmdW5jdGlvbih0KXtlLnJlc29sdmUoe3Jlc3BvbnNlOnQsbW9kZWxzOm4sdHlwZTppfSl9LGVycm9yOmZ1bmN0aW9uKHQsbixpKXtlLnJlamVjdCh0KSxyLmVycm9yKHQsbixpKX19LHQpKX0pLnByb21pc2UoKX0sX3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPVtdLGE9ci5yZWFkZXIuc2VyaWFsaXplKGcodCkpO2lmKHIub3B0aW9ucy5iYXRjaCl0Lmxlbmd0aCYmby5wdXNoKHIuX3Byb21pc2Uoe2RhdGE6e21vZGVsczphfX0sdCxlKSk7ZWxzZSBmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylvLnB1c2goci5fcHJvbWlzZSh7ZGF0YTphW25dfSxbdFtuXV0sZSkpO3JldHVybiBvfSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLl9wYXJhbXModCkscj1lLkRlZmVycmVkKCk7cmV0dXJuIG4uX3F1ZXVlUmVxdWVzdChpLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKEN0LHt0eXBlOlwicmVhZFwifSk/KG4uX2RlcXVldWVSZXF1ZXN0KCksci5yZXNvbHZlKCkpOihuLnRyaWdnZXIoU3QpLG4uX3Jhbmdlcz1bXSxuLnRyaWdnZXIoXCJyZXNldFwiKSxuLm9ubGluZSgpP24udHJhbnNwb3J0LnJlYWQoe2RhdGE6aSxzdWNjZXNzOmZ1bmN0aW9uKGUpe24uc3VjY2VzcyhlKSxyLnJlc29sdmUoKX0sZXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1MdC5jYWxsKGFyZ3VtZW50cyk7bi5lcnJvci5hcHBseShuLGUpLHIucmVqZWN0LmFwcGx5KHIsZSl9fSk6bnVsbCE9bi5vcHRpb25zLm9mZmxpbmVTdG9yYWdlJiYobi5zdWNjZXNzKG4ub2ZmbGluZURhdGEoKSksci5yZXNvbHZlKCkpKX0pLHIucHJvbWlzZSgpfSxfcmVhZEFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLmFnZ3JlZ2F0ZXMoZSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYT10aGlzLHM9YS5vcHRpb25zO2lmKGEudHJpZ2dlcihUdCx7cmVzcG9uc2U6ZSx0eXBlOlwicmVhZFwifSksYS5vbmxpbmUoKSl7aWYoZT1hLnJlYWRlci5wYXJzZShlKSxhLl9oYW5kbGVDdXN0b21FcnJvcnMoZSkpcmV0dXJuIGEuX2RlcXVldWVSZXF1ZXN0KCksdDthLl90b3RhbD1hLnJlYWRlci50b3RhbChlKSxhLl9hZ2dyZWdhdGUmJnMuc2VydmVyQWdncmVnYXRlcyYmKGEuX2FnZ3JlZ2F0ZVJlc3VsdD1hLl9yZWFkQWdncmVnYXRlcyhlKSksZT1hLl9yZWFkRGF0YShlKX1lbHNle2ZvcihlPWEuX3JlYWREYXRhKGUpLG49W10saT0wO2UubGVuZ3RoPmk7aSsrKXI9ZVtpXSxvPXIuX19zdGF0ZV9fLFwiZGVzdHJveVwiPT1vP3RoaXMuX2Rlc3Ryb3llZC5wdXNoKHRoaXMuX2NyZWF0ZU5ld01vZGVsKHIpKTpuLnB1c2gocik7ZT1uLGEuX3RvdGFsPWUubGVuZ3RofWEuX3ByaXN0aW5lVG90YWw9YS5fdG90YWwsYS5fcHJpc3RpbmVEYXRhPWUuc2xpY2UoMCksYS5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSxhLl9kYXRhPWEuX29ic2VydmUoZSksbnVsbCE9YS5vcHRpb25zLm9mZmxpbmVTdG9yYWdlJiZhLl9lYWNoSXRlbShhLl9kYXRhLGZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyluPWUuYXQodCksXCJ1cGRhdGVcIj09bi5fX3N0YXRlX18mJihuLmRpcnR5PSEwKX0pLGEuX3N0b3JlRGF0YSgpLGEuX2FkZFJhbmdlKGEuX2RhdGEpLGEuX3Byb2Nlc3MoYS5fZGF0YSksYS5fZGVxdWV1ZVJlcXVlc3QoKX0sX2RldGFjaE9ic2VydmFibGVQYXJlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5fZGF0YSYmdGhpcy5fc2hvdWxkRGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMpZm9yKHZhciBlPTA7dGhpcy5fZGF0YS5sZW5ndGg+ZTtlKyspdGhpcy5fZGF0YVtlXS5wYXJlbnQmJih0aGlzLl9kYXRhW2VdLnBhcmVudD1jdCl9LF9zdG9yZURhdGE6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgbixpLHIscz1bXTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWk9ZS5hdChuKSxyPWkudG9KU09OKCksbyYmaS5pdGVtcz9yLml0ZW1zPXQoaS5pdGVtcyk6KHIudWlkPWkudWlkLGEmJihpLmlzTmV3KCk/ci5fX3N0YXRlX189XCJjcmVhdGVcIjppLmRpcnR5JiYoci5fX3N0YXRlX189XCJ1cGRhdGVcIikpKSxzLnB1c2gocik7cmV0dXJuIHN9dmFyIG4saSxyLG89dGhpcy5faXNTZXJ2ZXJHcm91cGVkKCksYT10aGlzLnJlYWRlci5tb2RlbDtpZihudWxsIT10aGlzLm9wdGlvbnMub2ZmbGluZVN0b3JhZ2Upe2ZvcihuPXQodGhpcy5fZGF0YSksaT0wO3RoaXMuX2Rlc3Ryb3llZC5sZW5ndGg+aTtpKyspcj10aGlzLl9kZXN0cm95ZWRbaV0udG9KU09OKCksci5fX3N0YXRlX189XCJkZXN0cm95XCIsbi5wdXNoKHIpO3RoaXMub2ZmbGluZURhdGEobiksZSYmKHRoaXMuX3ByaXN0aW5lRGF0YT1uKX19LF9hZGRSYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fc2tpcHx8MCxpPW4rdC5fZmxhdERhdGEoZSwhMCkubGVuZ3RoO3QuX3Jhbmdlcy5wdXNoKHtzdGFydDpuLGVuZDppLGRhdGE6ZX0pLHQuX3Jhbmdlcy5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3RhcnQtdC5zdGFydH0pfSxlcnJvcjpmdW5jdGlvbihlLHQsbil7dGhpcy5fZGVxdWV1ZVJlcXVlc3QoKSx0aGlzLnRyaWdnZXIoVHQse30pLHRoaXMudHJpZ2dlcih4dCx7eGhyOmUsc3RhdHVzOnQsZXJyb3JUaHJvd246bn0pfSxfcGFyYW1zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10dCh7dGFrZTp0LnRha2UoKSxza2lwOnQuc2tpcCgpLHBhZ2U6dC5wYWdlKCkscGFnZVNpemU6dC5wYWdlU2l6ZSgpLHNvcnQ6dC5fc29ydCxmaWx0ZXI6dC5fZmlsdGVyLGdyb3VwOnQuX2dyb3VwLGFnZ3JlZ2F0ZTp0Ll9hZ2dyZWdhdGV9LGUpO3JldHVybiB0Lm9wdGlvbnMuc2VydmVyUGFnaW5nfHwoZGVsZXRlIG4udGFrZSxkZWxldGUgbi5za2lwLGRlbGV0ZSBuLnBhZ2UsZGVsZXRlIG4ucGFnZVNpemUpLHQub3B0aW9ucy5zZXJ2ZXJHcm91cGluZz90LnJlYWRlci5tb2RlbCYmbi5ncm91cCYmKG4uZ3JvdXA9RihuLmdyb3VwLHQucmVhZGVyLm1vZGVsKSk6ZGVsZXRlIG4uZ3JvdXAsdC5vcHRpb25zLnNlcnZlckZpbHRlcmluZz90LnJlYWRlci5tb2RlbCYmbi5maWx0ZXImJihuLmZpbHRlcj16KG4uZmlsdGVyLHQucmVhZGVyLm1vZGVsKSk6ZGVsZXRlIG4uZmlsdGVyLHQub3B0aW9ucy5zZXJ2ZXJTb3J0aW5nP3QucmVhZGVyLm1vZGVsJiZuLnNvcnQmJihuLnNvcnQ9RihuLnNvcnQsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5zb3J0LHQub3B0aW9ucy5zZXJ2ZXJBZ2dyZWdhdGVzP3QucmVhZGVyLm1vZGVsJiZuLmFnZ3JlZ2F0ZSYmKG4uYWdncmVnYXRlPUYobi5hZ2dyZWdhdGUsdC5yZWFkZXIubW9kZWwpKTpkZWxldGUgbi5hZ2dyZWdhdGUsbn0sX3F1ZXVlUmVxdWVzdDpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXM7aS5fcmVxdWVzdEluUHJvZ3Jlc3M/aS5fcGVuZGluZz17Y2FsbGJhY2s6bnQobixpKSxvcHRpb25zOmV9OihpLl9yZXF1ZXN0SW5Qcm9ncmVzcz0hMCxpLl9wZW5kaW5nPXQsbigpKX0sX2RlcXVldWVSZXF1ZXN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZXF1ZXN0SW5Qcm9ncmVzcz0hMSxlLl9wZW5kaW5nJiZlLl9xdWV1ZVJlcXVlc3QoZS5fcGVuZGluZy5vcHRpb25zLGUuX3BlbmRpbmcuY2FsbGJhY2spfSxfaGFuZGxlQ3VzdG9tRXJyb3JzOmZ1bmN0aW9uKGUpe2lmKHRoaXMucmVhZGVyLmVycm9ycyl7dmFyIHQ9dGhpcy5yZWFkZXIuZXJyb3JzKGUpO2lmKHQpcmV0dXJuIHRoaXMudHJpZ2dlcih4dCx7eGhyOm51bGwsc3RhdHVzOlwiY3VzdG9tZXJyb3JcIixlcnJvclRocm93bjpcImN1c3RvbSBlcnJvclwiLGVycm9yczp0fSksITB9cmV0dXJuITF9LF9vYnNlcnZlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ucmVhZGVyLm1vZGVsLHI9ITE7cmV0dXJuIG4uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSEwLGkmJmUubGVuZ3RoJiYocj0hKGVbMF1pbnN0YW5jZW9mIGkpKSxlIGluc3RhbmNlb2YganQ/KG4uX3Nob3VsZERldGFjaE9ic2VydmFibGVQYXJlbnRzPSExLHImJihlLnR5cGU9bi5yZWFkZXIubW9kZWwsZS53cmFwQWxsKGUsZSkpKToodD1uLnBhZ2VTaXplKCk/R3Q6anQsZT1uZXcgdChlLG4ucmVhZGVyLm1vZGVsKSxlLnBhcmVudD1mdW5jdGlvbigpe3JldHVybiBuLnBhcmVudCgpfSksbi5faXNTZXJ2ZXJHcm91cGVkKCkmJmsoZSxpKSxuLl9jaGFuZ2VIYW5kbGVyJiZuLl9kYXRhJiZuLl9kYXRhIGluc3RhbmNlb2YganQ/bi5fZGF0YS51bmJpbmQod3Qsbi5fY2hhbmdlSGFuZGxlcik6bi5fY2hhbmdlSGFuZGxlcj1udChuLl9jaGFuZ2UsbiksZS5iaW5kKHd0LG4uX2NoYW5nZUhhbmRsZXIpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMsbz1lP2UuYWN0aW9uOlwiXCI7aWYoXCJyZW1vdmVcIj09PW8pZm9yKHQ9MCxuPWUuaXRlbXMubGVuZ3RoO24+dDt0KyspZS5pdGVtc1t0XS5pc05ldyYmZS5pdGVtc1t0XS5pc05ldygpfHxyLl9kZXN0cm95ZWQucHVzaChlLml0ZW1zW3RdKTshci5vcHRpb25zLmF1dG9TeW5jfHxcImFkZFwiIT09byYmXCJyZW1vdmVcIiE9PW8mJlwiaXRlbWNoYW5nZVwiIT09bz8oaT1wYXJzZUludChyLl90b3RhbCwxMCkscChyLl90b3RhbCl8fChpPXBhcnNlSW50KHIuX3ByaXN0aW5lVG90YWwsMTApKSxcImFkZFwiPT09bz9pKz1lLml0ZW1zLmxlbmd0aDpcInJlbW92ZVwiPT09bz9pLT1lLml0ZW1zLmxlbmd0aDpcIml0ZW1jaGFuZ2VcIj09PW98fFwic3luY1wiPT09b3x8ci5vcHRpb25zLnNlcnZlclBhZ2luZz9cInN5bmNcIj09PW8mJihpPXIuX3ByaXN0aW5lVG90YWw9cGFyc2VJbnQoci5fdG90YWwsMTApKTppPXIuX3ByaXN0aW5lVG90YWwsci5fdG90YWw9aSxyLl9wcm9jZXNzKHIuX2RhdGEsZSkpOnIuc3luYygpfSxfY2FsY3VsYXRlQWdncmVnYXRlczpmdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49bmV3IG8oZSksaT10LmFnZ3JlZ2F0ZSxyPXQuZmlsdGVyO3JldHVybiByJiYobj1uLmZpbHRlcihyKSksbi5hZ2dyZWdhdGUoaSl9LF9wcm9jZXNzOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLG89e307ci5vcHRpb25zLnNlcnZlclBhZ2luZyE9PSEwJiYoby5za2lwPXIuX3NraXAsby50YWtlPXIuX3Rha2V8fHIuX3BhZ2VTaXplLG8uc2tpcD09PXQmJnIuX3BhZ2UhPT10JiZyLl9wYWdlU2l6ZSE9PXQmJihvLnNraXA9KHIuX3BhZ2UtMSkqci5fcGFnZVNpemUpKSxyLm9wdGlvbnMuc2VydmVyU29ydGluZyE9PSEwJiYoby5zb3J0PXIuX3NvcnQpLHIub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmchPT0hMCYmKG8uZmlsdGVyPXIuX2ZpbHRlciksci5vcHRpb25zLnNlcnZlckdyb3VwaW5nIT09ITAmJihvLmdyb3VwPXIuX2dyb3VwKSxyLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcyE9PSEwJiYoby5hZ2dyZWdhdGU9ci5fYWdncmVnYXRlLHIuX2FnZ3JlZ2F0ZVJlc3VsdD1yLl9jYWxjdWxhdGVBZ2dyZWdhdGVzKGUsbykpLGk9ci5fcXVlcnlQcm9jZXNzKGUsbyksci52aWV3KGkuZGF0YSksaS50b3RhbD09PXR8fHIub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmd8fChyLl90b3RhbD1pLnRvdGFsKSxuPW58fHt9LG4uaXRlbXM9bi5pdGVtc3x8ci5fdmlldyxyLnRyaWdnZXIod3Qsbil9LF9xdWVyeVByb2Nlc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gby5wcm9jZXNzKGUsdCl9LF9tZXJnZVN0YXRlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10JiYobi5fcGFnZVNpemU9ZS5wYWdlU2l6ZSxuLl9wYWdlPWUucGFnZSxuLl9zb3J0PWUuc29ydCxuLl9maWx0ZXI9ZS5maWx0ZXIsbi5fZ3JvdXA9ZS5ncm91cCxuLl9hZ2dyZWdhdGU9ZS5hZ2dyZWdhdGUsbi5fc2tpcD1lLnNraXAsbi5fdGFrZT1lLnRha2Usbi5fc2tpcD09PXQmJihuLl9za2lwPW4uc2tpcCgpLGUuc2tpcD1uLnNraXAoKSksbi5fdGFrZT09PXQmJm4uX3BhZ2VTaXplIT09dCYmKG4uX3Rha2U9bi5fcGFnZVNpemUsZS50YWtlPW4uX3Rha2UpLGUuc29ydCYmKG4uX3NvcnQ9ZS5zb3J0PWEoZS5zb3J0KSksZS5maWx0ZXImJihuLl9maWx0ZXI9ZS5maWx0ZXI9bChlLmZpbHRlcikpLGUuZ3JvdXAmJihuLl9ncm91cD1lLmdyb3VwPWQoZS5ncm91cCkpLGUuYWdncmVnYXRlJiYobi5fYWdncmVnYXRlPWUuYWdncmVnYXRlPWMoZS5hZ2dyZWdhdGUpKSksZX0scXVlcnk6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLm9wdGlvbnMuc2VydmVyU29ydGluZ3x8dGhpcy5vcHRpb25zLnNlcnZlclBhZ2luZ3x8dGhpcy5vcHRpb25zLnNlcnZlckZpbHRlcmluZ3x8dGhpcy5vcHRpb25zLnNlcnZlckdyb3VwaW5nfHx0aGlzLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcztyZXR1cm4gcnx8KHRoaXMuX2RhdGE9PT10fHwwPT09dGhpcy5fZGF0YS5sZW5ndGgpJiYhdGhpcy5fZGVzdHJveWVkLmxlbmd0aD90aGlzLnJlYWQodGhpcy5fbWVyZ2VTdGF0ZShuKSk6KHRoaXMudHJpZ2dlcihDdCx7dHlwZTpcInJlYWRcIn0pfHwodGhpcy50cmlnZ2VyKFN0KSxpPXRoaXMuX3F1ZXJ5UHJvY2Vzcyh0aGlzLl9kYXRhLHRoaXMuX21lcmdlU3RhdGUobikpLHRoaXMub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmd8fCh0aGlzLl90b3RhbD1pLnRvdGFsIT09dD9pLnRvdGFsOnRoaXMuX2RhdGEubGVuZ3RoKSx0aGlzLl9hZ2dyZWdhdGVSZXN1bHQ9dGhpcy5fY2FsY3VsYXRlQWdncmVnYXRlcyh0aGlzLl9kYXRhLG4pLHRoaXMudmlldyhpLmRhdGEpLHRoaXMudHJpZ2dlcihUdCx7fSksdGhpcy50cmlnZ2VyKHd0LHtpdGVtczppLmRhdGF9KSksZS5EZWZlcnJlZCgpLnJlc29sdmUoKS5wcm9taXNlKCkpfSxmZXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcXVlcnkoKS50aGVuKG50KGUsdGhpcykpfSxfcXVlcnk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC5xdWVyeSh0dCh7fSx7cGFnZTp0LnBhZ2UoKSxwYWdlU2l6ZTp0LnBhZ2VTaXplKCksc29ydDp0LnNvcnQoKSxmaWx0ZXI6dC5maWx0ZXIoKSxncm91cDp0Lmdyb3VwKCksYWdncmVnYXRlOnQuYWdncmVnYXRlKCl9LGUpKX0sbmV4dDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5wYWdlKCkscj1uLnRvdGFsKCk7cmV0dXJuIGU9ZXx8e30sIWl8fHImJmkrMT5uLnRvdGFsUGFnZXMoKT90OihuLl9za2lwPWkqbi50YWtlKCksaSs9MSxlLnBhZ2U9aSxuLl9xdWVyeShlKSxpKX0scHJldjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5wYWdlKCk7cmV0dXJuIGU9ZXx8e30saSYmMSE9PWk/KG4uX3NraXA9bi5fc2tpcC1uLnRha2UoKSxpLT0xLGUucGFnZT1pLG4uX3F1ZXJ5KGUpLGkpOnR9LHBhZ2U6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlIT09dD8oZT1QdC5tYXgoUHQubWluKFB0Lm1heChlLDEpLGkudG90YWxQYWdlcygpKSwxKSxpLl9xdWVyeSh7cGFnZTplfSksdCk6KG49aS5za2lwKCksbiE9PXQ/UHQucm91bmQoKG58fDApLyhpLnRha2UoKXx8MSkpKzE6dCl9LHBhZ2VTaXplOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLl9xdWVyeSh7cGFnZVNpemU6ZSxwYWdlOjF9KSx0KTpuLnRha2UoKX0sc29ydDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlIT09dD8obi5fcXVlcnkoe3NvcnQ6ZX0pLHQpOm4uX3NvcnR9LGZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl9maWx0ZXI6KG4uX3F1ZXJ5KHtmaWx0ZXI6ZSxwYWdlOjF9KSx0KX0sZ3JvdXA6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZSE9PXQ/KG4uX3F1ZXJ5KHtncm91cDplfSksdCk6bi5fZ3JvdXB9LHRvdGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuX3RvdGFsfHwwLDEwKX0sYWdncmVnYXRlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUhPT10PyhuLl9xdWVyeSh7YWdncmVnYXRlOmV9KSx0KTpuLl9hZ2dyZWdhdGV9LGFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWdncmVnYXRlUmVzdWx0fSx0b3RhbFBhZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucGFnZVNpemUoKXx8ZS50b3RhbCgpO3JldHVybiBQdC5jZWlsKChlLnRvdGFsKCl8fDApL3QpfSxpblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPVB0Lm1pbihlK3Qsbi50b3RhbCgpKTtyZXR1cm4hbi5vcHRpb25zLnNlcnZlclBhZ2luZyYmbi5fZGF0YS5sZW5ndGg+MD8hMDpuLl9maW5kUmFuZ2UoZSxpKS5sZW5ndGg+MH0sbGFzdFJhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmFuZ2VzO3JldHVybiBlW2UubGVuZ3RoLTFdfHx7c3RhcnQ6MCxlbmQ6MCxkYXRhOltdfX0sZmlyc3RJdGVtVWlkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcmFuZ2VzO3JldHVybiBlLmxlbmd0aCYmZVswXS5kYXRhLmxlbmd0aCYmZVswXS5kYXRhWzBdLnVpZH0sZW5hYmxlUmVxdWVzdHNJblByb2dyZXNzOmZ1bmN0aW9uKCl7dGhpcy5fc2tpcFJlcXVlc3RzSW5Qcm9ncmVzcz0hMX0scmFuZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkO2lmKGU9UHQubWluKGV8fDAsdGhpcy50b3RhbCgpKSxpPXRoaXMscj1QdC5tYXgoUHQuZmxvb3IoZS9uKSwwKSpuLG89UHQubWluKHIrbixpLnRvdGFsKCkpLGkuX3NraXBSZXF1ZXN0c0luUHJvZ3Jlc3M9ITEsYT1pLl9maW5kUmFuZ2UoZSxQdC5taW4oZStuLGkudG90YWwoKSkpLGEubGVuZ3RoKXtpLl9za2lwUmVxdWVzdHNJblByb2dyZXNzPSEwLGkuX3BlbmRpbmc9dCxpLl9za2lwPWU+aS5za2lwKCk/UHQubWluKG8sKGkudG90YWxQYWdlcygpLTEpKmkudGFrZSgpKTpyLGkuX3Rha2U9bixzPWkub3B0aW9ucy5zZXJ2ZXJQYWdpbmcsbD1pLm9wdGlvbnMuc2VydmVyU29ydGluZyxjPWkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmcsZD1pLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlczt0cnl7aS5vcHRpb25zLnNlcnZlclBhZ2luZz0hMCxpLl9pc1NlcnZlckdyb3VwZWQoKXx8aS5ncm91cCgpJiZpLmdyb3VwKCkubGVuZ3RofHwoaS5vcHRpb25zLnNlcnZlclNvcnRpbmc9ITApLGkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc9ITAsaS5vcHRpb25zLnNlcnZlclBhZ2luZz0hMCxpLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcz0hMCxzJiYoaS5fZGV0YWNoT2JzZXJ2YWJsZVBhcmVudHMoKSxpLl9kYXRhPWE9aS5fb2JzZXJ2ZShhKSksaS5fcHJvY2VzcyhhKX1maW5hbGx5e2kub3B0aW9ucy5zZXJ2ZXJQYWdpbmc9cyxpLm9wdGlvbnMuc2VydmVyU29ydGluZz1sLGkub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc9YyxpLm9wdGlvbnMuc2VydmVyQWdncmVnYXRlcz1kfX1lbHNlIG4hPT10JiYoaS5fcmFuZ2VFeGlzdHMocixvKT9lPnImJmkucHJlZmV0Y2gobyxuLGZ1bmN0aW9uKCl7aS5yYW5nZShlLG4pfSk6aS5wcmVmZXRjaChyLG4sZnVuY3Rpb24oKXtlPnImJm88aS50b3RhbCgpJiYhaS5fcmFuZ2VFeGlzdHMobyxQdC5taW4obytuLGkudG90YWwoKSkpP2kucHJlZmV0Y2gobyxuLGZ1bmN0aW9uKCl7aS5yYW5nZShlLG4pfSk6aS5yYW5nZShlLG4pfSkpfSxfZmluZFJhbmdlOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvLHMsbCxjLHUsaCxwLGYsZyxtLHY9dGhpcyxfPXYuX3Jhbmdlcyx5PVtdLHc9di5vcHRpb25zLGI9dy5zZXJ2ZXJTb3J0aW5nfHx3LnNlcnZlclBhZ2luZ3x8dy5zZXJ2ZXJGaWx0ZXJpbmd8fHcuc2VydmVyR3JvdXBpbmd8fHcuc2VydmVyQWdncmVnYXRlcztmb3Iocj0wLGc9Xy5sZW5ndGg7Zz5yO3IrKylpZihpPV9bcl0sZT49aS5zdGFydCYmaS5lbmQ+PWUpe2ZvcihmPTAsbz1yO2c+bztvKyspaWYoaT1fW29dLHA9di5fZmxhdERhdGEoaS5kYXRhLCEwKSxwLmxlbmd0aCYmZStmPj1pLnN0YXJ0JiYoYz1pLmRhdGEsdT1pLmVuZCxifHwobT1kKHYuZ3JvdXAoKXx8W10pLmNvbmNhdChhKHYuc29ydCgpfHxbXSkpLGg9di5fcXVlcnlQcm9jZXNzKGkuZGF0YSx7c29ydDptLGZpbHRlcjp2LmZpbHRlcigpfSkscD1jPWguZGF0YSxoLnRvdGFsIT09dCYmKHU9aC50b3RhbCkpLHM9MCxlK2Y+aS5zdGFydCYmKHM9ZStmLWkuc3RhcnQpLGw9cC5sZW5ndGgsdT5uJiYobC09dS1uKSxmKz1sLXMseT12Ll9tZXJnZUdyb3Vwcyh5LGMscyxsKSxpLmVuZD49biYmZj09bi1lKSlyZXR1cm4geTticmVha31yZXR1cm5bXX0sX21lcmdlR3JvdXBzOmZ1bmN0aW9uKGUsdCxuLGkpe2lmKHRoaXMuX2lzU2VydmVyR3JvdXBlZCgpKXt2YXIgcixvPXQudG9KU09OKCk7cmV0dXJuIGUubGVuZ3RoJiYocj1lW2UubGVuZ3RoLTFdKSx3KHIsbyxuLGkpLGUuY29uY2F0KG8pfXJldHVybiBlLmNvbmNhdCh0LnNsaWNlKG4saSkpfSxza2lwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5fc2tpcD09PXQ/ZS5fcGFnZSE9PXQ/KGUuX3BhZ2UtMSkqKGUudGFrZSgpfHwxKTp0OmUuX3NraXB9LHRha2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFrZXx8dGhpcy5fcGFnZVNpemV9LF9wcmVmZXRjaFN1Y2Nlc3NIYW5kbGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbihyKXt2YXIgbyxhLHMsbD0hMSxjPXtzdGFydDplLGVuZDp0LGRhdGE6W119O2lmKGkuX2RlcXVldWVSZXF1ZXN0KCksaS50cmlnZ2VyKFR0LHtyZXNwb25zZTpyLHR5cGU6XCJyZWFkXCJ9KSxyPWkucmVhZGVyLnBhcnNlKHIpLHM9aS5fcmVhZERhdGEocikscy5sZW5ndGgpe2ZvcihvPTAsYT1pLl9yYW5nZXMubGVuZ3RoO2E+bztvKyspaWYoaS5fcmFuZ2VzW29dLnN0YXJ0PT09ZSl7bD0hMCxjPWkuX3Jhbmdlc1tvXTtcbmJyZWFrfWx8fGkuX3Jhbmdlcy5wdXNoKGMpfWMuZGF0YT1pLl9vYnNlcnZlKHMpLGMuZW5kPWMuc3RhcnQraS5fZmxhdERhdGEoYy5kYXRhLCEwKS5sZW5ndGgsaS5fcmFuZ2VzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdGFydC10LnN0YXJ0fSksaS5fdG90YWw9aS5yZWFkZXIudG90YWwociksaS5fc2tpcFJlcXVlc3RzSW5Qcm9ncmVzc3x8KG4mJnMubGVuZ3RoP24oKTppLnRyaWdnZXIod3Qse30pKX19LHByZWZldGNoOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9UHQubWluKGUrdCxpLnRvdGFsKCkpLG89e3Rha2U6dCxza2lwOmUscGFnZTplL3QrMSxwYWdlU2l6ZTp0LHNvcnQ6aS5fc29ydCxmaWx0ZXI6aS5fZmlsdGVyLGdyb3VwOmkuX2dyb3VwLGFnZ3JlZ2F0ZTppLl9hZ2dyZWdhdGV9O2kuX3JhbmdlRXhpc3RzKGUscik/biYmbigpOihjbGVhclRpbWVvdXQoaS5fdGltZW91dCksaS5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5fcXVldWVSZXF1ZXN0KG8sZnVuY3Rpb24oKXtpLnRyaWdnZXIoQ3Qse3R5cGU6XCJyZWFkXCJ9KT9pLl9kZXF1ZXVlUmVxdWVzdCgpOmkudHJhbnNwb3J0LnJlYWQoe2RhdGE6aS5fcGFyYW1zKG8pLHN1Y2Nlc3M6aS5fcHJlZmV0Y2hTdWNjZXNzSGFuZGxlcihlLHIsbil9KX0pfSwxMDApKX0sX3JhbmdlRXhpc3RzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1yLl9yYW5nZXM7Zm9yKG49MCxpPW8ubGVuZ3RoO2k+bjtuKyspaWYoZT49b1tuXS5zdGFydCYmb1tuXS5lbmQ+PXQpcmV0dXJuITA7cmV0dXJuITF9LF9yZW1vdmVNb2RlbEZyb21SYW5nZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbztmb3Iocj0wLG89dGhpcy5fcmFuZ2VzLmxlbmd0aDtvPnImJihpPXRoaXMuX3Jhbmdlc1tyXSx0aGlzLl9lYWNoSXRlbShpLmRhdGEsZnVuY3Rpb24oaSl7dD1EKGksZSksdCYmKG49ITApfSksIW4pO3IrKyk7fSxfdXBkYXRlUmFuZ2VzTGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj0wO2ZvcihuPTAsaT10aGlzLl9yYW5nZXMubGVuZ3RoO2k+bjtuKyspZT10aGlzLl9yYW5nZXNbbl0sZS5zdGFydD1lLnN0YXJ0LXIsdD10aGlzLl9mbGF0RGF0YShlLmRhdGEsITApLmxlbmd0aCxyPWUuZW5kLXQsZS5lbmQ9ZS5zdGFydCt0fX0pLFE9e30sUS5jcmVhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUudHJhbnNwb3J0O3JldHVybiBpPyhpLnJlYWQ9dHlwZW9mIGkucmVhZD09PWZ0P3t1cmw6aS5yZWFkfTppLnJlYWQsZS50eXBlJiYoZHQuZGF0YS50cmFuc3BvcnRzPWR0LmRhdGEudHJhbnNwb3J0c3x8e30sZHQuZGF0YS5zY2hlbWFzPWR0LmRhdGEuc2NoZW1hc3x8e30sZHQuZGF0YS50cmFuc3BvcnRzW2UudHlwZV0mJiFpdChkdC5kYXRhLnRyYW5zcG9ydHNbZS50eXBlXSk/bj1uZXcgZHQuZGF0YS50cmFuc3BvcnRzW2UudHlwZV0odHQoaSx7ZGF0YTp0fSkpOmk9dHQoITAse30sZHQuZGF0YS50cmFuc3BvcnRzW2UudHlwZV0saSksZS5zY2hlbWE9dHQoITAse30sZHQuZGF0YS5zY2hlbWFzW2UudHlwZV0sZS5zY2hlbWEpKSxufHwobj11dChpLnJlYWQpP2k6bmV3IHEoaSkpKTpuPW5ldyBHKHtkYXRhOmUuZGF0YXx8W119KSxufSxLLmNyZWF0ZT1mdW5jdGlvbihlKXsob3QoZSl8fGUgaW5zdGFuY2VvZiBqdCkmJihlPXtkYXRhOmV9KTt2YXIgdCxuLGkscj1lfHx7fSxvPXIuZGF0YSxhPXIuZmllbGRzLHM9ci50YWJsZSxsPXIuc2VsZWN0LGM9e307aWYob3x8IWF8fHIudHJhbnNwb3J0fHwocz9vPUIocyxhKTpsJiYobz1SKGwsYSkpKSxkdC5kYXRhLk1vZGVsJiZhJiYoIXIuc2NoZW1hfHwhci5zY2hlbWEubW9kZWwpKXtmb3IodD0wLG49YS5sZW5ndGg7bj50O3QrKylpPWFbdF0saS50eXBlJiYoY1tpLmZpZWxkXT1pKTtydChjKXx8KHIuc2NoZW1hPXR0KCEwLHIuc2NoZW1hLHttb2RlbDp7ZmllbGRzOmN9fSkpfXJldHVybiByLmRhdGE9byxzPW51bGwsci50YWJsZT1udWxsLHIgaW5zdGFuY2VvZiBLP3I6bmV3IEsocil9LFg9S3QuZGVmaW5lKHtpZDpcImlkXCIsaW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5oYXNDaGlsZHJlbnx8ZSYmZS5oYXNDaGlsZHJlbixpPVwiaXRlbXNcIixyPXt9O2R0LmRhdGEuTW9kZWwuZm4uaW5pdC5jYWxsKHQsZSksdHlwZW9mIHQuY2hpbGRyZW49PT1mdCYmKGk9dC5jaGlsZHJlbikscj17c2NoZW1hOntkYXRhOmksbW9kZWw6e2hhc0NoaWxkcmVuOm4saWQ6dC5pZEZpZWxkLGZpZWxkczp0LmZpZWxkc319fSx0eXBlb2YgdC5jaGlsZHJlbiE9PWZ0JiZ0dChyLHQuY2hpbGRyZW4pLHIuZGF0YT1lLG58fChuPXIuc2NoZW1hLmRhdGEpLHR5cGVvZiBuPT09ZnQmJihuPWR0LmdldHRlcihuKSksdXQobikmJih0Lmhhc0NoaWxkcmVuPSEhbi5jYWxsKHQsdCkpLHQuX2NoaWxkcmVuT3B0aW9ucz1yLHQuaGFzQ2hpbGRyZW4mJnQuX2luaXRDaGlsZHJlbigpLHQuX2xvYWRlZD0hKCFlfHwhZVtpXSYmIWUuX2xvYWRlZCl9LF9pbml0Q2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzO2kuY2hpbGRyZW4gaW5zdGFuY2VvZiBKfHwoZT1pLmNoaWxkcmVuPW5ldyBKKGkuX2NoaWxkcmVuT3B0aW9ucyksdD1lLnRyYW5zcG9ydCxuPXQucGFyYW1ldGVyTWFwLHQucGFyYW1ldGVyTWFwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbaS5pZEZpZWxkfHxcImlkXCJdPWkuaWQsbiYmKGU9bihlLHQpKSxlfSxlLnBhcmVudD1mdW5jdGlvbigpe3JldHVybiBpfSxlLmJpbmQod3QsZnVuY3Rpb24oZSl7ZS5ub2RlPWUubm9kZXx8aSxpLnRyaWdnZXIod3QsZSl9KSxlLmJpbmQoeHQsZnVuY3Rpb24oZSl7dmFyIHQ9aS5wYXJlbnQoKTt0JiYoZS5ub2RlPWUubm9kZXx8aSx0LnRyaWdnZXIoeHQsZSkpfSksaS5fdXBkYXRlQ2hpbGRyZW5GaWVsZCgpKX0sYXBwZW5kOmZ1bmN0aW9uKGUpe3RoaXMuX2luaXRDaGlsZHJlbigpLHRoaXMubG9hZGVkKCEwKSx0aGlzLmNoaWxkcmVuLmFkZChlKX0saGFzQ2hpbGRyZW46ITEsbGV2ZWw6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5wYXJlbnROb2RlKCksdD0wO2UmJmUucGFyZW50Tm9kZTspdCsrLGU9ZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZSgpOm51bGw7cmV0dXJuIHR9LF91cGRhdGVDaGlsZHJlbkZpZWxkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY2hpbGRyZW5PcHRpb25zLnNjaGVtYS5kYXRhO3RoaXNbZXx8XCJpdGVtc1wiXT10aGlzLmNoaWxkcmVuLmRhdGEoKX0sX2NoaWxkcmVuTG9hZGVkOmZ1bmN0aW9uKCl7dGhpcy5fbG9hZGVkPSEwLHRoaXMuX3VwZGF0ZUNoaWxkcmVuRmllbGQoKX0sbG9hZDpmdW5jdGlvbigpe3ZhciBlLG49e30saT1cIl9xdWVyeVwiO3RoaXMuaGFzQ2hpbGRyZW4/KHRoaXMuX2luaXRDaGlsZHJlbigpLGU9dGhpcy5jaGlsZHJlbixuW3RoaXMuaWRGaWVsZHx8XCJpZFwiXT10aGlzLmlkLHRoaXMuX2xvYWRlZHx8KGUuX2RhdGE9dCxpPVwicmVhZFwiKSxlLm9uZSh3dCxudCh0aGlzLl9jaGlsZHJlbkxvYWRlZCx0aGlzKSksZVtpXShuKSk6dGhpcy5sb2FkZWQoITApfSxwYXJlbnROb2RlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnQoKTtyZXR1cm4gZS5wYXJlbnQoKX0sbG9hZGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9sb2FkZWQ6KHRoaXMuX2xvYWRlZD1lLHQpfSxzaG91bGRTZXJpYWxpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIEt0LmZuLnNob3VsZFNlcmlhbGl6ZS5jYWxsKHRoaXMsZSkmJlwiY2hpbGRyZW5cIiE9PWUmJlwiX2xvYWRlZFwiIT09ZSYmXCJoYXNDaGlsZHJlblwiIT09ZSYmXCJfY2hpbGRyZW5PcHRpb25zXCIhPT1lfX0pLEo9Sy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9WC5kZWZpbmUoe2NoaWxkcmVuOmV9KTtLLmZuLmluaXQuY2FsbCh0aGlzLHR0KCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTp0LG1vZGVsOnR9fSxlKSksdGhpcy5fYXR0YWNoQnViYmxlSGFuZGxlcnMoKX0sX2F0dGFjaEJ1YmJsZUhhbmRsZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9kYXRhLmJpbmQoeHQsZnVuY3Rpb24odCl7ZS50cmlnZ2VyKHh0LHQpfSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUucGFyZW50Tm9kZSgpLGk9dGhpcztyZXR1cm4gbiYmbi5faW5pdENoaWxkcmVuJiYoaT1uLmNoaWxkcmVuKSx0PUsuZm4ucmVtb3ZlLmNhbGwoaSxlKSxuJiYhaS5kYXRhKCkubGVuZ3RoJiYobi5oYXNDaGlsZHJlbj0hMSksdH0sc3VjY2VzczpMKFwic3VjY2Vzc1wiKSxkYXRhOkwoXCJkYXRhXCIpLGluc2VydDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMucGFyZW50KCk7cmV0dXJuIG4mJm4uX2luaXRDaGlsZHJlbiYmKG4uaGFzQ2hpbGRyZW49ITAsbi5faW5pdENoaWxkcmVuKCkpLEsuZm4uaW5zZXJ0LmNhbGwodGhpcyxlLHQpfSxfZmluZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE7aWYocj1LLmZuW2VdLmNhbGwodGhpcyx0KSlyZXR1cm4gcjtpZihvPXRoaXMuX2ZsYXREYXRhKHRoaXMuX2RhdGEpKWZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlmKGE9b1tuXS5jaGlsZHJlbixhIGluc3RhbmNlb2YgSiYmKHI9YVtlXSh0KSkpcmV0dXJuIHJ9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZmluZChcImdldFwiLGUpfSxnZXRCeVVpZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZmluZChcImdldEJ5VWlkXCIsZSl9fSksSi5jcmVhdGU9ZnVuY3Rpb24oZSl7ZT1lJiZlLnB1c2g/e2RhdGE6ZX06ZTt2YXIgdD1lfHx7fSxuPXQuZGF0YSxpPXQuZmllbGRzLHI9dC5saXN0O3JldHVybiBuJiZuLl9kYXRhU291cmNlP24uX2RhdGFTb3VyY2U6KG58fCFpfHx0LnRyYW5zcG9ydHx8ciYmKG49TyhyLGkpKSx0LmRhdGE9bix0IGluc3RhbmNlb2YgSj90Om5ldyBKKHQpKX0sWj1kdC5PYnNlcnZhYmxlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7ZHQuT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5fcHJlZmV0Y2hpbmc9ITEsdGhpcy5kYXRhU291cmNlPWUsdGhpcy5wcmVmZXRjaD0hbjt2YXIgaT10aGlzO2UuYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKCl7aS5fY2hhbmdlKCl9KSxlLmJpbmQoXCJyZXNldFwiLGZ1bmN0aW9uKCl7aS5fcmVzZXQoKX0pLHRoaXMuX3N5bmNXaXRoRGF0YVNvdXJjZSgpLHRoaXMuc2V0Vmlld1NpemUodCl9LHNldFZpZXdTaXplOmZ1bmN0aW9uKGUpe3RoaXMudmlld1NpemU9ZSx0aGlzLl9yZWNhbGN1bGF0ZSgpfSxhdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLnBhZ2VTaXplLGk9ITA7cmV0dXJuIGU+PXRoaXMudG90YWwoKT8odGhpcy50cmlnZ2VyKFwiZW5kcmVhY2hlZFwiLHtpbmRleDplfSksdCk6dGhpcy51c2VSYW5nZXM/dGhpcy51c2VSYW5nZXM/KCh0aGlzLmRhdGFPZmZzZXQ+ZXx8ZT49dGhpcy5za2lwK24pJiYoaT10aGlzLnJhbmdlKE1hdGguZmxvb3IoZS9uKSpuKSksZT09PXRoaXMucHJlZmV0Y2hUaHJlc2hvbGQmJnRoaXMuX3ByZWZldGNoKCksZT09PXRoaXMubWlkUGFnZVRocmVzaG9sZD90aGlzLnJhbmdlKHRoaXMubmV4dE1pZFJhbmdlLCEwKTplPT09dGhpcy5uZXh0UGFnZVRocmVzaG9sZD90aGlzLnJhbmdlKHRoaXMubmV4dEZ1bGxSYW5nZSk6ZT09PXRoaXMucHVsbEJhY2tUaHJlc2hvbGQmJnRoaXMucmFuZ2UodGhpcy5vZmZzZXQ9PT10aGlzLnNraXA/dGhpcy5wcmV2aW91c01pZFJhbmdlOnRoaXMucHJldmlvdXNGdWxsUmFuZ2UpLGk/dGhpcy5kYXRhU291cmNlLmF0KGUtdGhpcy5kYXRhT2Zmc2V0KToodGhpcy50cmlnZ2VyKFwiZW5kcmVhY2hlZFwiLHtpbmRleDplfSksbnVsbCkpOnQ6dGhpcy5kYXRhU291cmNlLnZpZXcoKVtlXX0saW5kZXhPZjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhU291cmNlLmRhdGEoKS5pbmRleE9mKGUpK3RoaXMuZGF0YU9mZnNldH0sdG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhU291cmNlLnRvdGFsKCksMTApfSxuZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUucGFnZVNpemUsbj1lLnNraXAtZS52aWV3U2l6ZSt0LGk9UHQubWF4KFB0LmZsb29yKG4vdCksMCkqdDt0aGlzLm9mZnNldD1uLHRoaXMuZGF0YVNvdXJjZS5wcmVmZXRjaChpLHQsZnVuY3Rpb24oKXtlLl9nb1RvUmFuZ2UobiwhMCl9KX0scmFuZ2U6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLm9mZnNldD09PWUpcmV0dXJuITA7dmFyIG49dGhpcyxpPXRoaXMucGFnZVNpemUscj1QdC5tYXgoUHQuZmxvb3IoZS9pKSwwKSppLG89dGhpcy5kYXRhU291cmNlO3JldHVybiB0JiYocis9aSksby5pblJhbmdlKGUsaSk/KHRoaXMub2Zmc2V0PWUsdGhpcy5fcmVjYWxjdWxhdGUoKSx0aGlzLl9nb1RvUmFuZ2UoZSksITApOnRoaXMucHJlZmV0Y2g/KG8ucHJlZmV0Y2gocixpLGZ1bmN0aW9uKCl7bi5vZmZzZXQ9ZSxuLl9yZWNhbGN1bGF0ZSgpLG4uX2dvVG9SYW5nZShlLCEwKX0pLCExKTohMH0sc3luY0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldDt0aGlzLm9mZnNldD1udWxsLHRoaXMucmFuZ2UoZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnVuYmluZCgpfSxfcHJlZmV0Y2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wYWdlU2l6ZSxuPXRoaXMuc2tpcCt0LGk9dGhpcy5kYXRhU291cmNlO2kuaW5SYW5nZShuLHQpfHx0aGlzLl9wcmVmZXRjaGluZ3x8IXRoaXMucHJlZmV0Y2h8fCh0aGlzLl9wcmVmZXRjaGluZz0hMCx0aGlzLnRyaWdnZXIoXCJwcmVmZXRjaGluZ1wiLHtza2lwOm4sdGFrZTp0fSksaS5wcmVmZXRjaChuLHQsZnVuY3Rpb24oKXtlLl9wcmVmZXRjaGluZz0hMSxlLnRyaWdnZXIoXCJwcmVmZXRjaGVkXCIse3NraXA6bix0YWtlOnR9KX0pKX0sX2dvVG9SYW5nZTpmdW5jdGlvbihlLHQpe3RoaXMub2Zmc2V0PT09ZSYmKHRoaXMuZGF0YU9mZnNldD1lLHRoaXMuX2V4cGFuZGluZz10LHRoaXMuZGF0YVNvdXJjZS5yYW5nZShlLHRoaXMucGFnZVNpemUpLHRoaXMuZGF0YVNvdXJjZS5lbmFibGVSZXF1ZXN0c0luUHJvZ3Jlc3MoKSl9LF9yZXNldDpmdW5jdGlvbigpe3RoaXMuX3N5bmNQZW5kaW5nPSEwfSxfY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhU291cmNlO3RoaXMubGVuZ3RoPXRoaXMudXNlUmFuZ2VzP2UubGFzdFJhbmdlKCkuZW5kOmUudmlldygpLmxlbmd0aCx0aGlzLl9zeW5jUGVuZGluZyYmKHRoaXMuX3N5bmNXaXRoRGF0YVNvdXJjZSgpLHRoaXMuX3JlY2FsY3VsYXRlKCksdGhpcy5fc3luY1BlbmRpbmc9ITEsdGhpcy50cmlnZ2VyKFwicmVzZXRcIix7b2Zmc2V0OnRoaXMub2Zmc2V0fSkpLHRoaXMudHJpZ2dlcihcInJlc2l6ZVwiKSx0aGlzLl9leHBhbmRpbmcmJnRoaXMudHJpZ2dlcihcImV4cGFuZFwiKSxkZWxldGUgdGhpcy5fZXhwYW5kaW5nfSxfc3luY1dpdGhEYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhU291cmNlO3RoaXMuX2ZpcnN0SXRlbVVpZD1lLmZpcnN0SXRlbVVpZCgpLHRoaXMuZGF0YU9mZnNldD10aGlzLm9mZnNldD1lLnNraXAoKXx8MCx0aGlzLnBhZ2VTaXplPWUucGFnZVNpemUoKSx0aGlzLnVzZVJhbmdlcz1lLm9wdGlvbnMuc2VydmVyUGFnaW5nfSxfcmVjYWxjdWxhdGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhZ2VTaXplLHQ9dGhpcy5vZmZzZXQsbj10aGlzLnZpZXdTaXplLGk9TWF0aC5jZWlsKHQvZSkqZTt0aGlzLnNraXA9aSx0aGlzLm1pZFBhZ2VUaHJlc2hvbGQ9aStlLTEsdGhpcy5uZXh0UGFnZVRocmVzaG9sZD1pK24tMSx0aGlzLnByZWZldGNoVGhyZXNob2xkPWkrTWF0aC5mbG9vcihlLzMqMiksdGhpcy5wdWxsQmFja1RocmVzaG9sZD10aGlzLm9mZnNldC0xLHRoaXMubmV4dE1pZFJhbmdlPWkrZS1uLHRoaXMubmV4dEZ1bGxSYW5nZT1pLHRoaXMucHJldmlvdXNNaWRSYW5nZT10LW4sdGhpcy5wcmV2aW91c0Z1bGxSYW5nZT1pLWV9fSksZXQ9ZHQuT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2R0Lk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKG4pLHRoaXMuZGF0YVNvdXJjZT1lLHRoaXMuYmF0Y2hTaXplPXQsdGhpcy5fdG90YWw9MCx0aGlzLmJ1ZmZlcj1uZXcgWihlLDMqdCksdGhpcy5idWZmZXIuYmluZCh7ZW5kcmVhY2hlZDpmdW5jdGlvbihlKXtuLnRyaWdnZXIoXCJlbmRyZWFjaGVkXCIse2luZGV4OmUuaW5kZXh9KX0scHJlZmV0Y2hpbmc6ZnVuY3Rpb24oZSl7bi50cmlnZ2VyKFwicHJlZmV0Y2hpbmdcIix7c2tpcDplLnNraXAsdGFrZTplLnRha2V9KX0scHJlZmV0Y2hlZDpmdW5jdGlvbihlKXtuLnRyaWdnZXIoXCJwcmVmZXRjaGVkXCIse3NraXA6ZS5za2lwLHRha2U6ZS50YWtlfSl9LHJlc2V0OmZ1bmN0aW9uKCl7bi5fdG90YWw9MCxuLnRyaWdnZXIoXCJyZXNldFwiKX0scmVzaXplOmZ1bmN0aW9uKCl7bi5fdG90YWw9TWF0aC5jZWlsKHRoaXMubGVuZ3RoL24uYmF0Y2hTaXplKSxuLnRyaWdnZXIoXCJyZXNpemVcIix7dG90YWw6bi50b3RhbCgpLG9mZnNldDp0aGlzLm9mZnNldH0pfX0pfSxzeW5jRGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuYnVmZmVyLnN5bmNEYXRhU291cmNlKCl9LGF0OmZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzLmJ1ZmZlcixvPWUqdGhpcy5iYXRjaFNpemUsYT10aGlzLmJhdGNoU2l6ZSxzPVtdO2ZvcihyLm9mZnNldD5vJiZyLmF0KHIub2Zmc2V0LTEpLGk9MDthPmkmJihuPXIuYXQobytpKSxuIT09dCk7aSsrKXMucHVzaChuKTtyZXR1cm4gc30sdG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG90YWx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlci5kZXN0cm95KCksdGhpcy51bmJpbmQoKX19KSx0dCghMCxkdC5kYXRhLHtyZWFkZXJzOntqc29uOll9LFF1ZXJ5Om8sRGF0YVNvdXJjZTpLLEhpZXJhcmNoaWNhbERhdGFTb3VyY2U6SixOb2RlOlgsT2JzZXJ2YWJsZU9iamVjdDpxdCxPYnNlcnZhYmxlQXJyYXk6anQsTGF6eU9ic2VydmFibGVBcnJheTpHdCxMb2NhbFRyYW5zcG9ydDpHLFJlbW90ZVRyYW5zcG9ydDpxLENhY2hlOiQsRGF0YVJlYWRlcjpZLE1vZGVsOkt0LEJ1ZmZlcjpaLEJhdGNoQnVmZmVyOmV0fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0LG4saSl7cmV0dXJuIHYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzO3YuZm4uaW5pdC5jYWxsKGksZS5lbGVtZW50WzBdLHQsbiksaS53aWRnZXQ9ZSxpLl9kYXRhQmluZGluZz1NKGkuZGF0YUJpbmRpbmcsaSksaS5fZGF0YUJvdW5kPU0oaS5kYXRhQm91bmQsaSksaS5faXRlbUNoYW5nZT1NKGkuaXRlbUNoYW5nZSxpKX0saXRlbUNoYW5nZTpmdW5jdGlvbihlKXthKGUuaXRlbVswXSxlLmRhdGEsdGhpcy5fbnMoZS5ucyksW2UuZGF0YV0uY29uY2F0KHRoaXMuYmluZGluZ3NbdF0uX3BhcmVudHMoKSkpfSxkYXRhQmluZGluZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy53aWRnZXQscj1lLnJlbW92ZWRJdGVtc3x8aS5pdGVtcygpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWMoclt0XSl9LF9uczpmdW5jdGlvbih0KXt0PXR8fHgudWk7dmFyIG49W3gudWkseC5kYXRhdml6LnVpLHgubW9iaWxlLnVpXTtyZXR1cm4gbi5zcGxpY2UoZS5pbkFycmF5KHQsbiksMSksbi51bnNoaWZ0KHQpLHgucm9sZXNGcm9tTmFtZXNwYWNlcyhuKX0sZGF0YUJvdW5kOmZ1bmN0aW9uKGUpe3t2YXIgaSxyLG8scyxsPXRoaXMud2lkZ2V0LGM9ZS5hZGRlZEl0ZW1zfHxsLml0ZW1zKCksZD1sW25dO2QuZ3JvdXAoKXx8W119aWYoYy5sZW5ndGgpZm9yKG89ZS5hZGRlZERhdGFJdGVtc3x8ZC5mbGF0VmlldygpLHM9dGhpcy5iaW5kaW5nc1t0XS5fcGFyZW50cygpLGk9MCxyPW8ubGVuZ3RoO3I+aTtpKyspYShjW2ldLG9baV0sdGhpcy5fbnMoZS5ucyksW29baV1dLmNvbmNhdChzKSl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIHIsbz10aGlzLGE9by53aWRnZXQ7ZT1lfHx7fSxlLmFjdGlvbnx8KG8uZGVzdHJveSgpLGEuYmluZChcImRhdGFCaW5kaW5nXCIsby5fZGF0YUJpbmRpbmcpLGEuYmluZChcImRhdGFCb3VuZFwiLG8uX2RhdGFCb3VuZCksYS5iaW5kKFwiaXRlbUNoYW5nZVwiLG8uX2l0ZW1DaGFuZ2UpLHI9by5iaW5kaW5nc1t0XS5nZXQoKSxhW25daW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSYmYVtuXSE9ciYmKHIgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZT9hW2ldKHIpOnImJnIuX2RhdGFTb3VyY2U/YVtpXShyLl9kYXRhU291cmNlKTphW25dLmRhdGEocikpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMud2lkZ2V0O2UudW5iaW5kKFwiZGF0YUJpbmRpbmdcIix0aGlzLl9kYXRhQmluZGluZyksZS51bmJpbmQoXCJkYXRhQm91bmRcIix0aGlzLl9kYXRhQm91bmQpLGUudW5iaW5kKFwiaXRlbUNoYW5nZVwiLHRoaXMuX2l0ZW1DaGFuZ2UpfX0pfWZ1bmN0aW9uIGkoZSxuKXt2YXIgaT14LmluaXRXaWRnZXQoZSx7fSxuKTtyZXR1cm4gaT9uZXcgdyhpKTp0fWZ1bmN0aW9uIHIoZSl7dmFyIHQsbixpLG8sYSxzLGwsYz17fTtmb3IobD1lLm1hdGNoKGIpLHQ9MCxuPWwubGVuZ3RoO24+dDt0KyspaT1sW3RdLG89aS5pbmRleE9mKFwiOlwiKSxhPWkuc3Vic3RyaW5nKDAsbykscz1pLnN1YnN0cmluZyhvKzEpLFwie1wiPT1zLmNoYXJBdCgwKSYmKHM9cihzKSksY1thXT1zO3JldHVybiBjfWZ1bmN0aW9uIG8oZSx0LG4pe3ZhciBpLHI9e307Zm9yKGkgaW4gZSlyW2ldPW5ldyBuKHQsZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gYShlLHQsbixzKXt2YXIgYyxkLHUsaD1lLmdldEF0dHJpYnV0ZShcImRhdGEtXCIreC5ucytcInJvbGVcIikscD1lLmdldEF0dHJpYnV0ZShcImRhdGEtXCIreC5ucytcImJpbmRcIiksdj1lLmNoaWxkcmVuLF89W10sdz0hMCxiPXt9O2lmKHM9c3x8W3RdLChofHxwKSYmbChlKSxoJiYodT1pKGUsbikpLHAmJihwPXIocC5yZXBsYWNlKGssXCJcIikpLHV8fChiPXgucGFyc2VPcHRpb25zKGUse3RleHRGaWVsZDpcIlwiLHZhbHVlRmllbGQ6XCJcIix0ZW1wbGF0ZTpcIlwiLHZhbHVlVXBkYXRlOkIsdmFsdWVQcmltaXRpdmU6ITEsYXV0b0JpbmQ6ITB9KSxiLnJvbGVzPW4sdT1uZXcgeShlLGIpKSx1LnNvdXJjZT10LGQ9byhwLHMsZiksYi50ZW1wbGF0ZSYmKGQudGVtcGxhdGU9bmV3IG0ocyxcIlwiLGIudGVtcGxhdGUpKSxkLmNsaWNrJiYocC5ldmVudHM9cC5ldmVudHN8fHt9LHAuZXZlbnRzLmNsaWNrPXAuY2xpY2ssZC5jbGljay5kZXN0cm95KCksZGVsZXRlIGQuY2xpY2spLGQuc291cmNlJiYodz0hMSkscC5hdHRyJiYoZC5hdHRyPW8ocC5hdHRyLHMsZikpLHAuc3R5bGUmJihkLnN0eWxlPW8ocC5zdHlsZSxzLGYpKSxwLmV2ZW50cyYmKGQuZXZlbnRzPW8ocC5ldmVudHMscyxnKSksdS5iaW5kKGQpKSx1JiYoZS5rZW5kb0JpbmRpbmdUYXJnZXQ9dSksdyYmdil7Zm9yKGM9MDt2Lmxlbmd0aD5jO2MrKylfW2NdPXZbY107Zm9yKGM9MDtfLmxlbmd0aD5jO2MrKylhKF9bY10sdCxuLHMpfX1mdW5jdGlvbiBzKHQsbil7dmFyIGkscixvLHM9eC5yb2xlc0Zyb21OYW1lc3BhY2VzKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpKTtmb3Iobj14Lm9ic2VydmFibGUobiksdD1lKHQpLGk9MCxyPXQubGVuZ3RoO3I+aTtpKyspbz10W2ldLDE9PT1vLm5vZGVUeXBlJiZhKG8sbixzKX1mdW5jdGlvbiBsKGUpe3ZhciB0PWUua2VuZG9CaW5kaW5nVGFyZ2V0O3QmJih0LmRlc3Ryb3koKSxSP2RlbGV0ZSBlLmtlbmRvQmluZGluZ1RhcmdldDplLnJlbW92ZUF0dHJpYnV0ZT9lLnJlbW92ZUF0dHJpYnV0ZShcImtlbmRvQmluZGluZ1RhcmdldFwiKTplLmtlbmRvQmluZGluZ1RhcmdldD1udWxsKX1mdW5jdGlvbiBjKGUpe2woZSksZChlKX1mdW5jdGlvbiBkKGUpe3ZhciB0LG4saT1lLmNoaWxkcmVuO2lmKGkpZm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspYyhpW3RdKX1mdW5jdGlvbiB1KHQpe3ZhciBuLGk7Zm9yKHQ9ZSh0KSxuPTAsaT10Lmxlbmd0aDtpPm47bisrKWModFtuXSl9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPWUuZWxlbWVudCxpPW5bMF0ua2VuZG9CaW5kaW5nVGFyZ2V0O2kmJnMobixpLnNvdXJjZSx0KX12YXIgcCxmLGcsbSx2LF8seSx3LGIsayx4PXdpbmRvdy5rZW5kbyxDPXguT2JzZXJ2YWJsZSxTPXguZGF0YS5PYnNlcnZhYmxlT2JqZWN0LFQ9eC5kYXRhLk9ic2VydmFibGVBcnJheSxEPXt9LnRvU3RyaW5nLEE9e30sRT14LkNsYXNzLE09ZS5wcm94eSxQPVwidmFsdWVcIixJPVwic291cmNlXCIsej1cImV2ZW50c1wiLEY9XCJjaGVja2VkXCIsUj0hMCxCPVwiY2hhbmdlXCI7IWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZS5pbm5lclRleHQhPT10P3A9XCJpbm5lclRleHRcIjplLnRleHRDb250ZW50IT09dCYmKHA9XCJ0ZXh0Q29udGVudFwiKTt0cnl7ZGVsZXRlIGUudGVzdH1jYXRjaChuKXtSPSExfX0oKSxmPUMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztDLmZuLmluaXQuY2FsbChuKSxuLnNvdXJjZT1lWzBdLG4ucGFyZW50cz1lLG4ucGF0aD10LG4uZGVwZW5kZW5jaWVzPXt9LG4uZGVwZW5kZW5jaWVzW3RdPSEwLG4ub2JzZXJ2YWJsZT1uLnNvdXJjZSBpbnN0YW5jZW9mIEMsbi5fYWNjZXNzPWZ1bmN0aW9uKGUpe24uZGVwZW5kZW5jaWVzW2UuZmllbGRdPSEwfSxuLm9ic2VydmFibGUmJihuLl9jaGFuZ2U9ZnVuY3Rpb24oZSl7bi5jaGFuZ2UoZSl9LG4uc291cmNlLmJpbmQoQixuLl9jaGFuZ2UpKX0sX3BhcmVudHM6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMucGFyZW50cyxpPXRoaXMuZ2V0KCk7cmV0dXJuIGkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkucGFyZW50JiYodD1pLnBhcmVudCgpLGUuaW5BcnJheSh0LG4pPDAmJihuPVt0XS5jb25jYXQobikpKSxufSxjaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWUuZmllbGQscj10aGlzO2lmKFwidGhpc1wiPT09ci5wYXRoKXIudHJpZ2dlcihCLGUpO2Vsc2UgZm9yKHQgaW4gci5kZXBlbmRlbmNpZXMpaWYoMD09PXQuaW5kZXhPZihpKSYmKG49dC5jaGFyQXQoaS5sZW5ndGgpLCFufHxcIi5cIj09PW58fFwiW1wiPT09bikpe3IudHJpZ2dlcihCLGUpO2JyZWFrfX0sc3RhcnQ6ZnVuY3Rpb24oZSl7ZS5iaW5kKFwiZ2V0XCIsdGhpcy5fYWNjZXNzKX0sc3RvcDpmdW5jdGlvbihlKXtlLnVuYmluZChcImdldFwiLHRoaXMuX2FjY2Vzcyl9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLnNvdXJjZSxpPTAscj1lLnBhdGgsbz1uO2lmKCFlLm9ic2VydmFibGUpcmV0dXJuIG87Zm9yKGUuc3RhcnQoZS5zb3VyY2UpLG89bi5nZXQocik7bz09PXQmJm47KW49ZS5wYXJlbnRzWysraV0sbiBpbnN0YW5jZW9mIFMmJihvPW4uZ2V0KHIpKTtpZihvPT09dClmb3Iobj1lLnNvdXJjZTtvPT09dCYmbjspbj1uLnBhcmVudCgpLG4gaW5zdGFuY2VvZiBTJiYobz1uLmdldChyKSk7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKGk9ci5sYXN0SW5kZXhPZihcIi5cIiksaT4wJiYobj1uLmdldChyLnN1YnN0cmluZygwLGkpKSksZS5zdGFydChuKSxvPW4hPT1lLnNvdXJjZT9vLmNhbGwobixlLnNvdXJjZSk6by5jYWxsKG4pLGUuc3RvcChuKSksbiYmbiE9PWUuc291cmNlJiYoZS5jdXJyZW50U291cmNlPW4sbi51bmJpbmQoQixlLl9jaGFuZ2UpLmJpbmQoQixlLl9jaGFuZ2UpKSxlLnN0b3AoZS5zb3VyY2UpLG99LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnJlbnRTb3VyY2V8fHRoaXMuc291cmNlLG49eC5nZXR0ZXIodGhpcy5wYXRoKSh0KTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBuP3QhPT10aGlzLnNvdXJjZT9uLmNhbGwodCx0aGlzLnNvdXJjZSxlKTpuLmNhbGwodCxlKTp0LnNldCh0aGlzLnBhdGgsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmFibGUmJih0aGlzLnNvdXJjZS51bmJpbmQoQix0aGlzLl9jaGFuZ2UpLHRoaXMuY3VycmVudFNvdXJjZSYmdGhpcy5jdXJyZW50U291cmNlLnVuYmluZChCLHRoaXMuX2NoYW5nZSkpLHRoaXMudW5iaW5kKCl9fSksZz1mLmV4dGVuZCh7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnNvdXJjZSxuPXRoaXMucGF0aCxpPTA7Zm9yKGU9dC5nZXQobik7IWUmJnQ7KXQ9dGhpcy5wYXJlbnRzWysraV0sdCBpbnN0YW5jZW9mIFMmJihlPXQuZ2V0KG4pKTtyZXR1cm4gTShlLHQpfX0pLG09Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7Zi5mbi5pbml0LmNhbGwoaSxlLHQpLGkudGVtcGxhdGU9bn0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0aGlzLnN0YXJ0KHRoaXMuc291cmNlKSx0PXgucmVuZGVyKHRoaXMudGVtcGxhdGUsZSksdGhpcy5zdG9wKHRoaXMuc291cmNlKSx0fX0pLHY9RS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuZWxlbWVudD1lLHRoaXMuYmluZGluZ3M9dCx0aGlzLm9wdGlvbnM9bn0sYmluZDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7ZT10P2VbdF06ZSxlLmJpbmQoQixmdW5jdGlvbihlKXtuLnJlZnJlc2godHx8ZSl9KSxuLnJlZnJlc2godCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9fSksQS5hdHRyPXYuZXh0ZW5kKHtyZWZyZXNoOmZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoZSx0aGlzLmJpbmRpbmdzLmF0dHJbZV0uZ2V0KCkpfX0pLEEuc3R5bGU9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50LnN0eWxlW2VdPXRoaXMuYmluZGluZ3Muc3R5bGVbZV0uZ2V0KCl8fFwiXCJ9fSksQS5lbmFibGVkPXYuZXh0ZW5kKHtyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5iaW5kaW5ncy5lbmFibGVkLmdldCgpP3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTp0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpfX0pLEEucmVhZG9ubHk9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmdzLnJlYWRvbmx5LmdldCgpP3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLFwicmVhZG9ubHlcIik6dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpfX0pLEEuZGlzYWJsZWQ9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmdzLmRpc2FibGVkLmdldCgpP3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIik6dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpfX0pLEEuZXZlbnRzPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmhhbmRsZXJzPXt9fSxyZWZyZXNoOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcy5lbGVtZW50KSxpPXRoaXMuYmluZGluZ3MuZXZlbnRzW3RdLHI9dGhpcy5oYW5kbGVyc1t0XTtyJiZuLm9mZih0LHIpLHI9dGhpcy5oYW5kbGVyc1t0XT1pLmdldCgpLG4ub24odCxpLnNvdXJjZSxyKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LG49ZSh0aGlzLmVsZW1lbnQpO2Zvcih0IGluIHRoaXMuaGFuZGxlcnMpbi5vZmYodCx0aGlzLmhhbmRsZXJzW3RdKX19KSxBLnRleHQ9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJpbmRpbmdzLnRleHQuZ2V0KCk7bnVsbD09ZSYmKGU9XCJcIiksdGhpcy5lbGVtZW50W3BdPWV9fSksQS52aXNpYmxlPXYuZXh0ZW5kKHtyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9dGhpcy5iaW5kaW5ncy52aXNpYmxlLmdldCgpP1wiXCI6XCJub25lXCJ9fSksQS5pbnZpc2libGU9di5leHRlbmQoe3JlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT10aGlzLmJpbmRpbmdzLmludmlzaWJsZS5nZXQoKT9cIm5vbmVcIjpcIlwifX0pLEEuaHRtbD12LmV4dGVuZCh7cmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5pbm5lckhUTUw9dGhpcy5iaW5kaW5ncy5odG1sLmdldCgpfX0pLEEudmFsdWU9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdCxuLGkpLHRoaXMuX2NoYW5nZT1NKHRoaXMuY2hhbmdlLHRoaXMpLHRoaXMuZXZlbnROYW1lPWkudmFsdWVVcGRhdGV8fEIsZSh0aGlzLmVsZW1lbnQpLm9uKHRoaXMuZXZlbnROYW1lLHRoaXMuX2NoYW5nZSksdGhpcy5faW5pdENoYW5nZT0hMX0sY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9pbml0Q2hhbmdlPXRoaXMuZXZlbnROYW1lIT1CLGU9dGhpcy5lbGVtZW50LnZhbHVlLHQ9dGhpcy5lbGVtZW50LnR5cGUsXCJkYXRlXCI9PXQ/ZT14LnBhcnNlRGF0ZShlLFwieXl5eS1NTS1kZFwiKTpcImRhdGV0aW1lLWxvY2FsXCI9PXQ/ZT14LnBhcnNlRGF0ZShlLFtcInl5eXktTU0tZGRUSEg6bW06c3NcIixcInl5eXktTU0tZGRUSEg6bW1cIl0pOlwibnVtYmVyXCI9PXQmJihlPXgucGFyc2VGbG9hdChlKSksdGhpcy5iaW5kaW5nc1tQXS5zZXQoZSksdGhpcy5faW5pdENoYW5nZT0hMX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5faW5pdENoYW5nZXx8KGU9dGhpcy5iaW5kaW5nc1tQXS5nZXQoKSxudWxsPT1lJiYoZT1cIlwiKSx0PXRoaXMuZWxlbWVudC50eXBlLFwiZGF0ZVwiPT10P2U9eC50b1N0cmluZyhlLFwieXl5eS1NTS1kZFwiKTpcImRhdGV0aW1lLWxvY2FsXCI9PXQmJihlPXgudG9TdHJpbmcoZSxcInl5eXktTU0tZGRUSEg6bW06c3NcIikpLHRoaXMuZWxlbWVudC52YWx1ZT1lKSx0aGlzLl9pbml0Q2hhbmdlPSExfSxkZXN0cm95OmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLm9mZih0aGlzLmV2ZW50TmFtZSx0aGlzLl9jaGFuZ2UpfX0pLEEuc291cmNlPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUsdCxuKTt2YXIgaT10aGlzLmJpbmRpbmdzLnNvdXJjZS5nZXQoKTtpIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2UmJm4uYXV0b0JpbmQhPT0hMSYmaS5mZXRjaCgpfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmJpbmRpbmdzLnNvdXJjZS5nZXQoKTtuIGluc3RhbmNlb2YgVHx8biBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlPyhlPWV8fHt9LFwiYWRkXCI9PWUuYWN0aW9uP3QuYWRkKGUuaW5kZXgsZS5pdGVtcyk6XCJyZW1vdmVcIj09ZS5hY3Rpb24/dC5yZW1vdmUoZS5pbmRleCxlLml0ZW1zKTpcIml0ZW1jaGFuZ2VcIiE9ZS5hY3Rpb24mJnQucmVuZGVyKCkpOnQucmVuZGVyKCl9LGNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudDtyZXR1cm5cInRhYmxlXCI9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKGUudEJvZGllc1swXXx8ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikpLGU9ZS50Qm9kaWVzWzBdKSxlfSx0ZW1wbGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWUudGVtcGxhdGUsbj10aGlzLmNvbnRhaW5lcigpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fCh0PVwic2VsZWN0XCI9PW4/ZS52YWx1ZUZpZWxkfHxlLnRleHRGaWVsZD94LmZvcm1hdCgnPG9wdGlvbiB2YWx1ZT1cIiM6ezB9I1wiPiM6ezF9Izwvb3B0aW9uPicsZS52YWx1ZUZpZWxkfHxlLnRleHRGaWVsZCxlLnRleHRGaWVsZHx8ZS52YWx1ZUZpZWxkKTpcIjxvcHRpb24+IzpkYXRhIzwvb3B0aW9uPlwiOlwidGJvZHlcIj09bj9cIjx0cj48dGQ+IzpkYXRhIzwvdGQ+PC90cj5cIjpcInVsXCI9PW58fFwib2xcIj09bj9cIjxsaT4jOmRhdGEjPC9saT5cIjpcIiM6ZGF0YSNcIix0PXgudGVtcGxhdGUodCkpLHR9LGFkZDpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxzLGw9dGhpcy5jb250YWluZXIoKSxjPWwuY2xvbmVOb2RlKCExKSxkPWwuY2hpbGRyZW5bdF07aWYoZShjKS5odG1sKHgucmVuZGVyKHRoaXMudGVtcGxhdGUoKSxuKSksYy5jaGlsZHJlbi5sZW5ndGgpZm9yKGk9dGhpcy5iaW5kaW5ncy5zb3VyY2UuX3BhcmVudHMoKSxyPTAsbz1uLmxlbmd0aDtvPnI7cisrKXM9Yy5jaGlsZHJlblswXSxsLmluc2VydEJlZm9yZShzLGR8fG51bGwpLGEocyxuW3JdLHRoaXMub3B0aW9ucy5yb2xlcyxbbltyXV0uY29uY2F0KGkpKX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuY29udGFpbmVyKCk7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylpPXIuY2hpbGRyZW5bZV0sYyhpKSxyLnJlbW92ZUNoaWxkKGkpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLmJpbmRpbmdzLnNvdXJjZS5nZXQoKSxvPXRoaXMuY29udGFpbmVyKCkscz10aGlzLnRlbXBsYXRlKCk7aWYociBpbnN0YW5jZW9mIHguZGF0YS5EYXRhU291cmNlJiYocj1yLnZpZXcoKSksciBpbnN0YW5jZW9mIFR8fFwiW29iamVjdCBBcnJheV1cIj09PUQuY2FsbChyKXx8KHI9W3JdKSx0aGlzLmJpbmRpbmdzLnRlbXBsYXRlKXtpZihkKG8pLGUobykuaHRtbCh0aGlzLmJpbmRpbmdzLnRlbXBsYXRlLnJlbmRlcihyKSksby5jaGlsZHJlbi5sZW5ndGgpZm9yKHQ9dGhpcy5iaW5kaW5ncy5zb3VyY2UuX3BhcmVudHMoKSxuPTAsaT1yLmxlbmd0aDtpPm47bisrKWEoby5jaGlsZHJlbltuXSxyW25dLHRoaXMub3B0aW9ucy5yb2xlcyxbcltuXV0uY29uY2F0KHQpKX1lbHNlIGUobykuaHRtbCh4LnJlbmRlcihzLHIpKX19KSxBLmlucHV0PXtjaGVja2VkOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbixpKXt2LmZuLmluaXQuY2FsbCh0aGlzLHQsbixpKSx0aGlzLl9jaGFuZ2U9TSh0aGlzLmNoYW5nZSx0aGlzKSxlKHRoaXMuZWxlbWVudCkuY2hhbmdlKHRoaXMuX2NoYW5nZSl9LGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVsZW1lbnQsaT10aGlzLnZhbHVlKCk7XCJyYWRpb1wiPT1uLnR5cGU/dGhpcy5iaW5kaW5nc1tGXS5zZXQoaSk6XCJjaGVja2JveFwiPT1uLnR5cGUmJihlPXRoaXMuYmluZGluZ3NbRl0uZ2V0KCksZSBpbnN0YW5jZW9mIFQ/KGk9dGhpcy5lbGVtZW50LnZhbHVlLFwib25cIiE9PWkmJlwib2ZmXCIhPT1pJiYodD1lLmluZGV4T2YoaSksdD4tMT9lLnNwbGljZSh0LDEpOmUucHVzaChpKSkpOnRoaXMuYmluZGluZ3NbRl0uc2V0KGkpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYmluZGluZ3NbRl0uZ2V0KCksdD1lLG49dGhpcy5lbGVtZW50O1wiY2hlY2tib3hcIj09bi50eXBlPyh0IGluc3RhbmNlb2YgVCYmKGU9dGhpcy5lbGVtZW50LnZhbHVlLHQuaW5kZXhPZihlKT49MCYmKGU9ITApKSxuLmNoZWNrZWQ9ZT09PSEwKTpcInJhZGlvXCI9PW4udHlwZSYmbnVsbCE9ZSYmbi52YWx1ZT09PVwiXCIrZSYmKG4uY2hlY2tlZD0hMCl9LHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LHQ9ZS52YWx1ZTtyZXR1cm5cImNoZWNrYm94XCI9PWUudHlwZSYmKHQ9ZS5jaGVja2VkKSx0fSxkZXN0cm95OmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLm9mZihCLHRoaXMuX2NoYW5nZSl9fSl9LEEuc2VsZWN0PXt2YWx1ZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4saSl7di5mbi5pbml0LmNhbGwodGhpcyx0LG4saSksdGhpcy5fY2hhbmdlPU0odGhpcy5jaGFuZ2UsdGhpcyksZSh0aGlzLmVsZW1lbnQpLmNoYW5nZSh0aGlzLl9jaGFuZ2UpfSxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZSxuLGkscixvLGEscz1bXSxsPXRoaXMuZWxlbWVudCxjPXRoaXMub3B0aW9ucy52YWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMudGV4dEZpZWxkLGQ9dGhpcy5vcHRpb25zLnZhbHVlUHJpbWl0aXZlO2ZvcihvPTAsYT1sLm9wdGlvbnMubGVuZ3RoO2E+bztvKyspbj1sLm9wdGlvbnNbb10sbi5zZWxlY3RlZCYmKHI9bi5hdHRyaWJ1dGVzLnZhbHVlLHI9ciYmci5zcGVjaWZpZWQ/bi52YWx1ZTpuLnRleHQscy5wdXNoKHIpKTtpZihjKWZvcihlPXRoaXMuYmluZGluZ3Muc291cmNlLmdldCgpLGUgaW5zdGFuY2VvZiB4LmRhdGEuRGF0YVNvdXJjZSYmKGU9ZS52aWV3KCkpLGk9MDtzLmxlbmd0aD5pO2krKylmb3Iobz0wLGE9ZS5sZW5ndGg7YT5vO28rKylpZihlW29dLmdldChjKT09c1tpXSl7c1tpXT1lW29dO2JyZWFrfXI9dGhpcy5iaW5kaW5nc1tQXS5nZXQoKSxyIGluc3RhbmNlb2YgVD9yLnNwbGljZS5hcHBseShyLFswLHIubGVuZ3RoXS5jb25jYXQocykpOnRoaXMuYmluZGluZ3NbUF0uc2V0KGR8fCEociBpbnN0YW5jZW9mIFN8fG51bGw9PT1yfHxyPT09dCkmJmM/c1swXS5nZXQoYyk6c1swXSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmVsZW1lbnQscj1pLm9wdGlvbnMsbz10aGlzLmJpbmRpbmdzW1BdLmdldCgpLGE9byxzPXRoaXMub3B0aW9ucy52YWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMudGV4dEZpZWxkLGw9ITE7Zm9yKGEgaW5zdGFuY2VvZiBUfHwoYT1uZXcgVChbb10pKSxpLnNlbGVjdGVkSW5kZXg9LTEsbj0wO2EubGVuZ3RoPm47bisrKWZvcihvPWFbbl0scyYmbyBpbnN0YW5jZW9mIFMmJihvPW8uZ2V0KHMpKSxlPTA7ci5sZW5ndGg+ZTtlKyspdD1yW2VdLnZhbHVlLFwiXCI9PT10JiZcIlwiIT09byYmKHQ9cltlXS50ZXh0KSx0PT1vJiYocltlXS5zZWxlY3RlZD0hMCxsPSEwKX0sZGVzdHJveTpmdW5jdGlvbigpe2UodGhpcy5lbGVtZW50KS5vZmYoQix0aGlzLl9jaGFuZ2UpfX0pfSxBLndpZGdldD17ZXZlbnRzOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWUsdGhpcy5oYW5kbGVycz17fX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmJpbmRpbmdzLmV2ZW50c1tlXSxuPXRoaXMuaGFuZGxlcnNbZV07biYmdGhpcy53aWRnZXQudW5iaW5kKGUsbiksbj10LmdldCgpLHRoaXMuaGFuZGxlcnNbZV09ZnVuY3Rpb24oZSl7ZS5kYXRhPXQuc291cmNlLG4oZSksZS5kYXRhPT09dC5zb3VyY2UmJmRlbGV0ZSBlLmRhdGF9LHRoaXMud2lkZ2V0LmJpbmQoZSx0aGlzLmhhbmRsZXJzW2VdKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlO2ZvcihlIGluIHRoaXMuaGFuZGxlcnMpdGhpcy53aWRnZXQudW5iaW5kKGUsdGhpcy5oYW5kbGVyc1tlXSl9fSksY2hlY2tlZDp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7di5mbi5pbml0LmNhbGwodGhpcyxlLmVsZW1lbnRbMF0sdCxuKSx0aGlzLndpZGdldD1lLHRoaXMuX2NoYW5nZT1NKHRoaXMuY2hhbmdlLHRoaXMpLHRoaXMud2lkZ2V0LmJpbmQoQix0aGlzLl9jaGFuZ2UpfSxjaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmJpbmRpbmdzW0ZdLnNldCh0aGlzLnZhbHVlKCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy53aWRnZXQuY2hlY2sodGhpcy5iaW5kaW5nc1tGXS5nZXQoKT09PSEwKX0sdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQsdD1lLnZhbHVlO3JldHVybihcIm9uXCI9PXR8fFwib2ZmXCI9PXQpJiYodD1lLmNoZWNrZWQpLHR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC51bmJpbmQoQix0aGlzLl9jaGFuZ2UpfX0pLHZpc2libGU6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3YuZm4uaW5pdC5jYWxsKHRoaXMsZS5lbGVtZW50WzBdLHQsbiksdGhpcy53aWRnZXQ9ZX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYmluZGluZ3MudmlzaWJsZS5nZXQoKTt0aGlzLndpZGdldC53cmFwcGVyWzBdLnN0eWxlLmRpc3BsYXk9ZT9cIlwiOlwibm9uZVwifX0pLGludmlzaWJsZTp2LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7di5mbi5pbml0LmNhbGwodGhpcyxlLmVsZW1lbnRbMF0sdCxuKSx0aGlzLndpZGdldD1lfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5iaW5kaW5ncy5pbnZpc2libGUuZ2V0KCk7dGhpcy53aWRnZXQud3JhcHBlclswXS5zdHlsZS5kaXNwbGF5PWU/XCJub25lXCI6XCJcIn19KSxlbmFibGVkOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWV9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC5lbmFibGUmJnRoaXMud2lkZ2V0LmVuYWJsZSh0aGlzLmJpbmRpbmdzLmVuYWJsZWQuZ2V0KCkpfX0pLGRpc2FibGVkOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt2LmZuLmluaXQuY2FsbCh0aGlzLGUuZWxlbWVudFswXSx0LG4pLHRoaXMud2lkZ2V0PWV9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLndpZGdldC5lbmFibGUmJnRoaXMud2lkZ2V0LmVuYWJsZSghdGhpcy5iaW5kaW5ncy5kaXNhYmxlZC5nZXQoKSl9fSksc291cmNlOm4oXCJzb3VyY2VcIixcImRhdGFTb3VyY2VcIixcInNldERhdGFTb3VyY2VcIiksdmFsdWU6di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3YuZm4uaW5pdC5jYWxsKHRoaXMsdC5lbGVtZW50WzBdLG4saSksdGhpcy53aWRnZXQ9dCx0aGlzLl9jaGFuZ2U9ZS5wcm94eSh0aGlzLmNoYW5nZSx0aGlzKSx0aGlzLndpZGdldC5maXJzdChCLHRoaXMuX2NoYW5nZSk7dmFyIHI9dGhpcy5iaW5kaW5ncy52YWx1ZS5nZXQoKTt0aGlzLl92YWx1ZUlzT2JzZXJ2YWJsZU9iamVjdD0haS52YWx1ZVByaW1pdGl2ZSYmKG51bGw9PXJ8fHIgaW5zdGFuY2VvZiBTKSx0aGlzLl92YWx1ZUlzT2JzZXJ2YWJsZUFycmF5PXIgaW5zdGFuY2VvZiBULHRoaXMuX2luaXRDaGFuZ2U9ITF9LGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHM9dGhpcy53aWRnZXQudmFsdWUoKSxsPXRoaXMub3B0aW9ucy5kYXRhVmFsdWVGaWVsZHx8dGhpcy5vcHRpb25zLmRhdGFUZXh0RmllbGQsYz1cIltvYmplY3QgQXJyYXldXCI9PT1ELmNhbGwocyksZD10aGlzLl92YWx1ZUlzT2JzZXJ2YWJsZU9iamVjdCx1PVtdO2lmKHRoaXMuX2luaXRDaGFuZ2U9ITAsbClpZih0aGlzLmJpbmRpbmdzLnNvdXJjZSYmKGE9dGhpcy5iaW5kaW5ncy5zb3VyY2UuZ2V0KCkpLFwiXCI9PT1zJiYoZHx8dGhpcy5vcHRpb25zLnZhbHVlUHJpbWl0aXZlKSlzPW51bGw7ZWxzZXtmb3IoKCFhfHxhIGluc3RhbmNlb2YgeC5kYXRhLkRhdGFTb3VyY2UpJiYoYT10aGlzLndpZGdldC5kYXRhU291cmNlLnZpZXcoKSksYyYmKHQ9cy5sZW5ndGgsdT1zLnNsaWNlKDApKSxyPTAsbz1hLmxlbmd0aDtvPnI7cisrKWlmKG49YVtyXSxpPW4uZ2V0KGwpLGMpe2ZvcihlPTA7dD5lO2UrKylpZihpPT11W2VdKXt1W2VdPW47YnJlYWt9fWVsc2UgaWYoaT09cyl7cz1kP246aTticmVha311WzBdJiYocz10aGlzLl92YWx1ZUlzT2JzZXJ2YWJsZUFycmF5P3U6ZHx8IWw/dVswXTp1WzBdLmdldChsKSl9dGhpcy5iaW5kaW5ncy52YWx1ZS5zZXQocyksdGhpcy5faW5pdENoYW5nZT0hMX0scmVmcmVzaDpmdW5jdGlvbigpe2lmKCF0aGlzLl9pbml0Q2hhbmdlKXt2YXIgZSxuPXRoaXMub3B0aW9ucy5kYXRhVmFsdWVGaWVsZHx8dGhpcy5vcHRpb25zLmRhdGFUZXh0RmllbGQsaT10aGlzLmJpbmRpbmdzLnZhbHVlLmdldCgpLHI9MCxvPVtdO2lmKGk9PT10JiYoaT1udWxsKSxuKWlmKGkgaW5zdGFuY2VvZiBUKXtmb3IoZT1pLmxlbmd0aDtlPnI7cisrKW9bcl09aVtyXS5nZXQobik7aT1vfWVsc2UgaSBpbnN0YW5jZW9mIFMmJihpPWkuZ2V0KG4pKTt0aGlzLndpZGdldC52YWx1ZShpKX10aGlzLl9pbml0Q2hhbmdlPSExfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy53aWRnZXQudW5iaW5kKEIsdGhpcy5fY2hhbmdlKX19KSxnYW50dDp7ZGVwZW5kZW5jaWVzOm4oXCJkZXBlbmRlbmNpZXNcIixcImRlcGVuZGVuY2llc1wiLFwic2V0RGVwZW5kZW5jaWVzRGF0YVNvdXJjZVwiKX0sbXVsdGlzZWxlY3Q6e3ZhbHVlOnYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbixpKXt2LmZuLmluaXQuY2FsbCh0aGlzLHQuZWxlbWVudFswXSxuLGkpLHRoaXMud2lkZ2V0PXQsdGhpcy5fY2hhbmdlPWUucHJveHkodGhpcy5jaGFuZ2UsdGhpcyksdGhpcy53aWRnZXQuZmlyc3QoQix0aGlzLl9jaGFuZ2UpLHRoaXMuX2luaXRDaGFuZ2U9ITF9LGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHMsbCxjPXRoaXMsZD1jLmJpbmRpbmdzW1BdLmdldCgpLHU9Yy5vcHRpb25zLnZhbHVlUHJpbWl0aXZlLGg9dT9jLndpZGdldC52YWx1ZSgpOmMud2lkZ2V0LmRhdGFJdGVtcygpLHA9dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZDtpZihoPWguc2xpY2UoMCksYy5faW5pdENoYW5nZT0hMCxkIGluc3RhbmNlb2YgVCl7Zm9yKGU9W10sdD1oLmxlbmd0aCxuPTAsaT0wLHI9ZFtuXSxvPSExO3I7KXtmb3IobD0hMSxpPTA7dD5pO2krKylpZih1P289aFtpXT09cjoocz1oW2ldLHM9cy5nZXQ/cy5nZXQocCk6cyxvPXM9PShyLmdldD9yLmdldChwKTpyKSksbyl7aC5zcGxpY2UoaSwxKSx0LT0xLGw9ITA7YnJlYWt9bD9uKz0xOihlLnB1c2gociksXyhkLG4sMSksYT1uKSxyPWRbbl19XyhkLGQubGVuZ3RoLDAsaCksZS5sZW5ndGgmJmQudHJpZ2dlcihcImNoYW5nZVwiLHthY3Rpb246XCJyZW1vdmVcIixpdGVtczplLGluZGV4OmF9KSxoLmxlbmd0aCYmZC50cmlnZ2VyKFwiY2hhbmdlXCIse2FjdGlvbjpcImFkZFwiLGl0ZW1zOmgsaW5kZXg6ZC5sZW5ndGgtMX0pfWVsc2UgYy5iaW5kaW5nc1tQXS5zZXQoaCk7Yy5faW5pdENoYW5nZT0hMX0scmVmcmVzaDpmdW5jdGlvbigpe2lmKCF0aGlzLl9pbml0Q2hhbmdlKXt2YXIgZSxuLGk9dGhpcy5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkfHx0aGlzLm9wdGlvbnMuZGF0YVRleHRGaWVsZCxyPXRoaXMuYmluZGluZ3MudmFsdWUuZ2V0KCksbz0wLGE9W107aWYocj09PXQmJihyPW51bGwpLGkpaWYociBpbnN0YW5jZW9mIFQpe2ZvcihlPXIubGVuZ3RoO2U+bztvKyspbj1yW29dLGFbb109bi5nZXQ/bi5nZXQoaSk6bjtyPWF9ZWxzZSByIGluc3RhbmNlb2YgUyYmKHI9ci5nZXQoaSkpO3RoaXMud2lkZ2V0LnZhbHVlKHIpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMud2lkZ2V0LnVuYmluZChCLHRoaXMuX2NoYW5nZSl9fSl9LHNjaGVkdWxlcjp7c291cmNlOm4oXCJzb3VyY2VcIixcImRhdGFTb3VyY2VcIixcInNldERhdGFTb3VyY2VcIikuZXh0ZW5kKHtkYXRhQm91bmQ6ZnVuY3Rpb24oZSl7e3ZhciB0LG4saSxyLG89dGhpcy53aWRnZXQscz1vLnZpZXcoKSxsPWUuYWRkZWRJdGVtc3x8by5pdGVtcygpLGM9by5kYXRhU291cmNlO2MuZ3JvdXAoKXx8W119aWYobC5sZW5ndGgpZm9yKGk9ZS5hZGRlZERhdGFJdGVtc3x8Yy5leHBhbmQocy5zdGFydERhdGUoKSxzLmVuZERhdGUoKSkscj10aGlzLmJpbmRpbmdzLnNvdXJjZS5fcGFyZW50cygpLHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspYShsW3RdLGlbdF0sdGhpcy5fbnMoZS5ucyksW2lbdF1dLmNvbmNhdChyKSl9fSl9fSxfPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzLGw7aWYoaT1pfHxbXSxuPW58fDAscj1pLmxlbmd0aCxvPWUubGVuZ3RoLGE9W10uc2xpY2UuY2FsbChlLHQrbikscz1hLmxlbmd0aCxyKXtmb3Iocj10K3IsbD0wO3I+dDt0KyspZVt0XT1pW2xdLGwrKztlLmxlbmd0aD1yfWVsc2UgaWYobilmb3IoZS5sZW5ndGg9dCxuKz10O24+dDspZGVsZXRlIGVbLS1uXTtpZihzKXtmb3Iocz10K3MsbD0wO3M+dDt0KyspZVt0XT1hW2xdLGwrKztlLmxlbmd0aD1zfWZvcih0PWUubGVuZ3RoO28+dDspZGVsZXRlIGVbdF0sdCsrfSx5PUUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy50YXJnZXQ9ZSx0aGlzLm9wdGlvbnM9dCx0aGlzLnRvRGVzdHJveT1bXX0sYmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXMudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksYT1BW29dfHx7fTtmb3IodCBpbiBlKXQ9PVA/bj0hMDp0PT1JP2k9ITA6dD09ej9yPSEwOnRoaXMuYXBwbHlCaW5kaW5nKHQsZSxhKTtpJiZ0aGlzLmFwcGx5QmluZGluZyhJLGUsYSksbiYmdGhpcy5hcHBseUJpbmRpbmcoUCxlLGEpLHImJnRoaXMuYXBwbHlCaW5kaW5nKHosZSxhKX0sYXBwbHlCaW5kaW5nOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPW5bZV18fEFbZV0sbz10aGlzLnRvRGVzdHJveSxhPXRbZV07aWYocilpZihyPW5ldyByKHRoaXMudGFyZ2V0LHQsdGhpcy5vcHRpb25zKSxvLnB1c2gociksYSBpbnN0YW5jZW9mIGYpci5iaW5kKGEpLG8ucHVzaChhKTtlbHNlIGZvcihpIGluIGEpci5iaW5kKGEsaSksby5wdXNoKGFbaV0pO2Vsc2UgaWYoXCJ0ZW1wbGF0ZVwiIT09ZSl0aHJvdyBFcnJvcihcIlRoZSBcIitlK1wiIGJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgXCIrdGhpcy50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKStcIiBlbGVtZW50XCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMudG9EZXN0cm95O2ZvcihlPTAsdD1uLmxlbmd0aDt0PmU7ZSsrKW5bZV0uZGVzdHJveSgpfX0pLHc9eS5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9ITEscj0hMSxvPUEud2lkZ2V0W24udGFyZ2V0Lm9wdGlvbnMubmFtZS50b0xvd2VyQ2FzZSgpXXx8e307Zm9yKHQgaW4gZSl0PT1QP2k9ITA6dD09ST9yPSEwOm4uYXBwbHlCaW5kaW5nKHQsZSxvKTtyJiZuLmFwcGx5QmluZGluZyhJLGUsbyksaSYmbi5hcHBseUJpbmRpbmcoUCxlLG8pfSxhcHBseUJpbmRpbmc6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9bltlXXx8QS53aWRnZXRbZV0sbz10aGlzLnRvRGVzdHJveSxhPXRbZV07aWYoIXIpdGhyb3cgRXJyb3IoXCJUaGUgXCIrZStcIiBiaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIFwiK3RoaXMudGFyZ2V0Lm9wdGlvbnMubmFtZStcIiB3aWRnZXRcIik7aWYocj1uZXcgcih0aGlzLnRhcmdldCx0LHRoaXMudGFyZ2V0Lm9wdGlvbnMpLG8ucHVzaChyKSxhIGluc3RhbmNlb2YgZilyLmJpbmQoYSksby5wdXNoKGEpO2Vsc2UgZm9yKGkgaW4gYSlyLmJpbmQoYSxpKSxvLnB1c2goYVtpXSl9fSksYj0vW0EtWmEtejAtOV9cXC1dKzooXFx7KFtefV0qKVxcfXxbXix9XSspL2csaz0vXFxzL2cseC51bmJpbmQ9dSx4LmJpbmQ9cyx4LmRhdGEuYmluZGVycz1BLHguZGF0YS5CaW5kZXI9dix4Lm5vdGlmeT1oLHgub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFN8fChlPW5ldyBTKGUpKSxlfSx4Lm9ic2VydmFibGVIaWVyYXJjaHk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgbixpO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspZVtuXS5faW5pdENoaWxkcmVuKCksaT1lW25dLmNoaWxkcmVuLGkuZmV0Y2goKSxlW25dLml0ZW1zPWkuZGF0YSgpLHQoZVtuXS5pdGVtcyl9dmFyIG49eC5kYXRhLkhpZXJhcmNoaWNhbERhdGFTb3VyY2UuY3JlYXRlKGUpO3JldHVybiBuLmZldGNoKCksdChuLmRhdGEoKSksbi5fZGF0YS5fZGF0YVNvdXJjZT1uLG4uX2RhdGF9fSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gbihlLmNzcyh0KSl9ZnVuY3Rpb24gcihlKXt2YXIgdCxuPVtdO2Zvcih0IGluIGUpbi5wdXNoKHQpO3JldHVybiBufWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0IGluIGUpLTEhPVUuaW5kZXhPZih0KSYmLTE9PVcuaW5kZXhPZih0KSYmZGVsZXRlIGVbdF07cmV0dXJuIGV9ZnVuY3Rpb24gYShlLHQpe3ZhciBuLGkscixvLGE9W10scz17fTtmb3IoaSBpbiB0KW49aS50b0xvd2VyQ2FzZSgpLG89UCYmLTEhPVUuaW5kZXhPZihuKSwhRS5oYXNIVzNEJiZvJiYtMT09Vy5pbmRleE9mKG4pP2RlbGV0ZSB0W2ldOihyPXRbaV0sbz9hLnB1c2goaStcIihcIityK1wiKVwiKTpzW2ldPXIpO3JldHVybiBhLmxlbmd0aCYmKHNbc3RdPWEuam9pbihcIiBcIikpLHN9ZnVuY3Rpb24gcyhlLHQpe3ZhciBpLHIsbztyZXR1cm4gUD8oaT1lLmNzcyhzdCksaT09Sz9cInNjYWxlXCI9PXQ/MTowOihyPWkubWF0Y2goUmVnRXhwKHQrXCJcXFxccypcXFxcKChbXFxcXGRcXFxcd1xcXFwuXSspXCIpKSxvPTAscj9vPW4oclsxXSk6KHI9aS5tYXRjaChCKXx8WzAsMCwwLDAsMF0sdD10LnRvTG93ZXJDYXNlKCksTy50ZXN0KHQpP289cGFyc2VGbG9hdChyWzNdL3JbMl0pOlwidHJhbnNsYXRleVwiPT10P289cGFyc2VGbG9hdChyWzRdL3JbMl0pOlwic2NhbGVcIj09dD9vPXBhcnNlRmxvYXQoclsyXSk6XCJyb3RhdGVcIj09dCYmKG89cGFyc2VGbG9hdChNYXRoLmF0YW4yKHJbMl0sclsxXSkpKSksbykpOnBhcnNlRmxvYXQoZS5jc3ModCkpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHJpbmcoMSl9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuPWYuZXh0ZW5kKHQpLGk9bi5wcm90b3R5cGUuZGlyZWN0aW9ucztTW2woZSldPW4sUy5FbGVtZW50LnByb3RvdHlwZVtlXT1mdW5jdGlvbihlLHQsaSxyKXtyZXR1cm4gbmV3IG4odGhpcy5lbGVtZW50LGUsdCxpLHIpfSxUKGksZnVuY3Rpb24odCxpKXtTLkVsZW1lbnQucHJvdG90eXBlW2UrbChpKV09ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgbih0aGlzLmVsZW1lbnQsaSxlLHQscil9fSl9ZnVuY3Rpb24gZChlLG4saSxyKXtjKGUse2RpcmVjdGlvbnM6bSxzdGFydFZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdGFydFZhbHVlPWUsdGhpc30sZW5kVmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZFZhbHVlPWUsdGhpc30sc2hvdWxkSGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaG91bGRIaWRlfSxwcmVwYXJlOmZ1bmN0aW9uKGUsbyl7dmFyIGEscyxsPXRoaXMsYz1cIm91dFwiPT09dGhpcy5fZGlyZWN0aW9uLGQ9bC5lbGVtZW50LmRhdGEobiksdT0hKGlzTmFOKGQpfHxkPT1pKTthPXU/ZDp0IT09dGhpcy5fc3RhcnRWYWx1ZT90aGlzLl9zdGFydFZhbHVlOmM/aTpyLHM9dCE9PXRoaXMuX2VuZFZhbHVlP3RoaXMuX2VuZFZhbHVlOmM/cjppLHRoaXMuX3JldmVyc2U/KGVbbl09cyxvW25dPWEpOihlW25dPWEsb1tuXT1zKSxsLl9zaG91bGRIaWRlPW9bbl09PT1yfX0pfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbj1DLmRpcmVjdGlvbnNbdF0udmVydGljYWwsaT1lW24/SjpYXSgpLzIrXCJweFwiO3JldHVybiBfW3RdLnJlcGxhY2UoXCIkc2l6ZVwiLGkpfXZhciBoLHAsZixnLG0sdixfLHksdyxiLGsseCxDPXdpbmRvdy5rZW5kbyxTPUMuZWZmZWN0cyxUPWUuZWFjaCxEPWUuZXh0ZW5kLEE9ZS5wcm94eSxFPUMuc3VwcG9ydCxNPUUuYnJvd3NlcixQPUUudHJhbnNmb3JtcyxJPUUudHJhbnNpdGlvbnMsej17c2NhbGU6MCxzY2FsZXg6MCxzY2FsZXk6MCxzY2FsZTNkOjB9LEY9e3RyYW5zbGF0ZTowLHRyYW5zbGF0ZXg6MCx0cmFuc2xhdGV5OjAsdHJhbnNsYXRlM2Q6MH0sUj10IT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnpvb20mJiFQLEI9L21hdHJpeDM/ZD9cXHMqXFwoLiosXFxzKihbXFxkXFwuXFwtXSspXFx3Kj8sXFxzKihbXFxkXFwuXFwtXSspXFx3Kj8sXFxzKihbXFxkXFwuXFwtXSspXFx3Kj8sXFxzKihbXFxkXFwuXFwtXSspXFx3Kj8vaSxMPS9eKC0/W1xcZFxcLlxcLV0rKT9bXFx3XFxzXSosP1xccyooLT9bXFxkXFwuXFwtXSspP1tcXHdcXHNdKi9pLE89L3RyYW5zbGF0ZXg/JC9pLEg9Lyh6b29tfGZhZGV8ZXhwYW5kKShcXHcrKS8sTj0vKHpvb218ZmFkZXxleHBhbmQpLyxWPS9beHldJC9pLFU9W1wicGVyc3BlY3RpdmVcIixcInJvdGF0ZVwiLFwicm90YXRleFwiLFwicm90YXRleVwiLFwicm90YXRlelwiLFwicm90YXRlM2RcIixcInNjYWxlXCIsXCJzY2FsZXhcIixcInNjYWxleVwiLFwic2NhbGV6XCIsXCJzY2FsZTNkXCIsXCJza2V3XCIsXCJza2V3eFwiLFwic2tld3lcIixcInRyYW5zbGF0ZVwiLFwidHJhbnNsYXRleFwiLFwidHJhbnNsYXRleVwiLFwidHJhbnNsYXRlelwiLFwidHJhbnNsYXRlM2RcIixcIm1hdHJpeFwiLFwibWF0cml4M2RcIl0sVz1bXCJyb3RhdGVcIixcInNjYWxlXCIsXCJzY2FsZXhcIixcInNjYWxleVwiLFwic2tld1wiLFwic2tld3hcIixcInNrZXd5XCIsXCJ0cmFuc2xhdGVcIixcInRyYW5zbGF0ZXhcIixcInRyYW5zbGF0ZXlcIixcIm1hdHJpeFwiXSxqPXtyb3RhdGU6XCJkZWdcIixzY2FsZTpcIlwiLHNrZXc6XCJweFwiLHRyYW5zbGF0ZTpcInB4XCJ9LEc9UC5jc3MscT1NYXRoLnJvdW5kLCQ9XCJcIixZPVwicHhcIixLPVwibm9uZVwiLFE9XCJhdXRvXCIsWD1cIndpZHRoXCIsSj1cImhlaWdodFwiLFo9XCJoaWRkZW5cIixldD1cIm9yaWdpblwiLHR0PVwiYWJvcnRJZFwiLG50PVwib3ZlcmZsb3dcIixpdD1cInRyYW5zbGF0ZVwiLHJ0PVwicG9zaXRpb25cIixvdD1cImNvbXBsZXRlQ2FsbGJhY2tcIixhdD1HK1widHJhbnNpdGlvblwiLHN0PUcrXCJ0cmFuc2Zvcm1cIixsdD1HK1wiYmFja2ZhY2UtdmlzaWJpbGl0eVwiLGN0PUcrXCJwZXJzcGVjdGl2ZVwiLGR0PVwiMTUwMHB4XCIsdXQ9XCJwZXJzcGVjdGl2ZShcIitkdCtcIilcIixodD17bGVmdDp7cmV2ZXJzZTpcInJpZ2h0XCIscHJvcGVydHk6XCJsZWZ0XCIsdHJhbnNpdGlvbjpcInRyYW5zbGF0ZXhcIix2ZXJ0aWNhbDohMSxtb2RpZmllcjotMX0scmlnaHQ6e3JldmVyc2U6XCJsZWZ0XCIscHJvcGVydHk6XCJsZWZ0XCIsdHJhbnNpdGlvbjpcInRyYW5zbGF0ZXhcIix2ZXJ0aWNhbDohMSxtb2RpZmllcjoxfSxkb3duOntyZXZlcnNlOlwidXBcIixwcm9wZXJ0eTpcInRvcFwiLHRyYW5zaXRpb246XCJ0cmFuc2xhdGV5XCIsdmVydGljYWw6ITAsbW9kaWZpZXI6MX0sdXA6e3JldmVyc2U6XCJkb3duXCIscHJvcGVydHk6XCJ0b3BcIix0cmFuc2l0aW9uOlwidHJhbnNsYXRleVwiLHZlcnRpY2FsOiEwLG1vZGlmaWVyOi0xfSx0b3A6e3JldmVyc2U6XCJib3R0b21cIn0sYm90dG9tOntyZXZlcnNlOlwidG9wXCJ9LFwiaW5cIjp7cmV2ZXJzZTpcIm91dFwiLG1vZGlmaWVyOi0xfSxvdXQ6e3JldmVyc2U6XCJpblwiLG1vZGlmaWVyOjF9LHZlcnRpY2FsOntyZXZlcnNlOlwidmVydGljYWxcIn0saG9yaXpvbnRhbDp7cmV2ZXJzZTpcImhvcml6b250YWxcIn19O0MuZGlyZWN0aW9ucz1odCxEKGUuZm4se2tlbmRvU3RvcDpmdW5jdGlvbihlLHQpe3JldHVybiBJP1Muc3RvcFF1ZXVlKHRoaXMsZXx8ITEsdHx8ITEpOnRoaXMuc3RvcChlLHQpfX0pLFAmJiFJJiYoVChXLGZ1bmN0aW9uKG4saSl7ZS5mbltpXT1mdW5jdGlvbihuKXtpZih0PT09bilyZXR1cm4gcyh0aGlzLGkpO3ZhciByPWUodGhpcylbMF0sbz1pK1wiKFwiK24raltpLnJlcGxhY2UoVixcIlwiKV0rXCIpXCI7cmV0dXJuLTE9PXIuc3R5bGUuY3NzVGV4dC5pbmRleE9mKHN0KT9lKHRoaXMpLmNzcyhzdCxvKTpyLnN0eWxlLmNzc1RleHQ9ci5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoUmVnRXhwKGkrXCJcXFxcKC4qP1xcXFwpXCIsXCJpXCIpLG8pLHRoaXN9LGUuZnguc3RlcFtpXT1mdW5jdGlvbih0KXtlKHQuZWxlbSlbaV0odC5ub3cpfX0pLGg9ZS5meC5wcm90b3R5cGUuY3VyLGUuZngucHJvdG90eXBlLmN1cj1mdW5jdGlvbigpe3JldHVybi0xIT1XLmluZGV4T2YodGhpcy5wcm9wKT9wYXJzZUZsb2F0KGUodGhpcy5lbGVtKVt0aGlzLnByb3BdKCkpOmguYXBwbHkodGhpcyxhcmd1bWVudHMpfSksQy50b2dnbGVDbGFzcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdCYmKHQ9dC5zcGxpdChcIiBcIiksSSYmKG49RCh7ZXhjbHVzaXZlOlwiYWxsXCIsZHVyYXRpb246NDAwLGVhc2U6XCJlYXNlLW91dFwifSxuKSxlLmNzcyhhdCxuLmV4Y2x1c2l2ZStcIiBcIituLmR1cmF0aW9uK1wibXMgXCIrbi5lYXNlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5jc3MoYXQsXCJcIikuY3NzKEopfSxuLmR1cmF0aW9uKSksVCh0LGZ1bmN0aW9uKHQsbil7ZS50b2dnbGVDbGFzcyhuLGkpfSkpLGV9LEMucGFyc2VFZmZlY3RzPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/VChlLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlLGkpe3ZhciByPSFOLnRlc3QoaSksbz1pLnJlcGxhY2UoSCxmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQrXCI6XCIrbi50b0xvd2VyQ2FzZSgpfSksYT1vLnNwbGl0KFwiOlwiKSxzPWFbMV0sbD17fTthLmxlbmd0aD4xJiYobC5kaXJlY3Rpb249dCYmcj9odFtzXS5yZXZlcnNlOnMpLG5bYVswXV09bH0pOlQoZSxmdW5jdGlvbihlKXt2YXIgaT10aGlzLmRpcmVjdGlvbjtpJiZ0JiYhTi50ZXN0KGUpJiYodGhpcy5kaXJlY3Rpb249aHRbaV0ucmV2ZXJzZSksbltlXT10aGlzfSksbn0sSSYmRChTLHt0cmFuc2l0aW9uOmZ1bmN0aW9uKHQsbixpKXt2YXIgbyxzLGwsYyxkPTAsdT10LmRhdGEoXCJrZXlzXCIpfHxbXTtpPUQoe2R1cmF0aW9uOjIwMCxlYXNlOlwiZWFzZS1vdXRcIixjb21wbGV0ZTpudWxsLGV4Y2x1c2l2ZTpcImFsbFwifSxpKSxsPSExLGM9ZnVuY3Rpb24oKXtsfHwobD0hMCxzJiYoY2xlYXJUaW1lb3V0KHMpLHM9bnVsbCksdC5yZW1vdmVEYXRhKHR0KS5kZXF1ZXVlKCkuY3NzKGF0LFwiXCIpLmNzcyhhdCksaS5jb21wbGV0ZS5jYWxsKHQpKX0saS5kdXJhdGlvbj1lLmZ4P2UuZnguc3BlZWRzW2kuZHVyYXRpb25dfHxpLmR1cmF0aW9uOmkuZHVyYXRpb24sbz1hKHQsbiksZS5tZXJnZSh1LHIobykpLHQuZGF0YShcImtleXNcIixlLnVuaXF1ZSh1KSkuaGVpZ2h0KCksdC5jc3MoYXQsaS5leGNsdXNpdmUrXCIgXCIraS5kdXJhdGlvbitcIm1zIFwiK2kuZWFzZSkuY3NzKGF0KSx0LmNzcyhvKS5jc3Moc3QpLEkuZXZlbnQmJih0Lm9uZShJLmV2ZW50LGMpLDAhPT1pLmR1cmF0aW9uJiYoZD01MDApKSxzPXNldFRpbWVvdXQoYyxpLmR1cmF0aW9uK2QpLHQuZGF0YSh0dCxzKSx0LmRhdGEob3QsYylcbn0sc3RvcFF1ZXVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPWUuZGF0YShcImtleXNcIiksbz0hbiYmcixhPWUuZGF0YShvdCk7cmV0dXJuIG8mJihpPUMuZ2V0Q29tcHV0ZWRTdHlsZXMoZVswXSxyKSksYSYmYSgpLG8mJmUuY3NzKGkpLGUucmVtb3ZlRGF0YShcImtleXNcIikuc3RvcCh0KX19KSxwPUMuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmVsZW1lbnQ9ZSxuLmVmZmVjdHM9W10sbi5vcHRpb25zPXQsbi5yZXN0b3JlPVtdfSxydW46ZnVuY3Rpb24odCl7dmFyIG4saSxyLHMsbCxjLGQsdT10aGlzLGg9dC5sZW5ndGgscD11LmVsZW1lbnQsZj11Lm9wdGlvbnMsZz1lLkRlZmVycmVkKCksbT17fSx2PXt9O2Zvcih1LmVmZmVjdHM9dCxnLnRoZW4oZS5wcm94eSh1LFwiY29tcGxldGVcIikpLHAuZGF0YShcImFuaW1hdGluZ1wiLCEwKSxpPTA7aD5pO2krKylmb3Iobj10W2ldLG4uc2V0UmV2ZXJzZShmLnJldmVyc2UpLG4uc2V0T3B0aW9ucyhmKSx1LmFkZFJlc3RvcmVQcm9wZXJ0aWVzKG4ucmVzdG9yZSksbi5wcmVwYXJlKG0sdiksbD1uLmNoaWxkcmVuKCkscj0wLGM9bC5sZW5ndGg7Yz5yO3IrKylsW3JdLmR1cmF0aW9uKGYuZHVyYXRpb24pLnJ1bigpO2ZvcihkIGluIGYuZWZmZWN0cylEKHYsZi5lZmZlY3RzW2RdLnByb3BlcnRpZXMpO2ZvcihwLmlzKFwiOnZpc2libGVcIil8fEQobSx7ZGlzcGxheTpwLmRhdGEoXCJvbGRkaXNwbGF5XCIpfHxcImJsb2NrXCJ9KSxQJiYhZi5yZXNldCYmKHM9cC5kYXRhKFwidGFyZ2V0VHJhbnNmb3JtXCIpLHMmJihtPUQocyxtKSkpLG09YShwLG0pLFAmJiFJJiYobT1vKG0pKSxwLmNzcyhtKS5jc3Moc3QpLGk9MDtoPmk7aSsrKXRbaV0uc2V0dXAoKTtyZXR1cm4gZi5pbml0JiZmLmluaXQoKSxwLmRhdGEoXCJ0YXJnZXRUcmFuc2Zvcm1cIix2KSxTLmFuaW1hdGUocCx2LEQoe30sZix7Y29tcGxldGU6Zy5yZXNvbHZlfSkpLGcucHJvbWlzZSgpfSxzdG9wOmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLmtlbmRvU3RvcCghMCwhMCl9LGFkZFJlc3RvcmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXRoaXMuZWxlbWVudCxpPTAscj1lLmxlbmd0aDtyPmk7aSsrKXQ9ZVtpXSx0aGlzLnJlc3RvcmUucHVzaCh0KSxuLmRhdGEodCl8fG4uZGF0YSh0LG4uY3NzKHQpKX0scmVzdG9yZUNhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5lbGVtZW50O2ZvcihlPTAsdD10aGlzLnJlc3RvcmUubGVuZ3RoO3Q+ZTtlKyspbj10aGlzLnJlc3RvcmVbZV0saS5jc3MobixpLmRhdGEobikpfSxjb21wbGV0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj0wLGk9dC5lbGVtZW50LHI9dC5vcHRpb25zLG89dC5lZmZlY3RzLGE9by5sZW5ndGg7Zm9yKGkucmVtb3ZlRGF0YShcImFuaW1hdGluZ1wiKS5kZXF1ZXVlKCksci5oaWRlJiZpLmRhdGEoXCJvbGRkaXNwbGF5XCIsaS5jc3MoXCJkaXNwbGF5XCIpKS5oaWRlKCksdGhpcy5yZXN0b3JlQ2FsbGJhY2soKSxSJiYhUCYmc2V0VGltZW91dChlLnByb3h5KHRoaXMsXCJyZXN0b3JlQ2FsbGJhY2tcIiksMCk7YT5uO24rKylvW25dLnRlYXJkb3duKCk7ci5jb21wbGV0ZUNhbGxiYWNrJiZyLmNvbXBsZXRlQ2FsbGJhY2soaSl9fSksUy5wcm9taXNlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W10sYT1uZXcgcChlLHQpLHM9Qy5wYXJzZUVmZmVjdHModC5lZmZlY3RzKTt0LmVmZmVjdHM9cztmb3IociBpbiBzKW49U1tsKHIpXSxuJiYoaT1uZXcgbihlLHNbcl0uZGlyZWN0aW9uKSxvLnB1c2goaSkpO29bMF0/YS5ydW4obyk6KGUuaXMoXCI6dmlzaWJsZVwiKXx8ZS5jc3Moe2Rpc3BsYXk6ZS5kYXRhKFwib2xkZGlzcGxheVwiKXx8XCJibG9ja1wifSkuY3NzKFwiZGlzcGxheVwiKSx0LmluaXQmJnQuaW5pdCgpLGUuZGVxdWV1ZSgpLGEuY29tcGxldGUoKSl9LEQoUyx7YW5pbWF0ZTpmdW5jdGlvbihuLHIsYSl7dmFyIHM9YS50cmFuc2l0aW9uIT09ITE7ZGVsZXRlIGEudHJhbnNpdGlvbixJJiZcInRyYW5zaXRpb25cImluIFMmJnM/Uy50cmFuc2l0aW9uKG4scixhKTpQP24uYW5pbWF0ZShvKHIpLHtxdWV1ZTohMSxzaG93OiExLGhpZGU6ITEsZHVyYXRpb246YS5kdXJhdGlvbixjb21wbGV0ZTphLmNvbXBsZXRlfSk6bi5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxvPXt9O1QoVSxmdW5jdGlvbihlLGEpe3ZhciBzLGwsYyxkLHUsaCxwLGY9cj9yW2FdK1wiIFwiOm51bGw7ZiYmKGw9cixhIGluIHomJnJbYV0hPT10PyhzPWYubWF0Y2goTCksUCYmRChsLHtzY2FsZTorc1swXX0pKTphIGluIEYmJnJbYV0hPT10JiYoYz1uLmNzcyhydCksZD1cImFic29sdXRlXCI9PWN8fFwiZml4ZWRcIj09YyxuLmRhdGEoaXQpfHwoZD9uLmRhdGEoaXQse3RvcDppKG4sXCJ0b3BcIil8fDAsbGVmdDppKG4sXCJsZWZ0XCIpfHwwLGJvdHRvbTppKG4sXCJib3R0b21cIikscmlnaHQ6aShuLFwicmlnaHRcIil9KTpuLmRhdGEoaXQse3RvcDppKG4sXCJtYXJnaW5Ub3BcIil8fDAsbGVmdDppKG4sXCJtYXJnaW5MZWZ0XCIpfHwwfSkpLHU9bi5kYXRhKGl0KSxzPWYubWF0Y2goTCkscyYmKGg9YT09aXQrXCJ5XCI/MDorc1sxXSxwPWE9PWl0K1wieVwiPytzWzFdOitzWzJdLGQ/KGlzTmFOKHUucmlnaHQpP2lzTmFOKGgpfHxEKGwse2xlZnQ6dS5sZWZ0K2h9KTppc05hTihoKXx8RChsLHtyaWdodDp1LnJpZ2h0LWh9KSxpc05hTih1LmJvdHRvbSk/aXNOYU4ocCl8fEQobCx7dG9wOnUudG9wK3B9KTppc05hTihwKXx8RChsLHtib3R0b206dS5ib3R0b20tcH0pKTooaXNOYU4oaCl8fEQobCx7bWFyZ2luTGVmdDp1LmxlZnQraH0pLGlzTmFOKHApfHxEKGwse21hcmdpblRvcDp1LnRvcCtwfSkpKSksIVAmJlwic2NhbGVcIiE9YSYmYSBpbiBsJiZkZWxldGUgbFthXSxsJiZEKG8sbCkpfSksTS5tc2llJiZkZWxldGUgby5zY2FsZSxuLmFuaW1hdGUobyx7cXVldWU6ITEsc2hvdzohMSxoaWRlOiExLGR1cmF0aW9uOmEuZHVyYXRpb24sY29tcGxldGU6YS5jb21wbGV0ZX0pfSl9fSksUy5hbmltYXRlZFByb21pc2U9Uy5wcm9taXNlLGY9Qy5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uZWxlbWVudD1lLG4uX2RpcmVjdGlvbj10LG4ub3B0aW9ucz17fSxuLl9hZGRpdGlvbmFsRWZmZWN0cz1bXSxuLnJlc3RvcmV8fChuLnJlc3RvcmU9W10pfSxyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2U9ITAsdGhpcy5ydW4oKX0scGxheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXZlcnNlPSExLHRoaXMucnVuKCl9LGFkZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWRkaXRpb25hbEVmZmVjdHMucHVzaChlKSx0aGlzfSxkaXJlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RpcmVjdGlvbj1lLHRoaXN9LGR1cmF0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kdXJhdGlvbj1lLHRoaXN9LGNvbXBvc2l0ZVJ1bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgcChlLmVsZW1lbnQse3JldmVyc2U6ZS5fcmV2ZXJzZSxkdXJhdGlvbjplLl9kdXJhdGlvbn0pLG49ZS5fYWRkaXRpb25hbEVmZmVjdHMuY29uY2F0KFtlXSk7cmV0dXJuIHQucnVuKG4pfSxydW46ZnVuY3Rpb24oKXtpZih0aGlzLl9hZGRpdGlvbmFsRWZmZWN0cyYmdGhpcy5fYWRkaXRpb25hbEVmZmVjdHNbMF0pcmV0dXJuIHRoaXMuY29tcG9zaXRlUnVuKCk7dmFyIHQsbixpPXRoaXMscj1pLmVsZW1lbnQscz0wLGw9aS5yZXN0b3JlLGM9bC5sZW5ndGgsZD1lLkRlZmVycmVkKCksdT17fSxoPXt9LHA9aS5jaGlsZHJlbigpLGY9cC5sZW5ndGg7Zm9yKGQudGhlbihlLnByb3h5KGksXCJfY29tcGxldGVcIikpLHIuZGF0YShcImFuaW1hdGluZ1wiLCEwKSxzPTA7Yz5zO3MrKyl0PWxbc10sci5kYXRhKHQpfHxyLmRhdGEodCxyLmNzcyh0KSk7Zm9yKHM9MDtmPnM7cysrKXBbc10uZHVyYXRpb24oaS5fZHVyYXRpb24pLnJ1bigpO3JldHVybiBpLnByZXBhcmUodSxoKSxyLmlzKFwiOnZpc2libGVcIil8fEQodSx7ZGlzcGxheTpyLmRhdGEoXCJvbGRkaXNwbGF5XCIpfHxcImJsb2NrXCJ9KSxQJiYobj1yLmRhdGEoXCJ0YXJnZXRUcmFuc2Zvcm1cIiksbiYmKHU9RChuLHUpKSksdT1hKHIsdSksUCYmIUkmJih1PW8odSkpLHIuY3NzKHUpLmNzcyhzdCksaS5zZXR1cCgpLHIuZGF0YShcInRhcmdldFRyYW5zZm9ybVwiLGgpLFMuYW5pbWF0ZShyLGgse2R1cmF0aW9uOmkuX2R1cmF0aW9uLGNvbXBsZXRlOmQucmVzb2x2ZX0pLGQucHJvbWlzZSgpfSxzdG9wOmZ1bmN0aW9uKCl7dmFyIHQ9MCxuPXRoaXMuY2hpbGRyZW4oKSxpPW4ubGVuZ3RoO2Zvcih0PTA7aT50O3QrKyluW3RdLnN0b3AoKTtyZXR1cm4gZSh0aGlzLmVsZW1lbnQpLmtlbmRvU3RvcCghMCwhMCksdGhpc30scmVzdG9yZUNhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5lbGVtZW50O2ZvcihlPTAsdD10aGlzLnJlc3RvcmUubGVuZ3RoO3Q+ZTtlKyspbj10aGlzLnJlc3RvcmVbZV0saS5jc3MobixpLmRhdGEobikpfSxfY29tcGxldGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50O24ucmVtb3ZlRGF0YShcImFuaW1hdGluZ1wiKS5kZXF1ZXVlKCksdC5yZXN0b3JlQ2FsbGJhY2soKSx0LnNob3VsZEhpZGUoKSYmbi5kYXRhKFwib2xkZGlzcGxheVwiLG4uY3NzKFwiZGlzcGxheVwiKSkuaGlkZSgpLFImJiFQJiZzZXRUaW1lb3V0KGUucHJveHkodCxcInJlc3RvcmVDYWxsYmFja1wiKSwwKSx0LnRlYXJkb3duKCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7RCghMCx0aGlzLm9wdGlvbnMsZSl9LGNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuW119LHNob3VsZEhpZGU6ZS5ub29wLHNldHVwOmUubm9vcCxwcmVwYXJlOmUubm9vcCx0ZWFyZG93bjplLm5vb3AsZGlyZWN0aW9uczpbXSxzZXRSZXZlcnNlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZXZlcnNlPWUsdGhpc319KSxnPVtcImxlZnRcIixcInJpZ2h0XCIsXCJ1cFwiLFwiZG93blwiXSxtPVtcImluXCIsXCJvdXRcIl0sYyhcInNsaWRlSW5cIix7ZGlyZWN0aW9uczpnLGRpdmlzb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5kaXZpc29yPWUsdGhpc30scHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPWkuZWxlbWVudCxvPWh0W2kuX2RpcmVjdGlvbl0sYT0tby5tb2RpZmllciooby52ZXJ0aWNhbD9yLm91dGVySGVpZ2h0KCk6ci5vdXRlcldpZHRoKCkpLHM9YS8oaS5vcHRpb25zJiZpLm9wdGlvbnMuZGl2aXNvcnx8MSkrWSxsPVwiMHB4XCI7aS5fcmV2ZXJzZSYmKG49ZSxlPXQsdD1uKSxQPyhlW28udHJhbnNpdGlvbl09cyx0W28udHJhbnNpdGlvbl09bCk6KGVbby5wcm9wZXJ0eV09cyx0W28ucHJvcGVydHldPWwpfX0pLGMoXCJ0aWxlXCIse2RpcmVjdGlvbnM6Zyxpbml0OmZ1bmN0aW9uKGUsdCxuKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMub3B0aW9ucz17cHJldmlvdXM6bn19LHByZXZpb3VzRGl2aXNvcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLnByZXZpb3VzRGl2aXNvcj1lLHRoaXN9LGNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3JldmVyc2Usbj1lLm9wdGlvbnMucHJldmlvdXMsaT1lLm9wdGlvbnMucHJldmlvdXNEaXZpc29yfHwxLHI9ZS5fZGlyZWN0aW9uLG89W0MuZngoZS5lbGVtZW50KS5zbGlkZUluKHIpLnNldFJldmVyc2UodCldO3JldHVybiBuJiZvLnB1c2goQy5meChuKS5zbGlkZUluKGh0W3JdLnJldmVyc2UpLmRpdmlzb3IoaSkuc2V0UmV2ZXJzZSghdCkpLG99fSksZChcImZhZGVcIixcIm9wYWNpdHlcIiwxLDApLGQoXCJ6b29tXCIsXCJzY2FsZVwiLDEsLjAxKSxjKFwic2xpZGVNYXJnaW5cIix7cHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPWkuZWxlbWVudCxvPWkub3B0aW9ucyxhPXIuZGF0YShldCkscz1vLm9mZnNldCxsPWkuX3JldmVyc2U7bHx8bnVsbCE9PWF8fHIuZGF0YShldCxwYXJzZUZsb2F0KHIuY3NzKFwibWFyZ2luLVwiK28uYXhpcykpKSxuPXIuZGF0YShldCl8fDAsdFtcIm1hcmdpbi1cIitvLmF4aXNdPWw/bjpuK3N9fSksYyhcInNsaWRlVG9cIix7cHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmVsZW1lbnQscj1uLm9wdGlvbnMsbz1yLm9mZnNldC5zcGxpdChcIixcIiksYT1uLl9yZXZlcnNlO1A/KHQudHJhbnNsYXRleD1hPzA6b1swXSx0LnRyYW5zbGF0ZXk9YT8wOm9bMV0pOih0LmxlZnQ9YT8wOm9bMF0sdC50b3A9YT8wOm9bMV0pLGkuY3NzKFwibGVmdFwiKX19KSxjKFwiZXhwYW5kXCIse2RpcmVjdGlvbnM6W1wiaG9yaXpvbnRhbFwiLFwidmVydGljYWxcIl0scmVzdG9yZTpbbnRdLHByZXBhcmU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5lbGVtZW50LG89aS5vcHRpb25zLGE9aS5fcmV2ZXJzZSxzPVwidmVydGljYWxcIj09PWkuX2RpcmVjdGlvbj9KOlgsbD1yWzBdLnN0eWxlW3NdLGM9ci5kYXRhKHMpLGQ9cGFyc2VGbG9hdChjfHxsKSx1PXEoci5jc3MocyxRKVtzXSgpKTtlLm92ZXJmbG93PVosZD1vJiZvLnJlc2V0P3V8fGQ6ZHx8dSxuW3NdPShhPzA6ZCkrWSxlW3NdPShhP2Q6MCkrWSxjPT09dCYmci5kYXRhKHMsbCl9LHNob3VsZEhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmV2ZXJzZX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49XCJ2ZXJ0aWNhbFwiPT09ZS5fZGlyZWN0aW9uP0o6WCxpPXQuZGF0YShuKTsoaT09UXx8aT09PSQpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jc3MobixRKS5jc3Mobil9LDApfX0pLHY9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixtYXJnaW5MZWZ0OjAsbWFyZ2luVG9wOjAsc2NhbGU6MX0sYyhcInRyYW5zZmVyXCIse2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQ9ZSx0aGlzLm9wdGlvbnM9e3RhcmdldDp0fSx0aGlzLnJlc3RvcmU9W119LHNldHVwOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfSxwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZWxlbWVudCxyPVMuYm94KGkpLG89Uy5ib3gobi5vcHRpb25zLnRhcmdldCksYT1zKGksXCJzY2FsZVwiKSxsPVMuZmlsbFNjYWxlKG8sciksYz1TLnRyYW5zZm9ybU9yaWdpbihvLHIpO0QoZSx2KSx0LnNjYWxlPTEsaS5jc3Moc3QsXCJzY2FsZSgxKVwiKS5jc3Moc3QpLGkuY3NzKHN0LFwic2NhbGUoXCIrYStcIilcIiksZS50b3A9ci50b3AsZS5sZWZ0PXIubGVmdCxlLnRyYW5zZm9ybU9yaWdpbj1jLngrWStcIiBcIitjLnkrWSxuLl9yZXZlcnNlP2Uuc2NhbGU9bDp0LnNjYWxlPWx9fSksXz17dG9wOlwicmVjdChhdXRvIGF1dG8gJHNpemUgYXV0bylcIixib3R0b206XCJyZWN0KCRzaXplIGF1dG8gYXV0byBhdXRvKVwiLGxlZnQ6XCJyZWN0KGF1dG8gJHNpemUgYXV0byBhdXRvKVwiLHJpZ2h0OlwicmVjdChhdXRvIGF1dG8gYXV0byAkc2l6ZSlcIn0seT17dG9wOntzdGFydDpcInJvdGF0ZXgoMGRlZylcIixlbmQ6XCJyb3RhdGV4KDE4MGRlZylcIn0sYm90dG9tOntzdGFydDpcInJvdGF0ZXgoLTE4MGRlZylcIixlbmQ6XCJyb3RhdGV4KDBkZWcpXCJ9LGxlZnQ6e3N0YXJ0Olwicm90YXRleSgwZGVnKVwiLGVuZDpcInJvdGF0ZXkoLTE4MGRlZylcIn0scmlnaHQ6e3N0YXJ0Olwicm90YXRleSgxODBkZWcpXCIsZW5kOlwicm90YXRleSgwZGVnKVwifX0sYyhcInR1cm5pbmdQYWdlXCIse2RpcmVjdGlvbnM6Zyxpbml0OmZ1bmN0aW9uKGUsdCxuKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX2NvbnRhaW5lcj1ufSxwcmVwYXJlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uX3JldmVyc2Uscj1pP2h0W24uX2RpcmVjdGlvbl0ucmV2ZXJzZTpuLl9kaXJlY3Rpb24sbz15W3JdO2UuekluZGV4PTEsbi5fY2xpcEluSGFsZiYmKGUuY2xpcD11KG4uX2NvbnRhaW5lcixDLmRpcmVjdGlvbnNbcl0ucmV2ZXJzZSkpLGVbbHRdPVosdFtzdF09dXQrKGk/by5zdGFydDpvLmVuZCksZVtzdF09dXQrKGk/by5lbmQ6by5zdGFydCl9LHNldHVwOmZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLmFwcGVuZCh0aGlzLmVsZW1lbnQpfSxmYWNlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9mYWNlPWUsdGhpc30sc2hvdWxkSGlkZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9yZXZlcnNlLG49ZS5fZmFjZTtyZXR1cm4gdCYmIW58fCF0JiZufSxjbGlwSW5IYWxmOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jbGlwSW5IYWxmPWUsdGhpc30sdGVtcG9yYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInRlbXAtcGFnZVwiKSx0aGlzfX0pLGMoXCJzdGF0aWNQYWdlXCIse2RpcmVjdGlvbnM6Zyxpbml0OmZ1bmN0aW9uKGUsdCxuKXtmLnByb3RvdHlwZS5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX2NvbnRhaW5lcj1ufSxyZXN0b3JlOltcImNsaXBcIl0scHJlcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLl9yZXZlcnNlP2h0W24uX2RpcmVjdGlvbl0ucmV2ZXJzZTpuLl9kaXJlY3Rpb247ZS5jbGlwPXUobi5fY29udGFpbmVyLGkpLGUub3BhY2l0eT0uOTk5LHQub3BhY2l0eT0xfSxzaG91bGRIaWRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3JldmVyc2Usbj1lLl9mYWNlO3JldHVybiB0JiYhbnx8IXQmJm59LGZhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ZhY2U9ZSx0aGlzfX0pLGMoXCJwYWdldHVyblwiLHtkaXJlY3Rpb25zOltcImhvcml6b250YWxcIixcInZlcnRpY2FsXCJdLGluaXQ6ZnVuY3Rpb24oZSx0LG4saSl7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLm9wdGlvbnM9e30sdGhpcy5vcHRpb25zLmZhY2U9bix0aGlzLm9wdGlvbnMuYmFjaz1pfSxjaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPVwiaG9yaXpvbnRhbFwiPT09dC5fZGlyZWN0aW9uP1wibGVmdFwiOlwidG9wXCIscj1DLmRpcmVjdGlvbnNbaV0ucmV2ZXJzZSxvPXQuX3JldmVyc2UsYT1uLmZhY2UuY2xvbmUoITApLnJlbW92ZUF0dHIoXCJpZFwiKSxzPW4uYmFjay5jbG9uZSghMCkucmVtb3ZlQXR0cihcImlkXCIpLGw9dC5lbGVtZW50O3JldHVybiBvJiYoZT1pLGk9cixyPWUpLFtDLmZ4KG4uZmFjZSkuc3RhdGljUGFnZShpLGwpLmZhY2UoITApLnNldFJldmVyc2UobyksQy5meChuLmJhY2spLnN0YXRpY1BhZ2UocixsKS5zZXRSZXZlcnNlKG8pLEMuZngoYSkudHVybmluZ1BhZ2UoaSxsKS5mYWNlKCEwKS5jbGlwSW5IYWxmKCEwKS50ZW1wb3JhcnkoKS5zZXRSZXZlcnNlKG8pLEMuZngocykudHVybmluZ1BhZ2UocixsKS5jbGlwSW5IYWxmKCEwKS50ZW1wb3JhcnkoKS5zZXRSZXZlcnNlKG8pXX0scHJlcGFyZTpmdW5jdGlvbihlLHQpe2VbY3RdPWR0LGUudHJhbnNmb3JtU3R5bGU9XCJwcmVzZXJ2ZS0zZFwiLGUub3BhY2l0eT0uOTk5LHQub3BhY2l0eT0xfSx0ZWFyZG93bjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5maW5kKFwiLnRlbXAtcGFnZVwiKS5yZW1vdmUoKX19KSxjKFwiZmxpcFwiLHtkaXJlY3Rpb25zOltcImhvcml6b250YWxcIixcInZlcnRpY2FsXCJdLGluaXQ6ZnVuY3Rpb24oZSx0LG4saSl7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLm9wdGlvbnM9e30sdGhpcy5vcHRpb25zLmZhY2U9bix0aGlzLm9wdGlvbnMuYmFjaz1pfSxjaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPVwiaG9yaXpvbnRhbFwiPT09dC5fZGlyZWN0aW9uP1wibGVmdFwiOlwidG9wXCIscj1DLmRpcmVjdGlvbnNbaV0ucmV2ZXJzZSxvPXQuX3JldmVyc2UsYT10LmVsZW1lbnQ7cmV0dXJuIG8mJihlPWksaT1yLHI9ZSksW0MuZngobi5mYWNlKS50dXJuaW5nUGFnZShpLGEpLmZhY2UoITApLnNldFJldmVyc2UobyksQy5meChuLmJhY2spLnR1cm5pbmdQYWdlKHIsYSkuc2V0UmV2ZXJzZShvKV19LHByZXBhcmU6ZnVuY3Rpb24oZSl7ZVtjdF09ZHQsZS50cmFuc2Zvcm1TdHlsZT1cInByZXNlcnZlLTNkXCJ9fSksdz0hRS5tb2JpbGVPUy5hbmRyb2lkLGI9XCIua20tdG91Y2gtc2Nyb2xsYmFyLCAua20tYWN0aW9uc2hlZXQtd3JhcHBlclwiLGMoXCJyZXBsYWNlXCIse19iZWZvcmU6ZS5ub29wLF9hZnRlcjplLm5vb3AsaW5pdDpmdW5jdGlvbih0LG4saSl7Zi5wcm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsdCksdGhpcy5fcHJldmlvdXM9ZShuKSx0aGlzLl90cmFuc2l0aW9uQ2xhc3M9aX0sZHVyYXRpb246ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIlRoZSByZXBsYWNlIGVmZmVjdCBkb2VzIG5vdCBzdXBwb3J0IGR1cmF0aW9uIHNldHRpbmc7IHRoZSBlZmZlY3QgZHVyYXRpb24gbWF5IGJlIGN1c3RvbWl6ZWQgdGhyb3VnaCB0aGUgdHJhbnNpdGlvbiBjbGFzcyBydWxlXCIpfSxiZWZvcmVUcmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9iZWZvcmU9ZSx0aGlzfSxhZnRlclRyYW5zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FmdGVyPWUsdGhpc30sX2JvdGg6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLmFkZCh0aGlzLl9lbGVtZW50KS5hZGQodGhpcy5fcHJldmlvdXMpfSxfY29udGFpbmVyQ2xhc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9kaXJlY3Rpb24sdD1cImstZnggay1meC1zdGFydCBrLWZ4LVwiK3RoaXMuX3RyYW5zaXRpb25DbGFzcztyZXR1cm4gZSYmKHQrPVwiIGstZngtXCIrZSksdGhpcy5fcmV2ZXJzZSYmKHQrPVwiIGstZngtcmV2ZXJzZVwiKSx0fSxjb21wbGV0ZTpmdW5jdGlvbih0KXtpZighKCF0aGlzLmRlZmVycmVkfHx0JiZlKHQudGFyZ2V0KS5pcyhiKSkpe3ZhciBuPXRoaXMuY29udGFpbmVyO24ucmVtb3ZlQ2xhc3MoXCJrLWZ4LWVuZFwiKS5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXJDbGFzcygpKS5vZmYoSS5ldmVudCx0aGlzLmNvbXBsZXRlUHJveHkpLHRoaXMuX3ByZXZpb3VzLmhpZGUoKS5yZW1vdmVDbGFzcyhcImstZngtY3VycmVudFwiKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJrLWZ4LW5leHRcIiksdyYmbi5jc3MobnQsXCJcIiksdGhpcy5pc0Fic29sdXRlfHx0aGlzLl9ib3RoKCkuY3NzKHJ0LFwiXCIpLHRoaXMuZGVmZXJyZWQucmVzb2x2ZSgpLGRlbGV0ZSB0aGlzLmRlZmVycmVkfX0scnVuOmZ1bmN0aW9uKCl7aWYodGhpcy5fYWRkaXRpb25hbEVmZmVjdHMmJnRoaXMuX2FkZGl0aW9uYWxFZmZlY3RzWzBdKXJldHVybiB0aGlzLmNvbXBvc2l0ZVJ1bigpO3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudCxyPW4uX3ByZXZpb3VzLG89aS5wYXJlbnRzKCkuZmlsdGVyKHIucGFyZW50cygpKS5maXJzdCgpLGE9bi5fYm90aCgpLHM9ZS5EZWZlcnJlZCgpLGw9aS5jc3MocnQpO3JldHVybiBvLmxlbmd0aHx8KG89aS5wYXJlbnQoKSksdGhpcy5jb250YWluZXI9byx0aGlzLmRlZmVycmVkPXMsdGhpcy5pc0Fic29sdXRlPVwiYWJzb2x1dGVcIj09bCx0aGlzLmlzQWJzb2x1dGV8fGEuY3NzKHJ0LFwiYWJzb2x1dGVcIiksdyYmKHQ9by5jc3MobnQpLG8uY3NzKG50LFwiaGlkZGVuXCIpKSxJPyhpLmFkZENsYXNzKFwiay1meC1oaWRkZW5cIiksby5hZGRDbGFzcyh0aGlzLl9jb250YWluZXJDbGFzcygpKSx0aGlzLmNvbXBsZXRlUHJveHk9ZS5wcm94eSh0aGlzLFwiY29tcGxldGVcIiksby5vbihJLmV2ZW50LHRoaXMuY29tcGxldGVQcm94eSksQy5hbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2kucmVtb3ZlQ2xhc3MoXCJrLWZ4LWhpZGRlblwiKS5hZGRDbGFzcyhcImstZngtbmV4dFwiKSxyLmNzcyhcImRpc3BsYXlcIixcIlwiKS5hZGRDbGFzcyhcImstZngtY3VycmVudFwiKSxuLl9iZWZvcmUocixpKSxDLmFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7by5yZW1vdmVDbGFzcyhcImstZngtc3RhcnRcIikuYWRkQ2xhc3MoXCJrLWZ4LWVuZFwiKSxuLl9hZnRlcihyLGkpfSl9KSk6dGhpcy5jb21wbGV0ZSgpLHMucHJvbWlzZSgpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZSgpfX0pLGs9Qy5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3RpY2tQcm94eT1BKGUuX3RpY2ssZSksZS5fc3RhcnRlZD0hMX0sdGljazplLm5vb3AsZG9uZTplLm5vb3Asb25FbmQ6ZS5ub29wLG9uQ2FuY2VsOmUubm9vcCxzdGFydDpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZCgpJiYodGhpcy5kb25lKCk/dGhpcy5vbkVuZCgpOih0aGlzLl9zdGFydGVkPSEwLEMuYW5pbWF0aW9uRnJhbWUodGhpcy5fdGlja1Byb3h5KSkpfSxlbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5vbkNhbmNlbCgpfSxfdGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fc3RhcnRlZCYmKGUudGljaygpLGUuZG9uZSgpPyhlLl9zdGFydGVkPSExLGUub25FbmQoKSk6Qy5hbmltYXRpb25GcmFtZShlLl90aWNrUHJveHkpKX19KSx4PWsuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7RCh0LGUpLGsuZm4uaW5pdC5jYWxsKHQpfSxkb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGltZVBhc3NlZCgpPj10aGlzLmR1cmF0aW9ufSx0aW1lUGFzc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWluKHRoaXMuZHVyYXRpb24sbmV3IERhdGUtdGhpcy5zdGFydERhdGUpfSxtb3ZlVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQubW92YWJsZTt0LmluaXRpYWw9blt0LmF4aXNdLHQuZGVsdGE9ZS5sb2NhdGlvbi10LmluaXRpYWwsdC5kdXJhdGlvbj1cIm51bWJlclwiPT10eXBlb2YgZS5kdXJhdGlvbj9lLmR1cmF0aW9uOjMwMCx0LnRpY2s9dC5fZWFzZVByb3h5KGUuZWFzZSksdC5zdGFydERhdGU9bmV3IERhdGUsdC5zdGFydCgpfSxfZWFzZVByb3h5OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7dC5tb3ZhYmxlLm1vdmVBeGlzKHQuYXhpcyxlKHQudGltZVBhc3NlZCgpLHQuaW5pdGlhbCx0LmRlbHRhLHQuZHVyYXRpb24pKX19fSksRCh4LHtlYXNlT3V0RXhwbzpmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gZT09aT90K246biooLU1hdGgucG93KDIsLTEwKmUvaSkrMSkrdH0sZWFzZU91dEJhY2s6ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gcj0xLjcwMTU4LG4qKChlPWUvaS0xKSplKigocisxKSplK3IpKzEpK3R9fSksUy5BbmltYXRpb249ayxTLlRyYW5zaXRpb249eCxTLmNyZWF0ZUVmZmVjdD1jLFMuYm94PWZ1bmN0aW9uKHQpe3Q9ZSh0KTt2YXIgbj10Lm9mZnNldCgpO3JldHVybiBuLndpZHRoPXQub3V0ZXJXaWR0aCgpLG4uaGVpZ2h0PXQub3V0ZXJIZWlnaHQoKSxufSxTLnRyYW5zZm9ybU9yaWdpbj1mdW5jdGlvbihlLHQpe3ZhciBuPShlLmxlZnQtdC5sZWZ0KSp0LndpZHRoLyh0LndpZHRoLWUud2lkdGgpLGk9KGUudG9wLXQudG9wKSp0LmhlaWdodC8odC5oZWlnaHQtZS5oZWlnaHQpO3JldHVybnt4OmlzTmFOKG4pPzA6bix5OmlzTmFOKGkpPzA6aX19LFMuZmlsbFNjYWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1hdGgubWluKGUud2lkdGgvdC53aWR0aCxlLmhlaWdodC90LmhlaWdodCl9LFMuZml0U2NhbGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5tYXgoZS53aWR0aC90LndpZHRoLGUuaGVpZ2h0L3QuaGVpZ2h0KX19KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7aWYoIWUpcmV0dXJue307dmFyIHQ9ZS5tYXRjaCh2KXx8W107cmV0dXJue3R5cGU6dFsxXSxkaXJlY3Rpb246dFszXSxyZXZlcnNlOlwicmV2ZXJzZVwiPT09dFs1XX19dmFyIG49d2luZG93LmtlbmRvLGk9bi5PYnNlcnZhYmxlLHI9XCJTQ1JJUFRcIixvPVwiaW5pdFwiLGE9XCJzaG93XCIscz1cImhpZGVcIixsPVwidHJhbnNpdGlvblN0YXJ0XCIsYz1cInRyYW5zaXRpb25FbmRcIixkPVwiYXR0YWNoXCIsdT1cImRldGFjaFwiLGg9L3VucmVjb2duaXplZCBleHByZXNzaW9uLyxwPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0PXR8fHt9LGkuZm4uaW5pdC5jYWxsKHIpLHIuY29udGVudD1lLHIuaWQ9bi5ndWlkKCksci50YWdOYW1lPXQudGFnTmFtZXx8XCJkaXZcIixyLm1vZGVsPXQubW9kZWwsci5fd3JhcD10LndyYXAhPT0hMSx0aGlzLl9ldmFsVGVtcGxhdGU9dC5ldmFsVGVtcGxhdGV8fCExLHIuX2ZyYWdtZW50cz17fSxyLmJpbmQoW28sYSxzLGwsY10sdCl9LHJlbmRlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLHI9IWkuZWxlbWVudDtyZXR1cm4gciYmKGkuZWxlbWVudD1pLl9jcmVhdGVFbGVtZW50KCkpLHQmJmUodCkuYXBwZW5kKGkuZWxlbWVudCksciYmKG4uYmluZChpLmVsZW1lbnQsaS5tb2RlbCksaS50cmlnZ2VyKG8pKSx0JiYoaS5fZWFjaEZyYWdtZW50KGQpLGkudHJpZ2dlcihhKSksaS5lbGVtZW50fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzKX0sdHJpZ2dlckJlZm9yZVNob3c6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sc2hvd1N0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmNzcyhcImRpc3BsYXlcIixcIlwiKX0sc2hvd0VuZDpmdW5jdGlvbigpe30saGlkZVN0YXJ0OmZ1bmN0aW9uKCl7fSxoaWRlRW5kOmZ1bmN0aW9uKCl7dGhpcy5oaWRlKCl9LGJlZm9yZVRyYW5zaXRpb246ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGwse3R5cGU6ZX0pfSxhZnRlclRyYW5zaXRpb246ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGMse3R5cGU6ZX0pfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5fZWFjaEZyYWdtZW50KHUpLHRoaXMuZWxlbWVudC5kZXRhY2goKSx0aGlzLnRyaWdnZXIocyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQ7ZSYmKG4udW5iaW5kKGUpLG4uZGVzdHJveShlKSxlLnJlbW92ZSgpKX0sZnJhZ21lbnRzOmZ1bmN0aW9uKHQpe2UuZXh0ZW5kKHRoaXMuX2ZyYWdtZW50cyx0KX0sX2VhY2hGcmFnbWVudDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5fZnJhZ21lbnRzKXRoaXMuX2ZyYWdtZW50c1t0XVtlXSh0aGlzLHQpfSxfY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3ZhciB0LGksbz10aGlzLGE9XCI8XCIrby50YWdOYW1lK1wiIC8+XCI7dHJ5e2k9ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvLmNvbnRlbnQpfHxvLmNvbnRlbnQpLGlbMF0udGFnTmFtZT09PXImJihpPWkuaHRtbCgpKX1jYXRjaChzKXtoLnRlc3Qocy5tZXNzYWdlKSYmKGk9by5jb250ZW50KX1yZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgaT8oaT1pLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIiksby5fZXZhbFRlbXBsYXRlJiYoaT1uLnRlbXBsYXRlKGkpKG8ubW9kZWx8fHt9KSksdD1lKGEpLmFwcGVuZChpKSxvLl93cmFwfHwodD10LmNvbnRlbnRzKCkpKToodD1pLG8uX3dyYXAmJih0PXQud3JhcEFsbChhKS5wYXJlbnQoKSkpLHR9fSksZj1uLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtlLmV4dGVuZCh0aGlzLHtlbGVtZW50OnQuZWxlbWVudC5jbG9uZSghMCksdHJhbnNpdGlvbjp0LnRyYW5zaXRpb24saWQ6dC5pZH0pLHQuZWxlbWVudC5wYXJlbnQoKS5hcHBlbmQodGhpcy5lbGVtZW50KX0saGlkZVN0YXJ0OmUubm9vcCxoaWRlRW5kOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZSgpfSxiZWZvcmVUcmFuc2l0aW9uOmUubm9vcCxhZnRlclRyYW5zaXRpb246ZS5ub29wfSksZz1wLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3AuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLmNvbnRhaW5lcnM9e319LGNvbnRhaW5lcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRhaW5lcnNbZV07cmV0dXJuIHR8fCh0PXRoaXMuX2NyZWF0ZUNvbnRhaW5lcihlKSx0aGlzLmNvbnRhaW5lcnNbZV09dCksdH0sc2hvd0luOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmNvbnRhaW5lcihlKS5zaG93KHQsbil9LF9jcmVhdGVDb250YWluZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLnJlbmRlcigpLGk9bi5maW5kKGUpO2lmKCFpLmxlbmd0aCYmbi5pcyhlKSl7aWYoIW4uaXMoZSkpdGhyb3cgRXJyb3IoXCJjYW4ndCBmaW5kIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBcIitlK1wiIHNlbGVjdG9yXCIpO2k9bn1yZXR1cm4gdD1uZXcgXyhpKSx0LmJpbmQoXCJhY2NlcHRlZFwiLGZ1bmN0aW9uKGUpe2Uudmlldy5yZW5kZXIoaSl9KSx0fX0pLG09cC5leHRlbmQoe2F0dGFjaDpmdW5jdGlvbihlLHQpe2UuZWxlbWVudC5maW5kKHQpLnJlcGxhY2VXaXRoKHRoaXMucmVuZGVyKCkpfSxkZXRhY2g6ZnVuY3Rpb24oKXt9fSksdj0vXihcXHcrKSg6KFxcdyspKT8oIChcXHcrKSk/JC8sXz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtpLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLmNvbnRhaW5lcj1lLHRoaXMuaGlzdG9yeT1bXSx0aGlzLnZpZXc9bnVsbCx0aGlzLnJ1bm5pbmc9ITF9LGFmdGVyOmZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nPSExLHRoaXMudHJpZ2dlcihcImNvbXBsZXRlXCIse3ZpZXc6dGhpcy52aWV3fSksdGhpcy50cmlnZ2VyKFwiYWZ0ZXJcIil9LGVuZDpmdW5jdGlvbigpe3RoaXMudmlldy5zaG93RW5kKCksdGhpcy5wcmV2aW91cy5oaWRlRW5kKCksdGhpcy5hZnRlcigpfSxzaG93OmZ1bmN0aW9uKGUsaSxyKXtpZighZS50cmlnZ2VyQmVmb3JlU2hvdygpKXJldHVybiB0aGlzLnRyaWdnZXIoXCJhZnRlclwiKSwhMTtyPXJ8fGUuaWQ7dmFyIG89dGhpcyxhPWU9PT1vLnZpZXc/ZS5jbG9uZSgpOm8udmlldyxzPW8uaGlzdG9yeSxsPXNbcy5sZW5ndGgtMl18fHt9LGM9bC5pZD09PXIsZD1pfHwoYz9zW3MubGVuZ3RoLTFdLnRyYW5zaXRpb246ZS50cmFuc2l0aW9uKSx1PXQoZCk7cmV0dXJuIG8ucnVubmluZyYmby5lZmZlY3Quc3RvcCgpLFwibm9uZVwiPT09ZCYmKGQ9bnVsbCksby50cmlnZ2VyKFwiYWNjZXB0ZWRcIix7dmlldzplfSksby52aWV3PWUsby5wcmV2aW91cz1hLG8ucnVubmluZz0hMCxjP3MucG9wKCk6cy5wdXNoKHtpZDpyLHRyYW5zaXRpb246ZH0pLGE/KGEuaGlkZVN0YXJ0KCksZCYmbi5lZmZlY3RzLmVuYWJsZWQ/KGUuZWxlbWVudC5hZGRDbGFzcyhcImstZngtaGlkZGVuXCIpLGUuc2hvd1N0YXJ0KCksYyYmIWkmJih1LnJldmVyc2U9IXUucmV2ZXJzZSksby5lZmZlY3Q9bi5meChlLmVsZW1lbnQpLnJlcGxhY2UoYS5lbGVtZW50LHUudHlwZSkuYmVmb3JlVHJhbnNpdGlvbihmdW5jdGlvbigpe2UuYmVmb3JlVHJhbnNpdGlvbihcInNob3dcIiksYS5iZWZvcmVUcmFuc2l0aW9uKFwiaGlkZVwiKX0pLmFmdGVyVHJhbnNpdGlvbihmdW5jdGlvbigpe2UuYWZ0ZXJUcmFuc2l0aW9uKFwic2hvd1wiKSxhLmFmdGVyVHJhbnNpdGlvbihcImhpZGVcIil9KS5kaXJlY3Rpb24odS5kaXJlY3Rpb24pLnNldFJldmVyc2UodS5yZXZlcnNlKSxvLmVmZmVjdC5ydW4oKS50aGVuKGZ1bmN0aW9uKCl7by5lbmQoKX0pKTooZS5zaG93U3RhcnQoKSxvLmVuZCgpKSwhMCk6KGUuc2hvd1N0YXJ0KCksZS5zaG93RW5kKCksby5hZnRlcigpLCEwKX19KTtuLlZpZXdDb250YWluZXI9XyxuLkZyYWdtZW50PW0sbi5MYXlvdXQ9ZyxuLlZpZXc9cCxuLlZpZXdDbG9uZT1mfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dGhpcy5ub2RlPW51bGx9ZnVuY3Rpb24gbihlLHQsbil7dGhpcy5ub2RlTmFtZT1lLHRoaXMuYXR0cj10fHx7fSx0aGlzLmNzc1RleHQ9bnVsbCx0aGlzLmNoaWxkcmVuPW58fFtdfWZ1bmN0aW9uIGkoZSl7dGhpcy5ub2RlVmFsdWU9ZX1mdW5jdGlvbiByKGUpe3RoaXMuaHRtbD1lfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG5ldyByKGUpfWZ1bmN0aW9uIGEoZSx0LGkpe3JldHVybiBuZXcgbihlLHQsaSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gbmV3IGkoZSl9ZnVuY3Rpb24gbChlKXt0aGlzLnJvb3Q9ZSx0aGlzLmNoaWxkcmVuPVtdfXQucHJvdG90eXBlPXtyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpfX0sbi5wcm90b3R5cGU9bmV3IHQsbi5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkPXRoaXMuY2hpbGRyZW4sdT1kLmxlbmd0aDtpZih0JiZ0Lm5vZGVOYW1lPT09dGhpcy5ub2RlTmFtZSl7aWYobj10Lm5vZGUscj10LmNoaWxkcmVuLE1hdGguYWJzKHIubGVuZ3RoLXUpPjIpcmV0dXJuIHZvaWQgdGhpcy5yZW5kZXIoe2FwcGVuZENoaWxkOmZ1bmN0aW9uKG4pe2UucmVwbGFjZUNoaWxkKG4sdC5ub2RlKX19LG51bGwpO2ZvcihpPTA7dT5pO2krKylkW2ldLnJlbmRlcihuLHJbaV0pO2ZvcihpPXUsdT1yLmxlbmd0aDt1Pmk7aSsrKXJbaV0ucmVtb3ZlKCl9ZWxzZXtmb3IodCYmKHQucmVtb3ZlKCksdD1udWxsKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5ub2RlTmFtZSksaT0wO3U+aTtpKyspZFtpXS5yZW5kZXIobixudWxsKTtlLmFwcGVuZENoaWxkKG4pfW89dGhpcy5hdHRyO2ZvcihhIGluIG8paWYoIXR8fG9bYV0hPT10LmF0dHJbYV0paWYodm9pZCAwIT09blthXSlpZihcInN0eWxlXCIhPT1hKW5bYV09b1thXTtlbHNle3M9XCJcIixsPW9bYV07Zm9yKGMgaW4gbClzKz1jLHMrPVwiOlwiLHMrPWxbY10scys9XCI7XCI7dCYmdC5jc3NUZXh0PT09c3x8KG4uc3R5bGUuY3NzVGV4dD1zKSx0aGlzLmNzc1RleHQ9c31lbHNlIG4uc2V0QXR0cmlidXRlKGEsb1thXSk7aWYodClmb3IoYSBpbiB0LmF0dHIpdm9pZCAwPT09b1thXSYmKHZvaWQgMCE9PW5bYV0/XCJzdHlsZVwiPT09YT9uLnN0eWxlLmNzc1RleHQ9XCJcIjpcImNsYXNzTmFtZVwiPT09YT9uW2FdPVwiXCI6bi5yZW1vdmVBdHRyaWJ1dGUoYSk6bi5yZW1vdmVBdHRyaWJ1dGUoYSkpO3RoaXMubm9kZT1ufSxpLnByb3RvdHlwZT1uZXcgdCxpLnByb3RvdHlwZS5ub2RlTmFtZT1cIiN0ZXh0XCIsaS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG47dCYmdC5ub2RlTmFtZT09PXRoaXMubm9kZU5hbWU/KG49dC5ub2RlLHRoaXMubm9kZVZhbHVlIT09dC5ub2RlVmFsdWUmJihuLm5vZGVWYWx1ZT10aGlzLm5vZGVWYWx1ZSkpOih0JiZ0LnJlbW92ZSgpLG49ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5ub2RlVmFsdWUpLGUuYXBwZW5kQ2hpbGQobikpLHRoaXMubm9kZT1ufSxyLnByb3RvdHlwZT17bm9kZU5hbWU6XCIjaHRtbFwiLHJlbW92ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT0wO3RoaXMubm9kZXMubGVuZ3RoPmU7ZSsrKXRoaXMubm9kZXNbZV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGVzW2VdKX0scmVuZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtpZih0JiZ0Lm5vZGVOYW1lPT09dGhpcy5ub2RlTmFtZSYmdC5odG1sPT09dGhpcy5odG1sKXRoaXMubm9kZXM9dC5ub2Rlcy5zbGljZSgwKTtlbHNlIGZvcih0JiZ0LnJlbW92ZSgpLG49ZS5sYXN0Q2hpbGQsZS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIix0aGlzLmh0bWwpLHRoaXMubm9kZXM9W10saT1uP24ubmV4dFNpYmxpbmc6ZS5maXJzdENoaWxkO2k7aT1pLm5leHRTaWJsaW5nKXRoaXMubm9kZXMucHVzaChpKX19LGwucHJvdG90eXBlPXtodG1sOm8sZWxlbWVudDphLHRleHQ6cyxyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuY2hpbGRyZW47Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspZVt0XS5yZW5kZXIodGhpcy5yb290LGlbdF0pO2Zvcih0PW47aS5sZW5ndGg+dDt0KyspaVt0XS5yZW1vdmUoKTt0aGlzLmNoaWxkcmVuPWV9fSxlLmRvbT17aHRtbDpvLHRleHQ6cyxlbGVtZW50OmEsVHJlZTpsfX0od2luZG93LmtlbmRvKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciBuPU1hdGguZmxvb3IoZS8yNiktMTtyZXR1cm4obj49MD90KG4pOlwiXCIpK1N0cmluZy5mcm9tQ2hhckNvZGUoNjUrZSUyNil9ZnVuY3Rpb24gbihlLG4pe3JldHVybiB0KG4pKyhlKzEpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIDY+ZS5sZW5ndGgmJihlPWUucmVwbGFjZSgvKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0K3R9KSksZT1lLnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpLDg+ZS5sZW5ndGgmJihlPVwiRkZcIitlKSxlfXZhciByPSc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuPFJlbGF0aW9uc2hpcHMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHNcIj48UmVsYXRpb25zaGlwIElkPVwicklkM1wiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2V4dGVuZGVkLXByb3BlcnRpZXNcIiBUYXJnZXQ9XCJkb2NQcm9wcy9hcHAueG1sXCIvPjxSZWxhdGlvbnNoaXAgSWQ9XCJySWQyXCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcy9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXNcIiBUYXJnZXQ9XCJkb2NQcm9wcy9jb3JlLnhtbFwiLz48UmVsYXRpb25zaGlwIElkPVwicklkMVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL29mZmljZURvY3VtZW50XCIgVGFyZ2V0PVwieGwvd29ya2Jvb2sueG1sXCIvPjwvUmVsYXRpb25zaGlwcz4nLG89ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/PlxcclxcbjxjcDpjb3JlUHJvcGVydGllcyB4bWxuczpjcD1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvbWV0YWRhdGEvY29yZS1wcm9wZXJ0aWVzXCIgeG1sbnM6ZGM9XCJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xL1wiIHhtbG5zOmRjdGVybXM9XCJodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvXCIgeG1sbnM6ZGNtaXR5cGU9XCJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvXCIgeG1sbnM6eHNpPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2VcIj48ZGM6Y3JlYXRvcj4ke2NyZWF0b3J9PC9kYzpjcmVhdG9yPjxjcDpsYXN0TW9kaWZpZWRCeT4ke2xhc3RNb2RpZmllZEJ5fTwvY3A6bGFzdE1vZGlmaWVkQnk+PGRjdGVybXM6Y3JlYXRlZCB4c2k6dHlwZT1cImRjdGVybXM6VzNDRFRGXCI+JHtjcmVhdGVkfTwvZGN0ZXJtczpjcmVhdGVkPjxkY3Rlcm1zOm1vZGlmaWVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke21vZGlmaWVkfTwvZGN0ZXJtczptb2RpZmllZD48L2NwOmNvcmVQcm9wZXJ0aWVzPicpLGE9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/PlxcclxcbjxQcm9wZXJ0aWVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZXh0ZW5kZWQtcHJvcGVydGllc1wiIHhtbG5zOnZ0PVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZG9jUHJvcHNWVHlwZXNcIj48QXBwbGljYXRpb24+TWljcm9zb2Z0IEV4Y2VsPC9BcHBsaWNhdGlvbj48RG9jU2VjdXJpdHk+MDwvRG9jU2VjdXJpdHk+PFNjYWxlQ3JvcD5mYWxzZTwvU2NhbGVDcm9wPjxIZWFkaW5nUGFpcnM+PHZ0OnZlY3RvciBzaXplPVwiMlwiIGJhc2VUeXBlPVwidmFyaWFudFwiPjx2dDp2YXJpYW50Pjx2dDpscHN0cj5Xb3Jrc2hlZXRzPC92dDpscHN0cj48L3Z0OnZhcmlhbnQ+PHZ0OnZhcmlhbnQ+PHZ0Omk0PiR7c2hlZXRzLmxlbmd0aH08L3Z0Omk0PjwvdnQ6dmFyaWFudD48L3Z0OnZlY3Rvcj48L0hlYWRpbmdQYWlycz48VGl0bGVzT2ZQYXJ0cz48dnQ6dmVjdG9yIHNpemU9XCIke3NoZWV0cy5sZW5ndGh9XCIgYmFzZVR5cGU9XCJscHN0clwiPiMgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgc2hlZXRzLmxlbmd0aDsgaWR4KyspIHsgIyMgaWYgKHNoZWV0c1tpZHhdLm9wdGlvbnMudGl0bGUpIHsgIzx2dDpscHN0cj4ke3NoZWV0c1tpZHhdLm9wdGlvbnMudGl0bGV9PC92dDpscHN0cj4jIH0gZWxzZSB7ICM8dnQ6bHBzdHI+U2hlZXQke2lkeCsxfTwvdnQ6bHBzdHI+IyB9ICMjIH0gIzwvdnQ6dmVjdG9yPjwvVGl0bGVzT2ZQYXJ0cz48TGlua3NVcFRvRGF0ZT5mYWxzZTwvTGlua3NVcFRvRGF0ZT48U2hhcmVkRG9jPmZhbHNlPC9TaGFyZWREb2M+PEh5cGVybGlua3NDaGFuZ2VkPmZhbHNlPC9IeXBlcmxpbmtzQ2hhbmdlZD48QXBwVmVyc2lvbj4xNC4wMzAwPC9BcHBWZXJzaW9uPjwvUHJvcGVydGllcz4nKSxzPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48VHlwZXMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXNcIj48RGVmYXVsdCBFeHRlbnNpb249XCJyZWxzXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5yZWxhdGlvbnNoaXBzK3htbFwiIC8+PERlZmF1bHQgRXh0ZW5zaW9uPVwieG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi94bWxcIiAvPjxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC93b3JrYm9vay54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0Lm1haW4reG1sXCIgLz48T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvc3R5bGVzLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc3R5bGVzK3htbFwiLz48T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvc2hhcmVkU3RyaW5ncy54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoYXJlZFN0cmluZ3MreG1sXCIvPiMgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDw9IGNvdW50OyBpZHgrKykgeyAjPE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3dvcmtzaGVldHMvc2hlZXQke2lkeH0ueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC53b3Jrc2hlZXQreG1sXCIgLz4jIH0gIzxPdmVycmlkZSBQYXJ0TmFtZT1cIi9kb2NQcm9wcy9jb3JlLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLXBhY2thZ2UuY29yZS1wcm9wZXJ0aWVzK3htbFwiIC8+PE92ZXJyaWRlIFBhcnROYW1lPVwiL2RvY1Byb3BzL2FwcC54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5leHRlbmRlZC1wcm9wZXJ0aWVzK3htbFwiIC8+PC9UeXBlcz4nKSxsPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48d29ya2Jvb2sgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczpyPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwc1wiPjxmaWxlVmVyc2lvbiBhcHBOYW1lPVwieGxcIiBsYXN0RWRpdGVkPVwiNVwiIGxvd2VzdEVkaXRlZD1cIjVcIiBydXBCdWlsZD1cIjkzMDNcIiAvPjx3b3JrYm9va1ByIGRlZmF1bHRUaGVtZVZlcnNpb249XCIxMjQyMjZcIiAvPjxib29rVmlld3M+PHdvcmtib29rVmlldyB4V2luZG93PVwiMjQwXCIgeVdpbmRvdz1cIjQ1XCIgd2luZG93V2lkdGg9XCIxODE5NVwiIHdpbmRvd0hlaWdodD1cIjc5OTVcIiAvPjwvYm9va1ZpZXdzPjxzaGVldHM+IyBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBzaGVldHMubGVuZ3RoOyBpZHgrKykgeyAjIyBpZiAoc2hlZXRzW2lkeF0ub3B0aW9ucy50aXRsZSkgeyAjPHNoZWV0IG5hbWU9XCIke3NoZWV0c1tpZHhdLm9wdGlvbnMudGl0bGV9XCIgc2hlZXRJZD1cIiR7aWR4KzF9XCIgcjppZD1cInJJZCR7aWR4KzF9XCIgLz4jIH0gZWxzZSB7ICM8c2hlZXQgbmFtZT1cIlNoZWV0JHtpZHgrMX1cIiBzaGVldElkPVwiJHtpZHgrMX1cIiByOmlkPVwicklkJHtpZHgrMX1cIiAvPiMgfSAjIyB9ICM8L3NoZWV0cz48Y2FsY1ByIGNhbGNJZD1cIjE0NTYyMVwiIC8+PC93b3JrYm9vaz4nKSxjPWUudGVtcGxhdGUoJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHJcXG48d29ya3NoZWV0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgeG1sbnM6bWM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNlwiIHhtbG5zOnI9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzXCIgeG1sbnM6eDE0YWM9XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMDkvOS9hY1wiIG1jOklnbm9yYWJsZT1cIngxNGFjXCI+PGRpbWVuc2lvbiByZWY9XCJBMVwiIC8+PHNoZWV0Vmlld3M+PHNoZWV0VmlldyB0YWJTZWxlY3RlZD1cIjFcIiB3b3JrYm9va1ZpZXdJZD1cIjBcIj4jIGlmIChmcmVlemVQYW5lKSB7ICM8cGFuZSBzdGF0ZT1cImZyb3plblwiIyBpZiAoZnJlZXplUGFuZS5jb2xTcGxpdCkgeyAjIHhTcGxpdD1cIiR7ZnJlZXplUGFuZS5jb2xTcGxpdH1cIiMgfSAjIyBpZiAoZnJlZXplUGFuZS5yb3dTcGxpdCkgeyAjIHlTcGxpdD1cIiR7ZnJlZXplUGFuZS5yb3dTcGxpdH1cIiMgfSAjIHRvcExlZnRDZWxsPVwiJHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGZyZWV6ZVBhbmUuY29sU3BsaXQgfHwgMCkpfSR7KGZyZWV6ZVBhbmUucm93U3BsaXQgfHwgMCkrMX1cIi8+IyB9ICM8L3NoZWV0Vmlldz48L3NoZWV0Vmlld3M+PHNoZWV0Rm9ybWF0UHIgZGVmYXVsdFJvd0hlaWdodD1cIjE1XCIgeDE0YWM6ZHlEZXNjZW50PVwiMC4yNVwiIC8+IyBpZiAoY29sdW1ucykgeyAjPGNvbHM+IyBmb3IgKHZhciBjaSA9IDA7IGNpIDwgY29sdW1ucy5sZW5ndGg7IGNpKyspIHsgIyMgdmFyIGNvbHVtbiA9IGNvbHVtbnNbY2ldOyAjIyBpZiAoY29sdW1uLndpZHRoKSB7ICM8Y29sIG1pbj1cIiR7Y2krMX1cIiBtYXg9XCIke2NpKzF9XCIgY3VzdG9tV2lkdGg9XCIxXCIjIGlmIChjb2x1bW4uYXV0b1dpZHRoKSB7ICMgd2lkdGg9XCIkeygoY29sdW1uLndpZHRoKjcrNSkvNyoyNTYpLzI1Nn1cIiBiZXN0Rml0PVwiMVwiIyB9IGVsc2UgeyAjIHdpZHRoPVwiJHsoKChjb2x1bW4ud2lkdGgpLzcpKjEwMCswLjUpLzEwMH1cIiAjIH0gIy8+IyB9ICMjIH0gIzwvY29scz4jIH0gIzxzaGVldERhdGE+IyBmb3IgKHZhciByaSA9IDA7IHJpIDwgZGF0YS5sZW5ndGg7IHJpKyspIHsgIyMgdmFyIHJvdyA9IGRhdGFbcmldOyAjPHJvdyByPVwiJHtyaSArIDF9XCI+IyBmb3IgKHZhciBjaSA9IDA7IGNpIDwgcm93LmRhdGEubGVuZ3RoOyBjaSsrKSB7ICMjIHZhciBjZWxsID0gcm93LmRhdGFbY2ldOyM8YyByPVwiJHtjZWxsLnJlZn1cIiMgaWYgKGNlbGwuc3R5bGUpIHsgIyBzPVwiJHtjZWxsLnN0eWxlfVwiICMgfSAjIyBpZiAoY2VsbC50eXBlKSB7ICMgdD1cIiR7Y2VsbC50eXBlfVwiIyB9ICM+IyBpZiAoY2VsbC52YWx1ZSAhPSBudWxsKSB7ICM8dj4ke2NlbGwudmFsdWV9PC92PiMgfSAjPC9jPiMgfSAjPC9yb3c+IyB9ICM8L3NoZWV0RGF0YT4jIGlmIChmaWx0ZXIpIHsgIzxhdXRvRmlsdGVyIHJlZj1cIiR7ZmlsdGVyLmZyb219OiR7ZmlsdGVyLnRvfVwiLz4jIH0gIyMgaWYgKG1lcmdlQ2VsbHMubGVuZ3RoKSB7ICM8bWVyZ2VDZWxscyBjb3VudD1cIiR7bWVyZ2VDZWxscy5sZW5ndGh9XCI+IyBmb3IgKHZhciBjaSA9IDA7IGNpIDwgbWVyZ2VDZWxscy5sZW5ndGg7IGNpKyspIHsgIzxtZXJnZUNlbGwgcmVmPVwiJHttZXJnZUNlbGxzW2NpXX1cIi8+IyB9ICM8L21lcmdlQ2VsbHM+IyB9ICM8cGFnZU1hcmdpbnMgbGVmdD1cIjAuN1wiIHJpZ2h0PVwiMC43XCIgdG9wPVwiMC43NVwiIGJvdHRvbT1cIjAuNzVcIiBoZWFkZXI9XCIwLjNcIiBmb290ZXI9XCIwLjNcIiAvPjwvd29ya3NoZWV0PicpLGQ9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/PlxcclxcbjxSZWxhdGlvbnNoaXBzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzXCI+IyBmb3IgKHZhciBpZHggPSAxOyBpZHggPD0gY291bnQ7IGlkeCsrKSB7ICM8UmVsYXRpb25zaGlwIElkPVwicklkJHtpZHh9XCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvd29ya3NoZWV0XCIgVGFyZ2V0PVwid29ya3NoZWV0cy9zaGVldCR7aWR4fS54bWxcIiAvPiMgfSAjPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7Y291bnQrMX1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zdHlsZXNcIiBUYXJnZXQ9XCJzdHlsZXMueG1sXCIgLz48UmVsYXRpb25zaGlwIElkPVwicklkJHtjb3VudCsyfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3NoYXJlZFN0cmluZ3NcIiBUYXJnZXQ9XCJzaGFyZWRTdHJpbmdzLnhtbFwiIC8+PC9SZWxhdGlvbnNoaXBzPicpLHU9ZS50ZW1wbGF0ZSgnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwieWVzXCI/Plxcclxcbjxzc3QgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiBjb3VudD1cIiR7Y291bnR9XCIgdW5pcXVlQ291bnQ9XCIke3VuaXF1ZUNvdW50fVwiPiMgZm9yICh2YXIgaW5kZXggaW4gaW5kZXhlcykgeyAjPHNpPjx0PiR7aW5kZXguc3Vic3RyaW5nKDEpfTwvdD48L3NpPiMgfSAjPC9zc3Q+JyksaD1lLnRlbXBsYXRlKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz48c3R5bGVTaGVldCB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIHhtbG5zOm1jPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL21hcmt1cC1jb21wYXRpYmlsaXR5LzIwMDZcIiBtYzpJZ25vcmFibGU9XCJ4MTRhY1wiIHhtbG5zOngxNGFjPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDA5LzkvYWNcIj48bnVtRm10cyBjb3VudD1cIiR7Zm9ybWF0cy5sZW5ndGh9XCI+IyBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZm9ybWF0cy5sZW5ndGg7IGZpKyspIHsgIyMgdmFyIGZvcm1hdCA9IGZvcm1hdHNbZmldOyAjPG51bUZtdCBmb3JtYXRDb2RlPVwiJHtmb3JtYXQuZm9ybWF0fVwiIG51bUZtdElkPVwiJHsxNjUrZml9XCIgLz4jIH0gIzwvbnVtRm10cz48Zm9udHMgY291bnQ9XCIke2ZvbnRzLmxlbmd0aCsxfVwiIHgxNGFjOmtub3duRm9udHM9XCIxXCI+PGZvbnQ+PHN6IHZhbD1cIjExXCIgLz48Y29sb3IgdGhlbWU9XCIxXCIgLz48bmFtZSB2YWw9XCJDYWxpYnJpXCIgLz48ZmFtaWx5IHZhbD1cIjJcIiAvPjxzY2hlbWUgdmFsPVwibWlub3JcIiAvPjwvZm9udD4jIGZvciAodmFyIGZpID0gMDsgZmkgPCBmb250cy5sZW5ndGg7IGZpKyspIHsgIyMgdmFyIGZvbnQgPSBmb250c1tmaV07ICM8Zm9udD4jIGlmIChmb250LmJvbGQpIHsgIzxiLz4jIH0gIyMgaWYgKGZvbnQuaXRhbGljKSB7ICM8aS8+IyB9ICMjIGlmIChmb250LnVuZGVybGluZSkgeyAjPHUvPiMgfSAjIyBpZiAoZm9udC5jb2xvcikgeyAjPGNvbG9yIHJnYj1cIiR7Zm9udC5jb2xvcn1cIiAvPiMgfSBlbHNlIHsgIzxjb2xvciB0aGVtZT1cIjFcIiAvPiMgfSAjIyBpZiAoZm9udC5mb250U2l6ZSkgeyAjPHN6IHZhbD1cIiR7Zm9udC5mb250U2l6ZX1cIiAvPiMgfSBlbHNlIHsgIzxzeiB2YWw9XCIxMVwiIC8+IyB9ICMjIGlmIChmb250LmZvbnROYW1lKSB7ICM8bmFtZSB2YWw9XCIke2ZvbnQuZm9udE5hbWV9XCIgLz4jIH0gZWxzZSB7ICM8bmFtZSB2YWw9XCJDYWxpYnJpXCIgLz48c2NoZW1lIHZhbD1cIm1pbm9yXCIgLz4jIH0gIzxmYW1pbHkgdmFsPVwiMlwiIC8+PC9mb250PiMgfSAjPC9mb250cz48ZmlsbHMgY291bnQ9XCIke2ZpbGxzLmxlbmd0aCsxfVwiPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cIm5vbmVcIi8+PC9maWxsPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cImdyYXkxMjVcIi8+PC9maWxsPiMgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZpbGxzLmxlbmd0aDsgZmkrKykgeyAjIyB2YXIgZmlsbCA9IGZpbGxzW2ZpXTsgIyMgaWYgKGZpbGwuYmFja2dyb3VuZCkgeyAjPGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPVwic29saWRcIj48ZmdDb2xvciByZ2I9XCIke2ZpbGwuYmFja2dyb3VuZH1cIi8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+IyB9ICMjIH0gIzwvZmlsbHM+PGJvcmRlcnMgY291bnQ9XCIxXCI+PGJvcmRlcj48bGVmdC8+PHJpZ2h0Lz48dG9wLz48Ym90dG9tLz48ZGlhZ29uYWwvPjwvYm9yZGVyPjwvYm9yZGVycz48Y2VsbFhmcyBjb3VudD1cIiR7c3R5bGVzLmxlbmd0aCsxfVwiPjx4ZiBudW1GbXRJZD1cIjBcIiBmb250SWQ9XCIwXCIgZmlsbElkPVwiMFwiIGJvcmRlcklkPVwiMFwiIHhmSWQ9XCIwXCIvPiMgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHN0eWxlcy5sZW5ndGg7IHNpKyspIHsgIyMgdmFyIHN0eWxlID0gc3R5bGVzW3NpXTsgIzx4ZiB4ZmlkPVwiMFwiIyBpZiAoc3R5bGUuZm9udElkKSB7ICMgZm9udElkPVwiJHtzdHlsZS5mb250SWR9XCIgYXBwbHlGb250PVwiMVwiIyB9ICMjIGlmIChzdHlsZS5maWxsSWQpIHsgIyBmaWxsSWQ9XCIke3N0eWxlLmZpbGxJZH1cIiBhcHBseUZpbGw9XCIxXCIjIH0gIyMgaWYgKHN0eWxlLm51bUZtdElkKSB7ICMgbnVtRm10SWQ9XCIke3N0eWxlLm51bUZtdElkfVwiIGFwcGx5TnVtYmVyRm9ybWF0PVwiMVwiIyB9ICMjIGlmIChzdHlsZS5oQWxpZ24gfHwgc3R5bGUudkFsaWduKSB7ICMgYXBwbHlBbGlnbm1lbnQ9XCIxXCIjIH0gIz4jIGlmIChzdHlsZS5oQWxpZ24gfHwgc3R5bGUudkFsaWduKSB7ICM8YWxpZ25tZW50IyBpZiAoc3R5bGUuaEFsaWduKSB7ICMgaG9yaXpvbnRhbD1cIiR7c3R5bGUuaEFsaWdufVwiIyB9ICMjIGlmIChzdHlsZS52QWxpZ24pIHsgIyB2ZXJ0aWNhbD1cIiR7c3R5bGUudkFsaWdufVwiIyB9ICMvPiMgfSAjPC94Zj4jIH0gIzwvY2VsbFhmcz48ZHhmcyBjb3VudD1cIjBcIiAvPjx0YWJsZVN0eWxlcyBjb3VudD1cIjBcIiBkZWZhdWx0VGFibGVTdHlsZT1cIlRhYmxlU3R5bGVNZWRpdW0yXCIgZGVmYXVsdFBpdm90U3R5bGU9XCJQaXZvdFN0eWxlTWVkaXVtOVwiIC8+PC9zdHlsZVNoZWV0PicpLHA9ZS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMub3B0aW9ucz1lLHRoaXMuX3N0cmluZ3M9dCx0aGlzLl9zdHlsZXM9bix0aGlzLl9tZXJnZUNlbGxzPVtdfSx0b1hNTDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5yb3dzfHxbXSx0PXRoaXMub3B0aW9ucy5maWx0ZXI7cmV0dXJuIGMoe2ZyZWV6ZVBhbmU6dGhpcy5vcHRpb25zLmZyZWV6ZVBhbmUsY29sdW1uczp0aGlzLm9wdGlvbnMuY29sdW1ucyxkYXRhOiQubWFwKGUsJC5wcm94eSh0aGlzLl9yb3csdGhpcyxlKSksbWVyZ2VDZWxsczp0aGlzLl9tZXJnZUNlbGxzLGZpbHRlcjp0P3tmcm9tOm4oMCx0LmZyb20pLHRvOm4oMCx0LnRvKX06bnVsbH0pfSxfcm93OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY2VsbEluZGV4PTAse2RhdGE6JC5tYXAodC5jZWxscywkLnByb3h5KHRoaXMuX2NlbGwsdGhpcyxlLG4pKX19LF9sb29rdXBTdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9XCIkXCIrZSxuPXRoaXMuX3N0cmluZ3MuaW5kZXhlc1t0XTtyZXR1cm4gdm9pZCAwIT09bj9lPW46KGU9dGhpcy5fc3RyaW5ncy5pbmRleGVzW3RdPXRoaXMuX3N0cmluZ3MudW5pcXVlQ291bnQsdGhpcy5fc3RyaW5ncy51bmlxdWVDb3VudCsrKSx0aGlzLl9zdHJpbmdzLmNvdW50KyssZX0sX2xvb2t1cFN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZS5zdHJpbmdpZnkodCk7cmV0dXJuXCJ7fVwiPT1pPzA6KG49JC5pbkFycmF5KGksdGhpcy5fc3R5bGVzKSwwPm4mJihuPXRoaXMuX3N0eWxlcy5wdXNoKGkpLTEpLG4rMSl9LF9jZWxsOmZ1bmN0aW9uKHQsaSxyKXt2YXIgbyxhLHMsbCxjLGQsdSxoLHAsZixnO2lmKCFyKXJldHVybiB2b2lkIHRoaXMuX2NlbGxJbmRleCsrO2lmKG89ci52YWx1ZSxhPXtib2xkOnIuYm9sZCxjb2xvcjpyLmNvbG9yLGJhY2tncm91bmQ6ci5iYWNrZ3JvdW5kLGl0YWxpYzpyLml0YWxpYyx1bmRlcmxpbmU6ci51bmRlcmxpbmUsZm9udE5hbWU6ci5mb250TmFtZSxmb250U2l6ZTpyLmZvbnRTaXplLGZvcm1hdDpyLmZvcm1hdCxoQWxpZ246ci5oQWxpZ24sdkFsaWduOnIudkFsaWdufSxzPXRoaXMub3B0aW9ucy5jb2x1bW5zfHxbXSxsPXNbdGhpcy5fY2VsbEluZGV4XSxsJiZsLmF1dG9XaWR0aCYmKGwud2lkdGg9TWF0aC5tYXgobC53aWR0aHx8MCwoXCJcIitvKS5sZW5ndGgpKSxjPXR5cGVvZiBvLFwic3RyaW5nXCI9PT1jPyhvPXRoaXMuX2xvb2t1cFN0cmluZyhvKSxjPVwic1wiKTpcIm51bWJlclwiPT09Yz9jPVwiblwiOlwiYm9vbGVhblwiPT09Yz8oYz1cImJcIixvPStvKTpvJiZvLmdldFRpbWU/KGM9XCJkXCIsbz1lLnRpbWV6b25lLnJlbW92ZShvLFwiRXRjL1VUQ1wiKS50b0pTT04oKSxhLmZvcm1hdHx8KGEuZm9ybWF0PVwibW0tZGQteXlcIikpOihjPW51bGwsbz1cIlwiKSxhPXRoaXMuX2xvb2t1cFN0eWxlKGEpLGQ9e3ZhbHVlOm8sdHlwZTpjLHN0eWxlOmEscmVmOm4oaSx0aGlzLl9jZWxsSW5kZXgpfSx1PXIuY29sU3Bhbnx8MSxoPXIucm93U3Bhbnx8MSx1PjF8fGg+MSl7Zm9yKHA9W2RdLGY9MTt1PmY7ZisrKXRoaXMuX2NlbGxJbmRleCsrLHBbZl09e3JlZjpuKGksdGhpcy5fY2VsbEluZGV4KX07Zm9yKGc9MTtoPmc7ZysrKXRbaStnXSYmdFtpK2ddLmNlbGxzLnNwbGljZSh0aGlzLl9jZWxsSW5kZXgsMCx7fSk7dGhpcy5fbWVyZ2VDZWxscy5wdXNoKGQucmVmK1wiOlwiK24oaStoLTEsdGhpcy5fY2VsbEluZGV4KSksZD1wfXJldHVybiB0aGlzLl9jZWxsSW5kZXgrKyxkfX0pLGY9e0dlbmVyYWw6MCwwOjEsXCIwLjAwXCI6MixcIiMsIyMwXCI6MyxcIiMsIyMwLjAwXCI6NCxcIjAlXCI6OSxcIjAuMDAlXCI6MTAsXCIwLjAwRSswMFwiOjExLFwiIyA/Lz9cIjoxMixcIiMgPz8vPz9cIjoxMyxcIm1tLWRkLXl5XCI6MTQsXCJkLW1tbS15eVwiOjE1LFwiZC1tbW1cIjoxNixcIm1tbS15eVwiOjE3LFwiaDptbSBBTS9QTVwiOjE4LFwiaDptbTpzcyBBTS9QTVwiOjE5LFwiaDptbVwiOjIwLFwiaDptbTpzc1wiOjIxLFwibS9kL3l5IGg6bW1cIjoyMixcIiMsIyMwIDsoIywjIzApXCI6MzcsXCIjLCMjMCA7W1JlZF0oIywjIzApXCI6MzgsXCIjLCMjMC4wMDsoIywjIzAuMDApXCI6MzksXCIjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMClcIjo0MCxcIm1tOnNzXCI6NDUsXCJbaF06bW06c3NcIjo0NixcIm1tc3MuMFwiOjQ3LFwiIyMwLjBFKzBcIjo0OCxcIkBcIjo0OSxcIlskLTQwNF1lL20vZFwiOjI3LFwibS9kL3l5XCI6MzAsdDA6NTksXCJ0MC4wMFwiOjYwLFwidCMsIyMwXCI6NjEsXCJ0IywjIzAuMDBcIjo2MixcInQwJVwiOjY3LFwidDAuMDAlXCI6NjgsXCJ0IyA/Lz9cIjo2OSxcInQjID8/Lz8/XCI6NzB9LGc9ZS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV8fHt9LHRoaXMuX3N0cmluZ3M9e2luZGV4ZXM6e30sY291bnQ6MCx1bmlxdWVDb3VudDowfSx0aGlzLl9zdHlsZXM9W10sdGhpcy5fc2hlZXRzPSQubWFwKHRoaXMub3B0aW9ucy5zaGVldHN8fFtdLCQucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBwKGUsdGhpcy5fc3RyaW5ncyx0aGlzLl9zdHlsZXMpfSx0aGlzKSl9LHRvRGF0YVVSTDpmdW5jdGlvbigpe3ZhciB0LG4sYyxwLGcsbSx2LF8seSx3LGIsayx4O2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBKU1ppcCl0aHJvdyBFcnJvcihcIkpTWmlwIG5vdCBmb3VuZC4gQ2hlY2sgaHR0cDovL2RvY3MudGVsZXJpay5jb20va2VuZG8tdWkvZnJhbWV3b3JrL2V4Y2VsL2ludHJvZHVjdGlvbiNyZXF1aXJlbWVudHMgZm9yIG1vcmUgZGV0YWlscy5cIik7Zm9yKHQ9bmV3IEpTWmlwLG49dC5mb2xkZXIoXCJkb2NQcm9wc1wiKSxuLmZpbGUoXCJjb3JlLnhtbFwiLG8oe2NyZWF0b3I6dGhpcy5vcHRpb25zLmNyZWF0b3J8fFwiS2VuZG8gVUlcIixsYXN0TW9kaWZpZWRCeTp0aGlzLm9wdGlvbnMuY3JlYXRvcnx8XCJLZW5kbyBVSVwiLGNyZWF0ZWQ6dGhpcy5vcHRpb25zLmRhdGV8fChuZXcgRGF0ZSkudG9KU09OKCksbW9kaWZpZWQ6dGhpcy5vcHRpb25zLmRhdGV8fChuZXcgRGF0ZSkudG9KU09OKCl9KSksYz10aGlzLl9zaGVldHMubGVuZ3RoLG4uZmlsZShcImFwcC54bWxcIixhKHtzaGVldHM6dGhpcy5fc2hlZXRzfSkpLHA9dC5mb2xkZXIoXCJfcmVsc1wiKSxwLmZpbGUoXCIucmVsc1wiLHIpLGc9dC5mb2xkZXIoXCJ4bFwiKSxtPWcuZm9sZGVyKFwiX3JlbHNcIiksbS5maWxlKFwid29ya2Jvb2sueG1sLnJlbHNcIixkKHtjb3VudDpjfSkpLGcuZmlsZShcIndvcmtib29rLnhtbFwiLGwoe3NoZWV0czp0aGlzLl9zaGVldHN9KSksdj1nLmZvbGRlcihcIndvcmtzaGVldHNcIiksXz0wO2M+XztfKyspdi5maWxlKGUuZm9ybWF0KFwic2hlZXR7MH0ueG1sXCIsXysxKSx0aGlzLl9zaGVldHNbX10udG9YTUwoKSk7XG5yZXR1cm4geT0kLm1hcCh0aGlzLl9zdHlsZXMsJC5wYXJzZUpTT04pLHc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudW5kZXJsaW5lfHxlLmJvbGR8fGUuaXRhbGljfHxlLmNvbG9yfHxlLmZvbnROYW1lfHxlLmZvbnRTaXplfSxiPSQubWFwKHksZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29sb3ImJihlLmNvbG9yPWkoZS5jb2xvcikpLHcoZSk/ZTp2b2lkIDB9KSxrPSQubWFwKHksZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9ybWF0JiZ2b2lkIDA9PT1mW2UuZm9ybWF0XT9lOnZvaWQgMH0pLHg9JC5tYXAoeSxmdW5jdGlvbihlKXtyZXR1cm4gZS5iYWNrZ3JvdW5kPyhlLmJhY2tncm91bmQ9aShlLmJhY2tncm91bmQpLGUpOnZvaWQgMH0pLGcuZmlsZShcInN0eWxlcy54bWxcIixoKHtmb250czpiLGZpbGxzOngsZm9ybWF0czprLHN0eWxlczokLm1hcCh5LGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB3KGUpJiYodC5mb250SWQ9JC5pbkFycmF5KGUsYikrMSksZS5iYWNrZ3JvdW5kJiYodC5maWxsSWQ9JC5pbkFycmF5KGUseCkrMiksdC5oQWxpZ249ZS5oQWxpZ24sdC52QWxpZ249ZS52QWxpZ24sZS5mb3JtYXQmJih0Lm51bUZtdElkPXZvaWQgMCE9PWZbZS5mb3JtYXRdP2ZbZS5mb3JtYXRdOjE2NSskLmluQXJyYXkoZSxrKSksdH0pfSkpLGcuZmlsZShcInNoYXJlZFN0cmluZ3MueG1sXCIsdSh0aGlzLl9zdHJpbmdzKSksdC5maWxlKFwiW0NvbnRlbnRfVHlwZXNdLnhtbFwiLHMoe2NvdW50OmN9KSksXCJkYXRhOmFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0O2Jhc2U2NCxcIit0LmdlbmVyYXRlKHtjb21wcmVzc2lvbjpcIkRFRkxBVEVcIn0pfX0pO2Uub294bWw9e1dvcmtib29rOmcsV29ya3NoZWV0OnB9fShrZW5kbyksZnVuY3Rpb24oZSx0KXt0LkV4Y2VsRXhwb3J0ZXI9dC5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obil7bi5jb2x1bW5zPXRoaXMuX3RyaW1Db2x1bW5zKG4uY29sdW1uc3x8W10pLHRoaXMuY29sdW1ucz1lLm1hcCh0aGlzLl9sZWFmQ29sdW1ucyhuLmNvbHVtbnN8fFtdKSx0aGlzLl9wcmVwYXJlQ29sdW1uKSx0aGlzLm9wdGlvbnM9bjt2YXIgaT1uLmRhdGFTb3VyY2U7dGhpcy5kYXRhU291cmNlPWkgaW5zdGFuY2VvZiB0LmRhdGEuRGF0YVNvdXJjZT9uZXcgaS5jb25zdHJ1Y3RvcihlLmV4dGVuZCh7fSxpLm9wdGlvbnMse3BhZ2U6bi5hbGxQYWdlcz8wOmkucGFnZSgpLGZpbHRlcjppLmZpbHRlcigpLHBhZ2VTaXplOm4uYWxsUGFnZXM/aS50b3RhbCgpOmkucGFnZVNpemUoKSxzb3J0Omkuc29ydCgpLGdyb3VwOmkuZ3JvdXAoKSxhZ2dyZWdhdGU6aS5hZ2dyZWdhdGUoKX0pKTp0LmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUoaSksaSBpbnN0YW5jZW9mIHQuZGF0YS5UcmVlTGlzdERhdGFTb3VyY2UmJnRoaXMuZGF0YVNvdXJjZS5kYXRhKGkudmlldygpLnRvSlNPTigpKX0sX3RyaW1Db2x1bW5zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3ZhciB0PSEoIWUuZmllbGR8fGUuaGlkZGVuKTtyZXR1cm4hdCYmZS5jb2x1bW5zJiYodD1uLl90cmltQ29sdW1ucyhlLmNvbHVtbnMpLmxlbmd0aD4wKSx0fSl9LF9sZWFmQ29sdW1uczpmdW5jdGlvbihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zP249bi5jb25jYXQodGhpcy5fbGVhZkNvbHVtbnMoZVt0XS5jb2x1bW5zKSk6bi5wdXNoKGVbdF0pO3JldHVybiBufSx3b3JrYm9vazpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpO3JldHVybiB0LnRoZW4oZS5wcm94eShmdW5jdGlvbigpe3JldHVybntzaGVldHM6W3tjb2x1bW5zOnRoaXMuX2NvbHVtbnMoKSxyb3dzOnRoaXMuX3Jvd3MoKSxmcmVlemVQYW5lOnRoaXMuX2ZyZWV6ZVBhbmUoKSxmaWx0ZXI6dGhpcy5fZmlsdGVyKCl9XX19LHRoaXMpKX0sX3ByZXBhcmVDb2x1bW46ZnVuY3Rpb24obil7cmV0dXJuIG4uZmllbGQmJiFuLmhpZGRlbj9lLmV4dGVuZCh7fSxuLHtncm91cEhlYWRlclRlbXBsYXRlOnQudGVtcGxhdGUobi5ncm91cEhlYWRlclRlbXBsYXRlfHxcIiR7dGl0bGV9OiAke3ZhbHVlfVwiKSxncm91cEZvb3RlclRlbXBsYXRlOm4uZ3JvdXBGb290ZXJUZW1wbGF0ZT90LnRlbXBsYXRlKG4uZ3JvdXBGb290ZXJUZW1wbGF0ZSk6bnVsbCxmb290ZXJUZW1wbGF0ZTpuLmZvb3RlclRlbXBsYXRlP3QudGVtcGxhdGUobi5mb290ZXJUZW1wbGF0ZSk6bnVsbH0pOnZvaWQgMH0sX2ZpbHRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSlyZXR1cm4gbnVsbDt2YXIgZT10aGlzLl9kZXB0aCgpO3JldHVybntmcm9tOmUsdG86ZSt0aGlzLmNvbHVtbnMubGVuZ3RoLTF9fSxfZGF0YVJvd3M6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLl9kZXB0aCgpLHI9ZS5tYXAodCxlLnByb3h5KGZ1bmN0aW9uKHQpe3ZhciByLG8sYSxzLGwsYyxkLHU7cmV0dXJuIHRoaXMuX2hpZXJhcmNoaWNhbCgpJiYobj10aGlzLmRhdGFTb3VyY2UubGV2ZWwodCkrMSkscj1lLm1hcChBcnJheShuKSxmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pLGkmJnQuaXRlbXM/KG89ZS5ncmVwKHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZD09dC5maWVsZH0pWzBdLGE9byYmby50aXRsZT9vLnRpdGxlOnQuZmllbGQscz1vP28uZ3JvdXBIZWFkZXJUZW1wbGF0ZTpudWxsLGw9YStcIjogXCIrdC52YWx1ZSxjPWUuZXh0ZW5kKHt0aXRsZTphLGZpZWxkOnQuZmllbGQsdmFsdWU6dC52YWx1ZSxhZ2dyZWdhdGVzOnQuYWdncmVnYXRlc30sdC5hZ2dyZWdhdGVzW3QuZmllbGRdKSxzJiYobD1zKGMpKSxyLnB1c2goe3ZhbHVlOmwsYmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIixjb2xTcGFuOnRoaXMuY29sdW1ucy5sZW5ndGgraS1ufSksZD10aGlzLl9kYXRhUm93cyh0Lml0ZW1zLG4rMSksZC51bnNoaWZ0KHt0eXBlOlwiZ3JvdXAtaGVhZGVyXCIsY2VsbHM6cn0pLGQuY29uY2F0KHRoaXMuX2Zvb3Rlcih0LG4rMSkpKToodT1lLm1hcCh0aGlzLmNvbHVtbnMsZS5wcm94eSh0aGlzLl9jZWxsLHRoaXMsdCkpLHRoaXMuX2hpZXJhcmNoaWNhbCgpJiYodVswXS5jb2xTcGFuPWktbisxKSx7dHlwZTpcImRhdGFcIixjZWxsczpyLmNvbmNhdCh1KX0pfSx0aGlzKSk7cmV0dXJuIHJ9LF9mb290ZXI6ZnVuY3Rpb24odCxuKXt2YXIgaT1bXSxyPSExLG89ZS5tYXAodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmdyb3VwRm9vdGVyVGVtcGxhdGU/KHI9ITAse2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCIsdmFsdWU6ZS5ncm91cEZvb3RlclRlbXBsYXRlKHQuYWdncmVnYXRlc1tlLmZpZWxkXSl9KTp7YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIn19KTtyZXR1cm4gciYmaS5wdXNoKHt0eXBlOlwiZ3JvdXAtZm9vdGVyXCIsY2VsbHM6ZS5tYXAoQXJyYXkobiksZnVuY3Rpb24oKXtyZXR1cm57YmFja2dyb3VuZDpcIiNkZmRmZGZcIixjb2xvcjpcIiMzMzNcIn19KS5jb25jYXQobyl9KSxpfSxfaXNDb2x1bW5WaXNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl92aXNpYmxlQ29sdW1ucyhbZV0pLmxlbmd0aD4wJiYoZS5maWVsZHx8ZS5jb2x1bW5zKX0sX3Zpc2libGVDb2x1bW5zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3ZhciB0PSFlLmhpZGRlbjtyZXR1cm4gdCYmZS5jb2x1bW5zJiYodD1uLl92aXNpYmxlQ29sdW1ucyhlLmNvbHVtbnMpLmxlbmd0aD4wKSx0fSl9LF9oZWFkZXJSb3c6ZnVuY3Rpb24odCxuKXt2YXIgaT1lLm1hcCh0LmNlbGxzLGZ1bmN0aW9uKGUpe3JldHVybntiYWNrZ3JvdW5kOlwiIzdhN2E3YVwiLGNvbG9yOlwiI2ZmZlwiLHZhbHVlOmUudGl0bGUsY29sU3BhbjplLmNvbFNwYW4+MT9lLmNvbFNwYW46MSxyb3dTcGFuOnQucm93U3Bhbj4xJiYhZS5jb2xTcGFuP3Qucm93U3BhbjoxfX0pO3JldHVybiB0aGlzLl9oaWVyYXJjaGljYWwoKSYmKGlbMF0uY29sU3Bhbj10aGlzLl9kZXB0aCgpKzEpLHt0eXBlOlwiaGVhZGVyXCIsY2VsbHM6ZS5tYXAoQXJyYXkobi5sZW5ndGgpLGZ1bmN0aW9uKCl7cmV0dXJue2JhY2tncm91bmQ6XCIjN2E3YTdhXCIsY29sb3I6XCIjZmZmXCJ9fSkuY29uY2F0KGkpfX0sX3ByZXBlbmRIZWFkZXJSb3dzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5kYXRhU291cmNlLmdyb3VwKCksaT1be3Jvd1NwYW46MSxjZWxsczpbXSxpbmRleDowfV07Zm9yKHRoaXMuX3ByZXBhcmVIZWFkZXJSb3dzKGksdGhpcy5vcHRpb25zLmNvbHVtbnMpLHQ9aS5sZW5ndGgtMTt0Pj0wO3QtLSllLnVuc2hpZnQodGhpcy5faGVhZGVyUm93KGlbdF0sbikpfSxfcHJlcGFyZUhlYWRlclJvd3M6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHM9aXx8ZVtlLmxlbmd0aC0xXSxsPWVbcy5pbmRleCsxXSxjPTA7Zm9yKGE9MDt0Lmxlbmd0aD5hO2ErKylyPXRbYV0sdGhpcy5faXNDb2x1bW5WaXNpYmxlKHIpJiYobz17dGl0bGU6ci50aXRsZXx8ci5maWVsZCxjb2xTcGFuOjB9LHMuY2VsbHMucHVzaChvKSxyLmNvbHVtbnMmJnIuY29sdW1ucy5sZW5ndGgmJihsfHwobD17cm93U3BhbjowLGNlbGxzOltdLGluZGV4OmUubGVuZ3RofSxlLnB1c2gobCkpLG8uY29sU3Bhbj10aGlzLl90cmltQ29sdW1ucyh0aGlzLl92aXNpYmxlQ29sdW1ucyhyLmNvbHVtbnMpKS5sZW5ndGgsdGhpcy5fcHJlcGFyZUhlYWRlclJvd3MoZSxyLmNvbHVtbnMsbyxsKSxjKz1vLmNvbFNwYW4tMSxzLnJvd1NwYW49ZS5sZW5ndGgtcy5pbmRleCkpO24mJihuLmNvbFNwYW4rPWMpfSxfcm93czpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKSxyPXRoaXMuX2RhdGFSb3dzKHRoaXMuZGF0YVNvdXJjZS52aWV3KCksMCk7cmV0dXJuIHRoaXMuY29sdW1ucy5sZW5ndGgmJih0aGlzLl9wcmVwZW5kSGVhZGVyUm93cyhyKSx0PSExLG49ZS5tYXAodGhpcy5jb2x1bW5zLGUucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9vdGVyVGVtcGxhdGU/KHQ9ITAse2JhY2tncm91bmQ6XCIjZGZkZmRmXCIsY29sb3I6XCIjMzMzXCIsdmFsdWU6ZS5mb290ZXJUZW1wbGF0ZSh0aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpW2UuZmllbGRdKX0pOntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0sdGhpcykpLHQmJnIucHVzaCh7dHlwZTpcImZvb3RlclwiLGNlbGxzOmUubWFwKEFycmF5KGkubGVuZ3RoKSxmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kOlwiI2RmZGZkZlwiLGNvbG9yOlwiIzMzM1wifX0pLmNvbmNhdChuKX0pKSxyfSxfaGVhZGVyRGVwdGg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPTEscj0wO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5jb2x1bW5zJiYobj10aGlzLl9oZWFkZXJEZXB0aChlW3RdLmNvbHVtbnMpLG4+ciYmKHI9bikpO3JldHVybiBpK3J9LF9mcmVlemVQYW5lOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdmlzaWJsZUNvbHVtbnModGhpcy5vcHRpb25zLmNvbHVtbnN8fFtdKSxuPXRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX2xlYWZDb2x1bW5zKGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlLmxvY2tlZH0pKSkubGVuZ3RoO3JldHVybntyb3dTcGxpdDp0aGlzLl9oZWFkZXJEZXB0aCh0KSxjb2xTcGxpdDpuP24rdGhpcy5kYXRhU291cmNlLmdyb3VwKCkubGVuZ3RoOjB9fSxfY2VsbDpmdW5jdGlvbihlLHQpe3JldHVybiB0LmZpZWxkP3t2YWx1ZTplLmdldCh0LmZpZWxkKX06dm9pZCAwfSxfaGllcmFyY2hpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5oaWVyYXJjaHkmJnRoaXMuZGF0YVNvdXJjZS5sZXZlbH0sX2RlcHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5kYXRhU291cmNlLHI9MDtpZih0aGlzLl9oaWVyYXJjaGljYWwoKSl7Zm9yKGU9aS52aWV3KCksdD0wO2UubGVuZ3RoPnQ7dCsrKW49aS5sZXZlbChlW3RdKSxuPnImJihyPW4pO3IrK31lbHNlIHI9aS5ncm91cCgpLmxlbmd0aDtyZXR1cm4gcn0sX2NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kZXB0aCgpLG49ZS5tYXAoQXJyYXkodCksZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6MjB9fSk7cmV0dXJuIG4uY29uY2F0KGUubWFwKHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm57d2lkdGg6cGFyc2VJbnQoZS53aWR0aCwxMCksYXV0b1dpZHRoOmUud2lkdGg/ITE6ITB9fSkpfX0pLHQuRXhjZWxNaXhpbj17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3QuZXZlbnRzLnB1c2goXCJleGNlbEV4cG9ydFwiKSx0Lm9wdGlvbnMuZXhjZWw9ZS5leHRlbmQodC5vcHRpb25zLmV4Y2VsLHRoaXMub3B0aW9ucyksdC5zYXZlQXNFeGNlbD10aGlzLnNhdmVBc0V4Y2VsfSxvcHRpb25zOntwcm94eVVSTDpcIlwiLGFsbFBhZ2VzOiExLGZpbHRlcmFibGU6ITEsZmlsZU5hbWU6XCJFeHBvcnQueGxzeFwifSxzYXZlQXNFeGNlbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9ucy5leGNlbHx8e30saT1uZXcgdC5FeGNlbEV4cG9ydGVyKHtjb2x1bW5zOnRoaXMuY29sdW1ucyxkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZSxhbGxQYWdlczpuLmFsbFBhZ2VzLGZpbHRlcmFibGU6bi5maWx0ZXJhYmxlLGhpZXJhcmNoeTpuLmhpZXJhcmNoeX0pO2kud29ya2Jvb2soKS50aGVuKGUucHJveHkoZnVuY3Rpb24oZSl7aWYoIXRoaXMudHJpZ2dlcihcImV4Y2VsRXhwb3J0XCIse3dvcmtib29rOmV9KSl7dmFyIGk9bmV3IHQub294bWwuV29ya2Jvb2soZSk7dC5zYXZlQXMoe2RhdGFVUkk6aS50b0RhdGFVUkwoKSxmaWxlTmFtZTplLmZpbGVOYW1lfHxuLmZpbGVOYW1lLHByb3h5VVJMOm4ucHJveHlVUkwsZm9yY2VQcm94eTpuLmZvcmNlUHJveHl9KX19LHRoaXMpKX19fShrZW5kby5qUXVlcnksa2VuZG8pLGZ1bmN0aW9uKCl7a2VuZG8uZGF0YS50cmFuc3BvcnRzLnNpZ25hbHI9a2VuZG8uZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZSYmZS5zaWduYWxyP2Uuc2lnbmFscjp7fSxpPW4ucHJvbWlzZTtpZighaSl0aHJvdyBFcnJvcignVGhlIFwicHJvbWlzZVwiIG9wdGlvbiBtdXN0IGJlIHNldC4nKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBpLmRvbmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkuZmFpbCl0aHJvdyBFcnJvcignVGhlIFwicHJvbWlzZVwiIG9wdGlvbiBtdXN0IGJlIGEgUHJvbWlzZS4nKTtpZih0aGlzLnByb21pc2U9aSx0PW4uaHViLCF0KXRocm93IEVycm9yKCdUaGUgXCJodWJcIiBvcHRpb24gbXVzdCBiZSBzZXQuJyk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdC5vbnx8XCJmdW5jdGlvblwiIT10eXBlb2YgdC5pbnZva2UpdGhyb3cgRXJyb3IoJ1RoZSBcImh1YlwiIG9wdGlvbiBpcyBub3QgYSB2YWxpZCBTaWduYWxSIGh1YiBwcm94eS4nKTt0aGlzLmh1Yj10LGtlbmRvLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuLmluaXQuY2FsbCh0aGlzLGUpfSxwdXNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucy5zaWduYWxyLmNsaWVudHx8e307dC5jcmVhdGUmJnRoaXMuaHViLm9uKHQuY3JlYXRlLGUucHVzaENyZWF0ZSksdC51cGRhdGUmJnRoaXMuaHViLm9uKHQudXBkYXRlLGUucHVzaFVwZGF0ZSksdC5kZXN0cm95JiZ0aGlzLmh1Yi5vbih0LmRlc3Ryb3ksZS5wdXNoRGVzdHJveSl9LF9jcnVkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuaHViLG89dGhpcy5vcHRpb25zLnNpZ25hbHIuc2VydmVyO2lmKCFvfHwhb1t0XSl0aHJvdyBFcnJvcihrZW5kby5mb3JtYXQoJ1RoZSBcInNlcnZlci57MH1cIiBvcHRpb24gbXVzdCBiZSBzZXQuJyx0KSk7bj1bb1t0XV0saT10aGlzLnBhcmFtZXRlck1hcChlLmRhdGEsdCksJC5pc0VtcHR5T2JqZWN0KGkpfHxuLnB1c2goaSksdGhpcy5wcm9taXNlLmRvbmUoZnVuY3Rpb24oKXtyLmludm9rZS5hcHBseShyLG4pLmRvbmUoZS5zdWNjZXNzKS5mYWlsKGUuZXJyb3IpfSl9LHJlYWQ6ZnVuY3Rpb24oZSl7dGhpcy5fY3J1ZChlLFwicmVhZFwiKX0sY3JlYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX2NydWQoZSxcImNyZWF0ZVwiKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3RoaXMuX2NydWQoZSxcInVwZGF0ZVwiKX0sZGVzdHJveTpmdW5jdGlvbihlKXt0aGlzLl9jcnVkKGUsXCJkZXN0cm95XCIpfX0pfSgpLGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGUscil7dmFyIGEsZDtpZihudWxsPT1lfHxcIm5vbmVcIj09ZSlyZXR1cm4gbnVsbDtpZihlIGluc3RhbmNlb2YgcylyZXR1cm4gZTtpZihlPWUudG9Mb3dlckNhc2UoKSxhPW8uZXhlYyhlKSlyZXR1cm4gZT1cInRyYW5zcGFyZW50XCI9PWFbMV0/bmV3IGwoMSwxLDEsMCk6aSh1Lm5hbWVkQ29sb3JzW2FbMV1dLHIpLGUubWF0Y2g9W2FbMV1dLGU7aWYoKGE9L14jPyhbMC05YS1mXXsyfSkoWzAtOWEtZl17Mn0pKFswLTlhLWZdezJ9KS9pLmV4ZWMoZSkpP2Q9bmV3IGMobihhWzFdLDE2KSxuKGFbMl0sMTYpLG4oYVszXSwxNiksMSk6KGE9L14jPyhbMC05YS1mXSkoWzAtOWEtZl0pKFswLTlhLWZdKS9pLmV4ZWMoZSkpP2Q9bmV3IGMobihhWzFdK2FbMV0sMTYpLG4oYVsyXSthWzJdLDE2KSxuKGFbM10rYVszXSwxNiksMSk6KGE9L15yZ2JcXChcXHMqKFswLTldKylcXHMqLFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKlxcKS8uZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0sMTApLG4oYVsyXSwxMCksbihhWzNdLDEwKSwxKTooYT0vXnJnYmFcXChcXHMqKFswLTldKylcXHMqLFxccyooWzAtOV0rKVxccyosXFxzKihbMC05XSspXFxzKixcXHMqKFswLTkuXSspXFxzKlxcKS8uZXhlYyhlKSk/ZD1uZXcgYyhuKGFbMV0sMTApLG4oYVsyXSwxMCksbihhWzNdLDEwKSx0KGFbNF0pKTooYT0vXnJnYlxcKFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccyosXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqXFwpLy5leGVjKGUpKT9kPW5ldyBsKHQoYVsxXSkvMTAwLHQoYVsyXSkvMTAwLHQoYVszXSkvMTAwLDEpOihhPS9ecmdiYVxcKFxccyooWzAtOV0qXFwuP1swLTldKyklXFxzKixcXHMqKFswLTldKlxcLj9bMC05XSspJVxccyosXFxzKihbMC05XSpcXC4/WzAtOV0rKSVcXHMqLFxccyooWzAtOS5dKylcXHMqXFwpLy5leGVjKGUpKSYmKGQ9bmV3IGwodChhWzFdKS8xMDAsdChhWzJdKS8xMDAsdChhWzNdKS8xMDAsdChhWzRdKSkpLGQpZC5tYXRjaD1hO2Vsc2UgaWYoIXIpdGhyb3cgRXJyb3IoXCJDYW5ub3QgcGFyc2UgY29sb3I6IFwiK2UpO3JldHVybiBkfWZ1bmN0aW9uIHIoZSx0LG4pe2ZvcihufHwobj1cIjBcIiksZT1lLnRvU3RyaW5nKDE2KTt0PmUubGVuZ3RoOyllPVwiMFwiK2U7cmV0dXJuIGV9dmFyIG8sYSxzLGwsYyxkLHU9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz11LmZvcm1hdHM7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGU9YS5yZXNvbHZlQ29sb3IoZSkscj0wO3MubGVuZ3RoPnI7cisrKXQ9c1tyXS5yZSxuPXNbcl0ucHJvY2VzcyxpPXQuZXhlYyhlKSxpJiYobz1uKGkpLGEucj1vWzBdLGEuZz1vWzFdLGEuYj1vWzJdKTtlbHNlIGEucj1hcmd1bWVudHNbMF0sYS5nPWFyZ3VtZW50c1sxXSxhLmI9YXJndW1lbnRzWzJdO2Eucj1hLm5vcm1hbGl6ZUJ5dGUoYS5yKSxhLmc9YS5ub3JtYWxpemVCeXRlKGEuZyksYS5iPWEubm9ybWFsaXplQnl0ZShhLmIpfTt1LnByb3RvdHlwZT17dG9IZXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wYWREaWdpdCxuPWUuci50b1N0cmluZygxNiksaT1lLmcudG9TdHJpbmcoMTYpLHI9ZS5iLnRvU3RyaW5nKDE2KTtyZXR1cm5cIiNcIit0KG4pK3QoaSkrdChyKX0scmVzb2x2ZUNvbG9yOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fFwiYmxhY2tcIixcIiNcIj09ZS5jaGFyQXQoMCkmJihlPWUuc3Vic3RyKDEsNikpLGU9ZS5yZXBsYWNlKC8gL2csXCJcIiksZT1lLnRvTG93ZXJDYXNlKCksZT11Lm5hbWVkQ29sb3JzW2VdfHxlfSxub3JtYWxpemVCeXRlOmZ1bmN0aW9uKGUpe3JldHVybiAwPmV8fGlzTmFOKGUpPzA6ZT4yNTU/MjU1OmV9LHBhZERpZ2l0OmZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5sZW5ndGg/XCIwXCIrZTplfSxicmlnaHRuZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1NYXRoLnJvdW5kO3JldHVybiB0LnI9bih0Lm5vcm1hbGl6ZUJ5dGUodC5yKmUpKSx0Lmc9bih0Lm5vcm1hbGl6ZUJ5dGUodC5nKmUpKSx0LmI9bih0Lm5vcm1hbGl6ZUJ5dGUodC5iKmUpKSx0fSxwZXJjQnJpZ2h0bmVzczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIE1hdGguc3FydCguMjQxKmUuciplLnIrLjY5MSplLmcqZS5nKy4wNjgqZS5iKmUuYil9fSx1LmZvcm1hdHM9W3tyZTovXnJnYlxcKChcXGR7MSwzfSksXFxzKihcXGR7MSwzfSksXFxzKihcXGR7MSwzfSlcXCkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0sMTApLG4oZVsyXSwxMCksbihlWzNdLDEwKV19fSx7cmU6L14oXFx3ezJ9KShcXHd7Mn0pKFxcd3syfSkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0sMTYpLG4oZVsyXSwxNiksbihlWzNdLDE2KV19fSx7cmU6L14oXFx3ezF9KShcXHd7MX0pKFxcd3sxfSkkLyxwcm9jZXNzOmZ1bmN0aW9uKGUpe3JldHVybltuKGVbMV0rZVsxXSwxNiksbihlWzJdK2VbMl0sMTYpLG4oZVszXStlWzNdLDE2KV19fV0sdS5uYW1lZENvbG9ycz17YXF1YTpcIjAwZmZmZlwiLGF6dXJlOlwiZjBmZmZmXCIsYmVpZ2U6XCJmNWY1ZGNcIixibGFjazpcIjAwMDAwMFwiLGJsdWU6XCIwMDAwZmZcIixicm93bjpcImE1MmEyYVwiLGNvcmFsOlwiZmY3ZjUwXCIsY3lhbjpcIjAwZmZmZlwiLGRhcmtibHVlOlwiMDAwMDhiXCIsZGFya2N5YW46XCIwMDhiOGJcIixkYXJrZ3JheTpcImE5YTlhOVwiLGRhcmtncmVlbjpcIjAwNjQwMFwiLGRhcmtvcmFuZ2U6XCJmZjhjMDBcIixkYXJrcmVkOlwiOGIwMDAwXCIsZGltZ3JheTpcIjY5Njk2OVwiLGZ1Y2hzaWE6XCJmZjAwZmZcIixnb2xkOlwiZmZkNzAwXCIsZ29sZGVucm9kOlwiZGFhNTIwXCIsZ3JheTpcIjgwODA4MFwiLGdyZWVuOlwiMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCJhZGZmMmZcIixpbmRpZ286XCI0YjAwODJcIixpdm9yeTpcImZmZmZmMFwiLGtoYWtpOlwiZjBlNjhjXCIsbGlnaHRibHVlOlwiYWRkOGU2XCIsbGlnaHRncmV5OlwiZDNkM2QzXCIsbGlnaHRncmVlbjpcIjkwZWU5MFwiLGxpZ2h0cGluazpcImZmYjZjMVwiLGxpZ2h0eWVsbG93OlwiZmZmZmUwXCIsbGltZTpcIjAwZmYwMFwiLGxpbWVncmVlbjpcIjMyY2QzMlwiLGxpbmVuOlwiZmFmMGU2XCIsbWFnZW50YTpcImZmMDBmZlwiLG1hcm9vbjpcIjgwMDAwMFwiLG1lZGl1bWJsdWU6XCIwMDAwY2RcIixuYXZ5OlwiMDAwMDgwXCIsb2xpdmU6XCI4MDgwMDBcIixvcmFuZ2U6XCJmZmE1MDBcIixvcmFuZ2VyZWQ6XCJmZjQ1MDBcIixvcmNoaWQ6XCJkYTcwZDZcIixwaW5rOlwiZmZjMGNiXCIscGx1bTpcImRkYTBkZFwiLHB1cnBsZTpcIjgwMDA4MFwiLHJlZDpcImZmMDAwMFwiLHJveWFsYmx1ZTpcIjQxNjllMVwiLHNhbG1vbjpcImZhODA3MlwiLHNpbHZlcjpcImMwYzBjMFwiLHNreWJsdWU6XCI4N2NlZWJcIixzbGF0ZWJsdWU6XCI2YTVhY2RcIixzbGF0ZWdyYXk6XCI3MDgwOTBcIixzbm93OlwiZmZmYWZhXCIsc3RlZWxibHVlOlwiNDY4MmI0XCIsdGFuOlwiZDJiNDhjXCIsdGVhbDpcIjAwODA4MFwiLHRvbWF0bzpcImZmNjM0N1wiLHR1cnF1b2lzZTpcIjQwZTBkMFwiLHZpb2xldDpcImVlODJlZVwiLHdoZWF0OlwiZjVkZWIzXCIsd2hpdGU6XCJmZmZmZmZcIix3aGl0ZXNtb2tlOlwiZjVmNWY1XCIseWVsbG93OlwiZmZmZjAwXCIseWVsbG93Z3JlZW46XCI5YWNkMzJcIn0sbz1bXCJ0cmFuc3BhcmVudFwiXTtmb3IoYSBpbiB1Lm5hbWVkQ29sb3JzKXUubmFtZWRDb2xvcnMuaGFzT3duUHJvcGVydHkoYSkmJm8ucHVzaChhKTtvPVJlZ0V4cChcIl4oXCIrby5qb2luKFwifFwiKStcIikoXFxcXFd8JClcIixcImlcIikscz1rZW5kby5DbGFzcy5leHRlbmQoe3RvSFNWOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHRvUkdCOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHRvSGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9CeXRlcygpLnRvSGV4KCl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdG9Dc3M6ZnVuY3Rpb24oKXtyZXR1cm5cIiNcIit0aGlzLnRvSGV4KCl9LHRvQ3NzUmdiYTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudG9CeXRlcygpO3JldHVyblwicmdiYShcIitlLnIrXCIsIFwiK2UuZytcIiwgXCIrZS5iK1wiLCBcIit0KCgrdGhpcy5hKS50b0ZpeGVkKDMpKStcIilcIn0sdG9EaXNwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIGtlbmRvLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY5PmtlbmRvLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uP3RoaXMudG9Dc3MoKTp0aGlzLnRvQ3NzUmdiYSgpfSxlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10aGlzfHxudWxsIT09ZSYmdGhpcy50b0Nzc1JnYmEoKT09aShlKS50b0Nzc1JnYmEoKX0sZGlmZjpmdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiAwLzA7dmFyIHQ9dGhpcy50b0J5dGVzKCk7cmV0dXJuIGU9ZS50b0J5dGVzKCksTWF0aC5zcXJ0KE1hdGgucG93KC4zKih0LnItZS5yKSwyKStNYXRoLnBvdyguNTkqKHQuZy1lLmcpLDIpK01hdGgucG93KC4xMSoodC5iLWUuYiksMikpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudG9CeXRlcygpO3JldHVybiBlPT09dGhpcyYmKGU9bmV3IGMoZS5yLGUuZyxlLmIsZS5hKSksZX19KSxsPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMucj1lLHRoaXMuZz10LHRoaXMuYj1uLHRoaXMuYT1pfSx0b0hTVjpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLnIsaT10aGlzLmcscj10aGlzLmIsbz1NYXRoLm1pbihuLGksciksYT1NYXRoLm1heChuLGkscikscz1hLGw9YS1vO3JldHVybiAwPT09bD9uZXcgZCgwLDAscyx0aGlzLmEpOigwIT09YT8odD1sL2EsZT1uPT1hPyhpLXIpL2w6aT09YT8yKyhyLW4pL2w6NCsobi1pKS9sLGUqPTYwLDA+ZSYmKGUrPTM2MCkpOih0PTAsZT0tMSksbmV3IGQoZSx0LHMsdGhpcy5hKSl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGMoMjU1KnRoaXMuciwyNTUqdGhpcy5nLDI1NSp0aGlzLmIsdGhpcy5hKX19KSxjPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMucj1NYXRoLnJvdW5kKGUpLHRoaXMuZz1NYXRoLnJvdW5kKHQpLHRoaXMuYj1NYXRoLnJvdW5kKG4pLHRoaXMuYT1pfSx0b1JHQjpmdW5jdGlvbigpe3JldHVybiBuZXcgbCh0aGlzLnIvMjU1LHRoaXMuZy8yNTUsdGhpcy5iLzI1NSx0aGlzLmEpfSx0b0hTVjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvUkdCKCkudG9IU1YoKX0sdG9IZXg6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLnIsMikrcih0aGlzLmcsMikrcih0aGlzLmIsMil9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KSxkPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuaD1lLHRoaXMucz10LHRoaXMudj1uLHRoaXMuYT1pfSx0b1JHQjpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHMsYz10aGlzLmgsZD10aGlzLnMsdT10aGlzLnY7aWYoMD09PWQpdD1uPWk9dTtlbHNlIHN3aXRjaChjLz02MCxlPU1hdGguZmxvb3IoYykscj1jLWUsbz11KigxLWQpLGE9dSooMS1kKnIpLHM9dSooMS1kKigxLXIpKSxlKXtjYXNlIDA6dD11LG49cyxpPW87YnJlYWs7Y2FzZSAxOnQ9YSxuPXUsaT1vO2JyZWFrO2Nhc2UgMjp0PW8sbj11LGk9czticmVhaztjYXNlIDM6dD1vLG49YSxpPXU7YnJlYWs7Y2FzZSA0OnQ9cyxuPW8saT11O2JyZWFrO2RlZmF1bHQ6dD11LG49byxpPWF9cmV0dXJuIG5ldyBsKHQsbixpLHRoaXMuYSl9LHRvQnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1JHQigpLnRvQnl0ZXMoKX19KSx1LmZyb21CeXRlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3IGMoZSx0LG4sbnVsbCE9aT9pOjEpfSx1LmZyb21SR0I9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyBsKGUsdCxuLG51bGwhPWk/aToxKX0sdS5mcm9tSFNWPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcgZChlLHQsbixudWxsIT1pP2k6MSl9LGtlbmRvLkNvbG9yPXUsa2VuZG8ucGFyc2VDb2xvcj1pfSh3aW5kb3cua2VuZG8ualF1ZXJ5LHBhcnNlRmxvYXQscGFyc2VJbnQpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHR5cGVvZiBlIT09Rn1mdW5jdGlvbiBuKGUsdCl7dmFyIG49aSh0KTtyZXR1cm4gQS5yb3VuZChlKm4pL259ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT9BLnBvdygxMCxlKToxfWZ1bmN0aW9uIHIoZSx0LG4pe3JldHVybiBBLm1heChBLm1pbihlLG4pLHQpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUqUH1mdW5jdGlvbiBhKGUpe3JldHVybiBlL1B9ZnVuY3Rpb24gcyhlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIGwoZSxuKXtyZXR1cm4gdChlKT9lOm59ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZSplfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbj1bXTtmb3IodCBpbiBlKW4ucHVzaCh0K2VbdF0pO3JldHVybiBuLnNvcnQoKS5qb2luKFwiXCIpfWZ1bmN0aW9uIHUoZSl7dmFyIHQsbj0yMTY2MTM2MjYxO2Zvcih0PTA7ZS5sZW5ndGg+dDsrK3Qpbis9KG48PDEpKyhuPDw0KSsobjw8NykrKG48PDgpKyhuPDwyNCksbl49ZS5jaGFyQ29kZUF0KHQpO3JldHVybiBuPj4+MH1mdW5jdGlvbiBoKGUpe3JldHVybiB1KGQoZSkpfWZ1bmN0aW9uIHAoZSl7dmFyIHQsbj1lLmxlbmd0aCxpPUkscj16O2Zvcih0PTA7bj50O3QrKylyPUEubWF4KHIsZVt0XSksaT1BLm1pbihpLGVbdF0pO3JldHVybnttaW46aSxtYXg6cn19ZnVuY3Rpb24gZihlKXtyZXR1cm4gcChlKS5taW59ZnVuY3Rpb24gZyhlKXtyZXR1cm4gcChlKS5tYXh9ZnVuY3Rpb24gbShlKXtyZXR1cm4gXyhlKS5taW59ZnVuY3Rpb24gdihlKXtyZXR1cm4gXyhlKS5tYXh9ZnVuY3Rpb24gXyhlKXt2YXIgdCxuLGkscj1JLG89ejtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0sbnVsbCE9PWkmJmlzRmluaXRlKGkpJiYocj1BLm1pbihyLGkpLG89QS5tYXgobyxpKSk7cmV0dXJue21pbjpyPT09ST92b2lkIDA6cixtYXg6bz09PXo/dm9pZCAwOm99fWZ1bmN0aW9uIHkoZSl7cmV0dXJuIGU/ZVtlLmxlbmd0aC0xXTp2b2lkIDB9ZnVuY3Rpb24gdyhlLHQpe3JldHVybiBlLnB1c2guYXBwbHkoZSx0KSxlfWZ1bmN0aW9uIGIoZSl7cmV0dXJuIEUudGVtcGxhdGUoZSx7dXNlV2l0aEJsb2NrOiExLHBhcmFtTmFtZTpcImRcIn0pfWZ1bmN0aW9uIGsoZSxuKXtyZXR1cm4gdChuKSYmbnVsbCE9PW4/XCIgXCIrZStcIj0nXCIrbitcIicgXCI6XCJcIn1mdW5jdGlvbiB4KGUpe3ZhciB0LG49XCJcIjtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW4rPWsoZVt0XVswXSxlW3RdWzFdKTtyZXR1cm4gbn1mdW5jdGlvbiBDKGUpe3ZhciBuLGkscj1cIlwiO2ZvcihuPTA7ZS5sZW5ndGg+bjtuKyspaT1lW25dWzFdLHQoaSkmJihyKz1lW25dWzBdK1wiOlwiK2krXCI7XCIpO3JldHVyblwiXCIhPT1yP3I6dm9pZCAwfWZ1bmN0aW9uIFMoZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlKz1cInB4XCIpLGV9ZnVuY3Rpb24gVChlKXt2YXIgdCxuLGk9W107aWYoZSlmb3IodD1FLnRvSHlwaGVucyhlKS5zcGxpdChcIi1cIiksbj0wO3QubGVuZ3RoPm47bisrKWkucHVzaChcImstcG9zLVwiK3Rbbl0pO3JldHVybiBpLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIEQoZSl7cmV0dXJuXCJcIj09PWV8fG51bGw9PT1lfHxcIm5vbmVcIj09PWV8fFwidHJhbnNwYXJlbnRcIj09PWV8fCF0KGUpfXZhciBBPU1hdGgsRT13aW5kb3cua2VuZG8sTT1FLmRlZXBFeHRlbmQsUD1BLlBJLzE4MCxJPU51bWJlci5NQVhfVkFMVUUsej0tTnVtYmVyLk1BWF9WQUxVRSxGPVwidW5kZWZpbmVkXCIsUj1EYXRlLm5vdztSfHwoUj1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSksTShFLHt1dGlsOntNQVhfTlVNOkksTUlOX05VTTp6LGFwcGVuZDp3LGFycmF5TGltaXRzOnAsYXJyYXlNaW46ZixhcnJheU1heDpnLGRlZmluZWQ6dCxkZWc6YSxoYXNoS2V5OnUsaGFzaE9iamVjdDpoLGlzTnVtYmVyOnMsaXNUcmFuc3BhcmVudDpELGxhc3Q6eSxsaW1pdFZhbHVlOnIsbm93OlIsb2JqZWN0S2V5OmQscm91bmQ6bixyYWQ6byxyZW5kZXJBdHRyOmsscmVuZGVyQWxsQXR0cjp4LHJlbmRlclBvczpULHJlbmRlclNpemU6UyxyZW5kZXJTdHlsZTpDLHJlbmRlclRlbXBsYXRlOmIsc3BhcnNlQXJyYXlMaW1pdHM6XyxzcGFyc2VBcnJheU1pbjptLHNwYXJzZUFycmF5TWF4OnYsc3FyOmMsdmFsdWVPckRlZmF1bHQ6bH19KSxFLmRhdGF2aXoudXRpbD1FLnV0aWx9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgbixpLHIsYSxzLGwsYyxkPVwiXCIsdT0wO2ZvcihlPXQoZSk7ZS5sZW5ndGg+dTspbj1lLmNoYXJDb2RlQXQodSsrKSxpPWUuY2hhckNvZGVBdCh1KyspLHI9ZS5jaGFyQ29kZUF0KHUrKyksYT1uPj4yLHM9KDMmbik8PDR8aT4+NCxsPSgxNSZpKTw8MnxyPj42LGM9NjMmcixpc05hTihpKT9sPWM9NjQ6aXNOYU4ocikmJihjPTY0KSxkPWQrby5jaGFyQXQoYSkrby5jaGFyQXQocykrby5jaGFyQXQobCkrby5jaGFyQXQoYyk7cmV0dXJuIGR9ZnVuY3Rpb24gdChlKXt2YXIgdCxuLGk7Zm9yKGU9ZS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKSx0PVwiXCIsbj0wO2UubGVuZ3RoPm47bisrKWk9ZS5jaGFyQ29kZUF0KG4pLDEyOD5pP3QrPXIoaSk6MjA0OD5pPyh0Kz1yKDE5MnxpPj4+NiksdCs9cigxMjh8NjMmaSkpOjY1NTM2PmkmJih0Kz1yKDIyNHxpPj4+MTIpLHQrPXIoMTI4fGk+Pj42JjYzKSx0Kz1yKDEyOHw2MyZpKSk7cmV0dXJuIHR9dmFyIG49d2luZG93LmtlbmRvLGk9bi5kZWVwRXh0ZW5kLHI9U3RyaW5nLmZyb21DaGFyQ29kZSxvPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtpKG4udXRpbCx7ZW5jb2RlQmFzZTY0OmUsZW5jb2RlVVRGODp0fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgsbj13aW5kb3cua2VuZG8saT1uLmRlZXBFeHRlbmQscj1lLmluQXJyYXksbz17b2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVycz10aGlzLl9vYnNlcnZlcnN8fFtdfSxhZGRPYnNlcnZlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzP3RoaXMuX29ic2VydmVycy5wdXNoKGUpOnRoaXMuX29ic2VydmVycz1bZV0sdGhpc30scmVtb3ZlT2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vYnNlcnZlcnMoKSxuPXIoZSx0KTtyZXR1cm4tMSE9biYmdC5zcGxpY2UobiwxKSx0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuX29ic2VydmVycztpZihyJiYhdGhpcy5fc3VzcGVuZGVkKWZvcihpPTA7ci5sZW5ndGg+aTtpKyspbj1yW2ldLG5bZV0mJm5bZV0odCk7cmV0dXJuIHRoaXN9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKFwib3B0aW9uc0NoYW5nZVwiLGUpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJnZW9tZXRyeUNoYW5nZVwiLGUpfSxzdXNwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1c3BlbmRlZD0odGhpcy5fc3VzcGVuZGVkfHwwKSsxLHRoaXN9LHJlc3VtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdXNwZW5kZWQ9dC5tYXgoKHRoaXMuX3N1c3BlbmRlZHx8MCktMSwwKSx0aGlzfSxfb2JzZXJ2ZXJGaWVsZDpmdW5jdGlvbihlLHQpe3RoaXNbZV0mJnRoaXNbZV0ucmVtb3ZlT2JzZXJ2ZXIodGhpcyksdGhpc1tlXT10LHQuYWRkT2JzZXJ2ZXIodGhpcyl9fTtpKG4se21peGluczp7T2JzZXJ2ZXJzTWl4aW46b319KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gbnVsbD09PWU/bnVsbDplIGluc3RhbmNlb2YgbT9lOm5ldyBtKGUpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJnkuaXNGdW5jdGlvbihlLm1hdHJpeCk/ZS5tYXRyaXgoKTplfWZ1bmN0aW9uIGkoZSx0LG4saSl7dmFyIHI9MCxvPTA7cmV0dXJuIGkmJihyPXYuYXRhbjIoaS5jKm4saS5hKnQpLDAhPT1pLmImJihvPXYuYXRhbjIoaS5kKm4saS5iKnQpKSkse3g6cix5Om99fWZ1bmN0aW9uIHIoZSx0KXtmb3IoO3Q+ZTspZSs9OTA7cmV0dXJuIGV9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuLGkscjtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWk9dFtuXSxyPWkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkraS5zdWJzdHJpbmcoMSxpLmxlbmd0aCksZVtcInNldFwiK3JdPWEoaSksZVtcImdldFwiK3JdPXMoaSl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbZV0hPT10JiYodGhpc1tlXT10LHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSksdGhpc319ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19ZnVuY3Rpb24gbChlLHQsbil7ZT50JiYodCs9MzYwKTt2YXIgaT12LmFicyh0LWUpO3JldHVybiBufHwoaT0zNjAtaSksaX1mdW5jdGlvbiBjKGUsdCxuLGkscixvKXt2YXIgYT1EKChyLWUpL24sMykscz1EKChvLXQpL2ksMyk7cmV0dXJuIEQoVCh2LmF0YW4yKHMsYSkpKX1mdW5jdGlvbiBkKGUsdCxuLGkscixvLGEscyl7dmFyIGQsdSxoLHAsZixnLG0seSx3LGIsayx4LEMsUyxULEQsQSxFO2lmKHQhPT1pKXc9bi1lLGI9aS10LGs9XyhyLDIpLHg9XyhvLDIpLEM9KHgqdyooZStuKStrKmIqKHQraSkpLygyKmsqYiksUz1DLWksVD0tKHcqeCkvKGsqYiksZj0xL2srXyhULDIpL3gsZz0yKihUKlMveC1uL2spLG09XyhuLDIpL2srXyhTLDIpL3gtMSx5PXYuc3FydChfKGcsMiktNCpmKm0pLGQ9KC1nLXkpLygyKmYpLHU9QytUKmQsaD0oLWcreSkvKDIqZikscD1DK1QqaDtlbHNle2lmKGU9PT1uKXJldHVybiExO2c9LTIqaSxtPV8oKG4tZSkqby8oMipyKSwyKStfKGksMiktXyhvLDIpLHk9di5zcXJ0KF8oZywyKS00Km0pLGQ9aD0oZStuKS8yLHU9KC1nLXkpLzIscD0oLWcreSkvMn1yZXR1cm4gRD1jKGQsdSxyLG8sZSx0KSxBPWMoZCx1LHIsbyxuLGkpLEU9bChELEEscyksKGEmJjE4MD49RXx8IWEmJkU+MTgwKSYmKGQ9aCx1PXAsRD1jKGQsdSxyLG8sZSx0KSxBPWMoZCx1LHIsbyxuLGkpKSx7Y2VudGVyOm5ldyBQKGQsdSksc3RhcnRBbmdsZTpELGVuZEFuZ2xlOkF9fXZhciB1LGgscCxmLGcsbSx2PU1hdGgsXz12LnBvdyx5PXdpbmRvdy5rZW5kbyx3PXkuQ2xhc3MsYj15LmRlZXBFeHRlbmQsaz15Lm1peGlucy5PYnNlcnZlcnNNaXhpbix4PXkudXRpbCxDPXguZGVmaW5lZCxTPXgucmFkLFQ9eC5kZWcsRD14LnJvdW5kLEE9di5QSS8yLEU9eC5NSU5fTlVNLE09eC5NQVhfTlVNLFA9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLng9ZXx8MCx0aGlzLnk9dHx8MH0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLng9PT10aGlzLngmJmUueT09PXRoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFAodGhpcy54LHRoaXMueSl9LHJvdGF0ZTpmdW5jdGlvbihlLG4pe3JldHVybiB0aGlzLnRyYW5zZm9ybSh0KCkucm90YXRlKGUsbikpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy54Kz1lLHRoaXMueSs9dCx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sdHJhbnNsYXRlV2l0aDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGUoZS54LGUueSl9LG1vdmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy54PXRoaXMueT0wLHRoaXMudHJhbnNsYXRlKGUsdCl9LHNjYWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEModCl8fCh0PWUpLHRoaXMueCo9ZSx0aGlzLnkqPXQsdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LHNjYWxlQ29weTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNsb25lKCkuc2NhbGUoZSx0KX0sdHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0PW4oZSksaT10aGlzLngscj10aGlzLnk7cmV0dXJuIHRoaXMueD10LmEqaSt0LmMqcit0LmUsdGhpcy55PXQuYippK3QuZCpyK3QuZix0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sdHJhbnNmb3JtQ29weTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIGUmJnQudHJhbnNmb3JtKGUpLHR9LGRpc3RhbmNlVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy54LWUueCxuPXRoaXMueS1lLnk7cmV0dXJuIHYuc3FydCh0KnQrbipuKX0scm91bmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMueD1EKHRoaXMueCxlKSx0aGlzLnk9RCh0aGlzLnksZSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oZSl7dmFyIHQ9QyhlKSxuPXQ/RCh0aGlzLngsZSk6dGhpcy54LGk9dD9EKHRoaXMueSxlKTp0aGlzLnk7cmV0dXJuW24saV19fSk7byhQLmZuLFtcInhcIixcInlcIl0pLGIoUC5mbixrKSxQLmZuLnRvU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy54LGk9dGhpcy55O3JldHVybiBDKGUpJiYobj1EKG4sZSksaT1EKGksZSkpLHQ9dHx8XCIgXCIsbit0K2l9LFAuY3JlYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEMoZSk/ZSBpbnN0YW5jZW9mIFA/ZToxPT09YXJndW1lbnRzLmxlbmd0aCYmMj09PWUubGVuZ3RoP25ldyBQKGVbMF0sZVsxXSk6bmV3IFAoZSx0KTp2b2lkIDB9LFAubWluPWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXguTUFYX05VTSxpPXguTUFYX05VTTtmb3IoZT0wO2FyZ3VtZW50cy5sZW5ndGg+ZTtlKyspdD1hcmd1bWVudHNbZV0sbj12Lm1pbih0LngsbiksaT12Lm1pbih0LnksaSk7cmV0dXJuIG5ldyBQKG4saSl9LFAubWF4PWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXguTUlOX05VTSxpPXguTUlOX05VTTtmb3IoZT0wO2FyZ3VtZW50cy5sZW5ndGg+ZTtlKyspdD1hcmd1bWVudHNbZV0sbj12Lm1heCh0LngsbiksaT12Lm1heCh0LnksaSk7cmV0dXJuIG5ldyBQKG4saSl9LFAubWluUG9pbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFAoRSxFKX0sUC5tYXhQb2ludD1mdW5jdGlvbigpe3JldHVybiBuZXcgUChNLE0pfSxQLlpFUk89bmV3IFAoMCwwKSx1PXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy53aWR0aD1lfHwwLHRoaXMuaGVpZ2h0PXR8fDB9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS53aWR0aD09PXRoaXMud2lkdGgmJmUuaGVpZ2h0PT09dGhpcy5oZWlnaHR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciB0PUMoZSksbj10P0QodGhpcy53aWR0aCxlKTp0aGlzLndpZHRoLGk9dD9EKHRoaXMuaGVpZ2h0LGUpOnRoaXMuaGVpZ2h0O3JldHVybltuLGldfX0pLG8odS5mbixbXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdKSxiKHUuZm4sayksdS5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQyhlKT9lIGluc3RhbmNlb2YgdT9lOjE9PT1hcmd1bWVudHMubGVuZ3RoJiYyPT09ZS5sZW5ndGg/bmV3IHUoZVswXSxlWzFdKTpuZXcgdShlLHQpOnZvaWQgMH0sdS5aRVJPPW5ldyB1KDAsMCksaD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc2V0T3JpZ2luKGV8fG5ldyBQKSx0aGlzLnNldFNpemUodHx8bmV3IHUpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzLm9yaWdpbi5jbG9uZSgpLHRoaXMuc2l6ZS5jbG9uZSgpKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZlLnNpemUuZXF1YWxzKHRoaXMuc2l6ZSl9LHNldE9yaWdpbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJGaWVsZChcIm9yaWdpblwiLFAuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sZ2V0T3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2lufSxzZXRTaXplOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwic2l6ZVwiLHUuY3JlYXRlKGUpKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCksdGhpc30sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9LHdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZS53aWR0aH0saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZS5oZWlnaHR9LHRvcExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKX0sYm90dG9tUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKS50cmFuc2xhdGUodGhpcy53aWR0aCgpLHRoaXMuaGVpZ2h0KCkpfSx0b3BSaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbi5jbG9uZSgpLnRyYW5zbGF0ZSh0aGlzLndpZHRoKCksMCl9LGJvdHRvbUxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW4uY2xvbmUoKS50cmFuc2xhdGUoMCx0aGlzLmhlaWdodCgpKX0sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luLmNsb25lKCkudHJhbnNsYXRlKHRoaXMud2lkdGgoKS8yLHRoaXMuaGVpZ2h0KCkvMil9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50b3BMZWZ0KCkudHJhbnNmb3JtQ29weShlKSxuPXRoaXMudG9wUmlnaHQoKS50cmFuc2Zvcm1Db3B5KGUpLGk9dGhpcy5ib3R0b21SaWdodCgpLnRyYW5zZm9ybUNvcHkoZSkscj10aGlzLmJvdHRvbUxlZnQoKS50cmFuc2Zvcm1Db3B5KGUpO3JldHVybiBoLmZyb21Qb2ludHModCxuLGkscil9fSksYihoLmZuLGspLGguZnJvbVBvaW50cz1mdW5jdGlvbigpe3ZhciBlPVAubWluLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PVAubWF4LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPW5ldyB1KHQueC1lLngsdC55LWUueSk7cmV0dXJuIG5ldyBoKGUsbil9LGgudW5pb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaC5mcm9tUG9pbnRzKFAubWluKGUudG9wTGVmdCgpLHQudG9wTGVmdCgpKSxQLm1heChlLmJvdHRvbVJpZ2h0KCksdC5ib3R0b21SaWdodCgpKSl9LGguaW50ZXJzZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9e2xlZnQ6ZS50b3BMZWZ0KCkueCx0b3A6ZS50b3BMZWZ0KCkueSxyaWdodDplLmJvdHRvbVJpZ2h0KCkueCxib3R0b206ZS5ib3R0b21SaWdodCgpLnl9LHQ9e2xlZnQ6dC50b3BMZWZ0KCkueCx0b3A6dC50b3BMZWZ0KCkueSxyaWdodDp0LmJvdHRvbVJpZ2h0KCkueCxib3R0b206dC5ib3R0b21SaWdodCgpLnl9LHQucmlnaHQ+PWUubGVmdCYmZS5yaWdodD49dC5sZWZ0JiZ0LmJvdHRvbT49ZS50b3AmJmUuYm90dG9tPj10LnRvcD9oLmZyb21Qb2ludHMobmV3IFAodi5tYXgoZS5sZWZ0LHQubGVmdCksdi5tYXgoZS50b3AsdC50b3ApKSxuZXcgUCh2Lm1pbihlLnJpZ2h0LHQucmlnaHQpLHYubWluKGUuYm90dG9tLHQuYm90dG9tKSkpOnZvaWQgMH0scD13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuc2V0Q2VudGVyKGV8fG5ldyBQKSx0aGlzLnNldFJhZGl1cyh0fHwwKX0sc2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwiY2VudGVyXCIsUC5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZW50ZXJ9LGVxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5jZW50ZXIuZXF1YWxzKHRoaXMuY2VudGVyKSYmZS5yYWRpdXM9PT10aGlzLnJhZGl1c30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5jZW50ZXIuY2xvbmUoKSx0aGlzLnJhZGl1cyl9LHBvaW50QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3BvaW50QXQoUyhlKSl9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYT1QLm1heFBvaW50KCkscz1QLm1pblBvaW50KCksbD1pKHRoaXMuY2VudGVyLHRoaXMucmFkaXVzLHRoaXMucmFkaXVzLGUpO2Zvcih0PTA7ND50O3QrKyluPXRoaXMuX3BvaW50QXQobC54K3QqQSkudHJhbnNmb3JtQ29weShlKSxyPXRoaXMuX3BvaW50QXQobC55K3QqQSkudHJhbnNmb3JtQ29weShlKSxvPW5ldyBQKG4ueCxyLnkpLGE9UC5taW4oYSxvKSxzPVAubWF4KHMsbyk7cmV0dXJuIGguZnJvbVBvaW50cyhhLHMpfSxfcG9pbnRBdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNlbnRlcixuPXRoaXMucmFkaXVzO3JldHVybiBuZXcgUCh0Lngtbip2LmNvcyhlKSx0Lnktbip2LnNpbihlKSl9fSksbyhwLmZuLFtcInJhZGl1c1wiXSksYihwLmZuLGspLGY9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnNldENlbnRlcihlfHxuZXcgUCksdD10fHx7fSx0aGlzLnJhZGl1c1g9dC5yYWRpdXNYLHRoaXMucmFkaXVzWT10LnJhZGl1c1l8fHQucmFkaXVzWCx0aGlzLnN0YXJ0QW5nbGU9dC5zdGFydEFuZ2xlLHRoaXMuZW5kQW5nbGU9dC5lbmRBbmdsZSx0aGlzLmFudGljbG9ja3dpc2U9dC5hbnRpY2xvY2t3aXNlfHwhMX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYodGhpcy5jZW50ZXIse3JhZGl1c1g6dGhpcy5yYWRpdXNYLHJhZGl1c1k6dGhpcy5yYWRpdXNZLHN0YXJ0QW5nbGU6dGhpcy5zdGFydEFuZ2xlLGVuZEFuZ2xlOnRoaXMuZW5kQW5nbGUsYW50aWNsb2Nrd2lzZTp0aGlzLmFudGljbG9ja3dpc2V9KX0sc2V0Q2VudGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vYnNlcnZlckZpZWxkKFwiY2VudGVyXCIsUC5jcmVhdGUoZSkpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jZW50ZXJ9LE1BWF9JTlRFUlZBTDo0NSxwb2ludEF0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2VudGVyLG49UyhlKTtyZXR1cm4gbmV3IFAodC54K3RoaXMucmFkaXVzWCp2LmNvcyhuKSx0LnkrdGhpcy5yYWRpdXNZKnYuc2luKG4pKX0sY3VydmVQb2ludHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLnN0YXJ0QW5nbGUscj10aGlzLmFudGljbG9ja3dpc2U/LTE6MSxvPVt0aGlzLnBvaW50QXQoaSldLGE9aSxzPXRoaXMuX2FyY0ludGVydmFsKCksbD1zLmVuZEFuZ2xlLXMuc3RhcnRBbmdsZSxjPXYuY2VpbChsL3RoaXMuTUFYX0lOVEVSVkFMKSxkPWwvYztmb3IoZT0xO2M+PWU7ZSsrKXQ9YStyKmQsbj10aGlzLl9pbnRlcnZhbEN1cnZlUG9pbnRzKGEsdCksby5wdXNoKG4uY3AxLG4uY3AyLG4ucDIpLGE9dDtyZXR1cm4gb30sYmJveDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbixvPXRoaXMsYT1vLl9hcmNJbnRlcnZhbCgpLHM9YS5zdGFydEFuZ2xlLGw9YS5lbmRBbmdsZSxjPWkodGhpcy5jZW50ZXIsdGhpcy5yYWRpdXNYLHRoaXMucmFkaXVzWSxlKSxkPVQoYy54KSx1PVQoYy55KSxwPW8ucG9pbnRBdChzKS50cmFuc2Zvcm1Db3B5KGUpLGY9by5wb2ludEF0KGwpLnRyYW5zZm9ybUNvcHkoZSksZz1QLm1pbihwLGYpLG09UC5tYXgocCxmKSx2PXIoZCxzKSxfPXIodSxzKTtsPnZ8fGw+XzspbD52JiYodD1vLnBvaW50QXQodikudHJhbnNmb3JtQ29weShlKSx2Kz05MCksbD5fJiYobj1vLnBvaW50QXQoXykudHJhbnNmb3JtQ29weShlKSxfKz05MCkscD1uZXcgUCh0Lngsbi55KSxnPVAubWluKGcscCksbT1QLm1heChtLHApO3JldHVybiBoLmZyb21Qb2ludHMoZyxtKX0sX2FyY0ludGVydmFsOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnN0YXJ0QW5nbGUsbj10aGlzLmVuZEFuZ2xlLGk9dGhpcy5hbnRpY2xvY2t3aXNlO3JldHVybiBpJiYoZT10LHQ9bixuPWUpLCh0Pm58fGkmJnQ9PT1uKSYmKG4rPTM2MCkse3N0YXJ0QW5nbGU6dCxlbmRBbmdsZTpufX0sX2ludGVydmFsQ3VydmVQb2ludHM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5wb2ludEF0KGUpLHI9bi5wb2ludEF0KHQpLG89bi5fZGVyaXZhdGl2ZUF0KGUpLGE9bi5fZGVyaXZhdGl2ZUF0KHQpLHM9KFModCktUyhlKSkvMyxsPW5ldyBQKGkueCtzKm8ueCxpLnkrcypvLnkpLGM9bmV3IFAoci54LXMqYS54LHIueS1zKmEueSk7cmV0dXJue3AxOmksY3AxOmwsY3AyOmMscDI6cn19LF9kZXJpdmF0aXZlQXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVMoZSk7cmV0dXJuIG5ldyBQKC10LnJhZGl1c1gqdi5zaW4obiksdC5yYWRpdXNZKnYuY29zKG4pKX19KSxvKGYuZm4sW1wicmFkaXVzWFwiLFwicmFkaXVzWVwiLFwic3RhcnRBbmdsZVwiLFwiZW5kQW5nbGVcIixcImFudGljbG9ja3dpc2VcIl0pLGIoZi5mbixrKSxmLmZyb21Qb2ludHM9ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ZhciBhPWQoZS54LGUueSx0LngsdC55LG4saSxyLG8pO3JldHVybiBuZXcgZihhLmNlbnRlcix7c3RhcnRBbmdsZTphLnN0YXJ0QW5nbGUsZW5kQW5nbGU6YS5lbmRBbmdsZSxyYWRpdXNYOm4scmFkaXVzWTppLGFudGljbG9ja3dpc2U6MD09PW99KX0sZz13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyl7dGhpcy5hPWV8fDAsdGhpcy5iPXR8fDAsdGhpcy5jPW58fDAsdGhpcy5kPWl8fDAsdGhpcy5lPXJ8fDAsdGhpcy5mPW98fDB9LG11bHRpcGx5Q29weTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGcodGhpcy5hKmUuYSt0aGlzLmMqZS5iLHRoaXMuYiplLmErdGhpcy5kKmUuYix0aGlzLmEqZS5jK3RoaXMuYyplLmQsdGhpcy5iKmUuYyt0aGlzLmQqZS5kLHRoaXMuYSplLmUrdGhpcy5jKmUuZit0aGlzLmUsdGhpcy5iKmUuZSt0aGlzLmQqZS5mK3RoaXMuZil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnKHRoaXMuYSx0aGlzLmIsdGhpcy5jLHRoaXMuZCx0aGlzLmUsdGhpcy5mKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuYT09PWUuYSYmdGhpcy5iPT09ZS5iJiZ0aGlzLmM9PT1lLmMmJnRoaXMuZD09PWUuZCYmdGhpcy5lPT09ZS5lJiZ0aGlzLmY9PT1lLmY6ITF9LHJvdW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmE9RCh0aGlzLmEsZSksdGhpcy5iPUQodGhpcy5iLGUpLHRoaXMuYz1EKHRoaXMuYyxlKSx0aGlzLmQ9RCh0aGlzLmQsZSksdGhpcy5lPUQodGhpcy5lLGUpLHRoaXMuZj1EKHRoaXMuZixlKSx0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGUpe3ZhciB0LG49W3RoaXMuYSx0aGlzLmIsdGhpcy5jLHRoaXMuZCx0aGlzLmUsdGhpcy5mXTtpZihDKGUpKWZvcih0PTA7bi5sZW5ndGg+dDt0Kyspblt0XT1EKG5bdF0sZSk7cmV0dXJuIG59fSksZy5mbi50b1N0cmluZz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnRvQXJyYXkoZSkuam9pbih0fHxcIixcIil9LGcudHJhbnNsYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBnKDEsMCwwLDEsZSx0KX0sZy51bml0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBnKDEsMCwwLDEsMCwwKX0sZy5yb3RhdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyBnO3JldHVybiBpLmE9di5jb3MoUyhlKSksaS5iPXYuc2luKFMoZSkpLGkuYz0taS5iLGkuZD1pLmEsaS5lPXQtdCppLmErbippLmJ8fDAsaS5mPW4tbippLmEtdCppLmJ8fDAsaX0sZy5zY2FsZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgZyhlLDAsMCx0LDAsMCl9LGcuSURFTlRJVFk9Zy51bml0KCksbT13LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLl9tYXRyaXg9ZXx8Zy51bml0KCl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKHRoaXMuX21hdHJpeC5jbG9uZSgpKX0sZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9tYXRyaXguZXF1YWxzKHRoaXMuX21hdHJpeCl9LF9vcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zQ2hhbmdlKHtmaWVsZDpcInRyYW5zZm9ybVwiLHZhbHVlOnRoaXN9KX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcudHJhbnNsYXRlKGUsdCkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxzY2FsZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEModCl8fCh0PWUpLG4mJihuPVAuY3JlYXRlKG4pLHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcudHJhbnNsYXRlKG4ueCxuLnkpKSksdGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy5zY2FsZShlLHQpKSxuJiYodGhpcy5fbWF0cml4PXRoaXMuX21hdHJpeC5tdWx0aXBseUNvcHkoZy50cmFuc2xhdGUoLW4ueCwtbi55KSkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxyb3RhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD1QLmNyZWF0ZSh0KXx8UC5aRVJPLHRoaXMuX21hdHJpeD10aGlzLl9tYXRyaXgubXVsdGlwbHlDb3B5KGcucm90YXRlKGUsdC54LHQueSkpLHRoaXMuX29wdGlvbnNDaGFuZ2UoKSx0aGlzfSxtdWx0aXBseTpmdW5jdGlvbihlKXt2YXIgdD1uKGUpO3JldHVybiB0aGlzLl9tYXRyaXg9dGhpcy5fbWF0cml4Lm11bHRpcGx5Q29weSh0KSx0aGlzLl9vcHRpb25zQ2hhbmdlKCksdGhpc30sbWF0cml4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hdHJpeH19KSxiKG0uZm4sayksYih5LHtnZW9tZXRyeTp7QXJjOmYsQ2lyY2xlOnAsTWF0cml4OmcsUG9pbnQ6UCxSZWN0OmgsU2l6ZTp1LFRyYW5zZm9ybWF0aW9uOm0sdHJhbnNmb3JtOnQsdG9NYXRyaXg6bn19KSx5LmRhdGF2aXouZ2VvbWV0cnk9eS5nZW9tZXRyeX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9ZS5ub29wLG89T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxhPXdpbmRvdy5rZW5kbyxzPWEuQ2xhc3MsbD1hLnVpLldpZGdldCxjPWEuZGVlcEV4dGVuZCxkPWEudXRpbCx1PWQuZGVmaW5lZCxoPWEuT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXthLk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1jKHt9LHRoaXMub3B0aW9ucyxuKSx0aGlzLmJpbmQodGhpcy5ldmVudHMsdGhpcy5vcHRpb25zKSx0aGlzLl9jbGljaz10aGlzLl9oYW5kbGVyKFwiY2xpY2tcIiksdGhpcy5fbW91c2VlbnRlcj10aGlzLl9oYW5kbGVyKFwibW91c2VlbnRlclwiKSx0aGlzLl9tb3VzZWxlYXZlPXRoaXMuX2hhbmRsZXIoXCJtb3VzZWxlYXZlXCIpLHRoaXMuZWxlbWVudD1lKHQpLHRoaXMub3B0aW9ucy53aWR0aCYmdGhpcy5lbGVtZW50LmNzcyhcIndpZHRoXCIsdGhpcy5vcHRpb25zLndpZHRoKSx0aGlzLm9wdGlvbnMuaGVpZ2h0JiZ0aGlzLmVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsdGhpcy5vcHRpb25zLmhlaWdodCl9LG9wdGlvbnM6e30sZXZlbnRzOltcImNsaWNrXCIsXCJtb3VzZWVudGVyXCIsXCJtb3VzZWxlYXZlXCIsXCJyZXNpemVcIl0sZHJhdzpyLGNsZWFyOnIsZGVzdHJveTpyLHJlc2l6ZTpsLmZuLnJlc2l6ZSxzaXplOmwuZm4uc2l6ZSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOnRoaXMuZWxlbWVudC53aWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQuaGVpZ2h0KCl9fSxzZXRTaXplOmZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5jc3Moe3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0fSksdGhpcy5fc2l6ZT1lLHRoaXMuX3Jlc2l6ZSgpfSxldmVudFRhcmdldDpmdW5jdGlvbih0KXtmb3IodmFyIG4saT1lKHQudG91Y2g/dC50b3VjaC5pbml0aWFsVG91Y2g6dC50YXJnZXQpOyFuJiZpLmxlbmd0aD4wJiYobj1pWzBdLl9rZW5kb05vZGUsIWkuaXModGhpcy5lbGVtZW50KSYmMCE9PWkubGVuZ3RoKTspaT1pLnBhcmVudCgpO3JldHVybiBuP24uc3JjRWxlbWVudDp2b2lkIDB9LF9yZXNpemU6cixfaGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT10LmV2ZW50VGFyZ2V0KG4pO2kmJnQudHJpZ2dlcihlLHtlbGVtZW50Omksb3JpZ2luYWxFdmVudDpufSl9fX0pO2guY3JlYXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuY3VycmVudC5jcmVhdGUoZSx0KX0sdD1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmNoaWxkTm9kZXM9W10sdGhpcy5wYXJlbnQ9bnVsbCxlJiYodGhpcy5zcmNFbGVtZW50PWUsdGhpcy5vYnNlcnZlKCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IodGhpcy5zcmNFbGVtZW50JiZ0aGlzLnNyY0VsZW1lbnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyksZT10aGlzLmNoaWxkTm9kZXMsdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuY2hpbGROb2Rlc1t0XS5kZXN0cm95KCk7dGhpcy5wYXJlbnQ9bnVsbH0sbG9hZDpyLG9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5hZGRPYnNlcnZlcih0aGlzKX0sYXBwZW5kOmZ1bmN0aW9uKGUpe3RoaXMuY2hpbGROb2Rlcy5wdXNoKGUpLGUucGFyZW50PXRoaXN9LGluc2VydEF0OmZ1bmN0aW9uKGUsdCl7dGhpcy5jaGlsZE5vZGVzLnNwbGljZSh0LDAsZSksZS5wYXJlbnQ9dGhpc30scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lK3Q7Zm9yKG49ZTtpPm47bisrKXRoaXMuY2hpbGROb2Rlc1tuXS5yZW1vdmVTZWxmKCk7dGhpcy5jaGlsZE5vZGVzLnNwbGljZShlLHQpfSxyZW1vdmVTZWxmOmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpLHRoaXMuZGVzdHJveSgpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMucmVtb3ZlKDAsdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCl9LGludmFsaWRhdGU6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuaW52YWxpZGF0ZSgpfSxnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlKCl9LGNoaWxkcmVuQ2hhbmdlOmZ1bmN0aW9uKGUpe1wiYWRkXCI9PT1lLmFjdGlvbj90aGlzLmxvYWQoZS5pdGVtcyxlLmluZGV4KTpcInJlbW92ZVwiPT09ZS5hY3Rpb24mJnRoaXMucmVtb3ZlKGUuaW5kZXgsZS5pdGVtcy5sZW5ndGgpLHRoaXMuaW52YWxpZGF0ZSgpfX0pLG49cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO3RoaXMucHJlZml4PXR8fFwiXCI7Zm9yKG4gaW4gZSlpPWVbbl0saT10aGlzLl93cmFwKGksbiksdGhpc1tuXT1pfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGEuZ2V0dGVyKGUsITApKHRoaXMpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWEuZ2V0dGVyKGUsITApKHRoaXMpO2khPT10JiYobj10aGlzLl9zZXQoZSx0aGlzLl93cmFwKHQsZSkpLG58fHRoaXMub3B0aW9uc0NoYW5nZSh7ZmllbGQ6dGhpcy5wcmVmaXgrZSx2YWx1ZTp0fSkpfSxfc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIGkscixvLHM9ZS5pbmRleE9mKFwiLlwiKT49MDtpZihzKWZvcihpPWUuc3BsaXQoXCIuXCIpLHI9XCJcIjtpLmxlbmd0aD4xOyl7aWYocis9aS5zaGlmdCgpLG89YS5nZXR0ZXIociwhMCkodGhpcyksb3x8KG89bmV3IG4oe30scitcIi5cIiksby5hZGRPYnNlcnZlcih0aGlzKSx0aGlzW3JdPW8pLG8gaW5zdGFuY2VvZiBuKXJldHVybiBvLnNldChpLmpvaW4oXCIuXCIpLHQpLHM7cis9XCIuXCJ9cmV0dXJuIHRoaXMuX2NsZWFyKGUpLGEuc2V0dGVyKGUpKHRoaXMsdCksc30sX2NsZWFyOmZ1bmN0aW9uKGUpe3ZhciB0PWEuZ2V0dGVyKGUsITApKHRoaXMpO3QmJnQucmVtb3ZlT2JzZXJ2ZXImJnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyl9LF93cmFwOmZ1bmN0aW9uKGUsdCl7dmFyIGk9by5jYWxsKGUpO3JldHVybiBudWxsIT09ZSYmdShlKSYmXCJbb2JqZWN0IE9iamVjdF1cIj09PWkmJihlIGluc3RhbmNlb2Ygbnx8ZSBpbnN0YW5jZW9mIHN8fChlPW5ldyBuKGUsdGhpcy5wcmVmaXgrdCtcIi5cIikpLGUuYWRkT2JzZXJ2ZXIodGhpcykpLGV9fSksYyhuLmZuLGEubWl4aW5zLk9ic2VydmVyc01peGluKSxpPWZ1bmN0aW9uKCl7dGhpcy5faXRlbXM9W119LGkucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5faXRlbXMscj1pWzBdLG89e25hbWU6ZSx0eXBlOnQsb3JkZXI6bn07IXJ8fHIub3JkZXI+bj9pLnVuc2hpZnQobyk6aS5wdXNoKG8pfSxjcmVhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5faXRlbXMsbz1yWzBdO2lmKHQmJnQudHlwZSlmb3Iobj10LnR5cGUudG9Mb3dlckNhc2UoKSxpPTA7ci5sZW5ndGg+aTtpKyspaWYocltpXS5uYW1lPT09bil7bz1yW2ldO2JyZWFrfXJldHVybiBvP25ldyBvLnR5cGUoZSx0KTp2b2lkIGEubG9nVG9Db25zb2xlKFwiV2FybmluZzogVW5hYmxlIHRvIGNyZWF0ZSBLZW5kbyBVSSBEcmF3aW5nIFN1cmZhY2UuIFBvc3NpYmxlIGNhdXNlczpcXG4tIFRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgU1ZHLCBWTUwgYW5kIENhbnZhcy4gVXNlciBhZ2VudDogXCIrbmF2aWdhdG9yLnVzZXJBZ2VudCtcIlxcbi0gVGhlIEtlbmRvIFVJIHNjcmlwdHMgYXJlIG5vdCBmdWxseSBsb2FkZWRcIil9fSxpLmN1cnJlbnQ9bmV3IGksYyhhLHtkcmF3aW5nOntEQVNIX0FSUkFZUzp7ZG90OlsxLjUsMy41XSxkYXNoOls0LDMuNV0sbG9uZ2Rhc2g6WzgsMy41XSxkYXNoZG90OlszLjUsMy41LDEuNSwzLjVdLGxvbmdkYXNoZG90Ols4LDMuNSwxLjUsMy41XSxsb25nZGFzaGRvdGRvdDpbOCwzLjUsMS41LDMuNSwxLjUsMy41XX0sQ29sb3I6YS5Db2xvcixCYXNlTm9kZTp0LE9wdGlvbnNTdG9yZTpuLFN1cmZhY2U6aCxTdXJmYWNlRmFjdG9yeTppfX0pLGEuZGF0YXZpei5kcmF3aW5nPWEuZHJhd2luZ1xufSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5rZW5kbyx0PWUuZGVlcEV4dGVuZCxuPWUudXRpbC5kZWZpbmVkLGk9XCJncmFkaWVudFwiLHI9e2V4dGVuZDpmdW5jdGlvbihlKXtlLmZpbGw9dGhpcy5maWxsLGUuc3Ryb2tlPXRoaXMuc3Ryb2tlfSxmaWxsOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbz10aGlzLm9wdGlvbnM7cmV0dXJuIG4oZSk/KGUmJmUubm9kZVR5cGUhPWk/KHI9e2NvbG9yOmV9LG4odCkmJihyLm9wYWNpdHk9dCksby5zZXQoXCJmaWxsXCIscikpOm8uc2V0KFwiZmlsbFwiLGUpLHRoaXMpOm8uZ2V0KFwiZmlsbFwiKX0sc3Ryb2tlOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gbihlKT8odGhpcy5vcHRpb25zLnNldChcInN0cm9rZS5jb2xvclwiLGUpLG4odCkmJnRoaXMub3B0aW9ucy5zZXQoXCJzdHJva2Uud2lkdGhcIix0KSxuKGkpJiZ0aGlzLm9wdGlvbnMuc2V0KFwic3Ryb2tlLm9wYWNpdHlcIixpKSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2V0KFwic3Ryb2tlXCIpfX0sbz17ZXh0ZW5kOmZ1bmN0aW9uKGUsdCl7ZS50cmF2ZXJzZT1mdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpc1t0XTtmb3Iobj0wO3IubGVuZ3RoPm47bisrKWk9cltuXSxpLnRyYXZlcnNlP2kudHJhdmVyc2UoZSk6ZShpKTtyZXR1cm4gdGhpc319fTt0KGUuZHJhd2luZyx7bWl4aW5zOntQYWludGFibGU6cixUcmF2ZXJzYWJsZTpvfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIGQuY3VycmVudC5tZWFzdXJlKGUsdCl9dmFyIG49ZG9jdW1lbnQsaT13aW5kb3cua2VuZG8scj1pLkNsYXNzLG89aS5kZWVwRXh0ZW5kLGE9aS51dGlsLHM9YS5kZWZpbmVkLGw9MSxjPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX3NpemU9ZSx0aGlzLl9sZW5ndGg9MCx0aGlzLl9tYXA9e319LHB1dDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLl9tYXAscj17a2V5OmUsdmFsdWU6dH07aVtlXT1yLG4uX2hlYWQ/KG4uX3RhaWwubmV3ZXI9cixyLm9sZGVyPW4uX3RhaWwsbi5fdGFpbD1yKTpuLl9oZWFkPW4uX3RhaWw9cixuLl9sZW5ndGg+PW4uX3NpemU/KGlbbi5faGVhZC5rZXldPW51bGwsbi5faGVhZD1uLl9oZWFkLm5ld2VyLG4uX2hlYWQub2xkZXI9bnVsbCk6bi5fbGVuZ3RoKyt9LGdldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fbWFwW2VdO3JldHVybiBuPyhuPT09dC5faGVhZCYmbiE9PXQuX3RhaWwmJih0Ll9oZWFkPW4ubmV3ZXIsdC5faGVhZC5vbGRlcj1udWxsKSxuIT09dC5fdGFpbCYmKG4ub2xkZXImJihuLm9sZGVyLm5ld2VyPW4ubmV3ZXIsbi5uZXdlci5vbGRlcj1uLm9sZGVyKSxuLm9sZGVyPXQuX3RhaWwsbi5uZXdlcj1udWxsLHQuX3RhaWwubmV3ZXI9bix0Ll90YWlsPW4pLG4udmFsdWUpOnZvaWQgMH19KSxkPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5fY2FjaGU9bmV3IGMoMWUzKX0sbWVhc3VyZTpmdW5jdGlvbihlLHQpe3ZhciBpLHIsbyxjLGQsdT1hLm9iamVjdEtleSh0KSxoPWEuaGFzaEtleShlK3UpLHA9dGhpcy5fY2FjaGUuZ2V0KGgpO2lmKHApcmV0dXJuIHA7aT17d2lkdGg6MCxoZWlnaHQ6MCxiYXNlbGluZTowfSxyPXRoaXMuX21lYXN1cmVCb3gsbz10aGlzLl9iYXNlbGluZU1hcmtlci5jbG9uZU5vZGUoITEpO2ZvcihjIGluIHQpZD10W2NdLHMoZCkmJihyLnN0eWxlW2NdPWQpO3JldHVybiByLmlubmVySFRNTD1lLHIuYXBwZW5kQ2hpbGQobyksbi5ib2R5LmFwcGVuZENoaWxkKHIpLChlK1wiXCIpLmxlbmd0aCYmKGkud2lkdGg9ci5vZmZzZXRXaWR0aC1sLGkuaGVpZ2h0PXIub2Zmc2V0SGVpZ2h0LGkuYmFzZWxpbmU9by5vZmZzZXRUb3ArbCksdGhpcy5fY2FjaGUucHV0KGgsaSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpLGl9fSk7ZC5mbi5fYmFzZWxpbmVNYXJrZXI9ZShcIjxkaXYgY2xhc3M9J2stYmFzZWxpbmUtbWFya2VyJyBzdHlsZT0nZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7d2lkdGg6IFwiK2wrXCJweDsgaGVpZ2h0OiBcIitsK1wicHg7b3ZlcmZsb3c6IGhpZGRlbjsnIC8+XCIpWzBdLGQuZm4uX21lYXN1cmVCb3g9ZShcIjxkaXYgc3R5bGU9J3Bvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyB0b3A6IC00MDAwcHggIWltcG9ydGFudDsgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7cGFkZGluZzogMCAhaW1wb3J0YW50OyBtYXJnaW46IDAgIWltcG9ydGFudDsgYm9yZGVyOiAwICFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6IG5vcm1hbCAhaW1wb3J0YW50OyB2aXNpYmlsaXR5OiBoaWRkZW4gIWltcG9ydGFudDsgd2hpdGUtc3BhY2U6bm93cmFwICFpbXBvcnRhbnQ7JyAvPlwiKVswXSxkLmN1cnJlbnQ9bmV3IGQsbyhpLmRyYXdpbmcse3V0aWw6e1RleHRNZXRyaWNzOmQsTFJVQ2FjaGU6YyxtZWFzdXJlVGV4dDp0fX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxuKXt2YXIgaSxyLG8sYTtmb3Iocj0wO2UubGVuZ3RoPnI7cisrKW89ZVtyXSxvLnZpc2libGUoKSYmKGE9dD9vLmJib3gobik6by5yYXdCQm94KCksYSYmKGk9aT9NLnVuaW9uKGksYSk6YSkpO3JldHVybiBpfWZ1bmN0aW9uIG4oZSx0LG4pe3ZhciBpLHIsbyxhO2ZvcihyPTA7ZS5sZW5ndGg+cjtyKyspbz1lW3JdLG8udmlzaWJsZSgpJiYoYT10P28uY2xpcHBlZEJCb3gobik6by5yYXdCQm94KCksYSYmKGk9aT9NLnVuaW9uKGksYSk6YSkpO3JldHVybiBpfWZ1bmN0aW9uIGkoZSx0KXtlLm9yaWdpbi54LT10LGUub3JpZ2luLnktPXQsZS5zaXplLndpZHRoKz0yKnQsZS5zaXplLmhlaWdodCs9Mip0fWZ1bmN0aW9uIHIoZSx0KXtmb3IodmFyIG49MDt0Lmxlbmd0aD5uO24rKyllW3Rbbl1dPW8odFtuXSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1cIl9cIitlO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fb2JzZXJ2ZXJGaWVsZCh0LGUpLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzKTp0aGlzW3RdfX1mdW5jdGlvbiBhKGUsdCl7Zm9yKHZhciBuPTA7dC5sZW5ndGg+bjtuKyspZVt0W25dXT1zKHRbbl0pfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9XCJfXCIrZTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMuX29ic2VydmVyRmllbGQodCxFLmNyZWF0ZShlKSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXMpOnRoaXNbdF19fWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIG49MDt0Lmxlbmd0aD5uO24rKyllW3Rbbl1dPWModFtuXSl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIFYodCk/KHRoaXMub3B0aW9ucy5zZXQoZSx0KSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2V0KGUpfX12YXIgZCx1LGgscCxmLGcsbSx2LF8seSx3LGIsayx4LEMsUz13aW5kb3cua2VuZG8sVD1TLkNsYXNzLEQ9Uy5kZWVwRXh0ZW5kLEE9Uy5nZW9tZXRyeSxFPUEuUG9pbnQsTT1BLlJlY3QsUD1BLlNpemUsST1BLk1hdHJpeCx6PUEudG9NYXRyaXgsRj1TLmRyYXdpbmcsUj1GLk9wdGlvbnNTdG9yZSxCPU1hdGgsTD1CLnBvdyxPPVMudXRpbCxIPU8uYXBwZW5kLE49Ty5hcnJheUxpbWl0cyxWPU8uZGVmaW5lZCxVPU8ubGFzdCxXPU8udmFsdWVPckRlZmF1bHQsaj1TLm1peGlucy5PYnNlcnZlcnNNaXhpbixHPWUuaW5BcnJheSxxPVtdLnB1c2gsJD1bXS5wb3AsWT1bXS5zcGxpY2UsSz1bXS5zaGlmdCxRPVtdLnNsaWNlLFg9W10udW5zaGlmdCxKPVQuZXh0ZW5kKHtub2RlVHlwZTpcIkVsZW1lbnRcIixpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX2luaXRPcHRpb25zKGUpfSxfaW5pdE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQsbjtlPWV8fHt9LHQ9ZS50cmFuc2Zvcm0sbj1lLmNsaXAsdCYmKGUudHJhbnNmb3JtPUEudHJhbnNmb3JtKHQpKSxuJiYhbi5pZCYmKG4uaWQ9Uy5ndWlkKCkpLHRoaXMub3B0aW9ucz1uZXcgUihlKSx0aGlzLm9wdGlvbnMuYWRkT2JzZXJ2ZXIodGhpcyl9LHRyYW5zZm9ybTpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT92b2lkIHRoaXMub3B0aW9ucy5zZXQoXCJ0cmFuc2Zvcm1cIixBLnRyYW5zZm9ybShlKSk6dGhpcy5vcHRpb25zLmdldChcInRyYW5zZm9ybVwiKX0scGFyZW50VHJhbnNmb3JtOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsbj10aGlzO24ucGFyZW50OyluPW4ucGFyZW50LGU9bi50cmFuc2Zvcm0oKSxlJiYodD1lLm1hdHJpeCgpLm11bHRpcGx5Q29weSh0fHxJLnVuaXQoKSkpO3JldHVybiB0P0EudHJhbnNmb3JtKHQpOnZvaWQgMH0sY3VycmVudFRyYW5zZm9ybTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy50cmFuc2Zvcm0oKSxyPXooaSk7cmV0dXJuIFYoZSl8fChlPXRoaXMucGFyZW50VHJhbnNmb3JtKCkpLHQ9eihlKSxuPXImJnQ/dC5tdWx0aXBseUNvcHkocik6cnx8dCxuP0EudHJhbnNmb3JtKG4pOnZvaWQgMH0sdmlzaWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcInZpc2libGVcIixlKSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2V0KFwidmlzaWJsZVwiKSE9PSExfSxjbGlwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucztyZXR1cm4gVihlKT8oZSYmIWUuaWQmJihlLmlkPVMuZ3VpZCgpKSx0LnNldChcImNsaXBcIixlKSx0aGlzKTp0LmdldChcImNsaXBcIil9LG9wYWNpdHk6ZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMub3B0aW9ucy5zZXQoXCJvcGFjaXR5XCIsZSksdGhpcyk6Vyh0aGlzLm9wdGlvbnMuZ2V0KFwib3BhY2l0eVwiKSwxKX0sY2xpcHBlZEJCb3g6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLl9jbGlwcGVkQkJveChlKTtyZXR1cm4gbj8odD10aGlzLmNsaXAoKSx0P00uaW50ZXJzZWN0KG4sdC5iYm94KGUpKTpuKTp2b2lkIDB9LF9jbGlwcGVkQkJveDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5iYm94KGUpfX0pO0QoSi5mbixqKSxkPVQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2U9ZXx8W10sdGhpcy5sZW5ndGg9MCx0aGlzLl9zcGxpY2UoMCxlLmxlbmd0aCxlKX0sZWxlbWVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KHRoaXMuX3NwbGljZSgwLHRoaXMubGVuZ3RoLGUpLHRoaXMuX2NoYW5nZSgpLHRoaXMpOnRoaXMuc2xpY2UoMCl9LHB1c2g6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsdD1xLmFwcGx5KHRoaXMsZSk7cmV0dXJuIHRoaXMuX2FkZChlKSx0fSxzbGljZTpRLHBvcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9JC5hcHBseSh0aGlzKTtyZXR1cm4gZSYmdGhpcy5fcmVtb3ZlKFt0XSksdH0sc3BsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIG49US5jYWxsKGFyZ3VtZW50cywyKSxpPXRoaXMuX3NwbGljZShlLHQsbik7cmV0dXJuIHRoaXMuX2NoYW5nZSgpLGl9LHNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1LLmFwcGx5KHRoaXMpO3JldHVybiBlJiZ0aGlzLl9yZW1vdmUoW3RdKSx0fSx1bnNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLHQ9WC5hcHBseSh0aGlzLGUpO3JldHVybiB0aGlzLl9hZGQoZSksdH0saW5kZXhPZjpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcztmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylpZihpW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sX3NwbGljZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9WS5hcHBseSh0aGlzLFtlLHRdLmNvbmNhdChuKSk7cmV0dXJuIHRoaXMuX2NsZWFyT2JzZXJ2ZXIoaSksdGhpcy5fc2V0T2JzZXJ2ZXIobiksaX0sX2FkZDpmdW5jdGlvbihlKXt0aGlzLl9zZXRPYnNlcnZlcihlKSx0aGlzLl9jaGFuZ2UoKX0sX3JlbW92ZTpmdW5jdGlvbihlKXt0aGlzLl9jbGVhck9ic2VydmVyKGUpLHRoaXMuX2NoYW5nZSgpfSxfc2V0T2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5hZGRPYnNlcnZlcih0aGlzKX0sX2NsZWFyT2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5yZW1vdmVPYnNlcnZlcih0aGlzKX0sX2NoYW5nZTpmdW5jdGlvbigpe319KSxEKGQuZm4saiksdT1KLmV4dGVuZCh7bm9kZVR5cGU6XCJHcm91cFwiLGluaXQ6ZnVuY3Rpb24oZSl7Si5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmNoaWxkcmVuPVtdfSxjaGlsZHJlbkNoYW5nZTpmdW5jdGlvbihlLHQsbil7dGhpcy50cmlnZ2VyKFwiY2hpbGRyZW5DaGFuZ2VcIix7YWN0aW9uOmUsaXRlbXM6dCxpbmRleDpufSl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBIKHRoaXMuY2hpbGRyZW4sYXJndW1lbnRzKSx0aGlzLl9yZXBhcmVudChhcmd1bWVudHMsdGhpcyksdGhpcy5jaGlsZHJlbkNoYW5nZShcImFkZFwiLGFyZ3VtZW50cyksdGhpc30saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jaGlsZHJlbi5zcGxpY2UodCwwLGUpLGUucGFyZW50PXRoaXMsdGhpcy5jaGlsZHJlbkNoYW5nZShcImFkZFwiLFtlXSx0KSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9RyhlLHRoaXMuY2hpbGRyZW4pO3JldHVybiB0Pj0wJiYodGhpcy5jaGlsZHJlbi5zcGxpY2UodCwxKSxlLnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW5DaGFuZ2UoXCJyZW1vdmVcIixbZV0sdCkpLHRoaXN9LHJlbW92ZUF0OmZ1bmN0aW9uKGUpe2lmKGU+PTAmJnRoaXMuY2hpbGRyZW4ubGVuZ3RoPmUpe3ZhciB0PXRoaXMuY2hpbGRyZW5bZV07dGhpcy5jaGlsZHJlbi5zcGxpY2UoZSwxKSx0LnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW5DaGFuZ2UoXCJyZW1vdmVcIixbdF0sZSl9cmV0dXJuIHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jaGlsZHJlbjtyZXR1cm4gdGhpcy5jaGlsZHJlbj1bXSx0aGlzLl9yZXBhcmVudChlLG51bGwpLHRoaXMuY2hpbGRyZW5DaGFuZ2UoXCJyZW1vdmVcIixlLDApLHRoaXN9LGJib3g6ZnVuY3Rpb24oZSl7cmV0dXJuIHQodGhpcy5jaGlsZHJlbiwhMCx0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpfSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcy5jaGlsZHJlbiwhMSl9LF9jbGlwcGVkQkJveDpmdW5jdGlvbihlKXtyZXR1cm4gbih0aGlzLmNoaWxkcmVuLHRoaXMuY3VycmVudFRyYW5zZm9ybShlKSl9LGN1cnJlbnRUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7cmV0dXJuIEouZm4uY3VycmVudFRyYW5zZm9ybS5jYWxsKHRoaXMsZSl8fG51bGx9LF9yZXBhcmVudDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWk9ZVtuXSxyPWkucGFyZW50LHImJnIhPXRoaXMmJnIucmVtb3ZlJiZyLnJlbW92ZShpKSxpLnBhcmVudD10fX0pLEYubWl4aW5zLlRyYXZlcnNhYmxlLmV4dGVuZCh1LmZuLFwiY2hpbGRyZW5cIiksaD1KLmV4dGVuZCh7bm9kZVR5cGU6XCJUZXh0XCIsaW5pdDpmdW5jdGlvbihlLHQsbil7Si5mbi5pbml0LmNhbGwodGhpcyxuKSx0aGlzLmNvbnRlbnQoZSksdGhpcy5wb3NpdGlvbih0fHxuZXcgQS5Qb2ludCksdGhpcy5vcHRpb25zLmZvbnR8fCh0aGlzLm9wdGlvbnMuZm9udD1cIjEycHggc2Fucy1zZXJpZlwiKSxWKHRoaXMub3B0aW9ucy5maWxsKXx8dGhpcy5maWxsKFwiIzAwMFwiKX0sY29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5vcHRpb25zLnNldChcImNvbnRlbnRcIixlKSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2V0KFwiY29udGVudFwiKX0sbWVhc3VyZTpmdW5jdGlvbigpe3ZhciBlPUYudXRpbC5tZWFzdXJlVGV4dCh0aGlzLmNvbnRlbnQoKSx7Zm9udDp0aGlzLm9wdGlvbnMuZ2V0KFwiZm9udFwiKX0pO3JldHVybiBlfSxyZWN0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWFzdXJlKCksdD10aGlzLnBvc2l0aW9uKCkuY2xvbmUoKTtyZXR1cm4gbmV3IEEuUmVjdCh0LFtlLndpZHRoLGUuaGVpZ2h0XSl9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpO3JldHVybiB0aGlzLnJlY3QoKS5iYm94KHQpfSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVjdCgpLmJib3goKX19KSxGLm1peGlucy5QYWludGFibGUuZXh0ZW5kKGguZm4pLGEoaC5mbixbXCJwb3NpdGlvblwiXSkscD1KLmV4dGVuZCh7bm9kZVR5cGU6XCJDaXJjbGVcIixpbml0OmZ1bmN0aW9uKGUsdCl7Si5mbi5pbml0LmNhbGwodGhpcyx0KSx0aGlzLmdlb21ldHJ5KGV8fG5ldyBBLkNpcmNsZSksVih0aGlzLm9wdGlvbnMuc3Ryb2tlKXx8dGhpcy5zdHJva2UoXCIjMDAwXCIpfSxiYm94OmZ1bmN0aW9uKGUpe3ZhciB0PXoodGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKSxuPXRoaXMuX2dlb21ldHJ5LmJib3godCkscj10aGlzLm9wdGlvbnMuZ2V0KFwic3Ryb2tlLndpZHRoXCIpO3JldHVybiByJiZpKG4sci8yKSxufSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJ5LmJib3goKX19KSxGLm1peGlucy5QYWludGFibGUuZXh0ZW5kKHAuZm4pLHIocC5mbixbXCJnZW9tZXRyeVwiXSksZj1KLmV4dGVuZCh7bm9kZVR5cGU6XCJBcmNcIixpbml0OmZ1bmN0aW9uKGUsdCl7Si5mbi5pbml0LmNhbGwodGhpcyx0KSx0aGlzLmdlb21ldHJ5KGV8fG5ldyBBLkFyYyksVih0aGlzLm9wdGlvbnMuc3Ryb2tlKXx8dGhpcy5zdHJva2UoXCIjMDAwXCIpfSxiYm94OmZ1bmN0aW9uKGUpe3ZhciB0PXoodGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKSxuPXRoaXMuZ2VvbWV0cnkoKS5iYm94KHQpLHI9dGhpcy5vcHRpb25zLmdldChcInN0cm9rZS53aWR0aFwiKTtyZXR1cm4gciYmaShuLHIvMiksbn0scmF3QkJveDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdlb21ldHJ5KCkuYmJveCgpfSx0b1BhdGg6ZnVuY3Rpb24oKXt2YXIgZSx0PW5ldyB2LG49dGhpcy5nZW9tZXRyeSgpLmN1cnZlUG9pbnRzKCk7aWYobi5sZW5ndGg+MClmb3IodC5tb3ZlVG8oblswXS54LG5bMF0ueSksZT0xO24ubGVuZ3RoPmU7ZSs9Myl0LmN1cnZlVG8obltlXSxuW2UrMV0sbltlKzJdKTtyZXR1cm4gdH19KSxGLm1peGlucy5QYWludGFibGUuZXh0ZW5kKGYuZm4pLHIoZi5mbixbXCJnZW9tZXRyeVwiXSksZz1kLmV4dGVuZCh7X2NoYW5nZTpmdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnlDaGFuZ2UoKX19KSxtPVQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmFuY2hvcihlfHxuZXcgRSksdGhpcy5jb250cm9sSW4odCksdGhpcy5jb250cm9sT3V0KG4pfSxiYm94VG86ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMuYW5jaG9yKCkudHJhbnNmb3JtQ29weSh0KSxyPWUuYW5jaG9yKCkudHJhbnNmb3JtQ29weSh0KTtyZXR1cm4gbj10aGlzLmNvbnRyb2xPdXQoKSYmZS5jb250cm9sSW4oKT90aGlzLl9jdXJ2ZUJvdW5kaW5nQm94KGksdGhpcy5jb250cm9sT3V0KCkudHJhbnNmb3JtQ29weSh0KSxlLmNvbnRyb2xJbigpLnRyYW5zZm9ybUNvcHkodCkscik6dGhpcy5fbGluZUJvdW5kaW5nQm94KGkscil9LF9saW5lQm91bmRpbmdCb3g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTS5mcm9tUG9pbnRzKGUsdCl9LF9jdXJ2ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPVtlLHQsbixpXSxvPXRoaXMuX2N1cnZlRXh0cmVtZXNGb3IocixcInhcIiksYT10aGlzLl9jdXJ2ZUV4dHJlbWVzRm9yKHIsXCJ5XCIpLHM9Tihbby5taW4sby5tYXgsZS54LGkueF0pLGw9TihbYS5taW4sYS5tYXgsZS55LGkueV0pO3JldHVybiBNLmZyb21Qb2ludHMobmV3IEUocy5taW4sbC5taW4pLG5ldyBFKHMubWF4LGwubWF4KSl9LF9jdXJ2ZUV4dHJlbWVzRm9yOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY3VydmVFeHRyZW1lcyhlWzBdW3RdLGVbMV1bdF0sZVsyXVt0XSxlWzNdW3RdKTtyZXR1cm57bWluOnRoaXMuX2NhbGN1bGF0ZUN1cnZlQXQobi5taW4sdCxlKSxtYXg6dGhpcy5fY2FsY3VsYXRlQ3VydmVBdChuLm1heCx0LGUpfX0sX2NhbGN1bGF0ZUN1cnZlQXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPTEtZTtyZXR1cm4gTChpLDMpKm5bMF1bdF0rMypMKGksMikqZSpuWzFdW3RdKzMqTChlLDIpKmkqblsyXVt0XStMKGUsMykqblszXVt0XX0sX2N1cnZlRXh0cmVtZXM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhPWUtMyp0KzMqbi1pLHM9LTIqKGUtMip0K24pLGw9ZS10LGM9Qi5zcXJ0KHMqcy00KmEqbCksZD0wLHU9MTtyZXR1cm4gMD09PWE/MCE9PXMmJihkPXU9LWwvcyk6aXNOYU4oYyl8fChkPSgtcytjKS8oMiphKSx1PSgtcy1jKS8oMiphKSkscj1CLm1heChCLm1pbihkLHUpLDApLCgwPnJ8fHI+MSkmJihyPTApLG89Qi5taW4oQi5tYXgoZCx1KSwxKSwobz4xfHwwPm8pJiYobz0xKSx7bWluOnIsbWF4Om99fX0pLGEobS5mbixbXCJhbmNob3JcIixcImNvbnRyb2xJblwiLFwiY29udHJvbE91dFwiXSksRChtLmZuLGopLHY9Si5leHRlbmQoe25vZGVUeXBlOlwiUGF0aFwiLGluaXQ6ZnVuY3Rpb24oZSl7Si5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLnNlZ21lbnRzPW5ldyBnLHRoaXMuc2VnbWVudHMuYWRkT2JzZXJ2ZXIodGhpcyksVih0aGlzLm9wdGlvbnMuc3Ryb2tlKXx8KHRoaXMuc3Ryb2tlKFwiIzAwMFwiKSxWKHRoaXMub3B0aW9ucy5zdHJva2UubGluZUpvaW4pfHx0aGlzLm9wdGlvbnMuc2V0KFwic3Ryb2tlLmxpbmVKb2luXCIsXCJtaXRlclwiKSl9LG1vdmVUbzpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN1c3BlbmQoKSx0aGlzLnNlZ21lbnRzLmVsZW1lbnRzKFtdKSx0aGlzLnJlc3VtZSgpLHRoaXMubGluZVRvKGUsdCksdGhpc30sbGluZVRvOmZ1bmN0aW9uKGUsdCl7dmFyIG49Vih0KT9uZXcgRShlLHQpOmUsaT1uZXcgbShuKTtyZXR1cm4gdGhpcy5zZWdtZW50cy5wdXNoKGkpLHRoaXN9LGN1cnZlVG86ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7cmV0dXJuIHRoaXMuc2VnbWVudHMubGVuZ3RoPjAmJihpPVUodGhpcy5zZWdtZW50cykscj1uZXcgbShuLHQpLHRoaXMuc3VzcGVuZCgpLGkuY29udHJvbE91dChlKSx0aGlzLnJlc3VtZSgpLHRoaXMuc2VnbWVudHMucHVzaChyKSksdGhpc30sYXJjOmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIG8sYSxzLGwsYztyZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGg+MCYmKG89VSh0aGlzLnNlZ21lbnRzKSxhPW8uYW5jaG9yKCkscz1PLnJhZChlKSxsPW5ldyBFKGEueC1uKkIuY29zKHMpLGEueS1pKkIuc2luKHMpKSxjPW5ldyBBLkFyYyhsLHtzdGFydEFuZ2xlOmUsZW5kQW5nbGU6dCxyYWRpdXNYOm4scmFkaXVzWTppLGFudGljbG9ja3dpc2U6cn0pLHRoaXMuX2FkZEFyY1NlZ21lbnRzKGMpKSx0aGlzfSxhcmNUbzpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvLGEscztyZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGg+MCYmKG89VSh0aGlzLnNlZ21lbnRzKSxhPW8uYW5jaG9yKCkscz1BLkFyYy5mcm9tUG9pbnRzKGEsZSx0LG4saSxyKSx0aGlzLl9hZGRBcmNTZWdtZW50cyhzKSksdGhpc30sX2FkZEFyY1NlZ21lbnRzOmZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKHRoaXMuc3VzcGVuZCgpLHQ9ZS5jdXJ2ZVBvaW50cygpLG49MTt0Lmxlbmd0aD5uO24rPTMpdGhpcy5jdXJ2ZVRvKHRbbl0sdFtuKzFdLHRbbisyXSk7dGhpcy5yZXN1bWUoKSx0aGlzLmdlb21ldHJ5Q2hhbmdlKCl9LGNsb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5jbG9zZWQ9ITAsdGhpcy5nZW9tZXRyeUNoYW5nZSgpLHRoaXN9LGJib3g6ZnVuY3Rpb24oZSl7dmFyIHQ9eih0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpLG49dGhpcy5fYmJveCh0KSxyPXRoaXMub3B0aW9ucy5nZXQoXCJzdHJva2Uud2lkdGhcIik7cmV0dXJuIHImJmkobixyLzIpLG59LHJhd0JCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmJveCgpfSxfYmJveDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXMuc2VnbWVudHMsYT1vLmxlbmd0aDtpZigxPT09YSluPW9bMF0uYW5jaG9yKCkudHJhbnNmb3JtQ29weShlKSx0PW5ldyBNKG4sUC5aRVJPKTtlbHNlIGlmKGE+MClmb3IoaT0xO2E+aTtpKyspcj1vW2ktMV0uYmJveFRvKG9baV0sZSksdD10P00udW5pb24odCxyKTpyO3JldHVybiB0fX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQodi5mbiksdi5mcm9tUmVjdD1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgdih0KS5tb3ZlVG8oZS50b3BMZWZ0KCkpLmxpbmVUbyhlLnRvcFJpZ2h0KCkpLmxpbmVUbyhlLmJvdHRvbVJpZ2h0KCkpLmxpbmVUbyhlLmJvdHRvbUxlZnQoKSkuY2xvc2UoKX0sdi5mcm9tUG9pbnRzPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2lmKGUpe2ZvcihuPW5ldyB2KHQpLGk9MDtlLmxlbmd0aD5pO2krKylyPUUuY3JlYXRlKGVbaV0pLHImJigwPT09aT9uLm1vdmVUbyhyKTpuLmxpbmVUbyhyKSk7cmV0dXJuIG59fSx2LmZyb21BcmM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgdih0KSxpPWUuc3RhcnRBbmdsZSxyPWUucG9pbnRBdChpKTtyZXR1cm4gbi5tb3ZlVG8oci54LHIueSksbi5hcmMoaSxlLmVuZEFuZ2xlLGUucmFkaXVzWCxlLnJhZGl1c1ksZS5hbnRpY2xvY2t3aXNlKSxufSxfPUouZXh0ZW5kKHtub2RlVHlwZTpcIk11bHRpUGF0aFwiLGluaXQ6ZnVuY3Rpb24oZSl7Si5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLnBhdGhzPW5ldyBnLHRoaXMucGF0aHMuYWRkT2JzZXJ2ZXIodGhpcyksVih0aGlzLm9wdGlvbnMuc3Ryb2tlKXx8dGhpcy5zdHJva2UoXCIjMDAwXCIpfSxtb3ZlVG86ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgdjtyZXR1cm4gbi5tb3ZlVG8oZSx0KSx0aGlzLnBhdGhzLnB1c2gobiksdGhpc30sbGluZVRvOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucGF0aHMubGVuZ3RoPjAmJlUodGhpcy5wYXRocykubGluZVRvKGUsdCksdGhpc30sY3VydmVUbzpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMucGF0aHMubGVuZ3RoPjAmJlUodGhpcy5wYXRocykuY3VydmVUbyhlLHQsbiksdGhpc30sYXJjOmZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHRoaXMucGF0aHMubGVuZ3RoPjAmJlUodGhpcy5wYXRocykuYXJjKGUsdCxuLGksciksdGhpc30sYXJjVG86ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5wYXRocy5sZW5ndGg+MCYmVSh0aGlzLnBhdGhzKS5hcmNUbyhlLHQsbixpLHIpLHRoaXN9LGNsb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aHMubGVuZ3RoPjAmJlUodGhpcy5wYXRocykuY2xvc2UoKSx0aGlzfSxiYm94OmZ1bmN0aW9uKGUpe3JldHVybiB0KHRoaXMucGF0aHMsITAsdGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKX0scmF3QkJveDpmdW5jdGlvbigpe3JldHVybiB0KHRoaXMucGF0aHMsITEpfSxfY2xpcHBlZEJCb3g6ZnVuY3Rpb24oZSl7cmV0dXJuIG4odGhpcy5wYXRocyx0aGlzLmN1cnJlbnRUcmFuc2Zvcm0oZSkpfX0pLEYubWl4aW5zLlBhaW50YWJsZS5leHRlbmQoXy5mbikseT1KLmV4dGVuZCh7bm9kZVR5cGU6XCJJbWFnZVwiLGluaXQ6ZnVuY3Rpb24oZSx0LG4pe0ouZm4uaW5pdC5jYWxsKHRoaXMsbiksdGhpcy5zcmMoZSksdGhpcy5yZWN0KHR8fG5ldyBBLlJlY3QpfSxzcmM6ZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMub3B0aW9ucy5zZXQoXCJzcmNcIixlKSx0aGlzKTp0aGlzLm9wdGlvbnMuZ2V0KFwic3JjXCIpfSxiYm94OmZ1bmN0aW9uKGUpe3ZhciB0PXoodGhpcy5jdXJyZW50VHJhbnNmb3JtKGUpKTtyZXR1cm4gdGhpcy5fcmVjdC5iYm94KHQpfSxyYXdCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlY3QuYmJveCgpfX0pLHIoeS5mbixbXCJyZWN0XCJdKSx3PVQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLm9wdGlvbnM9bmV3IFIoe29mZnNldDplLGNvbG9yOnQsb3BhY2l0eTpWKG4pP246MX0pLHRoaXMub3B0aW9ucy5hZGRPYnNlcnZlcih0aGlzKX19KSxsKHcuZm4sW1wib2Zmc2V0XCIsXCJjb2xvclwiLFwib3BhY2l0eVwiXSksRCh3LmZuLGopLHcuY3JlYXRlPWZ1bmN0aW9uKGUpe2lmKFYoZSkpe3ZhciB0O3JldHVybiB0PWUgaW5zdGFuY2VvZiB3P2U6ZS5sZW5ndGg+MT9uZXcgdyhlWzBdLGVbMV0sZVsyXSk6bmV3IHcoZS5vZmZzZXQsZS5jb2xvcixlLm9wYWNpdHkpfX0sYj1kLmV4dGVuZCh7X2NoYW5nZTpmdW5jdGlvbigpe3RoaXMub3B0aW9uc0NoYW5nZSh7ZmllbGQ6XCJzdG9wc1wifSl9fSksaz1ULmV4dGVuZCh7bm9kZVR5cGU6XCJncmFkaWVudFwiLGluaXQ6ZnVuY3Rpb24oZSl7dGhpcy5zdG9wcz1uZXcgYih0aGlzLl9jcmVhdGVTdG9wcyhlLnN0b3BzKSksdGhpcy5zdG9wcy5hZGRPYnNlcnZlcih0aGlzKSx0aGlzLl91c2VyU3BhY2U9ZS51c2VyU3BhY2UsdGhpcy5pZD1TLmd1aWQoKX0sdXNlclNwYWNlOmZ1bmN0aW9uKGUpe3JldHVybiBWKGUpPyh0aGlzLl91c2VyU3BhY2U9ZSx0aGlzLm9wdGlvbnNDaGFuZ2UoKSx0aGlzKTp0aGlzLl91c2VyU3BhY2V9LF9jcmVhdGVTdG9wczpmdW5jdGlvbihlKXt2YXIgdCxuPVtdO2ZvcihlPWV8fFtdLHQ9MDtlLmxlbmd0aD50O3QrKyluLnB1c2gody5jcmVhdGUoZVt0XSkpO3JldHVybiBufSxhZGRTdG9wOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLnN0b3BzLnB1c2gobmV3IHcoZSx0LG4pKX0scmVtb3ZlU3RvcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0b3BzLmluZGV4T2YoZSk7dD49MCYmdGhpcy5zdG9wcy5zcGxpY2UodCwxKX19KSxEKGsuZm4saix7b3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXCJvcHRpb25zQ2hhbmdlXCIse2ZpZWxkOlwiZ3JhZGllbnRcIisoZT9cIi5cIitlLmZpZWxkOlwiXCIpLHZhbHVlOnRoaXN9KX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnNDaGFuZ2UoKX19KSx4PWsuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2U9ZXx8e30say5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLnN0YXJ0KGUuc3RhcnR8fG5ldyBFKSx0aGlzLmVuZChlLmVuZHx8bmV3IEUoMSwwKSl9fSksYSh4LmZuLFtcInN0YXJ0XCIsXCJlbmRcIl0pLEM9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZT1lfHx7fSxrLmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuY2VudGVyKGUuY2VudGVyfHxuZXcgRSksdGhpcy5fcmFkaXVzPVYoZS5yYWRpdXMpP2UucmFkaXVzOjEsdGhpcy5fZmFsbGJhY2tGaWxsPWUuZmFsbGJhY2tGaWxsfSxyYWRpdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIFYoZSk/KHRoaXMuX3JhZGl1cz1lLHRoaXMuZ2VvbWV0cnlDaGFuZ2UoKSx0aGlzKTp0aGlzLl9yYWRpdXN9LGZhbGxiYWNrRmlsbDpmdW5jdGlvbihlKXtyZXR1cm4gVihlKT8odGhpcy5fZmFsbGJhY2tGaWxsPWUsdGhpcy5vcHRpb25zQ2hhbmdlKCksdGhpcyk6dGhpcy5fZmFsbGJhY2tGaWxsfX0pLGEoQy5mbixbXCJjZW50ZXJcIl0pLEQoRix7QXJjOmYsQ2lyY2xlOnAsRWxlbWVudDpKLEVsZW1lbnRzQXJyYXk6ZCxHcmFkaWVudDprLEdyYWRpZW50U3RvcDp3LEdyb3VwOnUsSW1hZ2U6eSxMaW5lYXJHcmFkaWVudDp4LE11bHRpUGF0aDpfLFBhdGg6dixSYWRpYWxHcmFkaWVudDpDLFNlZ21lbnQ6bSxUZXh0Omh9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD1bXTtyZXR1cm4gZS5yZXBsYWNlKGcsZnVuY3Rpb24oZSxuKXt0LnB1c2gocGFyc2VGbG9hdChuKSl9KSx0fWZ1bmN0aW9uIG4oZSx0LG4pe3ZhciBpLHI9dD8wOjE7Zm9yKGk9MDtlLmxlbmd0aD5pO2krPTIpZS5zcGxpY2UoaStyLDAsbil9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBlJiZ0P3Quc2NhbGVDb3B5KDIpLnRyYW5zbGF0ZSgtZS54LC1lLnkpOnZvaWQgMH1mdW5jdGlvbiByKGUsdCxuKXt2YXIgaT0xLzM7cmV0dXJuIHQ9dC5jbG9uZSgpLnNjYWxlKDIvMykse2NvbnRyb2xPdXQ6dC5jbG9uZSgpLnRyYW5zbGF0ZVdpdGgoZS5zY2FsZUNvcHkoaSkpLGNvbnRyb2xJbjp0LnRyYW5zbGF0ZVdpdGgobi5zY2FsZUNvcHkoaSkpfX12YXIgbz13aW5kb3cua2VuZG8sYT1vLmRyYXdpbmcscz1vLmdlb21ldHJ5LGw9by5DbGFzcyxjPXMuUG9pbnQsZD1vLmRlZXBFeHRlbmQsdT1lLnRyaW0saD1vLnV0aWwscD1oLmxhc3QsZj0vKFthLXpdezF9KShbXmEtel0qKSh6KT8vZ2ksZz0vWyxcXHNdPygtPyg/OlxcZCtcXC4pP1xcZCspL2csbT1cIm1cIix2PVwielwiLF89bC5leHRlbmQoe3BhcnNlOmZ1bmN0aW9uKGUsbil7dmFyIGkscj1uZXcgYS5NdWx0aVBhdGgobiksbz1uZXcgYztyZXR1cm4gZS5yZXBsYWNlKGYsZnVuY3Rpb24oZSxuLGEscyl7dmFyIGw9bi50b0xvd2VyQ2FzZSgpLGM9bD09PW4sZD10KHUoYSkpO2lmKGw9PT1tJiYoYz8oby54Kz1kWzBdLG8ueSs9ZFsxXSk6KG8ueD1kWzBdLG8ueT1kWzFdKSxyLm1vdmVUbyhvLngsby55KSxkLmxlbmd0aD4yJiYobD1cImxcIixkLnNwbGljZSgwLDIpKSkseVtsXSl5W2xdKHIse3BhcmFtZXRlcnM6ZCxwb3NpdGlvbjpvLGlzUmVsYXRpdmU6YyxwcmV2aW91c0NvbW1hbmQ6aX0pLHMmJnMudG9Mb3dlckNhc2UoKT09PXYmJnIuY2xvc2UoKTtlbHNlIGlmKGwhPT1tKXRocm93IEVycm9yKFwiRXJyb3Igd2hpbGUgcGFyc2luZyBTVkcgcGF0aC4gVW5zdXBwb3J0ZWQgY29tbWFuZDogXCIrbCk7aT1sfSkscn19KSx5PXtsOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXQucGFyYW1ldGVycyxvPXQucG9zaXRpb247Zm9yKG49MDtyLmxlbmd0aD5uO24rPTIpaT1uZXcgYyhyW25dLHJbbisxXSksdC5pc1JlbGF0aXZlJiZpLnRyYW5zbGF0ZVdpdGgobyksZS5saW5lVG8oaS54LGkueSksby54PWkueCxvLnk9aS55fSxjOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT10LnBhcmFtZXRlcnMscz10LnBvc2l0aW9uO2ZvcihvPTA7YS5sZW5ndGg+bztvKz02KW49bmV3IGMoYVtvXSxhW28rMV0pLGk9bmV3IGMoYVtvKzJdLGFbbyszXSkscj1uZXcgYyhhW28rNF0sYVtvKzVdKSx0LmlzUmVsYXRpdmUmJihpLnRyYW5zbGF0ZVdpdGgocyksbi50cmFuc2xhdGVXaXRoKHMpLHIudHJhbnNsYXRlV2l0aChzKSksZS5jdXJ2ZVRvKG4saSxyKSxzLng9ci54LHMueT1yLnl9LHY6ZnVuY3Rpb24oZSx0KXt2YXIgaT10LmlzUmVsYXRpdmU/MDp0LnBvc2l0aW9uLng7bih0LnBhcmFtZXRlcnMsITAsaSksdGhpcy5sKGUsdCl9LGg6ZnVuY3Rpb24oZSx0KXt2YXIgaT10LmlzUmVsYXRpdmU/MDp0LnBvc2l0aW9uLnk7bih0LnBhcmFtZXRlcnMsITEsaSksdGhpcy5sKGUsdCl9LGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbD10LnBhcmFtZXRlcnMsZD10LnBvc2l0aW9uO2ZvcihuPTA7bC5sZW5ndGg+bjtuKz03KWk9bFtuXSxyPWxbbisxXSxvPWxbbiszXSxhPWxbbis0XSxzPW5ldyBjKGxbbis1XSxsW24rNl0pLHQuaXNSZWxhdGl2ZSYmcy50cmFuc2xhdGVXaXRoKGQpLGUuYXJjVG8ocyxpLHIsbyxhKSxkLng9cy54LGQueT1zLnl9LHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLG8sYSxzLGw9dC5wYXJhbWV0ZXJzLGQ9dC5wb3NpdGlvbix1PXQucHJldmlvdXNDb21tYW5kO2ZvcigoXCJzXCI9PXV8fFwiY1wiPT11KSYmKGE9cChwKGUucGF0aHMpLnNlZ21lbnRzKS5jb250cm9sSW4oKSkscz0wO2wubGVuZ3RoPnM7cys9NClvPW5ldyBjKGxbc10sbFtzKzFdKSxyPW5ldyBjKGxbcysyXSxsW3MrM10pLHQuaXNSZWxhdGl2ZSYmKG8udHJhbnNsYXRlV2l0aChkKSxyLnRyYW5zbGF0ZVdpdGgoZCkpLG49YT9pKGEsZCk6ZC5jbG9uZSgpLGE9byxlLmN1cnZlVG8obixvLHIpLGQueD1yLngsZC55PXIueX0scTpmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhLHM9dC5wYXJhbWV0ZXJzLGw9dC5wb3NpdGlvbjtmb3IoYT0wO3MubGVuZ3RoPmE7YSs9NClvPW5ldyBjKHNbYV0sc1thKzFdKSxpPW5ldyBjKHNbYSsyXSxzW2ErM10pLHQuaXNSZWxhdGl2ZSYmKG8udHJhbnNsYXRlV2l0aChsKSxpLnRyYW5zbGF0ZVdpdGgobCkpLG49cihsLG8saSksZS5jdXJ2ZVRvKG4uY29udHJvbE91dCxuLmNvbnRyb2xJbixpKSxsLng9aS54LGwueT1pLnl9LHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixvLGEscyxsLGQ9dC5wYXJhbWV0ZXJzLHU9dC5wb3NpdGlvbixoPXQucHJldmlvdXNDb21tYW5kO2ZvcigoXCJxXCI9PWh8fFwidFwiPT1oKSYmKHM9cChwKGUucGF0aHMpLnNlZ21lbnRzKSxvPXMuY29udHJvbEluKCkuY2xvbmUoKS50cmFuc2xhdGVXaXRoKHUuc2NhbGVDb3B5KC0xLzMpKS5zY2FsZSgxLjUpKSxsPTA7ZC5sZW5ndGg+bDtsKz0yKWE9bmV3IGMoZFtsXSxkW2wrMV0pLHQuaXNSZWxhdGl2ZSYmYS50cmFuc2xhdGVXaXRoKHUpLG89bz9pKG8sdSk6dS5jbG9uZSgpLG49cih1LG8sYSksZS5jdXJ2ZVRvKG4uY29udHJvbE91dCxuLmNvbnRyb2xJbixhKSx1Lng9YS54LHUueT1hLnl9fTtfLmN1cnJlbnQ9bmV3IF8sYS5QYXRoLnBhcnNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8uY3VycmVudC5wYXJzZShlLHQpfSxkKGEse1BhdGhQYXJzZXI6X30pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0LG4saSxyO3RyeXt0PWUuZ2V0U2NyZWVuQ1RNP2UuZ2V0U2NyZWVuQ1RNKCk6bnVsbH1jYXRjaChvKXt9dCYmKG49LXQuZSUxLGk9LXQuZiUxLHI9ZS5zdHlsZSwoMCE9PW58fDAhPT1pKSYmKHIubGVmdD1uK1wicHhcIixyLnRvcD1pK1wicHhcIikpfWZ1bmN0aW9uIG4oKXt2YXIgZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJhc2VcIilbMF0sdD1cIlwiLG49ZG9jdW1lbnQubG9jYXRpb24uaHJlZixpPW4uaW5kZXhPZihcIiNcIik7cmV0dXJuIGUmJiFkLnN1cHBvcnQuYnJvd3Nlci5tc2llJiYoLTEhPT1pJiYobj1uLnN1YnN0cmluZygwLGkpKSx0PW4pLHR9ZnVuY3Rpb24gaShlKXtyZXR1cm5cInVybChcIituKCkrXCIjXCIrZStcIilcIn1mdW5jdGlvbiByKGUpe3ZhciB0LG4saSxyPW5ldyBGKHtlbmNvZGVUZXh0OiEwfSksbz1lLmNsaXBwZWRCQm94KCk7cmV0dXJuIG8mJih0PW8uZ2V0T3JpZ2luKCksbj1uZXcgcC5Hcm91cCxuLnRyYW5zZm9ybShoLnRyYW5zZm9ybSgpLnRyYW5zbGF0ZSgtdC54LC10LnkpKSxuLmNoaWxkcmVuLnB1c2goZSksZT1uKSxyLmxvYWQoW2VdKSxpPVwiPD94bWwgdmVyc2lvbj0nMS4wJyA/Pjxzdmcgc3R5bGU9J3dpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBoaWRkZW47JyB4bWxucz0nXCIrRStcIicgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZlcnNpb249JzEuMSc+XCIrci5yZW5kZXIoKStcIjwvc3ZnPlwiLHIuZGVzdHJveSgpLGl9ZnVuY3Rpb24gbyh0LG4pe3ZhciBpPXIodCk7cmV0dXJuIG4mJm4ucmF3fHwoaT1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXCIrZy5lbmNvZGVCYXNlNjQoaSkpLGUuRGVmZXJyZWQoKS5yZXNvbHZlKGkpLnByb21pc2UoKX1mdW5jdGlvbiBhKGUsdCl7cmV0dXJuXCJjbGlwXCI9PWV8fFwiZmlsbFwiPT1lJiYoIXR8fHQubm9kZVR5cGU9PUMpfWZ1bmN0aW9uIHMoZSl7aWYoIWV8fCFlLmluZGV4T2Z8fGUuaW5kZXhPZihcIiZcIik8MClyZXR1cm4gZTt2YXIgdD1zLl9lbGVtZW50O3JldHVybiB0LmlubmVySFRNTD1lLHQudGV4dENvbnRlbnR8fHQuaW5uZXJUZXh0fXZhciBsLGM9ZG9jdW1lbnQsZD13aW5kb3cua2VuZG8sdT1kLmRlZXBFeHRlbmQsaD1kLmdlb21ldHJ5LHA9ZC5kcmF3aW5nLGY9cC5CYXNlTm9kZSxnPWQudXRpbCxtPWcuZGVmaW5lZCx2PWcuaXNUcmFuc3BhcmVudCxfPWcucmVuZGVyQXR0cix5PWcucmVuZGVyQWxsQXR0cix3PWcucmVuZGVyVGVtcGxhdGUsYj1lLmluQXJyYXksaz1cImJ1dHRcIix4PXAuREFTSF9BUlJBWVMsQz1cImdyYWRpZW50XCIsUz1cIm5vbmVcIixUPVwiLmtlbmRvXCIsRD1cInNvbGlkXCIsQT1cIiBcIixFPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixNPVwidHJhbnNmb3JtXCIsUD1cInVuZGVmaW5lZFwiLEk9cC5TdXJmYWNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4pe3AuU3VyZmFjZS5mbi5pbml0LmNhbGwodGhpcyxlLG4pLHRoaXMuX3Jvb3Q9bmV3IEYodGhpcy5vcHRpb25zKSxLKHRoaXMuZWxlbWVudFswXSx0aGlzLl90ZW1wbGF0ZSh0aGlzKSksdGhpcy5fcm9vdEVsZW1lbnQ9dGhpcy5lbGVtZW50WzBdLmZpcnN0RWxlbWVudENoaWxkLHQodGhpcy5fcm9vdEVsZW1lbnQpLHRoaXMuX3Jvb3QuYXR0YWNoVG8odGhpcy5fcm9vdEVsZW1lbnQpLHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIrVCx0aGlzLl9jbGljayksdGhpcy5lbGVtZW50Lm9uKFwibW91c2VvdmVyXCIrVCx0aGlzLl9tb3VzZWVudGVyKSx0aGlzLmVsZW1lbnQub24oXCJtb3VzZW91dFwiK1QsdGhpcy5fbW91c2VsZWF2ZSksdGhpcy5yZXNpemUoKX0sdHlwZTpcInN2Z1wiLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9yb290JiYodGhpcy5fcm9vdC5kZXN0cm95KCksdGhpcy5fcm9vdD1udWxsLHRoaXMuX3Jvb3RFbGVtZW50PW51bGwsdGhpcy5lbGVtZW50Lm9mZihUKSkscC5TdXJmYWNlLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWQuZm9ybWF0KFwiezB9IHsxfSB7Mn0gezN9XCIsTWF0aC5yb3VuZChlLngpLE1hdGgucm91bmQoZS55KSx0aGlzLl9zaXplLndpZHRoLHRoaXMuX3NpemUuaGVpZ2h0KTt0aGlzLl9vZmZzZXQ9ZSx0aGlzLl9yb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsdCl9LGRyYXc6ZnVuY3Rpb24oZSl7dGhpcy5fcm9vdC5sb2FkKFtlXSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fcm9vdC5jbGVhcigpfSxzdmc6ZnVuY3Rpb24oKXtyZXR1cm5cIjw/eG1sIHZlcnNpb249JzEuMCcgPz5cIit0aGlzLl90ZW1wbGF0ZSh0aGlzKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3RoaXMuX29mZnNldCYmdGhpcy50cmFuc2xhdGUodGhpcy5fb2Zmc2V0KX0sX3RlbXBsYXRlOncoXCI8c3ZnIHN0eWxlPSd3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdzogaGlkZGVuOycgeG1sbnM9J1wiK0UrXCInIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2ZXJzaW9uPScxLjEnPiM9IGQuX3Jvb3QucmVuZGVyKCkgIzwvc3ZnPlwiKX0pLHo9Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Zi5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmRlZmluaXRpb25zPXt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbCksdGhpcy5jbGVhckRlZmluaXRpb25zKCksZi5mbi5kZXN0cm95LmNhbGwodGhpcyl9LGxvYWQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhPXRoaXMscz1hLmVsZW1lbnQ7Zm9yKG89MDtlLmxlbmd0aD5vO28rKylpPWVbb10scj1pLmNoaWxkcmVuLG49bmV3IFlbaS5ub2RlVHlwZV0oaSksbSh0KT9hLmluc2VydEF0KG4sdCk6YS5hcHBlbmQobiksbi5jcmVhdGVEZWZpbml0aW9ucygpLHImJnIubGVuZ3RoPjAmJm4ubG9hZChyKSxzJiZuLmF0dGFjaFRvKHMsdCl9LHJvb3Q6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcztlLnBhcmVudDspZT1lLnBhcmVudDtyZXR1cm4gZX0sYXR0YWNoVG86ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWMuY3JlYXRlRWxlbWVudChcImRpdlwiKTtLKGksXCI8c3ZnIHhtbG5zPSdcIitFK1wiJyB2ZXJzaW9uPScxLjEnPlwiK3RoaXMucmVuZGVyKCkrXCI8L3N2Zz5cIiksbj1pLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCxuJiYobSh0KT9lLmluc2VydEJlZm9yZShuLGUuY2hpbGROb2Rlc1t0XSk6ZS5hcHBlbmRDaGlsZChuKSx0aGlzLnNldEVsZW1lbnQobikpfSxzZXRFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLmNoaWxkTm9kZXM7Zm9yKHRoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudC5fa2VuZG9Ob2RlPW51bGwpLHRoaXMuZWxlbWVudD1lLHRoaXMuZWxlbWVudC5fa2VuZG9Ob2RlPXRoaXMsbj0wO2kubGVuZ3RoPm47bisrKXQ9ZS5jaGlsZE5vZGVzW25dLGlbbl0uc2V0RWxlbWVudCh0KX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZSx0O2Zvcih0aGlzLmNsZWFyRGVmaW5pdGlvbnMoKSx0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPVwiXCIpLGU9dGhpcy5jaGlsZE5vZGVzLHQ9MDtlLmxlbmd0aD50O3QrKyllW3RdLmRlc3Ryb3koKTt0aGlzLmNoaWxkTm9kZXM9W119LHJlbW92ZVNlbGY6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD1udWxsKSxmLmZuLnJlbW92ZVNlbGYuY2FsbCh0aGlzKX0sdGVtcGxhdGU6dyhcIiM9IGQucmVuZGVyQ2hpbGRyZW4oKSAjXCIpLHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRlbXBsYXRlKHRoaXMpfSxyZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jaGlsZE5vZGVzLG49XCJcIjtmb3IoZT0wO3QubGVuZ3RoPmU7ZSsrKW4rPXRbZV0ucmVuZGVyKCk7cmV0dXJuIG59LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWVsZCxuPWUudmFsdWU7XCJ2aXNpYmxlXCI9PT10P3RoaXMuY3NzKFwiZGlzcGxheVwiLG4/XCJcIjpTKTpsW3RdJiZhKHQsbik/dGhpcy51cGRhdGVEZWZpbml0aW9uKHQsbik6XCJvcGFjaXR5XCI9PT10JiZ0aGlzLmF0dHIoXCJvcGFjaXR5XCIsbiksZi5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sYXR0cjpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShlLHQpfSxhbGxBdHRyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKXRoaXMuYXR0cihlW3RdWzBdLGVbdF1bMV0pfSxjc3M6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQmJih0aGlzLmVsZW1lbnQuc3R5bGVbZV09dCl9LGFsbENzczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyl0aGlzLmNzcyhlW3RdWzBdLGVbdF1bMV0pfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShlKX0sbWFwVHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBlJiZ0LnB1c2goW00sXCJtYXRyaXgoXCIrZS5tYXRyaXgoKS50b1N0cmluZyg2KStcIilcIl0pLHR9LHJlbmRlclRyYW5zZm9ybTpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwVHJhbnNmb3JtKHRoaXMuc3JjRWxlbWVudC50cmFuc2Zvcm0oKSkpfSx0cmFuc2Zvcm1DaGFuZ2U6ZnVuY3Rpb24oZSl7ZT90aGlzLmFsbEF0dHIodGhpcy5tYXBUcmFuc2Zvcm0oZSkpOnRoaXMucmVtb3ZlQXR0cihNKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQub3B0aW9ucyx0PVtbXCJjdXJzb3JcIixlLmN1cnNvcl1dO3JldHVybiBlLnZpc2libGU9PT0hMSYmdC5wdXNoKFtcImRpc3BsYXlcIixTXSksdH0scmVuZGVyU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gXyhcInN0eWxlXCIsZy5yZW5kZXJTdHlsZSh0aGlzLm1hcFN0eWxlKCkpKX0scmVuZGVyT3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiBfKFwib3BhY2l0eVwiLHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLm9wYWNpdHkpfSxjcmVhdGVEZWZpbml0aW9uczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5zcmNFbGVtZW50LG89dGhpcy5kZWZpbml0aW9ucztpZihyKXtuPXIub3B0aW9ucztmb3IodCBpbiBsKWU9bi5nZXQodCksZSYmYSh0LGUpJiYob1t0XT1lLGk9ITApO2kmJnRoaXMuZGVmaW5pdGlvbkNoYW5nZSh7YWN0aW9uOlwiYWRkXCIsZGVmaW5pdGlvbnM6b30pfX0sZGVmaW5pdGlvbkNoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuZGVmaW5pdGlvbkNoYW5nZShlKX0sdXBkYXRlRGVmaW5pdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZGVmaW5pdGlvbnMscj1uW2VdLG89bFtlXSxhPXt9O3ImJihhW2VdPXIsdGhpcy5kZWZpbml0aW9uQ2hhbmdlKHthY3Rpb246XCJyZW1vdmVcIixkZWZpbml0aW9uczphfSksZGVsZXRlIG5bZV0pLHQ/KGFbZV09dCx0aGlzLmRlZmluaXRpb25DaGFuZ2Uoe2FjdGlvbjpcImFkZFwiLGRlZmluaXRpb25zOmF9KSxuW2VdPXQsdGhpcy5hdHRyKG8saSh0LmlkKSkpOnImJnRoaXMucmVtb3ZlQXR0cihvKX0sY2xlYXJEZWZpbml0aW9uczpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5kZWZpbml0aW9ucztmb3IoZSBpbiB0KXt0aGlzLmRlZmluaXRpb25DaGFuZ2Uoe2FjdGlvbjpcInJlbW92ZVwiLGRlZmluaXRpb25zOnR9KSx0aGlzLmRlZmluaXRpb25zPXt9O2JyZWFrfX0scmVuZGVyRGVmaW5pdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLm1hcERlZmluaXRpb25zKCkpfSxtYXBEZWZpbml0aW9uczpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5kZWZpbml0aW9ucyxuPVtdO2ZvcihlIGluIHQpbi5wdXNoKFtsW2VdLGkodFtlXS5pZCldKTtyZXR1cm4gbn19KSxGPXouZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ouZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMub3B0aW9ucz1lLHRoaXMuZGVmcz1uZXcgUn0sYXR0YWNoVG86ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50PWUsdGhpcy5kZWZzLmF0dGFjaFRvKGUuZmlyc3RFbGVtZW50Q2hpbGQpfSxjbGVhcjpmdW5jdGlvbigpe2YuZm4uY2xlYXIuY2FsbCh0aGlzKX0sdGVtcGxhdGU6dyhcIiM9ZC5kZWZzLnJlbmRlcigpIyM9IGQucmVuZGVyQ2hpbGRyZW4oKSAjXCIpLGRlZmluaXRpb25DaGFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5kZWZzLmRlZmluaXRpb25DaGFuZ2UoZSl9fSksUj16LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3ouZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuZGVmaW5pdGlvbk1hcD17fX0sYXR0YWNoVG86ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50PWV9LHRlbXBsYXRlOncoXCI8ZGVmcz4jPSBkLnJlbmRlckNoaWxkcmVuKCkjPC9kZWZzPlwiKSxkZWZpbml0aW9uQ2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGVmaW5pdGlvbnMsbj1lLmFjdGlvbjtcImFkZFwiPT1uP3RoaXMuYWRkRGVmaW5pdGlvbnModCk6XCJyZW1vdmVcIj09biYmdGhpcy5yZW1vdmVEZWZpbml0aW9ucyh0KX0sY3JlYXRlRGVmaW5pdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVyblwiY2xpcFwiPT1lP249QjpcImZpbGxcIj09ZSYmKHQgaW5zdGFuY2VvZiBwLkxpbmVhckdyYWRpZW50P249cTp0IGluc3RhbmNlb2YgcC5SYWRpYWxHcmFkaWVudCYmKG49JCkpLG5ldyBuKHQpfSxhZGREZWZpbml0aW9uczpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLmFkZERlZmluaXRpb24odCxlW3RdKX0sYWRkRGVmaW5pdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5kZWZpbml0aW9uTWFwLHI9dC5pZCxvPXRoaXMuZWxlbWVudCxhPWlbcl07YT9hLmNvdW50Kys6KG49dGhpcy5jcmVhdGVEZWZpbml0aW9uKGUsdCksaVtyXT17ZWxlbWVudDpuLGNvdW50OjF9LHRoaXMuYXBwZW5kKG4pLG8mJm4uYXR0YWNoVG8odGhpcy5lbGVtZW50KSl9LHJlbW92ZURlZmluaXRpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMucmVtb3ZlRGVmaW5pdGlvbihlW3RdKX0scmVtb3ZlRGVmaW5pdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlZmluaXRpb25NYXAsbj1lLmlkLGk9dFtuXTtpJiYoaS5jb3VudC0tLDA9PT1pLmNvdW50JiYodGhpcy5yZW1vdmUoYihpLmVsZW1lbnQsdGhpcy5jaGlsZE5vZGVzKSwxKSxkZWxldGUgdFtuXSkpfX0pLEI9ei5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ei5mbi5pbml0LmNhbGwodGhpcyksdGhpcy5zcmNFbGVtZW50PWUsdGhpcy5pZD1lLmlkLHRoaXMubG9hZChbZV0pfSx0ZW1wbGF0ZTp3KFwiPGNsaXBQYXRoIGlkPScjPWQuaWQjJz4jPSBkLnJlbmRlckNoaWxkcmVuKCkjPC9jbGlwUGF0aD5cIil9KSxMPXouZXh0ZW5kKHt0ZW1wbGF0ZTp3KFwiPGcjPSBkLnJlbmRlclRyYW5zZm9ybSgpICsgZC5yZW5kZXJTdHlsZSgpICsgZC5yZW5kZXJPcGFjaXR5KCkgKyBkLnJlbmRlckRlZmluaXRpb25zKCkjPiM9IGQucmVuZGVyQ2hpbGRyZW4oKSAjPC9nPlwiKSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe2UuZmllbGQ9PU0mJnRoaXMudHJhbnNmb3JtQ2hhbmdlKGUudmFsdWUpLHouZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9fSksTz16LmV4dGVuZCh7Z2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmF0dHIoXCJkXCIsdGhpcy5yZW5kZXJEYXRhKCkpLHRoaXMuaW52YWxpZGF0ZSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe3N3aXRjaChlLmZpZWxkKXtjYXNlXCJmaWxsXCI6ZS52YWx1ZT90aGlzLmFsbEF0dHIodGhpcy5tYXBGaWxsKGUudmFsdWUpKTp0aGlzLnJlbW92ZUF0dHIoXCJmaWxsXCIpO2JyZWFrO2Nhc2VcImZpbGwuY29sb3JcIjp0aGlzLmFsbEF0dHIodGhpcy5tYXBGaWxsKHtjb2xvcjplLnZhbHVlfSkpO2JyZWFrO2Nhc2VcInN0cm9rZVwiOmUudmFsdWU/dGhpcy5hbGxBdHRyKHRoaXMubWFwU3Ryb2tlKGUudmFsdWUpKTp0aGlzLnJlbW92ZUF0dHIoXCJzdHJva2VcIik7YnJlYWs7Y2FzZSBNOnRoaXMudHJhbnNmb3JtQ2hhbmdlKGUudmFsdWUpO2JyZWFrO2RlZmF1bHQ6dmFyIHQ9dGhpcy5hdHRyaWJ1dGVNYXBbZS5maWVsZF07dCYmdGhpcy5hdHRyKHQsZS52YWx1ZSl9ei5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sYXR0cmlidXRlTWFwOntcImZpbGwub3BhY2l0eVwiOlwiZmlsbC1vcGFjaXR5XCIsXCJzdHJva2UuY29sb3JcIjpcInN0cm9rZVwiLFwic3Ryb2tlLndpZHRoXCI6XCJzdHJva2Utd2lkdGhcIixcInN0cm9rZS5vcGFjaXR5XCI6XCJzdHJva2Utb3BhY2l0eVwifSxjb250ZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50LnRleHRDb250ZW50PXRoaXMuc3JjRWxlbWVudC5jb250ZW50KCkpfSxyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJpbnRQYXRoKHRoaXMuc3JjRWxlbWVudCl9LHByaW50UGF0aDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9ZS5zZWdtZW50cyxzPWEubGVuZ3RoO2lmKHM+MCl7Zm9yKHQ9W10sbz0xO3M+bztvKyspaT10aGlzLnNlZ21lbnRUeXBlKGFbby0xXSxhW29dKSxpIT09ciYmKHI9aSx0LnB1c2goaSkpLHQucHVzaChcIkxcIj09PWk/dGhpcy5wcmludFBvaW50cyhhW29dLmFuY2hvcigpKTp0aGlzLnByaW50UG9pbnRzKGFbby0xXS5jb250cm9sT3V0KCksYVtvXS5jb250cm9sSW4oKSxhW29dLmFuY2hvcigpKSk7cmV0dXJuIG49XCJNXCIrdGhpcy5wcmludFBvaW50cyhhWzBdLmFuY2hvcigpKStBK3Quam9pbihBKSxlLm9wdGlvbnMuY2xvc2VkJiYobis9XCJaXCIpLG59fSxwcmludFBvaW50czpmdW5jdGlvbigpe3ZhciBlLHQ9YXJndW1lbnRzLG49dC5sZW5ndGgsaT1bXTtmb3IoZT0wO24+ZTtlKyspaS5wdXNoKHRbZV0udG9TdHJpbmcoMykpO3JldHVybiBpLmpvaW4oQSl9LHNlZ21lbnRUeXBlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29udHJvbE91dCgpJiZ0LmNvbnRyb2xJbigpP1wiQ1wiOlwiTFwifSxtYXBTdHJva2U6ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUmJiF2KGUuY29sb3IpPyh0LnB1c2goW1wic3Ryb2tlXCIsZS5jb2xvcl0pLHQucHVzaChbXCJzdHJva2Utd2lkdGhcIixlLndpZHRoXSksdC5wdXNoKFtcInN0cm9rZS1saW5lY2FwXCIsdGhpcy5yZW5kZXJMaW5lY2FwKGUpXSksdC5wdXNoKFtcInN0cm9rZS1saW5lam9pblwiLGUubGluZUpvaW5dKSxtKGUub3BhY2l0eSkmJnQucHVzaChbXCJzdHJva2Utb3BhY2l0eVwiLGUub3BhY2l0eV0pLG0oZS5kYXNoVHlwZSkmJnQucHVzaChbXCJzdHJva2UtZGFzaGFycmF5XCIsdGhpcy5yZW5kZXJEYXNoVHlwZShlKV0pKTp0LnB1c2goW1wic3Ryb2tlXCIsU10pLHR9LHJlbmRlclN0cm9rZTpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwU3Ryb2tlKHRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZSkpfSxyZW5kZXJEYXNoVHlwZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1lLndpZHRofHwxLG89ZS5kYXNoVHlwZTtpZihvJiZvIT1EKXtmb3IodD14W28udG9Mb3dlckNhc2UoKV0sbj1bXSxpPTA7dC5sZW5ndGg+aTtpKyspbi5wdXNoKHRbaV0qcik7cmV0dXJuIG4uam9pbihcIiBcIil9fSxyZW5kZXJMaW5lY2FwOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGFzaFR5cGUsbj1lLmxpbmVDYXA7cmV0dXJuIHQmJnQhPUQ/azpufSxtYXBGaWxsOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBlJiZlLm5vZGVUeXBlPT1DfHwoZSYmIXYoZS5jb2xvcik/KHQucHVzaChbXCJmaWxsXCIsZS5jb2xvcl0pLG0oZS5vcGFjaXR5KSYmdC5wdXNoKFtcImZpbGwtb3BhY2l0eVwiLGUub3BhY2l0eV0pKTp0LnB1c2goW1wiZmlsbFwiLFNdKSksdH0scmVuZGVyRmlsbDpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMubWFwRmlsbCh0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5maWxsKSl9LHRlbXBsYXRlOncoXCI8cGF0aCAjPSBkLnJlbmRlclN0eWxlKCkgIyAjPSBkLnJlbmRlck9wYWNpdHkoKSAjICM9IGtlbmRvLnV0aWwucmVuZGVyQXR0cignZCcsIGQucmVuZGVyRGF0YSgpKSAjICM9IGQucmVuZGVyU3Ryb2tlKCkgIyAjPSBkLnJlbmRlckZpbGwoKSAjICM9IGQucmVuZGVyRGVmaW5pdGlvbnMoKSAjICM9IGQucmVuZGVyVHJhbnNmb3JtKCkgIz48L3BhdGg+XCIpfSksSD1PLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByaW50UGF0aCh0aGlzLnNyY0VsZW1lbnQudG9QYXRoKCkpfX0pLE49Ty5leHRlbmQoe3JlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5zcmNFbGVtZW50LnBhdGhzO2lmKG4ubGVuZ3RoPjApe2ZvcihlPVtdLHQ9MDtuLmxlbmd0aD50O3QrKyllLnB1c2godGhpcy5wcmludFBhdGgoblt0XSkpO3JldHVybiBlLmpvaW4oXCIgXCIpfX19KSxWPU8uZXh0ZW5kKHtnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY2VudGVyKCk7dGhpcy5hdHRyKFwiY3hcIixlLngpLHRoaXMuYXR0cihcImN5XCIsZS55KSx0aGlzLmF0dHIoXCJyXCIsdGhpcy5yYWRpdXMoKSksdGhpcy5pbnZhbGlkYXRlKCl9LGNlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNyY0VsZW1lbnQuZ2VvbWV0cnkoKS5jZW50ZXJ9LHJhZGl1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNyY0VsZW1lbnQuZ2VvbWV0cnkoKS5yYWRpdXN9LHRlbXBsYXRlOncoXCI8Y2lyY2xlICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgY3g9JyM9IGQuY2VudGVyKCkueCAjJyBjeT0nIz0gZC5jZW50ZXIoKS55ICMnIHI9JyM9IGQucmFkaXVzKCkgIycgIz0gZC5yZW5kZXJTdHJva2UoKSAjICM9IGQucmVuZGVyRmlsbCgpICMgIz0gZC5yZW5kZXJEZWZpbml0aW9ucygpICMgIz0gZC5yZW5kZXJUcmFuc2Zvcm0oKSAjID48L2NpcmNsZT5cIil9KSxVPU8uZXh0ZW5kKHtnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucG9zKCk7dGhpcy5hdHRyKFwieFwiLGUueCksdGhpcy5hdHRyKFwieVwiLGUueSksdGhpcy5pbnZhbGlkYXRlKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJmb250XCI9PT1lLmZpZWxkPyh0aGlzLmF0dHIoXCJzdHlsZVwiLGcucmVuZGVyU3R5bGUodGhpcy5tYXBTdHlsZSgpKSksdGhpcy5nZW9tZXRyeUNoYW5nZSgpKTpcImNvbnRlbnRcIj09PWUuZmllbGQmJk8uZm4uY29udGVudC5jYWxsKHRoaXMsdGhpcy5zcmNFbGVtZW50LmNvbnRlbnQoKSksTy5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT1PLmZuLm1hcFN0eWxlLmNhbGwodGhpcyksdD10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5mb250LG49dGhpcy5yb290KCkub3B0aW9ucztyZXR1cm4gbiYmbi5lbmNvZGVUZXh0JiYodD1kLmh0bWxFbmNvZGUodCkpLGUucHVzaChbXCJmb250XCIsdF0pLGV9LHBvczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5wb3NpdGlvbigpLHQ9dGhpcy5zcmNFbGVtZW50Lm1lYXN1cmUoKTtyZXR1cm4gZS5jbG9uZSgpLnNldFkoZS55K3QuYmFzZWxpbmUpfSxjb250ZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LmNvbnRlbnQoKSx0PXRoaXMucm9vdCgpLm9wdGlvbnM7cmV0dXJuIHQmJnQuZW5jb2RlVGV4dCYmKGU9cyhlKSxlPWQuaHRtbEVuY29kZShlKSksZX0sdGVtcGxhdGU6dyhcIjx0ZXh0ICM9IGQucmVuZGVyU3R5bGUoKSAjICM9IGQucmVuZGVyT3BhY2l0eSgpICMgeD0nIz0gdGhpcy5wb3MoKS54ICMnIHk9JyM9IHRoaXMucG9zKCkueSAjJyAjPSBkLnJlbmRlclN0cm9rZSgpICMgIz0gZC5yZW5kZXJUcmFuc2Zvcm0oKSAjICM9IGQucmVuZGVyRGVmaW5pdGlvbnMoKSAjICM9IGQucmVuZGVyRmlsbCgpICM+PHRzcGFuPiM9IGQuY29udGVudCgpICM8L3RzcGFuPjwvdGV4dD5cIil9KSxXPU8uZXh0ZW5kKHtnZW9tZXRyeUNoYW5nZTpmdW5jdGlvbigpe3RoaXMuYWxsQXR0cih0aGlzLm1hcFBvc2l0aW9uKCkpLHRoaXMuaW52YWxpZGF0ZSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1wic3JjXCI9PT1lLmZpZWxkJiZ0aGlzLmFsbEF0dHIodGhpcy5tYXBTb3VyY2UoKSksTy5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sbWFwUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQucmVjdCgpLHQ9ZS50b3BMZWZ0KCk7cmV0dXJuW1tcInhcIix0LnhdLFtcInlcIix0LnldLFtcIndpZHRoXCIsZS53aWR0aCgpK1wicHhcIl0sW1wiaGVpZ2h0XCIsZS5oZWlnaHQoKStcInB4XCJdXX0scmVuZGVyUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLm1hcFBvc2l0aW9uKCkpfSxtYXBTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm5bW1wieGxpbms6aHJlZlwiLHRoaXMuc3JjRWxlbWVudC5zcmMoKV1dfSxyZW5kZXJTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLm1hcFNvdXJjZSgpKX0sdGVtcGxhdGU6dyhcIjxpbWFnZSBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSdub25lJyAjPSBkLnJlbmRlclN0eWxlKCkgIyAjPSBkLnJlbmRlclRyYW5zZm9ybSgpIyAjPSBkLnJlbmRlck9wYWNpdHkoKSAjICM9IGQucmVuZGVyUG9zaXRpb24oKSAjICM9IGQucmVuZGVyU291cmNlKCkgIyAjPSBkLnJlbmRlckRlZmluaXRpb25zKCkjPjwvaW1hZ2U+XCIpfSksaj16LmV4dGVuZCh7dGVtcGxhdGU6dyhcIjxzdG9wICM9ZC5yZW5kZXJPZmZzZXQoKSMgIz1kLnJlbmRlclN0eWxlKCkjIC8+XCIpLHJlbmRlck9mZnNldDpmdW5jdGlvbigpe3JldHVybiBfKFwib2Zmc2V0XCIsdGhpcy5zcmNFbGVtZW50Lm9mZnNldCgpKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQ7cmV0dXJuW1tcInN0b3AtY29sb3JcIixlLmNvbG9yKCldLFtcInN0b3Atb3BhY2l0eVwiLGUub3BhY2l0eSgpXV19LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJvZmZzZXRcIj09ZS5maWVsZD90aGlzLmF0dHIoZS5maWVsZCxlLnZhbHVlKTooXCJjb2xvclwiPT1lLmZpZWxkfHxcIm9wYWNpdHlcIj09ZS5maWVsZCkmJnRoaXMuY3NzKFwic3RvcC1cIitlLmZpZWxkLGUudmFsdWUpfX0pLEc9ei5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ei5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLmlkPWUuaWQsdGhpcy5sb2FkU3RvcHMoKX0sbG9hZFN0b3BzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuc3JjRWxlbWVudCxpPW4uc3RvcHMscj10aGlzLmVsZW1lbnQ7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKyllPW5ldyBqKGlbdF0pLHRoaXMuYXBwZW5kKGUpLHImJmUuYXR0YWNoVG8ocil9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJncmFkaWVudC5zdG9wc1wiPT1lLmZpZWxkPyhmLmZuLmNsZWFyLmNhbGwodGhpcyksdGhpcy5sb2FkU3RvcHMoKSk6ZS5maWVsZD09QyYmdGhpcy5hbGxBdHRyKHRoaXMubWFwQ29vcmRpbmF0ZXMoKSl9LHJlbmRlckNvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5tYXBDb29yZGluYXRlcygpKX0sbWFwU3BhY2U6ZnVuY3Rpb24oKXtyZXR1cm5bXCJncmFkaWVudFVuaXRzXCIsdGhpcy5zcmNFbGVtZW50LnVzZXJTcGFjZSgpP1widXNlclNwYWNlT25Vc2VcIjpcIm9iamVjdEJvdW5kaW5nQm94XCJdfX0pLHE9Ry5leHRlbmQoe3RlbXBsYXRlOncoXCI8bGluZWFyR3JhZGllbnQgaWQ9JyM9ZC5pZCMnICM9ZC5yZW5kZXJDb29yZGluYXRlcygpIz4jPSBkLnJlbmRlckNoaWxkcmVuKCkjPC9saW5lYXJHcmFkaWVudD5cIiksbWFwQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQsdD1lLnN0YXJ0KCksbj1lLmVuZCgpLGk9W1tcIngxXCIsdC54XSxbXCJ5MVwiLHQueV0sW1wieDJcIixuLnhdLFtcInkyXCIsbi55XSx0aGlzLm1hcFNwYWNlKCldO3JldHVybiBpfX0pLCQ9Ry5leHRlbmQoe3RlbXBsYXRlOncoXCI8cmFkaWFsR3JhZGllbnQgaWQ9JyM9ZC5pZCMnICM9ZC5yZW5kZXJDb29yZGluYXRlcygpIz4jPSBkLnJlbmRlckNoaWxkcmVuKCkjPC9yYWRpYWxHcmFkaWVudD5cIiksbWFwQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQsdD1lLmNlbnRlcigpLG49ZS5yYWRpdXMoKSxpPVtbXCJjeFwiLHQueF0sW1wiY3lcIix0LnldLFtcInJcIixuXSx0aGlzLm1hcFNwYWNlKCldO1xucmV0dXJuIGl9fSksWT17R3JvdXA6TCxUZXh0OlUsUGF0aDpPLE11bHRpUGF0aDpOLENpcmNsZTpWLEFyYzpILEltYWdlOld9LEs9ZnVuY3Rpb24oZSx0KXtlLmlubmVySFRNTD10fTshZnVuY3Rpb24oKXt2YXIgZT1cIjxzdmcgeG1sbnM9J1wiK0UrXCInPjwvc3ZnPlwiLHQ9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG49dHlwZW9mIERPTVBhcnNlciE9UDt0LmlubmVySFRNTD1lLG4mJnQuZmlyc3RDaGlsZC5uYW1lc3BhY2VVUkkhPUUmJihLPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IERPTVBhcnNlcixpPW4ucGFyc2VGcm9tU3RyaW5nKHQsXCJ0ZXh0L3htbFwiKSxyPWMuYWRvcHROb2RlKGkuZG9jdW1lbnRFbGVtZW50KTtlLmlubmVySFRNTD1cIlwiLGUuYXBwZW5kQ2hpbGQocil9KX0oKSxzLl9lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGw9e2NsaXA6XCJjbGlwLXBhdGhcIixmaWxsOlwiZmlsbFwifSxkLnN1cHBvcnQuc3ZnPWZ1bmN0aW9uKCl7cmV0dXJuIGMuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjQmFzaWNTdHJ1Y3R1cmVcIixcIjEuMVwiKX0oKSxkLnN1cHBvcnQuc3ZnJiZwLlN1cmZhY2VGYWN0b3J5LmN1cnJlbnQucmVnaXN0ZXIoXCJzdmdcIixJLDEwKSx1KHAse2V4cG9ydFNWRzpvLHN2Zzp7QXJjTm9kZTpILENpcmNsZU5vZGU6VixDbGlwTm9kZTpCLERlZmluaXRpb25Ob2RlOlIsR3JhZGllbnRTdG9wTm9kZTpqLEdyb3VwTm9kZTpMLEltYWdlTm9kZTpXLExpbmVhckdyYWRpZW50Tm9kZTpxLE11bHRpUGF0aE5vZGU6TixOb2RlOnosUGF0aE5vZGU6TyxSYWRpYWxHcmFkaWVudE5vZGU6JCxSb290Tm9kZTpGLFN1cmZhY2U6SSxUZXh0Tm9kZTpVLF9leHBvcnRHcm91cDpyfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGkscixvLGEscyxsLGM9e3dpZHRoOlwiODAwcHhcIixoZWlnaHQ6XCI2MDBweFwiLGNvcnM6XCJBbm9ueW1vdXNcIn0sZD10LmNsaXBwZWRCQm94KCk7cmV0dXJuIGQmJihpPWQuZ2V0T3JpZ2luKCkscj1uZXcgdy5Hcm91cCxyLnRyYW5zZm9ybSh5LnRyYW5zZm9ybSgpLnRyYW5zbGF0ZSgtaS54LC1pLnkpKSxyLmNoaWxkcmVuLnB1c2godCksdD1yLG89ZC5nZXRTaXplKCksYy53aWR0aD1vLndpZHRoK1wicHhcIixjLmhlaWdodD1vLmhlaWdodCtcInB4XCIpLG49cChjLG4pLGE9ZShcIjxkaXYgLz5cIikuY3NzKHtkaXNwbGF5Olwibm9uZVwiLHdpZHRoOm4ud2lkdGgsaGVpZ2h0Om4uaGVpZ2h0fSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkscz1uZXcgVChhLG4pLHMuZHJhdyh0KSxsPXMuaW1hZ2UoKSxsLmFsd2F5cyhmdW5jdGlvbigpe3MuZGVzdHJveSgpLGEucmVtb3ZlKCl9KSxsfWZ1bmN0aW9uIG4oZSx0KXt2YXIgbixpLHI7Zm9yKHI9MDt0Lmxlbmd0aD5yO3IrKylpPXRbcl0sbj1oLnBhcnNlQ29sb3IoaS5jb2xvcigpKSxuLmEqPWkub3BhY2l0eSgpLGUuYWRkQ29sb3JTdG9wKGkub2Zmc2V0KCksbi50b0Nzc1JnYmEoKSl9dmFyIGkscixvLGEscyxsLGMsZCx1PWRvY3VtZW50LGg9d2luZG93LmtlbmRvLHA9aC5kZWVwRXh0ZW5kLGY9aC51dGlsLGc9Zi5kZWZpbmVkLG09Zi5pc1RyYW5zcGFyZW50LHY9Zi5yZW5kZXJUZW1wbGF0ZSxfPWYudmFsdWVPckRlZmF1bHQseT1oLmdlb21ldHJ5LHc9aC5kcmF3aW5nLGI9dy5CYXNlTm9kZSxrPVwiYnV0dFwiLHg9dy5EQVNIX0FSUkFZUyxDPTFlMy82MCxTPVwic29saWRcIixUPXcuU3VyZmFjZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt3LlN1cmZhY2UuZm4uaW5pdC5jYWxsKHRoaXMsdCxuKSx0aGlzLmVsZW1lbnRbMF0uaW5uZXJIVE1MPXRoaXMuX3RlbXBsYXRlKHRoaXMpO3ZhciByPXRoaXMuZWxlbWVudFswXS5maXJzdEVsZW1lbnRDaGlsZDtyLndpZHRoPWUodCkud2lkdGgoKSxyLmhlaWdodD1lKHQpLmhlaWdodCgpLHRoaXMuX3Jvb3RFbGVtZW50PXIsdGhpcy5fcm9vdD1uZXcgaShyKX0sZGVzdHJveTpmdW5jdGlvbigpe3cuU3VyZmFjZS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fcm9vdCYmKHRoaXMuX3Jvb3QuZGVzdHJveSgpLHRoaXMuX3Jvb3Q9bnVsbCl9LHR5cGU6XCJjYW52YXNcIixkcmF3OmZ1bmN0aW9uKGUpe3RoaXMuX3Jvb3QubG9hZChbZV0sdm9pZCAwLHRoaXMub3B0aW9ucy5jb3JzKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yb290LmNsZWFyKCl9LGltYWdlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLl9yb290LGk9dGhpcy5fcm9vdEVsZW1lbnQscj1bXTtyZXR1cm4gbi50cmF2ZXJzZShmdW5jdGlvbihlKXtlLmxvYWRpbmcmJnIucHVzaChlLmxvYWRpbmcpfSksdD1lLkRlZmVycmVkKCksZS53aGVuLmFwcGx5KGUscikuZG9uZShmdW5jdGlvbigpe24uX2ludmFsaWRhdGUoKTt0cnl7dmFyIGU9aS50b0RhdGFVUkwoKTt0LnJlc29sdmUoZSl9Y2F0Y2gocil7dC5yZWplY3Qocil9fSkuZmFpbChmdW5jdGlvbihlKXt0LnJlamVjdChlKX0pLHQucHJvbWlzZSgpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fcm9vdEVsZW1lbnQud2lkdGg9dGhpcy5fc2l6ZS53aWR0aCx0aGlzLl9yb290RWxlbWVudC5oZWlnaHQ9dGhpcy5fc2l6ZS5oZWlnaHQsdGhpcy5fcm9vdC5pbnZhbGlkYXRlKCl9LF90ZW1wbGF0ZTp2KFwiPGNhbnZhcyBzdHlsZT0nd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsnPjwvY2FudmFzPlwiKX0pLEQ9Yi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Yi5mbi5pbml0LmNhbGwodGhpcyxlKSxlJiZ0aGlzLmluaXRDbGlwKCl9LGluaXRDbGlwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zcmNFbGVtZW50LmNsaXAoKTtlJiYodGhpcy5jbGlwPWUsZS5hZGRPYnNlcnZlcih0aGlzKSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5zcmNFbGVtZW50JiZ0aGlzLnNyY0VsZW1lbnQucmVtb3ZlT2JzZXJ2ZXIodGhpcyksdGhpcy5jbGVhckNsaXAoKSxiLmZuLmNsZWFyLmNhbGwodGhpcyl9LGNsZWFyQ2xpcDpmdW5jdGlvbigpe3RoaXMuY2xpcCYmKHRoaXMuY2xpcC5yZW1vdmVPYnNlcnZlcih0aGlzKSxkZWxldGUgdGhpcy5jbGlwKX0sc2V0Q2xpcDpmdW5jdGlvbihlKXt0aGlzLmNsaXAmJihlLmJlZ2luUGF0aCgpLHIuZm4ucmVuZGVyUG9pbnRzKGUsdGhpcy5jbGlwKSxlLmNsaXAoKSl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJjbGlwXCI9PWUuZmllbGQmJih0aGlzLmNsZWFyQ2xpcCgpLHRoaXMuaW5pdENsaXAoKSksYi5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sc2V0VHJhbnNmb3JtOmZ1bmN0aW9uKGUpe2lmKHRoaXMuc3JjRWxlbWVudCl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LnRyYW5zZm9ybSgpO3QmJmUudHJhbnNmb3JtLmFwcGx5KGUsdC5tYXRyaXgoKS50b0FycmF5KDYpKX19LGxvYWQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM9dGhpcztmb3IoYT0wO2UubGVuZ3RoPmE7YSsrKXI9ZVthXSxvPXIuY2hpbGRyZW4saT1uZXcgZFtyLm5vZGVUeXBlXShyLG4pLG8mJm8ubGVuZ3RoPjAmJmkubG9hZChvLHQsbiksZyh0KT9zLmluc2VydEF0KGksdCk6cy5hcHBlbmQoaSk7cy5pbnZhbGlkYXRlKCl9LHNldE9wYWNpdHk6ZnVuY3Rpb24oZSl7aWYodGhpcy5zcmNFbGVtZW50KXt2YXIgdD10aGlzLnNyY0VsZW1lbnQub3BhY2l0eSgpO2codCkmJnRoaXMuZ2xvYmFsQWxwaGEoZSx0KX19LGdsb2JhbEFscGhhOmZ1bmN0aW9uKGUsdCl7dCYmZS5nbG9iYWxBbHBoYSYmKHQqPWUuZ2xvYmFsQWxwaGEpLGUuZ2xvYmFsQWxwaGE9dH19KSxBPUQuZXh0ZW5kKHtyZW5kZXJUbzpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuY2hpbGROb2Rlcztmb3IoZS5zYXZlKCksdGhpcy5zZXRUcmFuc2Zvcm0oZSksdGhpcy5zZXRDbGlwKGUpLHRoaXMuc2V0T3BhY2l0eShlKSx0PTA7bi5sZW5ndGg+dDt0Kyspblt0XS5yZW5kZXJUbyhlKTtlLnJlc3RvcmUoKX19KTt3Lm1peGlucy5UcmF2ZXJzYWJsZS5leHRlbmQoQS5mbixcImNoaWxkTm9kZXNcIiksaT1BLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtBLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLmNhbnZhcz10LHRoaXMuY3R4PXQuZ2V0Q29udGV4dChcIjJkXCIpLHRoaXMuaW52YWxpZGF0ZT1oLnRocm90dGxlKGUucHJveHkodGhpcy5faW52YWxpZGF0ZSx0aGlzKSxDKX0sZGVzdHJveTpmdW5jdGlvbigpe0EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuY2FudmFzPW51bGwsdGhpcy5jdHg9bnVsbH0sX2ludmFsaWRhdGU6ZnVuY3Rpb24oKXt0aGlzLmN0eCYmKHRoaXMuY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KSx0aGlzLnJlbmRlclRvKHRoaXMuY3R4KSl9fSksdy5taXhpbnMuVHJhdmVyc2FibGUuZXh0ZW5kKGkuZm4sXCJjaGlsZE5vZGVzXCIpLHI9RC5leHRlbmQoe3JlbmRlclRvOmZ1bmN0aW9uKGUpe2Uuc2F2ZSgpLHRoaXMuc2V0VHJhbnNmb3JtKGUpLHRoaXMuc2V0Q2xpcChlKSx0aGlzLnNldE9wYWNpdHkoZSksZS5iZWdpblBhdGgoKSx0aGlzLnJlbmRlclBvaW50cyhlLHRoaXMuc3JjRWxlbWVudCksdGhpcy5zZXRMaW5lRGFzaChlKSx0aGlzLnNldExpbmVDYXAoZSksdGhpcy5zZXRMaW5lSm9pbihlKSx0aGlzLnNldEZpbGwoZSksdGhpcy5zZXRTdHJva2UoZSksZS5yZXN0b3JlKCl9LHNldEZpbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuZmlsbCxuPSExO3JldHVybiB0JiYoXCJncmFkaWVudFwiPT10Lm5vZGVUeXBlPyh0aGlzLnNldEdyYWRpZW50RmlsbChlLHQpLG49ITApOm0odC5jb2xvcil8fChlLmZpbGxTdHlsZT10LmNvbG9yLGUuc2F2ZSgpLHRoaXMuZ2xvYmFsQWxwaGEoZSx0Lm9wYWNpdHkpLGUuZmlsbCgpLGUucmVzdG9yZSgpLG49ITApKSxufSxzZXRHcmFkaWVudEZpbGw6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG8sYSxzPXRoaXMuc3JjRWxlbWVudC5yYXdCQm94KCk7dCBpbnN0YW5jZW9mIHcuTGluZWFyR3JhZGllbnQ/KHI9dC5zdGFydCgpLG89dC5lbmQoKSxpPWUuY3JlYXRlTGluZWFyR3JhZGllbnQoci54LHIueSxvLngsby55KSk6dCBpbnN0YW5jZW9mIHcuUmFkaWFsR3JhZGllbnQmJihhPXQuY2VudGVyKCksaT1lLmNyZWF0ZVJhZGlhbEdyYWRpZW50KGEueCxhLnksMCxhLngsYS55LHQucmFkaXVzKCkpKSxuKGksdC5zdG9wcyksZS5zYXZlKCksdC51c2VyU3BhY2UoKXx8ZS50cmFuc2Zvcm0ocy53aWR0aCgpLDAsMCxzLmhlaWdodCgpLHMub3JpZ2luLngscy5vcmlnaW4ueSksZS5maWxsU3R5bGU9aSxlLmZpbGwoKSxlLnJlc3RvcmUoKX0sc2V0U3Ryb2tlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZTtyZXR1cm4gdCYmIW0odC5jb2xvcik/KGUuc3Ryb2tlU3R5bGU9dC5jb2xvcixlLmxpbmVXaWR0aD1fKHQud2lkdGgsMSksZS5zYXZlKCksdGhpcy5nbG9iYWxBbHBoYShlLHQub3BhY2l0eSksZS5zdHJva2UoKSxlLnJlc3RvcmUoKSwhMCk6dm9pZCAwfSxkYXNoVHlwZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZTtyZXR1cm4gZSYmZS5kYXNoVHlwZT9lLmRhc2hUeXBlLnRvTG93ZXJDYXNlKCk6dm9pZCAwfSxzZXRMaW5lRGFzaDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZGFzaFR5cGUoKTtuJiZuIT1TJiYodD14W25dLGUuc2V0TGluZURhc2g/ZS5zZXRMaW5lRGFzaCh0KTooZS5tb3pEYXNoPXQsZS53ZWJraXRMaW5lRGFzaD10KSl9LHNldExpbmVDYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXNoVHlwZSgpLG49dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuc3Ryb2tlO3QmJnQhPT1TP2UubGluZUNhcD1rOm4mJm4ubGluZUNhcCYmKGUubGluZUNhcD1uLmxpbmVDYXApfSxzZXRMaW5lSm9pbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5zdHJva2U7dCYmdC5saW5lSm9pbiYmKGUubGluZUpvaW49dC5saW5lSm9pbil9LHJlbmRlclBvaW50czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsPXQuc2VnbWVudHM7aWYoMCE9PWwubGVuZ3RoKXtmb3Iobj1sWzBdLGk9bi5hbmNob3IoKSxlLm1vdmVUbyhpLngsaS55KSxyPTE7bC5sZW5ndGg+cjtyKyspbj1sW3JdLGk9bi5hbmNob3IoKSxvPWxbci0xXSxhPW8uY29udHJvbE91dCgpLHM9bi5jb250cm9sSW4oKSxhJiZzP2UuYmV6aWVyQ3VydmVUbyhhLngsYS55LHMueCxzLnksaS54LGkueSk6ZS5saW5lVG8oaS54LGkueSk7dC5vcHRpb25zLmNsb3NlZCYmZS5jbG9zZVBhdGgoKX19fSksbz1yLmV4dGVuZCh7cmVuZGVyUG9pbnRzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zcmNFbGVtZW50LnBhdGhzO2Zvcih0PTA7bi5sZW5ndGg+dDt0Kyspci5mbi5yZW5kZXJQb2ludHMoZSxuW3RdKX19KSxhPXIuZXh0ZW5kKHtyZW5kZXJQb2ludHM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50Lmdlb21ldHJ5KCksbj10LmNlbnRlcixpPXQucmFkaXVzO2UuYXJjKG4ueCxuLnksaSwwLDIqTWF0aC5QSSl9fSkscz1yLmV4dGVuZCh7cmVuZGVyUG9pbnRzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3JjRWxlbWVudC50b1BhdGgoKTtyLmZuLnJlbmRlclBvaW50cy5jYWxsKHRoaXMsZSx0KX19KSxsPXIuZXh0ZW5kKHtyZW5kZXJUbzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNyY0VsZW1lbnQsbj10LnBvc2l0aW9uKCksaT10Lm1lYXN1cmUoKTtlLnNhdmUoKSx0aGlzLnNldFRyYW5zZm9ybShlKSx0aGlzLnNldENsaXAoZSksdGhpcy5zZXRPcGFjaXR5KGUpLGUuYmVnaW5QYXRoKCksZS5mb250PXQub3B0aW9ucy5mb250LHRoaXMuc2V0RmlsbChlKSYmZS5maWxsVGV4dCh0LmNvbnRlbnQoKSxuLngsbi55K2kuYmFzZWxpbmUpLHRoaXMuc2V0U3Ryb2tlKGUpJiYodGhpcy5zZXRMaW5lRGFzaChlKSxlLnN0cm9rZVRleHQodC5jb250ZW50KCksbi54LG4ueStpLmJhc2VsaW5lKSksZS5yZXN0b3JlKCl9fSksYz1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLG87ci5mbi5pbml0LmNhbGwodGhpcyx0KSx0aGlzLm9uTG9hZD1lLnByb3h5KHRoaXMub25Mb2FkLHRoaXMpLHRoaXMub25FcnJvcj1lLnByb3h5KHRoaXMub25FcnJvcix0aGlzKSxpPXRoaXMuaW1nPW5ldyBJbWFnZSxuJiYoaS5jcm9zc09yaWdpbj1uKSxpLm9ubG9hZD10aGlzLm9uTG9hZCxpLm9uZXJyb3I9dGhpcy5vbkVycm9yLG89aS5zcmM9dC5zcmMoKSwoaS5jb21wbGV0ZXx8dm9pZCAwPT09aS5jb21wbGV0ZSkmJihpLnNyYz1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIixpLnNyYz1vKSx0aGlzLmxvYWRpbmc9ZS5EZWZlcnJlZCgpfSxyZW5kZXJUbzpmdW5jdGlvbihlKXtcInJlc29sdmVkXCI9PT10aGlzLmxvYWRpbmcuc3RhdGUoKSYmKGUuc2F2ZSgpLHRoaXMuc2V0VHJhbnNmb3JtKGUpLHRoaXMuc2V0Q2xpcChlKSx0aGlzLmRyYXdJbWFnZShlKSxlLnJlc3RvcmUoKSl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24odCl7XCJzcmNcIj09PXQuZmllbGQ/KHRoaXMubG9hZGluZz1lLkRlZmVycmVkKCksdGhpcy5pbWcuc3JjPXRoaXMuc3JjRWxlbWVudC5zcmMoKSk6ci5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyx0KX0sb25Mb2FkOmZ1bmN0aW9uKCl7dGhpcy5sb2FkaW5nLnJlc29sdmUoKSx0aGlzLmludmFsaWRhdGUoKX0sb25FcnJvcjpmdW5jdGlvbigpe3RoaXMubG9hZGluZy5yZWplY3QoRXJyb3IoXCJVbmFibGUgdG8gbG9hZCBpbWFnZSAnXCIrdGhpcy5pbWcuc3JjK1wiJy4gQ2hlY2sgZm9yIGNvbm5lY3Rpdml0eSBhbmQgdmVyaWZ5IENPUlMgaGVhZGVycy5cIikpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LnJlY3QoKSxuPXQudG9wTGVmdCgpO2UuZHJhd0ltYWdlKHRoaXMuaW1nLG4ueCxuLnksdC53aWR0aCgpLHQuaGVpZ2h0KCkpfX0pLGQ9e0dyb3VwOkEsVGV4dDpsLFBhdGg6cixNdWx0aVBhdGg6byxDaXJjbGU6YSxBcmM6cyxJbWFnZTpjfSxoLnN1cHBvcnQuY2FudmFzPWZ1bmN0aW9uKCl7cmV0dXJuISF1LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dH0oKSxoLnN1cHBvcnQuY2FudmFzJiZ3LlN1cmZhY2VGYWN0b3J5LmN1cnJlbnQucmVnaXN0ZXIoXCJjYW52YXNcIixULDIwKSxwKGguZHJhd2luZyx7ZXhwb3J0SW1hZ2U6dCxjYW52YXM6e0FyY05vZGU6cyxDaXJjbGVOb2RlOmEsR3JvdXBOb2RlOkEsSW1hZ2VOb2RlOmMsTXVsdGlQYXRoTm9kZTpvLE5vZGU6RCxQYXRoTm9kZTpyLFJvb3ROb2RlOmksU3VyZmFjZTpULFRleHROb2RlOmx9fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtpZih1Lm5hbWVzcGFjZXMmJiF1Lm5hbWVzcGFjZXMua3ZtbCl7dS5uYW1lc3BhY2VzLmFkZChcImt2bWxcIixcInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIpO3ZhciBlPXUuc3R5bGVTaGVldHMubGVuZ3RoPjMwP3Uuc3R5bGVTaGVldHNbMF06dS5jcmVhdGVTdHlsZVNoZWV0KCk7ZS5hZGRSdWxlKFwiLmt2bWxcIixcImJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpXCIpfX1mdW5jdGlvbiBuKGUpe3ZhciB0PXUuY3JlYXRlRWxlbWVudChcImt2bWw6XCIrZSk7cmV0dXJuIHQuY2xhc3NOYW1lPVwia3ZtbFwiLHR9ZnVuY3Rpb24gaShlKXt2YXIgdCxuPWUubGVuZ3RoLGk9W107Zm9yKHQ9MDtuPnQ7dCsrKWkucHVzaChlW3RdLnNjYWxlQ29weShQKS50b1N0cmluZygwLFwiLFwiKSk7cmV0dXJuIGkuam9pbihcIiBcIil9ZnVuY3Rpb24gcihlLHQpe3ZhciBuLHIsYSxzLGwsYz1lLnNlZ21lbnRzLGQ9Yy5sZW5ndGg7aWYoZD4wKXtmb3Iobj1bXSxsPTE7ZD5sO2wrKylhPW8oY1tsLTFdLGNbbF0pLGEhPT1zJiYocz1hLG4ucHVzaChhKSksbi5wdXNoKFwibFwiPT09YT9pKFtjW2xdLmFuY2hvcigpXSk6aShbY1tsLTFdLmNvbnRyb2xPdXQoKSxjW2xdLmNvbnRyb2xJbigpLGNbbF0uYW5jaG9yKCldKSk7cmV0dXJuIHI9XCJtIFwiK2koW2NbMF0uYW5jaG9yKCldKStcIiBcIituLmpvaW4oXCIgXCIpLGUub3B0aW9ucy5jbG9zZWQmJihyKz1cIiB4XCIpLHQhPT0hMCYmKHIrPVwiIGVcIikscn19ZnVuY3Rpb24gbyhlLHQpe3JldHVybiBlLmNvbnRyb2xPdXQoKSYmdC5jb250cm9sSW4oKT9cImNcIjpcImxcIn1mdW5jdGlvbiBhKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKFwiZmlsbFwiKXx8MD09PWUuaW5kZXhPZih6KX1mdW5jdGlvbiBzKGUsdCl7dmFyIG47cmV0dXJuIG49ZT9sKGUsdC5jb2xvcigpLHQub3BhY2l0eSgpKTpsKHQuY29sb3IoKSxcIiNmZmZcIiwxLXQub3BhY2l0eSgpKX1mdW5jdGlvbiBsKGUsdCxuKXt2YXIgaT1uZXcgayhlKSxyPW5ldyBrKHQpLG89YyhpLnIsci5yLG4pLGE9YyhpLmcsci5nLG4pLHM9YyhpLmIsci5iLG4pO3JldHVybiBuZXcgayhvLGEscykudG9IZXgoKX1mdW5jdGlvbiBjKGUsdCxuKXtyZXR1cm4gaC5yb3VuZChuKnQrKDEtbikqZSl9dmFyIGQsdT1kb2N1bWVudCxoPU1hdGgscD1oLmF0YW4yLGY9aC5zcXJ0LGc9d2luZG93LmtlbmRvLG09Zy5kZWVwRXh0ZW5kLHY9ZS5ub29wLF89Zy5kcmF3aW5nLHk9Xy5CYXNlTm9kZSx3PWcuZ2VvbWV0cnksYj13LnRvTWF0cml4LGs9Zy5Db2xvcix4PWcudXRpbCxDPXguaXNUcmFuc3BhcmVudCxTPXguZGVmaW5lZCxUPXguZGVnLEQ9eC5yb3VuZCxBPXgudmFsdWVPckRlZmF1bHQsRT1cIm5vbmVcIixNPVwiLmtlbmRvXCIsUD0xMDAsST1QKlAsej1cImdyYWRpZW50XCIsRj00LFI9Xy5TdXJmYWNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4pe18uU3VyZmFjZS5mbi5pbml0LmNhbGwodGhpcyxlLG4pLHQoKSx0aGlzLmVsZW1lbnQuZW1wdHkoKSx0aGlzLl9yb290PW5ldyBMLHRoaXMuX3Jvb3QuYXR0YWNoVG8odGhpcy5lbGVtZW50WzBdKSx0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiK00sdGhpcy5fY2xpY2spLHRoaXMuZWxlbWVudC5vbihcIm1vdXNlb3ZlclwiK00sdGhpcy5fbW91c2VlbnRlciksdGhpcy5lbGVtZW50Lm9uKFwibW91c2VvdXRcIitNLHRoaXMuX21vdXNlbGVhdmUpfSx0eXBlOlwidm1sXCIsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3Jvb3QmJih0aGlzLl9yb290LmRlc3Ryb3koKSx0aGlzLl9yb290PW51bGwsdGhpcy5lbGVtZW50Lm9mZihNKSksXy5TdXJmYWNlLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sZHJhdzpmdW5jdGlvbihlKXt0aGlzLl9yb290LmxvYWQoW2VdLHZvaWQgMCxudWxsKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9yb290LmNsZWFyKCl9fSksQj15LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt5LmZuLmluaXQuY2FsbCh0aGlzLGUpLHRoaXMuY3JlYXRlRWxlbWVudCgpLHRoaXMuYXR0YWNoUmVmZXJlbmNlKCl9LG9ic2VydmU6dixkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50Ll9rZW5kb05vZGU9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbCkseS5mbi5kZXN0cm95LmNhbGwodGhpcyl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGUsdDtmb3IodGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50LmlubmVySFRNTD1cIlwiKSxlPXRoaXMuY2hpbGROb2Rlcyx0PTA7ZS5sZW5ndGg+dDt0KyspZVt0XS5kZXN0cm95KCk7dGhpcy5jaGlsZE5vZGVzPVtdfSxyZW1vdmVTZWxmOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLmVsZW1lbnQ9bnVsbCkseS5mbi5yZW1vdmVTZWxmLmNhbGwodGhpcyl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9dS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpfSxhdHRhY2hSZWZlcmVuY2U6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuX2tlbmRvTm9kZT10aGlzfSxsb2FkOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzLGwsYztmb3IoaT1BKGksMSksdGhpcy5zcmNFbGVtZW50JiYoaSo9QSh0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5vcGFjaXR5LDEpKSxyPTA7ZS5sZW5ndGg+cjtyKyspbz1lW3JdLGE9by5jaGlsZHJlbixzPW8uY3VycmVudFRyYW5zZm9ybShuKSxsPWkqQShvLm9wdGlvbnMub3BhY2l0eSwxKSxjPW5ldyBvdFtvLm5vZGVUeXBlXShvLHMsbCksYSYmYS5sZW5ndGg+MCYmYy5sb2FkKGEsdCxzLGkpLFModCk/dGhpcy5pbnNlcnRBdChjLHQpOnRoaXMuYXBwZW5kKGMpLGMuYXR0YWNoVG8odGhpcy5lbGVtZW50LHQpfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe1ModCk/ZS5pbnNlcnRCZWZvcmUodGhpcy5lbGVtZW50LGUuY2hpbGRyZW5bdF18fG51bGwpOmUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcInZpc2libGVcIj09ZS5maWVsZCYmdGhpcy5jc3MoXCJkaXNwbGF5XCIsZS52YWx1ZSE9PSExP1wiXCI6RSl9LHNldFN0eWxlOmZ1bmN0aW9uKCl7dGhpcy5hbGxDc3ModGhpcy5tYXBTdHlsZSgpKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5zcmNFbGVtZW50JiZ0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy52aXNpYmxlPT09ITEmJmUucHVzaChbXCJkaXNwbGF5XCIsRV0pLGV9LG1hcE9wYWNpdHlUbzpmdW5jdGlvbihlLHQpe3ZhciBuPUEodGhpcy5vcGFjaXR5LDEpO24qPUEodCwxKSxlLnB1c2goW1wib3BhY2l0eVwiLG5dKX0sYXR0cjpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudCYmKHRoaXMuZWxlbWVudFtlXT10KX0sYWxsQXR0cjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKyl0aGlzLmF0dHIoZVt0XVswXSxlW3RdWzFdKX0sY3NzOmZ1bmN0aW9uKGUsdCl7dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50LnN0eWxlW2VdPXQpfSxhbGxDc3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7ZS5sZW5ndGg+dDt0KyspdGhpcy5jc3MoZVt0XVswXSxlW3RdWzFdKX19KSxMPUIuZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7Qi5mbi5jcmVhdGVFbGVtZW50LmNhbGwodGhpcyksdGhpcy5hbGxDc3MoW1tcIndpZHRoXCIsXCIxMDAlXCJdLFtcImhlaWdodFwiLFwiMTAwJVwiXSxbXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIl0sW1widmlzaWJpbGl0eVwiLFwidmlzaWJsZVwiXV0pfSxhdHRhY2hSZWZlcmVuY2U6dn0pLE89Zy5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnNyY0VsZW1lbnQ9ZSx0aGlzLm9ic2VydmVyPXQsZS5hZGRPYnNlcnZlcih0aGlzKX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLm9wdGlvbnNDaGFuZ2Uoe2ZpZWxkOlwiY2xpcFwiLHZhbHVlOnRoaXMuc3JjRWxlbWVudH0pfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuc3JjRWxlbWVudC5yZW1vdmVPYnNlcnZlcih0aGlzKX19KSxIPUIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe0IuZm4uaW5pdC5jYWxsKHRoaXMsZSksZSYmdGhpcy5pbml0Q2xpcCgpfSxvYnNlcnZlOmZ1bmN0aW9uKCl7eS5mbi5vYnNlcnZlLmNhbGwodGhpcyl9LG1hcFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGU9Qi5mbi5tYXBTdHlsZS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLnNyY0VsZW1lbnQmJnRoaXMuc3JjRWxlbWVudC5jbGlwKCkmJmUucHVzaChbXCJjbGlwXCIsdGhpcy5jbGlwUmVjdCgpXSksZX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXtcImNsaXBcIj09ZS5maWVsZCYmKHRoaXMuY2xlYXJDbGlwKCksdGhpcy5pbml0Q2xpcCgpLHRoaXMuc2V0Q2xpcCgpKSxCLmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuY2xlYXJDbGlwKCksQi5mbi5jbGVhci5jYWxsKHRoaXMpfSxpbml0Q2xpcDpmdW5jdGlvbigpe3RoaXMuc3JjRWxlbWVudC5jbGlwKCkmJih0aGlzLmNsaXA9bmV3IE8odGhpcy5zcmNFbGVtZW50LmNsaXAoKSx0aGlzKSx0aGlzLmNsaXAub2JzZXJ2ZXI9dGhpcyl9LGNsZWFyQ2xpcDpmdW5jdGlvbigpe3RoaXMuY2xpcCYmKHRoaXMuY2xpcC5jbGVhcigpLHRoaXMuY2xpcD1udWxsLHRoaXMuY3NzKFwiY2xpcFwiLHRoaXMuY2xpcFJlY3QoKSkpfSxzZXRDbGlwOmZ1bmN0aW9uKCl7dGhpcy5jbGlwJiZ0aGlzLmNzcyhcImNsaXBcIix0aGlzLmNsaXBSZWN0KCkpfSxjbGlwUmVjdDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPWQscj10aGlzLnNyY0VsZW1lbnQuY2xpcCgpO3JldHVybiByJiYoZT10aGlzLmNsaXBCQm94KHIpLHQ9ZS50b3BMZWZ0KCksbj1lLmJvdHRvbVJpZ2h0KCksaT1nLmZvcm1hdChcInJlY3QoezB9cHggezF9cHggezJ9cHggezN9cHgpXCIsdC55LG4ueCxuLnksdC54KSksaX0sY2xpcEJCb3g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LnJhd0JCb3goKS50b3BMZWZ0KCksbj1lLnJhd0JCb3goKTtyZXR1cm4gbi5vcmlnaW4udHJhbnNsYXRlKC10LngsLXQueSksbn19KSxOPUguZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7Qi5mbi5jcmVhdGVFbGVtZW50LmNhbGwodGhpcyksdGhpcy5zZXRTdHlsZSgpfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3RoaXMuY3NzKFwiZGlzcGxheVwiLEUpLEIuZm4uYXR0YWNoVG8uY2FsbCh0aGlzLGUsdCksdGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMudmlzaWJsZSE9PSExJiZ0aGlzLmNzcyhcImRpc3BsYXlcIixcIlwiKX0sX2F0dGFjaFRvOmZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt0LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCksZS5hcHBlbmRDaGlsZCh0KX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT1ILmZuLm1hcFN0eWxlLmNhbGwodGhpcyk7cmV0dXJuIGUucHVzaChbXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIl0pLGUucHVzaChbXCJ3aGl0ZS1zcGFjZVwiLFwibm93cmFwXCJdKSxlfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1widHJhbnNmb3JtXCI9PT1lLmZpZWxkJiZ0aGlzLnJlZnJlc2hUcmFuc2Zvcm0oKSxcIm9wYWNpdHlcIj09PWUuZmllbGQmJnRoaXMucmVmcmVzaE9wYWNpdHkoKSxILmZuLm9wdGlvbnNDaGFuZ2UuY2FsbCh0aGlzLGUpfSxyZWZyZXNoVHJhbnNmb3JtOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oZSksaT10aGlzLmNoaWxkTm9kZXMscj1pLmxlbmd0aDtmb3IodGhpcy5zZXRDbGlwKCksdD0wO3I+dDt0KyspaVt0XS5yZWZyZXNoVHJhbnNmb3JtKG4pfSxjdXJyZW50T3BhY2l0eTpmdW5jdGlvbigpe3ZhciBlPUEodGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSwxKTtyZXR1cm4gdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmN1cnJlbnRPcGFjaXR5JiYoZSo9dGhpcy5wYXJlbnQuY3VycmVudE9wYWNpdHkoKSksZX0scmVmcmVzaE9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuY2hpbGROb2RlcyxuPXQubGVuZ3RoLGk9dGhpcy5jdXJyZW50T3BhY2l0eSgpO2ZvcihlPTA7bj5lO2UrKyl0W2VdLnJlZnJlc2hPcGFjaXR5KGkpfSxpbml0Q2xpcDpmdW5jdGlvbigpe2lmKEguZm4uaW5pdENsaXAuY2FsbCh0aGlzKSx0aGlzLmNsaXApe3ZhciBlPXRoaXMuY2xpcC5zcmNFbGVtZW50LmJib3godGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oKSk7ZSYmKHRoaXMuY3NzKFwid2lkdGhcIixlLndpZHRoKCkrZS5vcmlnaW4ueCksdGhpcy5jc3MoXCJoZWlnaHRcIixlLmhlaWdodCgpK2Uub3JpZ2luLnkpKX19LGNsaXBCQm94OmZ1bmN0aW9uKGUpe3JldHVybiBlLmJib3godGhpcy5zcmNFbGVtZW50LmN1cnJlbnRUcmFuc2Zvcm0oKSl9LGNsZWFyQ2xpcDpmdW5jdGlvbigpe0guZm4uY2xlYXJDbGlwLmNhbGwodGhpcyl9fSksVj1CLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMub3BhY2l0eT10LEIuZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcInN0cm9rZVwiKSx0aGlzLnNldE9wYWNpdHkoKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXswPT09ZS5maWVsZC5pbmRleE9mKFwic3Ryb2tlXCIpJiZ0aGlzLnNldFN0cm9rZSgpfSxyZWZyZXNoT3BhY2l0eTpmdW5jdGlvbihlKXt0aGlzLm9wYWNpdHk9ZSx0aGlzLnNldFN0cm9rZSgpfSxzZXRTdHJva2U6ZnVuY3Rpb24oKXt0aGlzLmFsbEF0dHIodGhpcy5tYXBTdHJva2UoKSl9LHNldE9wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldFN0cm9rZSgpfSxtYXBTdHJva2U6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuc3JjRWxlbWVudC5vcHRpb25zLnN0cm9rZSxuPVtdO3JldHVybiB0JiYhQyh0LmNvbG9yKSYmMCE9PXQud2lkdGg/KG4ucHVzaChbXCJvblwiLFwidHJ1ZVwiXSksbi5wdXNoKFtcImNvbG9yXCIsdC5jb2xvcl0pLG4ucHVzaChbXCJ3ZWlnaHRcIiwodC53aWR0aHx8MSkrXCJweFwiXSksdGhpcy5tYXBPcGFjaXR5VG8obix0Lm9wYWNpdHkpLFModC5kYXNoVHlwZSkmJm4ucHVzaChbXCJkYXNoc3R5bGVcIix0LmRhc2hUeXBlXSksUyh0LmxpbmVKb2luKSYmbi5wdXNoKFtcImpvaW5zdHlsZVwiLHQubGluZUpvaW5dKSxTKHQubGluZUNhcCkmJihlPXQubGluZUNhcC50b0xvd2VyQ2FzZSgpLFwiYnV0dFwiPT09ZSYmKGU9XCJidXR0XCI9PT1lP1wiZmxhdFwiOmUpLG4ucHVzaChbXCJlbmRjYXBcIixlXSkpKTpuLnB1c2goW1wib25cIixcImZhbHNlXCJdKSxufX0pLFU9Qi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMub3BhY2l0eT1uLEIuZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcImZpbGxcIiksdGhpcy5zZXRGaWxsKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7YShlLmZpZWxkKSYmdGhpcy5zZXRGaWxsKCl9LHJlZnJlc2hPcGFjaXR5OmZ1bmN0aW9uKGUpe3RoaXMub3BhY2l0eT1lLHRoaXMuc2V0T3BhY2l0eSgpfSxzZXRGaWxsOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKHRoaXMubWFwRmlsbCgpKX0sc2V0T3BhY2l0eTpmdW5jdGlvbigpe3RoaXMuc2V0RmlsbCgpfSxhdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLmVsZW1lbnQ7aWYoaSl7Zm9yKG49ZS5zcGxpdChcIi5cIik7bi5sZW5ndGg+MTspaT1pW24uc2hpZnQoKV07aVtuWzBdXT10fX0sbWFwRmlsbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5maWxsKCksdD1bW1wib25cIixcImZhbHNlXCJdXTtyZXR1cm4gZSYmKGUubm9kZVR5cGU9PXo/dD10aGlzLm1hcEdyYWRpZW50KGUpOkMoZS5jb2xvcil8fCh0PXRoaXMubWFwRmlsbENvbG9yKGUpKSksdH0sbWFwRmlsbENvbG9yOmZ1bmN0aW9uKGUpe3ZhciB0PVtbXCJvblwiLFwidHJ1ZVwiXSxbXCJjb2xvclwiLGUuY29sb3JdXTtyZXR1cm4gdGhpcy5tYXBPcGFjaXR5VG8odCxlLm9wYWNpdHkpLHR9LG1hcEdyYWRpZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMsaT1uLmZhbGxiYWNrRmlsbHx8ZS5mYWxsYmFja0ZpbGwmJmUuZmFsbGJhY2tGaWxsKCk7cmV0dXJuIHQ9ZSBpbnN0YW5jZW9mIF8uTGluZWFyR3JhZGllbnQ/dGhpcy5tYXBMaW5lYXJHcmFkaWVudChlKTplIGluc3RhbmNlb2YgXy5SYWRpYWxHcmFkaWVudCYmZS5zdXBwb3J0Vk1MP3RoaXMubWFwUmFkaWFsR3JhZGllbnQoZSk6aT90aGlzLm1hcEZpbGxDb2xvcihpKTpbW1wib25cIixcImZhbHNlXCJdXX0sbWFwTGluZWFyR3JhZGllbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydCgpLG49ZS5lbmQoKSxpPXguZGVnKHAobi55LXQueSxuLngtdC54KSkscj1bW1wib25cIixcInRydWVcIl0sW1widHlwZVwiLHpdLFtcImZvY3VzXCIsMF0sW1wibWV0aG9kXCIsXCJub25lXCJdLFtcImFuZ2xlXCIsMjcwLWldXTtyZXR1cm4gdGhpcy5hZGRDb2xvcnMocikscn0sbWFwUmFkaWFsR3JhZGllbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zcmNFbGVtZW50LnJhd0JCb3goKSxuPWUuY2VudGVyKCksaT0obi54LXQub3JpZ2luLngpL3Qud2lkdGgoKSxyPShuLnktdC5vcmlnaW4ueSkvdC5oZWlnaHQoKSxvPVtbXCJvblwiLFwidHJ1ZVwiXSxbXCJ0eXBlXCIsXCJncmFkaWVudHRpdGxlXCJdLFtcImZvY3VzXCIsXCIxMDAlXCJdLFtcImZvY3VzcG9zaXRpb25cIixpK1wiIFwiK3JdLFtcIm1ldGhvZFwiLFwibm9uZVwiXV07cmV0dXJuIHRoaXMuYWRkQ29sb3JzKG8pLG99LGFkZENvbG9yczpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMscj1bXSxvPWkuZmlsbC5zdG9wcyxhPWkuYmFzZUNvbG9yLGw9dGhpcy5lbGVtZW50LmNvbG9ycz9cImNvbG9ycy52YWx1ZVwiOlwiY29sb3JzXCIsYz1zKGEsb1swXSksZD1zKGEsb1tvLmxlbmd0aC0xXSk7Zm9yKG49MDtvLmxlbmd0aD5uO24rKyl0PW9bbl0sci5wdXNoKGgucm91bmQoMTAwKnQub2Zmc2V0KCkpK1wiJSBcIitzKGEsdCkpO2UucHVzaChbbCxyLmpvaW4oXCIsXCIpXSxbXCJjb2xvclwiLGNdLFtcImNvbG9yMlwiLGRdKX19KSxXPUIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy50cmFuc2Zvcm09dCxCLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJza2V3XCIpLHRoaXMuc2V0VHJhbnNmb3JtKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJ0cmFuc2Zvcm1cIj09PWUuZmllbGQmJnRoaXMucmVmcmVzaCh0aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybSgpKX0scmVmcmVzaDpmdW5jdGlvbihlKXt0aGlzLnRyYW5zZm9ybT1lLHRoaXMuc2V0VHJhbnNmb3JtKCl9LHRyYW5zZm9ybU9yaWdpbjpmdW5jdGlvbigpe3JldHVyblwiLTAuNSwtMC41XCJ9LHNldFRyYW5zZm9ybTpmdW5jdGlvbigpe3RoaXMuYWxsQXR0cih0aGlzLm1hcFRyYW5zZm9ybSgpKX0sbWFwVHJhbnNmb3JtOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50cmFuc2Zvcm0sdD1bXSxuPWIoZSk7cmV0dXJuIG4/KG4ucm91bmQoRiksdC5wdXNoKFtcIm9uXCIsXCJ0cnVlXCJdLFtcIm1hdHJpeFwiLFtuLmEsbi5jLG4uYixuLmQsMCwwXS5qb2luKFwiLFwiKV0sW1wib2Zmc2V0XCIsbi5lK1wicHgsXCIrbi5mK1wicHhcIl0sW1wib3JpZ2luXCIsdGhpcy50cmFuc2Zvcm1PcmlnaW4oKV0pKTp0LnB1c2goW1wib25cIixcImZhbHNlXCJdKSx0fX0pLGo9SC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuZmlsbD10aGlzLmNyZWF0ZUZpbGxOb2RlKGUsdCxuKSx0aGlzLnN0cm9rZT1uZXcgVihlLG4pLHRoaXMudHJhbnNmb3JtPXRoaXMuY3JlYXRlVHJhbnNmb3JtTm9kZShlLHQpLEguZm4uaW5pdC5jYWxsKHRoaXMsZSl9LGF0dGFjaFRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5maWxsLmF0dGFjaFRvKHRoaXMuZWxlbWVudCksdGhpcy5zdHJva2UuYXR0YWNoVG8odGhpcy5lbGVtZW50KSx0aGlzLnRyYW5zZm9ybS5hdHRhY2hUbyh0aGlzLmVsZW1lbnQpLEIuZm4uYXR0YWNoVG8uY2FsbCh0aGlzLGUsdCl9LGNyZWF0ZUZpbGxOb2RlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IFUoZSx0LG4pfSxjcmVhdGVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBXKGUsdCl9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcInNoYXBlXCIpLHRoaXMuc2V0Q29vcmRzaXplKCksdGhpcy5zZXRTdHlsZSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe2EoZS5maWVsZCk/dGhpcy5maWxsLm9wdGlvbnNDaGFuZ2UoZSk6MD09PWUuZmllbGQuaW5kZXhPZihcInN0cm9rZVwiKT90aGlzLnN0cm9rZS5vcHRpb25zQ2hhbmdlKGUpOlwidHJhbnNmb3JtXCI9PT1lLmZpZWxkP3RoaXMudHJhbnNmb3JtLm9wdGlvbnNDaGFuZ2UoZSk6XCJvcGFjaXR5XCI9PT1lLmZpZWxkJiYodGhpcy5maWxsLnNldE9wYWNpdHkoKSx0aGlzLnN0cm9rZS5zZXRPcGFjaXR5KCkpLEguZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LHJlZnJlc2hUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7dGhpcy50cmFuc2Zvcm0ucmVmcmVzaCh0aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybShlKSl9LHJlZnJlc2hPcGFjaXR5OmZ1bmN0aW9uKGUpe2UqPUEodGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMub3BhY2l0eSwxKSx0aGlzLmZpbGwucmVmcmVzaE9wYWNpdHkoZSksdGhpcy5zdHJva2UucmVmcmVzaE9wYWNpdHkoZSl9LG1hcFN0eWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1ILmZuLm1hcFN0eWxlLmNhbGwodGhpcyk7cmV0dXJuIGUmJnR8fChlPXQ9UCksaS5wdXNoKFtcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiXSxbXCJ3aWR0aFwiLGUrXCJweFwiXSxbXCJoZWlnaHRcIix0K1wicHhcIl0pLG49dGhpcy5zcmNFbGVtZW50Lm9wdGlvbnMuY3Vyc29yLG4mJmkucHVzaChbXCJjdXJzb3JcIixuXSksaX0sc2V0Q29vcmRzaXplOmZ1bmN0aW9uKCl7dGhpcy5hbGxBdHRyKFtbXCJjb29yZG9yaWdpblwiLFwiMCAwXCJdLFtcImNvb3Jkc2l6ZVwiLEkrXCIgXCIrSV1dKX19KSxHPUIuZXh0ZW5kKHtjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW4oXCJwYXRoXCIpLHRoaXMuc2V0UGF0aERhdGEoKX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnNldFBhdGhEYXRhKCl9LHNldFBhdGhEYXRhOmZ1bmN0aW9uKCl7dGhpcy5hdHRyKFwidlwiLHRoaXMucmVuZGVyRGF0YSgpKX0scmVuZGVyRGF0YTpmdW5jdGlvbigpe3JldHVybiByKHRoaXMuc3JjRWxlbWVudCl9fSkscT1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7dGhpcy5wYXRoRGF0YT10aGlzLmNyZWF0ZURhdGFOb2RlKGUpLGouZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pfSxhdHRhY2hUbzpmdW5jdGlvbihlLHQpe3RoaXMucGF0aERhdGEuYXR0YWNoVG8odGhpcy5lbGVtZW50KSxqLmZuLmF0dGFjaFRvLmNhbGwodGhpcyxlLHQpfSxjcmVhdGVEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEcoZSl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5wYXRoRGF0YS5nZW9tZXRyeUNoYW5nZSgpLGouZm4uZ2VvbWV0cnlDaGFuZ2UuY2FsbCh0aGlzKX19KSwkPUcuZXh0ZW5kKHtyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5zcmNFbGVtZW50LnBhdGhzO2lmKGkubGVuZ3RoPjApe2ZvcihlPVtdLHQ9MDtpLmxlbmd0aD50O3QrKyluPWkubGVuZ3RoLTE+dCxlLnB1c2gocihpW3RdLG4pKTtyZXR1cm4gZS5qb2luKFwiIFwiKX19fSksWT1xLmV4dGVuZCh7Y3JlYXRlRGF0YU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyAkKGUpfX0pLEs9Vy5leHRlbmQoe3RyYW5zZm9ybU9yaWdpbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5nZW9tZXRyeSgpLmJib3goKSx0PWUuY2VudGVyKCksbj0tdC54L2Uud2lkdGgoKSxpPS10LnkvZS5oZWlnaHQoKTtyZXR1cm4gbitcIixcIitpfX0pLFE9ai5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcIm92YWxcIiksdGhpcy5zZXRTdHlsZSgpfSxjcmVhdGVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBLKGUsdCl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7ai5mbi5nZW9tZXRyeUNoYW5nZS5jYWxsKHRoaXMpLHRoaXMuc2V0U3R5bGUoKSx0aGlzLnJlZnJlc2hUcmFuc2Zvcm0oKX0sbWFwU3R5bGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQuZ2VvbWV0cnkoKSx0PWUucmFkaXVzLG49ZS5jZW50ZXIsaT0yKnQscj1qLmZuLm1hcFN0eWxlLmNhbGwodGhpcyxpLGkpO3JldHVybiByLnB1c2goW1wibGVmdFwiLG4ueC10K1wicHhcIl0sW1widG9wXCIsbi55LXQrXCJweFwiXSkscn19KSxYPUcuZXh0ZW5kKHtyZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcy5zcmNFbGVtZW50LnRvUGF0aCgpKX19KSxKPXEuZXh0ZW5kKHtjcmVhdGVEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFgoZSl9fSksWj1HLmV4dGVuZCh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe0cuZm4uY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMpLHRoaXMuYXR0cihcInRleHRwYXRob2tcIiwhMCl9LHJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNyY0VsZW1lbnQucmVjdCgpLHQ9ZS5jZW50ZXIoKTtyZXR1cm5cIm0gXCIraShbbmV3IHcuUG9pbnQoZS50b3BMZWZ0KCkueCx0LnkpXSkrXCIgbCBcIitpKFtuZXcgdy5Qb2ludChlLmJvdHRvbVJpZ2h0KCkueCx0LnkpXSl9fSksZXQ9Qi5leHRlbmQoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bihcInRleHRwYXRoXCIpLHRoaXMuYXR0cihcIm9uXCIsITApLHRoaXMuYXR0cihcImZpdHBhdGhcIiwhMSksdGhpcy5zZXRTdHlsZSgpLHRoaXMuc2V0U3RyaW5nKCl9LG9wdGlvbnNDaGFuZ2U6ZnVuY3Rpb24oZSl7XCJjb250ZW50XCI9PT1lLmZpZWxkP3RoaXMuc2V0U3RyaW5nKCk6dGhpcy5zZXRTdHlsZSgpLEIuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LG1hcFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuW1tcImZvbnRcIix0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5mb250XV19LHNldFN0cmluZzpmdW5jdGlvbigpe3RoaXMuYXR0cihcInN0cmluZ1wiLHRoaXMuc3JjRWxlbWVudC5jb250ZW50KCkpfX0pLHR0PXEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLnBhdGg9bmV3IGV0KGUpLHEuZm4uaW5pdC5jYWxsKHRoaXMsZSx0LG4pfSxjcmVhdGVEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFooZSl9LGF0dGFjaFRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5wYXRoLmF0dGFjaFRvKHRoaXMuZWxlbWVudCkscS5mbi5hdHRhY2hUby5jYWxsKHRoaXMsZSx0KX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXsoXCJmb250XCI9PT1lLmZpZWxkfHxcImNvbnRlbnRcIj09PWUuZmllbGQpJiYodGhpcy5wYXRoLm9wdGlvbnNDaGFuZ2UoZSksdGhpcy5wYXRoRGF0YS5nZW9tZXRyeUNoYW5nZShlKSkscS5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX19KSxudD1HLmV4dGVuZCh7cmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3JjRWxlbWVudC5yZWN0KCksdD0obmV3IF8uUGF0aCkubW92ZVRvKGUudG9wTGVmdCgpKS5saW5lVG8oZS50b3BSaWdodCgpKS5saW5lVG8oZS5ib3R0b21SaWdodCgpKS5saW5lVG8oZS5ib3R0b21MZWZ0KCkpLmNsb3NlKCk7cmV0dXJuIHIodCl9fSksaXQ9Vy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMub3BhY2l0eT1uLFcuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudD1uKFwiZmlsbFwiKSx0aGlzLmF0dHIoXCJ0eXBlXCIsXCJmcmFtZVwiKSx0aGlzLmF0dHIoXCJyb3RhdGVcIiwhMCksdGhpcy5zZXRPcGFjaXR5KCksdGhpcy5zZXRTcmMoKSx0aGlzLnNldFRyYW5zZm9ybSgpfSxvcHRpb25zQ2hhbmdlOmZ1bmN0aW9uKGUpe1wic3JjXCI9PT1lLmZpZWxkJiZ0aGlzLnNldFNyYygpLFcuZm4ub3B0aW9uc0NoYW5nZS5jYWxsKHRoaXMsZSl9LGdlb21ldHJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9LHJlZnJlc2hPcGFjaXR5OmZ1bmN0aW9uKGUpe3RoaXMub3BhY2l0eT1lLHRoaXMuc2V0T3BhY2l0eSgpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKCl7dmFyIGU9W107dGhpcy5tYXBPcGFjaXR5VG8oZSx0aGlzLnNyY0VsZW1lbnQub3B0aW9ucy5vcGFjaXR5KSx0aGlzLmFsbEF0dHIoZSl9LHNldFNyYzpmdW5jdGlvbigpe3RoaXMuYXR0cihcInNyY1wiLHRoaXMuc3JjRWxlbWVudC5zcmMoKSl9LG1hcFRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHMsbD10aGlzLnNyY0VsZW1lbnQsYz1sLnJhd0JCb3goKSxkPWMuY2VudGVyKCksdT1QLzIsaD1QLGc9Yy53aWR0aCgpL2gsbT1jLmhlaWdodCgpL2gsdj0wLF89dGhpcy50cmFuc2Zvcm07cmV0dXJuIF8/KG49YihfKSxpPWYobi5hKm4uYStuLmIqbi5iKSxyPWYobi5jKm4uYytuLmQqbi5kKSxnKj1pLG0qPXIsbz1UKHAobi5iLG4uZCkpLGE9VChwKC1uLmMsbi5hKSksdj0obythKS8yLDAhPT12PyhzPWwuYmJveCgpLmNlbnRlcigpLGU9KHMueC11KS9oLHQ9KHMueS11KS9oKTooZT0oZC54Kmkrbi5lLXUpL2gsdD0oZC55KnIrbi5mLXUpL2gpKTooZT0oZC54LXUpL2gsdD0oZC55LXUpL2gpLGc9RChnLEYpLG09RChtLEYpLGU9RChlLEYpLHQ9RCh0LEYpLHY9RCh2LEYpLFtbXCJzaXplXCIsZytcIixcIittXSxbXCJwb3NpdGlvblwiLGUrXCIsXCIrdF0sW1wiYW5nbGVcIix2XV19fSkscnQ9cS5leHRlbmQoe2NyZWF0ZUZpbGxOb2RlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IGl0KGUsdCxuKX0sY3JlYXRlRGF0YU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBudChlKX0sb3B0aW9uc0NoYW5nZTpmdW5jdGlvbihlKXsoXCJzcmNcIj09PWUuZmllbGR8fFwidHJhbnNmb3JtXCI9PT1lLmZpZWxkKSYmdGhpcy5maWxsLm9wdGlvbnNDaGFuZ2UoZSkscS5mbi5vcHRpb25zQ2hhbmdlLmNhbGwodGhpcyxlKX0sZ2VvbWV0cnlDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmZpbGwuZ2VvbWV0cnlDaGFuZ2UoKSxxLmZuLmdlb21ldHJ5Q2hhbmdlLmNhbGwodGhpcyl9LHJlZnJlc2hUcmFuc2Zvcm06ZnVuY3Rpb24oZSl7cS5mbi5yZWZyZXNoVHJhbnNmb3JtLmNhbGwodGhpcyxlKSx0aGlzLmZpbGwucmVmcmVzaCh0aGlzLnNyY0VsZW1lbnQuY3VycmVudFRyYW5zZm9ybShlKSl9fSksb3Q9e0dyb3VwOk4sVGV4dDp0dCxQYXRoOnEsTXVsdGlQYXRoOlksQ2lyY2xlOlEsQXJjOkosSW1hZ2U6cnR9O2cuc3VwcG9ydC52bWw9ZnVuY3Rpb24oKXt2YXIgZT1nLnN1cHBvcnQuYnJvd3NlcjtyZXR1cm4gZS5tc2llJiY5PmUudmVyc2lvbn0oKSxkPVwiaW5oZXJpdFwiLGcuc3VwcG9ydC5icm93c2VyLm1zaWUmJjg+Zy5zdXBwb3J0LmJyb3dzZXIudmVyc2lvbiYmKGQ9XCJyZWN0KGF1dG8gYXV0byBhdXRvIGF1dG8pXCIpLGcuc3VwcG9ydC52bWwmJl8uU3VyZmFjZUZhY3RvcnkuY3VycmVudC5yZWdpc3RlcihcInZtbFwiLFIsMzApLG0oXyx7dm1sOntBcmNEYXRhTm9kZTpYLEFyY05vZGU6SixDaXJjbGVUcmFuc2Zvcm1Ob2RlOkssQ2lyY2xlTm9kZTpRLEZpbGxOb2RlOlUsR3JvdXBOb2RlOk4sSW1hZ2VOb2RlOnJ0LEltYWdlRmlsbE5vZGU6aXQsSW1hZ2VQYXRoRGF0YU5vZGU6bnQsTXVsdGlQYXRoRGF0YU5vZGU6JCxNdWx0aVBhdGhOb2RlOlksTm9kZTpCLFBhdGhEYXRhTm9kZTpHLFBhdGhOb2RlOnEsUm9vdE5vZGU6TCxTdHJva2VOb2RlOlYsU3VyZmFjZTpSLFRleHROb2RlOnR0LFRleHRQYXRoTm9kZTpldCxUZXh0UGF0aERhdGFOb2RlOlosVHJhbnNmb3JtTm9kZTpXfX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSgpe2Z1bmN0aW9uIGUoKXt2YXIgdCxyLG87Zm9yKHQ9MDthcmd1bWVudHMubGVuZ3RoPnQ7Kyt0KXtpZihyPWFyZ3VtZW50c1t0XSxyPT09bil0aHJvdyBFcnJvcihcIkNhbm5vdCBvdXRwdXQgdW5kZWZpbmVkIHRvIFBERlwiKTtpZihyIGluc3RhbmNlb2YgdylyLmJlZm9yZVJlbmRlcihlKSxyLnJlbmRlcihlKTtlbHNlIGlmKEYocikpZihyLGUpO2Vsc2UgaWYocChyKSlnKHIsZSk7ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2Ygcil7aWYoaXNOYU4ocikpdGhyb3cgRXJyb3IoXCJDYW5ub3Qgb3V0cHV0IE5hTiB0byBQREZcIik7bz1yLnRvRml4ZWQoNyksby5pbmRleE9mKFwiLlwiKT49MCYmKG89by5yZXBsYWNlKC9cXC4/MCskLyxcIlwiKSksXCItMFwiPT1vJiYobz1cIjBcIiksaS53cml0ZVN0cmluZyhvKX1lbHNlL3N0cmluZ3xib29sZWFuLy50ZXN0KHR5cGVvZiByKT9pLndyaXRlU3RyaW5nKHIrXCJcIik6XCJmdW5jdGlvblwiPT10eXBlb2Ygci5nZXQ/aS53cml0ZShyLmdldCgpKTpcIm9iamVjdFwiPT10eXBlb2YgciYmKHI/ZShuZXcgSChyKSk6aS53cml0ZVN0cmluZyhcIm51bGxcIikpfX12YXIgdD0wLGk9RCgpO3JldHVybiBlLndyaXRlRGF0YT1mdW5jdGlvbihlKXtpLndyaXRlKGUpfSxlLndpdGhJbmRlbnQ9ZnVuY3Rpb24obil7Kyt0LG4oZSksLS10fSxlLmluZGVudD1mdW5jdGlvbigpe2UoUSxkKFwiXCIsMip0LFwiICBcIikpLGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxlLm9mZnNldD1mdW5jdGlvbigpe3JldHVybiBpLm9mZnNldCgpfSxlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJGSVggQ0FMTEVSXCIpfSxlLmdldD1mdW5jdGlvbigpe3JldHVybiBpLmdldCgpfSxlLnN0cmVhbT1mdW5jdGlvbigpe3JldHVybiBpfSxlfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbj1lLmJlZm9yZVJlbmRlcixpPWUucmVuZGVyO2UuYmVmb3JlUmVuZGVyPWZ1bmN0aW9uKCl7fSxlLnJlbmRlcj1mdW5jdGlvbihlKXtlKHQsXCIgMCBSXCIpfSxlLnJlbmRlckZ1bGw9ZnVuY3Rpb24ocil7ZS5fb2Zmc2V0PXIub2Zmc2V0KCkscih0LFwiIDAgb2JqIFwiKSxuLmNhbGwoZSxyKSxpLmNhbGwoZSxyKSxyKFwiIGVuZG9ialwiKX19ZnVuY3Rpb24gbyhlKXtmdW5jdGlvbiB0KHQsbil7cmV0dXJuIGUmJm51bGwhPWVbdF0/ZVt0XTpufXZhciBuLG8sYSxzLGwsYyxkPXRoaXMsaD1pKCkscD0wLGY9W107aWYoZC5nZXRPcHRpb249dCxkLmF0dGFjaD1mdW5jdGlvbihlKXtyZXR1cm4gZi5pbmRleE9mKGUpPDAmJihyKGUsKytwKSxmLnB1c2goZSkpLGV9LGQuRk9OVFM9e30sZC5JTUFHRVM9e30sbj10KFwicGFwZXJTaXplXCIsWi5hNCksXCJzdHJpbmdcIj09dHlwZW9mIG4mJihuPVpbbi50b0xvd2VyQ2FzZSgpXSxudWxsPT1uKSl0aHJvdyBFcnJvcihcIlVua25vd24gcGFwZXIgc2l6ZVwiKTtuWzBdPXkoblswXSksblsxXT15KG5bMV0pLHQoXCJsYW5kc2NhcGVcIiwhMSkmJihuPVtNYXRoLm1heChuWzBdLG5bMV0pLE1hdGgubWluKG5bMF0sblsxXSldKSxvPXQoXCJtYXJnaW5cIiksbyYmKG8ubGVmdD15KG8ubGVmdCwwKSxvLnRvcD15KG8udG9wLDApLG8ucmlnaHQ9eShvLnJpZ2h0LDApLG8uYm90dG9tPXkoby5ib3R0b20sMCksdChcImFkZE1hcmdpblwiKSYmKG5bMF0rPW8ubGVmdCtvLnJpZ2h0LG5bMV0rPW8udG9wK28uYm90dG9tKSksYT1uWzBdLHM9blsxXSxvJiYoYS09by5sZWZ0K28ucmlnaHQscy09by50b3Arby5ib3R0b20pLGw9ZC5hdHRhY2gobmV3IFYpLGM9ZC5hdHRhY2gobmV3IFUoWzAsMCxuWzBdLG5bMV1dKSksbC5zZXRQYWdlcyhjKSxkLmFkZFBhZ2U9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgTihpKCksbnVsbCwhMCksdD1uZXcgcShkLHtDb250ZW50czpkLmF0dGFjaChlKSxQYXJlbnQ6Y30pO3JldHVybiB0Ll9jb250ZW50PWUsYy5hZGRQYWdlKGQuYXR0YWNoKHQpKSx0LnRyYW5zZm9ybSgxLDAsMCwtMSwwLG5bMV0pLG8mJih0LnRyYW5zbGF0ZShvLmxlZnQsby50b3ApLHQucmVjdCgwLDAsYSxzKSx0LmNsaXAoKSksdH0sZC5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZSxuO2ZvcihoKFwiJVBERi0xLjRcIixRLFwiJcOCw4HDmsOPw45cIixRLFEpLGU9MDtmLmxlbmd0aD5lOysrZSlmW2VdLnJlbmRlckZ1bGwoaCksaChRLFEpO2ZvcihuPWgub2Zmc2V0KCksaChcInhyZWZcIixRLDAsXCIgXCIsZi5sZW5ndGgrMSxRKSxoKFwiMDAwMDAwMDAwMCA2NTUzNSBmIFwiLFEpLGU9MDtmLmxlbmd0aD5lOysrZSloKHUoZltlXS5fb2Zmc2V0LDEwKSxcIiAwMDAwMCBuIFwiLFEpO3JldHVybiBoKFEpLGgoXCJ0cmFpbGVyXCIsUSksaChuZXcgSCh7U2l6ZTpmLmxlbmd0aCsxLFJvb3Q6bCxJbmZvOm5ldyBIKHtQcm9kdWNlcjpuZXcgUihcIktlbmRvIFVJIFBERiBHZW5lcmF0b3JcIiksVGl0bGU6bmV3IFIodChcInRpdGxlXCIsXCJcIikpLEF1dGhvcjpuZXcgUih0KFwiYXV0aG9yXCIsXCJcIikpLFN1YmplY3Q6bmV3IFIodChcInN1YmplY3RcIixcIlwiKSksS2V5d29yZHM6bmV3IFIodChcImtleXdvcmRzXCIsXCJcIikpLENyZWF0b3I6bmV3IFIodChcImNyZWF0b3JcIixcIktlbmRvIFVJIFBERiBHZW5lcmF0b3JcIikpLENyZWF0aW9uRGF0ZTp0KFwiZGF0ZVwiLG5ldyBEYXRlKX0pfSksUSxRKSxoKFwic3RhcnR4cmVmXCIsUSxuLFEpLGgoXCIlJUVPRlwiLFEpLGguc3RyZWFtKCkub2Zmc2V0KDApfX1mdW5jdGlvbiBhKHQsbil7ZnVuY3Rpb24gaSgpe2UuY29uc29sZSYmKGUuY29uc29sZS5lcnJvcj9lLmNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgbG9hZCBVUkw6ICVzXCIsdCk6ZS5jb25zb2xlLmxvZyhcIkNhbm5vdCBsb2FkIFVSTDogJXNcIix0KSksbihudWxsKX12YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7ci5vcGVuKFwiR0VUXCIsdCwhMCksSyYmKHIucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIiksci5vbmxvYWQ9ZnVuY3Rpb24oKXsyMDA9PXIuc3RhdHVzfHwzMDQ9PXIuc3RhdHVzP24oSz9uZXcgVWludDhBcnJheShyLnJlc3BvbnNlKTpuZXcgVkJBcnJheShyLnJlc3BvbnNlQm9keSkudG9BcnJheSgpKTppKCl9LHIub25lcnJvcj1pLHIuc2VuZChudWxsKX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49ZXRbZV07bj90KG4pOmEoZSxmdW5jdGlvbihuKXtpZihudWxsPT1uKXRocm93IEVycm9yKFwiQ2Fubm90IGxvYWQgZm9udCBmcm9tIFwiK2UpO3ZhciBpPW5ldyBZLnBkZi5UVEZGb250KG4pO2V0W2VdPWksdChpKX0pfWZ1bmN0aW9uIGwoZSx0KXt2YXIgaT10dFtlXTtpP3QoaSk6KGk9bmV3IEltYWdlLGkub25sb2FkPWZ1bmN0aW9uKCl7dmFyIG4scixvLGEscyxsLGMsZCx1LGgscD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3Aud2lkdGg9aS53aWR0aCxwLmhlaWdodD1pLmhlaWdodCxuPXAuZ2V0Q29udGV4dChcIjJkXCIpLG4uZHJhd0ltYWdlKGksMCwwKTt0cnl7cj1uLmdldEltYWdlRGF0YSgwLDAsaS53aWR0aCxpLmhlaWdodCl9Y2F0Y2goZil7cmV0dXJuIHQodHRbZV09XCJUQUlOVEVEXCIpfWZvcihvPSExLGE9RCgpLHM9RCgpLGw9ci5kYXRhLGM9MDtsLmxlbmd0aD5jOylhLndyaXRlQnl0ZShsW2MrK10pLGEud3JpdGVCeXRlKGxbYysrXSksYS53cml0ZUJ5dGUobFtjKytdKSxkPWxbYysrXSwyNTU+ZCYmKG89ITApLHMud3JpdGVCeXRlKGQpO28/aT1uZXcgQyhpLndpZHRoLGkuaGVpZ2h0LGEscyk6KHU9cC50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIpLHU9dS5zdWJzdHIodS5pbmRleE9mKFwiO2Jhc2U2NCxcIikrOCksaD1EKCksaC53cml0ZUJhc2U2NCh1KSxoLm9mZnNldCgwKSxpPW5ldyB4KGkud2lkdGgsaS5oZWlnaHQsaCkpLHQodHRbZV09aSl9LGkub25lcnJvcj1mdW5jdGlvbigpe3QodHRbZV09XCJUQUlOVEVEXCIpfSxpLmNyb3NzT3JpZ2luPVwiQW5vbnltb3VzXCIsaS5zcmM9ZSwoaS5jb21wbGV0ZXx8aS5jb21wbGV0ZT09PW4pJiYoaS5zcmM9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCIsaS5zcmM9ZSkpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIGk9dC5sZW5ndGgscj1pO2lmKDA9PT1pKXJldHVybiBuKCk7Zm9yKDtyLS0+MDspZSh0W3JdLGZ1bmN0aW9uKCl7MD09PS0taSYmbigpfSl9fWZ1bmN0aW9uIGQoZSx0LG4pe2Zvcig7dD5lLmxlbmd0aDspZT1uK2U7cmV0dXJuIGV9ZnVuY3Rpb24gdShlLHQpe3JldHVybiBkKGUrXCJcIix0LFwiMFwiKX1mdW5jdGlvbiBoKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlfWZ1bmN0aW9uIGYoZSx0KXt0KFwiW1wiKSxlLmxlbmd0aD4wJiZ0LndpdGhJbmRlbnQoZnVuY3Rpb24oKXtmb3IodmFyIG49MDtlLmxlbmd0aD5uOysrbiluPjAmJm4lOD09PTA/dC5pbmRlbnQoZVtuXSk6dChcIiBcIixlW25dKX0pLHQoXCIgXVwiKX1mdW5jdGlvbiBnKGUsdCl7dChcIihEOlwiLHUoZS5nZXRVVENGdWxsWWVhcigpLDQpLHUoZS5nZXRVVENNb250aCgpKzEsMiksdShlLmdldFVUQ0RhdGUoKSwyKSx1KGUuZ2V0VVRDSG91cnMoKSwyKSx1KGUuZ2V0VVRDTWludXRlcygpLDIpLHUoZS5nZXRVVENTZWNvbmRzKCksMiksXCJaKVwiKX1mdW5jdGlvbiBtKGUpe3JldHVybiBlKig3Mi8yNS40KX1mdW5jdGlvbiB2KGUpe3JldHVybiBtKDEwKmUpfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIDcyKmV9ZnVuY3Rpb24geShlLG4pe3ZhciBpLHI7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihpPS9eXFxzKihbMC05Ll0rKVxccyoobW18Y218aW58cHQpXFxzKiQvLmV4ZWMoZSksaSYmKHI9dChpWzFdKSwhaXNOYU4ocikpKSlyZXR1cm5cInB0XCI9PWlbMl0/cjp7bW06bSxjbTp2LFwiaW5cIjpffVtpWzJdXShyKTtpZihudWxsIT1uKXJldHVybiBuO3Rocm93IEVycm9yKFwiQ2FuJ3QgcGFyc2UgdW5pdDogXCIrZSl9ZnVuY3Rpb24gdygpe31mdW5jdGlvbiBiKGUsdCxuKXtufHwobj13KSxlLnByb3RvdHlwZT1uZXcgbjtmb3IodmFyIGkgaW4gdCloKHQsaSkmJihlLnByb3RvdHlwZVtpXT10W2ldKTtyZXR1cm4gZX1mdW5jdGlvbiBrKGUpe3JldHVybiBoKE8sZSk/T1tlXTpPW2VdPW5ldyBMKGUpfWZ1bmN0aW9uIHgoZSx0LG4pe3RoaXMuYXNTdHJlYW09ZnVuY3Rpb24oKXt2YXIgaT1uZXcgTihuLHtUeXBlOmsoXCJYT2JqZWN0XCIpLFN1YnR5cGU6ayhcIkltYWdlXCIpLFdpZHRoOmUsSGVpZ2h0OnQsQml0c1BlckNvbXBvbmVudDo4LENvbG9yU3BhY2U6ayhcIkRldmljZVJHQlwiKSxGaWx0ZXI6ayhcIkRDVERlY29kZVwiKX0pO3JldHVybiBpLl9yZXNvdXJjZU5hbWU9ayhcIklcIisgKytYKSxpfX1mdW5jdGlvbiBDKGUsdCxuLGkpe3RoaXMuYXNTdHJlYW09ZnVuY3Rpb24ocil7dmFyIG89bmV3IE4oaSx7VHlwZTprKFwiWE9iamVjdFwiKSxTdWJ0eXBlOmsoXCJJbWFnZVwiKSxXaWR0aDplLEhlaWdodDp0LEJpdHNQZXJDb21wb25lbnQ6OCxDb2xvclNwYWNlOmsoXCJEZXZpY2VHcmF5XCIpfSwhMCksYT1uZXcgTihuLHtUeXBlOmsoXCJYT2JqZWN0XCIpLFN1YnR5cGU6ayhcIkltYWdlXCIpLFdpZHRoOmUsSGVpZ2h0OnQsQml0c1BlckNvbXBvbmVudDo4LENvbG9yU3BhY2U6ayhcIkRldmljZVJHQlwiKSxTTWFzazpyLmF0dGFjaChvKX0sITApO3JldHVybiBhLl9yZXNvdXJjZU5hbWU9ayhcIklcIisgKytYKSxhfX1mdW5jdGlvbiBTKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e0Z1bmN0aW9uVHlwZTozLEZ1bmN0aW9uczplLERvbWFpbjpbMCwxXSxCb3VuZHM6ZCxFbmNvZGU6dX19dmFyIG4saSxyLG8sYSxzPSExLGw9W10sYz1bXSxkPVtdLHU9W107Zm9yKG49MTtlLmxlbmd0aD5uOysrbilpPWVbbi0xXSxyPWVbbl0sbz1pLmNvbG9yLGE9ci5jb2xvcixjLnB1c2goe0Z1bmN0aW9uVHlwZToyLERvbWFpbjpbMCwxXSxSYW5nZTpbMCwxLDAsMSwwLDFdLE46MSxDMDpbby5yLG8uZyxvLmJdLEMxOlthLnIsYS5nLGEuYl19KSxsLnB1c2goe0Z1bmN0aW9uVHlwZToyLERvbWFpbjpbMCwxXSxSYW5nZTpbMCwxXSxOOjEsQzA6W28uYV0sQzE6W2EuYV19KSwoMT5vLmF8fDE+YS5hKSYmKHM9ITApLGQucHVzaChyLm9mZnNldCksdS5wdXNoKDAsMSk7cmV0dXJuIGQucG9wKCkse2hhc0FscGhhOnMsY29sb3JzOnQoYyksb3BhY2l0aWVzOnM/dChsKTpudWxsfX1mdW5jdGlvbiBUKGUsdCxuKXt2YXIgaT1cInJhZGlhbFwiPT10LnR5cGUscj1TKHQuc3RvcHMpLG89aT9bdC5zdGFydC54LHQuc3RhcnQueSx0LnN0YXJ0LnIsdC5lbmQueCx0LmVuZC55LHQuZW5kLnJdOlt0LnN0YXJ0LngsdC5zdGFydC55LHQuZW5kLngsdC5lbmQueV0sYT17VHlwZTprKFwiU2hhZGluZ1wiKSxTaGFkaW5nVHlwZTppPzM6MixDb2xvclNwYWNlOmsoXCJEZXZpY2VSR0JcIiksQ29vcmRzOm8sRG9tYWluOlswLDFdLEZ1bmN0aW9uOnIuY29sb3JzLEV4dGVuZDpbITAsITBdfSxzPXIuaGFzQWxwaGE/e1R5cGU6ayhcIkV4dEdTdGF0ZVwiKSxBSVM6ITEsQ0E6MSxjYToxLFNNYXNrOntUeXBlOmsoXCJNYXNrXCIpLFM6ayhcIkx1bWlub3NpdHlcIiksRzplLmF0dGFjaChuZXcgTihcIi9hMCBncyAvczAgc2hcIix7VHlwZTprKFwiWE9iamVjdFwiKSxTdWJ0eXBlOmsoXCJGb3JtXCIpLEZvcm1UeXBlOjEsQkJveDp0LnVzZXJTcGFjZT9bbi5sZWZ0LG4udG9wK24uaGVpZ2h0LG4ubGVmdCtuLndpZHRoLG4udG9wXTpbMCwxLDEsMF0sR3JvdXA6e1R5cGU6ayhcIkdyb3VwXCIpLFM6ayhcIlRyYW5zcGFyZW5jeVwiKSxDUzprKFwiRGV2aWNlR3JheVwiKSxJOiEwfSxSZXNvdXJjZXM6e0V4dEdTdGF0ZTp7YTA6e0NBOjEsY2E6MX19LFNoYWRpbmc6e3MwOntDb2xvclNwYWNlOmsoXCJEZXZpY2VHcmF5XCIpLENvb3JkczpvLERvbWFpbjpbMCwxXSxTaGFkaW5nVHlwZTppPzM6MixGdW5jdGlvbjpyLm9wYWNpdGllcyxFeHRlbmQ6WyEwLCEwXX19fX0pKX19Om51bGw7cmV0dXJue2hhc0FscGhhOnIuaGFzQWxwaGEsc2hhZGluZzpuZXcgSChhKSxvcGFjaXR5Om5ldyBIKHMpfX1mdW5jdGlvbiBEKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gUz49VH1mdW5jdGlvbiBuKCl7cmV0dXJuIFQ+Uz9lW1MrK106MH1mdW5jdGlvbiBpKHQpe3coUyksZVtTKytdPTI1NSZ0LFM+VCYmKFQ9Uyl9ZnVuY3Rpb24gcigpe3JldHVybiBuKCk8PDh8bigpfWZ1bmN0aW9uIG8oZSl7aShlPj44KSxpKGUpfWZ1bmN0aW9uIGEoKXt2YXIgZT1yKCk7cmV0dXJuIGU+PTMyNzY4P2UtNjU1MzY6ZX1mdW5jdGlvbiBzKGUpe28oMD5lP2UrNjU1MzY6ZSl9ZnVuY3Rpb24gbCgpe3JldHVybiA2NTUzNipyKCkrcigpfWZ1bmN0aW9uIGMoZSl7byhlPj4+MTYmNjU1MzUpLG8oNjU1MzUmZSl9ZnVuY3Rpb24gZCgpe3ZhciBlPWwoKTtyZXR1cm4gZT49MjE0NzQ4MzY0OD9lLTQyOTQ5NjcyOTY6ZX1mdW5jdGlvbiB1KGUpe2MoMD5lP2UrNDI5NDk2NzI5NjplKX1mdW5jdGlvbiBoKCl7cmV0dXJuIGwoKS82NTUzNn1mdW5jdGlvbiBwKGUpe2MoTWF0aC5yb3VuZCg2NTUzNiplKSl9ZnVuY3Rpb24gZigpe3JldHVybiBkKCkvNjU1MzZ9ZnVuY3Rpb24gZyhlKXt1KE1hdGgucm91bmQoNjU1MzYqZSkpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIHkoZSxuKX1mdW5jdGlvbiB2KGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxtKGUpKX1mdW5jdGlvbiBfKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7Kyt0KWkoZS5jaGFyQ29kZUF0KHQpKX1mdW5jdGlvbiB5KGUsdCl7Zm9yKHZhciBuPUFycmF5KGUpLGk9MDtlPmk7KytpKW5baV09dCgpO3JldHVybiBufXZhciB3LGIsayx4LEMsUz0wLFQ9MDtyZXR1cm4gbnVsbD09ZT9lPUs/bmV3IFVpbnQ4QXJyYXkoMjU2KTpbXTpUPWUubGVuZ3RoLHc9Sz9mdW5jdGlvbih0KXtpZih0Pj1lLmxlbmd0aCl7dmFyIG49bmV3IFVpbnQ4QXJyYXkoTWF0aC5tYXgodCsyNTYsMiplLmxlbmd0aCkpO24uc2V0KGUsMCksZT1ufX06ZnVuY3Rpb24oKXt9LGI9Sz9mdW5jdGlvbigpe3JldHVybiBuZXcgVWludDhBcnJheShlLmJ1ZmZlciwwLFQpfTpmdW5jdGlvbigpe3JldHVybiBlfSxrPUs/ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuIF8odCk7dmFyIG49dC5sZW5ndGg7dyhTK24pLGUuc2V0KHQsUyksUys9bixTPlQmJihUPVMpfTpmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gXyhlKTtcbmZvcih2YXIgdD0wO2UubGVuZ3RoPnQ7Kyt0KWkoZVt0XSl9LHg9Sz9mdW5jdGlvbih0LG4pe2lmKGUuYnVmZmVyLnNsaWNlKXJldHVybiBuZXcgVWludDhBcnJheShlLmJ1ZmZlci5zbGljZSh0LHQrbikpO3ZhciBpPW5ldyBVaW50OEFycmF5KG4pO3JldHVybiBpLnNldChuZXcgVWludDhBcnJheShlLmJ1ZmZlcix0LG4pKSxpfTpmdW5jdGlvbih0LG4pe3JldHVybiBlLnNsaWNlKHQsdCtuKX0sQz17ZW9mOnQscmVhZEJ5dGU6bix3cml0ZUJ5dGU6aSxyZWFkU2hvcnQ6cix3cml0ZVNob3J0Om8scmVhZExvbmc6bCx3cml0ZUxvbmc6YyxyZWFkRml4ZWQ6aCx3cml0ZUZpeGVkOnAscmVhZFNob3J0XzphLHdyaXRlU2hvcnRfOnMscmVhZExvbmdfOmQsd3JpdGVMb25nXzp1LHJlYWRGaXhlZF86Zix3cml0ZUZpeGVkXzpnLHJlYWQ6bSx3cml0ZTprLHJlYWRTdHJpbmc6dix3cml0ZVN0cmluZzpfLHRpbWVzOnksZ2V0OmIsc2xpY2U6eCxvZmZzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/KFM9ZSxDKTpTfSxza2lwOmZ1bmN0aW9uKGUpe1MrPWV9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJGSVggQ0FMTEVSLiAgQmluYXJ5U3RyZWFtIGlzIG5vIGxvbmdlciBjb252ZXJ0aWJsZSB0byBzdHJpbmchXCIpfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gVH0sc2F2ZUV4Y3Vyc2lvbjpmdW5jdGlvbihlKXt2YXIgdD1TO3RyeXtyZXR1cm4gZSgpfWZpbmFsbHl7Uz10fX0sd3JpdGVCYXNlNjQ6ZnVuY3Rpb24oZSl7d2luZG93LmF0b2I/Xyh3aW5kb3cuYXRvYihlKSk6ayhKLmRlY29kZShlKSl9LGJhc2U2NDpmdW5jdGlvbigpe3JldHVybiBKLmVuY29kZShiKCkpfX19ZnVuY3Rpb24gQShlKXtyZXR1cm4gZS5yZXBsYWNlKC9eXFxzKihbJ1wiXSkoLiopXFwxXFxzKiQvLFwiJDJcIil9ZnVuY3Rpb24gRShlKXt2YXIgdCxuPS9eXFxzKigobm9ybWFsfGl0YWxpYylcXHMrKT8oKG5vcm1hbHxzbWFsbC1jYXBzKVxccyspPygobm9ybWFsfGJvbGR8XFxkKylcXHMrKT8oKFswLTkuXSspKHB4fHB0KSkoXFwvKChbMC05Ll0rKShweHxwdCl8bm9ybWFsKSk/XFxzKyguKj8pXFxzKiQvaSxpPW4uZXhlYyhlKTtyZXR1cm4gaT8odD1pWzhdP3BhcnNlSW50KGlbOF0sMTApOjEyLHtpdGFsaWM6aVsyXSYmXCJpdGFsaWNcIj09aVsyXS50b0xvd2VyQ2FzZSgpLHZhcmlhbnQ6aVs0XSxib2xkOmlbNl0mJi9ib2xkfDcwMC9pLnRlc3QoaVs2XSksZm9udFNpemU6dCxsaW5lSGVpZ2h0OmlbMTJdP1wibm9ybWFsXCI9PWlbMTJdP3Q6cGFyc2VJbnQoaVsxMl0sMTApOm51bGwsZm9udEZhbWlseTppWzE0XS5zcGxpdCgvXFxzKixcXHMqL2cpLm1hcChBKX0pOntmb250U2l6ZToxMixmb250RmFtaWx5Olwic2Fucy1zZXJpZlwifX1mdW5jdGlvbiBNKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuYm9sZCYmKHQrPVwifGJvbGRcIiksZS5pdGFsaWMmJih0Kz1cInxpdGFsaWNcIiksdC50b0xvd2VyQ2FzZSgpfXZhciBuLGkscixvPWUuZm9udEZhbWlseTtpZihvIGluc3RhbmNlb2YgQXJyYXkpe2ZvcihyPTA7by5sZW5ndGg+cjsrK3IpaWYobj10KG9bcl0pLGk9JFtuXSlyZXR1cm4gaX1lbHNlIGk9JFtvLnRvTG93ZXJDYXNlKCldO3JldHVybiBpfHwoaT1cIlRpbWVzLVJvbWFuXCIpLGl9ZnVuY3Rpb24gUChlLHQpe2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBuIGluIGUpUChuLGVbbl0pO2Vsc2UgZT1lLnRvTG93ZXJDYXNlKCksJFtlXT10fWZ1bmN0aW9uIEkoZSx0KXt2YXIgbj1lWzBdLGk9ZVsxXSxyPWVbMl0sbz1lWzNdLGE9ZVs0XSxzPWVbNV0sbD10WzBdLGM9dFsxXSxkPXRbMl0sdT10WzNdLGg9dFs0XSxwPXRbNV07cmV0dXJuW24qbCtpKmQsbipjK2kqdSxyKmwrbypkLHIqYytvKnUsYSpsK3MqZCtoLGEqYytzKnUrcF19ZnVuY3Rpb24geihlKXtyZXR1cm4gMT09PWVbMF0mJjA9PT1lWzFdJiYwPT09ZVsyXSYmMT09PWVbM10mJjA9PT1lWzRdJiYwPT09ZVs1XX12YXIgRixSLEIsTCxPLEgsTixWLFUsVyxqLEcscSwkLFk9ZS5rZW5kbyxLPSEhZS5VaW50OEFycmF5LFE9XCJcXG5cIixYPTAsSj1mdW5jdGlvbigpe3ZhciBlPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtyZXR1cm57ZGVjb2RlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixpLHIsbyxhLHMsbCxjPXQucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csXCJcIiksZD0wLHU9Yy5sZW5ndGgsaD1bXTt1PmQ7KW49ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLGk9ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLHI9ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLG89ZS5pbmRleE9mKGMuY2hhckF0KGQrKykpLGE9bjw8MnxpPj4+NCxzPSgxNSZpKTw8NHxyPj4+MixsPSgzJnIpPDw2fG8saC5wdXNoKGEpLDY0IT1yJiZoLnB1c2gocyksNjQhPW8mJmgucHVzaChsKTtyZXR1cm4gaH0sZW5jb2RlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixpLHIsbyxhLHMsbCxjPTAsZD10Lmxlbmd0aCx1PVwiXCI7ZD5jOyluPXRbYysrXSxpPXRbYysrXSxyPXRbYysrXSxvPW4+Pj4yLGE9KDMmbik8PDR8aT4+PjQscz0oMTUmaSk8PDJ8cj4+PjYsbD02MyZyLGMtZD09Mj9zPWw9NjQ6Yy1kPT0xJiYobD02NCksdSs9ZS5jaGFyQXQobykrZS5jaGFyQXQoYSkrZS5jaGFyQXQocykrZS5jaGFyQXQobCk7cmV0dXJuIHV9fX0oKSxaPXthMDpbMjM4My45NCwzMzcwLjM5XSxhMTpbMTY4My43OCwyMzgzLjk0XSxhMjpbMTE5MC41NSwxNjgzLjc4XSxhMzpbODQxLjg5LDExOTAuNTVdLGE0Ols1OTUuMjgsODQxLjg5XSxhNTpbNDE5LjUzLDU5NS4yOF0sYTY6WzI5Ny42NCw0MTkuNTNdLGE3OlsyMDkuNzYsMjk3LjY0XSxhODpbMTQ3LjQsMjA5Ljc2XSxhOTpbMTA0Ljg4LDE0Ny40XSxhMTA6WzczLjcsMTA0Ljg4XSxiMDpbMjgzNC42NSw0MDA4LjE5XSxiMTpbMjAwNC4wOSwyODM0LjY1XSxiMjpbMTQxNy4zMiwyMDA0LjA5XSxiMzpbMTAwMC42MywxNDE3LjMyXSxiNDpbNzA4LjY2LDEwMDAuNjNdLGI1Ols0OTguOSw3MDguNjZdLGI2OlszNTQuMzMsNDk4LjldLGI3OlsyNDkuNDUsMzU0LjMzXSxiODpbMTc1Ljc1LDI0OS40NV0sYjk6WzEyNC43MiwxNzUuNzVdLGIxMDpbODcuODcsMTI0LjcyXSxjMDpbMjU5OS4zNywzNjc2LjU0XSxjMTpbMTgzNi44NSwyNTk5LjM3XSxjMjpbMTI5OC4yNywxODM2Ljg1XSxjMzpbOTE4LjQzLDEyOTguMjddLGM0Ols2NDkuMTMsOTE4LjQzXSxjNTpbNDU5LjIxLDY0OS4xM10sYzY6WzMyMy4xNSw0NTkuMjFdLGM3OlsyMjkuNjEsMzIzLjE1XSxjODpbMTYxLjU3LDIyOS42MV0sYzk6WzExMy4zOSwxNjEuNTddLGMxMDpbNzkuMzcsMTEzLjM5XSxleGVjdXRpdmU6WzUyMS44Niw3NTZdLGZvbGlvOls2MTIsOTM2XSxsZWdhbDpbNjEyLDEwMDhdLGxldHRlcjpbNjEyLDc5Ml0sdGFibG9pZDpbNzkyLDEyMjRdfSxldD17XCJUaW1lcy1Sb21hblwiOiEwLFwiVGltZXMtQm9sZFwiOiEwLFwiVGltZXMtSXRhbGljXCI6ITAsXCJUaW1lcy1Cb2xkSXRhbGljXCI6ITAsSGVsdmV0aWNhOiEwLFwiSGVsdmV0aWNhLUJvbGRcIjohMCxcIkhlbHZldGljYS1PYmxpcXVlXCI6ITAsXCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIjohMCxDb3VyaWVyOiEwLFwiQ291cmllci1Cb2xkXCI6ITAsXCJDb3VyaWVyLU9ibGlxdWVcIjohMCxcIkNvdXJpZXItQm9sZE9ibGlxdWVcIjohMCxTeW1ib2w6ITAsWmFwZkRpbmdiYXRzOiEwfSx0dD17fSxudD1jKHMpLGl0PWMobCk7by5wcm90b3R5cGU9e2xvYWRGb250czpudCxsb2FkSW1hZ2VzOml0LGdldEZvbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5GT05UU1tlXTtpZighdCl7aWYodD1ldFtlXSwhdCl0aHJvdyBFcnJvcihcIkZvbnQgXCIrZStcIiBoYXMgbm90IGJlZW4gbG9hZGVkXCIpO3Q9dGhpcy5hdHRhY2godD09PSEwP25ldyBXKGUpOm5ldyBqKHRoaXMsdCkpLHRoaXMuRk9OVFNbZV09dH1yZXR1cm4gdH0sZ2V0SW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5JTUFHRVNbZV07aWYoIXQpe2lmKHQ9dHRbZV0sIXQpdGhyb3cgRXJyb3IoXCJJbWFnZSBcIitlK1wiIGhhcyBub3QgYmVlbiBsb2FkZWRcIik7aWYoXCJUQUlOVEVEXCI9PT10KXJldHVybiBudWxsO3Q9dGhpcy5JTUFHRVNbZV09dGhpcy5hdHRhY2godC5hc1N0cmVhbSh0aGlzKSl9cmV0dXJuIHR9LGdldE9wYWNpdHlHUzpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhPXQoZSkudG9GaXhlZCgzKTtyZXR1cm4gZT10KGEpLGErPW4/XCJTXCI6XCJGXCIsaT10aGlzLl9vcGFjaXR5R1NDYWNoZXx8KHRoaXMuX29wYWNpdHlHU0NhY2hlPXt9KSxyPWlbYV0scnx8KG89e1R5cGU6ayhcIkV4dEdTdGF0ZVwiKX0sbj9vLkNBPWU6by5jYT1lLHI9dGhpcy5hdHRhY2gobmV3IEgobykpLHIuX3Jlc291cmNlTmFtZT1rKFwiR1NcIisgKytYKSxpW2FdPXIpLHJ9LGRpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBIKGUpfSxuYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBrKGUpfSxzdHJlYW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IE4odCxlKX19LEY9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheX0sdy5wcm90b3R5cGUuYmVmb3JlUmVuZGVyPWZ1bmN0aW9uKCl7fSxSPWIoZnVuY3Rpb24oZSl7dGhpcy52YWx1ZT1lfSx7cmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49XCJcIixpPXRoaXMuZXNjYXBlKCk7Zm9yKHQ9MDtpLmxlbmd0aD50OysrdCluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZpLmNoYXJDb2RlQXQodCkpO2UoXCIoXCIsbixcIilcIil9LGVzY2FwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlLnJlcGxhY2UoLyhbXFwoXFwpXFxcXF0pL2csXCJcXFxcJDFcIil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9fSksQj1iKGZ1bmN0aW9uKGUpe3RoaXMudmFsdWU9ZX0se3JlbmRlcjpmdW5jdGlvbihlKXtlKFwiPFwiKTtmb3IodmFyIHQ9MDt0aGlzLnZhbHVlLmxlbmd0aD50OysrdCllKHUodGhpcy52YWx1ZS5jaGFyQ29kZUF0KHQpLnRvU3RyaW5nKDE2KSw0KSk7ZShcIj5cIil9fSxSKSxMPWIoZnVuY3Rpb24oZSl7dGhpcy5uYW1lPWV9LHtyZW5kZXI6ZnVuY3Rpb24oZSl7ZShcIi9cIit0aGlzLmVzY2FwZSgpKX0sZXNjYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZS5yZXBsYWNlKC9bXlxceDIxLVxceDdFXS9nLGZ1bmN0aW9uKGUpe3JldHVyblwiI1wiK3UoZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSwyKX0pfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9fSksTz17fSxMLmdldD1rLEg9YihmdW5jdGlvbihlKXt0aGlzLnByb3BzPWV9LHtyZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm9wcyxuPSEwO2UoXCI8PFwiKSxlLndpdGhJbmRlbnQoZnVuY3Rpb24oKXtmb3IodmFyIGkgaW4gdCloKHQsaSkmJiEvXl8vLnRlc3QoaSkmJihuPSExLGUuaW5kZW50KGsoaSksXCIgXCIsdFtpXSkpfSksbnx8ZS5pbmRlbnQoKSxlKFwiPj5cIil9fSksTj1iKGZ1bmN0aW9uKGUsdCxuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIGk9RCgpO2kud3JpdGUoZSksZT1pfXRoaXMuZGF0YT1lLHRoaXMucHJvcHM9dHx8e30sdGhpcy5jb21wcmVzcz1ufSx7cmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuZGF0YS5nZXQoKSxpPXRoaXMucHJvcHM7dGhpcy5jb21wcmVzcyYmZS5wYWtvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnBha28uZGVmbGF0ZSYmKGkuRmlsdGVyP2kuRmlsdGVyIGluc3RhbmNlb2YgQXJyYXl8fChpLkZpbHRlcj1baS5GaWx0ZXJdKTppLkZpbHRlcj1bXSxpLkZpbHRlci51bnNoaWZ0KGsoXCJGbGF0ZURlY29kZVwiKSksbj1lLnBha28uZGVmbGF0ZShuKSksaS5MZW5ndGg9bi5sZW5ndGgsdChuZXcgSChpKSxcIiBzdHJlYW1cIixRKSx0LndyaXRlRGF0YShuKSx0KFEsXCJlbmRzdHJlYW1cIil9fSksVj1iKGZ1bmN0aW9uKGUpe2U9dGhpcy5wcm9wcz1lfHx7fSxlLlR5cGU9ayhcIkNhdGFsb2dcIil9LHtzZXRQYWdlczpmdW5jdGlvbihlKXt0aGlzLnByb3BzLlBhZ2VzPWV9fSxIKSxVPWIoZnVuY3Rpb24oZSl7dGhpcy5wcm9wcz17VHlwZTprKFwiUGFnZXNcIiksS2lkczpbXSxDb3VudDowLE1lZGlhQm94OmV9fSx7YWRkUGFnZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLktpZHMucHVzaChlKSx0aGlzLnByb3BzLkNvdW50Kyt9fSxIKSxXPWIoZnVuY3Rpb24oZSl7dGhpcy5wcm9wcz17VHlwZTprKFwiRm9udFwiKSxTdWJ0eXBlOmsoXCJUeXBlMVwiKSxCYXNlRm9udDprKGUpfSx0aGlzLl9yZXNvdXJjZU5hbWU9ayhcIkZcIisgKytYKX0se2VuY29kZVRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBSKGUrXCJcIil9fSxIKSxqPWIoZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7bj10aGlzLnByb3BzPW58fHt9LG4uVHlwZT1rKFwiRm9udFwiKSxuLlN1YnR5cGU9ayhcIlR5cGUwXCIpLG4uRW5jb2Rpbmc9ayhcIklkZW50aXR5LUhcIiksdGhpcy5fcGRmPWUsdGhpcy5fZm9udD10LHRoaXMuX3N1Yj10Lm1ha2VTdWJzZXQoKSx0aGlzLl9yZXNvdXJjZU5hbWU9ayhcIkZcIisgKytYKSxpPXQuaGVhZCx0aGlzLm5hbWU9dC5wc05hbWUscj10aGlzLnNjYWxlPXQuc2NhbGUsdGhpcy5iYm94PVtpLnhNaW4qcixpLnlNaW4qcixpLnhNYXgqcixpLnlNYXgqcl0sdGhpcy5pdGFsaWNBbmdsZT10LnBvc3QuaXRhbGljQW5nbGUsdGhpcy5hc2NlbnQ9dC5hc2NlbnQqcix0aGlzLmRlc2NlbnQ9dC5kZXNjZW50KnIsdGhpcy5saW5lR2FwPXQubGluZUdhcCpyLHRoaXMuY2FwSGVpZ2h0PXQub3MyLmNhcEhlaWdodHx8dGhpcy5hc2NlbnQsdGhpcy54SGVpZ2h0PXQub3MyLnhIZWlnaHR8fDAsdGhpcy5zdGVtVj0wLHRoaXMuZmFtaWx5Q2xhc3M9KHQub3MyLmZhbWlseUNsYXNzfHwwKT4+OCx0aGlzLmlzU2VyaWY9dGhpcy5mYW1pbHlDbGFzcz49MSYmNz49dGhpcy5mYW1pbHlDbGFzcyx0aGlzLmlzU2NyaXB0PTEwPT10aGlzLmZhbWlseUNsYXNzLHRoaXMuZmxhZ3M9KHQucG9zdC5pc0ZpeGVkUGl0Y2g/MTowKXwodGhpcy5pc1NlcmlmPzI6MCl8KHRoaXMuaXNTY3JpcHQ/ODowKXwoMCE9PXRoaXMuaXRhbGljQW5nbGU/NjQ6MCl8MzJ9LHtlbmNvZGVUZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgQih0aGlzLl9zdWIuZW5jb2RlVGV4dChlK1wiXCIpKX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsbz10aGlzLGE9by5fc3ViLHM9YS5yZW5kZXIoKSxsPW5ldyBOKEQocykse0xlbmd0aDE6cy5sZW5ndGh9LCEwKSxjPW8uX3BkZi5hdHRhY2gobmV3IEgoe1R5cGU6ayhcIkZvbnREZXNjcmlwdG9yXCIpLEZvbnROYW1lOmsoby5fc3ViLnBzTmFtZSksRm9udEJCb3g6by5iYm94LEZsYWdzOm8uZmxhZ3MsU3RlbVY6by5zdGVtVixJdGFsaWNBbmdsZTpvLml0YWxpY0FuZ2xlLEFzY2VudDpvLmFzY2VudCxEZXNjZW50Om8uZGVzY2VudCxDYXBIZWlnaHQ6by5jYXBIZWlnaHQsWEhlaWdodDpvLnhIZWlnaHQsRm9udEZpbGUyOm8uX3BkZi5hdHRhY2gobCl9KSksZD1hLm5jaWQyb2dpZCx1PWEuZmlyc3RDaGFyLGg9YS5sYXN0Q2hhcixwPVtdOyFmdW5jdGlvbiBmKGUsdCl7aWYoaD49ZSl7dmFyIG49ZFtlXTtudWxsPT1uP2YoZSsxKToodHx8cC5wdXNoKGUsdD1bXSksdC5wdXNoKG8uX2ZvbnQud2lkdGhPZkdseXBoKG4pKSxmKGUrMSx0KSl9fSh1KSxlPW5ldyBIKHtUeXBlOmsoXCJGb250XCIpLFN1YnR5cGU6ayhcIkNJREZvbnRUeXBlMlwiKSxCYXNlRm9udDprKG8uX3N1Yi5wc05hbWUpLENJRFN5c3RlbUluZm86bmV3IEgoe1JlZ2lzdHJ5Om5ldyBSKFwiQWRvYmVcIiksT3JkZXJpbmc6bmV3IFIoXCJJZGVudGl0eVwiKSxTdXBwbGVtZW50OjB9KSxGb250RGVzY3JpcHRvcjpjLEZpcnN0Q2hhcjp1LExhc3RDaGFyOmgsRFc6TWF0aC5yb3VuZChvLl9mb250LndpZHRoT2ZHbHlwaCgwKSksVzpwLENJRFRvR0lETWFwOm8uX3BkZi5hdHRhY2goby5fbWFrZUNpZFRvR2lkTWFwKCkpfSksdD1vLnByb3BzLHQuQmFzZUZvbnQ9ayhvLl9zdWIucHNOYW1lKSx0LkRlc2NlbmRhbnRGb250cz1bby5fcGRmLmF0dGFjaChlKV0sbj1uZXcgRyh1LGgsYS5zdWJzZXQpLHI9bmV3IE4oaSgpLG51bGwsITApLHIuZGF0YShuKSx0LlRvVW5pY29kZT1vLl9wZGYuYXR0YWNoKHIpfSxfbWFrZUNpZFRvR2lkTWFwOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOKEQodGhpcy5fc3ViLmNpZFRvR2lkTWFwKCkpLG51bGwsITApfX0sSCksRz1iKGZ1bmN0aW9uKGUsdCxuKXt0aGlzLmZpcnN0Q2hhcj1lLHRoaXMubGFzdENoYXI9dCx0aGlzLm1hcD1ufSx7cmVuZGVyOmZ1bmN0aW9uKGUpe2UuaW5kZW50KFwiL0NJREluaXQgL1Byb2NTZXQgZmluZHJlc291cmNlIGJlZ2luXCIpLGUuaW5kZW50KFwiMTIgZGljdCBiZWdpblwiKSxlLmluZGVudChcImJlZ2luY21hcFwiKSxlLmluZGVudChcIi9DSURTeXN0ZW1JbmZvIDw8XCIpLGUuaW5kZW50KFwiICAvUmVnaXN0cnkgKEFkb2JlKVwiKSxlLmluZGVudChcIiAgL09yZGVyaW5nIChVQ1MpXCIpLGUuaW5kZW50KFwiICAvU3VwcGxlbWVudCAwXCIpLGUuaW5kZW50KFwiPj4gZGVmXCIpLGUuaW5kZW50KFwiL0NNYXBOYW1lIC9BZG9iZS1JZGVudGl0eS1VQ1MgZGVmXCIpLGUuaW5kZW50KFwiL0NNYXBUeXBlIDIgZGVmXCIpLGUuaW5kZW50KFwiMSBiZWdpbmNvZGVzcGFjZXJhbmdlXCIpLGUuaW5kZW50KFwiICA8MDAwMD48ZmZmZj5cIiksZS5pbmRlbnQoXCJlbmRjb2Rlc3BhY2VyYW5nZVwiKTt2YXIgdD10aGlzO2UuaW5kZW50KHQubGFzdENoYXItdC5maXJzdENoYXIrMSxcIiBiZWdpbmJmY2hhclwiKSxlLndpdGhJbmRlbnQoZnVuY3Rpb24oKXt2YXIgbixpO2ZvcihuPXQuZmlyc3RDaGFyO3QubGFzdENoYXI+PW47KytuKWk9dC5tYXBbbl0sZS5pbmRlbnQoXCI8XCIsdShuLnRvU3RyaW5nKDE2KSw0KSxcIj5cIixcIjxcIix1KGkudG9TdHJpbmcoMTYpLDQpLFwiPlwiKX0pLGUuaW5kZW50KFwiZW5kYmZjaGFyXCIpLGUuaW5kZW50KFwiZW5kY21hcFwiKSxlLmluZGVudChcIkNNYXBOYW1lIGN1cnJlbnRkaWN0IC9DTWFwIGRlZmluZXJlc291cmNlIHBvcFwiKSxlLmluZGVudChcImVuZFwiKSxlLmluZGVudChcImVuZFwiKX19KSxxPWIoZnVuY3Rpb24oZSx0KXt0aGlzLl9wZGY9ZSx0aGlzLl9yY291bnQ9MCx0aGlzLl90ZXh0TW9kZT0hMSx0aGlzLl9mb250UmVzb3VyY2VzPXt9LHRoaXMuX2dzUmVzb3VyY2VzPXt9LHRoaXMuX3hSZXNvdXJjZXM9e30sdGhpcy5fcGF0UmVzb3VyY2VzPXt9LHRoaXMuX3NoUmVzb3VyY2VzPXt9LHRoaXMuX29wYWNpdHk9MSx0aGlzLl9tYXRyaXg9WzEsMCwwLDEsMCwwXSx0aGlzLl9mb250PW51bGwsdGhpcy5fZm9udFNpemU9bnVsbCx0aGlzLl9jb250ZXh0U3RhY2s9W10sdD10aGlzLnByb3BzPXR8fHt9LHQuVHlwZT1rKFwiUGFnZVwiKSx0LlByb2NTZXQ9W2soXCJQREZcIiksayhcIlRleHRcIiksayhcIkltYWdlQlwiKSxrKFwiSW1hZ2VDXCIpLGsoXCJJbWFnZUlcIildLHQuUmVzb3VyY2VzPW5ldyBIKHtGb250Om5ldyBIKHRoaXMuX2ZvbnRSZXNvdXJjZXMpLEV4dEdTdGF0ZTpuZXcgSCh0aGlzLl9nc1Jlc291cmNlcyksWE9iamVjdDpuZXcgSCh0aGlzLl94UmVzb3VyY2VzKSxQYXR0ZXJuOm5ldyBIKHRoaXMuX3BhdFJlc291cmNlcyksU2hhZGluZzpuZXcgSCh0aGlzLl9zaFJlc291cmNlcyl9KX0se19vdXQ6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50LmRhdGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0cmFuc2Zvcm06ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3ooYXJndW1lbnRzKXx8KHRoaXMuX21hdHJpeD1JKHRoaXMuX21hdHJpeCxhcmd1bWVudHMpLHRoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBcIixpLFwiIFwiLHIsXCIgXCIsbyxcIiBjbVwiKSx0aGlzLl9vdXQoUSkpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYW5zZm9ybSgxLDAsMCwxLGUsdCl9LHNjYWxlOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmFuc2Zvcm0oZSwwLDAsdCwwLDApfSxyb3RhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9TWF0aC5jb3MoZSksbj1NYXRoLnNpbihlKTt0aGlzLnRyYW5zZm9ybSh0LG4sLW4sdCwwLDApfSxiZWdpblRleHQ6ZnVuY3Rpb24oKXt0aGlzLl90ZXh0TW9kZT0hMCx0aGlzLl9vdXQoXCJCVFwiLFEpfSxlbmRUZXh0OmZ1bmN0aW9uKCl7dGhpcy5fdGV4dE1vZGU9ITEsdGhpcy5fb3V0KFwiRVRcIixRKX0sX3JlcXVpcmVUZXh0TW9kZTpmdW5jdGlvbigpe2lmKCF0aGlzLl90ZXh0TW9kZSl0aHJvdyBFcnJvcihcIlRleHQgbW9kZSByZXF1aXJlZDsgY2FsbCBwYWdlLmJlZ2luVGV4dCgpIGZpcnN0XCIpfSxfcmVxdWlyZUZvbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fZm9udCl0aHJvdyBFcnJvcihcIk5vIGZvbnQgc2VsZWN0ZWQ7IGNhbGwgcGFnZS5zZXRGb250KCkgZmlyc3RcIil9LHNldEZvbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZXF1aXJlVGV4dE1vZGUoKSxudWxsPT1lP2U9dGhpcy5fZm9udDplIGluc3RhbmNlb2Yganx8KGU9dGhpcy5fcGRmLmdldEZvbnQoZSkpLG51bGw9PXQmJih0PXRoaXMuX2ZvbnRTaXplKSx0aGlzLl9mb250UmVzb3VyY2VzW2UuX3Jlc291cmNlTmFtZV09ZSx0aGlzLl9mb250PWUsdGhpcy5fZm9udFNpemU9dCx0aGlzLl9vdXQoZS5fcmVzb3VyY2VOYW1lLFwiIFwiLHQsXCIgVGZcIixRKX0sc2V0VGV4dExlYWRpbmc6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZVRleHRNb2RlKCksdGhpcy5fb3V0KGUsXCIgVExcIixRKX0sc2V0VGV4dFJlbmRlcmluZ01vZGU6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZVRleHRNb2RlKCksdGhpcy5fb3V0KGUsXCIgVHJcIixRKX0sc2hvd1RleHQ6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZUZvbnQoKSx0aGlzLl9vdXQodGhpcy5fZm9udC5lbmNvZGVUZXh0KGUpLFwiIFRqXCIsUSl9LHNob3dUZXh0Tkw6ZnVuY3Rpb24oZSl7dGhpcy5fcmVxdWlyZUZvbnQoKSx0aGlzLl9vdXQodGhpcy5fZm9udC5lbmNvZGVUZXh0KGUpLFwiICdcIixRKX0sc2V0U3Ryb2tlQ29sb3I6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX291dChlLFwiIFwiLHQsXCIgXCIsbixcIiBSR1wiLFEpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGUpe3RoaXMuc2V0RmlsbE9wYWNpdHkoZSksdGhpcy5zZXRTdHJva2VPcGFjaXR5KGUpLHRoaXMuX29wYWNpdHkqPWV9LHNldFN0cm9rZU9wYWNpdHk6ZnVuY3Rpb24oZSl7aWYoMT5lKXt2YXIgdD10aGlzLl9wZGYuZ2V0T3BhY2l0eUdTKHRoaXMuX29wYWNpdHkqZSwhMCk7dGhpcy5fZ3NSZXNvdXJjZXNbdC5fcmVzb3VyY2VOYW1lXT10LHRoaXMuX291dCh0Ll9yZXNvdXJjZU5hbWUsXCIgZ3NcIixRKX19LHNldEZpbGxDb2xvcjpmdW5jdGlvbihlLHQsbil7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIHJnXCIsUSl9LHNldEZpbGxPcGFjaXR5OmZ1bmN0aW9uKGUpe2lmKDE+ZSl7dmFyIHQ9dGhpcy5fcGRmLmdldE9wYWNpdHlHUyh0aGlzLl9vcGFjaXR5KmUsITEpO3RoaXMuX2dzUmVzb3VyY2VzW3QuX3Jlc291cmNlTmFtZV09dCx0aGlzLl9vdXQodC5fcmVzb3VyY2VOYW1lLFwiIGdzXCIsUSl9fSxncmFkaWVudDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscjt0aGlzLnNhdmUoKSx0aGlzLnJlY3QodC5sZWZ0LHQudG9wLHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuY2xpcCgpLGUudXNlclNwYWNlfHx0aGlzLnRyYW5zZm9ybSh0LndpZHRoLDAsMCx0LmhlaWdodCx0LmxlZnQsdC50b3ApLG49VCh0aGlzLl9wZGYsZSx0KSxpPVwiU1wiKyArK1gsdGhpcy5fc2hSZXNvdXJjZXNbaV09dGhpcy5fcGRmLmF0dGFjaChuLnNoYWRpbmcpLG4uaGFzQWxwaGEmJihyPVwiT1wiKyArK1gsdGhpcy5fZ3NSZXNvdXJjZXNbcl09dGhpcy5fcGRmLmF0dGFjaChuLm9wYWNpdHkpLHRoaXMuX291dChcIi9cIityK1wiIGdzIFwiKSksdGhpcy5fb3V0KFwiL1wiK2krXCIgc2hcIixRKSx0aGlzLnJlc3RvcmUoKX0sc2V0RGFzaFBhdHRlcm46ZnVuY3Rpb24oZSx0KXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIGRcIixRKX0sc2V0TGluZVdpZHRoOmZ1bmN0aW9uKGUpe3RoaXMuX291dChlLFwiIHdcIixRKX0sc2V0TGluZUNhcDpmdW5jdGlvbihlKXt0aGlzLl9vdXQoZSxcIiBKXCIsUSl9LHNldExpbmVKb2luOmZ1bmN0aW9uKGUpe3RoaXMuX291dChlLFwiIGpcIixRKX0sc2V0TWl0dGVyTGltaXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb3V0KGUsXCIgTVwiLFEpfSxzYXZlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dFN0YWNrLnB1c2godGhpcy5fY29udGV4dCgpKSx0aGlzLl9vdXQoXCJxXCIsUSl9LHJlc3RvcmU6ZnVuY3Rpb24oKXt0aGlzLl9vdXQoXCJRXCIsUSksdGhpcy5fY29udGV4dCh0aGlzLl9jb250ZXh0U3RhY2sucG9wKCkpfSxtb3ZlVG86ZnVuY3Rpb24oZSx0KXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIG1cIixRKX0sbGluZVRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBsXCIsUSl9LGJlemllcjpmdW5jdGlvbihlLHQsbixpLHIsbyl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFwiLGksXCIgXCIscixcIiBcIixvLFwiIGNcIixRKX0sYmV6aWVyMTpmdW5jdGlvbihlLHQsbixpKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiB5XCIsUSl9LGJlemllcjI6ZnVuY3Rpb24oZSx0LG4saSl7dGhpcy5fb3V0KGUsXCIgXCIsdCxcIiBcIixuLFwiIFwiLGksXCIgdlwiLFEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuX291dChcImhcIixRKX0scmVjdDpmdW5jdGlvbihlLHQsbixpKXt0aGlzLl9vdXQoZSxcIiBcIix0LFwiIFwiLG4sXCIgXCIsaSxcIiByZVwiLFEpfSxlbGxpcHNlOmZ1bmN0aW9uKGUsdCxuLGkpe2Z1bmN0aW9uIHIodCl7cmV0dXJuIGUrdH1mdW5jdGlvbiBvKGUpe3JldHVybiB0K2V9dmFyIGE9LjU1MjI4NDc0OTgzMDc5MzY7dGhpcy5tb3ZlVG8ocigwKSxvKGkpKSx0aGlzLmJlemllcihyKG4qYSksbyhpKSxyKG4pLG8oaSphKSxyKG4pLG8oMCkpLHRoaXMuYmV6aWVyKHIobiksbygtaSphKSxyKG4qYSksbygtaSkscigwKSxvKC1pKSksdGhpcy5iZXppZXIocigtbiphKSxvKC1pKSxyKC1uKSxvKC1pKmEpLHIoLW4pLG8oMCkpLHRoaXMuYmV6aWVyKHIoLW4pLG8oaSphKSxyKC1uKmEpLG8oaSkscigwKSxvKGkpKX0sY2lyY2xlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmVsbGlwc2UoZSx0LG4sbil9LHN0cm9rZTpmdW5jdGlvbigpe3RoaXMuX291dChcIlNcIixRKX0sbm9wOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiblwiLFEpfSxjbGlwOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiVyBuXCIsUSl9LGNsb3NlU3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwic1wiLFEpfSxmaWxsOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiZlwiLFEpfSxmaWxsU3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fb3V0KFwiQlwiLFEpfSxkcmF3SW1hZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcGRmLmdldEltYWdlKGUpO3QmJih0aGlzLl94UmVzb3VyY2VzW3QuX3Jlc291cmNlTmFtZV09dCx0aGlzLl9vdXQodC5fcmVzb3VyY2VOYW1lLFwiIERvXCIsUSkpfSxjb21tZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5zcGxpdCgvXFxyP1xcbi9nKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX291dChcIiUgXCIsZSxRKX0pfSxfY29udGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT97b3BhY2l0eTp0aGlzLl9vcGFjaXR5LG1hdHJpeDp0aGlzLl9tYXRyaXh9Oih0aGlzLl9vcGFjaXR5PWUub3BhY2l0eSx0aGlzLl9tYXRyaXg9ZS5tYXRyaXgsbil9fSxIKSwkPXtzZXJpZjpcIlRpbWVzLVJvbWFuXCIsXCJzZXJpZnxib2xkXCI6XCJUaW1lcy1Cb2xkXCIsXCJzZXJpZnxpdGFsaWNcIjpcIlRpbWVzLUl0YWxpY1wiLFwic2VyaWZ8Ym9sZHxpdGFsaWNcIjpcIlRpbWVzLUJvbGRJdGFsaWNcIixcInNhbnMtc2VyaWZcIjpcIkhlbHZldGljYVwiLFwic2Fucy1zZXJpZnxib2xkXCI6XCJIZWx2ZXRpY2EtQm9sZFwiLFwic2Fucy1zZXJpZnxpdGFsaWNcIjpcIkhlbHZldGljYS1PYmxpcXVlXCIsXCJzYW5zLXNlcmlmfGJvbGR8aXRhbGljXCI6XCJIZWx2ZXRpY2EtQm9sZE9ibGlxdWVcIixtb25vc3BhY2U6XCJDb3VyaWVyXCIsXCJtb25vc3BhY2V8Ym9sZFwiOlwiQ291cmllci1Cb2xkXCIsXCJtb25vc3BhY2V8aXRhbGljXCI6XCJDb3VyaWVyLU9ibGlxdWVcIixcIm1vbm9zcGFjZXxib2xkfGl0YWxpY1wiOlwiQ291cmllci1Cb2xkT2JsaXF1ZVwifSxZLnBkZj17RG9jdW1lbnQ6byxCaW5hcnlTdHJlYW06RCxkZWZpbmVGb250OlAscGFyc2VGb250RGVmOkUsZ2V0Rm9udFVSTDpNLGxvYWRGb250czpudCxsb2FkSW1hZ2VzOml0LFRFWFRfUkVOREVSSU5HX01PREU6e2ZpbGw6MCxzdHJva2U6MSxmaWxsQW5kU3Ryb2tlOjIsaW52aXNpYmxlOjMsZmlsbEFuZENsaXA6NCxzdHJva2VBbmRDbGlwOjUsZmlsbFN0cm9rZUNsaXA6NixjbGlwOjd9fX0odGhpcyxwYXJzZUZsb2F0KSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS10fSkubWFwKHBhcnNlRmxvYXQpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbixpO2Zvcih0aGlzLnJhdz1lLHRoaXMuc2NhbGVyVHlwZT1lLnJlYWRMb25nKCksdGhpcy50YWJsZUNvdW50PWUucmVhZFNob3J0KCksdGhpcy5zZWFyY2hSYW5nZT1lLnJlYWRTaG9ydCgpLHRoaXMuZW50cnlTZWxlY3Rvcj1lLnJlYWRTaG9ydCgpLHRoaXMucmFuZ2VTaGlmdD1lLnJlYWRTaG9ydCgpLHQ9dGhpcy50YWJsZXM9e30sbj0wO3RoaXMudGFibGVDb3VudD5uOysrbilpPXt0YWc6ZS5yZWFkU3RyaW5nKDQpLGNoZWNrc3VtOmUucmVhZExvbmcoKSxvZmZzZXQ6ZS5yZWFkTG9uZygpLGxlbmd0aDplLnJlYWRMb25nKCl9LHRbaS50YWddPWl9ZnVuY3Rpb24gcihlKXtmdW5jdGlvbiBuKGUsdCl7dGhpcy5kZWZpbml0aW9uPXQsdGhpcy5sZW5ndGg9dC5sZW5ndGgsdGhpcy5vZmZzZXQ9dC5vZmZzZXQsdGhpcy5maWxlPWUsdGhpcy5yYXdEYXRhPWUucmF3LHRoaXMucGFyc2UoZS5yYXcpfW4ucHJvdG90eXBlLnJhdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhd0RhdGEuc2xpY2UodGhpcy5vZmZzZXQsdGhpcy5sZW5ndGgpfTtmb3IodmFyIGkgaW4gZSl0KGUsaSkmJihuW2ldPW4ucHJvdG90eXBlW2ldPWVbaV0pO3JldHVybiBufWZ1bmN0aW9uIG8oKXt2YXIgZSx0PVwiXCIsbj1fK1wiXCI7Zm9yKGU9MDtuLmxlbmd0aD5lOysrZSl0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4uY2hhckNvZGVBdChlKS00OCs2NSk7cmV0dXJuKytfLHR9ZnVuY3Rpb24gYShlKXt0aGlzLmZvbnQ9ZSx0aGlzLnN1YnNldD17fSx0aGlzLnVuaWNvZGVzPXt9LHRoaXMub2dpZDJuZ2lkPXswOjB9LHRoaXMubmdpZDJvZ2lkPXswOjB9LHRoaXMubmNpZDJvZ2lkPXt9LHRoaXMubmV4dD10aGlzLmZpcnN0Q2hhcj0xLHRoaXMubmV4dEdpZD0xLHRoaXMucHNOYW1lPW8oKStcIitcIit0aGlzLmZvbnQucHNOYW1lfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbixpLHIsbyxhPXRoaXMscz1hLmNvbnRlbnRzPXcoZSk7aWYoXCJ0dGNmXCI9PXMucmVhZFN0cmluZyg0KSl7aWYoIXQpdGhyb3cgRXJyb3IoXCJNdXN0IHNwZWNpZnkgYSBuYW1lIGZvciBUVEMgZmlsZXNcIik7Zm9yKG49cy5yZWFkTG9uZygpLGk9cy5yZWFkTG9uZygpLHI9MDtpPnI7KytyKWlmKG89cy5yZWFkTG9uZygpLHMuc2F2ZUV4Y3Vyc2lvbihmdW5jdGlvbigpe3Mub2Zmc2V0KG8pLGEucGFyc2UoKX0pLGEucHNOYW1lPT10KXJldHVybjt0aHJvdyBFcnJvcihcIkZvbnQgXCIrdCtcIiBub3QgZm91bmQgaW4gY29sbGVjdGlvblwiKX1zLm9mZnNldCgwKSxhLnBhcnNlKCl9dmFyIGwsYyxkLHUsaCxwLGYsZyxtLHYsXyx5PWUua2VuZG8ucGRmLHc9eS5CaW5hcnlTdHJlYW07aS5wcm90b3R5cGU9e3JlYWRUYWJsZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMudGFibGVzW2VdO2lmKCFuKXRocm93IEVycm9yKFwiVGFibGUgXCIrZStcIiBub3QgZm91bmQgaW4gZGlyZWN0b3J5XCIpO3JldHVybiB0aGlzW2VdPW4udGFibGU9bmV3IHQodGhpcyxuKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciBuLGkscixvLGEscyxsLGMsZD1PYmplY3Qua2V5cyhlKS5sZW5ndGgsdT1NYXRoLnBvdygyLE1hdGguZmxvb3IoTWF0aC5sb2coZCkvTWF0aC5MTjIpKSxoPTE2KnUscD1NYXRoLmZsb29yKE1hdGgubG9nKHUpL01hdGguTE4yKSxmPTE2KmQtaCxnPXcoKTtnLndyaXRlTG9uZyh0aGlzLnNjYWxlclR5cGUpLGcud3JpdGVTaG9ydChkKSxnLndyaXRlU2hvcnQoaCksZy53cml0ZVNob3J0KHApLGcud3JpdGVTaG9ydChmKSxuPTE2KmQsaT1nLm9mZnNldCgpK24scj1udWxsLG89dygpO2ZvcihhIGluIGUpaWYodChlLGEpKWZvcihzPWVbYV0sZy53cml0ZVN0cmluZyhhKSxnLndyaXRlTG9uZyh0aGlzLmNoZWNrc3VtKHMpKSxnLndyaXRlTG9uZyhpKSxnLndyaXRlTG9uZyhzLmxlbmd0aCksby53cml0ZShzKSxcImhlYWRcIj09YSYmKHI9aSksaSs9cy5sZW5ndGg7aSU0OylvLndyaXRlQnl0ZSgwKSxpKys7cmV0dXJuIGcud3JpdGUoby5nZXQoKSksbD10aGlzLmNoZWNrc3VtKGcuZ2V0KCkpLGM9Mjk4MTE0NjU1NC1sLGcub2Zmc2V0KHIrOCksZy53cml0ZUxvbmcoYyksZy5nZXQoKX0sY2hlY2tzdW06ZnVuY3Rpb24oZSl7ZT13KGUpO2Zvcih2YXIgdD0wOyFlLmVvZigpOyl0Kz1lLnJlYWRMb25nKCk7cmV0dXJuIDQyOTQ5NjcyOTUmdH19LGw9cih7cGFyc2U6ZnVuY3Rpb24oZSl7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMudmVyc2lvbj1lLnJlYWRMb25nKCksdGhpcy5yZXZpc2lvbj1lLnJlYWRMb25nKCksdGhpcy5jaGVja1N1bUFkanVzdG1lbnQ9ZS5yZWFkTG9uZygpLHRoaXMubWFnaWNOdW1iZXI9ZS5yZWFkTG9uZygpLHRoaXMuZmxhZ3M9ZS5yZWFkU2hvcnQoKSx0aGlzLnVuaXRzUGVyRW09ZS5yZWFkU2hvcnQoKSx0aGlzLmNyZWF0ZWQ9ZS5yZWFkKDgpLHRoaXMubW9kaWZpZWQ9ZS5yZWFkKDgpLHRoaXMueE1pbj1lLnJlYWRTaG9ydF8oKSx0aGlzLnlNaW49ZS5yZWFkU2hvcnRfKCksdGhpcy54TWF4PWUucmVhZFNob3J0XygpLHRoaXMueU1heD1lLnJlYWRTaG9ydF8oKSx0aGlzLm1hY1N0eWxlPWUucmVhZFNob3J0KCksdGhpcy5sb3dlc3RSZWNQUEVNPWUucmVhZFNob3J0KCksdGhpcy5mb250RGlyZWN0aW9uSGludD1lLnJlYWRTaG9ydF8oKSx0aGlzLmluZGV4VG9Mb2NGb3JtYXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy5nbHlwaERhdGFGb3JtYXQ9ZS5yZWFkU2hvcnRfKCl9LHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdD13KCk7cmV0dXJuIHQud3JpdGVMb25nKHRoaXMudmVyc2lvbiksdC53cml0ZUxvbmcodGhpcy5yZXZpc2lvbiksdC53cml0ZUxvbmcoMCksdC53cml0ZUxvbmcodGhpcy5tYWdpY051bWJlciksdC53cml0ZVNob3J0KHRoaXMuZmxhZ3MpLHQud3JpdGVTaG9ydCh0aGlzLnVuaXRzUGVyRW0pLHQud3JpdGUodGhpcy5jcmVhdGVkKSx0LndyaXRlKHRoaXMubW9kaWZpZWQpLHQud3JpdGVTaG9ydF8odGhpcy54TWluKSx0LndyaXRlU2hvcnRfKHRoaXMueU1pbiksdC53cml0ZVNob3J0Xyh0aGlzLnhNYXgpLHQud3JpdGVTaG9ydF8odGhpcy55TWF4KSx0LndyaXRlU2hvcnQodGhpcy5tYWNTdHlsZSksdC53cml0ZVNob3J0KHRoaXMubG93ZXN0UmVjUFBFTSksdC53cml0ZVNob3J0Xyh0aGlzLmZvbnREaXJlY3Rpb25IaW50KSx0LndyaXRlU2hvcnRfKGUpLHQud3JpdGVTaG9ydF8odGhpcy5nbHlwaERhdGFGb3JtYXQpLHQuZ2V0KCl9fSksYz1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCk7dmFyIHQ9dGhpcy5maWxlLmhlYWQuaW5kZXhUb0xvY0Zvcm1hdDt0aGlzLm9mZnNldHM9MD09PXQ/ZS50aW1lcyh0aGlzLmxlbmd0aC8yLGZ1bmN0aW9uKCl7cmV0dXJuIDIqZS5yZWFkU2hvcnQoKX0pOmUudGltZXModGhpcy5sZW5ndGgvNCxlLnJlYWRMb25nKX0sb2Zmc2V0T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub2Zmc2V0c1tlXX0sbGVuZ3RoT2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub2Zmc2V0c1tlKzFdLXRoaXMub2Zmc2V0c1tlXX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49dygpLGk9ZVtlLmxlbmd0aC0xXT42NTUzNTtmb3IodD0wO2UubGVuZ3RoPnQ7Kyt0KWk/bi53cml0ZUxvbmcoZVt0XSk6bi53cml0ZVNob3J0KGVbdF0vMik7cmV0dXJue2Zvcm1hdDppPzE6MCx0YWJsZTpuLmdldCgpfX19KSxkPXIoe3BhcnNlOmZ1bmN0aW9uKGUpe2Uub2Zmc2V0KHRoaXMub2Zmc2V0KSx0aGlzLnZlcnNpb249ZS5yZWFkTG9uZygpLHRoaXMuYXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMuZGVzY2VudD1lLnJlYWRTaG9ydF8oKSx0aGlzLmxpbmVHYXA9ZS5yZWFkU2hvcnRfKCksdGhpcy5hZHZhbmNlV2lkdGhNYXg9ZS5yZWFkU2hvcnQoKSx0aGlzLm1pbkxlZnRTaWRlQmVhcmluZz1lLnJlYWRTaG9ydF8oKSx0aGlzLm1pblJpZ2h0U2lkZUJlYXJpbmc9ZS5yZWFkU2hvcnRfKCksdGhpcy54TWF4RXh0ZW50PWUucmVhZFNob3J0XygpLHRoaXMuY2FyZXRTbG9wZVJpc2U9ZS5yZWFkU2hvcnRfKCksdGhpcy5jYXJldFNsb3BlUnVuPWUucmVhZFNob3J0XygpLHRoaXMuY2FyZXRPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksZS5za2lwKDgpLHRoaXMubWV0cmljRGF0YUZvcm1hdD1lLnJlYWRTaG9ydF8oKSx0aGlzLm51bU9mTG9uZ0hvck1ldHJpY3M9ZS5yZWFkU2hvcnQoKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXcoKTtyZXR1cm4gdC53cml0ZUxvbmcodGhpcy52ZXJzaW9uKSx0LndyaXRlU2hvcnRfKHRoaXMuYXNjZW50KSx0LndyaXRlU2hvcnRfKHRoaXMuZGVzY2VudCksdC53cml0ZVNob3J0Xyh0aGlzLmxpbmVHYXApLHQud3JpdGVTaG9ydCh0aGlzLmFkdmFuY2VXaWR0aE1heCksdC53cml0ZVNob3J0Xyh0aGlzLm1pbkxlZnRTaWRlQmVhcmluZyksdC53cml0ZVNob3J0Xyh0aGlzLm1pblJpZ2h0U2lkZUJlYXJpbmcpLHQud3JpdGVTaG9ydF8odGhpcy54TWF4RXh0ZW50KSx0LndyaXRlU2hvcnRfKHRoaXMuY2FyZXRTbG9wZVJpc2UpLHQud3JpdGVTaG9ydF8odGhpcy5jYXJldFNsb3BlUnVuKSx0LndyaXRlU2hvcnRfKHRoaXMuY2FyZXRPZmZzZXQpLHQud3JpdGUoWzAsMCwwLDAsMCwwLDAsMF0pLHQud3JpdGVTaG9ydF8odGhpcy5tZXRyaWNEYXRhRm9ybWF0KSx0LndyaXRlU2hvcnQoZS5sZW5ndGgpLHQuZ2V0KCl9fSksdT1yKHtwYXJzZTpmdW5jdGlvbihlKXtlLm9mZnNldCh0aGlzLm9mZnNldCksdGhpcy52ZXJzaW9uPWUucmVhZExvbmcoKSx0aGlzLm51bUdseXBocz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb250b3Vycz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Q29tcG9uZW50UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnRDb250b3Vycz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Wm9uZXM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heFR3aWxpZ2h0UG9pbnRzPWUucmVhZFNob3J0KCksdGhpcy5tYXhTdG9yYWdlPWUucmVhZFNob3J0KCksdGhpcy5tYXhGdW5jdGlvbkRlZnM9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heEluc3RydWN0aW9uRGVmcz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4U3RhY2tFbGVtZW50cz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4U2l6ZU9mSW5zdHJ1Y3Rpb25zPWUucmVhZFNob3J0KCksdGhpcy5tYXhDb21wb25lbnRFbGVtZW50cz1lLnJlYWRTaG9ydCgpLHRoaXMubWF4Q29tcG9uZW50RGVwdGg9ZS5yZWFkU2hvcnQoKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXcoKTtyZXR1cm4gdC53cml0ZUxvbmcodGhpcy52ZXJzaW9uKSx0LndyaXRlU2hvcnQoZS5sZW5ndGgpLHQud3JpdGVTaG9ydCh0aGlzLm1heFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29udG91cnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heENvbXBvbmVudFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50Q29udG91cnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFpvbmVzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhUd2lsaWdodFBvaW50cyksdC53cml0ZVNob3J0KHRoaXMubWF4U3RvcmFnZSksdC53cml0ZVNob3J0KHRoaXMubWF4RnVuY3Rpb25EZWZzKSx0LndyaXRlU2hvcnQodGhpcy5tYXhJbnN0cnVjdGlvbkRlZnMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFN0YWNrRWxlbWVudHMpLHQud3JpdGVTaG9ydCh0aGlzLm1heFNpemVPZkluc3RydWN0aW9ucyksdC53cml0ZVNob3J0KHRoaXMubWF4Q29tcG9uZW50RWxlbWVudHMpLHQud3JpdGVTaG9ydCh0aGlzLm1heENvbXBvbmVudERlcHRoKSx0LmdldCgpfX0pLGg9cih7cGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2Uub2Zmc2V0KHRoaXMub2Zmc2V0KSx0PXRoaXMuZmlsZSxuPXQuaGhlYSx0aGlzLm1ldHJpY3M9ZS50aW1lcyhuLm51bU9mTG9uZ0hvck1ldHJpY3MsZnVuY3Rpb24oKXtyZXR1cm57YWR2YW5jZTplLnJlYWRTaG9ydCgpLGxzYjplLnJlYWRTaG9ydF8oKX19KSxpPXQubWF4cC5udW1HbHlwaHMtdC5oaGVhLm51bU9mTG9uZ0hvck1ldHJpY3MsdGhpcy5sZWZ0U2lkZUJlYXJpbmdzPWUudGltZXMoaSxlLnJlYWRTaG9ydF8pfSxmb3JHbHlwaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ldHJpY3Msbj10Lmxlbmd0aDtyZXR1cm4gbj5lP3RbZV06e2FkdmFuY2U6dFtuLTFdLmFkdmFuY2UsbHNiOnRoaXMubGVmdFNpZGVCZWFyaW5nc1tlLW5dfX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT13KCk7Zm9yKHQ9MDtlLmxlbmd0aD50OysrdCluPXRoaXMuZm9yR2x5cGgoZVt0XSksaS53cml0ZVNob3J0KG4uYWR2YW5jZSksaS53cml0ZVNob3J0XyhuLmxzYik7cmV0dXJuIGkuZ2V0KCl9fSkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5yYXc9ZX1mdW5jdGlvbiBuKGUpe3ZhciB0LG4scjtmb3IodGhpcy5yYXc9ZSx0PXRoaXMuZ2x5cGhJZHM9W10sbj10aGlzLmlkT2Zmc2V0cz1bXTs7KXtpZihyPWUucmVhZFNob3J0KCksbi5wdXNoKGUub2Zmc2V0KCkpLHQucHVzaChlLnJlYWRTaG9ydCgpKSwhKHImYSkpYnJlYWs7ZS5za2lwKHImaT80OjIpLHImbD9lLnNraXAoOCk6ciZzP2Uuc2tpcCg0KTpyJm8mJmUuc2tpcCgyKX19dmFyIGksbyxhLHMsbCxjO3JldHVybiBlLnByb3RvdHlwZT17Y29tcG91bmQ6ITEscmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmF3LmdldCgpfX0saT0xLG89OCxhPTMyLHM9NjQsbD0xMjgsYz0yNTYsbi5wcm90b3R5cGU9e2NvbXBvdW5kOiEwLHJlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dyh0aGlzLnJhdy5nZXQoKSk7Zm9yKHQ9MDt0aGlzLmdseXBoSWRzLmxlbmd0aD50OysrdCluPXRoaXMuZ2x5cGhJZHNbdF0saS5vZmZzZXQodGhpcy5pZE9mZnNldHNbdF0pLGkud3JpdGVTaG9ydChlW25dKTtyZXR1cm4gaS5nZXQoKX19LHIoe3BhcnNlOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZT17fX0sZ2x5cGhGb3I6ZnVuY3Rpb24oaSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHAsZixnPXRoaXMuY2FjaGU7cmV0dXJuIHQoZyxpKT9nW2ldOihyPXRoaXMuZmlsZS5sb2NhLG89ci5sZW5ndGhPZihpKSwwPT09bz9nW2ldPW51bGw6KGE9dGhpcy5yYXdEYXRhLHM9dGhpcy5vZmZzZXQrci5vZmZzZXRPZihpKSxsPXcoYS5zbGljZShzLG8pKSxjPWwucmVhZFNob3J0XygpLGQ9bC5yZWFkU2hvcnRfKCksdT1sLnJlYWRTaG9ydF8oKSxoPWwucmVhZFNob3J0XygpLHA9bC5yZWFkU2hvcnRfKCksZj1nW2ldPS0xPT1jP25ldyBuKGwpOm5ldyBlKGwpLGYubnVtYmVyT2ZDb250b3Vycz1jLGYueE1pbj1kLGYueU1pbj11LGYueE1heD1oLGYueU1heD1wLGYpKX0scmVuZGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT13KCkscz1bXTtmb3IoaT0wO3QubGVuZ3RoPmk7KytpKXI9dFtpXSxvPWVbcl0scy5wdXNoKGEub2Zmc2V0KCkpLG8mJmEud3JpdGUoby5yZW5kZXIobikpO3JldHVybiBzLnB1c2goYS5vZmZzZXQoKSkse3RhYmxlOmEuZ2V0KCksb2Zmc2V0czpzfX19KX0oKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMudGV4dD1lLHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMucGxhdGZvcm1JRD10LnBsYXRmb3JtSUQsdGhpcy5wbGF0Zm9ybVNwZWNpZmljSUQ9dC5wbGF0Zm9ybVNwZWNpZmljSUQsdGhpcy5sYW5ndWFnZUlEPXQubGFuZ3VhZ2VJRCx0aGlzLm5hbWVJRD10Lm5hbWVJRH1yZXR1cm4gcih7cGFyc2U6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzLGwsYztmb3IodC5vZmZzZXQodGhpcy5vZmZzZXQpLG49dC5yZWFkU2hvcnQoKSxpPXQucmVhZFNob3J0KCkscj10aGlzLm9mZnNldCt0LnJlYWRTaG9ydCgpLG89dC50aW1lcyhpLGZ1bmN0aW9uKCl7cmV0dXJue3BsYXRmb3JtSUQ6dC5yZWFkU2hvcnQoKSxwbGF0Zm9ybVNwZWNpZmljSUQ6dC5yZWFkU2hvcnQoKSxsYW5ndWFnZUlEOnQucmVhZFNob3J0KCksbmFtZUlEOnQucmVhZFNob3J0KCksbGVuZ3RoOnQucmVhZFNob3J0KCksb2Zmc2V0OnQucmVhZFNob3J0KCkrcn19KSxhPXRoaXMuc3RyaW5ncz17fSxzPTA7by5sZW5ndGg+czsrK3MpbD1vW3NdLHQub2Zmc2V0KGwub2Zmc2V0KSxjPXQucmVhZFN0cmluZyhsLmxlbmd0aCksYVtsLm5hbWVJRF18fChhW2wubmFtZUlEXT1bXSksYVtsLm5hbWVJRF0ucHVzaChuZXcgZShjLGwpKTt0aGlzLnBvc3RzY3JpcHRFbnRyeT1hWzZdWzBdLHRoaXMucG9zdHNjcmlwdE5hbWU9dGhpcy5wb3N0c2NyaXB0RW50cnkudGV4dC5yZXBsYWNlKC9bXlxceDIwLVxceDdGXS9nLFwiXCIpfSxyZW5kZXI6ZnVuY3Rpb24obil7dmFyIGkscixvLGEscyxsLGM9dGhpcy5zdHJpbmdzLGQ9MDtmb3IoaSBpbiBjKXQoYyxpKSYmKGQrPWNbaV0ubGVuZ3RoKTtyPXcoKSxvPXcoKSxyLndyaXRlU2hvcnQoMCksci53cml0ZVNob3J0KGQpLHIud3JpdGVTaG9ydCg2KzEyKmQpO2ZvcihpIGluIGMpaWYodChjLGkpKWZvcihhPTY9PWk/W25ldyBlKG4sdGhpcy5wb3N0c2NyaXB0RW50cnkpXTpjW2ldLHM9MDthLmxlbmd0aD5zOysrcylsPWFbc10sci53cml0ZVNob3J0KGwucGxhdGZvcm1JRCksci53cml0ZVNob3J0KGwucGxhdGZvcm1TcGVjaWZpY0lEKSxyLndyaXRlU2hvcnQobC5sYW5ndWFnZUlEKSxyLndyaXRlU2hvcnQobC5uYW1lSUQpLHIud3JpdGVTaG9ydChsLmxlbmd0aCksci53cml0ZVNob3J0KG8ub2Zmc2V0KCkpLG8ud3JpdGVTdHJpbmcobC50ZXh0KTtyZXR1cm4gci53cml0ZShvLmdldCgpKSxyLmdldCgpfX0pfSgpLGc9ZnVuY3Rpb24oKXt2YXIgZT1cIi5ub3RkZWYgLm51bGwgbm9ubWFya2luZ3JldHVybiBzcGFjZSBleGNsYW0gcXVvdGVkYmwgbnVtYmVyc2lnbiBkb2xsYXIgcGVyY2VudCBhbXBlcnNhbmQgcXVvdGVzaW5nbGUgcGFyZW5sZWZ0IHBhcmVucmlnaHQgYXN0ZXJpc2sgcGx1cyBjb21tYSBoeXBoZW4gcGVyaW9kIHNsYXNoIHplcm8gb25lIHR3byB0aHJlZSBmb3VyIGZpdmUgc2l4IHNldmVuIGVpZ2h0IG5pbmUgY29sb24gc2VtaWNvbG9uIGxlc3MgZXF1YWwgZ3JlYXRlciBxdWVzdGlvbiBhdCBBIEIgQyBEIEUgRiBHIEggSSBKIEsgTCBNIE4gTyBQIFEgUiBTIFQgVSBWIFcgWCBZIFogYnJhY2tldGxlZnQgYmFja3NsYXNoIGJyYWNrZXRyaWdodCBhc2NpaWNpcmN1bSB1bmRlcnNjb3JlIGdyYXZlIGEgYiBjIGQgZSBmIGcgaCBpIGogayBsIG0gbiBvIHAgcSByIHMgdCB1IHYgdyB4IHkgeiBicmFjZWxlZnQgYmFyIGJyYWNlcmlnaHQgYXNjaWl0aWxkZSBBZGllcmVzaXMgQXJpbmcgQ2NlZGlsbGEgRWFjdXRlIE50aWxkZSBPZGllcmVzaXMgVWRpZXJlc2lzIGFhY3V0ZSBhZ3JhdmUgYWNpcmN1bWZsZXggYWRpZXJlc2lzIGF0aWxkZSBhcmluZyBjY2VkaWxsYSBlYWN1dGUgZWdyYXZlIGVjaXJjdW1mbGV4IGVkaWVyZXNpcyBpYWN1dGUgaWdyYXZlIGljaXJjdW1mbGV4IGlkaWVyZXNpcyBudGlsZGUgb2FjdXRlIG9ncmF2ZSBvY2lyY3VtZmxleCBvZGllcmVzaXMgb3RpbGRlIHVhY3V0ZSB1Z3JhdmUgdWNpcmN1bWZsZXggdWRpZXJlc2lzIGRhZ2dlciBkZWdyZWUgY2VudCBzdGVybGluZyBzZWN0aW9uIGJ1bGxldCBwYXJhZ3JhcGggZ2VybWFuZGJscyByZWdpc3RlcmVkIGNvcHlyaWdodCB0cmFkZW1hcmsgYWN1dGUgZGllcmVzaXMgbm90ZXF1YWwgQUUgT3NsYXNoIGluZmluaXR5IHBsdXNtaW51cyBsZXNzZXF1YWwgZ3JlYXRlcmVxdWFsIHllbiBtdSBwYXJ0aWFsZGlmZiBzdW1tYXRpb24gcHJvZHVjdCBwaSBpbnRlZ3JhbCBvcmRmZW1pbmluZSBvcmRtYXNjdWxpbmUgT21lZ2EgYWUgb3NsYXNoIHF1ZXN0aW9uZG93biBleGNsYW1kb3duIGxvZ2ljYWxub3QgcmFkaWNhbCBmbG9yaW4gYXBwcm94ZXF1YWwgRGVsdGEgZ3VpbGxlbW90bGVmdCBndWlsbGVtb3RyaWdodCBlbGxpcHNpcyBub25icmVha2luZ3NwYWNlIEFncmF2ZSBBdGlsZGUgT3RpbGRlIE9FIG9lIGVuZGFzaCBlbWRhc2ggcXVvdGVkYmxsZWZ0IHF1b3RlZGJscmlnaHQgcXVvdGVsZWZ0IHF1b3RlcmlnaHQgZGl2aWRlIGxvemVuZ2UgeWRpZXJlc2lzIFlkaWVyZXNpcyBmcmFjdGlvbiBjdXJyZW5jeSBndWlsc2luZ2xsZWZ0IGd1aWxzaW5nbHJpZ2h0IGZpIGZsIGRhZ2dlcmRibCBwZXJpb2RjZW50ZXJlZCBxdW90ZXNpbmdsYmFzZSBxdW90ZWRibGJhc2UgcGVydGhvdXNhbmQgQWNpcmN1bWZsZXggRWNpcmN1bWZsZXggQWFjdXRlIEVkaWVyZXNpcyBFZ3JhdmUgSWFjdXRlIEljaXJjdW1mbGV4IElkaWVyZXNpcyBJZ3JhdmUgT2FjdXRlIE9jaXJjdW1mbGV4IGFwcGxlIE9ncmF2ZSBVYWN1dGUgVWNpcmN1bWZsZXggVWdyYXZlIGRvdGxlc3NpIGNpcmN1bWZsZXggdGlsZGUgbWFjcm9uIGJyZXZlIGRvdGFjY2VudCByaW5nIGNlZGlsbGEgaHVuZ2FydW1sYXV0IG9nb25layBjYXJvbiBMc2xhc2ggbHNsYXNoIFNjYXJvbiBzY2Fyb24gWmNhcm9uIHpjYXJvbiBicm9rZW5iYXIgRXRoIGV0aCBZYWN1dGUgeWFjdXRlIFRob3JuIHRob3JuIG1pbnVzIG11bHRpcGx5IG9uZXN1cGVyaW9yIHR3b3N1cGVyaW9yIHRocmVlc3VwZXJpb3Igb25laGFsZiBvbmVxdWFydGVyIHRocmVlcXVhcnRlcnMgZnJhbmMgR2JyZXZlIGdicmV2ZSBJZG90YWNjZW50IFNjZWRpbGxhIHNjZWRpbGxhIENhY3V0ZSBjYWN1dGUgQ2Nhcm9uIGNjYXJvbiBkY3JvYXRcIi5zcGxpdCgvXFxzKy9nKTtyZXR1cm4gcih7cGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbjtzd2l0Y2goZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMuZm9ybWF0PWUucmVhZExvbmcoKSx0aGlzLml0YWxpY0FuZ2xlPWUucmVhZEZpeGVkXygpLHRoaXMudW5kZXJsaW5lUG9zaXRpb249ZS5yZWFkU2hvcnRfKCksdGhpcy51bmRlcmxpbmVUaGlja25lc3M9ZS5yZWFkU2hvcnRfKCksdGhpcy5pc0ZpeGVkUGl0Y2g9ZS5yZWFkTG9uZygpLHRoaXMubWluTWVtVHlwZTQyPWUucmVhZExvbmcoKSx0aGlzLm1heE1lbVR5cGU0Mj1lLnJlYWRMb25nKCksdGhpcy5taW5NZW1UeXBlMT1lLnJlYWRMb25nKCksdGhpcy5tYXhNZW1UeXBlMT1lLnJlYWRMb25nKCksdGhpcy5mb3JtYXQpe2Nhc2UgNjU1MzY6Y2FzZSAxOTY2MDg6YnJlYWs7Y2FzZSAxMzEwNzI6Zm9yKHQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmdseXBoTmFtZUluZGV4PWUudGltZXModCxlLnJlYWRTaG9ydCksdGhpcy5uYW1lcz1bXSxuPXRoaXMub2Zmc2V0K3RoaXMubGVuZ3RoO2Uub2Zmc2V0KCk8bjspdGhpcy5uYW1lcy5wdXNoKGUucmVhZFN0cmluZyhlLnJlYWRCeXRlKCkpKTticmVhaztjYXNlIDE1MTU1Mjp0PWUucmVhZFNob3J0KCksdGhpcy5vZmZzZXRzPWUucmVhZCh0KTticmVhaztjYXNlIDI2MjE0NDp0aGlzLm1hcD1lLnRpbWVzKHRoaXMuZmlsZS5tYXhwLm51bUdseXBocyxlLnJlYWRTaG9ydCl9fSxnbHlwaEZvcjpmdW5jdGlvbih0KXtzd2l0Y2godGhpcy5mb3JtYXQpe2Nhc2UgNjU1MzY6cmV0dXJuIGVbdF18fFwiLm5vdGRlZlwiO2Nhc2UgMTMxMDcyOnZhciBuPXRoaXMuZ2x5cGhOYW1lSW5kZXhbdF07cmV0dXJuIGUubGVuZ3RoPm4/ZVtuXTp0aGlzLm5hbWVzW24tZS5sZW5ndGhdfHxcIi5ub3RkZWZcIjtjYXNlIDE1MTU1MjpjYXNlIDE5NjYwODpyZXR1cm5cIi5ub3RkZWZcIjtjYXNlIDI2MjE0NDpyZXR1cm4gdGhpcy5tYXBbdF18fDY1NTM1fX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsO2lmKDE5NjYwOD09dGhpcy5mb3JtYXQpcmV0dXJuIHRoaXMucmF3KCk7Zm9yKG49dyh0aGlzLnJhd0RhdGEuc2xpY2UodGhpcy5vZmZzZXQsMzIpKSxuLndyaXRlTG9uZygxMzEwNzIpLG4ub2Zmc2V0KDMyKSxpPVtdLHI9W10sbz0wO3QubGVuZ3RoPm87KytvKWE9dFtvXSxzPXRoaXMuZ2x5cGhGb3IoYSksbD1lLmluZGV4T2YocyksbD49MD9pLnB1c2gobCk6KGkucHVzaChlLmxlbmd0aCtyLmxlbmd0aCksci5wdXNoKHMpKTtmb3Iobi53cml0ZVNob3J0KHQubGVuZ3RoKSxvPTA7aS5sZW5ndGg+bzsrK28pbi53cml0ZVNob3J0KGlbb10pO2ZvcihvPTA7ci5sZW5ndGg+bzsrK28pbi53cml0ZUJ5dGUocltvXS5sZW5ndGgpLG4ud3JpdGVTdHJpbmcocltvXSk7cmV0dXJuIG4uZ2V0KCl9fSl9KCksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbj10aGlzO24ucGxhdGZvcm1JRD1lLnJlYWRTaG9ydCgpLG4ucGxhdGZvcm1TcGVjaWZpY0lEPWUucmVhZFNob3J0KCksbi5vZmZzZXQ9dCtlLnJlYWRMb25nKCksZS5zYXZlRXhjdXJzaW9uKGZ1bmN0aW9uKCl7dmFyIHQsaSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY7c3dpdGNoKGUub2Zmc2V0KG4ub2Zmc2V0KSxuLmZvcm1hdD1lLnJlYWRTaG9ydCgpLG4ubGVuZ3RoPWUucmVhZFNob3J0KCksbi5sYW5ndWFnZT1lLnJlYWRTaG9ydCgpLG4uaXNVbmljb2RlPTM9PW4ucGxhdGZvcm1JRCYmMT09bi5wbGF0Zm9ybVNwZWNpZmljSUQmJjQ9PW4uZm9ybWF0fHwwPT09bi5wbGF0Zm9ybUlEJiY0PT1uLmZvcm1hdCxuLmNvZGVNYXA9e30sbi5mb3JtYXQpe2Nhc2UgMDpmb3IodD0wOzI1Nj50OysrdCluLmNvZGVNYXBbdF09ZS5yZWFkQnl0ZSgpO2JyZWFrO2Nhc2UgNDpmb3IoaT1lLnJlYWRTaG9ydCgpLzIsZS5za2lwKDYpLHI9ZS50aW1lcyhpLGUucmVhZFNob3J0KSxlLnNraXAoMiksbz1lLnRpbWVzKGksZS5yZWFkU2hvcnQpLGE9ZS50aW1lcyhpLGUucmVhZFNob3J0Xykscz1lLnRpbWVzKGksZS5yZWFkU2hvcnQpLGw9KG4ubGVuZ3RoK24ub2Zmc2V0LWUub2Zmc2V0KCkpLzIsYz1lLnRpbWVzKGwsZS5yZWFkU2hvcnQpLHQ9MDtpPnQ7Kyt0KWZvcihkPW9bdF0sdT1yW3RdLGg9ZDt1Pj1oOysraCkwPT09c1t0XT9wPWgrYVt0XTooZj1zW3RdLzItKGktdCkrKGgtZCkscD1jW2ZdfHwwLDAhPT1wJiYocCs9YVt0XSkpLG4uY29kZU1hcFtoXT02NTUzNSZwfX0pfWZ1bmN0aW9uIHQoZSx0KXtmdW5jdGlvbiBpKG4pe3JldHVybiB0W2Vbbl1dfXZhciByLG8sYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsXyx5LGIsaz1uKGUpLHg9W10sQz1bXSxTPW51bGwsVD1udWxsO2ZvcihyPTA7ay5sZW5ndGg+cjsrK3Ipbz1rW3JdLGE9aShvKSxzPWEtbywobnVsbD09U3x8cyE9PVQpJiYoUyYmQy5wdXNoKFMpLHgucHVzaChvKSxUPXMpLFM9bztmb3IoUyYmQy5wdXNoKFMpLEMucHVzaCg2NTUzNSkseC5wdXNoKDY1NTM1KSxsPXgubGVuZ3RoLGM9MipsLGQ9MipNYXRoLnBvdygyLE1hdGguZmxvb3IoTWF0aC5sb2cobCkvTWF0aC5MTjIpKSx1PU1hdGgubG9nKGQvMikvTWF0aC5MTjIsaD1jLWQscD1bXSxmPVtdLGc9W10scj0wO2w+cjsrK3Ipe2lmKG09eFtyXSx2PUNbcl0sNjU1MzU9PW0pe3AucHVzaCgwKSxmLnB1c2goMCk7YnJlYWt9aWYoXz1pKG0pLG0tXz49MzI3NjgpZm9yKHAucHVzaCgwKSxmLnB1c2goMiooZy5sZW5ndGgrbC1yKSkseT1tO3Y+PXk7Kyt5KWcucHVzaChpKHkpKTtlbHNlIHAucHVzaChfLW0pLGYucHVzaCgwKX1yZXR1cm4gYj13KCksYi53cml0ZVNob3J0KDMpLGIud3JpdGVTaG9ydCgxKSxiLndyaXRlTG9uZygxMiksYi53cml0ZVNob3J0KDQpLGIud3JpdGVTaG9ydCgxNis4KmwrMipnLmxlbmd0aCksYi53cml0ZVNob3J0KDApLGIud3JpdGVTaG9ydChjKSxiLndyaXRlU2hvcnQoZCksYi53cml0ZVNob3J0KHUpLGIud3JpdGVTaG9ydChoKSxDLmZvckVhY2goYi53cml0ZVNob3J0KSxiLndyaXRlU2hvcnQoMCkseC5mb3JFYWNoKGIud3JpdGVTaG9ydCkscC5mb3JFYWNoKGIud3JpdGVTaG9ydF8pLGYuZm9yRWFjaChiLndyaXRlU2hvcnQpLGcuZm9yRWFjaChiLndyaXRlU2hvcnQpLGIuZ2V0KCl9cmV0dXJuIHIoe3BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkub2Zmc2V0O3Qub2Zmc2V0KHIpLGkudmVyc2lvbj10LnJlYWRTaG9ydCgpLG49dC5yZWFkU2hvcnQoKSxpLnVuaWNvZGVFbnRyeT1udWxsLGkudGFibGVzPXQudGltZXMobixmdW5jdGlvbigpe3ZhciBuPW5ldyBlKHQscik7cmV0dXJuIG4uaXNVbmljb2RlJiYoaS51bmljb2RlRW50cnk9biksbn0pfSxyZW5kZXI6ZnVuY3Rpb24oZSxuKXt2YXIgaT13KCk7cmV0dXJuIGkud3JpdGVTaG9ydCgwKSxpLndyaXRlU2hvcnQoMSksaS53cml0ZSh0KGUsbikpLGkuZ2V0KCl9LGdldFVuaWNvZGVFbnRyeTpmdW5jdGlvbigpe2lmKCF0aGlzLnVuaWNvZGVFbnRyeSl0aHJvdyBFcnJvcihcIkZvbnQgZG9lc24ndCBoYXZlIGFuIFVuaWNvZGUgZW5jb2RpbmdcIik7cmV0dXJuIHRoaXMudW5pY29kZUVudHJ5fX0pfSgpLHY9cih7cGFyc2U6ZnVuY3Rpb24oZSl7ZS5vZmZzZXQodGhpcy5vZmZzZXQpLHRoaXMudmVyc2lvbj1lLnJlYWRTaG9ydCgpLHRoaXMuYXZlcmFnZUNoYXJXaWR0aD1lLnJlYWRTaG9ydF8oKSx0aGlzLndlaWdodENsYXNzPWUucmVhZFNob3J0KCksdGhpcy53aWR0aENsYXNzPWUucmVhZFNob3J0KCksdGhpcy50eXBlPWUucmVhZFNob3J0KCksdGhpcy55U3Vic2NyaXB0WFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3Vic2NyaXB0WVNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3Vic2NyaXB0WE9mZnNldD1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdWJzY3JpcHRZT2Zmc2V0PWUucmVhZFNob3J0XygpLHRoaXMueVN1cGVyc2NyaXB0WFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3VwZXJzY3JpcHRZU2l6ZT1lLnJlYWRTaG9ydF8oKSx0aGlzLnlTdXBlcnNjcmlwdFhPZmZzZXQ9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3VwZXJzY3JpcHRZT2Zmc2V0PWUucmVhZFNob3J0XygpLHRoaXMueVN0cmlrZW91dFNpemU9ZS5yZWFkU2hvcnRfKCksdGhpcy55U3RyaWtlb3V0UG9zaXRpb249ZS5yZWFkU2hvcnRfKCksdGhpcy5mYW1pbHlDbGFzcz1lLnJlYWRTaG9ydF8oKSx0aGlzLnBhbm9zZT1lLnRpbWVzKDEwLGUucmVhZEJ5dGUpLHRoaXMuY2hhclJhbmdlPWUudGltZXMoNCxlLnJlYWRMb25nKSx0aGlzLnZlbmRvcklEPWUucmVhZFN0cmluZyg0KSx0aGlzLnNlbGVjdGlvbj1lLnJlYWRTaG9ydCgpLHRoaXMuZmlyc3RDaGFySW5kZXg9ZS5yZWFkU2hvcnQoKSx0aGlzLmxhc3RDaGFySW5kZXg9ZS5yZWFkU2hvcnQoKSx0aGlzLnZlcnNpb24+MCYmKHRoaXMuYXNjZW50PWUucmVhZFNob3J0XygpLHRoaXMuZGVzY2VudD1lLnJlYWRTaG9ydF8oKSx0aGlzLmxpbmVHYXA9ZS5yZWFkU2hvcnRfKCksdGhpcy53aW5Bc2NlbnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLndpbkRlc2NlbnQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmNvZGVQYWdlUmFuZ2U9ZS50aW1lcygyLGUucmVhZExvbmcpLHRoaXMudmVyc2lvbj4xJiYodGhpcy54SGVpZ2h0PWUucmVhZFNob3J0KCksdGhpcy5jYXBIZWlnaHQ9ZS5yZWFkU2hvcnQoKSx0aGlzLmRlZmF1bHRDaGFyPWUucmVhZFNob3J0KCksdGhpcy5icmVha0NoYXI9ZS5yZWFkU2hvcnQoKSx0aGlzLm1heENvbnRleHQ9ZS5yZWFkU2hvcnQoKSkpfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYXcoKX19KSxfPTFlNSxhLnByb3RvdHlwZT17dXNlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2ZvcihuPVwiXCIsaT0wO2UubGVuZ3RoPmk7KytpKXQ9dGhpcy51c2UoZS5jaGFyQ29kZUF0KGkpKSxuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHQpO3JldHVybiBufXJldHVybiB0PXRoaXMudW5pY29kZXNbZV0sdHx8KHQ9dGhpcy5uZXh0KyssdGhpcy5zdWJzZXRbdF09ZSx0aGlzLnVuaWNvZGVzW2VdPXQscj10aGlzLmZvbnQuY21hcC5nZXRVbmljb2RlRW50cnkoKS5jb2RlTWFwW2VdLHImJih0aGlzLm5jaWQyb2dpZFt0XT1yLG51bGw9PXRoaXMub2dpZDJuZ2lkW3JdJiYobz10aGlzLm5leHRHaWQrKyx0aGlzLm9naWQybmdpZFtyXT1vLHRoaXMubmdpZDJvZ2lkW29dPXIpKSksdH0sZW5jb2RlVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy51c2UoZSl9LGdseXBoSWRzOmZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcy5vZ2lkMm5naWQpfSxnbHlwaHNGb3I6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7Zm9yKHR8fCh0PXt9KSxuPTA7ZS5sZW5ndGg+bjsrK24paT1lW25dLHRbaV18fChyPXRbaV09dGhpcy5mb250LmdseWYuZ2x5cGhGb3IoaSksciYmci5jb21wb3VuZCYmdGhpcy5nbHlwaHNGb3Ioci5nbHlwaElkcyx0KSk7cmV0dXJuIHR9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBlLGkscixvLGEscyxsLGMsZD10aGlzLmdseXBoc0Zvcih0aGlzLmdseXBoSWRzKCkpO2ZvcihlIGluIGQpdChkLGUpJiYoZT1wYXJzZUludChlLDEwKSxudWxsPT10aGlzLm9naWQybmdpZFtlXSYmKGk9dGhpcy5uZXh0R2lkKyssdGhpcy5vZ2lkMm5naWRbZV09aSx0aGlzLm5naWQyb2dpZFtpXT1lKSk7cmV0dXJuIHI9bih0aGlzLm5naWQyb2dpZCksbz1yLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5uZ2lkMm9naWRbZV19LHRoaXMpLGE9dGhpcy5mb250LHM9YS5nbHlmLnJlbmRlcihkLG8sdGhpcy5vZ2lkMm5naWQpLGw9YS5sb2NhLnJlbmRlcihzLm9mZnNldHMpLHRoaXMubGFzdENoYXI9dGhpcy5uZXh0LTEsYz17Y21hcDptLnJlbmRlcih0aGlzLm5jaWQyb2dpZCx0aGlzLm9naWQybmdpZCksZ2x5ZjpzLnRhYmxlLGxvY2E6bC50YWJsZSxobXR4OmEuaG10eC5yZW5kZXIobyksaGhlYTphLmhoZWEucmVuZGVyKG8pLG1heHA6YS5tYXhwLnJlbmRlcihvKSxwb3N0OmEucG9zdC5yZW5kZXIobyksbmFtZTphLm5hbWUucmVuZGVyKHRoaXMucHNOYW1lKSxoZWFkOmEuaGVhZC5yZW5kZXIobC5mb3JtYXQpLFwiT1MvMlwiOmEub3MyLnJlbmRlcigpfSx0aGlzLmZvbnQuZGlyZWN0b3J5LnJlbmRlcihjKX0sY2lkVG9HaWRNYXA6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT13KCkscj0wO2ZvcihlPXRoaXMuZmlyc3RDaGFyO3RoaXMubmV4dD5lOysrZSl7Zm9yKDtlPnI7KWkud3JpdGVTaG9ydCgwKSxyKys7dD10aGlzLm5jaWQyb2dpZFtlXSx0PyhuPXRoaXMub2dpZDJuZ2lkW3RdLGkud3JpdGVTaG9ydChuKSk6aS53cml0ZVNob3J0KDApLHIrK31yZXR1cm4gaS5nZXQoKX19LHMucHJvdG90eXBlPXtwYXJzZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGlyZWN0b3J5PW5ldyBpKHRoaXMuY29udGVudHMpO3RoaXMuaGVhZD1lLnJlYWRUYWJsZShcImhlYWRcIixsKSx0aGlzLmxvY2E9ZS5yZWFkVGFibGUoXCJsb2NhXCIsYyksdGhpcy5oaGVhPWUucmVhZFRhYmxlKFwiaGhlYVwiLGQpLHRoaXMubWF4cD1lLnJlYWRUYWJsZShcIm1heHBcIix1KSx0aGlzLmhtdHg9ZS5yZWFkVGFibGUoXCJobXR4XCIsaCksdGhpcy5nbHlmPWUucmVhZFRhYmxlKFwiZ2x5ZlwiLHApLHRoaXMubmFtZT1lLnJlYWRUYWJsZShcIm5hbWVcIixmKSx0aGlzLnBvc3Q9ZS5yZWFkVGFibGUoXCJwb3N0XCIsZyksdGhpcy5jbWFwPWUucmVhZFRhYmxlKFwiY21hcFwiLG0pLHRoaXMub3MyPWUucmVhZFRhYmxlKFwiT1MvMlwiLHYpLHRoaXMucHNOYW1lPXRoaXMubmFtZS5wb3N0c2NyaXB0TmFtZSx0aGlzLmFzY2VudD10aGlzLm9zMi5hc2NlbnR8fHRoaXMuaGhlYS5hc2NlbnQsdGhpcy5kZXNjZW50PXRoaXMub3MyLmRlc2NlbnR8fHRoaXMuaGhlYS5kZXNjZW50LHRoaXMubGluZUdhcD10aGlzLm9zMi5saW5lR2FwfHx0aGlzLmhoZWEubGluZUdhcCx0aGlzLnNjYWxlPTFlMy90aGlzLmhlYWQudW5pdHNQZXJFbX0sd2lkdGhPZkdseXBoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhtdHguZm9yR2x5cGgoZSkuYWR2YW5jZSp0aGlzLnNjYWxlfSxtYWtlU3Vic2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBhKHRoaXMpfX0seS5UVEZGb250PXN9KHRoaXMpLGZ1bmN0aW9uKGUpe2UuUERGTWl4aW49e2V4dGVuZDpmdW5jdGlvbihlKXtlLmV2ZW50cy5wdXNoKFwicGRmRXhwb3J0XCIpLGUub3B0aW9ucy5wZGY9dGhpcy5vcHRpb25zLGUuc2F2ZUFzUERGPXRoaXMuc2F2ZUFzUERGfSxvcHRpb25zOntmaWxlTmFtZTpcIkV4cG9ydC5wZGZcIixwcm94eVVSTDpcIlwiLHBhcGVyU2l6ZTpcImF1dG9cIixsYW5kc2NhcGU6ITEsbWFyZ2luOm51bGwsdGl0bGU6bnVsbCxhdXRob3I6bnVsbCxzdWJqZWN0Om51bGwsa2V5d29yZHM6bnVsbCxjcmVhdG9yOlwiS2VuZG8gVUkgUERGIEdlbmVyYXRvclwiLGRhdGU6bnVsbH0sc2F2ZUFzUERGOmZ1bmN0aW9uKCl7aWYoIXRoaXMudHJpZ2dlcihcInBkZkV4cG9ydFwiKSl7dmFyIHQ9dGhpcy5vcHRpb25zLnBkZjtcbmUuZHJhd2luZy5kcmF3RE9NKHRoaXMud3JhcHBlclswXSkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gZS5kcmF3aW5nLmV4cG9ydFBERihuLHQpfSkuZG9uZShmdW5jdGlvbihuKXtlLnNhdmVBcyh7ZGF0YVVSSTpuLGZpbGVOYW1lOnQuZmlsZU5hbWUscHJveHlVUkw6dC5wcm94eVVSTCxmb3JjZVByb3h5OnQuZm9yY2VQcm94eX0pfSl9fX19KGtlbmRvKSxmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXtpZighZS5wZGYpdGhyb3cgRXJyb3IoXCJrZW5kby5wZGYuanMgaXMgbm90IGxvYWRlZFwiKTtyZXR1cm4gZS5wZGZ9ZnVuY3Rpb24gaShlLHQpe2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZC5wZGYmJm51bGwhPWQucGRmW2VdP2QucGRmW2VdOnR9ZnVuY3Rpb24gcigpe3ZhciByLGEscyxjLGQsdSxwOy0tbz4wfHwocj1pKFwicGFwZXJTaXplXCIsXCJhdXRvXCIpLGE9ITEsXCJhdXRvXCI9PXImJihoPyhzPWguZ2V0U2l6ZSgpLHI9W3Mud2lkdGgscy5oZWlnaHRdLGE9ITAsYz1oLmdldE9yaWdpbigpLGQ9bmV3IEQuR3JvdXAsZC50cmFuc2Zvcm0obmV3IEEuTWF0cml4KDEsMCwwLDEsLWMueCwtYy55KSksZC5hcHBlbmQoZSksZT1kKTpyPVwiQTRcIiksdT1uZXcobigpLkRvY3VtZW50KSh7cGFwZXJTaXplOnIsbGFuZHNjYXBlOmkoXCJsYW5kc2NhcGVcIiwhMSksbWFyZ2luOmkoXCJtYXJnaW5cIiksYWRkTWFyZ2luOmEsdGl0bGU6aShcInRpdGxlXCIpLGF1dGhvcjppKFwiYXV0aG9yXCIpLHN1YmplY3Q6aShcInN1YmplY3RcIiksa2V5d29yZHM6aShcImtleXdvcmRzXCIpLGNyZWF0b3I6aShcImNyZWF0b3JcIiksZGF0ZTppKFwiZGF0ZVwiKX0pLHA9dS5hZGRQYWdlKCksbChlLHAsdSksdCh1LnJlbmRlcigpLHUscCkpfXZhciBvLGE9W10sYz1bXSxkPWUub3B0aW9ucyx1PVQoZSksaD11LmJib3g7ZT11LnJvb3QsZS50cmF2ZXJzZShmdW5jdGlvbihlKXtzKHtJbWFnZTpmdW5jdGlvbihlKXtjLmluZGV4T2YoZS5zcmMoKSk8MCYmYy5wdXNoKGUuc3JjKCkpfSxUZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PW4oKS5wYXJzZUZvbnREZWYoZS5vcHRpb25zLmZvbnQpLGk9bigpLmdldEZvbnRVUkwodCk7YS5pbmRleE9mKGkpPDAmJmEucHVzaChpKX19LGUpfSksbz0yLG4oKS5sb2FkRm9udHMoYSxyKSxuKCkubG9hZEltYWdlcyhjLHIpfWZ1bmN0aW9uIHIoZSx0KXtpKGUsZnVuY3Rpb24oZSl7dChcImRhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCxcIitlLmJhc2U2NCgpKX0pfWZ1bmN0aW9uIG8oZSx0KXtpKGUsZnVuY3Rpb24oZSl7dChuZXcgQmxvYihbZS5nZXQoKV0se3R5cGU6XCJhcHBsaWNhdGlvbi9wZGZcIn0pKX0pfWZ1bmN0aW9uIGEodCxuLGksYSl7d2luZG93LkJsb2ImJiFlLnN1cHBvcnQuYnJvd3Nlci5zYWZhcmk/byh0LGZ1bmN0aW9uKHQpe2Uuc2F2ZUFzKHtkYXRhVVJJOnQsZmlsZU5hbWU6bn0pLGEmJmEodCl9KTpyKHQsZnVuY3Rpb24odCl7ZS5zYXZlQXMoe2RhdGFVUkk6dCxmaWxlTmFtZTpuLHByb3h5VVJMOml9KSxhJiZhKHQpfSl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPWVbdC5ub2RlVHlwZV07cmV0dXJuIG4/bi5jYWxsLmFwcGx5KG4sYXJndW1lbnRzKTp0fWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciBpLHIsbztlLkRFQlVHJiZ0LmNvbW1lbnQoZS5ERUJVRyksaT1lLnRyYW5zZm9ybSgpLHI9ZS5vcGFjaXR5KCksdC5zYXZlKCksbnVsbCE9ciYmMT5yJiZ0LnNldE9wYWNpdHkociksYyhlLHQsbiksZChlLHQsbiksdShlLHQsbiksaSYmKG89aS5tYXRyaXgoKSx0LnRyYW5zZm9ybShvLmEsby5iLG8uYyxvLmQsby5lLG8uZikpLHMoe1BhdGg6dixNdWx0aVBhdGg6XyxDaXJjbGU6eSxBcmM6dyxUZXh0OmIsSW1hZ2U6eCxHcm91cDprfSxlLHQsbiksdC5yZXN0b3JlKCl9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuLGkscixvLGEscyxsPWUuc3Ryb2tlJiZlLnN0cm9rZSgpO2lmKGwpe2lmKG49bC5jb2xvcil7aWYobj1TKG4pLG51bGw9PW4pcmV0dXJuO3Quc2V0U3Ryb2tlQ29sb3Iobi5yLG4uZyxuLmIpLDEhPW4uYSYmdC5zZXRTdHJva2VPcGFjaXR5KG4uYSl9aWYoaT1sLndpZHRoLG51bGwhPWkpe2lmKDA9PT1pKXJldHVybjt0LnNldExpbmVXaWR0aChpKX1yPWwuZGFzaFR5cGUsciYmdC5zZXREYXNoUGF0dGVybihFW3JdLDApLG89bC5saW5lQ2FwLG8mJnQuc2V0TGluZUNhcChNW29dKSxhPWwubGluZUpvaW4sYSYmdC5zZXRMaW5lSm9pbihQW2FdKSxzPWwub3BhY2l0eSxudWxsIT1zJiZ0LnNldFN0cm9rZU9wYWNpdHkocyl9fWZ1bmN0aW9uIGQoZSx0KXt2YXIgbixpLHI9ZS5maWxsJiZlLmZpbGwoKTtpZihyJiYhKHIgaW5zdGFuY2VvZiBELkdyYWRpZW50KSl7aWYobj1yLmNvbG9yKXtpZihuPVMobiksbnVsbD09bilyZXR1cm47dC5zZXRGaWxsQ29sb3Iobi5yLG4uZyxuLmIpLDEhPW4uYSYmdC5zZXRGaWxsT3BhY2l0eShuLmEpfWk9ci5vcGFjaXR5LG51bGwhPWkmJnQuc2V0RmlsbE9wYWNpdHkoaSl9fWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciBpPWUuY2xpcCgpO2kmJihtKGksdCxuKSx0LmNsaXAoKSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZSYmKGUgaW5zdGFuY2VvZiBELkdyYWRpZW50fHxlLmNvbG9yJiYhL14obm9uZXx0cmFuc3BhcmVudCkkL2kudGVzdChlLmNvbG9yKSYmKG51bGw9PWUud2lkdGh8fGUud2lkdGg+MCkmJihudWxsPT1lLm9wYWNpdHl8fGUub3BhY2l0eT4wKSl9ZnVuY3Rpb24gcChlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsZD1lLmZpbGwoKTtyZXR1cm4gZCBpbnN0YW5jZW9mIEQuR3JhZGllbnQ/KGk/dC5zdHJva2UoKTp0Lm5vcCgpLGQgaW5zdGFuY2VvZiBELkxpbmVhckdyYWRpZW50PyhyPXt4OmQuc3RhcnQoKS54LHk6ZC5zdGFydCgpLnl9LG89e3g6ZC5lbmQoKS54LHk6ZC5lbmQoKS55fSxhPXt0eXBlOlwibGluZWFyXCIsc3RhcnQ6cixlbmQ6byx1c2VyU3BhY2U6ZC51c2VyU3BhY2UoKSxzdG9wczpkLnN0b3BzLmVsZW1lbnRzKCkubWFwKGZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5vZmZzZXQoKTtyZXR1cm4gbj0vJSQvLnRlc3Qobik/cGFyc2VGbG9hdChuKS8xMDA6cGFyc2VGbG9hdChuKSx0PVMoZS5jb2xvcigpKSx0LmEqPWUub3BhY2l0eSgpLHtvZmZzZXQ6bixjb2xvcjp0fX0pfSxzPWUucmF3QkJveCgpLGw9cy50b3BMZWZ0KCksYz1zLmdldFNpemUoKSxzPXtsZWZ0OmwueCx0b3A6bC55LHdpZHRoOmMud2lkdGgsaGVpZ2h0OmMuaGVpZ2h0fSx0LmdyYWRpZW50KGEscyksITApOnZvaWQod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLmxvZyYmd2luZG93LmNvbnNvbGUubG9nKFwiUmFkaWFsIGdyYWRpZW50cyBhcmUgbm90IHlldCBzdXBwb3J0ZWQgaW4gUERGIG91dHB1dC5cIikpKTp2b2lkIDB9ZnVuY3Rpb24gZihlLHQsbil7aChlLmZpbGwoKSkmJmgoZS5zdHJva2UoKSk/cChlLHQsbiwhMCl8fHQuZmlsbFN0cm9rZSgpOmgoZS5maWxsKCkpP3AoZSx0LG4sITEpfHx0LmZpbGwoKTpoKGUuc3Ryb2tlKCkpP3Quc3Ryb2tlKCk6dC5ub3AoKX1mdW5jdGlvbiBnKGUsdCl7dmFyIG4saSxyLG89ZS5zZWdtZW50cztpZig0PT1vLmxlbmd0aCYmZS5vcHRpb25zLmNsb3NlZCl7Zm9yKG49W10saT0wO28ubGVuZ3RoPmk7KytpKXtpZihvW2ldLmNvbnRyb2xJbigpKXJldHVybiExO25baV09b1tpXS5hbmNob3IoKX1pZihyPW5bMF0ueT09blsxXS55JiZuWzFdLng9PW5bMl0ueCYmblsyXS55PT1uWzNdLnkmJm5bM10ueD09blswXS54fHxuWzBdLng9PW5bMV0ueCYmblsxXS55PT1uWzJdLnkmJm5bMl0ueD09blszXS54JiZuWzNdLnk9PW5bMF0ueSlyZXR1cm4gdC5yZWN0KG5bMF0ueCxuWzBdLnksblsyXS54LW5bMF0ueCxuWzJdLnktblswXS55KSwhMH19ZnVuY3Rpb24gbShlLHQsbil7dmFyIGkscixvLGEscyxsLGM9ZS5zZWdtZW50cztpZigwIT09Yy5sZW5ndGgmJiFnKGUsdCxuKSl7Zm9yKHI9MDtjLmxlbmd0aD5yOysrcilvPWNbcl0sYT1vLmFuY2hvcigpLGk/KHM9aS5jb250cm9sT3V0KCksbD1vLmNvbnRyb2xJbigpLHMmJmw/dC5iZXppZXIocy54LHMueSxsLngsbC55LGEueCxhLnkpOnQubGluZVRvKGEueCxhLnkpKTp0Lm1vdmVUbyhhLngsYS55KSxpPW87ZS5vcHRpb25zLmNsb3NlZCYmdC5jbG9zZSgpfX1mdW5jdGlvbiB2KGUsdCxuKXttKGUsdCxuKSxmKGUsdCxuKX1mdW5jdGlvbiBfKGUsdCxuKXt2YXIgaSxyPWUucGF0aHM7Zm9yKGk9MDtyLmxlbmd0aD5pOysraSltKHJbaV0sdCxuKTtmKGUsdCxuKX1mdW5jdGlvbiB5KGUsdCxuKXt2YXIgaT1lLmdlb21ldHJ5KCk7dC5jaXJjbGUoaS5jZW50ZXIueCxpLmNlbnRlci55LGkucmFkaXVzKSxmKGUsdCxuKX1mdW5jdGlvbiB3KGUsdCxuKXt2YXIgaSxyPWUuZ2VvbWV0cnkoKS5jdXJ2ZVBvaW50cygpO2Zvcih0Lm1vdmVUbyhyWzBdLngsclswXS55KSxpPTE7ci5sZW5ndGg+aTspdC5iZXppZXIocltpXS54LHJbaSsrXS55LHJbaV0ueCxyW2krK10ueSxyW2ldLngscltpKytdLnkpO2YoZSx0LG4pfWZ1bmN0aW9uIGIoZSx0KXt2YXIgaSxyPW4oKS5wYXJzZUZvbnREZWYoZS5vcHRpb25zLmZvbnQpLG89ZS5fcG9zaXRpb247ZS5maWxsKCkmJmUuc3Ryb2tlKCk/aT1uKCkuVEVYVF9SRU5ERVJJTkdfTU9ERS5maWxsQW5kU3Ryb2tlOmUuZmlsbCgpP2k9bigpLlRFWFRfUkVOREVSSU5HX01PREUuZmlsbDplLnN0cm9rZSgpJiYoaT1uKCkuVEVYVF9SRU5ERVJJTkdfTU9ERS5zdHJva2UpLHQudHJhbnNmb3JtKDEsMCwwLC0xLG8ueCxvLnkrci5mb250U2l6ZSksdC5iZWdpblRleHQoKSx0LnNldEZvbnQobigpLmdldEZvbnRVUkwociksci5mb250U2l6ZSksdC5zZXRUZXh0UmVuZGVyaW5nTW9kZShpKSx0LnNob3dUZXh0KGUuY29udGVudCgpKSx0LmVuZFRleHQoKX1mdW5jdGlvbiBrKGUsdCxuKXt2YXIgaSxyPWUuY2hpbGRyZW47Zm9yKGk9MDtyLmxlbmd0aD5pOysraSlsKHJbaV0sdCxuKX1mdW5jdGlvbiB4KGUsdCl7dmFyIG49ZS5zcmMoKSxpPWUucmVjdCgpLHI9aS5nZXRPcmlnaW4oKSxvPWkuZ2V0U2l6ZSgpO3QudHJhbnNmb3JtKG8ud2lkdGgsMCwwLC1vLmhlaWdodCxyLngsci55K28uaGVpZ2h0KSx0LmRyYXdJbWFnZShuKX1mdW5jdGlvbiBDKGUsbil7dmFyIGk9dC5EZWZlcnJlZCgpO3JldHVybiBlLm9wdGlvbnMuc2V0KFwicGRmXCIsbiksRC5wZGYudG9EYXRhVVJMKGUsaS5yZXNvbHZlKSxpLnByb21pc2UoKX1mdW5jdGlvbiBTKHQpe3ZhciBuPWUucGFyc2VDb2xvcih0LCEwKTtyZXR1cm4gbj9uLnRvUkdCKCk6bnVsbH1mdW5jdGlvbiBUKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGw9ITAsZX1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnZpc2libGUoKSYmZS5vcGFjaXR5KCk+MCYmKGgoZS5maWxsKCkpfHxoKGUuc3Ryb2tlKCkpKX1mdW5jdGlvbiBpKGUpe3ZhciB0LG4saT1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7Kyt0KW49YShlW3RdKSxudWxsIT1uJiZpLnB1c2gobik7cmV0dXJuIGl9ZnVuY3Rpb24gcihlLHQpe3ZhciBuLGk9YyxyPWQ7ZS50cmFuc2Zvcm0oKSYmKGQ9ZC5tdWx0aXBseUNvcHkoZS50cmFuc2Zvcm0oKS5tYXRyaXgoKSkpLG49ZS5jbGlwKCksbiYmKG49bi5iYm94KCksbiYmKG49bi5iYm94KGQpLGM9Yz9BLlJlY3QuaW50ZXJzZWN0KGMsbik6bikpO3RyeXtyZXR1cm4gdCgpfWZpbmFsbHl7Yz1pLGQ9cn19ZnVuY3Rpb24gbyhlKXtpZihudWxsPT1jKXJldHVybiExO3ZhciB0PWUucmF3QkJveCgpLmJib3goZCk7cmV0dXJuIGMmJnQmJih0PUEuUmVjdC5pbnRlcnNlY3QodCxjKSksdH1mdW5jdGlvbiBhKGEpe2lmKCEoYSBpbnN0YW5jZW9mIEQuR3JvdXB8fGEgaW5zdGFuY2VvZiBELk11bHRpUGF0aCkpe3ZhciBsPW8oYSk7aWYoIWwpcmV0dXJuIHQobnVsbCk7dT11P0EuUmVjdC51bmlvbih1LGwpOmx9cmV0dXJuIHMoe1BhdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLnNlZ21lbnRzLmxlbmd0aCYmbihlKT9lOnQobnVsbCl9LE11bHRpUGF0aDpmdW5jdGlvbihlKXtpZighbihlKSlyZXR1cm4gdChudWxsKTt2YXIgcj1uZXcgRC5NdWx0aVBhdGgoZS5vcHRpb25zKTtyZXR1cm4gci5wYXRocz1pKGUucGF0aHMpLDA9PT1yLnBhdGhzLmxlbmd0aD90KG51bGwpOnJ9LENpcmNsZTpmdW5jdGlvbihlKXtyZXR1cm4gbihlKT9lOnQobnVsbCl9LEFyYzpmdW5jdGlvbihlKXtyZXR1cm4gbihlKT9lOnQobnVsbCl9LFRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuL1xcUy8udGVzdChlLmNvbnRlbnQoKSkmJm4oZSk/ZTp0KG51bGwpfSxJbWFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZS52aXNpYmxlKCkmJmUub3BhY2l0eSgpPjA/ZTp0KG51bGwpfSxHcm91cDpmdW5jdGlvbihuKXtyZXR1cm4gcihuLGZ1bmN0aW9uKCl7dmFyIHI9bmV3IEQuR3JvdXAobi5vcHRpb25zKTtyZXR1cm4gci5jaGlsZHJlbj1pKG4uY2hpbGRyZW4pLG4hPT1lJiYwPT09ci5jaGlsZHJlbi5sZW5ndGg/dChudWxsKTpyfSl9fSxhKX12YXIgbCxjPSExLGQ9QS5NYXRyaXgudW5pdCgpLHU9bnVsbDtkbyBsPSExLGU9YShlKTt3aGlsZShlJiZsKTtyZXR1cm57cm9vdDplLGJib3g6dX19dmFyIEQ9ZS5kcmF3aW5nLEE9ZS5nZW9tZXRyeSxFPXtkYXNoOls0XSxkYXNoRG90Ols0LDIsMSwyXSxkb3Q6WzEsMl0sbG9uZ0Rhc2g6WzgsMl0sbG9uZ0Rhc2hEb3Q6WzgsMiwxLDJdLGxvbmdEYXNoRG90RG90Ols4LDIsMSwyLDEsMl0sc29saWQ6W119LE09e2J1dHQ6MCxyb3VuZDoxLHNxdWFyZToyfSxQPXttaXRlcjowLHJvdW5kOjEsYmV2ZWw6Mn07ZS5kZWVwRXh0ZW5kKEQse2V4cG9ydFBERjpDLHBkZjp7dG9EYXRhVVJMOnIsdG9CbG9iOm8sc2F2ZUFzOmEsdG9TdHJlYW06aX19KX0od2luZG93LmtlbmRvLHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGk9dC5leGVjKGUuc3Vic3RyKGEpKX1mdW5jdGlvbiBuKGUpe3JldHVybiBlLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9Zm9yKHZhciBpLHI9W10sbz0wLGE9MCxzPTAsbD0hMTtlLmxlbmd0aD5hOyl0KC9eXFxzKy8pP2ErPWlbMF0ubGVuZ3RoOnQoL15bXFwoXFxbXFx7XS8pPyhzKyssYSsrKTp0KC9eW1xcKVxcXVxcfV0vKT8ocy0tLGErKyk6IWwmJnQoL15bXFxcIlxcJ10vKT8obD1pWzBdLGErKyk6XCInXCI9PWwmJnQoL15cXFxcXFwnLyk/YSs9MjonXCInPT1sJiZ0KC9eXFxcXFxcXCIvKT9hKz0yOlwiJ1wiPT1sJiZ0KC9eXFwnLyk/KGw9ITEsYSsrKTonXCInPT1sJiZ0KC9eXFxcIi8pPyhsPSExLGErKyk6dCgvXlxccyosXFxzKi8pPyghbCYmIXMmJmE+byYmKHIucHVzaChuKGUuc3Vic3RyaW5nKG8sYSkpKSxvPWEraVswXS5sZW5ndGgpLGErPWlbMF0ubGVuZ3RoKTphKys7cmV0dXJuIGE+byYmci5wdXNoKG4oZS5zdWJzdHJpbmcobyxhKSkpLHJ9ZnVuY3Rpb24gcihlLHQpe3ZhciBuPWtlbmRvLnBhcnNlQ29sb3IoZSk7cmV0dXJuIG4mJihuPW4udG9SR0IoKSx0P249bi50b0Nzc1JnYmEoKTowPT09bi5hJiYobj1udWxsKSksbn1mdW5jdGlvbiBvKGUsdCl7ZnVuY3Rpb24gbihlKXtqW2VdfHwoaltlXT0hMCxvLnB1c2goZSkpfWZ1bmN0aW9uIGkoKXstLXI8PTAmJnQoKX12YXIgcixvPVtdOyFmdW5jdGlvbiBzKGUpe3ZhciB0LGk9YShoKHUoZSksXCJiYWNrZ3JvdW5kLWltYWdlXCIpKTtmb3IoL15pbWckL2kudGVzdChlLnRhZ05hbWUpJiZuKGUuc3JjKSxpJiZuKGkpLHQ9ZS5maXJzdENoaWxkO3Q7dD10Lm5leHRTaWJsaW5nKTE9PXQubm9kZVR5cGUmJnModCl9KGUpLHI9by5sZW5ndGgsMD09PXImJmkoKSxvLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9altlXT1uZXcgSW1hZ2U7dC5vbmxvYWQ9aSx0Lm9uZXJyb3I9ZnVuY3Rpb24oKXtqW2VdPW51bGwsaSgpfSx0LnNyYz1lLCh0LmNvbXBsZXRlfHx2b2lkIDA9PT10LmNvbXBsZXRlKSYmKHQuc3JjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiLHQuc3JjPWUpfSl9ZnVuY3Rpb24gYShlKXt2YXIgdD0vXlxccyp1cmxcXCgoWydcIl0/KSguKj8pXFwxXFwpXFxzKiQvaS5leGVjKGUpO3JldHVybiB0P3RbMl06dm9pZCAwfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciBpLHI7Tz1PYmplY3QuY3JlYXRlKE8pLE9bZS50YWdOYW1lLnRvTG93ZXJDYXNlKCldPXtlbGVtZW50OmUsc3R5bGU6dH0saT1oKHQsXCJ0ZXh0LWRlY29yYXRpb25cIiksaSYmXCJub25lXCIhPWkmJihyPWgodCxcImNvbG9yXCIpLGkuc3BsaXQoL1xccysvZykuZm9yRWFjaChmdW5jdGlvbihlKXtPW2VdfHwoT1tlXT1yKX0pKSxkKGUpJiYoTy5fc3RhY2tpbmdDb250ZXh0PXtlbGVtZW50OmUsZ3JvdXA6bn0pfWZ1bmN0aW9uIGwoKXtPPU9iamVjdC5nZXRQcm90b3R5cGVPZihPKX1mdW5jdGlvbiBjKGUpe2lmKG51bGwhPU8uX2NsaXBib3gpe3ZhciB0PWUuYmJveChPLl9tYXRyaXgpO08uX2NsaXBib3g9Ty5fY2xpcGJveD9WLlJlY3QuaW50ZXJzZWN0KE8uX2NsaXBib3gsdCk6dH19ZnVuY3Rpb24gZChlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBoKG4sZSl9dmFyIG49dShlKTtyZXR1cm5cIm5vbmVcIiE9dChcInRyYW5zZm9ybVwiKXx8XCJzdGF0aWNcIiE9dChcInBvc2l0aW9uXCIpJiZcImF1dG9cIiE9dChcInotaW5kZXhcIil8fHQoXCJvcGFjaXR5XCIpPDE/ITA6dm9pZCAwfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpfWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gZS5nZXRQcm9wZXJ0eVZhbHVlKHQpfHxXLndlYmtpdCYmZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLXdlYmtpdC1cIit0KXx8Vy5maXJlZm94JiZlLmdldFByb3BlcnR5VmFsdWUoXCItbW96LVwiK3QpfHxXLm9wZXJhJiZlLmdldFByb3BlcnR5VmFsdWUoXCItby1cIit0KXx8Vy5tc2llJiZlLmdldFByb3BlcnR5VmFsdWUoXCItbXMtXCIrdCl9ZnVuY3Rpb24gcChlLHQsbixpKXtlLnNldFByb3BlcnR5KHQsbixpKSxXLndlYmtpdD9lLnNldFByb3BlcnR5KFwiLXdlYmtpdC1cIit0LG4saSk6Vy5maXJlZm94P2Uuc2V0UHJvcGVydHkoXCItbW96LVwiK3QsbixpKTpXLm9wZXJhP2Uuc2V0UHJvcGVydHkoXCItby1cIit0LG4saSk6Vy5tc2llJiYoZS5zZXRQcm9wZXJ0eShcIi1tcy1cIit0LG4saSksdD1cIm1zXCIrdC5yZXBsYWNlKC8oXnwtKShbYS16XSkvZyxmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQrbi50b1VwcGVyQ2FzZSgpfSksZVt0XT1uKX1mdW5jdGlvbiBmKGUsbil7cmV0dXJuIG49XCJib3JkZXItXCIrbix7d2lkdGg6dChoKGUsbitcIi13aWR0aFwiKSksc3R5bGU6aChlLG4rXCItc3R5bGVcIiksY29sb3I6cihoKGUsbitcIi1jb2xvclwiKSwhMCl9fWZ1bmN0aW9uIGcoZSx0KXt2YXIgbj1lLnN0eWxlLmNzc1RleHQsaT10KCk7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dD1uLGl9ZnVuY3Rpb24gbShlLG4pe3ZhciBpPWgoZSxcImJvcmRlci1cIituK1wiLXJhZGl1c1wiKS5zcGxpdCgvXFxzKy9nKS5tYXAodCk7cmV0dXJuIDE9PWkubGVuZ3RoJiZpLnB1c2goaVswXSksUyh7eDppWzBdLHk6aVsxXX0pfWZ1bmN0aW9uIHYoZSl7dmFyIHQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gdD1fKHQsXCJib3JkZXItKi13aWR0aFwiLGUpLHQ9Xyh0LFwicGFkZGluZy0qXCIsZSl9ZnVuY3Rpb24gXyhlLG4saSl7dmFyIHIsbyxhLHMsbDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygbj8ocj11KGkpLG89dChoKHIsbi5yZXBsYWNlKFwiKlwiLFwidG9wXCIpKSksYT10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJyaWdodFwiKSkpLHM9dChoKHIsbi5yZXBsYWNlKFwiKlwiLFwiYm90dG9tXCIpKSksbD10KGgocixuLnJlcGxhY2UoXCIqXCIsXCJsZWZ0XCIpKSkpOlwibnVtYmVyXCI9PXR5cGVvZiBuJiYobz1hPXM9bD1uKSx7dG9wOmUudG9wK28scmlnaHQ6ZS5yaWdodC1hLGJvdHRvbTplLmJvdHRvbS1zLGxlZnQ6ZS5sZWZ0K2wsd2lkdGg6ZS5yaWdodC1lLmxlZnQtYS1sLGhlaWdodDplLmJvdHRvbS1lLnRvcC1zLW99fWZ1bmN0aW9uIHkoZSl7dmFyIG4saSxyPWgoZSxcInRyYW5zZm9ybVwiKTtyZXR1cm5cIm5vbmVcIj09cj9udWxsOihuPS9eXFxzKm1hdHJpeFxcKFxccyooLio/KVxccypcXClcXHMqJC8uZXhlYyhyKSxuPyhpPWgoZSxcInRyYW5zZm9ybS1vcmlnaW5cIiksbj1uWzFdLnNwbGl0KC9cXHMqLFxccyovZykubWFwKHQpLGk9aS5zcGxpdCgvXFxzKy9nKS5tYXAodCkse21hdHJpeDpuLG9yaWdpbjppfSk6dm9pZCAwKX1mdW5jdGlvbiB3KGUpe3JldHVybiAxODAqZS9uLlBJJTM2MH1mdW5jdGlvbiBiKGUpe3ZhciBpPXQoZSk7cmV0dXJuL2dyYWQkLy50ZXN0KGUpP24uUEkqaS8yMDA6L3JhZCQvLnRlc3QoZSk/aTovdHVybiQvLnRlc3QoZSk/bi5QSSppKjI6L2RlZyQvLnRlc3QoZSk/bi5QSSppLzE4MDp2b2lkIDB9ZnVuY3Rpb24gayhlLHQpe3JldHVybiB0PW5ldyBWLk1hdHJpeCh0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSksZS50cmFuc2Zvcm0odCksdH1mdW5jdGlvbiB4KGUsdCl7ZS5jbGlwKHQpfWZ1bmN0aW9uIEMoZSx0LG4saSl7Zm9yKHZhciByPW5ldyBWLkFyYyhbdCxuXSxpKS5jdXJ2ZVBvaW50cygpLG89MTtyLmxlbmd0aD5vOyllLmN1cnZlVG8ocltvKytdLHJbbysrXSxyW28rK10pfWZ1bmN0aW9uIFMoZSl7cmV0dXJuKDA+PWUueHx8MD49ZS55KSYmKGUueD1lLnk9MCksZX1mdW5jdGlvbiBUKGUsbixpKXt2YXIgcixvLGEscyxsLGMsZCxwLGc9dShlKSx2PW0oZyxcInRvcC1sZWZ0XCIpLF89bShnLFwidG9wLXJpZ2h0XCIpLHk9bShnLFwiYm90dG9tLWxlZnRcIiksdz1tKGcsXCJib3R0b20tcmlnaHRcIik7cmV0dXJuKFwicGFkZGluZ1wiPT1pfHxcImNvbnRlbnRcIj09aSkmJihyPWYoZyxcInRvcFwiKSxvPWYoZyxcInJpZ2h0XCIpLGE9ZihnLFwiYm90dG9tXCIpLHM9ZihnLFwibGVmdFwiKSx2LngtPXMud2lkdGgsdi55LT1yLndpZHRoLF8ueC09by53aWR0aCxfLnktPXIud2lkdGgsdy54LT1vLndpZHRoLHcueS09YS53aWR0aCx5LngtPXMud2lkdGgseS55LT1hLndpZHRoLFwiY29udGVudFwiPT1pJiYobD10KGgoZyxcInBhZGRpbmctdG9wXCIpKSxjPXQoaChnLFwicGFkZGluZy1yaWdodFwiKSksZD10KGgoZyxcInBhZGRpbmctYm90dG9tXCIpKSxwPXQoaChnLFwicGFkZGluZy1sZWZ0XCIpKSx2LngtPXAsdi55LT1sLF8ueC09YyxfLnktPWwsdy54LT1jLHcueS09ZCx5LngtPXAseS55LT1kKSksXCJudW1iZXJcIj09dHlwZW9mIGkmJih2LngtPWksdi55LT1pLF8ueC09aSxfLnktPWksdy54LT1pLHcueS09aSx5LngtPWkseS55LT1pKSxEKG4sdixfLHcseSl9ZnVuY3Rpb24gRChlLHQsbixpLHIpe3ZhciBvPW5ldyBOLlBhdGgoe2ZpbGw6bnVsbCxzdHJva2U6bnVsbH0pO3JldHVybiBTKHQpLFMobiksUyhpKSxTKHIpLG8ubW92ZVRvKGUubGVmdCxlLnRvcCt0LnkpLHQueCYmQyhvLGUubGVmdCt0LngsZS50b3ArdC55LHtzdGFydEFuZ2xlOi0xODAsZW5kQW5nbGU6LTkwLHJhZGl1c1g6dC54LHJhZGl1c1k6dC55fSksby5saW5lVG8oZS5yaWdodC1uLngsZS50b3ApLG4ueCYmQyhvLGUucmlnaHQtbi54LGUudG9wK24ueSx7c3RhcnRBbmdsZTotOTAsZW5kQW5nbGU6MCxyYWRpdXNYOm4ueCxyYWRpdXNZOm4ueX0pLG8ubGluZVRvKGUucmlnaHQsZS5ib3R0b20taS55KSxpLngmJkMobyxlLnJpZ2h0LWkueCxlLmJvdHRvbS1pLnkse3N0YXJ0QW5nbGU6MCxlbmRBbmdsZTo5MCxyYWRpdXNYOmkueCxyYWRpdXNZOmkueX0pLG8ubGluZVRvKGUubGVmdCtyLngsZS5ib3R0b20pLHIueCYmQyhvLGUubGVmdCtyLngsZS5ib3R0b20tci55LHtzdGFydEFuZ2xlOjkwLGVuZEFuZ2xlOjE4MCxyYWRpdXNYOnIueCxyYWRpdXNZOnIueX0pLG8uY2xvc2UoKX1mdW5jdGlvbiBBKGUsbyl7ZnVuY3Rpb24gcyh0KXt2YXIgbixpLHIsbyxhLHM7aWYoL150ZCQvaS50ZXN0KGUudGFnTmFtZSkmJihuPU8udGFibGUsbiYmXCJjb2xsYXBzZVwiPT1oKG4uc3R5bGUsXCJib3JkZXItY29sbGFwc2VcIikpKXtpZihpPWYobi5zdHlsZSxcImxlZnRcIikud2lkdGgscj1mKG4uc3R5bGUsXCJ0b3BcIikud2lkdGgsMD09PWkmJjA9PT1yKXJldHVybiB0O2lmKG89bi5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGE9bi5lbGVtZW50LnJvd3NbMF0uY2VsbHNbMF0scz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHMudG9wPT1vLnRvcHx8cy5sZWZ0PT1vLmxlZnQpcmV0dXJuIFUuY2FsbCh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2xlZnQ6ZS5sZWZ0K2ksdG9wOmUudG9wK3IscmlnaHQ6ZS5yaWdodCtpLGJvdHRvbTplLmJvdHRvbStyLGhlaWdodDplLmhlaWdodCx3aWR0aDplLndpZHRofX0pfXJldHVybiB0fWZ1bmN0aW9uIGwoZSx0LGkscixhLHMsbCxjKXtmdW5jdGlvbiBkKHQscixvKXt2YXIgYT1uLlBJLzIqdC8odCtpKSxzPXt4OnIueC10LHk6ci55LWl9LGw9bmV3IE4uUGF0aCh7ZmlsbDp7Y29sb3I6ZX0sc3Ryb2tlOm51bGx9KS5tb3ZlVG8oMCwwKTtrKGwsbyksQyhsLDAsci55LHtzdGFydEFuZ2xlOi05MCxlbmRBbmdsZTotdyhhKSxyYWRpdXNYOnIueCxyYWRpdXNZOnIueX0pLHMueD4wJiZzLnk+MD8obC5saW5lVG8ocy54Km4uY29zKGEpLHIueS1zLnkqbi5zaW4oYSkpLEMobCwwLHIueSx7c3RhcnRBbmdsZTotdyhhKSxlbmRBbmdsZTotOTAscmFkaXVzWDpzLngscmFkaXVzWTpzLnksYW50aWNsb2Nrd2lzZTohMH0pKTpzLng+MD9sLmxpbmVUbyhzLngsaSkubGluZVRvKDAsaSk6bC5saW5lVG8ocy54LGkpLmxpbmVUbyhzLngsMCksaC5hcHBlbmQobC5jbG9zZSgpKX1pZighKDA+PWkpKXt2YXIgdSxoPW5ldyBOLkdyb3VwO2soaCxjKSxvLmFwcGVuZChoKSxTKHMpLFMobCksdT1uZXcgTi5QYXRoKHtmaWxsOntjb2xvcjplfSxzdHJva2U6bnVsbH0pLGguYXBwZW5kKHUpLHUubW92ZVRvKHMueD9uLm1heChzLngscik6MCwwKS5saW5lVG8odC0obC54P24ubWF4KGwueCxhKTowKSwwKS5saW5lVG8odC1uLm1heChsLngsYSksaSkubGluZVRvKG4ubWF4KHMueCxyKSxpKS5jbG9zZSgpLHMueCYmZChyLHMsWy0xLDAsMCwxLHMueCwwXSksbC54JiZkKGEsbCxbMSwwLDAsMSx0LWwueCwwXSl9fWZ1bmN0aW9uIGQoZSl7dmFyIHQsbixpLHIsYSxzLGwsYz1uZXcgTi5Hcm91cDtmb3IoeChjLEQoZSxZLEssWCxRKSksby5hcHBlbmQoYyksWiYmKHQ9bmV3IE4uUGF0aCh7ZmlsbDp7Y29sb3I6Wi50b0Nzc1JnYmEoKX0sc3Ryb2tlOm51bGx9KSx0Lm1vdmVUbyhlLmxlZnQsZS50b3ApLmxpbmVUbyhlLnJpZ2h0LGUudG9wKS5saW5lVG8oZS5yaWdodCxlLmJvdHRvbSkubGluZVRvKGUubGVmdCxlLmJvdHRvbSkuY2xvc2UoKSxjLmFwcGVuZCh0KSksbD12Lmxlbmd0aDstLWw+PTA7KW49dltsXSxpPXlbbF18fHlbeS5sZW5ndGgtMV0scj1iW2xdfHxiW2IubGVuZ3RoLTFdLGE9QVtsXXx8QVtBLmxlbmd0aC0xXSxzPVBbbF18fFBbUC5sZW5ndGgtMV0scChjLGUsbixpLHIsYSxzKX1mdW5jdGlvbiBwKG4saSxyLG8scyxsLGMpe2Z1bmN0aW9uIGQobixpLHIsYSxkKXtmdW5jdGlvbiB1KCl7Zm9yKDttLm9yaWdpbi54PmkubGVmdDspbS5vcmlnaW4ueC09cn1mdW5jdGlvbiBoKCl7Zm9yKDttLm9yaWdpbi55PmkudG9wOyltLm9yaWdpbi55LT1hfWZ1bmN0aW9uIHAoKXtmb3IoO2kucmlnaHQ+bS5vcmlnaW4ueDspZChuLG0uY2xvbmUoKSksbS5vcmlnaW4ueCs9cn12YXIgZixnLG0sdix5PXIvYSx3PWk7aWYoXCJjb250ZW50LWJveFwiPT1sPyh3PV8odyxcImJvcmRlci0qLXdpZHRoXCIsZSksdz1fKHcsXCJwYWRkaW5nLSpcIixlKSk6XCJwYWRkaW5nLWJveFwiPT1sJiYodz1fKHcsXCJib3JkZXItKi13aWR0aFwiLGUpKSwvXlxccyphdXRvKFxccythdXRvKT9cXHMqJC8udGVzdChjKXx8KGY9Yy5zcGxpdCgvXFxzKy9nKSxyPS8lJC8udGVzdChmWzBdKT93LndpZHRoKnQoZlswXSkvMTAwOnQoZlswXSksYT0xPT1mLmxlbmd0aHx8XCJhdXRvXCI9PWZbMV0/ci95Oi8lJC8udGVzdChmWzFdKT93LmhlaWdodCp0KGZbMV0pLzEwMDp0KGZbMV0pKSxnPShzK1wiXCIpLnNwbGl0KC9cXHMrLyksMT09Zy5sZW5ndGgmJihnWzFdPVwiNTAlXCIpLGdbMF09LyUkLy50ZXN0KGdbMF0pP3QoZ1swXSkvMTAwKih3LndpZHRoLXIpOnQoZ1swXSksZ1sxXT0vJSQvLnRlc3QoZ1sxXSk/dChnWzFdKS8xMDAqKHcuaGVpZ2h0LWEpOnQoZ1sxXSksbT1uZXcgVi5SZWN0KFt3LmxlZnQrZ1swXSx3LnRvcCtnWzFdXSxbcixhXSksXCJuby1yZXBlYXRcIj09bylkKG4sbSk7ZWxzZSBpZihcInJlcGVhdC14XCI9PW8pdSgpLHAoKTtlbHNlIGlmKFwicmVwZWF0LXlcIj09bylmb3IoaCgpO2kuYm90dG9tPm0ub3JpZ2luLnk7KWQobixtLmNsb25lKCkpLG0ub3JpZ2luLnkrPWE7ZWxzZSBpZihcInJlcGVhdFwiPT1vKWZvcih1KCksaCgpLHY9bS5vcmlnaW4uY2xvbmUoKTtpLmJvdHRvbT5tLm9yaWdpbi55OyltLm9yaWdpbi54PXYueCxwKCksbS5vcmlnaW4ueSs9YX12YXIgdSxoLHA7ciYmXCJub25lXCIhPXImJigvXnVybFxcKFxcXCJkYXRhOmltYWdlXFwvc3ZnL2kudGVzdChyKXx8KHU9YShyKSx1PyhoPWpbdV0saCYmaC53aWR0aD4wJiZoLmhlaWdodD4wJiZkKG4saSxoLndpZHRoLGguaGVpZ2h0LGZ1bmN0aW9uKGUsdCl7ZS5hcHBlbmQobmV3IE4uSW1hZ2UodSx0KSl9KSk6KHA9SChyKSxwJiZkKG4saSxpLndpZHRoLGkuaGVpZ2h0LEUocCkpKSkpfWZ1bmN0aW9uIGcodCxuLGkpe2Z1bmN0aW9uIHIoZSl7cmV0dXJue3g6ZS55LHk6ZS54fX12YXIgYSxzLGM7aWYoMCE9PXQud2lkdGgmJjAhPT10LmhlaWdodCYmKGQodCksYT0kLndpZHRoPjAmJihuJiZcImx0clwiPT1KfHxpJiZcInJ0bFwiPT1KKSxzPUcud2lkdGg+MCYmKGkmJlwibHRyXCI9PUp8fG4mJlwicnRsXCI9PUopLDAhPT1MLndpZHRofHwwIT09JC53aWR0aHx8MCE9PUcud2lkdGh8fDAhPT1xLndpZHRoKSl7aWYoTC5jb2xvcj09Ry5jb2xvciYmTC5jb2xvcj09cS5jb2xvciYmTC5jb2xvcj09JC5jb2xvciYmTC53aWR0aD09Ry53aWR0aCYmTC53aWR0aD09cS53aWR0aCYmTC53aWR0aD09JC53aWR0aCYmYSYmcylyZXR1cm4gdD1fKHQsTC53aWR0aC8yKSxjPVQoZSx0LEwud2lkdGgvMiksYy5vcHRpb25zLnN0cm9rZT17Y29sb3I6TC5jb2xvcix3aWR0aDpMLndpZHRofSx2b2lkIG8uYXBwZW5kKGMpO2lmKDA9PT1ZLngmJjA9PT1LLngmJjA9PT1YLngmJjA9PT1RLngmJjI+TC53aWR0aCYmMj4kLndpZHRoJiYyPkcud2lkdGgmJjI+cS53aWR0aClyZXR1cm4gTC53aWR0aD4wJiZvLmFwcGVuZChuZXcgTi5QYXRoKHtzdHJva2U6e3dpZHRoOkwud2lkdGgsY29sb3I6TC5jb2xvcn19KS5tb3ZlVG8odC5sZWZ0LHQudG9wK0wud2lkdGgvMikubGluZVRvKHQucmlnaHQsdC50b3ArTC53aWR0aC8yKSkscS53aWR0aD4wJiZvLmFwcGVuZChuZXcgTi5QYXRoKHtzdHJva2U6e3dpZHRoOnEud2lkdGgsY29sb3I6cS5jb2xvcn19KS5tb3ZlVG8odC5sZWZ0LHQuYm90dG9tLXEud2lkdGgvMikubGluZVRvKHQucmlnaHQsdC5ib3R0b20tcS53aWR0aC8yKSksYSYmby5hcHBlbmQobmV3IE4uUGF0aCh7c3Ryb2tlOnt3aWR0aDokLndpZHRoLGNvbG9yOiQuY29sb3J9fSkubW92ZVRvKHQubGVmdCskLndpZHRoLzIsdC50b3ApLmxpbmVUbyh0LmxlZnQrJC53aWR0aC8yLHQuYm90dG9tKSksdm9pZChzJiZvLmFwcGVuZChuZXcgTi5QYXRoKHtzdHJva2U6e3dpZHRoOkcud2lkdGgsY29sb3I6Ry5jb2xvcn19KS5tb3ZlVG8odC5yaWdodC1HLndpZHRoLzIsdC50b3ApLmxpbmVUbyh0LnJpZ2h0LUcud2lkdGgvMix0LmJvdHRvbSkpKTtsKEwuY29sb3IsdC53aWR0aCxMLndpZHRoLCQud2lkdGgsRy53aWR0aCxZLEssWzEsMCwwLDEsdC5sZWZ0LHQudG9wXSksbChxLmNvbG9yLHQud2lkdGgscS53aWR0aCxHLndpZHRoLCQud2lkdGgsWCxRLFstMSwwLDAsLTEsdC5yaWdodCx0LmJvdHRvbV0pLGwoJC5jb2xvcix0LmhlaWdodCwkLndpZHRoLHEud2lkdGgsTC53aWR0aCxyKFEpLHIoWSksWzAsLTEsMSwwLHQubGVmdCx0LmJvdHRvbV0pLGwoRy5jb2xvcix0LmhlaWdodCxHLndpZHRoLEwud2lkdGgscS53aWR0aCxyKEspLHIoWCksWzAsMSwtMSwwLHQucmlnaHQsdC50b3BdKX19dmFyIHYseSxiLEEsUCxJLEYsUixCPXUoZSksTD1mKEIsXCJ0b3BcIiksRz1mKEIsXCJyaWdodFwiKSxxPWYoQixcImJvdHRvbVwiKSwkPWYoQixcImxlZnRcIiksWT1tKEIsXCJ0b3AtbGVmdFwiKSxLPW0oQixcInRvcC1yaWdodFwiKSxRPW0oQixcImJvdHRvbS1sZWZ0XCIpLFg9bShCLFwiYm90dG9tLXJpZ2h0XCIpLEo9aChCLFwiZGlyZWN0aW9uXCIpLFo9aChCLFwiYmFja2dyb3VuZC1jb2xvclwiKTtmb3IoWj1yKFopLHY9aShoKEIsXCJiYWNrZ3JvdW5kLWltYWdlXCIpKSx5PWkoaChCLFwiYmFja2dyb3VuZC1yZXBlYXRcIikpLGI9aShoKEIsXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpKSxBPWkoaChCLFwiYmFja2dyb3VuZC1vcmlnaW5cIikpLFA9aShoKEIsXCJiYWNrZ3JvdW5kLXNpemVcIikpLFcubXNpZSYmMTA+Vy52ZXJzaW9uJiYoYj1pKGUuY3VycmVudFN0eWxlLmJhY2tncm91bmRQb3NpdGlvbikpLEk9XyhlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFwiYm9yZGVyLSotd2lkdGhcIixlKSxmdW5jdGlvbigpe3ZhciBlLG4saSxyLGEscyxsLGQ9aChCLFwiY2xpcFwiKSx1PS9eXFxzKnJlY3RcXCgoLiopXFwpXFxzKiQvLmV4ZWMoZCk7dSYmKGU9dVsxXS5zcGxpdCgvWyAsXSsvZyksbj1cImF1dG9cIj09ZVswXT9JLnRvcDp0KGVbMF0pK0kudG9wLGk9XCJhdXRvXCI9PWVbMV0/SS5yaWdodDp0KGVbMV0pK0kubGVmdCxyPVwiYXV0b1wiPT1lWzJdP0kuYm90dG9tOnQoZVsyXSkrSS50b3AsYT1cImF1dG9cIj09ZVszXT9JLmxlZnQ6dChlWzNdKStJLmxlZnQscz1uZXcgTi5Hcm91cCxsPShuZXcgTi5QYXRoKS5tb3ZlVG8oYSxuKS5saW5lVG8oaSxuKS5saW5lVG8oaSxyKS5saW5lVG8oYSxyKS5jbG9zZSgpLHgocyxsKSxvLmFwcGVuZChzKSxvPXMsYyhsKSl9KCksRj1lLmdldENsaWVudFJlY3RzKCksMT09Ri5sZW5ndGgmJihGPVtlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXSksRj1zKEYpLFI9MDtGLmxlbmd0aD5SOysrUilnKEZbUl0sMD09PVIsUj09Ri5sZW5ndGgtMSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciB0PVQoZSxJLFwicGFkZGluZ1wiKSxuPW5ldyBOLkdyb3VwO3gobix0KSxvLmFwcGVuZChuKSxvPW4sYyh0KX0vXihoaWRkZW58YXV0b3xzY3JvbGwpLy50ZXN0KGgoQixcIm92ZXJmbG93XCIpKT90KCk6L14oaGlkZGVufGF1dG98c2Nyb2xsKS8udGVzdChoKEIsXCJvdmVyZmxvdy14XCIpKT90KCk6L14oaGlkZGVufGF1dG98c2Nyb2xsKS8udGVzdChoKEIsXCJvdmVyZmxvdy15XCIpKSYmdCgpfSgpLE0oZSxvKXx8eihlLG8pLG99ZnVuY3Rpb24gRShlKXtyZXR1cm4gZnVuY3Rpb24oaSxyKXt7dmFyIG8sYSxzLGwsYyxkLHUsaCxwLGYsZyxtLHYsXz1yLndpZHRoKCkseT1yLmhlaWdodCgpO3IudG9wTGVmdCgpfXN3aXRjaChlLnR5cGUpe2Nhc2VcImxpbmVhclwiOnN3aXRjaChvPW51bGwhPWUuYW5nbGU/ZS5hbmdsZTpuLlBJLGUudG8pe2Nhc2VcInRvcFwiOm89MDticmVhaztjYXNlXCJsZWZ0XCI6bz0tbi5QSS8yO2JyZWFrO2Nhc2VcImJvdHRvbVwiOm89bi5QSTticmVhaztjYXNlXCJyaWdodFwiOm89bi5QSS8yO2JyZWFrO2Nhc2VcInRvcCBsZWZ0XCI6Y2FzZVwibGVmdCB0b3BcIjpvPS1uLmF0YW4yKHksXyk7YnJlYWs7Y2FzZVwidG9wIHJpZ2h0XCI6Y2FzZVwicmlnaHQgdG9wXCI6bz1uLmF0YW4yKHksXyk7YnJlYWs7Y2FzZVwiYm90dG9tIGxlZnRcIjpjYXNlXCJsZWZ0IGJvdHRvbVwiOm89bi5QSStuLmF0YW4yKHksXyk7YnJlYWs7Y2FzZVwiYm90dG9tIHJpZ2h0XCI6Y2FzZVwicmlnaHQgYm90dG9tXCI6bz1uLlBJLW4uYXRhbjIoeSxfKX1lLnJldmVyc2UmJihvLT1uLlBJKSxvJT0yKm4uUEksMD5vJiYobys9MipuLlBJKSxhPW4uYWJzKF8qbi5zaW4obykpK24uYWJzKHkqbi5jb3MobykpLHM9bi5hdGFuKF8qbi50YW4obykveSksbD1uLnNpbihzKSxjPW4uY29zKHMpLGQ9bi5hYnMobCkrbi5hYnMoYyksdT1kLzIqbCxoPWQvMipjLG8+bi5QSS8yJiYzKm4uUEkvMj49byYmKHU9LXUsaD0taCkscD1bXSxmPTAsZz1lLnN0b3BzLm1hcChmdW5jdGlvbihuLGkpe3ZhciByLG89bi5wZXJjZW50O3JldHVybiBvP289dChvKS8xMDA6bi5sZW5ndGg/bz10KG4ubGVuZ3RoKS9hOjA9PT1pP289MDppPT1lLnN0b3BzLmxlbmd0aC0xJiYobz0xKSxyPXtjb2xvcjpuLmNvbG9yLnRvQ3NzUmdiYSgpLG9mZnNldDpvfSxudWxsIT1vPyhmPW8scC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zdG9wO24ub2Zmc2V0PWUubGVmdCsoZi1lLmxlZnQpKih0KzEpLyhwLmxlbmd0aCsxKX0pLHA9W10pOnAucHVzaCh7bGVmdDpmLHN0b3A6cn0pLHJ9KSxtPVsuNS11LC41K2hdLHY9Wy41K3UsLjUtaF0saS5hcHBlbmQoTi5QYXRoLmZyb21SZWN0KHIpLnN0cm9rZShudWxsKS5maWxsKG5ldyBOLkxpbmVhckdyYWRpZW50KHtzdGFydDptLGVuZDp2LHN0b3BzOmcsdXNlclNwYWNlOiExfSkpKTticmVhaztjYXNlXCJyYWRpYWxcIjp3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nJiZ3aW5kb3cuY29uc29sZS5sb2coXCJSYWRpYWwgZ3JhZGllbnRzIGFyZSBub3QgeWV0IHN1cHBvcnRlZCBpbiBIVE1MIHJlbmRlcmVyXCIpfX19ZnVuY3Rpb24gTSh0LG4pe3ZhciBpLHIsbyxhO3JldHVybiB0LmdldEF0dHJpYnV0ZShrZW5kby5hdHRyKFwicm9sZVwiKSkmJihpPWtlbmRvLndpZGdldEluc3RhbmNlKGUodCkpLGkmJihpLmV4cG9ydERPTVZpc3VhbHx8aS5leHBvcnRWaXN1YWwpKT8ocj1pLmV4cG9ydERPTVZpc3VhbD9pLmV4cG9ydERPTVZpc3VhbCgpOmkuZXhwb3J0VmlzdWFsKCksbz1uZXcgTi5Hcm91cCxvLmNoaWxkcmVuLnB1c2gociksYT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG8udHJhbnNmb3JtKFYudHJhbnNmb3JtKCkudHJhbnNsYXRlKGEubGVmdCxhLnRvcCkpLG4uYXBwZW5kKG8pLCEwKTp2b2lkIDB9ZnVuY3Rpb24gUChlLHQsbil7dmFyIGk9dihlKSxyPW5ldyBWLlJlY3QoW2kubGVmdCxpLnRvcF0sW2kud2lkdGgsaS5oZWlnaHRdKSxvPW5ldyBOLkltYWdlKHQscik7eChvLFQoZSxpLFwiY29udGVudFwiKSksbi5hcHBlbmQobyl9ZnVuY3Rpb24gSShlLG4pe3ZhciBpPXUoZSkscj11KG4pLG89dChoKGksXCJ6LWluZGV4XCIpKSxhPXQoaChyLFwiei1pbmRleFwiKSkscz1oKGksXCJwb3NpdGlvblwiKSxsPWgocixcInBvc2l0aW9uXCIpO3JldHVybiBpc05hTihvKSYmaXNOYU4oYSk/L3N0YXRpY3xhYnNvbHV0ZS8udGVzdChzKSYmL3N0YXRpY3xhYnNvbHV0ZS8udGVzdChsKT8wOlwic3RhdGljXCI9PXM/LTE6XCJzdGF0aWNcIj09bD8xOjA6aXNOYU4obyk/MD09PWE/MDphPjA/LTE6MTppc05hTihhKT8wPT09bz8wOm8+MD8xOi0xOnQobyktdChhKX1mdW5jdGlvbiB6KGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkO3N3aXRjaChlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaW1nXCI6UChlLGUuc3JjLHQpO2JyZWFrO2Nhc2VcImNhbnZhc1wiOnRyeXtQKGUsZS50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIpLHQpfWNhdGNoKHApe31icmVhaztjYXNlXCJ0ZXh0YXJlYVwiOmNhc2VcImlucHV0XCI6YnJlYWs7ZGVmYXVsdDpmb3Iobj1bXSxpPVtdLHI9W10sbz1bXSxhPWUuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAzOi9cXFMvLnRlc3QoYS5kYXRhKSYmRihlLGEsdCk7YnJlYWs7Y2FzZSAxOnM9dShhKSxsPWgocyxcImRpc3BsYXlcIiksYz1oKHMsXCJmbG9hdFwiKSxkPWgocyxcInBvc2l0aW9uXCIpLFwic3RhdGljXCIhPWQ/by5wdXNoKGEpOlwiaW5saW5lXCIhPWw/XCJub25lXCIhPWM/aS5wdXNoKGEpOm4ucHVzaChhKTpyLnB1c2goYSl9bi5zb3J0KEkpLmZvckVhY2goZnVuY3Rpb24oZSl7QihlLHQpfSksaS5zb3J0KEkpLmZvckVhY2goZnVuY3Rpb24oZSl7QihlLHQpfSksci5zb3J0KEkpLmZvckVhY2goZnVuY3Rpb24oZSl7QihlLHQpfSksby5zb3J0KEkpLmZvckVhY2goZnVuY3Rpb24oZSl7QihlLHQpfSl9fWZ1bmN0aW9uIEYoZSxuLGkpe2Z1bmN0aW9uIHIoKXtmb3IodmFyIGUsdCxpOyEvXFxTLy50ZXN0KHMuY2hhckF0KHApKTspe2lmKHA+PWYpcmV0dXJuITA7cCsrfWZvcihsLnNldFN0YXJ0KG4scCksZT0wOysrcDw9ZjspaWYoKytlLGwuc2V0RW5kKG4scCksZT4xJiYoZCYmL1xccy8udGVzdChzLmNoYXJBdChwLTEpKXx8bC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD4xKSl7bC5zZXRFbmQobiwtLXApO2JyZWFrfXQ9bC5nZXRDbGllbnRSZWN0cygpWzBdLGk9KFwiXCIrbCkucmVwbGFjZSgvXFxzKyQvLFwiXCIpLG8oaSx0KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG4scixvO2U9ZS5yZXBsYWNlKC9bXFxyXFxuIF0rL2csXCIgXCIpLFcubXNpZSYmIWlzTmFOKG0pJiYobj1OLnV0aWwubWVhc3VyZVRleHQoZSx7Zm9udDp2fSkscj0odC50b3ArdC5ib3R0b20tbi5oZWlnaHQpLzIsdD17dG9wOnIscmlnaHQ6dC5yaWdodCxib3R0b206cituLmhlaWdodCxsZWZ0OnQubGVmdCxoZWlnaHQ6bi5oZWlnaHQsd2lkdGg6dC5yaWdodC10LmxlZnR9KSxvPW5ldyBOLlRleHQoZSxuZXcgVi5Qb2ludCh0LmxlZnQsdC50b3ApLHtmb250OnYsZmlsbDp7Y29sb3I6X319KSxpLmFwcGVuZChvKSxhKHQpfWZ1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciByLG87dCYmKHI9Zy8xMixvPW5ldyBOLlBhdGgoe3N0cm9rZTp7d2lkdGg6cixjb2xvcjp0fX0pLG4tPXIsby5tb3ZlVG8oZS5sZWZ0LG4pLmxpbmVUbyhlLnJpZ2h0LG4pLGkuYXBwZW5kKG8pKX10KE8udW5kZXJsaW5lLGUuYm90dG9tKSx0KE9bXCJsaW5lLXRocm91Z2hcIl0sZS5ib3R0b20tZS5oZWlnaHQvMi43KSx0KE8ub3ZlcmxpbmUsZS50b3ApfXZhciBzLGwsYyxkLHAsZixnLG0sdixfLHk9dShlKTtpZighKHQoaCh5LFwidGV4dC1pbmRlbnRcIikpPC01MDApJiYocz1uLmRhdGEsbD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxjPWgoeSxcInRleHQtYWxpZ25cIiksZD1cImp1c3RpZnlcIj09YyxwPTAsZj0vXFxTXFxzKiQvLmV4ZWMobi5kYXRhKS5pbmRleCsxLGc9aCh5LFwiZm9udC1zaXplXCIpLG09aCh5LFwibGluZS1oZWlnaHRcIiksdj1baCh5LFwiZm9udC1zdHlsZVwiKSxoKHksXCJmb250LXZhcmlhbnRcIiksaCh5LFwiZm9udC13ZWlnaHRcIiksZyxoKHksXCJmb250LWZhbWlseVwiKV0uam9pbihcIiBcIiksZz10KGcpLG09dChtKSwwIT09ZykpZm9yKF89aCh5LFwiY29sb3JcIik7IXIoKTspO31mdW5jdGlvbiBSKGUsdCl7dmFyIG4saSxyPU8uX3N0YWNraW5nQ29udGV4dC5ncm91cCxvPXIuY2hpbGRyZW47Zm9yKG49MDtvLmxlbmd0aD5uJiYhKG51bGwhPW9bbl0uX2RvbV96SW5kZXgmJm9bbl0uX2RvbV96SW5kZXg+dCk7KytuKTtyZXR1cm4gaT1uZXcgTi5Hcm91cCxyLmluc2VydEF0KGksbiksaS5fZG9tX3pJbmRleD10LE8uX2NsaXBib3gmJmkuY2xpcChOLlBhdGguZnJvbVJlY3QoTy5fY2xpcGJveCkpLGl9ZnVuY3Rpb24gQihuLGkpe3ZhciByLG8sYSxjLGQsZixtOy9eKHN0eWxlfHNjcmlwdHxsaW5rfG1ldGF8aWZyYW1lfHN2ZykkL2kudGVzdChuLnRhZ05hbWUpfHxudWxsIT1PLl9jbGlwYm94JiYocj11KG4pLG89dChoKHIsXCJvcGFjaXR5XCIpKSxhPWgocixcInZpc2liaWxpdHlcIiksYz1oKHIsXCJkaXNwbGF5XCIpLDAhPT1vJiZcImhpZGRlblwiIT1hJiZcIm5vbmVcIiE9YyYmKGQ9eShyKSxtPWgocixcInotaW5kZXhcIiksKGR8fDE+bykmJlwiYXV0b1wiPT1tJiYobT0wKSxcImF1dG9cIiE9bT9mPVIoaSxtKTooZj1uZXcgTi5Hcm91cCxpLmFwcGVuZChmKSksZi5ERUJVRz1lKG4pLmRhdGEoXCJkZWJ1Z1wiKSwxPm8mJmYub3BhY2l0eShvKmYub3BhY2l0eSgpKSxzKG4scixmKSxkP2cobixmdW5jdGlvbigpe3ZhciBlLHQsaSxvO3Aobi5zdHlsZSxcInRyYW5zZm9ybVwiLFwibm9uZVwiLFwiaW1wb3J0YW50XCIpLHAobi5zdHlsZSxcInRyYW5zaXRpb25cIixcIm5vbmVcIixcImltcG9ydGFudFwiKSxcInN0YXRpY1wiPT1oKHIsXCJwb3NpdGlvblwiKSYmcChuLnN0eWxlLFwicG9zaXRpb25cIixcInJlbGF0aXZlXCIsXCJpbXBvcnRhbnRcIiksZT1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHQ9ZS5sZWZ0K2Qub3JpZ2luWzBdLGk9ZS50b3ArZC5vcmlnaW5bMV0sbz1bMSwwLDAsMSwtdCwtaV0sbz1MKG8sZC5tYXRyaXgpLG89TChvLFsxLDAsMCwxLHQsaV0pLG89ayhmLG8pLE8uX21hdHJpeD1PLl9tYXRyaXgubXVsdGlwbHlDb3B5KG8pLEEobixmKX0pOkEobixmKSxsKCkpKX1mdW5jdGlvbiBMKGUsdCl7dmFyIG49ZVswXSxpPWVbMV0scj1lWzJdLG89ZVszXSxhPWVbNF0scz1lWzVdLGw9dFswXSxjPXRbMV0sZD10WzJdLHU9dFszXSxoPXRbNF0scD10WzVdO3JldHVybltuKmwraSpkLG4qYytpKnUscipsK28qZCxyKmMrbyp1LGEqbCtzKmQraCxhKmMrcyp1K3BdfXZhciBPLEgsTj1rZW5kby5kcmF3aW5nLFY9a2VuZG8uZ2VvbWV0cnksVT1BcnJheS5wcm90b3R5cGUuc2xpY2UsVz1rZW5kby5zdXBwb3J0LmJyb3dzZXIsaj17fTtOLmRyYXdET009ZnVuY3Rpb24odCl7dmFyIG49ZS5EZWZlcnJlZCgpO3JldHVybiB0PWUodClbMF0sdD9vKHQsZnVuY3Rpb24oKXt2YXIgZT1uZXcgTi5Hcm91cCxpPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ayhlLFsxLDAsMCwxLC1pLmxlZnQsLWkudG9wXSksTy5fY2xpcGJveD0hMSxPLl9tYXRyaXg9Vi5NYXRyaXgudW5pdCgpLE8uX3N0YWNraW5nQ29udGV4dD17ZWxlbWVudDp0LGdyb3VwOmV9LEIodCxlKSxuLnJlc29sdmUoZSl9KTpuLnJlamVjdChcIk5vIGVsZW1lbnQgdG8gZXhwb3J0XCIpLG4ucHJvbWlzZSgpfSxPPXt9LEg9ZnVuY3Rpb24oKXt2YXIgZT0vXigoLXdlYmtpdC18LW1vei18LW8tfC1tcy0pP2xpbmVhci1ncmFkaWVudFxccyopXFwoLyx0PS9eKFstMC05Ll0rJSkvLG49L14oWy0wLTkuXStweCkvLGk9L14obGVmdHxyaWdodHx0b3B8Ym90dG9tfHRvfGNlbnRlcilcXFcvLHI9L14oWy0wLTkuXSsoZGVnfGdyYWR8cmFkfHR1cm4pKS8sbz0vXihcXHMrKS8sYT0vXihcXCgpLyxzPS9eKFxcKSkvLGw9L14oLCkvO3JldHVybiBmdW5jdGlvbihjKXtmdW5jdGlvbiBkKCl7dmFyIGU9by5leGVjKGMpO2UmJihjPWMuc3Vic3RyKGVbMV0ubGVuZ3RoKSl9ZnVuY3Rpb24gdShlKXtkKCk7dmFyIHQ9ZS5leGVjKGMpO3JldHVybiB0PyhjPWMuc3Vic3RyKHRbMV0ubGVuZ3RoKSx0WzFdKTp2b2lkIDB9ZnVuY3Rpb24gaCgpe3ZhciBlLGkscj1rZW5kby5wYXJzZUNvbG9yKGMsITApO3JldHVybiByPyhjPWMuc3Vic3RyKHIubWF0Y2hbMF0ubGVuZ3RoKSxyPXIudG9SR0IoKSwoZT11KG4pKXx8KGk9dSh0KSkse2NvbG9yOnIsbGVuZ3RoOmUscGVyY2VudDppfSk6dm9pZCAwfWZ1bmN0aW9uIHAoZSl7dmFyIG4sbyxkLHAsZyxtLHY9W10sXz0hMTtpZih1KGEpKXtmb3Iobj11KHIpLG4/KG49YihuKSx1KGwpKToobz11KGkpLFwidG9cIj09bz9vPXUoaSk6byYmL14tLy50ZXN0KGUpJiYoXz0hMCksZD11KGkpLHUobCkpLC8tbW96LS8udGVzdChlKSYmbnVsbD09biYmbnVsbD09byYmKHA9dSh0KSxnPXUodCksXz0hMCxcIjAlXCI9PXA/bz1cImxlZnRcIjpcIjEwMCVcIj09cCYmKG89XCJyaWdodFwiKSxcIjAlXCI9PWc/ZD1cInRvcFwiOlwiMTAwJVwiPT1nJiYoZD1cImJvdHRvbVwiKSx1KGwpKTtjJiYhdShzKSYmKG09aCgpKTspdi5wdXNoKG0pLHUobCk7cmV0dXJue3R5cGU6XCJsaW5lYXJcIixhbmdsZTpuLHRvOm8mJmQ/bytcIiBcIitkOm8/bzpkP2Q6bnVsbCxzdG9wczp2LHJldmVyc2U6XyxvcmlnOmZ9fX12YXIgZj1jLGc9dShlKTtyZXR1cm4gZz9wKGcpOnZvaWQgMH19KCl9KHdpbmRvdy5rZW5kby5qUXVlcnkscGFyc2VGbG9hdCxNYXRoKSxmdW5jdGlvbihlKXt2YXIgdD1lLm5vb3Asbj13aW5kb3cua2VuZG8saT1uLkNsYXNzLHI9bi51dGlsLG89bi5hbmltYXRpb25GcmFtZSxhPW4uZGVlcEV4dGVuZCxzPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLm9wdGlvbnM9YSh7fSxuLm9wdGlvbnMsdCksbi5lbGVtZW50PWV9LG9wdGlvbnM6e2R1cmF0aW9uOjUwMCxlYXNpbmc6XCJzd2luZ1wifSxzZXR1cDp0LHN0ZXA6dCxwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPWUuZWFzaW5nW24uZWFzaW5nXSxhPW4uZHVyYXRpb24scz1uLmRlbGF5fHwwLGw9ci5ub3coKStzLGM9bCthOzA9PT1hPyh0LnN0ZXAoMSksdC5hYm9ydCgpKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXt2YXIgbixzLGQsdTt0Ll9zdG9wcGVkfHwobj1yLm5vdygpLHM9ci5saW1pdFZhbHVlKG4tbCwwLGEpLGQ9cy9hLHU9aShkLHMsMCwxLGEpLHQuc3RlcCh1KSxjPm4/byhlKTp0LmFib3J0KCkpfTtlKCl9LHMpfSxhYm9ydDpmdW5jdGlvbigpe3RoaXMuX3N0b3BwZWQ9ITB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFib3J0KCl9fSksbD1mdW5jdGlvbigpe3RoaXMuX2l0ZW1zPVtdfTtsLnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24oZSx0KXt0aGlzLl9pdGVtcy5wdXNoKHtuYW1lOmUsdHlwZTp0fSl9LGNyZWF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMuX2l0ZW1zO2lmKHQmJnQudHlwZSlmb3IoaT10LnR5cGUudG9Mb3dlckNhc2UoKSxyPTA7by5sZW5ndGg+cjtyKyspaWYob1tyXS5uYW1lLnRvTG93ZXJDYXNlKCk9PT1pKXtuPW9bcl07YnJlYWt9cmV0dXJuIG4/bmV3IG4udHlwZShlLHQpOnZvaWQgMH19LGwuY3VycmVudD1uZXcgbCxzLmNyZWF0ZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY3VycmVudC5jcmVhdGUoZSx0LG4pfSxhKG4uZHJhd2luZyx7QW5pbWF0aW9uOnMsQW5pbWF0aW9uRmFjdG9yeTpsfSl9KHdpbmRvdy5rZW5kby5qUXVlcnksTWF0aCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbixpPXMudWkudmFsaWRhdG9yLnJ1bGVSZXNvbHZlcnN8fHt9LHI9e307Zm9yKG4gaW4gaSllLmV4dGVuZCghMCxyLGlbbl0ucmVzb2x2ZSh0KSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8mYW1wL2csXCImYW1wO1wiKS5yZXBsYWNlKC8mcXVvdDsvZywnXCInKS5yZXBsYWNlKC8mIzM5Oy9nLFwiJ1wiKS5yZXBsYWNlKC8mbHQ7L2csXCI8XCIpLnJlcGxhY2UoLyZndDsvZyxcIj5cIil9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT0oZStcIlwiKS5zcGxpdChcIi5cIiksZS5sZW5ndGg+MT9lWzFdLmxlbmd0aDowfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGUoZS5wYXJzZUhUTUw/ZS5wYXJzZUhUTUwodCk6dCl9ZnVuY3Rpb24gbyh0LG4pe3ZhciBpLHIsbyxhLGw9ZSgpO2ZvcihvPTAsYT10Lmxlbmd0aDthPm87bysrKWk9dFtvXSx1LnRlc3QoaS5jbGFzc05hbWUpJiYocj1pLmdldEF0dHJpYnV0ZShzLmF0dHIoXCJmb3JcIikpLHI9PT1uJiYobD1sLmFkZChpKSkpO3JldHVybiBsfXZhciBhLHM9d2luZG93LmtlbmRvLGw9cy51aS5XaWRnZXQsYz1cIi5rZW5kb1ZhbGlkYXRvclwiLGQ9XCJrLWludmFsaWQtbXNnXCIsdT1SZWdFeHAoZCxcImlcIiksaD1cImstaW52YWxpZFwiLHA9L14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pLGY9L14oaHR0cHM/fGZ0cCk6XFwvXFwvKCgoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDopKkApPygoKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKSl8KCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuPykoOlxcZCopPykoXFwvKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSsoXFwvKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKikqKT8pPyhcXD8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFtcXHVFMDAwLVxcdUY4RkZdfFxcL3xcXD8pKik/KFxcIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2ksZz1cIjppbnB1dDpub3QoOmJ1dHRvbixbdHlwZT1zdWJtaXRdLFt0eXBlPXJlc2V0XSxbZGlzYWJsZWRdLFtyZWFkb25seV0pXCIsbT1cIjpjaGVja2JveDpub3QoW2Rpc2FibGVkXSxbcmVhZG9ubHldKVwiLHY9XCJbdHlwZT1udW1iZXJdLFt0eXBlPXJhbmdlXVwiLF89XCJibHVyXCIseT1cIm5hbWVcIix3PVwiZm9ybVwiLGI9XCJub3ZhbGlkYXRlXCIsaz1lLnByb3h5LHg9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9UmVnRXhwKFwiXig/OlwiK3QrXCIpJFwiKSksdC50ZXN0KGUpfSxDPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLnZhbCgpO3JldHVybiBlLmZpbHRlcih0KS5sZW5ndGgmJlwiXCIhPT1pP3goaSxuKTohMH0sUz1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aD9udWxsIT1lWzBdLmF0dHJpYnV0ZXNbdF06ITF9O3MudWkudmFsaWRhdG9yfHwocy51aS52YWxpZGF0b3I9e3J1bGVzOnt9LG1lc3NhZ2VzOnt9fSksYT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLGkpe3ZhciByPXRoaXMsbz10KG4pLGE9XCJbXCIrcy5hdHRyKFwidmFsaWRhdGVcIikrXCIhPWZhbHNlXVwiO2k9aXx8e30saS5ydWxlcz1lLmV4dGVuZCh7fSxzLnVpLnZhbGlkYXRvci5ydWxlcyxvLnJ1bGVzLGkucnVsZXMpLGkubWVzc2FnZXM9ZS5leHRlbmQoe30scy51aS52YWxpZGF0b3IubWVzc2FnZXMsby5tZXNzYWdlcyxpLm1lc3NhZ2VzKSxsLmZuLmluaXQuY2FsbChyLG4saSksci5fZXJyb3JUZW1wbGF0ZT1zLnRlbXBsYXRlKHIub3B0aW9ucy5lcnJvclRlbXBsYXRlKSxyLmVsZW1lbnQuaXModykmJnIuZWxlbWVudC5hdHRyKGIsYiksci5faW5wdXRTZWxlY3Rvcj1nK2Esci5fY2hlY2tib3hTZWxlY3Rvcj1tK2Esci5fZXJyb3JzPXt9LHIuX2F0dGFjaEV2ZW50cygpLHIuX2lzVmFsaWRhdGVkPSExfSxldmVudHM6W1widmFsaWRhdGVcIixcImNoYW5nZVwiXSxvcHRpb25zOntuYW1lOlwiVmFsaWRhdG9yXCIsZXJyb3JUZW1wbGF0ZTonPHNwYW4gY2xhc3M9XCJrLXdpZGdldCBrLXRvb2x0aXAgay10b29sdGlwLXZhbGlkYXRpb25cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXdhcm5pbmdcIj4gPC9zcGFuPiAjPW1lc3NhZ2UjPC9zcGFuPicsbWVzc2FnZXM6e3JlcXVpcmVkOlwiezB9IGlzIHJlcXVpcmVkXCIscGF0dGVybjpcInswfSBpcyBub3QgdmFsaWRcIixtaW46XCJ7MH0gc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB7MX1cIixtYXg6XCJ7MH0gc2hvdWxkIGJlIHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0byB7MX1cIixzdGVwOlwiezB9IGlzIG5vdCB2YWxpZFwiLGVtYWlsOlwiezB9IGlzIG5vdCB2YWxpZCBlbWFpbFwiLHVybDpcInswfSBpcyBub3QgdmFsaWQgVVJMXCIsZGF0ZTpcInswfSBpcyBub3QgdmFsaWQgZGF0ZVwifSxydWxlczp7cmVxdWlyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maWx0ZXIoXCJbdHlwZT1jaGVja2JveF1cIikubGVuZ3RoJiYhZS5pcyhcIjpjaGVja2VkXCIpLG49ZS52YWwoKTtyZXR1cm4hKFMoZSxcInJlcXVpcmVkXCIpJiYoXCJcIj09PW58fCFufHx0KSl9LHBhdHRlcm46ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVyKFwiW3R5cGU9dGV4dF0sW3R5cGU9ZW1haWxdLFt0eXBlPXVybF0sW3R5cGU9dGVsXSxbdHlwZT1zZWFyY2hdLFt0eXBlPXBhc3N3b3JkXVwiKS5maWx0ZXIoXCJbcGF0dGVybl1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKT94KGUudmFsKCksZS5hdHRyKFwicGF0dGVyblwiKSk6ITB9LG1pbjpmdW5jdGlvbihlKXtpZihlLmZpbHRlcih2K1wiLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPW51bWJlcl1cIikuZmlsdGVyKFwiW21pbl1cIikubGVuZ3RoJiZcIlwiIT09ZS52YWwoKSl7dmFyIHQ9cGFyc2VGbG9hdChlLmF0dHIoXCJtaW5cIikpfHwwLG49cy5wYXJzZUZsb2F0KGUudmFsKCkpO3JldHVybiBuPj10fXJldHVybiEwfSxtYXg6ZnVuY3Rpb24oZSl7aWYoZS5maWx0ZXIoditcIixbXCIrcy5hdHRyKFwidHlwZVwiKStcIj1udW1iZXJdXCIpLmZpbHRlcihcIlttYXhdXCIpLmxlbmd0aCYmXCJcIiE9PWUudmFsKCkpe3ZhciB0PXBhcnNlRmxvYXQoZS5hdHRyKFwibWF4XCIpKXx8MCxuPXMucGFyc2VGbG9hdChlLnZhbCgpKTtyZXR1cm4gdD49bn1yZXR1cm4hMH0sc3RlcDpmdW5jdGlvbihlKXtpZihlLmZpbHRlcih2K1wiLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPW51bWJlcl1cIikuZmlsdGVyKFwiW3N0ZXBdXCIpLmxlbmd0aCYmXCJcIiE9PWUudmFsKCkpe3ZhciB0LG49cGFyc2VGbG9hdChlLmF0dHIoXCJtaW5cIikpfHwwLHI9cGFyc2VGbG9hdChlLmF0dHIoXCJzdGVwXCIpKXx8MSxvPXBhcnNlRmxvYXQoZS52YWwoKSksYT1pKHIpO3JldHVybiBhPyh0PU1hdGgucG93KDEwLGEpLChvLW4pKnQlKHIqdCkvTWF0aC5wb3coMTAwLGEpPT09MCk6KG8tbiklcj09PTB9cmV0dXJuITB9LGVtYWlsOmZ1bmN0aW9uKGUpe3JldHVybiBDKGUsXCJbdHlwZT1lbWFpbF0sW1wiK3MuYXR0cihcInR5cGVcIikrXCI9ZW1haWxdXCIscCl9LHVybDpmdW5jdGlvbihlKXtyZXR1cm4gQyhlLFwiW3R5cGU9dXJsXSxbXCIrcy5hdHRyKFwidHlwZVwiKStcIj11cmxdXCIsZil9LGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVyKFwiW3R5cGVePWRhdGVdLFtcIitzLmF0dHIoXCJ0eXBlXCIpK1wiPWRhdGVdXCIpLmxlbmd0aCYmXCJcIiE9PWUudmFsKCk/bnVsbCE9PXMucGFyc2VEYXRlKGUudmFsKCksZS5hdHRyKHMuYXR0cihcImZvcm1hdFwiKSkpOiEwfX0sdmFsaWRhdGVPbkJsdXI6ITB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtsLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub2ZmKGMpfSx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1ZhbGlkYXRlZD8wPT09dGhpcy5lcnJvcnMoKS5sZW5ndGg6ITF9LF9zdWJtaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudmFsaWRhdGUoKT8hMDooZS5zdG9wUHJvcGFnYXRpb24oKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSwhMSl9LF9jaGVja0VsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy52YWx1ZSgpO3RoaXMudmFsaWRhdGVJbnB1dChlKSx0aGlzLnZhbHVlKCkhPT10JiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIil9LF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5pcyh3KSYmdC5lbGVtZW50Lm9uKFwic3VibWl0XCIrYyxrKHQuX3N1Ym1pdCx0KSksdC5vcHRpb25zLnZhbGlkYXRlT25CbHVyJiYodC5lbGVtZW50LmlzKGcpPyh0LmVsZW1lbnQub24oXytjLGZ1bmN0aW9uKCl7dC5fY2hlY2tFbGVtZW50KHQuZWxlbWVudCl9KSx0LmVsZW1lbnQuaXMobSkmJnQuZWxlbWVudC5vbihcImNsaWNrXCIrYyxmdW5jdGlvbigpe3QuX2NoZWNrRWxlbWVudCh0LmVsZW1lbnQpfSkpOih0LmVsZW1lbnQub24oXytjLHQuX2lucHV0U2VsZWN0b3IsZnVuY3Rpb24oKXt0Ll9jaGVja0VsZW1lbnQoZSh0aGlzKSl9KSx0LmVsZW1lbnQub24oXCJjbGlja1wiK2MsdC5fY2hlY2tib3hTZWxlY3RvcixmdW5jdGlvbigpe3QuX2NoZWNrRWxlbWVudChlKHRoaXMpKX0pKSl9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj0hMSxvPXRoaXMudmFsdWUoKTtpZih0aGlzLl9lcnJvcnM9e30sdGhpcy5lbGVtZW50LmlzKGcpKXI9dGhpcy52YWxpZGF0ZUlucHV0KHRoaXMuZWxlbWVudCk7ZWxzZXtmb3IoaT0hMSxlPXRoaXMuZWxlbWVudC5maW5kKHRoaXMuX2lucHV0U2VsZWN0b3IpLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspdGhpcy52YWxpZGF0ZUlucHV0KGUuZXEodCkpfHwoaT0hMCk7cj0haX1yZXR1cm4gdGhpcy50cmlnZ2VyKFwidmFsaWRhdGVcIix7dmFsaWQ6cn0pLG8hPT1yJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIikscn0sdmFsaWRhdGVJbnB1dDpmdW5jdGlvbih0KXt2YXIgaSxvLGEsbCxjLHUscCxmLGc7cmV0dXJuIHQ9ZSh0KSx0aGlzLl9pc1ZhbGlkYXRlZD0hMCxpPXRoaXMsbz1pLl9lcnJvclRlbXBsYXRlLGE9aS5fY2hlY2tWYWxpZGl0eSh0KSxsPWEudmFsaWQsYz1cIi5cIitkLHU9dC5hdHRyKHkpfHxcIlwiLHA9aS5fZmluZE1lc3NhZ2VDb250YWluZXIodSkuYWRkKHQubmV4dChjKS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3JldHVybiB0LmZpbHRlcihcIltcIitzLmF0dHIoXCJmb3JcIikrXCJdXCIpLmxlbmd0aD90LmF0dHIocy5hdHRyKFwiZm9yXCIpKT09PXU6ITB9KSkuaGlkZSgpLHQucmVtb3ZlQXR0cihcImFyaWEtaW52YWxpZFwiKSxsP2RlbGV0ZSBpLl9lcnJvcnNbdV06KGY9aS5fZXh0cmFjdE1lc3NhZ2UodCxhLmtleSksaS5fZXJyb3JzW3VdPWYsZz1yKG8oe21lc3NhZ2U6bihmKX0pKSxpLl9kZWNvcmF0ZU1lc3NhZ2VDb250YWluZXIoZyx1KSxwLnJlcGxhY2VXaXRoKGcpLmxlbmd0aHx8Zy5pbnNlcnRBZnRlcih0KSxnLnNob3coKSx0LmF0dHIoXCJhcmlhLWludmFsaWRcIiwhMCkpLHQudG9nZ2xlQ2xhc3MoaCwhbCksbH0saGlkZU1lc3NhZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVwiLlwiK2Qsbj1lLmVsZW1lbnQ7bi5pcyhnKT9uLm5leHQodCkuaGlkZSgpOm4uZmluZCh0KS5oaWRlKCl9LF9maW5kTWVzc2FnZUNvbnRhaW5lcjpmdW5jdGlvbih0KXt2YXIgbixpLHIsYT1zLnVpLnZhbGlkYXRvci5tZXNzYWdlTG9jYXRvcnMsbD1lKCk7Zm9yKGk9MCxyPXRoaXMuZWxlbWVudC5sZW5ndGg7cj5pO2krKylsPWwuYWRkKG8odGhpcy5lbGVtZW50W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSx0KSk7Zm9yKG4gaW4gYSlsPWwuYWRkKGFbbl0ubG9jYXRlKHRoaXMuZWxlbWVudCx0KSk7cmV0dXJuIGx9LF9kZWNvcmF0ZU1lc3NhZ2VDb250YWluZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXMudWkudmFsaWRhdG9yLm1lc3NhZ2VMb2NhdG9ycztlLmFkZENsYXNzKGQpLmF0dHIocy5hdHRyKFwiZm9yXCIpLHR8fFwiXCIpO2ZvcihuIGluIGkpaVtuXS5kZWNvcmF0ZShlLHQpO2UuYXR0cihcInJvbGVcIixcImFsZXJ0XCIpXG59LF9leHRyYWN0TWVzc2FnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXNbdF0scj1lLmF0dHIoeSk7cmV0dXJuIGk9cy5pc0Z1bmN0aW9uKGkpP2koZSk6aSxzLmZvcm1hdChlLmF0dHIocy5hdHRyKHQrXCItbXNnXCIpKXx8ZS5hdHRyKFwidmFsaWRhdGlvbk1lc3NhZ2VcIil8fGUuYXR0cihcInRpdGxlXCIpfHxpfHxcIlwiLHIsZS5hdHRyKHQpKX0sX2NoZWNrVmFsaWRpdHk6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLm9wdGlvbnMucnVsZXM7Zm9yKHQgaW4gbilpZighblt0XS5jYWxsKHRoaXMsZSkpcmV0dXJue3ZhbGlkOiExLGtleTp0fTtyZXR1cm57dmFsaWQ6ITB9fSxlcnJvcnM6ZnVuY3Rpb24oKXt2YXIgZSx0PVtdLG49dGhpcy5fZXJyb3JzO2ZvcihlIGluIG4pdC5wdXNoKG5bZV0pO3JldHVybiB0fX0pLHMudWkucGx1Z2luKGEpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG49ZS54LmxvY2F0aW9uLGk9ZS55LmxvY2F0aW9uLHI9dC54LmxvY2F0aW9uLG89dC55LmxvY2F0aW9uLGE9bi1yLHM9aS1vO3JldHVybntjZW50ZXI6e3g6KG4rcikvMix5OihpK28pLzJ9LGRpc3RhbmNlOk1hdGguc3FydChhKmErcypzKX19ZnVuY3Rpb24gbihlKXt2YXIgdCxuLGkscj1bXSxhPWUub3JpZ2luYWxFdmVudCxzPWUuY3VycmVudFRhcmdldCxsPTA7aWYoZS5hcGkpci5wdXNoKHtpZDoyLGV2ZW50OmUsdGFyZ2V0OmUudGFyZ2V0LGN1cnJlbnRUYXJnZXQ6ZS50YXJnZXQsbG9jYXRpb246ZSx0eXBlOlwiYXBpXCJ9KTtlbHNlIGlmKGUudHlwZS5tYXRjaCgvdG91Y2gvKSlmb3Iobj1hP2EuY2hhbmdlZFRvdWNoZXM6W10sdD1uLmxlbmd0aDt0Pmw7bCsrKWk9bltsXSxyLnB1c2goe2xvY2F0aW9uOmksZXZlbnQ6ZSx0YXJnZXQ6aS50YXJnZXQsY3VycmVudFRhcmdldDpzLGlkOmkuaWRlbnRpZmllcix0eXBlOlwidG91Y2hcIn0pO2Vsc2Ugci5wdXNoKG8ucG9pbnRlcnN8fG8ubXNQb2ludGVycz97bG9jYXRpb246YSxldmVudDplLHRhcmdldDplLnRhcmdldCxjdXJyZW50VGFyZ2V0OnMsaWQ6YS5wb2ludGVySWQsdHlwZTpcInBvaW50ZXJcIn06e2lkOjEsZXZlbnQ6ZSx0YXJnZXQ6ZS50YXJnZXQsY3VycmVudFRhcmdldDpzLGxvY2F0aW9uOmUsdHlwZTpcIm1vdXNlXCJ9KTtyZXR1cm4gcn1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD1yLmV2ZW50TWFwLnVwLnNwbGl0KFwiIFwiKSxuPTAsaT10Lmxlbmd0aDtpPm47bisrKWUodFtuXSl9dmFyIHI9d2luZG93LmtlbmRvLG89ci5zdXBwb3J0LGE9d2luZG93LmRvY3VtZW50LHM9ci5DbGFzcyxsPXIuT2JzZXJ2YWJsZSxjPWUubm93LGQ9ZS5leHRlbmQsdT1vLm1vYmlsZU9TLGg9dSYmdS5hbmRyb2lkLHA9ODAwLGY9by5icm93c2VyLm1zaWU/NTowLGc9XCJwcmVzc1wiLG09XCJob2xkXCIsdj1cInNlbGVjdFwiLF89XCJzdGFydFwiLHk9XCJtb3ZlXCIsdz1cImVuZFwiLGI9XCJjYW5jZWxcIixrPVwidGFwXCIseD1cInJlbGVhc2VcIixDPVwiZ2VzdHVyZXN0YXJ0XCIsUz1cImdlc3R1cmVjaGFuZ2VcIixUPVwiZ2VzdHVyZWVuZFwiLEQ9XCJnZXN0dXJldGFwXCIsQT17YXBpOjAsdG91Y2g6MCxtb3VzZTo5LHBvaW50ZXI6OX0sRT1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5heGlzPWUsbi5fdXBkYXRlTG9jYXRpb25EYXRhKHQpLG4uc3RhcnRMb2NhdGlvbj1uLmxvY2F0aW9uLG4udmVsb2NpdHk9bi5kZWx0YT0wLG4udGltZVN0YW1wPWMoKX0sbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZVtcInBhZ2VcIit0LmF4aXNdLGk9YygpLHI9aS10LnRpbWVTdGFtcHx8MTsobnx8IWgpJiYodC5kZWx0YT1uLXQubG9jYXRpb24sdC5fdXBkYXRlTG9jYXRpb25EYXRhKGUpLHQuaW5pdGlhbERlbHRhPW4tdC5zdGFydExvY2F0aW9uLHQudmVsb2NpdHk9dC5kZWx0YS9yLHQudGltZVN0YW1wPWkpfSxfdXBkYXRlTG9jYXRpb25EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmF4aXM7dC5sb2NhdGlvbj1lW1wicGFnZVwiK25dLHQuY2xpZW50PWVbXCJjbGllbnRcIituXSx0LnNjcmVlbj1lW1wic2NyZWVuXCIrbl19fSksTT1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbil7ZCh0aGlzLHt4Om5ldyBFKFwiWFwiLG4ubG9jYXRpb24pLHk6bmV3IEUoXCJZXCIsbi5sb2NhdGlvbiksdHlwZTpuLnR5cGUsdGhyZXNob2xkOmUudGhyZXNob2xkfHxBW24udHlwZV0sdXNlckV2ZW50czplLHRhcmdldDp0LGN1cnJlbnRUYXJnZXQ6bi5jdXJyZW50VGFyZ2V0LGluaXRpYWxUb3VjaDpuLnRhcmdldCxpZDpuLmlkLHByZXNzRXZlbnQ6bixfbW92ZWQ6ITEsX2ZpbmlzaGVkOiExfSl9LHByZXNzOmZ1bmN0aW9uKCl7dGhpcy5faG9sZFRpbWVvdXQ9c2V0VGltZW91dChlLnByb3h5KHRoaXMsXCJfaG9sZFwiKSx0aGlzLnVzZXJFdmVudHMubWluSG9sZCksdGhpcy5fdHJpZ2dlcihnLHRoaXMucHJlc3NFdmVudCl9LF9ob2xkOmZ1bmN0aW9uKCl7dGhpcy5fdHJpZ2dlcihtLHRoaXMucHJlc3NFdmVudCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fZmluaXNoZWQpe2lmKHQueC5tb3ZlKGUubG9jYXRpb24pLHQueS5tb3ZlKGUubG9jYXRpb24pLCF0Ll9tb3ZlZCl7aWYodC5fd2l0aGluSWdub3JlVGhyZXNob2xkKCkpcmV0dXJuO2lmKFAuY3VycmVudCYmUC5jdXJyZW50IT09dC51c2VyRXZlbnRzKXJldHVybiB0LmRpc3Bvc2UoKTt0Ll9zdGFydChlKX10Ll9maW5pc2hlZHx8dC5fdHJpZ2dlcih5LGUpfX0sZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5lbmRUaW1lPWMoKSx0Ll9maW5pc2hlZHx8KHQuX2ZpbmlzaGVkPSEwLHQuX3RyaWdnZXIoeCxlKSx0Ll9tb3ZlZD90Ll90cmlnZ2VyKHcsZSk6dC5fdHJpZ2dlcihrLGUpLGNsZWFyVGltZW91dCh0Ll9ob2xkVGltZW91dCksdC5kaXNwb3NlKCkpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51c2VyRXZlbnRzLG49dC50b3VjaGVzO3RoaXMuX2ZpbmlzaGVkPSEwLHRoaXMucHJlc3NFdmVudD1udWxsLGNsZWFyVGltZW91dCh0aGlzLl9ob2xkVGltZW91dCksbi5zcGxpY2UoZS5pbkFycmF5KHRoaXMsbiksMSl9LHNraXA6ZnVuY3Rpb24oKXt0aGlzLmRpc3Bvc2UoKX0sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlKCl9LGlzTW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW92ZWR9LF9zdGFydDpmdW5jdGlvbihlKXtjbGVhclRpbWVvdXQodGhpcy5faG9sZFRpbWVvdXQpLHRoaXMuc3RhcnRUaW1lPWMoKSx0aGlzLl9tb3ZlZD0hMCx0aGlzLl90cmlnZ2VyKF8sZSl9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPXQuZXZlbnQscj17dG91Y2g6bix4Om4ueCx5Om4ueSx0YXJnZXQ6bi50YXJnZXQsZXZlbnQ6aX07bi51c2VyRXZlbnRzLm5vdGlmeShlLHIpJiZpLnByZXZlbnREZWZhdWx0KCl9LF93aXRoaW5JZ25vcmVUaHJlc2hvbGQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnguaW5pdGlhbERlbHRhLHQ9dGhpcy55LmluaXRpYWxEZWx0YTtyZXR1cm4gTWF0aC5zcXJ0KGUqZSt0KnQpPD10aGlzLnRocmVzaG9sZH19KSxQPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIHMsYyx1LGg9dGhpcyxBPXIuZ3VpZCgpO249bnx8e30scz1oLmZpbHRlcj1uLmZpbHRlcixoLnRocmVzaG9sZD1uLnRocmVzaG9sZHx8ZixoLm1pbkhvbGQ9bi5taW5Ib2xkfHxwLGgudG91Y2hlcz1bXSxoLl9tYXhUb3VjaGVzPW4ubXVsdGlUb3VjaD8yOjEsaC5hbGxvd1NlbGVjdGlvbj1uLmFsbG93U2VsZWN0aW9uLGguY2FwdHVyZVVwSWZNb3ZlZD1uLmNhcHR1cmVVcElmTW92ZWQsaC5ldmVudE5TPUEsdD1lKHQpLmhhbmRsZXIoaCksbC5mbi5pbml0LmNhbGwoaCksZChoLHtlbGVtZW50OnQsc3VyZmFjZTplKG4uZ2xvYmFsJiYhby50b3VjaD9hLmRvY3VtZW50RWxlbWVudDpuLnN1cmZhY2V8fHQpLHN0b3BQcm9wYWdhdGlvbjpuLnN0b3BQcm9wYWdhdGlvbixwcmVzc2VkOiExfSksaC5zdXJmYWNlLmhhbmRsZXIoaCkub24oci5hcHBseUV2ZW50TWFwKFwibW92ZVwiLEEpLFwiX21vdmVcIikub24oci5hcHBseUV2ZW50TWFwKFwidXAgY2FuY2VsXCIsQSksXCJfZW5kXCIpLHQub24oci5hcHBseUV2ZW50TWFwKFwiZG93blwiLEEpLHMsXCJfc3RhcnRcIiksKG8ucG9pbnRlcnN8fG8ubXNQb2ludGVycykmJnQuY3NzKFwiLW1zLXRvdWNoLWFjdGlvblwiLFwicGluY2gtem9vbSBkb3VibGUtdGFwLXpvb21cIiksbi5wcmV2ZW50RHJhZ0V2ZW50JiZ0Lm9uKHIuYXBwbHlFdmVudE1hcChcImRyYWdzdGFydFwiLEEpLHIucHJldmVudERlZmF1bHQpLHQub24oci5hcHBseUV2ZW50TWFwKFwibW91c2Vkb3duXCIsQSkscyx7cm9vdDp0fSxcIl9zZWxlY3RcIiksaC5jYXB0dXJlVXBJZk1vdmVkJiZvLmV2ZW50Q2FwdHVyZSYmKGM9aC5zdXJmYWNlWzBdLHU9ZS5wcm94eShoLnByZXZlbnRJZk1vdmluZyxoKSxpKGZ1bmN0aW9uKGUpe2MuYWRkRXZlbnRMaXN0ZW5lcihlLHUsITApfSkpLGguYmluZChbZyxtLGssXyx5LHcseCxiLEMsUyxULEQsdl0sbil9LHByZXZlbnRJZk1vdmluZzpmdW5jdGlvbihlKXt0aGlzLl9pc01vdmVkKCkmJmUucHJldmVudERlZmF1bHQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpczt0Ll9kZXN0cm95ZWR8fCh0Ll9kZXN0cm95ZWQ9ITAsdC5jYXB0dXJlVXBJZk1vdmVkJiZvLmV2ZW50Q2FwdHVyZSYmKGU9dC5zdXJmYWNlWzBdLGkoZnVuY3Rpb24obil7ZS5yZW1vdmVFdmVudExpc3RlbmVyKG4sdC5wcmV2ZW50SWZNb3ZpbmcpfSkpLHQuZWxlbWVudC5rZW5kb0Rlc3Ryb3kodC5ldmVudE5TKSx0LnN1cmZhY2Uua2VuZG9EZXN0cm95KHQuZXZlbnROUyksdC5lbGVtZW50LnJlbW92ZURhdGEoXCJoYW5kbGVyXCIpLHQuc3VyZmFjZS5yZW1vdmVEYXRhKFwiaGFuZGxlclwiKSx0Ll9kaXNwb3NlQWxsKCksdC51bmJpbmQoKSxkZWxldGUgdC5zdXJmYWNlLGRlbGV0ZSB0LmVsZW1lbnQsZGVsZXRlIHQuY3VycmVudFRhcmdldCl9LGNhcHR1cmU6ZnVuY3Rpb24oKXtQLmN1cnJlbnQ9dGhpc30sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zZUFsbCgpLHRoaXMudHJpZ2dlcihiKX0sbm90aWZ5OmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkudG91Y2hlcztpZih0aGlzLl9pc011bHRpVG91Y2goKSl7c3dpdGNoKGUpe2Nhc2UgeTplPVM7YnJlYWs7Y2FzZSB3OmU9VDticmVhaztjYXNlIGs6ZT1EfWQobix7dG91Y2hlczpyfSx0KHJbMF0sclsxXSkpfXJldHVybiB0aGlzLnRyaWdnZXIoZSxkKG4se3R5cGU6ZX0pKX0scHJlc3M6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2FwaUNhbGwoXCJfc3RhcnRcIixlLHQsbil9LG1vdmU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9hcGlDYWxsKFwiX21vdmVcIixlLHQpfSxlbmQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9hcGlDYWxsKFwiX2VuZFwiLGUsdCl9LF9pc011bHRpVG91Y2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b3VjaGVzLmxlbmd0aD4xfSxfbWF4VG91Y2hlc1JlYWNoZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b3VjaGVzLmxlbmd0aD49dGhpcy5fbWF4VG91Y2hlc30sX2Rpc3Bvc2VBbGw6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy50b3VjaGVzO2UubGVuZ3RoPjA7KWUucG9wKCkuZGlzcG9zZSgpfSxfaXNNb3ZlZDpmdW5jdGlvbigpe3JldHVybiBlLmdyZXAodGhpcy50b3VjaGVzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzTW92ZWQoKX0pLmxlbmd0aH0sX3NlbGVjdDpmdW5jdGlvbihlKXsoIXRoaXMuYWxsb3dTZWxlY3Rpb258fHRoaXMudHJpZ2dlcih2LHtldmVudDplfSkpJiZlLnByZXZlbnREZWZhdWx0KCl9LF9zdGFydDpmdW5jdGlvbih0KXt2YXIgaSxyLG89dGhpcyxhPTAscz1vLmZpbHRlcixsPW4odCksYz1sLmxlbmd0aCxkPXQud2hpY2g7aWYoIShkJiZkPjF8fG8uX21heFRvdWNoZXNSZWFjaGVkKCkpKWZvcihQLmN1cnJlbnQ9bnVsbCxvLmN1cnJlbnRUYXJnZXQ9dC5jdXJyZW50VGFyZ2V0LG8uc3RvcFByb3BhZ2F0aW9uJiZ0LnN0b3BQcm9wYWdhdGlvbigpO2M+YSYmIW8uX21heFRvdWNoZXNSZWFjaGVkKCk7YSsrKXI9bFthXSxpPXM/ZShyLmN1cnJlbnRUYXJnZXQpOm8uZWxlbWVudCxpLmxlbmd0aCYmKHI9bmV3IE0obyxpLHIpLG8udG91Y2hlcy5wdXNoKHIpLHIucHJlc3MoKSxvLl9pc011bHRpVG91Y2goKSYmby5ub3RpZnkoXCJnZXN0dXJlc3RhcnRcIix7fSkpfSxfbW92ZTpmdW5jdGlvbihlKXt0aGlzLl9lYWNoVG91Y2goXCJtb3ZlXCIsZSl9LF9lbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fZWFjaFRvdWNoKFwiZW5kXCIsZSl9LF9lYWNoVG91Y2g6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG8sYSxzPXRoaXMsbD17fSxjPW4odCksZD1zLnRvdWNoZXM7Zm9yKGk9MDtkLmxlbmd0aD5pO2krKylyPWRbaV0sbFtyLmlkXT1yO2ZvcihpPTA7Yy5sZW5ndGg+aTtpKyspbz1jW2ldLGE9bFtvLmlkXSxhJiZhW2VdKG8pfSxfYXBpQ2FsbDpmdW5jdGlvbih0LG4saSxyKXt0aGlzW3RdKHthcGk6ITAscGFnZVg6bixwYWdlWTppLGNsaWVudFg6bixjbGllbnRZOmksdGFyZ2V0OmUocnx8dGhpcy5lbGVtZW50KVswXSxzdG9wUHJvcGFnYXRpb246ZS5ub29wLHByZXZlbnREZWZhdWx0OmUubm9vcH0pfX0pO1AuZGVmYXVsdFRocmVzaG9sZD1mdW5jdGlvbihlKXtmPWV9LFAubWluSG9sZD1mdW5jdGlvbihlKXtwPWV9LHIuZ2V0VG91Y2hlcz1uLHIudG91Y2hEZWx0YT10LHIuVXNlckV2ZW50cz1QfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCxuKXt0cnl7cmV0dXJuIGUuY29udGFpbnModCxuKXx8dD09bn1jYXRjaChpKXtyZXR1cm4hMX19ZnVuY3Rpb24gaShlLHQpe3JldHVybiBwYXJzZUludChlLmNzcyh0KSwxMCl8fDB9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBNYXRoLm1pbihNYXRoLm1heChlLHQubWluKSx0Lm1heCl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWsoZSkscj1uLmxlZnQraShlLFwiYm9yZGVyTGVmdFdpZHRoXCIpK2koZSxcInBhZGRpbmdMZWZ0XCIpLG89bi50b3AraShlLFwiYm9yZGVyVG9wV2lkdGhcIikraShlLFwicGFkZGluZ1RvcFwiKSxhPXIrZS53aWR0aCgpLXQub3V0ZXJXaWR0aCghMCkscz1vK2UuaGVpZ2h0KCktdC5vdXRlckhlaWdodCghMCk7cmV0dXJue3g6e21pbjpyLG1heDphfSx5OnttaW46byxtYXg6c319fWZ1bmN0aW9uIGEoZSxuLGkpe2Zvcih2YXIgcixvLGE9MCxzPW4mJm4ubGVuZ3RoLGw9aSYmaS5sZW5ndGg7ZSYmZS5wYXJlbnROb2RlOyl7Zm9yKGE9MDtzPmE7YSsrKWlmKHI9blthXSxyLmVsZW1lbnRbMF09PT1lKXJldHVybnt0YXJnZXQ6cix0YXJnZXRFbGVtZW50OmV9O2ZvcihhPTA7bD5hO2ErKylpZihvPWlbYV0sZi5tYXRjaGVzU2VsZWN0b3IuY2FsbChlLG8ub3B0aW9ucy5maWx0ZXIpKXJldHVybnt0YXJnZXQ6byx0YXJnZXRFbGVtZW50OmV9O2U9ZS5wYXJlbnROb2RlfXJldHVybiB0fXZhciBzLGwsYyxkLHUsaCxwPXdpbmRvdy5rZW5kbyxmPXAuc3VwcG9ydCxnPXdpbmRvdy5kb2N1bWVudCxtPXAuQ2xhc3Msdj1wLnVpLldpZGdldCxfPXAuT2JzZXJ2YWJsZSx5PXAuVXNlckV2ZW50cyx3PWUucHJveHksYj1lLmV4dGVuZCxrPXAuZ2V0T2Zmc2V0LHg9e30sQz17fSxTPXt9LFQ9cC5lbGVtZW50VW5kZXJDdXJzb3IsRD1cImtleXVwXCIsQT1cImNoYW5nZVwiLEU9XCJkcmFnc3RhcnRcIixNPVwiaG9sZFwiLFA9XCJkcmFnXCIsST1cImRyYWdlbmRcIix6PVwiZHJhZ2NhbmNlbFwiLEY9XCJkcmFnZW50ZXJcIixSPVwiZHJhZ2xlYXZlXCIsQj1cImRyb3BcIixMPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPXRbMF07aS5jYXB0dXJlPSExLHIuYWRkRXZlbnRMaXN0ZW5lcj8oZS5lYWNoKHAuZXZlbnRNYXAuZG93bi5zcGxpdChcIiBcIiksZnVuY3Rpb24oKXtyLmFkZEV2ZW50TGlzdGVuZXIodGhpcyx3KGkuX3ByZXNzLGkpLCEwKX0pLGUuZWFjaChwLmV2ZW50TWFwLnVwLnNwbGl0KFwiIFwiKSxmdW5jdGlvbigpe3IuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLHcoaS5fcmVsZWFzZSxpKSwhMCl9KSk6KGUuZWFjaChwLmV2ZW50TWFwLmRvd24uc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKCl7ci5hdHRhY2hFdmVudCh0aGlzLHcoaS5fcHJlc3MsaSkpfSksZS5lYWNoKHAuZXZlbnRNYXAudXAuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKCl7ci5hdHRhY2hFdmVudCh0aGlzLHcoaS5fcmVsZWFzZSxpKSl9KSksXy5mbi5pbml0LmNhbGwoaSksaS5iaW5kKFtcInByZXNzXCIsXCJyZWxlYXNlXCJdLG58fHt9KX0sY2FwdHVyZU5leHQ6ZnVuY3Rpb24oKXt0aGlzLmNhcHR1cmU9ITB9LGNhbmNlbENhcHR1cmU6ZnVuY3Rpb24oKXt0aGlzLmNhcHR1cmU9ITF9LF9wcmVzczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QudHJpZ2dlcihcInByZXNzXCIpLHQuY2FwdHVyZSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxfcmVsZWFzZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QudHJpZ2dlcihcInJlbGVhc2VcIiksdC5jYXB0dXJlJiYoZS5wcmV2ZW50RGVmYXVsdCgpLHQuY2FuY2VsQ2FwdHVyZSgpKX19KSxPPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7Xy5mbi5pbml0LmNhbGwobiksbi5mb3JjZWRFbmFibGVkPSExLGUuZXh0ZW5kKG4sdCksbi5zY2FsZT0xLG4uaG9yaXpvbnRhbD8obi5tZWFzdXJlPVwib2Zmc2V0V2lkdGhcIixuLnNjcm9sbFNpemU9XCJzY3JvbGxXaWR0aFwiLG4uYXhpcz1cInhcIik6KG4ubWVhc3VyZT1cIm9mZnNldEhlaWdodFwiLG4uc2Nyb2xsU2l6ZT1cInNjcm9sbEhlaWdodFwiLG4uYXhpcz1cInlcIil9LG1ha2VWaXJ0dWFsOmZ1bmN0aW9uKCl7ZS5leHRlbmQodGhpcyx7dmlydHVhbDohMCxmb3JjZWRFbmFibGVkOiEwLF92aXJ0dWFsTWluOjAsX3ZpcnR1YWxNYXg6MH0pfSx2aXJ0dWFsU2l6ZTpmdW5jdGlvbihlLHQpeyh0aGlzLl92aXJ0dWFsTWluIT09ZXx8dGhpcy5fdmlydHVhbE1heCE9PXQpJiYodGhpcy5fdmlydHVhbE1pbj1lLHRoaXMuX3ZpcnR1YWxNYXg9dCx0aGlzLnVwZGF0ZSgpKX0sb3V0T2ZCb3VuZHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+dGhpcy5tYXh8fHRoaXMubWluPmV9LGZvcmNlRW5hYmxlZDpmdW5jdGlvbigpe3RoaXMuZm9yY2VkRW5hYmxlZD0hMH0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lclswXVt0aGlzLm1lYXN1cmVdfSxnZXRUb3RhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnRbMF1bdGhpcy5zY3JvbGxTaXplXX0scmVzY2FsZTpmdW5jdGlvbihlKXt0aGlzLnNjYWxlPWV9LHVwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC52aXJ0dWFsP3QuX3ZpcnR1YWxNYXg6dC5nZXRUb3RhbCgpLGk9bip0LnNjYWxlLHI9dC5nZXRTaXplKCk7MCE9PW4mJih0Lm1heD10LnZpcnR1YWw/LXQuX3ZpcnR1YWxNaW46MCx0LnNpemU9cix0LnRvdGFsPWksdC5taW49TWF0aC5taW4odC5tYXgsci1pKSx0Lm1pblNjYWxlPXIvbix0LmNlbnRlck9mZnNldD0oaS1yKS8yLHQuZW5hYmxlZD10LmZvcmNlZEVuYWJsZWR8fGk+cixlfHx0LnRyaWdnZXIoQSx0KSl9fSksSD1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO18uZm4uaW5pdC5jYWxsKHQpLHQueD1uZXcgTyhiKHtob3Jpem9udGFsOiEwfSxlKSksdC55PW5ldyBPKGIoe2hvcml6b250YWw6ITF9LGUpKSx0LmNvbnRhaW5lcj1lLmNvbnRhaW5lcix0LmZvcmNlZE1pblNjYWxlPWUubWluU2NhbGUsdC5tYXhTY2FsZT1lLm1heFNjYWxlfHwxMDAsdC5iaW5kKEEsZSl9LHJlc2NhbGU6ZnVuY3Rpb24oZSl7dGhpcy54LnJlc2NhbGUoZSksdGhpcy55LnJlc2NhbGUoZSksdGhpcy5yZWZyZXNoKCl9LGNlbnRlckNvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJue3g6TWF0aC5taW4oMCwtdGhpcy54LmNlbnRlck9mZnNldCkseTpNYXRoLm1pbigwLC10aGlzLnkuY2VudGVyT2Zmc2V0KX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UueC51cGRhdGUoKSxlLnkudXBkYXRlKCksZS5lbmFibGVkPWUueC5lbmFibGVkfHxlLnkuZW5hYmxlZCxlLm1pblNjYWxlPWUuZm9yY2VkTWluU2NhbGV8fE1hdGgubWluKGUueC5taW5TY2FsZSxlLnkubWluU2NhbGUpLGUuZml0U2NhbGU9TWF0aC5tYXgoZS54Lm1pblNjYWxlLGUueS5taW5TY2FsZSksZS50cmlnZ2VyKEEpfX0pLE49Xy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztiKHQsZSksXy5mbi5pbml0LmNhbGwodCl9LG91dE9mQm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGltZW5zaW9uLm91dE9mQm91bmRzKHRoaXMubW92YWJsZVt0aGlzLmF4aXNdKX0sZHJhZ01vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZGltZW5zaW9uLGk9dC5heGlzLHI9dC5tb3ZhYmxlLG89cltpXStlO24uZW5hYmxlZCYmKChuLm1pbj5vJiYwPmV8fG8+bi5tYXgmJmU+MCkmJihlKj10LnJlc2lzdGFuY2UpLHIudHJhbnNsYXRlQXhpcyhpLGUpLHQudHJpZ2dlcihBLHQpKX19KSxWPW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89dGhpcztiKG8se2VsYXN0aWM6ITB9LGUpLGk9by5lbGFzdGljPy41OjAscj1vLm1vdmFibGUsby54PXQ9bmV3IE4oe2F4aXM6XCJ4XCIsZGltZW5zaW9uOm8uZGltZW5zaW9ucy54LHJlc2lzdGFuY2U6aSxtb3ZhYmxlOnJ9KSxvLnk9bj1uZXcgTih7YXhpczpcInlcIixkaW1lbnNpb246by5kaW1lbnNpb25zLnkscmVzaXN0YW5jZTppLG1vdmFibGU6cn0pLG8udXNlckV2ZW50cy5iaW5kKFtcIm1vdmVcIixcImVuZFwiLFwiZ2VzdHVyZXN0YXJ0XCIsXCJnZXN0dXJlY2hhbmdlXCJdLHtnZXN0dXJlc3RhcnQ6ZnVuY3Rpb24oZSl7by5nZXN0dXJlPWUsby5vZmZzZXQ9by5kaW1lbnNpb25zLmNvbnRhaW5lci5vZmZzZXQoKX0sZ2VzdHVyZWNoYW5nZTpmdW5jdGlvbihlKXt2YXIgaSxhLHMsbD1vLmdlc3R1cmUsYz1sLmNlbnRlcixkPWUuY2VudGVyLHU9ZS5kaXN0YW5jZS9sLmRpc3RhbmNlLGg9by5kaW1lbnNpb25zLm1pblNjYWxlLHA9by5kaW1lbnNpb25zLm1heFNjYWxlO2g+PXIuc2NhbGUmJjE+dSYmKHUrPS44KigxLXUpKSxyLnNjYWxlKnU+PXAmJih1PXAvci5zY2FsZSksYT1yLngrby5vZmZzZXQubGVmdCxzPXIueStvLm9mZnNldC50b3AsaT17eDooYS1jLngpKnUrZC54LWEseToocy1jLnkpKnUrZC55LXN9LHIuc2NhbGVXaXRoKHUpLHQuZHJhZ01vdmUoaS54KSxuLmRyYWdNb3ZlKGkueSksby5kaW1lbnNpb25zLnJlc2NhbGUoci5zY2FsZSksby5nZXN0dXJlPWUsZS5wcmV2ZW50RGVmYXVsdCgpfSxtb3ZlOmZ1bmN0aW9uKGUpe2UuZXZlbnQudGFyZ2V0LnRhZ05hbWUubWF0Y2goL3RleHRhcmVhfGlucHV0L2kpfHwodC5kaW1lbnNpb24uZW5hYmxlZHx8bi5kaW1lbnNpb24uZW5hYmxlZD8odC5kcmFnTW92ZShlLnguZGVsdGEpLG4uZHJhZ01vdmUoZS55LmRlbHRhKSxlLnByZXZlbnREZWZhdWx0KCkpOmUudG91Y2guc2tpcCgpKX0sZW5kOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX19KX19KSxVPWYudHJhbnNpdGlvbnMucHJlZml4K1wiVHJhbnNmb3JtXCI7bD1mLmhhc0hXM0Q/ZnVuY3Rpb24oZSx0LG4pe3JldHVyblwidHJhbnNsYXRlM2QoXCIrZStcInB4LFwiK3QrXCJweCwwKSBzY2FsZShcIituK1wiKVwifTpmdW5jdGlvbihlLHQsbil7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrZStcInB4LFwiK3QrXCJweCkgc2NhbGUoXCIrbitcIilcIn0sYz1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzO18uZm4uaW5pdC5jYWxsKG4pLG4uZWxlbWVudD1lKHQpLG4uZWxlbWVudFswXS5zdHlsZS53ZWJraXRUcmFuc2Zvcm1PcmlnaW49XCJsZWZ0IHRvcFwiLG4ueD0wLG4ueT0wLG4uc2NhbGU9MSxuLl9zYXZlQ29vcmRpbmF0ZXMobChuLngsbi55LG4uc2NhbGUpKX0sdHJhbnNsYXRlQXhpczpmdW5jdGlvbihlLHQpe3RoaXNbZV0rPXQsdGhpcy5yZWZyZXNoKCl9LHNjYWxlVG86ZnVuY3Rpb24oZSl7dGhpcy5zY2FsZT1lLHRoaXMucmVmcmVzaCgpfSxzY2FsZVdpdGg6ZnVuY3Rpb24oZSl7dGhpcy5zY2FsZSo9ZSx0aGlzLnJlZnJlc2goKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGUpe3RoaXMueCs9ZS54LHRoaXMueSs9ZS55LHRoaXMucmVmcmVzaCgpfSxtb3ZlQXhpczpmdW5jdGlvbihlLHQpe3RoaXNbZV09dCx0aGlzLnJlZnJlc2goKX0sbW92ZVRvOmZ1bmN0aW9uKGUpe2IodGhpcyxlKSx0aGlzLnJlZnJlc2goKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQueCxpPXQueTt0LnJvdW5kJiYobj1NYXRoLnJvdW5kKG4pLGk9TWF0aC5yb3VuZChpKSksZT1sKG4saSx0LnNjYWxlKSxlIT10LmNvb3JkaW5hdGVzJiYocC5zdXBwb3J0LmJyb3dzZXIubXNpZSYmMTA+cC5zdXBwb3J0LmJyb3dzZXIudmVyc2lvbj8odC5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0LmVsZW1lbnRbMF0uc3R5bGUubGVmdD10LngrXCJweFwiLHQuZWxlbWVudFswXS5zdHlsZS50b3A9dC55K1wicHhcIik6dC5lbGVtZW50WzBdLnN0eWxlW1VdPWUsdC5fc2F2ZUNvb3JkaW5hdGVzKGUpLHQudHJpZ2dlcihBKSl9LF9zYXZlQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oZSl7dGhpcy5jb29yZGluYXRlcz1lfX0pLGQ9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXM7di5mbi5pbml0LmNhbGwoaSxlLHQpLG49aS5vcHRpb25zLmdyb3VwLG4gaW4gQz9DW25dLnB1c2goaSk6Q1tuXT1baV19LGV2ZW50czpbRixSLEJdLG9wdGlvbnM6e25hbWU6XCJEcm9wVGFyZ2V0XCIsZ3JvdXA6XCJkZWZhdWx0XCJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5ncm91cCxuPUNbdF18fFNbdF07aWYobi5sZW5ndGg+MSl7Zm9yKHYuZm4uZGVzdHJveS5jYWxsKHRoaXMpLGU9MDtuLmxlbmd0aD5lO2UrKylpZihuW2VdPT10aGlzKXtuLnNwbGljZShlLDEpO2JyZWFrfX1lbHNlIGQuZGVzdHJveUdyb3VwKHQpfSxfdHJpZ2dlcjpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj14W2kub3B0aW9ucy5ncm91cF07cmV0dXJuIHI/aS50cmlnZ2VyKGUsYih7fSxuLmV2ZW50LHtkcmFnZ2FibGU6cixkcm9wVGFyZ2V0Om4uZHJvcFRhcmdldH0pKTp0fSxfb3ZlcjpmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKEYsZSl9LF9vdXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdHJpZ2dlcihSLGUpfSxfZHJvcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49eFt0Lm9wdGlvbnMuZ3JvdXBdO24mJihuLmRyb3BwZWQ9IXQuX3RyaWdnZXIoQixlKSl9fSksZC5kZXN0cm95R3JvdXA9ZnVuY3Rpb24oZSl7dmFyIHQsbj1DW2VdfHxTW2VdO2lmKG4pe2Zvcih0PTA7bi5sZW5ndGg+dDt0Kyspdi5mbi5kZXN0cm95LmNhbGwoblt0XSk7bi5sZW5ndGg9MCxkZWxldGUgQ1tlXSxkZWxldGUgU1tlXX19LGQuX2NhY2hlPUMsdT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpczt2LmZuLmluaXQuY2FsbChpLGUsdCksbj1pLm9wdGlvbnMuZ3JvdXAsbiBpbiBTP1Nbbl0ucHVzaChpKTpTW25dPVtpXX0sb3B0aW9uczp7bmFtZTpcIkRyb3BUYXJnZXRBcmVhXCIsZ3JvdXA6XCJkZWZhdWx0XCIsZmlsdGVyOm51bGx9fSksaD12LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7di5mbi5pbml0LmNhbGwobixlLHQpLG4uX2FjdGl2YXRlZD0hMSxuLnVzZXJFdmVudHM9bmV3IHkobi5lbGVtZW50LHtnbG9iYWw6ITAsYWxsb3dTZWxlY3Rpb246ITAsZmlsdGVyOm4ub3B0aW9ucy5maWx0ZXIsdGhyZXNob2xkOm4ub3B0aW9ucy5kaXN0YW5jZSxzdGFydDp3KG4uX3N0YXJ0LG4pLGhvbGQ6dyhuLl9ob2xkLG4pLG1vdmU6dyhuLl9kcmFnLG4pLGVuZDp3KG4uX2VuZCxuKSxjYW5jZWw6dyhuLl9jYW5jZWwsbiksc2VsZWN0Oncobi5fc2VsZWN0LG4pfSksbi5fYWZ0ZXJFbmRIYW5kbGVyPXcobi5fYWZ0ZXJFbmQsbiksbi5fY2FwdHVyZUVzY2FwZT13KG4uX2NhcHR1cmVFc2NhcGUsbil9LGV2ZW50czpbTSxFLFAsSSx6XSxvcHRpb25zOntuYW1lOlwiRHJhZ2dhYmxlXCIsZGlzdGFuY2U6cC5zdXBwb3J0LnRvdWNoPzA6NSxncm91cDpcImRlZmF1bHRcIixjdXJzb3JPZmZzZXQ6bnVsbCxheGlzOm51bGwsY29udGFpbmVyOm51bGwsZmlsdGVyOm51bGwsaWdub3JlOm51bGwsaG9sZFRvRHJhZzohMSxkcm9wcGVkOiExfSxjYW5jZWxIb2xkOmZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZhdGVkPSExfSxfY2FwdHVyZUVzY2FwZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2Uua2V5Q29kZT09PXAua2V5cy5FU0MmJih0Ll90cmlnZ2VyKHose2V2ZW50OmV9KSx0LnVzZXJFdmVudHMuY2FuY2VsKCkpfSxfdXBkYXRlSGludDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMsbz1pLm9wdGlvbnMsYT1pLmJvdW5kYXJpZXMscz1vLmF4aXMsbD1pLm9wdGlvbnMuY3Vyc29yT2Zmc2V0O2w/bj17bGVmdDp0LngubG9jYXRpb24rbC5sZWZ0LHRvcDp0LnkubG9jYXRpb24rbC50b3B9OihpLmhpbnRPZmZzZXQubGVmdCs9dC54LmRlbHRhLGkuaGludE9mZnNldC50b3ArPXQueS5kZWx0YSxuPWUuZXh0ZW5kKHt9LGkuaGludE9mZnNldCkpLGEmJihuLnRvcD1yKG4udG9wLGEueSksbi5sZWZ0PXIobi5sZWZ0LGEueCkpLFwieFwiPT09cz9kZWxldGUgbi50b3A6XCJ5XCI9PT1zJiZkZWxldGUgbi5sZWZ0LGkuaGludC5jc3Mobil9LF9zaG91bGRJZ25vcmVUYXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5vcHRpb25zLmlnbm9yZTtyZXR1cm4gbiYmZSh0KS5pcyhuKX0sX3NlbGVjdDpmdW5jdGlvbihlKXt0aGlzLl9zaG91bGRJZ25vcmVUYXJnZXQoZS5ldmVudC50YXJnZXQpfHxlLnByZXZlbnREZWZhdWx0KCl9LF9zdGFydDpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMsYT1yLm9wdGlvbnMscz1hLmNvbnRhaW5lcixsPWEuaGludDtyZXR1cm4gdGhpcy5fc2hvdWxkSWdub3JlVGFyZ2V0KG4udG91Y2guaW5pdGlhbFRvdWNoKXx8YS5ob2xkVG9EcmFnJiYhci5fYWN0aXZhdGVkPyhyLnVzZXJFdmVudHMuY2FuY2VsKCksdCk6KHIuY3VycmVudFRhcmdldD1uLnRhcmdldCxyLmN1cnJlbnRUYXJnZXRPZmZzZXQ9ayhyLmN1cnJlbnRUYXJnZXQpLGwmJihyLmhpbnQmJnIuaGludC5zdG9wKCEwLCEwKS5yZW1vdmUoKSxyLmhpbnQ9cC5pc0Z1bmN0aW9uKGwpP2UobC5jYWxsKHIsci5jdXJyZW50VGFyZ2V0KSk6bCxpPWsoci5jdXJyZW50VGFyZ2V0KSxyLmhpbnRPZmZzZXQ9aSxyLmhpbnQuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsekluZGV4OjJlNCxsZWZ0OmkubGVmdCx0b3A6aS50b3B9KS5hcHBlbmRUbyhnLmJvZHkpLHIuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybiByLmhpbnQucmVtb3ZlQXR0cihcIm5nLXJlcGVhdFwiKSx7ZWxlbWVudHM6ci5oaW50LmdldCgpLHNjb3BlRnJvbTpuLnRhcmdldH19KSkseFthLmdyb3VwXT1yLHIuZHJvcHBlZD0hMSxzJiYoci5ib3VuZGFyaWVzPW8ocyxyLmhpbnQpKSxyLl90cmlnZ2VyKEUsbikmJihyLnVzZXJFdmVudHMuY2FuY2VsKCksci5fYWZ0ZXJFbmQoKSksci51c2VyRXZlbnRzLmNhcHR1cmUoKSxlKGcpLm9uKEQsci5fY2FwdHVyZUVzY2FwZSksdCl9LF9ob2xkOmZ1bmN0aW9uKGUpe3RoaXMuY3VycmVudFRhcmdldD1lLnRhcmdldCx0aGlzLl90cmlnZ2VyKE0sZSk/dGhpcy51c2VyRXZlbnRzLmNhbmNlbCgpOnRoaXMuX2FjdGl2YXRlZD0hMH0sX2RyYWc6ZnVuY3Rpb24obil7dmFyIGk9dGhpcztuLnByZXZlbnREZWZhdWx0KCksaS5fd2l0aERyb3BUYXJnZXQobixmdW5jdGlvbihpLHIpe2lmKCFpKXJldHVybiBzJiYocy5fdHJpZ2dlcihSLGIobix7ZHJvcFRhcmdldDplKHMudGFyZ2V0RWxlbWVudCl9KSkscz1udWxsKSx0O2lmKHMpe2lmKHI9PT1zLnRhcmdldEVsZW1lbnQpcmV0dXJuO3MuX3RyaWdnZXIoUixiKG4se2Ryb3BUYXJnZXQ6ZShzLnRhcmdldEVsZW1lbnQpfSkpfWkuX3RyaWdnZXIoRixiKG4se2Ryb3BUYXJnZXQ6ZShyKX0pKSxzPWIoaSx7dGFyZ2V0RWxlbWVudDpyfSl9KSxpLl90cmlnZ2VyKFAsYihuLHtkcm9wVGFyZ2V0OnN9KSksaS5oaW50JiZpLl91cGRhdGVIaW50KG4pfSxfZW5kOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5fd2l0aERyb3BUYXJnZXQodCxmdW5jdGlvbihuLGkpe24mJihuLl9kcm9wKGIoe30sdCx7ZHJvcFRhcmdldDplKGkpfSkpLHM9bnVsbCl9KSxuLl90cmlnZ2VyKEksdCksbi5fY2FuY2VsKHQuZXZlbnQpfSxfY2FuY2VsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9hY3RpdmF0ZWQ9ITEsZS5oaW50JiYhZS5kcm9wcGVkP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmhpbnQuc3RvcCghMCwhMCkuYW5pbWF0ZShlLmN1cnJlbnRUYXJnZXRPZmZzZXQsXCJmYXN0XCIsZS5fYWZ0ZXJFbmRIYW5kbGVyKX0sMCk6ZS5fYWZ0ZXJFbmQoKX0sX3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3JldHVybiBuLnRyaWdnZXIoZSxiKHt9LHQuZXZlbnQse3g6dC54LHk6dC55LGN1cnJlbnRUYXJnZXQ6bi5jdXJyZW50VGFyZ2V0LGRyb3BUYXJnZXQ6dC5kcm9wVGFyZ2V0fSkpfSxfd2l0aERyb3BUYXJnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG89dGhpcyxzPW8ub3B0aW9ucyxsPUNbcy5ncm91cF0sYz1TW3MuZ3JvdXBdOyhsJiZsLmxlbmd0aHx8YyYmYy5sZW5ndGgpJiYoaT1UKGUpLG8uaGludCYmbihvLmhpbnRbMF0saSkmJihvLmhpbnQuaGlkZSgpLGk9VChlKSxpfHwoaT1UKGUpKSxvLmhpbnQuc2hvdygpKSxyPWEoaSxsLGMpLHI/dChyLnRhcmdldCxyLnRhcmdldEVsZW1lbnQpOnQoKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3YuZm4uZGVzdHJveS5jYWxsKGUpLGUuX2FmdGVyRW5kKCksZS51c2VyRXZlbnRzLmRlc3Ryb3koKSxlLmN1cnJlbnRUYXJnZXQ9bnVsbH0sX2FmdGVyRW5kOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmhpbnQmJnQuaGludC5yZW1vdmUoKSxkZWxldGUgeFt0Lm9wdGlvbnMuZ3JvdXBdLHQudHJpZ2dlcihcImRlc3Ryb3lcIiksZShnKS5vZmYoRCx0Ll9jYXB0dXJlRXNjYXBlKX19KSxwLnVpLnBsdWdpbihkKSxwLnVpLnBsdWdpbih1KSxwLnVpLnBsdWdpbihoKSxwLlRhcENhcHR1cmU9TCxwLmNvbnRhaW5lckJvdW5kYXJpZXM9byxiKHAudWkse1BhbmU6VixQYW5lRGltZW5zaW9uczpILE1vdmFibGU6Y30pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4ubW9iaWxlLHI9bi5lZmZlY3RzLG89aS51aSxhPWUucHJveHkscz1lLmV4dGVuZCxsPW8uV2lkZ2V0LGM9bi5DbGFzcyxkPW4udWkuTW92YWJsZSx1PW4udWkuUGFuZSxoPW4udWkuUGFuZURpbWVuc2lvbnMscD1yLlRyYW5zaXRpb24sZj1yLkFuaW1hdGlvbixnPU1hdGguYWJzLG09NTAwLHY9LjcsXz0uOTYseT0xMCx3PTU1LGI9LjUsaz01LHg9XCJrbS1zY3JvbGxlci1yZWxlYXNlXCIsQz1cImttLXNjcm9sbGVyLXJlZnJlc2hcIixTPVwicHVsbFwiLFQ9XCJjaGFuZ2VcIixEPVwicmVzaXplXCIsQT1cInNjcm9sbFwiLEU9MixNPWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Zi5mbi5pbml0LmNhbGwodCkscyh0LGUpLHQudXNlckV2ZW50cy5iaW5kKFwiZ2VzdHVyZWVuZFwiLGEodC5zdGFydCx0KSksdC50YXBDYXB0dXJlLmJpbmQoXCJwcmVzc1wiLGEodC5jYW5jZWwsdCkpfSxlbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGltZW5zaW9ucy5taW5TY2FsZT50aGlzLm1vdmFibGUuc2NhbGV9LGRvbmU6ZnVuY3Rpb24oKXtyZXR1cm4uMDE+dGhpcy5kaW1lbnNpb25zLm1pblNjYWxlLXRoaXMubW92YWJsZS5zY2FsZX0sdGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMubW92YWJsZTtlLnNjYWxlV2l0aCgxLjEpLHRoaXMuZGltZW5zaW9ucy5yZXNjYWxlKGUuc2NhbGUpfSxvbkVuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubW92YWJsZTtlLnNjYWxlVG8odGhpcy5kaW1lbnNpb25zLm1pblNjYWxlKSx0aGlzLmRpbWVuc2lvbnMucmVzY2FsZShlLnNjYWxlKX19KSxQPWYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Zi5mbi5pbml0LmNhbGwodCkscyh0LGUse3RyYW5zaXRpb246bmV3IHAoe2F4aXM6ZS5heGlzLG1vdmFibGU6ZS5tb3ZhYmxlLG9uRW5kOmZ1bmN0aW9uKCl7dC5fZW5kKCl9fSl9KSx0LnRhcENhcHR1cmUuYmluZChcInByZXNzXCIsZnVuY3Rpb24oKXt0LmNhbmNlbCgpfSksdC51c2VyRXZlbnRzLmJpbmQoXCJlbmRcIixhKHQuc3RhcnQsdCkpLHQudXNlckV2ZW50cy5iaW5kKFwiZ2VzdHVyZWVuZFwiLGEodC5zdGFydCx0KSksdC51c2VyRXZlbnRzLmJpbmQoXCJ0YXBcIixhKHQub25FbmQsdCkpfSxvbkNhbmNlbDpmdW5jdGlvbigpe3RoaXMudHJhbnNpdGlvbi5jYW5jZWwoKX0sZnJlZXplOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5jYW5jZWwoKSx0Ll9tb3ZlVG8oZSl9LG9uRW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnBhbmVBeGlzLm91dE9mQm91bmRzKCk/ZS5fc25hcEJhY2soKTplLl9lbmQoKX0sZG9uZTpmdW5jdGlvbigpe3JldHVybiBnKHRoaXMudmVsb2NpdHkpPDF9LHN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztuLmRpbWVuc2lvbi5lbmFibGVkJiYobi5wYW5lQXhpcy5vdXRPZkJvdW5kcygpP24uX3NuYXBCYWNrKCk6KHQ9ZS50b3VjaC5pZD09PUU/MDplLnRvdWNoW24uYXhpc10udmVsb2NpdHksbi52ZWxvY2l0eT1NYXRoLm1heChNYXRoLm1pbih0Km4udmVsb2NpdHlNdWx0aXBsaWVyLHcpLC13KSxuLnRhcENhcHR1cmUuY2FwdHVyZU5leHQoKSxmLmZuLnN0YXJ0LmNhbGwobikpKX0sdGljazpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmRpbWVuc2lvbixuPWUucGFuZUF4aXMub3V0T2ZCb3VuZHMoKT9iOmUuZnJpY3Rpb24saT1lLnZlbG9jaXR5Kj1uLHI9ZS5tb3ZhYmxlW2UuYXhpc10raTshZS5lbGFzdGljJiZ0Lm91dE9mQm91bmRzKHIpJiYocj1NYXRoLm1heChNYXRoLm1pbihyLHQubWF4KSx0Lm1pbiksZS52ZWxvY2l0eT0wKSxlLm1vdmFibGUubW92ZUF4aXMoZS5heGlzLHIpfSxfZW5kOmZ1bmN0aW9uKCl7dGhpcy50YXBDYXB0dXJlLmNhbmNlbENhcHR1cmUoKSx0aGlzLmVuZCgpfSxfc25hcEJhY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5kaW1lbnNpb24sbj1lLm1vdmFibGVbZS5heGlzXT50Lm1heD90Lm1heDp0Lm1pbjtlLl9tb3ZlVG8obil9LF9tb3ZlVG86ZnVuY3Rpb24oZSl7dGhpcy50cmFuc2l0aW9uLm1vdmVUbyh7bG9jYXRpb246ZSxkdXJhdGlvbjptLGVhc2U6cC5lYXNlT3V0RXhwb30pfX0pLEk9Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztuLmVmZmVjdHMuQW5pbWF0aW9uLmZuLmluaXQuY2FsbCh0aGlzKSxzKHQsZSx7b3JpZ2luOnt9LGRlc3RpbmF0aW9uOnt9LG9mZnNldDp7fX0pfSx0aWNrOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlQ29vcmRpbmF0ZXMoKSx0aGlzLm1vdmVUbyh0aGlzLm9yaWdpbil9LGRvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gZyh0aGlzLm9mZnNldC55KTxrJiZnKHRoaXMub2Zmc2V0LngpPGt9LG9uRW5kOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlVG8odGhpcy5kZXN0aW5hdGlvbiksdGhpcy5jYWxsYmFjayYmdGhpcy5jYWxsYmFjay5jYWxsKCl9LHNldENvb3JkaW5hdGVzOmZ1bmN0aW9uKGUsdCl7dGhpcy5vZmZzZXQ9e30sdGhpcy5vcmlnaW49ZSx0aGlzLmRlc3RpbmF0aW9uPXR9LHNldENhbGxiYWNrOmZ1bmN0aW9uKGUpe2UmJm4uaXNGdW5jdGlvbihlKT90aGlzLmNhbGxiYWNrPWU6ZT10fSxfdXBkYXRlQ29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldD17eDoodGhpcy5kZXN0aW5hdGlvbi54LXRoaXMub3JpZ2luLngpLzQseToodGhpcy5kZXN0aW5hdGlvbi55LXRoaXMub3JpZ2luLnkpLzR9LHRoaXMub3JpZ2luPXt5OnRoaXMub3JpZ2luLnkrdGhpcy5vZmZzZXQueSx4OnRoaXMub3JpZ2luLngrdGhpcy5vZmZzZXQueH19fSksej1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9XCJ4XCI9PT10LmF4aXMscj1lKCc8ZGl2IGNsYXNzPVwia20tdG91Y2gtc2Nyb2xsYmFyIGttLScrKGk/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiKSsnLXNjcm9sbGJhclwiIC8+Jyk7cyhuLHQse2VsZW1lbnQ6cixlbGVtZW50U2l6ZTowLG1vdmFibGU6bmV3IGQociksc2Nyb2xsTW92YWJsZTp0Lm1vdmFibGUsYWx3YXlzVmlzaWJsZTp0LmFsd2F5c1Zpc2libGUsc2l6ZTppP1wid2lkdGhcIjpcImhlaWdodFwifSksbi5zY3JvbGxNb3ZhYmxlLmJpbmQoVCxhKG4ucmVmcmVzaCxuKSksbi5jb250YWluZXIuYXBwZW5kKHIpLHQuYWx3YXlzVmlzaWJsZSYmbi5zaG93KCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5heGlzLG49ZS5kaW1lbnNpb24saT1uLnNpemUscj1lLnNjcm9sbE1vdmFibGUsbz1pL24udG90YWwsYT1NYXRoLnJvdW5kKC1yW3RdKm8pLHM9TWF0aC5yb3VuZChpKm8pO28+PTE/dGhpcy5lbGVtZW50LmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIik6dGhpcy5lbGVtZW50LmNzcyhcImRpc3BsYXlcIixcIlwiKSxhK3M+aT9zPWktYTowPmEmJihzKz1hLGE9MCksZS5lbGVtZW50U2l6ZSE9cyYmKGUuZWxlbWVudC5jc3MoZS5zaXplLHMrXCJweFwiKSxlLmVsZW1lbnRTaXplPXMpLGUubW92YWJsZS5tb3ZlQXhpcyh0LGEpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmNzcyh7b3BhY2l0eTp2LHZpc2liaWxpdHk6XCJ2aXNpYmxlXCJ9KX0saGlkZTpmdW5jdGlvbigpe3RoaXMuYWx3YXlzVmlzaWJsZXx8dGhpcy5lbGVtZW50LmNzcyh7b3BhY2l0eTowfSl9fSksRj1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihpLHIpe3ZhciBvLGMscCxmLG0sdixfLHksdyxiPXRoaXM7cmV0dXJuIGwuZm4uaW5pdC5jYWxsKGIsaSxyKSxpPWIuZWxlbWVudCwoYi5fbmF0aXZlPWIub3B0aW9ucy51c2VOYXRpdmUmJm4uc3VwcG9ydC5oYXNOYXRpdmVTY3JvbGxpbmcpPyhpLmFkZENsYXNzKFwia20tbmF0aXZlLXNjcm9sbGVyXCIpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJrbS1zY3JvbGwtaGVhZGVyXCIvPicpLHMoYix7c2Nyb2xsRWxlbWVudDppLGZpeGVkQ29udGFpbmVyOmkuY2hpbGRyZW4oKS5maXJzdCgpfSksdCk6KGkuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5hZGRDbGFzcyhcImttLXNjcm9sbC13cmFwcGVyXCIpLndyYXBJbm5lcignPGRpdiBjbGFzcz1cImttLXNjcm9sbC1jb250YWluZXJcIi8+JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cImttLXNjcm9sbC1oZWFkZXJcIi8+Jyksbz1pLmNoaWxkcmVuKCkuZXEoMSksYz1uZXcgbi5UYXBDYXB0dXJlKGkpLHA9bmV3IGQobyksZj1uZXcgaCh7ZWxlbWVudDpvLGNvbnRhaW5lcjppLGZvcmNlZEVuYWJsZWQ6Yi5vcHRpb25zLnpvb219KSxtPXRoaXMub3B0aW9ucy5hdm9pZFNjcm9sbGluZyx2PW5ldyBuLlVzZXJFdmVudHMoaSx7YWxsb3dTZWxlY3Rpb246ITAscHJldmVudERyYWdFdmVudDohMCxjYXB0dXJlVXBJZk1vdmVkOiEwLG11bHRpVG91Y2g6Yi5vcHRpb25zLnpvb20sc3RhcnQ6ZnVuY3Rpb24odCl7Zi5yZWZyZXNoKCk7dmFyIG49Zyh0LngudmVsb2NpdHkpLGk9Zyh0LnkudmVsb2NpdHkpLHI9MipuPj1pLG89ZS5jb250YWlucyhiLmZpeGVkQ29udGFpbmVyWzBdLHQuZXZlbnQudGFyZ2V0KSxhPTIqaT49bjshbyYmIW0odCkmJmIuZW5hYmxlZCYmKGYueC5lbmFibGVkJiZyfHxmLnkuZW5hYmxlZCYmYSk/di5jYXB0dXJlKCk6di5jYW5jZWwoKX19KSxfPW5ldyB1KHttb3ZhYmxlOnAsZGltZW5zaW9uczpmLHVzZXJFdmVudHM6dixlbGFzdGljOmIub3B0aW9ucy5lbGFzdGljfSkseT1uZXcgTSh7bW92YWJsZTpwLGRpbWVuc2lvbnM6Zix1c2VyRXZlbnRzOnYsdGFwQ2FwdHVyZTpjfSksdz1uZXcgSSh7bW92ZVRvOmZ1bmN0aW9uKGUpe2Iuc2Nyb2xsVG8oZS54LGUueSl9fSkscC5iaW5kKFQsZnVuY3Rpb24oKXtiLnNjcm9sbFRvcD0tcC55LGIuc2Nyb2xsTGVmdD0tcC54LGIudHJpZ2dlcihBLHtzY3JvbGxUb3A6Yi5zY3JvbGxUb3Asc2Nyb2xsTGVmdDpiLnNjcm9sbExlZnR9KX0pLGIub3B0aW9ucy5tb3VzZXdoZWVsU2Nyb2xsaW5nJiZpLm9uKFwiRE9NTW91c2VTY3JvbGwgbW91c2V3aGVlbFwiLGEodGhpcyxcIl93aGVlbFNjcm9sbFwiKSkscyhiLHttb3ZhYmxlOnAsZGltZW5zaW9uczpmLHpvb21TbmFwQmFjazp5LGFuaW1hdGVkU2Nyb2xsZXI6dyx1c2VyRXZlbnRzOnYscGFuZTpfLHRhcENhcHR1cmU6YyxwdWxsZWQ6ITEsZW5hYmxlZDohMCxzY3JvbGxFbGVtZW50Om8sc2Nyb2xsVG9wOjAsc2Nyb2xsTGVmdDowLGZpeGVkQ29udGFpbmVyOmkuY2hpbGRyZW4oKS5maXJzdCgpfSksYi5faW5pdEF4aXMoXCJ4XCIpLGIuX2luaXRBeGlzKFwieVwiKSxiLl93aGVlbEVuZD1mdW5jdGlvbigpe2IuX3doZWVsPSExLGIudXNlckV2ZW50cy5lbmQoMCxiLl93aGVlbFkpfSxmLnJlZnJlc2goKSxiLm9wdGlvbnMucHVsbFRvUmVmcmVzaCYmYi5faW5pdFB1bGxUb1JlZnJlc2goKSx0KX0sX3doZWVsU2Nyb2xsOmZ1bmN0aW9uKGUpe3RoaXMuX3doZWVsfHwodGhpcy5fd2hlZWw9ITAsdGhpcy5fd2hlZWxZPTAsdGhpcy51c2VyRXZlbnRzLnByZXNzKDAsdGhpcy5fd2hlZWxZKSksY2xlYXJUaW1lb3V0KHRoaXMuX3doZWVsVGltZW91dCksdGhpcy5fd2hlZWxUaW1lb3V0PXNldFRpbWVvdXQodGhpcy5fd2hlZWxFbmQsNTApO3ZhciB0PW4ud2hlZWxEZWx0YVkoZSk7dCYmKHRoaXMuX3doZWVsWSs9dCx0aGlzLnVzZXJFdmVudHMubW92ZSgwLHRoaXMuX3doZWVsWSkpLGUucHJldmVudERlZmF1bHQoKX0sbWFrZVZpcnR1YWw6ZnVuY3Rpb24oKXt0aGlzLmRpbWVuc2lvbnMueS5tYWtlVmlydHVhbCgpfSx2aXJ0dWFsU2l6ZTpmdW5jdGlvbihlLHQpe3RoaXMuZGltZW5zaW9ucy55LnZpcnR1YWxTaXplKGUsdCl9LGhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbnMueS5zaXplfSxzY3JvbGxIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodH0sc2Nyb2xsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxFbGVtZW50WzBdLnNjcm9sbFdpZHRofSxvcHRpb25zOntuYW1lOlwiU2Nyb2xsZXJcIix6b29tOiExLHB1bGxPZmZzZXQ6MTQwLHZpc2libGVTY3JvbGxIaW50czohMSxlbGFzdGljOiEwLHVzZU5hdGl2ZTohMSxtb3VzZXdoZWVsU2Nyb2xsaW5nOiEwLGF2b2lkU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHB1bGxUb1JlZnJlc2g6ITEsbWVzc2FnZXM6e3B1bGxUZW1wbGF0ZTpcIlB1bGwgdG8gcmVmcmVzaFwiLHJlbGVhc2VUZW1wbGF0ZTpcIlJlbGVhc2UgdG8gcmVmcmVzaFwiLHJlZnJlc2hUZW1wbGF0ZTpcIlJlZnJlc2hpbmdcIn19LGV2ZW50czpbUyxBLERdLF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLl9uYXRpdmV8fHRoaXMuY29udGVudFJlc2l6ZWQoKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2wuZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksZS5wdWxsVG9SZWZyZXNoJiZ0Ll9pbml0UHVsbFRvUmVmcmVzaCgpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMuX25hdGl2ZT90aGlzLnNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKDApOih0aGlzLm1vdmFibGUubW92ZVRvKHt4OjAseTowfSksdGhpcy5fc2NhbGUoMSkpfSxjb250ZW50UmVzaXplZDpmdW5jdGlvbigpe3RoaXMuZGltZW5zaW9ucy5yZWZyZXNoKCksdGhpcy5wYW5lLngub3V0T2ZCb3VuZHMoKSYmdGhpcy5tb3ZhYmxlLm1vdmVBeGlzKFwieFwiLHRoaXMuZGltZW5zaW9ucy54Lm1pbiksdGhpcy5wYW5lLnkub3V0T2ZCb3VuZHMoKSYmdGhpcy5tb3ZhYmxlLm1vdmVBeGlzKFwieVwiLHRoaXMuZGltZW5zaW9ucy55Lm1pbil9LHpvb21PdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRpbWVuc2lvbnM7ZS5yZWZyZXNoKCksdGhpcy5fc2NhbGUoZS5maXRTY2FsZSksdGhpcy5tb3ZhYmxlLm1vdmVUbyhlLmNlbnRlckNvb3JkaW5hdGVzKCkpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITB9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITF9LHNjcm9sbFRvOmZ1bmN0aW9uKGUsdCl7dGhpcy5fbmF0aXZlPyh0aGlzLnNjcm9sbEVsZW1lbnQuc2Nyb2xsTGVmdChnKGUpKSx0aGlzLnNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKGcodCkpKToodGhpcy5kaW1lbnNpb25zLnJlZnJlc2goKSx0aGlzLm1vdmFibGUubW92ZVRvKHt4OmUseTp0fSkpfSxhbmltYXRlZFNjcm9sbFRvOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO3RoaXMuX25hdGl2ZT90aGlzLnNjcm9sbFRvKGUsdCk6KGk9e3g6dGhpcy5tb3ZhYmxlLngseTp0aGlzLm1vdmFibGUueX0scj17eDplLHk6dH0sdGhpcy5hbmltYXRlZFNjcm9sbGVyLnNldENvb3JkaW5hdGVzKGksciksdGhpcy5hbmltYXRlZFNjcm9sbGVyLnNldENhbGxiYWNrKG4pLHRoaXMuYW5pbWF0ZWRTY3JvbGxlci5zdGFydCgpKX0scHVsbEhhbmRsZWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucmVmcmVzaEhpbnQucmVtb3ZlQ2xhc3MoQyksZS5oaW50Q29udGFpbmVyLmh0bWwoZS5wdWxsVGVtcGxhdGUoe30pKSxlLnlpbmVydGlhLm9uRW5kKCksZS54aW5lcnRpYS5vbkVuZCgpLGUudXNlckV2ZW50cy5jYW5jZWwoKX0sZGVzdHJveTpmdW5jdGlvbigpe2wuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMudXNlckV2ZW50cyYmdGhpcy51c2VyRXZlbnRzLmRlc3Ryb3koKX0sX3NjYWxlOmZ1bmN0aW9uKGUpe3RoaXMuZGltZW5zaW9ucy5yZXNjYWxlKGUpLHRoaXMubW92YWJsZS5zY2FsZVRvKGUpfSxfaW5pdFB1bGxUb1JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGltZW5zaW9ucy55LmZvcmNlRW5hYmxlZCgpLGUucHVsbFRlbXBsYXRlPW4udGVtcGxhdGUoZS5vcHRpb25zLm1lc3NhZ2VzLnB1bGxUZW1wbGF0ZSksZS5yZWxlYXNlVGVtcGxhdGU9bi50ZW1wbGF0ZShlLm9wdGlvbnMubWVzc2FnZXMucmVsZWFzZVRlbXBsYXRlKSxlLnJlZnJlc2hUZW1wbGF0ZT1uLnRlbXBsYXRlKGUub3B0aW9ucy5tZXNzYWdlcy5yZWZyZXNoVGVtcGxhdGUpLGUuc2Nyb2xsRWxlbWVudC5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cImttLXNjcm9sbGVyLXB1bGxcIj48c3BhbiBjbGFzcz1cImttLWljb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJrbS1sb2FkaW5nLWxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJrbS1sb2FkaW5nLXJpZ2h0XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwia20tdGVtcGxhdGVcIj4nK2UucHVsbFRlbXBsYXRlKHt9KStcIjwvc3Bhbj48L3NwYW4+XCIpLGUucmVmcmVzaEhpbnQ9ZS5zY3JvbGxFbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKSxlLmhpbnRDb250YWluZXI9ZS5yZWZyZXNoSGludC5jaGlsZHJlbihcIi5rbS10ZW1wbGF0ZVwiKSxlLnBhbmUueS5iaW5kKFwiY2hhbmdlXCIsYShlLl9wYW5lQ2hhbmdlLGUpKSxlLnVzZXJFdmVudHMuYmluZChcImVuZFwiLGEoZS5fZHJhZ0VuZCxlKSl9LF9kcmFnRW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnB1bGxlZCYmKGUucHVsbGVkPSExLGUucmVmcmVzaEhpbnQucmVtb3ZlQ2xhc3MoeCkuYWRkQ2xhc3MoQyksZS5oaW50Q29udGFpbmVyLmh0bWwoZS5yZWZyZXNoVGVtcGxhdGUoe30pKSxlLnlpbmVydGlhLmZyZWV6ZShlLm9wdGlvbnMucHVsbE9mZnNldC8yKSxlLnRyaWdnZXIoXCJwdWxsXCIpKX0sX3BhbmVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UubW92YWJsZS55L2I+ZS5vcHRpb25zLnB1bGxPZmZzZXQ/ZS5wdWxsZWR8fChlLnB1bGxlZD0hMCxlLnJlZnJlc2hIaW50LnJlbW92ZUNsYXNzKEMpLmFkZENsYXNzKHgpLGUuaGludENvbnRhaW5lci5odG1sKGUucmVsZWFzZVRlbXBsYXRlKHt9KSkpOmUucHVsbGVkJiYoZS5wdWxsZWQ9ITEsZS5yZWZyZXNoSGludC5yZW1vdmVDbGFzcyh4KSxlLmhpbnRDb250YWluZXIuaHRtbChlLnB1bGxUZW1wbGF0ZSh7fSkpKX0sX2luaXRBeGlzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm1vdmFibGUsaT10LmRpbWVuc2lvbnNbZV0scj10LnRhcENhcHR1cmUsbz10LnBhbmVbZV0sYT1uZXcgeih7YXhpczplLG1vdmFibGU6bixkaW1lbnNpb246aSxjb250YWluZXI6dC5lbGVtZW50LGFsd2F5c1Zpc2libGU6dC5vcHRpb25zLnZpc2libGVTY3JvbGxIaW50c30pO2kuYmluZChULGZ1bmN0aW9uKCl7YS5yZWZyZXNoKCl9KSxvLmJpbmQoVCxmdW5jdGlvbigpe2Euc2hvdygpfSksdFtlK1wiaW5lcnRpYVwiXT1uZXcgUCh7YXhpczplLHBhbmVBeGlzOm8sbW92YWJsZTpuLHRhcENhcHR1cmU6cix1c2VyRXZlbnRzOnQudXNlckV2ZW50cyxkaW1lbnNpb246aSxlbGFzdGljOnQub3B0aW9ucy5lbGFzdGljLGZyaWN0aW9uOnQub3B0aW9ucy5mcmljdGlvbnx8Xyx2ZWxvY2l0eU11bHRpcGxpZXI6dC5vcHRpb25zLnZlbG9jaXR5TXVsdGlwbGllcnx8eSxlbmQ6ZnVuY3Rpb24oKXthLmhpZGUoKSx0LnRyaWdnZXIoXCJzY3JvbGxFbmRcIix7YXhpczplLHNjcm9sbFRvcDp0LnNjcm9sbFRvcCxzY3JvbGxMZWZ0OnQuc2Nyb2xsTGVmdH0pfX0pfX0pO28ucGx1Z2luKEYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUucG9zaXRpb24oKS50b3ArM312YXIgaT13aW5kb3cua2VuZG8scj1pLnVpLldpZGdldCxvPWUucHJveHksYT0hMSxzPVwiLmtlbmRvR3JvdXBhYmxlXCIsbD1cImNoYW5nZVwiLGM9aS50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cImstZ3JvdXAtaW5kaWNhdG9yXCIgZGF0YS0jPWRhdGEubnMjZmllbGQ9XCIke2RhdGEuZmllbGR9XCIgZGF0YS0jPWRhdGEubnMjdGl0bGU9XCIke2RhdGEudGl0bGUgfHwgXCJcIn1cIiBkYXRhLSM9ZGF0YS5ucyNkaXI9XCIke2RhdGEuZGlyIHx8IFwiYXNjXCJ9XCI+PGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWFycm93LSR7KGRhdGEuZGlyIHx8IFwiYXNjXCIpID09IFwiYXNjXCIgPyBcIm5cIiA6IFwic1wifVwiPihzb3J0ZWQgJHsoZGF0YS5kaXIgfHwgXCJhc2NcIikgPT0gXCJhc2NcIiA/IFwiYXNjZW5kaW5nXCI6IFwiZGVzY2VuZGluZ1wifSk8L3NwYW4+JHtkYXRhLnRpdGxlID8gZGF0YS50aXRsZTogZGF0YS5maWVsZH08L2E+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29uIGstYnV0dG9uLWJhcmVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWdyb3VwLWRlbGV0ZVwiPjwvc3Bhbj48L2E+PC9kaXY+Jyx7dXNlV2l0aEJsb2NrOiExfSksZD1mdW5jdGlvbih0KXtyZXR1cm4gZSgnPGRpdiBjbGFzcz1cImstaGVhZGVyIGstZHJhZy1jbHVlXCIgLz4nKS5jc3Moe3dpZHRoOnQud2lkdGgoKSxwYWRkaW5nTGVmdDp0LmNzcyhcInBhZGRpbmdMZWZ0XCIpLHBhZGRpbmdSaWdodDp0LmNzcyhcInBhZGRpbmdSaWdodFwiKSxsaW5lSGVpZ2h0OnQuaGVpZ2h0KCkrXCJweFwiLHBhZGRpbmdUb3A6dC5jc3MoXCJwYWRkaW5nVG9wXCIpLHBhZGRpbmdCb3R0b206dC5jc3MoXCJwYWRkaW5nQm90dG9tXCIpfSkuaHRtbCh0LmF0dHIoaS5hdHRyKFwidGl0bGVcIikpfHx0LmF0dHIoaS5hdHRyKFwiZmllbGRcIikpKS5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWRyYWctc3RhdHVzIGstZGVuaWVkXCIgLz4nKX0sdT1lKCc8ZGl2IGNsYXNzPVwiay1ncm91cGluZy1kcm9wY2x1ZVwiLz4nKSxoPS8oXCJ8XFwlfCd8XFxbfFxcXXxcXCR8XFwufFxcLHxcXDp8XFw7fFxcK3xcXCp8XFwmfFxcIXxcXCN8XFwofFxcKXw8fD58XFw9fFxcP3xcXEB8XFxefFxce3xcXH18XFx+fFxcL3xcXHx8YCkvZyxwPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGMsaCl7dmFyIHAsZixnPXRoaXMsbT1pLmd1aWQoKSx2PW8oZy5faW50aWFsaXplUG9zaXRpb25zLGcpLF89Zy5fZHJvcEN1ZVBvc2l0aW9ucz1bXTtyLmZuLmluaXQuY2FsbChnLGMsaCksYT1pLnN1cHBvcnQuaXNSdGwoYyksZj1hP1wicmlnaHRcIjpcImxlZnRcIixnLmRyYWdnYWJsZT1wPWcub3B0aW9ucy5kcmFnZ2FibGV8fG5ldyBpLnVpLkRyYWdnYWJsZShnLmVsZW1lbnQse2ZpbHRlcjpnLm9wdGlvbnMuZHJhZ2dhYmxlRWxlbWVudHMsaGludDpkLGdyb3VwOm19KSxnLmdyb3VwQ29udGFpbmVyPWUoZy5vcHRpb25zLmdyb3VwQ29udGFpbmVyLGcuZWxlbWVudCkua2VuZG9Ecm9wVGFyZ2V0KHtncm91cDpwLm9wdGlvbnMuZ3JvdXAsZHJhZ2VudGVyOmZ1bmN0aW9uKGUpe2cuX2NhbkRyYWcoZS5kcmFnZ2FibGUuY3VycmVudFRhcmdldCkmJihlLmRyYWdnYWJsZS5oaW50LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKS5yZW1vdmVDbGFzcyhcImstZGVuaWVkXCIpLmFkZENsYXNzKFwiay1hZGRcIiksdS5jc3MoXCJ0b3BcIixuKGcuZ3JvdXBDb250YWluZXIpKS5jc3MoZiwwKS5hcHBlbmRUbyhnLmdyb3VwQ29udGFpbmVyKSl9LGRyYWdsZWF2ZTpmdW5jdGlvbihlKXtlLmRyYWdnYWJsZS5oaW50LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKS5yZW1vdmVDbGFzcyhcImstYWRkXCIpLmFkZENsYXNzKFwiay1kZW5pZWRcIiksdS5yZW1vdmUoKX0sZHJvcDpmdW5jdGlvbih0KXt2YXIgbixyPXQuZHJhZ2dhYmxlLmN1cnJlbnRUYXJnZXQsbz1yLmF0dHIoaS5hdHRyKFwiZmllbGRcIikpLHM9ci5hdHRyKGkuYXR0cihcInRpdGxlXCIpKSxsPWcuaW5kaWNhdG9yKG8pLGM9Zy5fZHJvcEN1ZVBvc2l0aW9ucyxkPWNbYy5sZW5ndGgtMV07KHIuaGFzQ2xhc3MoXCJrLWdyb3VwLWluZGljYXRvclwiKXx8Zy5fY2FuRHJhZyhyKSkmJihkPyhuPWcuX2Ryb3BDdWVQb3NpdGlvbihpLmdldE9mZnNldCh1KS5sZWZ0K3BhcnNlSW50KGQuZWxlbWVudC5jc3MoXCJtYXJnaW5MZWZ0XCIpLDEwKSooYT8tMToxKStwYXJzZUludChkLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksMTApKSxuJiZnLl9jYW5Ecm9wKGUobCksbi5lbGVtZW50LG4ubGVmdCkmJihuLmJlZm9yZT9uLmVsZW1lbnQuYmVmb3JlKGx8fGcuYnVpbGRJbmRpY2F0b3IobyxzKSk6bi5lbGVtZW50LmFmdGVyKGx8fGcuYnVpbGRJbmRpY2F0b3IobyxzKSksZy5fY2hhbmdlKCkpKTooZy5ncm91cENvbnRhaW5lci5hcHBlbmQoZy5idWlsZEluZGljYXRvcihvLHMpKSxnLl9jaGFuZ2UoKSkpfX0pLmtlbmRvRHJhZ2dhYmxlKHtmaWx0ZXI6XCJkaXYuay1ncm91cC1pbmRpY2F0b3JcIixoaW50OmQsZ3JvdXA6cC5vcHRpb25zLmdyb3VwLGRyYWdjYW5jZWw6byhnLl9kcmFnQ2FuY2VsLGcpLGRyYWdzdGFydDpmdW5jdGlvbihlKXt2YXIgdD1lLmN1cnJlbnRUYXJnZXQsaT1wYXJzZUludCh0LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApLHI9dC5wb3NpdGlvbigpLG89YT9yLmxlZnQtaTpyLmxlZnQrdC5vdXRlcldpZHRoKCk7digpLHUuY3NzKHt0b3A6bihnLmdyb3VwQ29udGFpbmVyKSxsZWZ0Om99KS5hcHBlbmRUbyhnLmdyb3VwQ29udGFpbmVyKSx0aGlzLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1kZW5pZWRcIikuYWRkQ2xhc3MoXCJrLWFkZFwiKX0sZHJhZ2VuZDpmdW5jdGlvbigpe2cuX2RyYWdFbmQodGhpcyl9LGRyYWc6byhnLl9kcmFnLGcpfSkub24oXCJjbGlja1wiK3MsXCIuay1idXR0b25cIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksZy5fcmVtb3ZlSW5kaWNhdG9yKGUodGhpcykucGFyZW50KCkpfSkub24oXCJjbGlja1wiK3MsXCIuay1saW5rXCIsZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKS5wYXJlbnQoKSxyPWcuYnVpbGRJbmRpY2F0b3Iobi5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSxuLmF0dHIoaS5hdHRyKFwidGl0bGVcIikpLFwiYXNjXCI9PW4uYXR0cihpLmF0dHIoXCJkaXJcIikpP1wiZGVzY1wiOlwiYXNjXCIpO24uYmVmb3JlKHIpLnJlbW92ZSgpLGcuX2NoYW5nZSgpLHQucHJldmVudERlZmF1bHQoKX0pLHAuYmluZChbXCJkcmFnZW5kXCIsXCJkcmFnY2FuY2VsXCIsXCJkcmFnc3RhcnRcIixcImRyYWdcIl0se2RyYWdlbmQ6ZnVuY3Rpb24oKXtnLl9kcmFnRW5kKHRoaXMpfSxkcmFnY2FuY2VsOm8oZy5fZHJhZ0NhbmNlbCxnKSxkcmFnc3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyO3JldHVybiBnLm9wdGlvbnMuYWxsb3dEcmFnfHxnLl9jYW5EcmFnKGUuY3VycmVudFRhcmdldCk/KHYoKSxfLmxlbmd0aD8obj1fW18ubGVuZ3RoLTFdLmVsZW1lbnQsaT1wYXJzZUludChuLmNzcyhcIm1hcmdpblJpZ2h0XCIpLDEwKSxyPW4ucG9zaXRpb24oKS5sZWZ0K24ub3V0ZXJXaWR0aCgpK2kpOnI9MCx0KTooZS5wcmV2ZW50RGVmYXVsdCgpLHQpfSxkcmFnOm8oZy5fZHJhZyxnKX0pLGcuZGF0YVNvdXJjZT1nLm9wdGlvbnMuZGF0YVNvdXJjZSxnLmRhdGFTb3VyY2UmJmcuX3JlZnJlc2hIYW5kbGVyP2cuZGF0YVNvdXJjZS51bmJpbmQobCxnLl9yZWZyZXNoSGFuZGxlcik6Zy5fcmVmcmVzaEhhbmRsZXI9byhnLnJlZnJlc2gsZyksZy5kYXRhU291cmNlJiYoZy5kYXRhU291cmNlLmJpbmQoXCJjaGFuZ2VcIixnLl9yZWZyZXNoSGFuZGxlciksZy5yZWZyZXNoKCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZGF0YVNvdXJjZTt0Lmdyb3VwQ29udGFpbmVyJiZ0Lmdyb3VwQ29udGFpbmVyLmVtcHR5KCkuYXBwZW5kKGUubWFwKG4uZ3JvdXAoKXx8W10sZnVuY3Rpb24oZSl7dmFyIG49ZS5maWVsZC5yZXBsYWNlKGgsXCJcXFxcJDFcIikscj10LmVsZW1lbnQuZmluZCh0Lm9wdGlvbnMuZmlsdGVyKS5maWx0ZXIoXCJbXCIraS5hdHRyKFwiZmllbGRcIikrXCI9XCIrbitcIl1cIik7cmV0dXJuIHQuYnVpbGRJbmRpY2F0b3IoZS5maWVsZCxyLmF0dHIoaS5hdHRyKFwidGl0bGVcIikpLGUuZGlyKX0pLmpvaW4oXCJcIikpLHQuX2ludmFsaWRhdGVHcm91cENvbnRhaW5lcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmdyb3VwQ29udGFpbmVyLm9mZihzKSxlLmdyb3VwQ29udGFpbmVyLmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRcIikmJmUuZ3JvdXBDb250YWluZXIuZGF0YShcImtlbmRvRHJvcFRhcmdldFwiKS5kZXN0cm95KCksZS5ncm91cENvbnRhaW5lci5kYXRhKFwia2VuZG9EcmFnZ2FibGVcIikmJmUuZ3JvdXBDb250YWluZXIuZGF0YShcImtlbmRvRHJhZ2dhYmxlXCIpLmRlc3Ryb3koKSxlLm9wdGlvbnMuZHJhZ2dhYmxlfHxlLmRyYWdnYWJsZS5kZXN0cm95KCksZS5kYXRhU291cmNlJiZlLl9yZWZyZXNoSGFuZGxlciYmKGUuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIixlLl9yZWZyZXNoSGFuZGxlciksZS5fcmVmcmVzaEhhbmRsZXI9bnVsbCksZS5ncm91cENvbnRhaW5lcj1lLmVsZW1lbnQ9ZS5kcmFnZ2FibGU9bnVsbH0sb3B0aW9uczp7bmFtZTpcIkdyb3VwYWJsZVwiLGZpbHRlcjpcInRoXCIsZHJhZ2dhYmxlRWxlbWVudHM6XCJ0aFwiLG1lc3NhZ2VzOntlbXB0eTpcIkRyYWcgYSBjb2x1bW4gaGVhZGVyIGFuZCBkcm9wIGl0IGhlcmUgdG8gZ3JvdXAgYnkgdGhhdCBjb2x1bW5cIn19LGluZGljYXRvcjpmdW5jdGlvbih0KXt2YXIgbj1lKFwiLmstZ3JvdXAtaW5kaWNhdG9yXCIsdGhpcy5ncm91cENvbnRhaW5lcik7cmV0dXJuIGUuZ3JlcChuLGZ1bmN0aW9uKG4pe3JldHVybiBlKG4pLmF0dHIoaS5hdHRyKFwiZmllbGRcIikpPT09dH0pWzBdfSxidWlsZEluZGljYXRvcjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGMoe2ZpZWxkOmUucmVwbGFjZSgvXCIvZyxcIidcIiksZGlyOm4sdGl0bGU6dCxuczppLm5zfSl9LGRlc2NyaXB0b3JzOmZ1bmN0aW9uKCl7dmFyIHQsbixyLG8sYSxzPXRoaXMsbD1lKFwiLmstZ3JvdXAtaW5kaWNhdG9yXCIscy5ncm91cENvbnRhaW5lcik7cmV0dXJuIHQ9cy5lbGVtZW50LmZpbmQocy5vcHRpb25zLmZpbHRlcikubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxyPXQuYXR0cihpLmF0dHIoXCJhZ2dyZWdhdGVzXCIpKSxzPXQuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSk7aWYociYmXCJcIiE9PXIpZm9yKG49ci5zcGxpdChcIixcIikscj1bXSxvPTAsYT1uLmxlbmd0aDthPm87bysrKXIucHVzaCh7ZmllbGQ6cyxhZ2dyZWdhdGU6bltvXX0pO3JldHVybiByfSkudG9BcnJheSgpLGUubWFwKGwsZnVuY3Rpb24obil7cmV0dXJuIG49ZShuKSxyPW4uYXR0cihpLmF0dHIoXCJmaWVsZFwiKSkse2ZpZWxkOnIsZGlyOm4uYXR0cihpLmF0dHIoXCJkaXJcIikpLGFnZ3JlZ2F0ZXM6dHx8W119fSl9LF9yZW1vdmVJbmRpY2F0b3I6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLnJlbW92ZSgpLHQuX2ludmFsaWRhdGVHcm91cENvbnRhaW5lcigpLHQuX2NoYW5nZSgpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRhdGFTb3VyY2UmJmUuZGF0YVNvdXJjZS5ncm91cChlLmRlc2NyaXB0b3JzKCkpfSxfZHJvcEN1ZVBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLHMsbD10aGlzLl9kcm9wQ3VlUG9zaXRpb25zO2lmKHUuaXMoXCI6dmlzaWJsZVwiKSYmMCE9PWwubGVuZ3RoKXJldHVybiB0PU1hdGguY2VpbCh0KSxuPWxbbC5sZW5ndGgtMV0saT1uLmxlZnQscj1uLnJpZ2h0LG89cGFyc2VJbnQobi5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApLHM9cGFyc2VJbnQobi5lbGVtZW50LmNzcyhcIm1hcmdpblJpZ2h0XCIpLDEwKSx0Pj1yJiYhYXx8aT50JiZhP3Q9e2xlZnQ6bi5lbGVtZW50LnBvc2l0aW9uKCkubGVmdCsoYT8tbzpuLmVsZW1lbnQub3V0ZXJXaWR0aCgpK3MpLGVsZW1lbnQ6bi5lbGVtZW50LGJlZm9yZTohMX06KHQ9ZS5ncmVwKGwsZnVuY3Rpb24oZSl7cmV0dXJuIHQ+PWUubGVmdCYmZS5yaWdodD49dHx8YSYmdD5lLnJpZ2h0XG59KVswXSx0JiYodD17bGVmdDphP3QuZWxlbWVudC5wb3NpdGlvbigpLmxlZnQrdC5lbGVtZW50Lm91dGVyV2lkdGgoKStzOnQuZWxlbWVudC5wb3NpdGlvbigpLmxlZnQtbyxlbGVtZW50OnQuZWxlbWVudCxiZWZvcmU6ITB9KSksdH0sX2RyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZHJvcEN1ZVBvc2l0aW9uKGUueC5sb2NhdGlvbik7dCYmdS5jc3Moe2xlZnQ6dC5sZWZ0LHJpZ2h0OlwiYXV0b1wifSl9LF9jYW5EcmFnOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cihpLmF0dHIoXCJmaWVsZFwiKSk7cmV0dXJuXCJmYWxzZVwiIT1lLmF0dHIoaS5hdHRyKFwiZ3JvdXBhYmxlXCIpKSYmdCYmKGUuaGFzQ2xhc3MoXCJrLWdyb3VwLWluZGljYXRvclwiKXx8IXRoaXMuaW5kaWNhdG9yKHQpKX0sX2NhbkRyb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUubmV4dCgpLHI9ZVswXSE9PXRbMF0mJighaVswXXx8dFswXSE9PWlbMF18fCFhJiZuPmkucG9zaXRpb24oKS5sZWZ0fHxhJiZuPGkucG9zaXRpb24oKS5sZWZ0KTtyZXR1cm4gcn0sX2RyYWdFbmQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPXQuY3VycmVudFRhcmdldC5hdHRyKGkuYXR0cihcImZpZWxkXCIpKSxvPW4uaW5kaWNhdG9yKHIpO3QhPT1uLm9wdGlvbnMuZHJhZ2dhYmxlJiYhdC5kcm9wcGVkJiZvJiZuLl9yZW1vdmVJbmRpY2F0b3IoZShvKSksbi5fZHJhZ0NhbmNlbCgpfSxfZHJhZ0NhbmNlbDpmdW5jdGlvbigpe3UucmVtb3ZlKCksdGhpcy5fZHJvcEN1ZVBvc2l0aW9ucz1bXX0sX2ludGlhbGl6ZVBvc2l0aW9uczpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxyPWUoXCIuay1ncm91cC1pbmRpY2F0b3JcIixuLmdyb3VwQ29udGFpbmVyKTtuLl9kcm9wQ3VlUG9zaXRpb25zPWUubWFwKHIsZnVuY3Rpb24obil7cmV0dXJuIG49ZShuKSx0PWkuZ2V0T2Zmc2V0KG4pLmxlZnQse2xlZnQ6cGFyc2VJbnQodCwxMCkscmlnaHQ6cGFyc2VJbnQodCtuLm91dGVyV2lkdGgoKSwxMCksZWxlbWVudDpufX0pfSxfaW52YWxpZGF0ZUdyb3VwQ29udGFpbmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cENvbnRhaW5lcjtlJiZlLmlzKFwiOmVtcHR5XCIpJiZlLmh0bWwodGhpcy5vcHRpb25zLm1lc3NhZ2VzLmVtcHR5KX19KTtpLnVpLnBsdWdpbihwKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3Q9ZSh0KSxuP3QuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLnJlbW92ZUNsYXNzKFwiay1hZGRcIikuYWRkQ2xhc3MoXCJrLWRlbmllZFwiKTp0LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKS5yZW1vdmVDbGFzcyhcImstZGVuaWVkXCIpLmFkZENsYXNzKFwiay1hZGRcIil9dmFyIG49d2luZG93LmtlbmRvLGk9bi5nZXRPZmZzZXQscj1uLnVpLldpZGdldCxvPVwiY2hhbmdlXCIsYT1cImstcmVvcmRlcmFibGVcIixzPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHMsbCl7dmFyIGMsZD10aGlzLHU9bi5ndWlkKCkrXCItcmVvcmRlcmFibGVcIjtyLmZuLmluaXQuY2FsbChkLHMsbCkscz1kLmVsZW1lbnQuYWRkQ2xhc3MoYSksbD1kLm9wdGlvbnMsZC5kcmFnZ2FibGU9Yz1sLmRyYWdnYWJsZXx8bmV3IG4udWkuRHJhZ2dhYmxlKHMse2dyb3VwOnUsZmlsdGVyOmwuZmlsdGVyLGhpbnQ6bC5oaW50fSksZC5yZW9yZGVyRHJvcEN1ZT1lKCc8ZGl2IGNsYXNzPVwiay1yZW9yZGVyLWN1ZVwiPjxkaXYgY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCI+PC9kaXY+PC9kaXY+Jykscy5maW5kKGMub3B0aW9ucy5maWx0ZXIpLmtlbmRvRHJvcFRhcmdldCh7Z3JvdXA6Yy5vcHRpb25zLmdyb3VwLGRyYWdlbnRlcjpmdW5jdGlvbihlKXt2YXIgbixyLG8sYTtkLl9kcmFnZ2FibGUmJihuPXRoaXMuZWxlbWVudCxvPSFkLl9kcm9wVGFyZ2V0QWxsb3dlZChuKXx8ZC5faXNMYXN0RHJhZ2dhYmxlKCksdChlLmRyYWdnYWJsZS5oaW50LG8pLG98fChyPWkobiksYT1yLmxlZnQsbC5pblNhbWVDb250YWluZXImJiFsLmluU2FtZUNvbnRhaW5lcih7c291cmNlOm4sdGFyZ2V0OmQuX2RyYWdnYWJsZSxzb3VyY2VJbmRleDpkLl9pbmRleChuKSx0YXJnZXRJbmRleDpkLl9pbmRleChkLl9kcmFnZ2FibGUpfSk/ZC5fZHJvcFRhcmdldD1uOmQuX2luZGV4KG4pPmQuX2luZGV4KGQuX2RyYWdnYWJsZSkmJihhKz1uLm91dGVyV2lkdGgoKSksZC5yZW9yZGVyRHJvcEN1ZS5jc3Moe2hlaWdodDpuLm91dGVySGVpZ2h0KCksdG9wOnIudG9wLGxlZnQ6YX0pLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpKSl9LGRyYWdsZWF2ZTpmdW5jdGlvbihlKXt0KGUuZHJhZ2dhYmxlLmhpbnQsITApLGQucmVvcmRlckRyb3BDdWUucmVtb3ZlKCksZC5fZHJvcFRhcmdldD1udWxsfSxkcm9wOmZ1bmN0aW9uKCl7dmFyIGUsdCxuO2QuX2Ryb3BUYXJnZXQ9bnVsbCxkLl9kcmFnZ2FibGUmJihlPXRoaXMuZWxlbWVudCx0PWQuX2RyYWdnYWJsZSxuPSExLGQuX2Ryb3BUYXJnZXRBbGxvd2VkKGUpJiYhZC5faXNMYXN0RHJhZ2dhYmxlKCkmJmQudHJpZ2dlcihvLHtlbGVtZW50OmQuX2RyYWdnYWJsZSx0YXJnZXQ6ZSxvbGRJbmRleDpkLl9pbmRleCh0KSxuZXdJbmRleDpkLl9pbmRleChlKSxwb3NpdGlvbjppKGQucmVvcmRlckRyb3BDdWUpLmxlZnQ+aShlKS5sZWZ0P1wiYWZ0ZXJcIjpcImJlZm9yZVwifSkpfX0pLGMuYmluZChbXCJkcmFnY2FuY2VsXCIsXCJkcmFnZW5kXCIsXCJkcmFnc3RhcnRcIixcImRyYWdcIl0se2RyYWdjYW5jZWw6ZnVuY3Rpb24oKXtkLnJlb3JkZXJEcm9wQ3VlLnJlbW92ZSgpLGQuX2RyYWdnYWJsZT1udWxsLGQuX2VsZW1lbnRzPW51bGx9LGRyYWdlbmQ6ZnVuY3Rpb24oKXtkLnJlb3JkZXJEcm9wQ3VlLnJlbW92ZSgpLGQuX2RyYWdnYWJsZT1udWxsLGQuX2VsZW1lbnRzPW51bGx9LGRyYWdzdGFydDpmdW5jdGlvbihlKXtkLl9kcmFnZ2FibGU9ZS5jdXJyZW50VGFyZ2V0LGQuX2VsZW1lbnRzPWQuZWxlbWVudC5maW5kKGQuZHJhZ2dhYmxlLm9wdGlvbnMuZmlsdGVyKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdCxuO2QuX2Ryb3BUYXJnZXQmJiF0aGlzLmhpbnQuZmluZChcIi5rLWRyYWctc3RhdHVzXCIpLmhhc0NsYXNzKFwiay1kZW5pZWRcIikmJih0PWkoZC5fZHJvcFRhcmdldCkubGVmdCxuPWQuX2Ryb3BUYXJnZXQub3V0ZXJXaWR0aCgpLGQucmVvcmRlckRyb3BDdWUuY3NzKGUucGFnZVg+dCtuLzI/e2xlZnQ6dCtufTp7bGVmdDp0fSkpfX0pfSxvcHRpb25zOntuYW1lOlwiUmVvcmRlcmFibGVcIixmaWx0ZXI6XCIqXCJ9LGV2ZW50czpbb10sX2lzTGFzdERyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLmluU2FtZUNvbnRhaW5lcixuPXRoaXMuX2RyYWdnYWJsZVswXSxpPXRoaXMuX2VsZW1lbnRzLmdldCgpLHI9ITE7aWYoIXQpcmV0dXJuITE7Zm9yKDshciYmaS5sZW5ndGg+MDspZT1pLnBvcCgpLHI9biE9PWUmJnQoe3NvdXJjZTpuLHRhcmdldDplLHNvdXJjZUluZGV4OnRoaXMuX2luZGV4KG4pLHRhcmdldEluZGV4OnRoaXMuX2luZGV4KGUpfSk7cmV0dXJuIXJ9LF9kcm9wVGFyZ2V0QWxsb3dlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuaW5TYW1lQ29udGFpbmVyLG49dGhpcy5vcHRpb25zLmRyYWdPdmVyQ29udGFpbmVycyxpPXRoaXMuX2RyYWdnYWJsZTtyZXR1cm4gaVswXT09PWVbMF0/ITE6dCYmbj90KHtzb3VyY2U6aSx0YXJnZXQ6ZSxzb3VyY2VJbmRleDp0aGlzLl9pbmRleChpKSx0YXJnZXRJbmRleDp0aGlzLl9pbmRleChlKX0pPyEwOm4odGhpcy5faW5kZXgoaSksdGhpcy5faW5kZXgoZSkpOiEwfSxfaW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzLmluZGV4KGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbCh0KSx0LmVsZW1lbnQuZmluZCh0LmRyYWdnYWJsZS5vcHRpb25zLmZpbHRlcikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5kYXRhKFwia2VuZG9Ecm9wVGFyZ2V0XCIpJiZ0LmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRcIikuZGVzdHJveSgpfSksdC5kcmFnZ2FibGUmJih0LmRyYWdnYWJsZS5kZXN0cm95KCksdC5kcmFnZ2FibGUuZWxlbWVudD10LmRyYWdnYWJsZT1udWxsKSx0LmVsZW1lbnRzPXQucmVvcmRlckRyb3BDdWU9dC5fZWxlbWVudHM9dC5fZHJhZ2dhYmxlPW51bGx9fSk7bi51aS5wbHVnaW4ocyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuV2lkZ2V0LG89ZS5wcm94eSxhPW4uaXNGdW5jdGlvbixzPWUuZXh0ZW5kLGw9XCJob3Jpem9udGFsXCIsYz1cInZlcnRpY2FsXCIsZD1cInN0YXJ0XCIsdT1cInJlc2l6ZVwiLGg9XCJyZXNpemVlbmRcIixwPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyLmZuLmluaXQuY2FsbChuLGUsdCksbi5vcmllbnRhdGlvbj1uLm9wdGlvbnMub3JpZW50YXRpb24udG9Mb3dlckNhc2UoKSE9Yz9sOmMsbi5fcG9zaXRpb25Nb3VzZT1uLm9yaWVudGF0aW9uPT1sP1wieFwiOlwieVwiLG4uX3Bvc2l0aW9uPW4ub3JpZW50YXRpb249PWw/XCJsZWZ0XCI6XCJ0b3BcIixuLl9zaXppbmdEb209bi5vcmllbnRhdGlvbj09bD9cIm91dGVyV2lkdGhcIjpcIm91dGVySGVpZ2h0XCIsbi5kcmFnZ2FibGU9bmV3IGkuRHJhZ2dhYmxlKGUse2Rpc3RhbmNlOjAsZmlsdGVyOnQuaGFuZGxlLGRyYWc6byhuLl9yZXNpemUsbiksZHJhZ2NhbmNlbDpvKG4uX2NhbmNlbCxuKSxkcmFnc3RhcnQ6byhuLl9zdGFydCxuKSxkcmFnZW5kOm8obi5fc3RvcCxuKX0pLG4udXNlckV2ZW50cz1uLmRyYWdnYWJsZS51c2VyRXZlbnRzfSxldmVudHM6W3UsaCxkXSxvcHRpb25zOntuYW1lOlwiUmVzaXphYmxlXCIsb3JpZW50YXRpb246bH0scmVzaXplOmZ1bmN0aW9uKCl7fSxfbWF4OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLmhpbnQ/bi5oaW50W24uX3NpemluZ0RvbV0oKTowLHI9bi5vcHRpb25zLm1heDtyZXR1cm4gYShyKT9yKGUpOnIhPT10P24uX2luaXRpYWxFbGVtZW50UG9zaXRpb24rci1pOnJ9LF9taW46ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucy5taW47cmV0dXJuIGEoaSk/aShlKTppIT09dD9uLl9pbml0aWFsRWxlbWVudFBvc2l0aW9uK2k6aX0sX3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMuaGludCxyPWUodC5jdXJyZW50VGFyZ2V0KTtuLl9pbml0aWFsRWxlbWVudFBvc2l0aW9uPXIucG9zaXRpb24oKVtuLl9wb3NpdGlvbl0sbi5faW5pdGlhbE1vdXNlUG9zaXRpb249dFtuLl9wb3NpdGlvbk1vdXNlXS5zdGFydExvY2F0aW9uLGkmJihuLmhpbnQ9YShpKT9lKGkocikpOmksbi5oaW50LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSkuY3NzKG4uX3Bvc2l0aW9uLG4uX2luaXRpYWxFbGVtZW50UG9zaXRpb24pLmFwcGVuZFRvKG4uZWxlbWVudCkpLG4udHJpZ2dlcihkLHQpLG4uX21heFBvc2l0aW9uPW4uX21heCh0KSxuLl9taW5Qb3NpdGlvbj1uLl9taW4odCksZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixyLmNzcyhcImN1cnNvclwiKSl9LF9yZXNpemU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fbWF4UG9zaXRpb24sbz1pLl9taW5Qb3NpdGlvbixhPWkuX2luaXRpYWxFbGVtZW50UG9zaXRpb24rKGVbaS5fcG9zaXRpb25Nb3VzZV0ubG9jYXRpb24taS5faW5pdGlhbE1vdXNlUG9zaXRpb24pO249byE9PXQ/TWF0aC5tYXgobyxhKTphLGkucG9zaXRpb249bj1yIT09dD9NYXRoLm1pbihyLG4pOm4saS5oaW50JiZpLmhpbnQudG9nZ2xlQ2xhc3MoaS5vcHRpb25zLmludmFsaWRDbGFzc3x8XCJcIixuPT1yfHxuPT1vKS5jc3MoaS5fcG9zaXRpb24sbiksaS5yZXNpemluZz0hMCxpLnRyaWdnZXIodSxzKGUse3Bvc2l0aW9uOm59KSl9LF9zdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5oaW50JiZuLmhpbnQucmVtb3ZlKCksbi5yZXNpemluZz0hMSxuLnRyaWdnZXIoaCxzKHQse3Bvc2l0aW9uOm4ucG9zaXRpb259KSksZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIixcIlwiKX0sX2NhbmNlbDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO24uaGludCYmKG4ucG9zaXRpb249dCxuLmhpbnQuY3NzKG4uX3Bvc2l0aW9uLG4uX2luaXRpYWxFbGVtZW50UG9zaXRpb24pLG4uX3N0b3AoZSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRyYWdnYWJsZSYmZS5kcmFnZ2FibGUuZGVzdHJveSgpfSxwcmVzczpmdW5jdGlvbihlKXtpZihlKXt2YXIgdD1lLnBvc2l0aW9uKCksbj10aGlzO24udXNlckV2ZW50cy5wcmVzcyh0LmxlZnQsdC50b3AsZVswXSksbi50YXJnZXRQb3NpdGlvbj10LG4udGFyZ2V0PWV9fSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9wb3NpdGlvbixyPW4udGFyZ2V0UG9zaXRpb24sbz1uLnBvc2l0aW9uO289PT10JiYobz1yW2ldKSxyW2ldPW8rZSxuLnVzZXJFdmVudHMubW92ZShyLmxlZnQsci50b3ApfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLnVzZXJFdmVudHMuZW5kKCksdGhpcy50YXJnZXQ9dGhpcy5wb3NpdGlvbj10fX0pO24udWkucGx1Z2luKHApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCxuKXt0cnl7cmV0dXJuIGUuY29udGFpbnModCxuKXx8dD09bn1jYXRjaChpKXtyZXR1cm4hMX19ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5jbG9uZSgpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUuY2xvbmUoKS5yZW1vdmVBdHRyKFwiaWRcIikuY3NzKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkuV2lkZ2V0LHM9XCJzdGFydFwiLGw9XCJiZWZvcmVNb3ZlXCIsYz1cIm1vdmVcIixkPVwiZW5kXCIsdT1cImNoYW5nZVwiLGg9XCJjYW5jZWxcIixwPVwic29ydFwiLGY9XCJyZW1vdmVcIixnPVwicmVjZWl2ZVwiLG09XCI+KlwiLHY9LTEsXz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7YS5mbi5pbml0LmNhbGwobixlLHQpLG4ub3B0aW9ucy5wbGFjZWhvbGRlcnx8KG4ub3B0aW9ucy5wbGFjZWhvbGRlcj1yKSxuLm9wdGlvbnMuaGludHx8KG4ub3B0aW9ucy5oaW50PWkpLG4uX2RyYWdnYWJsZT1uLl9jcmVhdGVEcmFnZ2FibGUoKX0sZXZlbnRzOltzLGwsYyxkLHUsaF0sb3B0aW9uczp7bmFtZTpcIlNvcnRhYmxlXCIsaGludDpudWxsLHBsYWNlaG9sZGVyOm51bGwsZmlsdGVyOm0saG9sZFRvRHJhZzohMSxkaXNhYmxlZDpudWxsLGNvbnRhaW5lcjpudWxsLGNvbm5lY3RXaXRoOm51bGwsaGFuZGxlcjpudWxsLGN1cnNvck9mZnNldDpudWxsLGF4aXM6bnVsbCxpZ25vcmU6bnVsbCxjdXJzb3I6XCJhdXRvXCJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpLGEuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxfY3JlYXRlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPXQub3B0aW9ucztyZXR1cm4gbmV3IG8udWkuRHJhZ2dhYmxlKG4se2ZpbHRlcjppLmZpbHRlcixoaW50Om8uaXNGdW5jdGlvbihpLmhpbnQpP2kuaGludDplKGkuaGludCksaG9sZFRvRHJhZzppLmhvbGRUb0RyYWcsY29udGFpbmVyOmkuY29udGFpbmVyP2UoaS5jb250YWluZXIpOm51bGwsY3Vyc29yT2Zmc2V0OmkuY3Vyc29yT2Zmc2V0LGF4aXM6aS5heGlzLGlnbm9yZTppLmlnbm9yZSxkcmFnc3RhcnQ6ZS5wcm94eSh0Ll9kcmFnc3RhcnQsdCksZHJhZ2NhbmNlbDplLnByb3h5KHQuX2RyYWdjYW5jZWwsdCksZHJhZzplLnByb3h5KHQuX2RyYWcsdCksZHJhZ2VuZDplLnByb3h5KHQuX2RyYWdlbmQsdCl9KX0sX2RyYWdzdGFydDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLmRyYWdnZWRFbGVtZW50PXQuY3VycmVudFRhcmdldCxpPXQudGFyZ2V0fHxvLmVsZW1lbnRVbmRlckN1cnNvcih0KSxyPXRoaXMub3B0aW9ucy5kaXNhYmxlZCxhPXRoaXMub3B0aW9ucy5oYW5kbGVyLGw9dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLGM9dGhpcy5wbGFjZWhvbGRlcj1lKG8uaXNGdW5jdGlvbihsKT9sLmNhbGwodGhpcyxuKTpsKTtyJiZuLmlzKHIpP3QucHJldmVudERlZmF1bHQoKTphJiYhZShpKS5pcyhhKT90LnByZXZlbnREZWZhdWx0KCk6dGhpcy50cmlnZ2VyKHMse2l0ZW06bixkcmFnZ2FibGVFdmVudDp0fSk/dC5wcmV2ZW50RGVmYXVsdCgpOihuLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksbi5iZWZvcmUoYyksdGhpcy5fc2V0Q3Vyc29yKCkpfSxfZHJhZ2NhbmNlbDpmdW5jdGlvbigpe3RoaXMuX2NhbmNlbCgpLHRoaXMudHJpZ2dlcihoLHtpdGVtOnRoaXMuZHJhZ2dlZEVsZW1lbnR9KSx0aGlzLl9yZXNldEN1cnNvcigpfSxfZHJhZzpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGw9dGhpcy5kcmFnZ2VkRWxlbWVudCxjPXRoaXMuX2ZpbmRUYXJnZXQobiksZD17bGVmdDpuLngubG9jYXRpb24sdG9wOm4ueS5sb2NhdGlvbn0sdT17eDpuLnguZGVsdGEseTpuLnkuZGVsdGF9LGg9dGhpcy5vcHRpb25zLmF4aXMscD17aXRlbTpsLGxpc3Q6dGhpcyxkcmFnZ2FibGVFdmVudDpufTtpZihcInhcIj09PWh8fFwieVwiPT09aClyZXR1cm4gdGhpcy5fbW92ZW1lbnRCeUF4aXMoaCxkLHVbaF0scCksdDtpZihjKXtpZihpPXRoaXMuX2dldEVsZW1lbnRDZW50ZXIoYy5lbGVtZW50KSxyPXtsZWZ0Ok1hdGgucm91bmQoZC5sZWZ0LWkubGVmdCksdG9wOk1hdGgucm91bmQoZC50b3AtaS50b3ApfSxlLmV4dGVuZChwLHt0YXJnZXQ6Yy5lbGVtZW50fSksYy5hcHBlbmRUb0JvdHRvbSlyZXR1cm4gdGhpcy5fbW92ZVBsYWNlaG9sZGVyKGMsbnVsbCxwKSx0O2lmKGMuYXBwZW5kQWZ0ZXJIaWRkZW4mJnRoaXMuX21vdmVQbGFjZWhvbGRlcihjLFwibmV4dFwiLHApLHRoaXMuX2lzRmxvYXRpbmcoYy5lbGVtZW50KT8wPnUueCYmMD5yLmxlZnQ/bz1cInByZXZcIjp1Lng+MCYmci5sZWZ0PjAmJihvPVwibmV4dFwiKTowPnUueSYmMD5yLnRvcD9vPVwicHJldlwiOnUueT4wJiZyLnRvcD4wJiYobz1cIm5leHRcIiksbyl7Zm9yKHM9XCJwcmV2XCI9PT1vP2pRdWVyeS5mbi5wcmV2OmpRdWVyeS5mbi5uZXh0LGE9cy5jYWxsKGMuZWxlbWVudCk7YS5sZW5ndGgmJiFhLmlzKFwiOnZpc2libGVcIik7KWE9cy5jYWxsKGEpO2FbMF0hPXRoaXMucGxhY2Vob2xkZXJbMF0mJnRoaXMuX21vdmVQbGFjZWhvbGRlcihjLG8scCl9fX0sX2RyYWdlbmQ6ZnVuY3Rpb24obil7dmFyIGkscixvLGEscz10aGlzLnBsYWNlaG9sZGVyLGw9dGhpcy5kcmFnZ2VkRWxlbWVudCxjPXRoaXMuaW5kZXhPZihsKSxoPXRoaXMuaW5kZXhPZihzKSxtPXRoaXMub3B0aW9ucy5jb25uZWN0V2l0aDtyZXR1cm4gdGhpcy5fcmVzZXRDdXJzb3IoKSxvPXthY3Rpb246cCxpdGVtOmwsb2xkSW5kZXg6YyxuZXdJbmRleDpoLGRyYWdnYWJsZUV2ZW50Om59LGg+PTA/cj10aGlzLnRyaWdnZXIoZCxvKTooaT1zLnBhcmVudHMobSkuZ2V0S2VuZG9Tb3J0YWJsZSgpLG8uYWN0aW9uPWYsYT1lLmV4dGVuZCh7fSxvLHthY3Rpb246ZyxvbGRJbmRleDp2LG5ld0luZGV4OmkuaW5kZXhPZihzKX0pLHI9ISghdGhpcy50cmlnZ2VyKGQsbykmJiFpLnRyaWdnZXIoZCxhKSkpLHJ8fGg9PT1jPyh0aGlzLl9jYW5jZWwoKSx0KToocy5yZXBsYWNlV2l0aChsKSxsLnNob3coKSx0aGlzLl9kcmFnZ2FibGUuZHJvcHBlZD0hMCxvPXthY3Rpb246dGhpcy5pbmRleE9mKGwpIT12P3A6ZixpdGVtOmwsb2xkSW5kZXg6YyxuZXdJbmRleDp0aGlzLmluZGV4T2YobCksZHJhZ2dhYmxlRXZlbnQ6bn0sdGhpcy50cmlnZ2VyKHUsbyksaSYmKGE9ZS5leHRlbmQoe30sbyx7YWN0aW9uOmcsb2xkSW5kZXg6dixuZXdJbmRleDppLmluZGV4T2YobCl9KSxpLnRyaWdnZXIodSxhKSksdCl9LF9maW5kVGFyZ2V0OmZ1bmN0aW9uKG4pe3ZhciBpLHIsbz10aGlzLl9maW5kRWxlbWVudFVuZGVyQ3Vyc29yKG4pLGE9dGhpcy5vcHRpb25zLmNvbm5lY3RXaXRoO3JldHVybiBlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSxvKT8oaT10aGlzLml0ZW1zKCkscj1pLmZpbHRlcihvKVswXXx8aS5oYXMobylbMF0scj97ZWxlbWVudDplKHIpLHNvcnRhYmxlOnRoaXN9Om51bGwpOnRoaXMuZWxlbWVudFswXT09byYmdGhpcy5faXNFbXB0eSgpP3tlbGVtZW50OnRoaXMuZWxlbWVudCxzb3J0YWJsZTp0aGlzLGFwcGVuZFRvQm90dG9tOiEwfTp0aGlzLmVsZW1lbnRbMF09PW8mJnRoaXMuX2lzTGFzdEhpZGRlbigpPyhyPXRoaXMuaXRlbXMoKS5lcSgwKSx7ZWxlbWVudDpyLHNvcnRhYmxlOnRoaXMsYXBwZW5kQWZ0ZXJIaWRkZW46ITB9KTphP3RoaXMuX3NlYXJjaENvbm5lY3RlZFRhcmdldHMobyxuKTp0fSxfZmluZEVsZW1lbnRVbmRlckN1cnNvcjpmdW5jdGlvbihlKXt7dmFyIHQ9by5lbGVtZW50VW5kZXJDdXJzb3IoZSksaT1lLnNlbmRlcjt0aGlzLml0ZW1zKCl9cmV0dXJuIG4oaS5oaW50WzBdLHQpJiYoaS5oaW50LmhpZGUoKSx0PW8uZWxlbWVudFVuZGVyQ3Vyc29yKGUpLHR8fCh0PW8uZWxlbWVudFVuZGVyQ3Vyc29yKGUpKSxpLmhpbnQuc2hvdygpKSx0fSxfc2VhcmNoQ29ubmVjdGVkVGFyZ2V0czpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhLHM9ZSh0aGlzLm9wdGlvbnMuY29ubmVjdFdpdGgpO2ZvcihhPTA7cy5sZW5ndGg+YTthKyspaWYoaT1zLmVxKGEpLmdldEtlbmRvU29ydGFibGUoKSxlLmNvbnRhaW5zKHNbYV0sdCkpe2lmKGkpcmV0dXJuIHI9aS5pdGVtcygpLG89ci5maWx0ZXIodClbMF18fHIuaGFzKHQpWzBdLG8/KGkucGxhY2Vob2xkZXI9dGhpcy5wbGFjZWhvbGRlcix7ZWxlbWVudDplKG8pLHNvcnRhYmxlOml9KTpudWxsfWVsc2UgaWYoc1thXT09dCl7aWYoaSYmaS5faXNFbXB0eSgpKXJldHVybntlbGVtZW50OnMuZXEoYSksc29ydGFibGU6aSxhcHBlbmRUb0JvdHRvbTohMH07aWYodGhpcy5faXNDdXJzb3JBZnRlckxhc3QoaSxuKSlyZXR1cm4gbz1pLml0ZW1zKCkubGFzdCgpLHtlbGVtZW50Om8sc29ydGFibGU6aX19fSxfaXNDdXJzb3JBZnRlckxhc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9ZS5pdGVtcygpLmxhc3QoKSxhPXtsZWZ0OnQueC5sb2NhdGlvbix0b3A6dC55LmxvY2F0aW9ufTtyZXR1cm4gbj1vLmdldE9mZnNldChyKSxuLnRvcCs9ci5vdXRlckhlaWdodCgpLG4ubGVmdCs9ci5vdXRlcldpZHRoKCksaT10aGlzLl9pc0Zsb2F0aW5nKHIpP24ubGVmdC1hLmxlZnQ6bi50b3AtYS50b3AsMD5pPyEwOiExfSxfbW92ZW1lbnRCeUF4aXM6ZnVuY3Rpb24odCxuLGkscil7dmFyIG8sYT1cInhcIj09PXQ/bi5sZWZ0Om4udG9wLHM9MD5pP3RoaXMucGxhY2Vob2xkZXIucHJldigpOnRoaXMucGxhY2Vob2xkZXIubmV4dCgpO3MubGVuZ3RoJiYhcy5pcyhcIjp2aXNpYmxlXCIpJiYocz0wPmk/cy5wcmV2KCk6cy5uZXh0KCkpLGUuZXh0ZW5kKHIse3RhcmdldDpzfSksbz10aGlzLl9nZXRFbGVtZW50Q2VudGVyKHMpLG8mJihvPVwieFwiPT09dD9vLmxlZnQ6by50b3ApLHMubGVuZ3RoJiYwPmkmJjA+YS1vP3RoaXMuX21vdmVQbGFjZWhvbGRlcih7ZWxlbWVudDpzLHNvcnRhYmxlOnRoaXN9LFwicHJldlwiLHIpOnMubGVuZ3RoJiZpPjAmJmEtbz4wJiZ0aGlzLl9tb3ZlUGxhY2Vob2xkZXIoe2VsZW1lbnQ6cyxzb3J0YWJsZTp0aGlzfSxcIm5leHRcIixyKX0sX21vdmVQbGFjZWhvbGRlcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5wbGFjZWhvbGRlcjtlLnNvcnRhYmxlLnRyaWdnZXIobCxuKXx8KHQ/XCJwcmV2XCI9PT10P2UuZWxlbWVudC5iZWZvcmUoaSk6XCJuZXh0XCI9PT10JiZlLmVsZW1lbnQuYWZ0ZXIoaSk6ZS5lbGVtZW50LmFwcGVuZChpKSxlLnNvcnRhYmxlLnRyaWdnZXIoYyxuKSl9LF9zZXRDdXJzb3I6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucy5jdXJzb3I7biYmXCJhdXRvXCIhPT1uJiYodD1lKGRvY3VtZW50LmJvZHkpLHRoaXMuX29yaWdpbmFsQ3Vyc29yVHlwZT10LmNzcyhcImN1cnNvclwiKSx0LmNzcyh7Y3Vyc29yOm59KSx0aGlzLl9jdXJzb3JTdHlsZXNoZWV0fHwodGhpcy5fY3Vyc29yU3R5bGVzaGVldD1lKFwiPHN0eWxlPiogeyBjdXJzb3I6IFwiK24rXCIgIWltcG9ydGFudDsgfTwvc3R5bGU+XCIpKSx0aGlzLl9jdXJzb3JTdHlsZXNoZWV0LmFwcGVuZFRvKHQpKX0sX3Jlc2V0Q3Vyc29yOmZ1bmN0aW9uKCl7dGhpcy5fb3JpZ2luYWxDdXJzb3JUeXBlJiYoZShkb2N1bWVudC5ib2R5KS5jc3MoXCJjdXJzb3JcIix0aGlzLl9vcmlnaW5hbEN1cnNvclR5cGUpLHRoaXMuX29yaWdpbmFsQ3Vyc29yVHlwZT1udWxsLHRoaXMuX2N1cnNvclN0eWxlc2hlZXQucmVtb3ZlKCkpfSxfZ2V0RWxlbWVudENlbnRlcjpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aD9vLmdldE9mZnNldChlKTpudWxsO3JldHVybiB0JiYodC50b3ArPWUub3V0ZXJIZWlnaHQoKS8yLHQubGVmdCs9ZS5vdXRlcldpZHRoKCkvMiksdH0sX2lzRmxvYXRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuL2xlZnR8cmlnaHQvLnRlc3QoZS5jc3MoXCJmbG9hdFwiKSl8fC9pbmxpbmV8dGFibGUtY2VsbC8udGVzdChlLmNzcyhcImRpc3BsYXlcIikpfSxfY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmFnZ2VkRWxlbWVudC5zaG93KCksdGhpcy5wbGFjZWhvbGRlci5yZW1vdmUoKX0sX2l0ZW1zOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm9wdGlvbnMuZmlsdGVyO3JldHVybiBlPXQ/dGhpcy5lbGVtZW50LmZpbmQodCk6dGhpcy5lbGVtZW50LmNoaWxkcmVuKCl9LGluZGV4T2Y6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faXRlbXMoKSxuPXRoaXMucGxhY2Vob2xkZXIsaT10aGlzLmRyYWdnZWRFbGVtZW50O3JldHVybiBuJiZlWzBdPT1uWzBdP3Qubm90KGkpLmluZGV4KGUpOnQubm90KG4pLmluZGV4KGUpfSxpdGVtczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGxhY2Vob2xkZXIsdD10aGlzLl9pdGVtcygpO3JldHVybiBlJiYodD10Lm5vdChlKSksdH0sX2lzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pdGVtcygpLmxlbmd0aH0sX2lzTGFzdEhpZGRlbjpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5pdGVtcygpLmxlbmd0aCYmdGhpcy5pdGVtcygpLmlzKFwiOmhpZGRlblwiKX19KTtvLnVpLnBsdWdpbihfKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7dmFyIG49ci5nZXRPZmZzZXQoZSksaT10LmxlZnQrdC53aWR0aCxvPXQudG9wK3QuaGVpZ2h0O3JldHVybiBuLnJpZ2h0PW4ubGVmdCtlLm91dGVyV2lkdGgoKSxuLmJvdHRvbT1uLnRvcCtlLm91dGVySGVpZ2h0KCksIShuLmxlZnQ+aXx8dC5sZWZ0Pm4ucmlnaHR8fG4udG9wPm98fHQudG9wPm4uYm90dG9tKX12YXIgaSxyPXdpbmRvdy5rZW5kbyxvPXIudWkuV2lkZ2V0LGE9ZS5wcm94eSxzPU1hdGguYWJzLGw9XCJhcmlhLXNlbGVjdGVkXCIsYz1cImstc3RhdGUtc2VsZWN0ZWRcIixkPVwiay1zdGF0ZS1zZWxlY3RpbmdcIix1PVwiay1zZWxlY3RhYmxlXCIsaD1cImNoYW5nZVwiLHA9XCIua2VuZG9TZWxlY3RhYmxlXCIsZj1cImstc3RhdGUtdW5zZWxlY3RpbmdcIixnPVwiaW5wdXQsYSx0ZXh0YXJlYSwuay1tdWx0aXNlbGVjdC13cmFwLHNlbGVjdCxidXR0b25cIixtPXIuc3VwcG9ydC5icm93c2VyLm1zaWUsdj0hMTshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKCl7ZSgnPGRpdiBjbGFzcz1cInBhcmVudFwiPjxzcGFuIC8+PC9kaXY+Jykub24oXCJjbGlja1wiLFwiPipcIixmdW5jdGlvbigpe3Y9ITB9KS5maW5kKFwic3BhblwiKS5jbGljaygpLmVuZCgpLm9mZigpfSgpfShlKSxpPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscz10aGlzO28uZm4uaW5pdC5jYWxsKHMsdCxuKSxzLl9tYXJxdWVlPWUoXCI8ZGl2IGNsYXNzPSdrLW1hcnF1ZWUnPjxkaXYgY2xhc3M9J2stbWFycXVlZS1jb2xvcic+PC9kaXY+PC9kaXY+XCIpLHMuX2xhc3RBY3RpdmU9bnVsbCxzLmVsZW1lbnQuYWRkQ2xhc3ModSkscy5yZWxhdGVkVGFyZ2V0PXMub3B0aW9ucy5yZWxhdGVkVGFyZ2V0LGk9cy5vcHRpb25zLm11bHRpcGxlLHRoaXMub3B0aW9ucy5hcmlhJiZpJiZzLmVsZW1lbnQuYXR0cihcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsITApLHMudXNlckV2ZW50cz1uZXcgci5Vc2VyRXZlbnRzKHMuZWxlbWVudCx7Z2xvYmFsOiEwLGFsbG93U2VsZWN0aW9uOiEwLGZpbHRlcjoodj9cIlwiOlwiLlwiK3UrXCIgXCIpK3Mub3B0aW9ucy5maWx0ZXIsdGFwOmEocy5fdGFwLHMpfSksaSYmcy51c2VyRXZlbnRzLmJpbmQoXCJzdGFydFwiLGEocy5fc3RhcnQscykpLmJpbmQoXCJtb3ZlXCIsYShzLl9tb3ZlLHMpKS5iaW5kKFwiZW5kXCIsYShzLl9lbmQscykpLmJpbmQoXCJzZWxlY3RcIixhKHMuX3NlbGVjdCxzKSl9LGV2ZW50czpbaF0sb3B0aW9uczp7bmFtZTpcIlNlbGVjdGFibGVcIixmaWx0ZXI6XCI+KlwiLG11bHRpcGxlOiExLHJlbGF0ZWRUYXJnZXQ6ZS5ub29wfSxfaXNFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5lbGVtZW50LGk9bi5sZW5ndGgscj0hMTtmb3IoZT1lWzBdLHQ9MDtpPnQ7dCsrKWlmKG5bdF09PT1lKXtyPSEwO2JyZWFrfXJldHVybiByfSxfdGFwOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZSh0LnRhcmdldCkscj10aGlzLG89dC5ldmVudC5jdHJsS2V5fHx0LmV2ZW50Lm1ldGFLZXksYT1yLm9wdGlvbnMubXVsdGlwbGUscz1hJiZ0LmV2ZW50LnNoaWZ0S2V5LGw9dC5ldmVudC53aGljaCxkPXQuZXZlbnQuYnV0dG9uOyFyLl9pc0VsZW1lbnQoaS5jbG9zZXN0KFwiLlwiK3UpKXx8bCYmMz09bHx8ZCYmMj09ZHx8dGhpcy5fYWxsb3dTZWxlY3Rpb24odC5ldmVudC50YXJnZXQpJiYobj1pLmhhc0NsYXNzKGMpLGEmJm98fHIuY2xlYXIoKSxpPWkuYWRkKHIucmVsYXRlZFRhcmdldChpKSkscz9yLnNlbGVjdFJhbmdlKHIuX2ZpcnN0U2VsZWN0ZWUoKSxpKToobiYmbz8oci5fdW5zZWxlY3QoaSksci5fbm90aWZ5KGgpKTpyLnZhbHVlKGkpLHIuX2xhc3RBY3RpdmU9ci5fZG93blRhcmdldD1pKSl9LF9zdGFydDpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMsbz1lKG4udGFyZ2V0KSxhPW8uaGFzQ2xhc3MoYykscz1uLmV2ZW50LmN0cmxLZXl8fG4uZXZlbnQubWV0YUtleTtpZih0aGlzLl9hbGxvd1NlbGVjdGlvbihuLmV2ZW50LnRhcmdldCkpe2lmKHIuX2Rvd25UYXJnZXQ9bywhci5faXNFbGVtZW50KG8uY2xvc2VzdChcIi5cIit1KSkpcmV0dXJuIHIudXNlckV2ZW50cy5jYW5jZWwoKSx0O3Iub3B0aW9ucy51c2VBbGxJdGVtcz9yLl9pdGVtcz1yLmVsZW1lbnQuZmluZChyLm9wdGlvbnMuZmlsdGVyKTooaT1vLmNsb3Nlc3Qoci5lbGVtZW50KSxyLl9pdGVtcz1pLmZpbmQoci5vcHRpb25zLmZpbHRlcikpLG4uc2VuZGVyLmNhcHR1cmUoKSxyLl9tYXJxdWVlLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmNzcyh7bGVmdDpuLnguY2xpZW50KzEsdG9wOm4ueS5jbGllbnQrMSx3aWR0aDowLGhlaWdodDowfSksc3x8ci5jbGVhcigpLG89by5hZGQoci5yZWxhdGVkVGFyZ2V0KG8pKSxhJiYoci5fc2VsZWN0RWxlbWVudChvLCEwKSxzJiZvLmFkZENsYXNzKGYpKX19LF9tb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17bGVmdDplLnguc3RhcnRMb2NhdGlvbj5lLngubG9jYXRpb24/ZS54LmxvY2F0aW9uOmUueC5zdGFydExvY2F0aW9uLHRvcDplLnkuc3RhcnRMb2NhdGlvbj5lLnkubG9jYXRpb24/ZS55LmxvY2F0aW9uOmUueS5zdGFydExvY2F0aW9uLHdpZHRoOnMoZS54LmluaXRpYWxEZWx0YSksaGVpZ2h0OnMoZS55LmluaXRpYWxEZWx0YSl9O3QuX21hcnF1ZWUuY3NzKG4pLHQuX2ludmFsaWRhdGVTZWxlY3RhYmxlcyhuLGUuZXZlbnQuY3RybEtleXx8ZS5ldmVudC5tZXRhS2V5KSxlLnByZXZlbnREZWZhdWx0KCl9LF9lbmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dC5fbWFycXVlZS5yZW1vdmUoKSx0Ll91bnNlbGVjdCh0LmVsZW1lbnQuZmluZCh0Lm9wdGlvbnMuZmlsdGVyK1wiLlwiK2YpKS5yZW1vdmVDbGFzcyhmKSxlPXQuZWxlbWVudC5maW5kKHQub3B0aW9ucy5maWx0ZXIrXCIuXCIrZCksZT1lLmFkZCh0LnJlbGF0ZWRUYXJnZXQoZSkpLHQudmFsdWUoZSksdC5fbGFzdEFjdGl2ZT10Ll9kb3duVGFyZ2V0LHQuX2l0ZW1zPW51bGx9LF9pbnZhbGlkYXRlU2VsZWN0YWJsZXM6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLG8sYSxzPXRoaXMuX2Rvd25UYXJnZXRbMF0sbD10aGlzLl9pdGVtcztmb3IoaT0wLHI9bC5sZW5ndGg7cj5pO2krKylhPWwuZXEoaSksbz1hLmFkZCh0aGlzLnJlbGF0ZWRUYXJnZXQoYSkpLG4oYSxlKT9hLmhhc0NsYXNzKGMpP3QmJnMhPT1hWzBdJiZvLnJlbW92ZUNsYXNzKGMpLmFkZENsYXNzKGYpOmEuaGFzQ2xhc3MoZCl8fGEuaGFzQ2xhc3MoZil8fG8uYWRkQ2xhc3MoZCk6YS5oYXNDbGFzcyhkKT9vLnJlbW92ZUNsYXNzKGQpOnQmJmEuaGFzQ2xhc3MoZikmJm8ucmVtb3ZlQ2xhc3MoZikuYWRkQ2xhc3MoYyl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1hKG4uX3NlbGVjdEVsZW1lbnQsbik7cmV0dXJuIGU/KGUuZWFjaChmdW5jdGlvbigpe2kodGhpcyl9KSxuLl9ub3RpZnkoaCksdCk6bi5lbGVtZW50LmZpbmQobi5vcHRpb25zLmZpbHRlcitcIi5cIitjKX0sX2ZpcnN0U2VsZWN0ZWU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7cmV0dXJuIG51bGwhPT10Ll9sYXN0QWN0aXZlP3QuX2xhc3RBY3RpdmU6KGU9dC52YWx1ZSgpLGUubGVuZ3RoPjA/ZVswXTp0LmVsZW1lbnQuZmluZCh0Lm9wdGlvbnMuZmlsdGVyKVswXSl9LF9zZWxlY3RFbGVtZW50OmZ1bmN0aW9uKHQsbil7dmFyIGk9ZSh0KSxyPSFuJiZ0aGlzLl9ub3RpZnkoXCJzZWxlY3RcIix7ZWxlbWVudDp0fSk7aS5yZW1vdmVDbGFzcyhkKSxyfHwoaS5hZGRDbGFzcyhjKSx0aGlzLm9wdGlvbnMuYXJpYSYmaS5hdHRyKGwsITApKX0sX25vdGlmeTpmdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LHRoaXMudHJpZ2dlcihlLHQpfSxfdW5zZWxlY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVtb3ZlQ2xhc3MoYyksdGhpcy5vcHRpb25zLmFyaWEmJmUuYXR0cihsLCExKSxlfSxfc2VsZWN0OmZ1bmN0aW9uKHQpe3RoaXMuX2FsbG93U2VsZWN0aW9uKHQuZXZlbnQudGFyZ2V0KSYmKCFtfHxtJiYhZShyLl9hY3RpdmVFbGVtZW50KCkpLmlzKGcpKSYmdC5wcmV2ZW50RGVmYXVsdCgpfSxfYWxsb3dTZWxlY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuaXMoZyk/KHRoaXMudXNlckV2ZW50cy5jYW5jZWwoKSx0aGlzLl9kb3duVGFyZ2V0PW51bGwsITEpOiEwfSxyZXNldFRvdWNoRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy51c2VyRXZlbnRzLmNhbmNlbCgpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5maWx0ZXIrXCIuXCIrYyk7dGhpcy5fdW5zZWxlY3QoZSl9LHNlbGVjdFJhbmdlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcztmb3IoYS5jbGVhcigpLGEuZWxlbWVudC5sZW5ndGg+MSYmKG89YS5vcHRpb25zLmNvbnRpbnVvdXNJdGVtcygpKSxvJiZvLmxlbmd0aHx8KG89YS5lbGVtZW50LmZpbmQoYS5vcHRpb25zLmZpbHRlcikpLHQ9ZS5pbkFycmF5KGUodClbMF0sbyksbj1lLmluQXJyYXkoZShuKVswXSxvKSx0Pm4mJihyPXQsdD1uLG49ciksYS5vcHRpb25zLnVzZUFsbEl0ZW1zfHwobis9YS5lbGVtZW50Lmxlbmd0aC0xKSxpPXQ7bj49aTtpKyspYS5fc2VsZWN0RWxlbWVudChvW2ldKTthLl9ub3RpZnkoaCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO28uZm4uZGVzdHJveS5jYWxsKGUpLGUuZWxlbWVudC5vZmYocCksZS51c2VyRXZlbnRzLmRlc3Ryb3koKSxlLl9tYXJxdWVlPWUuX2xhc3RBY3RpdmU9ZS5lbGVtZW50PWUudXNlckV2ZW50cz1udWxsfX0pLGkucGFyc2VPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLnRvTG93ZXJDYXNlKCk7cmV0dXJue211bHRpcGxlOnQmJnQuaW5kZXhPZihcIm11bHRpcGxlXCIpPi0xLGNlbGw6dCYmdC5pbmRleE9mKFwiY2VsbFwiKT4tMX19LHIudWkucGx1Z2luKGkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkuV2lkZ2V0LHI9ZS5wcm94eSxvPW4ua2V5cyxhPVwiY2xpY2tcIixzPVwiay1idXR0b25cIixsPVwiay1idXR0b24taWNvblwiLGM9XCJrLWJ1dHRvbi1pY29udGV4dFwiLGQ9XCIua2VuZG9CdXR0b25cIix1PVwiZGlzYWJsZWRcIixoPVwiay1zdGF0ZS1kaXNhYmxlZFwiLHA9XCJrLXN0YXRlLWZvY3VzZWRcIixmPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGc9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbz10aGlzO2kuZm4uaW5pdC5jYWxsKG8sZSx0KSxlPW8ud3JhcHBlcj1vLmVsZW1lbnQsdD1vLm9wdGlvbnMsZS5hZGRDbGFzcyhzKS5hdHRyKFwicm9sZVwiLFwiYnV0dG9uXCIpLHQuZW5hYmxlPXQuZW5hYmxlJiYhZS5hdHRyKHUpLG8uZW5hYmxlKHQuZW5hYmxlKSxvLl90YWJpbmRleCgpLG8uX2dyYXBoaWNzKCksZS5vbihhK2QscihvLl9jbGljayxvKSkub24oXCJmb2N1c1wiK2QscihvLl9mb2N1cyxvKSkub24oXCJibHVyXCIrZCxyKG8uX2JsdXIsbykpLm9uKFwia2V5ZG93blwiK2QscihvLl9rZXlkb3duLG8pKS5vbihcImtleXVwXCIrZCxyKG8uX2tleXVwLG8pKSxuLm5vdGlmeShvKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS53cmFwcGVyLm9mZihkKSxpLmZuLmRlc3Ryb3kuY2FsbChlKX0sZXZlbnRzOlthXSxvcHRpb25zOntuYW1lOlwiQnV0dG9uXCIsaWNvbjpcIlwiLHNwcml0ZUNzc0NsYXNzOlwiXCIsaW1hZ2VVcmw6XCJcIixlbmFibGU6ITB9LF9pc05hdGl2ZUJ1dHRvbjpmdW5jdGlvbigpe3JldHVyblwiYnV0dG9uXCI9PXRoaXMuZWxlbWVudC5wcm9wKFwidGFnTmFtZVwiKS50b0xvd2VyQ2FzZSgpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmVuYWJsZSYmdGhpcy50cmlnZ2VyKGEse2V2ZW50OmV9KX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVuYWJsZSYmdGhpcy5lbGVtZW50LmFkZENsYXNzKHApfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhwKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9pc05hdGl2ZUJ1dHRvbigpfHwoZS5rZXlDb2RlPT1vLkVOVEVSfHxlLmtleUNvZGU9PW8uU1BBQ0VCQVIpJiYoZS5rZXlDb2RlPT1vLlNQQUNFQkFSJiYoZS5wcmV2ZW50RGVmYXVsdCgpLHQub3B0aW9ucy5lbmFibGUmJnQuZWxlbWVudC5hZGRDbGFzcyhmKSksdC5fY2xpY2soZSkpfSxfa2V5dXA6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoZil9LF9ncmFwaGljczpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMsbz1yLmVsZW1lbnQsYT1yLm9wdGlvbnMscz1hLmljb24sZD1hLnNwcml0ZUNzc0NsYXNzLHU9YS5pbWFnZVVybDsoZHx8dXx8cykmJihpPSEwLG8uY29udGVudHMoKS5ub3QoXCJzcGFuLmstc3ByaXRlXCIpLm5vdChcInNwYW4uay1pY29uXCIpLm5vdChcImltZy5rLWltYWdlXCIpLmVhY2goZnVuY3Rpb24odCxuKXsoMT09bi5ub2RlVHlwZXx8Mz09bi5ub2RlVHlwZSYmZS50cmltKG4ubm9kZVZhbHVlKS5sZW5ndGg+MCkmJihpPSExKX0pLG8uYWRkQ2xhc3MoaT9sOmMpKSxzPyh0PW8uY2hpbGRyZW4oXCJzcGFuLmstaWNvblwiKS5maXJzdCgpLHRbMF18fCh0PWUoJzxzcGFuIGNsYXNzPVwiay1pY29uXCI+PC9zcGFuPicpLnByZXBlbmRUbyhvKSksdC5hZGRDbGFzcyhcImstaS1cIitzKSk6ZD8odD1vLmNoaWxkcmVuKFwic3Bhbi5rLXNwcml0ZVwiKS5maXJzdCgpLHRbMF18fCh0PWUoJzxzcGFuIGNsYXNzPVwiay1zcHJpdGVcIj48L3NwYW4+JykucHJlcGVuZFRvKG8pKSx0LmFkZENsYXNzKGQpKTp1JiYobj1vLmNoaWxkcmVuKFwiaW1nLmstaW1hZ2VcIikuZmlyc3QoKSxuWzBdfHwobj1lKCc8aW1nIGFsdD1cImljb25cIiBjbGFzcz1cImstaW1hZ2VcIiAvPicpLnByZXBlbmRUbyhvKSksbi5hdHRyKFwic3JjXCIsdSkpfSxlbmFibGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uZWxlbWVudDtlPT09dCYmKGU9ITApLGU9ISFlLG4ub3B0aW9ucy5lbmFibGU9ZSxpLnRvZ2dsZUNsYXNzKGgsIWUpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsIWUpLmF0dHIodSwhZSk7dHJ5e2kuYmx1cigpfWNhdGNoKHIpe319fSk7bi51aS5wbHVnaW4oZyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpLHIpe3JldHVybiBlKHtpZHg6dCx0ZXh0Om4sbnM6Yy5ucyxudW1lcmljOmksdGl0bGU6cnx8XCJcIn0pfWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiBrKHtjbGFzc05hbWU6ZS5zdWJzdHJpbmcoMSksdGV4dDp0LHdyYXBDbGFzc05hbWU6bnx8XCJcIn0pfWZ1bmN0aW9uIHIoZSx0LG4saSl7ZS5maW5kKHQpLnBhcmVudCgpLmF0dHIoYy5hdHRyKFwicGFnZVwiKSxuKS5hdHRyKFwidGFiaW5kZXhcIiwtMSkudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsaSl9ZnVuY3Rpb24gbyhlLHQpe3IoZSxwLDEsMT49dCl9ZnVuY3Rpb24gYShlLHQpe3IoZSxnLE1hdGgubWF4KDEsdC0xKSwxPj10KX1mdW5jdGlvbiBzKGUsdCxuKXtyKGUsbSxNYXRoLm1pbihuLHQrMSksdD49bil9ZnVuY3Rpb24gbChlLHQsbil7cihlLGYsbix0Pj1uKX12YXIgYz13aW5kb3cua2VuZG8sZD1jLnVpLHU9ZC5XaWRnZXQsaD1lLnByb3h5LHA9XCIuay1pLXNlZWstd1wiLGY9XCIuay1pLXNlZWstZVwiLGc9XCIuay1pLWFycm93LXdcIixtPVwiLmstaS1hcnJvdy1lXCIsdj1cImNoYW5nZVwiLF89XCIua2VuZG9QYWdlclwiLHk9XCJjbGlja1wiLHc9XCJrZXlkb3duXCIsYj1cImRpc2FibGVkXCIsaz1jLnRlbXBsYXRlKCc8YSBocmVmPVwiXFxcXCNcIiB0aXRsZT1cIiM9dGV4dCNcIiBjbGFzcz1cImstbGluayBrLXBhZ2VyLW5hdiAjPSB3cmFwQ2xhc3NOYW1lICNcIj48c3BhbiBjbGFzcz1cImstaWNvbiAjPSBjbGFzc05hbWUgI1wiPiM9dGV4dCM8L3NwYW4+PC9hPicpLHg9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgcixkLGI9dGhpczt1LmZuLmluaXQuY2FsbChiLHQsbiksbj1iLm9wdGlvbnMsYi5kYXRhU291cmNlPWMuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShuLmRhdGFTb3VyY2UpLGIubGlua1RlbXBsYXRlPWMudGVtcGxhdGUoYi5vcHRpb25zLmxpbmtUZW1wbGF0ZSksYi5zZWxlY3RUZW1wbGF0ZT1jLnRlbXBsYXRlKGIub3B0aW9ucy5zZWxlY3RUZW1wbGF0ZSkscj1iLnBhZ2UoKSxkPWIudG90YWxQYWdlcygpLGIuX3JlZnJlc2hIYW5kbGVyPWgoYi5yZWZyZXNoLGIpLGIuZGF0YVNvdXJjZS5iaW5kKHYsYi5fcmVmcmVzaEhhbmRsZXIpLG4ucHJldmlvdXNOZXh0JiYoYi5lbGVtZW50LmZpbmQocCkubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKHAsbi5tZXNzYWdlcy5maXJzdCxcImstcGFnZXItZmlyc3RcIikpLG8oYi5lbGVtZW50LHIsZCkpLGIuZWxlbWVudC5maW5kKGcpLmxlbmd0aHx8KGIuZWxlbWVudC5hcHBlbmQoaShnLG4ubWVzc2FnZXMucHJldmlvdXMpKSxhKGIuZWxlbWVudCxyLGQpKSksbi5udW1lcmljJiYoYi5saXN0PWIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItbnVtYmVyc1wiKSxiLmxpc3QubGVuZ3RofHwoYi5saXN0PWUoJzx1bCBjbGFzcz1cImstcGFnZXItbnVtYmVycyBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhiLmVsZW1lbnQpKSksbi5pbnB1dCYmKGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5wdXRcIikubGVuZ3RofHxiLmVsZW1lbnQuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImstcGFnZXItaW5wdXQgay1sYWJlbFwiPicrbi5tZXNzYWdlcy5wYWdlKyc8aW5wdXQgY2xhc3M9XCJrLXRleHRib3hcIj4nK2MuZm9ybWF0KG4ubWVzc2FnZXMub2YsZCkrXCI8L3NwYW4+XCIpLGIuZWxlbWVudC5vbih3K18sXCIuay1wYWdlci1pbnB1dCBpbnB1dFwiLGgoYi5fa2V5ZG93bixiKSkpLG4ucHJldmlvdXNOZXh0JiYoYi5lbGVtZW50LmZpbmQobSkubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKG0sbi5tZXNzYWdlcy5uZXh0KSkscyhiLmVsZW1lbnQscixkKSksYi5lbGVtZW50LmZpbmQoZikubGVuZ3RofHwoYi5lbGVtZW50LmFwcGVuZChpKGYsbi5tZXNzYWdlcy5sYXN0LFwiay1wYWdlci1sYXN0XCIpKSxsKGIuZWxlbWVudCxyLGQpKSksbi5wYWdlU2l6ZXMmJihiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzXCIpLmxlbmd0aHx8ZSgnPHNwYW4gY2xhc3M9XCJrLXBhZ2VyLXNpemVzIGstbGFiZWxcIj48c2VsZWN0Lz4nK24ubWVzc2FnZXMuaXRlbXNQZXJQYWdlK1wiPC9zcGFuPlwiKS5hcHBlbmRUbyhiLmVsZW1lbnQpLmZpbmQoXCJzZWxlY3RcIikuaHRtbChlLm1hcChlLmlzQXJyYXkobi5wYWdlU2l6ZXMpP24ucGFnZVNpemVzOls1LDEwLDIwXSxmdW5jdGlvbihlKXtyZXR1cm5cIjxvcHRpb24+XCIrZStcIjwvb3B0aW9uPlwifSkuam9pbihcIlwiKSkuZW5kKCkuYXBwZW5kVG8oYi5lbGVtZW50KSxiLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiKS52YWwoYi5wYWdlU2l6ZSgpKSxjLnVpLkRyb3BEb3duTGlzdCYmYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1zaXplcyBzZWxlY3RcIikuc2hvdygpLmtlbmRvRHJvcERvd25MaXN0KCksYi5lbGVtZW50Lm9uKHYrXyxcIi5rLXBhZ2VyLXNpemVzIHNlbGVjdFwiLGgoYi5fY2hhbmdlLGIpKSksbi5yZWZyZXNoJiYoYi5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1yZWZyZXNoXCIpLmxlbmd0aHx8Yi5lbGVtZW50LmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstcGFnZXItcmVmcmVzaCBrLWxpbmtcIiB0aXRsZT1cIicrbi5tZXNzYWdlcy5yZWZyZXNoKydcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPicrbi5tZXNzYWdlcy5yZWZyZXNoK1wiPC9zcGFuPjwvYT5cIiksYi5lbGVtZW50Lm9uKHkrXyxcIi5rLXBhZ2VyLXJlZnJlc2hcIixoKGIuX3JlZnJlc2hDbGljayxiKSkpLG4uaW5mbyYmKGIuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5mb1wiKS5sZW5ndGh8fGIuZWxlbWVudC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiay1wYWdlci1pbmZvIGstbGFiZWxcIiAvPicpKSxiLmVsZW1lbnQub24oeStfLFwiYVwiLGgoYi5fY2xpY2ssYikpLmFkZENsYXNzKFwiay1wYWdlci13cmFwIGstd2lkZ2V0XCIpLG4uYXV0b0JpbmQmJmIucmVmcmVzaCgpLGMubm90aWZ5KGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt1LmZuLmRlc3Ryb3kuY2FsbChlKSxlLmVsZW1lbnQub2ZmKF8pLGUuZGF0YVNvdXJjZS51bmJpbmQodixlLl9yZWZyZXNoSGFuZGxlciksZS5fcmVmcmVzaEhhbmRsZXI9bnVsbCxjLmRlc3Ryb3koZS5lbGVtZW50KSxlLmVsZW1lbnQ9ZS5saXN0PW51bGx9LGV2ZW50czpbdl0sb3B0aW9uczp7bmFtZTpcIlBhZ2VyXCIsc2VsZWN0VGVtcGxhdGU6JzxsaT48c3BhbiBjbGFzcz1cImstc3RhdGUtc2VsZWN0ZWRcIj4jPXRleHQjPC9zcGFuPjwvbGk+JyxsaW5rVGVtcGxhdGU6JzxsaT48YSB0YWJpbmRleD1cIi0xXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIiBkYXRhLSM9bnMjcGFnZT1cIiM9aWR4I1wiICNpZiAodGl0bGUgIT09IFwiXCIpIHsjIHRpdGxlPVwiIz10aXRsZSNcIiAjfSM+Iz10ZXh0IzwvYT48L2xpPicsYnV0dG9uQ291bnQ6MTAsYXV0b0JpbmQ6ITAsbnVtZXJpYzohMCxpbmZvOiEwLGlucHV0OiExLHByZXZpb3VzTmV4dDohMCxwYWdlU2l6ZXM6ITEscmVmcmVzaDohMSxtZXNzYWdlczp7ZGlzcGxheTpcInswfSAtIHsxfSBvZiB7Mn0gaXRlbXNcIixlbXB0eTpcIk5vIGl0ZW1zIHRvIGRpc3BsYXlcIixwYWdlOlwiUGFnZVwiLG9mOlwib2YgezB9XCIsaXRlbXNQZXJQYWdlOlwiaXRlbXMgcGVyIHBhZ2VcIixmaXJzdDpcIkdvIHRvIHRoZSBmaXJzdCBwYWdlXCIscHJldmlvdXM6XCJHbyB0byB0aGUgcHJldmlvdXMgcGFnZVwiLG5leHQ6XCJHbyB0byB0aGUgbmV4dCBwYWdlXCIsbGFzdDpcIkdvIHRvIHRoZSBsYXN0IHBhZ2VcIixyZWZyZXNoOlwiUmVmcmVzaFwiLG1vcmVQYWdlczpcIk1vcmUgcGFnZXNcIn19LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmRhdGFTb3VyY2UudW5iaW5kKHYsdC5fcmVmcmVzaEhhbmRsZXIpLHQuZGF0YVNvdXJjZT10Lm9wdGlvbnMuZGF0YVNvdXJjZT1lLGUuYmluZCh2LHQuX3JlZnJlc2hIYW5kbGVyKSx0Lm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdCxpLHIsZD10aGlzLHU9MSxoPVwiXCIscD1kLnBhZ2UoKSxmPWQub3B0aW9ucyxnPWQucGFnZVNpemUoKSxtPWQuZGF0YVNvdXJjZS50b3RhbCgpLHY9ZC50b3RhbFBhZ2VzKCksXz1kLmxpbmtUZW1wbGF0ZSx5PWYuYnV0dG9uQ291bnQ7aWYoIWV8fFwiaXRlbWNoYW5nZVwiIT1lLmFjdGlvbil7aWYoZi5udW1lcmljKXtmb3IocD55JiYocj1wJXksdT0wPT09cj9wLXkrMTpwLXIrMSksaT1NYXRoLm1pbih1K3ktMSx2KSx1PjEmJihoKz1uKF8sdS0xLFwiLi4uXCIsITEsZi5tZXNzYWdlcy5tb3JlUGFnZXMpKSx0PXU7aT49dDt0KyspaCs9bih0PT1wP2Quc2VsZWN0VGVtcGxhdGU6Xyx0LHQsITApO3Y+aSYmKGgrPW4oXyx0LFwiLi4uXCIsITEsZi5tZXNzYWdlcy5tb3JlUGFnZXMpKSxcIlwiPT09aCYmKGg9ZC5zZWxlY3RUZW1wbGF0ZSh7dGV4dDowfSkpLGQubGlzdC5odG1sKGgpfWYuaW5mbyYmKGg9bT4wP2MuZm9ybWF0KGYubWVzc2FnZXMuZGlzcGxheSwocC0xKSpnKzEsTWF0aC5taW4ocCpnLG0pLG0pOmYubWVzc2FnZXMuZW1wdHksZC5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1pbmZvXCIpLmh0bWwoaCkpLGYuaW5wdXQmJmQuZWxlbWVudC5maW5kKFwiLmstcGFnZXItaW5wdXRcIikuaHRtbChkLm9wdGlvbnMubWVzc2FnZXMucGFnZSsnPGlucHV0IGNsYXNzPVwiay10ZXh0Ym94XCI+JytjLmZvcm1hdChmLm1lc3NhZ2VzLm9mLHYpKS5maW5kKFwiaW5wdXRcIikudmFsKHApLmF0dHIoYiwxPm0pLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLDE+bSksZi5wcmV2aW91c05leHQmJihvKGQuZWxlbWVudCxwLHYpLGEoZC5lbGVtZW50LHAsdikscyhkLmVsZW1lbnQscCx2KSxsKGQuZWxlbWVudCxwLHYpKSxmLnBhZ2VTaXplcyYmZC5lbGVtZW50LmZpbmQoXCIuay1wYWdlci1zaXplcyBzZWxlY3RcIikudmFsKGcpLmZpbHRlcihcIltcIitjLmF0dHIoXCJyb2xlXCIpK1wiPWRyb3Bkb3dubGlzdF1cIikua2VuZG9Ecm9wRG93bkxpc3QoXCJ2YWx1ZVwiLGcpLmtlbmRvRHJvcERvd25MaXN0KFwidGV4dFwiLGcpfX0sX2tleWRvd246ZnVuY3Rpb24oZSl7aWYoZS5rZXlDb2RlPT09Yy5rZXlzLkVOVEVSKXt2YXIgdD10aGlzLmVsZW1lbnQuZmluZChcIi5rLXBhZ2VyLWlucHV0XCIpLmZpbmQoXCJpbnB1dFwiKSxuPXBhcnNlSW50KHQudmFsKCksMTApOyhpc05hTihuKXx8MT5ufHxuPnRoaXMudG90YWxQYWdlcygpKSYmKG49dGhpcy5wYWdlKCkpLHQudmFsKG4pLHRoaXMucGFnZShuKX19LF9yZWZyZXNoQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZGF0YVNvdXJjZS5yZWFkKCl9LF9jaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnZhbHVlLDEwKTtpc05hTih0KXx8dGhpcy5kYXRhU291cmNlLnBhZ2VTaXplKHQpfSxfY2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpO3QucHJldmVudERlZmF1bHQoKSxuLmlzKFwiLmstc3RhdGUtZGlzYWJsZWRcIil8fHRoaXMucGFnZShuLmF0dHIoYy5hdHRyKFwicGFnZVwiKSkpfSx0b3RhbFBhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguY2VpbCgodGhpcy5kYXRhU291cmNlLnRvdGFsKCl8fDApL3RoaXMucGFnZVNpemUoKSl9LHBhZ2VTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YVNvdXJjZS5wYWdlU2l6ZSgpfHx0aGlzLmRhdGFTb3VyY2UudG90YWwoKX0scGFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5kYXRhU291cmNlLnRvdGFsKCk+MD90aGlzLmRhdGFTb3VyY2UucGFnZSgpOjA6KHRoaXMuZGF0YVNvdXJjZS5wYWdlKGUpLHRoaXMudHJpZ2dlcih2LHtpbmRleDplfSksdCl9fSk7ZC5wbHVnaW4oeCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXtyZXR1cm4gdD09PW58fGUuY29udGFpbnModCxuKX12YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5XaWRnZXQsbz1uLnN1cHBvcnQsYT1uLmdldE9mZnNldCxzPW4uX2FjdGl2ZUVsZW1lbnQsbD1cIm9wZW5cIixjPVwiY2xvc2VcIixkPVwiZGVhY3RpdmF0ZVwiLHU9XCJhY3RpdmF0ZVwiLGg9XCJjZW50ZXJcIixwPVwibGVmdFwiLGY9XCJyaWdodFwiLGc9XCJ0b3BcIixtPVwiYm90dG9tXCIsdj1cImFic29sdXRlXCIsXz1cImhpZGRlblwiLHk9XCJib2R5XCIsdz1cImxvY2F0aW9uXCIsYj1cInBvc2l0aW9uXCIsaz1cInZpc2libGVcIix4PVwiZWZmZWN0c1wiLEM9XCJrLXN0YXRlLWFjdGl2ZVwiLFM9XCJrLXN0YXRlLWJvcmRlclwiLFQ9L2stc3RhdGUtYm9yZGVyLShcXHcrKS8sRD1cIi5rLXBpY2tlci13cmFwLCAuay1kcm9wZG93bi13cmFwLCAuay1saW5rXCIsQT1cImRvd25cIixFPWUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxNPWUod2luZG93KSxQPVwic2Nyb2xsXCIsST1cInJlc2l6ZSBzY3JvbGxcIix6PW8udHJhbnNpdGlvbnMuY3NzLEY9eitcInRyYW5zZm9ybVwiLFI9ZS5leHRlbmQsQj1cIi5rZW5kb1BvcHVwXCIsTD1bXCJmb250LXNpemVcIixcImZvbnQtZmFtaWx5XCIsXCJmb250LXN0cmV0Y2hcIixcImZvbnQtc3R5bGVcIixcImZvbnQtd2VpZ2h0XCIsXCJsaW5lLWhlaWdodFwiXSxPPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsaSl7dmFyIG8sYT10aGlzO2k9aXx8e30saS5pc1J0bCYmKGkub3JpZ2luPWkub3JpZ2lufHxtK1wiIFwiK2YsaS5wb3NpdGlvbj1pLnBvc2l0aW9ufHxnK1wiIFwiK2YpLHIuZm4uaW5pdC5jYWxsKGEsdCxpKSx0PWEuZWxlbWVudCxpPWEub3B0aW9ucyxhLmNvbGxpc2lvbnM9aS5jb2xsaXNpb24/aS5jb2xsaXNpb24uc3BsaXQoXCIgXCIpOltdLGEuZG93bkV2ZW50PW4uYXBwbHlFdmVudE1hcChBLG4uZ3VpZCgpKSwxPT09YS5jb2xsaXNpb25zLmxlbmd0aCYmYS5jb2xsaXNpb25zLnB1c2goYS5jb2xsaXNpb25zWzBdKSxvPWUoYS5vcHRpb25zLmFuY2hvcikuY2xvc2VzdChcIi5rLXBvcHVwLC5rLWdyb3VwXCIpLmZpbHRlcihcIjpub3QoW2NsYXNzXj1rbS1dKVwiKSxpLmFwcGVuZFRvPWUoZShpLmFwcGVuZFRvKVswXXx8b1swXXx8eSksYS5lbGVtZW50LmhpZGUoKS5hZGRDbGFzcyhcImstcG9wdXAgay1ncm91cCBrLXJlc2V0XCIpLnRvZ2dsZUNsYXNzKFwiay1ydGxcIiwhIWkuaXNSdGwpLmNzcyh7cG9zaXRpb246dn0pLmFwcGVuZFRvKGkuYXBwZW5kVG8pLm9uKFwibW91c2VlbnRlclwiK0IsZnVuY3Rpb24oKXthLl9ob3ZlcmVkPSEwfSkub24oXCJtb3VzZWxlYXZlXCIrQixmdW5jdGlvbigpe2EuX2hvdmVyZWQ9ITF9KSxhLndyYXBwZXI9ZSgpLGkuYW5pbWF0aW9uPT09ITEmJihpLmFuaW1hdGlvbj17b3Blbjp7ZWZmZWN0czp7fX0sY2xvc2U6e2hpZGU6ITAsZWZmZWN0czp7fX19KSxSKGkuYW5pbWF0aW9uLm9wZW4se2NvbXBsZXRlOmZ1bmN0aW9uKCl7YS53cmFwcGVyLmNzcyh7b3ZlcmZsb3c6a30pLGEuX3RyaWdnZXIodSl9fSksUihpLmFuaW1hdGlvbi5jbG9zZSx7Y29tcGxldGU6ZnVuY3Rpb24oKXthLl9hbmltYXRpb25DbG9zZSgpfX0pLGEuX21vdXNlZG93blByb3h5PWZ1bmN0aW9uKGUpe2EuX21vdXNlZG93bihlKX0sYS5fcmVzaXplUHJveHk9ZnVuY3Rpb24oZSl7YS5fcmVzaXplKGUpfSxpLnRvZ2dsZVRhcmdldCYmZShpLnRvZ2dsZVRhcmdldCkub24oaS50b2dnbGVFdmVudCtCLGUucHJveHkoYS50b2dnbGUsYSkpfSxldmVudHM6W2wsdSxjLGRdLG9wdGlvbnM6e25hbWU6XCJQb3B1cFwiLHRvZ2dsZUV2ZW50OlwiY2xpY2tcIixvcmlnaW46bStcIiBcIitwLHBvc2l0aW9uOmcrXCIgXCIrcCxhbmNob3I6eSxhcHBlbmRUbzpudWxsLGNvbGxpc2lvbjpcImZsaXAgZml0XCIsdmlld3BvcnQ6d2luZG93LGNvcHlBbmNob3JTdHlsZXM6ITAsYXV0b3NpemU6ITEsbW9kYWw6ITEsYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwic2xpZGVJbjpkb3duXCIsdHJhbnNpdGlvbjohMCxkdXJhdGlvbjoyMDB9LGNsb3NlOntkdXJhdGlvbjoxMDAsaGlkZTohMH19fSxfYW5pbWF0aW9uQ2xvc2U6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnM7YS53cmFwcGVyLmhpZGUoKSx0PWEud3JhcHBlci5kYXRhKHcpLGk9ZShzLmFuY2hvciksdCYmYS53cmFwcGVyLmNzcyh0KSxzLmFuY2hvciE9eSYmKHI9KChpLmF0dHIoXCJjbGFzc1wiKXx8XCJcIikubWF0Y2goVCl8fFtcIlwiLFwiZG93blwiXSlbMV0sbz1TK1wiLVwiK3IsaS5yZW1vdmVDbGFzcyhvKS5jaGlsZHJlbihEKS5yZW1vdmVDbGFzcyhDKS5yZW1vdmVDbGFzcyhvKSxhLmVsZW1lbnQucmVtb3ZlQ2xhc3MoUytcIi1cIituLmRpcmVjdGlvbnNbcl0ucmV2ZXJzZSkpLGEuX2Nsb3Npbmc9ITEsYS5fdHJpZ2dlcihkKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0LGk9dGhpcyxvPWkub3B0aW9ucyxhPWkuZWxlbWVudC5vZmYoQik7ci5mbi5kZXN0cm95LmNhbGwoaSksby50b2dnbGVUYXJnZXQmJmUoby50b2dnbGVUYXJnZXQpLm9mZihCKSxvLm1vZGFsfHwoRS51bmJpbmQoaS5kb3duRXZlbnQsaS5fbW91c2Vkb3duUHJveHkpLGkuX3Njcm9sbGFibGVQYXJlbnRzKCkudW5iaW5kKFAsaS5fcmVzaXplUHJveHkpLE0udW5iaW5kKEksaS5fcmVzaXplUHJveHkpKSxuLmRlc3Ryb3koaS5lbGVtZW50LmNoaWxkcmVuKCkpLGEucmVtb3ZlRGF0YSgpLG8uYXBwZW5kVG9bMF09PT1kb2N1bWVudC5ib2R5JiYodD1hLnBhcmVudChcIi5rLWFuaW1hdGlvbi1jb250YWluZXJcIiksdFswXT90LnJlbW92ZSgpOmEucmVtb3ZlKCkpfSxvcGVuOmZ1bmN0aW9uKHQsaSl7dmFyIHIsYSxzLGM9dGhpcyxkPXtpc0ZpeGVkOiFpc05hTihwYXJzZUludChpLDEwKSkseDp0LHk6aX0sdT1jLmVsZW1lbnQsaD1jLm9wdGlvbnMscD1cImRvd25cIixmPWUoaC5hbmNob3IpLG09dVswXSYmdS5oYXNDbGFzcyhcImttLXdpZGdldFwiKTtpZighYy52aXNpYmxlKCkpe2lmKGguY29weUFuY2hvclN0eWxlcyYmKG0mJlwiZm9udC1zaXplXCI9PUxbMF0mJkwuc2hpZnQoKSx1LmNzcyhuLmdldENvbXB1dGVkU3R5bGVzKGZbMF0sTCkpKSx1LmRhdGEoXCJhbmltYXRpbmdcIil8fGMuX3RyaWdnZXIobCkpcmV0dXJuO2gubW9kYWx8fChFLnVuYmluZChjLmRvd25FdmVudCxjLl9tb3VzZWRvd25Qcm94eSkuYmluZChjLmRvd25FdmVudCxjLl9tb3VzZWRvd25Qcm94eSksby5tb2JpbGVPUy5pb3N8fG8ubW9iaWxlT1MuYW5kcm9pZHx8KGMuX3Njcm9sbGFibGVQYXJlbnRzKCkudW5iaW5kKFAsYy5fcmVzaXplUHJveHkpLmJpbmQoUCxjLl9yZXNpemVQcm94eSksTS51bmJpbmQoSSxjLl9yZXNpemVQcm94eSkuYmluZChJLGMuX3Jlc2l6ZVByb3h5KSkpLGMud3JhcHBlcj1hPW4ud3JhcCh1LGguYXV0b3NpemUpLmNzcyh7b3ZlcmZsb3c6XyxkaXNwbGF5OlwiYmxvY2tcIixwb3NpdGlvbjp2fSksby5tb2JpbGVPUy5hbmRyb2lkJiZhLmNzcyhGLFwidHJhbnNsYXRleigwKVwiKSxhLmNzcyhiKSxlKGguYXBwZW5kVG8pWzBdPT1kb2N1bWVudC5ib2R5JiZhLmNzcyhnLFwiLTEwMDAwcHhcIikscj1SKCEwLHt9LGguYW5pbWF0aW9uLm9wZW4pLGMuZmxpcHBlZD1jLl9wb3NpdGlvbihkKSxyLmVmZmVjdHM9bi5wYXJzZUVmZmVjdHMoci5lZmZlY3RzLGMuZmxpcHBlZCkscD1yLmVmZmVjdHMuc2xpZGVJbj9yLmVmZmVjdHMuc2xpZGVJbi5kaXJlY3Rpb246cCxoLmFuY2hvciE9eSYmKHM9UytcIi1cIitwLHUuYWRkQ2xhc3MoUytcIi1cIituLmRpcmVjdGlvbnNbcF0ucmV2ZXJzZSksZi5hZGRDbGFzcyhzKS5jaGlsZHJlbihEKS5hZGRDbGFzcyhDKS5hZGRDbGFzcyhzKSksdS5kYXRhKHgsci5lZmZlY3RzKS5rZW5kb1N0b3AoITApLmtlbmRvQW5pbWF0ZShyKX19LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZVtlLnZpc2libGUoKT9jOmxdKCl9LHZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmlzKFwiOlwiK2spfSxjbG9zZTpmdW5jdGlvbih0KXt2YXIgaSxyLG8sYSxzPXRoaXMsbD1zLm9wdGlvbnM7aWYocy52aXNpYmxlKCkpe2lmKGk9cy53cmFwcGVyWzBdP3Mud3JhcHBlcjpuLndyYXAocy5lbGVtZW50KS5oaWRlKCkscy5fY2xvc2luZ3x8cy5fdHJpZ2dlcihjKSlyZXR1cm47cy5lbGVtZW50LmZpbmQoXCIuay1wb3B1cFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPW4uZGF0YShcImtlbmRvUG9wdXBcIik7aSYmaS5jbG9zZSh0KX0pLEUudW5iaW5kKHMuZG93bkV2ZW50LHMuX21vdXNlZG93blByb3h5KSxzLl9zY3JvbGxhYmxlUGFyZW50cygpLnVuYmluZChQLHMuX3Jlc2l6ZVByb3h5KSxNLnVuYmluZChJLHMuX3Jlc2l6ZVByb3h5KSx0P3I9e2hpZGU6ITAsZWZmZWN0czp7fX06KHI9UighMCx7fSxsLmFuaW1hdGlvbi5jbG9zZSksbz1zLmVsZW1lbnQuZGF0YSh4KSxhPXIuZWZmZWN0cywhYSYmIW4uc2l6ZShhKSYmbyYmbi5zaXplKG8pJiYoci5lZmZlY3RzPW8sci5yZXZlcnNlPSEwKSxzLl9jbG9zaW5nPSEwKSxzLmVsZW1lbnQua2VuZG9TdG9wKCEwKSxpLmNzcyh7b3ZlcmZsb3c6X30pLHMuZWxlbWVudC5rZW5kb0FuaW1hdGUocil9fSxfdHJpZ2dlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmlnZ2VyKGUse3R5cGU6ZX0pfSxfcmVzaXplOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7XCJyZXNpemVcIj09PWUudHlwZT8oY2xlYXJUaW1lb3V0KG4uX3Jlc2l6ZVRpbWVvdXQpLG4uX3Jlc2l6ZVRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe24uX3Bvc2l0aW9uKCksbi5fcmVzaXplVGltZW91dD1udWxsfSw1MCkpOm4uX2hvdmVyZWR8fHQobi5lbGVtZW50WzBdLHMoKSl8fG4uY2xvc2UoKX0sX21vdXNlZG93bjpmdW5jdGlvbihpKXt2YXIgcj10aGlzLG89ci5lbGVtZW50WzBdLGE9ci5vcHRpb25zLHM9ZShhLmFuY2hvcilbMF0sbD1hLnRvZ2dsZVRhcmdldCxjPW4uZXZlbnRUYXJnZXQoaSksZD1lKGMpLmNsb3Nlc3QoXCIuay1wb3B1cFwiKSx1PWQucGFyZW50KCkucGFyZW50KFwiLmttLXNoaW1cIikubGVuZ3RoO2Q9ZFswXSwodXx8IWR8fGQ9PT1yLmVsZW1lbnRbMF0pJiZcInBvcG92ZXJcIiE9PWUoaS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmRhdGEoXCJyZWxcIikmJih0KG8sYyl8fHQocyxjKXx8bCYmdChlKGwpWzBdLGMpfHxyLmNsb3NlKCkpfSxfZml0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wO3JldHVybiBlK3Q+biYmKGk9bi0oZSt0KSksMD5lJiYoaT0tZSksaX0sX2ZsaXA6ZnVuY3Rpb24oZSx0LG4saSxyLG8sYSl7dmFyIHM9MDtyZXR1cm4gYT1hfHx0LG8hPT1yJiZvIT09aCYmciE9PWgmJihlK2E+aSYmKHMrPS0obit0KSksMD5lK3MmJihzKz1uK3QpKSxzfSxfc2Nyb2xsYWJsZVBhcmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLm9wdGlvbnMuYW5jaG9yKS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmZpbHRlcihmdW5jdGlvbihlLHQpe3ZhciBpPW4uZ2V0Q29tcHV0ZWRTdHlsZXModCxbXCJvdmVyZmxvd1wiXSk7cmV0dXJuXCJ2aXNpYmxlXCIhPWkub3ZlcmZsb3d9KX0sX3Bvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLGwsYyxkLHUsaCxwPXRoaXMsZj1wLmVsZW1lbnQuY3NzKGIsXCJcIiksZz1wLndyYXBwZXIsbT1wLm9wdGlvbnMsXz1lKG0udmlld3BvcnQpLHk9Xy5vZmZzZXQoKSxrPWUobS5hbmNob3IpLHg9bS5vcmlnaW4udG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIiksQz1tLnBvc2l0aW9uLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIgXCIpLFM9cC5jb2xsaXNpb25zLFQ9by56b29tTGV2ZWwoKSxEPTEwMDAyLEE9ISEoX1swXT09d2luZG93JiZ3aW5kb3cuaW5uZXJXaWR0aCYmMS4wMj49VCksRT0wLE09QT93aW5kb3cuaW5uZXJXaWR0aDpfLndpZHRoKCksUD1BP3dpbmRvdy5pbm5lckhlaWdodDpfLmhlaWdodCgpLEk9ay5wYXJlbnRzKCkuZmlsdGVyKGcuc2libGluZ3MoKSk7aWYoSVswXSlpZihpPU1hdGgubWF4KCtJLmNzcyhcInpJbmRleFwiKSwwKSlEPWkrMTA7ZWxzZSBmb3Iobj1rLnBhcmVudHNVbnRpbChJKSxyPW4ubGVuZ3RoO3I+RTtFKyspaT0rZShuW0VdKS5jc3MoXCJ6SW5kZXhcIiksaSYmaT5EJiYoRD1pKzEwKTtyZXR1cm4gZy5jc3MoXCJ6SW5kZXhcIixEKSxnLmNzcyh0JiZ0LmlzRml4ZWQ/e2xlZnQ6dC54LHRvcDp0Lnl9OnAuX2FsaWduKHgsQykpLHM9YShnLGIsa1swXT09PWcub2Zmc2V0UGFyZW50KClbMF0pLGw9YShnKSxjPWsub2Zmc2V0UGFyZW50KCkucGFyZW50KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lciwuay1wb3B1cCwuay1ncm91cFwiKSxjLmxlbmd0aCYmKHM9YShnLGIsITApLGw9YShnKSksX1swXT09PXdpbmRvdz8obC50b3AtPXdpbmRvdy5wYWdlWU9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8MCxsLmxlZnQtPXdpbmRvdy5wYWdlWE9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fDApOihsLnRvcC09eS50b3AsbC5sZWZ0LT15LmxlZnQpLHAud3JhcHBlci5kYXRhKHcpfHxnLmRhdGEodyxSKHt9LHMpKSxkPVIoe30sbCksdT1SKHt9LHMpLFwiZml0XCI9PT1TWzBdJiYodS50b3ArPXAuX2ZpdChkLnRvcCxnLm91dGVySGVpZ2h0KCksUC9UKSksXCJmaXRcIj09PVNbMV0mJih1LmxlZnQrPXAuX2ZpdChkLmxlZnQsZy5vdXRlcldpZHRoKCksTS9UKSksaD1SKHt9LHUpLFwiZmxpcFwiPT09U1swXSYmKHUudG9wKz1wLl9mbGlwKGQudG9wLGYub3V0ZXJIZWlnaHQoKSxrLm91dGVySGVpZ2h0KCksUC9ULHhbMF0sQ1swXSxnLm91dGVySGVpZ2h0KCkpKSxcImZsaXBcIj09PVNbMV0mJih1LmxlZnQrPXAuX2ZsaXAoZC5sZWZ0LGYub3V0ZXJXaWR0aCgpLGsub3V0ZXJXaWR0aCgpLE0vVCx4WzFdLENbMV0sZy5vdXRlcldpZHRoKCkpKSxmLmNzcyhiLHYpLGcuY3NzKHUpLHUubGVmdCE9aC5sZWZ0fHx1LnRvcCE9aC50b3Bcbn0sX2FsaWduOmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzLG89ci53cmFwcGVyLHM9ZShyLm9wdGlvbnMuYW5jaG9yKSxsPXRbMF0sYz10WzFdLGQ9blswXSx1PW5bMV0scD1hKHMpLGc9ZShyLm9wdGlvbnMuYXBwZW5kVG8pLHY9by5vdXRlcldpZHRoKCksXz1vLm91dGVySGVpZ2h0KCkseT1zLm91dGVyV2lkdGgoKSx3PXMub3V0ZXJIZWlnaHQoKSxiPXAudG9wLGs9cC5sZWZ0LHg9TWF0aC5yb3VuZDtyZXR1cm4gZ1swXSE9ZG9jdW1lbnQuYm9keSYmKGk9YShnKSxiLT1pLnRvcCxrLT1pLmxlZnQpLGw9PT1tJiYoYis9dyksbD09PWgmJihiKz14KHcvMikpLGQ9PT1tJiYoYi09XyksZD09PWgmJihiLT14KF8vMikpLGM9PT1mJiYoays9eSksYz09PWgmJihrKz14KHkvMikpLHU9PT1mJiYoay09diksdT09PWgmJihrLT14KHYvMikpLHt0b3A6YixsZWZ0Omt9fX0pO2kucGx1Z2luKE8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkuV2lkZ2V0LHI9ZS5wcm94eSxvPWUuZXh0ZW5kLGE9d2luZG93LnNldFRpbWVvdXQscz1cImNsaWNrXCIsbD1cInNob3dcIixjPVwiaGlkZVwiLGQ9XCJrLW5vdGlmaWNhdGlvblwiLHU9XCIuay1ub3RpZmljYXRpb24td3JhcCAuay1pLWNsb3NlXCIsaD1cImluZm9cIixwPVwic3VjY2Vzc1wiLGY9XCJ3YXJuaW5nXCIsZz1cImVycm9yXCIsbT1cInRvcFwiLHY9XCJsZWZ0XCIsXz1cImJvdHRvbVwiLHk9XCJyaWdodFwiLHc9XCJ1cFwiLGI9XCIua2VuZG9Ob3RpZmljYXRpb25cIixrPSc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay1ub3RpZmljYXRpb25cIj48L2Rpdj4nLHg9JzxkaXYgY2xhc3M9XCJrLW5vdGlmaWNhdGlvbi13cmFwXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLW5vdGVcIj4jPXR5cGVJY29uIzwvc3Bhbj4jPWNvbnRlbnQjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb3NlXCI+SGlkZTwvc3Bhbj48L2Rpdj4nLEM9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt2YXIgbz10aGlzO2kuZm4uaW5pdC5jYWxsKG8sdCxyKSxyPW8ub3B0aW9ucyxyLmFwcGVuZFRvJiZlKHIuYXBwZW5kVG8pLmlzKHQpfHxvLmVsZW1lbnQuaGlkZSgpLG8uX2NvbXBpbGVUZW1wbGF0ZXMoci50ZW1wbGF0ZXMpLG8uX2d1aWQ9XCJfXCIrbi5ndWlkKCksby5faXNSdGw9bi5zdXBwb3J0LmlzUnRsKHQpLG8uX2NvbXBpbGVTdGFja2luZyhyLnN0YWNraW5nLHIucG9zaXRpb24udG9wKSxuLm5vdGlmeShvKX0sZXZlbnRzOltsLGNdLG9wdGlvbnM6e25hbWU6XCJOb3RpZmljYXRpb25cIixwb3NpdGlvbjp7cGlubmVkOiEwLHRvcDpudWxsLGxlZnQ6bnVsbCxib3R0b206MjAscmlnaHQ6MjB9LHN0YWNraW5nOlwiZGVmYXVsdFwiLGhpZGVPbkNsaWNrOiEwLGJ1dHRvbjohMSxhbGxvd0hpZGVBZnRlcjowLGF1dG9IaWRlQWZ0ZXI6NWUzLGFwcGVuZFRvOm51bGwsd2lkdGg6bnVsbCxoZWlnaHQ6bnVsbCx0ZW1wbGF0ZXM6W10sYW5pbWF0aW9uOntvcGVuOntlZmZlY3RzOlwiZmFkZTppblwiLGR1cmF0aW9uOjMwMH0sY2xvc2U6e2VmZmVjdHM6XCJmYWRlOm91dFwiLGR1cmF0aW9uOjYwMCxoaWRlOiEwfX19LF9jb21waWxlVGVtcGxhdGVzOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMscj1uLnRlbXBsYXRlO2kuX2NvbXBpbGVkPXt9LGUuZWFjaCh0LGZ1bmN0aW9uKHQsbil7aS5fY29tcGlsZWRbbi50eXBlXT1yKG4udGVtcGxhdGV8fGUoXCIjXCIrbi50ZW1wbGF0ZUlkKS5odG1sKCkpfSksaS5fZGVmYXVsdENvbXBpbGVkPXIoeCl9LF9nZXRDb21waWxlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fZGVmYXVsdENvbXBpbGVkO3JldHVybiBlP3QuX2NvbXBpbGVkW2VdfHxuOm59LF9jb21waWxlU3RhY2tpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXtwYWRkaW5nVG9wOjAscGFkZGluZ1JpZ2h0OjAscGFkZGluZ0JvdHRvbTowLHBhZGRpbmdMZWZ0OjB9O3N3aXRjaChlKXtjYXNlXCJkb3duXCI6bj1fK1wiIFwiK3YsaT1tK1wiIFwiK3YsZGVsZXRlIG8ucGFkZGluZ0JvdHRvbTticmVhaztjYXNlIHk6bj1tK1wiIFwiK3ksaT1tK1wiIFwiK3YsZGVsZXRlIG8ucGFkZGluZ1JpZ2h0O2JyZWFrO2Nhc2UgdjpuPW0rXCIgXCIrdixpPW0rXCIgXCIreSxkZWxldGUgby5wYWRkaW5nTGVmdDticmVhaztjYXNlIHc6bj1tK1wiIFwiK3YsaT1fK1wiIFwiK3YsZGVsZXRlIG8ucGFkZGluZ1RvcDticmVhaztkZWZhdWx0Om51bGwhPT10PyhuPV8rXCIgXCIrdixpPW0rXCIgXCIrdixkZWxldGUgby5wYWRkaW5nQm90dG9tKToobj1tK1wiIFwiK3YsaT1fK1wiIFwiK3YsZGVsZXRlIG8ucGFkZGluZ1RvcCl9ci5fcG9wdXBPcmlnaW49bixyLl9wb3B1cFBvc2l0aW9uPWksci5fcG9wdXBQYWRkaW5ncz1vfSxfYXR0YWNoUG9wdXBFdmVudHM6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe2Uub24ocytiLGZ1bmN0aW9uKCl7dC5jbG9zZSgpfSl9dmFyIGkscj1lLmFsbG93SGlkZUFmdGVyLG89IWlzTmFOKHIpJiZyPjA7ZS5oaWRlT25DbGljaz90LmJpbmQoXCJhY3RpdmF0ZVwiLGZ1bmN0aW9uKCl7bz9hKGZ1bmN0aW9uKCl7bih0LmVsZW1lbnQpfSxyKTpuKHQuZWxlbWVudCl9KTplLmJ1dHRvbiYmKGk9dC5lbGVtZW50LmZpbmQodSksbz9hKGZ1bmN0aW9uKCl7bihpKX0scik6bihpKSl9LF9zaG93UG9wdXA6ZnVuY3Rpb24odCxpKXt2YXIgcixzLGw9dGhpcyxjPWkuYXV0b0hpZGVBZnRlcixkPWkucG9zaXRpb24ubGVmdCxoPWkucG9zaXRpb24udG9wO3M9ZShcIi5cIitsLl9ndWlkKS5sYXN0KCkscj1uZXcgbi51aS5Qb3B1cCh0LHthbmNob3I6c1swXT9zOmRvY3VtZW50LmJvZHksb3JpZ2luOmwuX3BvcHVwT3JpZ2luLHBvc2l0aW9uOmwuX3BvcHVwUG9zaXRpb24sYW5pbWF0aW9uOmkuYW5pbWF0aW9uLG1vZGFsOiEwLGNvbGxpc2lvbjpcIlwiLGlzUnRsOmwuX2lzUnRsLGNsb3NlOmZ1bmN0aW9uKCl7bC5fdHJpZ2dlckhpZGUodGhpcy5lbGVtZW50KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbihlKXtlLnNlbmRlci5lbGVtZW50Lm9mZihiKSxlLnNlbmRlci5lbGVtZW50LmZpbmQodSkub2ZmKGIpLGUuc2VuZGVyLmRlc3Ryb3koKX19KSxsLl9hdHRhY2hQb3B1cEV2ZW50cyhpLHIpLHNbMF0/ci5vcGVuKCk6KG51bGw9PT1kJiYoZD1lKHdpbmRvdykud2lkdGgoKS10LndpZHRoKCktaS5wb3NpdGlvbi5yaWdodCksbnVsbD09PWgmJihoPWUod2luZG93KS5oZWlnaHQoKS10LmhlaWdodCgpLWkucG9zaXRpb24uYm90dG9tKSxyLm9wZW4oZCxoKSksci53cmFwcGVyLmFkZENsYXNzKGwuX2d1aWQpLmNzcyhvKHttYXJnaW46MH0sbC5fcG9wdXBQYWRkaW5ncykpLGkucG9zaXRpb24ucGlubmVkPyhyLndyYXBwZXIuY3NzKFwicG9zaXRpb25cIixcImZpeGVkXCIpLHNbMF0mJmwuX3RvZ2dsZVBpbihyLndyYXBwZXIsITApKTpzWzBdfHxsLl90b2dnbGVQaW4oci53cmFwcGVyLCExKSxjPjAmJmEoZnVuY3Rpb24oKXtyLmNsb3NlKCl9LGMpfSxfdG9nZ2xlUGluOmZ1bmN0aW9uKHQsbil7dmFyIGk9ZSh3aW5kb3cpLHI9bj8tMToxO3QuY3NzKHt0b3A6cGFyc2VJbnQodC5jc3MobSksMTApK3IqaS5zY3JvbGxUb3AoKSxsZWZ0OnBhcnNlSW50KHQuY3NzKHYpLDEwKStyKmkuc2Nyb2xsTGVmdCgpfSl9LF9hdHRhY2hTdGF0aWNFdmVudHM6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe2Uub24ocytiLHIoaS5faGlkZVN0YXRpYyxpLHQpKX12YXIgaT10aGlzLG89ZS5hbGxvd0hpZGVBZnRlcixsPSFpc05hTihvKSYmbz4wO2UuaGlkZU9uQ2xpY2s/bD9hKGZ1bmN0aW9uKCl7bih0KX0sbyk6bih0KTplLmJ1dHRvbiYmKGw/YShmdW5jdGlvbigpe24odC5maW5kKHUpKX0sbyk6bih0LmZpbmQodSkpKX0sX3Nob3dTdGF0aWM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dC5hdXRvSGlkZUFmdGVyLHI9dC5hbmltYXRpb24sbz10LnN0YWNraW5nPT13fHx0LnN0YWNraW5nPT12P1wicHJlcGVuZFRvXCI6XCJhcHBlbmRUb1wiO2UuYWRkQ2xhc3Mobi5fZ3VpZClbb10odC5hcHBlbmRUbykuaGlkZSgpLmtlbmRvQW5pbWF0ZShyLm9wZW58fCExKSxuLl9hdHRhY2hTdGF0aWNFdmVudHModCxlKSxpPjAmJmEoZnVuY3Rpb24oKXtuLl9oaWRlU3RhdGljKGUpfSxpKX0sX2hpZGVTdGF0aWM6ZnVuY3Rpb24oZSl7ZS5rZW5kb0FuaW1hdGUobyh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLmNsb3NlfHwhMSx7Y29tcGxldGU6ZnVuY3Rpb24oKXtlLm9mZihiKS5maW5kKHUpLm9mZihiKSxlLnJlbW92ZSgpfX0pKSx0aGlzLl90cmlnZ2VySGlkZShlKX0sX3RyaWdnZXJIaWRlOmZ1bmN0aW9uKGUpe3RoaXMudHJpZ2dlcihjLHtlbGVtZW50OmV9KSx0aGlzLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZX19KX0sc2hvdzpmdW5jdGlvbihpLHIpe3ZhciBhLHMsYz10aGlzLHU9Yy5vcHRpb25zLHA9ZShrKTtyZXR1cm4gcnx8KHI9aCksbnVsbCE9PWkmJmkhPT10JiZcIlwiIT09aSYmKG4uaXNGdW5jdGlvbihpKSYmKGk9aSgpKSxzPXt0eXBlSWNvbjpyLGNvbnRlbnQ6XCJcIn0sYT1lLmlzUGxhaW5PYmplY3QoaSk/byhzLGkpOm8ocyx7Y29udGVudDppfSkscC5hZGRDbGFzcyhkK1wiLVwiK3IpLnRvZ2dsZUNsYXNzKGQrXCItYnV0dG9uXCIsdS5idXR0b24pLmF0dHIoXCJkYXRhLXJvbGVcIixcImFsZXJ0XCIpLmNzcyh7d2lkdGg6dS53aWR0aCxoZWlnaHQ6dS5oZWlnaHR9KS5hcHBlbmQoYy5fZ2V0Q29tcGlsZWQocikoYSkpLGMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpwLGRhdGE6W3tkYXRhSXRlbTphfV19fSksZSh1LmFwcGVuZFRvKVswXT9jLl9zaG93U3RhdGljKHAsdSk6Yy5fc2hvd1BvcHVwKHAsdSksYy50cmlnZ2VyKGwse2VsZW1lbnQ6cH0pKSxjfSxpbmZvOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNob3coZSxoKX0sc3VjY2VzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaG93KGUscCl9LHdhcm5pbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2hvdyhlLGYpfSxlcnJvcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaG93KGUsZyl9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5nZXROb3RpZmljYXRpb25zKCk7cmV0dXJuIG4uZWFjaCh0Lm9wdGlvbnMuYXBwZW5kVG8/ZnVuY3Rpb24obixpKXt0Ll9oaWRlU3RhdGljKGUoaSkpfTpmdW5jdGlvbih0LG4pe3ZhciBpPWUobikuZGF0YShcImtlbmRvUG9wdXBcIik7aSYmaS5jbG9zZSgpfSksdH0sZ2V0Tm90aWZpY2F0aW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKFwiLlwiK3QuX2d1aWQpO3JldHVybiB0Lm9wdGlvbnMuYXBwZW5kVG8/bjpuLmNoaWxkcmVuKFwiLlwiK2QpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcztpLmZuLnNldE9wdGlvbnMuY2FsbChyLGUpLG49ci5vcHRpb25zLGUudGVtcGxhdGVzIT09dCYmci5fY29tcGlsZVRlbXBsYXRlcyhuLnRlbXBsYXRlcyksKGUuc3RhY2tpbmchPT10fHxlLnBvc2l0aW9uIT09dCkmJnIuX2NvbXBpbGVTdGFja2luZyhuLnN0YWNraW5nLG4ucG9zaXRpb24udG9wKX0sZGVzdHJveTpmdW5jdGlvbigpe2kuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZ2V0Tm90aWZpY2F0aW9ucygpLm9mZihiKS5maW5kKHUpLm9mZihiKX19KTtuLnVpLnBsdWdpbihDKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtmb3IoO2UubGVuZ3RoOyluKGUpLGU9ZS5wYXJlbnQoKX1mdW5jdGlvbiBuKGUpe3ZhciB0PWUuZGF0YShvLm5zK1widGl0bGVcIik7dCYmKGUuYXR0cihcInRpdGxlXCIsdCksZS5yZW1vdmVEYXRhKG8ubnMrXCJ0aXRsZVwiKSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmF0dHIoXCJ0aXRsZVwiKTt0JiYoZS5kYXRhKG8ubnMrXCJ0aXRsZVwiLHQpLGUuYXR0cihcInRpdGxlXCIsXCJcIikpfWZ1bmN0aW9uIHIoZSl7Zm9yKDtlLmxlbmd0aCYmIWUuaXMoXCJib2R5XCIpOylpKGUpLGU9ZS5wYXJlbnQoKX12YXIgbz13aW5kb3cua2VuZG8sYT1vLnVpLldpZGdldCxzPW8udWkuUG9wdXAsbD1vLmlzRnVuY3Rpb24sYz1lLmlzUGxhaW5PYmplY3QsZD1lLmV4dGVuZCx1PWUucHJveHksaD1lKGRvY3VtZW50KSxwPW8uaXNMb2NhbFVybCxmPVwiX3R0X2FjdGl2ZVwiLGc9XCJhcmlhLWRlc2NyaWJlZGJ5XCIsbT1cInNob3dcIix2PVwiaGlkZVwiLF89XCJlcnJvclwiLHk9XCJjb250ZW50TG9hZFwiLHc9XCJyZXF1ZXN0U3RhcnRcIixiPVwiay1jb250ZW50LWZyYW1lXCIsaz0nPGRpdiByb2xlPVwidG9vbHRpcFwiIGNsYXNzPVwiay13aWRnZXQgay10b29sdGlwI2lmICghYXV0b0hpZGUpIHsjIGstdG9vbHRpcC1jbG9zYWJsZSN9I1wiPiNpZiAoIWF1dG9IaWRlKSB7IyA8ZGl2IGNsYXNzPVwiay10b29sdGlwLWJ1dHRvblwiPjxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1pY29uIGstaS1jbG9zZVwiPmNsb3NlPC9hPjwvZGl2PiAjfSM8ZGl2IGNsYXNzPVwiay10b29sdGlwLWNvbnRlbnRcIj48L2Rpdj4jaWYgKGNhbGxvdXQpeyAjPGRpdiBjbGFzcz1cImstY2FsbG91dCBrLWNhbGxvdXQtIz1kaXIjXCI+PC9kaXY+I30jPC9kaXY+Jyx4PW8udGVtcGxhdGUoXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyBjbGFzcz0nXCIrYitcIicgc3JjPScjPSBjb250ZW50LnVybCAjJz5UaGlzIHBhZ2UgcmVxdWlyZXMgZnJhbWVzIGluIG9yZGVyIHRvIHNob3cgY29udGVudDwvaWZyYW1lPlwiKSxDPVwiLmtlbmRvVG9vbHRpcFwiLFM9e2JvdHRvbTp7b3JpZ2luOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwidG9wIGNlbnRlclwifSx0b3A6e29yaWdpbjpcInRvcCBjZW50ZXJcIixwb3NpdGlvbjpcImJvdHRvbSBjZW50ZXJcIn0sbGVmdDp7b3JpZ2luOlwiY2VudGVyIGxlZnRcIixwb3NpdGlvbjpcImNlbnRlciByaWdodFwiLGNvbGxpc2lvbjpcImZpdCBmbGlwXCJ9LHJpZ2h0OntvcmlnaW46XCJjZW50ZXIgcmlnaHRcIixwb3NpdGlvbjpcImNlbnRlciBsZWZ0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn0sY2VudGVyOntwb3NpdGlvbjpcImNlbnRlciBjZW50ZXJcIixvcmlnaW46XCJjZW50ZXIgY2VudGVyXCJ9fSxUPXt0b3A6XCJib3R0b21cIixib3R0b206XCJ0b3BcIixsZWZ0OlwicmlnaHRcIixyaWdodDpcImxlZnRcIixjZW50ZXI6XCJjZW50ZXJcIn0sRD17Ym90dG9tOlwiblwiLHRvcDpcInNcIixsZWZ0OlwiZVwiLHJpZ2h0Olwid1wiLGNlbnRlcjpcIm5cIn0sQT17aG9yaXpvbnRhbDp7b2Zmc2V0OlwidG9wXCIsc2l6ZTpcIm91dGVySGVpZ2h0XCJ9LHZlcnRpY2FsOntvZmZzZXQ6XCJsZWZ0XCIsc2l6ZTpcIm91dGVyV2lkdGhcIn19LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFyZ2V0LmRhdGEoby5ucytcInRpdGxlXCIpfSxNPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2EuZm4uaW5pdC5jYWxsKGksZSx0KSxuPWkub3B0aW9ucy5wb3NpdGlvbi5tYXRjaCgvbGVmdHxyaWdodC8pP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIixpLmRpbWVuc2lvbnM9QVtuXSxpLl9kb2N1bWVudEtleURvd25IYW5kbGVyPXUoaS5fZG9jdW1lbnRLZXlEb3duLGkpLGkuZWxlbWVudC5vbihpLm9wdGlvbnMuc2hvd09uK0MsaS5vcHRpb25zLmZpbHRlcix1KGkuX3Nob3dPbixpKSkub24oXCJtb3VzZWVudGVyXCIrQyxpLm9wdGlvbnMuZmlsdGVyLHUoaS5fbW91c2VlbnRlcixpKSksdGhpcy5vcHRpb25zLmF1dG9IaWRlJiZpLmVsZW1lbnQub24oXCJtb3VzZWxlYXZlXCIrQyxpLm9wdGlvbnMuZmlsdGVyLHUoaS5fbW91c2VsZWF2ZSxpKSl9LG9wdGlvbnM6e25hbWU6XCJUb29sdGlwXCIsZmlsdGVyOlwiXCIsY29udGVudDpFLHNob3dBZnRlcjoxMDAsY2FsbG91dDohMCxwb3NpdGlvbjpcImJvdHRvbVwiLHNob3dPbjpcIm1vdXNlZW50ZXJcIixhdXRvSGlkZTohMCx3aWR0aDpudWxsLGhlaWdodDpudWxsLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcImZhZGU6aW5cIixkdXJhdGlvbjowfSxjbG9zZTp7ZWZmZWN0czpcImZhZGU6b3V0XCIsZHVyYXRpb246NDAsaGlkZTohMH19fSxldmVudHM6W20sdix5LF8sd10sX21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7cihlKHQuY3VycmVudFRhcmdldCkpfSxfc2hvd09uOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQuY3VycmVudFRhcmdldCk7bi5vcHRpb25zLnNob3dPbiYmbi5vcHRpb25zLnNob3dPbi5tYXRjaCgvY2xpY2t8Zm9jdXMvKT9uLl9zaG93KGkpOihjbGVhclRpbWVvdXQobi50aW1lb3V0KSxuLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe24uX3Nob3coaSl9LG4ub3B0aW9ucy5zaG93QWZ0ZXIpKX0sX2FwcGVuZENvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLmNvbnRlbnQscj1uLmNvbnRlbnQsYT1uLm9wdGlvbnMuaWZyYW1lO2MoaSkmJmkudXJsPyhcImlmcmFtZVwiaW4gbi5vcHRpb25zfHwoYT0hcChpLnVybCkpLG4udHJpZ2dlcih3LHtvcHRpb25zOmksdGFyZ2V0OmV9KSxhPyhyLmhpZGUoKSx0PXIuZmluZChcIi5cIitiKVswXSx0P3Quc3JjPWkudXJsfHx0LnNyYzpyLmh0bWwoeCh7Y29udGVudDppfSkpLHIuZmluZChcIi5cIitiKS5vZmYoXCJsb2FkXCIrQykub24oXCJsb2FkXCIrQyxmdW5jdGlvbigpe24udHJpZ2dlcih5KSxyLnNob3coKX0pKTooci5lbXB0eSgpLG8udWkucHJvZ3Jlc3MociwhMCksbi5fYWpheFJlcXVlc3QoaSkpKTppJiZsKGkpPyhpPWkoe3NlbmRlcjp0aGlzLHRhcmdldDplfSksci5odG1sKGl8fFwiXCIpKTpyLmh0bWwoaSksbi5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnJ9fSl9LF9hamF4UmVxdWVzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2pRdWVyeS5hamF4KGQoe3R5cGU6XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixjYWNoZTohMSxlcnJvcjpmdW5jdGlvbihlLG4pe28udWkucHJvZ3Jlc3ModC5jb250ZW50LCExKSx0LnRyaWdnZXIoXyx7c3RhdHVzOm4seGhyOmV9KX0sc3VjY2Vzczp1KGZ1bmN0aW9uKGUpe28udWkucHJvZ3Jlc3ModC5jb250ZW50LCExKSx0LmNvbnRlbnQuaHRtbChlKSx0LnRyaWdnZXIoeSl9LHQpfSxlKSl9LF9kb2N1bWVudEtleURvd246ZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT09by5rZXlzLkVTQyYmdGhpcy5oaWRlKCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wb3B1cDt0JiZ0Lm9wdGlvbnMuYW5jaG9yJiZlLl9hcHBlbmRDb250ZW50KHQub3B0aW9ucy5hbmNob3IpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5jbG9zZSgpfSxzaG93OmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5lbGVtZW50LHIoZSksdGhpcy5fc2hvdyhlKX0sX3Nob3c6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4udGFyZ2V0KCk7bi5wb3B1cHx8bi5faW5pdFBvcHVwKCksaSYmaVswXSE9ZVswXSYmKG4ucG9wdXAuY2xvc2UoKSxuLnBvcHVwLmVsZW1lbnQua2VuZG9TdG9wKCEwLCEwKSksaSYmaVswXT09ZVswXXx8KG4uX2FwcGVuZENvbnRlbnQoZSksbi5wb3B1cC5vcHRpb25zLmFuY2hvcj1lKSxuLnBvcHVwLm9uZShcImRlYWN0aXZhdGVcIixmdW5jdGlvbigpe3QoZSksZS5yZW1vdmVBdHRyKGcpLHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwiaWRcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLGgub2ZmKFwia2V5ZG93blwiK0Msbi5fZG9jdW1lbnRLZXlEb3duSGFuZGxlcil9KSxuLnBvcHVwLm9wZW4oKX0sX2luaXRQb3B1cDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT1lKG8udGVtcGxhdGUoaykoe2NhbGxvdXQ6bi5jYWxsb3V0JiZcImNlbnRlclwiIT09bi5wb3NpdGlvbixkaXI6RFtuLnBvc2l0aW9uXSxhdXRvSGlkZTpuLmF1dG9IaWRlfSkpO3QucG9wdXA9bmV3IHMoaSxkKHthY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5hbmNob3IsaT1lWzBdLmlkfHx0LmVsZW1lbnRbMF0uaWQ7aSYmKGUuYXR0cihnLGkrZiksdGhpcy5lbGVtZW50LmF0dHIoXCJpZFwiLGkrZikpLG4uY2FsbG91dCYmdC5fcG9zaXRpb25DYWxsb3V0KCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKSxoLm9uKFwia2V5ZG93blwiK0MsdC5fZG9jdW1lbnRLZXlEb3duSGFuZGxlciksdC50cmlnZ2VyKG0pfSxjbG9zZTpmdW5jdGlvbigpe3QudHJpZ2dlcih2KX0sY29weUFuY2hvclN0eWxlczohMSxhbmltYXRpb246bi5hbmltYXRpb259LFNbbi5wb3NpdGlvbl0pKSxpLmNzcyh7d2lkdGg6bi53aWR0aCxoZWlnaHQ6bi5oZWlnaHR9KSx0LmNvbnRlbnQ9aS5maW5kKFwiLmstdG9vbHRpcC1jb250ZW50XCIpLHQuYXJyb3c9aS5maW5kKFwiLmstY2FsbG91dFwiKSxuLmF1dG9IaWRlP2kub24oXCJtb3VzZWxlYXZlXCIrQyx1KHQuX21vdXNlbGVhdmUsdCkpOmkub24oXCJjbGlja1wiK0MsXCIuay10b29sdGlwLWJ1dHRvblwiLHUodC5fY2xvc2VCdXR0b25DbGljayx0KSl9LF9jbG9zZUJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmhpZGUoKX0sX21vdXNlbGVhdmU6ZnVuY3Rpb24obil7aWYodGhpcy5wb3B1cCl7dmFyIGk9ZShuLmN1cnJlbnRUYXJnZXQpLHI9aS5vZmZzZXQoKSxvPW4ucGFnZVgsYT1uLnBhZ2VZO2lmKHIucmlnaHQ9ci5sZWZ0K2kub3V0ZXJXaWR0aCgpLHIuYm90dG9tPXIudG9wK2kub3V0ZXJIZWlnaHQoKSxvPnIubGVmdCYmci5yaWdodD5vJiZhPnIudG9wJiZyLmJvdHRvbT5hKXJldHVybjt0aGlzLnBvcHVwLmNsb3NlKCl9ZWxzZSB0KGUobi5jdXJyZW50VGFyZ2V0KSk7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCl9LF9wb3NpdGlvbkNhbGxvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLnBvc2l0aW9uLGk9dC5kaW1lbnNpb25zLHI9aS5vZmZzZXQsbz10LnBvcHVwLGE9by5vcHRpb25zLmFuY2hvcixzPWUoYSkub2Zmc2V0KCksbD1wYXJzZUludCh0LmFycm93LmNzcyhcImJvcmRlci10b3Atd2lkdGhcIiksMTApLGM9ZShvLmVsZW1lbnQpLm9mZnNldCgpLGQ9RFtvLmZsaXBwZWQ/VFtuXTpuXSx1PXNbcl0tY1tyXStlKGEpW2kuc2l6ZV0oKS8yLWw7dC5hcnJvdy5yZW1vdmVDbGFzcyhcImstY2FsbG91dC1uIGstY2FsbG91dC1zIGstY2FsbG91dC13IGstY2FsbG91dC1lXCIpLmFkZENsYXNzKFwiay1jYWxsb3V0LVwiK2QpLmNzcyhyLHUpfSx0YXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3B1cD90aGlzLnBvcHVwLm9wdGlvbnMuYW5jaG9yOm51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBvcHVwO2UmJihlLmVsZW1lbnQub2ZmKEMpLGUuZGVzdHJveSgpKSx0aGlzLmVsZW1lbnQub2ZmKEMpLGgub2ZmKFwia2V5ZG93blwiK0MsdGhpcy5fZG9jdW1lbnRLZXlEb3duSGFuZGxlciksYS5mbi5kZXN0cm95LmNhbGwodGhpcyl9fSk7by51aS5wbHVnaW4oTSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbih0LGkpe3ZhciByLG89ITE7cmV0dXJuIHQuZmlsdGVycyYmKHI9ZS5ncmVwKHQuZmlsdGVycyxmdW5jdGlvbihlKXtyZXR1cm4gbz1uKGUsaSksZS5maWx0ZXJzP2UuZmlsdGVycy5sZW5ndGg6ZS5maWVsZCE9aX0pLG98fHQuZmlsdGVycy5sZW5ndGg9PT1yLmxlbmd0aHx8KG89ITApLHQuZmlsdGVycz1yKSxvfXZhciBpPXdpbmRvdy5rZW5kbyxyPWkudWksbz1yLldpZGdldCxhPWkua2V5cyxzPWkuc3VwcG9ydCxsPWkuaHRtbEVuY29kZSxjPWkuX2FjdGl2ZUVsZW1lbnQsZD1cImlkXCIsdT1cImxpXCIsaD1cImNoYW5nZVwiLHA9XCJrLXN0YXRlLWZvY3VzZWRcIixmPVwiay1zdGF0ZS1ob3ZlclwiLGc9XCJrLWxvYWRpbmdcIixtPVwib3BlblwiLHY9XCJjbG9zZVwiLF89XCJzZWxlY3RcIix5PVwic2VsZWN0ZWRcIix3PVwicHJvZ3Jlc3NcIixiPVwicmVxdWVzdEVuZFwiLGs9XCJ3aWR0aFwiLHg9ZS5leHRlbmQsQz1lLnByb3h5LFM9cy5icm93c2VyLFQ9Uy5tc2llJiY5PlMudmVyc2lvbixEPS9cIi9nLEE9e0NvbWJvQm94OlwiRHJvcERvd25MaXN0XCIsRHJvcERvd25MaXN0OlwiQ29tYm9Cb3hcIn0sRT1pLnVpLkRhdGFCb3VuZFdpZGdldC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXMsYT1yLm5zO28uZm4uaW5pdC5jYWxsKHIsdCxuKSx0PXIuZWxlbWVudCxyLl9pc1NlbGVjdD10LmlzKF8pLHIuX3RlbXBsYXRlKCksci51bD1lKCc8dWwgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstbGlzdCBrLXJlc2V0XCIvPicpLmNzcyh7b3ZlcmZsb3c6cy5raW5ldGljU2Nyb2xsTmVlZGVkP1wiXCI6XCJhdXRvXCJ9KS5vbihcIm1vdXNlZW50ZXJcIithLHUsZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKGYpfSkub24oXCJtb3VzZWxlYXZlXCIrYSx1LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhmKX0pLm9uKFwiY2xpY2tcIithLHUsQyhyLl9jbGljayxyKSkuYXR0cih7dGFiSW5kZXg6LTEscm9sZTpcImxpc3Rib3hcIixcImFyaWEtaGlkZGVuXCI6ITB9KSxyLmxpc3Q9ZShcIjxkaXYgY2xhc3M9J2stbGlzdC1jb250YWluZXInLz5cIikuYXBwZW5kKHIudWwpLm9uKFwibW91c2Vkb3duXCIrYSxDKHIuX2xpc3RNb3VzZWRvd24scikpLGk9dC5hdHRyKGQpLGkmJihyLmxpc3QuYXR0cihkLGkrXCItbGlzdFwiKSxyLnVsLmF0dHIoZCxpK1wiX2xpc3Rib3hcIiksci5fb3B0aW9uSUQ9aStcIl9vcHRpb25fc2VsZWN0ZWRcIiksci5faGVhZGVyKCksci5fYWNjZXNzb3JzKCksci5faW5pdFZhbHVlKCl9LG9wdGlvbnM6e3ZhbHVlUHJpbWl0aXZlOiExLGhlYWRlclRlbXBsYXRlOlwiXCJ9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7by5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSxlJiZlLmVuYWJsZSE9PXQmJihlLmVuYWJsZWQ9ZS5lbmFibGUpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuX2ZvY3VzZWQuZm9jdXMoKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LF9saXN0TW91c2Vkb3duOmZ1bmN0aW9uKGUpe3RoaXMuZmlsdGVySW5wdXQmJnRoaXMuZmlsdGVySW5wdXRbMF09PT1lLnRhcmdldHx8ZS5wcmV2ZW50RGVmYXVsdCgpfSxfZmlsdGVyU291cmNlOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPWkub3B0aW9ucyxvPWkuZGF0YVNvdXJjZSxhPXgoe30sby5maWx0ZXIoKXx8e30pLHM9bihhLHIuZGF0YVRleHRGaWVsZCk7KGV8fHMpJiZpLnRyaWdnZXIoXCJmaWx0ZXJpbmdcIix7ZmlsdGVyOmV9KXx8KGUmJihhPWEuZmlsdGVyc3x8W10sYS5wdXNoKGUpKSx0P28ucmVhZChhKTpvLmZpbHRlcihhKSl9LF9oZWFkZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMuaGVhZGVyVGVtcGxhdGU7ZS5pc0Z1bmN0aW9uKGkpJiYoaT1pKHt9KSksaSYmKG4ubGlzdC5wcmVwZW5kKGkpLHQ9bi51bC5wcmV2KCksbi5oZWFkZXI9dFswXT90Om51bGwsbi5oZWFkZXImJm4uYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpuLmhlYWRlcn19KSl9LF9pbml0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLnZhbHVlO251bGwhPT10P2UuZWxlbWVudC52YWwodCk6KHQ9ZS5fYWNjZXNzb3IoKSxlLm9wdGlvbnMudmFsdWU9dCksZS5fb2xkPXR9LF9pZ25vcmVDYXNlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5kYXRhU291cmNlLnJlYWRlci5tb2RlbDtuJiZuLmZpZWxkcyYmKGU9bi5maWVsZHNbdC5vcHRpb25zLmRhdGFUZXh0RmllbGRdLGUmJmUudHlwZSYmXCJzdHJpbmdcIiE9PWUudHlwZSYmKHQub3B0aW9ucy5pZ25vcmVDYXNlPSExKSl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWxbMF0uY2hpbGRyZW59LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2ZvY3VzZWQuYWRkKG4uZmlsdGVySW5wdXQpLHI9bi5fb3B0aW9uSUQ7cmV0dXJuIGU9PT10P24uX2N1cnJlbnQ6KG4uX2N1cnJlbnQmJihuLl9jdXJyZW50LnJlbW92ZUNsYXNzKHApLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoZCksaS5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpKSxlJiYoZS5hZGRDbGFzcyhwKSxuLl9zY3JvbGwoZSksciYmKGUuYXR0cihcImlkXCIsciksaS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpKSxuLl9jdXJyZW50PWUsdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5ucztvLmZuLmRlc3Ryb3kuY2FsbChlKSxlLl91bmJpbmREYXRhU291cmNlKCksZS51bC5vZmYodCksZS5saXN0Lm9mZih0KSxlLl90b3VjaFNjcm9sbGVyJiZlLl90b3VjaFNjcm9sbGVyLmRlc3Ryb3koKSxlLnBvcHVwLmRlc3Ryb3koKSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKX0sZGF0YUl0ZW06ZnVuY3Rpb24obil7dmFyIGk9dGhpcztyZXR1cm4gbj09PXQ/bj1pLnNlbGVjdGVkSW5kZXg6XCJudW1iZXJcIiE9dHlwZW9mIG4mJihuPWUoaS5pdGVtcygpKS5pbmRleChuKSksaS5fZGF0YSgpW25dfSxfYWNjZXNzb3JzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPWUub3B0aW9ucyxyPWkuZ2V0dGVyLG89dC5hdHRyKGkuYXR0cihcInRleHQtZmllbGRcIikpLGE9dC5hdHRyKGkuYXR0cihcInZhbHVlLWZpZWxkXCIpKTshbi5kYXRhVGV4dEZpZWxkJiZvJiYobi5kYXRhVGV4dEZpZWxkPW8pLCFuLmRhdGFWYWx1ZUZpZWxkJiZhJiYobi5kYXRhVmFsdWVGaWVsZD1hKSxlLl90ZXh0PXIobi5kYXRhVGV4dEZpZWxkKSxlLl92YWx1ZT1yKG4uZGF0YVZhbHVlRmllbGQpfSxfYXJpYTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9bi5fZm9jdXNlZC5hZGQobi5maWx0ZXJJbnB1dCk7aS5zdWdnZXN0IT09dCYmci5hdHRyKFwiYXJpYS1hdXRvY29tcGxldGVcIixpLnN1Z2dlc3Q/XCJib3RoXCI6XCJsaXN0XCIpLGU9ZT9lK1wiIFwiK24udWxbMF0uaWQ6bi51bFswXS5pZCxyLmF0dHIoXCJhcmlhLW93bnNcIixlKSxuLnVsLmF0dHIoXCJhcmlhLWxpdmVcIixpLmZpbHRlciYmXCJub25lXCIhPT1pLmZpbHRlcj9cInBvbGl0ZVwiOlwib2ZmXCIpfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hhbmdlKCksZS5jbG9zZSgpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLGk9bi5zZWxlY3RlZEluZGV4LHI9bi5vcHRpb25zLnZhbHVlLG89bi52YWx1ZSgpO24uX2lzU2VsZWN0JiYhbi5fYm91bmQmJnImJihvPXIpLG8hPT1uLl9vbGQ/ZT0hMDppIT09dCYmaSE9PW4uX29sZEluZGV4JiYoZT0hMCksZSYmKG4uX29sZD1vLG4uX29sZEluZGV4PWksbi5lbGVtZW50LnRyaWdnZXIoaCksbi50cmlnZ2VyKGgpKX0sX2NsaWNrOmZ1bmN0aW9uKHQpe3QuaXNEZWZhdWx0UHJldmVudGVkKCl8fHRoaXMuX2FjY2VwdChlKHQuY3VycmVudFRhcmdldCkpfSxfZGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGFTb3VyY2UudmlldygpfSxfZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUub3B0aW9ucyxpPWUuZWxlbWVudC5pcyhcIltkaXNhYmxlZF1cIik7bi5lbmFibGUhPT10JiYobi5lbmFibGVkPW4uZW5hYmxlKSwhbi5lbmFibGVkfHxpP2UuZW5hYmxlKCExKTplLnJlYWRvbmx5KGUuZWxlbWVudC5pcyhcIltyZWFkb25seV1cIikpfSxfZm9jdXM6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPSEwO3JldHVybiBuLnBvcHVwLnZpc2libGUoKSYmZSYmbi50cmlnZ2VyKF8se2l0ZW06ZX0pPyhuLmNsb3NlKCksdCk6KG4uX3NlbGVjdChlKSxuLl90cmlnZ2VyQ2FzY2FkZShpKSxuLl9ibHVyKCksdCl9LF9pbmRleDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWkuX2RhdGEoKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKylpZihpLl9kYXRhVmFsdWUoclt0XSk9PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LF9kYXRhVmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5fdmFsdWUoZSk7cmV0dXJuIG49PT10JiYobj10aGlzLl90ZXh0KGUpKSxufSxfaGVpZ2h0OmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0LG4saT10aGlzLHI9aS5saXN0LG89aS5vcHRpb25zLmhlaWdodCxhPWkucG9wdXAudmlzaWJsZSgpO249ci5hZGQoci5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpKS5zaG93KCksbz1pLnVsWzBdLnNjcm9sbEhlaWdodD5vP286XCJhdXRvXCIsbi5oZWlnaHQobyksXCJhdXRvXCIhPT1vJiYodD1pLnVsWzBdLm9mZnNldFRvcCx0JiYobz1yLmhlaWdodCgpLXQpKSxpLnVsLmhlaWdodChvKSxhfHxuLmhpZGUoKX19LF9hZGp1c3RMaXN0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5saXN0LGk9blswXS5zdHlsZS53aWR0aCxyPXRoaXMud3JhcHBlcjtpZihuLmRhdGEoayl8fCFpKXJldHVybiBlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlP3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHJbMF0sbnVsbCk6MCx0PWU/cGFyc2VGbG9hdChlLndpZHRoKTpyLm91dGVyV2lkdGgoKSxlJiZTLm1zaWUmJih0Kz1wYXJzZUZsb2F0KGUucGFkZGluZ0xlZnQpK3BhcnNlRmxvYXQoZS5wYWRkaW5nUmlnaHQpK3BhcnNlRmxvYXQoZS5ib3JkZXJMZWZ0V2lkdGgpK3BhcnNlRmxvYXQoZS5ib3JkZXJSaWdodFdpZHRoKSksaT1cImJvcmRlci1ib3hcIiE9PW4uY3NzKFwiYm94LXNpemluZ1wiKT90LShuLm91dGVyV2lkdGgoKS1uLndpZHRoKCkpOnQsbi5jc3Moe2ZvbnRGYW1pbHk6ci5jc3MoXCJmb250LWZhbWlseVwiKSx3aWR0aDppfSkuZGF0YShrLGkpLCEwfSxfb3BlbkhhbmRsZXI6ZnVuY3Rpb24oZSl7dGhpcy5fYWRqdXN0TGlzdFdpZHRoKCksdGhpcy50cmlnZ2VyKG0pP2UucHJldmVudERlZmF1bHQoKToodGhpcy5fZm9jdXNlZC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLnVsLmF0dHIoXCJhcmlhLWhpZGRlblwiLCExKSl9LF9jbG9zZUhhbmRsZXI6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKHYpP2UucHJldmVudERlZmF1bHQoKToodGhpcy5fZm9jdXNlZC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSx0aGlzLnVsLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKSl9LF9maXJzdE9wZW46ZnVuY3Rpb24oKXt0aGlzLl9oZWlnaHQodGhpcy5fZGF0YSgpLmxlbmd0aCl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wb3B1cD1uZXcgci5Qb3B1cChlLmxpc3QseCh7fSxlLm9wdGlvbnMucG9wdXAse2FuY2hvcjplLndyYXBwZXIsb3BlbjpDKGUuX29wZW5IYW5kbGVyLGUpLGNsb3NlOkMoZS5fY2xvc2VIYW5kbGVyLGUpLGFuaW1hdGlvbjplLm9wdGlvbnMuYW5pbWF0aW9uLGlzUnRsOnMuaXNSdGwoZS53cmFwcGVyKX0pKSxlLnBvcHVwLm9uZShtLEMoZS5fZmlyc3RPcGVuLGUpKSxlLl90b3VjaFNjcm9sbGVyPWkudG91Y2hTY3JvbGxlcihlLnBvcHVwLmVsZW1lbnQpfSxfbWFrZVVuc2VsZWN0YWJsZTpmdW5jdGlvbigpe1QmJnRoaXMubGlzdC5maW5kKFwiKlwiKS5ub3QoXCIuay10ZXh0Ym94XCIpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKGYsXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfdG9nZ2xlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPXMudG91Y2gmJnMuTVNQb2ludGVycyYmcy5wb2ludGVycztlPWUhPT10P2U6IWkucG9wdXAudmlzaWJsZSgpLG58fHJ8fGkuX2ZvY3VzZWRbMF09PT1jKCl8fGkuX2ZvY3VzZWQuZm9jdXMoKSxpW2U/bTp2XSgpfSxfc2Nyb2xsOmZ1bmN0aW9uKGUpe2lmKGUpe2VbMF0mJihlPWVbMF0pO3ZhciB0LG4saT10aGlzLnVsWzBdLHI9ZS5vZmZzZXRUb3Asbz1lLm9mZnNldEhlaWdodCxhPWkuc2Nyb2xsVG9wLHM9aS5jbGllbnRIZWlnaHQsbD1yK28sYz10aGlzLl90b3VjaFNjcm9sbGVyO2M/KHQ9Yy5kaW1lbnNpb25zLnksdC5lbmFibGVkJiZyPnQuc2l6ZSYmKHI9ci10LnNpemUrbys0LGMuc2Nyb2xsVG8oMCwtcikpKToobj10aGlzLmhlYWRlcj90aGlzLmhlYWRlci5vdXRlckhlaWdodCgpOjAsbis9dGhpcy5maWx0ZXJJbnB1dD90aGlzLmZpbHRlcklucHV0Lm91dGVySGVpZ2h0KCk6MCxpLnNjcm9sbFRvcD1hPnI/ci1uOmw+YStzP2wtcy1uOmEpfX0sX3RlbXBsYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPXQudGVtcGxhdGUscj10LmRhdGFTb3VyY2U7ZS5faXNTZWxlY3QmJmUuZWxlbWVudFswXS5sZW5ndGgmJihyfHwodC5kYXRhVGV4dEZpZWxkPXQuZGF0YVRleHRGaWVsZHx8XCJ0ZXh0XCIsdC5kYXRhVmFsdWVGaWVsZD10LmRhdGFWYWx1ZUZpZWxkfHxcInZhbHVlXCIpKSxuPyhuPWkudGVtcGxhdGUobiksZS50ZW1wbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4nPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaXRlbVwiPicrbihlKStcIjwvbGk+XCJ9KTplLnRlbXBsYXRlPWkudGVtcGxhdGUoJzxsaSB0YWJpbmRleD1cIi0xXCIgcm9sZT1cIm9wdGlvblwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWl0ZW1cIj4keycraS5leHByKHQuZGF0YVRleHRGaWVsZCxcImRhdGFcIikrXCJ9PC9saT5cIix7dXNlV2l0aEJsb2NrOiExfSl9LF90cmlnZ2VyQ2FzY2FkZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC52YWx1ZSgpOyghdC5fYm91bmQmJm58fHQuX29sZCE9PW4pJiZ0LnRyaWdnZXIoXCJjYXNjYWRlXCIse3VzZXJUcmlnZ2VyZWQ6ZX0pfSxfdW5iaW5kRGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kYXRhU291cmNlLnVuYmluZChoLGUuX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQodyxlLl9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChiLGUuX3JlcXVlc3RFbmRIYW5kbGVyKS51bmJpbmQoXCJlcnJvclwiLGUuX2Vycm9ySGFuZGxlcil9fSk7eChFLHtpbkFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXQuY2hpbGRyZW47aWYoIWV8fGUucGFyZW50Tm9kZSE9PXQpcmV0dXJuLTE7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspaWYoZT09PXJbbl0pcmV0dXJuIG47cmV0dXJuLTF9fSksaS51aS5MaXN0PUUsci5TZWxlY3Q9RS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtFLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5faW5pdGlhbD10aGlzLmVsZW1lbnQudmFsKCl9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5fYm91bmQ9ITEsdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZ0aGlzLmRhdGFTb3VyY2UuZmV0Y2goKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmNsb3NlKCl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLnNlbGVjdGVkSW5kZXg6KG4uX3NlbGVjdChlKSxuLl90cmlnZ2VyQ2FzY2FkZSgpLG4uX29sZD1uLl9hY2Nlc3NvcigpLG4uX29sZEluZGV4PW4uc2VsZWN0ZWRJbmRleCx0KX0sc2VhcmNoOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYTtlPVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6dGhpcy50ZXh0KCksdD10aGlzLG49ZS5sZW5ndGgsaT10Lm9wdGlvbnMscj1pLmlnbm9yZUNhc2Usbz1pLmZpbHRlcixhPWkuZGF0YVRleHRGaWVsZCxjbGVhclRpbWVvdXQodC5fdHlwaW5nKSwoIW58fG4+PWkubWluTGVuZ3RoKSYmKHQuX3N0YXRlPVwiZmlsdGVyXCIsXCJub25lXCI9PT1vP3QuX2ZpbHRlcihlKToodC5fb3Blbj0hMCx0Ll9maWx0ZXJTb3VyY2Uoe3ZhbHVlOnI/ZS50b0xvd2VyQ2FzZSgpOmUsZmllbGQ6YSxvcGVyYXRvcjpvLGlnbm9yZUNhc2U6cn0pKSl9LF9hY2Nlc3NvcjpmdW5jdGlvbihlLG4pe3ZhciBpLHI9dGhpcy5lbGVtZW50WzBdLG89dGhpcy5faXNTZWxlY3QsYT1yLnNlbGVjdGVkSW5kZXg7cmV0dXJuIGU9PT10PyhvP2E+LTEmJihpPXIub3B0aW9uc1thXSxpJiYoZT1pLnZhbHVlKSk6ZT1yLnZhbHVlLGUpOihvPyhhPi0xJiZyLm9wdGlvbnNbYV0ucmVtb3ZlQXR0cmlidXRlKHkpLHIuc2VsZWN0ZWRJbmRleD1uLGk9ci5vcHRpb25zW25dLGkmJmkuc2V0QXR0cmlidXRlKHkseSkpOnIudmFsdWU9ZSx0KX0sX2hpZGVCdXN5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQoZS5fYnVzeSksZS5fYXJyb3cucmVtb3ZlQ2xhc3MoZyksZS5fZm9jdXNlZC5hdHRyKFwiYXJpYS1idXN5XCIsITEpLGUuX2J1c3k9bnVsbH0sX3Nob3dCdXN5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZXF1ZXN0PSEwLGUuX2J1c3l8fChlLl9idXN5PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9hcnJvdyYmKGUuX2ZvY3VzZWQuYXR0cihcImFyaWEtYnVzeVwiLCEwKSxlLl9hcnJvdy5hZGRDbGFzcyhnKSl9LDEwMCkpfSxfcmVxdWVzdEVuZDpmdW5jdGlvbigpe3RoaXMuX3JlcXVlc3Q9ITF9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9bi5lbGVtZW50LG89bi5vcHRpb25zLGE9by5kYXRhU291cmNlfHx7fTthPWUuaXNBcnJheShhKT97ZGF0YTphfTphLG4uX2lzU2VsZWN0JiYodD1yWzBdLnNlbGVjdGVkSW5kZXgsdD4tMSYmKG8uaW5kZXg9dCksYS5zZWxlY3Q9cixhLmZpZWxkcz1be2ZpZWxkOm8uZGF0YVRleHRGaWVsZH0se2ZpZWxkOm8uZGF0YVZhbHVlRmllbGR9XSksbi5kYXRhU291cmNlJiZuLl9yZWZyZXNoSGFuZGxlcj9uLl91bmJpbmREYXRhU291cmNlKCk6KG4uX3JlZnJlc2hIYW5kbGVyPUMobi5yZWZyZXNoLG4pLG4uX3Byb2dyZXNzSGFuZGxlcj1DKG4uX3Nob3dCdXN5LG4pLG4uX3JlcXVlc3RFbmRIYW5kbGVyPUMobi5fcmVxdWVzdEVuZCxuKSxuLl9lcnJvckhhbmRsZXI9QyhuLl9oaWRlQnVzeSxuKSksbi5kYXRhU291cmNlPWkuZGF0YS5EYXRhU291cmNlLmNyZWF0ZShhKS5iaW5kKGgsbi5fcmVmcmVzaEhhbmRsZXIpLmJpbmQodyxuLl9wcm9ncmVzc0hhbmRsZXIpLmJpbmQoYixuLl9yZXF1ZXN0RW5kSGFuZGxlcikuYmluZChcImVycm9yXCIsbi5fZXJyb3JIYW5kbGVyKX0sX2dldDpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPXIuX2RhdGEoKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KWZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlmKHQob1tuXSkpe3Q9bjticmVha31pZihcIm51bWJlclwiPT10eXBlb2YgdCl7aWYoMD50KXJldHVybiBlKCk7dD1lKHIudWxbMF0uY2hpbGRyZW5bdF0pfXJldHVybiB0JiZ0Lm5vZGVUeXBlJiYodD1lKHQpKSx0fSxfbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPWUua2V5Q29kZSxvPWkudWxbMF0scz1pLnBvcHVwLnZpc2libGUoKT9cIl9zZWxlY3RcIjpcIl9hY2NlcHRcIixsPWkuX2N1cnJlbnQsYz1yPT09YS5ET1dOO2lmKHI9PT1hLlVQfHxjKXtpZihlLmFsdEtleSlpLnRvZ2dsZShjKTtlbHNle2lmKHQ9by5maXJzdENoaWxkLCF0JiYhaS5fYWNjZXNzb3IoKSYmXCJmaWx0ZXJcIiE9PWkuX3N0YXRlKXJldHVybiBpLl9mZXRjaHx8KGkuZGF0YVNvdXJjZS5vbmUoaCxmdW5jdGlvbigpe2kuX21vdmUoZSksaS5fZmV0Y2g9ITF9KSxpLl9mZXRjaD0hMCxpLl9maWx0ZXJTb3VyY2UoKSksZS5wcmV2ZW50RGVmYXVsdCgpLCEwO2M/KCFsfHwtMT09PWkuc2VsZWN0ZWRJbmRleCYmIWkudmFsdWUoKSYmbFswXT09PXQ/bD10OihsPWxbMF0ubmV4dFNpYmxpbmcsbHx8dCE9PW8ubGFzdENoaWxkfHwobD10KSksaVtzXShsKSk6KGw9bD9sWzBdLnByZXZpb3VzU2libGluZzpvLmxhc3RDaGlsZCxsfHx0IT09by5sYXN0Q2hpbGR8fChsPXQpLGlbc10obCkpfWUucHJldmVudERlZmF1bHQoKSxuPSEwfWVsc2Ugcj09PWEuRU5URVJ8fHI9PT1hLlRBQj8oaS5wb3B1cC52aXNpYmxlKCkmJmUucHJldmVudERlZmF1bHQoKSxpLnBvcHVwLnZpc2libGUoKXx8bCYmbC5oYXNDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIil8fChsPW51bGwpLGkuX2FjY2VwdChsLHIpLG49ITApOnI9PT1hLkVTQyYmKGkucG9wdXAudmlzaWJsZSgpJiZlLnByZXZlbnREZWZhdWx0KCksaS5jbG9zZSgpLG49ITApO3JldHVybiBufSxfc2VsZWN0SXRlbTpmdW5jdGlvbigpe3ZhciBlLG4saT10aGlzLHI9aS5fYm91bmQ9PT10LG89aS5vcHRpb25zO2U9aS5faXNTZWxlY3QmJiFpLl9pbml0aWFsJiYhby52YWx1ZSYmby5pbmRleCYmIWkuX2JvdW5kLGV8fChuPWkuX3NlbGVjdGVkVmFsdWV8fHImJm8udmFsdWV8fGkuX2FjY2Vzc29yKCkpLG4/aS52YWx1ZShuKTpyJiZpLnNlbGVjdChvLmluZGV4KX0sX2ZldGNoSXRlbXM6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4udWxbMF0uZmlyc3RDaGlsZDtyZXR1cm4gbi5fcmVxdWVzdD8hMDpuLl9ib3VuZHx8bi5fZmV0Y2h8fGk/dDpuLm9wdGlvbnMuY2FzY2FkZUZyb20/IWk6KG4uZGF0YVNvdXJjZS5vbmUoaCxmdW5jdGlvbigpe24uX29sZD10LG4udmFsdWUoZSksbi5fZmV0Y2g9ITF9KSxuLl9mZXRjaD0hMCxuLmRhdGFTb3VyY2UuZmV0Y2goKSwhMCl9LF9vcHRpb25zOmZ1bmN0aW9uKGUsbil7dmFyIGkscixvLGEscz10aGlzLGM9cy5lbGVtZW50LGQ9ZS5sZW5ndGgsdT1cIlwiLGg9MDtmb3IobiYmKGg9MSx1PW4pO2Q+aDtoKyspaT1cIjxvcHRpb25cIixyPWVbaF0sbz1zLl90ZXh0KHIpLGE9cy5fdmFsdWUociksYSE9PXQmJihhKz1cIlwiLC0xIT09YS5pbmRleE9mKCdcIicpJiYoYT1hLnJlcGxhY2UoRCxcIiZxdW90O1wiKSksaSs9JyB2YWx1ZT1cIicrYSsnXCInKSxpKz1cIj5cIixvIT09dCYmKGkrPWwobykpLGkrPVwiPC9vcHRpb24+XCIsdSs9aTtjLmh0bWwodSl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnZhbHVlKHQuX2luaXRpYWwpfSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9LF9jYXNjYWRlOmZ1bmN0aW9uKCl7dmFyIHQsaSxyLG8sYSxzPXRoaXMsbD1zLm9wdGlvbnMsYz1sLmNhc2NhZGVGcm9tO2lmKGMpe2lmKHMuX3NlbGVjdGVkVmFsdWU9bC52YWx1ZXx8cy5fYWNjZXNzb3IoKSxpPWUoXCIjXCIrYyksdD1pLmRhdGEoXCJrZW5kb1wiK2wubmFtZSksdHx8KHQ9aS5kYXRhKFwia2VuZG9cIitBW2wubmFtZV0pKSwhdClyZXR1cm47bC5hdXRvQmluZD0hMSxvPWwuY2FzY2FkZUZyb21GaWVsZHx8dC5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkLGE9ZnVuY3Rpb24oKXtzLmRhdGFTb3VyY2UudW5iaW5kKGgsYSk7dmFyIGU9cy5fc2VsZWN0ZWRWYWx1ZXx8cy52YWx1ZSgpO3MuX3VzZXJUcmlnZ2VyZWQ/cy5fY2xlYXJTZWxlY3Rpb24odCwhMCk6ZT8ocy52YWx1ZShlKSxzLmRhdGFTb3VyY2UudmlldygpWzBdJiYtMSE9PXMuc2VsZWN0ZWRJbmRleHx8cy5fY2xlYXJTZWxlY3Rpb24odCwhMCkpOnMuc2VsZWN0KGwuaW5kZXgpLHMuZW5hYmxlKCkscy5fdHJpZ2dlckNhc2NhZGUocy5fdXNlclRyaWdnZXJlZCkscy5fdXNlclRyaWdnZXJlZD0hMX0scj1mdW5jdGlvbigpe3ZhciBlLGkscixsPXQuZGF0YUl0ZW0oKSxjPWw/dC5fdmFsdWUobCk6bnVsbDtjfHwwPT09Yz8oZT1zLmRhdGFTb3VyY2UuZmlsdGVyKCl8fHt9LG4oZSxvKSxpPWUuZmlsdGVyc3x8W10saS5wdXNoKHtmaWVsZDpvLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTpjfSkscj1mdW5jdGlvbigpe3MudW5iaW5kKFwiZGF0YUJvdW5kXCIsciksYS5hcHBseShzLGFyZ3VtZW50cyl9LHMuZmlyc3QoXCJkYXRhQm91bmRcIixyKSxzLmRhdGFTb3VyY2UuZmlsdGVyKGkpKToocy5lbmFibGUoITEpLHMuX2NsZWFyU2VsZWN0aW9uKHQpLHMuX3RyaWdnZXJDYXNjYWRlKHMuX3VzZXJUcmlnZ2VyZWQpLHMuX3VzZXJUcmlnZ2VyZWQ9ITEpfSx0LmZpcnN0KFwiY2FzY2FkZVwiLGZ1bmN0aW9uKGUpe3MuX3VzZXJUcmlnZ2VyZWQ9ZS51c2VyVHJpZ2dlcmVkLHIoKX0pLHQuX2JvdW5kP3IoKTp0LnZhbHVlKCl8fHMuZW5hYmxlKCExKX19fSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpKXt2YXIgcixvPWUuZ2V0RnVsbFllYXIoKSxhPXQuZ2V0RnVsbFllYXIoKSxzPW4uZ2V0RnVsbFllYXIoKTtyZXR1cm4gby09byVpLHI9bysoaS0xKSxhPm8mJihvPWEpLHI+cyYmKHI9cyksbytcIi1cIityfWZ1bmN0aW9uIGkoZSl7Zm9yKHZhciB0LG49MCxpPWUubWluLHI9ZS5tYXgsbz1lLnN0YXJ0LGE9ZS5zZXR0ZXIsbD1lLmJ1aWxkLGM9ZS5jZWxsc3x8MTIsZD1lLnBlclJvd3x8NCx1PWUuY29udGVudHx8UCxoPWUuZW1wdHl8fEkscD1lLmh0bWx8fCc8dGFibGUgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImdyaWRcIiBjbGFzcz1cImstY29udGVudCBrLW1ldGEtdmlld1wiIGNlbGxzcGFjaW5nPVwiMFwiPjx0Ym9keT48dHIgcm9sZT1cInJvd1wiPic7Yz5uO24rKyluPjAmJm4lZD09PTAmJihwKz0nPC90cj48dHIgcm9sZT1cInJvd1wiPicpLHQ9bChvLG4pLHArPXMobyxpLHIpP3UodCk6aCh0KSxhKG8sMSk7cmV0dXJuIHArXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIn1mdW5jdGlvbiByKGUsdCxuKXt2YXIgaT1lLmdldEZ1bGxZZWFyKCkscj10LmdldEZ1bGxZZWFyKCksbz1yLGE9MDtyZXR1cm4gbiYmKHItPXIlbixvPXItciVuK24tMSksaT5vP2E9MTpyPmkmJihhPS0xKSxhfWZ1bmN0aW9uIG8oKXt2YXIgZT1uZXcgZnQ7cmV0dXJuIG5ldyBmdChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKX1mdW5jdGlvbiBhKGUsdCxuKXt2YXIgaT1vKCk7cmV0dXJuIGUmJihpPW5ldyBmdCgrZSkpLHQ+aT9pPW5ldyBmdCgrdCk6aT5uJiYoaT1uZXcgZnQoK24pKSxpfWZ1bmN0aW9uIHMoZSx0LG4pe3JldHVybitlPj0rdCYmK24+PStlfWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gZS5zbGljZSh0KS5jb25jYXQoZS5zbGljZSgwLHQpKX1mdW5jdGlvbiBjKGUsdCxuKXt0PXQgaW5zdGFuY2VvZiBmdD90LmdldEZ1bGxZZWFyKCk6ZS5nZXRGdWxsWWVhcigpK24qdCxlLnNldEZ1bGxZZWFyKHQpfWZ1bmN0aW9uIGQodCl7ZSh0aGlzKS50b2dnbGVDbGFzcygkLGl0LmluZGV4T2YodC50eXBlKT4tMXx8dC50eXBlPT10dCl9ZnVuY3Rpb24gdShlKXtlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gQShlKS5jYWxlbmRhcnMuc3RhbmRhcmR9ZnVuY3Rpb24gcChlKXt2YXIgbj1ndFtlLnN0YXJ0XSxpPWd0W2UuZGVwdGhdLHI9QShlLmN1bHR1cmUpO2UuZm9ybWF0PVQoZS5mb3JtYXR8fHIuY2FsZW5kYXJzLnN0YW5kYXJkLnBhdHRlcm5zLmQpLGlzTmFOKG4pJiYobj0wLGUuc3RhcnQ9VSksKGk9PT10fHxpPm4pJiYoZS5kZXB0aD1VKSxlLmRhdGVzfHwoZS5kYXRlcz1bXSl9ZnVuY3Rpb24gZihlKXtGJiZlLmZpbmQoXCIqXCIpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfWZ1bmN0aW9uIGcoZSx0KXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO2k+bjtuKyspaWYoZT09PSt0W25dKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm4gZT9lLmdldEZ1bGxZZWFyKCk9PT10LmdldEZ1bGxZZWFyKCkmJmUuZ2V0TW9udGgoKT09PXQuZ2V0TW9udGgoKSYmZS5nZXREYXRlKCk9PT10LmdldERhdGUoKTohMX1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIGU/ZS5nZXRGdWxsWWVhcigpPT09dC5nZXRGdWxsWWVhcigpJiZlLmdldE1vbnRoKCk9PT10LmdldE1vbnRoKCk6ITF9dmFyIF8seT13aW5kb3cua2VuZG8sdz15LnN1cHBvcnQsYj15LnVpLGs9Yi5XaWRnZXQseD15LmtleXMsQz15LnBhcnNlRGF0ZSxTPXkuZGF0ZS5hZGp1c3REU1QsVD15Ll9leHRyYWN0Rm9ybWF0LEQ9eS50ZW1wbGF0ZSxBPXkuZ2V0Q3VsdHVyZSxFPXkuc3VwcG9ydC50cmFuc2l0aW9ucyxNPUU/RS5jc3MrXCJ0cmFuc2Zvcm0tb3JpZ2luXCI6XCJcIixQPUQoJzx0ZCM9ZGF0YS5jc3NDbGFzcyMgcm9sZT1cImdyaWRjZWxsXCI+PGEgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwiay1saW5rXCIgaHJlZj1cIlxcXFwjXCIgZGF0YS0jPWRhdGEubnMjdmFsdWU9XCIjPWRhdGEuZGF0ZVN0cmluZyNcIj4jPWRhdGEudmFsdWUjPC9hPjwvdGQ+Jyx7dXNlV2l0aEJsb2NrOiExfSksST1EKCc8dGQgcm9sZT1cImdyaWRjZWxsXCI+Jm5ic3A7PC90ZD4nLHt1c2VXaXRoQmxvY2s6ITF9KSx6PXkuc3VwcG9ydC5icm93c2VyLEY9ei5tc2llJiY5PnoudmVyc2lvbixSPVwiLmtlbmRvQ2FsZW5kYXJcIixCPVwiY2xpY2tcIitSLEw9XCJrZXlkb3duXCIrUixPPVwiaWRcIixIPVwibWluXCIsTj1cImxlZnRcIixWPVwic2xpZGVJblwiLFU9XCJtb250aFwiLFc9XCJjZW50dXJ5XCIsaj1cImNoYW5nZVwiLEc9XCJuYXZpZ2F0ZVwiLHE9XCJ2YWx1ZVwiLCQ9XCJrLXN0YXRlLWhvdmVyXCIsWT1cImstc3RhdGUtZGlzYWJsZWRcIixLPVwiay1zdGF0ZS1mb2N1c2VkXCIsUT1cImstb3RoZXItbW9udGhcIixYPScgY2xhc3M9XCInK1ErJ1wiJyxKPVwiay1uYXYtdG9kYXlcIixaPVwidGQ6aGFzKC5rLWxpbmspXCIsZXQ9XCJibHVyXCIrUix0dD1cImZvY3VzXCIsbnQ9dHQrUixpdD13LnRvdWNoP1widG91Y2hzdGFydFwiOlwibW91c2VlbnRlclwiLHJ0PXcudG91Y2g/XCJ0b3VjaHN0YXJ0XCIrUjpcIm1vdXNlZW50ZXJcIitSLG90PXcudG91Y2g/XCJ0b3VjaGVuZFwiK1IrXCIgdG91Y2htb3ZlXCIrUjpcIm1vdXNlbGVhdmVcIitSLGF0PTZlNCxzdD04NjRlNSxsdD1cIl9wcmV2QXJyb3dcIixjdD1cIl9uZXh0QXJyb3dcIixkdD1cImFyaWEtZGlzYWJsZWRcIix1dD1cImFyaWEtc2VsZWN0ZWRcIixodD1lLnByb3h5LHB0PWUuZXh0ZW5kLGZ0PURhdGUsZ3Q9e21vbnRoOjAseWVhcjoxLGRlY2FkZToyLGNlbnR1cnk6M30sbXQ9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89dGhpcztrLmZuLmluaXQuY2FsbChvLHQsbiksdD1vLndyYXBwZXI9by5lbGVtZW50LG49by5vcHRpb25zLG4udXJsPXdpbmRvdy51bmVzY2FwZShuLnVybCksby5fdGVtcGxhdGVzKCksby5faGVhZGVyKCksby5fZm9vdGVyKG8uZm9vdGVyKSxyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWNhbGVuZGFyXCIpLm9uKHJ0K1wiIFwiK290LFosZCkub24oTCxcInRhYmxlLmstY29udGVudFwiLGh0KG8uX21vdmUsbykpLm9uKEIsWixmdW5jdGlvbih0KXt2YXIgbj10LmN1cnJlbnRUYXJnZXQuZmlyc3RDaGlsZDstMSE9bi5ocmVmLmluZGV4T2YoXCIjXCIpJiZ0LnByZXZlbnREZWZhdWx0KCksby5fY2xpY2soZShuKSl9KS5vbihcIm1vdXNldXBcIitSLFwidGFibGUuay1jb250ZW50LCAuay1mb290ZXJcIixmdW5jdGlvbigpe28uX2ZvY3VzVmlldyhvLm9wdGlvbnMuZm9jdXNPbk5hdiE9PSExKX0pLmF0dHIoTyksciYmKG8uX2NlbGxJRD1yK1wiX2NlbGxfc2VsZWN0ZWRcIikscChuKSxpPUMobi52YWx1ZSxuLmZvcm1hdCxuLmN1bHR1cmUpLG8uX2luZGV4PWd0W24uc3RhcnRdLG8uX2N1cnJlbnQ9bmV3IGZ0KCthKGksbi5taW4sbi5tYXgpKSxvLl9hZGRDbGFzc1Byb3h5PWZ1bmN0aW9uKCl7by5fYWN0aXZlPSEwLG8uX2NlbGwuYWRkQ2xhc3MoSyl9LG8uX3JlbW92ZUNsYXNzUHJveHk9ZnVuY3Rpb24oKXtvLl9hY3RpdmU9ITEsby5fY2VsbC5yZW1vdmVDbGFzcyhLKX0sby52YWx1ZShpKSx5Lm5vdGlmeShvKX0sb3B0aW9uczp7bmFtZTpcIkNhbGVuZGFyXCIsdmFsdWU6bnVsbCxtaW46bmV3IGZ0KDE5MDAsMCwxKSxtYXg6bmV3IGZ0KDIwOTksMTEsMzEpLGRhdGVzOltdLHVybDpcIlwiLGN1bHR1cmU6XCJcIixmb290ZXI6XCJcIixmb3JtYXQ6XCJcIixtb250aDp7fSxzdGFydDpVLGRlcHRoOlUsYW5pbWF0aW9uOntob3Jpem9udGFsOntlZmZlY3RzOlYscmV2ZXJzZTohMCxkdXJhdGlvbjo1MDAsZGl2aXNvcjoyfSx2ZXJ0aWNhbDp7ZWZmZWN0czpcInpvb21JblwiLGR1cmF0aW9uOjQwMH19fSxldmVudHM6W2osR10sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3AoZSksZS5kYXRlc1swXXx8KGUuZGF0ZXM9dC5vcHRpb25zLmRhdGVzKSxrLmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpLHQuX3RlbXBsYXRlcygpLHQuX2Zvb3Rlcih0LmZvb3RlciksdC5faW5kZXg9Z3RbdC5vcHRpb25zLnN0YXJ0XSx0Lm5hdmlnYXRlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fdG9kYXk7ZS5lbGVtZW50Lm9mZihSKSxlLl90aXRsZS5vZmYoUiksZVtsdF0ub2ZmKFIpLGVbY3RdLm9mZihSKSx5LmRlc3Ryb3koZS5fdGFibGUpLHQmJnkuZGVzdHJveSh0Lm9mZihSKSksay5mbi5kZXN0cm95LmNhbGwoZSl9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudH0sdmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aWV3fSxmb2N1czpmdW5jdGlvbihlKXtlPWV8fHRoaXMuX3RhYmxlLHRoaXMuX2JpbmRUYWJsZShlKSxlLmZvY3VzKCl9LG1pbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKEgsZSl9LG1heDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb3B0aW9uKFwibWF4XCIsZSl9LG5hdmlnYXRlVG9QYXN0OmZ1bmN0aW9uKCl7dGhpcy5fbmF2aWdhdGUobHQsLTEpfSxuYXZpZ2F0ZVRvRnV0dXJlOmZ1bmN0aW9uKCl7dGhpcy5fbmF2aWdhdGUoY3QsMSl9LG5hdmlnYXRlVXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5faW5kZXg7ZS5fdGl0bGUuaGFzQ2xhc3MoWSl8fGUubmF2aWdhdGUoZS5fY3VycmVudCwrK3QpfSxuYXZpZ2F0ZURvd246ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2luZGV4LHI9bi5vcHRpb25zLmRlcHRoO2lmKGUpcmV0dXJuIGk9PT1ndFtyXT8oK24uX3ZhbHVlIT0rZSYmKG4udmFsdWUoZSksbi50cmlnZ2VyKGopKSx0KToobi5uYXZpZ2F0ZShlLC0taSksdCl9LG5hdmlnYXRlOmZ1bmN0aW9uKG4saSl7aT1pc05hTihpKT9ndFtpXTppO3ZhciByLG8scyxsLGM9dGhpcyxkPWMub3B0aW9ucyx1PWQuY3VsdHVyZSxoPWQubWluLHA9ZC5tYXgsZz1jLl90aXRsZSxtPWMuX3RhYmxlLHY9Yy5fb2xkVGFibGUseT1jLl92YWx1ZSx3PWMuX2N1cnJlbnQsYj1uJiYrbj4rdyxrPWkhPT10JiZpIT09Yy5faW5kZXg7bnx8KG49dyksYy5fY3VycmVudD1uPW5ldyBmdCgrYShuLGgscCkpLGk9PT10P2k9Yy5faW5kZXg6Yy5faW5kZXg9aSxjLl92aWV3PW89Xy52aWV3c1tpXSxzPW8uY29tcGFyZSxsPWk9PT1ndFtXXSxnLnRvZ2dsZUNsYXNzKFksbCkuYXR0cihkdCxsKSxsPXMobixoKTwxLGNbbHRdLnRvZ2dsZUNsYXNzKFksbCkuYXR0cihkdCxsKSxsPXMobixwKT4tMSxjW2N0XS50b2dnbGVDbGFzcyhZLGwpLmF0dHIoZHQsbCksbSYmdiYmdi5kYXRhKFwiYW5pbWF0aW5nXCIpJiYodi5rZW5kb1N0b3AoITAsITApLG0ua2VuZG9TdG9wKCEwLCEwKSksYy5fb2xkVGFibGU9bSwoIW18fGMuX2NoYW5nZVZpZXcpJiYoZy5odG1sKG8udGl0bGUobixoLHAsdSkpLGMuX3RhYmxlPXI9ZShvLmNvbnRlbnQocHQoe21pbjpoLG1heDpwLGRhdGU6bix1cmw6ZC51cmwsZGF0ZXM6ZC5kYXRlcyxmb3JtYXQ6ZC5mb3JtYXQsY3VsdHVyZTp1fSxjW28ubmFtZV0pKSksZihyKSxjLl9hbmltYXRlKHtmcm9tOm0sdG86cix2ZXJ0aWNhbDprLGZ1dHVyZTpifSksYy5fZm9jdXMobiksYy50cmlnZ2VyKEcpKSxpPT09Z3RbZC5kZXB0aF0mJnkmJmMuX2NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiLG8udG9EYXRlU3RyaW5nKHkpKSxjLl9jbGFzcyhLLG8udG9EYXRlU3RyaW5nKG4pKSwhbSYmYy5fY2VsbCYmYy5fY2VsbC5yZW1vdmVDbGFzcyhLKSxjLl9jaGFuZ2VWaWV3PSEwfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fdmlldyxyPW4ub3B0aW9ucyxvPW4uX3ZpZXcsYT1yLm1pbixsPXIubWF4O3JldHVybiBlPT09dD9uLl92YWx1ZTooZT1DKGUsci5mb3JtYXQsci5jdWx0dXJlKSxudWxsIT09ZSYmKGU9bmV3IGZ0KCtlKSxzKGUsYSxsKXx8KGU9bnVsbCkpLG4uX3ZhbHVlPWUsbyYmbnVsbD09PWUmJm4uX2NlbGw/bi5fY2VsbC5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIik6KG4uX2NoYW5nZVZpZXc9IWV8fGkmJjAhPT1pLmNvbXBhcmUoZSxuLl9jdXJyZW50KSxuLm5hdmlnYXRlKGUpKSx0KX0sX21vdmU6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8scz10aGlzLGw9cy5vcHRpb25zLGM9dC5rZXlDb2RlLGQ9cy5fdmlldyx1PXMuX2luZGV4LGg9bmV3IGZ0KCtzLl9jdXJyZW50KSxwPXkuc3VwcG9ydC5pc1J0bChzLndyYXBwZXIpO3JldHVybiB0LnRhcmdldD09PXMuX3RhYmxlWzBdJiYocy5fYWN0aXZlPSEwKSx0LmN0cmxLZXk/Yz09eC5SSUdIVCYmIXB8fGM9PXguTEVGVCYmcD8ocy5uYXZpZ2F0ZVRvRnV0dXJlKCksaT0hMCk6Yz09eC5MRUZUJiYhcHx8Yz09eC5SSUdIVCYmcD8ocy5uYXZpZ2F0ZVRvUGFzdCgpLGk9ITApOmM9PXguVVA/KHMubmF2aWdhdGVVcCgpLGk9ITApOmM9PXguRE9XTiYmKHMuX2NsaWNrKGUocy5fY2VsbFswXS5maXJzdENoaWxkKSksaT0hMCk6KGM9PXguUklHSFQmJiFwfHxjPT14LkxFRlQmJnA/KG49MSxpPSEwKTpjPT14LkxFRlQmJiFwfHxjPT14LlJJR0hUJiZwPyhuPS0xLGk9ITApOmM9PXguVVA/KG49MD09PXU/LTc6LTQsaT0hMCk6Yz09eC5ET1dOPyhuPTA9PT11Pzc6NCxpPSEwKTpjPT14LkVOVEVSPyhzLl9jbGljayhlKHMuX2NlbGxbMF0uZmlyc3RDaGlsZCkpLGk9ITApOmM9PXguSE9NRXx8Yz09eC5FTkQ/KHI9Yz09eC5IT01FP1wiZmlyc3RcIjpcImxhc3RcIixvPWRbcl0oaCksaD1uZXcgZnQoby5nZXRGdWxsWWVhcigpLG8uZ2V0TW9udGgoKSxvLmdldERhdGUoKSxoLmdldEhvdXJzKCksaC5nZXRNaW51dGVzKCksaC5nZXRTZWNvbmRzKCksaC5nZXRNaWxsaXNlY29uZHMoKSksaT0hMCk6Yz09eC5QQUdFVVA/KGk9ITAscy5uYXZpZ2F0ZVRvUGFzdCgpKTpjPT14LlBBR0VET1dOJiYoaT0hMCxzLm5hdmlnYXRlVG9GdXR1cmUoKSksKG58fHIpJiYocnx8ZC5zZXREYXRlKGgsbikscy5fZm9jdXMoYShoLGwubWluLGwubWF4KSkpKSxpJiZ0LnByZXZlbnREZWZhdWx0KCkscy5fY3VycmVudH0sX2FuaW1hdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZnJvbSxpPWUudG8scj10Ll9hY3RpdmU7bj9uLnBhcmVudCgpLmRhdGEoXCJhbmltYXRpbmdcIik/KG4ub2ZmKFIpLG4ucGFyZW50KCkua2VuZG9TdG9wKCEwLCEwKS5yZW1vdmUoKSxuLnJlbW92ZSgpLGkuaW5zZXJ0QWZ0ZXIodC5lbGVtZW50WzBdLmZpcnN0Q2hpbGQpLHQuX2ZvY3VzVmlldyhyKSk6bi5pcyhcIjp2aXNpYmxlXCIpJiZ0Lm9wdGlvbnMuYW5pbWF0aW9uIT09ITE/dFtlLnZlcnRpY2FsP1wiX3ZlcnRpY2FsXCI6XCJfaG9yaXpvbnRhbFwiXShuLGksZS5mdXR1cmUpOihpLmluc2VydEFmdGVyKG4pLG4ub2ZmKFIpLnJlbW92ZSgpLHQuX2ZvY3VzVmlldyhyKSk6KGkuaW5zZXJ0QWZ0ZXIodC5lbGVtZW50WzBdLmZpcnN0Q2hpbGQpLHQuX2JpbmRUYWJsZShpKSl9LF9ob3Jpem9udGFsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9aS5fYWN0aXZlLG89aS5vcHRpb25zLmFuaW1hdGlvbi5ob3Jpem9udGFsLGE9by5lZmZlY3RzLHM9ZS5vdXRlcldpZHRoKCk7YSYmLTEhPWEuaW5kZXhPZihWKSYmKGUuYWRkKHQpLmNzcyh7d2lkdGg6c30pLGUud3JhcChcIjxkaXYvPlwiKSxpLl9mb2N1c1ZpZXcocixlKSxlLnBhcmVudCgpLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHdpZHRoOjIqcyxcImZsb2F0XCI6TixcIm1hcmdpbi1sZWZ0XCI6bj8wOi1zfSksdFtuP1wiaW5zZXJ0QWZ0ZXJcIjpcImluc2VydEJlZm9yZVwiXShlKSxwdChvLHtlZmZlY3RzOlYrXCI6XCIrKG4/XCJyaWdodFwiOk4pLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5vZmYoUikucmVtb3ZlKCksaS5fb2xkVGFibGU9bnVsbCx0LnVud3JhcCgpLGkuX2ZvY3VzVmlldyhyKX19KSxlLnBhcmVudCgpLmtlbmRvU3RvcCghMCwhMCkua2VuZG9BbmltYXRlKG8pKX0sX3ZlcnRpY2FsOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1yLm9wdGlvbnMuYW5pbWF0aW9uLnZlcnRpY2FsLGE9by5lZmZlY3RzLHM9ci5fYWN0aXZlO2EmJi0xIT1hLmluZGV4T2YoXCJ6b29tXCIpJiYodC5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6ZS5wcmV2KCkub3V0ZXJIZWlnaHQoKSxsZWZ0OjB9KS5pbnNlcnRCZWZvcmUoZSksTSYmKG49ci5fY2VsbEJ5RGF0ZShyLl92aWV3LnRvRGF0ZVN0cmluZyhyLl9jdXJyZW50KSksaT1uLnBvc2l0aW9uKCksaT1pLmxlZnQrcGFyc2VJbnQobi53aWR0aCgpLzIsMTApK1wicHggXCIrKGkudG9wK3BhcnNlSW50KG4uaGVpZ2h0KCkvMiwxMCkrXCJweFwiKSx0LmNzcyhNLGkpKSxlLmtlbmRvU3RvcCghMCwhMCkua2VuZG9BbmltYXRlKHtlZmZlY3RzOlwiZmFkZU91dFwiLGR1cmF0aW9uOjYwMCxjb21wbGV0ZTpmdW5jdGlvbigpe2Uub2ZmKFIpLnJlbW92ZSgpLHIuX29sZFRhYmxlPW51bGwsdC5jc3Moe3Bvc2l0aW9uOlwic3RhdGljXCIsdG9wOjAsbGVmdDowfSksci5fZm9jdXNWaWV3KHMpfX0pLHQua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUobykpfSxfY2VsbEJ5RGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGFibGUuZmluZChcInRkOm5vdCguXCIrUStcIilcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcy5maXJzdENoaWxkKS5hdHRyKHkuYXR0cihxKSk9PT10fSl9LF9jbGFzczpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMscj1pLl9jZWxsSUQsbz1pLl9jZWxsO1xubyYmby5yZW1vdmVBdHRyKHV0KS5yZW1vdmVBdHRyKFwiYXJpYS1sYWJlbFwiKS5yZW1vdmVBdHRyKE8pLG89aS5fdGFibGUuZmluZChcInRkOm5vdCguXCIrUStcIilcIikucmVtb3ZlQ2xhc3ModCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcy5maXJzdENoaWxkKS5hdHRyKHkuYXR0cihxKSk9PT1ufSkuYXR0cih1dCwhMCksdCE9PUt8fGkuX2FjdGl2ZXx8aS5vcHRpb25zLmZvY3VzT25OYXY9PT0hMXx8KHQ9XCJcIiksby5hZGRDbGFzcyh0KSxvWzBdJiYoaS5fY2VsbD1vKSxyJiYoby5hdHRyKE8sciksaS5fdGFibGUucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpfSxfYmluZFRhYmxlOmZ1bmN0aW9uKGUpe2Uub24obnQsdGhpcy5fYWRkQ2xhc3NQcm94eSkub24oZXQsdGhpcy5fcmVtb3ZlQ2xhc3NQcm94eSl9LF9jbGljazpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9bmV3IERhdGUoK3QuX2N1cnJlbnQpLHI9ZS5hdHRyKHkuYXR0cihxKSkuc3BsaXQoXCIvXCIpO3I9bmV3IGZ0KHJbMF0sclsxXSxyWzJdKSxTKHIsMCksdC5fdmlldy5zZXREYXRlKGksciksdC5uYXZpZ2F0ZURvd24oYShpLG4ubWluLG4ubWF4KSl9LF9mb2N1czpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fdmlldzswIT09bi5jb21wYXJlKGUsdC5fY3VycmVudCk/dC5uYXZpZ2F0ZShlKToodC5fY3VycmVudD1lLHQuX2NsYXNzKEssbi50b0RhdGVTdHJpbmcoZSkpKX0sX2ZvY3VzVmlldzpmdW5jdGlvbihlLHQpe2UmJnRoaXMuZm9jdXModCl9LF9mb290ZXI6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPW8oKSxhPWkuZWxlbWVudCxzPWEuZmluZChcIi5rLWZvb3RlclwiKTtyZXR1cm4gbj8oc1swXXx8KHM9ZSgnPGRpdiBjbGFzcz1cImstZm9vdGVyXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstbGluayBrLW5hdi10b2RheVwiPjwvYT48L2Rpdj4nKS5hcHBlbmRUbyhhKSksaS5fdG9kYXk9cy5zaG93KCkuZmluZChcIi5rLWxpbmtcIikuaHRtbChuKHIpKS5hdHRyKFwidGl0bGVcIix5LnRvU3RyaW5nKHIsXCJEXCIsaS5vcHRpb25zLmN1bHR1cmUpKSxpLl90b2dnbGUoKSx0KTooaS5fdG9nZ2xlKCExKSxzLmhpZGUoKSx0KX0sX2hlYWRlcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuZWxlbWVudDtuLmZpbmQoXCIuay1oZWFkZXJcIilbMF18fG4uaHRtbCgnPGRpdiBjbGFzcz1cImstaGVhZGVyXCI+PGEgaHJlZj1cIiNcIiByb2xlPVwiYnV0dG9uXCIgY2xhc3M9XCJrLWxpbmsgay1uYXYtcHJldlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPjwvYT48YSBocmVmPVwiI1wiIHJvbGU9XCJidXR0b25cIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiBjbGFzcz1cImstbGluayBrLW5hdi1mYXN0XCI+PC9hPjxhIGhyZWY9XCIjXCIgcm9sZT1cImJ1dHRvblwiIGNsYXNzPVwiay1saW5rIGstbmF2LW5leHRcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj48L2E+PC9kaXY+JyksZT1uLmZpbmQoXCIuay1saW5rXCIpLm9uKHJ0K1wiIFwiK290K1wiIFwiK250K1wiIFwiK2V0LGQpLmNsaWNrKCExKSx0Ll90aXRsZT1lLmVxKDEpLm9uKEIsZnVuY3Rpb24oKXt0Ll9hY3RpdmU9dC5vcHRpb25zLmZvY3VzT25OYXYhPT0hMSx0Lm5hdmlnYXRlVXAoKX0pLHRbbHRdPWUuZXEoMCkub24oQixmdW5jdGlvbigpe3QuX2FjdGl2ZT10Lm9wdGlvbnMuZm9jdXNPbk5hdiE9PSExLHQubmF2aWdhdGVUb1Bhc3QoKX0pLHRbY3RdPWUuZXEoMikub24oQixmdW5jdGlvbigpe3QuX2FjdGl2ZT10Lm9wdGlvbnMuZm9jdXNPbk5hdiE9PSExLHQubmF2aWdhdGVUb0Z1dHVyZSgpfSl9LF9uYXZpZ2F0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLl9pbmRleCsxLHI9bmV3IGZ0KCtuLl9jdXJyZW50KTtlPW5bZV0sZS5oYXNDbGFzcyhZKXx8KGk+Mz9yLnNldEZ1bGxZZWFyKHIuZ2V0RnVsbFllYXIoKSsxMDAqdCk6Xy52aWV3c1tpXS5zZXREYXRlKHIsdCksbi5uYXZpZ2F0ZShyKSl9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXMsbz1yLm9wdGlvbnMsYT1yLl92YWx1ZXx8ci5fY3VycmVudDtyZXR1cm4gbj09PXQ/b1tlXToobj1DKG4sby5mb3JtYXQsby5jdWx0dXJlKSxuJiYob1tlXT1uZXcgZnQoK24pLGk9ZT09PUg/bj5hOmE+biwoaXx8dihhLG4pKSYmKGkmJihyLl92YWx1ZT1udWxsKSxyLl9jaGFuZ2VWaWV3PSEwKSxyLl9jaGFuZ2VWaWV3fHwoci5fY2hhbmdlVmlldz0hKCFvLm1vbnRoLmNvbnRlbnQmJiFvLm1vbnRoLmVtcHR5KSksci5uYXZpZ2F0ZShyLl92YWx1ZSksci5fdG9nZ2xlKCkpLHQpfSxfdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1uLl90b2RheTtlPT09dCYmKGU9cyhvKCksaS5taW4saS5tYXgpKSxyJiYoci5vZmYoQiksZT9yLmFkZENsYXNzKEopLnJlbW92ZUNsYXNzKFkpLm9uKEIsaHQobi5fdG9kYXlDbGljayxuKSk6ci5yZW1vdmVDbGFzcyhKKS5hZGRDbGFzcyhZKS5vbihCLHUpKX0sX3RvZGF5Q2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWd0W3Qub3B0aW9ucy5kZXB0aF0saT1vKCk7ZS5wcmV2ZW50RGVmYXVsdCgpLDA9PT10Ll92aWV3LmNvbXBhcmUodC5fY3VycmVudCxpKSYmdC5faW5kZXg9PW4mJih0Ll9jaGFuZ2VWaWV3PSExKSx0Ll92YWx1ZT1pLHQubmF2aWdhdGUoaSxuKSx0LnRyaWdnZXIoail9LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49dC5mb290ZXIsaT10Lm1vbnRoLHI9aS5jb250ZW50LG89aS5lbXB0eTtlLm1vbnRoPXtjb250ZW50OkQoJzx0ZCM9ZGF0YS5jc3NDbGFzcyMgcm9sZT1cImdyaWRjZWxsXCI+PGEgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwiay1saW5rIz1kYXRhLmxpbmtDbGFzcyNcIiBocmVmPVwiIz1kYXRhLnVybCNcIiAnK3kuYXR0cihcInZhbHVlXCIpKyc9XCIjPWRhdGEuZGF0ZVN0cmluZyNcIiB0aXRsZT1cIiM9ZGF0YS50aXRsZSNcIj4nKyhyfHxcIiM9ZGF0YS52YWx1ZSNcIikrXCI8L2E+PC90ZD5cIix7dXNlV2l0aEJsb2NrOiEhcn0pLGVtcHR5OkQoJzx0ZCByb2xlPVwiZ3JpZGNlbGxcIj4nKyhvfHxcIiZuYnNwO1wiKStcIjwvdGQ+XCIse3VzZVdpdGhCbG9jazohIW99KX0sZS5mb290ZXI9biE9PSExP0Qobnx8JyM9IGtlbmRvLnRvU3RyaW5nKGRhdGEsXCJEXCIsXCInK3QuY3VsdHVyZSsnXCIpICMnLHt1c2VXaXRoQmxvY2s6ITF9KTpudWxsfX0pO2IucGx1Z2luKG10KSxfPXtmaXJzdERheU9mTW9udGg6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBmdChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDEpfSxmaXJzdFZpc2libGVEYXk6ZnVuY3Rpb24oZSx0KXt0PXR8fHkuY3VsdHVyZSgpLmNhbGVuZGFyO2Zvcih2YXIgbj10LmZpcnN0RGF5LGk9bmV3IGZ0KGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMCxlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSk7aS5nZXREYXkoKSE9bjspXy5zZXRUaW1lKGksLTEqc3QpO3JldHVybiBpfSxzZXRUaW1lOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5nZXRUaW1lem9uZU9mZnNldCgpLGk9bmV3IGZ0KGUuZ2V0VGltZSgpK3QpLHI9aS5nZXRUaW1lem9uZU9mZnNldCgpLW47ZS5zZXRUaW1lKGkuZ2V0VGltZSgpK3IqYXQpfSx2aWV3czpbe25hbWU6VSx0aXRsZTpmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gaChpKS5tb250aHMubmFtZXNbZS5nZXRNb250aCgpXStcIiBcIitlLmdldEZ1bGxZZWFyKCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMsbj0wLHI9ZS5taW4sbz1lLm1heCxhPWUuZGF0ZSxzPWUuZGF0ZXMsYz1lLmZvcm1hdCxkPWUuY3VsdHVyZSx1PWUudXJsLHA9dSYmc1swXSxmPWgoZCksbT1mLmZpcnN0RGF5LHY9Zi5kYXlzLHc9bCh2Lm5hbWVzLG0pLGI9bCh2Lm5hbWVzU2hvcnQsbSksaz1fLmZpcnN0VmlzaWJsZURheShhLGYpLHg9dC5maXJzdChhKSxDPXQubGFzdChhKSxUPXQudG9EYXRlU3RyaW5nLEQ9bmV3IGZ0LEE9Jzx0YWJsZSB0YWJpbmRleD1cIjBcIiByb2xlPVwiZ3JpZFwiIGNsYXNzPVwiay1jb250ZW50XCIgY2VsbHNwYWNpbmc9XCIwXCI+PHRoZWFkPjx0ciByb2xlPVwicm93XCI+Jzs3Pm47bisrKUErPSc8dGggc2NvcGU9XCJjb2xcIiB0aXRsZT1cIicrd1tuXSsnXCI+JytiW25dK1wiPC90aD5cIjtyZXR1cm4gRD1uZXcgZnQoRC5nZXRGdWxsWWVhcigpLEQuZ2V0TW9udGgoKSxELmdldERhdGUoKSksUyhELDApLEQ9K0QsaSh7Y2VsbHM6NDIscGVyUm93OjcsaHRtbDpBKz0nPC90cj48L3RoZWFkPjx0Ym9keT48dHIgcm9sZT1cInJvd1wiPicsc3RhcnQ6bmV3IGZ0KGsuZ2V0RnVsbFllYXIoKSxrLmdldE1vbnRoKCksay5nZXREYXRlKCkpLG1pbjpuZXcgZnQoci5nZXRGdWxsWWVhcigpLHIuZ2V0TW9udGgoKSxyLmdldERhdGUoKSksbWF4Om5ldyBmdChvLmdldEZ1bGxZZWFyKCksby5nZXRNb250aCgpLG8uZ2V0RGF0ZSgpKSxjb250ZW50OmUuY29udGVudCxlbXB0eTplLmVtcHR5LHNldHRlcjp0LnNldERhdGUsYnVpbGQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1lLmdldERheSgpLGk9XCJcIixyPVwiI1wiO3JldHVybih4PmV8fGU+QykmJnQucHVzaChRKSwrZT09PUQmJnQucHVzaChcImstdG9kYXlcIiksKDA9PT1ufHw2PT09bikmJnQucHVzaChcImstd2Vla2VuZFwiKSxwJiZnKCtlLHMpJiYocj11LnJlcGxhY2UoXCJ7MH1cIix5LnRvU3RyaW5nKGUsYyxkKSksaT1cIiBrLWFjdGlvbi1saW5rXCIpLHtkYXRlOmUsZGF0ZXM6cyxuczp5Lm5zLHRpdGxlOnkudG9TdHJpbmcoZSxcIkRcIixkKSx2YWx1ZTplLmdldERhdGUoKSxkYXRlU3RyaW5nOlQoZSksY3NzQ2xhc3M6dFswXT8nIGNsYXNzPVwiJyt0LmpvaW4oXCIgXCIpKydcIic6XCJcIixsaW5rQ2xhc3M6aSx1cmw6cn19fSl9LGZpcnN0OmZ1bmN0aW9uKGUpe3JldHVybiBfLmZpcnN0RGF5T2ZNb250aChlKX0sbGFzdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgZnQoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSsxLDApLG49Xy5maXJzdERheU9mTW9udGgoZSksaT1NYXRoLmFicyh0LmdldFRpbWV6b25lT2Zmc2V0KCktbi5nZXRUaW1lem9uZU9mZnNldCgpKTtyZXR1cm4gaSYmdC5zZXRIb3VycyhuLmdldEhvdXJzKCkraS82MCksdH0sY29tcGFyZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5nZXRNb250aCgpLHI9ZS5nZXRGdWxsWWVhcigpLG89dC5nZXRNb250aCgpLGE9dC5nZXRGdWxsWWVhcigpO3JldHVybiBuPXI+YT8xOmE+cj8tMTppPT1vPzA6aT5vPzE6LTF9LHNldERhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmdldEhvdXJzKCk7dCBpbnN0YW5jZW9mIGZ0P2Uuc2V0RnVsbFllYXIodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSx0LmdldERhdGUoKSk6Xy5zZXRUaW1lKGUsdCpzdCksUyhlLG4pfSx0b0RhdGVTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0RnVsbFllYXIoKStcIi9cIitlLmdldE1vbnRoKCkrXCIvXCIrZS5nZXREYXRlKCl9fSx7bmFtZTpcInllYXJcIix0aXRsZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRGdWxsWWVhcigpfSxjb250ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWgoZS5jdWx0dXJlKS5tb250aHMubmFtZXNBYmJyLG49dGhpcy50b0RhdGVTdHJpbmcscj1lLm1pbixvPWUubWF4O3JldHVybiBpKHttaW46bmV3IGZ0KHIuZ2V0RnVsbFllYXIoKSxyLmdldE1vbnRoKCksMSksbWF4Om5ldyBmdChvLmdldEZ1bGxZZWFyKCksby5nZXRNb250aCgpLDEpLHN0YXJ0Om5ldyBmdChlLmRhdGUuZ2V0RnVsbFllYXIoKSwwLDEpLHNldHRlcjp0aGlzLnNldERhdGUsYnVpbGQ6ZnVuY3Rpb24oZSl7cmV0dXJue3ZhbHVlOnRbZS5nZXRNb250aCgpXSxuczp5Lm5zLGRhdGVTdHJpbmc6bihlKSxjc3NDbGFzczpcIlwifX19KX0sZmlyc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBmdChlLmdldEZ1bGxZZWFyKCksMCxlLmdldERhdGUoKSl9LGxhc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBmdChlLmdldEZ1bGxZZWFyKCksMTEsZS5nZXREYXRlKCkpfSxjb21wYXJlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIoZSx0KX0sc2V0RGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5nZXRIb3VycygpO3QgaW5zdGFuY2VvZiBmdD8obj10LmdldE1vbnRoKCksZS5zZXRGdWxsWWVhcih0LmdldEZ1bGxZZWFyKCksbixlLmdldERhdGUoKSksbiE9PWUuZ2V0TW9udGgoKSYmZS5zZXREYXRlKDApKToobj1lLmdldE1vbnRoKCkrdCxlLnNldE1vbnRoKG4pLG4+MTEmJihuLT0xMiksbj4wJiZlLmdldE1vbnRoKCkhPW4mJmUuc2V0RGF0ZSgwKSksUyhlLGkpfSx0b0RhdGVTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0RnVsbFllYXIoKStcIi9cIitlLmdldE1vbnRoKCkrXCIvMVwifX0se25hbWU6XCJkZWNhZGVcIix0aXRsZTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIG4oZSx0LGksMTApfSxjb250ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0ZS5nZXRGdWxsWWVhcigpLG49dGhpcy50b0RhdGVTdHJpbmc7cmV0dXJuIGkoe3N0YXJ0Om5ldyBmdCh0LXQlMTAtMSwwLDEpLG1pbjpuZXcgZnQoZS5taW4uZ2V0RnVsbFllYXIoKSwwLDEpLG1heDpuZXcgZnQoZS5tYXguZ2V0RnVsbFllYXIoKSwwLDEpLHNldHRlcjp0aGlzLnNldERhdGUsYnVpbGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6ZS5nZXRGdWxsWWVhcigpLG5zOnkubnMsZGF0ZVN0cmluZzpuKGUpLGNzc0NsYXNzOjA9PT10fHwxMT09dD9YOlwiXCJ9fX0pfSxmaXJzdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIG5ldyBmdCh0LXQlMTAsZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpKX0sbGFzdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIG5ldyBmdCh0LXQlMTArOSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfSxjb21wYXJlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIoZSx0LDEwKX0sc2V0RGF0ZTpmdW5jdGlvbihlLHQpe2MoZSx0LDEpfSx0b0RhdGVTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0RnVsbFllYXIoKStcIi8wLzFcIn19LHtuYW1lOlcsdGl0bGU6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBuKGUsdCxpLDEwMCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRlLmdldEZ1bGxZZWFyKCksbj1lLm1pbi5nZXRGdWxsWWVhcigpLHI9ZS5tYXguZ2V0RnVsbFllYXIoKSxvPXRoaXMudG9EYXRlU3RyaW5nLGE9bixzPXI7cmV0dXJuIGEtPWElMTAscy09cyUxMCwxMD5zLWEmJihzPWErOSksaSh7c3RhcnQ6bmV3IGZ0KHQtdCUxMDAtMTAsMCwxKSxtaW46bmV3IGZ0KGEsMCwxKSxtYXg6bmV3IGZ0KHMsMCwxKSxzZXR0ZXI6dGhpcy5zZXREYXRlLGJ1aWxkOmZ1bmN0aW9uKGUsdCl7dmFyIGk9ZS5nZXRGdWxsWWVhcigpLGE9aSs5O3JldHVybiBuPmkmJihpPW4pLGE+ciYmKGE9cikse25zOnkubnMsdmFsdWU6aStcIiAtIFwiK2EsZGF0ZVN0cmluZzpvKGUpLGNzc0NsYXNzOjA9PT10fHwxMT09dD9YOlwiXCJ9fX0pfSxmaXJzdDpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIG5ldyBmdCh0LXQlMTAwLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSl9LGxhc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRGdWxsWWVhcigpO3JldHVybiBuZXcgZnQodC10JTEwMCs5OSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpfSxjb21wYXJlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIoZSx0LDEwMCl9LHNldERhdGU6ZnVuY3Rpb24oZSx0KXtjKGUsdCwxMCl9LHRvRGF0ZVN0cmluZzpmdW5jdGlvbihlKXt2YXIgdD1lLmdldEZ1bGxZZWFyKCk7cmV0dXJuIHQtdCUxMCtcIi8wLzFcIn19XX0sXy5pc0VxdWFsRGF0ZVBhcnQ9bSxfLm1ha2VVbnNlbGVjdGFibGU9ZixfLnJlc3RyaWN0VmFsdWU9YSxfLmlzSW5SYW5nZT1zLF8ubm9ybWFsaXplPXAsXy52aWV3c0VudW09Z3QseS5jYWxlbmRhcj1ffSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7dmFyIG49dC5wYXJzZUZvcm1hdHMsaT10LmZvcm1hdDtCLm5vcm1hbGl6ZSh0KSxuPWUuaXNBcnJheShuKT9uOltuXSwtMT09PWUuaW5BcnJheShpLG4pJiZuLnNwbGljZSgwLDAsdC5mb3JtYXQpLHQucGFyc2VGb3JtYXRzPW59ZnVuY3Rpb24gaShlKXtlLnByZXZlbnREZWZhdWx0KCl9dmFyIHIsbz13aW5kb3cua2VuZG8sYT1vLnVpLHM9YS5XaWRnZXQsbD1vLnBhcnNlRGF0ZSxjPW8ua2V5cyxkPW8udGVtcGxhdGUsdT1vLl9hY3RpdmVFbGVtZW50LGg9XCI8ZGl2IC8+XCIscD1cIjxzcGFuIC8+XCIsZj1cIi5rZW5kb0RhdGVQaWNrZXJcIixnPVwiY2xpY2tcIitmLG09XCJvcGVuXCIsdj1cImNsb3NlXCIsXz1cImNoYW5nZVwiLHk9XCJkaXNhYmxlZFwiLHc9XCJyZWFkb25seVwiLGI9XCJrLXN0YXRlLWRlZmF1bHRcIixrPVwiay1zdGF0ZS1mb2N1c2VkXCIseD1cImstc3RhdGUtc2VsZWN0ZWRcIixDPVwiay1zdGF0ZS1kaXNhYmxlZFwiLFM9XCJrLXN0YXRlLWhvdmVyXCIsVD1cIm1vdXNlZW50ZXJcIitmK1wiIG1vdXNlbGVhdmVcIitmLEQ9XCJtb3VzZWRvd25cIitmLEE9XCJpZFwiLEU9XCJtaW5cIixNPVwibWF4XCIsUD1cIm1vbnRoXCIsST1cImFyaWEtZGlzYWJsZWRcIix6PVwiYXJpYS1leHBhbmRlZFwiLEY9XCJhcmlhLWhpZGRlblwiLFI9XCJhcmlhLXJlYWRvbmx5XCIsQj1vLmNhbGVuZGFyLEw9Qi5pc0luUmFuZ2UsTz1CLnJlc3RyaWN0VmFsdWUsSD1CLmlzRXF1YWxEYXRlUGFydCxOPWUuZXh0ZW5kLFY9ZS5wcm94eSxVPURhdGUsVz1mdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1kb2N1bWVudC5ib2R5LHM9ZShoKS5hdHRyKEYsXCJ0cnVlXCIpLmFkZENsYXNzKFwiay1jYWxlbmRhci1jb250YWluZXJcIikuYXBwZW5kVG8ocik7aS5vcHRpb25zPXQ9dHx8e30sbj10LmlkLG4mJihuKz1cIl9kYXRldmlld1wiLHMuYXR0cihBLG4pLGkuX2RhdGVWaWV3SUQ9biksaS5wb3B1cD1uZXcgYS5Qb3B1cChzLE4odC5wb3B1cCx0LHtuYW1lOlwiUG9wdXBcIixpc1J0bDpvLnN1cHBvcnQuaXNSdGwodC5hbmNob3IpfSkpLGkuZGl2PXMsaS52YWx1ZSh0LnZhbHVlKX07Vy5wcm90b3R5cGU9e19jYWxlbmRhcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxyPW4uY2FsZW5kYXIscz1uLm9wdGlvbnM7cnx8KHQ9ZShoKS5hdHRyKEEsby5ndWlkKCkpLmFwcGVuZFRvKG4ucG9wdXAuZWxlbWVudCkub24oRCxpKS5vbihnLFwidGQ6aGFzKC5rLWxpbmspXCIsVihuLl9jbGljayxuKSksbi5jYWxlbmRhcj1yPW5ldyBhLkNhbGVuZGFyKHQpLG4uX3NldE9wdGlvbnMocyksby5jYWxlbmRhci5tYWtlVW5zZWxlY3RhYmxlKHIuZWxlbWVudCksci5uYXZpZ2F0ZShuLl92YWx1ZXx8bi5fY3VycmVudCxzLnN0YXJ0KSxuLnZhbHVlKG4uX3ZhbHVlKSl9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3RoaXMuY2FsZW5kYXIuc2V0T3B0aW9ucyh7Zm9jdXNPbk5hdjohMSxjaGFuZ2U6ZS5jaGFuZ2UsY3VsdHVyZTplLmN1bHR1cmUsZGF0ZXM6ZS5kYXRlcyxkZXB0aDplLmRlcHRoLGZvb3RlcjplLmZvb3Rlcixmb3JtYXQ6ZS5mb3JtYXQsbWF4OmUubWF4LG1pbjplLm1pbixtb250aDplLm1vbnRoLHN0YXJ0OmUuc3RhcnR9KX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dGhpcy5vcHRpb25zPU4odCxlLHtjaGFuZ2U6dC5jaGFuZ2UsY2xvc2U6dC5jbG9zZSxvcGVuOnQub3Blbn0pLHRoaXMuY2FsZW5kYXImJnRoaXMuX3NldE9wdGlvbnModGhpcy5vcHRpb25zKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucG9wdXAuZGVzdHJveSgpfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jYWxlbmRhcigpLGUucG9wdXAub3BlbigpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucG9wdXAuY2xvc2UoKX0sbWluOmZ1bmN0aW9uKGUpe3RoaXMuX29wdGlvbihFLGUpfSxtYXg6ZnVuY3Rpb24oZSl7dGhpcy5fb3B0aW9uKE0sZSl9LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZVtlLnBvcHVwLnZpc2libGUoKT92Om1dKCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPWUua2V5Q29kZSxyPW4uY2FsZW5kYXIsbz1lLmN0cmxLZXkmJmk9PWMuRE9XTnx8aT09Yy5FTlRFUjtpZihpPT1jLkVTQylyZXR1cm4gbi5jbG9zZSgpLHQ7aWYoZS5hbHRLZXkpcmV0dXJuIGk9PWMuRE9XTj8obi5vcGVuKCksZS5wcmV2ZW50RGVmYXVsdCgpKTppPT1jLlVQJiYobi5jbG9zZSgpLGUucHJldmVudERlZmF1bHQoKSksdDtpZihuLnBvcHVwLnZpc2libGUoKSlyZXR1cm4gbyYmci5fY2VsbC5oYXNDbGFzcyh4KT8obi5jbG9zZSgpLGUucHJldmVudERlZmF1bHQoKSx0KToobi5fY3VycmVudD1yLl9tb3ZlKGUpLHQpfSxjdXJyZW50OmZ1bmN0aW9uKGUpe3RoaXMuX2N1cnJlbnQ9ZSx0aGlzLmNhbGVuZGFyLl9mb2N1cyhlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuY2FsZW5kYXIsaT10Lm9wdGlvbnM7dC5fdmFsdWU9ZSx0Ll9jdXJyZW50PW5ldyBVKCtPKGUsaS5taW4saS5tYXgpKSxuJiZuLnZhbHVlKGUpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7LTEhPT1lLmN1cnJlbnRUYXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoeCkmJnRoaXMuY2xvc2UoKX0sX29wdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmNhbGVuZGFyO24ub3B0aW9uc1tlXT10LGkmJmlbZV0odCl9fSxXLm5vcm1hbGl6ZT1uLG8uRGF0ZVZpZXc9VyxyPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIGkscixhPXRoaXM7cy5mbi5pbml0LmNhbGwoYSxlLHQpLGU9YS5lbGVtZW50LHQ9YS5vcHRpb25zLHQubWluPWwoZS5hdHRyKFwibWluXCIpKXx8bCh0Lm1pbiksdC5tYXg9bChlLmF0dHIoXCJtYXhcIikpfHxsKHQubWF4KSxuKHQpLGEuX3dyYXBwZXIoKSxhLmRhdGVWaWV3PW5ldyBXKE4oe30sdCx7aWQ6ZS5hdHRyKEEpLGFuY2hvcjphLndyYXBwZXIsY2hhbmdlOmZ1bmN0aW9uKCl7YS5fY2hhbmdlKHRoaXMudmFsdWUoKSksYS5jbG9zZSgpfSxjbG9zZTpmdW5jdGlvbih0KXthLnRyaWdnZXIodik/dC5wcmV2ZW50RGVmYXVsdCgpOihlLmF0dHIoeiwhMSksci5hdHRyKEYsITApKX0sb3BlbjpmdW5jdGlvbih0KXt2YXIgbixpPWEub3B0aW9uczthLnRyaWdnZXIobSk/dC5wcmV2ZW50RGVmYXVsdCgpOihhLmVsZW1lbnQudmFsKCkhPT1hLl9vbGRUZXh0JiYobj1sKGUudmFsKCksaS5wYXJzZUZvcm1hdHMsaS5jdWx0dXJlKSxhLmRhdGVWaWV3W24/XCJjdXJyZW50XCI6XCJ2YWx1ZVwiXShuKSksZS5hdHRyKHosITApLHIuYXR0cihGLCExKSxhLl91cGRhdGVBUklBKG4pKX19KSkscj1hLmRhdGVWaWV3LmRpdixhLl9pY29uKCk7dHJ5e2VbMF0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dFwiKX1jYXRjaChjKXtlWzBdLnR5cGU9XCJ0ZXh0XCJ9ZS5hZGRDbGFzcyhcImstaW5wdXRcIikuYXR0cih7cm9sZTpcImNvbWJvYm94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITEsXCJhcmlhLW93bnNcIjphLmRhdGVWaWV3Ll9kYXRlVmlld0lEfSksYS5fcmVzZXQoKSxhLl90ZW1wbGF0ZSgpLGk9ZS5pcyhcIltkaXNhYmxlZF1cIiksaT9hLmVuYWJsZSghMSk6YS5yZWFkb25seShlLmlzKFwiW3JlYWRvbmx5XVwiKSksYS5fb2xkPWEuX3VwZGF0ZSh0LnZhbHVlfHxhLmVsZW1lbnQudmFsKCkpLGEuX29sZFRleHQ9ZS52YWwoKSxvLm5vdGlmeShhKX0sZXZlbnRzOlttLHYsX10sb3B0aW9uczp7bmFtZTpcIkRhdGVQaWNrZXJcIix2YWx1ZTpudWxsLGZvb3RlcjpcIlwiLGZvcm1hdDpcIlwiLGN1bHR1cmU6XCJcIixwYXJzZUZvcm1hdHM6W10sbWluOm5ldyBEYXRlKDE5MDAsMCwxKSxtYXg6bmV3IERhdGUoMjA5OSwxMSwzMSksc3RhcnQ6UCxkZXB0aDpQLGFuaW1hdGlvbjp7fSxtb250aDp7fSxkYXRlczpbXSxBUklBVGVtcGxhdGU6J0N1cnJlbnQgZm9jdXNlZCBkYXRlIGlzICM9a2VuZG8udG9TdHJpbmcoZGF0YS5jdXJyZW50LCBcIkRcIikjJ30sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dC5fdmFsdWU7cy5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSxlPXQub3B0aW9ucyxlLm1pbj1sKGUubWluKSxlLm1heD1sKGUubWF4KSxuKGUpLHQuZGF0ZVZpZXcuc2V0T3B0aW9ucyhlKSxpJiYodC5lbGVtZW50LnZhbChvLnRvU3RyaW5nKGksZS5mb3JtYXQsZS5jdWx0dXJlKSksdC5fdXBkYXRlQVJJQShpKSl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fZGF0ZUljb24ub2ZmKGYpLHI9dC5lbGVtZW50Lm9mZihmKSxvPXQuX2lucHV0V3JhcHBlci5vZmYoZiksYT1lLnJlYWRvbmx5LHM9ZS5kaXNhYmxlO2F8fHM/KG8uYWRkQ2xhc3Mocz9DOmIpLnJlbW92ZUNsYXNzKHM/YjpDKSxyLmF0dHIoeSxzKS5hdHRyKHcsYSkuYXR0cihJLHMpLmF0dHIoUixhKSk6KG8uYWRkQ2xhc3MoYikucmVtb3ZlQ2xhc3MoQykub24oVCx0Ll90b2dnbGVIb3Zlciksci5yZW1vdmVBdHRyKHkpLnJlbW92ZUF0dHIodykuYXR0cihJLCExKS5hdHRyKFIsITEpLm9uKFwia2V5ZG93blwiK2YsVih0Ll9rZXlkb3duLHQpKS5vbihcImZvY3Vzb3V0XCIrZixWKHQuX2JsdXIsdCkpLm9uKFwiZm9jdXNcIitmLGZ1bmN0aW9uKCl7dC5faW5wdXRXcmFwcGVyLmFkZENsYXNzKGspfSksbi5vbihnLFYodC5fY2xpY2ssdCkpLm9uKEQsaSkpfSxyZWFkb25seTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ZT09PXQ/ITA6ZSxkaXNhYmxlOiExfSl9LGVuYWJsZTpmdW5jdGlvbihlKXt0aGlzLl9lZGl0YWJsZSh7cmVhZG9ubHk6ITEsZGlzYWJsZTohKGU9ZT09PXQ/ITA6ZSl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cy5mbi5kZXN0cm95LmNhbGwoZSksZS5kYXRlVmlldy5kZXN0cm95KCksZS5lbGVtZW50Lm9mZihmKSxlLl9kYXRlSWNvbi5vZmYoZiksZS5faW5wdXRXcmFwcGVyLm9mZihmKSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKX0sb3BlbjpmdW5jdGlvbigpe3RoaXMuZGF0ZVZpZXcub3BlbigpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGF0ZVZpZXcuY2xvc2UoKX0sbWluOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oRSxlKX0sbWF4OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oTSxlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztyZXR1cm4gZT09PXQ/bi5fdmFsdWU6KG4uX29sZD1uLl91cGRhdGUoZSksbnVsbD09PW4uX29sZCYmbi5lbGVtZW50LnZhbChcIlwiKSxuLl9vbGRUZXh0PW4uZWxlbWVudC52YWwoKSx0KX0sX3RvZ2dsZUhvdmVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcyhTLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX2JsdXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LnZhbCgpO2UuY2xvc2UoKSx0IT09ZS5fb2xkVGV4dCYmZS5fY2hhbmdlKHQpLGUuX2lucHV0V3JhcHBlci5yZW1vdmVDbGFzcyhrKX0sX2NsaWNrOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudDtlLmRhdGVWaWV3LnRvZ2dsZSgpLG8uc3VwcG9ydC50b3VjaHx8dFswXT09PXUoKXx8dC5mb2N1cygpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT10Ll91cGRhdGUoZSksK3QuX29sZCE9K2UmJih0Ll9vbGQ9ZSx0Ll9vbGRUZXh0PXQuZWxlbWVudC52YWwoKSx0LmVsZW1lbnQudHJpZ2dlcihfKSx0LnRyaWdnZXIoXykpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kYXRlVmlldyxpPXQuZWxlbWVudC52YWwoKTtuLnBvcHVwLnZpc2libGUoKXx8ZS5rZXlDb2RlIT1jLkVOVEVSfHxpPT09dC5fb2xkVGV4dD8obi5tb3ZlKGUpLHQuX3VwZGF0ZUFSSUEobi5fY3VycmVudCkpOnQuX2NoYW5nZShpKX0sX2ljb246ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLm5leHQoXCJzcGFuLmstc2VsZWN0XCIpLHRbMF18fCh0PWUoJzxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWNhbGVuZGFyXCI+c2VsZWN0PC9zcGFuPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcihpKSksbi5fZGF0ZUljb249dC5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsXCJhcmlhLWNvbnRyb2xzXCI6bi5kYXRlVmlldy5fZGF0ZVZpZXdJRH0pfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucztyZXR1cm4gbj09PXQ/cltlXToobj1sKG4sci5wYXJzZUZvcm1hdHMsci5jdWx0dXJlKSxuJiYocltlXT1uZXcgVSgrbiksaS5kYXRlVmlld1tlXShuKSksdCl9LF91cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5taW4sYT1pLm1heCxzPW4uX3ZhbHVlLGM9bChlLGkucGFyc2VGb3JtYXRzLGkuY3VsdHVyZSksZD1udWxsPT09YyYmbnVsbD09PXN8fGMgaW5zdGFuY2VvZiBEYXRlJiZzIGluc3RhbmNlb2YgRGF0ZTtyZXR1cm4rYz09PStzJiZkPyh0PW8udG9TdHJpbmcoYyxpLmZvcm1hdCxpLmN1bHR1cmUpLHQhPT1lJiZuLmVsZW1lbnQudmFsKG51bGw9PT1jP2U6dCksYyk6KG51bGwhPT1jJiZIKGMscik/Yz1PKGMscixhKTpMKGMscixhKXx8KGM9bnVsbCksbi5fdmFsdWU9YyxuLmRhdGVWaWV3LnZhbHVlKGMpLG4uZWxlbWVudC52YWwoYz9vLnRvU3RyaW5nKGMsaS5mb3JtYXQsaS5jdWx0dXJlKTplKSxuLl91cGRhdGVBUklBKGMpLGMpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkucGFyZW50cyhcIi5rLWRhdGVwaWNrZXJcIiksdFswXXx8KHQ9aS53cmFwKHApLnBhcmVudCgpLmFkZENsYXNzKFwiay1waWNrZXItd3JhcCBrLXN0YXRlLWRlZmF1bHRcIiksdD10LndyYXAocCkucGFyZW50KCkpLHRbMF0uc3R5bGUuY3NzVGV4dD1pWzBdLnN0eWxlLmNzc1RleHQsaS5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDppWzBdLnN0eWxlLmhlaWdodH0pLG4ud3JhcHBlcj10LmFkZENsYXNzKFwiay13aWRnZXQgay1kYXRlcGlja2VyIGstaGVhZGVyXCIpLmFkZENsYXNzKGlbMF0uY2xhc3NOYW1lKSxuLl9pbnB1dFdyYXBwZXI9ZSh0WzBdLmZpcnN0Q2hpbGQpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXt0LnZhbHVlKG5bMF0uZGVmYXVsdFZhbHVlKX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX3RlbXBsYXRlOmZ1bmN0aW9uKCl7dGhpcy5fYXJpYVRlbXBsYXRlPWQodGhpcy5vcHRpb25zLkFSSUFUZW1wbGF0ZSl9LF91cGRhdGVBUklBOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4uZGF0ZVZpZXcuY2FsZW5kYXI7bi5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksaSYmKHQ9aS5fY2VsbCx0LmF0dHIoXCJhcmlhLWxhYmVsXCIsbi5fYXJpYVRlbXBsYXRlKHtjdXJyZW50OmV8fGkuY3VycmVudCgpfSkpLG4uZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdC5hdHRyKFwiaWRcIikpKX19KSxhLnBsdWdpbihyKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuKXtyZXR1cm4gbj90LnN1YnN0cmluZygwLGUpLnNwbGl0KG4pLmxlbmd0aC0xOjB9ZnVuY3Rpb24gaShlLHQsaSl7cmV0dXJuIHQuc3BsaXQoaSlbbihlLHQsaSldfWZ1bmN0aW9uIHIoZSx0LGkscil7dmFyIG89dC5zcGxpdChyKTtyZXR1cm4gby5zcGxpY2UobihlLHQsciksMSxpKSxyJiZcIlwiIT09b1tvLmxlbmd0aC0xXSYmby5wdXNoKFwiXCIpLG8uam9pbihyKX12YXIgbz13aW5kb3cua2VuZG8sYT1vLnN1cHBvcnQscz1vLmNhcmV0LGw9by5fYWN0aXZlRWxlbWVudCxjPWEucGxhY2Vob2xkZXIsZD1vLnVpLHU9ZC5MaXN0LGg9by5rZXlzLHA9by5kYXRhLkRhdGFTb3VyY2UsZj1cImFyaWEtZGlzYWJsZWRcIixnPVwiYXJpYS1yZWFkb25seVwiLG09XCJrLXN0YXRlLWRlZmF1bHRcIix2PVwiZGlzYWJsZWRcIixfPVwicmVhZG9ubHlcIix5PVwiay1zdGF0ZS1mb2N1c2VkXCIsdz1cImstc3RhdGUtc2VsZWN0ZWRcIixiPVwiay1zdGF0ZS1kaXNhYmxlZFwiLGs9XCJrLXN0YXRlLWhvdmVyXCIseD1cIi5rZW5kb0F1dG9Db21wbGV0ZVwiLEM9XCJtb3VzZWVudGVyXCIreCtcIiBtb3VzZWxlYXZlXCIreCxTPWUucHJveHksVD11LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcztyLm5zPXgsbj1lLmlzQXJyYXkobik/e2RhdGFTb3VyY2U6bn06bix1LmZuLmluaXQuY2FsbChyLHQsbiksdD1yLmVsZW1lbnQsbj1yLm9wdGlvbnMsbi5wbGFjZWhvbGRlcj1uLnBsYWNlaG9sZGVyfHx0LmF0dHIoXCJwbGFjZWhvbGRlclwiKSxjJiZ0LmF0dHIoXCJwbGFjZWhvbGRlclwiLG4ucGxhY2Vob2xkZXIpLHIuX3dyYXBwZXIoKSxyLl9sb2FkZXIoKSxyLl9kYXRhU291cmNlKCksci5faWdub3JlQ2FzZSgpLHRbMF0udHlwZT1cInRleHRcIixpPXIud3JhcHBlcixyLl9wb3B1cCgpLHQuYWRkQ2xhc3MoXCJrLWlucHV0XCIpLm9uKFwia2V5ZG93blwiK3gsUyhyLl9rZXlkb3duLHIpKS5vbihcInBhc3RlXCIreCxTKHIuX3NlYXJjaCxyKSkub24oXCJmb2N1c1wiK3gsZnVuY3Rpb24oKXtyLl9wcmV2PXIuX2FjY2Vzc29yKCksci5fcGxhY2Vob2xkZXIoITEpLGkuYWRkQ2xhc3MoeSl9KS5vbihcImZvY3Vzb3V0XCIreCxmdW5jdGlvbigpe3IuX2NoYW5nZSgpLHIuX3BsYWNlaG9sZGVyKCksaS5yZW1vdmVDbGFzcyh5KX0pLmF0dHIoe2F1dG9jb21wbGV0ZTpcIm9mZlwiLHJvbGU6XCJ0ZXh0Ym94XCIsXCJhcmlhLWhhc3BvcHVwXCI6ITB9KSxyLl9lbmFibGUoKSxyLl9vbGQ9ci5fYWNjZXNzb3IoKSx0WzBdLmlkJiZ0LmF0dHIoXCJhcmlhLW93bnNcIixyLnVsWzBdLmlkKSxyLl9hcmlhKCksci5fcGxhY2Vob2xkZXIoKSxvLm5vdGlmeShyKX0sb3B0aW9uczp7bmFtZTpcIkF1dG9Db21wbGV0ZVwiLGVuYWJsZWQ6ITAsc3VnZ2VzdDohMSx0ZW1wbGF0ZTpcIlwiLGRhdGFUZXh0RmllbGQ6XCJcIixtaW5MZW5ndGg6MSxkZWxheToyMDAsaGVpZ2h0OjIwMCxmaWx0ZXI6XCJzdGFydHN3aXRoXCIsaWdub3JlQ2FzZTohMCxoaWdobGlnaHRGaXJzdDohMSxzZXBhcmF0b3I6bnVsbCxwbGFjZWhvbGRlcjpcIlwiLGFuaW1hdGlvbjp7fSx2YWx1ZTpudWxsfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5kYXRhU291cmNlJiZlLl9yZWZyZXNoSGFuZGxlcj9lLl91bmJpbmREYXRhU291cmNlKCk6KGUuX3JlZnJlc2hIYW5kbGVyPVMoZS5yZWZyZXNoLGUpLGUuX3Byb2dyZXNzSGFuZGxlcj1TKGUuX3Nob3dCdXN5LGUpKSxlLmRhdGFTb3VyY2U9cC5jcmVhdGUoZS5vcHRpb25zLmRhdGFTb3VyY2UpLmJpbmQoXCJjaGFuZ2VcIixlLl9yZWZyZXNoSGFuZGxlcikuYmluZChcInByb2dyZXNzXCIsZS5fcHJvZ3Jlc3NIYW5kbGVyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKX0sZXZlbnRzOltcIm9wZW5cIixcImNsb3NlXCIsXCJjaGFuZ2VcIixcInNlbGVjdFwiLFwiZmlsdGVyaW5nXCIsXCJkYXRhQmluZGluZ1wiLFwiZGF0YUJvdW5kXCJdLHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dS5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZSgpLHRoaXMuX2FjY2Vzc29ycygpLHRoaXMuX2FyaWEoKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT10LndyYXBwZXIub2ZmKHgpLHI9ZS5yZWFkb25seSxvPWUuZGlzYWJsZTtyfHxvPyhpLmFkZENsYXNzKG8/YjptKS5yZW1vdmVDbGFzcyhvP206Yiksbi5hdHRyKHYsbykuYXR0cihfLHIpLmF0dHIoZixvKS5hdHRyKGcscikpOihpLmFkZENsYXNzKG0pLnJlbW92ZUNsYXNzKGIpLm9uKEMsdC5fdG9nZ2xlSG92ZXIpLG4ucmVtb3ZlQXR0cih2KS5yZW1vdmVBdHRyKF8pLmF0dHIoZiwhMSkuYXR0cihnLCExKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2N1cnJlbnQ7dCYmdC5yZW1vdmVDbGFzcyh3KSxlLmN1cnJlbnQobnVsbCksZS5wb3B1cC5jbG9zZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmVsZW1lbnQub2ZmKHgpLGUud3JhcHBlci5vZmYoeCksdS5mbi5kZXN0cm95LmNhbGwoZSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgbixpPXRoaXMscj1pLnVsWzBdLGE9aS5wb3B1cCxzPWkub3B0aW9ucyxjPWkuX2RhdGEoKSxkPWMubGVuZ3RoLHU9aS5lbGVtZW50WzBdPT09bCgpO2kuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksaS50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIiksci5pbm5lckhUTUw9by5yZW5kZXIoaS50ZW1wbGF0ZSxjKSxpLl9oZWlnaHQoZCksYS52aXNpYmxlKCkmJmEuX3Bvc2l0aW9uKCksZCYmKHMuaGlnaGxpZ2h0Rmlyc3QmJmkuY3VycmVudChlKHIuZmlyc3RDaGlsZCkpLHMuc3VnZ2VzdCYmdSYmaS5zdWdnZXN0KGUoci5maXJzdENoaWxkKSkpLGkuX29wZW4mJihpLl9vcGVuPSExLG49ZD9cIm9wZW5cIjpcImNsb3NlXCIsaS5fdHlwaW5nJiYhdSYmKG49XCJjbG9zZVwiKSxhW25dKCksaS5fdHlwaW5nPXQpLGkuX3RvdWNoU2Nyb2xsZXImJmkuX3RvdWNoU2Nyb2xsZXIucmVzZXQoKSxpLl9tYWtlVW5zZWxlY3RhYmxlKCksaS5faGlkZUJ1c3koKSxpLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGkudHJpZ2dlcihcImRhdGFCb3VuZFwiKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuX3NlbGVjdChlKX0sc2VhcmNoOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxyPW4ub3B0aW9ucyxvPXIuaWdub3JlQ2FzZSxhPXIuc2VwYXJhdG9yO2U9ZXx8bi5fYWNjZXNzb3IoKSxuLl9jdXJyZW50PW51bGwsY2xlYXJUaW1lb3V0KG4uX3R5cGluZyksYSYmKGU9aShzKG4uZWxlbWVudClbMF0sZSxhKSksdD1lLmxlbmd0aCwoIXR8fHQ+PXIubWluTGVuZ3RoKSYmKG4uX29wZW49ITAsbi5fZmlsdGVyU291cmNlKHt2YWx1ZTpvP2UudG9Mb3dlckNhc2UoKTplLG9wZXJhdG9yOnIuZmlsdGVyLGZpZWxkOnIuZGF0YVRleHRGaWVsZCxpZ25vcmVDYXNlOm99KSl9LHN1Z2dlc3Q6ZnVuY3Rpb24oZSl7dmFyIGkscj10aGlzLG89ci5fbGFzdCxhPXIuX2FjY2Vzc29yKCksYz1yLmVsZW1lbnRbMF0sZD1zKGMpWzBdLHA9ci5vcHRpb25zLnNlcGFyYXRvcixmPWEuc3BsaXQocCksZz1uKGQsYSxwKSxtPWQ7cmV0dXJuIG89PWguQkFDS1NQQUNFfHxvPT1oLkRFTEVURT8oci5fbGFzdD10LHQpOihlPWV8fFwiXCIsXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihpPXUuaW5BcnJheShlWzBdLHIudWxbMF0pLGU9aT4tMT9yLl90ZXh0KHIuX2RhdGEoKVtpXSk6XCJcIiksMD49ZCYmKGQ9YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZS50b0xvd2VyQ2FzZSgpKSsxKSxpPWEuc3Vic3RyaW5nKDAsZCkubGFzdEluZGV4T2YocCksaT1pPi0xP2QtKGkrcC5sZW5ndGgpOmQsYT1mW2ddLnN1YnN0cmluZygwLGkpLGUmJihpPWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGEudG9Mb3dlckNhc2UoKSksaT4tMSYmKGU9ZS5zdWJzdHJpbmcoaSthLmxlbmd0aCksbT1kK2UubGVuZ3RoLGErPWUpLHAmJlwiXCIhPT1mW2YubGVuZ3RoLTFdJiZmLnB1c2goXCJcIikpLGZbZ109YSxyLl9hY2Nlc3NvcihmLmpvaW4ocHx8XCJcIikpLGM9PT1sKCkmJnMoYyxkLG0pLHQpfSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5fYWNjZXNzb3IoKToodGhpcy5fYWNjZXNzb3IoZSksdGhpcy5fb2xkPXRoaXMuX2FjY2Vzc29yKCksdCl9LF9hY2Nlc3NvcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5lbGVtZW50WzBdO3JldHVybiBlPT09dD8oZT1pLnZhbHVlLGkuY2xhc3NOYW1lLmluZGV4T2YoXCJrLXJlYWRvbmx5XCIpPi0xJiZlPT09bi5vcHRpb25zLnBsYWNlaG9sZGVyP1wiXCI6ZSk6KGkudmFsdWU9bnVsbD09PWU/XCJcIjplLG4uX3BsYWNlaG9sZGVyKCksdCl9LF9hY2NlcHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50O3RoaXMuX2ZvY3VzKGUpLHModCx0LnZhbCgpLmxlbmd0aCl9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLnVsWzBdLHI9dC5rZXlDb2RlLG89bi5fY3VycmVudCxhPW4ucG9wdXAudmlzaWJsZSgpO24uX2xhc3Q9cixyPT09aC5ET1dOPyhhJiZuLl9tb3ZlKG8/by5uZXh0KCk6ZShpLmZpcnN0Q2hpbGQpKSx0LnByZXZlbnREZWZhdWx0KCkpOnI9PT1oLlVQPyhhJiZuLl9tb3ZlKG8/by5wcmV2KCk6ZShpLmxhc3RDaGlsZCkpLHQucHJldmVudERlZmF1bHQoKSk6cj09PWguRU5URVJ8fHI9PT1oLlRBQj8ocj09PWguRU5URVImJm4ucG9wdXAudmlzaWJsZSgpJiZ0LnByZXZlbnREZWZhdWx0KCksbi5fYWNjZXB0KG8pKTpyPT09aC5FU0M/KG4ucG9wdXAudmlzaWJsZSgpJiZ0LnByZXZlbnREZWZhdWx0KCksbi5jbG9zZSgpKTpuLl9zZWFyY2goKX0sX21vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlPWVbMF0/ZTpudWxsLHQuY3VycmVudChlKSx0Lm9wdGlvbnMuc3VnZ2VzdCYmdC5zdWdnZXN0KGUpfSxfaGlkZUJ1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9idXN5KSxlLl9sb2FkaW5nLmhpZGUoKSxlLmVsZW1lbnQuYXR0cihcImFyaWEtYnVzeVwiLCExKSxlLl9idXN5PW51bGx9LF9zaG93QnVzeTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fYnVzeXx8KGUuX2J1c3k9c2V0VGltZW91dChmdW5jdGlvbigpe2UuZWxlbWVudC5hdHRyKFwiYXJpYS1idXN5XCIsITApLGUuX2xvYWRpbmcuc2hvdygpfSwxMDApKX0sX3BsYWNlaG9sZGVyOmZ1bmN0aW9uKGUpe2lmKCFjKXt2YXIgbixpPXRoaXMscj1pLmVsZW1lbnQsbz1pLm9wdGlvbnMucGxhY2Vob2xkZXI7aWYobyl7aWYobj1yLnZhbCgpLGU9PT10JiYoZT0hbiksZXx8KG89biE9PW8/bjpcIlwiKSxuPT09aS5fb2xkJiYhZSlyZXR1cm47ci50b2dnbGVDbGFzcyhcImstcmVhZG9ubHlcIixlKS52YWwobyksb3x8clswXSE9PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnR8fHMoclswXSwwLDApfX19LF9zZWFyY2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl90eXBpbmcpLGUuX3R5cGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fcHJldiE9PWUuX2FjY2Vzc29yKCkmJihlLl9wcmV2PWUuX2FjY2Vzc29yKCksZS5zZWFyY2goKSl9LGUub3B0aW9ucy5kZWxheSl9LF9zZWxlY3Q6ZnVuY3Rpb24odCl7dmFyIG4saSxvPXRoaXMsYT1vLm9wdGlvbnMuc2VwYXJhdG9yLGw9by5fZGF0YSgpO3Q9ZSh0KSx0WzBdJiYhdC5oYXNDbGFzcyh3KSYmKGk9dS5pbkFycmF5KHRbMF0sby51bFswXSksaT4tMSYmKGw9bFtpXSxuPW8uX3RleHQobCksYSYmKG49cihzKG8uZWxlbWVudClbMF0sby5fYWNjZXNzb3IoKSxuLGEpKSxvLl9hY2Nlc3NvcihuKSxvLl9wcmV2PW8uX2FjY2Vzc29yKCksby5jdXJyZW50KHQuYWRkQ2xhc3ModykpKSl9LF9sb2FkZXI6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkaW5nPWUoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZ1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PC9zcGFuPicpLmluc2VydEFmdGVyKHRoaXMuZWxlbWVudCl9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoayxcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5lbGVtZW50LGk9blswXTtlPW4ucGFyZW50KCksZS5pcyhcInNwYW4uay13aWRnZXRcIil8fChlPW4ud3JhcChcIjxzcGFuIC8+XCIpLnBhcmVudCgpKSxlLmF0dHIoXCJ0YWJpbmRleFwiLC0xKSxlLmF0dHIoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksZVswXS5zdHlsZS5jc3NUZXh0PWkuc3R5bGUuY3NzVGV4dCxuLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0Omkuc3R5bGUuaGVpZ2h0fSksdC5fZm9jdXNlZD10LmVsZW1lbnQsdC53cmFwcGVyPWUuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWF1dG9jb21wbGV0ZSBrLWhlYWRlclwiKS5hZGRDbGFzcyhpLmNsYXNzTmFtZSl9fSk7ZC5wbHVnaW4oVCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbil7Zm9yKHZhciBpLHI9MCxvPXQubGVuZ3RoLTE7bz5yOysrcilpPXRbcl0saSBpbiBlfHwoZVtpXT17fSksZT1lW2ldO2VbdFtvXV09bn12YXIgaT13aW5kb3cua2VuZG8scj1pLnVpLG89ci5TZWxlY3QsYT1pLnN1cHBvcnQubW9iaWxlT1Mscz1pLl9hY3RpdmVFbGVtZW50LGw9aS5rZXlzLGM9XCIua2VuZG9Ecm9wRG93bkxpc3RcIixkPVwiZGlzYWJsZWRcIix1PVwicmVhZG9ubHlcIixoPVwiY2hhbmdlXCIscD1cImstc3RhdGUtZm9jdXNlZFwiLGY9XCJrLXN0YXRlLWRlZmF1bHRcIixnPVwiay1zdGF0ZS1kaXNhYmxlZFwiLG09XCJhcmlhLWRpc2FibGVkXCIsdj1cImFyaWEtcmVhZG9ubHlcIixfPVwiay1zdGF0ZS1zZWxlY3RlZFwiLHk9XCJtb3VzZWVudGVyXCIrYytcIiBtb3VzZWxlYXZlXCIrYyx3PVwidGFiaW5kZXhcIixiPVwiZmlsdGVyXCIsaz1cImFjY2VwdFwiLHg9ZS5wcm94eSxDPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4scil7dmFyIGEscyxsLGQ9dGhpcyx1PXImJnIuaW5kZXg7ZC5ucz1jLHI9ZS5pc0FycmF5KHIpP3tkYXRhU291cmNlOnJ9OnIsby5mbi5pbml0LmNhbGwoZCxuLHIpLHI9ZC5vcHRpb25zLG49ZC5lbGVtZW50Lm9uKFwiZm9jdXNcIitjLHgoZC5fZm9jdXNIYW5kbGVyLGQpKSxkLl9pbnB1dFRlbXBsYXRlKCksZC5fcmVzZXQoKSxkLl9wcmV2PVwiXCIsZC5fd29yZD1cIlwiLGQuX3dyYXBwZXIoKSxkLl90YWJpbmRleCgpLGQud3JhcHBlci5kYXRhKHcsZC53cmFwcGVyLmF0dHIodykpLGQuX3NwYW4oKSxkLl9wb3B1cCgpLGQuX21vYmlsZSgpLGQuX2RhdGFTb3VyY2UoKSxkLl9pZ25vcmVDYXNlKCksZC5fZmlsdGVySGVhZGVyKCksZC5fYXJpYSgpLGQuX2VuYWJsZSgpLGQuX29sZEluZGV4PWQuc2VsZWN0ZWRJbmRleD0tMSxkLl9jYXNjYWRlKCksdSE9PXQmJihyLmluZGV4PXUpLHIuYXV0b0JpbmQ/ZC5kYXRhU291cmNlLmZldGNoKCk6LTE9PT1kLnNlbGVjdGVkSW5kZXgmJihsPXIudGV4dHx8XCJcIixsfHwoYT1yLm9wdGlvbkxhYmVsLHM9YSYmMD09PXIuaW5kZXgsZC5faXNTZWxlY3Q/bD1zP2E6bi5jaGlsZHJlbihcIjpzZWxlY3RlZFwiKS50ZXh0KCk6IW5bMF0udmFsdWUmJnMmJihsPWEpKSxkLl90ZXh0QWNjZXNzb3IobCkpLGkubm90aWZ5KGQpfSxvcHRpb25zOntuYW1lOlwiRHJvcERvd25MaXN0XCIsZW5hYmxlZDohMCxhdXRvQmluZDohMCxpbmRleDowLHRleHQ6bnVsbCx2YWx1ZTpudWxsLHRlbXBsYXRlOlwiXCIsdmFsdWVUZW1wbGF0ZTpcIlwiLGRlbGF5OjUwMCxoZWlnaHQ6MjAwLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhVmFsdWVGaWVsZDpcIlwiLG9wdGlvbkxhYmVsOlwiXCIsY2FzY2FkZUZyb206XCJcIixjYXNjYWRlRnJvbUZpZWxkOlwiXCIsaWdub3JlQ2FzZTohMCxhbmltYXRpb246e30sZmlsdGVyOlwibm9uZVwiLG1pbkxlbmd0aDoxfSxldmVudHM6W1wib3BlblwiLFwiY2xvc2VcIixoLFwic2VsZWN0XCIsXCJmaWx0ZXJpbmdcIixcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIixcImNhc2NhZGVcIl0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtvLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlKCksdGhpcy5faW5wdXRUZW1wbGF0ZSgpLHRoaXMuX2FjY2Vzc29ycygpLHRoaXMuX2ZpbHRlckhlYWRlcigpLHRoaXMuX2VuYWJsZSgpLHRoaXMuX2FyaWEoKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS53cmFwcGVyLm9mZihjKSxlLmVsZW1lbnQub2ZmKGMpLGUuX2lucHV0V3JhcHBlci5vZmYoYyksZS5fYXJyb3cub2ZmKCksZS5fYXJyb3c9bnVsbCxvLmZuLmRlc3Ryb3kuY2FsbChlKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wb3B1cC52aXNpYmxlKCl8fChlLnVsWzBdLmZpcnN0Q2hpbGQmJmUuX3N0YXRlIT09az8oZS5wb3B1cC5vcGVuKCksZS5fZm9jdXNFbGVtZW50KGUuZmlsdGVySW5wdXQpLGUuX3Njcm9sbChlLl9jdXJyZW50KSk6KGUuX29wZW49ITAsZS5fc3RhdGU9XCJyZWJpbmRcIixlLmZpbHRlcklucHV0JiZlLmZpbHRlcklucHV0LnZhbChcIlwiKSxlLl9maWx0ZXJTb3VyY2UoKSkpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKGUsITApfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQsbixyPXRoaXMsbz1yLl9kYXRhKCksYT1vLmxlbmd0aCxzPXIub3B0aW9ucy5vcHRpb25MYWJlbCxsPXIuX3N0YXRlPT09YixjPXIuZWxlbWVudFswXTtyLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiKSxyLl9jdXJyZW50JiZyLmN1cnJlbnQobnVsbCksci5fYW5ndWxhckl0ZW1zKFwiY2xlYW51cFwiKSxyLnVsWzBdLmlubmVySFRNTD1pLnJlbmRlcihyLnRlbXBsYXRlLG8pLHIuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksci5faGVpZ2h0KGw/YXx8MTphKSxyLnBvcHVwLnZpc2libGUoKSYmci5wb3B1cC5fcG9zaXRpb24oKSxyLl9pc1NlbGVjdCYmKHQ9Yy5zZWxlY3RlZEluZGV4LG49ci52YWx1ZSgpLGE/cyYmKHM9ci5fb3B0aW9uKFwiXCIsci5fb3B0aW9uTGFiZWxUZXh0KHMpKSk6biYmKHQ9MCxzPXIuX29wdGlvbihuLHIudGV4dCgpKSksci5fb3B0aW9ucyhvLHMpLGMuc2VsZWN0ZWRJbmRleD0tMT09PXQ/MDp0KSxyLl9oaWRlQnVzeSgpLHIuX21ha2VVbnNlbGVjdGFibGUoKSxsP3IuY3VycmVudChlKHIudWxbMF0uZmlyc3RDaGlsZCkpOihyLl9vcGVuJiZyLnRvZ2dsZSghIWEpLHIuX29wZW49ITEsci5fZmV0Y2h8fChhP3IuX3NlbGVjdEl0ZW0oKTpyLl90ZXh0QWNjZXNzb3IoKSE9PXMmJihyLmVsZW1lbnQudmFsKFwiXCIpLHIuX3RleHRBY2Nlc3NvcihcIlwiKSkpKSxyLl9ib3VuZD0hIWEsci50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciBuLGkscj10aGlzLG89ci5vcHRpb25zLmlnbm9yZUNhc2U7cmV0dXJuIGU9bnVsbD09PWU/XCJcIjplLGU9PT10P3IuX3RleHRBY2Nlc3NvcigpOihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGk9bz9lLnRvTG93ZXJDYXNlKCk6ZSxuPXIuX3NlbGVjdChmdW5jdGlvbihlKXtyZXR1cm4gZT1yLl90ZXh0KGUpLG8mJihlPShlK1wiXCIpLnRvTG93ZXJDYXNlKCkpLGU9PT1pfSksbiYmKGU9bikpLHIuX3RleHRBY2Nlc3NvcihlKSx0KX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saSxyPXRoaXM7cmV0dXJuIGU9PT10P3IuX2FjY2Vzc29yKCk6KG51bGwhPT1lJiYoZT1cIlwiK2UpLHIuX3NlbGVjdGVkVmFsdWU9ZSxpPWV8fHIub3B0aW9ucy5vcHRpb25MYWJlbCYmIXIuZWxlbWVudFswXS5kaXNhYmxlZCYmXCJcIj09PWUsaSYmci5fZmV0Y2hJdGVtcyhlKXx8KG49ci5faW5kZXgoZSksci5zZWxlY3Qobj4tMT9uOjApKSx0KX0sX2ZvY3VzSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5mb2N1cygpfSxfZm9jdXNpbkhhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dFdyYXBwZXIuYWRkQ2xhc3MocCksdGhpcy5fcHJldmVudD0hMX0sX2ZvY3Vzb3V0SGFuZGxlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdGF0ZT09PWIsbj13aW5kb3cuc2VsZiE9PXdpbmRvdy50b3A7ZS5fcHJldmVudHx8KHQmJmUuX3NlbGVjdChlLl9jdXJyZW50KSwoIXR8fGUuZGF0YUl0ZW0oKSkmJmUuX3RyaWdnZXJDYXNjYWRlKCksaS5zdXBwb3J0Lm1vYmlsZU9TLmlvcyYmbj9lLl9jaGFuZ2UoKTplLl9ibHVyKCksZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKHApLGUuX3ByZXZlbnQ9ITAsZS5fb3Blbj0hMSxlLmVsZW1lbnQuYmx1cigpKX0sX3dyYXBwZXJNb3VzZWRvd246ZnVuY3Rpb24oKXt0aGlzLl9wcmV2ZW50PSEhdGhpcy5maWx0ZXJJbnB1dH0sX3dyYXBwZXJDbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fZm9jdXNlZD10aGlzLndyYXBwZXIsdGhpcy5fdG9nZ2xlKCl9LF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9ZS5kaXNhYmxlLHI9ZS5yZWFkb25seSxvPXQud3JhcHBlci5hZGQodC5maWx0ZXJJbnB1dCkub2ZmKGMpLGE9dC5faW5wdXRXcmFwcGVyLm9mZih5KTtyfHxpP2k/KG8ucmVtb3ZlQXR0cih3KSxhLmFkZENsYXNzKGcpLnJlbW92ZUNsYXNzKGYpKTooYS5hZGRDbGFzcyhmKS5yZW1vdmVDbGFzcyhnKSxvLm9uKFwiZm9jdXNpblwiK2MseCh0Ll9mb2N1c2luSGFuZGxlcix0KSkub24oXCJmb2N1c291dFwiK2MseCh0Ll9mb2N1c291dEhhbmRsZXIsdCkpKToobi5yZW1vdmVBdHRyKGQpLnJlbW92ZUF0dHIodSksYS5hZGRDbGFzcyhmKS5yZW1vdmVDbGFzcyhnKS5vbih5LHQuX3RvZ2dsZUhvdmVyKSxvLmF0dHIodyxvLmRhdGEodykpLmF0dHIobSwhMSkuYXR0cih2LCExKS5vbihcImtleWRvd25cIitjLHgodC5fa2V5ZG93bix0KSkub24oXCJmb2N1c2luXCIrYyx4KHQuX2ZvY3VzaW5IYW5kbGVyLHQpKS5vbihcImZvY3Vzb3V0XCIrYyx4KHQuX2ZvY3Vzb3V0SGFuZGxlcix0KSkub24oXCJtb3VzZWRvd25cIitjLHgodC5fd3JhcHBlck1vdXNlZG93bix0KSksdC53cmFwcGVyLm9uKFwiY2xpY2tcIitjLHgodC5fd3JhcHBlckNsaWNrLHQpKSx0LmZpbHRlcklucHV0fHxvLm9uKFwia2V5cHJlc3NcIitjLHgodC5fa2V5cHJlc3MsdCkpKSxuLmF0dHIoZCxpKS5hdHRyKHUsciksby5hdHRyKG0saSkuYXR0cih2LHIpfSxfYWNjZXB0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPW4uZmlsdGVySW5wdXQmJm4uZmlsdGVySW5wdXRbMF09PT1zKCk7bi5fZm9jdXMoZSksbi5fZm9jdXNFbGVtZW50KG4ud3JhcHBlciksaSYmdD09PWwuVEFCJiZuLndyYXBwZXIuZm9jdXNvdXQoKX0sX29wdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybic8b3B0aW9uIHZhbHVlPVwiJytlKydcIj4nK3QrXCI8L29wdGlvbj5cIn0sX29wdGlvbkxhYmVsVGV4dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWUuZGF0YVRleHRGaWVsZCxuPWUub3B0aW9uTGFiZWw7cmV0dXJuIG4mJnQmJlwib2JqZWN0XCI9PXR5cGVvZiBuP3RoaXMuX3RleHQobik6bn0sX2RhdGE6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLHI9dC5vcHRpb25MYWJlbCxvPXQuZGF0YVRleHRGaWVsZCxhPXQuZGF0YVZhbHVlRmllbGQscz1lLmRhdGFTb3VyY2UudmlldygpLGw9cy5sZW5ndGgsYz1yLGQ9MDtpZihyJiZsKXtmb3IoXCJvYmplY3RcIj09dHlwZW9mIHI/Yz1yOm8mJihjPXt9LG89by5zcGxpdChcIi5cIiksYT1hLnNwbGl0KFwiLlwiKSxuKGMsYSxcIlwiKSxuKGMsbyxyKSksYz1uZXcgaS5kYXRhLk9ic2VydmFibGVBcnJheShbY10pO2w+ZDtkKyspYy5wdXNoKHNbZF0pO3M9Y31yZXR1cm4gc30sX3NlbGVjdEl0ZW06ZnVuY3Rpb24oKXtvLmZuLl9zZWxlY3RJdGVtLmNhbGwodGhpcyksdGhpcy5jdXJyZW50KCl8fHRoaXMuc2VsZWN0KDApfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1lLmtleUNvZGUscj1lLmFsdEtleSxvPW4udWxbMF07aT09PWwuTEVGVD9pPWwuVVA6aT09PWwuUklHSFQmJihpPWwuRE9XTiksZS5rZXlDb2RlPWksdD1uLl9tb3ZlKGUpLG4ucG9wdXAudmlzaWJsZSgpJiZuLmZpbHRlcklucHV0fHwoaT09PWwuSE9NRT8odD0hMCxlLnByZXZlbnREZWZhdWx0KCksbi5fc2VsZWN0KG8uZmlyc3RDaGlsZCkpOmk9PT1sLkVORCYmKHQ9ITAsZS5wcmV2ZW50RGVmYXVsdCgpLG4uX3NlbGVjdChvLmxhc3RDaGlsZCkpKSxyJiZpPT09bC5VUCYmbi5fZm9jdXNFbGVtZW50KG4ud3JhcHBlcikscnx8dHx8IW4uZmlsdGVySW5wdXR8fG4uX3NlYXJjaCgpfSxfc2VsZWN0TmV4dDpmdW5jdGlvbihlLG4pe2Zvcih2YXIgaSxyPXRoaXMsbz1uLGE9ci5fZGF0YSgpLHM9YS5sZW5ndGgsbD1yLm9wdGlvbnMuaWdub3JlQ2FzZSxjPWZ1bmN0aW9uKG4saSl7cmV0dXJuIG4rPVwiXCIsbCYmKG49bi50b0xvd2VyQ2FzZSgpKSwwPT09bi5pbmRleE9mKGUpPyhyLl9zZWxlY3QoaSksci5fdHJpZ2dlckV2ZW50cygpLCEwKTp0fTtzPm47bisrKWlmKGk9ci5fdGV4dChhW25dKSxpJiZjKGksbikpcmV0dXJuITA7aWYobz4wJiZzPm8pZm9yKG49MDtvPj1uO24rKylpZihpPXIuX3RleHQoYVtuXSksaSYmYyhpLG4pKXJldHVybiEwO3JldHVybiExfSxfa2V5cHJlc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG89dGhpczswIT09ZS53aGljaCYmZS5rZXlDb2RlIT09aS5rZXlzLkVOVEVSJiYodD1TdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGV8fGUua2V5Q29kZSksbj1vLnNlbGVjdGVkSW5kZXgscj1vLl93b3JkLG8ub3B0aW9ucy5pZ25vcmVDYXNlJiYodD10LnRvTG93ZXJDYXNlKCkpLFwiIFwiPT09dCYmZS5wcmV2ZW50RGVmYXVsdCgpLG8uX2xhc3Q9PT10JiYxPj1yLmxlbmd0aCYmbj4tMSYmKHJ8fChyPXQpLG8uX3NlbGVjdE5leHQocixuKzEpKXx8KG8uX3dvcmQ9cit0LG8uX2xhc3Q9dCxvLl9zZWFyY2goKSkpfSxfcG9wdXBPcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wb3B1cDtlLndyYXBwZXI9aS53cmFwKGUuZWxlbWVudCksZS5lbGVtZW50LmNsb3Nlc3QoXCIua20tcm9vdFwiKVswXSYmKGUud3JhcHBlci5hZGRDbGFzcyhcImttLXBvcHVwIGttLXdpZGdldFwiKSx0aGlzLndyYXBwZXIuYWRkQ2xhc3MoXCJrbS13aWRnZXRcIikpfSxfcG9wdXA6ZnVuY3Rpb24oKXtvLmZuLl9wb3B1cC5jYWxsKHRoaXMpLHRoaXMucG9wdXAub25lKFwib3BlblwiLHgodGhpcy5fcG9wdXBPcGVuLHRoaXMpKX0sX2ZvY3VzRWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD1zKCksbj10aGlzLndyYXBwZXIsaT10aGlzLmZpbHRlcklucHV0LHI9ZT09PWk/bjppO2kmJnJbMF09PT10JiYodGhpcy5fcHJldmVudD0hMCx0aGlzLl9mb2N1c2VkPWUuZm9jdXMoKSl9LF9maWx0ZXI6ZnVuY3Rpb24oZSl7dmFyIG4saTtlJiYobj10aGlzLGk9bi5vcHRpb25zLmlnbm9yZUNhc2UsaSYmKGU9ZS50b0xvd2VyQ2FzZSgpKSxuLl9zZWxlY3QoZnVuY3Rpb24ocil7dmFyIG89bi5fdGV4dChyKTtyZXR1cm4gbyE9PXQ/KG8rPVwiXCIsaSYmKG89by50b0xvd2VyQ2FzZSgpKSwwPT09by5pbmRleE9mKGUpKTp0fSkpfSxfc2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPWUuZGF0YVNvdXJjZSxpPWUuc2VsZWN0ZWRJbmRleCxyPWUuX3dvcmQ7aWYoY2xlYXJUaW1lb3V0KGUuX3R5cGluZyksXCJub25lXCIhPT1lLm9wdGlvbnMuZmlsdGVyKWUuX3R5cGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ZS5maWx0ZXJJbnB1dC52YWwoKTtlLl9wcmV2IT09dCYmKGUuX3ByZXY9dCxlLnNlYXJjaCh0KSksZS5fdHlwaW5nPW51bGx9LGUub3B0aW9ucy5kZWxheSk7ZWxzZXtpZihlLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe2UuX3dvcmQ9XCJcIn0sZS5vcHRpb25zLmRlbGF5KSwtMT09PWkmJihpPTApLCFlLnVsWzBdLmZpcnN0Q2hpbGQpcmV0dXJuIG4ub25lKGgsZnVuY3Rpb24oKXtuLmRhdGEoKVswXSYmaT4tMSYmZS5fc2VsZWN0TmV4dChyLGkpfSkuZmV0Y2goKSx0O2UuX3NlbGVjdE5leHQocixpKSxlLl90cmlnZ2VyRXZlbnRzKCl9fSxfc2VsZWN0OmZ1bmN0aW9uKGUpe3ZhciBuLGksbz10aGlzLGE9by5fY3VycmVudCxzPW51bGw7cmV0dXJuIGU9by5fZ2V0KGUpLGUmJmVbMF0mJiFlLmhhc0NsYXNzKF8pJiYoby5fc3RhdGU9PT1iJiYoby5fc3RhdGU9ayksYSYmYS5yZW1vdmVDbGFzcyhfKSxpPXIuTGlzdC5pbkFycmF5KGVbMF0sby51bFswXSksaT4tMSYmKG8uc2VsZWN0ZWRJbmRleD1pLHM9by5fZGF0YSgpW2ldLG49by5fdmFsdWUocyksbnVsbD09PW4mJihuPVwiXCIpLG8uX3RleHRBY2Nlc3NvcihzKSxvLl9hY2Nlc3NvcihuIT09dD9uOm8uX3RleHQocyksaSksby5fc2VsZWN0ZWRWYWx1ZT1vLl9hY2Nlc3NvcigpLG8uY3VycmVudChlLmFkZENsYXNzKF8pKSxvLl9vcHRpb25JRCYmby5fY3VycmVudC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSkpLHN9LF90cmlnZ2VyRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC52aXNpYmxlKCl8fCh0aGlzLl90cmlnZ2VyQ2FzY2FkZSgpLHRoaXMuX2NoYW5nZSgpKX0sX21vYmlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnBvcHVwLG49dC5lbGVtZW50LnBhcmVudHMoXCIua20tcm9vdFwiKS5lcSgwKTtuLmxlbmd0aCYmYSYmKHQub3B0aW9ucy5hbmltYXRpb24ub3Blbi5lZmZlY3RzPWEuYW5kcm9pZHx8YS5tZWVnbz9cImZhZGVJblwiOmEuaW9zfHxhLndwP1wic2xpZGVJbjp1cFwiOnQub3B0aW9ucy5hbmltYXRpb24ub3Blbi5lZmZlY3RzKX0sX2ZpbHRlckhlYWRlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcy5vcHRpb25zLGk9XCJub25lXCIhPT1uLmZpbHRlcjt0aGlzLmZpbHRlcklucHV0JiYodGhpcy5maWx0ZXJJbnB1dC5vZmYoYykucGFyZW50KCkucmVtb3ZlKCksdGhpcy5maWx0ZXJJbnB1dD1udWxsKSxpJiYodD0nPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktc2VhcmNoXCI+c2VsZWN0PC9zcGFuPicsdGhpcy5maWx0ZXJJbnB1dD1lKCc8aW5wdXQgY2xhc3M9XCJrLXRleHRib3hcIi8+JykuYXR0cih7cm9sZTpcImxpc3Rib3hcIixcImFyaWEtaGFzcG9wdXBcIjohMCxcImFyaWEtZXhwYW5kZWRcIjohMX0pLHRoaXMubGlzdC5wcmVwZW5kKGUoJzxzcGFuIGNsYXNzPVwiay1saXN0LWZpbHRlclwiIC8+JykuYXBwZW5kKHRoaXMuZmlsdGVySW5wdXQuYWRkKHQpKSkpfSxfc3BhbjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ud3JhcHBlcixyPVwic3Bhbi5rLWlucHV0XCI7dD1pLmZpbmQociksdFswXXx8KGkuYXBwZW5kKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1kcm9wZG93bi13cmFwIGstc3RhdGUtZGVmYXVsdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWlucHV0XCI+Jm5ic3A7PC9zcGFuPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKS5hcHBlbmQobi5lbGVtZW50KSx0PWkuZmluZChyKSksbi5zcGFuPXQsbi5faW5wdXRXcmFwcGVyPWUoaVswXS5maXJzdENoaWxkKSxuLl9hcnJvdz1pLmZpbmQoXCIuay1pY29uXCIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuZWxlbWVudCxpPW5bMF07ZT1uLnBhcmVudCgpLGUuaXMoXCJzcGFuLmstd2lkZ2V0XCIpfHwoZT1uLndyYXAoXCI8c3BhbiAvPlwiKS5wYXJlbnQoKSxlWzBdLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0KSxuLmhpZGUoKSx0Ll9mb2N1c2VkPXQud3JhcHBlcj1lLmFkZENsYXNzKFwiay13aWRnZXQgay1kcm9wZG93biBrLWhlYWRlclwiKS5hZGRDbGFzcyhpLmNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiXCIpLmF0dHIoe3Vuc2VsZWN0YWJsZTpcIm9uXCIscm9sZTpcImxpc3Rib3hcIixcImFyaWEtaGFzcG9wdXBcIjohMCxcImFyaWEtZXhwYW5kZWRcIjohMX0pfSxfY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5vcHRpb25zLm9wdGlvbkxhYmVsO3JldHVybiBlLm9wdGlvbnMudmFsdWU9XCJcIixlLl9zZWxlY3RlZFZhbHVlPVwiXCIsZS5kYXRhU291cmNlLnZpZXcoKVswXSYmKG58fGUuX3VzZXJUcmlnZ2VyZWQpPyhlLnNlbGVjdCgwKSx0KTooZS5zZWxlY3RlZEluZGV4PS0xLGUuZWxlbWVudC52YWwoXCJcIiksZS5fdGV4dEFjY2Vzc29yKGUub3B0aW9ucy5vcHRpb25MYWJlbCksdCl9LF9pbnB1dFRlbXBsYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy52YWx1ZVRlbXBsYXRlO249bj9pLnRlbXBsYXRlKG4pOmUucHJveHkoaS50ZW1wbGF0ZShcIiM6dGhpcy5fdGV4dChkYXRhKSNcIix7dXNlV2l0aEJsb2NrOiExfSksdCksdC52YWx1ZVRlbXBsYXRlPW59LF90ZXh0QWNjZXNzb3I6ZnVuY3Rpb24ocil7dmFyIG8sYT10aGlzLmRhdGFJdGVtKCkscz10aGlzLm9wdGlvbnMsbD10aGlzLnNwYW47cmV0dXJuIHI9PT10P2wudGV4dCgpOihlLmlzUGxhaW5PYmplY3Qocil8fHIgaW5zdGFuY2VvZiBpLmRhdGEuT2JzZXJ2YWJsZU9iamVjdD9hPXI6YSYmdGhpcy5fdGV4dChhKT09PXJ8fChzLmRhdGFUZXh0RmllbGQ/KGE9e30sbihhLHMuZGF0YVRleHRGaWVsZC5zcGxpdChcIi5cIiksciksbihhLHMuZGF0YVZhbHVlRmllbGQuc3BsaXQoXCIuXCIpLHRoaXMuX2FjY2Vzc29yKCkpKTphPXIpLG89ZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bC5nZXQoKSxkYXRhOlt7ZGF0YUl0ZW06YX1dfX0sdGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLG8pLGwuaHRtbCh0aGlzLnZhbHVlVGVtcGxhdGUoYSkpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixvKSx0KX19KTtyLnBsdWdpbihDKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLnVpLHI9aS5MaXN0LG89aS5TZWxlY3QsYT1uLmNhcmV0LHM9bi5zdXBwb3J0LGw9cy5wbGFjZWhvbGRlcixjPW4uX2FjdGl2ZUVsZW1lbnQsZD1uLmtleXMsdT1cIi5rZW5kb0NvbWJvQm94XCIsaD1cImNsaWNrXCIrdSxwPVwibW91c2Vkb3duXCIrdSxmPVwiZGlzYWJsZWRcIixnPVwicmVhZG9ubHlcIixtPVwiY2hhbmdlXCIsdj1cImstc3RhdGUtZGVmYXVsdFwiLF89XCJrLXN0YXRlLWZvY3VzZWRcIix5PVwiay1zdGF0ZS1kaXNhYmxlZFwiLHc9XCJhcmlhLWRpc2FibGVkXCIsYj1cImFyaWEtcmVhZG9ubHlcIixrPVwiay1zdGF0ZS1zZWxlY3RlZFwiLHg9XCJmaWx0ZXJcIixDPVwiYWNjZXB0XCIsUz1cInJlYmluZFwiLFQ9XCJtb3VzZWVudGVyXCIrdStcIiBtb3VzZWxlYXZlXCIrdSxEPW51bGwsQT1lLnByb3h5LEU9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxpKXt2YXIgcixhPXRoaXM7XG5hLm5zPXUsaT1lLmlzQXJyYXkoaSk/e2RhdGFTb3VyY2U6aX06aSxvLmZuLmluaXQuY2FsbChhLHQsaSksaT1hLm9wdGlvbnMsdD1hLmVsZW1lbnQub24oXCJmb2N1c1wiK3UsQShhLl9mb2N1c0hhbmRsZXIsYSkpLGkucGxhY2Vob2xkZXI9aS5wbGFjZWhvbGRlcnx8dC5hdHRyKFwicGxhY2Vob2xkZXJcIiksYS5fcmVzZXQoKSxhLl93cmFwcGVyKCksYS5faW5wdXQoKSxhLl90YWJpbmRleChhLmlucHV0KSxhLl9wb3B1cCgpLGEuX2RhdGFTb3VyY2UoKSxhLl9pZ25vcmVDYXNlKCksYS5fZW5hYmxlKCksYS5fb2xkSW5kZXg9YS5zZWxlY3RlZEluZGV4PS0xLGEuX2Nhc2NhZGUoKSxhLl9hcmlhKCksaS5hdXRvQmluZD9hLl9maWx0ZXJTb3VyY2UoKToocj1pLnRleHQsIXImJmEuX2lzU2VsZWN0JiYocj10LmNoaWxkcmVuKFwiOnNlbGVjdGVkXCIpLnRleHQoKSksciYmKGEuaW5wdXQudmFsKHIpLGEuX3ByZXY9cikpLHJ8fGEuX3BsYWNlaG9sZGVyKCksbi5ub3RpZnkoYSl9LG9wdGlvbnM6e25hbWU6XCJDb21ib0JveFwiLGVuYWJsZWQ6ITAsaW5kZXg6LTEsdGV4dDpudWxsLHZhbHVlOm51bGwsYXV0b0JpbmQ6ITAsZGVsYXk6MjAwLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhVmFsdWVGaWVsZDpcIlwiLG1pbkxlbmd0aDowLGhlaWdodDoyMDAsaGlnaGxpZ2h0Rmlyc3Q6ITAsdGVtcGxhdGU6XCJcIixmaWx0ZXI6XCJub25lXCIscGxhY2Vob2xkZXI6XCJcIixzdWdnZXN0OiExLGNhc2NhZGVGcm9tOlwiXCIsY2FzY2FkZUZyb21GaWVsZDpcIlwiLGlnbm9yZUNhc2U6ITAsYW5pbWF0aW9uOnt9fSxldmVudHM6W1wib3BlblwiLFwiY2xvc2VcIixtLFwic2VsZWN0XCIsXCJmaWx0ZXJpbmdcIixcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIixcImNhc2NhZGVcIl0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtvLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX3RlbXBsYXRlKCksdGhpcy5fYWNjZXNzb3JzKCksdGhpcy5fYXJpYSgpfSxjdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9jdXJyZW50O3JldHVybiBlPT09dD9pOihpJiZpLnJlbW92ZUNsYXNzKGspLG8uZm4uY3VycmVudC5jYWxsKG4sZSksdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuaW5wdXQub2ZmKHUpLGUuZWxlbWVudC5vZmYodSksZS5faW5wdXRXcmFwcGVyLm9mZih1KSxvLmZuLmRlc3Ryb3kuY2FsbChlKX0sX2ZvY3VzSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuaW5wdXQuZm9jdXMoKX0sX2Fycm93Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLl90b2dnbGUoKX0sX2lucHV0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dFdyYXBwZXIuYWRkQ2xhc3MoXyksdGhpcy5fcGxhY2Vob2xkZXIoITEpfSxfaW5wdXRGb2N1c291dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKF8pLGNsZWFyVGltZW91dChlLl90eXBpbmcpLGUuX3R5cGluZz1udWxsLGUub3B0aW9ucy50ZXh0IT09ZS5pbnB1dC52YWwoKSYmZS50ZXh0KGUudGV4dCgpKSxlLl9wbGFjZWhvbGRlcigpLGUuX2JsdXIoKSxlLmVsZW1lbnQuYmx1cigpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGlzYWJsZSxpPWUucmVhZG9ubHkscj10Ll9pbnB1dFdyYXBwZXIub2ZmKHUpLG89dC5lbGVtZW50LmFkZCh0LmlucHV0Lm9mZih1KSksYT10Ll9hcnJvdy5wYXJlbnQoKS5vZmYoaCtcIiBcIitwKTtpfHxuPyhyLmFkZENsYXNzKG4/eTp2KS5yZW1vdmVDbGFzcyhuP3Y6eSksby5hdHRyKGYsbikuYXR0cihnLGkpLmF0dHIodyxuKS5hdHRyKGIsaSkpOihyLmFkZENsYXNzKHYpLnJlbW92ZUNsYXNzKHkpLm9uKFQsdC5fdG9nZ2xlSG92ZXIpLG8ucmVtb3ZlQXR0cihmKS5yZW1vdmVBdHRyKGcpLmF0dHIodywhMSkuYXR0cihiLCExKSxhLm9uKGgsQSh0Ll9hcnJvd0NsaWNrLHQpKS5vbihwLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLHQuaW5wdXQub24oXCJrZXlkb3duXCIrdSxBKHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNcIit1LEEodC5faW5wdXRGb2N1cyx0KSkub24oXCJmb2N1c291dFwiK3UsQSh0Ll9pbnB1dEZvY3Vzb3V0LHQpKSl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fc3RhdGUsbj1lLmRhdGFTb3VyY2Uub3B0aW9ucy5zZXJ2ZXJGaWx0ZXJpbmc7ZS5wb3B1cC52aXNpYmxlKCl8fCghZS51bFswXS5maXJzdENoaWxkJiZ0IT09eHx8dD09PUMmJiFuPyhlLl9vcGVuPSEwLGUuX3N0YXRlPVMsZS5fZmlsdGVyU291cmNlKCkpOihlLnBvcHVwLm9wZW4oKSxlLl9zY3JvbGwoZS5fY3VycmVudCkpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBpLHIsbz10aGlzLGE9by51bFswXSxzPW8ub3B0aW9ucyxsPW8uX3N0YXRlLGQ9by5fZGF0YSgpLHU9ZC5sZW5ndGgsaD0hMDtvLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLG8udHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLGEuaW5uZXJIVE1MPW4ucmVuZGVyKG8udGVtcGxhdGUsZCksby5faGVpZ2h0KHUpLG8ucG9wdXAudmlzaWJsZSgpJiZvLnBvcHVwLl9wb3NpdGlvbigpLG8uX2lzU2VsZWN0JiYoaT1vLmVsZW1lbnRbMF0uY2hpbGRyZW5bMF0sbD09PVMmJihvLl9zdGF0ZT1cIlwiKSxyPW8uX29wdGlvbixvLl9vcHRpb249dCxvLl9vcHRpb25zKGQpLHImJnJbMF0uc2VsZWN0ZWQ/by5fY3VzdG9tKHIudmFsKCksaCk6by5fYm91bmR8fGl8fG8uX2N1c3RvbShcIlwiLGgpKSx1JiYocy5oaWdobGlnaHRGaXJzdCYmby5jdXJyZW50KGUoYS5maXJzdENoaWxkKSkscy5zdWdnZXN0JiZvLmlucHV0LnZhbCgpJiZvLl9yZXF1ZXN0IT09dCYmby5zdWdnZXN0KGUoYS5maXJzdENoaWxkKSkpLGw9PT14fHxvLl9mZXRjaHx8by5fc2VsZWN0SXRlbSgpLG8uX29wZW4mJihvLl9vcGVuPSExLG8uX3R5cGluZyYmby5pbnB1dFswXSE9PWMoKT9vLnBvcHVwLmNsb3NlKCk6by50b2dnbGUoISF1KSxvLl90eXBpbmc9bnVsbCksby5fdG91Y2hTY3JvbGxlciYmby5fdG91Y2hTY3JvbGxlci5yZXNldCgpLG8uX21ha2VVbnNlbGVjdGFibGUoKSxvLl9oaWRlQnVzeSgpLG8uX2JvdW5kPSEwLG8uX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksby50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSxzdWdnZXN0OmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxvPWkuaW5wdXRbMF0scz1pLnRleHQoKSxsPWEobylbMF0sdT1pLl9sYXN0O3JldHVybiB1PT1kLkJBQ0tTUEFDRXx8dT09ZC5ERUxFVEU/KGkuX2xhc3Q9dCx0KTooZT1lfHxcIlwiLFwic3RyaW5nXCIhPXR5cGVvZiBlJiYobj1yLmluQXJyYXkoZVswXSxpLnVsWzBdKSxlPW4+LTE/aS5fdGV4dChpLmRhdGFTb3VyY2UudmlldygpW25dKTpcIlwiKSwwPj1sJiYobD1zLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlLnRvTG93ZXJDYXNlKCkpKzEpLGU/KG49ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yocy50b0xvd2VyQ2FzZSgpKSxuPi0xJiYocys9ZS5zdWJzdHJpbmcobitzLmxlbmd0aCkpKTpzPXMuc3Vic3RyaW5nKDAsbCkscy5sZW5ndGg9PT1sJiZlfHwoby52YWx1ZT1zLG89PT1jKCkmJmEobyxsLHMubGVuZ3RoKSksdCl9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzO3JldHVybiBlPW51bGw9PT1lP1wiXCI6ZSxuPXRoaXMsaT1uLmlucHV0WzBdLHI9bi5vcHRpb25zLmlnbm9yZUNhc2Usbz1lLGU9PT10P2kudmFsdWU6KGE9bi5kYXRhSXRlbSgpLGEmJm4uX3RleHQoYSk9PT1lJiYocz1uLl92YWx1ZShhKSxudWxsPT09cz9zPVwiXCI6cys9XCJcIixzPT09bi5fb2xkKT8obi5fdHJpZ2dlckNhc2NhZGUoKSx0KToociYmKG89by50b0xvd2VyQ2FzZSgpKSxuLl9zZWxlY3QoZnVuY3Rpb24oZSl7cmV0dXJuIGU9bi5fdGV4dChlKSxyJiYoZT0oZStcIlwiKS50b0xvd2VyQ2FzZSgpKSxlPT09b30pLDA+bi5zZWxlY3RlZEluZGV4JiYobi5fY3VzdG9tKGUpLGkudmFsdWU9ZSksbi5fcHJldj1pLnZhbHVlLG4uX3RyaWdnZXJDYXNjYWRlKCksdCkpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKGUsITApfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbixpPXRoaXMscj1pLm9wdGlvbnM7cmV0dXJuIGU9PT10P2kuX2FjY2Vzc29yKCk6KG51bGwhPT1lJiYoZT1cIlwiK2UpLGkuX3NlbGVjdGVkVmFsdWU9ZSwhaS5fb3BlbiYmZSYmaS5fZmV0Y2hJdGVtcyhlKXx8KG49aS5faW5kZXgoZSksbj4tMT9pLnNlbGVjdChuKTooaS5jdXJyZW50KEQpLGkuX2N1c3RvbShlKSwoci52YWx1ZSE9PWV8fHIudGV4dCE9PWkuaW5wdXQudmFsKCkpJiYoaS50ZXh0KGUpLGkuX3BsYWNlaG9sZGVyKCkpKSxpLl9vbGQ9aS5fYWNjZXNzb3IoKSxpLl9vbGRJbmRleD1pLnNlbGVjdGVkSW5kZXgpLHQpfSxfYWNjZXB0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90Ll9mb2N1cyhlKToodC50ZXh0KHQudGV4dCgpKSx0Ll9jaGFuZ2UoKSl9LF9jdXN0b206ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9aS5lbGVtZW50LG89aS5fb3B0aW9uO2kuX3N0YXRlIT09eHx8bnx8KGkuX3N0YXRlPUMpLGkuX2lzU2VsZWN0PyhvfHwobz1pLl9vcHRpb249ZShcIjxvcHRpb24vPlwiKSxyLmFwcGVuZChvKSksby50ZXh0KHQpLG9bMF0uc2VsZWN0ZWQ9ITApOnIudmFsKHQpLGkuX3NlbGVjdGVkVmFsdWU9dH0sX2ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9bi5kYXRhU291cmNlLG89aS5pZ25vcmVDYXNlLGE9ZnVuY3Rpb24oaSl7dmFyIHI9bi5fdGV4dChpKTtyZXR1cm4gciE9PXQ/KHIrPVwiXCIsXCJcIiE9PXImJlwiXCI9PT1lPyExOihvJiYocj1yLnRvTG93ZXJDYXNlKCkpLDA9PT1yLmluZGV4T2YoZSkpKTp0fTtyZXR1cm4gbyYmKGU9ZS50b0xvd2VyQ2FzZSgpKSxuLnVsWzBdLmZpcnN0Q2hpbGQ/KC0xIT09bi5faGlnaGxpZ2h0KGEpJiYoaS5zdWdnZXN0JiZuLl9jdXJyZW50JiZuLnN1Z2dlc3Qobi5fY3VycmVudCksbi5vcGVuKCkpLG4uX2hpZGVCdXN5KCksdCk6KHIub25lKG0sZnVuY3Rpb24oKXtyLnZpZXcoKVswXSYmbi5zZWFyY2goZSl9KS5mZXRjaCgpLHQpfSxfaGlnaGxpZ2h0OmZ1bmN0aW9uKG4pe3ZhciBpLG89dGhpcztyZXR1cm4gbj09PXR8fG51bGw9PT1uPy0xOihuPW8uX2dldChuKSxpPXIuaW5BcnJheShuWzBdLG8udWxbMF0pLC0xPT1pJiYoby5vcHRpb25zLmhpZ2hsaWdodEZpcnN0JiYhby50ZXh0KCk/KG49by51bFswXS5maXJzdENoaWxkLG4mJihuPWUobikpKTpuPUQpLG8uY3VycmVudChuKSxpKX0sX2lucHV0OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50LnJlbW92ZUNsYXNzKFwiay1pbnB1dFwiKVswXSxyPWkuYWNjZXNzS2V5LG89bi53cmFwcGVyLGE9XCJpbnB1dC5rLWlucHV0XCIscz1pLm5hbWV8fFwiXCI7cyYmKHM9J25hbWU9XCInK3MrJ19pbnB1dFwiICcpLHQ9by5maW5kKGEpLHRbMF18fChvLmFwcGVuZCgnPHNwYW4gdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWRyb3Bkb3duLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCI+PGlucHV0ICcrcysnY2xhc3M9XCJrLWlucHV0XCIgdHlwZT1cInRleHRcIiBhdXRvY29tcGxldGU9XCJvZmZcIi8+PHNwYW4gdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLXNlbGVjdFwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKS5hcHBlbmQobi5lbGVtZW50KSx0PW8uZmluZChhKSksdFswXS5zdHlsZS5jc3NUZXh0PWkuc3R5bGUuY3NzVGV4dCxpLm1heExlbmd0aD4tMSYmKHRbMF0ubWF4TGVuZ3RoPWkubWF4TGVuZ3RoKSx0LmFkZENsYXNzKGkuY2xhc3NOYW1lKS52YWwodGhpcy5vcHRpb25zLnRleHR8fGkudmFsdWUpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0Omkuc3R5bGUuaGVpZ2h0fSkuYXR0cih7cm9sZTpcImNvbWJvYm94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KS5zaG93KCksbCYmdC5hdHRyKFwicGxhY2Vob2xkZXJcIixuLm9wdGlvbnMucGxhY2Vob2xkZXIpLHImJihpLmFjY2Vzc0tleT1cIlwiLHRbMF0uYWNjZXNzS2V5PXIpLG4uX2ZvY3VzZWQ9bi5pbnB1dD10LG4uX2lucHV0V3JhcHBlcj1lKG9bMF0uZmlyc3RDaGlsZCksbi5fYXJyb3c9by5maW5kKFwiLmstaWNvblwiKS5hdHRyKHtyb2xlOlwiYnV0dG9uXCIsdGFiSW5kZXg6LTF9KSxpLmlkJiZuLl9hcnJvdy5hdHRyKFwiYXJpYS1jb250cm9sc1wiLG4udWxbMF0uaWQpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5rZXlDb2RlO3QuX2xhc3Q9bixjbGVhclRpbWVvdXQodC5fdHlwaW5nKSx0Ll90eXBpbmc9bnVsbCxuPT1kLlRBQnx8dC5fbW92ZShlKXx8dC5fc2VhcmNoKCl9LF9wbGFjZWhvbGRlcjpmdW5jdGlvbihlKXtpZighbCl7dmFyIG4saT10aGlzLHI9aS5pbnB1dCxvPWkub3B0aW9ucy5wbGFjZWhvbGRlcjtpZihvKXtpZihuPWkudmFsdWUoKSxlPT09dCYmKGU9IW4pLHIudG9nZ2xlQ2xhc3MoXCJrLXJlYWRvbmx5XCIsZSksIWUpe2lmKG4pcmV0dXJuO289XCJcIn1yLnZhbChvKSxvfHxyWzBdIT09YygpfHxhKHJbMF0sMCwwKX19fSxfc2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl90eXBpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUudGV4dCgpO2UuX3ByZXYhPT10JiYoZS5fcHJldj10LGUuc2VhcmNoKHQpKSxlLl90eXBpbmc9bnVsbH0sZS5vcHRpb25zLmRlbGF5KX0sX3NlbGVjdDpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcyxvPXIuX2RhdGEoKSxhPXIuX2hpZ2hsaWdodChlKTtyLnNlbGVjdGVkSW5kZXg9YSwtMSE9PWEmJihyLl9zdGF0ZT09PXgmJihyLl9zdGF0ZT1DKSxyLl9jdXJyZW50LmFkZENsYXNzKGspLG89b1thXSxuPXIuX3RleHQobyksaT1yLl92YWx1ZShvKSxudWxsPT09aSYmKGk9XCJcIiksci5fcHJldj1yLmlucHV0WzBdLnZhbHVlPW4sci5fYWNjZXNzb3IoaSE9PXQ/aTpuLGEpLHIuX3NlbGVjdGVkVmFsdWU9ci5fYWNjZXNzb3IoKSxyLl9wbGFjZWhvbGRlcigpLHIuX29wdGlvbklEJiZyLl9jdXJyZW50LmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49dC5wYXJlbnQoKTtuLmlzKFwic3Bhbi5rLXdpZGdldFwiKXx8KG49dC5oaWRlKCkud3JhcChcIjxzcGFuIC8+XCIpLnBhcmVudCgpLG5bMF0uc3R5bGUuY3NzVGV4dD10WzBdLnN0eWxlLmNzc1RleHQpLGUud3JhcHBlcj1uLmFkZENsYXNzKFwiay13aWRnZXQgay1jb21ib2JveCBrLWhlYWRlclwiKS5hZGRDbGFzcyh0WzBdLmNsYXNzTmFtZSkuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxfY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5fc2VsZWN0ZWRWYWx1ZXx8ZS52YWx1ZSgpLHI9aSYmLTE9PT1lLnNlbGVjdGVkSW5kZXg7KHR8fCFpfHxyKSYmKG4udmFsdWUoXCJcIiksbi5vcHRpb25zLnZhbHVlPVwiXCIpfX0pO2kucGx1Z2luKEUpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbjtpZihudWxsPT09ZSYmbnVsbCE9PXR8fG51bGwhPT1lJiZudWxsPT09dClyZXR1cm4hMTtpZihuPWUubGVuZ3RoLG4hPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO24tLTspaWYoZVtuXSE9PXRbbl0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gaSh0KXt2YXIgbj10LmZpcnN0Q2hpbGQ7cmV0dXJuIG4mJlwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobj1vKG4saykpLG4/ZShuKTpufWZ1bmN0aW9uIHIodCl7dmFyIG49dC5sYXN0Q2hpbGQ7cmV0dXJuIG4mJlwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobj1vKG4seCkpLG4/ZShuKTpufWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gZT1lW3RdLGUmJlwibm9uZVwiPT09ZS5zdHlsZS5kaXNwbGF5JiYoZT1vKGUsdCkpLGV9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPXMuTGlzdCxjPWEua2V5cyxkPWEuX2FjdGl2ZUVsZW1lbnQsdT1hLmRhdGEuT2JzZXJ2YWJsZUFycmF5LGg9ZS5wcm94eSxwPVwiaWRcIixmPVwibGlcIixnPVwiYWNjZXB0XCIsbT1cImZpbHRlclwiLHY9XCJvcGVuXCIsXz1cImNsb3NlXCIseT1cImNoYW5nZVwiLHc9XCJwcm9ncmVzc1wiLGI9XCJzZWxlY3RcIixrPVwibmV4dFNpYmxpbmdcIix4PVwicHJldmlvdXNTaWJsaW5nXCIsQz0nIHN0eWxlPVwiZGlzcGxheTpub25lXCInLFM9XCJhcmlhLWRpc2FibGVkXCIsVD1cImFyaWEtcmVhZG9ubHlcIixEPVwiay1zdGF0ZS1mb2N1c2VkXCIsQT1cImstbG9hZGluZy1oaWRkZW5cIixFPVwiay1zdGF0ZS1ob3ZlclwiLE09XCJrLXN0YXRlLWRpc2FibGVkXCIsUD1cImRpc2FibGVkXCIsST1cInJlYWRvbmx5XCIsej1cIi5rZW5kb011bHRpU2VsZWN0XCIsRj1cImNsaWNrXCIreixSPVwia2V5ZG93blwiK3osQj1cIm1vdXNlZW50ZXJcIit6LEw9XCJtb3VzZWxlYXZlXCIreixPPUIrXCIgXCIrTCxIPS9cIi9nLE49ZS5pc0FycmF5LFY9W1wiZm9udC1mYW1pbHlcIixcImZvbnQtc2l6ZVwiLFwiZm9udC1zdHJldGNoXCIsXCJmb250LXN0eWxlXCIsXCJmb250LXdlaWdodFwiLFwibGV0dGVyLXNwYWNpbmdcIixcInRleHQtdHJhbnNmb3JtXCIsXCJsaW5lLWhlaWdodFwiXSxVPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscixvPXRoaXM7by5ucz16LGwuZm4uaW5pdC5jYWxsKG8sdCxuKSxvLl93cmFwcGVyKCksby5fdGFnTGlzdCgpLG8uX2lucHV0KCksby5fdGV4dENvbnRhaW5lcigpLG8uX2xvYWRlcigpLG8uX3RhYmluZGV4KG8uaW5wdXQpLHQ9by5lbGVtZW50LmF0dHIoXCJtdWx0aXBsZVwiLFwibXVsdGlwbGVcIikuaGlkZSgpLG49by5vcHRpb25zLHI9bi52YWx1ZSxuLnBsYWNlaG9sZGVyfHwobi5wbGFjZWhvbGRlcj10LmRhdGEoXCJwbGFjZWhvbGRlclwiKSksaT10LmF0dHIocCksaSYmKG8uX3RhZ0lEPWkrXCJfdGFnX2FjdGl2ZVwiLGkrPVwiX3RhZ2xpc3RcIixvLnRhZ0xpc3QuYXR0cihwLGkpKSxvLl9hcmlhKGkpLG8uX2RhdGFTb3VyY2UoKSxvLl9pZ25vcmVDYXNlKCksby5fcG9wdXAoKSxvLl92YWx1ZXM9W10sby5fZGF0YUl0ZW1zPVtdLG8uX3Jlc2V0KCksby5fZW5hYmxlKCksby5fcGxhY2Vob2xkZXIoKSxuLmF1dG9CaW5kP28uZGF0YVNvdXJjZS5mZXRjaCgpOnImJihOKHIpfHwocj1bcl0pLChlLmlzUGxhaW5PYmplY3QoclswXSl8fCFuLmRhdGFWYWx1ZUZpZWxkKSYmKG8uX3JldHJpZXZlRGF0YT0hMCxvLmRhdGFTb3VyY2UuZGF0YShyKSxvLnZhbHVlKG8uX2luaXRpYWxWYWx1ZXMpKSksYS5ub3RpZnkobyl9LG9wdGlvbnM6e25hbWU6XCJNdWx0aVNlbGVjdFwiLGVuYWJsZWQ6ITAsYXV0b0JpbmQ6ITAsYXV0b0Nsb3NlOiEwLGhpZ2hsaWdodEZpcnN0OiEwLGRhdGFUZXh0RmllbGQ6XCJcIixkYXRhVmFsdWVGaWVsZDpcIlwiLGZpbHRlcjpcInN0YXJ0c3dpdGhcIixpZ25vcmVDYXNlOiEwLG1pbkxlbmd0aDowLGRlbGF5OjEwMCx2YWx1ZTpudWxsLG1heFNlbGVjdGVkSXRlbXM6bnVsbCxpdGVtVGVtcGxhdGU6XCJcIix0YWdUZW1wbGF0ZTpcIlwiLHBsYWNlaG9sZGVyOlwiXCIsaGVpZ2h0OjIwMCxhbmltYXRpb246e319LGV2ZW50czpbdixfLHksYixcImZpbHRlcmluZ1wiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiXSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmdGhpcy5kYXRhU291cmNlLmZldGNoKCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7bC5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZSgpLHRoaXMuX2FjY2Vzc29ycygpLHRoaXMuX2FyaWEodGhpcy50YWdMaXN0LmF0dHIocCkpfSxjdXJyZW50OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnJlbnRUYWcobnVsbCksbC5mbi5jdXJyZW50LmNhbGwodGhpcyxlKX0sY3VycmVudFRhZzpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl9jdXJyZW50VGFnOihuLl9jdXJyZW50VGFnJiYobi5fY3VycmVudFRhZy5yZW1vdmVDbGFzcyhEKS5yZW1vdmVBdHRyKHApLG4uaW5wdXQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksZSYmKGUuYWRkQ2xhc3MoRCkuYXR0cihwLG4uX3RhZ0lEKSxuLmlucHV0LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixuLl90YWdJRCkpLG4uX2N1cnJlbnRUYWc9ZSx0KX0sZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFJdGVtc30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm5zO2NsZWFyVGltZW91dChlLl9idXN5KSxjbGVhclRpbWVvdXQoZS5fdHlwaW5nKSxlLndyYXBwZXIub2ZmKHQpLGUudGFnTGlzdC5vZmYodCksZS5pbnB1dC5vZmYodCksbC5mbi5kZXN0cm95LmNhbGwoZSl9LF93cmFwcGVyTW91c2Vkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cImlucHV0XCIhPT1lLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO24mJmUucHJldmVudERlZmF1bHQoKSwtMT09PWUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiay1kZWxldGVcIikmJih0LmlucHV0WzBdIT09ZCgpJiZuJiZ0LmlucHV0LmZvY3VzKCksMD09PXQub3B0aW9ucy5taW5MZW5ndGgmJnQub3BlbigpKX0sX2lucHV0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9wbGFjZWhvbGRlcighMSksdGhpcy53cmFwcGVyLmFkZENsYXNzKEQpfSxfaW5wdXRGb2N1c291dDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Y2xlYXJUaW1lb3V0KGUuX3R5cGluZyksZS53cmFwcGVyLnJlbW92ZUNsYXNzKEQpLGUuX3BsYWNlaG9sZGVyKCFlLl9kYXRhSXRlbXNbMF0sITApLGUuY2xvc2UoKSxlLl9zdGF0ZT09PW0mJihlLl9zdGF0ZT1nKSxlLmVsZW1lbnQuYmx1cigpfSxfdGFnTGlzdENsaWNrOmZ1bmN0aW9uKHQpe3RoaXMuX3Vuc2VsZWN0KGUodC50YXJnZXQpLmNsb3Nlc3QoZikpLHRoaXMuX2NoYW5nZSgpLHRoaXMuY2xvc2UoKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT10LmRpc2FibGUscj10LnJlYWRvbmx5LG89bi53cmFwcGVyLm9mZih6KSxhPW4udGFnTGlzdC5vZmYoeikscz1uLmVsZW1lbnQuYWRkKG4uaW5wdXQub2ZmKHopKTtyfHxpPyhpP28uYWRkQ2xhc3MoTSk6by5yZW1vdmVDbGFzcyhNKSxzLmF0dHIoUCxpKS5hdHRyKEkscikuYXR0cihTLGkpLmF0dHIoVCxyKSk6KG8ucmVtb3ZlQ2xhc3MoTSkub24oTyxuLl90b2dnbGVIb3Zlcikub24oXCJtb3VzZWRvd25cIit6LGgobi5fd3JhcHBlck1vdXNlZG93bixuKSksbi5pbnB1dC5vbihSLGgobi5fa2V5ZG93bixuKSkub24oXCJwYXN0ZVwiK3osaChuLl9zZWFyY2gsbikpLm9uKFwiZm9jdXNcIit6LGgobi5faW5wdXRGb2N1cyxuKSkub24oXCJmb2N1c291dFwiK3osaChuLl9pbnB1dEZvY3Vzb3V0LG4pKSxzLnJlbW92ZUF0dHIoUCkucmVtb3ZlQXR0cihJKS5hdHRyKFMsITEpLmF0dHIoVCwhMSksYS5vbihCLGYsZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKEUpfSkub24oTCxmLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhFKX0pLm9uKEYsXCIuay1kZWxldGVcIixoKG4uX3RhZ0xpc3RDbGljayxuKSkpfSxfY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3B0aW9ucy5hdXRvQ2xvc2V8fCFlLl92aXNpYmxlSXRlbXM/ZS5jbG9zZSgpOihlLmN1cnJlbnQoZS5vcHRpb25zLmhpZ2hsaWdodEZpcnN0P2koZS51bFswXSk6bnVsbCksZS5wb3B1cC5fcG9zaXRpb24oKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cC5jbG9zZSgpLHRoaXMuY3VycmVudChudWxsKX0sb3BlbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVxdWVzdCYmKGUuX3JldHJpZXZlRGF0YT0hMSksIWUudWxbMF0uZmlyc3RDaGlsZHx8ZS5fc3RhdGU9PT1nfHxlLl9yZXRyaWV2ZURhdGE/KGUuX3N0YXRlPVwiXCIsZS5fb3Blbj0hMCxlLl9yZXRyaWV2ZURhdGE9ITEsZS5fZmlsdGVyU291cmNlKCkpOmUuX3Zpc2libGVJdGVtcyYmZS5fYWxsb3dTZWxlY3Rpb24oKSYmKGUucG9wdXAub3BlbigpLGUuY3VycmVudChlLm9wdGlvbnMuaGlnaGxpZ2h0Rmlyc3Q/aShlLnVsWzBdKTpudWxsKSl9LHRvZ2dsZTpmdW5jdGlvbihlKXtlPWUhPT10P2U6IXRoaXMucG9wdXAudmlzaWJsZSgpLHRoaXNbZT92Ol9dKCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj1udWxsO3QudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpLGU9dC5fcmVuZGVyKHQuZGF0YVNvdXJjZS52aWV3KCkpLHQuX2hlaWdodChlKSx0Ll9zZXRJbml0aWFsVmFsdWVzJiYodC5fc2V0SW5pdGlhbFZhbHVlcz0hMSx0LnZhbHVlKHQuX2luaXRpYWxWYWx1ZXMpKSx0Ll9vcGVuJiYodC5fb3Blbj0hMSx0LnRvZ2dsZShlKSksdC5wb3B1cC52aXNpYmxlKCkmJih0LnBvcHVwLl9wb3NpdGlvbigpLHQub3B0aW9ucy5oaWdobGlnaHRGaXJzdCYmKG49aSh0LnVsWzBdKSkpLHQuY3VycmVudChuKSx0Ll90b3VjaFNjcm9sbGVyJiZ0Ll90b3VjaFNjcm9sbGVyLnJlc2V0KCksdC5fbWFrZVVuc2VsZWN0YWJsZSgpLHQuX2hpZGVCdXN5KCksdC50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLm9wdGlvbnMsbz1yLmlnbm9yZUNhc2UsYT1yLmZpbHRlcixzPXIuZGF0YVRleHRGaWVsZCxsPWkuaW5wdXQudmFsKCk7ci5wbGFjZWhvbGRlcj09PWwmJihsPVwiXCIpLGNsZWFyVGltZW91dChpLl90eXBpbmcpLGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpsLG49ZS5sZW5ndGgsKCFufHxuPj1yLm1pbkxlbmd0aCkmJihpLl9zdGF0ZT1tLGkuX29wZW49ITAsdD17dmFsdWU6bz9lLnRvTG93ZXJDYXNlKCk6ZSxmaWVsZDpzLG9wZXJhdG9yOmEsaWdub3JlQ2FzZTpvfSxpLl9maWx0ZXJTb3VyY2UodCxpLl9yZXRyaWV2ZURhdGEpLGkuX3JldHJpZXZlRGF0YT0hMSl9LHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPWUoci50YWdMaXN0WzBdLmNoaWxkcmVuKSxhPW8ubGVuZ3RoLHM9MDtpZihuPT09dClyZXR1cm4gci5fdmFsdWVzO2lmKCFyLl9mZXRjaEl0ZW1zKG4pKXtmb3IoO2E+cztzKyspci5fdW5zZWxlY3Qoby5lcShzKSk7aWYobnVsbCE9PW4pe2ZvcihuPU4obil8fG4gaW5zdGFuY2VvZiB1P246W25dLHM9MCxhPW4ubGVuZ3RoO2E+cztzKyspaT1yLl9pbmRleChuW3NdKSxpPi0xJiZyLl9zZWxlY3QoaSk7ci5fb2xkPXIuX3ZhbHVlcy5zbGljZSgpfX19LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxuPWUub3B0aW9ucyxpPW4uZGF0YVNvdXJjZXx8e307aT1OKGkpP3tkYXRhOml9OmksaS5zZWxlY3Q9dCxpLmZpZWxkcz1be2ZpZWxkOm4uZGF0YVRleHRGaWVsZH0se2ZpZWxkOm4uZGF0YVZhbHVlRmllbGR9XSxlLmRhdGFTb3VyY2UmJmUuX3JlZnJlc2hIYW5kbGVyP2UuX3VuYmluZERhdGFTb3VyY2UoKTooZS5fcmVmcmVzaEhhbmRsZXI9aChlLnJlZnJlc2gsZSksZS5fcHJvZ3Jlc3NIYW5kbGVyPWgoZS5fc2hvd0J1c3ksZSkpLGUuZGF0YVNvdXJjZT1hLmRhdGEuRGF0YVNvdXJjZS5jcmVhdGUoaSkuYmluZCh5LGUuX3JlZnJlc2hIYW5kbGVyKS5iaW5kKHcsZS5fcHJvZ3Jlc3NIYW5kbGVyKX0sX2ZldGNoSXRlbXM6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWUuaXNBcnJheShuKSYmMD09PW4ubGVuZ3RoO2lmKCFyJiZuKXJldHVybiBpLl9mZXRjaHx8aS51bFswXS5maXJzdENoaWxkP3Q6KGkuZGF0YVNvdXJjZS5vbmUoeSxmdW5jdGlvbigpe2kudmFsdWUobiksaS5fZmV0Y2g9ITF9KSxpLl9mZXRjaD0hMCxpLmRhdGFTb3VyY2UuZmV0Y2goKSwhMCl9LF9yZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmF0dHIoXCJmb3JtXCIpLHI9aT9lKFwiI1wiK2kpOm4uY2xvc2VzdChcImZvcm1cIik7clswXSYmKHQuX3Jlc2V0SGFuZGxlcj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnZhbHVlKHQuX2luaXRpYWxWYWx1ZXMpLHQuX3BsYWNlaG9sZGVyKCl9KX0sdC5fZm9ybT1yLm9uKFwicmVzZXRcIix0Ll9yZXNldEhhbmRsZXIpKX0sX2luaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsbj1lLm9wdGlvbnMudmFsdWV8fGUuZWxlbWVudC52YWwoKTtudWxsPT09bj9uPVtdOihOKG4pfHwobj1bbl0pLG49ZS5fbWFwVmFsdWVzKG4pKSxlLl9vbGQ9ZS5faW5pdGlhbFZhbHVlcz1uLGUuX3NldEluaXRpYWxWYWx1ZXM9blswXSE9PXR9LF9tYXBWYWx1ZXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gdCYmZS5pc1BsYWluT2JqZWN0KHRbMF0pJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBuLl92YWx1ZShlKX0pKSx0fSxfY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudmFsdWUoKTtuKHQsZS5fb2xkKXx8KGUuX29sZD10LnNsaWNlKCksZS50cmlnZ2VyKHkpLGUuZWxlbWVudC50cmlnZ2VyKHkpKX0sX2NsaWNrOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1lKG4uY3VycmVudFRhcmdldCk7aWYoIW4uaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKGkudHJpZ2dlcihiLHtpdGVtOnJ9KSlyZXR1cm4gaS5fY2xvc2UoKSx0O2kuX3NlbGVjdChyKSxpLl9jaGFuZ2UoKSxpLl9jbG9zZSgpfX0sX2l0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lW3RdKCksZVswXSYmIWUuaXMoXCI6dmlzaWJsZVwiKSYmKGU9dGhpcy5faXRlbShlLHQpKSxlfSxfa2V5ZG93bjpmdW5jdGlvbihuKXt2YXIgcz10aGlzLGw9bi5rZXlDb2RlLGQ9cy5fY3VycmVudFRhZyx1PXMuX2N1cnJlbnQsaD1zLmlucHV0LnZhbCgpLHA9YS5zdXBwb3J0LmlzUnRsKHMud3JhcHBlciksZj1zLnBvcHVwLnZpc2libGUoKTtpZihsPT09Yy5ET1dOKXtpZihuLnByZXZlbnREZWZhdWx0KCksIWYpcmV0dXJuIHMub3BlbigpLHQ7dT11P28odVswXSxrKTppKHMudWxbMF0pLHUmJnMuY3VycmVudChlKHUpKX1lbHNlIGlmKGw9PT1jLlVQKWYmJih1PXU/byh1WzBdLHgpOnIocy51bFswXSkscy5jdXJyZW50KGUodSkpLHMuX2N1cnJlbnRbMF18fHMuY2xvc2UoKSksbi5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYobD09PWMuTEVGVCYmIXB8fGw9PT1jLlJJR0hUJiZwKWh8fChkPWQ/ZC5wcmV2KCk6ZShzLnRhZ0xpc3RbMF0ubGFzdENoaWxkKSxkWzBdJiZzLmN1cnJlbnRUYWcoZCkpO2Vsc2UgaWYobD09PWMuUklHSFQmJiFwfHxsPT09Yy5MRUZUJiZwKSFoJiZkJiYoZD1kLm5leHQoKSxzLmN1cnJlbnRUYWcoZFswXT9kOm51bGwpKTtlbHNlIGlmKGw9PT1jLkVOVEVSJiZmKXtpZih1KXtpZihzLnRyaWdnZXIoYix7aXRlbTp1fSkpcmV0dXJuIHMuX2Nsb3NlKCksdDtzLl9zZWxlY3QodSl9cy5fY2hhbmdlKCkscy5fY2xvc2UoKSxuLnByZXZlbnREZWZhdWx0KCl9ZWxzZSBsPT09Yy5FU0M/KGY/bi5wcmV2ZW50RGVmYXVsdCgpOnMuY3VycmVudFRhZyhudWxsKSxzLmNsb3NlKCkpOmw9PT1jLkhPTUU/Zj9zLmN1cnJlbnQoaShzLnVsWzBdKSk6aHx8KGQ9cy50YWdMaXN0WzBdLmZpcnN0Q2hpbGQsZCYmcy5jdXJyZW50VGFnKGUoZCkpKTpsPT09Yy5FTkQ/Zj9zLmN1cnJlbnQocihzLnVsWzBdKSk6aHx8KGQ9cy50YWdMaXN0WzBdLmxhc3RDaGlsZCxkJiZzLmN1cnJlbnRUYWcoZShkKSkpOmwhPT1jLkRFTEVURSYmbCE9PWMuQkFDS1NQQUNFfHxoPyhjbGVhclRpbWVvdXQocy5fdHlwaW5nKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5fc2NhbGUoKX0pLHMuX3NlYXJjaCgpKToobCE9PWMuQkFDS1NQQUNFfHxkfHwoZD1lKHMudGFnTGlzdFswXS5sYXN0Q2hpbGQpKSxkJiZkWzBdJiYocy5fdW5zZWxlY3QoZCkscy5fY2hhbmdlKCkscy5fY2xvc2UoKSkpfSxfaGlkZUJ1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9idXN5KSxlLmlucHV0LmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZS5fbG9hZGluZy5hZGRDbGFzcyhBKSxlLl9yZXF1ZXN0PSExLGUuX2J1c3k9bnVsbH0sX3Nob3dCdXN5SGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuaW5wdXQuYXR0cihcImFyaWEtYnVzeVwiLCEwKSx0aGlzLl9sb2FkaW5nLnJlbW92ZUNsYXNzKEEpfSxfc2hvd0J1c3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcXVlc3Q9ITAsZS5fYnVzeXx8KGUuX2J1c3k9c2V0VGltZW91dChoKGUuX3Nob3dCdXN5SGFuZGxlcixlKSwxMDApKX0sX3BsYWNlaG9sZGVyOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkuaW5wdXQsbz1kKCk7ZT09PXQmJihlPSExLHJbMF0hPT1vJiYoZT0haS5fZGF0YUl0ZW1zWzBdKSksaS5fcHJldj1cIlwiLHIudG9nZ2xlQ2xhc3MoXCJrLXJlYWRvbmx5XCIsZSkudmFsKGU/aS5vcHRpb25zLnBsYWNlaG9sZGVyOlwiXCIpLHJbMF0hPT1vfHxufHxhLmNhcmV0KHJbMF0sMCwwKSxpLl9zY2FsZSgpfSxfc2NhbGU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LndyYXBwZXIsaT1uLndpZHRoKCkscj10Ll9zcGFuLnRleHQodC5pbnB1dC52YWwoKSk7bi5pcyhcIjp2aXNpYmxlXCIpP2U9ci53aWR0aCgpKzI1OihyLmFwcGVuZFRvKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCksaT1lPXIud2lkdGgoKSsyNSxyLmFwcGVuZFRvKG4pKSx0LmlucHV0LndpZHRoKGU+aT9pOmUpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGk9XCI8b3B0aW9uXCIscj10aGlzLl90ZXh0KGUpLG89dGhpcy5fdmFsdWUoZSk7cmV0dXJuIG8hPT10JiYobys9XCJcIiwtMSE9PW8uaW5kZXhPZignXCInKSYmKG89by5yZXBsYWNlKEgsXCImcXVvdDtcIikpLGkrPScgdmFsdWU9XCInK28rJ1wiJyksbiYmKGkrPScgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyksaSs9XCI+XCIsciE9PXQmJihpKz1hLmh0bWxFbmNvZGUocikpLGkrPVwiPC9vcHRpb24+XCJ9LF9yZW5kZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT10aGlzLHI9ZS5sZW5ndGgsbz1pLml0ZW1UZW1wbGF0ZSxhPWkuX2RhdGFJdGVtcy5zbGljZSgwKSxzPTAsbD0wLGM9XCJcIixkPVwiXCI7cj5sO2wrKyl0PWVbbF0sbj1pLl9zZWxlY3RlZChhLHQpLGQrPW8odCxsLG4pLGMrPWkuX29wdGlvbih0LG4pLG58fChzKz0xKTtpZihyPWEubGVuZ3RoKWZvcihsPTA7cj5sO2wrKyljKz1pLl9vcHRpb24oYVtsXSwhMCk7cmV0dXJuIGkudWxbMF0uaW5uZXJIVE1MPWQsaS5lbGVtZW50Lmh0bWwoYyksaS5fdmlzaWJsZUl0ZW1zPXMsc30sX3NlbGVjdGVkOmZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLG89ci5fdGV4dCxhPXIuX3ZhbHVlLHM9YShuKSxsPWUubGVuZ3RoLGM9ITEsZD0wO2ZvcihzPT09dCYmKHM9byhuKSk7bD5kO2QrKylpZihuPWVbZF0saT1hKG4pLGk9PT10JiYoaT1vKG4pKSxpIT09dCYmaT09PXMpe2M9ITA7YnJlYWt9cmV0dXJuIGMmJmUuc3BsaWNlKGQsMSksY30sX3NlYXJjaDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdHlwaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1lLmlucHV0LnZhbCgpO2UuX3ByZXYhPT10JiYoZS5fcHJldj10LGUuc2VhcmNoKHQpKX0sZS5vcHRpb25zLmRlbGF5KX0sX2FsbG93U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLm1heFNlbGVjdGVkSXRlbXM7cmV0dXJuIG51bGw9PT1lfHxlPnRoaXMuX3ZhbHVlcy5sZW5ndGh9LF9zZWxlY3Q6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1pLl92YWx1ZXM7aS5fYWxsb3dTZWxlY3Rpb24oKSYmKGlzTmFOKGUpP249ZS5oaWRlKCkuZGF0YShcImlkeFwiKToobj1lLGkudWxbMF0uY2hpbGRyZW5bbl0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksaS5lbGVtZW50WzBdLmNoaWxkcmVuW25dLnNlbGVjdGVkPSEwLHQ9aS5kYXRhU291cmNlLnZpZXcoKVtuXSxpLnRhZ0xpc3QuYXBwZW5kKGkudGFnVGVtcGxhdGUodCkpLGkuX2RhdGFJdGVtcy5wdXNoKHQpLHIucHVzaChpLl9kYXRhVmFsdWUodCkpLGkuX3Zpc2libGVJdGVtcy09MSxpLmN1cnJlbnRUYWcobnVsbCksaS5fcGxhY2Vob2xkZXIoKSxpLl9oZWlnaHQoaS5fdmlzaWJsZUl0ZW1zKSxpLl9zdGF0ZT09PW0mJihpLl9zdGF0ZT1nKSl9LF91bnNlbGVjdDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHM9dGhpcyxsPXQuaW5kZXgoKTtpZih0LnJlbW92ZSgpLHMuY3VycmVudFRhZyhudWxsKSxzLl92YWx1ZXMuc3BsaWNlKGwsMSksbj1zLl9kYXRhSXRlbXMuc3BsaWNlKGwsMSlbMF0saT1zLl9kYXRhVmFsdWUobiksbD1zLl9pbmRleChpKSwtMSE9PWwpZShzLnVsWzBdLmNoaWxkcmVuW2xdKS5zaG93KCkscy5lbGVtZW50WzBdLmNoaWxkcmVuW2xdLnNlbGVjdGVkPSExLHMuX3Zpc2libGVJdGVtcys9MSxzLl9oZWlnaHQocy5fdmlzaWJsZUl0ZW1zKTtlbHNlIGZvcihsPXMuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoLHI9cy5lbGVtZW50WzBdLmNoaWxkcmVuLGE9ci5sZW5ndGg7YT5sO2wrKylpZihvPXJbbF0sby52YWx1ZT09aSl7by5zZWxlY3RlZD0hMTticmVha31zLl9wbGFjZWhvbGRlcigpfSxfdGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLml0ZW1UZW1wbGF0ZSxyPW4udGFnVGVtcGxhdGUsbz1uLmRhdGFTb3VyY2U7dC5lbGVtZW50WzBdLmxlbmd0aCYmIW8mJihuLmRhdGFUZXh0RmllbGQ9bi5kYXRhVGV4dEZpZWxkfHxcInRleHRcIixuLmRhdGFWYWx1ZUZpZWxkPW4uZGF0YVZhbHVlRmllbGR8fFwidmFsdWVcIiksZT1hLnRlbXBsYXRlKFwiIzpcIithLmV4cHIobi5kYXRhVGV4dEZpZWxkLFwiZGF0YVwiKStcIiNcIix7dXNlV2l0aEJsb2NrOiExfSksaT1pP2EudGVtcGxhdGUoaSk6ZSxyPXI/YS50ZW1wbGF0ZShyKTplLHQuaXRlbVRlbXBsYXRlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4nPGxpIHRhYmluZGV4PVwiLTFcIiByb2xlPVwib3B0aW9uXCIgZGF0YS1pZHg9XCInK3QrJ1wiIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWl0ZW1cIicrKG4/QzpcIlwiKStcIj5cIitpKGUpK1wiPC9saT5cIn0sdC50YWdUZW1wbGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4nPGxpIGNsYXNzPVwiay1idXR0b25cIiB1bnNlbGVjdGFibGU9XCJvblwiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCI+JytyKGUpKyc8L3NwYW4+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWRlbGV0ZVwiPmRlbGV0ZTwvc3Bhbj48L2xpPid9fSxfaW5wdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50WzBdLmFjY2Vzc0tleSxpPXQuX2lubmVyV3JhcHBlci5jaGlsZHJlbihcImlucHV0LmstaW5wdXRcIik7aVswXXx8KGk9ZSgnPGlucHV0IGNsYXNzPVwiay1pbnB1dFwiIHN0eWxlPVwid2lkdGg6IDI1cHhcIiAvPicpLmFwcGVuZFRvKHQuX2lubmVyV3JhcHBlcikpLHQuZWxlbWVudC5yZW1vdmVBdHRyKFwiYWNjZXNza2V5XCIpLHQuX2ZvY3VzZWQ9dC5pbnB1dD1pLmF0dHIoe2FjY2Vzc2tleTpuLGF1dG9jb21wbGV0ZTpcIm9mZlwiLHJvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWV4cGFuZGVkXCI6ITF9KX0sX3RhZ0xpc3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5faW5uZXJXcmFwcGVyLmNoaWxkcmVuKFwidWxcIik7blswXXx8KG49ZSgnPHVsIHJvbGU9XCJsaXN0Ym94XCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstcmVzZXRcIi8+JykuYXBwZW5kVG8odC5faW5uZXJXcmFwcGVyKSksdC50YWdMaXN0PW59LF9sb2FkZXI6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkaW5nPWUoJzxzcGFuIGNsYXNzPVwiay1pY29uIGstbG9hZGluZyAnK0ErJ1wiPjwvc3Bhbj4nKS5pbnNlcnRBZnRlcih0aGlzLmlucHV0KX0sX3RleHRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD1hLmdldENvbXB1dGVkU3R5bGVzKHRoaXMuaW5wdXRbMF0sVik7dC5wb3NpdGlvbj1cImFic29sdXRlXCIsdC52aXNpYmlsaXR5PVwiaGlkZGVuXCIsdC50b3A9LTMzMzMsdC5sZWZ0PS0zMzMzLHRoaXMuX3NwYW49ZShcIjxzcGFuLz5cIikuY3NzKHQpLmFwcGVuZFRvKHRoaXMud3JhcHBlcil9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4ucGFyZW50KFwic3Bhbi5rLW11bHRpc2VsZWN0XCIpO2lbMF18fChpPW4ud3JhcCgnPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstbXVsdGlzZWxlY3Qgay1oZWFkZXJcIiB1bnNlbGVjdGFibGU9XCJvblwiIC8+JykucGFyZW50KCksaVswXS5zdHlsZS5jc3NUZXh0PW5bMF0uc3R5bGUuY3NzVGV4dCxlKCc8ZGl2IGNsYXNzPVwiay1tdWx0aXNlbGVjdC13cmFwIGstZmxvYXR3cmFwXCIgdW5zZWxlY3RhYmxlPVwib25cIiAvPicpLmluc2VydEJlZm9yZShuKSksdC53cmFwcGVyPWkuYWRkQ2xhc3MoblswXS5jbGFzc05hbWUpLmNzcyhcImRpc3BsYXlcIixcIlwiKSx0Ll9pbm5lcldyYXBwZXI9ZShpWzBdLmZpcnN0Q2hpbGQpfX0pO3MucGx1Z2luKFUpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3ZhciBpPW4/XCIgay1zbGlkZXItaG9yaXpvbnRhbFwiOlwiIGstc2xpZGVyLXZlcnRpY2FsXCIscj1lLnN0eWxlP2Uuc3R5bGU6dC5hdHRyKFwic3R5bGVcIiksbz10LmF0dHIoXCJjbGFzc1wiKT9cIiBcIit0LmF0dHIoXCJjbGFzc1wiKTpcIlwiLGE9XCJcIjtyZXR1cm5cImJvdHRvbVJpZ2h0XCI9PWUudGlja1BsYWNlbWVudD9hPVwiIGstc2xpZGVyLWJvdHRvbXJpZ2h0XCI6XCJ0b3BMZWZ0XCI9PWUudGlja1BsYWNlbWVudCYmKGE9XCIgay1zbGlkZXItdG9wbGVmdFwiKSxyPXI/XCIgc3R5bGU9J1wiK3IrXCInXCI6XCJcIixcIjxkaXYgY2xhc3M9J2std2lkZ2V0IGstc2xpZGVyXCIraStvK1wiJ1wiK3IrXCI+PGRpdiBjbGFzcz0nay1zbGlkZXItd3JhcFwiKyhlLnNob3dCdXR0b25zP1wiIGstc2xpZGVyLWJ1dHRvbnNcIjpcIlwiKSthK1wiJz48L2Rpdj48L2Rpdj5cIn1mdW5jdGlvbiBpKGUsdCxuKXt2YXIgaT1cIlwiO3JldHVybiBpPVwiaW5jcmVhc2VcIj09dD9uP1wiay1pLWFycm93LWVcIjpcImstaS1hcnJvdy1uXCI6bj9cImstaS1hcnJvdy13XCI6XCJrLWktYXJyb3ctc1wiLFwiPGEgY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLVwiK3QrXCInPjxzcGFuIGNsYXNzPSdrLWljb24gXCIraStcIicgdGl0bGU9J1wiK2VbdCtcIkJ1dHRvblRpdGxlXCJdK1wiJz5cIitlW3QrXCJCdXR0b25UaXRsZVwiXStcIjwvc3Bhbj48L2E+XCJ9ZnVuY3Rpb24gcihlLHQpe3ZhciBuLGk9XCI8dWwgY2xhc3M9J2stcmVzZXQgay1zbGlkZXItaXRlbXMnPlwiLHI9ay5mbG9vcihjKHQvZS5zbWFsbFN0ZXApKSsxO2ZvcihuPTA7cj5uO24rKylpKz1cIjxsaSBjbGFzcz0nay10aWNrJyByb2xlPSdwcmVzZW50YXRpb24nPiZuYnNwOzwvbGk+XCI7cmV0dXJuIGkrPVwiPC91bD5cIn1mdW5jdGlvbiBvKGUsdCl7dmFyIG49dC5pcyhcImlucHV0XCIpPzE6MixpPTI9PW4/ZS5sZWZ0RHJhZ0hhbmRsZVRpdGxlOmUuZHJhZ0hhbmRsZVRpdGxlO3JldHVyblwiPGRpdiBjbGFzcz0nay1zbGlkZXItdHJhY2snPjxkaXYgY2xhc3M9J2stc2xpZGVyLXNlbGVjdGlvbic+PCEtLSAtLT48L2Rpdj48YSBocmVmPScjJyBjbGFzcz0nay1kcmFnaGFuZGxlJyB0aXRsZT0nXCIraStcIicgcm9sZT0nc2xpZGVyJyBhcmlhLXZhbHVlbWluPSdcIitlLm1pbitcIicgYXJpYS12YWx1ZW1heD0nXCIrZS5tYXgrXCInIGFyaWEtdmFsdWVub3c9J1wiKyhuPjE/ZS5zZWxlY3Rpb25TdGFydHx8ZS5taW46ZS52YWx1ZXx8ZS5taW4pK1wiJz5EcmFnPC9hPlwiKyhuPjE/XCI8YSBocmVmPScjJyBjbGFzcz0nay1kcmFnaGFuZGxlJyB0aXRsZT0nXCIrZS5yaWdodERyYWdIYW5kbGVUaXRsZStcIidyb2xlPSdzbGlkZXInIGFyaWEtdmFsdWVtaW49J1wiK2UubWluK1wiJyBhcmlhLXZhbHVlbWF4PSdcIitlLm1heCtcIicgYXJpYS12YWx1ZW5vdz0nXCIrKGUuc2VsZWN0aW9uRW5kfHxlLm1heCkrXCInPkRyYWc8L2E+XCI6XCJcIikrXCI8L2Rpdj5cIn1mdW5jdGlvbiBhKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdCtlfX1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX1mdW5jdGlvbiBsKGUpe3JldHVybihlK1wiXCIpLnJlcGxhY2UoXCIuXCIsZi5jdWx0dXJlcy5jdXJyZW50Lm51bWJlckZvcm1hdFtcIi5cIl0pfWZ1bmN0aW9uIGMoZSl7ZT1wYXJzZUZsb2F0KGUsMTApO3ZhciB0PWsucG93KDEwLHF8fDApO3JldHVybiBrLnJvdW5kKGUqdCkvdH1mdW5jdGlvbiBkKGUsbil7dmFyIGk9eShlLmdldEF0dHJpYnV0ZShuKSk7cmV0dXJuIG51bGw9PT1pJiYoaT10KSxpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIHR5cGVvZiBlIT09WX1mdW5jdGlvbiBoKGUpe3JldHVybiAxZTQqZX12YXIgcCxmPXdpbmRvdy5rZW5kbyxnPWYudWkuV2lkZ2V0LG09Zi51aS5EcmFnZ2FibGUsdj1lLmV4dGVuZCxfPWYuZm9ybWF0LHk9Zi5wYXJzZUZsb2F0LHc9ZS5wcm94eSxiPWUuaXNBcnJheSxrPU1hdGgseD1mLnN1cHBvcnQsQz14LnBvaW50ZXJzLFM9eC5tc1BvaW50ZXJzLFQ9XCJjaGFuZ2VcIixEPVwic2xpZGVcIixBPVwiLnNsaWRlclwiLEU9XCJ0b3VjaHN0YXJ0XCIrQStcIiBtb3VzZWRvd25cIitBLE09Qz9cInBvaW50ZXJkb3duXCIrQTpTP1wiTVNQb2ludGVyRG93blwiK0E6RSxQPVwidG91Y2hlbmRcIitBK1wiIG1vdXNldXBcIitBLEk9Qz9cInBvaW50ZXJ1cFwiOlM/XCJNU1BvaW50ZXJVcFwiK0E6UCx6PVwibW92ZVNlbGVjdGlvblwiLEY9XCJrZXlkb3duXCIrQSxSPVwiY2xpY2tcIitBLEI9XCJtb3VzZW92ZXJcIitBLEw9XCJmb2N1c1wiK0EsTz1cImJsdXJcIitBLEg9XCIuay1kcmFnaGFuZGxlXCIsTj1cIi5rLXNsaWRlci10cmFja1wiLFY9XCIuay10aWNrXCIsVT1cImstc3RhdGUtc2VsZWN0ZWRcIixXPVwiay1zdGF0ZS1mb2N1c2VkXCIsaj1cImstc3RhdGUtZGVmYXVsdFwiLEc9XCJrLXN0YXRlLWRpc2FibGVkXCIscT0zLCQ9XCJkaXNhYmxlZFwiLFk9XCJ1bmRlZmluZWRcIixLPVwidGFiaW5kZXhcIixRPWYuZ2V0VG91Y2hlcyxYPWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2cuZm4uaW5pdC5jYWxsKGksZSx0KSx0PWkub3B0aW9ucyxpLl9kaXN0YW5jZT1jKHQubWF4LXQubWluKSxpLl9pc0hvcml6b250YWw9XCJob3Jpem9udGFsXCI9PXQub3JpZW50YXRpb24saS5faXNSdGw9aS5faXNIb3Jpem9udGFsJiZmLnN1cHBvcnQuaXNSdGwoZSksaS5fcG9zaXRpb249aS5faXNIb3Jpem9udGFsP1wibGVmdFwiOlwiYm90dG9tXCIsaS5fc2l6ZUZuPWkuX2lzSG9yaXpvbnRhbD9cIndpZHRoXCI6XCJoZWlnaHRcIixpLl9vdXRlclNpemU9aS5faXNIb3Jpem9udGFsP1wib3V0ZXJXaWR0aFwiOlwib3V0ZXJIZWlnaHRcIix0LnRvb2x0aXAuZm9ybWF0PXQudG9vbHRpcC5lbmFibGVkP3QudG9vbHRpcC5mb3JtYXR8fFwiezB9XCI6XCJ7MH1cIixpLl9jcmVhdGVIdG1sKCksaS53cmFwcGVyPWkuZWxlbWVudC5jbG9zZXN0KFwiLmstc2xpZGVyXCIpLGkuX3RyYWNrRGl2PWkud3JhcHBlci5maW5kKE4pLGkuX3NldFRyYWNrRGl2V2lkdGgoKSxpLl9tYXhTZWxlY3Rpb249aS5fdHJhY2tEaXZbaS5fc2l6ZUZuXSgpLGkuX3NsaWRlckl0ZW1zSW5pdCgpLGkuX3RhYmluZGV4KGkud3JhcHBlci5maW5kKEgpKSxpW3QuZW5hYmxlZD9cImVuYWJsZVwiOlwiZGlzYWJsZVwiXSgpLG49Zi5zdXBwb3J0LmlzUnRsKGkud3JhcHBlcik/LTE6MSxpLl9rZXlNYXA9ezM3OmEoLTEqbip0LnNtYWxsU3RlcCksNDA6YSgtdC5zbWFsbFN0ZXApLDM5OmEoMSpuKnQuc21hbGxTdGVwKSwzODphKCt0LnNtYWxsU3RlcCksMzU6cyh0Lm1heCksMzY6cyh0Lm1pbiksMzM6YSgrdC5sYXJnZVN0ZXApLDM0OmEoLXQubGFyZ2VTdGVwKX0sZi5ub3RpZnkoaSl9LGV2ZW50czpbVCxEXSxvcHRpb25zOntlbmFibGVkOiEwLG1pbjowLG1heDoxMCxzbWFsbFN0ZXA6MSxsYXJnZVN0ZXA6NSxvcmllbnRhdGlvbjpcImhvcml6b250YWxcIix0aWNrUGxhY2VtZW50OlwiYm90aFwiLHRvb2x0aXA6e2VuYWJsZWQ6ITAsZm9ybWF0OlwiezB9XCJ9fSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fc2V0VHJhY2tEaXZXaWR0aCgpLHRoaXMud3JhcHBlci5maW5kKFwiLmstc2xpZGVyLWl0ZW1zXCIpLnJlbW92ZSgpLHRoaXMuX21heFNlbGVjdGlvbj10aGlzLl90cmFja0Rpdlt0aGlzLl9zaXplRm5dKCksdGhpcy5fc2xpZGVySXRlbXNJbml0KCksdGhpcy5fcmVmcmVzaCgpfSxfc2xpZGVySXRlbXNJbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPWUuX21heFNlbGVjdGlvbi8oKHQubWF4LXQubWluKS90LnNtYWxsU3RlcCksaT1lLl9jYWxjdWxhdGVJdGVtc1dpZHRoKGsuZmxvb3IoZS5fZGlzdGFuY2UvdC5zbWFsbFN0ZXApKTtcIm5vbmVcIiE9dC50aWNrUGxhY2VtZW50JiZuPj0yJiYoZS5fdHJhY2tEaXYuYmVmb3JlKHIodCxlLl9kaXN0YW5jZSkpLGUuX3NldEl0ZW1zV2lkdGgoaSksZS5fc2V0SXRlbXNUaXRsZSgpKSxlLl9jYWxjdWxhdGVTdGVwcyhpKSxcIm5vbmVcIiE9dC50aWNrUGxhY2VtZW50JiZuPj0yJiZ0LmxhcmdlU3RlcD49dC5zbWFsbFN0ZXAmJmUuX3NldEl0ZW1zTGFyZ2VUaWNrKCl9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kaW1lbnNpb25zKHRoaXMud3JhcHBlcil9LF9zZXRUcmFja0RpdldpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PTIqcGFyc2VGbG9hdChlLl90cmFja0Rpdi5jc3MoZS5faXNSdGw/XCJyaWdodFwiOmUuX3Bvc2l0aW9uKSwxMCk7ZS5fdHJhY2tEaXZbZS5fc2l6ZUZuXShlLndyYXBwZXJbZS5fc2l6ZUZuXSgpLTItdCl9LF9zZXRJdGVtc1dpZHRoOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWkub3B0aW9ucyxvPTAsYT10Lmxlbmd0aC0xLHM9aS53cmFwcGVyLmZpbmQoViksbD0wLGM9MixkPXMubGVuZ3RoLHU9MDtmb3Iobj0wO2QtMj5uO24rKyllKHNbbisxXSlbaS5fc2l6ZUZuXSh0W25dKTtpZihpLl9pc0hvcml6b250YWw/KGUoc1tvXSkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpW2kuX3NpemVGbl0odFthLTFdKSxlKHNbYV0pLmFkZENsYXNzKFwiay1sYXN0XCIpW2kuX3NpemVGbl0odFthXSkpOihlKHNbYV0pLmFkZENsYXNzKFwiay1maXJzdFwiKVtpLl9zaXplRm5dKHRbYV0pLGUoc1tvXSkuYWRkQ2xhc3MoXCJrLWxhc3RcIilbaS5fc2l6ZUZuXSh0W2EtMV0pKSxpLl9kaXN0YW5jZSVyLnNtYWxsU3RlcCE9PTAmJiFpLl9pc0hvcml6b250YWwpe2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspdSs9dFtuXTtsPWkuX21heFNlbGVjdGlvbi11LGwrPXBhcnNlRmxvYXQoaS5fdHJhY2tEaXYuY3NzKGkuX3Bvc2l0aW9uKSwxMCkrYyxpLndyYXBwZXIuZmluZChcIi5rLXNsaWRlci1pdGVtc1wiKS5jc3MoXCJwYWRkaW5nLXRvcFwiLGwpfX0sX3NldEl0ZW1zVGl0bGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPXQud3JhcHBlci5maW5kKFYpLHI9bi5taW4sbz1pLmxlbmd0aCxhPXQuX2lzSG9yaXpvbnRhbCYmIXQuX2lzUnRsPzA6by0xLHM9dC5faXNIb3Jpem9udGFsJiYhdC5faXNSdGw/bzotMSxsPXQuX2lzSG9yaXpvbnRhbCYmIXQuX2lzUnRsPzE6LTE7YS1zIT09MDthKz1sKWUoaVthXSkuYXR0cihcInRpdGxlXCIsXyhuLnRvb2x0aXAuZm9ybWF0LGMocikpKSxyKz1uLnNtYWxsU3RlcH0sX3NldEl0ZW1zTGFyZ2VUaWNrOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXIud3JhcHBlci5maW5kKFYpLHM9MDtpZihoKG8ubGFyZ2VTdGVwKSVoKG8uc21hbGxTdGVwKT09PTB8fHIuX2Rpc3RhbmNlL28ubGFyZ2VTdGVwPj0zKWZvcihyLl9pc0hvcml6b250YWx8fHIuX2lzUnRsfHwoYT1lLm1ha2VBcnJheShhKS5yZXZlcnNlKCkpLHM9MDthLmxlbmd0aD5zO3MrKyl0PWUoYVtzXSksbj1yLl92YWx1ZXNbc10saT1oKG4tdGhpcy5vcHRpb25zLm1pbiksaSVoKG8uc21hbGxTdGVwKT09PTAmJmklaChvLmxhcmdlU3RlcCk9PT0wJiYodC5hZGRDbGFzcyhcImstdGljay1sYXJnZVwiKS5odG1sKFwiPHNwYW4gY2xhc3M9J2stbGFiZWwnPlwiK3QuYXR0cihcInRpdGxlXCIpK1wiPC9zcGFuPlwiKSwwIT09cyYmcyE9PWEubGVuZ3RoLTEmJnQuY3NzKFwibGluZS1oZWlnaHRcIix0W3IuX3NpemVGbl0oKStcInB4XCIpKX0sX2NhbGN1bGF0ZUl0ZW1zV2lkdGg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXBhcnNlRmxvYXQoci5fdHJhY2tEaXYuY3NzKHIuX3NpemVGbikpKzEscz1hL3IuX2Rpc3RhbmNlO2ZvcihyLl9kaXN0YW5jZS9vLnNtYWxsU3RlcC1rLmZsb29yKHIuX2Rpc3RhbmNlL28uc21hbGxTdGVwKT4wJiYoYS09ci5fZGlzdGFuY2Ulby5zbWFsbFN0ZXAqcyksdD1hL2Usbj1bXSxpPTA7ZS0xPmk7aSsrKW5baV09dDtyZXR1cm4gbltlLTFdPW5bZV09dC8yLHIuX3JvdW5kV2lkdGhzKG4pfSxfcm91bmRXaWR0aHM6ZnVuY3Rpb24oZSl7dmFyIHQsbj0wLGk9ZS5sZW5ndGg7Zm9yKHQ9MDtpPnQ7dCsrKW4rPWVbdF0tay5mbG9vcihlW3RdKSxlW3RdPWsuZmxvb3IoZVt0XSk7cmV0dXJuIG49ay5yb3VuZChuKSx0aGlzLl9hZGRBZGRpdGlvbmFsU2l6ZShuLGUpfSxfYWRkQWRkaXRpb25hbFNpemU6ZnVuY3Rpb24oZSx0KXtpZigwPT09ZSlyZXR1cm4gdDt2YXIgbixpPXBhcnNlRmxvYXQodC5sZW5ndGgtMSkvcGFyc2VGbG9hdCgxPT1lP2U6ZS0xKTtmb3Iobj0wO2U+bjtuKyspdFtwYXJzZUludChrLnJvdW5kKGkqbiksMTApXSs9MTtyZXR1cm4gdH0sX2NhbGN1bGF0ZVN0ZXBzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkubWluLG89MCxhPWsuY2VpbChuLl9kaXN0YW5jZS9pLnNtYWxsU3RlcCkscz0xO2lmKGErPW4uX2Rpc3RhbmNlL2kuc21hbGxTdGVwJTE9PT0wPzE6MCxlLnNwbGljZSgwLDAsMiplW2EtMl0pLGUuc3BsaWNlKGEtMSwxLDIqZS5wb3AoKSksbi5fcGl4ZWxTdGVwcz1bb10sbi5fdmFsdWVzPVtyXSwwIT09YSl7Zm9yKDthPnM7KW8rPShlW3MtMV0rZVtzXSkvMixuLl9waXhlbFN0ZXBzW3NdPW8scis9aS5zbWFsbFN0ZXAsbi5fdmFsdWVzW3NdPWMocikscysrO3Q9bi5fZGlzdGFuY2UlaS5zbWFsbFN0ZXA9PT0wP2EtMTphLG4uX3BpeGVsU3RlcHNbdF09bi5fbWF4U2VsZWN0aW9uLG4uX3ZhbHVlc1t0XT1pLm1heCxuLl9pc1J0bCYmKG4uX3BpeGVsU3RlcHMucmV2ZXJzZSgpLG4uX3ZhbHVlcy5yZXZlcnNlKCkpfX0sX2dldFZhbHVlRnJvbVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLG89ay5tYXgoci5zbWFsbFN0ZXAqKGkuX21heFNlbGVjdGlvbi9pLl9kaXN0YW5jZSksMCksYT0wLHM9by8yO2lmKGkuX2lzSG9yaXpvbnRhbD8oYT1lLXQuc3RhcnRQb2ludCxpLl9pc1J0bCYmKGE9aS5fbWF4U2VsZWN0aW9uLWEpKTphPXQuc3RhcnRQb2ludC1lLGkuX21heFNlbGVjdGlvbi0ocGFyc2VJbnQoaS5fbWF4U2VsZWN0aW9uJW8sMTApLTMpLzI8YSlyZXR1cm4gci5tYXg7Zm9yKG49MDtpLl9waXhlbFN0ZXBzLmxlbmd0aD5uO24rKylpZihrLmFicyhpLl9waXhlbFN0ZXBzW25dLWEpLTE8PXMpcmV0dXJuIGMoaS5fdmFsdWVzW25dKX0sX2dldEZvcm1hdHRlZFZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcyxhPVwiXCIscz1vLm9wdGlvbnMudG9vbHRpcDtyZXR1cm4gYihlKT8oaT1lWzBdLHI9ZVsxXSk6dCYmdC50eXBlJiYoaT10LnNlbGVjdGlvblN0YXJ0LHI9dC5zZWxlY3Rpb25FbmQpLHQmJihuPXQudG9vbHRpcFRlbXBsYXRlKSwhbiYmcy50ZW1wbGF0ZSYmKG49Zi50ZW1wbGF0ZShzLnRlbXBsYXRlKSksYihlKXx8dCYmdC50eXBlP24/YT1uKHtzZWxlY3Rpb25TdGFydDppLHNlbGVjdGlvbkVuZDpyfSk6KGk9XyhzLmZvcm1hdCxpKSxyPV8ocy5mb3JtYXQsciksYT1pK1wiIC0gXCIrcik6KHQmJih0LnZhbD1lKSxhPW4/bih7dmFsdWU6ZX0pOl8ocy5mb3JtYXQsZSkpLGF9LF9nZXREcmFnZ2FibGVBcmVhOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWYuZ2V0T2Zmc2V0KGUuX3RyYWNrRGl2KTtyZXR1cm57c3RhcnRQb2ludDplLl9pc0hvcml6b250YWw/dC5sZWZ0OnQudG9wK2UuX21heFNlbGVjdGlvbixlbmRQb2ludDplLl9pc0hvcml6b250YWw/dC5sZWZ0K2UuX21heFNlbGVjdGlvbjp0LnRvcH19LF9jcmVhdGVIdG1sOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxyPWUub3B0aW9ucyxhPXQuZmluZChcImlucHV0XCIpOzI9PWEubGVuZ3RoPyhhLmVxKDApLnByb3AoXCJ2YWx1ZVwiLGwoci5zZWxlY3Rpb25TdGFydCkpLGEuZXEoMSkucHJvcChcInZhbHVlXCIsbChyLnNlbGVjdGlvbkVuZCkpKTp0LnByb3AoXCJ2YWx1ZVwiLGwoci52YWx1ZSkpLHQud3JhcChuKHIsdCxlLl9pc0hvcml6b250YWwpKS5oaWRlKCksci5zaG93QnV0dG9ucyYmdC5iZWZvcmUoaShyLFwiaW5jcmVhc2VcIixlLl9pc0hvcml6b250YWwpKS5iZWZvcmUoaShyLFwiZGVjcmVhc2VcIixlLl9pc0hvcml6b250YWwpKSx0LmJlZm9yZShvKHIsdCkpfSxfZm9jdXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPXQudGFyZ2V0LHI9bi52YWx1ZSgpLG89bi5fZHJhZztvfHwoaT09bi53cmFwcGVyLmZpbmQoSCkuZXEoMClbMF0/KG89bi5fZmlyc3RIYW5kbGVEcmFnLG4uX2FjdGl2ZUhhbmRsZT0wKToobz1uLl9sYXN0SGFuZGxlRHJhZyxuLl9hY3RpdmVIYW5kbGU9MSkscj1yW24uX2FjdGl2ZUhhbmRsZV0pLGUoaSkuYWRkQ2xhc3MoVytcIiBcIitVKSxvJiYobi5fYWN0aXZlSGFuZGxlRHJhZz1vLG8uc2VsZWN0aW9uU3RhcnQ9bi5vcHRpb25zLnNlbGVjdGlvblN0YXJ0LG8uc2VsZWN0aW9uRW5kPW4ub3B0aW9ucy5zZWxlY3Rpb25FbmQsby5fdXBkYXRlVG9vbHRpcChyKSl9LF9mb2N1c1dpdGhNb3VzZTpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG49dGhpcyxpPXQuaXMoSCk/dC5pbmRleCgpOjA7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLndyYXBwZXIuZmluZChIKVsyPT1pPzE6MF0uZm9jdXMoKX0sMSksbi5fc2V0VG9vbHRpcFRpbWVvdXQoKX0sX2JsdXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4uX2FjdGl2ZUhhbmRsZURyYWc7ZSh0LnRhcmdldCkucmVtb3ZlQ2xhc3MoVytcIiBcIitVKSxpJiYoaS5fcmVtb3ZlVG9vbHRpcCgpLGRlbGV0ZSBuLl9hY3RpdmVIYW5kbGVEcmFnLGRlbGV0ZSBuLl9hY3RpdmVIYW5kbGUpfSxfc2V0VG9vbHRpcFRpbWVvdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3Rvb2x0aXBUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ZS5fZHJhZ3x8ZS5fYWN0aXZlSGFuZGxlRHJhZzt0JiZ0Ll9yZW1vdmVUb29sdGlwKCl9LDMwMCl9LF9jbGVhclRvb2x0aXBUaW1lb3V0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpLGU9dC5fZHJhZ3x8dC5fYWN0aXZlSGFuZGxlRHJhZyxlJiZlLnRvb2x0aXBEaXYmJmUudG9vbHRpcERpdi5zdG9wKCEwLCExKS5jc3MoXCJvcGFjaXR5XCIsMSl9fSksSj1YLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihuLGkpe3ZhciByLG89dGhpcztuLnR5cGU9XCJ0ZXh0XCIsaT12KHt9LHt2YWx1ZTpkKG4sXCJ2YWx1ZVwiKSxtaW46ZChuLFwibWluXCIpLG1heDpkKG4sXCJtYXhcIiksc21hbGxTdGVwOmQobixcInN0ZXBcIil9LGkpLG49ZShuKSxpJiZpLmVuYWJsZWQ9PT10JiYoaS5lbmFibGVkPSFuLmlzKFwiW2Rpc2FibGVkXVwiKSksWC5mbi5pbml0LmNhbGwobyxuLGkpLGk9by5vcHRpb25zLHUoaS52YWx1ZSkmJm51bGwhPT1pLnZhbHVlfHwoaS52YWx1ZT1pLm1pbixuLnByb3AoXCJ2YWx1ZVwiLGwoaS5taW4pKSksaS52YWx1ZT1rLm1heChrLm1pbihpLnZhbHVlLGkubWF4KSxpLm1pbikscj1vLndyYXBwZXIuZmluZChIKSxuZXcgSi5TZWxlY3Rpb24ocixvLGkpLG8uX2RyYWc9bmV3IEouRHJhZyhyLFwiXCIsbyxpKX0sb3B0aW9uczp7bmFtZTpcIlNsaWRlclwiLHNob3dCdXR0b25zOiEwLGluY3JlYXNlQnV0dG9uVGl0bGU6XCJJbmNyZWFzZVwiLGRlY3JlYXNlQnV0dG9uVGl0bGU6XCJEZWNyZWFzZVwiLGRyYWdIYW5kbGVUaXRsZTpcImRyYWdcIix0b29sdGlwOntmb3JtYXQ6XCJ7MDojLCMuIyN9XCJ9LHZhbHVlOm51bGx9LGVuYWJsZTpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYT10aGlzLHM9YS5vcHRpb25zO2EuZGlzYWJsZSgpLG4hPT0hMSYmKGEud3JhcHBlci5yZW1vdmVDbGFzcyhHKS5hZGRDbGFzcyhqKSxhLndyYXBwZXIuZmluZChcImlucHV0XCIpLnJlbW92ZUF0dHIoJCksaT1mdW5jdGlvbihuKXt2YXIgaSxyLG8scz1RKG4pWzBdO2lmKHMpe2lmKGk9YS5faXNIb3Jpem9udGFsP3MubG9jYXRpb24ucGFnZVg6cy5sb2NhdGlvbi5wYWdlWSxyPWEuX2dldERyYWdnYWJsZUFyZWEoKSxvPWUobi50YXJnZXQpLG8uaGFzQ2xhc3MoXCJrLWRyYWdoYW5kbGVcIikpcmV0dXJuIG8uYWRkQ2xhc3MoVytcIiBcIitVKSx0O2EuX3VwZGF0ZShhLl9nZXRWYWx1ZUZyb21Qb3NpdGlvbihpLHIpKSxhLl9mb2N1c1dpdGhNb3VzZShuLnRhcmdldCksYS5fZHJhZy5kcmFnc3RhcnQobiksbi5wcmV2ZW50RGVmYXVsdCgpfX0sYS53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub24oTSxpKS5lbmQoKS5vbihNLGZ1bmN0aW9uKCl7ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uZShcInNlbGVjdHN0YXJ0XCIsZi5wcmV2ZW50RGVmYXVsdCl9KS5vbihJLGZ1bmN0aW9uKCl7YS5fZHJhZy5fZW5kKCl9KSxhLndyYXBwZXIuZmluZChIKS5hdHRyKEssMCkub24oUCxmdW5jdGlvbigpe2EuX3NldFRvb2x0aXBUaW1lb3V0KCl9KS5vbihSLGZ1bmN0aW9uKGUpe2EuX2ZvY3VzV2l0aE1vdXNlKGUudGFyZ2V0KSxlLnByZXZlbnREZWZhdWx0KCl9KS5vbihMLHcoYS5fZm9jdXMsYSkpLm9uKE8sdyhhLl9ibHVyLGEpKSxyPXcoZnVuY3Rpb24oZSl7dmFyIHQ9YS5fbmV4dFZhbHVlQnlJbmRleChhLl92YWx1ZUluZGV4KzEqZSk7YS5fc2V0VmFsdWVJblJhbmdlKHQpLGEuX2RyYWcuX3VwZGF0ZVRvb2x0aXAodCl9LGEpLHMuc2hvd0J1dHRvbnMmJihvPXcoZnVuY3Rpb24oZSx0KXt0aGlzLl9jbGVhclRvb2x0aXBUaW1lb3V0KCksKDE9PT1lLndoaWNofHx4LnRvdWNoJiYwPT09ZS53aGljaCkmJihyKHQpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KHcoZnVuY3Rpb24oKXt0aGlzLnRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cih0KX0sNjApfSx0aGlzKSwyMDApKX0sYSksYS53cmFwcGVyLmZpbmQoXCIuay1idXR0b25cIikub24oUCx3KGZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyVGltZXIoKSxhLl9mb2N1c1dpdGhNb3VzZShlLnRhcmdldCl9LGEpKS5vbihCLGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcIm1vdXNlb3V0XCIrQSx3KGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIiksdGhpcy5fY2xlYXJUaW1lcigpfSxhKSkuZXEoMCkub24oRSx3KGZ1bmN0aW9uKGUpe28oZSwxKX0sYSkpLmNsaWNrKCExKS5lbmQoKS5lcSgxKS5vbihFLHcoZnVuY3Rpb24oZSl7byhlLC0xKX0sYSkpLmNsaWNrKGYucHJldmVudERlZmF1bHQpKSxhLndyYXBwZXIuZmluZChIKS5vZmYoRiwhMSkub24oRix3KHRoaXMuX2tleWRvd24sYSkpLHMuZW5hYmxlZD0hMCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qud3JhcHBlci5yZW1vdmVDbGFzcyhqKS5hZGRDbGFzcyhHKSxlKHQuZWxlbWVudCkucHJvcCgkLCQpLHQud3JhcHBlci5maW5kKFwiLmstYnV0dG9uXCIpLm9mZihFKS5vbihFLGYucHJldmVudERlZmF1bHQpLm9mZihQKS5vbihQLGYucHJldmVudERlZmF1bHQpLm9mZihcIm1vdXNlbGVhdmVcIitBKS5vbihcIm1vdXNlbGVhdmVcIitBLGYucHJldmVudERlZmF1bHQpLm9mZihCKS5vbihCLGYucHJldmVudERlZmF1bHQpLHQud3JhcHBlci5maW5kKFYrXCIsIFwiK04pLm9mZihNKS5vZmYoSSksdC53cmFwcGVyLmZpbmQoSCkuYXR0cihLLC0xKS5vZmYoUCkub2ZmKEYpLm9mZihSKS5vZmYoTCkub2ZmKE8pLHQub3B0aW9ucy5lbmFibGVkPSExfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LnZhbHVlKCkhPWU7dC52YWx1ZShlKSxuJiZ0LnRyaWdnZXIoVCx7dmFsdWU6dC5vcHRpb25zLnZhbHVlfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnM7cmV0dXJuIGU9YyhlKSxpc05hTihlKT9pLnZhbHVlOihlPj1pLm1pbiYmaS5tYXg+PWUmJmkudmFsdWUhPWUmJihuLmVsZW1lbnQucHJvcChcInZhbHVlXCIsbChlKSksaS52YWx1ZT1lLG4uX3JlZnJlc2hBcmlhQXR0cihlKSxuLl9yZWZyZXNoKCkpLHQpfSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcih6LHt2YWx1ZTp0aGlzLm9wdGlvbnMudmFsdWV9KX0sX3JlZnJlc2hBcmlhQXR0cjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLl9kcmFnO3Q9aSYmaS5fdG9vbHRpcERpdj9pLl90b29sdGlwRGl2LnRleHQoKTpuLl9nZXRGb3JtYXR0ZWRWYWx1ZShlLG51bGwpLHRoaXMud3JhcHBlci5maW5kKEgpLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsZSkuYXR0cihcImFyaWEtdmFsdWV0ZXh0XCIsdCl9LF9jbGVhclRpbWVyOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmtleUNvZGUgaW4gdC5fa2V5TWFwJiYodC5fY2xlYXJUb29sdGlwVGltZW91dCgpLHQuX3NldFZhbHVlSW5SYW5nZSh0Ll9rZXlNYXBbZS5rZXlDb2RlXSh0Lm9wdGlvbnMudmFsdWUpKSx0Ll9kcmFnLl91cGRhdGVUb29sdGlwKHQudmFsdWUoKSksZS5wcmV2ZW50RGVmYXVsdCgpKVxufSxfc2V0VmFsdWVJblJhbmdlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnM7cmV0dXJuIGU9YyhlKSxpc05hTihlKT8obi5fdXBkYXRlKGkubWluKSx0KTooZT1rLm1heChrLm1pbihlLGkubWF4KSxpLm1pbiksbi5fdXBkYXRlKGUpLHQpfSxfbmV4dFZhbHVlQnlJbmRleDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl92YWx1ZXMubGVuZ3RoO3JldHVybiB0aGlzLl9pc1J0bCYmKGU9dC0xLWUpLHRoaXMuX3ZhbHVlc1trLm1heCgwLGsubWluKGUsdC0xKSldfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztnLmZuLmRlc3Ryb3kuY2FsbChlKSxlLndyYXBwZXIub2ZmKEEpLmZpbmQoXCIuay1idXR0b25cIikub2ZmKEEpLmVuZCgpLmZpbmQoSCkub2ZmKEEpLmVuZCgpLmZpbmQoVitcIiwgXCIrTikub2ZmKEEpLmVuZCgpLGUuX2RyYWcuZHJhZ2dhYmxlLmRlc3Ryb3koKSxlLl9kcmFnLl9yZW1vdmVUb29sdGlwKCEwKX19KTtKLlNlbGVjdGlvbj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaShpKXt2YXIgcj1pLW4ubWluLG89dC5fdmFsdWVJbmRleD1rLmNlaWwoYyhyL24uc21hbGxTdGVwKSksYT1wYXJzZUludCh0Ll9waXhlbFN0ZXBzW29dLDEwKSxzPXQuX3RyYWNrRGl2LmZpbmQoXCIuay1zbGlkZXItc2VsZWN0aW9uXCIpLGw9cGFyc2VJbnQoZVt0Ll9vdXRlclNpemVdKCkvMiwxMCksZD10Ll9pc1J0bD8yOjA7c1t0Ll9zaXplRm5dKHQuX2lzUnRsP3QuX21heFNlbGVjdGlvbi1hOmEpLGUuY3NzKHQuX3Bvc2l0aW9uLGEtbC1kKX1pKG4udmFsdWUpLHQuYmluZChbVCxELHpdLGZ1bmN0aW9uKGUpe2kocGFyc2VGbG9hdChlLnZhbHVlLDEwKSl9KX0sSi5EcmFnPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXM7ci5vd25lcj1uLHIub3B0aW9ucz1pLHIuZWxlbWVudD1lLHIudHlwZT10LHIuZHJhZ2dhYmxlPW5ldyBtKGUse2Rpc3RhbmNlOjAsZHJhZ3N0YXJ0Oncoci5fZHJhZ3N0YXJ0LHIpLGRyYWc6dyhyLmRyYWcsciksZHJhZ2VuZDp3KHIuZHJhZ2VuZCxyKSxkcmFnY2FuY2VsOncoci5kcmFnY2FuY2VsLHIpfSksZS5jbGljayghMSl9LEouRHJhZy5wcm90b3R5cGU9e2RyYWdzdGFydDpmdW5jdGlvbihlKXt0aGlzLm93bmVyLl9hY3RpdmVEcmFnSGFuZGxlPXRoaXMsdGhpcy5kcmFnZ2FibGUudXNlckV2ZW50cy5jYW5jZWwoKSx0aGlzLmRyYWdnYWJsZS51c2VyRXZlbnRzLl9zdGFydChlKX0sX2RyYWdzdGFydDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9aS5vd25lcixvPWkub3B0aW9ucztyZXR1cm4gby5lbmFibGVkPyh0aGlzLm93bmVyLl9hY3RpdmVEcmFnSGFuZGxlPXRoaXMsci5lbGVtZW50Lm9mZihCKSxyLndyYXBwZXIuZmluZChcIi5cIitXKS5yZW1vdmVDbGFzcyhXK1wiIFwiK1UpLGkuZWxlbWVudC5hZGRDbGFzcyhXK1wiIFwiK1UpLGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5jc3MoXCJjdXJzb3JcIixcInBvaW50ZXJcIiksaS5kcmFnYWJsZUFyZWE9ci5fZ2V0RHJhZ2dhYmxlQXJlYSgpLGkuc3RlcD1rLm1heChvLnNtYWxsU3RlcCooci5fbWF4U2VsZWN0aW9uL3IuX2Rpc3RhbmNlKSwwKSxpLnR5cGU/KGkuc2VsZWN0aW9uU3RhcnQ9by5zZWxlY3Rpb25TdGFydCxpLnNlbGVjdGlvbkVuZD1vLnNlbGVjdGlvbkVuZCxyLl9zZXRaSW5kZXgoaS50eXBlKSk6aS5vbGRWYWw9aS52YWw9by52YWx1ZSxpLl9yZW1vdmVUb29sdGlwKCEwKSxpLl9jcmVhdGVUb29sdGlwKCksdCk6KG4ucHJldmVudERlZmF1bHQoKSx0KX0sX2NyZWF0ZVRvb2x0aXA6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkub3duZXIsbz1pLm9wdGlvbnMudG9vbHRpcCxhPVwiXCIscz1lKHdpbmRvdyk7by5lbmFibGVkJiYoby50ZW1wbGF0ZSYmKHQ9aS50b29sdGlwVGVtcGxhdGU9Zi50ZW1wbGF0ZShvLnRlbXBsYXRlKSksZShcIi5rLXNsaWRlci10b29sdGlwXCIpLnJlbW92ZSgpLGkudG9vbHRpcERpdj1lKFwiPGRpdiBjbGFzcz0nay13aWRnZXQgay10b29sdGlwIGstc2xpZGVyLXRvb2x0aXAnPjwhLS0gLS0+PC9kaXY+XCIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLGE9ci5fZ2V0Rm9ybWF0dGVkVmFsdWUoaS52YWx8fHIudmFsdWUoKSxpKSxpLnR5cGV8fChuPVwiay1jYWxsb3V0LVwiKyhyLl9pc0hvcml6b250YWw/XCJzXCI6XCJlXCIpLGkudG9vbHRpcElubmVyRGl2PVwiPGRpdiBjbGFzcz0nay1jYWxsb3V0IFwiK24rXCInPjwhLS0gLS0+PC9kaXY+XCIsYSs9aS50b29sdGlwSW5uZXJEaXYpLGkudG9vbHRpcERpdi5odG1sKGEpLGkuX3Njcm9sbE9mZnNldD17dG9wOnMuc2Nyb2xsVG9wKCksbGVmdDpzLnNjcm9sbExlZnQoKX0saS5tb3ZlVG9vbHRpcCgpKX0sZHJhZzpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLm93bmVyLHI9ZS54LmxvY2F0aW9uLG89ZS55LmxvY2F0aW9uLGE9bi5kcmFnYWJsZUFyZWEuc3RhcnRQb2ludCxzPW4uZHJhZ2FibGVBcmVhLmVuZFBvaW50O2UucHJldmVudERlZmF1bHQoKSxuLnZhbD1pLl9pc0hvcml6b250YWw/aS5faXNSdGw/bi5jb25zdHJhaW5WYWx1ZShyLGEscyxzPnIpOm4uY29uc3RyYWluVmFsdWUocixhLHMscj49cyk6bi5jb25zdHJhaW5WYWx1ZShvLHMsYSxzPj1vKSxuLm9sZFZhbCE9bi52YWwmJihuLm9sZFZhbD1uLnZhbCxuLnR5cGU/KFwiZmlyc3RIYW5kbGVcIj09bi50eXBlP24uc2VsZWN0aW9uU3RhcnQ9bi5zZWxlY3Rpb25FbmQ+bi52YWw/bi52YWw6bi5zZWxlY3Rpb25FbmQ9bi52YWw6bi52YWw+bi5zZWxlY3Rpb25TdGFydD9uLnNlbGVjdGlvbkVuZD1uLnZhbDpuLnNlbGVjdGlvblN0YXJ0PW4uc2VsZWN0aW9uRW5kPW4udmFsLHQ9e3ZhbHVlczpbbi5zZWxlY3Rpb25TdGFydCxuLnNlbGVjdGlvbkVuZF0sdmFsdWU6W24uc2VsZWN0aW9uU3RhcnQsbi5zZWxlY3Rpb25FbmRdfSk6dD17dmFsdWU6bi52YWx9LGkudHJpZ2dlcihELHQpKSxuLl91cGRhdGVUb29sdGlwKG4udmFsKX0sX3VwZGF0ZVRvb2x0aXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPW4udG9vbHRpcCxyPVwiXCI7aS5lbmFibGVkJiYodC50b29sdGlwRGl2fHx0Ll9jcmVhdGVUb29sdGlwKCkscj10Lm93bmVyLl9nZXRGb3JtYXR0ZWRWYWx1ZShjKGUpLHQpLHQudHlwZXx8KHIrPXQudG9vbHRpcElubmVyRGl2KSx0LnRvb2x0aXBEaXYuaHRtbChyKSx0Lm1vdmVUb29sdGlwKCkpfSxkcmFnY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXIuX3JlZnJlc2goKSxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuY3NzKFwiY3Vyc29yXCIsXCJcIiksdGhpcy5fZW5kKCl9LGRyYWdlbmQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vd25lcjtyZXR1cm4gZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmNzcyhcImN1cnNvclwiLFwiXCIpLHQudHlwZT9uLl91cGRhdGUodC5zZWxlY3Rpb25TdGFydCx0LnNlbGVjdGlvbkVuZCk6KG4uX3VwZGF0ZSh0LnZhbCksdC5kcmFnZ2FibGUudXNlckV2ZW50cy5fZGlzcG9zZUFsbCgpKSx0Ll9lbmQoKX0sX2VuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm93bmVyO3JldHVybiB0Ll9mb2N1c1dpdGhNb3VzZShlLmVsZW1lbnQpLHQuZWxlbWVudC5vbihCKSwhMX0sX3JlbW92ZVRvb2x0aXA6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ub3duZXI7bi50b29sdGlwRGl2JiZpLm9wdGlvbnMudG9vbHRpcC5lbmFibGVkJiZpLm9wdGlvbnMuZW5hYmxlZCYmKHQ/KG4udG9vbHRpcERpdi5yZW1vdmUoKSxuLnRvb2x0aXBEaXY9bnVsbCk6bi50b29sdGlwRGl2LmZhZGVPdXQoXCJzbG93XCIsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZSgpLG4udG9vbHRpcERpdj1udWxsfSkpfSxtb3ZlVG9vbHRpcDpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG89dGhpcyxhPW8ub3duZXIscz0wLGw9MCxjPW8uZWxlbWVudCxkPWYuZ2V0T2Zmc2V0KGMpLHU9OCxoPWUod2luZG93KSxwPW8udG9vbHRpcERpdi5maW5kKFwiLmstY2FsbG91dFwiKSxnPW8udG9vbHRpcERpdi5vdXRlcldpZHRoKCksbT1vLnRvb2x0aXBEaXYub3V0ZXJIZWlnaHQoKTtvLnR5cGU/KHQ9YS53cmFwcGVyLmZpbmQoSCksZD1mLmdldE9mZnNldCh0LmVxKDApKSxuPWYuZ2V0T2Zmc2V0KHQuZXEoMSkpLGEuX2lzSG9yaXpvbnRhbD8ocz1uLnRvcCxsPWQubGVmdCsobi5sZWZ0LWQubGVmdCkvMik6KHM9ZC50b3ArKG4udG9wLWQudG9wKS8yLGw9bi5sZWZ0KSxyPXQuZXEoMCkub3V0ZXJXaWR0aCgpKzIqdSk6KHM9ZC50b3AsbD1kLmxlZnQscj1jLm91dGVyV2lkdGgoKSsyKnUpLGEuX2lzSG9yaXpvbnRhbD8obC09cGFyc2VJbnQoKGctY1thLl9vdXRlclNpemVdKCkpLzIsMTApLHMtPW0rcC5oZWlnaHQoKSt1KToocy09cGFyc2VJbnQoKG0tY1thLl9vdXRlclNpemVdKCkpLzIsMTApLGwtPWcrcC53aWR0aCgpK3UpLGEuX2lzSG9yaXpvbnRhbD8oaT1vLl9mbGlwKHMsbSxyLGgub3V0ZXJIZWlnaHQoKStvLl9zY3JvbGxPZmZzZXQudG9wKSxzKz1pLGwrPW8uX2ZpdChsLGcsaC5vdXRlcldpZHRoKCkrby5fc2Nyb2xsT2Zmc2V0LmxlZnQpKTooaT1vLl9mbGlwKGwsZyxyLGgub3V0ZXJXaWR0aCgpK28uX3Njcm9sbE9mZnNldC5sZWZ0KSxzKz1vLl9maXQocyxtLGgub3V0ZXJIZWlnaHQoKStvLl9zY3JvbGxPZmZzZXQudG9wKSxsKz1pKSxpPjAmJnAmJihwLnJlbW92ZUNsYXNzKCkscC5hZGRDbGFzcyhcImstY2FsbG91dCBrLWNhbGxvdXQtXCIrKGEuX2lzSG9yaXpvbnRhbD9cIm5cIjpcIndcIikpKSxvLnRvb2x0aXBEaXYuY3NzKHt0b3A6cyxsZWZ0Omx9KX0sX2ZpdDpmdW5jdGlvbihlLHQsbil7dmFyIGk9MDtyZXR1cm4gZSt0Pm4mJihpPW4tKGUrdCkpLDA+ZSYmKGk9LWUpLGl9LF9mbGlwOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPTA7cmV0dXJuIGUrdD5pJiYocis9LShuK3QpKSwwPmUrciYmKHIrPW4rdCkscn0sY29uc3RyYWluVmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcyxvPTA7cmV0dXJuIG89ZT50JiZuPmU/ci5vd25lci5fZ2V0VmFsdWVGcm9tUG9zaXRpb24oZSxyLmRyYWdhYmxlQXJlYSk6aT9yLm9wdGlvbnMubWF4OnIub3B0aW9ucy5taW59fSxmLnVpLnBsdWdpbihKKSxwPVguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHIsbz10aGlzLGE9ZShuKS5maW5kKFwiaW5wdXRcIikscz1hLmVxKDApWzBdLGM9YS5lcSgxKVswXTtzLnR5cGU9XCJ0ZXh0XCIsYy50eXBlPVwidGV4dFwiLGk9dih7fSx7c2VsZWN0aW9uU3RhcnQ6ZChzLFwidmFsdWVcIiksbWluOmQocyxcIm1pblwiKSxtYXg6ZChzLFwibWF4XCIpLHNtYWxsU3RlcDpkKHMsXCJzdGVwXCIpfSx7c2VsZWN0aW9uRW5kOmQoYyxcInZhbHVlXCIpLG1pbjpkKGMsXCJtaW5cIiksbWF4OmQoYyxcIm1heFwiKSxzbWFsbFN0ZXA6ZChjLFwic3RlcFwiKX0saSksaSYmaS5lbmFibGVkPT09dCYmKGkuZW5hYmxlZD0hYS5pcyhcIltkaXNhYmxlZF1cIikpLFguZm4uaW5pdC5jYWxsKG8sbixpKSxpPW8ub3B0aW9ucyx1KGkuc2VsZWN0aW9uU3RhcnQpJiZudWxsIT09aS5zZWxlY3Rpb25TdGFydHx8KGkuc2VsZWN0aW9uU3RhcnQ9aS5taW4sYS5lcSgwKS5wcm9wKFwidmFsdWVcIixsKGkubWluKSkpLHUoaS5zZWxlY3Rpb25FbmQpJiZudWxsIT09aS5zZWxlY3Rpb25FbmR8fChpLnNlbGVjdGlvbkVuZD1pLm1heCxhLmVxKDEpLnByb3AoXCJ2YWx1ZVwiLGwoaS5tYXgpKSkscj1vLndyYXBwZXIuZmluZChIKSxuZXcgcC5TZWxlY3Rpb24ocixvLGkpLG8uX2ZpcnN0SGFuZGxlRHJhZz1uZXcgSi5EcmFnKHIuZXEoMCksXCJmaXJzdEhhbmRsZVwiLG8saSksby5fbGFzdEhhbmRsZURyYWc9bmV3IEouRHJhZyhyLmVxKDEpLFwibGFzdEhhbmRsZVwiLG8saSl9LG9wdGlvbnM6e25hbWU6XCJSYW5nZVNsaWRlclwiLGxlZnREcmFnSGFuZGxlVGl0bGU6XCJkcmFnXCIscmlnaHREcmFnSGFuZGxlVGl0bGU6XCJkcmFnXCIsdG9vbHRpcDp7Zm9ybWF0OlwiezA6IywjLiMjfVwifSxzZWxlY3Rpb25TdGFydDpudWxsLHNlbGVjdGlvbkVuZDpudWxsfSxlbmFibGU6ZnVuY3Rpb24obil7dmFyIGkscj10aGlzLG89ci5vcHRpb25zO3IuZGlzYWJsZSgpLG4hPT0hMSYmKHIud3JhcHBlci5yZW1vdmVDbGFzcyhHKS5hZGRDbGFzcyhqKSxyLndyYXBwZXIuZmluZChcImlucHV0XCIpLnJlbW92ZUF0dHIoJCksaT1mdW5jdGlvbihuKXt2YXIgaSxhLHMsbCxjLGQsdSxoPVEobilbMF07aWYoaCl7aWYoaT1yLl9pc0hvcml6b250YWw/aC5sb2NhdGlvbi5wYWdlWDpoLmxvY2F0aW9uLnBhZ2VZLGE9ci5fZ2V0RHJhZ2dhYmxlQXJlYSgpLHM9ci5fZ2V0VmFsdWVGcm9tUG9zaXRpb24oaSxhKSxsPWUobi50YXJnZXQpLGwuaGFzQ2xhc3MoXCJrLWRyYWdoYW5kbGVcIikpcmV0dXJuIHIud3JhcHBlci5maW5kKFwiLlwiK1cpLnJlbW92ZUNsYXNzKFcrXCIgXCIrVSksbC5hZGRDbGFzcyhXK1wiIFwiK1UpLHQ7by5zZWxlY3Rpb25TdGFydD5zPyhjPXMsZD1vLnNlbGVjdGlvbkVuZCx1PXIuX2ZpcnN0SGFuZGxlRHJhZyk6cz5yLnNlbGVjdGlvbkVuZD8oYz1vLnNlbGVjdGlvblN0YXJ0LGQ9cyx1PXIuX2xhc3RIYW5kbGVEcmFnKTpvLnNlbGVjdGlvbkVuZC1zPj1zLW8uc2VsZWN0aW9uU3RhcnQ/KGM9cyxkPW8uc2VsZWN0aW9uRW5kLHU9ci5fZmlyc3RIYW5kbGVEcmFnKTooYz1vLnNlbGVjdGlvblN0YXJ0LGQ9cyx1PXIuX2xhc3RIYW5kbGVEcmFnKSx1LmRyYWdzdGFydChuKSxyLl9zZXRWYWx1ZUluUmFuZ2UoYyxkKSxyLl9mb2N1c1dpdGhNb3VzZSh1LmVsZW1lbnQpfX0sci53cmFwcGVyLmZpbmQoVitcIiwgXCIrTikub24oTSxpKS5lbmQoKS5vbihNLGZ1bmN0aW9uKCl7ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLm9uZShcInNlbGVjdHN0YXJ0XCIsZi5wcmV2ZW50RGVmYXVsdCl9KS5vbihJLGZ1bmN0aW9uKCl7ci5fYWN0aXZlRHJhZ0hhbmRsZSYmci5fYWN0aXZlRHJhZ0hhbmRsZS5fZW5kKCl9KSxyLndyYXBwZXIuZmluZChIKS5hdHRyKEssMCkub24oUCxmdW5jdGlvbigpe3IuX3NldFRvb2x0aXBUaW1lb3V0KCl9KS5vbihSLGZ1bmN0aW9uKGUpe3IuX2ZvY3VzV2l0aE1vdXNlKGUudGFyZ2V0KSxlLnByZXZlbnREZWZhdWx0KCl9KS5vbihMLHcoci5fZm9jdXMscikpLm9uKE8sdyhyLl9ibHVyLHIpKSxyLndyYXBwZXIuZmluZChIKS5vZmYoRixmLnByZXZlbnREZWZhdWx0KS5lcSgwKS5vbihGLHcoZnVuY3Rpb24oZSl7dGhpcy5fa2V5ZG93bihlLFwiZmlyc3RIYW5kbGVcIil9LHIpKS5lbmQoKS5lcSgxKS5vbihGLHcoZnVuY3Rpb24oZSl7dGhpcy5fa2V5ZG93bihlLFwibGFzdEhhbmRsZVwiKX0scikpLHIub3B0aW9ucy5lbmFibGVkPSEwKX0sZGlzYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS53cmFwcGVyLnJlbW92ZUNsYXNzKGopLmFkZENsYXNzKEcpLGUud3JhcHBlci5maW5kKFwiaW5wdXRcIikucHJvcCgkLCQpLGUud3JhcHBlci5maW5kKFYrXCIsIFwiK04pLm9mZihNKS5vZmYoSSksZS53cmFwcGVyLmZpbmQoSCkuYXR0cihLLC0xKS5vZmYoUCkub2ZmKEYpLm9mZihSKS5vZmYoTCkub2ZmKE8pLGUub3B0aW9ucy5lbmFibGVkPSExfSxfa2V5ZG93bjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMsYT1vLm9wdGlvbnMuc2VsZWN0aW9uU3RhcnQscz1vLm9wdGlvbnMuc2VsZWN0aW9uRW5kO2Uua2V5Q29kZSBpbiBvLl9rZXlNYXAmJihvLl9jbGVhclRvb2x0aXBUaW1lb3V0KCksXCJmaXJzdEhhbmRsZVwiPT10PyhyPW8uX2FjdGl2ZUhhbmRsZURyYWc9by5fZmlyc3RIYW5kbGVEcmFnLGE9by5fa2V5TWFwW2Uua2V5Q29kZV0oYSksYT5zJiYocz1hKSk6KHI9by5fYWN0aXZlSGFuZGxlRHJhZz1vLl9sYXN0SGFuZGxlRHJhZyxzPW8uX2tleU1hcFtlLmtleUNvZGVdKHMpLGE+cyYmKGE9cykpLG8uX3NldFZhbHVlSW5SYW5nZShhLHMpLG49TWF0aC5tYXgoYSxvLm9wdGlvbnMuc2VsZWN0aW9uU3RhcnQpLGk9TWF0aC5taW4ocyxvLm9wdGlvbnMuc2VsZWN0aW9uRW5kKSxyLnNlbGVjdGlvbkVuZD1NYXRoLm1heChpLG8ub3B0aW9ucy5zZWxlY3Rpb25TdGFydCksci5zZWxlY3Rpb25TdGFydD1NYXRoLm1pbihuLG8ub3B0aW9ucy5zZWxlY3Rpb25FbmQpLHIuX3VwZGF0ZVRvb2x0aXAoby52YWx1ZSgpW28uX2FjdGl2ZUhhbmRsZV0pLGUucHJldmVudERlZmF1bHQoKSl9LF91cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi52YWx1ZSgpLHI9aVswXSE9ZXx8aVsxXSE9dDtuLnZhbHVlKFtlLHRdKSxyJiZuLnRyaWdnZXIoVCx7dmFsdWVzOltlLHRdLHZhbHVlOltlLHRdfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmxlbmd0aD90aGlzLl92YWx1ZShlWzBdLGVbMV0pOnRoaXMuX3ZhbHVlKCl9LF92YWx1ZTpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMscj1pLm9wdGlvbnMsbz1yLnNlbGVjdGlvblN0YXJ0LGE9ci5zZWxlY3Rpb25FbmQ7cmV0dXJuIGlzTmFOKGUpJiZpc05hTihuKT9bbyxhXTooZT1jKGUpLG49YyhuKSxlPj1yLm1pbiYmci5tYXg+PWUmJm4+PXIubWluJiZyLm1heD49biYmbj49ZSYmKG8hPWV8fGEhPW4pJiYoaS5lbGVtZW50LmZpbmQoXCJpbnB1dFwiKS5lcSgwKS5wcm9wKFwidmFsdWVcIixsKGUpKS5lbmQoKS5lcSgxKS5wcm9wKFwidmFsdWVcIixsKG4pKSxyLnNlbGVjdGlvblN0YXJ0PWUsci5zZWxlY3Rpb25FbmQ9bixpLl9yZWZyZXNoKCksaS5fcmVmcmVzaEFyaWFBdHRyKGUsbikpLHQpfSx2YWx1ZXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYihlKT90aGlzLl92YWx1ZShlWzBdLGVbMV0pOnRoaXMuX3ZhbHVlKGUsdCl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucztlLnRyaWdnZXIoeix7dmFsdWVzOlt0LnNlbGVjdGlvblN0YXJ0LHQuc2VsZWN0aW9uRW5kXSx2YWx1ZTpbdC5zZWxlY3Rpb25TdGFydCx0LnNlbGVjdGlvbkVuZF19KSx0LnNlbGVjdGlvblN0YXJ0PT10Lm1heCYmdC5zZWxlY3Rpb25FbmQ9PXQubWF4JiZlLl9zZXRaSW5kZXgoXCJmaXJzdEhhbmRsZVwiKX0sX3JlZnJlc2hBcmlhQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPWkud3JhcHBlci5maW5kKEgpLG89aS5fYWN0aXZlSGFuZGxlRHJhZztuPWkuX2dldEZvcm1hdHRlZFZhbHVlKFtlLHRdLG8pLHIuZXEoMCkuYXR0cihcImFyaWEtdmFsdWVub3dcIixlKSxyLmVxKDEpLmF0dHIoXCJhcmlhLXZhbHVlbm93XCIsdCksci5hdHRyKFwiYXJpYS12YWx1ZXRleHRcIixuKX0sX3NldFZhbHVlSW5SYW5nZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMub3B0aW9ucztlPWsubWF4KGsubWluKGUsbi5tYXgpLG4ubWluKSx0PWsubWF4KGsubWluKHQsbi5tYXgpLG4ubWluKSxlPT1uLm1heCYmdD09bi5tYXgmJnRoaXMuX3NldFpJbmRleChcImZpcnN0SGFuZGxlXCIpLHRoaXMuX3VwZGF0ZShrLm1pbihlLHQpLGsubWF4KGUsdCkpfSxfc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3RoaXMud3JhcHBlci5maW5kKEgpLmVhY2goZnVuY3Rpb24obil7ZSh0aGlzKS5jc3MoXCJ6LWluZGV4XCIsXCJmaXJzdEhhbmRsZVwiPT10PzEtbjpuKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztnLmZuLmRlc3Ryb3kuY2FsbChlKSxlLndyYXBwZXIub2ZmKEEpLmZpbmQoVitcIiwgXCIrTikub2ZmKEEpLmVuZCgpLmZpbmQoSCkub2ZmKEEpLGUuX2ZpcnN0SGFuZGxlRHJhZy5kcmFnZ2FibGUuZGVzdHJveSgpLGUuX2xhc3RIYW5kbGVEcmFnLmRyYWdnYWJsZS5kZXN0cm95KCl9fSkscC5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoaSl7aT1pfHxbXTt2YXIgbz1pWzBdLW4ubWluLGE9aVsxXS1uLm1pbixzPWsuY2VpbChjKG8vbi5zbWFsbFN0ZXApKSxsPWsuY2VpbChjKGEvbi5zbWFsbFN0ZXApKSxkPXQuX3BpeGVsU3RlcHNbc10sdT10Ll9waXhlbFN0ZXBzW2xdLGg9cGFyc2VJbnQoZS5lcSgwKVt0Ll9vdXRlclNpemVdKCkvMiwxMCkscD10Ll9pc1J0bD8yOjA7ZS5lcSgwKS5jc3ModC5fcG9zaXRpb24sZC1oLXApLmVuZCgpLmVxKDEpLmNzcyh0Ll9wb3NpdGlvbix1LWgtcCkscihkLHUpfWZ1bmN0aW9uIHIoZSxuKXt2YXIgaSxyLG89dC5fdHJhY2tEaXYuZmluZChcIi5rLXNsaWRlci1zZWxlY3Rpb25cIik7aT1rLmFicyhlLW4pLG9bdC5fc2l6ZUZuXShpKSx0Ll9pc1J0bD8ocj1rLm1heChlLG4pLG8uY3NzKFwicmlnaHRcIix0Ll9tYXhTZWxlY3Rpb24tci0xKSk6KHI9ay5taW4oZSxuKSxvLmNzcyh0Ll9wb3NpdGlvbixyLTEpKX1pKHQudmFsdWUoKSksdC5iaW5kKFtULEQsel0sZnVuY3Rpb24oZSl7aShlLnZhbHVlcyl9KX0sZi51aS5wbHVnaW4ocCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGUsdCxuKXtuPWQobiksbiYmIW4uZXF1YWxzKGUuY29sb3IoKSkmJihcImNoYW5nZVwiPT10JiYoZS5fdmFsdWU9biksbj0xIT1uLmE/bi50b0Nzc1JnYmEoKTpuLnRvQ3NzKCksZS50cmlnZ2VyKHQse3ZhbHVlOm59KSl9ZnVuY3Rpb24gcihlLHQsbil7dmFyIGkscjtyZXR1cm4gZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSxpPWUubGVuZ3RoLHI9ZS5pbmRleE9mKHQpLDA+cj8wPm4/ZVtpLTFdOmVbMF06KHIrPW4sMD5yP3IrPWk6ciU9aSxlW3JdKX1mdW5jdGlvbiBvKGUpe2UucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBhKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX12YXIgcz13aW5kb3cua2VuZG8sbD1zLnVpLGM9bC5XaWRnZXQsZD1zLnBhcnNlQ29sb3IsdT1zLkNvbG9yLGg9cy5rZXlzLHA9XCJiYWNrZ3JvdW5kLWNvbG9yXCIsZj1cImstc3RhdGUtc2VsZWN0ZWRcIixnPVwiMDAwMDAwLDdmN2Y3Ziw4ODAwMTUsZWQxYzI0LGZmN2YyNyxmZmYyMDAsMjJiMTRjLDAwYTJlOCwzZjQ4Y2MsYTM0OWE0LGZmZmZmZixjM2MzYzMsYjk3YTU3LGZmYWVjOSxmZmM5MGUsZWZlNGIwLGI1ZTYxZCw5OWQ5ZWEsNzA5MmJlLGM4YmZlN1wiLG09XCJGRkZGRkYsRkZDQ0ZGLEZGOTlGRixGRjY2RkYsRkYzM0ZGLEZGMDBGRixDQ0ZGRkYsQ0NDQ0ZGLENDOTlGRixDQzY2RkYsQ0MzM0ZGLENDMDBGRiw5OUZGRkYsOTlDQ0ZGLDk5OTlGRiw5OTY2RkYsOTkzM0ZGLDk5MDBGRixGRkZGQ0MsRkZDQ0NDLEZGOTlDQyxGRjY2Q0MsRkYzM0NDLEZGMDBDQyxDQ0ZGQ0MsQ0NDQ0NDLENDOTlDQyxDQzY2Q0MsQ0MzM0NDLENDMDBDQyw5OUZGQ0MsOTlDQ0NDLDk5OTlDQyw5OTY2Q0MsOTkzM0NDLDk5MDBDQyxGRkZGOTksRkZDQzk5LEZGOTk5OSxGRjY2OTksRkYzMzk5LEZGMDA5OSxDQ0ZGOTksQ0NDQzk5LENDOTk5OSxDQzY2OTksQ0MzMzk5LENDMDA5OSw5OUZGOTksOTlDQzk5LDk5OTk5OSw5OTY2OTksOTkzMzk5LDk5MDA5OSxGRkZGNjYsRkZDQzY2LEZGOTk2NixGRjY2NjYsRkYzMzY2LEZGMDA2NixDQ0ZGNjYsQ0NDQzY2LENDOTk2NixDQzY2NjYsQ0MzMzY2LENDMDA2Niw5OUZGNjYsOTlDQzY2LDk5OTk2Niw5OTY2NjYsOTkzMzY2LDk5MDA2NixGRkZGMzMsRkZDQzMzLEZGOTkzMyxGRjY2MzMsRkYzMzMzLEZGMDAzMyxDQ0ZGMzMsQ0NDQzMzLENDOTkzMyxDQzY2MzMsQ0MzMzMzLENDMDAzMyw5OUZGMzMsOTlDQzMzLDk5OTkzMyw5OTY2MzMsOTkzMzMzLDk5MDAzMyxGRkZGMDAsRkZDQzAwLEZGOTkwMCxGRjY2MDAsRkYzMzAwLEZGMDAwMCxDQ0ZGMDAsQ0NDQzAwLENDOTkwMCxDQzY2MDAsQ0MzMzAwLENDMDAwMCw5OUZGMDAsOTlDQzAwLDk5OTkwMCw5OTY2MDAsOTkzMzAwLDk5MDAwMCw2NkZGRkYsNjZDQ0ZGLDY2OTlGRiw2NjY2RkYsNjYzM0ZGLDY2MDBGRiwzM0ZGRkYsMzNDQ0ZGLDMzOTlGRiwzMzY2RkYsMzMzM0ZGLDMzMDBGRiwwMEZGRkYsMDBDQ0ZGLDAwOTlGRiwwMDY2RkYsMDAzM0ZGLDAwMDBGRiw2NkZGQ0MsNjZDQ0NDLDY2OTlDQyw2NjY2Q0MsNjYzM0NDLDY2MDBDQywzM0ZGQ0MsMzNDQ0NDLDMzOTlDQywzMzY2Q0MsMzMzM0NDLDMzMDBDQywwMEZGQ0MsMDBDQ0NDLDAwOTlDQywwMDY2Q0MsMDAzM0NDLDAwMDBDQyw2NkZGOTksNjZDQzk5LDY2OTk5OSw2NjY2OTksNjYzMzk5LDY2MDA5OSwzM0ZGOTksMzNDQzk5LDMzOTk5OSwzMzY2OTksMzMzMzk5LDMzMDA5OSwwMEZGOTksMDBDQzk5LDAwOTk5OSwwMDY2OTksMDAzMzk5LDAwMDA5OSw2NkZGNjYsNjZDQzY2LDY2OTk2Niw2NjY2NjYsNjYzMzY2LDY2MDA2NiwzM0ZGNjYsMzNDQzY2LDMzOTk2NiwzMzY2NjYsMzMzMzY2LDMzMDA2NiwwMEZGNjYsMDBDQzY2LDAwOTk2NiwwMDY2NjYsMDAzMzY2LDAwMDA2Niw2NkZGMzMsNjZDQzMzLDY2OTkzMyw2NjY2MzMsNjYzMzMzLDY2MDAzMywzM0ZGMzMsMzNDQzMzLDMzOTkzMywzMzY2MzMsMzMzMzMzLDMzMDAzMywwMEZGMzMsMDBDQzMzLDAwOTkzMywwMDY2MzMsMDAzMzMzLDAwMDAzMyw2NkZGMDAsNjZDQzAwLDY2OTkwMCw2NjY2MDAsNjYzMzAwLDY2MDAwMCwzM0ZGMDAsMzNDQzAwLDMzOTkwMCwzMzY2MDAsMzMzMzAwLDMzMDAwMCwwMEZGMDAsMDBDQzAwLDAwOTkwMCwwMDY2MDAsMDAzMzAwLDAwMDAwMFwiLHY9e2FwcGx5OlwiQXBwbHlcIixjYW5jZWw6XCJDYW5jZWxcIn0sXz1cIi5rZW5kb0NvbG9yVG9vbHNcIix5PVwiY2xpY2tcIitfLHc9XCJrZXlkb3duXCIrXyxiPXMuc3VwcG9ydC5icm93c2VyLGs9Yi5tc2llJiY5PmIudmVyc2lvbix4PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2MuZm4uaW5pdC5jYWxsKGksZSx0KSxlPWkuZWxlbWVudCx0PWkub3B0aW9ucyxpLl92YWx1ZT10LnZhbHVlPWQodC52YWx1ZSksaS5fdGFiSW5kZXg9ZS5hdHRyKFwidGFiSW5kZXhcIil8fDAsbj1pLl9hcmlhSWQ9dC5hcmlhSWQsbiYmZS5hdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIsbiksdC5fc3RhbmRhbG9uZSYmKGkuX3RyaWdnZXJTZWxlY3Q9aS5fdHJpZ2dlckNoYW5nZSl9LG9wdGlvbnM6e25hbWU6XCJDb2xvclNlbGVjdG9yXCIsdmFsdWU6bnVsbCxfc3RhbmRhbG9uZTohMH0sZXZlbnRzOltcImNoYW5nZVwiLFwic2VsZWN0XCIsXCJjYW5jZWxcIl0sY29sb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1uJiYodGhpcy5fdmFsdWU9ZChlKSx0aGlzLl91cGRhdGVVSSh0aGlzLl92YWx1ZSkpLHRoaXMuX3ZhbHVlfSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLmNvbG9yKGUpLGUmJihlPXRoaXMub3B0aW9ucy5vcGFjaXR5P2UudG9Dc3NSZ2JhKCk6ZS50b0NzcygpKSxlfHxudWxsfSxlbmFibGU6ZnVuY3Rpb24odCl7MD09PWFyZ3VtZW50cy5sZW5ndGgmJih0PSEwKSxlKFwiLmstZGlzYWJsZWQtb3ZlcmxheVwiLHRoaXMud3JhcHBlcikucmVtb3ZlKCksdHx8dGhpcy53cmFwcGVyLmFwcGVuZChcIjxkaXYgY2xhc3M9J2stZGlzYWJsZWQtb3ZlcmxheSc+PC9kaXY+XCIpLHRoaXMuX29uRW5hYmxlKHQpfSxfc2VsZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fdmFsdWU7ZT10aGlzLmNvbG9yKGUpLHR8fCh0aGlzLmVsZW1lbnQudHJpZ2dlcihcImNoYW5nZVwiKSxlLmVxdWFscyhuKT90aGlzLl9zdGFuZGFsb25lfHx0aGlzLnRyaWdnZXIoXCJjYW5jZWxcIik6dGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMudmFsdWUoKX0pKX0sX3RyaWdnZXJTZWxlY3Q6ZnVuY3Rpb24oZSl7aSh0aGlzLFwic2VsZWN0XCIsZSl9LF90cmlnZ2VyQ2hhbmdlOmZ1bmN0aW9uKGUpe2kodGhpcyxcImNoYW5nZVwiLGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQub2ZmKF8pLHRoaXMud3JhcHBlciYmdGhpcy53cmFwcGVyLm9mZihfKS5maW5kKFwiKlwiKS5vZmYoXyksdGhpcy53cmFwcGVyPW51bGwsYy5mbi5kZXN0cm95LmNhbGwodGhpcyl9LF91cGRhdGVVSTplLm5vb3AsX3NlbGVjdE9uSGlkZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxfY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFwiY2FuY2VsXCIpfX0pLEM9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sbCxjPXRoaXM7aWYoeC5mbi5pbml0LmNhbGwoYyx0LG4pLHQ9Yy53cmFwcGVyPWMuZWxlbWVudCxuPWMub3B0aW9ucyxpPW4ucGFsZXR0ZSxcIndlYnNhZmVcIj09aT8oaT1tLG4uY29sdW1ucz0xOCk6XCJiYXNpY1wiPT1pJiYoaT1nKSxcInN0cmluZ1wiPT10eXBlb2YgaSYmKGk9aS5zcGxpdChcIixcIikpLGUuaXNBcnJheShpKSYmKGk9ZS5tYXAoaSxmdW5jdGlvbihlKXtyZXR1cm4gZChlKX0pKSxjLl9zZWxlY3RlZElEPShuLmFyaWFJZHx8cy5ndWlkKCkpK1wiX3NlbGVjdGVkXCIsdC5hZGRDbGFzcyhcImstd2lkZ2V0IGstY29sb3JwYWxldHRlXCIpLmF0dHIoXCJyb2xlXCIsXCJncmlkXCIpLmF0dHIoXCJhcmlhLXJlYWRvbmx5XCIsXCJ0cnVlXCIpLmFwcGVuZChlKGMuX3RlbXBsYXRlKHtjb2xvcnM6aSxjb2x1bW5zOm4uY29sdW1ucyx0aWxlU2l6ZTpuLnRpbGVTaXplLHZhbHVlOmMuX3ZhbHVlLGlkOm4uYXJpYUlkfSkpKS5vbih5LFwiLmstaXRlbVwiLGZ1bmN0aW9uKHQpe2MuX3NlbGVjdChlKHQuY3VycmVudFRhcmdldCkuY3NzKHApKX0pLmF0dHIoXCJ0YWJJbmRleFwiLGMuX3RhYkluZGV4KS5vbih3LGEoYy5fa2V5ZG93bixjKSkscj1uLnRpbGVTaXplKXtpZigvbnVtYmVyfHN0cmluZy8udGVzdCh0eXBlb2Ygcikpbz1sPXBhcnNlRmxvYXQocik7ZWxzZXtpZihcIm9iamVjdFwiIT10eXBlb2Ygcil0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIHZhbHVlIGZvciB0aGUgJ3RpbGVTaXplJyBhcmd1bWVudFwiKTtvPXBhcnNlRmxvYXQoci53aWR0aCksbD1wYXJzZUZsb2F0KHIuaGVpZ2h0KX10LmZpbmQoXCIuay1pdGVtXCIpLmNzcyh7d2lkdGg6byxoZWlnaHQ6bH0pfX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLndyYXBwZXIuZm9jdXMoKX0sb3B0aW9uczp7bmFtZTpcIkNvbG9yUGFsZXR0ZVwiLGNvbHVtbnM6MTAsdGlsZVNpemU6bnVsbCxwYWxldHRlOlwiYmFzaWNcIn0sX29uRW5hYmxlOmZ1bmN0aW9uKGUpe2U/dGhpcy53cmFwcGVyLmF0dHIoXCJ0YWJJbmRleFwiLHRoaXMuX3RhYkluZGV4KTp0aGlzLndyYXBwZXIucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgbixpLGE9dGhpcy53cmFwcGVyLHM9YS5maW5kKFwiLmstaXRlbVwiKSxsPXMuZmlsdGVyKFwiLlwiK2YpLmdldCgwKSxjPXQua2V5Q29kZTtpZihjPT1oLkxFRlQ/bj1yKHMsbCwtMSk6Yz09aC5SSUdIVD9uPXIocyxsLDEpOmM9PWguRE9XTj9uPXIocyxsLHRoaXMub3B0aW9ucy5jb2x1bW5zKTpjPT1oLlVQP249cihzLGwsLXRoaXMub3B0aW9ucy5jb2x1bW5zKTpjPT1oLkVOVEVSPyhvKHQpLGwmJnRoaXMuX3NlbGVjdChlKGwpLmNzcyhwKSkpOmM9PWguRVNDJiZ0aGlzLl9jYW5jZWwoKSxuKXtvKHQpLHRoaXMuX2N1cnJlbnQobik7dHJ5e2k9ZChuLmNzcyhwKSksdGhpcy5fdHJpZ2dlclNlbGVjdChpKX1jYXRjaCh1KXt9fX0sX2N1cnJlbnQ6ZnVuY3Rpb24odCl7dGhpcy53cmFwcGVyLmZpbmQoXCIuXCIrZikucmVtb3ZlQ2xhc3MoZikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkucmVtb3ZlQXR0cihcImlkXCIpLGUodCkuYWRkQ2xhc3MoZikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuYXR0cihcImlkXCIsdGhpcy5fc2VsZWN0ZWRJRCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHRoaXMuX3NlbGVjdGVkSUQpfSxfdXBkYXRlVUk6ZnVuY3Rpb24odCl7dmFyIGk9bnVsbDt0aGlzLndyYXBwZXIuZmluZChcIi5rLWl0ZW1cIikuZWFjaChmdW5jdGlvbigpe3ZhciByPWQoZSh0aGlzKS5jc3MocCkpO3JldHVybiByJiZyLmVxdWFscyh0KT8oaT10aGlzLCExKTpufSksdGhpcy5fY3VycmVudChpKX0sX3RlbXBsYXRlOnMudGVtcGxhdGUoJzx0YWJsZSBjbGFzcz1cImstcGFsZXR0ZSBrLXJlc2V0XCIgcm9sZT1cInByZXNlbnRhdGlvblwiPjx0ciByb2xlPVwicm93XCI+IyBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7ICsraSkgeyAjIyB2YXIgc2VsZWN0ZWQgPSBjb2xvcnNbaV0uZXF1YWxzKHZhbHVlKTsgIyMgaWYgKGkgJiYgaSAlIGNvbHVtbnMgPT0gMCkgeyAjIDwvdHI+PHRyIHJvbGU9XCJyb3dcIj4gIyB9ICM8dGQgcm9sZT1cImdyaWRjZWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz0gY29sb3JzW2ldLnRvQ3NzKCkgI1wiIz0gc2VsZWN0ZWQgPyBcIiBhcmlhLXNlbGVjdGVkPXRydWVcIiA6IFwiXCIgIyAjPShpZCAmJiBpID09PSAwKSA/IFwiaWQ9XFxcXFwiXCIraWQrXCJcXFxcXCIgXCIgOiBcIlwiICMgY2xhc3M9XCJrLWl0ZW0jPSBzZWxlY3RlZCA/IFwiICcrZisnXCIgOiBcIlwiICNcIiBhcmlhLWxhYmVsPVwiIz0gY29sb3JzW2ldLnRvQ3NzKCkgI1wiPjwvdGQ+IyB9ICM8L3RyPjwvdGFibGU+Jyl9KSxTPXguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpczt4LmZuLmluaXQuY2FsbChpLHQsbiksbj1pLm9wdGlvbnMsdD1pLmVsZW1lbnQsaS53cmFwcGVyPXQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWZsYXRjb2xvcnBpY2tlclwiKS5hcHBlbmQoaS5fdGVtcGxhdGUobikpLGkuX2h1ZUVsZW1lbnRzPWUoXCIuay1oc3YtcmVjdGFuZ2xlLCAuay10cmFuc3BhcmVuY3ktc2xpZGVyIC5rLXNsaWRlci10cmFja1wiLHQpLGkuX3NlbGVjdGVkQ29sb3I9ZShcIi5rLXNlbGVjdGVkLWNvbG9yLWRpc3BsYXlcIix0KSxpLl9jb2xvckFzVGV4dD1lKFwiaW5wdXQuay1jb2xvci12YWx1ZVwiLHQpLGkuX3NsaWRlcnMoKSxpLl9oc3ZBcmVhKCksaS5fdXBkYXRlVUkoaS5fdmFsdWV8fGQoXCIjZjAwXCIpKSx0LmZpbmQoXCJpbnB1dC5rLWNvbG9yLXZhbHVlXCIpLm9uKHcsZnVuY3Rpb24odCl7dmFyIG4scixvPXRoaXM7aWYodC5rZXlDb2RlPT1oLkVOVEVSKXRyeXtuPWQoby52YWx1ZSkscj1pLmNvbG9yKCksaS5fc2VsZWN0KG4sbi5lcXVhbHMocikpfWNhdGNoKGEpe2UobykuYWRkQ2xhc3MoXCJrLXN0YXRlLWVycm9yXCIpfWVsc2UgaS5vcHRpb25zLmF1dG91cGRhdGUmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1kKG8udmFsdWUsITApO2UmJmkuX3VwZGF0ZVVJKGUsITApfSwxMCl9KS5lbmQoKS5vbih5LFwiLmstY29udHJvbHMgYnV0dG9uLmFwcGx5XCIsZnVuY3Rpb24oKXtpLl9zZWxlY3QoaS5fZ2V0SFNWKCkpfSkub24oeSxcIi5rLWNvbnRyb2xzIGJ1dHRvbi5jYW5jZWxcIixmdW5jdGlvbigpe2kuX3VwZGF0ZVVJKGkuY29sb3IoKSksaS5fY2FuY2VsKCl9KSxrJiZpLl9hcHBseUlFRmlsdGVyKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9odWVTbGlkZXIuZGVzdHJveSgpLHRoaXMuX29wYWNpdHlTbGlkZXImJnRoaXMuX29wYWNpdHlTbGlkZXIuZGVzdHJveSgpLHRoaXMuX2h1ZVNsaWRlcj10aGlzLl9vcGFjaXR5U2xpZGVyPXRoaXMuX2hzdlJlY3Q9dGhpcy5faHN2SGFuZGxlPXRoaXMuX2h1ZUVsZW1lbnRzPXRoaXMuX3NlbGVjdGVkQ29sb3I9dGhpcy5fY29sb3JBc1RleHQ9bnVsbCx4LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sb3B0aW9uczp7bmFtZTpcIkZsYXRDb2xvclBpY2tlclwiLG9wYWNpdHk6ITEsYnV0dG9uczohMSxpbnB1dDohMCxwcmV2aWV3OiEwLGF1dG91cGRhdGU6ITAsbWVzc2FnZXM6dn0sX2FwcGx5SUVGaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQuZmluZChcIi5rLWh1ZS1zbGlkZXIgLmstc2xpZGVyLXRyYWNrXCIpWzBdLHQ9ZS5jdXJyZW50U3R5bGUuYmFja2dyb3VuZEltYWdlO3Q9dC5yZXBsYWNlKC9edXJsXFwoW1xcJ1xcXCJdP3xbXFwnXFxcIl0/XFwpJC9nLFwiXCIpLGUuc3R5bGUuZmlsdGVyPVwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSdcIit0K1wiJywgc2l6aW5nTWV0aG9kPSdzY2FsZScpXCJ9LF9zbGlkZXJzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtuLl91cGRhdGVVSShuLl9nZXRIU1YoZS52YWx1ZSxudWxsLG51bGwsbnVsbCkpfWZ1bmN0aW9uIHQoZSl7bi5fdXBkYXRlVUkobi5fZ2V0SFNWKG51bGwsbnVsbCxudWxsLGUudmFsdWUvMTAwKSl9dmFyIG49dGhpcyxpPW4uZWxlbWVudDtuLl9odWVTbGlkZXI9aS5maW5kKFwiLmstaHVlLXNsaWRlclwiKS5rZW5kb1NsaWRlcih7bWluOjAsbWF4OjM1OSx0aWNrUGxhY2VtZW50Olwibm9uZVwiLHNob3dCdXR0b25zOiExLHNsaWRlOmUsY2hhbmdlOmV9KS5kYXRhKFwia2VuZG9TbGlkZXJcIiksbi5fb3BhY2l0eVNsaWRlcj1pLmZpbmQoXCIuay10cmFuc3BhcmVuY3ktc2xpZGVyXCIpLmtlbmRvU2xpZGVyKHttaW46MCxtYXg6MTAwLHRpY2tQbGFjZW1lbnQ6XCJub25lXCIsc2hvd0J1dHRvbnM6ITEsc2xpZGU6dCxjaGFuZ2U6dH0pLmRhdGEoXCJrZW5kb1NsaWRlclwiKX0sX2hzdkFyZWE6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsbil7dmFyIGk9dGhpcy5vZmZzZXQscj1lLWkubGVmdCxvPW4taS50b3AsYT10aGlzLndpZHRoLHM9dGhpcy5oZWlnaHQ7cj0wPnI/MDpyPmE/YTpyLG89MD5vPzA6bz5zP3M6byx0Ll9zdkNoYW5nZShyL2EsMS1vL3MpfXZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uLmZpbmQoXCIuay1oc3YtcmVjdGFuZ2xlXCIpLHI9aS5maW5kKFwiLmstZHJhZ2hhbmRsZVwiKS5hdHRyKFwidGFiSW5kZXhcIiwwKS5vbih3LGEodC5fa2V5ZG93bix0KSk7dC5faHN2RXZlbnRzPW5ldyBzLlVzZXJFdmVudHMoaSx7Z2xvYmFsOiEwLHByZXNzOmZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0PXMuZ2V0T2Zmc2V0KGkpLHRoaXMud2lkdGg9aS53aWR0aCgpLHRoaXMuaGVpZ2h0PWkuaGVpZ2h0KCksci5mb2N1cygpLGUuY2FsbCh0aGlzLHQueC5sb2NhdGlvbix0LnkubG9jYXRpb24pfSxzdGFydDpmdW5jdGlvbigpe2kuYWRkQ2xhc3MoXCJrLWRyYWdnaW5nXCIpLHIuZm9jdXMoKX0sbW92ZTpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksZS5jYWxsKHRoaXMsdC54LmxvY2F0aW9uLHQueS5sb2NhdGlvbil9LGVuZDpmdW5jdGlvbigpe2kucmVtb3ZlQ2xhc3MoXCJrLWRyYWdnaW5nXCIpfX0pLHQuX2hzdlJlY3Q9aSx0Ll9oc3ZIYW5kbGU9cn0sX29uRW5hYmxlOmZ1bmN0aW9uKGUpe3RoaXMuX2h1ZVNsaWRlci5lbmFibGUoZSksdGhpcy5fb3BhY2l0eVNsaWRlciYmdGhpcy5fb3BhY2l0eVNsaWRlci5lbmFibGUoZSksdGhpcy53cmFwcGVyLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwhZSk7dmFyIHQ9dGhpcy5faHN2UmVjdC5maW5kKFwiLmstZHJhZ2hhbmRsZVwiKTtlP3QuYXR0cihcInRhYkluZGV4XCIsdGhpcy5fdGFiSW5kZXgpOnQucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9aS5fZ2V0SFNWKCk7clt0XSs9biooZS5zaGlmdEtleT8uMDE6LjA1KSwwPnJbdF0mJihyW3RdPTApLHJbdF0+MSYmKHJbdF09MSksaS5fdXBkYXRlVUkociksbyhlKX1mdW5jdGlvbiBuKHQpe3ZhciBuPWkuX2dldEhTVigpO24uaCs9dCooZS5zaGlmdEtleT8xOjUpLDA+bi5oJiYobi5oPTApLG4uaD4zNTkmJihuLmg9MzU5KSxpLl91cGRhdGVVSShuKSxvKGUpfXZhciBpPXRoaXM7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSBoLkxFRlQ6ZS5jdHJsS2V5P24oLTEpOnQoXCJzXCIsLTEpO2JyZWFrO2Nhc2UgaC5SSUdIVDplLmN0cmxLZXk/bigxKTp0KFwic1wiLDEpO2JyZWFrO2Nhc2UgaC5VUDp0KGUuY3RybEtleSYmaS5fb3BhY2l0eVNsaWRlcj9cImFcIjpcInZcIiwxKTticmVhaztjYXNlIGguRE9XTjp0KGUuY3RybEtleSYmaS5fb3BhY2l0eVNsaWRlcj9cImFcIjpcInZcIiwtMSk7YnJlYWs7Y2FzZSBoLkVOVEVSOmkuX3NlbGVjdChpLl9nZXRIU1YoKSk7YnJlYWs7Y2FzZSBoLkYyOmkud3JhcHBlci5maW5kKFwiaW5wdXQuay1jb2xvci12YWx1ZVwiKS5mb2N1cygpLnNlbGVjdCgpO2JyZWFrO2Nhc2UgaC5FU0M6aS5fY2FuY2VsKCl9fSxmb2N1czpmdW5jdGlvbigpe3RoaXMuX2hzdkhhbmRsZS5mb2N1cygpfSxfZ2V0SFNWOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2hzdlJlY3Qsbz1yLndpZHRoKCksYT1yLmhlaWdodCgpLHM9dGhpcy5faHN2SGFuZGxlLnBvc2l0aW9uKCk7cmV0dXJuIG51bGw9PWUmJihlPXRoaXMuX2h1ZVNsaWRlci52YWx1ZSgpKSxudWxsPT10JiYodD1zLmxlZnQvbyksbnVsbD09biYmKG49MS1zLnRvcC9hKSxudWxsPT1pJiYoaT10aGlzLl9vcGFjaXR5U2xpZGVyP3RoaXMuX29wYWNpdHlTbGlkZXIudmFsdWUoKS8xMDA6MSksdS5mcm9tSFNWKGUsdCxuLGkpfSxfc3ZDaGFuZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXRIU1YobnVsbCxlLHQsbnVsbCk7dGhpcy5fdXBkYXRlVUkobil9LF91cGRhdGVVSTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLl9oc3ZSZWN0O2UmJih0aGlzLl9jb2xvckFzVGV4dC5yZW1vdmVDbGFzcyhcImstc3RhdGUtZXJyb3JcIiksbi5fc2VsZWN0ZWRDb2xvci5jc3MocCxlLnRvRGlzcGxheSgpKSx0fHxuLl9jb2xvckFzVGV4dC52YWwobi5fb3BhY2l0eVNsaWRlcj9lLnRvQ3NzUmdiYSgpOmUudG9Dc3MoKSksbi5fdHJpZ2dlclNlbGVjdChlKSxlPWUudG9IU1YoKSxuLl9oc3ZIYW5kbGUuY3NzKHtsZWZ0OmUucyppLndpZHRoKCkrXCJweFwiLHRvcDooMS1lLnYpKmkuaGVpZ2h0KCkrXCJweFwifSksbi5faHVlRWxlbWVudHMuY3NzKHAsdS5mcm9tSFNWKGUuaCwxLDEsMSkudG9Dc3MoKSksbi5faHVlU2xpZGVyLnZhbHVlKGUuaCksbi5fb3BhY2l0eVNsaWRlciYmbi5fb3BhY2l0eVNsaWRlci52YWx1ZSgxMDAqZS5hKSl9LF9zZWxlY3RPbkhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmJ1dHRvbnM/bnVsbDp0aGlzLl9nZXRIU1YoKX0sX3RlbXBsYXRlOnMudGVtcGxhdGUoJyMgaWYgKHByZXZpZXcpIHsgIzxkaXYgY2xhc3M9XCJrLXNlbGVjdGVkLWNvbG9yXCI+PGRpdiBjbGFzcz1cImstc2VsZWN0ZWQtY29sb3ItZGlzcGxheVwiPjxpbnB1dCBjbGFzcz1cImstY29sb3ItdmFsdWVcIiAjPSAhZGF0YS5pbnB1dCA/IFxcJ3N0eWxlPVwidmlzaWJpbGl0eTogaGlkZGVuO1wiXFwnIDogXCJcIiAjPjwvZGl2PjwvZGl2PiMgfSAjPGRpdiBjbGFzcz1cImstaHN2LXJlY3RhbmdsZVwiPjxkaXYgY2xhc3M9XCJrLWhzdi1ncmFkaWVudFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWRyYWdoYW5kbGVcIj48L2Rpdj48L2Rpdj48aW5wdXQgY2xhc3M9XCJrLWh1ZS1zbGlkZXJcIiAvPiMgaWYgKG9wYWNpdHkpIHsgIzxpbnB1dCBjbGFzcz1cImstdHJhbnNwYXJlbmN5LXNsaWRlclwiIC8+IyB9ICMjIGlmIChidXR0b25zKSB7ICM8ZGl2IHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWNvbnRyb2xzXCI+PGJ1dHRvbiBjbGFzcz1cImstYnV0dG9uIGstcHJpbWFyeSBhcHBseVwiPiM6IG1lc3NhZ2VzLmFwcGx5ICM8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz1cImstYnV0dG9uIGNhbmNlbFwiPiM6IG1lc3NhZ2VzLmNhbmNlbCAjPC9idXR0b24+PC9kaXY+IyB9ICMnKX0pLFQ9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGw9dGhpcztjLmZuLmluaXQuY2FsbChsLHQsbiksbj1sLm9wdGlvbnMsdD1sLmVsZW1lbnQsaT10LmF0dHIoXCJ2YWx1ZVwiKXx8dC52YWwoKSxpPWk/ZChpLCEwKTpkKG4udmFsdWUsITApLGwuX3ZhbHVlPW4udmFsdWU9aSxyPWwud3JhcHBlcj1lKGwuX3RlbXBsYXRlKG4pKSx0LmhpZGUoKS5hZnRlcihyKSx0LmlzKFwiaW5wdXRcIikmJih0LmFwcGVuZFRvKHIpLG89dC5jbG9zZXN0KFwibGFiZWxcIiksYT10LmF0dHIoXCJpZFwiKSxhJiYobz1vLmFkZCgnbGFiZWxbZm9yPVwiJythKydcIl0nKSksby5jbGljayhmdW5jdGlvbihlKXtsLm9wZW4oKSxlLnByZXZlbnREZWZhdWx0KCl9KSksbC5fdGFiSW5kZXg9dC5hdHRyKFwidGFiSW5kZXhcIil8fDAsbC5lbmFibGUoIXQuYXR0cihcImRpc2FibGVkXCIpKSxzPXQuYXR0cihcImFjY2Vzc2tleVwiKSxzJiYodC5hdHRyKFwiYWNjZXNza2V5XCIsbnVsbCksci5hdHRyKFwiYWNjZXNza2V5XCIscykpLGwuYmluZChcImFjdGl2YXRlXCIsZnVuY3Rpb24oZSl7ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bC50b2dnbGUoKX0pLGwuX3VwZGF0ZVVJKGkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLm9mZihfKS5maW5kKFwiKlwiKS5vZmYoXyksdGhpcy5fcG9wdXAmJih0aGlzLl9zZWxlY3Rvci5kZXN0cm95KCksdGhpcy5fcG9wdXAuZGVzdHJveSgpKSx0aGlzLl9zZWxlY3Rvcj10aGlzLl9wb3B1cD10aGlzLndyYXBwZXI9bnVsbCxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX0sZW5hYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LndyYXBwZXIsaT1uLmNoaWxkcmVuKFwiLmstcGlja2VyLXdyYXBcIikscj1pLmZpbmQoXCIuay1zZWxlY3RcIik7MD09PWFyZ3VtZW50cy5sZW5ndGgmJihlPSEwKSx0LmVsZW1lbnQuYXR0cihcImRpc2FibGVkXCIsIWUpLG4uYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhZSksci5vZmYoXykub24oXCJtb3VzZWRvd25cIitfLG8pLG4uYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5hZGQoXCIqXCIsbikub2ZmKF8pLGUmJm4ucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLmF0dHIoXCJ0YWJJbmRleFwiLHQuX3RhYkluZGV4KS5vbihcIm1vdXNlZW50ZXJcIitfLGZ1bmN0aW9uKCl7aS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcIm1vdXNlbGVhdmVcIitfLGZ1bmN0aW9uKCl7aS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcImZvY3VzXCIrXyxmdW5jdGlvbigpe2kuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIil9KS5vbihcImJsdXJcIitfLGZ1bmN0aW9uKCl7aS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0pLm9uKHcsYSh0Ll9rZXlkb3duLHQpKS5vbih5LFwiLmstaWNvblwiLGEodC50b2dnbGUsdCkpLm9uKHksdC5vcHRpb25zLnRvb2xJY29uP1wiLmstdG9vbC1pY29uXCI6XCIuay1zZWxlY3RlZC1jb2xvclwiLGZ1bmN0aW9uKCl7dC50cmlnZ2VyKFwiYWN0aXZhdGVcIil9KX0sX3RlbXBsYXRlOnMudGVtcGxhdGUoJzxzcGFuIHJvbGU9XCJ0ZXh0Ym94XCIgYXJpYS1oYXNwb3B1cD1cInRydWVcIiBjbGFzcz1cImstd2lkZ2V0IGstY29sb3JwaWNrZXIgay1oZWFkZXJcIj48c3BhbiBjbGFzcz1cImstcGlja2VyLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCI+IyBpZiAodG9vbEljb24pIHsgIzxzcGFuIGNsYXNzPVwiay10b29sLWljb24gIz0gdG9vbEljb24gI1wiPjxzcGFuIGNsYXNzPVwiay1zZWxlY3RlZC1jb2xvclwiPjwvc3Bhbj48L3NwYW4+IyB9IGVsc2UgeyAjPHNwYW4gY2xhc3M9XCJrLXNlbGVjdGVkLWNvbG9yXCI+PC9zcGFuPiMgfSAjPHNwYW4gY2xhc3M9XCJrLXNlbGVjdFwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXNcIiB1bnNlbGVjdGFibGU9XCJvblwiPjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwvc3Bhbj4nKSxvcHRpb25zOntuYW1lOlwiQ29sb3JQaWNrZXJcIixwYWxldHRlOm51bGwsY29sdW1uczoxMCx0b29sSWNvbjpudWxsLHZhbHVlOm51bGwsbWVzc2FnZXM6dixvcGFjaXR5OiExLGJ1dHRvbnM6ITAscHJldmlldzohMCxBUklBVGVtcGxhdGU6J0N1cnJlbnQgc2VsZWN0ZWQgY29sb3IgaXMgIz1kYXRhIHx8IFwiXCIjJ30sZXZlbnRzOltcImFjdGl2YXRlXCIsXCJjaGFuZ2VcIixcInNlbGVjdFwiLFwib3BlblwiLFwiY2xvc2VcIl0sb3BlbjpmdW5jdGlvbigpe3RoaXMuX2dldFBvcHVwKCkub3BlbigpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuX2dldFBvcHVwKCkuY2xvc2UoKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS50b2dnbGUoKX0sY29sb3I6eC5mbi5jb2xvcix2YWx1ZTp4LmZuLnZhbHVlLF9zZWxlY3Q6eC5mbi5fc2VsZWN0LF90cmlnZ2VyU2VsZWN0OnguZm4uX3RyaWdnZXJTZWxlY3QsX2lzSW5wdXRUeXBlQ29sb3I6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRbMF07cmV0dXJuL15pbnB1dCQvaS50ZXN0KGUudGFnTmFtZSkmJi9eY29sb3IkL2kudGVzdChlLnR5cGUpfSxfdXBkYXRlVUk6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtlJiYodD10aGlzLl9pc0lucHV0VHlwZUNvbG9yKCl8fDE9PWUuYT9lLnRvQ3NzKCk6ZS50b0Nzc1JnYmEoKSx0aGlzLmVsZW1lbnQudmFsKHQpKSx0aGlzLl9hcmlhVGVtcGxhdGV8fCh0aGlzLl9hcmlhVGVtcGxhdGU9cy50ZW1wbGF0ZSh0aGlzLm9wdGlvbnMuQVJJQVRlbXBsYXRlKSksdGhpcy53cmFwcGVyLmF0dHIoXCJhcmlhLWxhYmVsXCIsdGhpcy5fYXJpYVRlbXBsYXRlKHQpKSx0aGlzLl90cmlnZ2VyU2VsZWN0KGUpLHRoaXMud3JhcHBlci5maW5kKFwiLmstc2VsZWN0ZWQtY29sb3JcIikuY3NzKHAsZT9lLnRvRGlzcGxheSgpOlwidHJhbnNwYXJlbnRcIil9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5Q29kZTt0aGlzLl9nZXRQb3B1cCgpLnZpc2libGUoKT8odD09aC5FU0M/dGhpcy5fc2VsZWN0b3IuX2NhbmNlbCgpOnRoaXMuX3NlbGVjdG9yLl9rZXlkb3duKGUpLG8oZSkpOih0PT1oLkVOVEVSfHx0PT1oLkRPV04pJiYodGhpcy5vcGVuKCksbyhlKSl9LF9nZXRQb3B1cDpmdW5jdGlvbigpe3ZhciB0LGkscixvLGE9dGhpcyxsPWEuX3BvcHVwO3JldHVybiBsfHwodD1hLm9wdGlvbnMsaT10LnBhbGV0dGU/QzpTLHQuX3N0YW5kYWxvbmU9ITEsZGVsZXRlIHQuc2VsZWN0LGRlbGV0ZSB0LmNoYW5nZSxkZWxldGUgdC5jYW5jZWwscj1zLmd1aWQoKSxvPWEuX3NlbGVjdG9yPW5ldyBpKGUoJzxkaXYgaWQ9XCInK3IrJ1wiLz4nKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSx0KSxhLndyYXBwZXIuYXR0cihcImFyaWEtb3duc1wiLHIpLGEuX3BvcHVwPWw9by53cmFwcGVyLmtlbmRvUG9wdXAoe2FuY2hvcjphLndyYXBwZXJ9KS5kYXRhKFwia2VuZG9Qb3B1cFwiKSxvLmJpbmQoe3NlbGVjdDpmdW5jdGlvbihlKXthLl91cGRhdGVVSShkKGUudmFsdWUpKX0sY2hhbmdlOmZ1bmN0aW9uKCl7YS5fc2VsZWN0KG8uY29sb3IoKSksYS5jbG9zZSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXthLmNsb3NlKCl9fSksbC5iaW5kKHtjbG9zZTpmdW5jdGlvbihlKXtpZihhLnRyaWdnZXIoXCJjbG9zZVwiKSlyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLG47YS53cmFwcGVyLmNoaWxkcmVuKFwiLmstcGlja2VyLXdyYXBcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIik7dmFyIHQ9by5fc2VsZWN0T25IaWRlKCk7dD9hLl9zZWxlY3QodCk6KGEud3JhcHBlci5mb2N1cygpLGEuX3VwZGF0ZVVJKGEuY29sb3IoKSkpfSxvcGVuOmZ1bmN0aW9uKGUpe2EudHJpZ2dlcihcIm9wZW5cIik/ZS5wcmV2ZW50RGVmYXVsdCgpOmEud3JhcHBlci5jaGlsZHJlbihcIi5rLXBpY2tlci13cmFwXCIpLmFkZENsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe28uX3NlbGVjdChhLmNvbG9yKCksITApLG8uZm9jdXMoKSxhLndyYXBwZXIuY2hpbGRyZW4oXCIuay1waWNrZXItd3JhcFwiKS5hZGRDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX19KSksbH19KTtsLnBsdWdpbihDKSxsLnBsdWdpbihTKSxsLnBsdWdpbihUKX0oalF1ZXJ5LHBhcnNlSW50KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4nPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJrLWljb24gay1pLWFycm93LScrZSsnXCIgdGl0bGU9XCInK3QrJ1wiPicrdCtcIjwvc3Bhbj48L3NwYW4+XCJ9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5jYXJldCxvPWkua2V5cyxhPWkudWkscz1hLldpZGdldCxsPWkuX2FjdGl2ZUVsZW1lbnQsYz1pLl9leHRyYWN0Rm9ybWF0LGQ9aS5wYXJzZUZsb2F0LHU9aS5zdXBwb3J0LnBsYWNlaG9sZGVyLGg9aS5nZXRDdWx0dXJlLHA9aS5fcm91bmQsZj1cImNoYW5nZVwiLGc9XCJkaXNhYmxlZFwiLG09XCJyZWFkb25seVwiLHY9XCJrLWlucHV0XCIsXz1cInNwaW5cIix5PVwiLmtlbmRvTnVtZXJpY1RleHRCb3hcIix3PVwidG91Y2hlbmRcIixiPVwibW91c2VsZWF2ZVwiK3ksaz1cIm1vdXNlZW50ZXJcIit5K1wiIFwiK2IseD1cImstc3RhdGUtZGVmYXVsdFwiLEM9XCJrLXN0YXRlLWZvY3VzZWRcIixTPVwiay1zdGF0ZS1ob3ZlclwiLFQ9XCJmb2N1c1wiLEQ9XCIuXCIsQT1cImstc3RhdGUtc2VsZWN0ZWRcIixFPVwiay1zdGF0ZS1kaXNhYmxlZFwiLE09XCJhcmlhLWRpc2FibGVkXCIsUD1cImFyaWEtcmVhZG9ubHlcIixJPS9eKC0pPyhcXGQqKSQvLHo9bnVsbCxGPWUucHJveHksUj1zLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4pe3ZhciByLG8sYSxsLGQsdT10aGlzLGg9biYmbi5zdGVwIT09dDtzLmZuLmluaXQuY2FsbCh1LGUsbiksbj11Lm9wdGlvbnMsZT11LmVsZW1lbnQub24oXCJmb2N1c291dFwiK3ksRih1Ll9mb2N1c291dCx1KSkuYXR0cihcInJvbGVcIixcInNwaW5idXR0b25cIiksbi5wbGFjZWhvbGRlcj1uLnBsYWNlaG9sZGVyfHxlLmF0dHIoXCJwbGFjZWhvbGRlclwiKSx1Ll9yZXNldCgpLHUuX3dyYXBwZXIoKSx1Ll9hcnJvd3MoKSx1Ll9pbnB1dCgpLGkuc3VwcG9ydC5tb2JpbGVPUz91Ll90ZXh0Lm9uKHcreStcIiBcIitUK3ksZnVuY3Rpb24odCl7dS5fdG9nZ2xlVGV4dCghMSksdC50eXBlPT09VCYmZS5mb2N1cygpfSk6dS5fdGV4dC5vbihUK3ksRih1Ll9jbGljayx1KSkscj11Lm1pbihlLmF0dHIoXCJtaW5cIikpLG89dS5tYXgoZS5hdHRyKFwibWF4XCIpKSxhPXUuX3BhcnNlKGUuYXR0cihcInN0ZXBcIikpLG4ubWluPT09eiYmciE9PXomJihuLm1pbj1yKSxuLm1heD09PXomJm8hPT16JiYobi5tYXg9byksaHx8YT09PXp8fChuLnN0ZXA9YSksZS5hdHRyKFwiYXJpYS12YWx1ZW1pblwiLG4ubWluKS5hdHRyKFwiYXJpYS12YWx1ZW1heFwiLG4ubWF4KSxuLmZvcm1hdD1jKG4uZm9ybWF0KSxsPW4udmFsdWUsdS52YWx1ZShsIT09ej9sOmUudmFsKCkpLGQ9ZS5pcyhcIltkaXNhYmxlZF1cIiksZD91LmVuYWJsZSghMSk6dS5yZWFkb25seShlLmlzKFwiW3JlYWRvbmx5XVwiKSksaS5ub3RpZnkodSl9LG9wdGlvbnM6e25hbWU6XCJOdW1lcmljVGV4dEJveFwiLGRlY2ltYWxzOnosbWluOnosbWF4OnosdmFsdWU6eixzdGVwOjEsY3VsdHVyZTpcIlwiLGZvcm1hdDpcIm5cIixzcGlubmVyczohMCxwbGFjZWhvbGRlcjpcIlwiLHVwQXJyb3dUZXh0OlwiSW5jcmVhc2UgdmFsdWVcIixkb3duQXJyb3dUZXh0OlwiRGVjcmVhc2UgdmFsdWVcIn0sZXZlbnRzOltmLF9dLF9lZGl0YWJsZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9ZS5kaXNhYmxlLHI9ZS5yZWFkb25seSxvPXQuX3RleHQuYWRkKG4pLGE9dC5faW5wdXRXcmFwcGVyLm9mZihrKTt0Ll90b2dnbGVUZXh0KCEwKSx0Ll91cEFycm93RXZlbnRIYW5kbGVyLnVuYmluZChcInByZXNzXCIpLHQuX2Rvd25BcnJvd0V2ZW50SGFuZGxlci51bmJpbmQoXCJwcmVzc1wiKSxuLm9mZihcImtleWRvd25cIit5KS5vZmYoXCJrZXlwcmVzc1wiK3kpLm9mZihcInBhc3RlXCIreSkscnx8aT8oYS5hZGRDbGFzcyhpP0U6eCkucmVtb3ZlQ2xhc3MoaT94OkUpLG8uYXR0cihnLGkpLmF0dHIobSxyKS5hdHRyKE0saSkuYXR0cihQLHIpKTooYS5hZGRDbGFzcyh4KS5yZW1vdmVDbGFzcyhFKS5vbihrLHQuX3RvZ2dsZUhvdmVyKSxvLnJlbW92ZUF0dHIoZykucmVtb3ZlQXR0cihtKS5hdHRyKE0sITEpLmF0dHIoUCwhMSksdC5fdXBBcnJvd0V2ZW50SGFuZGxlci5iaW5kKFwicHJlc3NcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdC5fc3BpbigxKSx0Ll91cEFycm93LmFkZENsYXNzKEEpfSksdC5fZG93bkFycm93RXZlbnRIYW5kbGVyLmJpbmQoXCJwcmVzc1wiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0Ll9zcGluKC0xKSx0Ll9kb3duQXJyb3cuYWRkQ2xhc3MoQSl9KSx0LmVsZW1lbnQub24oXCJrZXlkb3duXCIreSxGKHQuX2tleWRvd24sdCkpLm9uKFwia2V5cHJlc3NcIit5LEYodC5fa2V5cHJlc3MsdCkpLm9uKFwicGFzdGVcIit5LEYodC5fcGFzdGUsdCkpKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZWxlbWVudC5hZGQoZS5fdGV4dCkuYWRkKGUuX3VwQXJyb3cpLmFkZChlLl9kb3duQXJyb3cpLmFkZChlLl9pbnB1dFdyYXBwZXIpLm9mZih5KSxlLl91cEFycm93RXZlbnRIYW5kbGVyLmRlc3Ryb3koKSxlLl9kb3duQXJyb3dFdmVudEhhbmRsZXIuZGVzdHJveSgpLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpLHMuZm4uZGVzdHJveS5jYWxsKGUpfSxtaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1pblwiLGUpfSxtYXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1heFwiLGUpfSxzdGVwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vcHRpb24oXCJzdGVwXCIsZSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcztyZXR1cm4gZT09PXQ/aS5fdmFsdWU6KGU9aS5fcGFyc2UoZSksbj1pLl9hZGp1c3QoZSksZT09PW4mJihpLl91cGRhdGUoZSksaS5fb2xkPWkuX3ZhbHVlKSx0KX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c2luKCl9LF9hZGp1c3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPW4ubWluLHI9bi5tYXg7cmV0dXJuIGU9PT16P2U6KGkhPT16JiZpPmU/ZT1pOnIhPT16JiZlPnImJihlPXIpLGUpfSxfYXJyb3dzOmZ1bmN0aW9uKCl7dmFyIHQscj10aGlzLG89ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoci5fc3Bpbm5pbmcpLHQucmVtb3ZlQ2xhc3MoQSl9LGE9ci5vcHRpb25zLHM9YS5zcGlubmVycyxsPXIuZWxlbWVudDt0PWwuc2libGluZ3MoXCIuay1pY29uXCIpLHRbMF18fCh0PWUobihcIm5cIixhLnVwQXJyb3dUZXh0KStuKFwic1wiLGEuZG93bkFycm93VGV4dCkpLmluc2VydEFmdGVyKGwpLHQud3JhcEFsbCgnPHNwYW4gY2xhc3M9XCJrLXNlbGVjdFwiLz4nKSksc3x8KHQucGFyZW50KCkudG9nZ2xlKHMpLHIuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhcImstZXhwYW5kLXBhZGRpbmdcIikpLHIuX3VwQXJyb3c9dC5lcSgwKSxyLl91cEFycm93RXZlbnRIYW5kbGVyPW5ldyBpLlVzZXJFdmVudHMoci5fdXBBcnJvdyx7cmVsZWFzZTpvfSksci5fZG93bkFycm93PXQuZXEoMSksci5fZG93bkFycm93RXZlbnRIYW5kbGVyPW5ldyBpLlVzZXJFdmVudHMoci5fZG93bkFycm93LHtyZWxlYXNlOm99KX0sX2JsdXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3RvZ2dsZVRleHQoITApLGUuX2NoYW5nZShlLmVsZW1lbnQudmFsKCkpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjbGVhclRpbWVvdXQodC5fZm9jdXNpbmcpLHQuX2ZvY3VzaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbixpLG8sYT1lLnRhcmdldCxzPXIoYSlbMF0sbD1hLnZhbHVlLnN1YnN0cmluZygwLHMpLGM9dC5fZm9ybWF0KHQub3B0aW9ucy5mb3JtYXQpLGQ9Y1tcIixcIl0sdT0wO2QmJihpPVJlZ0V4cChcIlxcXFxcIitkLFwiZ1wiKSxvPVJlZ0V4cChcIihbXFxcXGRcXFxcXCIrZCtcIl0rKShcXFxcXCIrY1tEXStcIik/KFxcXFxkKyk/XCIpKSxvJiYobj1vLmV4ZWMobCkpLG4mJih1PW5bMF0ucmVwbGFjZShpLFwiXCIpLmxlbmd0aCwtMSE9bC5pbmRleE9mKFwiKFwiKSYmMD50Ll92YWx1ZSYmdSsrKSx0Ll9mb2N1c2luKCkscih0LmVsZW1lbnRbMF0sdSl9KX0sX2NoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX3VwZGF0ZShlKSxlPXQuX3ZhbHVlLHQuX29sZCE9ZSYmKHQuX29sZD1lLHQuZWxlbWVudC50cmlnZ2VyKGYpLHQudHJpZ2dlcihmKSl9LF9jdWx0dXJlOmZ1bmN0aW9uKGUpe3JldHVybiBlfHxoKHRoaXMub3B0aW9ucy5jdWx0dXJlKX0sX2ZvY3VzaW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2lucHV0V3JhcHBlci5hZGRDbGFzcyhDKSxlLl90b2dnbGVUZXh0KCExKSxlLmVsZW1lbnRbMF0uZm9jdXMoKX0sX2ZvY3Vzb3V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQoZS5fZm9jdXNpbmcpLGUuX2lucHV0V3JhcHBlci5yZW1vdmVDbGFzcyhDKS5yZW1vdmVDbGFzcyhTKSxlLl9ibHVyKCl9LF9mb3JtYXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jdWx0dXJlKHQpLm51bWJlckZvcm1hdDtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKCksZS5pbmRleE9mKFwiY1wiKT4tMT9uPW4uY3VycmVuY3k6ZS5pbmRleE9mKFwicFwiKT4tMSYmKG49bi5wZXJjZW50KSxufSxfaW5wdXQ6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1cImstZm9ybWF0dGVkLXZhbHVlXCIscj1uLmVsZW1lbnQuYWRkQ2xhc3Modikuc2hvdygpWzBdLG89ci5hY2Nlc3NLZXksYT1uLndyYXBwZXI7dD1hLmZpbmQoRCtpKSx0WzBdfHwodD1lKCc8aW5wdXQgdHlwZT1cInRleHRcIi8+JykuaW5zZXJ0QmVmb3JlKHIpLmFkZENsYXNzKGkpKTt0cnl7ci5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0XCIpfWNhdGNoKHMpe3IudHlwZT1cInRleHRcIn10WzBdLnRhYkluZGV4PXIudGFiSW5kZXgsdFswXS5zdHlsZS5jc3NUZXh0PXIuc3R5bGUuY3NzVGV4dCx0LnByb3AoXCJwbGFjZWhvbGRlclwiLG4ub3B0aW9ucy5wbGFjZWhvbGRlciksbyYmKHQuYXR0cihcImFjY2Vzc2tleVwiLG8pLHIuYWNjZXNzS2V5PVwiXCIpLG4uX3RleHQ9dC5hZGRDbGFzcyhyLmNsYXNzTmFtZSl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmtleUNvZGU7dC5fa2V5PW4sbj09by5ET1dOP3QuX3N0ZXAoLTEpOm49PW8uVVA/dC5fc3RlcCgxKTpuPT1vLkVOVEVSJiZ0Ll9jaGFuZ2UodC5lbGVtZW50LnZhbCgpKX0sX2tleXByZXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxhLHMsbCxjLGQsdSxoLHA7MD09PWUud2hpY2h8fGUuY3RybEtleXx8ZS5rZXlDb2RlPT09by5CQUNLU1BBQ0V8fGUua2V5Q29kZT09PW8uRU5URVJ8fCh0PXRoaXMsbj10Lm9wdGlvbnMubWluLGk9dC5lbGVtZW50LGE9cihpKSxzPWFbMF0sbD1hWzFdLGM9U3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKSxkPXQuX2Zvcm1hdCh0Lm9wdGlvbnMuZm9ybWF0KSx1PXQuX2tleT09PW8uTlVNUEFEX0RPVCxoPWkudmFsKCksdSYmKGM9ZFtEXSksaD1oLnN1YnN0cmluZygwLHMpK2MraC5zdWJzdHJpbmcobCkscD10Ll9udW1lcmljUmVnZXgoZCkudGVzdChoKSxwJiZ1PyhpLnZhbChoKSxyKGkscytjLmxlbmd0aCksZS5wcmV2ZW50RGVmYXVsdCgpKToobnVsbCE9PW4mJm4+PTAmJlwiLVwiPT09aC5jaGFyQXQoMCl8fCFwKSYmZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2tleT0wKX0sX251bWVyaWNSZWdleDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZVtEXSxpPXQub3B0aW9ucy5kZWNpbWFscztyZXR1cm4gbj09PUQmJihuPVwiXFxcXFwiK24pLGk9PT16JiYoaT1lLmRlY2ltYWxzKSwwPT09aT9JOih0Ll9zZXBhcmF0b3IhPT1uJiYodC5fc2VwYXJhdG9yPW4sdC5fZmxvYXRSZWdFeHA9UmVnRXhwKFwiXigtKT8oKChcXFxcZCsoXCIrbitcIlxcXFxkKik/KXwoXCIrbitcIlxcXFxkKikpKT8kXCIpKSx0Ll9mbG9hdFJlZ0V4cCl9LF9wYXN0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS50YXJnZXQsaT1uLnZhbHVlO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9wYXJzZShuLnZhbHVlKT09PXomJnQuX3VwZGF0ZShpKX0pfSxfb3B0aW9uOmZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucztyZXR1cm4gbj09PXQ/cltlXToobj1pLl9wYXJzZShuKSwobnx8XCJzdGVwXCIhPT1lKSYmKHJbZV09bixpLmVsZW1lbnQuYXR0cihcImFyaWEtdmFsdWVcIitlLG4pLmF0dHIoZSxuKSksdCl9LF9zcGluOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fDUwMCxjbGVhclRpbWVvdXQobi5fc3Bpbm5pbmcpLG4uX3NwaW5uaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9zcGluKGUsNTApfSx0KSxuLl9zdGVwKGUpfSxfc3RlcDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9dC5fcGFyc2Uobi52YWwoKSl8fDA7bCgpIT1uWzBdJiZ0Ll9mb2N1c2luKCksaSs9dC5vcHRpb25zLnN0ZXAqZSx0Ll91cGRhdGUodC5fYWRqdXN0KGkpKSx0LnRyaWdnZXIoXyl9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoUyxcIm1vdXNlZW50ZXJcIj09PXQudHlwZSl9LF90b2dnbGVUZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdGV4dC50b2dnbGUoZSksdC5lbGVtZW50LnRvZ2dsZSghZSl9LF9wYXJzZTpmdW5jdGlvbihlLHQpe3JldHVybiBkKGUsdGhpcy5fY3VsdHVyZSh0KSx0aGlzLm9wdGlvbnMuZm9ybWF0KX0sX3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMscj1uLm9wdGlvbnMsbz1yLmZvcm1hdCxhPXIuZGVjaW1hbHMscz1uLl9jdWx0dXJlKCksbD1uLl9mb3JtYXQobyxzKTthPT09eiYmKGE9bC5kZWNpbWFscyksZT1uLl9wYXJzZShlLHMpLHQ9ZSE9PXosdCYmKGU9cGFyc2VGbG9hdChwKGUsYSkpKSxuLl92YWx1ZT1lPW4uX2FkanVzdChlKSxuLl9wbGFjZWhvbGRlcihpLnRvU3RyaW5nKGUsbyxzKSksdD8oZT1cIlwiK2UsLTEhPT1lLmluZGV4T2YoXCJlXCIpJiYoZT1wKCtlLGEpKSxlPWUucmVwbGFjZShELGxbRF0pKTplPVwiXCIsbi5lbGVtZW50LnZhbChlKS5hdHRyKFwiYXJpYS12YWx1ZW5vd1wiLGUpXG59LF9wbGFjZWhvbGRlcjpmdW5jdGlvbihlKXt0aGlzLl90ZXh0LnZhbChlKSx1fHxlfHx0aGlzLl90ZXh0LnZhbCh0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIpfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudCxyPWlbMF07dD1pLnBhcmVudHMoXCIuay1udW1lcmljdGV4dGJveFwiKSx0LmlzKFwic3Bhbi5rLW51bWVyaWN0ZXh0Ym94XCIpfHwodD1pLmhpZGUoKS53cmFwKCc8c3BhbiBjbGFzcz1cImstbnVtZXJpYy13cmFwIGstc3RhdGUtZGVmYXVsdFwiIC8+JykucGFyZW50KCksdD10LndyYXAoXCI8c3Bhbi8+XCIpLnBhcmVudCgpKSx0WzBdLnN0eWxlLmNzc1RleHQ9ci5zdHlsZS5jc3NUZXh0LHIuc3R5bGUud2lkdGg9XCJcIixuLndyYXBwZXI9dC5hZGRDbGFzcyhcImstd2lkZ2V0IGstbnVtZXJpY3RleHRib3hcIikuYWRkQ2xhc3Moci5jbGFzc05hbWUpLmNzcyhcImRpc3BsYXlcIixcIlwiKSxuLl9pbnB1dFdyYXBwZXI9ZSh0WzBdLmZpcnN0Q2hpbGQpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLnZhbHVlKX0pfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfX0pO2EucGx1Z2luKFIpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4saSl7bi5maWx0ZXJzJiYobi5maWx0ZXJzPWUuZ3JlcChuLmZpbHRlcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSxpKSxlLmZpbHRlcnM/ZS5maWx0ZXJzLmxlbmd0aDplLmZpZWxkIT1pfSkpfWZ1bmN0aW9uIG4oZSl7dmFyIHQsbixpLHIsbyxhO2lmKGUmJmUubGVuZ3RoKWZvcihhPVtdLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT1lW3RdLG89aS50ZXh0fHxpLnZhbHVlfHxpLHI9bnVsbD09aS52YWx1ZT9pLnRleHR8fGk6aS52YWx1ZSxhW3RdPXt0ZXh0Om8sdmFsdWU6cn07cmV0dXJuIGF9ZnVuY3Rpb24gaSh0LG4pe3JldHVybiBlLmdyZXAodCxmdW5jdGlvbih0KXtyZXR1cm4gdC5maWx0ZXJzPyh0LmZpbHRlcnM9ZS5ncmVwKHQuZmlsdGVycyxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZCE9bn0pLHQuZmlsdGVycy5sZW5ndGgpOnQuZmllbGQhPW59KX12YXIgcj13aW5kb3cua2VuZG8sbz1yLnVpLGE9ZS5wcm94eSxzPVwia2VuZG9Qb3B1cFwiLGw9XCJpbml0XCIsYz1cIi5rZW5kb0ZpbHRlck1lbnVcIixkPVwiSXMgZXF1YWwgdG9cIix1PVwiSXMgbm90IGVxdWFsIHRvXCIsaD17bnVtYmVyOlwibnVtZXJpY3RleHRib3hcIixkYXRlOlwiZGF0ZXBpY2tlclwifSxwPXtzdHJpbmc6XCJ0ZXh0XCIsbnVtYmVyOlwibnVtYmVyXCIsZGF0ZTpcImRhdGVcIn0sZj1yLmlzRnVuY3Rpb24sZz1vLldpZGdldCxtPSc8ZGl2PjxkaXYgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj4jPW1lc3NhZ2VzLmluZm8jPC9kaXY+PGxhYmVsPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGZpbHRlcnNbMF0udmFsdWVcIiB2YWx1ZT1cInRydWVcIiBuYW1lPVwiZmlsdGVyc1swXS52YWx1ZVwiLz4jPW1lc3NhZ2VzLmlzVHJ1ZSM8L2xhYmVsPjxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBmaWx0ZXJzWzBdLnZhbHVlXCIgdmFsdWU9XCJmYWxzZVwiIG5hbWU9XCJmaWx0ZXJzWzBdLnZhbHVlXCIvPiM9bWVzc2FnZXMuaXNGYWxzZSM8L2xhYmVsPjxkaXY+PGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnlcIj4jPW1lc3NhZ2VzLmZpbHRlciM8L2J1dHRvbj48YnV0dG9uIHR5cGU9XCJyZXNldFwiIGNsYXNzPVwiay1idXR0b25cIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYnV0dG9uPjwvZGl2PjwvZGl2Picsdj0nPGRpdj48ZGl2IGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+Iz1tZXNzYWdlcy5pbmZvIzwvZGl2PjxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogZmlsdGVyc1swXS5vcGVyYXRvclwiIGRhdGEtIz1ucyNyb2xlPVwiZHJvcGRvd25saXN0XCI+I2Zvcih2YXIgb3AgaW4gb3BlcmF0b3JzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9b3AjXCI+Iz1vcGVyYXRvcnNbb3BdIzwvb3B0aW9uPiN9Izwvc2VsZWN0PiNpZih2YWx1ZXMpeyM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1swXS52YWx1ZVwiIGRhdGEtIz1ucyN0ZXh0LWZpZWxkPVwidGV4dFwiIGRhdGEtIz1ucyN2YWx1ZS1maWVsZD1cInZhbHVlXCIgZGF0YS0jPW5zI3NvdXJjZT1cXCcjPWtlbmRvLnN0cmluZ2lmeSh2YWx1ZXMpLnJlcGxhY2UoL1xcJy9nLFwiJlxcXFwjMzk7XCIpI1xcJyBkYXRhLSM9bnMjcm9sZT1cImRyb3Bkb3dubGlzdFwiIGRhdGEtIz1ucyNvcHRpb24tbGFiZWw9XCIjPW1lc3NhZ2VzLnNlbGVjdFZhbHVlI1wiPjwvc2VsZWN0PiN9ZWxzZXsjPGlucHV0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1swXS52YWx1ZVwiIGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cInRleHRcIiAjPXJvbGUgPyBcImRhdGEtXCIgKyBucyArIFwicm9sZT1cXCdcIiArIHJvbGUgKyBcIlxcJ1wiIDogXCJcIiMgLz4jfSMjaWYoZXh0cmEpeyM8c2VsZWN0IGNsYXNzPVwiay1maWx0ZXItYW5kXCIgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogbG9naWNcIiBkYXRhLSM9bnMjcm9sZT1cImRyb3Bkb3dubGlzdFwiPjxvcHRpb24gdmFsdWU9XCJhbmRcIj4jPW1lc3NhZ2VzLmFuZCM8L29wdGlvbj48b3B0aW9uIHZhbHVlPVwib3JcIj4jPW1lc3NhZ2VzLm9yIzwvb3B0aW9uPjwvc2VsZWN0PjxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogZmlsdGVyc1sxXS5vcGVyYXRvclwiIGRhdGEtIz1ucyNyb2xlPVwiZHJvcGRvd25saXN0XCI+I2Zvcih2YXIgb3AgaW4gb3BlcmF0b3JzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9b3AjXCI+Iz1vcGVyYXRvcnNbb3BdIzwvb3B0aW9uPiN9Izwvc2VsZWN0PiNpZih2YWx1ZXMpeyM8c2VsZWN0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1sxXS52YWx1ZVwiIGRhdGEtIz1ucyN0ZXh0LWZpZWxkPVwidGV4dFwiIGRhdGEtIz1ucyN2YWx1ZS1maWVsZD1cInZhbHVlXCIgZGF0YS0jPW5zI3NvdXJjZT1cXCcjPWtlbmRvLnN0cmluZ2lmeSh2YWx1ZXMpLnJlcGxhY2UoL1xcJy9nLFwiJlxcXFwjMzk7XCIpI1xcJyBkYXRhLSM9bnMjcm9sZT1cImRyb3Bkb3dubGlzdFwiIGRhdGEtIz1ucyNvcHRpb24tbGFiZWw9XCIjPW1lc3NhZ2VzLnNlbGVjdFZhbHVlI1wiPjwvc2VsZWN0PiN9ZWxzZXsjPGlucHV0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6IGZpbHRlcnNbMV0udmFsdWVcIiBjbGFzcz1cImstdGV4dGJveFwiIHR5cGU9XCJ0ZXh0XCIgIz1yb2xlID8gXCJkYXRhLVwiICsgbnMgKyBcInJvbGU9XFwnXCIgKyByb2xlICsgXCJcXCdcIiA6IFwiXCIjLz4jfSMjfSM8ZGl2PjxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiay1idXR0b24gay1wcmltYXJ5XCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9idXR0b24+PGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBjbGFzcz1cImstYnV0dG9uXCI+Iz1tZXNzYWdlcy5jbGVhciM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nLF89JzxkaXYgZGF0YS0jPW5zI3JvbGU9XCJ2aWV3XCIgZGF0YS0jPW5zI2luaXQtd2lkZ2V0cz1cImZhbHNlXCIgY2xhc3M9XCJrLWdyaWQtZmlsdGVyLW1lbnVcIj48ZGl2IGRhdGEtIz1ucyNyb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxidXR0b24gY2xhc3M9XCJrLWJ1dHRvbiBrLWNhbmNlbFwiPiM9bWVzc2FnZXMuY2FuY2VsIzwvYnV0dG9uPiM9ZmllbGQjPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXN1Ym1pdFwiPiM9bWVzc2FnZXMuZmlsdGVyIzwvYnV0dG9uPjwvZGl2Pjxmb3JtIGNsYXNzPVwiay1maWx0ZXItbWVudSBrLW1vYmlsZS1saXN0XCI+PHVsIGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+Iz1tZXNzYWdlcy5pbmZvIzwvc3Bhbj48dWw+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPiM9bWVzc2FnZXMub3BlcmF0b3IjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOiBmaWx0ZXJzWzBdLm9wZXJhdG9yXCI+I2Zvcih2YXIgb3AgaW4gb3BlcmF0b3JzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9b3AjXCI+Iz1vcGVyYXRvcnNbb3BdIzwvb3B0aW9uPiN9Izwvc2VsZWN0PjwvbGFiZWw+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+Iz1tZXNzYWdlcy52YWx1ZSMjaWYodmFsdWVzKXsjPHNlbGVjdCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMF0udmFsdWVcIj48b3B0aW9uIHZhbHVlPVwiXCI+Iz1tZXNzYWdlcy5zZWxlY3RWYWx1ZSM8L29wdGlvbj4jZm9yKHZhciB2YWwgaW4gdmFsdWVzKXsjPG9wdGlvbiB2YWx1ZT1cIiM9dmFsdWVzW3ZhbF0udmFsdWUjXCI+Iz12YWx1ZXNbdmFsXS50ZXh0Izwvb3B0aW9uPiN9Izwvc2VsZWN0PiN9ZWxzZXsjPGlucHV0IGRhdGEtIz1ucyNiaW5kPVwidmFsdWU6ZmlsdGVyc1swXS52YWx1ZVwiIGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cIiM9aW5wdXRUeXBlI1wiICM9dXNlUm9sZSA/IFwiZGF0YS1cIiArIG5zICsgXCJyb2xlPVxcJ1wiICsgcm9sZSArIFwiXFwnXCIgOiBcIlwiIyAvPiN9IzwvbGFiZWw+PC9saT4jaWYoZXh0cmEpeyM8L3VsPjx1bCBjbGFzcz1cImstZmlsdGVyLWhlbHAtdGV4dFwiPjxsaT48c3BhbiBjbGFzcz1cImstbGlua1wiPjwvc3Bhbj48bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJsb2dpY1wiIGNsYXNzPVwiay1jaGVja1wiIGRhdGEtIz1ucyNiaW5kPVwiY2hlY2tlZDogbG9naWNcIiB2YWx1ZT1cImFuZFwiIC8+Iz1tZXNzYWdlcy5hbmQjPC9sYWJlbD48L2xpPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImxvZ2ljXCIgY2xhc3M9XCJrLWNoZWNrXCIgZGF0YS0jPW5zI2JpbmQ9XCJjaGVja2VkOiBsb2dpY1wiIHZhbHVlPVwib3JcIiAvPiM9bWVzc2FnZXMub3IjPC9sYWJlbD48L2xpPjwvdWw+PHVsIGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PC9zcGFuPjxsaSBjbGFzcz1cImstaXRlbVwiPjxsYWJlbCBjbGFzcz1cImstbGFiZWxcIj4jPW1lc3NhZ2VzLm9wZXJhdG9yIzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTogZmlsdGVyc1sxXS5vcGVyYXRvclwiPiNmb3IodmFyIG9wIGluIG9wZXJhdG9ycyl7IzxvcHRpb24gdmFsdWU9XCIjPW9wI1wiPiM9b3BlcmF0b3JzW29wXSM8L29wdGlvbj4jfSM8L3NlbGVjdD48L2xhYmVsPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPiM9bWVzc2FnZXMudmFsdWUjI2lmKHZhbHVlcyl7IzxzZWxlY3QgZGF0YS0jPW5zI2JpbmQ9XCJ2YWx1ZTpmaWx0ZXJzWzFdLnZhbHVlXCI+PG9wdGlvbiB2YWx1ZT1cIlwiPiM9bWVzc2FnZXMuc2VsZWN0VmFsdWUjPC9vcHRpb24+I2Zvcih2YXIgdmFsIGluIHZhbHVlcyl7IzxvcHRpb24gdmFsdWU9XCIjPXZhbHVlc1t2YWxdLnZhbHVlI1wiPiM9dmFsdWVzW3ZhbF0udGV4dCM8L29wdGlvbj4jfSM8L3NlbGVjdD4jfWVsc2V7IzxpbnB1dCBkYXRhLSM9bnMjYmluZD1cInZhbHVlOmZpbHRlcnNbMV0udmFsdWVcIiBjbGFzcz1cImstdGV4dGJveFwiIHR5cGU9XCIjPWlucHV0VHlwZSNcIiAjPXVzZVJvbGUgPyBcImRhdGEtXCIgKyBucyArIFwicm9sZT1cXCdcIiArIHJvbGUgKyBcIlxcJ1wiIDogXCJcIiMgLz4jfSM8L2xhYmVsPjwvbGk+I30jPC91bD48L2xpPjxsaSBjbGFzcz1cImstYnV0dG9uLWNvbnRhaW5lclwiPjxidXR0b24gdHlwZT1cInJlc2V0XCIgY2xhc3M9XCJrLWJ1dHRvblwiPiM9bWVzc2FnZXMuY2xlYXIjPC9idXR0b24+PC9saT48L3VsPjwvZGl2PjwvZm9ybT48L2Rpdj4nLHk9JzxkaXYgZGF0YS0jPW5zI3JvbGU9XCJ2aWV3XCIgZGF0YS0jPW5zI2luaXQtd2lkZ2V0cz1cImZhbHNlXCIgY2xhc3M9XCJrLWdyaWQtZmlsdGVyLW1lbnVcIj48ZGl2IGRhdGEtIz1ucyNyb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxidXR0b24gY2xhc3M9XCJrLWJ1dHRvbiBrLWNhbmNlbFwiPiM9bWVzc2FnZXMuY2FuY2VsIzwvYnV0dG9uPiM9ZmllbGQjPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXN1Ym1pdFwiPiM9bWVzc2FnZXMuZmlsdGVyIzwvYnV0dG9uPjwvZGl2Pjxmb3JtIGNsYXNzPVwiay1maWx0ZXItbWVudSBrLW1vYmlsZS1saXN0XCI+PHVsIGNsYXNzPVwiay1maWx0ZXItaGVscC10ZXh0XCI+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+Iz1tZXNzYWdlcy5pbmZvIzwvc3Bhbj48dWw+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPjxpbnB1dCBjbGFzcz1cImstY2hlY2tcIiB0eXBlPVwicmFkaW9cIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGZpbHRlcnNbMF0udmFsdWVcIiB2YWx1ZT1cInRydWVcIiBuYW1lPVwiZmlsdGVyc1swXS52YWx1ZVwiLz4jPW1lc3NhZ2VzLmlzVHJ1ZSM8L2xhYmVsPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtXCI+PGxhYmVsIGNsYXNzPVwiay1sYWJlbFwiPjxpbnB1dCBjbGFzcz1cImstY2hlY2tcIiB0eXBlPVwicmFkaW9cIiBkYXRhLSM9bnMjYmluZD1cImNoZWNrZWQ6IGZpbHRlcnNbMF0udmFsdWVcIiB2YWx1ZT1cImZhbHNlXCIgbmFtZT1cImZpbHRlcnNbMF0udmFsdWVcIi8+Iz1tZXNzYWdlcy5pc0ZhbHNlIzwvbGFiZWw+PC9saT48L3VsPjwvbGk+PGxpIGNsYXNzPVwiay1idXR0b24tY29udGFpbmVyXCI+PGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBjbGFzcz1cImstYnV0dG9uXCI+Iz1tZXNzYWdlcy5jbGVhciM8L2J1dHRvbj48L2xpPjwvdWw+PC9mb3JtPjwvZGl2Picsdz1nLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLG8scyxsLGQ9dGhpcyx1PVwic3RyaW5nXCI7Zy5mbi5pbml0LmNhbGwoZCx0LG4pLGk9ZC5vcGVyYXRvcnM9bi5vcGVyYXRvcnN8fHt9LHQ9ZC5lbGVtZW50LG49ZC5vcHRpb25zLG4uYXBwZW5kVG9FbGVtZW50fHwocz10LmFkZENsYXNzKFwiay13aXRoLWljb24gay1maWx0ZXJhYmxlXCIpLmZpbmQoXCIuay1ncmlkLWZpbHRlclwiKSxzWzBdfHwocz10LnByZXBlbmQoJzxhIGNsYXNzPVwiay1ncmlkLWZpbHRlclwiIGhyZWY9XCIjXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWx0ZXJcIi8+PC9hPicpLmZpbmQoXCIuay1ncmlkLWZpbHRlclwiKSkscy5hdHRyKFwidGFiaW5kZXhcIiwtMSkub24oXCJjbGlja1wiK2MsYShkLl9jbGljayxkKSkpLGQubGluaz1zfHxlKCksZC5kYXRhU291cmNlPW4uZGF0YVNvdXJjZSxkLmZpZWxkPW4uZmllbGR8fHQuYXR0cihyLmF0dHIoXCJmaWVsZFwiKSksZC5tb2RlbD1kLmRhdGFTb3VyY2UucmVhZGVyLm1vZGVsLGQuX3BhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBlK1wiXCJ9LGQubW9kZWwmJmQubW9kZWwuZmllbGRzJiYobD1kLm1vZGVsLmZpZWxkc1tkLmZpZWxkXSxsJiYodT1sLnR5cGV8fFwic3RyaW5nXCIsbC5wYXJzZSYmKGQuX3BhcnNlPWEobC5wYXJzZSxsKSkpKSxuLnZhbHVlcyYmKHU9XCJlbnVtc1wiKSxkLnR5cGU9dSxpPWlbdV18fG4ub3BlcmF0b3JzW3VdO2ZvcihvIGluIGkpYnJlYWs7ZC5fZGVmYXVsdEZpbHRlcj1mdW5jdGlvbigpe3JldHVybntmaWVsZDpkLmZpZWxkLG9wZXJhdG9yOm98fFwiZXFcIix2YWx1ZTpcIlwifX0sZC5fcmVmcmVzaEhhbmRsZXI9YShkLnJlZnJlc2gsZCksZC5kYXRhU291cmNlLmJpbmQoXCJjaGFuZ2VcIixkLl9yZWZyZXNoSGFuZGxlciksbi5hcHBlbmRUb0VsZW1lbnQ/ZC5faW5pdCgpOmQucmVmcmVzaCgpfSxfaW5pdDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucy51aSxvPWYoaSk7bi5wYW5lPW4ub3B0aW9ucy5wYW5lLG4ucGFuZSYmKG4uX2lzTW9iaWxlPSEwKSxvfHwodD1pfHxoW24udHlwZV0pLG4uX2lzTW9iaWxlP24uX2NyZWF0ZU1vYmlsZUZvcm0odCk6bi5fY3JlYXRlRm9ybSh0KSxuLmZvcm0ub24oXCJzdWJtaXRcIitjLGEobi5fc3VibWl0LG4pKS5vbihcInJlc2V0XCIrYyxhKG4uX3Jlc2V0LG4pKSxvJiZuLmZvcm0uZmluZChcIi5rLXRleHRib3hcIikucmVtb3ZlQ2xhc3MoXCJrLXRleHRib3hcIikuZWFjaChmdW5jdGlvbigpe2koZSh0aGlzKSl9KSxuLmZvcm0uZmluZChcIltcIityLmF0dHIoXCJyb2xlXCIpK1wiPW51bWVyaWN0ZXh0Ym94XVwiKS5yZW1vdmVDbGFzcyhcImstdGV4dGJveFwiKS5lbmQoKS5maW5kKFwiW1wiK3IuYXR0cihcInJvbGVcIikrXCI9ZGF0ZXRpbWVwaWNrZXJdXCIpLnJlbW92ZUNsYXNzKFwiay10ZXh0Ym94XCIpLmVuZCgpLmZpbmQoXCJbXCIrci5hdHRyKFwicm9sZVwiKStcIj10aW1lcGlja2VyXVwiKS5yZW1vdmVDbGFzcyhcImstdGV4dGJveFwiKS5lbmQoKS5maW5kKFwiW1wiK3IuYXR0cihcInJvbGVcIikrXCI9ZGF0ZXBpY2tlcl1cIikucmVtb3ZlQ2xhc3MoXCJrLXRleHRib3hcIiksbi5yZWZyZXNoKCksbi50cmlnZ2VyKGwse2ZpZWxkOm4uZmllbGQsY29udGFpbmVyOm4uZm9ybX0pfSxfY3JlYXRlRm9ybTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLG89aS5vcHRpb25zLGw9aS5vcGVyYXRvcnN8fHt9LGQ9aS50eXBlO2w9bFtkXXx8by5vcGVyYXRvcnNbZF0saS5mb3JtPWUoJzxmb3JtIGNsYXNzPVwiay1maWx0ZXItbWVudVwiLz4nKS5odG1sKHIudGVtcGxhdGUoXCJib29sZWFuXCI9PT1kP206dikoe2ZpZWxkOmkuZmllbGQsZm9ybWF0Om8uZm9ybWF0LG5zOnIubnMsbWVzc2FnZXM6by5tZXNzYWdlcyxleHRyYTpvLmV4dHJhLG9wZXJhdG9yczpsLHR5cGU6ZCxyb2xlOnQsdmFsdWVzOm4oby52YWx1ZXMpfSkpLG8uYXBwZW5kVG9FbGVtZW50PyhpLmVsZW1lbnQuYXBwZW5kKGkuZm9ybSksaS5wb3B1cD1pLmVsZW1lbnQuY2xvc2VzdChcIi5rLXBvcHVwXCIpLmRhdGEocykpOmkucG9wdXA9aS5mb3JtW3NdKHthbmNob3I6aS5saW5rLG9wZW46YShpLl9vcGVuLGkpLGFjdGl2YXRlOmEoaS5fYWN0aXZhdGUsaSksY2xvc2U6ZnVuY3Rpb24oKXtpLm9wdGlvbnMuY2xvc2VDYWxsYmFjayYmaS5vcHRpb25zLmNsb3NlQ2FsbGJhY2soaS5lbGVtZW50KX19KS5kYXRhKHMpLGkuZm9ybS5vbihcImtleWRvd25cIitjLGEoaS5fa2V5ZG93bixpKSl9LF9jcmVhdGVNb2JpbGVGb3JtOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMsbz1pLm9wdGlvbnMsYT1pLm9wZXJhdG9yc3x8e30scz1pLnR5cGU7YT1hW3NdfHxvLm9wZXJhdG9yc1tzXSxpLmZvcm09ZShcIjxkaXYgLz5cIikuaHRtbChyLnRlbXBsYXRlKFwiYm9vbGVhblwiPT09cz95Ol8pKHtmaWVsZDppLmZpZWxkLGZvcm1hdDpvLmZvcm1hdCxuczpyLm5zLG1lc3NhZ2VzOm8ubWVzc2FnZXMsZXh0cmE6by5leHRyYSxvcGVyYXRvcnM6YSx0eXBlOnMscm9sZTp0LHVzZVJvbGU6IXIuc3VwcG9ydC5pbnB1dC5kYXRlJiZcImRhdGVcIj09PXN8fFwibnVtYmVyXCI9PT1zLGlucHV0VHlwZTpwW3NdLHZhbHVlczpuKG8udmFsdWVzKX0pKSxpLnZpZXc9aS5wYW5lLmFwcGVuZChpLmZvcm0uaHRtbCgpKSxpLmZvcm09aS52aWV3LmVsZW1lbnQuZmluZChcImZvcm1cIiksaS52aWV3LmVsZW1lbnQub24oXCJjbGlja1wiLFwiLmstc3VibWl0XCIsZnVuY3Rpb24oZSl7aS5mb3JtLnN1Ym1pdCgpLGUucHJldmVudERlZmF1bHQoKX0pLm9uKFwiY2xpY2tcIixcIi5rLWNhbmNlbFwiLGZ1bmN0aW9uKGUpe2kuX2Nsb3NlRm9ybSgpLGUucHJldmVudERlZmF1bHQoKX0pfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e2ZpbHRlcnM6W10sbG9naWM6XCJhbmRcIn07ZS5maWx0ZXJNb2RlbD1yLm9ic2VydmFibGUoe2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpbZS5fZGVmYXVsdEZpbHRlcigpLGUuX2RlZmF1bHRGaWx0ZXIoKV19KSxlLmZvcm0mJnIuYmluZChlLmZvcm0uY2hpbGRyZW4oKS5maXJzdCgpLGUuZmlsdGVyTW9kZWwpLGUuX2JpbmQodCk/ZS5saW5rLmFkZENsYXNzKFwiay1zdGF0ZS1hY3RpdmVcIik6ZS5saW5rLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1hY3RpdmVcIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2cuZm4uZGVzdHJveS5jYWxsKGUpLGUuZm9ybSYmKHIudW5iaW5kKGUuZm9ybSksci5kZXN0cm95KGUuZm9ybSksZS5mb3JtLnVuYmluZChjKSxlLnBvcHVwJiYoZS5wb3B1cC5kZXN0cm95KCksZS5wb3B1cD1udWxsKSxlLmZvcm09bnVsbCksZS52aWV3JiYoZS52aWV3LnB1cmdlKCksZS52aWV3PW51bGwpLGUubGluay51bmJpbmQoYyksZS5fcmVmcmVzaEhhbmRsZXImJihlLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsZS5fcmVmcmVzaEhhbmRsZXIpLGUuZGF0YVNvdXJjZT1udWxsKSxlLmVsZW1lbnQ9ZS5saW5rPWUuX3JlZnJlc2hIYW5kbGVyPWUuZmlsdGVyTW9kZWw9bnVsbH0sX2JpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzLGE9ZS5maWx0ZXJzLHM9ITEsbD0wLGM9by5maWx0ZXJNb2RlbDtmb3IodD0wLG49YS5sZW5ndGg7bj50O3QrKylyPWFbdF0sci5maWVsZD09by5maWVsZD8oYy5zZXQoXCJsb2dpY1wiLGUubG9naWMpLGk9Yy5maWx0ZXJzW2xdLGl8fChjLmZpbHRlcnMucHVzaCh7ZmllbGQ6by5maWVsZH0pLGk9Yy5maWx0ZXJzW2xdKSxpLnNldChcInZhbHVlXCIsby5fcGFyc2Uoci52YWx1ZSkpLGkuc2V0KFwib3BlcmF0b3JcIixyLm9wZXJhdG9yKSxsKysscz0hMCk6ci5maWx0ZXJzJiYocz1zfHxvLl9iaW5kKHIpKTtyZXR1cm4gc30sX21lcmdlOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1uLmxvZ2ljfHxcImFuZFwiLGw9bi5maWx0ZXJzLGM9YS5kYXRhU291cmNlLmZpbHRlcigpfHx7ZmlsdGVyczpbXSxsb2dpYzpcImFuZFwifTtmb3IodChjLGEuZmllbGQpLGw9ZS5ncmVwKGwsZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWUudmFsdWUmJm51bGwhPWUudmFsdWV9KSxyPTAsbz1sLmxlbmd0aDtvPnI7cisrKWk9bFtyXSxpLnZhbHVlPWEuX3BhcnNlKGkudmFsdWUpO3JldHVybiBsLmxlbmd0aCYmKGMuZmlsdGVycy5sZW5ndGg/KG4uZmlsdGVycz1sLFwiYW5kXCIhPT1jLmxvZ2ljJiYoYy5maWx0ZXJzPVt7bG9naWM6Yy5sb2dpYyxmaWx0ZXJzOmMuZmlsdGVyc31dLGMubG9naWM9XCJhbmRcIiksYy5maWx0ZXJzLnB1c2gobC5sZW5ndGg+MT9uOmxbMF0pKTooYy5maWx0ZXJzPWwsYy5sb2dpYz1zKSksY30sZmlsdGVyOmZ1bmN0aW9uKGUpe2U9dGhpcy5fbWVyZ2UoZSksZS5maWx0ZXJzLmxlbmd0aCYmdGhpcy5kYXRhU291cmNlLmZpbHRlcihlKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5kYXRhU291cmNlLmZpbHRlcigpfHx7ZmlsdGVyczpbXX07bi5maWx0ZXJzPWUuZ3JlcChuLmZpbHRlcnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVycz8oZS5maWx0ZXJzPWkoZS5maWx0ZXJzLHQuZmllbGQpLGUuZmlsdGVycy5sZW5ndGgpOmUuZmllbGQhPXQuZmllbGR9KSxuLmZpbHRlcnMubGVuZ3RofHwobj1udWxsKSx0LmRhdGFTb3VyY2UuZmlsdGVyKG4pfSxfc3VibWl0OmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuZmlsdGVyKHRoaXMuZmlsdGVyTW9kZWwudG9KU09OKCkpLHRoaXMuX2Nsb3NlRm9ybSgpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCksdGhpcy5fY2xvc2VGb3JtKCl9LF9jbG9zZUZvcm06ZnVuY3Rpb24oKXt0aGlzLl9pc01vYmlsZT90aGlzLnBhbmUubmF2aWdhdGUoXCJcIix0aGlzLm9wdGlvbnMuYW5pbWF0aW9ucy5yaWdodCk6dGhpcy5wb3B1cC5jbG9zZSgpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5wb3B1cHx8dGhpcy5wYW5lfHx0aGlzLl9pbml0KCksdGhpcy5faXNNb2JpbGU/dGhpcy5wYW5lLm5hdmlnYXRlKHRoaXMudmlldyx0aGlzLm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KTp0aGlzLnBvcHVwLnRvZ2dsZSgpfSxfb3BlbjpmdW5jdGlvbigpe3ZhciB0O2UoXCIuay1maWx0ZXItbWVudVwiKS5ub3QodGhpcy5mb3JtKS5lYWNoKGZ1bmN0aW9uKCl7dD1lKHRoaXMpLmRhdGEocyksdCYmdC5jbG9zZSgpfSl9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuZm9ybS5maW5kKFwiOmtlbmRvRm9jdXNhYmxlOmZpcnN0XCIpLmZvY3VzKCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe2Uua2V5Q29kZT09ci5rZXlzLkVTQyYmdGhpcy5wb3B1cC5jbG9zZSgpfSxldmVudHM6W2xdLG9wdGlvbnM6e25hbWU6XCJGaWx0ZXJNZW51XCIsZXh0cmE6ITAsYXBwZW5kVG9FbGVtZW50OiExLHR5cGU6XCJzdHJpbmdcIixvcGVyYXRvcnM6e3N0cmluZzp7ZXE6ZCxuZXE6dSxzdGFydHN3aXRoOlwiU3RhcnRzIHdpdGhcIixjb250YWluczpcIkNvbnRhaW5zXCIsZG9lc25vdGNvbnRhaW46XCJEb2VzIG5vdCBjb250YWluXCIsZW5kc3dpdGg6XCJFbmRzIHdpdGhcIn0sbnVtYmVyOntlcTpkLG5lcTp1LGd0ZTpcIklzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0b1wiLGd0OlwiSXMgZ3JlYXRlciB0aGFuXCIsbHRlOlwiSXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvXCIsbHQ6XCJJcyBsZXNzIHRoYW5cIn0sZGF0ZTp7ZXE6ZCxuZXE6dSxndGU6XCJJcyBhZnRlciBvciBlcXVhbCB0b1wiLGd0OlwiSXMgYWZ0ZXJcIixsdGU6XCJJcyBiZWZvcmUgb3IgZXF1YWwgdG9cIixsdDpcIklzIGJlZm9yZVwifSxlbnVtczp7ZXE6ZCxuZXE6dX19LG1lc3NhZ2VzOntpbmZvOlwiU2hvdyBpdGVtcyB3aXRoIHZhbHVlIHRoYXQ6XCIsaXNUcnVlOlwiaXMgdHJ1ZVwiLGlzRmFsc2U6XCJpcyBmYWxzZVwiLGZpbHRlcjpcIkZpbHRlclwiLGNsZWFyOlwiQ2xlYXJcIixhbmQ6XCJBbmRcIixvcjpcIk9yXCIsc2VsZWN0VmFsdWU6XCItU2VsZWN0IHZhbHVlLVwiLG9wZXJhdG9yOlwiT3BlcmF0b3JcIix2YWx1ZTpcIlZhbHVlXCIsY2FuY2VsOlwiQ2FuY2VsXCJ9LGFuaW1hdGlvbnM6e2xlZnQ6XCJzbGlkZVwiLHJpZ2h0Olwic2xpZGU6cmlnaHRcIn19fSk7by5wbHVnaW4odyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybiBlPWUuc3BsaXQoXCIgXCIpWyF0KzBdfHxlLGUucmVwbGFjZShcInRvcFwiLFwidXBcIikucmVwbGFjZShcImJvdHRvbVwiLFwiZG93blwiKX1mdW5jdGlvbiBpKGUsdCxuKXtlPWUuc3BsaXQoXCIgXCIpWyF0KzBdfHxlO3ZhciBpPXtvcmlnaW46W1wiYm90dG9tXCIsbj9cInJpZ2h0XCI6XCJsZWZ0XCJdLHBvc2l0aW9uOltcInRvcFwiLG4/XCJyaWdodFwiOlwibGVmdFwiXX0scj0vbGVmdHxyaWdodC8udGVzdChlKTtyZXR1cm4gcj8oaS5vcmlnaW49W1widG9wXCIsZV0saS5wb3NpdGlvblsxXT1jLmRpcmVjdGlvbnNbZV0ucmV2ZXJzZSk6KGkub3JpZ2luWzBdPWUsaS5wb3NpdGlvblswXT1jLmRpcmVjdGlvbnNbZV0ucmV2ZXJzZSksaS5vcmlnaW49aS5vcmlnaW4uam9pbihcIiBcIiksaS5wb3NpdGlvbj1pLnBvc2l0aW9uLmpvaW4oXCIgXCIpLGl9ZnVuY3Rpb24gcih0LG4pe3RyeXtyZXR1cm4gZS5jb250YWlucyh0LG4pfWNhdGNoKGkpe3JldHVybiExfX1mdW5jdGlvbiBvKHQpe3Q9ZSh0KSx0LmFkZENsYXNzKFwiay1pdGVtXCIpLmNoaWxkcmVuKHgpLmFkZENsYXNzKFApLHQuY2hpbGRyZW4oXCJhXCIpLmFkZENsYXNzKFQpLmNoaWxkcmVuKHgpLmFkZENsYXNzKFApLHQuZmlsdGVyKFwiOm5vdChbZGlzYWJsZWRdKVwiKS5hZGRDbGFzcyhHKSx0LmZpbHRlcihcIi5rLXNlcGFyYXRvcjplbXB0eVwiKS5hcHBlbmQoXCImbmJzcDtcIiksdC5maWx0ZXIoXCJsaVtkaXNhYmxlZF1cIikuYWRkQ2xhc3MoWSkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITApLHQuZmlsdGVyKFwiW3JvbGVdXCIpLmxlbmd0aHx8dC5hdHRyKFwicm9sZVwiLFwibWVudWl0ZW1cIiksdC5jaGlsZHJlbihcIi5cIitUKS5sZW5ndGh8fHQuY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMubm9kZU5hbWUubWF0Y2goYil8fDM9PXRoaXMubm9kZVR5cGUmJiFlLnRyaW0odGhpcy5ub2RlVmFsdWUpKX0pLndyYXBBbGwoXCI8c3BhbiBjbGFzcz0nXCIrVCtcIicvPlwiKSxhKHQpLHModCl9ZnVuY3Rpb24gYSh0KXt0PWUodCksdC5maW5kKFwiPiAuay1saW5rID4gW2NsYXNzKj1rLWktYXJyb3ddOm5vdCguay1zcHJpdGUpXCIpLnJlbW92ZSgpLHQuZmlsdGVyKFwiOmhhcyguay1tZW51LWdyb3VwKVwiKS5jaGlsZHJlbihcIi5rLWxpbms6bm90KDpoYXMoW2NsYXNzKj1rLWktYXJyb3ddOm5vdCguay1zcHJpdGUpKSlcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbj10LnBhcmVudCgpLnBhcmVudCgpO3QuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBcIisobi5oYXNDbGFzcyhTK1wiLWhvcml6b250YWxcIik/XCJrLWktYXJyb3ctc1wiOlwiay1pLWFycm93LWVcIikrXCInLz5cIil9KX1mdW5jdGlvbiBzKHQpe3Q9ZSh0KSx0LmZpbHRlcihcIi5rLWZpcnN0Om5vdCg6Zmlyc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKE0pLHQuZmlsdGVyKFwiLmstbGFzdDpub3QoOmxhc3QtY2hpbGQpXCIpLnJlbW92ZUNsYXNzKEQpLHQuZmlsdGVyKFwiOmZpcnN0LWNoaWxkXCIpLmFkZENsYXNzKE0pLHQuZmlsdGVyKFwiOmxhc3QtY2hpbGRcIikuYWRkQ2xhc3MoRCl9dmFyIGwsYz13aW5kb3cua2VuZG8sZD1jLnVpLHU9Yy5fYWN0aXZlRWxlbWVudCxoPWMuc3VwcG9ydC50b3VjaCYmYy5zdXBwb3J0Lm1vYmlsZU9TLHA9XCJtb3VzZWRvd25cIixmPVwiY2xpY2tcIixnPWUuZXh0ZW5kLG09ZS5wcm94eSx2PWUuZWFjaCxfPWMudGVtcGxhdGUseT1jLmtleXMsdz1kLldpZGdldCxiPS9eKHVsfGF8ZGl2KSQvaSxrPVwiLmtlbmRvTWVudVwiLHg9XCJpbWdcIixDPVwib3BlblwiLFM9XCJrLW1lbnVcIixUPVwiay1saW5rXCIsRD1cImstbGFzdFwiLEE9XCJjbG9zZVwiLEU9XCJ0aW1lclwiLE09XCJrLWZpcnN0XCIsUD1cImstaW1hZ2VcIixJPVwic2VsZWN0XCIsej1cInpJbmRleFwiLEY9XCJhY3RpdmF0ZVwiLFI9XCJkZWFjdGl2YXRlXCIsQj1cInRvdWNoc3RhcnRcIitrK1wiIE1TUG9pbnRlckRvd25cIitrK1wiIHBvaW50ZXJkb3duXCIrayxMPWMuc3VwcG9ydC5wb2ludGVycyxPPWMuc3VwcG9ydC5tc1BvaW50ZXJzLEg9T3x8TCxOPUw/XCJwb2ludGVyb3ZlclwiOk8/XCJNU1BvaW50ZXJPdmVyXCI6XCJtb3VzZWVudGVyXCIsVj1MP1wicG9pbnRlcm91dFwiOk8/XCJNU1BvaW50ZXJPdXRcIjpcIm1vdXNlbGVhdmVcIixVPWh8fEgsVz1lKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCksaj1cImtlbmRvUG9wdXBcIixHPVwiay1zdGF0ZS1kZWZhdWx0XCIscT1cImstc3RhdGUtaG92ZXJcIiwkPVwiay1zdGF0ZS1mb2N1c2VkXCIsWT1cImstc3RhdGUtZGlzYWJsZWRcIixLPVwiLmstbWVudVwiLFE9XCIuay1tZW51LWdyb3VwXCIsWD1RK1wiLC5rLWFuaW1hdGlvbi1jb250YWluZXJcIixKPVwiOm5vdCguay1saXN0KSA+IC5rLWl0ZW1cIixaPVwiLmstaXRlbS5rLXN0YXRlLWRpc2FibGVkXCIsZXQ9XCIuay1pdGVtOm5vdCguay1zdGF0ZS1kaXNhYmxlZClcIix0dD1cIi5rLWl0ZW06bm90KC5rLXN0YXRlLWRpc2FibGVkKSA+IC5rLWxpbmtcIixudD1cIjpub3QoLmstaXRlbS5rLXNlcGFyYXRvcilcIixpdD1udCtcIjplcSgwKVwiLHJ0PW50K1wiOmxhc3RcIixvdD1cImRpdjpub3QoLmstYW5pbWF0aW9uLWNvbnRhaW5lciwuay1saXN0LWNvbnRhaW5lcilcIixhdD17MjoxLHRvdWNoOjF9LHN0PXtjb250ZW50Ol8oXCI8ZGl2IGNsYXNzPSdrLWNvbnRlbnQgIz0gZ3JvdXBDc3NDbGFzcygpICMnIHRhYmluZGV4PSctMSc+Iz0gY29udGVudChpdGVtKSAjPC9kaXY+XCIpLGdyb3VwOl8oXCI8dWwgY2xhc3M9JyM9IGdyb3VwQ3NzQ2xhc3MoZ3JvdXApICMnIz0gZ3JvdXBBdHRyaWJ1dGVzKGdyb3VwKSAjIHJvbGU9J21lbnUnIGFyaWEtaGlkZGVuPSd0cnVlJz4jPSByZW5kZXJJdGVtcyhkYXRhKSAjPC91bD5cIiksaXRlbVdyYXBwZXI6XyhcIjwjPSB0YWcoaXRlbSkgIyBjbGFzcz0nIz0gdGV4dENsYXNzKGl0ZW0pICMnIz0gdGV4dEF0dHJpYnV0ZXMoaXRlbSkgIz4jPSBpbWFnZShpdGVtKSAjIz0gc3ByaXRlKGl0ZW0pICMjPSB0ZXh0KGl0ZW0pICMjPSBhcnJvdyhkYXRhKSAjPC8jPSB0YWcoaXRlbSkgIz5cIiksaXRlbTpfKFwiPGxpIGNsYXNzPScjPSB3cmFwcGVyQ3NzQ2xhc3MoZ3JvdXAsIGl0ZW0pICMnIHJvbGU9J21lbnVpdGVtJyAjPWl0ZW0uaXRlbXMgPyBcXFwiYXJpYS1oYXNwb3B1cD0ndHJ1ZSdcXFwiOiBcXFwiXFxcIiMjPWl0ZW0uZW5hYmxlZCA9PT0gZmFsc2UgPyBcXFwiYXJpYS1kaXNhYmxlZD0ndHJ1ZSdcXFwiIDogJycjPiM9IGl0ZW1XcmFwcGVyKGRhdGEpICMjIGlmIChpdGVtLml0ZW1zKSB7ICMjPSBzdWJHcm91cCh7IGl0ZW1zOiBpdGVtLml0ZW1zLCBtZW51OiBtZW51LCBncm91cDogeyBleHBhbmRlZDogaXRlbS5leHBhbmRlZCB9IH0pICMjIH0gZWxzZSBpZiAoaXRlbS5jb250ZW50IHx8IGl0ZW0uY29udGVudFVybCkgeyAjIz0gcmVuZGVyQ29udGVudChkYXRhKSAjIyB9ICM8L2xpPlwiKSxpbWFnZTpfKFwiPGltZyBjbGFzcz0nay1pbWFnZScgYWx0PScnIHNyYz0nIz0gaW1hZ2VVcmwgIycgLz5cIiksYXJyb3c6XyhcIjxzcGFuIGNsYXNzPScjPSBhcnJvd0NsYXNzKGl0ZW0sIGdyb3VwKSAjJz48L3NwYW4+XCIpLHNwcml0ZTpfKFwiPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnPjwvc3Bhbj5cIiksZW1wdHk6XyhcIlwiKX0sbHQ9e3dyYXBwZXJDc3NDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiay1pdGVtXCIsaT10LmluZGV4O3JldHVybiBuKz10LmVuYWJsZWQ9PT0hMT9cIiBrLXN0YXRlLWRpc2FibGVkXCI6XCIgay1zdGF0ZS1kZWZhdWx0XCIsZS5maXJzdExldmVsJiYwPT09aSYmKG4rPVwiIGstZmlyc3RcIiksaT09ZS5sZW5ndGgtMSYmKG4rPVwiIGstbGFzdFwiKSx0LmNzc0NsYXNzJiYobis9XCIgXCIrdC5jc3NDbGFzcyksbn0sdGV4dENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFR9LHRleHRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybD9cIiBocmVmPSdcIitlLnVybCtcIidcIjpcIlwifSxhcnJvd0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWljb25cIjtyZXR1cm4gbis9dC5ob3Jpem9udGFsP1wiIGstaS1hcnJvdy1zXCI6XCIgay1pLWFycm93LWVcIn0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmNvZGVkPT09ITE/ZS50ZXh0OmMuaHRtbEVuY29kZShlLnRleHQpfSx0YWc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudXJsP1wiYVwiOlwic3BhblwifSxncm91cEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZXhwYW5kZWQhPT0hMD9cIiBzdHlsZT0nZGlzcGxheTpub25lJ1wiOlwiXCJ9LGdyb3VwQ3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm5cImstZ3JvdXAgay1tZW51LWdyb3VwXCJ9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudD9lLmNvbnRlbnQ6XCImbmJzcDtcIn19LGN0PXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpczt3LmZuLmluaXQuY2FsbChpLHQsbiksdD1pLndyYXBwZXI9aS5lbGVtZW50LG49aS5vcHRpb25zLGkuX2luaXREYXRhKG4pLGkuX3VwZGF0ZUNsYXNzZXMoKSxpLl9hbmltYXRpb25zKG4pLGkubmV4dEl0ZW1aSW5kZXg9MTAwLGkuX3RhYmluZGV4KCksaS5fZm9jdXNQcm94eT1tKGkuX2ZvY3VzSGFuZGxlcixpKSx0Lm9uKEIsaS5fZm9jdXNQcm94eSkub24oZitrLFosITEpLm9uKGYrayxldCxtKGkuX2NsaWNrLGkpKS5vbihcImtleWRvd25cIitrLG0oaS5fa2V5ZG93bixpKSkub24oXCJmb2N1c1wiK2ssbShpLl9mb2N1cyxpKSkub24oXCJmb2N1c1wiK2ssXCIuay1jb250ZW50XCIsbShpLl9mb2N1cyxpKSkub24oQitcIiBcIitwK2ssXCIuay1jb250ZW50XCIsbShpLl9wcmV2ZW50Q2xvc2UsaSkpLm9uKFwiYmx1clwiK2ssbShpLl9yZW1vdmVIb3Zlckl0ZW0saSkpLm9uKFwiYmx1clwiK2ssXCJbdGFiaW5kZXhdXCIsbShpLl9jaGVja0FjdGl2ZUVsZW1lbnQsaSkpLm9uKE4rayxldCxtKGkuX21vdXNlZW50ZXIsaSkpLm9uKFYrayxldCxtKGkuX21vdXNlbGVhdmUsaSkpLm9uKE4raytcIiBcIitWK2srXCIgXCIrcCtrK1wiIFwiK2Yrayx0dCxtKGkuX3RvZ2dsZUhvdmVyLGkpKSxuLm9wZW5PbkNsaWNrJiYoaS5jbGlja2VkPSExLGkuX2RvY3VtZW50Q2xpY2tIYW5kbGVyPW0oaS5fZG9jdW1lbnRDbGljayxpKSxlKGRvY3VtZW50KS5jbGljayhpLl9kb2N1bWVudENsaWNrSGFuZGxlcikpLHQuYXR0cihcInJvbGVcIixcIm1lbnViYXJcIiksdFswXS5pZCYmKGkuX2FyaWFJZD1jLmZvcm1hdChcInswfV9tbl9hY3RpdmVcIix0WzBdLmlkKSksYy5ub3RpZnkoaSl9LGV2ZW50czpbQyxBLEYsUixJXSxvcHRpb25zOntuYW1lOlwiTWVudVwiLGFuaW1hdGlvbjp7b3Blbjp7ZHVyYXRpb246MjAwfSxjbG9zZTp7ZHVyYXRpb246MTAwfX0sb3JpZW50YXRpb246XCJob3Jpem9udGFsXCIsZGlyZWN0aW9uOlwiZGVmYXVsdFwiLG9wZW5PbkNsaWNrOiExLGNsb3NlT25DbGljazohMCxob3ZlckRlbGF5OjEwMCxwb3B1cENvbGxpc2lvbjp0fSxfaW5pdERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFTb3VyY2UmJih0LmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5lbGVtZW50LmNoaWxkcmVuKCl9fSksdC5lbGVtZW50LmVtcHR5KCksdC5hcHBlbmQoZS5kYXRhU291cmNlLHQuZWxlbWVudCksdC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZWxlbWVudC5jaGlsZHJlbigpfX0pKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMuYW5pbWF0aW9uO3RoaXMuX2FuaW1hdGlvbnMoZSksZS5hbmltYXRpb249ZyghMCx0LGUuYW5pbWF0aW9uKSxcImRhdGFTb3VyY2VcImluIGUmJnRoaXMuX2luaXREYXRhKGUpLHRoaXMuX3VwZGF0ZUNsYXNzZXMoKSx3LmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt3LmZuLmRlc3Ryb3kuY2FsbCh0KSx0LmVsZW1lbnQub2ZmKGspLHQuX2RvY3VtZW50Q2xpY2tIYW5kbGVyJiZlKGRvY3VtZW50KS51bmJpbmQoXCJjbGlja1wiLHQuX2RvY3VtZW50Q2xpY2tIYW5kbGVyKSxjLmRlc3Ryb3kodC5lbGVtZW50KX0sZW5hYmxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3RvZ2dsZURpc2FibGVkKGUsdCE9PSExKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLCExKSx0aGlzfSxhcHBlbmQ6ZnVuY3Rpb24oZSx0KXt0PXRoaXMuZWxlbWVudC5maW5kKHQpO3ZhciBuPXRoaXMuX2luc2VydChlLHQsdC5sZW5ndGg/dC5maW5kKFwiPiAuay1tZW51LWdyb3VwLCA+IC5rLWFuaW1hdGlvbi1jb250YWluZXIgPiAuay1tZW51LWdyb3VwXCIpOm51bGwpO3JldHVybiB2KG4uaXRlbXMsZnVuY3Rpb24oKXtuLmdyb3VwLmFwcGVuZCh0aGlzKSxhKHRoaXMpfSksYSh0KSxzKG4uZ3JvdXAuZmluZChcIi5rLWZpcnN0LCAuay1sYXN0XCIpLmFkZChuLml0ZW1zKSksdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQucGFyZW50KCkpO3JldHVybiB2KG4uaXRlbXMsZnVuY3Rpb24oKXt0LmJlZm9yZSh0aGlzKSxhKHRoaXMpLHModGhpcyl9KSxzKHQpLHRoaXN9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQucGFyZW50KCkpO3JldHVybiB2KG4uaXRlbXMsZnVuY3Rpb24oKXt0LmFmdGVyKHRoaXMpLGEodGhpcykscyh0aGlzKX0pLHModCksdGhpc30sX2luc2VydDpmdW5jdGlvbih0LG4saSl7dmFyIHIsYSxzLGwsYz10aGlzO3JldHVybiBuJiZuLmxlbmd0aHx8KGk9Yy5lbGVtZW50KSxzPWUuaXNQbGFpbk9iamVjdCh0KSxsPXtmaXJzdExldmVsOmkuaGFzQ2xhc3MoUyksaG9yaXpvbnRhbDppLmhhc0NsYXNzKFMrXCItaG9yaXpvbnRhbFwiKSxleHBhbmRlZDohMCxsZW5ndGg6aS5jaGlsZHJlbigpLmxlbmd0aH0sbiYmIWkubGVuZ3RoJiYoaT1lKGN0LnJlbmRlckdyb3VwKHtncm91cDpsfSkpLmFwcGVuZFRvKG4pKSxzfHxlLmlzQXJyYXkodCk/cj1lKGUubWFwKHM/W3RdOnQsZnVuY3Rpb24odCxuKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD9lKHQpLmdldCgpOmUoY3QucmVuZGVySXRlbSh7Z3JvdXA6bCxpdGVtOmcodCx7aW5kZXg6bn0pfSkpLmdldCgpfSkpOihyPVwic3RyaW5nXCI9PXR5cGVvZiB0JiZcIjxcIiE9dFswXT9jLmVsZW1lbnQuZmluZCh0KTplKHQpLGE9ci5maW5kKFwiPiB1bFwiKS5hZGRDbGFzcyhcImstbWVudS1ncm91cFwiKS5hdHRyKFwicm9sZVwiLFwibWVudVwiKSxyPXIuZmlsdGVyKFwibGlcIiksci5hZGQoYS5maW5kKFwiPiBsaVwiKSkuZWFjaChmdW5jdGlvbigpe28odGhpcyl9KSkse2l0ZW1zOnIsZ3JvdXA6aX19LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscjtyZXR1cm4gZT10aGlzLmVsZW1lbnQuZmluZChlKSx0PXRoaXMsbj1lLnBhcmVudHNVbnRpbCh0LmVsZW1lbnQsSiksaT1lLnBhcmVudChcInVsOm5vdCguay1tZW51KVwiKSxlLnJlbW92ZSgpLGkmJiFpLmNoaWxkcmVuKEopLmxlbmd0aCYmKHI9aS5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLHIubGVuZ3RoP3IucmVtb3ZlKCk6aS5yZW1vdmUoKSksbi5sZW5ndGgmJihuPW4uZXEoMCksYShuKSxzKG4pKSx0fSxvcGVuOmZ1bmN0aW9uKHIpe3ZhciBvPXRoaXMsYT1vLm9wdGlvbnMscz1cImhvcml6b250YWxcIj09YS5vcmllbnRhdGlvbixsPWEuZGlyZWN0aW9uLGQ9Yy5zdXBwb3J0LmlzUnRsKG8ud3JhcHBlcik7cmV0dXJuIHI9by5lbGVtZW50LmZpbmQociksL14odG9wfGJvdHRvbXxkZWZhdWx0KSQvLnRlc3QobCkmJihsPWQ/cz8obCtcIiBsZWZ0XCIpLnJlcGxhY2UoXCJkZWZhdWx0XCIsXCJib3R0b21cIik6XCJsZWZ0XCI6cz8obCtcIiByaWdodFwiKS5yZXBsYWNlKFwiZGVmYXVsdFwiLFwiYm90dG9tXCIpOlwicmlnaHRcIiksci5zaWJsaW5ncygpLmZpbmQoXCI+LmstcG9wdXA6dmlzaWJsZSw+LmstYW5pbWF0aW9uLWNvbnRhaW5lcj4uay1wb3B1cDp2aXNpYmxlXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLmRhdGEoXCJrZW5kb1BvcHVwXCIpO3QmJnQuY2xvc2UoKX0pLHIuZWFjaChmdW5jdGlvbigpe3ZhciByPWUodGhpcyk7Y2xlYXJUaW1lb3V0KHIuZGF0YShFKSksci5kYXRhKEUsc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB1LGgscCxmLG0sdixfLHksdz1yLmZpbmQoXCIuay1tZW51LWdyb3VwOmZpcnN0OmhpZGRlblwiKTt3WzBdJiZvLl90cmlnZ2VyRXZlbnQoe2l0ZW06clswXSx0eXBlOkN9KT09PSExJiYoIXcuZmluZChcIi5rLW1lbnUtZ3JvdXBcIilbMF0mJncuY2hpbGRyZW4oXCIuay1pdGVtXCIpLmxlbmd0aD4xPyhoPWUod2luZG93KS5oZWlnaHQoKSxwPWZ1bmN0aW9uKCl7dy5jc3Moe21heEhlaWdodDpoLSh3Lm91dGVySGVpZ2h0KCktdy5oZWlnaHQoKSktYy5nZXRTaGFkb3dzKHcpLmJvdHRvbSxvdmVyZmxvdzpcImF1dG9cIn0pfSxjLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY3Pj1jLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uP3NldFRpbWVvdXQocCwwKTpwKCkpOncuY3NzKHttYXhIZWlnaHQ6XCJcIixvdmVyZmxvdzpcIlwifSksci5kYXRhKHosci5jc3MoeikpLHIuY3NzKHosby5uZXh0SXRlbVpJbmRleCsrKSx1PXcuZGF0YShqKSxmPXIucGFyZW50KCkuaGFzQ2xhc3MoUyksbT1mJiZzLHY9aShsLGYsZCksXz1hLmFuaW1hdGlvbi5vcGVuLmVmZmVjdHMseT1fIT09dD9fOlwic2xpZGVJbjpcIituKGwsZiksdT8odT13LmRhdGEoaiksdS5vcHRpb25zLm9yaWdpbj12Lm9yaWdpbix1Lm9wdGlvbnMucG9zaXRpb249di5wb3NpdGlvbix1Lm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4uZWZmZWN0cz15KTp1PXcua2VuZG9Qb3B1cCh7YWN0aXZhdGU6ZnVuY3Rpb24oKXtvLl90cmlnZ2VyRXZlbnQoe2l0ZW06dGhpcy53cmFwcGVyLnBhcmVudCgpLHR5cGU6Rn0pfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKGUpe2Uuc2VuZGVyLmVsZW1lbnQucmVtb3ZlRGF0YShcInRhcmdldFRyYW5zZm9ybVwiKS5jc3Moe29wYWNpdHk6XCJcIn0pLG8uX3RyaWdnZXJFdmVudCh7aXRlbTp0aGlzLndyYXBwZXIucGFyZW50KCksdHlwZTpSfSl9LG9yaWdpbjp2Lm9yaWdpbixwb3NpdGlvbjp2LnBvc2l0aW9uLGNvbGxpc2lvbjphLnBvcHVwQ29sbGlzaW9uIT09dD9hLnBvcHVwQ29sbGlzaW9uOm0/XCJmaXRcIjpcImZpdCBmbGlwXCIsYW5jaG9yOnIsYXBwZW5kVG86cixhbmltYXRpb246e29wZW46ZyghMCx7ZWZmZWN0czp5fSxhLmFuaW1hdGlvbi5vcGVuKSxjbG9zZTphLmFuaW1hdGlvbi5jbG9zZX0sY2xvc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZW5kZXIud3JhcHBlci5wYXJlbnQoKTtvLl90cmlnZ2VyRXZlbnQoe2l0ZW06dFswXSx0eXBlOkF9KT9lLnByZXZlbnREZWZhdWx0KCk6KHQuY3NzKHosdC5kYXRhKHopKSx0LnJlbW92ZURhdGEoeiksVSYmKHQucmVtb3ZlQ2xhc3MocSksby5fcmVtb3ZlSG92ZXJJdGVtKCkpKX19KS5kYXRhKGopLHcucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLHUub3BlbigpKX0sby5vcHRpb25zLmhvdmVyRGVsYXkpKX0pLG99LGNsb3NlOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPWkuZWxlbWVudDtyZXR1cm4gdD1yLmZpbmQodCksdC5sZW5ndGh8fCh0PXIuZmluZChcIj4uay1pdGVtXCIpKSx0LmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpOyFuJiZpLl9pc1Jvb3RJdGVtKHQpJiYoaS5jbGlja2VkPSExKSxjbGVhclRpbWVvdXQodC5kYXRhKEUpKSx0LmRhdGEoRSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9dC5maW5kKFwiLmstbWVudS1ncm91cDpub3QoLmstbGlzdC1jb250YWluZXIpOm5vdCguay1jYWxlbmRhci1jb250YWluZXIpOmZpcnN0OnZpc2libGVcIikuZGF0YShqKTtlJiYoZS5jbG9zZSgpLGUuZWxlbWVudC5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCkpfSxpLm9wdGlvbnMuaG92ZXJEZWxheSkpfSksaX0sX3RvZ2dsZURpc2FibGVkOmZ1bmN0aW9uKHQsbil7dGhpcy5lbGVtZW50LmZpbmQodCkuZWFjaChmdW5jdGlvbigpe2UodGhpcykudG9nZ2xlQ2xhc3MoRyxuKS50b2dnbGVDbGFzcyhZLCFuKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCFuKX0pfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7dmFyIG49ZShjLmV2ZW50VGFyZ2V0KHQpfHx0LnRhcmdldCkuY2xvc2VzdChKKSxpPXQudHlwZT09Tnx8LTEhPT1wLmluZGV4T2YodC50eXBlKTtuLnBhcmVudHMoXCJsaS5cIitZKS5sZW5ndGh8fG4udG9nZ2xlQ2xhc3MocSxpfHxcIm1vdXNlZG93blwiPT10LnR5cGV8fFwiY2xpY2tcIj09dC50eXBlKSx0aGlzLl9yZW1vdmVIb3Zlckl0ZW0oKX0sX3ByZXZlbnRDbG9zZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5jbG9zZU9uQ2xpY2t8fCh0aGlzLl9jbG9zdXJlUHJldmVudGVkPSEwKX0sX2NoZWNrQWN0aXZlRWxlbWVudDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9ZSh0P3QuY3VycmVudFRhcmdldDp0aGlzLl9ob3Zlckl0ZW0oKSksbz1uLl9maW5kUm9vdFBhcmVudChpKVswXTt0aGlzLl9jbG9zdXJlUHJldmVudGVkfHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7KCFkb2N1bWVudC5oYXNGb2N1cygpfHwhcihvLGMuX2FjdGl2ZUVsZW1lbnQoKSkmJnQmJiFyKG8sdC5jdXJyZW50VGFyZ2V0KSkmJm4uY2xvc2Uobyl9LDApLHRoaXMuX2Nsb3N1cmVQcmV2ZW50ZWQ9ITF9LF9yZW1vdmVIb3Zlckl0ZW06ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9ob3Zlckl0ZW0oKTtlJiZlLmhhc0NsYXNzKCQpJiYoZS5yZW1vdmVDbGFzcygkKSx0aGlzLl9vbGRIb3Zlckl0ZW09bnVsbCl9LF91cGRhdGVDbGFzc2VzOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmVsZW1lbnQsbj1cIi5rLW1lbnUtaW5pdCBkaXYgdWxcIjt0LnJlbW92ZUNsYXNzKFwiay1tZW51LWhvcml6b250YWwgay1tZW51LXZlcnRpY2FsXCIpLHQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLXJlc2V0IGstaGVhZGVyIGstbWVudS1pbml0IFwiK1MpLmFkZENsYXNzKFMrXCItXCIrdGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKSx0LmZpbmQoXCJsaSA+IHVsXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiFjLnN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yLmNhbGwodGhpcyxuKX0pLmFkZENsYXNzKFwiay1ncm91cCBrLW1lbnUtZ3JvdXBcIikuYXR0cihcInJvbGVcIixcIm1lbnVcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsdC5pcyhcIjp2aXNpYmxlXCIpKS5lbmQoKS5maW5kKFwibGkgPiBkaXZcIikuYWRkQ2xhc3MoXCJrLWNvbnRlbnRcIikuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSxlPXQuZmluZChcIj4gbGksLmstbWVudS1ncm91cCA+IGxpXCIpLHQucmVtb3ZlQ2xhc3MoXCJrLW1lbnUtaW5pdFwiKSxlLmVhY2goZnVuY3Rpb24oKXtvKHRoaXMpfSl9LF9tb3VzZWVudGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQuY3VycmVudFRhcmdldCksbz1pLmNoaWxkcmVuKFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKS5sZW5ndGh8fGkuY2hpbGRyZW4oUSkubGVuZ3RoO3QuZGVsZWdhdGVUYXJnZXQ9PWkucGFyZW50cyhLKVswXSYmKG4ub3B0aW9ucy5vcGVuT25DbGljayYmIW4uY2xpY2tlZHx8aHx8KEx8fE8pJiZ0Lm9yaWdpbmFsRXZlbnQucG9pbnRlclR5cGUgaW4gYXQmJm4uX2lzUm9vdEl0ZW0oaS5jbG9zZXN0KEopKXx8IXIodC5jdXJyZW50VGFyZ2V0LHQucmVsYXRlZFRhcmdldCkmJm8mJm4ub3BlbihpKSwobi5vcHRpb25zLm9wZW5PbkNsaWNrJiZuLmNsaWNrZWR8fFUpJiZpLnNpYmxpbmdzKCkuZWFjaChtKGZ1bmN0aW9uKGUsdCl7bi5jbG9zZSh0LCEwKX0sbikpKX0sX21vdXNlbGVhdmU6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxvPWUobi5jdXJyZW50VGFyZ2V0KSxhPW8uY2hpbGRyZW4oXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLmxlbmd0aHx8by5jaGlsZHJlbihRKS5sZW5ndGg7cmV0dXJuIG8ucGFyZW50c1VudGlsKFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiLFwiLmstbGlzdC1jb250YWluZXIsLmstY2FsZW5kYXItY29udGFpbmVyXCIpWzBdPyhuLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHQpOihpLm9wdGlvbnMub3Blbk9uQ2xpY2t8fGh8fChMfHxPKSYmbi5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlIGluIGF0fHxyKG4uY3VycmVudFRhcmdldCxuLnJlbGF0ZWRUYXJnZXR8fG4udGFyZ2V0KXx8IWF8fHIobi5jdXJyZW50VGFyZ2V0LGMuX2FjdGl2ZUVsZW1lbnQoKSl8fGkuY2xvc2UobyksdCl9LF9jbGljazpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYT10aGlzLHM9YS5vcHRpb25zLGw9ZShjLmV2ZW50VGFyZ2V0KG4pKSxkPWxbMF0/bFswXS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpOlwiXCIsdT1cIklOUFVUXCI9PWR8fFwiU0VMRUNUXCI9PWR8fFwiQlVUVE9OXCI9PWR8fFwiTEFCRUxcIj09ZCxoPWwuY2xvc2VzdChcIi5cIitUKSxwPWwuY2xvc2VzdChKKSxmPWguYXR0cihcImhyZWZcIiksZz1sLmF0dHIoXCJocmVmXCIpLG09ZShcIjxhIGhyZWY9JyMnIC8+XCIpLmF0dHIoXCJocmVmXCIpLHY9ISFmJiZmIT09bSxfPXYmJiEhZi5tYXRjaCgvXiMvKSx5PSEhZyYmZyE9PW0sdz1zLm9wZW5PbkNsaWNrJiZvJiZhLl9pc1Jvb3RJdGVtKHApO2lmKHMub3Blbk9uQ2xpY2t8fCFwLmNoaWxkcmVuKG90KVswXSl7aWYocC5oYXNDbGFzcyhZKSlyZXR1cm4gbi5wcmV2ZW50RGVmYXVsdCgpLHQ7aWYobi5oYW5kbGVkfHwhYS5fdHJpZ2dlckV2ZW50KHtpdGVtOnBbMF0sdHlwZTpJfSl8fHV8fG4ucHJldmVudERlZmF1bHQoKSxuLmhhbmRsZWQ9ITAscj1wLmNoaWxkcmVuKFgpLG89ci5pcyhcIjp2aXNpYmxlXCIpLHMuY2xvc2VPbkNsaWNrJiYoIXZ8fF8pJiYoIXIubGVuZ3RofHx3KSlyZXR1cm4gcC5yZW1vdmVDbGFzcyhxKS5jc3MoXCJoZWlnaHRcIiksYS5fb2xkSG92ZXJJdGVtPWEuX2ZpbmRSb290UGFyZW50KHApLGEuY2xvc2UoaC5wYXJlbnRzVW50aWwoYS5lbGVtZW50LEopKSxhLmNsaWNrZWQ9ITEsLTEhPVwiTVNQb2ludGVyVXBcIi5pbmRleE9mKG4udHlwZSkmJm4ucHJldmVudERlZmF1bHQoKSx0O3YmJm4uZW50ZXJLZXkmJmhbMF0uY2xpY2soKSwoYS5faXNSb290SXRlbShwKSYmcy5vcGVuT25DbGlja3x8Yy5zdXBwb3J0LnRvdWNofHwoTHx8TykmJmEuX2lzUm9vdEl0ZW0ocC5jbG9zZXN0KEopKSkmJih2fHx1fHx5fHxuLnByZXZlbnREZWZhdWx0KCksYS5jbGlja2VkPSEwLGk9ci5pcyhcIjp2aXNpYmxlXCIpP0E6Qywocy5jbG9zZU9uQ2xpY2t8fGkhPUEpJiZhW2ldKHApKX19LF9kb2N1bWVudENsaWNrOmZ1bmN0aW9uKGUpe3IodGhpcy5lbGVtZW50WzBdLGUudGFyZ2V0KXx8KHRoaXMuY2xpY2tlZD0hMSl9LF9mb2N1czpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9bi50YXJnZXQsbz1pLl9ob3Zlckl0ZW0oKSxhPXUoKTtyZXR1cm4gcj09aS53cmFwcGVyWzBdfHxlKHIpLmlzKFwiOmtlbmRvRm9jdXNhYmxlXCIpPyhhPT09bi5jdXJyZW50VGFyZ2V0JiYoby5sZW5ndGg/aS5fbW92ZUhvdmVyKFtdLG8pOmkuX29sZEhvdmVySXRlbXx8aS5fbW92ZUhvdmVyKFtdLGkud3JhcHBlci5jaGlsZHJlbigpLmZpcnN0KCkpKSx0KToobi5zdG9wUHJvcGFnYXRpb24oKSxlKHIpLmNsb3Nlc3QoXCIuay1jb250ZW50XCIpLmNsb3Nlc3QoXCIuay1tZW51LWdyb3VwXCIpLmNsb3Nlc3QoXCIuay1pdGVtXCIpLmFkZENsYXNzKCQpLGkud3JhcHBlci5mb2N1cygpLHQpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbixpLHIsbz10aGlzLGE9ZS5rZXlDb2RlLHM9by5fb2xkSG92ZXJJdGVtLGw9Yy5zdXBwb3J0LmlzUnRsKG8ud3JhcHBlcik7aWYoZS50YXJnZXQ9PWUuY3VycmVudFRhcmdldHx8YT09eS5FU0Mpe2lmKHN8fChzPW8uX29sZEhvdmVySXRlbT1vLl9ob3Zlckl0ZW0oKSksaT1vLl9pdGVtQmVsb25nc1RvVmVydGl2YWwocykscj1vLl9pdGVtSGFzQ2hpbGRyZW4ocyksYT09eS5SSUdIVCluPW9bbD9cIl9pdGVtTGVmdFwiOlwiX2l0ZW1SaWdodFwiXShzLGkscik7ZWxzZSBpZihhPT15LkxFRlQpbj1vW2w/XCJfaXRlbVJpZ2h0XCI6XCJfaXRlbUxlZnRcIl0ocyxpLHIpO2Vsc2UgaWYoYT09eS5ET1dOKW49by5faXRlbURvd24ocyxpLHIpO2Vsc2UgaWYoYT09eS5VUCluPW8uX2l0ZW1VcChzLGkscik7ZWxzZSBpZihhPT15LkVTQyluPW8uX2l0ZW1Fc2MocyxpKTtlbHNlIGlmKGE9PXkuRU5URVJ8fGE9PXkuU1BBQ0VCQVIpbj1zLmNoaWxkcmVuKFwiLmstbGlua1wiKSxuLmxlbmd0aD4wJiYoby5fY2xpY2soe3RhcmdldDpuWzBdLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7fSxlbnRlcktleTohMH0pLG8uX21vdmVIb3ZlcihzLG8uX2ZpbmRSb290UGFyZW50KHMpKSk7ZWxzZSBpZihhPT15LlRBQilyZXR1cm4gbj1vLl9maW5kUm9vdFBhcmVudChzKSxvLl9tb3ZlSG92ZXIocyxuKSxvLl9jaGVja0FjdGl2ZUVsZW1lbnQoKSx0O24mJm5bMF0mJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSl9fSxfaG92ZXJJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3JhcHBlci5maW5kKFwiLmstaXRlbS5rLXN0YXRlLWhvdmVyLC5rLWl0ZW0uay1zdGF0ZS1mb2N1c2VkXCIpLmZpbHRlcihcIjp2aXNpYmxlXCIpfSxfaXRlbUJlbG9uZ3NUb1ZlcnRpdmFsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMud3JhcHBlci5oYXNDbGFzcyhcImstbWVudS12ZXJ0aWNhbFwiKTtyZXR1cm4gZS5sZW5ndGg/ZS5wYXJlbnQoKS5oYXNDbGFzcyhcImstbWVudS1ncm91cFwiKXx8dDp0fSxfaXRlbUhhc0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aD9lLmNoaWxkcmVuKFwidWwuay1tZW51LWdyb3VwLCBkaXYuay1hbmltYXRpb24tY29udGFpbmVyXCIpLmxlbmd0aD4wOiExfSxfbW92ZUhvdmVyOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPWkuX2FyaWFJZDt0Lmxlbmd0aCYmbi5sZW5ndGgmJnQucmVtb3ZlQ2xhc3MoJCksbi5sZW5ndGgmJihuWzBdLmlkJiYocj1uWzBdLmlkKSxuLmFkZENsYXNzKCQpLGkuX29sZEhvdmVySXRlbT1uLHImJihpLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxlKFwiI1wiK3IpLnJlbW92ZUF0dHIoXCJpZFwiKSxuLmF0dHIoXCJpZFwiLHIpLGkuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpKX0sX2ZpbmRSb290UGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pc1Jvb3RJdGVtKGUpP2U6ZS5wYXJlbnRzVW50aWwoSyxcImxpLmstaXRlbVwiKS5sYXN0KCl9LF9pc1Jvb3RJdGVtOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudCgpLmhhc0NsYXNzKFMpfSxfaXRlbVJpZ2h0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcztpZighZS5oYXNDbGFzcyhZKSlyZXR1cm4gdD9uPyhvLm9wZW4oZSksaT1lLmZpbmQoXCIuay1tZW51LWdyb3VwXCIpLmNoaWxkcmVuKCkuZmlyc3QoKSk6XCJob3Jpem9udGFsXCI9PW8ub3B0aW9ucy5vcmllbnRhdGlvbiYmKHI9by5fZmluZFJvb3RQYXJlbnQoZSksby5jbG9zZShyKSxpPXIubmV4dEFsbChpdCkpOihpPWUubmV4dEFsbChpdCksaS5sZW5ndGh8fChpPWUucHJldkFsbChydCkpKSxpJiYhaS5sZW5ndGg/aT1vLndyYXBwZXIuY2hpbGRyZW4oXCIuay1pdGVtXCIpLmZpcnN0KCk6aXx8KGk9W10pLG8uX21vdmVIb3ZlcihlLGkpLGl9LF9pdGVtTGVmdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcztyZXR1cm4gdD8obj1lLnBhcmVudCgpLmNsb3Nlc3QoXCIuay1pdGVtXCIpLGkuY2xvc2UobiksaS5faXNSb290SXRlbShuKSYmXCJob3Jpem9udGFsXCI9PWkub3B0aW9ucy5vcmllbnRhdGlvbiYmKG49bi5wcmV2QWxsKGl0KSkpOihuPWUucHJldkFsbChpdCksbi5sZW5ndGh8fChuPWUubmV4dEFsbChydCkpKSxuLmxlbmd0aHx8KG49aS53cmFwcGVyLmNoaWxkcmVuKFwiLmstaXRlbVwiKS5sYXN0KCkpLGkuX21vdmVIb3ZlcihlLG4pLG59LF9pdGVtRG93bjpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzO2lmKHQpaT1lLm5leHRBbGwoaXQpO2Vsc2V7aWYoIW58fGUuaGFzQ2xhc3MoWSkpcmV0dXJuO3Iub3BlbihlKSxpPWUuZmluZChcIi5rLW1lbnUtZ3JvdXBcIikuY2hpbGRyZW4oKS5maXJzdCgpfXJldHVybiFpLmxlbmd0aCYmZS5sZW5ndGg/aT1lLnBhcmVudCgpLmNoaWxkcmVuKCkuZmlyc3QoKTplLmxlbmd0aHx8KGk9ci53cmFwcGVyLmNoaWxkcmVuKFwiLmstaXRlbVwiKS5maXJzdCgpKSxyLl9tb3ZlSG92ZXIoZSxpKSxpfSxfaXRlbVVwOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2lmKHQpcmV0dXJuIG49ZS5wcmV2QWxsKGl0KSwhbi5sZW5ndGgmJmUubGVuZ3RoP249ZS5wYXJlbnQoKS5jaGlsZHJlbigpLmxhc3QoKTplLmxlbmd0aHx8KG49aS53cmFwcGVyLmNoaWxkcmVuKFwiLmstaXRlbVwiKS5sYXN0KCkpLGkuX21vdmVIb3ZlcihlLG4pLG59LF9pdGVtRXNjOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3JldHVybiB0PyhuPWUucGFyZW50KCkuY2xvc2VzdChcIi5rLWl0ZW1cIiksaS5jbG9zZShuKSxpLl9tb3ZlSG92ZXIoZSxuKSxuKTplfSxfdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHQudHJpZ2dlcihlLnR5cGUse3R5cGU6ZS50eXBlLGl0ZW06ZS5pdGVtfSl9LF9mb2N1c0hhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUoYy5ldmVudFRhcmdldCh0KSkuY2xvc2VzdChKKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fbW92ZUhvdmVyKFtdLGkpLGkuY2hpbGRyZW4oXCIuay1jb250ZW50XCIpWzBdJiZpLnBhcmVudCgpLmNsb3Nlc3QoXCIuay1pdGVtXCIpLnJlbW92ZUNsYXNzKCQpfSwyMDApfSxfYW5pbWF0aW9uczpmdW5jdGlvbihlKXtlJiZcImFuaW1hdGlvblwiaW4gZSYmIWUuYW5pbWF0aW9uJiYoZS5hbmltYXRpb249e29wZW46e2VmZmVjdHM6e319LGNsb3NlOntoaWRlOiEwLGVmZmVjdHM6e319fSl9fSk7ZyhjdCx7cmVuZGVySXRlbTpmdW5jdGlvbihlKXtlPWcoe21lbnU6e30sZ3JvdXA6e319LGUpO3ZhciB0PXN0LmVtcHR5LG49ZS5pdGVtO3JldHVybiBzdC5pdGVtKGcoZSx7aW1hZ2U6bi5pbWFnZVVybD9zdC5pbWFnZTp0LHNwcml0ZTpuLnNwcml0ZUNzc0NsYXNzP3N0LnNwcml0ZTp0LGl0ZW1XcmFwcGVyOnN0Lml0ZW1XcmFwcGVyLHJlbmRlckNvbnRlbnQ6Y3QucmVuZGVyQ29udGVudCxhcnJvdzpuLml0ZW1zfHxuLmNvbnRlbnQ/c3QuYXJyb3c6dCxzdWJHcm91cDpjdC5yZW5kZXJHcm91cH0sbHQpKX0scmVuZGVyR3JvdXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHN0Lmdyb3VwKGcoe3JlbmRlckl0ZW1zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1cIlwiLG49MCxpPWUuaXRlbXMscj1pP2kubGVuZ3RoOjAsbz1nKHtsZW5ndGg6cn0sZS5ncm91cCk7cj5uO24rKyl0Kz1jdC5yZW5kZXJJdGVtKGcoZSx7Z3JvdXA6byxpdGVtOmcoe2luZGV4Om59LGlbbl0pfSkpO3JldHVybiB0fX0sZSxsdCkpfSxyZW5kZXJDb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBzdC5jb250ZW50KGcoZSxsdCkpfX0pLGw9Y3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcztjdC5mbi5pbml0LmNhbGwoaSx0LG4pLGkudGFyZ2V0PWUoaS5vcHRpb25zLnRhcmdldCksaS5fcG9wdXAoKSxpLl93aXJlKCl9LG9wdGlvbnM6e25hbWU6XCJDb250ZXh0TWVudVwiLGZpbHRlcjpudWxsLHNob3dPbjpcImNvbnRleHRtZW51XCIsb3JpZW50YXRpb246XCJ2ZXJ0aWNhbFwiLGFsaWduVG9BbmNob3I6ITEsdGFyZ2V0OlwiYm9keVwifSxldmVudHM6W0MsQSxGLFIsSV0sc2V0T3B0aW9uczpmdW5jdGlvbih0KXt2YXIgbj10aGlzO2N0LmZuLnNldE9wdGlvbnMuY2FsbChuLHQpLG4udGFyZ2V0Lm9mZihuLnNob3dPbitrLG4uX3Nob3dQcm94eSksbi51c2VyRXZlbnRzJiZuLnVzZXJFdmVudHMuZGVzdHJveSgpLG4udGFyZ2V0PWUobi5vcHRpb25zLnRhcmdldCksdC5vcmllbnRhdGlvbiYmbi5wb3B1cC53cmFwcGVyWzBdJiZuLnBvcHVwLmVsZW1lbnQudW53cmFwKCksbi5fd2lyZSgpLGN0LmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLHQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnRhcmdldC5vZmYoZS5vcHRpb25zLnNob3dPbitrKSxXLm9mZihjLnN1cHBvcnQubW91c2Vkb3duK2ssZS5fY2xvc2VQcm94eSksZS51c2VyRXZlbnRzJiZlLnVzZXJFdmVudHMuZGVzdHJveSgpLGN0LmZuLmRlc3Ryb3kuY2FsbChlKX0sb3BlbjpmdW5jdGlvbihuLGkpe3ZhciBvPXRoaXM7cmV0dXJuIG49ZShuKVswXSxyKG8uZWxlbWVudFswXSxlKG4pWzBdKT9jdC5mbi5vcGVuLmNhbGwobyxuKTpvLl90cmlnZ2VyRXZlbnQoe2l0ZW06by5lbGVtZW50LHR5cGU6Q30pPT09ITEmJihvLnBvcHVwLnZpc2libGUoKSYmby5vcHRpb25zLmZpbHRlciYmby5wb3B1cC5jbG9zZSghMCksaSE9PXQ/KG8ucG9wdXAud3JhcHBlci5oaWRlKCksby5wb3B1cC5vcGVuKG4saSkpOihvLnBvcHVwLm9wdGlvbnMuYW5jaG9yPShuP246by5wb3B1cC5hbmNob3IpfHxvLnRhcmdldCxvLnBvcHVwLm9wZW4oKSksVy5vZmYoby5wb3B1cC5kb3duRXZlbnQsby5wb3B1cC5fbW91c2Vkb3duUHJveHkpLFcub24oYy5zdXBwb3J0Lm1vdXNlZG93bitrLG8uX2Nsb3NlUHJveHkpKSxvfSxjbG9zZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cih0LmVsZW1lbnRbMF0sZShhcmd1bWVudHNbMF0pWzBdKT9jdC5mbi5jbG9zZS5jYWxsKHQsYXJndW1lbnRzWzBdKTp0LnBvcHVwLnZpc2libGUoKSYmdC5fdHJpZ2dlckV2ZW50KHtpdGVtOnQuZWxlbWVudCx0eXBlOkF9KT09PSExJiYodC5wb3B1cC5jbG9zZSgpLFcub2ZmKGMuc3VwcG9ydC5tb3VzZWRvd24rayx0Ll9jbG9zZVByb3h5KSx0LnVuYmluZChJLHQuX2Nsb3NlVGltZW91dFByb3h5KSl9LF9zaG93SGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdCxuPWUsaT10aGlzLG89aS5vcHRpb25zO2UuZXZlbnQmJihuPWUuZXZlbnQsbi5wYWdlWD1lLngubG9jYXRpb24sbi5wYWdlWT1lLnkubG9jYXRpb24pLHIoaS5lbGVtZW50WzBdLGUucmVsYXRlZFRhcmdldHx8ZS50YXJnZXQpfHwoaS5fZXZlbnRPcmlnaW49bixuLnByZXZlbnREZWZhdWx0KCksbi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxpLmVsZW1lbnQuZmluZChcIi5cIiskKS5yZW1vdmVDbGFzcygkKSwoby5maWx0ZXImJmMuc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IuY2FsbChuLmN1cnJlbnRUYXJnZXQsby5maWx0ZXIpfHwhby5maWx0ZXIpJiYoby5hbGlnblRvQW5jaG9yP2kub3BlbihuLmN1cnJlbnRUYXJnZXQpOihpLnBvcHVwLm9wdGlvbnMuYW5jaG9yPW4uY3VycmVudFRhcmdldCxpLl90YXJnZXRDaGlsZD8odD1pLnRhcmdldC5vZmZzZXQoKSxpLm9wZW4obi5wYWdlWC10LmxlZnQsbi5wYWdlWS10LnRvcCkpOmkub3BlbihuLnBhZ2VYLG4ucGFnZVkpKSkpfSxfY2xvc2VIYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQucmVsYXRlZFRhcmdldHx8dC50YXJnZXQpLG89aS5jbG9zZXN0KG4udGFyZ2V0LnNlbGVjdG9yKVswXT09bi50YXJnZXRbMF0sYT1pLmNsb3Nlc3QoZXQpLmNoaWxkcmVuKFgpLHM9cihuLmVsZW1lbnRbMF0saVswXSk7bi5fZXZlbnRPcmlnaW49dCwhbi5wb3B1cC52aXNpYmxlKCl8fCgzPT09dC53aGljaHx8IW8pJiZvfHwoIW4ub3B0aW9ucy5jbG9zZU9uQ2xpY2t8fGh8fChMfHxPKSYmdC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlIGluIGF0fHxhWzBdfHwhcykmJnN8fChzPyh0aGlzLnVuYmluZChJLHRoaXMuX2Nsb3NlVGltZW91dFByb3h5KSxuLmJpbmQoSSxuLl9jbG9zZVRpbWVvdXRQcm94eSkpOm4uY2xvc2UoKSlcbn0sX3dpcmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49ZS50YXJnZXQ7ZS5fc2hvd1Byb3h5PW0oZS5fc2hvd0hhbmRsZXIsZSksZS5fY2xvc2VQcm94eT1tKGUuX2Nsb3NlSGFuZGxlcixlKSxlLl9jbG9zZVRpbWVvdXRQcm94eT1tKGUuY2xvc2UsZSksblswXSYmKGMuc3VwcG9ydC5tb2JpbGVPUyYmXCJjb250ZXh0bWVudVwiPT10LnNob3dPbj8oZS51c2VyRXZlbnRzPW5ldyBjLlVzZXJFdmVudHMobix7ZmlsdGVyOnQuZmlsdGVyLGFsbG93U2VsZWN0aW9uOiExfSksbi5vbih0LnNob3dPbitrLCExKSxlLnVzZXJFdmVudHMuYmluZChcImhvbGRcIixlLl9zaG93UHJveHkpKTp0LmZpbHRlcj9uLm9uKHQuc2hvd09uK2ssdC5maWx0ZXIsZS5fc2hvd1Byb3h5KTpuLm9uKHQuc2hvd09uK2ssZS5fc2hvd1Byb3h5KSl9LF90cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWUoaS5wb3B1cC5vcHRpb25zLmFuY2hvcilbMF0sbz1pLl9ldmVudE9yaWdpbjtyZXR1cm4gaS5fZXZlbnRPcmlnaW49dCxpLnRyaWdnZXIobi50eXBlLGcoe3R5cGU6bi50eXBlLGl0ZW06bi5pdGVtfHx0aGlzLmVsZW1lbnRbMF0sdGFyZ2V0OnJ9LG8/e2V2ZW50Om99Ont9KSl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fdHJpZ2dlclByb3h5PW0oZS5fdHJpZ2dlckV2ZW50LGUpLGUucG9wdXA9ZS5lbGVtZW50LmFkZENsYXNzKFwiay1jb250ZXh0LW1lbnVcIikua2VuZG9Qb3B1cCh7YW5jaG9yOmUudGFyZ2V0fHxcImJvZHlcIixjb3B5QW5jaG9yU3R5bGVzOmUub3B0aW9ucy5jb3B5QW5jaG9yU3R5bGVzLGNvbGxpc2lvbjplLm9wdGlvbnMucG9wdXBDb2xsaXNpb258fFwiZml0XCIsYW5pbWF0aW9uOmUub3B0aW9ucy5hbmltYXRpb24sYWN0aXZhdGU6ZS5fdHJpZ2dlclByb3h5LGRlYWN0aXZhdGU6ZS5fdHJpZ2dlclByb3h5fSkuZGF0YShcImtlbmRvUG9wdXBcIiksZS5fdGFyZ2V0Q2hpbGQ9cihlLnRhcmdldFswXSxlLnBvcHVwLmVsZW1lbnRbMF0pfX0pLGQucGx1Z2luKGN0KSxkLnBsdWdpbihsKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQpe3JldHVybiBlLnRyaW0odCkucmVwbGFjZSgvJm5ic3A7L2dpLFwiXCIpfWZ1bmN0aW9uIGkoZSx0KXt2YXIgbixpLHIsbz17fTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKylyPWVbbl0sb1tyW3RdXT1yO3JldHVybiBvfWZ1bmN0aW9uIHIoZSl7dmFyIHQsbj1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uY29sdW1ucz9uPW4uY29uY2F0KHIoZVt0XS5jb2x1bW5zKSk6bi5wdXNoKGVbdF0pO3JldHVybiBufXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkscz1lLnByb3h5LGw9ZS5leHRlbmQsYz1lLmdyZXAsZD1lLm1hcCx1PWUuaW5BcnJheSxoPVwiay1zdGF0ZS1zZWxlY3RlZFwiLHA9XCJhc2NcIixmPVwiZGVzY1wiLGc9XCJjaGFuZ2VcIixtPVwiaW5pdFwiLHY9XCJzZWxlY3RcIixfPVwia2VuZG9Qb3B1cFwiLHk9XCJrZW5kb0ZpbHRlck1lbnVcIix3PVwia2VuZG9NZW51XCIsYj1cIi5rZW5kb0NvbHVtbk1lbnVcIixrPWEuV2lkZ2V0LHg9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyPXRoaXM7ay5mbi5pbml0LmNhbGwocix0LG4pLHQ9ci5lbGVtZW50LG49ci5vcHRpb25zLHIub3duZXI9bi5vd25lcixyLmRhdGFTb3VyY2U9bi5kYXRhU291cmNlLHIuZmllbGQ9dC5hdHRyKG8uYXR0cihcImZpZWxkXCIpKSxyLnRpdGxlPXQuYXR0cihvLmF0dHIoXCJ0aXRsZVwiKSksaT10LmZpbmQoXCIuay1oZWFkZXItY29sdW1uLW1lbnVcIiksaVswXXx8KGk9dC5hZGRDbGFzcyhcImstd2l0aC1pY29uXCIpLnByZXBlbmQoJzxhIGNsYXNzPVwiay1oZWFkZXItY29sdW1uLW1lbnVcIiBocmVmPVwiI1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvd2hlYWQtc1wiLz48L2E+JykuZmluZChcIi5rLWhlYWRlci1jb2x1bW4tbWVudVwiKSksci5saW5rPWkuYXR0cihcInRhYmluZGV4XCIsLTEpLm9uKFwiY2xpY2tcIitiLHMoci5fY2xpY2sscikpLHIud3JhcHBlcj1lKCc8ZGl2IGNsYXNzPVwiay1jb2x1bW4tbWVudVwiLz4nKX0sX2luaXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucGFuZT1lLm9wdGlvbnMucGFuZSxlLnBhbmUmJihlLl9pc01vYmlsZT0hMCksZS5faXNNb2JpbGU/ZS5fY3JlYXRlTW9iaWxlTWVudSgpOmUuX2NyZWF0ZU1lbnUoKSxlLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGUuX3NvcnQoKSxlLl9jb2x1bW5zKCksZS5fZmlsdGVyKCksZS5fbG9ja0NvbHVtbnMoKSxlLnRyaWdnZXIobSx7ZmllbGQ6ZS5maWVsZCxjb250YWluZXI6ZS53cmFwcGVyfSl9LGV2ZW50czpbbV0sb3B0aW9uczp7bmFtZTpcIkNvbHVtbk1lbnVcIixtZXNzYWdlczp7c29ydEFzY2VuZGluZzpcIlNvcnQgQXNjZW5kaW5nXCIsc29ydERlc2NlbmRpbmc6XCJTb3J0IERlc2NlbmRpbmdcIixmaWx0ZXI6XCJGaWx0ZXJcIixjb2x1bW5zOlwiQ29sdW1uc1wiLGRvbmU6XCJEb25lXCIsc2V0dGluZ3M6XCJDb2x1bW4gU2V0dGluZ3NcIixsb2NrOlwiTG9ja1wiLHVubG9jazpcIlVubG9ja1wifSxmaWx0ZXI6XCJcIixjb2x1bW5zOiEwLHNvcnRhYmxlOiEwLGZpbHRlcmFibGU6ITAsYW5pbWF0aW9uczp7bGVmdDpcInNsaWRlXCJ9fSxfY3JlYXRlTWVudTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnM7ZS53cmFwcGVyLmh0bWwoby50ZW1wbGF0ZShDKSh7bnM6by5ucyxtZXNzYWdlczp0Lm1lc3NhZ2VzLHNvcnRhYmxlOnQuc29ydGFibGUsZmlsdGVyYWJsZTp0LmZpbHRlcmFibGUsY29sdW1uczplLl9vd25lckNvbHVtbnMoKSxzaG93Q29sdW1uczp0LmNvbHVtbnMsbG9ja2VkQ29sdW1uczp0LmxvY2tlZENvbHVtbnN9KSksZS5wb3B1cD1lLndyYXBwZXJbX10oe2FuY2hvcjplLmxpbmssb3BlbjpzKGUuX29wZW4sZSksYWN0aXZhdGU6cyhlLl9hY3RpdmF0ZSxlKSxjbG9zZTpmdW5jdGlvbigpe2Uub3B0aW9ucy5jbG9zZUNhbGxiYWNrJiZlLm9wdGlvbnMuY2xvc2VDYWxsYmFjayhlLmVsZW1lbnQpfX0pLmRhdGEoXyksZS5tZW51PWUud3JhcHBlci5jaGlsZHJlbigpW3ddKHtvcmllbnRhdGlvbjpcInZlcnRpY2FsXCIsY2xvc2VPbkNsaWNrOiExfSkuZGF0YSh3KX0sX2NyZWF0ZU1vYmlsZU1lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLG49by50ZW1wbGF0ZShTKSh7bnM6by5ucyxmaWVsZDplLmZpZWxkLHRpdGxlOmUudGl0bGV8fGUuZmllbGQsbWVzc2FnZXM6dC5tZXNzYWdlcyxzb3J0YWJsZTp0LnNvcnRhYmxlLGZpbHRlcmFibGU6dC5maWx0ZXJhYmxlLGNvbHVtbnM6ZS5fb3duZXJDb2x1bW5zKCksc2hvd0NvbHVtbnM6dC5jb2x1bW5zLGxvY2tlZENvbHVtbnM6dC5sb2NrZWRDb2x1bW5zfSk7ZS52aWV3PWUucGFuZS5hcHBlbmQobiksZS53cmFwcGVyPWUudmlldy5lbGVtZW50LmZpbmQoXCIuay1jb2x1bW4tbWVudVwiKSxlLm1lbnU9bmV3IFQoZS53cmFwcGVyLmNoaWxkcmVuKCkse3BhbmU6ZS5wYW5lfSksZS52aWV3LmVsZW1lbnQub24oXCJjbGlja1wiLFwiLmstZG9uZVwiLGZ1bmN0aW9uKHQpe2UuY2xvc2UoKSx0LnByZXZlbnREZWZhdWx0KCl9KSxlLm9wdGlvbnMubG9ja2VkQ29sdW1ucyYmZS52aWV3LmJpbmQoXCJzaG93XCIsZnVuY3Rpb24oKXtlLl91cGRhdGVMb2NrZWRDb2x1bW5zKCl9KX0sX2FuZ3VsYXJJdGVtczpmdW5jdGlvbih0KXt2YXIgbj10aGlzO24uYW5ndWxhcih0LGZ1bmN0aW9uKCl7dmFyIHQ9bi53cmFwcGVyLmZpbmQoXCIuay1jb2x1bW5zLWl0ZW0gaW5wdXRbXCIrby5hdHRyKFwiZmllbGRcIikrXCJdXCIpLm1hcChmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmNsb3Nlc3QoXCJsaVwiKX0pLGk9ZChuLl9vd25lckNvbHVtbnMoKSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmUuX29yaWdpbmFsT2JqZWN0fX0pO3JldHVybntlbGVtZW50czp0LGRhdGE6aX19KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fYW5ndWxhckl0ZW1zKFwiY2xlYW51cFwiKSxrLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmZpbHRlck1lbnUmJmUuZmlsdGVyTWVudS5kZXN0cm95KCksZS5fcmVmcmVzaEhhbmRsZXImJmUuZGF0YVNvdXJjZS51bmJpbmQoZyxlLl9yZWZyZXNoSGFuZGxlciksZS5vcHRpb25zLmNvbHVtbnMmJmUub3duZXImJmUuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciYmKGUub3duZXIudW5iaW5kKFwiY29sdW1uU2hvd1wiLGUuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciksZS5vd25lci51bmJpbmQoXCJjb2x1bW5IaWRlXCIsZS5fdXBkYXRlQ29sdW1uc01lbnVIYW5kbGVyKSksZS5tZW51JiYoZS5tZW51LmVsZW1lbnQub2ZmKGIpLGUubWVudS5kZXN0cm95KCkpLGUud3JhcHBlci5vZmYoYiksZS5wb3B1cCYmZS5wb3B1cC5kZXN0cm95KCksZS52aWV3JiZlLnZpZXcucHVyZ2UoKSxlLmxpbmsub2ZmKGIpLGUub3duZXI9bnVsbCxlLndyYXBwZXI9bnVsbCxlLmVsZW1lbnQ9bnVsbH0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm1lbnUuY2xvc2UoKSx0aGlzLnBvcHVwJiYodGhpcy5wb3B1cC5jbG9zZSgpLHRoaXMucG9wdXAuZWxlbWVudC5vZmYoXCJrZXlkb3duXCIrYikpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIHQ9dGhpcy5vcHRpb25zO3QuZmlsdGVyJiZ0aGlzLmVsZW1lbnQuaXMoIXQuZmlsdGVyKXx8KHRoaXMucG9wdXB8fHRoaXMucGFuZXx8dGhpcy5faW5pdCgpLHRoaXMuX2lzTW9iaWxlP3RoaXMucGFuZS5uYXZpZ2F0ZSh0aGlzLnZpZXcsdGhpcy5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCk6dGhpcy5wb3B1cC50b2dnbGUoKSl9LF9vcGVuOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKFwiLmstY29sdW1uLW1lbnVcIikubm90KHQud3JhcHBlcikuZWFjaChmdW5jdGlvbigpe2UodGhpcykuZGF0YShfKS5jbG9zZSgpfSksdC5wb3B1cC5lbGVtZW50Lm9uKFwia2V5ZG93blwiK2IsZnVuY3Rpb24oZSl7ZS5rZXlDb2RlPT1vLmtleXMuRVNDJiZ0LmNsb3NlKCl9KSx0Lm9wdGlvbnMubG9ja2VkQ29sdW1ucyYmdC5fdXBkYXRlTG9ja2VkQ29sdW1ucygpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLm1lbnUuZWxlbWVudC5mb2N1cygpfSxfb3duZXJDb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIGU9cih0aGlzLm93bmVyLmNvbHVtbnMpLHQ9YyhlLGZ1bmN0aW9uKGUpe3ZhciB0PSEwLGk9bihlLnRpdGxlfHxcIlwiKTtyZXR1cm4oZS5tZW51PT09ITF8fCFlLmZpZWxkJiYhaS5sZW5ndGgpJiYodD0hMSksdH0pO3JldHVybiBkKHQsZnVuY3Rpb24odCl7cmV0dXJue29yaWdpbmFsRmllbGQ6dC5maWVsZCxmaWVsZDp0LmZpZWxkfHx0LnRpdGxlLHRpdGxlOnQudGl0bGV8fHQuZmllbGQsaGlkZGVuOnQuaGlkZGVuLGluZGV4OnUodCxlKSxsb2NrZWQ6ISF0LmxvY2tlZCxfb3JpZ2luYWxPYmplY3Q6dH19KX0sX3NvcnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5zb3J0YWJsZSYmKHQucmVmcmVzaCgpLHQuX3JlZnJlc2hIYW5kbGVyPXModC5yZWZyZXNoLHQpLHQuZGF0YVNvdXJjZS5iaW5kKGcsdC5fcmVmcmVzaEhhbmRsZXIpLHQubWVudS5iaW5kKHYsZnVuY3Rpb24obil7dmFyIGkscj1lKG4uaXRlbSk7ci5oYXNDbGFzcyhcImstc29ydC1hc2NcIik/aT1wOnIuaGFzQ2xhc3MoXCJrLXNvcnQtZGVzY1wiKSYmKGk9ZiksaSYmKHIucGFyZW50KCkuZmluZChcIi5rLXNvcnQtXCIrKGk9PXA/ZjpwKSkucmVtb3ZlQ2xhc3MoaCksdC5fc29ydERhdGFTb3VyY2UocixpKSx0LmNsb3NlKCkpfSkpfSxfc29ydERhdGFTb3VyY2U6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLG89dGhpcyxhPW8ub3B0aW9ucy5zb3J0YWJsZSxzPW51bGw9PT1hLmNvbXBhcmU/dDphLmNvbXBhcmUsbD1vLmRhdGFTb3VyY2UsYz1sLnNvcnQoKXx8W107aWYoZS5oYXNDbGFzcyhoKSYmYSYmYS5hbGxvd1Vuc29ydCE9PSExPyhlLnJlbW92ZUNsYXNzKGgpLG49dCk6ZS5hZGRDbGFzcyhoKSxhPT09ITB8fFwic2luZ2xlXCI9PT1hLm1vZGUpYz1be2ZpZWxkOm8uZmllbGQsZGlyOm4sY29tcGFyZTpzfV07ZWxzZXtmb3IoaT0wLHI9Yy5sZW5ndGg7cj5pO2krKylpZihjW2ldLmZpZWxkPT09by5maWVsZCl7Yy5zcGxpY2UoaSwxKTticmVha31jLnB1c2goe2ZpZWxkOm8uZmllbGQsZGlyOm4sY29tcGFyZTpzfSl9bC5zb3J0KGMpfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLmNvbHVtbnMmJih0Ll91cGRhdGVDb2x1bW5zTWVudSgpLHQuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlcj1zKHQuX3VwZGF0ZUNvbHVtbnNNZW51LHQpLHQub3duZXIuYmluZChbXCJjb2x1bW5IaWRlXCIsXCJjb2x1bW5TaG93XCJdLHQuX3VwZGF0ZUNvbHVtbnNNZW51SGFuZGxlciksdC5tZW51LmJpbmQodixmdW5jdGlvbihuKXt2YXIgaSxhLHMsbD1lKG4uaXRlbSksZD1yKHQub3duZXIuY29sdW1ucyk7dC5faXNNb2JpbGUmJm4ucHJldmVudERlZmF1bHQoKSxsLnBhcmVudCgpLmNsb3Nlc3QoXCJsaS5rLWNvbHVtbnMtaXRlbVwiKVswXSYmKGk9bC5maW5kKFwiOmNoZWNrYm94XCIpLGkuYXR0cihcImRpc2FibGVkXCIpfHwocz1pLmF0dHIoby5hdHRyKFwiZmllbGRcIikpLGE9YyhkLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT1zfHxlLnRpdGxlPT1zfSlbMF0sYS5oaWRkZW49PT0hMD90Lm93bmVyLnNob3dDb2x1bW4oYSk6dC5vd25lci5oaWRlQ29sdW1uKGEpKSl9KSl9LF91cGRhdGVDb2x1bW5zTWVudTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsYSxzPW8uYXR0cihcImZpZWxkXCIpLGw9by5hdHRyKFwibG9ja2VkXCIpLGg9Yyh0aGlzLl9vd25lckNvbHVtbnMoKSxmdW5jdGlvbihlKXtyZXR1cm4hZS5oaWRkZW59KSxwPWMoaCxmdW5jdGlvbihlKXtyZXR1cm4gZS5vcmlnaW5hbEZpZWxkfSksZj1jKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkPT09ITB9KS5sZW5ndGgsZz1jKHAsZnVuY3Rpb24oZSl7cmV0dXJuIGUubG9ja2VkIT09ITB9KS5sZW5ndGg7Zm9yKGg9ZChoLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkfSksYT10aGlzLndyYXBwZXIuZmluZChcIi5rLWNvbHVtbnMtaXRlbSBpbnB1dFtcIitzK1wiXVwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhMSkucHJvcChcImNoZWNrZWRcIiwhMSksZT0wLHQ9YS5sZW5ndGg7dD5lO2UrKyluPWEuZXEoZSkscj1cInRydWVcIj09PW4uYXR0cihsKSxpPSExLHUobi5hdHRyKHMpLGgpPi0xJiYoaT0hMCxuLnByb3AoXCJjaGVja2VkXCIsaSkpLGkmJigxPT1mJiZyJiZuLnByb3AoXCJkaXNhYmxlZFwiLCEwKSwxIT1nfHxyfHxuLnByb3AoXCJkaXNhYmxlZFwiLCEwKSl9LF91cGRhdGVDb2x1bW5zTG9ja2VkU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixhPW8uYXR0cihcImZpZWxkXCIpLHM9by5hdHRyKFwibG9ja2VkXCIpLGw9aSh0aGlzLl9vd25lckNvbHVtbnMoKSxcImZpZWxkXCIpLGM9dGhpcy53cmFwcGVyLmZpbmQoXCIuay1jb2x1bW5zLWl0ZW0gaW5wdXRbdHlwZT1jaGVja2JveF1cIik7Zm9yKGU9MCx0PWMubGVuZ3RoO3Q+ZTtlKyspbj1jLmVxKGUpLHI9bFtuLmF0dHIoYSldLHImJm4uYXR0cihzLHIubG9ja2VkKTt0aGlzLl91cGRhdGVDb2x1bW5zTWVudSgpfSxfZmlsdGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucztuLmZpbHRlcmFibGUhPT0hMSYmKHQuZmlsdGVyTWVudT10LndyYXBwZXIuZmluZChcIi5rLWZpbHRlcmFibGVcIilbeV0obCghMCx7fSx7YXBwZW5kVG9FbGVtZW50OiEwLGRhdGFTb3VyY2U6bi5kYXRhU291cmNlLHZhbHVlczpuLnZhbHVlcyxmaWVsZDp0LmZpZWxkfSxuLmZpbHRlcmFibGUpKS5kYXRhKHkpLHQuX2lzTW9iaWxlJiZ0Lm1lbnUuYmluZCh2LGZ1bmN0aW9uKG4pe3ZhciBpPWUobi5pdGVtKTtpLmhhc0NsYXNzKFwiay1maWx0ZXItaXRlbVwiKSYmdC5wYW5lLm5hdmlnYXRlKHQuZmlsdGVyTWVudS52aWV3LHQub3B0aW9ucy5hbmltYXRpb25zLmxlZnQpfSkpfSxfbG9ja0NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QubWVudS5iaW5kKHYsZnVuY3Rpb24obil7dmFyIGk9ZShuLml0ZW0pO2kuaGFzQ2xhc3MoXCJrLWxvY2tcIik/KHQub3duZXIubG9ja0NvbHVtbih0LmZpZWxkKSx0LmNsb3NlKCkpOmkuaGFzQ2xhc3MoXCJrLXVubG9ja1wiKSYmKHQub3duZXIudW5sb2NrQ29sdW1uKHQuZmllbGQpLHQuY2xvc2UoKSl9KX0sX3VwZGF0ZUxvY2tlZENvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuZmllbGQsbz10aGlzLm93bmVyLmNvbHVtbnMsYT1jKG8sZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmllbGQ9PXJ8fGUudGl0bGU9PXJ9KVswXTthJiYoZT1hLmxvY2tlZD09PSEwLHQ9YyhvLGZ1bmN0aW9uKHQpe3JldHVybiF0LmhpZGRlbiYmKHQubG9ja2VkJiZlfHwhdC5sb2NrZWQmJiFlKX0pLmxlbmd0aCxuPXRoaXMud3JhcHBlci5maW5kKFwiLmstbG9ja1wiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksaT10aGlzLndyYXBwZXIuZmluZChcIi5rLXVubG9ja1wiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiksKGV8fDE9PXQpJiZuLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSxlJiYxIT10fHxpLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSx0aGlzLl91cGRhdGVDb2x1bW5zTG9ja2VkU3RhdGUoKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLHI9aS5vcHRpb25zLmRhdGFTb3VyY2Uuc29ydCgpfHxbXSxvPWkuZmllbGQ7Zm9yKGkud3JhcHBlci5maW5kKFwiLmstc29ydC1hc2MsIC5rLXNvcnQtZGVzY1wiKS5yZW1vdmVDbGFzcyhoKSx0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XSxvPT1lLmZpZWxkJiZpLndyYXBwZXIuZmluZChcIi5rLXNvcnQtXCIrZS5kaXIpLmFkZENsYXNzKGgpfX0pLEM9Jzx1bD4jaWYoc29ydGFibGUpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1zb3J0LWFzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktc29ydC1hc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0QXNjZW5kaW5nfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtZGVzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktc29ydC1kZXNjXCI+PC9zcGFuPiR7bWVzc2FnZXMuc29ydERlc2NlbmRpbmd9PC9zcGFuPjwvbGk+I2lmKHNob3dDb2x1bW5zIHx8IGZpbHRlcmFibGUpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKHNob3dDb2x1bW5zKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstY29sdW1ucy1pdGVtXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1jb2x1bW5zXCI+PC9zcGFuPiR7bWVzc2FnZXMuY29sdW1uc308L3NwYW4+PHVsPiNmb3IgKHZhciBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHsjPGxpPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkYXRhLSM9bnMjZmllbGQ9XCIjPWNvbHVtbnNbaWR4XS5maWVsZC5yZXBsYWNlKC9cIi9nLFwiJlxcXFwjMzQ7XCIpI1wiIGRhdGEtIz1ucyNpbmRleD1cIiM9Y29sdW1uc1tpZHhdLmluZGV4I1wiIGRhdGEtIz1ucyNsb2NrZWQ9XCIjPWNvbHVtbnNbaWR4XS5sb2NrZWQjXCIvPiM9Y29sdW1uc1tpZHhdLnRpdGxlIzwvbGk+I30jPC91bD48L2xpPiNpZihmaWx0ZXJhYmxlIHx8IGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKGZpbHRlcmFibGUpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1maWx0ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWZpbHRlclwiPjwvc3Bhbj4ke21lc3NhZ2VzLmZpbHRlcn08L3NwYW4+PHVsPjxsaT48ZGl2IGNsYXNzPVwiay1maWx0ZXJhYmxlXCI+PC9kaXY+PC9saT48L3VsPjwvbGk+I2lmKGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLXNlcGFyYXRvclwiPjwvbGk+I30jI30jI2lmKGxvY2tlZENvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLWl0ZW0gay1sb2NrXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1sb2NrXCI+PC9zcGFuPiR7bWVzc2FnZXMubG9ja308L3NwYW4+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW0gay11bmxvY2tcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLXVubG9ja1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnVubG9ja308L3NwYW4+PC9saT4jfSM8L3VsPicsUz0nPGRpdiBkYXRhLSM9bnMjcm9sZT1cInZpZXdcIiBkYXRhLSM9bnMjaW5pdC13aWRnZXRzPVwiZmFsc2VcIiBjbGFzcz1cImstZ3JpZC1jb2x1bW4tbWVudVwiPjxkaXYgZGF0YS0jPW5zI3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+JHttZXNzYWdlcy5zZXR0aW5nc308YnV0dG9uIGNsYXNzPVwiay1idXR0b24gay1kb25lXCI+Iz1tZXNzYWdlcy5kb25lIzwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWNvbHVtbi1tZW51IGstbW9iaWxlLWxpc3RcIj48dWw+PGxpPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+JHt0aXRsZX08L3NwYW4+PHVsPiNpZihzb3J0YWJsZSl7IzxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtYXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWFzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnRBc2NlbmRpbmd9PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1pdGVtIGstc29ydC1kZXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstaS1zb3J0LWRlc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0RGVzY2VuZGluZ308L3NwYW4+PC9saT4jfSMjaWYobG9ja2VkQ29sdW1ucyl7IzxsaSBjbGFzcz1cImstaXRlbSBrLWxvY2tcIj48c3BhbiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1zcHJpdGUgay1pLWxvY2tcIj48L3NwYW4+JHttZXNzYWdlcy5sb2NrfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXVubG9ja1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLXNwcml0ZSBrLWktdW5sb2NrXCI+PC9zcGFuPiR7bWVzc2FnZXMudW5sb2NrfTwvc3Bhbj48L2xpPiN9IyNpZihmaWx0ZXJhYmxlKXsjPGxpIGNsYXNzPVwiay1pdGVtIGstZmlsdGVyLWl0ZW1cIj48c3BhbiBjbGFzcz1cImstbGluayBrLWZpbHRlcmFibGVcIj48c3BhbiBjbGFzcz1cImstc3ByaXRlIGstZmlsdGVyXCI+PC9zcGFuPiR7bWVzc2FnZXMuZmlsdGVyfTwvc3Bhbj48L2xpPiN9IzwvdWw+PC9saT4jaWYoc2hvd0NvbHVtbnMpeyM8bGkgY2xhc3M9XCJrLWNvbHVtbnMtaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+JHttZXNzYWdlcy5jb2x1bW5zfTwvc3Bhbj48dWw+I2ZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykgeyM8bGkgY2xhc3M9XCJrLWl0ZW1cIj48bGFiZWwgY2xhc3M9XCJrLWxhYmVsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiay1jaGVja1wiIGRhdGEtIz1ucyNmaWVsZD1cIiM9Y29sdW1uc1tpZHhdLmZpZWxkLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCIgZGF0YS0jPW5zI2luZGV4PVwiIz1jb2x1bW5zW2lkeF0uaW5kZXgjXCIgZGF0YS0jPW5zI2xvY2tlZD1cIiM9Y29sdW1uc1tpZHhdLmxvY2tlZCNcIi8+Iz1jb2x1bW5zW2lkeF0udGl0bGUjPC9sYWJlbD48L2xpPiN9IzwvdWw+PC9saT4jfSM8L3VsPjwvZGl2PjwvZGl2PicsVD1rLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2suZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiK2IsXCJsaTpub3QoLmstc2VwYXJhdG9yKTpub3QoLmstc3RhdGUtZGlzYWJsZWQpXCIsXCJfY2xpY2tcIil9LGV2ZW50czpbdl0sX2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLnRyaWdnZXIodix7aXRlbTplLmN1cnJlbnRUYXJnZXR9KX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucGFuZS5uYXZpZ2F0ZShcIlwiKX0sZGVzdHJveTpmdW5jdGlvbigpe2suZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vZmYoYil9fSk7YS5wbHVnaW4oeCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuV2lkZ2V0LG89XCJkaXJcIixhPVwiYXNjXCIscz1cInNpbmdsZVwiLGw9XCJmaWVsZFwiLGM9XCJkZXNjXCIsZD1cIi5rZW5kb0NvbHVtblNvcnRlclwiLHU9XCIuay1saW5rXCIsaD1cImFyaWEtc29ydFwiLHA9ZS5wcm94eSxmPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO3IuZm4uaW5pdC5jYWxsKGksZSx0KSxpLl9yZWZyZXNoSGFuZGxlcj1wKGkucmVmcmVzaCxpKSxpLmRhdGFTb3VyY2U9aS5vcHRpb25zLmRhdGFTb3VyY2UuYmluZChcImNoYW5nZVwiLGkuX3JlZnJlc2hIYW5kbGVyKSxuPWkuZWxlbWVudC5maW5kKHUpLG5bMF18fChuPWkuZWxlbWVudC53cmFwSW5uZXIoJzxhIGNsYXNzPVwiay1saW5rXCIgaHJlZj1cIiNcIi8+JykuZmluZCh1KSksaS5saW5rPW4saS5lbGVtZW50Lm9uKFwiY2xpY2tcIitkLHAoaS5fY2xpY2ssaSkpfSxvcHRpb25zOntuYW1lOlwiQ29sdW1uU29ydGVyXCIsbW9kZTpzLGFsbG93VW5zb3J0OiEwLGNvbXBhcmU6bnVsbCxmaWx0ZXI6XCJcIn0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ci5mbi5kZXN0cm95LmNhbGwoZSksZS5lbGVtZW50Lm9mZihkKSxlLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsZS5fcmVmcmVzaEhhbmRsZXIpLGUuX3JlZnJlc2hIYW5kbGVyPWUuZWxlbWVudD1lLmxpbms9ZS5kYXRhU291cmNlPW51bGx9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdCxpLHIscyxkPXRoaXMsdT1kLmRhdGFTb3VyY2Uuc29ydCgpfHxbXSxwPWQuZWxlbWVudCxmPXAuYXR0cihuLmF0dHIobCkpO2ZvcihwLnJlbW92ZUF0dHIobi5hdHRyKG8pKSxwLnJlbW92ZUF0dHIoaCksdD0wLGk9dS5sZW5ndGg7aT50O3QrKylyPXVbdF0sZj09ci5maWVsZCYmcC5hdHRyKG4uYXR0cihvKSxyLmRpcik7cz1wLmF0dHIobi5hdHRyKG8pKSxwLmZpbmQoXCIuay1pLWFycm93LW4sLmstaS1hcnJvdy1zXCIpLnJlbW92ZSgpLHM9PT1hPyhlKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctblwiIC8+JykuYXBwZW5kVG8oZC5saW5rKSxwLmF0dHIoaCxcImFzY2VuZGluZ1wiKSk6cz09PWMmJihlKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctc1wiIC8+JykuYXBwZW5kVG8oZC5saW5rKSxwLmF0dHIoaCxcImRlc2NlbmRpbmdcIikpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIGkscixkPXRoaXMsdT1kLmVsZW1lbnQsaD11LmF0dHIobi5hdHRyKGwpKSxwPXUuYXR0cihuLmF0dHIobykpLGY9ZC5vcHRpb25zLGc9bnVsbD09PWQub3B0aW9ucy5jb21wYXJlP3Q6ZC5vcHRpb25zLmNvbXBhcmUsbT1kLmRhdGFTb3VyY2Uuc29ydCgpfHxbXTtpZihlLnByZXZlbnREZWZhdWx0KCksIWYuZmlsdGVyfHx1LmlzKGYuZmlsdGVyKSl7aWYocD1wPT09YT9jOnA9PT1jJiZmLmFsbG93VW5zb3J0P3Q6YSxmLm1vZGU9PT1zKW09W3tmaWVsZDpoLGRpcjpwLGNvbXBhcmU6Z31dO2Vsc2UgaWYoXCJtdWx0aXBsZVwiPT09Zi5tb2RlKXtmb3IoaT0wLHI9bS5sZW5ndGg7cj5pO2krKylpZihtW2ldLmZpZWxkPT09aCl7bS5zcGxpY2UoaSwxKTticmVha31tLnB1c2goe2ZpZWxkOmgsZGlyOnAsY29tcGFyZTpnfSl9dGhpcy5kYXRhU291cmNlLnNvcnQobSl9fX0pO2kucGx1Z2luKGYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQ9bnVsbCE9dD90OlwiXCIsdC50eXBlfHxlLnR5cGUodCl8fFwic3RyaW5nXCJ9ZnVuY3Rpb24gaSh0KXt0LmZpbmQoXCI6aW5wdXQ6bm90KDpidXR0b24sIFtcIitzLmF0dHIoXCJyb2xlXCIpK1wiPXVwbG9hZF0sIFtcIitzLmF0dHIoXCJza2lwXCIpK1wiXSwgW3R5cGU9ZmlsZV0pLCBzZWxlY3RcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PXMuYXR0cihcImJpbmRcIiksbj10aGlzLmdldEF0dHJpYnV0ZSh0KXx8XCJcIixpPVwiY2hlY2tib3hcIj09PXRoaXMudHlwZXx8XCJyYWRpb1wiPT09dGhpcy50eXBlP1wiY2hlY2tlZDpcIjpcInZhbHVlOlwiLHI9dGhpcy5uYW1lOy0xPT09bi5pbmRleE9mKGkpJiZyJiYobis9KG4ubGVuZ3RoP1wiLFwiOlwiXCIpK2krcixlKHRoaXMpLmF0dHIodCxuKSl9KX1mdW5jdGlvbiByKGUpe3ZhciB0LGkscj0oZS5tb2RlbC5maWVsZHN8fGUubW9kZWwpW2UuZmllbGRdLG89bihyKSxhPXI/ci52YWxpZGF0aW9uOnt9LGw9cy5hdHRyKFwidHlwZVwiKSxjPXMuYXR0cihcImJpbmRcIiksZD17bmFtZTplLmZpZWxkfTtmb3IodCBpbiBhKWk9YVt0XSxmKHQsXyk+PTA/ZFtsXT10OmgoaSl8fChkW3RdPXAoaSk/aS52YWx1ZXx8dDppKSxkW3MuYXR0cih0K1wiLW1zZ1wiKV09aS5tZXNzYWdlO3JldHVybiBmKG8sXyk+PTAmJihkW2xdPW8pLGRbY109KFwiYm9vbGVhblwiPT09bz9cImNoZWNrZWQ6XCI6XCJ2YWx1ZTpcIikrZS5maWVsZCxkfWZ1bmN0aW9uIG8oZSl7dmFyIHQsbixpLHIsbyxhO2lmKGUmJmUubGVuZ3RoKWZvcihhPVtdLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT1lW3RdLG89aS50ZXh0fHxpLnZhbHVlfHxpLHI9bnVsbD09aS52YWx1ZT9pLnRleHR8fGk6aS52YWx1ZSxhW3RdPXt0ZXh0Om8sdmFsdWU6cn07cmV0dXJuIGF9ZnVuY3Rpb24gYShlLHQpe3ZhciBuLGkscj1lP2UudmFsaWRhdGlvbnx8e306e307Zm9yKG4gaW4gcilpPXJbbl0scChpKSYmaS52YWx1ZSYmKGk9aS52YWx1ZSksaChpKSYmKHRbbl09aSl9dmFyIHM9d2luZG93LmtlbmRvLGw9cy51aSxjPWwuV2lkZ2V0LGQ9ZS5leHRlbmQsdT1zLnN1cHBvcnQuYnJvd3Nlci5tc2llJiY5PnMuc3VwcG9ydC5icm93c2VyLnZlcnNpb24saD1zLmlzRnVuY3Rpb24scD1lLmlzUGxhaW5PYmplY3QsZj1lLmluQXJyYXksZz0vKFwifFxcJXwnfFxcW3xcXF18XFwkfFxcLnxcXCx8XFw6fFxcO3xcXCt8XFwqfFxcJnxcXCF8XFwjfFxcKHxcXCl8PHw+fFxcPXxcXD98XFxAfFxcXnxcXHt8XFx9fFxcfnxcXC98XFx8fGApL2csbT0nPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstdG9vbHRpcCBrLXRvb2x0aXAtdmFsaWRhdGlvblwiIHN0eWxlPVwibWFyZ2luOjAuNWVtXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay13YXJuaW5nXCI+IDwvc3Bhbj4jPW1lc3NhZ2UjPGRpdiBjbGFzcz1cImstY2FsbG91dCBrLWNhbGxvdXQtblwiPjwvZGl2PjwvZGl2Picsdj1cImNoYW5nZVwiLF89W1widXJsXCIsXCJlbWFpbFwiLFwibnVtYmVyXCIsXCJkYXRlXCIsXCJib29sZWFuXCJdLHk9e251bWJlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIvPicpLmF0dHIoaSkuYXBwZW5kVG8odCkua2VuZG9OdW1lcmljVGV4dEJveCh7Zm9ybWF0Om4uZm9ybWF0fSksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxkYXRlOmZ1bmN0aW9uKHQsbil7dmFyIGk9cihuKSxvPW4uZm9ybWF0O28mJihvPXMuX2V4dHJhY3RGb3JtYXQobykpLGlbcy5hdHRyKFwiZm9ybWF0XCIpXT1vLGUoJzxpbnB1dCB0eXBlPVwidGV4dFwiLz4nKS5hdHRyKGkpLmFwcGVuZFRvKHQpLmtlbmRvRGF0ZVBpY2tlcih7Zm9ybWF0Om4uZm9ybWF0fSksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSxzdHJpbmc6ZnVuY3Rpb24odCxuKXt2YXIgaT1yKG4pO2UoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIi8+JykuYXR0cihpKS5hcHBlbmRUbyh0KX0sXCJib29sZWFuXCI6ZnVuY3Rpb24odCxuKXt2YXIgaT1yKG4pO2UoJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAvPicpLmF0dHIoaSkuYXBwZW5kVG8odCl9LHZhbHVlczpmdW5jdGlvbih0LG4pe3ZhciBpPXIobik7ZShcIjxzZWxlY3QgXCIrcy5hdHRyKFwidGV4dC1maWVsZFwiKSsnPVwidGV4dFwiJytzLmF0dHIoXCJ2YWx1ZS1maWVsZFwiKSsnPVwidmFsdWVcIicrcy5hdHRyKFwic291cmNlXCIpK1wiPSdcIitzLnN0cmluZ2lmeShvKG4udmFsdWVzKSkucmVwbGFjZSgvXFwnL2csXCImYXBvcztcIikrXCInXCIrcy5hdHRyKFwicm9sZVwiKSsnPVwiZHJvcGRvd25saXN0XCIvPicpLmF0dHIoaSkuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK3MuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfX0sdz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7bi50YXJnZXQmJihuLiRhbmd1bGFyPW4udGFyZ2V0Lm9wdGlvbnMuJGFuZ3VsYXIpLGMuZm4uaW5pdC5jYWxsKGksdCxuKSxpLl92YWxpZGF0ZVByb3h5PWUucHJveHkoaS5fdmFsaWRhdGUsaSksaS5yZWZyZXNoKCl9LGV2ZW50czpbdl0sb3B0aW9uczp7bmFtZTpcIkVkaXRhYmxlXCIsZWRpdG9yczp5LGNsZWFyQ29udGFpbmVyOiEwLGVycm9yVGVtcGxhdGU6bX0sZWRpdG9yOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPWkub3B0aW9ucy5lZGl0b3JzLG89cChlKSxhPW8/ZS5maWVsZDplLGw9aS5vcHRpb25zLm1vZGVsfHx7fSxjPW8mJmUudmFsdWVzLHU9Yz9cInZhbHVlc1wiOm4odCksaD1vJiZlLmVkaXRvcixmPWg/ZS5lZGl0b3I6clt1XSxtPWkuZWxlbWVudC5maW5kKFwiW1wiK3MuYXR0cihcImNvbnRhaW5lci1mb3JcIikrXCI9XCIrYS5yZXBsYWNlKGcsXCJcXFxcJDFcIikrXCJdXCIpO2Y9Zj9mOnIuc3RyaW5nLGgmJlwic3RyaW5nXCI9PXR5cGVvZiBlLmVkaXRvciYmKGY9ZnVuY3Rpb24odCl7dC5hcHBlbmQoZS5lZGl0b3IpfSksbT1tLmxlbmd0aD9tOmkuZWxlbWVudCxmKG0sZCghMCx7fSxvP2U6e2ZpZWxkOmF9LHttb2RlbDpsfSkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9dC52YWx1ZSxvPWkuX3ZhbGlkYXRpb25FdmVudEluUHJvZ3Jlc3MsYT17fSxsPXMuYXR0cihcImJpbmRcIiksYz10LmZpZWxkLnJlcGxhY2UoZyxcIlxcXFwkMVwiKSxkPVwiY2hlY2tlZDpcIitjLHU9XCJ2YWx1ZTpcIitjO2FbdC5maWVsZF09dC52YWx1ZSxuPWUoXCI6aW5wdXRbXCIrbCsnKj1cIicrdSsnXCJdLDppbnB1dFsnK2wrJyo9XCInK2QrJ1wiXScsaS5lbGVtZW50KS5maWx0ZXIoXCJbXCIrcy5hdHRyKFwidmFsaWRhdGVcIikrXCIhPSdmYWxzZSddXCIpLG4ubGVuZ3RoPjEmJihuPW4uZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQuYXR0cihsKS5zcGxpdChcIixcIiksaT1mKHUsbik+PTB8fGYoZCxuKT49MDtyZXR1cm4gaSYmKCF0LmlzKFwiOnJhZGlvXCIpfHx0LnZhbCgpPT1yKX0pKTt0cnl7aS5fdmFsaWRhdGlvbkV2ZW50SW5Qcm9ncmVzcz0hMCwoIWkudmFsaWRhdGFibGUudmFsaWRhdGVJbnB1dChuKXx8IW8mJmkudHJpZ2dlcih2LHt2YWx1ZXM6YX0pKSYmdC5wcmV2ZW50RGVmYXVsdCgpfWZpbmFsbHl7aS5fdmFsaWRhdGlvbkV2ZW50SW5Qcm9ncmVzcz0hMX19LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkYXRhYmxlLnZhbGlkYXRlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLmVsZW1lbnR9fSksYy5mbi5kZXN0cm95LmNhbGwoZSksZS5vcHRpb25zLm1vZGVsLnVuYmluZChcInNldFwiLGUuX3ZhbGlkYXRlUHJveHkpLHMudW5iaW5kKGUuZWxlbWVudCksZS52YWxpZGF0YWJsZSYmZS52YWxpZGF0YWJsZS5kZXN0cm95KCkscy5kZXN0cm95KGUuZWxlbWVudCksZS5lbGVtZW50LnJlbW92ZURhdGEoXCJrZW5kb1ZhbGlkYXRvclwiKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBuLHIsbyxsLGMsZCxoLGYsZz10aGlzLG09Zy5vcHRpb25zLmZpZWxkc3x8W10sdj1nLm9wdGlvbnMuY2xlYXJDb250YWluZXI/Zy5lbGVtZW50LmVtcHR5KCk6Zy5lbGVtZW50LF89Zy5vcHRpb25zLm1vZGVsfHx7fSx5PXt9O2ZvcihlLmlzQXJyYXkobSl8fChtPVttXSksbj0wLHI9bS5sZW5ndGg7cj5uO24rKylvPW1bbl0sbD1wKG8pLGM9bD9vLmZpZWxkOm8sZD0oXy5maWVsZHN8fF8pW2NdLGEoZCx5KSxnLmVkaXRvcihvLGQpO2lmKGcub3B0aW9ucy50YXJnZXQmJmcuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp2LGRhdGE6W3tkYXRhSXRlbTpffV19fSksIXIpe2g9Xy5maWVsZHN8fF87Zm9yKGMgaW4gaClhKGhbY10seSl9aSh2KSxnLnZhbGlkYXRhYmxlJiZnLnZhbGlkYXRhYmxlLmRlc3Ryb3koKSxzLmJpbmQodixnLm9wdGlvbnMubW9kZWwpLGcub3B0aW9ucy5tb2RlbC51bmJpbmQoXCJzZXRcIixnLl92YWxpZGF0ZVByb3h5KSxnLm9wdGlvbnMubW9kZWwuYmluZChcInNldFwiLGcuX3ZhbGlkYXRlUHJveHkpLGcudmFsaWRhdGFibGU9bmV3IHMudWkuVmFsaWRhdG9yKHYse3ZhbGlkYXRlT25CbHVyOiExLGVycm9yVGVtcGxhdGU6Zy5vcHRpb25zLmVycm9yVGVtcGxhdGV8fHQscnVsZXM6eX0pLGY9di5maW5kKFwiOmtlbmRvRm9jdXNhYmxlXCIpLmVxKDApLmZvY3VzKCksdSYmZi5mb2N1cygpfX0pO2wucGx1Z2luKHcpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHQhPT1lfWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiBNYXRoLm1heChNYXRoLm1pbihwYXJzZUludChlLDEwKSwxLzA9PT1uP246cGFyc2VJbnQobiwxMCkpLHBhcnNlSW50KHQsMTApKX1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dGhpcyxpPW4ud3JhcHBlcixyPWlbMF0uc3R5bGUsbz1uLm9wdGlvbnM7aWYoIW8uaXNNYXhpbWl6ZWQmJiFvLmlzTWluaW1pemVkKXJldHVybiBuLnJlc3RvcmVPcHRpb25zPXt3aWR0aDpyLndpZHRoLGhlaWdodDpyLmhlaWdodH0saS5jaGlsZHJlbih4KS5oaWRlKCkuZW5kKCkuY2hpbGRyZW4oYikuZmluZChHKS5wYXJlbnQoKS5oaWRlKCkuZXEoMCkuYmVmb3JlKFouYWN0aW9uKHtuYW1lOlwiUmVzdG9yZVwifSkpLHQuY2FsbChuKSxcIm1heGltaXplXCI9PWU/bi53cmFwcGVyLmNoaWxkcmVuKGIpLmZpbmQoWSkucGFyZW50KCkuaGlkZSgpOm4ud3JhcHBlci5jaGlsZHJlbihiKS5maW5kKFkpLnBhcmVudCgpLnNob3coKSxufX1mdW5jdGlvbiBvKCl7cmV0dXJuIXRoaXMudHlwZXx8dGhpcy50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNjcmlwdFwiKT49MH1mdW5jdGlvbiBhKGUpe3ZhciB0PXRoaXM7dC5vd25lcj1lLHQuX2RyYWdnYWJsZT1uZXcgZChlLndyYXBwZXIse2ZpbHRlcjpcIj5cIit4LGdyb3VwOmUud3JhcHBlci5pZCtcIi1yZXNpemluZ1wiLGRyYWdzdGFydDpwKHQuZHJhZ3N0YXJ0LHQpLGRyYWc6cCh0LmRyYWcsdCksZHJhZ2VuZDpwKHQuZHJhZ2VuZCx0KX0pLHQuX2RyYWdnYWJsZS51c2VyRXZlbnRzLmJpbmQoXCJwcmVzc1wiLHAodC5hZGRPdmVybGF5LHQpKSx0Ll9kcmFnZ2FibGUudXNlckV2ZW50cy5iaW5kKFwicmVsZWFzZVwiLHAodC5yZW1vdmVPdmVybGF5LHQpKX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49dGhpcztuLm93bmVyPWUsbi5fZHJhZ2dhYmxlPW5ldyBkKGUud3JhcHBlcix7ZmlsdGVyOnQsZ3JvdXA6ZS53cmFwcGVyLmlkK1wiLW1vdmluZ1wiLGRyYWdzdGFydDpwKG4uZHJhZ3N0YXJ0LG4pLGRyYWc6cChuLmRyYWcsbiksZHJhZ2VuZDpwKG4uZHJhZ2VuZCxuKSxkcmFnY2FuY2VsOnAobi5kcmFnY2FuY2VsLG4pfSksbi5fZHJhZ2dhYmxlLnVzZXJFdmVudHMuc3RvcFByb3BhZ2F0aW9uPSExfXZhciBsPXdpbmRvdy5rZW5kbyxjPWwudWkuV2lkZ2V0LGQ9bC51aS5EcmFnZ2FibGUsdT1lLmlzUGxhaW5PYmplY3QsaD1sLl9hY3RpdmVFbGVtZW50LHA9ZS5wcm94eSxmPWUuZXh0ZW5kLGc9ZS5lYWNoLG09bC50ZW1wbGF0ZSx2PVwiYm9keVwiLF89XCIua2VuZG9XaW5kb3dcIix5PVwiLmstd2luZG93XCIsdz1cIi5rLXdpbmRvdy10aXRsZVwiLGI9dytcImJhclwiLGs9XCIuay13aW5kb3ctY29udGVudFwiLHg9XCIuay1yZXNpemUtaGFuZGxlXCIsQz1cIi5rLW92ZXJsYXlcIixTPVwiay1jb250ZW50LWZyYW1lXCIsVD1cImstbG9hZGluZ1wiLEQ9XCJrLXN0YXRlLWhvdmVyXCIsQT1cImstc3RhdGUtZm9jdXNlZFwiLEU9XCJrLXdpbmRvdy1tYXhpbWl6ZWRcIixNPVwiOnZpc2libGVcIixQPVwiaGlkZGVuXCIsST1cImN1cnNvclwiLHo9XCJvcGVuXCIsRj1cImFjdGl2YXRlXCIsUj1cImRlYWN0aXZhdGVcIixCPVwiY2xvc2VcIixMPVwicmVmcmVzaFwiLE89XCJyZXNpemVcIixIPVwicmVzaXplRW5kXCIsTj1cImRyYWdzdGFydFwiLFY9XCJkcmFnZW5kXCIsVT1cImVycm9yXCIsVz1cIm92ZXJmbG93XCIsaj1cInpJbmRleFwiLEc9XCIuay13aW5kb3ctYWN0aW9ucyAuay1pLW1pbmltaXplLC5rLXdpbmRvdy1hY3Rpb25zIC5rLWktbWF4aW1pemVcIixxPVwiLmstaS1waW5cIiwkPVwiLmstaS11bnBpblwiLFk9cStcIixcIiskLEs9XCIuay13aW5kb3ctdGl0bGViYXIgLmstd2luZG93LWFjdGlvblwiLFE9XCIuay13aW5kb3ctdGl0bGViYXIgLmstaS1yZWZyZXNoXCIsWD1sLmlzTG9jYWxVcmwsSj1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihpLHIpe3ZhciBhLHMsZCxoLGYsZyxtLHY9dGhpcyx4PXt9LEM9ITEsUz1yJiZyLmFjdGlvbnMmJiFyLmFjdGlvbnMubGVuZ3RoO2MuZm4uaW5pdC5jYWxsKHYsaSxyKSxyPXYub3B0aW9ucyxoPXIucG9zaXRpb24saT12LmVsZW1lbnQsZj1yLmNvbnRlbnQsUyYmKHIuYWN0aW9ucz1bXSksdi5hcHBlbmRUbz1lKHIuYXBwZW5kVG8pLHYuX2FuaW1hdGlvbnMoKSxmJiYhdShmKSYmKGY9ci5jb250ZW50PXt1cmw6Zn0pLGkuZmluZChcInNjcmlwdFwiKS5maWx0ZXIobykucmVtb3ZlKCksaS5wYXJlbnQoKS5pcyh2LmFwcGVuZFRvKXx8aC50b3AhPT10JiZoLmxlZnQhPT10fHwoaS5pcyhNKT8oeD1pLm9mZnNldCgpLEM9ITApOihzPWkuY3NzKFwidmlzaWJpbGl0eVwiKSxkPWkuY3NzKFwiZGlzcGxheVwiKSxpLmNzcyh7dmlzaWJpbGl0eTpQLGRpc3BsYXk6XCJcIn0pLHg9aS5vZmZzZXQoKSxpLmNzcyh7dmlzaWJpbGl0eTpzLGRpc3BsYXk6ZH0pKSxoLnRvcD09PXQmJihoLnRvcD14LnRvcCksaC5sZWZ0PT09dCYmKGgubGVmdD14LmxlZnQpKSxuKHIudmlzaWJsZSkmJm51bGwhPT1yLnZpc2libGV8fChyLnZpc2libGU9aS5pcyhNKSksYT12LndyYXBwZXI9aS5jbG9zZXN0KHkpLGkuaXMoXCIuay1jb250ZW50XCIpJiZhWzBdfHwoaS5hZGRDbGFzcyhcImstd2luZG93LWNvbnRlbnQgay1jb250ZW50XCIpLHYuX2NyZWF0ZVdpbmRvdyhpLHIpLGE9di53cmFwcGVyPWkuY2xvc2VzdCh5KSx2Ll9kaW1lbnNpb25zKCkpLHYuX3Bvc2l0aW9uKCksci5waW5uZWQmJnYucGluKCEwKSxmJiZ2LnJlZnJlc2goZiksci52aXNpYmxlJiZ2LnRvRnJvbnQoKSxnPWEuY2hpbGRyZW4oayksdi5fdGFiaW5kZXgoZyksci52aXNpYmxlJiZyLm1vZGFsJiZ2Ll9vdmVybGF5KGEuaXMoTSkpLmNzcyh7b3BhY2l0eTouNX0pLGEub24oXCJtb3VzZWVudGVyXCIrXyxLLHAodi5fYnV0dG9uRW50ZXIsdikpLm9uKFwibW91c2VsZWF2ZVwiK18sSyxwKHYuX2J1dHRvbkxlYXZlLHYpKS5vbihcImNsaWNrXCIrXyxcIj4gXCIrSyxwKHYuX3dpbmRvd0FjdGlvbkhhbmRsZXIsdikpLGcub24oXCJrZXlkb3duXCIrXyxwKHYuX2tleWRvd24sdikpLm9uKFwiZm9jdXNcIitfLHAodi5fZm9jdXMsdikpLm9uKFwiYmx1clwiK18scCh2Ll9ibHVyLHYpKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSxtPWkuYXR0cihcImlkXCIpLG0mJihtKz1cIl93bmRfdGl0bGVcIixhLmNoaWxkcmVuKGIpLmNoaWxkcmVuKHcpLmF0dHIoXCJpZFwiLG0pLGcuYXR0cih7cm9sZTpcImRpYWxvZ1wiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6bX0pKSxhLmFkZChhLmNoaWxkcmVuKFwiLmstcmVzaXplLWhhbmRsZSxcIitiKSkub24oXCJtb3VzZWRvd25cIitfLHAodi50b0Zyb250LHYpKSx2LnRvdWNoU2Nyb2xsZXI9bC50b3VjaFNjcm9sbGVyKGkpLHYuX3Jlc2l6ZUhhbmRsZXI9cCh2Ll9vbkRvY3VtZW50UmVzaXplLHYpLHYuX21hcmtlcj1sLmd1aWQoKS5zdWJzdHJpbmcoMCw4KSxlKHdpbmRvdykub24oXCJyZXNpemVcIitfK3YuX21hcmtlcix2Ll9yZXNpemVIYW5kbGVyKSxyLnZpc2libGUmJih2LnRyaWdnZXIoeiksdi50cmlnZ2VyKEYpKSxsLm5vdGlmeSh2KX0sX2J1dHRvbkVudGVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhEKX0sX2J1dHRvbkxlYXZlOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhEKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmFkZENsYXNzKEEpfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5yZW1vdmVDbGFzcyhBKX0sX2RpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy53cmFwcGVyLHI9dGhpcy5vcHRpb25zLG89ci53aWR0aCxhPXIuaGVpZ2h0LHM9ci5tYXhIZWlnaHQsbD1bXCJtaW5XaWR0aFwiLFwibWluSGVpZ2h0XCIsXCJtYXhXaWR0aFwiLFwibWF4SGVpZ2h0XCJdO2Zvcih0aGlzLnRpdGxlKHIudGl0bGUpLGU9MDtsLmxlbmd0aD5lO2UrKyl0PXJbbFtlXV0sdCYmMS8wIT10JiZuLmNzcyhsW2VdLHQpO3MmJjEvMCE9cyYmdGhpcy5lbGVtZW50LmNzcyhcIm1heEhlaWdodFwiLHMpLG8mJm4ud2lkdGgoKFwiXCIrbykuaW5kZXhPZihcIiVcIik+MD9vOmkobyxyLm1pbldpZHRoLHIubWF4V2lkdGgpKSxhJiZuLmhlaWdodCgoXCJcIithKS5pbmRleE9mKFwiJVwiKT4wP2E6aShhLHIubWluSGVpZ2h0LHIubWF4SGVpZ2h0KSksci52aXNpYmxlfHxuLmhpZGUoKX0sX3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53cmFwcGVyLHQ9dGhpcy5vcHRpb25zLnBvc2l0aW9uOzA9PT10LnRvcCYmKHQudG9wPVwiXCIrdC50b3ApLDA9PT10LmxlZnQmJih0LmxlZnQ9XCJcIit0LmxlZnQpLGUuY3NzKHt0b3A6dC50b3B8fFwiXCIsbGVmdDp0LmxlZnR8fFwiXCJ9KX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5hbmltYXRpb249PT0hMSYmKGUuYW5pbWF0aW9uPXtvcGVuOntlZmZlY3RzOnt9fSxjbG9zZTp7aGlkZTohMCxlZmZlY3RzOnt9fX0pfSxfcmVzaXplOmZ1bmN0aW9uKCl7bC5yZXNpemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKCkpfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnJlc2l6YWJsZSxuPXRoaXMud3JhcHBlcjt0aGlzLnJlc2l6aW5nJiYobi5vZmYoXCJkYmxjbGlja1wiK18pLmNoaWxkcmVuKHgpLnJlbW92ZSgpLHRoaXMucmVzaXppbmcuZGVzdHJveSgpLHRoaXMucmVzaXppbmc9bnVsbCksdCYmKG4ub24oXCJkYmxjbGlja1wiK18sYixwKGZ1bmN0aW9uKHQpe2UodC50YXJnZXQpLmNsb3Nlc3QoXCIuay13aW5kb3ctYWN0aW9uXCIpLmxlbmd0aHx8dGhpcy50b2dnbGVNYXhpbWl6YXRpb24oKX0sdGhpcykpLGcoXCJuIGUgcyB3IHNlIHN3IG5lIG53XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7bi5hcHBlbmQoWi5yZXNpemVIYW5kbGUodCkpfSksdGhpcy5yZXNpemluZz1uZXcgYSh0aGlzKSksbj1udWxsfSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmRyYWdnYWJsZTt0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZy5kZXN0cm95KCksdGhpcy5kcmFnZ2luZz1udWxsKSxlJiYodGhpcy5kcmFnZ2luZz1uZXcgcyh0aGlzLGUuZHJhZ0hhbmRsZXx8YikpfSxfYWN0aW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5hY3Rpb25zLG49dGhpcy53cmFwcGVyLmNoaWxkcmVuKGIpLGk9bi5maW5kKFwiLmstd2luZG93LWFjdGlvbnNcIik7dD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOmV9fSksaS5odG1sKGwucmVuZGVyKFouYWN0aW9uLHQpKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXtjLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX2FuaW1hdGlvbnMoKSx0aGlzLl9kaW1lbnNpb25zKCksdGhpcy5fcG9zaXRpb24oKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSx0aGlzLl9hY3Rpb25zKCl9LGV2ZW50czpbeixGLFIsQixMLE8sSCxOLFYsVV0sb3B0aW9uczp7bmFtZTpcIldpbmRvd1wiLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czp7em9vbTp7ZGlyZWN0aW9uOlwiaW5cIn0sZmFkZTp7ZGlyZWN0aW9uOlwiaW5cIn19LGR1cmF0aW9uOjM1MH0sY2xvc2U6e2VmZmVjdHM6e3pvb206e2RpcmVjdGlvbjpcIm91dFwiLHByb3BlcnRpZXM6e3NjYWxlOi43fX0sZmFkZTp7ZGlyZWN0aW9uOlwib3V0XCJ9fSxkdXJhdGlvbjozNTAsaGlkZTohMH19LHRpdGxlOlwiXCIsYWN0aW9uczpbXCJDbG9zZVwiXSxhdXRvRm9jdXM6ITAsbW9kYWw6ITEscmVzaXphYmxlOiEwLGRyYWdnYWJsZTohMCxtaW5XaWR0aDo5MCxtaW5IZWlnaHQ6NTAsbWF4V2lkdGg6MS8wLG1heEhlaWdodDoxLzAscGlubmVkOiExLHBvc2l0aW9uOnt9LGNvbnRlbnQ6bnVsbCx2aXNpYmxlOm51bGwsaGVpZ2h0Om51bGwsd2lkdGg6bnVsbCxhcHBlbmRUbzpcImJvZHlcIn0sX2Nsb3NhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuaW5BcnJheShcImNsb3NlXCIsZS5tYXAodGhpcy5vcHRpb25zLmFjdGlvbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0pKT4tMX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYSxzLGM9dGhpcyxkPWMub3B0aW9ucyx1PWwua2V5cyxoPWUua2V5Q29kZSxwPWMud3JhcHBlcixmPTEwLGc9Yy5vcHRpb25zLmlzTWF4aW1pemVkO2UudGFyZ2V0IT1lLmN1cnJlbnRUYXJnZXR8fGMuX2Nsb3Npbmd8fChoPT11LkVTQyYmYy5fY2xvc2FibGUoKSYmYy5fY2xvc2UoITEpLCFkLmRyYWdnYWJsZXx8ZS5jdHJsS2V5fHxnfHwodD1sLmdldE9mZnNldChwKSxoPT11LlVQP249cC5jc3MoXCJ0b3BcIix0LnRvcC1mKTpoPT11LkRPV04/bj1wLmNzcyhcInRvcFwiLHQudG9wK2YpOmg9PXUuTEVGVD9uPXAuY3NzKFwibGVmdFwiLHQubGVmdC1mKTpoPT11LlJJR0hUJiYobj1wLmNzcyhcImxlZnRcIix0LmxlZnQrZikpKSxkLnJlc2l6YWJsZSYmZS5jdHJsS2V5JiYhZyYmKGg9PXUuVVA/KG49ITAsbz1wLmhlaWdodCgpLWYpOmg9PXUuRE9XTiYmKG49ITAsbz1wLmhlaWdodCgpK2YpLGg9PXUuTEVGVD8obj0hMCxyPXAud2lkdGgoKS1mKTpoPT11LlJJR0hUJiYobj0hMCxyPXAud2lkdGgoKStmKSxuJiYoYT1pKHIsZC5taW5XaWR0aCxkLm1heFdpZHRoKSxzPWkobyxkLm1pbkhlaWdodCxkLm1heEhlaWdodCksaXNOYU4oYSl8fChwLndpZHRoKGEpLGMub3B0aW9ucy53aWR0aD1hK1wicHhcIiksaXNOYU4ocyl8fChwLmhlaWdodChzKSxjLm9wdGlvbnMuaGVpZ2h0PXMrXCJweFwiKSxjLnJlc2l6ZSgpKSksbiYmZS5wcmV2ZW50RGVmYXVsdCgpKX0sX292ZXJsYXk6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5hcHBlbmRUby5jaGlsZHJlbihDKSxpPXRoaXMud3JhcHBlcjtyZXR1cm4gbi5sZW5ndGh8fChuPWUoXCI8ZGl2IGNsYXNzPSdrLW92ZXJsYXknIC8+XCIpKSxuLmluc2VydEJlZm9yZShpWzBdKS50b2dnbGUodCkuY3NzKGoscGFyc2VJbnQoaS5jc3MoaiksMTApLTEpLG59LF9hY3Rpb25Gb3JJY29uOmZ1bmN0aW9uKGUpe3ZhciB0PS9cXGJrLWktXFx3K1xcYi8uZXhlYyhlWzBdLmNsYXNzTmFtZSlbMF07cmV0dXJue1wiay1pLWNsb3NlXCI6XCJfY2xvc2VcIixcImstaS1tYXhpbWl6ZVwiOlwibWF4aW1pemVcIixcImstaS1taW5pbWl6ZVwiOlwibWluaW1pemVcIixcImstaS1yZXN0b3JlXCI6XCJyZXN0b3JlXCIsXCJrLWktcmVmcmVzaFwiOlwicmVmcmVzaFwiLFwiay1pLXBpblwiOlwicGluXCIsXCJrLWktdW5waW5cIjpcInVucGluXCJ9W3RdfSxfd2luZG93QWN0aW9uSGFuZGxlcjpmdW5jdGlvbihuKXt2YXIgaSxyO2lmKCF0aGlzLl9jbG9zaW5nKXJldHVybiBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay13aW5kb3ctYWN0aW9uXCIpLmZpbmQoXCIuay1pY29uXCIpLHI9dGhpcy5fYWN0aW9uRm9ySWNvbihpKSxyPyhuLnByZXZlbnREZWZhdWx0KCksdGhpc1tyXSgpLCExKTp0fSxfbW9kYWxzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoeSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPXQuX29iamVjdChuKSxyPWkmJmkub3B0aW9ucztyZXR1cm4gciYmci5tb2RhbCYmci52aXNpYmxlJiZuLmlzKE0pfSkuc29ydChmdW5jdGlvbih0LG4pe3JldHVybitlKHQpLmNzcyhcInpJbmRleFwiKS0rZShuKS5jc3MoXCJ6SW5kZXhcIil9KTtyZXR1cm4gdD1udWxsLG59LF9vYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jaGlsZHJlbihrKTtyZXR1cm4gdC5kYXRhKFwia2VuZG9XaW5kb3dcIil8fHQuZGF0YShcImtlbmRvXCIrdGhpcy5vcHRpb25zLm5hbWUpfSxjZW50ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGk9dGhpcyxyPWkub3B0aW9ucy5wb3NpdGlvbixvPWkud3JhcHBlcixhPWUod2luZG93KSxzPTAsbD0wO3JldHVybiBpLm9wdGlvbnMuaXNNYXhpbWl6ZWQ/aTooaS5vcHRpb25zLnBpbm5lZHx8KHM9YS5zY3JvbGxUb3AoKSxsPWEuc2Nyb2xsTGVmdCgpKSxuPWwrTWF0aC5tYXgoMCwoYS53aWR0aCgpLW8ud2lkdGgoKSkvMiksdD1zK01hdGgubWF4KDAsKGEuaGVpZ2h0KCktby5oZWlnaHQoKS1wYXJzZUludChvLmNzcyhcInBhZGRpbmdUb3BcIiksMTApKS8yKSxvLmNzcyh7bGVmdDpuLHRvcDp0fSksci50b3A9dCxyLmxlZnQ9bixpKX0sdGl0bGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi53cmFwcGVyLHI9bi5vcHRpb25zLG89aS5jaGlsZHJlbihiKSxhPW8uY2hpbGRyZW4odyk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9PT0hMT8oaS5hZGRDbGFzcyhcImstd2luZG93LXRpdGxlbGVzc1wiKSxvLnJlbW92ZSgpKTooby5sZW5ndGg/YS5odG1sKGUpOihpLnByZXBlbmQoWi50aXRsZWJhcihyKSksbi5fYWN0aW9ucygpLG89aS5jaGlsZHJlbihiKSksdD1vLm91dGVySGVpZ2h0KCksaS5jc3MoXCJwYWRkaW5nLXRvcFwiLHQpLG8uY3NzKFwibWFyZ2luLXRvcFwiLC10KSksbi5vcHRpb25zLnRpdGxlPWUsbik6YS50ZXh0KCl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLndyYXBwZXIuY2hpbGRyZW4oaykscj1pLmNoaWxkcmVuKFwiLmttLXNjcm9sbC1jb250YWluZXJcIik7cmV0dXJuIGk9clswXT9yOmksbihlKT8odGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuY2hpbGRyZW4oKX19KSxsLmRlc3Ryb3kodGhpcy5lbGVtZW50LmNoaWxkcmVuKCkpLGkuZW1wdHkoKS5odG1sKGUpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3ZhciBlLG49W107Zm9yKGU9aS5sZW5ndGg7LS1lPj0wOyluLnB1c2goe2RhdGFJdGVtOnR9KTtyZXR1cm57ZWxlbWVudHM6aS5jaGlsZHJlbigpLGRhdGE6bn19KSx0aGlzKTppLmh0bWwoKX0sb3BlbjpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS53cmFwcGVyLG89aS5vcHRpb25zLGE9by5hbmltYXRpb24ub3BlbixzPXIuY2hpbGRyZW4oayk7cmV0dXJuIGkudHJpZ2dlcih6KXx8KGkuX2Nsb3NpbmcmJnIua2VuZG9TdG9wKCEwLCEwKSxpLl9jbG9zaW5nPSExLGkudG9Gcm9udCgpLG8uYXV0b0ZvY3VzJiZpLmVsZW1lbnQuZm9jdXMoKSxvLnZpc2libGU9ITAsby5tb2RhbCYmKHQ9aS5fb3ZlcmxheSghMSksdC5rZW5kb1N0b3AoITAsITApLGEuZHVyYXRpb24mJmwuZWZmZWN0cy5GYWRlPyhuPWwuZngodCkuZmFkZUluKCksbi5kdXJhdGlvbihhLmR1cmF0aW9ufHwwKSxuLmVuZFZhbHVlKC41KSxuLnBsYXkoKSk6dC5jc3MoXCJvcGFjaXR5XCIsLjUpLHQuc2hvdygpKSxyLmlzKE0pfHwocy5jc3MoVyxQKSxyLnNob3coKS5rZW5kb1N0b3AoKS5rZW5kb0FuaW1hdGUoe2VmZmVjdHM6YS5lZmZlY3RzLGR1cmF0aW9uOmEuZHVyYXRpb24sY29tcGxldGU6cCh0aGlzLl9hY3RpdmF0ZSx0aGlzKX0pKSksby5pc01heGltaXplZCYmKGkuX2RvY3VtZW50U2Nyb2xsVG9wPWUoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLGUoXCJodG1sLCBib2R5XCIpLmNzcyhXLFApKSxpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzJiZ0aGlzLmVsZW1lbnQuZm9jdXMoKSx0aGlzLnRyaWdnZXIoRiksdGhpcy53cmFwcGVyLmNoaWxkcmVuKGspLmNzcyhXLFwiXCIpfSxfcmVtb3ZlT3ZlcmxheTpmdW5jdGlvbihuKXt2YXIgaSxyPXRoaXMuX21vZGFscygpLG89dGhpcy5vcHRpb25zLGE9by5tb2RhbCYmIXIubGVuZ3RoLHM9by5tb2RhbD90aGlzLl9vdmVybGF5KCEwKTplKHQpLGM9by5hbmltYXRpb24uY2xvc2U7YT8hbiYmYy5kdXJhdGlvbiYmbC5lZmZlY3RzLkZhZGU/KGk9bC5meChzKS5mYWRlT3V0KCksaS5kdXJhdGlvbihjLmR1cmF0aW9ufHwwKSxpLnN0YXJ0VmFsdWUoLjUpLGkucGxheSgpKTp0aGlzLl9vdmVybGF5KCExKS5yZW1vdmUoKTpyLmxlbmd0aCYmdGhpcy5fb2JqZWN0KHIubGFzdCgpKS5fb3ZlcmxheSghMCl9LF9jbG9zZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi53cmFwcGVyLHI9bi5vcHRpb25zLG89ci5hbmltYXRpb24ub3BlbixhPXIuYW5pbWF0aW9uLmNsb3NlO2lmKGkuaXMoTSkmJiFuLnRyaWdnZXIoQix7dXNlclRyaWdnZXJlZDohdH0pKXtpZihuLl9jbG9zaW5nKXJldHVybjtuLl9jbG9zaW5nPSEwLHIudmlzaWJsZT0hMSxlKHkpLmVhY2goZnVuY3Rpb24odCxuKXt2YXIgcj1lKG4pLmNoaWxkcmVuKGspO24hPWkmJnIuZmluZChcIj4gLlwiK1MpLmxlbmd0aD4wJiZyLmNoaWxkcmVuKEMpLnJlbW92ZSgpfSksdGhpcy5fcmVtb3ZlT3ZlcmxheSgpLGkua2VuZG9TdG9wKCkua2VuZG9BbmltYXRlKHtlZmZlY3RzOmEuZWZmZWN0c3x8by5lZmZlY3RzLHJldmVyc2U6YS5yZXZlcnNlPT09ITAsZHVyYXRpb246YS5kdXJhdGlvbixjb21wbGV0ZTpwKHRoaXMuX2RlYWN0aXZhdGUsdGhpcyl9KX1uLm9wdGlvbnMuaXNNYXhpbWl6ZWQmJihlKFwiaHRtbCwgYm9keVwiKS5jc3MoVyxcIlwiKSxuLl9kb2N1bWVudFNjcm9sbFRvcCYmbi5fZG9jdW1lbnRTY3JvbGxUb3A+MCYmZShkb2N1bWVudCkuc2Nyb2xsVG9wKG4uX2RvY3VtZW50U2Nyb2xsVG9wKSl9LF9kZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmhpZGUoKS5jc3MoXCJvcGFjaXR5XCIsXCJcIiksdGhpcy50cmlnZ2VyKFIpO3ZhciBlPXRoaXMuX29iamVjdCh0aGlzLl9tb2RhbHMoKS5sYXN0KCkpO2UmJmUudG9Gcm9udCgpfSxjbG9zZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zZSghMCksdGhpc30sX2FjdGlvbmFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuaXMoSytcIixcIitLK1wiIC5rLWljb24sOmlucHV0LGFcIil9LF9zaG91bGRGb2N1czpmdW5jdGlvbih0KXt2YXIgbj1oKCksaT10aGlzLmVsZW1lbnQ7cmV0dXJuISghdGhpcy5vcHRpb25zLmF1dG9Gb2N1c3x8ZShuKS5pcyhpKXx8dGhpcy5fYWN0aW9uYWJsZSh0KXx8aS5maW5kKG4pLmxlbmd0aCYmaS5maW5kKHQpLmxlbmd0aCl9LHRvRnJvbnQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz1yLndyYXBwZXIsYT1vWzBdLHM9K28uY3NzKGopLGw9cyxjPXQmJnQudGFyZ2V0fHxudWxsO3JldHVybiBlKHkpLmVhY2goZnVuY3Rpb24odCxuKXt2YXIgaT1lKG4pLHI9aS5jc3Moaiksbz1pLmNoaWxkcmVuKGspO2lzTmFOKHIpfHwocz1NYXRoLm1heCgrcixzKSksbiE9YSYmby5maW5kKFwiPiAuXCIrUykubGVuZ3RoPjAmJm8uYXBwZW5kKFoub3ZlcmxheSl9KSwoIW9bMF0uc3R5bGUuekluZGV4fHxzPmwpJiZvLmNzcyhqLHMrMiksci5lbGVtZW50LmZpbmQoXCI+IC5rLW92ZXJsYXlcIikucmVtb3ZlKCksci5fc2hvdWxkRm9jdXMoYykmJihyLmVsZW1lbnQuZm9jdXMoKSxuPWUod2luZG93KS5zY3JvbGxUb3AoKSxpPXBhcnNlSW50KG8ucG9zaXRpb24oKS50b3AsMTApLGk+MCYmbj5pJiYobj4wP2Uod2luZG93KS5zY3JvbGxUb3AoaSk6by5jc3MoXCJ0b3BcIixuKSkpLG89bnVsbCxyfSx0b2dnbGVNYXhpbWl6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvc2luZz90aGlzOnRoaXNbdGhpcy5vcHRpb25zLmlzTWF4aW1pemVkP1wicmVzdG9yZVwiOlwibWF4aW1pemVcIl0oKX0scmVzdG9yZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT1uLm1pbkhlaWdodCxyPXQucmVzdG9yZU9wdGlvbnM7cmV0dXJuIG4uaXNNYXhpbWl6ZWR8fG4uaXNNaW5pbWl6ZWQ/KGkmJjEvMCE9aSYmdC53cmFwcGVyLmNzcyhcIm1pbi1oZWlnaHRcIixpKSx0LndyYXBwZXIuY3NzKHtwb3NpdGlvbjpuLnBpbm5lZD9cImZpeGVkXCI6XCJhYnNvbHV0ZVwiLGxlZnQ6ci5sZWZ0LHRvcDpyLnRvcCx3aWR0aDpyLndpZHRoLGhlaWdodDpyLmhlaWdodH0pLnJlbW92ZUNsYXNzKEUpLmZpbmQoXCIuay13aW5kb3ctY29udGVudCwuay1yZXNpemUtaGFuZGxlXCIpLnNob3coKS5lbmQoKS5maW5kKFwiLmstd2luZG93LXRpdGxlYmFyIC5rLWktcmVzdG9yZVwiKS5wYXJlbnQoKS5yZW1vdmUoKS5lbmQoKS5lbmQoKS5maW5kKEcpLnBhcmVudCgpLnNob3coKS5lbmQoKS5lbmQoKS5maW5kKFkpLnBhcmVudCgpLnNob3coKSx0Lm9wdGlvbnMud2lkdGg9ci53aWR0aCx0Lm9wdGlvbnMuaGVpZ2h0PXIuaGVpZ2h0LGUoXCJodG1sLCBib2R5XCIpLmNzcyhXLFwiXCIpLHRoaXMuX2RvY3VtZW50U2Nyb2xsVG9wJiZ0aGlzLl9kb2N1bWVudFNjcm9sbFRvcD4wJiZlKGRvY3VtZW50KS5zY3JvbGxUb3AodGhpcy5fZG9jdW1lbnRTY3JvbGxUb3ApLG4uaXNNYXhpbWl6ZWQ9bi5pc01pbmltaXplZD0hMSx0LnJlc2l6ZSgpLHQpOnR9LG1heGltaXplOnIoXCJtYXhpbWl6ZVwiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQud3JhcHBlcixpPW4ucG9zaXRpb24oKTtmKHQucmVzdG9yZU9wdGlvbnMse2xlZnQ6aS5sZWZ0LHRvcDppLnRvcH0pLG4uY3NzKHtsZWZ0OjAsdG9wOjAscG9zaXRpb246XCJmaXhlZFwifSkuYWRkQ2xhc3MoRSksdGhpcy5fZG9jdW1lbnRTY3JvbGxUb3A9ZShkb2N1bWVudCkuc2Nyb2xsVG9wKCksZShcImh0bWwsIGJvZHlcIikuY3NzKFcsUCksdC5vcHRpb25zLmlzTWF4aW1pemVkPSEwLHQuX29uRG9jdW1lbnRSZXNpemUoKX0pLG1pbmltaXplOnIoXCJtaW5pbWl6ZVwiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXIuY3NzKHtoZWlnaHQ6XCJcIixtaW5IZWlnaHQ6XCJcIn0pLGUuZWxlbWVudC5oaWRlKCksZS5vcHRpb25zLmlzTWluaW1pemVkPSEwfSkscGluOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHdpbmRvdykscj1uLndyYXBwZXIsbz1wYXJzZUludChyLmNzcyhcInRvcFwiKSwxMCksYT1wYXJzZUludChyLmNzcyhcImxlZnRcIiksMTApOyh0fHwhbi5vcHRpb25zLnBpbm5lZCYmIW4ub3B0aW9ucy5pc01heGltaXplZCkmJihyLmNzcyh7cG9zaXRpb246XCJmaXhlZFwiLHRvcDpvLWkuc2Nyb2xsVG9wKCksbGVmdDphLWkuc2Nyb2xsTGVmdCgpfSksci5jaGlsZHJlbihiKS5maW5kKHEpLmFkZENsYXNzKFwiay1pLXVucGluXCIpLnJlbW92ZUNsYXNzKFwiay1pLXBpblwiKSxuLm9wdGlvbnMucGlubmVkPSEwKX0sdW5waW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSh3aW5kb3cpLGk9dC53cmFwcGVyLHI9cGFyc2VJbnQoaS5jc3MoXCJ0b3BcIiksMTApLG89cGFyc2VJbnQoaS5jc3MoXCJsZWZ0XCIpLDEwKTt0Lm9wdGlvbnMucGlubmVkJiYhdC5vcHRpb25zLmlzTWF4aW1pemVkJiYoaS5jc3Moe3Bvc2l0aW9uOlwiXCIsdG9wOnIrbi5zY3JvbGxUb3AoKSxsZWZ0Om8rbi5zY3JvbGxMZWZ0KCl9KSxpLmNoaWxkcmVuKGIpLmZpbmQoJCkuYWRkQ2xhc3MoXCJrLWktcGluXCIpLnJlbW92ZUNsYXNzKFwiay1pLXVucGluXCIpLHQub3B0aW9ucy5waW5uZWQ9ITEpfSxfb25Eb2N1bWVudFJlc2l6ZTpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9aS53cmFwcGVyLG89ZSh3aW5kb3cpO2kub3B0aW9ucy5pc01heGltaXplZCYmKHQ9by53aWR0aCgpLG49by5oZWlnaHQoKS1wYXJzZUludChyLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKSxyLmNzcyh7d2lkdGg6dCxoZWlnaHQ6bn0pLGkub3B0aW9ucy53aWR0aD10LGkub3B0aW9ucy5oZWlnaHQ9bixpLnJlc2l6ZSgpKX0scmVmcmVzaDpmdW5jdGlvbih0KXt2YXIgaSxyLG8sYT10aGlzLHM9YS5vcHRpb25zLGw9ZShhLmVsZW1lbnQpO3JldHVybiB1KHQpfHwodD17dXJsOnR9KSx0PWYoe30scy5jb250ZW50LHQpLHI9bihzLmlmcmFtZSk/cy5pZnJhbWU6dC5pZnJhbWUsbz10LnVybCxvPyhuKHIpfHwocj0hWChvKSkscj8oaT1sLmZpbmQoXCIuXCIrUylbMF0saT9pLnNyYz1vfHxpLnNyYzpsLmh0bWwoWi5jb250ZW50RnJhbWUoZih7fSxzLHtjb250ZW50OnR9KSkpLGwuZmluZChcIi5cIitTKS51bmJpbmQoXCJsb2FkXCIrXykub24oXCJsb2FkXCIrXyxwKHRoaXMuX3RyaWdnZXJSZWZyZXNoLHRoaXMpKSk6YS5fYWpheFJlcXVlc3QodCkpOih0LnRlbXBsYXRlJiZhLmNvbnRlbnQobSh0LnRlbXBsYXRlKSh7fSkpLGEudHJpZ2dlcihMKSksbC50b2dnbGVDbGFzcyhcImstd2luZG93LWlmcmFtZWNvbnRlbnRcIiwhIXIpLGF9LF90cmlnZ2VyUmVmcmVzaDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihMKX0sX2FqYXhDb21wbGV0ZTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9sb2FkaW5nSWNvblRpbWVvdXQpLHRoaXMud3JhcHBlci5maW5kKFEpLnJlbW92ZUNsYXNzKFQpXG59LF9hamF4RXJyb3I6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyaWdnZXIoVSx7c3RhdHVzOnQseGhyOmV9KX0sX2FqYXhTdWNjZXNzOmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10O2UmJihuPW0oZSkodHx8e30pKSx0aGlzLmNvbnRlbnQobix0KSx0aGlzLmVsZW1lbnQucHJvcChcInNjcm9sbFRvcFwiLDApLHRoaXMudHJpZ2dlcihMKX19LF9zaG93TG9hZGluZzpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5maW5kKFEpLmFkZENsYXNzKFQpfSxfYWpheFJlcXVlc3Q6ZnVuY3Rpb24odCl7dGhpcy5fbG9hZGluZ0ljb25UaW1lb3V0PXNldFRpbWVvdXQocCh0aGlzLl9zaG93TG9hZGluZyx0aGlzKSwxMDApLGUuYWpheChmKHt0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJodG1sXCIsY2FjaGU6ITEsZXJyb3I6cCh0aGlzLl9hamF4RXJyb3IsdGhpcyksY29tcGxldGU6cCh0aGlzLl9hamF4Q29tcGxldGUsdGhpcyksc3VjY2VzczpwKHRoaXMuX2FqYXhTdWNjZXNzKHQudGVtcGxhdGUpLHRoaXMpfSx0KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgbj10aGlzO24ucmVzaXppbmcmJm4ucmVzaXppbmcuZGVzdHJveSgpLG4uZHJhZ2dpbmcmJm4uZHJhZ2dpbmcuZGVzdHJveSgpLG4ud3JhcHBlci5vZmYoXykuY2hpbGRyZW4oaykub2ZmKF8pLmVuZCgpLmZpbmQoXCIuay1yZXNpemUtaGFuZGxlLC5rLXdpbmRvdy10aXRsZWJhclwiKS5vZmYoXyksZSh3aW5kb3cpLm9mZihcInJlc2l6ZVwiK18rbi5fbWFya2VyKSxjbGVhclRpbWVvdXQobi5fbG9hZGluZ0ljb25UaW1lb3V0KSxjLmZuLmRlc3Ryb3kuY2FsbChuKSxuLnVuYmluZCh0KSxsLmRlc3Ryb3kobi53cmFwcGVyKSxuLl9yZW1vdmVPdmVybGF5KCEwKSxuLndyYXBwZXIuZW1wdHkoKS5yZW1vdmUoKSxuLndyYXBwZXI9bi5hcHBlbmRUbz1uLmVsZW1lbnQ9ZSgpfSxfY3JlYXRlV2luZG93OmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMuZWxlbWVudCxyPXRoaXMub3B0aW9ucyxvPWwuc3VwcG9ydC5pc1J0bChpKTtyLnNjcm9sbGFibGU9PT0hMSYmaS5hdHRyKFwic3R5bGVcIixcIm92ZXJmbG93OmhpZGRlbjtcIiksbj1lKFoud3JhcHBlcihyKSksdD1pLmZpbmQoXCJpZnJhbWU6bm90KC5rLWNvbnRlbnQpXCIpLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QXR0cmlidXRlKFwic3JjXCIpO3JldHVybiB0aGlzLnNyYz1cIlwiLGV9KSxuLnRvZ2dsZUNsYXNzKFwiay1ydGxcIixvKS5hcHBlbmRUbyh0aGlzLmFwcGVuZFRvKS5hcHBlbmQoaSkuZmluZChcImlmcmFtZTpub3QoLmstY29udGVudClcIikuZWFjaChmdW5jdGlvbihlKXt0aGlzLnNyYz10W2VdfSksbi5maW5kKFwiLmstd2luZG93LXRpdGxlXCIpLmNzcyhvP1wibGVmdFwiOlwicmlnaHRcIixuLmZpbmQoXCIuay13aW5kb3ctYWN0aW9uc1wiKS5vdXRlcldpZHRoKCkrMTApLGkuY3NzKFwidmlzaWJpbGl0eVwiLFwiXCIpLnNob3coKSxpLmZpbmQoXCJbZGF0YS1yb2xlPWVkaXRvcl1cIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcImtlbmRvRWRpdG9yXCIpO3QmJnQucmVmcmVzaCgpfSksbj1pPW51bGx9fSksWj17d3JhcHBlcjptKFwiPGRpdiBjbGFzcz0nay13aWRnZXQgay13aW5kb3cnIC8+XCIpLGFjdGlvbjptKFwiPGEgcm9sZT0nYnV0dG9uJyBocmVmPSdcXFxcIycgY2xhc3M9J2std2luZG93LWFjdGlvbiBrLWxpbmsnPjxzcGFuIHJvbGU9J3ByZXNlbnRhdGlvbicgY2xhc3M9J2staWNvbiBrLWktIz0gbmFtZS50b0xvd2VyQ2FzZSgpICMnPiM9IG5hbWUgIzwvc3Bhbj48L2E+XCIpLHRpdGxlYmFyOm0oXCI8ZGl2IGNsYXNzPSdrLXdpbmRvdy10aXRsZWJhciBrLWhlYWRlcic+Jm5ic3A7PHNwYW4gY2xhc3M9J2std2luZG93LXRpdGxlJz4jPSB0aXRsZSAjPC9zcGFuPjxkaXYgY2xhc3M9J2std2luZG93LWFjdGlvbnMnIC8+PC9kaXY+XCIpLG92ZXJsYXk6XCI8ZGl2IGNsYXNzPSdrLW92ZXJsYXknIC8+XCIsY29udGVudEZyYW1lOm0oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB0aXRsZT0nIz0gdGl0bGUgIycgY2xhc3M9J1wiK1MrXCInIHNyYz0nIz0gY29udGVudC51cmwgIyc+VGhpcyBwYWdlIHJlcXVpcmVzIGZyYW1lcyBpbiBvcmRlciB0byBzaG93IGNvbnRlbnQ8L2lmcmFtZT5cIikscmVzaXplSGFuZGxlOm0oXCI8ZGl2IGNsYXNzPSdrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtIz0gZGF0YSAjJz48L2Rpdj5cIil9O2EucHJvdG90eXBlPXthZGRPdmVybGF5OmZ1bmN0aW9uKCl7dGhpcy5vd25lci53cmFwcGVyLmFwcGVuZChaLm92ZXJsYXkpfSxyZW1vdmVPdmVybGF5OmZ1bmN0aW9uKCl7dGhpcy5vd25lci53cmFwcGVyLmZpbmQoQykucmVtb3ZlKCl9LGRyYWdzdGFydDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vd25lcixyPWkud3JhcHBlcjtuLmVsZW1lbnRQYWRkaW5nPXBhcnNlSW50KHIuY3NzKFwicGFkZGluZy10b3BcIiksMTApLG4uaW5pdGlhbFBvc2l0aW9uPWwuZ2V0T2Zmc2V0KHIsXCJwb3NpdGlvblwiKSxuLnJlc2l6ZURpcmVjdGlvbj10LmN1cnJlbnRUYXJnZXQucHJvcChcImNsYXNzTmFtZVwiKS5yZXBsYWNlKFwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLVwiLFwiXCIpLG4uaW5pdGlhbFNpemU9e3dpZHRoOnIud2lkdGgoKSxoZWlnaHQ6ci5oZWlnaHQoKX0sbi5jb250YWluZXJPZmZzZXQ9bC5nZXRPZmZzZXQoaS5hcHBlbmRUbyxcInBvc2l0aW9uXCIpLHIuY2hpbGRyZW4oeCkubm90KHQuY3VycmVudFRhcmdldCkuaGlkZSgpLGUodikuY3NzKEksdC5jdXJyZW50VGFyZ2V0LmNzcyhJKSl9LGRyYWc6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8sYT10aGlzLHM9YS5vd25lcixsPXMud3JhcHBlcixjPXMub3B0aW9ucyxkPWEucmVzaXplRGlyZWN0aW9uLHU9YS5jb250YWluZXJPZmZzZXQsaD1hLmluaXRpYWxQb3NpdGlvbixwPWEuaW5pdGlhbFNpemUsZj1NYXRoLm1heChlLngubG9jYXRpb24sdS5sZWZ0KSxnPU1hdGgubWF4KGUueS5sb2NhdGlvbix1LnRvcCk7ZC5pbmRleE9mKFwiZVwiKT49MD8odD1mLWgubGVmdCxsLndpZHRoKGkodCxjLm1pbldpZHRoLGMubWF4V2lkdGgpKSk6ZC5pbmRleE9mKFwid1wiKT49MCYmKG89aC5sZWZ0K3Aud2lkdGgsdD1pKG8tZixjLm1pbldpZHRoLGMubWF4V2lkdGgpLGwuY3NzKHtsZWZ0Om8tdC11LmxlZnQsd2lkdGg6dH0pKSxkLmluZGV4T2YoXCJzXCIpPj0wPyhuPWctaC50b3AtYS5lbGVtZW50UGFkZGluZyxsLmhlaWdodChpKG4sYy5taW5IZWlnaHQsYy5tYXhIZWlnaHQpKSk6ZC5pbmRleE9mKFwiblwiKT49MCYmKHI9aC50b3ArcC5oZWlnaHQsbj1pKHItZyxjLm1pbkhlaWdodCxjLm1heEhlaWdodCksbC5jc3Moe3RvcDpyLW4tdS50b3AsaGVpZ2h0Om59KSksdCYmKHMub3B0aW9ucy53aWR0aD10K1wicHhcIiksbiYmKHMub3B0aW9ucy5oZWlnaHQ9bitcInB4XCIpLHMucmVzaXplKCl9LGRyYWdlbmQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ub3duZXIscj1pLndyYXBwZXI7cmV0dXJuIHIuY2hpbGRyZW4oeCkubm90KHQuY3VycmVudFRhcmdldCkuc2hvdygpLGUodikuY3NzKEksXCJcIiksaS50b3VjaFNjcm9sbGVyJiZpLnRvdWNoU2Nyb2xsZXIucmVzZXQoKSwyNz09dC5rZXlDb2RlJiZyLmNzcyhuLmluaXRpYWxQb3NpdGlvbikuY3NzKG4uaW5pdGlhbFNpemUpLGkudHJpZ2dlcihIKSwhMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2RyYWdnYWJsZSYmdGhpcy5fZHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9kcmFnZ2FibGU9dGhpcy5vd25lcj1udWxsfX0scy5wcm90b3R5cGU9e2RyYWdzdGFydDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm93bmVyLGk9bi5lbGVtZW50LHI9aS5maW5kKFwiLmstd2luZG93LWFjdGlvbnNcIiksbz1sLmdldE9mZnNldChuLmFwcGVuZFRvKTtuLnRyaWdnZXIoTiksbi5pbml0aWFsV2luZG93UG9zaXRpb249bC5nZXRPZmZzZXQobi53cmFwcGVyLFwicG9zaXRpb25cIiksbi5zdGFydFBvc2l0aW9uPXtsZWZ0OnQueC5jbGllbnQtbi5pbml0aWFsV2luZG93UG9zaXRpb24ubGVmdCx0b3A6dC55LmNsaWVudC1uLmluaXRpYWxXaW5kb3dQb3NpdGlvbi50b3B9LG4ubWluTGVmdFBvc2l0aW9uPXIubGVuZ3RoPjA/ci5vdXRlcldpZHRoKCkrcGFyc2VJbnQoci5jc3MoXCJyaWdodFwiKSwxMCktaS5vdXRlcldpZHRoKCk6MjAtaS5vdXRlcldpZHRoKCksbi5taW5MZWZ0UG9zaXRpb24tPW8ubGVmdCxuLm1pblRvcFBvc2l0aW9uPS1vLnRvcCxuLndyYXBwZXIuYXBwZW5kKFoub3ZlcmxheSkuY2hpbGRyZW4oeCkuaGlkZSgpLGUodikuY3NzKEksdC5jdXJyZW50VGFyZ2V0LmNzcyhJKSl9LGRyYWc6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5vd25lcixpPW4ub3B0aW9ucy5wb3NpdGlvbixyPU1hdGgubWF4KHQueS5jbGllbnQtbi5zdGFydFBvc2l0aW9uLnRvcCxuLm1pblRvcFBvc2l0aW9uKSxvPU1hdGgubWF4KHQueC5jbGllbnQtbi5zdGFydFBvc2l0aW9uLmxlZnQsbi5taW5MZWZ0UG9zaXRpb24pLGE9e2xlZnQ6byx0b3A6cn07ZShuLndyYXBwZXIpLmNzcyhhKSxpLnRvcD1yLGkubGVmdD1vfSxfZmluaXNoRHJhZzpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3duZXI7dC53cmFwcGVyLmNoaWxkcmVuKHgpLnRvZ2dsZSghdC5vcHRpb25zLmlzTWluaW1pemVkKS5lbmQoKS5maW5kKEMpLnJlbW92ZSgpLGUodikuY3NzKEksXCJcIil9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oZSl7dGhpcy5fZmluaXNoRHJhZygpLGUuY3VycmVudFRhcmdldC5jbG9zZXN0KHkpLmNzcyh0aGlzLm93bmVyLmluaXRpYWxXaW5kb3dQb3NpdGlvbil9LGRyYWdlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmluaXNoRHJhZygpLHRoaXMub3duZXIudHJpZ2dlcihWKSwhMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2RyYWdnYWJsZSYmdGhpcy5fZHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9kcmFnZ2FibGU9dGhpcy5vd25lcj1udWxsfX0sbC51aS5wbHVnaW4oSil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdCxuLGk9ZS5maW5kKGsoXCJwb3BvdmVyXCIpKSxyPXMucm9sZXM7Zm9yKHQ9MCxuPWkubGVuZ3RoO24+dDt0Kyspby5pbml0V2lkZ2V0KGlbdF0se30scil9ZnVuY3Rpb24gaShlKXtvLnRyaWdnZXJlZEJ5SW5wdXQoZSl8fGUucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiByKHQpe3QuZWFjaChmdW5jdGlvbigpe28uaW5pdFdpZGdldChlKHRoaXMpLHt9LHMucm9sZXMpfSl9dmFyIG89d2luZG93LmtlbmRvLGE9by5tb2JpbGUscz1hLnVpLGw9by5hdHRyLGM9cy5XaWRnZXQsZD1vLlZpZXdDbG9uZSx1PVwiaW5pdFwiLGg9JzxkaXYgc3R5bGU9XCJoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgei1pbmRleDogMjAwMDA7IGRpc3BsYXk6IG5vbmVcIiAvPicscD1cImJlZm9yZVNob3dcIixmPVwic2hvd1wiLGc9XCJhZnRlclNob3dcIixtPVwiYmVmb3JlSGlkZVwiLHY9XCJ0cmFuc2l0aW9uRW5kXCIsXz1cInRyYW5zaXRpb25TdGFydFwiLHk9XCJoaWRlXCIsdz1cImRlc3Ryb3lcIixiPW8uYXR0clZhbHVlLGs9by5yb2xlU2VsZWN0b3IseD1vLmRpcmVjdGl2ZVNlbGVjdG9yLEM9by5jb21waWxlTW9iaWxlRGlyZWN0aXZlLFM9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXtjLmZuLmluaXQuY2FsbCh0aGlzLHQsbiksdGhpcy5wYXJhbXM9e30sZS5leHRlbmQodGhpcyxuKSx0aGlzLnRyYW5zaXRpb249dGhpcy50cmFuc2l0aW9ufHx0aGlzLmRlZmF1bHRUcmFuc2l0aW9uLHRoaXMuX2lkKCksdGhpcy5vcHRpb25zLiRhbmd1bGFyP3RoaXMuX292ZXJsYXkoKToodGhpcy5fbGF5b3V0KCksdGhpcy5fb3ZlcmxheSgpLHRoaXMuX3Njcm9sbGVyKCksdGhpcy5fbW9kZWwoKSl9LGV2ZW50czpbdSxwLGYsZyxtLHksdyxfLHZdLG9wdGlvbnM6e25hbWU6XCJWaWV3XCIsdGl0bGU6XCJcIixsYXlvdXQ6bnVsbCxnZXRMYXlvdXQ6ZS5ub29wLHJlbG9hZDohMSx0cmFuc2l0aW9uOlwiXCIsZGVmYXVsdFRyYW5zaXRpb246XCJcIix1c2VOYXRpdmVTY3JvbGxpbmc6ITEsc3RyZXRjaDohMSx6b29tOiExLG1vZGVsOm51bGwsbW9kZWxTY29wZTp3aW5kb3csc2Nyb2xsZXI6e30saW5pdFdpZGdldHM6ITB9LGVuYWJsZTpmdW5jdGlvbihlKXt0PT09ZSYmKGU9ITApLGU/dGhpcy5vdmVybGF5LmhpZGUoKTp0aGlzLm92ZXJsYXkuc2hvdygpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5sYXlvdXQmJnRoaXMubGF5b3V0LmRldGFjaCh0aGlzKSx0aGlzLnRyaWdnZXIodyksYy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5zY3JvbGxlciYmdGhpcy5zY3JvbGxlci5kZXN0cm95KCksdGhpcy5vcHRpb25zLiRhbmd1bGFyJiZ0aGlzLmVsZW1lbnQuc2NvcGUoKS4kZGVzdHJveSgpLG8uZGVzdHJveSh0aGlzLmVsZW1lbnQpfSxwdXJnZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpLHRoaXMuZWxlbWVudC5yZW1vdmUoKX0sdHJpZ2dlckJlZm9yZVNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmlnZ2VyKHAse3ZpZXc6dGhpc30pPyExOiEwfSxzaG93U3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQ7ZS5jc3MoXCJkaXNwbGF5XCIsXCJcIiksdGhpcy5pbml0ZWQ/dGhpcy5faW52b2tlTmdDb250cm9sbGVyKCk6KHRoaXMuaW5pdGVkPSEwLHRoaXMudHJpZ2dlcih1LHt2aWV3OnRoaXN9KSksdGhpcy5sYXlvdXQmJnRoaXMubGF5b3V0LmF0dGFjaCh0aGlzKSx0aGlzLl9wYWRJZk5hdGl2ZVNjcm9sbGluZygpLHRoaXMudHJpZ2dlcihmLHt2aWV3OnRoaXN9KSxvLnJlc2l6ZShlKX0sc2hvd0VuZDpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihnLHt2aWV3OnRoaXN9KSx0aGlzLl9wYWRJZk5hdGl2ZVNjcm9sbGluZygpfSxoaWRlU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIobSx7dmlldzp0aGlzfSl9LGhpZGVFbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZWxlbWVudC5oaWRlKCksZS50cmlnZ2VyKHkse3ZpZXc6ZX0pLGUubGF5b3V0JiZlLmxheW91dC50cmlnZ2VyKHkse3ZpZXc6ZSxsYXlvdXQ6ZS5sYXlvdXR9KX0sYmVmb3JlVHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIoXyx7dHlwZTplfSl9LGFmdGVyVHJhbnNpdGlvbjpmdW5jdGlvbihlKXt0aGlzLnRyaWdnZXIodix7dHlwZTplfSl9LF9wYWRJZk5hdGl2ZVNjcm9sbGluZzpmdW5jdGlvbigpe2lmKGEuYXBwTGV2ZWxOYXRpdmVTY3JvbGxpbmcoKSl7dmFyIGU9by5zdXBwb3J0Lm1vYmlsZU9TJiZvLnN1cHBvcnQubW9iaWxlT1MuYW5kcm9pZCx0PWEuYXBwbGljYXRpb24ub3MuYW5kcm9pZHx8YS5hcHBsaWNhdGlvbi5za2luKCkuaW5kZXhPZihcImFuZHJvaWRcIik+LTEsbj1lfHx0P1wiZm9vdGVyXCI6XCJoZWFkZXJcIixpPWV8fHQ/XCJoZWFkZXJcIjpcImZvb3RlclwiO3RoaXMuY29udGVudC5jc3Moe3BhZGRpbmdUb3A6dGhpc1tuXS5oZWlnaHQoKSxwYWRkaW5nQm90dG9tOnRoaXNbaV0uaGVpZ2h0KCl9KX19LGNvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5vcHRpb25zLnN0cmV0Y2g/ZS5jb250ZW50OmUuc2Nyb2xsZXJDb250ZW50fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZCh0aGlzKX0sX3Njcm9sbGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczthLmFwcExldmVsTmF0aXZlU2Nyb2xsaW5nKCl8fCh0Lm9wdGlvbnMuc3RyZXRjaD90LmNvbnRlbnQuYWRkQ2xhc3MoXCJrbS1zdHJldGNoZWQtdmlld1wiKToodC5jb250ZW50LmtlbmRvTW9iaWxlU2Nyb2xsZXIoZS5leHRlbmQodC5vcHRpb25zLnNjcm9sbGVyLHt6b29tOnQub3B0aW9ucy56b29tLHVzZU5hdGl2ZTp0Lm9wdGlvbnMudXNlTmF0aXZlU2Nyb2xsaW5nfSkpLHQuc2Nyb2xsZXI9dC5jb250ZW50LmRhdGEoXCJrZW5kb01vYmlsZVNjcm9sbGVyXCIpLHQuc2Nyb2xsZXJDb250ZW50PXQuc2Nyb2xsZXIuc2Nyb2xsRWxlbWVudCksby5zdXBwb3J0LmtpbmV0aWNTY3JvbGxOZWVkZWQmJihlKHQuZWxlbWVudCkub24oXCJ0b3VjaG1vdmVcIixcIi5rbS1oZWFkZXJcIixpKSx0Lm9wdGlvbnMudXNlTmF0aXZlU2Nyb2xsaW5nfHxlKHQuZWxlbWVudCkub24oXCJ0b3VjaG1vdmVcIixcIi5rbS1jb250ZW50XCIsaSkpKX0sX21vZGVsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZWxlbWVudCxpPWUub3B0aW9ucy5tb2RlbDtcInN0cmluZ1wiPT10eXBlb2YgaSYmKGk9by5nZXR0ZXIoaSkoZS5vcHRpb25zLm1vZGVsU2NvcGUpKSxlLm1vZGVsPWksbih0KSxlLmVsZW1lbnQuY3NzKFwiZGlzcGxheVwiLFwiXCIpLGUub3B0aW9ucy5pbml0V2lkZ2V0cyYmKGk/by5iaW5kKHQsaSxzLG8udWksby5kYXRhdml6LnVpKTphLmluaXQodC5jaGlsZHJlbigpKSksZS5lbGVtZW50LmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIil9LF9pZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PWUuYXR0cihcImlkXCIpfHxcIlwiO3RoaXMuaWQ9YihlLFwidXJsXCIpfHxcIiNcIit0LFwiI1wiPT10aGlzLmlkJiYodGhpcy5pZD1vLmd1aWQoKSxlLmF0dHIoXCJpZFwiLHRoaXMuaWQpKX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlPWsoXCJjb250ZW50XCIpLHQ9dGhpcy5lbGVtZW50O3QuYWRkQ2xhc3MoXCJrbS12aWV3XCIpLHRoaXMuaGVhZGVyPXQuY2hpbGRyZW4oayhcImhlYWRlclwiKSkuYWRkQ2xhc3MoXCJrbS1oZWFkZXJcIiksdGhpcy5mb290ZXI9dC5jaGlsZHJlbihrKFwiZm9vdGVyXCIpKS5hZGRDbGFzcyhcImttLWZvb3RlclwiKSx0LmNoaWxkcmVuKGUpWzBdfHx0LndyYXBJbm5lcihcIjxkaXYgXCIrbChcInJvbGVcIikrJz1cImNvbnRlbnRcIj48L2Rpdj4nKSx0aGlzLmNvbnRlbnQ9dC5jaGlsZHJlbihrKFwiY29udGVudFwiKSkuYWRkQ2xhc3MoXCJrbS1jb250ZW50XCIpLHRoaXMuZWxlbWVudC5wcmVwZW5kKHRoaXMuaGVhZGVyKS5hcHBlbmQodGhpcy5mb290ZXIpLHRoaXMubGF5b3V0PXRoaXMub3B0aW9ucy5nZXRMYXlvdXQodGhpcy5sYXlvdXQpLHRoaXMubGF5b3V0JiZ0aGlzLmxheW91dC5zZXR1cCh0aGlzKX0sX292ZXJsYXk6ZnVuY3Rpb24oKXt0aGlzLm92ZXJsYXk9ZShoKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpfSxfaW52b2tlTmdDb250cm9sbGVyOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMuZWxlbWVudDt0aGlzLm9wdGlvbnMuJGFuZ3VsYXImJihlPW4uY29udHJvbGxlcigpLHQ9bi5zY29wZSgpLGUmJnQuJGFwcGx5KGZ1bmN0aW9uKCl7bi5pbmplY3RvcigpLmludm9rZShlLmNvbnN0cnVjdG9yLG51bGwseyRzY29wZTp0fSl9KSl9fSksVD1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2MuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSxlPXRoaXMuZWxlbWVudCx0aGlzLmhlYWRlcj1lLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcImhlYWRlclwiKSkuYWRkQ2xhc3MoXCJrbS1oZWFkZXJcIiksdGhpcy5mb290ZXI9ZS5jaGlsZHJlbih0aGlzLl9sb2NhdGUoXCJmb290ZXJcIikpLmFkZENsYXNzKFwia20tZm9vdGVyXCIpLHRoaXMuZWxlbWVudHM9dGhpcy5oZWFkZXIuYWRkKHRoaXMuZm9vdGVyKSxuKGUpLHRoaXMub3B0aW9ucy4kYW5ndWxhcnx8by5tb2JpbGUuaW5pdCh0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSksdGhpcy5lbGVtZW50LmRldGFjaCgpLHRoaXMudHJpZ2dlcih1LHtsYXlvdXQ6dGhpc30pfSxfbG9jYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnMuJGFuZ3VsYXI/eChlKTprKGUpfSxvcHRpb25zOntuYW1lOlwiTGF5b3V0XCIsaWQ6bnVsbCxwbGF0Zm9ybTpudWxsfSxldmVudHM6W3UsZix5XSxzZXR1cDpmdW5jdGlvbihlKXtlLmhlYWRlclswXXx8KGUuaGVhZGVyPXRoaXMuaGVhZGVyKSxlLmZvb3RlclswXXx8KGUuZm9vdGVyPXRoaXMuZm9vdGVyKX0sZGV0YWNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5oZWFkZXI9PT10LmhlYWRlciYmdC5oZWFkZXJbMF0mJmUuZWxlbWVudC5wcmVwZW5kKHQuaGVhZGVyLmRldGFjaCgpWzBdLmNsb25lTm9kZSghMCkpLGUuZm9vdGVyPT09dC5mb290ZXImJnQuZm9vdGVyLmxlbmd0aCYmZS5lbGVtZW50LmFwcGVuZCh0LmZvb3Rlci5kZXRhY2goKVswXS5jbG9uZU5vZGUoITApKX0sYXR0YWNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmN1cnJlbnRWaWV3O24mJnQuZGV0YWNoKG4pLGUuaGVhZGVyPT09dC5oZWFkZXImJih0LmhlYWRlci5kZXRhY2goKSxlLmVsZW1lbnQuY2hpbGRyZW4oayhcImhlYWRlclwiKSkucmVtb3ZlKCksZS5lbGVtZW50LnByZXBlbmQodC5oZWFkZXIpKSxlLmZvb3Rlcj09PXQuZm9vdGVyJiYodC5mb290ZXIuZGV0YWNoKCksZS5lbGVtZW50LmNoaWxkcmVuKGsoXCJmb290ZXJcIikpLnJlbW92ZSgpLGUuZWxlbWVudC5hcHBlbmQodC5mb290ZXIpKSx0LnRyaWdnZXIoZix7bGF5b3V0OnQsdmlldzplfSksdC5jdXJyZW50Vmlldz1lfX0pLEQ9by5PYnNlcnZhYmxlLEE9Lzxib2R5W14+XSo+KChbXFx1MDAwYVxcdTAwMGRcXHUyMDI4XFx1MjAyOV18LikqKTxcXC9ib2R5Pi9pLEU9XCJsb2FkU3RhcnRcIixNPVwibG9hZENvbXBsZXRlXCIsUD1cInNob3dTdGFydFwiLEk9XCJzYW1lVmlld1JlcXVlc3RlZFwiLHo9XCJ2aWV3U2hvd1wiLEY9XCJ2aWV3VHlwZURldGVybWluZWRcIixSPVwiYWZ0ZXJcIixCPUQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3ZhciBuLGksYSxzLGw9dGhpcztpZihELmZuLmluaXQuY2FsbChsKSxlLmV4dGVuZChsLHQpLGwuc2FuZGJveD1lKFwiPGRpdiAvPlwiKSxhPWwuY29udGFpbmVyLG49bC5faGlkZVZpZXdzKGEpLGwucm9vdFZpZXc9bi5maXJzdCgpLCFsLnJvb3RWaWV3WzBdJiZ0LnJvb3ROZWVkZWQpdGhyb3cgaT1hWzBdPT1vLm1vYmlsZS5hcHBsaWNhdGlvbi5lbGVtZW50WzBdPydZb3VyIGtlbmRvIG1vYmlsZSBhcHBsaWNhdGlvbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gYW55IGRpcmVjdCBjaGlsZCBlbGVtZW50cyB3aXRoIGRhdGEtcm9sZT1cInZpZXdcIiBhdHRyaWJ1dGUgc2V0LiBNYWtlIHN1cmUgdGhhdCB5b3UgaW5zdGFudGlhdGUgdGhlIG1vYmlsZSBhcHBsaWNhdGlvbiB1c2luZyB0aGUgY29ycmVjdCBjb250YWluZXIuJzonWW91ciBwYW5lIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBhbnkgZGlyZWN0IGNoaWxkIGVsZW1lbnRzIHdpdGggZGF0YS1yb2xlPVwidmlld1wiIGF0dHJpYnV0ZSBzZXQuJyxFcnJvcihpKTtsLmxheW91dHM9e30sbC52aWV3Q29udGFpbmVyPW5ldyBvLlZpZXdDb250YWluZXIobC5jb250YWluZXIpLGwudmlld0NvbnRhaW5lci5iaW5kKFwiYWNjZXB0ZWRcIixmdW5jdGlvbihlKXtlLnZpZXcucGFyYW1zPWwucGFyYW1zfSksbC52aWV3Q29udGFpbmVyLmJpbmQoXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKGUpe2wudHJpZ2dlcih6LHt2aWV3OmUudmlld30pfSksbC52aWV3Q29udGFpbmVyLmJpbmQoUixmdW5jdGlvbigpe2wudHJpZ2dlcihSKX0pLHRoaXMuZ2V0TGF5b3V0UHJveHk9ZS5wcm94eSh0aGlzLFwiX2dldExheW91dFwiKSxsLl9zZXR1cExheW91dHMoYSkscz1hLmNoaWxkcmVuKGwuX2xvY2F0ZShcIm1vZGFsdmlldyBkcmF3ZXJcIikpLGwuJGFuZ3VsYXI/cy5lYWNoKGZ1bmN0aW9uKHQsbil7QyhlKG4pLGZ1bmN0aW9uKCl7fSl9KTpyKHMpLHRoaXMuYmluZCh0aGlzLmV2ZW50cyx0KX0sZXZlbnRzOltQLFIseixFLE0sSSxGXSxkZXN0cm95OmZ1bmN0aW9uKCl7by5kZXN0cm95KHRoaXMuY29udGFpbmVyKTtmb3IodmFyIGUgaW4gdGhpcy5sYXlvdXRzKXRoaXMubGF5b3V0c1tlXS5kZXN0cm95KCl9LHZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3Q29udGFpbmVyLnZpZXd9LHNob3dWaWV3OmZ1bmN0aW9uKGUsdCxuKXtpZihlPWUucmVwbGFjZShSZWdFeHAoXCJeXCIrdGhpcy5yZW1vdGVWaWV3VVJMUHJlZml4KSxcIlwiKSxcIlwiPT09ZSYmdGhpcy5yZW1vdGVWaWV3VVJMUHJlZml4JiYoZT1cIi9cIiksZT09PXRoaXMudXJsKXJldHVybiB0aGlzLnRyaWdnZXIoSSksITE7dGhpcy50cmlnZ2VyKFApO3ZhciBpPXRoaXMscj1mdW5jdGlvbihuKXtyZXR1cm4gaS52aWV3Q29udGFpbmVyLnNob3cobix0LGUpfSxhPWkuX2ZpbmRWaWV3RWxlbWVudChlKSxzPW8ud2lkZ2V0SW5zdGFuY2UoYSk7cmV0dXJuIGkudXJsPWUsaS5wYXJhbXM9bixzJiZzLnJlbG9hZCYmKHMucHVyZ2UoKSxhPVtdKSx0aGlzLnRyaWdnZXIoRix7cmVtb3RlOjA9PT1hLmxlbmd0aCx1cmw6ZX0pLGFbMF0/KHN8fChzPWkuX2NyZWF0ZVZpZXcoYSkpLHIocykpOih0aGlzLnNlcnZlck5hdmlnYXRpb24/bG9jYXRpb24uaHJlZj1lOmkuX2xvYWRWaWV3KGUsciksITApfSxhcHBlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLG8sYT10aGlzLnNhbmRib3gscz0odHx8XCJcIikuc3BsaXQoXCI/XCIpWzBdLGM9dGhpcy5jb250YWluZXI7cmV0dXJuIEEudGVzdChlKSYmKGU9UmVnRXhwLiQxKSxhWzBdLmlubmVySFRNTD1lLGMuYXBwZW5kKGEuY2hpbGRyZW4oXCJzY3JpcHQsIHN0eWxlXCIpKSxuPXRoaXMuX2hpZGVWaWV3cyhhKSxvPW4uZmlyc3QoKSxvLmxlbmd0aHx8KG49bz1hLndyYXBJbm5lcihcIjxkaXYgZGF0YS1yb2xlPXZpZXcgLz5cIikuY2hpbGRyZW4oKSkscyYmby5oaWRlKCkuYXR0cihsKFwidXJsXCIpLHMpLHRoaXMuX3NldHVwTGF5b3V0cyhhKSxpPWEuY2hpbGRyZW4odGhpcy5fbG9jYXRlKFwibW9kYWx2aWV3IGRyYXdlclwiKSksYy5hcHBlbmQoYS5jaGlsZHJlbih0aGlzLl9sb2NhdGUoXCJsYXlvdXQgbW9kYWx2aWV3IGRyYXdlclwiKSkuYWRkKG4pKSxyKGkpLHRoaXMuX2NyZWF0ZVZpZXcobyl9LF9sb2NhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuJGFuZ3VsYXI/eChlKTprKGUpfSxfZmluZFZpZXdFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5zcGxpdChcIj9cIilbMF07cmV0dXJuIG4/KHQ9dGhpcy5jb250YWluZXIuY2hpbGRyZW4oXCJbXCIrbChcInVybFwiKStcIj0nXCIrbitcIiddXCIpLHRbMF18fC0xIT09bi5pbmRleE9mKFwiL1wiKXx8KHQ9dGhpcy5jb250YWluZXIuY2hpbGRyZW4oXCIjXCI9PT1uLmNoYXJBdCgwKT9uOlwiI1wiK24pKSx0KTp0aGlzLnJvb3RWaWV3fSxfY3JlYXRlVmlldzpmdW5jdGlvbihlKXtpZih0aGlzLiRhbmd1bGFyKXt2YXIgdD10aGlzO3JldHVybiBDKGUsZnVuY3Rpb24oZSl7ZS52aWV3T3B0aW9ucz17ZGVmYXVsdFRyYW5zaXRpb246dC50cmFuc2l0aW9uLGxvYWRlcjp0LmxvYWRlcixjb250YWluZXI6dC5jb250YWluZXIsZ2V0TGF5b3V0OnQuZ2V0TGF5b3V0UHJveHl9fSl9cmV0dXJuIG8uaW5pdFdpZGdldChlLHtkZWZhdWx0VHJhbnNpdGlvbjp0aGlzLnRyYW5zaXRpb24sbG9hZGVyOnRoaXMubG9hZGVyLGNvbnRhaW5lcjp0aGlzLmNvbnRhaW5lcixnZXRMYXlvdXQ6dGhpcy5nZXRMYXlvdXRQcm94eSxtb2RlbFNjb3BlOnRoaXMubW9kZWxTY29wZSxyZWxvYWQ6YihlLFwicmVsb2FkXCIpfSxzLnJvbGVzKX0sX2dldExheW91dDpmdW5jdGlvbihlKXtyZXR1cm5cIlwiPT09ZT9udWxsOmU/dGhpcy5sYXlvdXRzW2VdOnRoaXMubGF5b3V0c1t0aGlzLmxheW91dF19LF9sb2FkVmlldzpmdW5jdGlvbih0LG4pe3RoaXMuX3hociYmdGhpcy5feGhyLmFib3J0KCksdGhpcy50cmlnZ2VyKEUpLHRoaXMuX3hocj1lLmdldChvLmFic29sdXRlVVJMKHQsdGhpcy5yZW1vdGVWaWV3VVJMUHJlZml4KSxcImh0bWxcIikuYWx3YXlzKGUucHJveHkodGhpcyxcIl94aHJDb21wbGV0ZVwiLG4sdCkpfSxfeGhyQ29tcGxldGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPSEwO1wib2JqZWN0XCI9PXR5cGVvZiBuJiYoaT0wPT09bi5zdGF0dXMmJm4ucmVzcG9uc2VUZXh0Lmxlbmd0aD4wLG49bi5yZXNwb25zZVRleHQpLHRoaXMudHJpZ2dlcihNKSxpJiZlKHRoaXMuYXBwZW5kKG4sdCkpfSxfaGlkZVZpZXdzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkcmVuKHRoaXMuX2xvY2F0ZShcInZpZXcgc3BsaXR2aWV3XCIpKS5oaWRlKCl9LF9zZXR1cExheW91dHM6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzO3QuY2hpbGRyZW4oaS5fbG9jYXRlKFwibGF5b3V0XCIpKS5lYWNoKGZ1bmN0aW9uKCl7bj1pLiRhbmd1bGFyP0MoZSh0aGlzKSk6by5pbml0V2lkZ2V0KGUodGhpcykse30scy5yb2xlcyk7dmFyIHQ9bi5vcHRpb25zLnBsYXRmb3JtO3QmJnQhPT1hLmFwcGxpY2F0aW9uLm9zLm5hbWU/bi5kZXN0cm95KCk6aS5sYXlvdXRzW24ub3B0aW9ucy5pZF09bn0pfX0pO28ubW9iaWxlLlZpZXdFbmdpbmU9QixzLnBsdWdpbihTKSxzLnBsdWdpbihUKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5tb2JpbGUudWksaT1uLldpZGdldCxyPWUubWFwKHQuZXZlbnRNYXAsZnVuY3Rpb24oZSl7cmV0dXJuIGV9KS5qb2luKFwiIFwiKS5zcGxpdChcIiBcIiksbz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciByPXRoaXMsbz1lKCc8ZGl2IGNsYXNzPVwia20tbG9hZGVyXCI+PHNwYW4gY2xhc3M9XCJrbS1sb2FkaW5nIGttLXNwaW5cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJrbS1sb2FkaW5nLWxlZnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJrbS1sb2FkaW5nLXJpZ2h0XCI+PC9zcGFuPjwvZGl2PicpO2kuZm4uaW5pdC5jYWxsKHIsbyxuKSxyLmNvbnRhaW5lcj10LHIuY2FwdHVyZUV2ZW50cz0hMSxyLl9hdHRhY2hDYXB0dXJlKCksby5hcHBlbmQoci5vcHRpb25zLmxvYWRpbmcpLmhpZGUoKS5hcHBlbmRUbyh0KX0sb3B0aW9uczp7bmFtZTpcIkxvYWRlclwiLGxvYWRpbmc6XCI8aDE+TG9hZGluZy4uLjwvaDE+XCIsdGltZW91dDoxMDB9LHNob3c6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9sb2FkaW5nKSxlLm9wdGlvbnMubG9hZGluZyE9PSExJiYoZS5jYXB0dXJlRXZlbnRzPSEwLGUuX2xvYWRpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe2UuZWxlbWVudC5zaG93KCl9LGUub3B0aW9ucy50aW1lb3V0KSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmNhcHR1cmVFdmVudHM9ITEsY2xlYXJUaW1lb3V0KHRoaXMuX2xvYWRpbmcpLHRoaXMuZWxlbWVudC5oaWRlKCl9LGNoYW5nZU1lc3NhZ2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmxvYWRpbmc9ZSx0aGlzLmVsZW1lbnQuZmluZChcIj5oMVwiKS5odG1sKGUpfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jYXB0dXJlRXZlbnRzPSEwLHRoaXMuY29udGFpbmVyLmNzcyhcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpfSx0cmFuc2l0aW9uRG9uZTpmdW5jdGlvbigpe3RoaXMuY2FwdHVyZUV2ZW50cz0hMSx0aGlzLmNvbnRhaW5lci5jc3MoXCJwb2ludGVyLWV2ZW50c1wiLFwiXCIpfSxfYXR0YWNoQ2FwdHVyZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7bi5jYXB0dXJlRXZlbnRzJiZlLnByZXZlbnREZWZhdWx0KCl9dmFyIHQsbj10aGlzO2ZvcihuLmNhcHR1cmVFdmVudHM9ITEsdD0wO3IubGVuZ3RoPnQ7dCsrKW4uY29udGFpbmVyWzBdLmFkZEV2ZW50TGlzdGVuZXIoclt0XSxlLCEwKX19KTtuLnBsdWdpbihvKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cua2VuZG8saT1uLm1vYmlsZSxyPW4ucm9sZVNlbGVjdG9yLG89aS51aSxhPW8uV2lkZ2V0LHM9aS5WaWV3RW5naW5lLGw9by5WaWV3LGM9aS51aS5Mb2FkZXIsZD1cImV4dGVybmFsXCIsdT1cImhyZWZcIixoPVwiIyFcIixwPVwibmF2aWdhdGVcIixmPVwidmlld1Nob3dcIixnPVwic2FtZVZpZXdSZXF1ZXN0ZWRcIixtPW4uc3VwcG9ydC5tb2JpbGVPUyx2PW0uaW9zJiYhbS5hcHBNb2RlJiZtLmZsYXRWZXJzaW9uPj03MDAsXz0vcG9wb3ZlcnxhY3Rpb25zaGVldHxtb2RhbHZpZXd8ZHJhd2VyLyx5PVwiIzpiYWNrXCIsdz1uLmF0dHJWYWx1ZSxiPVwiYnV0dG9uIGJhY2tidXR0b24gZGV0YWlsYnV0dG9uIGxpc3R2aWV3LWxpbmtcIixrPVwidGFiXCIseD1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXM7YS5mbi5pbml0LmNhbGwoaSxlLHQpLHQ9aS5vcHRpb25zLGU9aS5lbGVtZW50LGUuYWRkQ2xhc3MoXCJrbS1wYW5lXCIpLGkub3B0aW9ucy5jb2xsYXBzaWJsZSYmZS5hZGRDbGFzcyhcImttLWNvbGxhcHNpYmxlLXBhbmVcIiksdGhpcy5oaXN0b3J5PVtdLHRoaXMuaGlzdG9yeUNhbGxiYWNrPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1pLnRyYW5zaXRpb247cmV0dXJuIGkudHJhbnNpdGlvbj1udWxsLHYmJm4mJihyPVwibm9uZVwiKSxpLnZpZXdFbmdpbmUuc2hvd1ZpZXcoZSxyLHQpfSx0aGlzLl9oaXN0b3J5TmF2aWdhdGU9ZnVuY3Rpb24oZSl7aWYoZT09PXkpe2lmKDE9PT1pLmhpc3RvcnkubGVuZ3RoKXJldHVybjtpLmhpc3RvcnkucG9wKCksZT1pLmhpc3RvcnlbaS5oaXN0b3J5Lmxlbmd0aC0xXX1lbHNlIGkuaGlzdG9yeS5wdXNoKGUpO2kuaGlzdG9yeUNhbGxiYWNrKGUsbi5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zKGUpKX0sdGhpcy5faGlzdG9yeVJlcGxhY2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bi5wYXJzZVF1ZXJ5U3RyaW5nUGFyYW1zKGUpO2kuaGlzdG9yeVtpLmhpc3RvcnkubGVuZ3RoLTFdPWUsaS5oaXN0b3J5Q2FsbGJhY2soZSx0KX0saS5sb2FkZXI9bmV3IGMoZSx7bG9hZGluZzppLm9wdGlvbnMubG9hZGluZ30pLGkudmlld0VuZ2luZT1uZXcgcyh7Y29udGFpbmVyOmUsdHJhbnNpdGlvbjp0LnRyYW5zaXRpb24sbW9kZWxTY29wZTp0Lm1vZGVsU2NvcGUscm9vdE5lZWRlZDohdC5pbml0aWFsLHNlcnZlck5hdmlnYXRpb246dC5zZXJ2ZXJOYXZpZ2F0aW9uLHJlbW90ZVZpZXdVUkxQcmVmaXg6dC5yb290fHxcIlwiLGxheW91dDp0LmxheW91dCwkYW5ndWxhcjp0LiRhbmd1bGFyLGxvYWRlcjppLmxvYWRlcixzaG93U3RhcnQ6ZnVuY3Rpb24oKXtpLmxvYWRlci50cmFuc2l0aW9uKCksaS5jbG9zZUFjdGl2ZURpYWxvZ3MoKX0sYWZ0ZXI6ZnVuY3Rpb24oKXtpLmxvYWRlci50cmFuc2l0aW9uRG9uZSgpfSx2aWV3U2hvdzpmdW5jdGlvbihlKXtpLnRyaWdnZXIoZixlKX0sbG9hZFN0YXJ0OmZ1bmN0aW9uKCl7aS5sb2FkZXIuc2hvdygpfSxsb2FkQ29tcGxldGU6ZnVuY3Rpb24oKXtpLmxvYWRlci5oaWRlKCl9LHNhbWVWaWV3UmVxdWVzdGVkOmZ1bmN0aW9uKCl7aS50cmlnZ2VyKGcpfSx2aWV3VHlwZURldGVybWluZWQ6ZnVuY3Rpb24oZSl7ZS5yZW1vdGUmJmkub3B0aW9ucy5zZXJ2ZXJOYXZpZ2F0aW9ufHxpLnRyaWdnZXIocCx7dXJsOmUudXJsfSl9fSksdGhpcy5fc2V0UG9ydHJhaXRXaWR0aCgpLG4ub25SZXNpemUoZnVuY3Rpb24oKXtpLl9zZXRQb3J0cmFpdFdpZHRoKCl9KSxpLl9zZXR1cEFwcExpbmtzKCl9LGNsb3NlQWN0aXZlRGlhbG9nczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudC5maW5kKHIoXCJhY3Rpb25zaGVldCBwb3BvdmVyIG1vZGFsdmlld1wiKSkuZmlsdGVyKFwiOnZpc2libGVcIik7dC5lYWNoKGZ1bmN0aW9uKCl7bi53aWRnZXRJbnN0YW5jZShlKHRoaXMpLG8pLmNsb3NlKCl9KX0sbmF2aWdhdGVUb0luaXRpYWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuaW5pdGlhbDtlJiZ0aGlzLm5hdmlnYXRlKGUpfSxvcHRpb25zOntuYW1lOlwiUGFuZVwiLHBvcnRyYWl0V2lkdGg6XCJcIix0cmFuc2l0aW9uOlwiXCIsbGF5b3V0OlwiXCIsY29sbGFwc2libGU6ITEsaW5pdGlhbDpudWxsLG1vZGVsU2NvcGU6d2luZG93LGxvYWRpbmc6XCI8aDE+TG9hZGluZy4uLjwvaDE+XCJ9LGV2ZW50czpbcCxmLGddLGFwcGVuZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52aWV3RW5naW5lLmFwcGVuZChlKX0sZGVzdHJveTpmdW5jdGlvbigpe2EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMudmlld0VuZ2luZS5kZXN0cm95KCksdGhpcy51c2VyRXZlbnRzLmRlc3Ryb3koKX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXtlIGluc3RhbmNlb2YgbCYmKGU9ZS5pZCksdGhpcy50cmFuc2l0aW9uPXQsdGhpcy5faGlzdG9yeU5hdmlnYXRlKGUpfSxyZXBsYWNlOmZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIGwmJihlPWUuaWQpLHRoaXMudHJhbnNpdGlvbj10LHRoaXMuX2hpc3RvcnlSZXBsYWNlKGUpfSxiaW5kVG9Sb3V0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPXRoaXMuaGlzdG9yeSxyPXRoaXMudmlld0VuZ2luZTtlLmJpbmQoXCJpbml0XCIsZnVuY3Rpb24odCl7dmFyIG8sYT10LnVybCxzPWUucHVzaFN0YXRlP2E6XCIvXCI7ci5yb290Vmlldy5hdHRyKG4uYXR0cihcInVybFwiKSxzKSxvPWkubGVuZ3RoLFwiL1wiPT09YSYmbyYmKGUubmF2aWdhdGUoaVtvLTFdLCEwKSx0LnByZXZlbnREZWZhdWx0KCkpfSksZS5iaW5kKFwicm91dGVNaXNzaW5nXCIsZnVuY3Rpb24oZSl7dC5oaXN0b3J5Q2FsbGJhY2soZS51cmwsZS5wYXJhbXMsZS5iYWNrQnV0dG9uUHJlc3NlZCl8fGUucHJldmVudERlZmF1bHQoKX0pLGUuYmluZChcInNhbWVcIixmdW5jdGlvbigpe3QudHJpZ2dlcihnKX0pLHQuX2hpc3RvcnlOYXZpZ2F0ZT1mdW5jdGlvbih0KXtlLm5hdmlnYXRlKHQpfSx0Ll9oaXN0b3J5UmVwbGFjZT1mdW5jdGlvbih0KXtlLnJlcGxhY2UodCl9fSxoaWRlTG9hZGluZzpmdW5jdGlvbigpe3RoaXMubG9hZGVyLmhpZGUoKX0sc2hvd0xvYWRpbmc6ZnVuY3Rpb24oKXt0aGlzLmxvYWRlci5zaG93KCl9LGNoYW5nZUxvYWRpbmdNZXNzYWdlOmZ1bmN0aW9uKGUpe3RoaXMubG9hZGVyLmNoYW5nZU1lc3NhZ2UoZSl9LHZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3RW5naW5lLnZpZXcoKX0sX3NldFBvcnRyYWl0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5wb3J0cmFpdFdpZHRoO3QmJihlPW4ubW9iaWxlLmFwcGxpY2F0aW9uLmVsZW1lbnQuaXMoXCIua20tdmVydGljYWxcIik/dDpcImF1dG9cIix0aGlzLmVsZW1lbnQuY3NzKFwid2lkdGhcIixlKSl9LF9zZXR1cEFwcExpbmtzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmVsZW1lbnQuaGFuZGxlcih0aGlzKS5vbihcImRvd25cIixyKGspLFwiX21vdXNldXBcIikub24oXCJjbGlja1wiLHIoaytcIiBcIitiKSxcIl9hcHBMaW5rQ2xpY2tcIiksdGhpcy51c2VyRXZlbnRzPW5ldyBuLlVzZXJFdmVudHModGhpcy5lbGVtZW50LHtmaWx0ZXI6cihiKSx0YXA6ZnVuY3Rpb24odCl7dC5ldmVudC5jdXJyZW50VGFyZ2V0PXQudG91Y2guY3VycmVudFRhcmdldCxlLl9tb3VzZXVwKHQuZXZlbnQpfX0pfSxfYXBwTGlua0NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPWUodC5jdXJyZW50VGFyZ2V0KS5hdHRyKFwiaHJlZlwiKSxpPW4mJlwiI1wiIT09blswXSYmdGhpcy5vcHRpb25zLnNlcnZlck5hdmlnYXRpb247aXx8dyhlKHQuY3VycmVudFRhcmdldCksXCJyZWxcIik9PWR8fHQucHJldmVudERlZmF1bHQoKX0sX21vdXNldXA6ZnVuY3Rpb24ocil7aWYoIShyLndoaWNoPjF8fHIuaXNEZWZhdWx0UHJldmVudGVkKCkpKXt2YXIgYT10aGlzLHM9ZShyLmN1cnJlbnRUYXJnZXQpLGw9dyhzLFwidHJhbnNpdGlvblwiKSxjPXcocyxcInJlbFwiKXx8XCJcIixwPXcocyxcInRhcmdldFwiKSxmPXMuYXR0cih1KSxnPXYmJjA9PT1zWzBdLm9mZnNldEhlaWdodCxtPWYmJlwiI1wiIT09ZlswXSYmdGhpcy5vcHRpb25zLnNlcnZlck5hdmlnYXRpb247Z3x8bXx8Yz09PWR8fHQ9PT1mfHxmPT09aHx8KHMuYXR0cih1LGgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmF0dHIodSxmKX0pLGMubWF0Y2goXyk/KG4ud2lkZ2V0SW5zdGFuY2UoZShmKSxvKS5vcGVuRm9yKHMpLChcImFjdGlvbnNoZWV0XCI9PT1jfHxcImRyYXdlclwiPT09YykmJnIuc3RvcFByb3BhZ2F0aW9uKCkpOihcIl90b3BcIj09PXA/YT1pLmFwcGxpY2F0aW9uLnBhbmU6cCYmKGE9ZShcIiNcIitwKS5kYXRhKFwia2VuZG9Nb2JpbGVQYW5lXCIpKSxhLm5hdmlnYXRlKGYsbCkpLHIucHJldmVudERlZmF1bHQoKSl9fX0pO3gud3JhcD1mdW5jdGlvbihlKXtlLmlzKHIoXCJ2aWV3XCIpKXx8KGU9ZS53cmFwKFwiPGRpdiBkYXRhLVwiK24ubnMrJ3JvbGU9XCJ2aWV3XCIgZGF0YS1zdHJldGNoPVwidHJ1ZVwiPjwvZGl2PicpLnBhcmVudCgpKTt2YXIgdD1lLndyYXAoJzxkaXYgY2xhc3M9XCJrbS1wYW5lLXdyYXBwZXJcIj48ZGl2PjwvZGl2PjwvZGl2PicpLnBhcmVudCgpLGk9bmV3IHgodCk7cmV0dXJuIGkubmF2aWdhdGUoXCJcIiksaX0sby5wbHVnaW4oeCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQubW9iaWxlLGk9bi51aSxyPVwiaGlkZVwiLG89XCJvcGVuXCIsYT1cImNsb3NlXCIscz0nPGRpdiBjbGFzcz1cImttLXBvcHVwLXdyYXBwZXJcIiAvPicsbD0nPGRpdiBjbGFzcz1cImttLXBvcHVwLWFycm93XCIgLz4nLGM9JzxkaXYgY2xhc3M9XCJrbS1wb3B1cC1vdmVybGF5XCIgLz4nLGQ9XCJrbS11cCBrbS1kb3duIGttLWxlZnQga20tcmlnaHRcIix1PWkuV2lkZ2V0LGg9e2Rvd246e29yaWdpbjpcImJvdHRvbSBjZW50ZXJcIixwb3NpdGlvbjpcInRvcCBjZW50ZXJcIn0sdXA6e29yaWdpbjpcInRvcCBjZW50ZXJcIixwb3NpdGlvbjpcImJvdHRvbSBjZW50ZXJcIn0sbGVmdDp7b3JpZ2luOlwiY2VudGVyIGxlZnRcIixwb3NpdGlvbjpcImNlbnRlciByaWdodFwiLGNvbGxpc2lvbjpcImZpdCBmbGlwXCJ9LHJpZ2h0OntvcmlnaW46XCJjZW50ZXIgcmlnaHRcIixwb3NpdGlvbjpcImNlbnRlciBsZWZ0XCIsY29sbGlzaW9uOlwiZml0IGZsaXBcIn19LHA9e2FuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcImZhZGU6aW5cIixkdXJhdGlvbjowfSxjbG9zZTp7ZWZmZWN0czpcImZhZGU6b3V0XCIsZHVyYXRpb246NDAwfX19LGY9e2hvcml6b250YWw6e29mZnNldDpcInRvcFwiLHNpemU6XCJoZWlnaHRcIn0sdmVydGljYWw6e29mZnNldDpcImxlZnRcIixzaXplOlwid2lkdGhcIn19LGc9e3VwOlwiZG93blwiLGRvd246XCJ1cFwiLGxlZnQ6XCJyaWdodFwiLHJpZ2h0OlwibGVmdFwifSxtPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIG8sYSxkPXRoaXMsZz1uLmNsb3Nlc3QoXCIua20tbW9kYWx2aWV3LXdyYXBwZXJcIiksbT1uLmNsb3Nlc3QoXCIua20tcm9vdFwiKS5jaGlsZHJlbihcIi5rbS1wYW5lXCIpLmZpcnN0KCksdj1nWzBdP2c6bTtpLnZpZXdwb3J0P209aS52aWV3cG9ydDptWzBdfHwobT13aW5kb3cpLGkuY29udGFpbmVyP3Y9aS5jb250YWluZXI6dlswXXx8KHY9ZG9jdW1lbnQuYm9keSksbz17dmlld3BvcnQ6bSxjb3B5QW5jaG9yU3R5bGVzOiExLGF1dG9zaXplOiEwLG9wZW46ZnVuY3Rpb24oKXtkLm92ZXJsYXkuc2hvdygpfSxhY3RpdmF0ZTplLnByb3h5KGQuX2FjdGl2YXRlLGQpLGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtkLm92ZXJsYXkuaGlkZSgpLGQuX2FwaUNhbGx8fGQudHJpZ2dlcihyKSxkLl9hcGlDYWxsPSExfX0sdS5mbi5pbml0LmNhbGwoZCxuLGkpLG49ZC5lbGVtZW50LGk9ZC5vcHRpb25zLG4ud3JhcChzKS5hZGRDbGFzcyhcImttLXBvcHVwXCIpLnNob3coKSxhPWQub3B0aW9ucy5kaXJlY3Rpb24ubWF0Y2goL2xlZnR8cmlnaHQvKT9cImhvcml6b250YWxcIjpcInZlcnRpY2FsXCIsZC5kaW1lbnNpb25zPWZbYV0sZC53cmFwcGVyPW4ucGFyZW50KCkuY3NzKHt3aWR0aDppLndpZHRoLGhlaWdodDppLmhlaWdodH0pLmFkZENsYXNzKFwia20tcG9wdXAtd3JhcHBlciBrbS1cIitpLmRpcmVjdGlvbikuaGlkZSgpLGQuYXJyb3c9ZShsKS5wcmVwZW5kVG8oZC53cmFwcGVyKS5oaWRlKCksZC5vdmVybGF5PWUoYykuYXBwZW5kVG8odikuaGlkZSgpLG8uYXBwZW5kVG89ZC5vdmVybGF5LGkuY2xhc3NOYW1lJiZkLm92ZXJsYXkuYWRkQ2xhc3MoaS5jbGFzc05hbWUpLGQucG9wdXA9bmV3IHQudWkuUG9wdXAoZC53cmFwcGVyLGUuZXh0ZW5kKCEwLG8scCxoW2kuZGlyZWN0aW9uXSkpfSxvcHRpb25zOntuYW1lOlwiUG9wdXBcIix3aWR0aDoyNDAsaGVpZ2h0OlwiXCIsZGlyZWN0aW9uOlwiZG93blwiLGNvbnRhaW5lcjpudWxsLHZpZXdwb3J0Om51bGx9LGV2ZW50czpbcl0sc2hvdzpmdW5jdGlvbih0KXt0aGlzLnBvcHVwLm9wdGlvbnMuYW5jaG9yPWUodCksdGhpcy5wb3B1cC5vcGVuKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLl9hcGlDYWxsPSEwLHRoaXMucG9wdXAuY2xvc2UoKX0sZGVzdHJveTpmdW5jdGlvbigpe3UuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMucG9wdXAuZGVzdHJveSgpLHRoaXMub3ZlcmxheS5yZW1vdmUoKX0sdGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9wdXAub3B0aW9ucy5hbmNob3J9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuZGlyZWN0aW9uLGk9dC5kaW1lbnNpb25zLHI9aS5vZmZzZXQsbz10LnBvcHVwLGE9by5vcHRpb25zLmFuY2hvcixzPWUoYSkub2Zmc2V0KCksbD1lKG8uZWxlbWVudCkub2Zmc2V0KCksYz1vLmZsaXBwZWQ/Z1tuXTpuLHU9Mip0LmFycm93W2kuc2l6ZV0oKSxoPXQuZWxlbWVudFtpLnNpemVdKCktdC5hcnJvd1tpLnNpemVdKCkscD1lKGEpW2kuc2l6ZV0oKSxmPXNbcl0tbFtyXStwLzI7dT5mJiYoZj11KSxmPmgmJihmPWgpLHQud3JhcHBlci5yZW1vdmVDbGFzcyhkKS5hZGRDbGFzcyhcImttLVwiK2MpLHQuYXJyb3cuY3NzKHIsZikuc2hvdygpfX0pLHY9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obixyKXt2YXIgbyxzPXRoaXM7cy5pbml0aWFsT3Blbj0hMSx1LmZuLmluaXQuY2FsbChzLG4sciksbz1lLmV4dGVuZCh7Y2xhc3NOYW1lOlwia20tcG9wb3Zlci1yb290XCIsaGlkZTpmdW5jdGlvbigpe3MudHJpZ2dlcihhKX19LHRoaXMub3B0aW9ucy5wb3B1cCkscy5wb3B1cD1uZXcgbShzLmVsZW1lbnQsbykscy5wb3B1cC5vdmVybGF5Lm9uKFwibW92ZVwiLGZ1bmN0aW9uKGUpe2UudGFyZ2V0PT1zLnBvcHVwLm92ZXJsYXlbMF0mJmUucHJldmVudERlZmF1bHQoKX0pLHMucGFuZT1uZXcgaS5QYW5lKHMuZWxlbWVudCxlLmV4dGVuZCh0aGlzLm9wdGlvbnMucGFuZSx7JGFuZ3VsYXI6dGhpcy5vcHRpb25zLiRhbmd1bGFyfSkpLHMucGFuZS5uYXZpZ2F0ZVRvSW5pdGlhbCgpLHQubm90aWZ5KHMsaSl9LG9wdGlvbnM6e25hbWU6XCJQb3BPdmVyXCIscG9wdXA6e30scGFuZTp7fX0sZXZlbnRzOltvLGFdLG9wZW46ZnVuY3Rpb24oZSl7dGhpcy5wb3B1cC5zaG93KGUpLHRoaXMuaW5pdGlhbE9wZW4/dGhpcy5wYW5lLnZpZXcoKS5faW52b2tlTmdDb250cm9sbGVyKCk6KHRoaXMucGFuZS5uYXZpZ2F0ZShcIlwiKSx0aGlzLnBvcHVwLnBvcHVwLl9wb3NpdGlvbigpLHRoaXMuaW5pdGlhbE9wZW49ITApfSxvcGVuRm9yOmZ1bmN0aW9uKGUpe3RoaXMub3BlbihlKSx0aGlzLnRyaWdnZXIobyx7dGFyZ2V0OnRoaXMucG9wdXAudGFyZ2V0KCl9KX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmhpZGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3UuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMucGFuZS5kZXN0cm95KCksdGhpcy5wb3B1cC5kZXN0cm95KCksdC5kZXN0cm95KHRoaXMuZWxlbWVudCl9fSk7aS5wbHVnaW4obSksaS5wbHVnaW4odil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi5tb2JpbGUudWkscj1uLnVpLlBvcHVwLG89JzxkaXYgY2xhc3M9XCJrbS1zaGltXCIvPicsYT1cImhpZGVcIixzPWkuV2lkZ2V0LGw9cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxpKXt2YXIgbD10aGlzLGM9bi5tb2JpbGUuYXBwbGljYXRpb24sZD1uLnN1cHBvcnQubW9iaWxlT1MsdT1jP2Mub3MubmFtZTpkP2QubmFtZTpcImlvc1wiLGg9XCJpb3NcIj09PXV8fFwid3BcIj09PXV8fChjP2Mub3Muc2tpbjohMSkscD1cImJsYWNrYmVycnlcIj09PXUsZj1pLmFsaWdufHwoaD9cImJvdHRvbSBjZW50ZXJcIjpwP1wiY2VudGVyIHJpZ2h0XCI6XCJjZW50ZXIgY2VudGVyXCIpLGc9aS5wb3NpdGlvbnx8KGg/XCJib3R0b20gY2VudGVyXCI6cD9cImNlbnRlciByaWdodFwiOlwiY2VudGVyIGNlbnRlclwiKSxtPWkuZWZmZWN0fHwoaD9cInNsaWRlSW46dXBcIjpwP1wic2xpZGVJbjpsZWZ0XCI6XCJmYWRlOmluXCIpLHY9ZShvKS5oYW5kbGVyKGwpLmhpZGUoKTtzLmZuLmluaXQuY2FsbChsLHQsaSksbC5zaGltPXYsdD1sLmVsZW1lbnQsaT1sLm9wdGlvbnMsaS5jbGFzc05hbWUmJmwuc2hpbS5hZGRDbGFzcyhpLmNsYXNzTmFtZSksaS5tb2RhbHx8bC5zaGltLm9uKFwidXBcIixcIl9oaWRlXCIpLChjP2MuZWxlbWVudDplKGRvY3VtZW50LmJvZHkpKS5hcHBlbmQodiksbC5wb3B1cD1uZXcgcihsLmVsZW1lbnQse2FuY2hvcjp2LG1vZGFsOiEwLGFwcGVuZFRvOnYsb3JpZ2luOmYscG9zaXRpb246ZyxhbmltYXRpb246e29wZW46e2VmZmVjdHM6bSxkdXJhdGlvbjppLmR1cmF0aW9ufSxjbG9zZTp7ZHVyYXRpb246aS5kdXJhdGlvbn19LGNsb3NlOmZ1bmN0aW9uKGUpe3ZhciB0PSExO2wuX2FwaUNhbGx8fCh0PWwudHJpZ2dlcihhKSksdCYmZS5wcmV2ZW50RGVmYXVsdCgpLGwuX2FwaUNhbGw9ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2LmhpZGUoKX0sb3BlbjpmdW5jdGlvbigpe3Yuc2hvdygpfX0pLG4ubm90aWZ5KGwpfSxldmVudHM6W2FdLG9wdGlvbnM6e25hbWU6XCJTaGltXCIsbW9kYWw6ITEsYWxpZ246dCxwb3NpdGlvbjp0LGVmZmVjdDp0LGR1cmF0aW9uOjIwMH0sc2hvdzpmdW5jdGlvbigpe3RoaXMucG9wdXAub3BlbigpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5fYXBpQ2FsbD0hMCx0aGlzLnBvcHVwLmNsb3NlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtzLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLnNoaW0ua2VuZG9EZXN0cm95KCksdGhpcy5wb3B1cC5kZXN0cm95KCksdGhpcy5zaGltLnJlbW92ZSgpfSxfaGlkZTpmdW5jdGlvbih0KXt0JiZlLmNvbnRhaW5zKHRoaXMuc2hpbS5jaGlsZHJlbigpLmNoaWxkcmVuKFwiLmstcG9wdXBcIilbMF0sdC50YXJnZXQpfHx0aGlzLnBvcHVwLmNsb3NlKCl9fSk7aS5wbHVnaW4obCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5rZW5kbyxuPXQuc3VwcG9ydCxpPXQubW9iaWxlLnVpLHI9aS5TaGltLG89aS5Qb3B1cCxhPWkuV2lkZ2V0LHM9XCJvcGVuXCIsbD1cImNsb3NlXCIsYz1cImNvbW1hbmRcIixkPVwibGk+YVwiLHU9XCJhY3Rpb25zaGVldENvbnRleHRcIixoPSc8ZGl2IGNsYXNzPVwia20tYWN0aW9uc2hlZXQtd3JhcHBlclwiIC8+JyxwPXQudGVtcGxhdGUoJzxsaSBjbGFzcz1cImttLWFjdGlvbnNoZWV0LWNhbmNlbFwiPjxhIGhyZWY9XCJcXFxcI1wiPiM6Y2FuY2VsIzwvYT48L2xpPicpLGY9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24ocyxsKXt2YXIgYyx1LGYsZz10aGlzLG09bi5tb2JpbGVPUzthLmZuLmluaXQuY2FsbChnLHMsbCksbD1nLm9wdGlvbnMsZj1sLnR5cGUscz1nLmVsZW1lbnQsdT1cImF1dG9cIj09PWY/bSYmbS50YWJsZXQ6XCJ0YWJsZXRcIj09PWYsYz11P286cixsLmNhbmNlbFRlbXBsYXRlJiYocD10LnRlbXBsYXRlKGwuY2FuY2VsVGVtcGxhdGUpKSxzLmFkZENsYXNzKFwia20tYWN0aW9uc2hlZXRcIikuYXBwZW5kKHAoe2NhbmNlbDpnLm9wdGlvbnMuY2FuY2VsfSkpLndyYXAoaCkub24oXCJ1cFwiLGQsXCJfY2xpY2tcIikub24oXCJjbGlja1wiLGQsdC5wcmV2ZW50RGVmYXVsdCksZy52aWV3KCkuYmluZChcImRlc3Ryb3lcIixmdW5jdGlvbigpe2cuZGVzdHJveSgpfSksZy53cmFwcGVyPXMucGFyZW50KCkuYWRkQ2xhc3MoZj9cIiBrbS1hY3Rpb25zaGVldC1cIitmOlwiXCIpLGcuc2hpbT1uZXcgYyhnLndyYXBwZXIsZS5leHRlbmQoe21vZGFsOm0uaW9zJiY3Pm0ubWFqb3JWZXJzaW9uLGNsYXNzTmFtZTpcImttLWFjdGlvbnNoZWV0LXJvb3RcIn0sZy5vcHRpb25zLnBvcHVwKSksZy5fY2xvc2VQcm94eT1lLnByb3h5KGcsXCJfY2xvc2VcIiksZy5zaGltLmJpbmQoXCJoaWRlXCIsZy5fY2xvc2VQcm94eSksdSYmdC5vblJlc2l6ZShnLl9jbG9zZVByb3h5KSx0Lm5vdGlmeShnLGkpfSxldmVudHM6W3MsbCxjXSxvcHRpb25zOntuYW1lOlwiQWN0aW9uU2hlZXRcIixjYW5jZWw6XCJDYW5jZWxcIix0eXBlOlwiYXV0b1wiLHBvcHVwOntoZWlnaHQ6XCJhdXRvXCJ9fSxvcGVuOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcztpLnRhcmdldD1lKHQpLGkuY29udGV4dD1uLGkuc2hpbS5zaG93KHQpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY29udGV4dD10aGlzLnRhcmdldD1udWxsLHRoaXMuc2hpbS5oaWRlKCl9LG9wZW5Gb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZGF0YSh1KTt0Lm9wZW4oZSxuKSx0LnRyaWdnZXIocyx7dGFyZ2V0OmUsY29udGV4dDpufSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXthLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0LnVuYmluZFJlc2l6ZSh0aGlzLl9jbG9zZVByb3h5KSx0aGlzLnNoaW0uZGVzdHJveSgpfSxfY2xpY2s6ZnVuY3Rpb24obil7dmFyIGkscixvLGE7bi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGk9ZShuLmN1cnJlbnRUYXJnZXQpLHI9aS5kYXRhKFwiYWN0aW9uXCIpLHImJihvPXt0YXJnZXQ6dGhpcy50YXJnZXQsY29udGV4dDp0aGlzLmNvbnRleHR9LGE9dGhpcy5vcHRpb25zLiRhbmd1bGFyLGE/dGhpcy5lbGVtZW50LmluamVjdG9yKCkuZ2V0KFwiJHBhcnNlXCIpKHIpKGFbMF0pKG8pOnQuZ2V0dGVyKHIpKHdpbmRvdykobykpLHRoaXMudHJpZ2dlcihjLHt0YXJnZXQ6dGhpcy50YXJnZXQsY29udGV4dDp0aGlzLmNvbnRleHQsY3VycmVudFRhcmdldDppfSksbi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2Nsb3NlKCkpfSxfY2xvc2U6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKGwpP2UucHJldmVudERlZmF1bHQoKTp0aGlzLmNsb3NlKCl9fSk7aS5wbHVnaW4oZil9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gQXJyYXkoZSsxKS5qb2luKCc8dGQgY2xhc3M9XCJrLWdyb3VwLWNlbGxcIj4mbmJzcDs8L3RkPicpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbj1cIiBcIjtpZihlKXtpZih0eXBlb2YgZT09PWNuKXJldHVybiBlO2Zvcih0IGluIGUpbis9dCsnPVwiJytlW3RdKydcIid9cmV0dXJuIG59ZnVuY3Rpb24gcih0LG4pe2UoXCJ0aCwgdGggLmstZ3JpZC1maWx0ZXIsIHRoIC5rLWxpbmtcIix0KS5hZGQoZG9jdW1lbnQuYm9keSkuY3NzKFwiY3Vyc29yXCIsbil9ZnVuY3Rpb24gbyhlKXt2YXIgdCxuLGk9e30scj17fTtpZighQXQoZSkpZm9yKHh0KGUpfHwoZT1bZV0pLHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaVtlW3RdLmFnZ3JlZ2F0ZV09MCxyW2VbdF0uZmllbGRdPWk7cmV0dXJuIHJ9ZnVuY3Rpb24gYSh0LG4saSxyLG8pe3ZhciBhLHM9bjtmb3Iobj1lKCksbz1vfHwxLGE9MDtvPmE7YSsrKW49bi5hZGQodC5lcShzK2EpKTtcIm51bWJlclwiPT10eXBlb2YgaT9uW3I/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKHQuZXEoaSkpOm4uYXBwZW5kVG8oaSl9ZnVuY3Rpb24gcyh0LG4saSl7cmV0dXJuIGUodCkuYWRkKG4pLmZpbmQoaSl9ZnVuY3Rpb24gbChlLHQsbil7dmFyIGkscixvLGE7Zm9yKG49eHQobik/bjpbbl0saT0wLHI9bi5sZW5ndGg7cj5pO2krKylvPW5baV0seXQobykmJm8uY2xpY2smJihhPW8ubmFtZXx8by50ZXh0LHQub24ob24rT3QsXCJhLmstZ3JpZC1cIisoYXx8XCJcIikucmVwbGFjZSgvXFxzL2csXCJcIikse2NvbW1hbmROYW1lOmF9LFR0KG8uY2xpY2ssZSkpKX1mdW5jdGlvbiBjKGUsdCxuKXtyZXR1cm4gYnQoZSxmdW5jdGlvbihlKXtlPXR5cGVvZiBlPT09Y24/e2ZpZWxkOmV9OmU7dmFyIGk7cmV0dXJuKCFwKGUpfHxuKSYmKGUuYXR0cmlidXRlcz1VKGUuYXR0cmlidXRlcyksZS5mb290ZXJBdHRyaWJ1dGVzPVUoZS5mb290ZXJBdHRyaWJ1dGVzKSxlLmhlYWRlckF0dHJpYnV0ZXM9VShlLmhlYWRlckF0dHJpYnV0ZXMpLGk9ITApLGUuY29sdW1ucyYmKGUuY29sdW1ucz1jKGUuY29sdW1ucyx0LGkpKSx3dCh7ZW5jb2RlZDp0LGhpZGRlbjppfSxlKX0pfWZ1bmN0aW9uIGQoZSx0KXt2YXIgbj1bXTtyZXR1cm4gdShlLHQsbiksbltuLmxlbmd0aC0xXX1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgaSxyO2ZvcihuPW58fFtdLGk9MDt0Lmxlbmd0aD5pO2krKyl7aWYoZT09PXRbaV0pcmV0dXJuITA7aWYodFtpXS5jb2x1bW5zKXtpZihyPW4ubGVuZ3RoLG4ucHVzaCh0W2ldKSx1KGUsdFtpXS5jb2x1bW5zLG4pKXJldHVybiEwO24uc3BsaWNlKHIsbi5sZW5ndGgtcil9fXJldHVybiExfWZ1bmN0aW9uIGgoZSx0KXt2YXIgbj10P1c6VTtlLmhpZGRlbj0hdCxlLmF0dHJpYnV0ZXM9bihlLmF0dHJpYnV0ZXMpLGUuZm9vdGVyQXR0cmlidXRlcz1uKGUuZm9vdGVyQXR0cmlidXRlcyksZS5oZWFkZXJBdHRyaWJ1dGVzPW4oZS5oZWFkZXJBdHRyaWJ1dGVzKX1mdW5jdGlvbiBwKGUpe3JldHVybiBmKFtlXSkubGVuZ3RoPjB9ZnVuY3Rpb24gZihlKXtyZXR1cm4ga3QoZSxmdW5jdGlvbihlKXt2YXIgdD0hZS5oaWRkZW47cmV0dXJuIHQmJmUuY29sdW1ucyYmKHQ9ZihlLmNvbHVtbnMpLmxlbmd0aD4wKSx0fSl9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZSh0KS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0FycmF5KCl9KX1mdW5jdGlvbiBtKGUsdCxuKXt2YXIgaT15KEkodCkpLHI9eSh6KHQpKSxvPWUucm93U3BhbjtlLnJvd1NwYW49bj9pPnI/by0oaS1yKXx8MTpvKyhyLWkpOmk+cj9vKyhpLXIpOm8tKHItaSl8fDF9ZnVuY3Rpb24gdih0LG4saSxyLG8sYSxzKXt2YXIgbCxjLGQ9eSh0KSx1PXkoW25dKTtkPnUmJihsPUFycmF5KHMrMSkuam9pbignPHRoIGNsYXNzPVwiay1ncm91cC1jZWxsIGstaGVhZGVyXCI+Jm5ic3A7PC90aD4nKSxjPWEuY2hpbGRyZW4oXCI6bm90KC5rLWZpbHRlci1yb3cpXCIpLGUoQXJyYXkoZC11KzEpLmpvaW4oXCI8dHI+XCIrbCtcIjwvdHI+XCIpKS5pbnNlcnRBZnRlcihjLmxhc3QoKSkpLEUoYSxkLXUpLHcoaSxyLG8sYSl9ZnVuY3Rpb24gXyhlLHQsbil7dmFyIGkscixvLGEscztmb3Iobj1ufHwwLG89dCx0PUwodCksYT0wLHM9dC5sZW5ndGg7cz5hO2ErKylpPWIodFthXSxvKSxyPWUuZmluZChcIj50cjpub3QoLmstZmlsdGVyLXJvdylcIikuZXEoaS5yb3cpLmZpbmQoXCIuay1oZWFkZXI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVxKGkuY2VsbCksci5hdHRyKHV0LmF0dHIoXCJpbmRleFwiKSxuK2EpO3JldHVybiB0Lmxlbmd0aH1mdW5jdGlvbiB5KGUpe3ZhciB0LG4saT0xLHI9MDtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uY29sdW1ucyYmKG49eShlW3RdLmNvbHVtbnMpLG4+ciYmKHI9bikpO3JldHVybiBpK3J9ZnVuY3Rpb24gdyh0LG4saSxyKXt2YXIgbyxhLHM9eCh0WzBdLG4pLGw9aS5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KTplcShcIitzLnJvdytcIik+dGguay1oZWFkZXJcIiksYz1lKCksZD1zLmNlbGw7Zm9yKG89MDt0Lmxlbmd0aD5vO28rKyljPWMuYWRkKGwuZXEoZCtvKSk7Zm9yKHIuZmluZChcIj50cjpub3QoLmstZmlsdGVyLXJvdylcIikuZXEocy5yb3cpLmFwcGVuZChjKSxhPVtdLG89MDt0Lmxlbmd0aD5vO28rKyl0W29dLmNvbHVtbnMmJihhPWEuY29uY2F0KHRbb10uY29sdW1ucykpO2EubGVuZ3RoJiZ3KGEsbixpLHIpfWZ1bmN0aW9uIGIoZSx0LG4saSl7dmFyIHIsbztmb3Iobj1ufHwwLGk9aXx8e30saVtuXT1pW25dfHwwLG89MDt0Lmxlbmd0aD5vO28rKyl7aWYodFtvXT09ZSl7cj17Y2VsbDppW25dLHJvdzpufTticmVha31pZih0W29dLmNvbHVtbnMmJihyPWIoZSx0W29dLmNvbHVtbnMsbisxLGkpKSlicmVhaztpW25dKyt9cmV0dXJuIHJ9ZnVuY3Rpb24gayhlLHQsbixpKXt2YXIgcixvLGE7cmV0dXJuIHQuY29sdW1ucz8odD10LmNvbHVtbnMsdFtpPzA6dC5sZW5ndGgtMV0pOihyPWQodCxlKSxvPXI/ci5jb2x1bW5zOmUsYT1DdCh0LG8pLDA9PT1hJiZpP2ErKzphIT1vLmxlbmd0aC0xfHxpPyhhPjB8fDA9PT1hJiYhaSkmJihhKz1pPy0xOjEpOmEtLSx0PW9bTWF0aC5tYXgoYSwwKV0sdCYmdCE9biYmdC5jb2x1bW5zP2soZSx0LG4saSk6bnVsbCl9ZnVuY3Rpb24geChlLHQsbixpKXt2YXIgcixvO2ZvcihuPW58fDAsaT1pfHx7fSxpW25dPWlbbl18fDAsbz0wO3QubGVuZ3RoPm87bysrKXtpZih0W29dPT1lKXtyPXtjZWxsOmlbbl0scm93Om59O2JyZWFrfWlmKHRbb10uY29sdW1ucyYmKHI9eChlLHRbb10uY29sdW1ucyxuKzEsaSkpKWJyZWFrO3Rbb10uaGlkZGVufHxpW25dKyt9cmV0dXJuIHJ9ZnVuY3Rpb24gQyhlKXt2YXIgdD1TKEkoZSkpO3JldHVybiB0LmNvbmNhdChTKHooZSkpKX1mdW5jdGlvbiBTKGUpe3ZhciB0LG49W10saT1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKW4ucHVzaChlW3RdKSxlW3RdLmNvbHVtbnMmJihpPWkuY29uY2F0KGVbdF0uY29sdW1ucykpO3JldHVybiBpLmxlbmd0aCYmKG49bi5jb25jYXQoUyhpKSkpLG59ZnVuY3Rpb24gVChlKXt2YXIgdCxuLGk9MDtmb3Iobj0wO2UubGVuZ3RoPm47bisrKXQ9ZVtuXSx0LmNvbHVtbnM/aSs9VCh0LmNvbHVtbnMpOnQuaGlkZGVuJiZpKys7cmV0dXJuIGl9ZnVuY3Rpb24gRChlKXt2YXIgdCxuLGkscj0wO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQ9ZVtuXS5zdHlsZS53aWR0aCx0JiYtMT09dC5pbmRleE9mKFwiJVwiKSYmKHIrPXBhcnNlSW50KHQsMTApKTtyZXR1cm4gcn1mdW5jdGlvbiBBKGUsdCl7dmFyIG4saSxyPWUuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KSB0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIik7Zm9yKGk9MDtyLmxlbmd0aD5pO2krKyluPXJbaV0ucm93U3BhbixuPjEmJihyW2ldLnJvd1NwYW49bi10fHwxKX1mdW5jdGlvbiBFKGUsdCl7dmFyIG4saT1lLmZpbmQoXCJ0cjpub3QoLmstZmlsdGVyLXJvdykgdGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpO2ZvcihuPTA7aS5sZW5ndGg+bjtuKyspaVtuXS5yb3dTcGFuKz10fWZ1bmN0aW9uIE0odCl7dmFyIG4saT10LmZpbmQoXCJ0cjpub3QoLmstZmlsdGVyLXJvdylcIikscj1pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiFlKHRoaXMpLmNoaWxkcmVuKCkubGVuZ3RofSkucmVtb3ZlKCkubGVuZ3RoLG89aS5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpO2ZvcihuPTA7by5sZW5ndGg+bjtuKyspb1tuXS5yb3dTcGFuPjEmJihvW25dLnJvd1NwYW4tPXIpO3JldHVybiBpLmxlbmd0aC1yfWZ1bmN0aW9uIFAoZSx0LG4saSxyKXt2YXIgbyxhLHMsbD1bXTtmb3Iobz0wLHM9ZS5sZW5ndGg7cz5vO28rKylhPW5baV18fFtdLGEucHVzaCh0LmVxKHIrbykpLG5baV09YSxlW29dLmNvbHVtbnMmJihsPWwuY29uY2F0KGVbb10uY29sdW1ucykpO2wubGVuZ3RoJiZQKGwsdCxuLGkrMSxyK2UubGVuZ3RoKX1mdW5jdGlvbiBJKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLmxvY2tlZH0pfWZ1bmN0aW9uIHooZSl7cmV0dXJuIGt0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIWUubG9ja2VkfSl9ZnVuY3Rpb24gRihlKXtyZXR1cm4ga3QoZSxmdW5jdGlvbihlKXtyZXR1cm4hZS5sb2NrZWQmJnAoZSl9KX1mdW5jdGlvbiBSKGUpe3JldHVybiBrdChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLmxvY2tlZCYmcChlKX0pfWZ1bmN0aW9uIEIoZSl7dmFyIHQsbj1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uaGlkZGVufHwoZVt0XS5jb2x1bW5zP249bi5jb25jYXQoQihlW3RdLmNvbHVtbnMpKTpuLnB1c2goZVt0XSkpO3JldHVybiBufWZ1bmN0aW9uIEwoZSl7dmFyIHQsbj1bXTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF0uY29sdW1ucz9uPW4uY29uY2F0KEwoZVt0XS5jb2x1bW5zKSk6bi5wdXNoKGVbdF0pO3JldHVybiBufWZ1bmN0aW9uIE8odCl7dmFyIG4saT10LmZpbmQoXCI+dHI6bm90KC5rLWZpbHRlci1yb3cpXCIpLHI9ZSgpO3JldHVybiBpLmxlbmd0aD4xJiYocj1pLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm93U3Bhbj4xfSkpLHI9ci5hZGQoaS5sYXN0KCkuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSksbj11dC5hdHRyKFwiaW5kZXhcIiksci5zb3J0KGZ1bmN0aW9uKHQsaSl7cmV0dXJuIHQ9cGFyc2VJbnQoZSh0KS5hdHRyKG4pLDEwKSxpPXBhcnNlSW50KGUoaSkuYXR0cihuKSwxMCksdD5pPzE6aT50Py0xOjB9KSxyfWZ1bmN0aW9uIEgodCl7dmFyIG4saSxyLG8sYSxzLGwsYz10LmNsb3Nlc3QoXCJ0YWJsZVwiKSxkPWUoKS5hZGQodCksdT10LmNsb3Nlc3QoXCJ0clwiKSxoPWMuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KVwiKSxwPWguaW5kZXgodSk7aWYocD4wKXtmb3Iobj1oLmVxKHAtMSksaT1uLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuYXR0cihcInJvd3NwYW5cIil9KSxyPTAsbz11LmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuaW5kZXgodCksYT10LnByZXZBbGwoXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbFNwYW4+MX0pLHM9MDthLmxlbmd0aD5zO3MrKylyKz1hW3NdLmNvbFNwYW58fDE7Zm9yKG8rPU1hdGgubWF4KHItMSwwKSxyPTAscz0wO2kubGVuZ3RoPnM7cysrKWlmKGw9aS5lcShzKSxyKz1sLmF0dHIoXCJjb2xTcGFuXCIpP2xbMF0uY29sU3BhbjoxLG8+PXMmJnI+byl7ZD1IKGwpLmFkZChkKTtcbmJyZWFrfX1yZXR1cm4gZH1mdW5jdGlvbiBOKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZD10LmNsb3Nlc3QoXCJ0YWJsZVwiKSx1PWUoKS5hZGQodCksaD10LmNsb3Nlc3QoXCJ0clwiKSxwPWQuZmluZChcInRyOm5vdCguay1maWx0ZXItcm93KVwiKSxmPXAuaW5kZXgoaCkrdFswXS5yb3dTcGFuLGc9dXQuYXR0cihcImNvbHNwYW5cIik7aWYocC5sZW5ndGgtMT49Zil7Zm9yKG49aC5uZXh0KCksaT1oLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikuaW5kZXgodCkscj10LnByZXZBbGwoXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLHI9ci5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5yb3dTcGFufHwxPT09dGhpcy5yb3dTcGFufSksYT0wLG89MDtyLmxlbmd0aD5vO28rKylhKz1wYXJzZUludChyLmVxKG8pLmF0dHIoZyksMTApfHwxO2ZvcihzPW4uZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxsPXBhcnNlSW50KHQuYXR0cihnKSwxMCl8fDEsbz0wO2w+bzspbj1zLmVxKG8rYSksdT11LmFkZChOKG4pKSxjPXBhcnNlSW50KG4uYXR0cihnKSwxMCksYz4xJiYobC09Yy0xKSxvKyt9cmV0dXJuIHV9ZnVuY3Rpb24gVih0LG4saSl7dmFyIHIsbz10O3JldHVybiBndD90WzBdLmlubmVySFRNTD1pOihyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksci5pbm5lckhUTUw9XCI8dGFibGU+PHRib2R5PlwiK2krXCI8L3Rib2R5PjwvdGFibGU+XCIsdD1yLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCxuWzBdLnJlcGxhY2VDaGlsZCh0LG9bMF0pLHQ9ZSh0KSksdH1mdW5jdGlvbiBVKGUpe2U9ZXx8e307dmFyIHQ9ZS5zdHlsZTtyZXR1cm4gdD8odD10LnJlcGxhY2UoLygoLiopP2Rpc3BsYXkpKC4qKT86KFteO10qKS9pLFwiJDE6bm9uZVwiKSx0PT09ZS5zdHlsZSYmKHQ9dC5yZXBsYWNlKC8oLiopPy9pLFwiZGlzcGxheTpub25lOyQxXCIpKSk6dD1cImRpc3BsYXk6bm9uZVwiLHd0KHt9LGUse3N0eWxlOnR9KX1mdW5jdGlvbiBXKGUpe2U9ZXx8e307dmFyIHQ9ZS5zdHlsZTtyZXR1cm4gdCYmKGUuc3R5bGU9dC5yZXBsYWNlKC8oZGlzcGxheVxccyo6XFxzKm5vbmVcXHMqOz8pKi9naSxcIlwiKSksZX1mdW5jdGlvbiBqKHQsbixpLHIpe3ZhciBvLGE9dC5maW5kKFwiPmNvbGdyb3VwXCIpLHM9YnQobixmdW5jdGlvbihlKXtyZXR1cm4gbz1lLndpZHRoLG8mJjAhPT1wYXJzZUludChvLDEwKT91dC5mb3JtYXQoJzxjb2wgc3R5bGU9XCJ3aWR0aDp7MH1cIi8+Jyx0eXBlb2Ygbz09PWNuP286bytcInB4XCIpOlwiPGNvbCAvPlwifSk7KGl8fGEuZmluZChcIi5rLWhpZXJhcmNoeS1jb2xcIikubGVuZ3RoKSYmcy5zcGxpY2UoMCwwLCc8Y29sIGNsYXNzPVwiay1oaWVyYXJjaHktY29sXCIgLz4nKSxhLmxlbmd0aCYmYS5yZW1vdmUoKSxhPWUoQXJyYXkocisxKS5qb2luKCc8Y29sIGNsYXNzPVwiay1ncm91cC1jb2xcIj4nKStzLmpvaW4oXCJcIikpLGEuaXMoXCJjb2xncm91cFwiKXx8KGE9ZShcIjxjb2xncm91cC8+XCIpLmFwcGVuZChhKSksdC5wcmVwZW5kKGEpLHduLm1zaWUmJjg9PXduLnZlcnNpb24mJih0LmNzcyhcImRpc3BsYXlcIixcImlubGluZS10YWJsZVwiKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSwxKSl9ZnVuY3Rpb24gRyhlLHQpe3ZhciBuLGkscj0wO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKXRbbl0ubG9ja2VkJiYoZS5lcShuKS5pbnNlcnRCZWZvcmUoZS5lcShyKSkscisrKX1mdW5jdGlvbiBxKGUpe3ZhciB0LG4saSxyPXt9O2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQ9ZVtuXSxyW3QudmFsdWVdPXQudGV4dDtyZXR1cm4gcn1mdW5jdGlvbiAkKGUsdCxuKXt2YXIgaT1uJiZuLmxlbmd0aCYmeXQoblswXSkmJlwidmFsdWVcImluIG5bMF0scj1pP3EobilbZV06ZTtyZXR1cm4gcj1udWxsIT1yP3I6XCJcIix0P3V0LmZvcm1hdCh0LHIpOnJ9ZnVuY3Rpb24gWShlLHQsbil7Zm9yKHZhciBpLHI9MCxvPWVbcl07bzspe2lmKGk9bj8hMDpcIm5vbmVcIiE9PW8uc3R5bGUuZGlzcGxheSxpJiYhbW4udGVzdChvLmNsYXNzTmFtZSkmJi0tdDwwKXtvLnN0eWxlLmRpc3BsYXk9bj9cIlwiOlwibm9uZVwiO2JyZWFrfW89ZVsrK3JdfX1mdW5jdGlvbiBLKHQsbil7Zm9yKHZhciBpLHIsbz0wLGE9dC5sZW5ndGg7YT5vO28rPTEpcj10LmVxKG8pLHIuaXMoXCIuay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvd1wiKT8oaT1yLmNoaWxkcmVuKFwiOm5vdCguay1ncm91cC1jZWxsKTpmaXJzdCwuay1kZXRhaWwtY2VsbFwiKS5sYXN0KCksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApLTEpKTooci5oYXNDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSYmKGk9ci5jaGlsZHJlbihcIi5rLWVkaXQtY29udGFpbmVyXCIpWzBdKSYmKGk9ZShpKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCktMSksaS5maW5kKFwiY29sXCIpLmVxKG4pLnJlbW92ZSgpLHI9aS5maW5kKFwidHI6Zmlyc3RcIikpLFkoclswXS5jZWxscyxuLCExKSl9ZnVuY3Rpb24gUSh0LG4pe2Zvcih2YXIgaSxyLG8sYT0wLHM9dC5sZW5ndGg7cz5hO2ErPTEpcj10LmVxKGEpLHIuaXMoXCIuay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvd1wiKT8oaT1yLmNoaWxkcmVuKFwiOm5vdCguay1ncm91cC1jZWxsKTpmaXJzdCwuay1kZXRhaWwtY2VsbFwiKS5sYXN0KCksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApKzEpKTooci5oYXNDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSYmKGk9ci5jaGlsZHJlbihcIi5rLWVkaXQtY29udGFpbmVyXCIpWzBdKSYmKGk9ZShpKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCkrMSksaihpLmZpbmQoXCI+Zm9ybT50YWJsZVwiKSxmKG8pLCExLDApLHI9aS5maW5kKFwidHI6Zmlyc3RcIikpLFkoclswXS5jZWxscyxuLCEwKSl9ZnVuY3Rpb24gWChlLHQsbil7bj1ufHwxO3ZhciBpLHIsbztmb3Iocj0wLG89ZS5sZW5ndGg7bz5yO3IrKylpPWUuZXEocikuY2hpbGRyZW4oKS5sYXN0KCksaS5hdHRyKFwiY29sc3BhblwiLHBhcnNlSW50KGkuYXR0cihcImNvbHNwYW5cIiksMTApK24pLGk9dC5lcShyKS5jaGlsZHJlbigpLmxhc3QoKSxpLmF0dHIoXCJjb2xzcGFuXCIscGFyc2VJbnQoaS5hdHRyKFwiY29sc3BhblwiKSwxMCktbil9ZnVuY3Rpb24gSihlKXt2YXIgdCxuLGk9MCxyPWUuZmluZChcIj5jb2xncm91cD5jb2xcIik7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0Kz0xKWkrPXBhcnNlSW50KHJbdF0uc3R5bGUud2lkdGgsMTApO3JldHVybiBpfWZ1bmN0aW9uIFooZSx0KXt2YXIgbixpLHIsbztlPWVbMF0sdD10WzBdLGUucm93cy5sZW5ndGghPT10LnJvd3MubGVuZ3RoJiYobj1lLm9mZnNldEhlaWdodCxpPXQub2Zmc2V0SGVpZ2h0LG4+aT8ocj10LnJvd3NbdC5yb3dzLmxlbmd0aC0xXSx2bi50ZXN0KHIuY2xhc3NOYW1lKSYmKHI9dC5yb3dzW3Qucm93cy5sZW5ndGgtMl0pLG89bi1pKToocj1lLnJvd3NbZS5yb3dzLmxlbmd0aC0xXSx2bi50ZXN0KHIuY2xhc3NOYW1lKSYmKHI9ZS5yb3dzW2Uucm93cy5sZW5ndGgtMl0pLG89aS1uKSxyLnN0eWxlLmhlaWdodD1yLm9mZnNldEhlaWdodCtvK1wicHhcIil9ZnVuY3Rpb24gZXQoZSx0KXt2YXIgbixpPWUub2Zmc2V0SGVpZ2h0LHI9dC5vZmZzZXRIZWlnaHQ7aT5yP249aStcInB4XCI6cj5pJiYobj1yK1wicHhcIiksbiYmKGUuc3R5bGUuaGVpZ2h0PXQuc3R5bGUuaGVpZ2h0PW4pfWZ1bmN0aW9uIHR0KGUsdCl7dmFyIG4saSxyO2lmKHR5cGVvZiBlPT09Y24mJmU9PT10KXJldHVybiBlO2lmKHl0KGUpJiZlLm5hbWU9PT10KXJldHVybiBlO2lmKHh0KGUpKWZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKHI9ZVtuXSx0eXBlb2Ygcj09PWNuJiZyPT09dHx8ci5uYW1lPT09dClyZXR1cm4gcjtyZXR1cm4gbnVsbH1mdW5jdGlvbiBudCh0LG4pe3ZhciBpLHIsbyxhPXduLm1zaWU7aWYobj09PSEwKXtpZih0PWUodCksaT0hMCxpJiYocj10LnBhcmVudCgpLnNjcm9sbFRvcCgpLG89dC5wYXJlbnQoKS5zY3JvbGxMZWZ0KCkpLGEpdHJ5e3RbMF0uc2V0QWN0aXZlKCl9Y2F0Y2gocyl7dFswXS5mb2N1cygpfWVsc2UgdFswXS5mb2N1cygpO2kmJih0LnBhcmVudCgpLnNjcm9sbFRvcChyKSx0LnBhcmVudCgpLnNjcm9sbExlZnQobykpfWVsc2UgZSh0KS5vbmUoXCJmb2N1c2luXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkuZm9jdXMoKX1mdW5jdGlvbiBpdCh0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCksaT1uLmlzKFwidGhcIikscj10aGlzLnRhYmxlLmFkZCh0aGlzLmxvY2tlZFRhYmxlKSxvPXRoaXMudGhlYWQucGFyZW50KCkuYWRkKGUoXCI+dGFibGVcIix0aGlzLmxvY2tlZEhlYWRlcikpLGE9ZSh0LnRhcmdldCkuaXMoXCI6YnV0dG9uLGEsOmlucHV0LGE+LmstaWNvbix0ZXh0YXJlYSxzcGFuLmstaWNvbixzcGFuLmstbGluaywuay1pbnB1dCwuay1tdWx0aXNlbGVjdC13cmFwXCIpLHM9bi5jbG9zZXN0KFwidGFibGVcIilbMF07dXQuc3VwcG9ydC50b3VjaHx8YSYmbi5maW5kKHV0LnJvbGVTZWxlY3RvcihcImZpbHRlcmNlbGxcIikpLmxlbmd0aHx8KHM9PT1yWzBdfHxzPT09clsxXXx8cz09PW9bMF18fHM9PT1vWzFdKSYmKGUodC50YXJnZXQpLmlzKFwiYS5rLWktY29sbGFwc2UsIGEuay1pLWV4cGFuZFwiKXx8KHRoaXMuY3VycmVudChuKSwoaXx8IWEpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7a24mJmUodXQuX2FjdGl2ZUVsZW1lbnQoKSkuaGFzQ2xhc3MoXCJrLXdpZGdldFwiKXx8bnQocywhMCl9KSxpJiZ0LnByZXZlbnREZWZhdWx0KCkpKX1mdW5jdGlvbiBydCh0LG4saSxyKXtpZih0PWUodCkscil7dmFyIG89bjtuPWksaT1vfXJldHVybiBuLm5vdCh0KS5sZW5ndGghPW4ubGVuZ3RoP3Q6bi5lcSh0WzBdPT1pWzBdPzA6MSl9ZnVuY3Rpb24gb3QoZSxuLGkscixvKXt2YXIgYSxzLGwsYz1vP1wicHJldkFsbFwiOlwibmV4dEFsbFwiO2lmKGUpe2lmKGE9ZS5wYXJlbnQoKVtjXShGdCkuZmlyc3QoKSwhYVswXSYmKG98fGUuaXMoXCJ0aFwiKSl8fCFvJiZlWzBdLnJvd1NwYW4+MSl7aWYobj1ydChuLGkscixvKSxudChuKSxvJiYhZS5pcyhcIi5rLWhlYWRlclwiKSlyZXR1cm4gTyhuLmZpbmQoXCJ0aGVhZDpmaXJzdFwiKSkuZXEoZS5pbmRleCgpKTthPW4uZmluZCgobz9cIj50aGVhZD5cIjpcIj50Ym9keT5cIikrRnQpLmZpcnN0KCl9IW8mJmVbMF0uY29sU3Bhbj4xJiZlLmlzKFwiLmstaGVhZGVyXCIpP2U9TihlKS5lcSgxKTplLmlzKFwiLmstaGVhZGVyXCIpJiZvPyhsPUgoZSksZT1sLmVxKGwubGVuZ3RoLTIpKToocz1lLmF0dHIodXQuYXR0cihcImluZGV4XCIpKSwocz09PXR8fG8pJiYocz1lLmluZGV4KCkpLGU9YS5jaGlsZHJlbigpLmVxKHMpKSxlWzBdJiZlLmlzKFJ0KXx8KGU9YS5jaGlsZHJlbihSdCkuZmlyc3QoKSl9ZWxzZSBlPWkuZmluZChCdCk7cmV0dXJuIGV9ZnVuY3Rpb24gYXQoZSx0LG4saSxyKXt2YXIgbz1uLmxlbmd0aD4xO3JldHVybiBlP2UucHJldkFsbChcIjp2aXNpYmxlXCIpWzBdP2U9ZS5wcmV2QWxsKEl0KS5maXJzdCgpOm8mJih0PT1uWzFdPyhudChuWzBdKSxlPXIoZS5wYXJlbnQoKSkuY2hpbGRyZW4oSXQpLmxhc3QoKSk6dD09aVsxXSYmKG50KGlbMF0pLGU9aS5lcSgwKS5maW5kKFwidHI+XCIrSXQpLmxhc3QoKSkpOmU9bi5maW5kKEJ0KSxlfWZ1bmN0aW9uIHN0KGUsdCxuLGkscil7dmFyIG89bi5sZW5ndGg+MTtyZXR1cm4gZT9lLm5leHRBbGwoXCI6dmlzaWJsZVwiKVswXT9lPWUubmV4dEFsbChJdCkuZmlyc3QoKTpvJiYodD09blswXT8obnQoblsxXSksZT1yKGUucGFyZW50KCkpLmNoaWxkcmVuKEl0KS5maXJzdCgpKTp0PT1pWzBdJiYobnQoaVsxXSksZT1pLmVxKDEpLmZpbmQoXCJ0cj5cIitJdCkuZmlyc3QoKSkpOmU9bi5maW5kKEJ0KSxlfWZ1bmN0aW9uIGx0KGUsdCxuLGkscil7dmFyIG89Mj09bi5sZW5ndGgsYT0hMCxzPXI/ZS5wcmV2QWxsKEl0K1wiOmZpcnN0XCIpOmUubmV4dEFsbChcIjp2aXNpYmxlOmZpcnN0XCIpO3JldHVybiBzLmxlbmd0aHx8KHM9ZS5wYXJlbnQoKSxvJiYoYT1yJiZ0PT1uWzBdfHwhciYmdD09blsxXSxzPWkocykpLGEmJihzPXNbcj9cInByZXZBbGxcIjpcIm5leHRBbGxcIl0oXCJ0cjpub3QoLmstZ3JvdXBpbmctcm93KTpub3QoLmstZGV0YWlsLXJvdyk6dmlzaWJsZTpmaXJzdFwiKSkscz1zLmNoaWxkcmVuKEl0KyhyP1wiOmxhc3RcIjpcIjpmaXJzdFwiKSkpLHN9ZnVuY3Rpb24gY3QoZSx0LGkpe3JldHVybic8dHIgY2xhc3M9XCJrLWdyb3VwaW5nLXJvd1wiPicrbih0KSsnPHRkIGNvbHNwYW49XCInK2UrJ1wiIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCI+PHAgY2xhc3M9XCJrLXJlc2V0XCI+PGEgY2xhc3M9XCJrLWljb24gay1pLWNvbGxhcHNlXCIgaHJlZj1cIiNcIiB0YWJpbmRleD1cIi0xXCI+PC9hPicraStcIjwvcD48L3RkPjwvdHI+XCJ9ZnVuY3Rpb24gZHQoZSl7cmV0dXJuJzx0ciBjbGFzcz1cImstZ3JvdXBpbmctcm93XCI+PHRkIGNvbHNwYW49XCInK2UrJ1wiIGFyaWEtZXhwYW5kZWQ9XCJ0cnVlXCI+PHAgY2xhc3M9XCJrLXJlc2V0XCI+Jm5ic3A7PC9wPjwvdGQ+PC90cj4nfXZhciB1dD13aW5kb3cua2VuZG8saHQ9dXQudWkscHQ9dXQuZGF0YS5EYXRhU291cmNlLGZ0PWh0Lkdyb3VwYWJsZSxndD11dC5zdXBwb3J0LnRib2R5SW5uZXJIdG1sLG10PXV0Ll9hY3RpdmVFbGVtZW50LHZ0PWh0LldpZGdldCxfdD11dC5rZXlzLHl0PWUuaXNQbGFpbk9iamVjdCx3dD1lLmV4dGVuZCxidD1lLm1hcCxrdD1lLmdyZXAseHQ9ZS5pc0FycmF5LEN0PWUuaW5BcnJheSxTdD1BcnJheS5wcm90b3R5cGUucHVzaCxUdD1lLnByb3h5LER0PXV0LmlzRnVuY3Rpb24sQXQ9ZS5pc0VtcHR5T2JqZWN0LEV0PU1hdGgsTXQ9XCJwcm9ncmVzc1wiLFB0PVwiZXJyb3JcIixJdD1cIjpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKTp2aXNpYmxlXCIsenQ9XCJ0Ym9keT50cjpub3QoLmstZ3JvdXBpbmctcm93KTpub3QoLmstZGV0YWlsLXJvdyk6bm90KC5rLWdyb3VwLWZvb3RlcikgPiB0ZDpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKVwiLEZ0PVwidHI6bm90KC5rLWZvb3Rlci10ZW1wbGF0ZSk6dmlzaWJsZVwiLFJ0PVwiOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpOnZpc2libGVcIixCdD1GdCtcIjpmaXJzdD5cIitSdCtcIjpmaXJzdFwiLEx0PVwidGguay1oZWFkZXI6bm90KC5rLWdyb3VwLWNlbGwpOm5vdCguay1oaWVyYXJjaHktY2VsbClcIixPdD1cIi5rZW5kb0dyaWRcIixIdD1cImVkaXRcIixOdD1cInNhdmVcIixWdD1cInJlbW92ZVwiLFV0PVwiZGV0YWlsSW5pdFwiLFd0PVwiZmlsdGVyTWVudUluaXRcIixqdD1cImNvbHVtbk1lbnVJbml0XCIsR3Q9XCJjaGFuZ2VcIixxdD1cImNvbHVtbkhpZGVcIiwkdD1cImNvbHVtblNob3dcIixZdD1cInNhdmVDaGFuZ2VzXCIsS3Q9XCJkYXRhQm91bmRcIixRdD1cImRldGFpbEV4cGFuZFwiLFh0PVwiZGV0YWlsQ29sbGFwc2VcIixKdD1cImstc3RhdGUtZm9jdXNlZFwiLFp0PVwiay1zdGF0ZS1zZWxlY3RlZFwiLGVuPVwiY29sdW1uUmVzaXplXCIsdG49XCJjb2x1bW5SZW9yZGVyXCIsbm49XCJjb2x1bW5Mb2NrXCIscm49XCJjb2x1bW5VbmxvY2tcIixvbj1cImNsaWNrXCIsYW49XCJoZWlnaHRcIixzbj1cInRhYkluZGV4XCIsbG49XCJmdW5jdGlvblwiLGNuPVwic3RyaW5nXCIsZG49XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcmVjb3JkP1wiLHVuPVwiRGVsZXRlXCIsaG49XCJDYW5jZWxcIixwbj0vKFxcfXxcXCMpL2dpLGZuPS8jL2dpLGduPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixtbj1SZWdFeHAoXCIoXnxcIitnbitcIikoay1ncm91cC1jZWxsfGstaGllcmFyY2h5LWNlbGwpKFwiK2duK1wifCQpXCIpLHZuPVJlZ0V4cChcIihefFwiK2duK1wiKShrLWZpbHRlci1yb3cpKFwiK2duK1wifCQpXCIpLF9uPSc8YSBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb250ZXh0ICM9Y2xhc3NOYW1lI1wiICM9YXR0ciMgaHJlZj1cIlxcXFwjXCI+PHNwYW4gY2xhc3M9XCIjPWljb25DbGFzcyMgIz1pbWFnZUNsYXNzI1wiPjwvc3Bhbj4jPXRleHQjPC9hPicseW49ITEsd249dXQuc3VwcG9ydC5icm93c2VyLGJuPXduLm1zaWUmJjc9PXduLnZlcnNpb24sa249d24ubXNpZSYmOD09d24udmVyc2lvbix4bj12dC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Z0LmZuLmluaXQuY2FsbChuLGUsdCksbi5fcmVmcmVzaEhhbmRsZXI9VHQobi5yZWZyZXNoLG4pLG4uc2V0RGF0YVNvdXJjZSh0LmRhdGFTb3VyY2UpLG4ud3JhcCgpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kYXRhU291cmNlJiZ0LmRhdGFTb3VyY2UudW5iaW5kKEd0LHQuX3JlZnJlc2hIYW5kbGVyKSx0LmRhdGFTb3VyY2U9ZSx0LmRhdGFTb3VyY2UuYmluZChHdCx0Ll9yZWZyZXNoSGFuZGxlcil9LG9wdGlvbnM6e25hbWU6XCJWaXJ0dWFsU2Nyb2xsYWJsZVwiLGl0ZW1IZWlnaHQ6ZS5ub29wfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt2dC5mbi5kZXN0cm95LmNhbGwoZSksZS5kYXRhU291cmNlLnVuYmluZChHdCxlLl9yZWZyZXNoSGFuZGxlciksZS53cmFwcGVyLmFkZChlLnZlcnRpY2FsU2Nyb2xsYmFyKS5vZmYoT3QpLGUuZHJhZyYmKGUuZHJhZy5kZXN0cm95KCksZS5kcmFnPW51bGwpLGUud3JhcHBlcj1lLmVsZW1lbnQ9ZS52ZXJ0aWNhbFNjcm9sbGJhcj1udWxsLGUuX3JlZnJlc2hIYW5kbGVyPW51bGx9LHdyYXA6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT11dC5zdXBwb3J0LnNjcm9sbGJhcigpKzEscj1uLmVsZW1lbnQ7ci5jc3Moe3dpZHRoOlwiYXV0b1wiLG92ZXJmbG93OlwiaGlkZGVuXCJ9KS5jc3MoeW4/XCJwYWRkaW5nLWxlZnRcIjpcInBhZGRpbmctcmlnaHRcIixpKSxuLmNvbnRlbnQ9ci5jaGlsZHJlbigpLmZpcnN0KCksdD1uLndyYXBwZXI9bi5jb250ZW50LndyYXAoJzxkaXYgY2xhc3M9XCJrLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIvPicpLnBhcmVudCgpLmJpbmQoXCJET01Nb3VzZVNjcm9sbFwiK090K1wiIG1vdXNld2hlZWxcIitPdCxUdChuLl93aGVlbFNjcm9sbCxuKSksdXQuc3VwcG9ydC5raW5ldGljU2Nyb2xsTmVlZGVkJiYobi5kcmFnPW5ldyB1dC5Vc2VyRXZlbnRzKG4ud3JhcHBlcix7Z2xvYmFsOiEwLHN0YXJ0OmZ1bmN0aW9uKGUpe2Uuc2VuZGVyLmNhcHR1cmUoKX0sbW92ZTpmdW5jdGlvbihlKXtuLnZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbFRvcChuLnZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbFRvcCgpLWUueS5kZWx0YSksdC5zY3JvbGxMZWZ0KHQuc2Nyb2xsTGVmdCgpLWUueC5kZWx0YSksZS5wcmV2ZW50RGVmYXVsdCgpfX0pKSxuLnZlcnRpY2FsU2Nyb2xsYmFyPWUoJzxkaXYgY2xhc3M9XCJrLXNjcm9sbGJhciBrLXNjcm9sbGJhci12ZXJ0aWNhbFwiIC8+JykuY3NzKHt3aWR0aDppfSkuYXBwZW5kVG8ocikuYmluZChcInNjcm9sbFwiK090LFR0KG4uX3Njcm9sbCxuKSl9LF93aGVlbFNjcm9sbDpmdW5jdGlvbih0KXtpZighdC5jdHJsS2V5KXt2YXIgbj10aGlzLnZlcnRpY2FsU2Nyb2xsYmFyLnNjcm9sbFRvcCgpLGk9dXQud2hlZWxEZWx0YVkodCk7aSYmKHQucHJldmVudERlZmF1bHQoKSxlKHQuY3VycmVudFRhcmdldCkub25lKFwid2hlZWxcIitPdCwhMSksdGhpcy52ZXJ0aWNhbFNjcm9sbGJhci5zY3JvbGxUb3AobistaSkpfX0sX3Njcm9sbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5jdXJyZW50VGFyZ2V0LnNjcm9sbFRvcCxpPXQuZGF0YVNvdXJjZSxyPXQuaXRlbUhlaWdodCxvPWkuc2tpcCgpfHwwLGE9dC5fcmFuZ2VTdGFydHx8byxzPXQuZWxlbWVudC5pbm5lckhlaWdodCgpLGw9ISEodC5fc2Nyb2xsYmFyVG9wJiZ0Ll9zY3JvbGxiYXJUb3A+biksYz1FdC5tYXgoRXQuZmxvb3Iobi9yKSwwKSxkPUV0Lm1heChjK0V0LmZsb29yKHMvciksMCk7dC5fc2Nyb2xsVG9wPW4tYSpyLHQuX3Njcm9sbGJhclRvcD1uLHQuX2ZldGNoKGMsZCxsKXx8KHQud3JhcHBlclswXS5zY3JvbGxUb3A9dC5fc2Nyb2xsVG9wKX0sX2ZldGNoOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9aS5kYXRhU291cmNlLG89aS5pdGVtSGVpZ2h0LGE9ci50YWtlKCkscz1pLl9yYW5nZVN0YXJ0fHxyLnNraXAoKXx8MCxsPUV0LmZsb29yKGUvYSkqYSxjPSExLGQ9LjMzO3JldHVybiBzPmU/KGM9ITAscz1FdC5tYXgoMCx0LWEpLGkuX3Njcm9sbFRvcD0oZS1zKSpvLGkuX3BhZ2UocyxhKSk6dD49cythJiYhbj8oYz0hMCxzPWUsaS5fc2Nyb2xsVG9wPW8saS5fcGFnZShzLGEpKTppLl9mZXRjaGluZ3x8KGwrYS1hKmQ+ZSYmZT5hJiZyLnByZWZldGNoKGwtYSxhKSx0PmwrYSpkJiZyLnByZWZldGNoKGwrYSxhKSksY30sX3BhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9bi5kYXRhU291cmNlO2NsZWFyVGltZW91dChuLl90aW1lb3V0KSxuLl9mZXRjaGluZz0hMCxuLl9yYW5nZVN0YXJ0PWUsaS5pblJhbmdlKGUsdCk/aS5yYW5nZShlLHQpOih1dC51aS5wcm9ncmVzcyhuLndyYXBwZXIucGFyZW50KCksITApLG4uX3RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2kucmFuZ2UoZSx0KX0sMTAwKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMsbz1cIlwiLGE9MjVlNCxzPXIuZGF0YVNvdXJjZSxsPXIuX3JhbmdlU3RhcnQsYz11dC5zdXBwb3J0LmtpbmV0aWNTY3JvbGxOZWVkZWQ/MDp1dC5zdXBwb3J0LnNjcm9sbGJhcigpLGQ9ci53cmFwcGVyWzBdO2Zvcih1dC51aS5wcm9ncmVzcyhyLndyYXBwZXIucGFyZW50KCksITEpLGNsZWFyVGltZW91dChyLl90aW1lb3V0KSxuPXIuaXRlbUhlaWdodD1yLm9wdGlvbnMuaXRlbUhlaWdodCgpfHwwLGk9ZC5zY3JvbGxXaWR0aD5kLm9mZnNldFdpZHRoP2M6MCxlPXMudG90YWwoKSpuK2ksdD0wO3Q8RXQuZmxvb3IoZS9hKTt0Kyspbys9JzxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OicrYSsncHhcIj48L2Rpdj4nO2UlYSYmKG8rPSc8ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDonK2UlYSsncHhcIj48L2Rpdj4nKSxyLnZlcnRpY2FsU2Nyb2xsYmFyLmh0bWwobyksZC5zY3JvbGxUb3A9ci5fc2Nyb2xsVG9wLHIuZHJhZyYmci5kcmFnLmNhbmNlbCgpLGwmJiFyLl9mZXRjaGluZyYmKHIuX3JhbmdlU3RhcnQ9cy5za2lwKCksMT09PXMucGFnZSgpJiYoci52ZXJ0aWNhbFNjcm9sbGJhclswXS5zY3JvbGxUb3A9MCkpLHIuX2ZldGNoaW5nPSExfX0pLENuPXtjcmVhdGU6e3RleHQ6XCJBZGQgbmV3IHJlY29yZFwiLGltYWdlQ2xhc3M6XCJrLWFkZFwiLGNsYXNzTmFtZTpcImstZ3JpZC1hZGRcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sY2FuY2VsOnt0ZXh0OlwiQ2FuY2VsIGNoYW5nZXNcIixpbWFnZUNsYXNzOlwiay1jYW5jZWxcIixjbGFzc05hbWU6XCJrLWdyaWQtY2FuY2VsLWNoYW5nZXNcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sc2F2ZTp7dGV4dDpcIlNhdmUgY2hhbmdlc1wiLGltYWdlQ2xhc3M6XCJrLXVwZGF0ZVwiLGNsYXNzTmFtZTpcImstZ3JpZC1zYXZlLWNoYW5nZXNcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sZGVzdHJveTp7dGV4dDpcIkRlbGV0ZVwiLGltYWdlQ2xhc3M6XCJrLWRlbGV0ZVwiLGNsYXNzTmFtZTpcImstZ3JpZC1kZWxldGVcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sZWRpdDp7dGV4dDpcIkVkaXRcIixpbWFnZUNsYXNzOlwiay1lZGl0XCIsY2xhc3NOYW1lOlwiay1ncmlkLWVkaXRcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sdXBkYXRlOnt0ZXh0OlwiVXBkYXRlXCIsaW1hZ2VDbGFzczpcImstdXBkYXRlXCIsY2xhc3NOYW1lOlwiay1wcmltYXJ5IGstZ3JpZC11cGRhdGVcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sY2FuY2VsZWRpdDp7dGV4dDpcIkNhbmNlbFwiLGltYWdlQ2xhc3M6XCJrLWNhbmNlbFwiLGNsYXNzTmFtZTpcImstZ3JpZC1jYW5jZWxcIixpY29uQ2xhc3M6XCJrLWljb25cIn0sZXhjZWw6e3RleHQ6XCJFeHBvcnQgdG8gRXhjZWxcIixpbWFnZUNsYXNzOlwiay1pLWV4Y2VsXCIsY2xhc3NOYW1lOlwiay1ncmlkLWV4Y2VsXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9LHBkZjp7dGV4dDpcIkV4cG9ydCB0byBQREZcIixpbWFnZUNsYXNzOlwiay1pLXBkZlwiLGNsYXNzTmFtZTpcImstZ3JpZC1wZGZcIixpY29uQ2xhc3M6XCJrLWljb25cIn19LFNuPXV0LnVpLkRhdGFCb3VuZFdpZGdldC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXM7bj14dChuKT97ZGF0YVNvdXJjZTpufTpuLHZ0LmZuLmluaXQuY2FsbChyLHQsbiksaSYmKHIuX2V2ZW50cz1pKSx5bj11dC5zdXBwb3J0LmlzUnRsKHQpLHIuX2VsZW1lbnQoKSxyLl9hcmlhKCksci5fY29sdW1ucyhyLm9wdGlvbnMuY29sdW1ucyksci5fZGF0YVNvdXJjZSgpLHIuX3Rib2R5KCksci5fcGFnZWFibGUoKSxyLl90aGVhZCgpLHIuX2dyb3VwYWJsZSgpLHIuX3Rvb2xiYXIoKSxyLl9zZXRDb250ZW50SGVpZ2h0KCksci5fdGVtcGxhdGVzKCksci5fbmF2aWdhdGFibGUoKSxyLl9zZWxlY3RhYmxlKCksci5fZGV0YWlscygpLHIuX2VkaXRhYmxlKCksci5fYXR0YWNoQ3VzdG9tQ29tbWFuZHNFdmVudCgpLHIub3B0aW9ucy5hdXRvQmluZD9yLmRhdGFTb3VyY2UuZmV0Y2goKTpyLl9mb290ZXIoKSxyLmxvY2tlZENvbnRlbnQmJihyLndyYXBwZXIuYWRkQ2xhc3MoXCJrLWdyaWQtbG9ja2VkY29sdW1uc1wiKSxyLl9yZXNpemVIYW5kbGVyPWZ1bmN0aW9uKCl7ci5yZXNpemUoKX0sZSh3aW5kb3cpLm9uKFwicmVzaXplXCIrT3Qsci5fcmVzaXplSGFuZGxlcikpLHV0Lm5vdGlmeShyKX0sZXZlbnRzOltHdCxcImRhdGFCaW5kaW5nXCIsXCJjYW5jZWxcIixcInBkZkV4cG9ydFwiLEt0LFF0LFh0LFV0LFd0LGp0LEh0LE50LFZ0LFl0LGVuLHRuLCR0LHF0LG5uLHJuXSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuc2Nyb2xsYWJsZTt0Lm9wdGlvbnMuZGF0YVNvdXJjZT1lLHQuX2RhdGFTb3VyY2UoKSx0Ll9wYWdlYWJsZSgpLHQuX3RoZWFkKCksbiYmKG4udmlydHVhbD90LmNvbnRlbnQuZmluZChcIj4uay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKS5zY3JvbGxMZWZ0KDApOnQuY29udGVudC5zY3JvbGxMZWZ0KDApKSx0Lm9wdGlvbnMuZ3JvdXBhYmxlJiZ0Ll9ncm91cGFibGUoKSx0LnZpcnR1YWxTY3JvbGxhYmxlJiZ0LnZpcnR1YWxTY3JvbGxhYmxlLnNldERhdGFTb3VyY2UodC5vcHRpb25zLmRhdGFTb3VyY2UpLHQub3B0aW9ucy5uYXZpZ2F0YWJsZSYmdC5fbmF2aWdhdGFibGUoKSx0Lm9wdGlvbnMuc2VsZWN0YWJsZSYmdC5fc2VsZWN0YWJsZSgpLHQub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxvcHRpb25zOntuYW1lOlwiR3JpZFwiLGNvbHVtbnM6W10sdG9vbGJhcjpudWxsLGF1dG9CaW5kOiEwLGZpbHRlcmFibGU6ITEsc2Nyb2xsYWJsZTohMCxzb3J0YWJsZTohMSxzZWxlY3RhYmxlOiExLG5hdmlnYXRhYmxlOiExLHBhZ2VhYmxlOiExLGVkaXRhYmxlOiExLGdyb3VwYWJsZTohMSxyb3dUZW1wbGF0ZTpcIlwiLGFsdFJvd1RlbXBsYXRlOlwiXCIsZGF0YVNvdXJjZTp7fSxoZWlnaHQ6bnVsbCxyZXNpemFibGU6ITEscmVvcmRlcmFibGU6ITEsY29sdW1uTWVudTohMSxkZXRhaWxUZW1wbGF0ZTpudWxsLGNvbHVtblJlc2l6ZUhhbmRsZVdpZHRoOjMsbW9iaWxlOlwiXCIsbWVzc2FnZXM6e2VkaXRhYmxlOntjYW5jZWxEZWxldGU6aG4sY29uZmlybWF0aW9uOmRuLGNvbmZpcm1EZWxldGU6dW59LGNvbW1hbmRzOntjcmVhdGU6Q24uY3JlYXRlLnRleHQsY2FuY2VsOkNuLmNhbmNlbC50ZXh0LHNhdmU6Q24uc2F2ZS50ZXh0LGRlc3Ryb3k6Q24uZGVzdHJveS50ZXh0LGVkaXQ6Q24uZWRpdC50ZXh0LHVwZGF0ZTpDbi51cGRhdGUudGV4dCxjYW5jZWxlZGl0OkNuLmNhbmNlbGVkaXQudGV4dCxleGNlbDpDbi5leGNlbC50ZXh0LHBkZjpDbi5wZGYudGV4dH19fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO3Z0LmZuLmRlc3Ryb3kuY2FsbChuKSxuLl9yZXNpemVIYW5kbGVyJiZlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrT3Qsbi5fcmVzaXplSGFuZGxlciksbi5wYWdlciYmbi5wYWdlci5lbGVtZW50JiZuLnBhZ2VyLmRlc3Ryb3koKSxuLnBhZ2VyPW51bGwsbi5ncm91cGFibGUmJm4uZ3JvdXBhYmxlLmVsZW1lbnQmJm4uZ3JvdXBhYmxlLmVsZW1lbnQua2VuZG9Hcm91cGFibGUoXCJkZXN0cm95XCIpLG4uZ3JvdXBhYmxlPW51bGwsbi5vcHRpb25zLnJlb3JkZXJhYmxlJiZuLndyYXBwZXIuZGF0YShcImtlbmRvUmVvcmRlcmFibGVcIikuZGVzdHJveSgpLG4uc2VsZWN0YWJsZSYmbi5zZWxlY3RhYmxlLmVsZW1lbnQmJm4uc2VsZWN0YWJsZS5kZXN0cm95KCksbi5zZWxlY3RhYmxlPW51bGwsbi5yZXNpemFibGUmJihuLnJlc2l6YWJsZS5kZXN0cm95KCksbi5fcmVzaXplVXNlckV2ZW50cyYmKG4uX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2tIYW5kbGVyJiZlKGRvY3VtZW50KS5vZmYoXCJjbGlja1wiLG4uX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2tIYW5kbGVyKSxuLl9yZXNpemVVc2VyRXZlbnRzLmRlc3Ryb3koKSxuLl9yZXNpemVVc2VyRXZlbnRzPW51bGwpLG4ucmVzaXphYmxlPW51bGwpLG4udmlydHVhbFNjcm9sbGFibGUmJm4udmlydHVhbFNjcm9sbGFibGUuZWxlbWVudCYmbi52aXJ0dWFsU2Nyb2xsYWJsZS5kZXN0cm95KCksbi52aXJ0dWFsU2Nyb2xsYWJsZT1udWxsLG4uX2Rlc3Ryb3lDb2x1bW5BdHRhY2htZW50cygpLG4uX2Rlc3Ryb3lFZGl0YWJsZSgpLG4uZGF0YVNvdXJjZSYmKG4uZGF0YVNvdXJjZS51bmJpbmQoR3Qsbi5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChNdCxuLl9wcm9ncmVzc0hhbmRsZXIpLnVuYmluZChQdCxuLl9lcnJvckhhbmRsZXIpLG4uX3JlZnJlc2hIYW5kbGVyPW4uX3Byb2dyZXNzSGFuZGxlcj1uLl9lcnJvckhhbmRsZXI9bnVsbCksdD1uLmVsZW1lbnQuYWRkKG4ud3JhcHBlcikuYWRkKG4udGFibGUpLmFkZChuLnRoZWFkKS5hZGQobi53cmFwcGVyLmZpbmQoXCI+LmstZ3JpZC10b29sYmFyXCIpKSxuLmNvbnRlbnQmJih0PXQuYWRkKG4uY29udGVudCkuYWRkKG4uY29udGVudC5maW5kKFwiPi5rLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIpKSksbi5sb2NrZWRIZWFkZXImJm4uX3JlbW92ZUxvY2tlZENvbnRhaW5lcnMoKSxuLnBhbmUmJm4ucGFuZS5kZXN0cm95KCksbi5fZHJhZ2dhYmxlSW5zdGFuY2UmJm4uX2RyYWdnYWJsZUluc3RhbmNlLmVsZW1lbnQmJm4uX2RyYWdnYWJsZUluc3RhbmNlLmRlc3Ryb3koKSxuLl9kcmFnZ2FibGVJbnN0YW5jZT1udWxsLHQub2ZmKE90KSx1dC5kZXN0cm95KG4ud3JhcHBlciksbi5zY3JvbGxhYmxlcz1uLnRoZWFkPW4udGJvZHk9bi5lbGVtZW50PW4udGFibGU9bi5jb250ZW50PW4uZm9vdGVyPW4ud3JhcHBlcj1uLl9ncm91cGFibGVDbGlja0hhbmRsZXI9bi5fc2V0Q29udGVudFdpZHRoSGFuZGxlcj1udWxsfSxnZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIG4saT13dCghMCx7fSx0aGlzLm9wdGlvbnMpO3JldHVybiBpLmNvbHVtbnM9dXQuZGVlcEV4dGVuZChbXSx0aGlzLmNvbHVtbnMpLG49dGhpcy5kYXRhU291cmNlLGkuZGF0YVNvdXJjZT1lLmV4dGVuZCghMCx7fSxuLm9wdGlvbnMpLGkuZGF0YVNvdXJjZS5wYWdlPW4ucGFnZSgpLGkuZGF0YVNvdXJjZS5maWx0ZXI9bi5maWx0ZXIoKSxpLmRhdGFTb3VyY2UucGFnZVNpemU9bi5wYWdlU2l6ZSgpLGkuZGF0YVNvdXJjZS5zb3J0PW4uc29ydCgpLGkuZGF0YVNvdXJjZS5ncm91cD1uLmdyb3VwKCksaS5kYXRhU291cmNlLmFnZ3JlZ2F0ZT1uLmFnZ3JlZ2F0ZSgpLGkuJGFuZ3VsYXI9dCxpfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMuZ2V0T3B0aW9ucygpO3V0LmRlZXBFeHRlbmQocixlKSx0PXRoaXMud3JhcHBlcixuPXRoaXMuX2V2ZW50cyxpPXRoaXMuZWxlbWVudCx0aGlzLmRlc3Ryb3koKSx0aGlzLm9wdGlvbnM9bnVsbCx0WzBdIT09aVswXSYmKHQuYmVmb3JlKGkpLHQucmVtb3ZlKCkpLGkuZW1wdHkoKSx0aGlzLmluaXQoaSxyLG4pLHRoaXMuX3NldEV2ZW50cyhyKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NrZWRDb250ZW50P3RoaXMuX2l0ZW1zKHRoaXMudGJvZHkpLmFkZCh0aGlzLl9pdGVtcyh0aGlzLmxvY2tlZFRhYmxlLmNoaWxkcmVuKFwidGJvZHlcIikpKTp0aGlzLl9pdGVtcyh0aGlzLnRib2R5KX0sX2l0ZW1zOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNoaWxkcmVuKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTtyZXR1cm4hdC5oYXNDbGFzcyhcImstZ3JvdXBpbmctcm93XCIpJiYhdC5oYXNDbGFzcyhcImstZGV0YWlsLXJvd1wiKSYmIXQuaGFzQ2xhc3MoXCJrLWdyb3VwLWZvb3RlclwiKX0pfSxkYXRhSXRlbXM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT11dC51aS5EYXRhQm91bmRXaWRnZXQuZm4uZGF0YUl0ZW1zLmNhbGwodGhpcyk7aWYodGhpcy5sb2NrZWRDb250ZW50KXtmb3IoZT1pLmxlbmd0aCx0PUFycmF5KDIqZSksbj1lOy0tbj49MDspdFtuXT10W24rZV09aVtuXTtpPXR9cmV0dXJuIGl9LF9kZXN0cm95Q29sdW1uQXR0YWNobWVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QucmVzaXplSGFuZGxlPW51bGwsdC50aGVhZCYmKHRoaXMuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0LnRoZWFkLmdldCgpfX0pLHQudGhlYWQuZmluZChcInRoXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dC5kYXRhKFwia2VuZG9GaWx0ZXJNZW51XCIpLGk9dC5kYXRhKFwia2VuZG9Db2x1bW5Tb3J0ZXJcIikscj10LmRhdGEoXCJrZW5kb0NvbHVtbk1lbnVcIik7biYmbi5kZXN0cm95KCksaSYmaS5kZXN0cm95KCksciYmci5kZXN0cm95KCl9KSl9LF9hdHRhY2hDdXN0b21Db21tYW5kc0V2ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcyxyPUwoaS5jb2x1bW5zfHxbXSk7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspZT1yW3RdLmNvbW1hbmQsZSYmbChpLGkud3JhcHBlcixlKX0sX2FyaWE6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnQuYXR0cihcImlkXCIpfHxcImFyaWFcIjtlJiYodGhpcy5fY2VsbElkPWUrXCJfYWN0aXZlX2NlbGxcIil9LF9lbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudDtuLmlzKFwidGFibGVcIil8fChuPXQub3B0aW9ucy5zY3JvbGxhYmxlP3QuZWxlbWVudC5maW5kKFwiPiAuay1ncmlkLWNvbnRlbnQgPiB0YWJsZVwiKTp0LmVsZW1lbnQuY2hpbGRyZW4oXCJ0YWJsZVwiKSxuLmxlbmd0aHx8KG49ZShcIjx0YWJsZSAvPlwiKS5hcHBlbmRUbyh0LmVsZW1lbnQpKSksYm4mJm4uYXR0cihcImNlbGxzcGFjaW5nXCIsMCksdC50YWJsZT1uLmF0dHIoXCJyb2xlXCIsdC5faGFzRGV0YWlscygpP1widHJlZWdyaWRcIjpcImdyaWRcIiksdC5fd3JhcHBlcigpfSxfY3JlYXRlUmVzaXplSGFuZGxlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGMsZD10aGlzLHU9ZC5vcHRpb25zLmNvbHVtblJlc2l6ZUhhbmRsZVdpZHRoLGg9ZC5vcHRpb25zLnNjcm9sbGFibGUscD1kLnJlc2l6ZUhhbmRsZSxmPXRoaXMuX2dyb3VwcygpO2lmKHAmJmQubG9ja2VkQ29udGVudCYmcC5kYXRhKFwidGhcIilbMF0hPT1uWzBdJiYocC5yZW1vdmUoKSxwPW51bGwpLHB8fChwPWQucmVzaXplSGFuZGxlPWUoJzxkaXYgY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGVcIj48ZGl2IGNsYXNzPVwiay1yZXNpemUtaGFuZGxlLWlubmVyXCI+PC9kaXY+PC9kaXY+JyksdC5hcHBlbmQocCkpLHluKWk9bi5wb3NpdGlvbigpLmxlZnQsaCYmKGE9bi5jbG9zZXN0KFwiLmstZ3JpZC1oZWFkZXItd3JhcCwgLmstZ3JpZC1oZWFkZXItbG9ja2VkXCIpLHM9d24ubXNpZT9hLnNjcm9sbExlZnQoKTowLGw9d24ud2Via2l0P2FbMF0uc2Nyb2xsV2lkdGgtYVswXS5vZmZzZXRXaWR0aC1hLnNjcm9sbExlZnQoKTowLGM9d24ubW96aWxsYT9hWzBdLnNjcm9sbFdpZHRoLWFbMF0ub2Zmc2V0V2lkdGgtKGFbMF0uc2Nyb2xsV2lkdGgtYVswXS5vZmZzZXRXaWR0aC1hLnNjcm9sbExlZnQoKSk6MCxpLT1sLWMrcyk7ZWxzZXtmb3IoaT1uWzBdLm9mZnNldFdpZHRoLHI9TyhuLmNsb3Nlc3QoXCJ0aGVhZFwiKSksbz0wO3IubGVuZ3RoPm8mJnJbb10hPW5bMF07bysrKWkrPXJbb10ub2Zmc2V0V2lkdGg7Zj4wJiYoaSs9dC5maW5kKFwiLmstZ3JvdXAtY2VsbDpmaXJzdFwiKS5vdXRlcldpZHRoKCkqZil9cC5jc3Moe3RvcDpuLnBvc2l0aW9uKCkudG9wLGxlZnQ6aS11LGhlaWdodDpuLm91dGVySGVpZ2h0KCksd2lkdGg6Myp1fSkuZGF0YShcInRoXCIsbikuc2hvdygpfSxfcG9zaXRpb25Db2x1bW5SZXNpemVIYW5kbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmNvbHVtblJlc2l6ZUhhbmRsZVdpZHRoLGk9dC5sb2NrZWRIZWFkZXI/dC5sb2NrZWRIZWFkZXIuZmluZChcInRoZWFkOmZpcnN0XCIpOmUoKTt0LnRoZWFkLmFkZChpKS5vbihcIm1vdXNlbW92ZVwiK090LFwidGhcIixmdW5jdGlvbihpKXt2YXIgbyxhLHMsbD1lKHRoaXMpO2wuaGFzQ2xhc3MoXCJrLWdyb3VwLWNlbGxcIil8fGwuaGFzQ2xhc3MoXCJrLWhpZXJhcmNoeS1jZWxsXCIpfHwobz1pLmNsaWVudFgsYT1lKHdpbmRvdykuc2Nyb2xsTGVmdCgpLHM9bC5vZmZzZXQoKS5sZWZ0Kyh5bj8wOnRoaXMub2Zmc2V0V2lkdGgpLG8rYT5zLW4mJnMrbj5vK2E/dC5fY3JlYXRlUmVzaXplSGFuZGxlKGwuY2xvc2VzdChcImRpdlwiKSxsKTp0LnJlc2l6ZUhhbmRsZT90LnJlc2l6ZUhhbmRsZS5oaWRlKCk6cih0LndyYXBwZXIsXCJcIikpfSl9LF9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrOmZ1bmN0aW9uKHQpe2UodC50YXJnZXQpLmNsb3Nlc3QoXCIuay1jb2x1bW4tYWN0aXZlXCIpLmxlbmd0aHx8KGUoZG9jdW1lbnQpLm9mZih0KSx0aGlzLl9oaWRlUmVzaXplSGFuZGxlKCkpfSxfaGlkZVJlc2l6ZUhhbmRsZTpmdW5jdGlvbigpe3RoaXMucmVzaXplSGFuZGxlJiYodGhpcy5yZXNpemVIYW5kbGUuZGF0YShcInRoXCIpLnJlbW92ZUNsYXNzKFwiay1jb2x1bW4tYWN0aXZlXCIpLHRoaXMubG9ja2VkQ29udGVudCYmIXRoaXMuX2lzTW9iaWxlPyh0aGlzLnJlc2l6ZUhhbmRsZS5yZW1vdmUoKSx0aGlzLnJlc2l6ZUhhbmRsZT1udWxsKTp0aGlzLnJlc2l6ZUhhbmRsZS5oaWRlKCkpfSxfcG9zaXRpb25Db2x1bW5SZXNpemVIYW5kbGVUb3VjaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmxvY2tlZEhlYWRlcj90LmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWQ6Zmlyc3RcIik6ZSgpO3QuX3Jlc2l6ZVVzZXJFdmVudHM9bmV3IHV0LlVzZXJFdmVudHMobi5hZGQodC50aGVhZCkse2ZpbHRlcjpcInRoOm5vdCguay1ncm91cC1jZWxsKTpub3QoLmstaGllcmFyY2h5LWNlbGwpXCIsdGhyZXNob2xkOjEwLGhvbGQ6ZnVuY3Rpb24obil7dmFyIGk9ZShuLnRhcmdldCk7bi5wcmV2ZW50RGVmYXVsdCgpLGkuYWRkQ2xhc3MoXCJrLWNvbHVtbi1hY3RpdmVcIiksdC5fY3JlYXRlUmVzaXplSGFuZGxlKGkuY2xvc2VzdChcImRpdlwiKSxpKSx0Ll9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrSGFuZGxlcnx8KHQuX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2tIYW5kbGVyPVR0KHQuX3Jlc2l6ZUhhbmRsZURvY3VtZW50Q2xpY2ssdCkpLGUoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIix0Ll9yZXNpemVIYW5kbGVEb2N1bWVudENsaWNrSGFuZGxlcil9fSl9LF9yZXNpemFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuLGksbyxhLHMsbCxjPXRoaXMsZD1jLm9wdGlvbnMsdT10aGlzLl9pc01vYmlsZSxoPXV0LnN1cHBvcnQubW9iaWxlT1M/MDp1dC5zdXBwb3J0LnNjcm9sbGJhcigpO2QucmVzaXphYmxlJiYodD1kLnNjcm9sbGFibGU/Yy53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWhlYWRlci13cmFwOmZpcnN0XCIpOmMud3JhcHBlcix1P2MuX3Bvc2l0aW9uQ29sdW1uUmVzaXplSGFuZGxlVG91Y2godCk6Yy5fcG9zaXRpb25Db2x1bW5SZXNpemVIYW5kbGUodCksYy5yZXNpemFibGUmJmMucmVzaXphYmxlLmRlc3Ryb3koKSxjLnJlc2l6YWJsZT1uZXcgaHQuUmVzaXphYmxlKHQuYWRkKGMubG9ja2VkSGVhZGVyKSx7aGFuZGxlOlwiLmstcmVzaXplLWhhbmRsZVwiLGhpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLWdyaWQtcmVzaXplLWluZGljYXRvclwiIC8+JykuY3NzKHtoZWlnaHQ6dC5kYXRhKFwidGhcIikub3V0ZXJIZWlnaHQoKStjLnRib2R5LmF0dHIoXCJjbGllbnRIZWlnaHRcIil9KX0sc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIGgscCxmLGc7bD1lKHQuY3VycmVudFRhcmdldCkuZGF0YShcInRoXCIpLHUmJmMuX2hpZGVSZXNpemVIYW5kbGUoKSxoPWwuY2xvc2VzdChcInRhYmxlXCIpLHA9ZS5pbkFycmF5KGxbMF0sTyhsLmNsb3Nlc3QoXCJ0aGVhZFwiKSkuZmlsdGVyKFwiOnZpc2libGVcIikpLGE9aC5wYXJlbnQoKS5oYXNDbGFzcyhcImstZ3JpZC1oZWFkZXItbG9ja2VkXCIpLGY9YT9jLmxvY2tlZFRhYmxlOmMudGFibGUsZz1jLmZvb3Rlcnx8ZSgpLGMuZm9vdGVyJiZjLmxvY2tlZENvbnRlbnQmJihnPWMuZm9vdGVyLmNoaWxkcmVuKGE/XCIuay1ncmlkLWZvb3Rlci1sb2NrZWRcIjpcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIikpLHIoYy53cmFwcGVyLFwiY29sLXJlc2l6ZVwiKSxzPWQuc2Nyb2xsYWJsZT9oLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCk6bm90KC5rLWhpZXJhcmNoeS1jb2wpOmVxKFwiK3ArXCIpXCIpLmFkZChmLmNoaWxkcmVuKFwiY29sZ3JvdXBcIikuZmluZChcImNvbDpub3QoLmstZ3JvdXAtY29sKTpub3QoLmstaGllcmFyY2h5LWNvbCk6ZXEoXCIrcCtcIilcIikpLmFkZChnLmZpbmQoXCJjb2xncm91cFwiKS5maW5kKFwiY29sOm5vdCguay1ncm91cC1jb2wpOm5vdCguay1oaWVyYXJjaHktY29sKTplcShcIitwK1wiKVwiKSk6Zi5jaGlsZHJlbihcImNvbGdyb3VwXCIpLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCk6bm90KC5rLWhpZXJhcmNoeS1jb2wpOmVxKFwiK3ArXCIpXCIpLG49dC54LmxvY2F0aW9uLGk9bC5vdXRlcldpZHRoKCksbz1hP2YuY2hpbGRyZW4oXCJ0Ym9keVwiKS5vdXRlcldpZHRoKCk6Yy50Ym9keS5vdXRlcldpZHRoKCl9LHJlc2l6ZTpmdW5jdGlvbih0KXt2YXIgcix1LHAsZixnLG0sdj15bj8tMToxLF89aSt0LngubG9jYXRpb24qdi1uKnY7ZC5zY3JvbGxhYmxlPyhhJiZjLmxvY2tlZEZvb3Rlcj9yPWMubG9ja2VkRm9vdGVyLmNoaWxkcmVuKFwidGFibGVcIik6Yy5mb290ZXImJihyPWMuZm9vdGVyLmZpbmQoXCI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiKSksciYmclswXXx8KHI9ZSgpKSx1PWwuY2xvc2VzdChcInRhYmxlXCIpLHA9YT9jLmxvY2tlZFRhYmxlOmMudGFibGUsZj0hMSxnPWMud3JhcHBlci53aWR0aCgpLWgsbT1fLGEmJm8taSttPmcmJihtPWkrKGctby0yKmgpLDA+bSYmKG09XyksZj0hMCksbT4xMCYmKHMuY3NzKFwid2lkdGhcIixtKSxvJiYobT1mP2ctMipoOm8rdC54LmxvY2F0aW9uKnYtbip2LHAuYWRkKHUpLmFkZChyKS5jc3MoXCJ3aWR0aFwiLG0pLGF8fChjLl9mb290ZXJXaWR0aD1tKSkpKTpfPjEwJiZzLmNzcyhcIndpZHRoXCIsXyl9LHJlc2l6ZWVuZDpmdW5jdGlvbigpe3ZhciBlLHQsbixvPWwub3V0ZXJXaWR0aCgpO3IoYy53cmFwcGVyLFwiXCIpLGkhPW8mJih0PWMubG9ja2VkSGVhZGVyP2MubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZDpmaXJzdCB0cjpmaXJzdFwiKS5hZGQoYy50aGVhZC5maW5kKFwidHI6Zmlyc3RcIikpOmwucGFyZW50KCksbj1sLmF0dHIodXQuYXR0cihcImluZGV4XCIpKSxufHwobj10LmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5pbmRleChsKSksZT1MKGMuY29sdW1ucylbbl0sZS53aWR0aD1vLGMudHJpZ2dlcihlbix7Y29sdW1uOmUsb2xkV2lkdGg6aSxuZXdXaWR0aDpvfSksYy5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSxjLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLGMuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKSksYy5faGlkZVJlc2l6ZUhhbmRsZSgpLGw9bnVsbH19KSl9LF9kcmFnZ2FibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5yZW9yZGVyYWJsZSYmKHQuX2RyYWdnYWJsZUluc3RhbmNlJiZ0Ll9kcmFnZ2FibGVJbnN0YW5jZS5kZXN0cm95KCksdC5fZHJhZ2dhYmxlSW5zdGFuY2U9dC53cmFwcGVyLmtlbmRvRHJhZ2dhYmxlKHtncm91cDp1dC5ndWlkKCksZmlsdGVyOnQuY29udGVudD9cIi5rLWdyaWQtaGVhZGVyOmZpcnN0IFwiK0x0OlwidGFibGU6Zmlyc3Q+LmstZ3JpZC1oZWFkZXIgXCIrTHQsZHJhZzpmdW5jdGlvbigpe3QuX2hpZGVSZXNpemVIYW5kbGUoKX0saGludDpmdW5jdGlvbih0KXtyZXR1cm4gZSgnPGRpdiBjbGFzcz1cImstaGVhZGVyIGstZHJhZy1jbHVlXCIgLz4nKS5jc3Moe3dpZHRoOnQud2lkdGgoKSxwYWRkaW5nTGVmdDp0LmNzcyhcInBhZGRpbmdMZWZ0XCIpLHBhZGRpbmdSaWdodDp0LmNzcyhcInBhZGRpbmdSaWdodFwiKSxsaW5lSGVpZ2h0OnQuaGVpZ2h0KCkrXCJweFwiLHBhZGRpbmdUb3A6dC5jc3MoXCJwYWRkaW5nVG9wXCIpLHBhZGRpbmdCb3R0b206dC5jc3MoXCJwYWRkaW5nQm90dG9tXCIpfSkuaHRtbCh0LmF0dHIodXQuYXR0cihcInRpdGxlXCIpKXx8dC5hdHRyKHV0LmF0dHIoXCJmaWVsZFwiKSl8fHQudGV4dCgpKS5wcmVwZW5kKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWRyYWctc3RhdHVzIGstZGVuaWVkXCIgLz4nKX19KS5kYXRhKFwia2VuZG9EcmFnZ2FibGVcIikpfSxfcmVvcmRlcmFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7bi5vcHRpb25zLnJlb3JkZXJhYmxlJiYobi53cmFwcGVyLmRhdGEoXCJrZW5kb1Jlb3JkZXJhYmxlXCIpJiZuLndyYXBwZXIuZGF0YShcImtlbmRvUmVvcmRlcmFibGVcIikuZGVzdHJveSgpLHQ9ZnVuY3Rpb24oZSx0LGkpe3ZhciByPWVbdF0sbz1lW2ldLGE9ZChyLG4uY29sdW1ucyk7cmV0dXJuIGU9YT9hLmNvbHVtbnM6bi5jb2x1bW5zLEN0KG8sZSl9LG4ud3JhcHBlci5rZW5kb1Jlb3JkZXJhYmxlKHtkcmFnZ2FibGU6bi5fZHJhZ2dhYmxlSW5zdGFuY2UsZHJhZ092ZXJDb250YWluZXJzOmZ1bmN0aW9uKGUsaSl7dmFyIHI9QyhuLmNvbHVtbnMpO3JldHVybiByW2VdLmxvY2thYmxlIT09ITEmJnQocixlLGkpPi0xfSxpblNhbWVDb250YWluZXI6ZnVuY3Rpb24oaSl7cmV0dXJuIGUoaS5zb3VyY2UpLnBhcmVudCgpWzBdPT09ZShpLnRhcmdldCkucGFyZW50KClbMF0mJnQoQyhuLmNvbHVtbnMpLGkuc291cmNlSW5kZXgsaS50YXJnZXRJbmRleCk+LTF9LGNoYW5nZTpmdW5jdGlvbihlKXt2YXIgaT1DKG4uY29sdW1ucykscj1pW2Uub2xkSW5kZXhdLG89dChpLGUub2xkSW5kZXgsZS5uZXdJbmRleCk7bi50cmlnZ2VyKHRuLHtuZXdJbmRleDpvLG9sZEluZGV4OkN0KHIsaSksY29sdW1uOnJ9KSxuLnJlb3JkZXJDb2x1bW4obyxyLFwiYmVmb3JlXCI9PT1lLnBvc2l0aW9uKX19KSl9LF9yZW9yZGVySGVhZGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sbCxjPXRoaXMsZD14KGVbMF0sYy5jb2x1bW5zKSx1PXgodCxjLmNvbHVtbnMpLGg9W107Zm9yKGk9MDtlLmxlbmd0aD5pO2krKyllW2ldLmNvbHVtbnMmJihoPWguY29uY2F0KGVbaV0uY29sdW1ucykpO3I9cyhjLmxvY2tlZEhlYWRlcixjLnRoZWFkLFwidHI6ZXEoXCIrZC5yb3crXCIpPnRoLmstaGVhZGVyOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxvPUkoZSkubGVuZ3RoLGw9SShbdF0pLmxlbmd0aCxoLmxlbmd0aD8obz4wJiYwPT09bD92KGUsdCxoLGMuY29sdW1ucyxjLmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWRcIiksYy50aGVhZCx0aGlzLl9ncm91cHMoKSk6MD09PW8mJmw+MCYmdihlLHQsaCxjLmNvbHVtbnMsYy50aGVhZCxjLmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWRcIiksdGhpcy5fZ3JvdXBzKCkpLHQ9ayhjLmNvbHVtbnMsdCxlWzBdLG4pLHQmJmMuX3Jlb3JkZXJIZWFkZXIoaCx0LG4pKTpvIT09bCYmbShyW2QuY2VsbF0sYy5jb2x1bW5zLG8pLGEocixkLmNlbGwsdS5jZWxsLG4sZS5sZW5ndGgpfSxfcmVvcmRlckNvbnRlbnQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sbCxjLGQ9dGhpcyx1PWUoKSxoPXRbMF0scD1DdChoLEwoZC5jb2x1bW5zKSksZj1DdChuLEwoZC5jb2x1bW5zKSksZz1DdChoLEIoZC5jb2x1bW5zKSksbT1DdChuLEIoZC5jb2x1bW5zKSksdj1JKGQuY29sdW1ucykubGVuZ3RoLF89ISFuLmxvY2tlZCx5PWQuZm9vdGVyfHxkLndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLHc9cj1tO2ZvcihuLmhpZGRlbiYmKF8/KG09ZC5sb2NrZWRUYWJsZS5maW5kKFwiY29sZ3JvdXBcIiksdz1kLmxvY2tlZEhlYWRlci5maW5kKFwiY29sZ3JvdXBcIikscj1lKGQubG9ja2VkRm9vdGVyKS5maW5kKFwiPnRhYmxlPmNvbGdyb3VwXCIpKToobT1kLnRib2R5LnByZXYoKSx3PWQudGhlYWQucHJldigpLHI9eS5maW5kKFwiLmstZ3JpZC1mb290ZXItd3JhcFwiKS5maW5kKFwiPnRhYmxlPmNvbGdyb3VwXCIpKSksZC5faGFzRmlsdGVyUm93KCkmJmEoZC53cmFwcGVyLmZpbmQoXCIuay1maWx0ZXItcm93IHRoOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKSxwLGYsaSx0Lmxlbmd0aCksYShzKGQubG9ja2VkSGVhZGVyLGQudGhlYWQucHJldigpLFwiY29sOm5vdCguay1ncm91cC1jb2wsLmstaGllcmFyY2h5LWNvbClcIiksZyx3LGksdC5sZW5ndGgpLGQub3B0aW9ucy5zY3JvbGxhYmxlJiZhKHMoZC5sb2NrZWRUYWJsZSxkLnRib2R5LnByZXYoKSxcImNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLGcsbSxpLHQubGVuZ3RoKSx5JiZ5Lmxlbmd0aCYmKGEocyhkLmxvY2tlZEZvb3Rlcix5LmZpbmQoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpLFwiPnRhYmxlPmNvbGdyb3VwPmNvbDpub3QoLmstZ3JvdXAtY29sLC5rLWhpZXJhcmNoeS1jb2wpXCIpLGcscixpLHQubGVuZ3RoKSxhKHkuZmluZChcIi5rLWZvb3Rlci10ZW1wbGF0ZT50ZDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIikscCxmLGksdC5sZW5ndGgpKSxvPWQudGJvZHkuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwaW5nLXJvdywuay1kZXRhaWwtcm93KVwiKSxkLmxvY2tlZFRhYmxlJiYodj5mP3A+PXYmJlgoZC5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyLmstZ3JvdXBpbmctcm93XCIpLGQudGFibGUuZmluZChcIj50Ym9keT50ci5rLWdyb3VwaW5nLXJvd1wiKSx0Lmxlbmd0aCk6dj5wJiZYKGQudGFibGUuZmluZChcIj50Ym9keT50ci5rLWdyb3VwaW5nLXJvd1wiKSxkLmxvY2tlZFRhYmxlLmZpbmQoXCI+dGJvZHk+dHIuay1ncm91cGluZy1yb3dcIiksdC5sZW5ndGgpLHU9ZC5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyOm5vdCguay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvdylcIikpLGw9MCxjPW8ubGVuZ3RoO2M+bDtsKz0xKWEocyh1W2xdLG9bbF0sXCI+dGQ6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLHAsZixpLHQubGVuZ3RoKX0scmVvcmRlckNvbHVtbjpmdW5jdGlvbihlLG4saSl7dmFyIHIsbyxhPXRoaXMscz1kKG4sYS5jb2x1bW5zKSxsPXM/cy5jb2x1bW5zOmEuY29sdW1ucyxjPUN0KG4sbCksdT1sW2VdLGg9ISF1LmxvY2tlZCxwPUkoYS5jb2x1bW5zKS5sZW5ndGg7YyE9PWUmJihuLmxvY2tlZHx8IWh8fDEhPXooYS5jb2x1bW5zKS5sZW5ndGgpJiYoIW4ubG9ja2VkfHxofHwxIT1wKSYmKGEuX2hpZGVSZXNpemVIYW5kbGUoKSxpPT09dCYmKGk9Yz5lKSxvPVtuXSxhLl9yZW9yZGVySGVhZGVyKG8sdSxpKSxhLmxvY2tlZEhlYWRlciYmKE0oYS50aGVhZCksTShhLmxvY2tlZEhlYWRlcikpLHUuY29sdW1ucyYmKHU9TCh1LmNvbHVtbnMpLHU9dVtpPzA6dS5sZW5ndGgtMV0pLG4uY29sdW1ucyYmKG89TChuLmNvbHVtbnMpKSxhLl9yZW9yZGVyQ29udGVudChvLHUsaSkscj0hIW4ubG9ja2VkLHI9ciE9aCxuLmxvY2tlZD1oLGwuc3BsaWNlKGk/ZTplKzEsMCxuKSxsLnNwbGljZShlPmM/YzpjKzEsMSksYS5fdGVtcGxhdGVzKCksYS5fdXBkYXRlQ29sdW1uQ2VsbEluZGV4KCksYS5fdXBkYXRlVGFibGVzV2lkdGgoKSxhLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpLGEuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKSxhLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLGEuX3VwZGF0ZUZpcnN0Q29sdW1uQ2xhc3MoKSxyJiYoaD9hLnRyaWdnZXIobm4se2NvbHVtbjpufSk6YS50cmlnZ2VyKHJuLHtjb2x1bW46bn0pKSl9LF91cGRhdGVDb2x1bW5DZWxsSW5kZXg6ZnVuY3Rpb24oKXt2YXIgZSx0PTA7dGhpcy5sb2NrZWRIZWFkZXImJihlPXRoaXMubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZFwiKSx0PV8oZSxJKHRoaXMuY29sdW1ucykpKSxfKHRoaXMudGhlYWQseih0aGlzLmNvbHVtbnMpLHQpfSxsb2NrQ29sdW1uOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5jb2x1bW5zO2U9XCJudW1iZXJcIj09dHlwZW9mIGU/bltlXTprdChuLGZ1bmN0aW9uKHQpe3JldHVybiB0LmZpZWxkPT09ZX0pWzBdLCFlfHxlLmxvY2tlZHx8ZS5oaWRkZW58fCh0PUkobikubGVuZ3RoLTEsdGhpcy5yZW9yZGVyQ29sdW1uKHQsZSwhMSkpfSx1bmxvY2tDb2x1bW46ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmNvbHVtbnM7ZT1cIm51bWJlclwiPT10eXBlb2YgZT9uW2VdOmt0KG4sZnVuY3Rpb24odCl7cmV0dXJuIHQuZmllbGQ9PT1lfSlbMF0sZSYmZS5sb2NrZWQmJiFlLmhpZGRlbiYmKHQ9SShuKS5sZW5ndGgsdGhpcy5yZW9yZGVyQ29sdW1uKHQsZSwhMCkpfSxjZWxsSW5kZXg6ZnVuY3Rpb24odCl7dmFyIG49MDtyZXR1cm4gdGhpcy5sb2NrZWRUYWJsZSYmIWUuY29udGFpbnModGhpcy5sb2NrZWRUYWJsZVswXSx0WzBdKSYmKG49TChJKHRoaXMuY29sdW1ucykpLmxlbmd0aCksZSh0KS5wYXJlbnQoKS5jaGlsZHJlbihcInRkOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5pbmRleCh0KStufSxfbW9kZWxGb3JDb250YWluZXI6ZnVuY3Rpb24odCl7dD1lKHQpLHQuaXMoXCJ0clwiKXx8XCJwb3B1cFwiPT09dGhpcy5fZWRpdE1vZGUoKXx8KHQ9dC5jbG9zZXN0KFwidHJcIikpO3ZhciBuPXQuYXR0cih1dC5hdHRyKFwidWlkXCIpKTtyZXR1cm4gdGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKG4pfSxfZWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLnNlbGVjdGFibGUmJm4uc2VsZWN0YWJsZS5vcHRpb25zLm11bHRpcGxlLHI9bi5vcHRpb25zLmVkaXRhYmxlLG89ZnVuY3Rpb24oKXt2YXIgdD1tdCgpLGk9bi5fZWRpdENvbnRhaW5lcjshaXx8ZS5jb250YWlucyhpWzBdLHQpfHxpWzBdPT09dHx8ZSh0KS5jbG9zZXN0KFwiLmstYW5pbWF0aW9uLWNvbnRhaW5lclwiKS5sZW5ndGh8fG4uZWRpdGFibGUuZW5kKCkmJm4uY2xvc2VDZWxsKCl9O3ImJih0PW4uX2VkaXRNb2RlKCksXCJpbmNlbGxcIj09PXQ/ci51cGRhdGUhPT0hMSYmbi53cmFwcGVyLm9uKG9uK090LFwidHI6bm90KC5rLWdyb3VwaW5nLXJvdykgPiB0ZFwiLGZ1bmN0aW9uKHQpe3ZhciByPWUodGhpcyksbz1uLmxvY2tlZFRhYmxlJiZyLmNsb3Nlc3QoXCJ0YWJsZVwiKVswXT09PW4ubG9ja2VkVGFibGVbMF07ci5oYXNDbGFzcyhcImstaGllcmFyY2h5LWNlbGxcIil8fHIuaGFzQ2xhc3MoXCJrLWRldGFpbC1jZWxsXCIpfHxyLmhhc0NsYXNzKFwiay1ncm91cC1jZWxsXCIpfHxyLmhhc0NsYXNzKFwiay1lZGl0LWNlbGxcIil8fHIuaGFzKFwiYS5rLWdyaWQtZGVsZXRlXCIpLmxlbmd0aHx8ci5oYXMoXCJidXR0b24uay1ncmlkLWRlbGV0ZVwiKS5sZW5ndGh8fHIuY2xvc2VzdChcInRib2R5XCIpWzBdIT09bi50Ym9keVswXSYmIW98fGUodC50YXJnZXQpLmlzKFwiOmlucHV0XCIpfHwobi5lZGl0YWJsZT9uLmVkaXRhYmxlLmVuZCgpJiYoaSYmZShtdCgpKS5ibHVyKCksbi5jbG9zZUNlbGwoKSxuLmVkaXRDZWxsKHIpKTpuLmVkaXRDZWxsKHIpKX0pLm9uKFwiZm9jdXNpblwiK090LGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KG4udGltZXIpLG4udGltZXI9bnVsbH0pLm9uKFwiZm9jdXNvdXRcIitPdCxmdW5jdGlvbigpe24udGltZXI9c2V0VGltZW91dChvLDEpfSk6ci51cGRhdGUhPT0hMSYmbi53cmFwcGVyLm9uKG9uK090LFwidGJvZHk+dHI6bm90KC5rLWRldGFpbC1yb3csLmstZ3JvdXBpbmctcm93KTp2aXNpYmxlIGEuay1ncmlkLWVkaXRcIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksbi5lZGl0Um93KGUodGhpcykuY2xvc2VzdChcInRyXCIpKX0pLHIuZGVzdHJveSE9PSExP24ud3JhcHBlci5vbihvbitPdCxcInRib2R5PnRyOm5vdCguay1kZXRhaWwtcm93LC5rLWdyb3VwaW5nLXJvdyk6dmlzaWJsZSAuay1ncmlkLWRlbGV0ZVwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLG4ucmVtb3ZlUm93KGUodGhpcykuY2xvc2VzdChcInRyXCIpKX0pOm4ud3JhcHBlci5vbihvbitPdCxcInRib2R5PnRyOm5vdCguay1kZXRhaWwtcm93LC5rLWdyb3VwaW5nLXJvdyk6dmlzaWJsZSBidXR0b24uay1ncmlkLWRlbGV0ZVwiLGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksbi5fY29uZmlybWF0aW9uKCl8fGUucHJldmVudERlZmF1bHQoKX0pKX0sZWRpdENlbGw6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG87dD1lKHQpLG49dGhpcyxpPUwobi5jb2x1bW5zKVtuLmNlbGxJbmRleCh0KV0scj1uLl9tb2RlbEZvckNvbnRhaW5lcih0KSxuLmNsb3NlQ2VsbCgpLCFyfHxyLmVkaXRhYmxlJiYhci5lZGl0YWJsZShpLmZpZWxkKXx8aS5jb21tYW5kfHwhaS5maWVsZHx8KG4uX2F0dGFjaE1vZGVsQ2hhbmdlKHIpLG4uX2VkaXRDb250YWluZXI9dCxuLmVkaXRhYmxlPXQuYWRkQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKS5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6e2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcix2YWx1ZXM6aS52YWx1ZXN9LG1vZGVsOnIsdGFyZ2V0Om4sY2hhbmdlOmZ1bmN0aW9uKGUpe24udHJpZ2dlcihOdCx7dmFsdWVzOmUudmFsdWVzLGNvbnRhaW5lcjp0LG1vZGVsOnJ9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLG89dC5wYXJlbnQoKS5hZGRDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSxuLmxvY2tlZENvbnRlbnQmJmV0KG9bMF0sbi5fcmVsYXRlZFJvdyhvKS5hZGRDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKVswXSksbi50cmlnZ2VyKEh0LHtjb250YWluZXI6dCxtb2RlbDpyfSkpfSxfYWRqdXN0TG9ja2VkSG9yaXpvbnRhbFNjcm9sbEJhcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMudGFibGUsdD1lLnBhcmVudCgpLG49ZVswXS5vZmZzZXRXaWR0aD50WzBdLmNsaWVudFdpZHRoP3V0LnN1cHBvcnQuc2Nyb2xsYmFyKCk6MDt0aGlzLmxvY2tlZENvbnRlbnQuaGVpZ2h0KHQuaGVpZ2h0KCktbil9LF9zeW5jTG9ja2VkQ29udGVudEhlaWdodDpmdW5jdGlvbigpe3RoaXMubG9ja2VkVGFibGUmJih0aGlzLl9hZGp1c3RMb2NrZWRIb3Jpem9udGFsU2Nyb2xsQmFyKCksdGhpcy5fYWRqdXN0Um93c0hlaWdodCh0aGlzLnRhYmxlLHRoaXMubG9ja2VkVGFibGUpKX0sX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMubG9ja2VkSGVhZGVyJiYoZT10aGlzLmxvY2tlZEhlYWRlci5jaGlsZHJlbihcInRhYmxlXCIpLHQ9dGhpcy50aGVhZC5wYXJlbnQoKSx0aGlzLl9hZGp1c3RSb3dzSGVpZ2h0KGUsdCksWihlLHQpKX0sX3N5bmNMb2NrZWRGb290ZXJIZWlnaHQ6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZEZvb3RlciYmdGhpcy5mb290ZXImJnRoaXMuZm9vdGVyLmxlbmd0aCYmdGhpcy5fYWRqdXN0Um93c0hlaWdodCh0aGlzLmxvY2tlZEZvb3Rlci5jaGlsZHJlbihcInRhYmxlXCIpLHRoaXMuZm9vdGVyLmZpbmQoXCIuay1ncmlkLWZvb3Rlci13cmFwID4gdGFibGVcIikpfSxfZGVzdHJveUVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZ1bmN0aW9uKCl7aWYoZS5lZGl0YWJsZSl7dmFyIHQ9ZS5lZGl0Vmlldz9lLmVkaXRWaWV3LmVsZW1lbnQ6ZS5fZWRpdENvbnRhaW5lcjt0JiYodC5vZmYob24rT3QsXCJhLmstZ3JpZC1jYW5jZWxcIixlLl9lZGl0Q2FuY2VsQ2xpY2tIYW5kbGVyKSx0Lm9mZihvbitPdCxcImEuay1ncmlkLXVwZGF0ZVwiLGUuX2VkaXRVcGRhdGVDbGlja0hhbmRsZXIpKSxlLl9kZXRhY2hNb2RlbENoYW5nZSgpLGUuZWRpdGFibGUuZGVzdHJveSgpLGUuZWRpdGFibGU9bnVsbCxlLl9lZGl0Q29udGFpbmVyPW51bGwsZS5fZGVzdHJveUVkaXRWaWV3KCl9fTtlLmVkaXRhYmxlJiYoXCJwb3B1cFwiIT09ZS5fZWRpdE1vZGUoKXx8ZS5faXNNb2JpbGU/dCgpOmUuX2VkaXRDb250YWluZXIuZGF0YShcImtlbmRvV2luZG93XCIpLmJpbmQoXCJkZWFjdGl2YXRlXCIsdCkuY2xvc2UoKSksZS5fYWN0aW9uU2hlZXQmJihlLl9hY3Rpb25TaGVldC5kZXN0cm95KCksZS5fYWN0aW9uU2hlZXQ9bnVsbCl9LF9kZXN0cm95RWRpdFZpZXc6ZnVuY3Rpb24oKXt0aGlzLmVkaXRWaWV3JiYodGhpcy5lZGl0Vmlldy5wdXJnZSgpLHRoaXMuZWRpdFZpZXc9bnVsbCx0aGlzLnBhbmUubmF2aWdhdGUoXCJcIikpfSxfYXR0YWNoTW9kZWxDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tb2RlbENoYW5nZUhhbmRsZXI9ZnVuY3Rpb24oZSl7dC5fbW9kZWxDaGFuZ2Uoe2ZpZWxkOmUuZmllbGQsbW9kZWw6dGhpc30pfSxlLmJpbmQoXCJjaGFuZ2VcIix0Ll9tb2RlbENoYW5nZUhhbmRsZXIpfSxfZGV0YWNoTW9kZWxDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fZWRpdENvbnRhaW5lcixuPWUuX21vZGVsRm9yQ29udGFpbmVyKHQpO24mJm4udW5iaW5kKEd0LGUuX21vZGVsQ2hhbmdlSGFuZGxlcil9LGNsb3NlQ2VsbDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXRoaXMscz1hLl9lZGl0Q29udGFpbmVyO3MmJihuPXMuY2xvc2VzdChcInRyXCIpLmF0dHIodXQuYXR0cihcInVpZFwiKSksbz1hLmRhdGFTb3VyY2UuZ2V0QnlVaWQobiksdCYmYS50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpzLG1vZGVsOm99KXx8KHMucmVtb3ZlQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKSxpPUwoYS5jb2x1bW5zKVthLmNlbGxJbmRleChzKV0scj1zLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpLGEuX2Rlc3Ryb3lFZGl0YWJsZSgpLGEuX2Rpc3BsYXlDZWxsKHMsaSxvKSxzLmhhc0NsYXNzKFwiay1kaXJ0eS1jZWxsXCIpJiZlKCc8c3BhbiBjbGFzcz1cImstZGlydHlcIi8+JykucHJlcGVuZFRvKHMpLGEubG9ja2VkQ29udGVudCYmZXQoci5jc3MoXCJoZWlnaHRcIixcIlwiKVswXSxhLl9yZWxhdGVkUm93KHIpLmNzcyhcImhlaWdodFwiLFwiXCIpWzBdKSkpfSxfZGlzcGxheUNlbGw6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj17c3RvcmFnZTp7fSxjb3VudDowfSxvPXd0KHt9LHV0LlRlbXBsYXRlLGkub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxhPXV0LnRlbXBsYXRlKGkuX2NlbGxUbXBsKHQsciksbyk7ci5jb3VudD4wJiYoYT1UdChhLHIuc3RvcmFnZSkpLGUuZW1wdHkoKS5odG1sKGEobikpLGkuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLGRhdGE6W3tkYXRhSXRlbTpufV19fSl9LHJlbW92ZVJvdzpmdW5jdGlvbihlKXt0aGlzLl9jb25maXJtYXRpb24oZSkmJnRoaXMuX3JlbW92ZVJvdyhlKX0sX3JlbW92ZVJvdzpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1pLl9lZGl0TW9kZSgpO1wiaW5jZWxsXCIhPT1yJiZpLmNhbmNlbFJvdygpLHQ9ZSh0KS5oaWRlKCksbj1pLl9tb2RlbEZvckNvbnRhaW5lcih0KSxuJiYhaS50cmlnZ2VyKFZ0LHtyb3c6dCxtb2RlbDpufSk/KGkuZGF0YVNvdXJjZS5yZW1vdmUobiksKFwiaW5saW5lXCI9PT1yfHxcInBvcHVwXCI9PT1yKSYmaS5kYXRhU291cmNlLnN5bmMoKSk6XCJpbmNlbGxcIj09PXImJmkuX2Rlc3Ryb3lFZGl0YWJsZSgpfSxfZWRpdE1vZGU6ZnVuY3Rpb24oKXt2YXIgZT1cImluY2VsbFwiLHQ9dGhpcy5vcHRpb25zLmVkaXRhYmxlO3JldHVybiB0IT09ITAmJihlPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5tb2RlfHxlKSxlfSxlZGl0Um93OmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXM7biBpbnN0YW5jZW9mIHV0LmRhdGEuT2JzZXJ2YWJsZU9iamVjdD9pPW46KG49ZShuKSxpPWEuX21vZGVsRm9yQ29udGFpbmVyKG4pKSxyPWEuX2VkaXRNb2RlKCksYS5jYW5jZWxSb3coKSxpJiYoYS5fYXR0YWNoTW9kZWxDaGFuZ2UoaSksXCJwb3B1cFwiPT09cj9hLl9jcmVhdGVQb3B1cEVkaXRvcihpKTpcImlubGluZVwiPT09cj9hLl9jcmVhdGVJbmxpbmVFZGl0b3IobixpKTpcImluY2VsbFwiPT09ciYmZShuKS5jaGlsZHJlbihJdCkuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcykscj1MKGEuY29sdW1ucylbbi5pbmRleCgpXTtyZXR1cm4gaT1hLl9tb2RlbEZvckNvbnRhaW5lcihuKSxpJiYoIWkuZWRpdGFibGV8fGkuZWRpdGFibGUoci5maWVsZCkpJiZyLmZpZWxkPyhhLmVkaXRDZWxsKG4pLCExKTp0fSksbz1hLmVkaXRWaWV3P2EuZWRpdFZpZXcuZWxlbWVudDphLl9lZGl0Q29udGFpbmVyLG8mJih0aGlzLl9lZGl0Q2FuY2VsQ2xpY2tIYW5kbGVyfHwodGhpcy5fZWRpdENhbmNlbENsaWNrSGFuZGxlcj1UdCh0aGlzLl9lZGl0Q2FuY2VsQ2xpY2ssdGhpcykpLG8ub24ob24rT3QsXCJhLmstZ3JpZC1jYW5jZWxcIix0aGlzLl9lZGl0Q2FuY2VsQ2xpY2tIYW5kbGVyKSx0aGlzLl9lZGl0VXBkYXRlQ2xpY2tIYW5kbGVyfHwodGhpcy5fZWRpdFVwZGF0ZUNsaWNrSGFuZGxlcj1UdCh0aGlzLl9lZGl0VXBkYXRlQ2xpY2ssdGhpcykpLG8ub24ob24rT3QsXCJhLmstZ3JpZC11cGRhdGVcIix0aGlzLl9lZGl0VXBkYXRlQ2xpY2tIYW5kbGVyKSkpXG59LF9lZGl0VXBkYXRlQ2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5zYXZlUm93KCl9LF9lZGl0Q2FuY2VsQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLm5hdmlnYXRhYmxlLG89aS5lZGl0YWJsZS5vcHRpb25zLm1vZGVsLGE9aS5lZGl0Vmlldz9pLmVkaXRWaWV3LmVsZW1lbnQ6aS5fZWRpdENvbnRhaW5lcjt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSxpLnRyaWdnZXIoXCJjYW5jZWxcIix7Y29udGFpbmVyOmEsbW9kZWw6b30pfHwobj1pLml0ZW1zKCkuaW5kZXgoZShpLmN1cnJlbnQoKSkucGFyZW50KCkpLGkuY2FuY2VsUm93KCksciYmKGkuY3VycmVudChpLml0ZW1zKCkuZXEobikuY2hpbGRyZW4oKS5maWx0ZXIoUnQpLmZpcnN0KCkpLG50KGkudGFibGUsITApKSl9LF9jcmVhdGVQb3B1cEVkaXRvcjpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxzLGwsYyxkLHUsaCxwLGY9dGhpcyxnPVwiPGRpdiBcIit1dC5hdHRyKFwidWlkXCIpKyc9XCInK24udWlkKydcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtJysoZi5faXNNb2JpbGU/XCIgay1tb2JpbGUtbGlzdFwiOlwiXCIpKydcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+JyxtPVtdLHY9TChmLmNvbHVtbnMpLF89Zi5vcHRpb25zLmVkaXRhYmxlLHk9Xy50ZW1wbGF0ZSx3PXl0KF8pP18ud2luZG93Ont9LGI9d3Qoe30sdXQuVGVtcGxhdGUsZi5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpO2lmKHc9d3x8e30seSlmb3IodHlwZW9mIHk9PT1jbiYmKHk9d2luZG93LnVuZXNjYXBlKHkpKSxnKz11dC50ZW1wbGF0ZSh5LGIpKG4pLG89MCxhPXYubGVuZ3RoO2E+bztvKyspaT12W29dLGkuY29tbWFuZCYmKGQ9dHQoaS5jb21tYW5kLFwiZWRpdFwiKSxkJiYocj1kKSk7ZWxzZSBmb3Iobz0wLGE9di5sZW5ndGg7YT5vO28rKylpPXZbb10saS5jb21tYW5kP2kuY29tbWFuZCYmKGQ9dHQoaS5jb21tYW5kLFwiZWRpdFwiKSxkJiYocj1kKSk6KGcrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsIGZvcj1cIicraS5maWVsZCsnXCI+JysoaS50aXRsZXx8aS5maWVsZHx8XCJcIikrXCI8L2xhYmVsPjwvZGl2PlwiLG4uZWRpdGFibGUmJiFuLmVkaXRhYmxlKGkuZmllbGQpfHwhaS5maWVsZD8oaD17c3RvcmFnZTp7fSxjb3VudDowfSxzPXV0LnRlbXBsYXRlKGYuX2NlbGxUbXBsKGksaCksYiksaC5jb3VudD4wJiYocz1UdChzLGguc3RvcmFnZSkpLGcrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+JytzKG4pK1wiPC9kaXY+XCIpOihtLnB1c2goe2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcix2YWx1ZXM6aS52YWx1ZXN9KSxnKz1cIjxkaXYgXCIrdXQuYXR0cihcImNvbnRhaW5lci1mb3JcIikrJz1cIicraS5maWVsZCsnXCIgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48L2Rpdj4nKSk7ciYmeXQocikmJihyLnRleHQmJnl0KHIudGV4dCkmJihsPXIudGV4dC51cGRhdGUsYz1yLnRleHQuY2FuY2VsKSxyLmF0dHImJih1PXIuYXR0cikpLGYuX2lzTW9iaWxlPyhnKz1cIjwvZGl2PjwvZGl2PlwiLGYuZWRpdFZpZXc9Zi5wYW5lLmFwcGVuZChcIjxkaXYgZGF0YS1cIit1dC5ucysncm9sZT1cInZpZXdcIiBkYXRhLScrdXQubnMrJ2luaXQtd2lkZ2V0cz1cImZhbHNlXCIgY2xhc3M9XCJrLWdyaWQtZWRpdC1mb3JtXCI+PGRpdiBkYXRhLScrdXQubnMrJ3JvbGU9XCJoZWFkZXJcIiBjbGFzcz1cImstaGVhZGVyXCI+JytmLl9jcmVhdGVCdXR0b24oe25hbWU6XCJ1cGRhdGVcIix0ZXh0OmwsYXR0cjp1fSkrKHcudGl0bGV8fFwiRWRpdFwiKStmLl9jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpjLGF0dHI6dX0pK1wiPC9kaXY+XCIrZytcIjwvZGl2PlwiKSxwPWYuX2VkaXRDb250YWluZXI9Zi5lZGl0Vmlldy5lbGVtZW50LmZpbmQoXCIuay1wb3B1cC1lZGl0LWZvcm1cIikpOihnKz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPicsZys9Zi5fY3JlYXRlQnV0dG9uKHtuYW1lOlwidXBkYXRlXCIsdGV4dDpsLGF0dHI6dX0pK2YuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcImNhbmNlbGVkaXRcIix0ZXh0OmMsYXR0cjp1fSksZys9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixwPWYuX2VkaXRDb250YWluZXI9ZShnKS5hcHBlbmRUbyhmLndyYXBwZXIpLmVxKDApLmtlbmRvV2luZG93KHd0KHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOlwiRWRpdFwiLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oaSl7aWYoaS51c2VyVHJpZ2dlcmVkKXtpZihpLnNlbmRlci5lbGVtZW50LmZvY3VzKCksZi50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpwLG1vZGVsOm59KSlyZXR1cm4gaS5wcmV2ZW50RGVmYXVsdCgpLHQ7dmFyIHI9Zi5pdGVtcygpLmluZGV4KGUoZi5jdXJyZW50KCkpLnBhcmVudCgpKTtmLmNhbmNlbFJvdygpLGYub3B0aW9ucy5uYXZpZ2F0YWJsZSYmKGYuY3VycmVudChmLml0ZW1zKCkuZXEocikuY2hpbGRyZW4oKS5maWx0ZXIoUnQpLmZpcnN0KCkpLG50KGYudGFibGUsITApKX19fSx3KSkpLGYuZWRpdGFibGU9Zi5fZWRpdENvbnRhaW5lci5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6bSxtb2RlbDpuLGNsZWFyQ29udGFpbmVyOiExLHRhcmdldDpmfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksZi5faXNNb2JpbGUmJnAuZmluZChcImlucHV0W3R5cGU9Y2hlY2tib3hdLGlucHV0W3R5cGU9cmFkaW9dXCIpLnBhcmVudChcIi5rLWVkaXQtZmllbGRcIikuYWRkQ2xhc3MoXCJrLWNoZWNrXCIpLnByZXYoXCIuay1lZGl0LWxhYmVsXCIpLmFkZENsYXNzKFwiay1jaGVja1wiKS5jbGljayhmdW5jdGlvbigpe2UodGhpcykubmV4dCgpLmNoaWxkcmVuKFwiaW5wdXRcIikuY2xpY2soKX0pLGYuX29wZW5Qb3BVcEVkaXRvcigpLGYudHJpZ2dlcihIdCx7Y29udGFpbmVyOnAsbW9kZWw6bn0pfSxfb3BlblBvcFVwRWRpdG9yOmZ1bmN0aW9uKCl7dGhpcy5faXNNb2JpbGU/dGhpcy5wYW5lLm5hdmlnYXRlKHRoaXMuZWRpdFZpZXcsdGhpcy5fZWRpdEFuaW1hdGlvbik6dGhpcy5fZWRpdENvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2VudGVyKCkub3BlbigpfSxfY3JlYXRlSW5saW5lRWRpdG9yOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcyxzPVtdO2EubG9ja2VkQ29udGVudCYmKHQ9dC5hZGQoYS5fcmVsYXRlZFJvdyh0KSkpLHQuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVhY2goZnVuY3Rpb24oKXtpZihyPWUodGhpcyksaT1MKGEuY29sdW1ucylbYS5jZWxsSW5kZXgocildLGkuY29tbWFuZHx8IWkuZmllbGR8fG4uZWRpdGFibGUmJiFuLmVkaXRhYmxlKGkuZmllbGQpKXtpZihpLmNvbW1hbmQmJihvPXR0KGkuY29tbWFuZCxcImVkaXRcIikpKXtyLmVtcHR5KCk7dmFyIHQsbCxjO3l0KG8pJiYoby50ZXh0JiZ5dChvLnRleHQpJiYodD1vLnRleHQudXBkYXRlLGw9by50ZXh0LmNhbmNlbCksby5hdHRyJiYoYz1vLmF0dHIpKSxlKGEuX2NyZWF0ZUJ1dHRvbih7bmFtZTpcInVwZGF0ZVwiLHRleHQ6dCxhdHRyOmN9KSthLl9jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpsLGF0dHI6Y30pKS5hcHBlbmRUbyhyKX19ZWxzZSBzLnB1c2goe2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcix2YWx1ZXM6aS52YWx1ZXN9KSxyLmF0dHIodXQuYXR0cihcImNvbnRhaW5lci1mb3JcIiksaS5maWVsZCksci5lbXB0eSgpfSksYS5fZWRpdENvbnRhaW5lcj10LGEuZWRpdGFibGU9bmV3IHV0LnVpLkVkaXRhYmxlKHQuYWRkQ2xhc3MoXCJrLWdyaWQtZWRpdC1yb3dcIikse3RhcmdldDphLGZpZWxkczpzLG1vZGVsOm4sY2xlYXJDb250YWluZXI6ITF9KSx0Lmxlbmd0aD4xJiYoZXQodFswXSx0WzFdKSxhLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpKSxhLnRyaWdnZXIoSHQse2NvbnRhaW5lcjp0LG1vZGVsOm59KX0sY2FuY2VsUm93OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5fZWRpdENvbnRhaW5lcjtuJiYoZT10Ll9tb2RlbEZvckNvbnRhaW5lcihuKSx0Ll9kZXN0cm95RWRpdGFibGUoKSx0LmRhdGFTb3VyY2UuY2FuY2VsQ2hhbmdlcyhlKSx0Ll9kaXNwbGF5Um93KFwicG9wdXBcIiE9PXQuX2VkaXRNb2RlKCk/bjp0LnRib2R5LmZpbmQoXCJbXCIrdXQuYXR0cihcInVpZFwiKStcIj1cIitlLnVpZCtcIl1cIikpKX0sc2F2ZVJvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9lZGl0Q29udGFpbmVyLG49ZS5fbW9kZWxGb3JDb250YWluZXIodCksaT1lLmVkaXRhYmxlO3QmJmkmJmkuZW5kKCkmJiFlLnRyaWdnZXIoTnQse2NvbnRhaW5lcjp0LG1vZGVsOm59KSYmZS5kYXRhU291cmNlLnN5bmMoKX0sX2Rpc3BsYXlSb3c6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxhPW8uX21vZGVsRm9yQ29udGFpbmVyKHQpLHM9dC5oYXNDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbD10Lmhhc0NsYXNzKFwiay1hbHRcIik7YSYmKG8ubG9ja2VkQ29udGVudCYmKG49ZSgobD9vLmxvY2tlZEFsdFJvd1RlbXBsYXRlOm8ubG9ja2VkUm93VGVtcGxhdGUpKGEpKSxvLl9yZWxhdGVkUm93KHQubGFzdCgpKS5yZXBsYWNlV2l0aChuKSksby5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZ2V0KCl9fSksaT1lKChsP28uYWx0Um93VGVtcGxhdGU6by5yb3dUZW1wbGF0ZSkoYSkpLHQucmVwbGFjZVdpdGgoaSksby5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuZ2V0KCksZGF0YTpbe2RhdGFJdGVtOmF9XX19KSxzJiZvLm9wdGlvbnMuc2VsZWN0YWJsZSYmby5zZWxlY3QoaS5hZGQobikpLG4mJmV0KGlbMF0sblswXSkscj1pLm5leHQoKSxyLmhhc0NsYXNzKFwiay1kZXRhaWwtcm93XCIpJiZyLmlzKFwiOnZpc2libGVcIikmJmkuZmluZChcIi5rLWhpZXJhcmNoeS1jZWxsIC5rLWljb25cIikucmVtb3ZlQ2xhc3MoXCJrLXBsdXNcIikuYWRkQ2xhc3MoXCJrLW1pbnVzXCIpKX0sX3Nob3dNZXNzYWdlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpcztyZXR1cm4gYS5faXNNb2JpbGU/KGk9dXQudGVtcGxhdGUoJzx1bD48bGkgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC10aXRsZVwiPiM6dGl0bGUjPC9saT48bGk+PGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLWdyaWQtZGVsZXRlXCI+Izpjb25maXJtRGVsZXRlIzwvYT48L2xpPjwvdWw+Jykscj1lKGkodCkpLmFwcGVuZFRvKGEudmlldy5lbGVtZW50KSxvPWEuX2FjdGlvblNoZWV0PW5ldyB1dC5tb2JpbGUudWkuQWN0aW9uU2hlZXQocix7Y2FuY2VsOnQuY2FuY2VsRGVsZXRlLGNhbmNlbFRlbXBsYXRlOic8bGkgY2xhc3M9XCJrbS1hY3Rpb25zaGVldC1jYW5jZWxcIj48YSBjbGFzcz1cImstYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCI+IzpjYW5jZWwjPC9hPjwvbGk+JyxjbG9zZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxjb21tYW5kOmZ1bmN0aW9uKHQpe3ZhciBpPWUodC5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKTtpLmhhc0NsYXNzKFwia20tYWN0aW9uc2hlZXQtY2FuY2VsXCIpfHxhLl9yZW1vdmVSb3cobil9LHBvcHVwOmEuX2FjdGlvblNoZWV0UG9wdXBPcHRpb25zfSksby5vcGVuKG4pLCExKTp3aW5kb3cuY29uZmlybSh0LnRpdGxlKX0sX2NvbmZpcm1hdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmVkaXRhYmxlLGk9bj09PSEwfHx0eXBlb2Ygbj09PWNuP3Qub3B0aW9ucy5tZXNzYWdlcy5lZGl0YWJsZS5jb25maXJtYXRpb246bi5jb25maXJtYXRpb247cmV0dXJuIGkhPT0hMSYmbnVsbCE9aT8odHlwZW9mIGk9PT1sbiYmKGk9aSh0Ll9tb2RlbEZvckNvbnRhaW5lcihlKSkpLHQuX3Nob3dNZXNzYWdlKHtjb25maXJtRGVsZXRlOm4uY29uZmlybURlbGV0ZXx8dC5vcHRpb25zLm1lc3NhZ2VzLmVkaXRhYmxlLmNvbmZpcm1EZWxldGUsY2FuY2VsRGVsZXRlOm4uY2FuY2VsRGVsZXRlfHx0Lm9wdGlvbnMubWVzc2FnZXMuZWRpdGFibGUuY2FuY2VsRGVsZXRlLHRpdGxlOmk9PT0hMD90Lm9wdGlvbnMubWVzc2FnZXMuZWRpdGFibGUuY29uZmlybWF0aW9uOml9LGUpKTohMH0sY2FuY2VsQ2hhbmdlczpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKCl9LHNhdmVDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczsoZS5lZGl0YWJsZSYmZS5lZGl0YWJsZS5lbmQoKXx8IWUuZWRpdGFibGUpJiYhZS50cmlnZ2VyKFl0KSYmZS5kYXRhU291cmNlLnN5bmMoKX0sYWRkUm93OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcyxzPWEuZGF0YVNvdXJjZSxsPWEuX2VkaXRNb2RlKCksYz1hLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlQXR8fFwiXCIsZD1zLnBhZ2VTaXplKCksdT1zLnZpZXcoKXx8W107KGEuZWRpdGFibGUmJmEuZWRpdGFibGUuZW5kKCl8fCFhLmVkaXRhYmxlKSYmKFwiaW5jZWxsXCIhPWwmJmEuY2FuY2VsUm93KCksZT1zLmluZGV4T2YodVswXSksXCJib3R0b21cIj09Yy50b0xvd2VyQ2FzZSgpJiYoZSs9dS5sZW5ndGgsZCYmIXMub3B0aW9ucy5zZXJ2ZXJQYWdpbmcmJnUubGVuZ3RoPj1kJiYoZS09MSkpLDA+ZSYmKGU9cy5wYWdlKCk+cy50b3RhbFBhZ2VzKCk/KHMucGFnZSgpLTEpKmQ6MCksdD1zLmluc2VydChlLHt9KSxuPXQudWlkLGk9YS5sb2NrZWRDb250ZW50P2EubG9ja2VkVGFibGU6YS50YWJsZSxyPWkuZmluZChcInRyW1wiK3V0LmF0dHIoXCJ1aWRcIikrXCI9XCIrbitcIl1cIiksbz1yLmNoaWxkcmVuKFwidGQ6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLmVxKGEuX2ZpcnN0RWRpdGFibGVDb2x1bW5JbmRleChyKSksXCJpbmxpbmVcIj09PWwmJnIubGVuZ3RoP2EuZWRpdFJvdyhyKTpcInBvcHVwXCI9PT1sP2EuZWRpdFJvdyh0KTpvLmxlbmd0aCYmYS5lZGl0Q2VsbChvKSxcImJvdHRvbVwiPT1jLnRvTG93ZXJDYXNlKCkmJmEubG9ja2VkQ29udGVudCYmKGEubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9YS5jb250ZW50WzBdLnNjcm9sbFRvcD1hLmNvbnRlbnRbMF0ub2Zmc2V0SGVpZ2h0KSl9LF9maXJzdEVkaXRhYmxlQ29sdW1uSW5kZXg6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPUwoci5jb2x1bW5zKSxhPXIuX21vZGVsRm9yQ29udGFpbmVyKGUpO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWlmKHQ9b1tuXSxhJiYoIWEuZWRpdGFibGV8fGEuZWRpdGFibGUodC5maWVsZCkpJiYhdC5jb21tYW5kJiZ0LmZpZWxkKXJldHVybiBuO3JldHVybi0xfSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ud3JhcHBlcixyPW4ub3B0aW9ucy50b29sYmFyLG89bi5vcHRpb25zLmVkaXRhYmxlO3ImJih0PW4ud3JhcHBlci5maW5kKFwiLmstZ3JpZC10b29sYmFyXCIpLHQubGVuZ3RofHwoRHQocil8fChyPXR5cGVvZiByPT09Y24/cjpuLl90b29sYmFyVG1wbChyKS5yZXBsYWNlKGZuLFwiXFxcXCNcIikscj1UdCh1dC50ZW1wbGF0ZShyKSxuKSksdD1lKCc8ZGl2IGNsYXNzPVwiay1oZWFkZXIgay1ncmlkLXRvb2xiYXJcIiAvPicpLmh0bWwocih7fSkpLnByZXBlbmRUbyhpKSxuLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dC5nZXQoKX19KSksbyYmby5jcmVhdGUhPT0hMSYmdC5vbihvbitPdCxcIi5rLWdyaWQtYWRkXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uYWRkUm93KCl9KS5vbihvbitPdCxcIi5rLWdyaWQtY2FuY2VsLWNoYW5nZXNcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksbi5jYW5jZWxDaGFuZ2VzKCl9KS5vbihvbitPdCxcIi5rLWdyaWQtc2F2ZS1jaGFuZ2VzXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uc2F2ZUNoYW5nZXMoKX0pLHQub24ob24rT3QsXCIuay1ncmlkLWV4Y2VsXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uc2F2ZUFzRXhjZWwoKX0pLHQub24ob24rT3QsXCIuay1ncmlkLXBkZlwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxuLnNhdmVBc1BERigpfSkpfSxfdG9vbGJhclRtcGw6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1cIlwiO2lmKHh0KGUpKWZvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKXIrPWkuX2NyZWF0ZUJ1dHRvbihlW3RdKTtyZXR1cm4gcn0sX2NyZWF0ZUJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgbixyPWUudGVtcGxhdGV8fF9uLG89dHlwZW9mIGU9PT1jbj9lOmUubmFtZXx8ZS50ZXh0LGE9Q25bb10/Q25bb10uY2xhc3NOYW1lOlwiay1ncmlkLVwiKyhvfHxcIlwiKS5yZXBsYWNlKC9cXHMvZyxcIlwiKSxzPXtjbGFzc05hbWU6YSx0ZXh0Om8saW1hZ2VDbGFzczpcIlwiLGF0dHI6XCJcIixpY29uQ2xhc3M6XCJcIn0sbD10aGlzLm9wdGlvbnMubWVzc2FnZXMuY29tbWFuZHM7aWYoIShvfHx5dChlKSYmZS50ZW1wbGF0ZSkpdGhyb3cgRXJyb3IoXCJDdXN0b20gY29tbWFuZHMgc2hvdWxkIGhhdmUgbmFtZSBzcGVjaWZpZWRcIik7cmV0dXJuIHl0KGUpPyhlLmNsYXNzTmFtZSYmQ3Qocy5jbGFzc05hbWUsZS5jbGFzc05hbWUuc3BsaXQoXCIgXCIpKTwwP2UuY2xhc3NOYW1lKz1cIiBcIitzLmNsYXNzTmFtZTplLmNsYXNzTmFtZT09PXQmJihlLmNsYXNzTmFtZT1zLmNsYXNzTmFtZSksXCJlZGl0XCI9PT1vJiZ5dChlLnRleHQpJiYoZT13dCghMCx7fSxlKSxlLnRleHQ9ZS50ZXh0LmVkaXQpLGUuYXR0ciYmKHl0KGUuYXR0cikmJihlLmF0dHI9aShlLmF0dHIpKSx0eXBlb2YgZS5hdHRyPT09Y24mJihuPWUuYXR0ci5tYXRjaCgvY2xhc3M9XCIoLis/KVwiLyksbiYmQ3QoblsxXSxlLmNsYXNzTmFtZS5zcGxpdChcIiBcIikpPDAmJihlLmNsYXNzTmFtZSs9XCIgXCIrblsxXSkpKSxzPXd0KCEwLHMsQ25bb10se3RleHQ6bFtvXX0sZSkpOnM9d3QoITAscyxDbltvXSx7dGV4dDpsW29dfSksdXQudGVtcGxhdGUocikocyl9LF9oYXNGb290ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmZvb3RlclRlbXBsYXRlfHwhIXRoaXMuZ3JvdXBGb290ZXJUZW1wbGF0ZXx8dGhpcy5mb290ZXImJnRoaXMuZm9vdGVyLmxlbmd0aD4wfHx0aGlzLndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLmxlbmd0aD4wfSxfZ3JvdXBhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Ll9ncm91cGFibGVDbGlja0hhbmRsZXI/dC50YWJsZS5hZGQodC5sb2NrZWRUYWJsZSkub2ZmKG9uK090LHQuX2dyb3VwYWJsZUNsaWNrSGFuZGxlcik6dC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uKG4pe3ZhciBpPWUodGhpcykscj1pLmNsb3Nlc3QoXCJ0clwiKTtpLmhhc0NsYXNzKFwiay1pLWNvbGxhcHNlXCIpP3QuY29sbGFwc2VHcm91cChyKTp0LmV4cGFuZEdyb3VwKHIpLG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpfSx0Ll9pc0xvY2tlZCgpP3QubG9ja2VkVGFibGUub24ob24rT3QsXCIuay1ncm91cGluZy1yb3cgLmstaS1jb2xsYXBzZSwgLmstZ3JvdXBpbmctcm93IC5rLWktZXhwYW5kXCIsdC5fZ3JvdXBhYmxlQ2xpY2tIYW5kbGVyKTp0LnRhYmxlLm9uKG9uK090LFwiLmstZ3JvdXBpbmctcm93IC5rLWktY29sbGFwc2UsIC5rLWdyb3VwaW5nLXJvdyAuay1pLWV4cGFuZFwiLHQuX2dyb3VwYWJsZUNsaWNrSGFuZGxlciksdC5fYXR0YWNoR3JvdXBhYmxlKCl9LF9hdHRhY2hHcm91cGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC53cmFwcGVyLGk9dC5vcHRpb25zLmdyb3VwYWJsZSxyPUx0K1wiW1wiK3V0LmF0dHIoXCJmaWVsZFwiKStcIl1cIixvPXQuY29udGVudD9cIi5rLWdyaWQtaGVhZGVyOmZpcnN0IFwiK3I6XCJ0YWJsZTpmaXJzdD4uay1ncmlkLWhlYWRlciBcIityO2kmJmkuZW5hYmxlZCE9PSExJiYobi5oYXMoXCJkaXYuay1ncm91cGluZy1oZWFkZXJcIilbMF18fGUoXCI8ZGl2PiZuYnNwOzwvZGl2PlwiKS5hZGRDbGFzcyhcImstZ3JvdXBpbmctaGVhZGVyXCIpLnByZXBlbmRUbyhuKSx0Lmdyb3VwYWJsZSYmdC5ncm91cGFibGUuZGVzdHJveSgpLHQuZ3JvdXBhYmxlPW5ldyBmdChuLHd0KHt9LGkse2RyYWdnYWJsZTp0Ll9kcmFnZ2FibGVJbnN0YW5jZSxncm91cENvbnRhaW5lcjpcIj5kaXYuay1ncm91cGluZy1oZWFkZXJcIixkYXRhU291cmNlOnQuZGF0YVNvdXJjZSxkcmFnZ2FibGVFbGVtZW50czpvLGZpbHRlcjpvLGFsbG93RHJhZzp0Lm9wdGlvbnMucmVvcmRlcmFibGV9KSkpfSxfY29udGludW91c0l0ZW1zOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGMsZDtpZih0aGlzLmxvY2tlZENvbnRlbnQpe2ZvcihpPXRoaXMscj1pLnRhYmxlLmFkZChpLmxvY2tlZFRhYmxlKSxvPWUodCxyWzBdKSxhPWUodCxyWzFdKSxzPW4/SShpLmNvbHVtbnMpLmxlbmd0aDoxLGw9bj9pLmNvbHVtbnMubGVuZ3RoLXM6MSxjPVtdLGQ9MDtvLmxlbmd0aD5kO2QrPXMpU3QuYXBwbHkoYyxvLnNsaWNlKGQsZCtzKSksU3QuYXBwbHkoYyxhLnNwbGljZSgwLGwpKTtyZXR1cm4gY319LF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIG4saSxyLG8sYT10aGlzLHM9W10sbD1hLl9pc0xvY2tlZCgpLGM9YS5vcHRpb25zLnNlbGVjdGFibGU7YyYmKGEuc2VsZWN0YWJsZSYmYS5zZWxlY3RhYmxlLmRlc3Ryb3koKSxjPXV0LnVpLlNlbGVjdGFibGUucGFyc2VPcHRpb25zKGMpLG49Yy5tdWx0aXBsZSxpPWMuY2VsbCxhLl9oYXNEZXRhaWxzKCkmJihzW3MubGVuZ3RoXT1cIi5rLWRldGFpbC1yb3dcIiksKGEub3B0aW9ucy5ncm91cGFibGV8fGEuX2hhc0Zvb3RlcnMoKSkmJihzW3MubGVuZ3RoXT1cIi5rLWdyb3VwaW5nLXJvdywuay1ncm91cC1mb290ZXJcIikscz1zLmpvaW4oXCIsXCIpLFwiXCIhPT1zJiYocz1cIjpub3QoXCIrcytcIilcIikscj1hLnRhYmxlLGwmJihyPXIuYWRkKGEubG9ja2VkVGFibGUpKSxvPVwiPlwiKyhpP3p0OlwidGJvZHk+dHJcIitzKSxhLnNlbGVjdGFibGU9bmV3IHV0LnVpLlNlbGVjdGFibGUocix7ZmlsdGVyOm8sYXJpYTohMCxtdWx0aXBsZTpuLGNoYW5nZTpmdW5jdGlvbigpe2EudHJpZ2dlcihHdCl9LHVzZUFsbEl0ZW1zOmwmJm4mJmkscmVsYXRlZFRhcmdldDpmdW5jdGlvbih0KXt2YXIgbixyLG8scztpZighaSYmbCl7Zm9yKHI9ZSgpLG89MCxzPXQubGVuZ3RoO3M+bztvKyspbj1hLl9yZWxhdGVkUm93KHRbb10pLEN0KG5bMF0sdCk8MCYmKHI9ci5hZGQobikpO3JldHVybiByfX0sY29udGludW91c0l0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIGEuX2NvbnRpbnVvdXNJdGVtcyhvLGkpfX0pLGEub3B0aW9ucy5uYXZpZ2F0YWJsZSYmci5vbihcImtleWRvd25cIitPdCxmdW5jdGlvbihvKXt2YXIgcz1hLmN1cnJlbnQoKSxjPW8udGFyZ2V0O2lmKG8ua2V5Q29kZT09PV90LlNQQUNFQkFSJiZlLmluQXJyYXkoYyxyKT4tMSYmIXMuaXMoXCIuay1lZGl0LWNlbGwsLmstaGVhZGVyXCIpJiZzLnBhcmVudCgpLmlzKFwiOm5vdCguay1ncm91cGluZy1yb3csLmstZGV0YWlsLXJvdywuay1ncm91cC1mb290ZXIpXCIpKXtpZihvLnByZXZlbnREZWZhdWx0KCksby5zdG9wUHJvcGFnYXRpb24oKSxzPWk/czpzLnBhcmVudCgpLGwmJiFpJiYocz1zLmFkZChhLl9yZWxhdGVkUm93KHMpKSksbilpZihvLmN0cmxLZXkpe2lmKHMuaGFzQ2xhc3MoWnQpKXJldHVybiBzLnJlbW92ZUNsYXNzKFp0KSxhLnRyaWdnZXIoR3QpLHR9ZWxzZSBhLnNlbGVjdGFibGUuY2xlYXIoKTtlbHNlIGEuc2VsZWN0YWJsZS5jbGVhcigpO2Euc2VsZWN0YWJsZS52YWx1ZShzKX19KSl9LF9yZWxhdGVkUm93OmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLmxvY2tlZFRhYmxlO3JldHVybiB0PWUodCkscj8obj10LmNsb3Nlc3QodGhpcy50YWJsZS5hZGQodGhpcy5sb2NrZWRUYWJsZSkpLGk9bi5maW5kKFwiPnRib2R5PnRyXCIpLmluZGV4KHQpLG49blswXT09PXRoaXMudGFibGVbMF0/cjp0aGlzLnRhYmxlLG4uZmluZChcIj50Ym9keT50clwiKS5lcShpKSk6dH0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc2VsZWN0YWJsZS5jbGVhcigpLGUudHJpZ2dlcihHdCl9LHNlbGVjdDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9aS5zZWxlY3RhYmxlO3JldHVybiBuPWUobiksbi5sZW5ndGg/KHIub3B0aW9ucy5tdWx0aXBsZXx8KHIuY2xlYXIoKSxuPW4uZmlyc3QoKSksaS5faXNMb2NrZWQoKSYmKG49bi5hZGQobi5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVsYXRlZFJvdyh0aGlzKX0pKSksci52YWx1ZShuKSx0KTpyLnZhbHVlKCl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zLnNjcm9sbGFibGUsbz1pLl9jdXJyZW50LGE9aS50YWJsZS5hZGQoaS50aGVhZC5wYXJlbnQoKSk7cmV0dXJuIGUhPT10JiZlLmxlbmd0aCYmKG8mJm9bMF09PT1lWzBdfHwobyYmKG8ucmVtb3ZlQ2xhc3MoSnQpLnJlbW92ZUF0dHIoXCJpZFwiKSxhLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLGUuYXR0cihcImlkXCIsaS5fY2VsbElkKSxpLl9jdXJyZW50PWUuYWRkQ2xhc3MoSnQpLGEuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLGkuX2NlbGxJZCksZS5sZW5ndGgmJnImJihuPWUuY2xvc2VzdChcInRhYmxlXCIpLnBhcmVudCgpLG4uaXMoXCIuay1ncmlkLWNvbnRlbnRcIik/aS5fc2Nyb2xsVG8oZS5wYXJlbnQoKVswXSxpLmNvbnRlbnRbMF0pOm4uaXMoXCIuay1ncmlkLWNvbnRlbnQtbG9ja2VkXCIpJiYoaS5fc2Nyb2xsVG8oaS5fcmVsYXRlZFJvdyhlLnBhcmVudCgpKVswXSxpLmNvbnRlbnRbMF0pLGkubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9aS5jb250ZW50WzBdLnNjcm9sbFRvcCksbi5pcyhcIi5rLWdyaWQtY29udGVudC1sb2NrZWQsLmstZ3JpZC1oZWFkZXItbG9ja2VkXCIpfHwoci52aXJ0dWFsP2kuX3Njcm9sbFRvKGVbMF0saS5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIilbMF0pOmkuX3Njcm9sbFRvKGVbMF0saS5jb250ZW50WzBdKSkpKSksaS5fY3VycmVudH0sX3JlbW92ZUN1cnJlbnQ6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50JiYodGhpcy5fY3VycmVudC5yZW1vdmVDbGFzcyhKdCksdGhpcy5fY3VycmVudD1udWxsKX0sX3Njcm9sbFRvOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksaT1cInRkXCI9PT1ufHxcInRoXCI9PT1uLHI9ZVtpP1wib2Zmc2V0TGVmdFwiOlwib2Zmc2V0VG9wXCJdLG89ZVtpP1wib2Zmc2V0V2lkdGhcIjpcIm9mZnNldEhlaWdodFwiXSxhPXRbaT9cInNjcm9sbExlZnRcIjpcInNjcm9sbFRvcFwiXSxzPXRbaT9cImNsaWVudFdpZHRoXCI6XCJjbGllbnRIZWlnaHRcIl0sbD1yK28sYz0wO2M9YT5yP3I6bD5hK3M/cz49bz9sLXM6cjphLHRbaT9cInNjcm9sbExlZnRcIjpcInNjcm9sbFRvcFwiXT1jfSxfbmF2aWdhdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49VHQodC5jdXJyZW50LHQpLGk9dC50YWJsZS5hZGQodC5sb2NrZWRUYWJsZSkscj10LnRoZWFkLnBhcmVudCgpLmFkZChlKFwiPnRhYmxlXCIsdC5sb2NrZWRIZWFkZXIpKSxvPSh0Ll9pc0xvY2tlZCgpLGkpLGE9dXQuc3VwcG9ydC5pc1J0bCh0LmVsZW1lbnQpO3Qub3B0aW9ucy5uYXZpZ2F0YWJsZSYmKHQub3B0aW9ucy5zY3JvbGxhYmxlJiYobz1pLmFkZChyKSxyLmF0dHIoc24sLTEpKSxvLm9mZihcIm1vdXNlZG93blwiK090K1wiIGZvY3VzXCIrT3QrXCIgZm9jdXNvdXRcIitPdCtcIiBrZXlkb3duXCIrT3QpLHIub24oXCJrZXlkb3duXCIrT3QsZnVuY3Rpb24oZSl7ZS5hbHRLZXkmJmUua2V5Q29kZT09X3QuRE9XTiYmKG4oKS5maW5kKFwiLmstZ3JpZC1maWx0ZXIsIC5rLWhlYWRlci1jb2x1bW4tbWVudVwiKS5jbGljaygpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfSkuZmluZChcImEuay1saW5rXCIpLmF0dHIoXCJ0YWJJbmRleFwiLC0xKSxpLmF0dHIoc24sRXQubWF4KGkuYXR0cihzbil8fDAsMCkpLm9uKFwibW91c2Vkb3duXCIrT3QrXCIga2V5ZG93blwiK090LFwiLmstZGV0YWlsLWNlbGxcIixmdW5jdGlvbihlKXtlLnRhcmdldCE9PWUuY3VycmVudFRhcmdldCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0pLG8ub24odXQuc3VwcG9ydC50b3VjaD9cInRvdWNoc3RhcnRcIitPdDpcIm1vdXNlZG93blwiK090LEZ0K1wiPlwiK1J0LFR0KGl0LHQpKS5vbihcImZvY3VzXCIrT3QsZnVuY3Rpb24oKXtpZighdXQuc3VwcG9ydC50b3VjaCl7dmFyIHQ9bigpO3QmJnQuaXMoXCI6dmlzaWJsZVwiKT90LmFkZENsYXNzKEp0KTpuKGUodGhpcykuZmluZChCdCkpLGkuYXR0cihzbiwtMSksci5hdHRyKHNuLC0xKSxlKHRoaXMpLmF0dHIoc24sMCl9fSkub24oXCJmb2N1c291dFwiK090LGZ1bmN0aW9uKCl7dmFyIGU9bigpO2UmJmUucmVtb3ZlQ2xhc3MoSnQpfSkub24oXCJrZXlkb3duXCIrT3QsZnVuY3Rpb24obyl7dmFyIHMsbCxjLGQsdSxoPW8ua2V5Q29kZSxwPSExLGY9IW8uaXNEZWZhdWx0UHJldmVudGVkKCkmJiFlKG8udGFyZ2V0KS5pcyhcIjpidXR0b24sYSw6aW5wdXQsYT4uay1pY29uXCIpLGc9dC5vcHRpb25zLnBhZ2VhYmxlLG09dC5kYXRhU291cmNlLHY9XCJpbmNlbGxcIj09dC5fZWRpdE1vZGUoKSxfPW8uc2hpZnRLZXkseT1UdCh0Ll9yZWxhdGVkUm93LHQpLHc9bigpO2lmKHcmJncuaXMoXCJ0aFwiKSYmKGY9ITApLGYmJmg9PV90LlVQKW4ob3QodyxvLmN1cnJlbnRUYXJnZXQsaSxyLCEwKSkscD0hMDtlbHNlIGlmKGYmJmg9PV90LkRPV04pbihvdCh3LG8uY3VycmVudFRhcmdldCxpLHIpKSxwPSEwO2Vsc2UgaWYoZiYmaD09KGE/X3QuUklHSFQ6X3QuTEVGVCkpbihhdCh3LG8uY3VycmVudFRhcmdldCxpLHIseSkpLHA9ITA7ZWxzZSBpZihmJiZoPT0oYT9fdC5MRUZUOl90LlJJR0hUKSluKHN0KHcsby5jdXJyZW50VGFyZ2V0LGkscix5KSkscD0hMDtlbHNlIGlmKGYmJmcmJl90LlBBR0VET1dOPT1oKW0ucGFnZShtLnBhZ2UoKSsxKSxwPSEwO2Vsc2UgaWYoZiYmZyYmX3QuUEFHRVVQPT1oKW0ucGFnZShtLnBhZ2UoKS0xKSxwPSEwO2Vsc2UgaWYoaD09X3QuRU5URVJ8fF90LkYyPT1oKXtpZih3PXc/dzppLmZpbmQoQnQpLCF3Lmxlbmd0aClyZXR1cm47ZShvLnRhcmdldCkuaXMoXCJ0YWJsZVwiKXx8ZS5jb250YWlucyh3WzBdLG8udGFyZ2V0KXx8KHc9ZShvLnRhcmdldCkuY2xvc2VzdChcIltyb2xlPWdyaWRjZWxsXVwiKSksdy5pcyhcInRoXCIpPyh3LmZpbmQoXCIuay1saW5rXCIpLmNsaWNrKCkscD0hMCk6dy5wYXJlbnQoKS5pcyhcIi5rLW1hc3Rlci1yb3csLmstZ3JvdXBpbmctcm93XCIpPyh3LnBhcmVudCgpLmZpbmQoXCIuay1pY29uOmZpcnN0XCIpLmNsaWNrKCkscD0hMCk6KGM9dy5maW5kKFwiOmtlbmRvRm9jdXNhYmxlOmZpcnN0XCIpLCF3Lmhhc0NsYXNzKFwiay1lZGl0LWNlbGxcIikmJmNbMF0mJncuaGFzQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIik/KGMuZm9jdXMoKSxwPSEwKTp0Lm9wdGlvbnMuZWRpdGFibGUmJiFlKG8udGFyZ2V0KS5pcyhcIjpidXR0b24sLmstYnV0dG9uLHRleHRhcmVhXCIpJiYoZD1lKG8udGFyZ2V0KS5jbG9zZXN0KFwiW3JvbGU9Z3JpZGNlbGxdXCIpLGRbMF18fChkPXcpLHQuX2hhbmRsZUVkaXRpbmcoZCwhMSx2P28uY3VycmVudFRhcmdldDppWzBdKSxwPSEwKSl9ZWxzZSBfdC5FU0M9PWg/KHM9bXQoKSx3JiZlLmNvbnRhaW5zKHdbMF0scykmJiF3Lmhhc0NsYXNzKFwiay1lZGl0LWNlbGxcIikmJiF3LnBhcmVudCgpLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpPyhudChvLmN1cnJlbnRUYXJnZXQsITApLHA9ITApOiF0Ll9lZGl0Q29udGFpbmVyfHx3JiYhdC5fZWRpdENvbnRhaW5lci5oYXMod1swXSkmJndbMF0hPT10Ll9lZGl0Q29udGFpbmVyWzBdfHwodj90LmNsb3NlQ2VsbCghMCk6KGw9ZSh3KS5wYXJlbnQoKS5pbmRleCgpLHMmJnMuYmx1cigpLHQuY2FuY2VsUm93KCksbD49MCYmdC5jdXJyZW50KGkuZmluZChcIj50Ym9keT50clwiKS5lcShsKS5jaGlsZHJlbigpLmZpbHRlcihSdCkuZmlyc3QoKSkpLHduLm1zaWUmJjk+d24udmVyc2lvbiYmZG9jdW1lbnQuYm9keS5mb2N1cygpLG50KHY/by5jdXJyZW50VGFyZ2V0OmlbMF0sITApLHA9ITApKTpfdC5UQUI9PWgmJih3PWUodyksdC5vcHRpb25zLmVkaXRhYmxlJiZ2JiYodT1lKG10KCkpLmNsb3Nlc3QoXCIuay1lZGl0LWNlbGxcIiksdVswXSYmdVswXSE9PXdbMF0mJih3PXUpKSx1PWx0KHcsby5jdXJyZW50VGFyZ2V0LGkseSxfKSwhdy5pcyhcInRoXCIpJiZ1Lmxlbmd0aCYmdC5vcHRpb25zLmVkaXRhYmxlJiZ2JiYodC5faGFuZGxlRWRpdGluZyh3LHUsdS5jbG9zZXN0KGkpKSxwPSEwKSk7cCYmKG8ucHJldmVudERlZmF1bHQoKSxvLnN0b3BQcm9wYWdhdGlvbigpKX0pKX0sX2hhbmRsZUVkaXRpbmc6ZnVuY3Rpb24obixpLHIpe3ZhciBvLGEscz10aGlzLGw9ZShtdCgpKSxjPXMuX2VkaXRNb2RlKCksZD13bi5tc2llLHU9ZCYmOT53bi52ZXJzaW9uLGg9cy5fZWRpdENvbnRhaW5lcjtpZihyPWUociksYT1cImluY2VsbFwiPT1jP24uaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKTpuLnBhcmVudCgpLmhhc0NsYXNzKFwiay1ncmlkLWVkaXQtcm93XCIpLHMuZWRpdGFibGUpe2lmKGUuY29udGFpbnMoaFswXSxsWzBdKSYmKHduLm9wZXJhfHx1P2wuY2hhbmdlKCkudHJpZ2dlckhhbmRsZXIoXCJibHVyXCIpOihsLmJsdXIoKSxkJiZsLmJsdXIoKSkpLCFzLmVkaXRhYmxlKXJldHVybiBudChyKSx0O2lmKCFzLmVkaXRhYmxlLmVuZCgpKXJldHVybiBzLmN1cnJlbnQoXCJpbmNlbGxcIj09Yz9oOmguY2hpbGRyZW4oKS5maWx0ZXIoSXQpLmZpcnN0KCkpLG89aC5maW5kKFwiOmtlbmRvRm9jdXNhYmxlOmZpcnN0XCIpWzBdLG8mJm8uZm9jdXMoKSx0O1wiaW5jZWxsXCI9PWM/cy5jbG9zZUNlbGwoKToocy5zYXZlUm93KCksYT0hMCl9aSYmcy5jdXJyZW50KGkpLHUmJmRvY3VtZW50LmJvZHkuZm9jdXMoKSxudChyLCEwKSwoIWEmJiFpfHxpKSYmKFwiaW5jZWxsXCI9PWM/cy5lZGl0Q2VsbChzLmN1cnJlbnQoKSk6cy5lZGl0Um93KHMuY3VycmVudCgpLnBhcmVudCgpKSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudGFibGUsbj1lLm9wdGlvbnMuaGVpZ2h0LGk9ZS5lbGVtZW50O2kuaXMoXCJkaXZcIil8fChpPWkud3JhcChcIjxkaXYvPlwiKS5wYXJlbnQoKSksZS53cmFwcGVyPWkuYWRkQ2xhc3MoXCJrLWdyaWQgay13aWRnZXRcIiksbiYmKGUud3JhcHBlci5jc3MoYW4sbiksdC5jc3MoYW4sXCJhdXRvXCIpKSxlLl9pbml0TW9iaWxlKCl9LF9pbml0TW9iaWxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLm9wdGlvbnMsaT10aGlzO3RoaXMuX2lzTW9iaWxlPW4ubW9iaWxlPT09ITAmJnV0LnN1cHBvcnQubW9iaWxlT1N8fFwicGhvbmVcIj09PW4ubW9iaWxlfHxcInRhYmxldFwiPT09bi5tb2JpbGUsdGhpcy5faXNNb2JpbGUmJih0PXRoaXMud3JhcHBlci5hZGRDbGFzcyhcImstZ3JpZC1tb2JpbGVcIikud3JhcChcIjxkaXYgZGF0YS1cIit1dC5ucysncm9sZT1cInZpZXdcIiBkYXRhLScrdXQubnMrJ2luaXQtd2lkZ2V0cz1cImZhbHNlXCI+PC9kaXY+JykucGFyZW50KCksdGhpcy5wYW5lPXV0Lm1vYmlsZS51aS5QYW5lLndyYXAodCksdGhpcy52aWV3PXRoaXMucGFuZS52aWV3KCksdGhpcy5fYWN0aW9uU2hlZXRQb3B1cE9wdGlvbnM9ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmhhc0NsYXNzKFwia20tcm9vdFwiKT97bW9kYWw6ITF9OnthbGlnbjpcImJvdHRvbSBjZW50ZXJcIixwb3NpdGlvbjpcImJvdHRvbSBjZW50ZXJcIixlZmZlY3Q6XCJzbGlkZUluOnVwXCJ9LG4uaGVpZ2h0JiZ0aGlzLnBhbmUuZWxlbWVudC5wYXJlbnQoKS5jc3MoYW4sbi5oZWlnaHQpLHRoaXMuX2VkaXRBbmltYXRpb249XCJzbGlkZVwiLHRoaXMudmlldy5iaW5kKFwic2hvd1wiLGZ1bmN0aW9uKCl7aS5faXNMb2NrZWQoKSYmKGkuX3VwZGF0ZVRhYmxlc1dpZHRoKCksaS5fYXBwbHlMb2NrZWRDb250YWluZXJzV2lkdGgoKSxpLl9zeW5jTG9ja2VkQ29udGVudEhlaWdodCgpLGkuX3N5bmNMb2NrZWRIZWFkZXJIZWlnaHQoKSxpLl9zeW5jTG9ja2VkRm9vdGVySGVpZ2h0KCkpfSkpfSxfdGJvZHk6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLnRhYmxlO3Q9aS5maW5kKFwiPnRib2R5XCIpLHQubGVuZ3RofHwodD1lKFwiPHRib2R5Lz5cIikuYXBwZW5kVG8oaSkpLG4udGJvZHk9dC5hdHRyKFwicm9sZVwiLFwicm93Z3JvdXBcIil9LF9zY3JvbGxhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbz10aGlzLGE9by5vcHRpb25zLHM9YS5zY3JvbGxhYmxlLGw9cyE9PSEwJiZzLnZpcnR1YWwmJiFvLnZpcnR1YWxTY3JvbGxhYmxlLGM9IXV0LnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZHx8bD91dC5zdXBwb3J0LnNjcm9sbGJhcigpOjA7cyYmKHQ9by53cmFwcGVyLmNoaWxkcmVuKFwiLmstZ3JpZC1oZWFkZXJcIiksdFswXXx8KHQ9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXJcIiAvPicpLmluc2VydEJlZm9yZShvLnRhYmxlKSksdC5jc3MoeW4/XCJwYWRkaW5nLWxlZnRcIjpcInBhZGRpbmctcmlnaHRcIixzLnZpcnR1YWw/YysxOmMpLG49ZSgnPHRhYmxlIHJvbGU9XCJncmlkXCIgLz4nKSxibiYmbi5hdHRyKFwiY2VsbHNwYWNpbmdcIiwwKSxuLmFwcGVuZChvLnRoZWFkKSx0LmVtcHR5KCkuYXBwZW5kKGUoJzxkaXYgY2xhc3M9XCJrLWdyaWQtaGVhZGVyLXdyYXBcIiAvPicpLmFwcGVuZChuKSksby5jb250ZW50PW8udGFibGUucGFyZW50KCksby5jb250ZW50LmlzKFwiLmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXAsIC5rbS1zY3JvbGwtY29udGFpbmVyXCIpJiYoby5jb250ZW50PW8uY29udGVudC5wYXJlbnQoKSksby5jb250ZW50LmlzKFwiLmstZ3JpZC1jb250ZW50LCAuay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKXx8KG8uY29udGVudD1vLnRhYmxlLndyYXAoJzxkaXYgY2xhc3M9XCJrLWdyaWQtY29udGVudFwiIC8+JykucGFyZW50KCkpLGwmJihvLnZpcnR1YWxTY3JvbGxhYmxlPW5ldyB4bihvLmNvbnRlbnQse2RhdGFTb3VyY2U6by5kYXRhU291cmNlLGl0ZW1IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5fYXZlcmFnZVJvd0hlaWdodCgpfX0pKSxvLnNjcm9sbGFibGVzPXQuY2hpbGRyZW4oXCIuay1ncmlkLWhlYWRlci13cmFwXCIpLGk9by53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKSxpLmxlbmd0aCYmKG8uc2Nyb2xsYWJsZXM9by5zY3JvbGxhYmxlcy5hZGQoaS5jaGlsZHJlbihcIi5rLWdyaWQtZm9vdGVyLXdyYXBcIikpKSxzLnZpcnR1YWw/by5jb250ZW50LmZpbmQoXCI+LmstdmlydHVhbC1zY3JvbGxhYmxlLXdyYXBcIikudW5iaW5kKFwic2Nyb2xsXCIrT3QpLmJpbmQoXCJzY3JvbGxcIitPdCxmdW5jdGlvbigpe28uc2Nyb2xsYWJsZXMuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpLG8ubG9ja2VkQ29udGVudCYmKG8ubG9ja2VkQ29udGVudFswXS5zY3JvbGxUb3A9dGhpcy5zY3JvbGxUb3ApfSk6KG8uY29udGVudC51bmJpbmQoXCJzY3JvbGxcIitPdCkuYmluZChcInNjcm9sbFwiK090LGZ1bmN0aW9uKCl7by5zY3JvbGxhYmxlcy5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksby5sb2NrZWRDb250ZW50JiYoby5sb2NrZWRDb250ZW50WzBdLnNjcm9sbFRvcD10aGlzLnNjcm9sbFRvcCl9KSxyPW8uY29udGVudC5kYXRhKFwia2VuZG9Ub3VjaFNjcm9sbGVyXCIpLHImJnIuZGVzdHJveSgpLHI9dXQudG91Y2hTY3JvbGxlcihvLmNvbnRlbnQpLHImJnIubW92YWJsZSYmKG8udG91Y2hTY3JvbGxlcj1yLHIubW92YWJsZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSl7by5zY3JvbGxhYmxlcy5zY3JvbGxMZWZ0KC1lLnNlbmRlci54KSxvLmxvY2tlZENvbnRlbnQmJm8ubG9ja2VkQ29udGVudC5zY3JvbGxUb3AoLWUuc2VuZGVyLnkpfSksby5vbmUoS3QsZnVuY3Rpb24oZSl7ZS5zZW5kZXIud3JhcHBlci5hZGRDbGFzcyhcImstZ3JpZC1iYWNrZmFjZVwiKX0pKSkpfSxfc2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9XCJrLWdyaWQtY29udGVudC1leHBhbmRlclwiLHI9JzxkaXYgY2xhc3M9XCInK2krJ1wiPjwvZGl2Picsbz1uLnJlc2l6YWJsZTtuLm9wdGlvbnMuc2Nyb2xsYWJsZSYmbi53cmFwcGVyLmlzKFwiOnZpc2libGVcIikmJih0PW4udGFibGUucGFyZW50KCkuY2hpbGRyZW4oXCIuXCIraSksbi5fc2V0Q29udGVudFdpZHRoSGFuZGxlcj1UdChuLl9zZXRDb250ZW50V2lkdGgsbiksbi5kYXRhU291cmNlJiZuLmRhdGFTb3VyY2UudmlldygpLmxlbmd0aD90WzBdJiYodC5yZW1vdmUoKSxvJiZvLnVuYmluZChcInJlc2l6ZVwiLG4uX3NldENvbnRlbnRXaWR0aEhhbmRsZXIpKToodFswXXx8KHQ9ZShyKS5hcHBlbmRUbyhuLnRhYmxlLnBhcmVudCgpKSxvJiZvLmJpbmQoXCJyZXNpemVcIixuLl9zZXRDb250ZW50V2lkdGhIYW5kbGVyKSksbi50aGVhZCYmdC53aWR0aChuLnRoZWFkLndpZHRoKCkpKSxuLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpKX0sX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLnNjcm9sbGFibGUmJnRoaXMubG9ja2VkSGVhZGVyKXt2YXIgZSx0PXRoaXMudGhlYWQucGFyZW50KCksbj10LnBhcmVudCgpLGk9dGhpcy53cmFwcGVyWzBdLmNsaWVudFdpZHRoLHI9dGhpcy5fZ3JvdXBzKCksbz11dC5zdXBwb3J0LnNjcm9sbGJhcigpLGE9dGhpcy5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZT5jb2xncm91cD5jb2w6bm90KC5rLWdyb3VwLWNvbCwgLmstaGllcmFyY2h5LWNvbClcIikscz10LmZpbmQoXCI+Y29sZ3JvdXA+Y29sOm5vdCguay1ncm91cC1jb2wsIC5rLWhpZXJhcmNoeS1jb2wpXCIpLGw9RChhKSxjPUQocyk7cj4wJiYobCs9dGhpcy5sb2NrZWRIZWFkZXIuZmluZChcIi5rLWdyb3VwLWNlbGw6Zmlyc3RcIikub3V0ZXJXaWR0aCgpKnIpLGw+PWkmJihsPWktMypvKSx0aGlzLmxvY2tlZEhlYWRlci5hZGQodGhpcy5sb2NrZWRDb250ZW50KS53aWR0aChsKSxuWzBdLnN0eWxlLndpZHRoPW4ucGFyZW50KCkud2lkdGgoKS1sLTIrXCJweFwiLHQuYWRkKHRoaXMudGFibGUpLndpZHRoKGMpLHRoaXMudmlydHVhbFNjcm9sbGFibGUmJihpLT1vKSx0aGlzLmNvbnRlbnRbMF0uc3R5bGUud2lkdGg9aS1sLTIrXCJweFwiLHRoaXMubG9ja2VkRm9vdGVyJiZ0aGlzLmxvY2tlZEZvb3Rlci5sZW5ndGgmJih0aGlzLmxvY2tlZEZvb3Rlci53aWR0aChsKSxlPXRoaXMuZm9vdGVyLmZpbmQoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpLGVbMF0uc3R5bGUud2lkdGg9blswXS5jbGllbnRXaWR0aCtcInB4XCIsZS5jaGlsZHJlbigpLmZpcnN0KCkud2lkdGgoYykpfX0sX3NldENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT10LndyYXBwZXIuaW5uZXJIZWlnaHQoKSxyPXQud3JhcHBlci5jaGlsZHJlbihcIi5rLWdyaWQtaGVhZGVyXCIpLG89dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTtuLnNjcm9sbGFibGUmJnQud3JhcHBlci5pcyhcIjp2aXNpYmxlXCIpJiYoaS09ci5vdXRlckhlaWdodCgpLHQucGFnZXImJihpLT10LnBhZ2VyLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSksbi5ncm91cGFibGUmJihpLT10LndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncm91cGluZy1oZWFkZXJcIikub3V0ZXJIZWlnaHQoKSksbi50b29sYmFyJiYoaS09dC53cmFwcGVyLmNoaWxkcmVuKFwiLmstZ3JpZC10b29sYmFyXCIpLm91dGVySGVpZ2h0KCkpLHQuZm9vdGVyVGVtcGxhdGUmJihpLT10LndyYXBwZXIuY2hpbGRyZW4oXCIuay1ncmlkLWZvb3RlclwiKS5vdXRlckhlaWdodCgpKSxlPWZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGVbMF0uc3R5bGUuaGVpZ2h0PyEwOih0PWUuaGVpZ2h0KCksZS5oZWlnaHQoXCJhdXRvXCIpLG49ZS5oZWlnaHQoKSx0IT1uPyhlLmhlaWdodChcIlwiKSwhMCk6KGUuaGVpZ2h0KFwiXCIpLCExKSl9LGUodC53cmFwcGVyKSYmKGk+MipvPyh0LmxvY2tlZENvbnRlbnQmJihvPXQudGFibGVbMF0ub2Zmc2V0V2lkdGg+dC50YWJsZS5wYXJlbnQoKVswXS5jbGllbnRXaWR0aD9vOjAsdC5sb2NrZWRDb250ZW50LmhlaWdodChpLW8pKSx0LmNvbnRlbnQuaGVpZ2h0KGkpKTp0LmNvbnRlbnQuaGVpZ2h0KDIqbysxKSkpfSxfYXZlcmFnZVJvd0hlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuX2l0ZW1zKHQudGJvZHkpLmxlbmd0aCxpPXQuX3Jvd0hlaWdodDtyZXR1cm4gMD09PW4/aToodC5fcm93SGVpZ2h0fHwodC5fcm93SGVpZ2h0PWk9dC50YWJsZS5vdXRlckhlaWdodCgpL24sdC5fc3VtPWksdC5fbWVhc3VyZXM9MSksZT10LnRhYmxlLm91dGVySGVpZ2h0KCkvbixpIT09ZSYmKHQuX21lYXN1cmVzKyssdC5fc3VtKz1lLHQuX3Jvd0hlaWdodD10Ll9zdW0vdC5fbWVhc3VyZXMpLGkpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlLG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZGF0YVNvdXJjZTtyPXh0KHIpP3tkYXRhOnJ9OnIseXQocikmJih3dChyLHt0YWJsZTpuLnRhYmxlLGZpZWxkczpuLmNvbHVtbnN9KSxlPWkucGFnZWFibGUseXQoZSkmJmUucGFnZVNpemUhPT10JiYoci5wYWdlU2l6ZT1lLnBhZ2VTaXplKSksbi5kYXRhU291cmNlJiZuLl9yZWZyZXNoSGFuZGxlcj9uLmRhdGFTb3VyY2UudW5iaW5kKEd0LG4uX3JlZnJlc2hIYW5kbGVyKS51bmJpbmQoTXQsbi5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoUHQsbi5fZXJyb3JIYW5kbGVyKToobi5fcmVmcmVzaEhhbmRsZXI9VHQobi5yZWZyZXNoLG4pLG4uX3Byb2dyZXNzSGFuZGxlcj1UdChuLl9yZXF1ZXN0U3RhcnQsbiksbi5fZXJyb3JIYW5kbGVyPVR0KG4uX2Vycm9yLG4pKSxuLmRhdGFTb3VyY2U9cHQuY3JlYXRlKHIpLmJpbmQoR3Qsbi5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoTXQsbi5fcHJvZ3Jlc3NIYW5kbGVyKS5iaW5kKFB0LG4uX2Vycm9ySGFuZGxlcil9LF9lcnJvcjpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCExKX0sX3JlcXVlc3RTdGFydDpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCEwKX0sX21vZGVsQ2hhbmdlOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1PXRoaXMsaD11LnRib2R5LHA9dC5tb2RlbCxmPXUudGJvZHkuZmluZChcInRyW1wiK3V0LmF0dHIoXCJ1aWRcIikrXCI9XCIrcC51aWQrXCJdXCIpLGc9Zi5oYXNDbGFzcyhcImstYWx0XCIpLG09dS5faXRlbXMoaCkuaW5kZXgoZiksdj11LmxvY2tlZENvbnRlbnQ7aWYodiYmKG49dS5fcmVsYXRlZFJvdyhmKSksZi5hZGQobikuY2hpbGRyZW4oXCIuay1lZGl0LWNlbGxcIikubGVuZ3RoJiYhdS5vcHRpb25zLnJvd1RlbXBsYXRlKWYuYWRkKG4pLmNoaWxkcmVuKFwiOm5vdCguay1ncm91cC1jZWxsLC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5lYWNoKGZ1bmN0aW9uKCl7aT1lKHRoaXMpLHI9TCh1LmNvbHVtbnMpW3UuY2VsbEluZGV4KGkpXSxyLmZpZWxkPT09dC5maWVsZCYmKGkuaGFzQ2xhc3MoXCJrLWVkaXQtY2VsbFwiKT9pLmFkZENsYXNzKFwiay1kaXJ0eS1jZWxsXCIpOih1Ll9kaXNwbGF5Q2VsbChpLHIscCksZSgnPHNwYW4gY2xhc3M9XCJrLWRpcnR5XCIvPicpLnByZXBlbmRUbyhpKSkpfSk7ZWxzZSBpZighZi5oYXNDbGFzcyhcImstZ3JpZC1lZGl0LXJvd1wiKSl7Zm9yKHM9ZSgpLmFkZChmKSx2JiYobz0oZz91LmxvY2tlZEFsdFJvd1RlbXBsYXRlOnUubG9ja2VkUm93VGVtcGxhdGUpKHApLHM9cy5hZGQobiksbi5yZXBsYWNlV2l0aChvKSksbz0oZz91LmFsdFJvd1RlbXBsYXRlOnUucm93VGVtcGxhdGUpKHApLGYucmVwbGFjZVdpdGgobyksbz11Ll9pdGVtcyhoKS5lcShtKSx2JiYoZj1mLmFkZChuKSxuPXUuX3JlbGF0ZWRSb3cobylbMF0sZXQob1swXSxuKSxvPW8uYWRkKG4pKSxhPXUub3B0aW9ucy5zZWxlY3RhYmxlLGEmJmYuaGFzQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpJiZ1LnNlbGVjdChvKSxjPXMuY2hpbGRyZW4oXCI6bm90KC5rLWdyb3VwLWNlbGwsLmstaGllcmFyY2h5LWNlbGwpXCIpLGw9by5jaGlsZHJlbihcIjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksbT0wLGQ9dS5jb2x1bW5zLmxlbmd0aDtkPm07bSsrKXI9dS5jb2x1bW5zW21dLGk9bC5lcShtKSxhJiZjLmVxKG0pLmhhc0NsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSYmaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksci5maWVsZD09PXQuZmllbGQmJmUoJzxzcGFuIGNsYXNzPVwiay1kaXJ0eVwiLz4nKS5wcmVwZW5kVG8oaSk7dS50cmlnZ2VyKFwiaXRlbUNoYW5nZVwiLHtpdGVtOm8sZGF0YTpwLG5zOmh0fSl9fSxfcGFnZWFibGU6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMucGFnZWFibGU7aSYmKHQ9bi53cmFwcGVyLmNoaWxkcmVuKFwiZGl2LmstZ3JpZC1wYWdlclwiKSx0Lmxlbmd0aHx8KHQ9ZSgnPGRpdiBjbGFzcz1cImstcGFnZXItd3JhcCBrLWdyaWQtcGFnZXJcIi8+JykuYXBwZW5kVG8obi53cmFwcGVyKSksbi5wYWdlciYmbi5wYWdlci5kZXN0cm95KCksbi5wYWdlcj1cIm9iamVjdFwiPT10eXBlb2YgaSYmaSBpbnN0YW5jZW9mIHV0LnVpLlBhZ2VyP2k6bmV3IHV0LnVpLlBhZ2VyKHQsd3Qoe30saSx7ZGF0YVNvdXJjZTpuLmRhdGFTb3VyY2V9KSkpfSxfZm9vdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsYT10aGlzLHM9YS5kYXRhU291cmNlLmFnZ3JlZ2F0ZXMoKSxsPVwiXCIsYz1hLmZvb3RlclRlbXBsYXRlLGQ9YS5vcHRpb25zLHU9YS5mb290ZXJ8fGEud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIik7Yz8ocz1BdChzKT9vKGEuZGF0YVNvdXJjZS5hZ2dyZWdhdGUoKSk6cyxsPWUoYS5fd3JhcEZvb3RlcihjKHMpKSksdS5sZW5ndGg/KG49bCxhLmFuZ3VsYXIoXCJjbGVhbnVwXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dS5nZXQoKX19KSx1LnJlcGxhY2VXaXRoKG4pLHU9YS5mb290ZXI9bik6dT1hLmZvb3Rlcj1kLnNjcm9sbGFibGU/ZC5wYWdlYWJsZT9sLmluc2VydEJlZm9yZShhLndyYXBwZXIuY2hpbGRyZW4oXCJkaXYuay1ncmlkLXBhZ2VyXCIpKTpsLmFwcGVuZFRvKGEud3JhcHBlcik6bC5pbnNlcnRCZWZvcmUoYS50Ym9keSksYS5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnUuZmluZChcInRkXCIpLmdldCgpLGRhdGE6YnQoYS5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybntjb2x1bW46ZSxhZ2dyZWdhdGU6c1tlLmZpZWxkXX19KX19KSk6dSYmIWEuZm9vdGVyJiYoYS5mb290ZXI9dSksdS5sZW5ndGgmJihkLnNjcm9sbGFibGUmJih0PXUuYXR0cihcInRhYmluZGV4XCIsLTEpLmNoaWxkcmVuKFwiLmstZ3JpZC1mb290ZXItd3JhcFwiKSxhLnNjcm9sbGFibGVzPWEuc2Nyb2xsYWJsZXMuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuaXMoXCIuay1ncmlkLWZvb3Rlci13cmFwXCIpfSkuYWRkKHQpKSxhLl9mb290ZXJXaWR0aCYmdS5maW5kKFwidGFibGVcIikuY3NzKFwid2lkdGhcIixhLl9mb290ZXJXaWR0aCksdCYmKGk9YS5jb250ZW50LnNjcm9sbExlZnQoKSxyPWQuc2Nyb2xsYWJsZSE9PSEwJiZkLnNjcm9sbGFibGUudmlydHVhbCYmIWEudmlydHVhbFNjcm9sbGFibGUsciYmKGk9YS53cmFwcGVyLmZpbmQoXCIuay12aXJ0dWFsLXNjcm9sbGFibGUtd3JhcFwiKS5zY3JvbGxMZWZ0KCkpLHQuc2Nyb2xsTGVmdChpKSkpLGEubG9ja2VkQ29udGVudCYmKGEuX2FwcGVuZExvY2tlZENvbHVtbkZvb3RlcigpLGEuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksYS5fc3luY0xvY2tlZEZvb3RlckhlaWdodCgpKX0sX3dyYXBGb290ZXI6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPVwiXCIscj11dC5zdXBwb3J0Lm1vYmlsZU9TPzA6dXQuc3VwcG9ydC5zY3JvbGxiYXIoKTtyZXR1cm4gbi5vcHRpb25zLnNjcm9sbGFibGU/KGk9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1mb290ZXJcIj48ZGl2IGNsYXNzPVwiay1ncmlkLWZvb3Rlci13cmFwXCI+PHRhYmxlJysoYm4/JyBjZWxsc3BhY2luZz1cIjBcIic6XCJcIikrXCI+PHRib2R5PlwiK3QrXCI8L3Rib2R5PjwvdGFibGU+PC9kaXY+PC9kaXY+XCIpLG4uX2FwcGVuZENvbHMoaS5maW5kKFwidGFibGVcIikpLGkuY3NzKHluP1wicGFkZGluZy1sZWZ0XCI6XCJwYWRkaW5nLXJpZ2h0XCIsciksaSk6Jzx0Zm9vdCBjbGFzcz1cImstZ3JpZC1mb290ZXJcIj4nK3QrXCI8L3Rmb290PlwifSxfY29sdW1uTWVudTpmdW5jdGlvbigpe3ZhciBlLG4saSxyLG8sYSxzLGwsYyxkPXRoaXMsdT1MKGQuY29sdW1ucyksaD1kLm9wdGlvbnMscD1oLmNvbHVtbk1lbnUsZj1rdChkLmNvbHVtbnMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29sdW1ucyE9PXR9KS5sZW5ndGg+MCxnPXRoaXMuX2lzTW9iaWxlLG09ZnVuY3Rpb24oZSl7ZC50cmlnZ2VyKGp0LHtmaWVsZDplLmZpZWxkLGNvbnRhaW5lcjplLmNvbnRhaW5lcn0pfSx2PWZ1bmN0aW9uKGUpe250KGUuY2xvc2VzdChcInRhYmxlXCIpLCEwKX0sXz1oLiRhbmd1bGFyO2lmKHApZm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcCYmKHA9e30pLGE9TyhkLnRoZWFkKSxzPTAsbD1hLmxlbmd0aDtsPnM7cysrKW49dVtzXSxjPWEuZXEocyksbi5jb21tYW5kfHwhbi5maWVsZCYmIWMuYXR0cihcImRhdGEtXCIrdXQubnMrXCJmaWVsZFwiKXx8KGU9Yy5kYXRhKFwia2VuZG9Db2x1bW5NZW51XCIpLGUmJmUuZGVzdHJveSgpLHI9bi5zb3J0YWJsZSE9PSExJiZwLnNvcnRhYmxlIT09ITEmJmguc29ydGFibGUhPT0hMT93dCh7fSxoLnNvcnRhYmxlLHtjb21wYXJlOihuLnNvcnRhYmxlfHx7fSkuY29tcGFyZX0pOiExLG89aC5maWx0ZXJhYmxlJiZuLmZpbHRlcmFibGUhPT0hMSYmcC5maWx0ZXJhYmxlIT09ITE/d3Qoe3BhbmU6ZC5wYW5lfSxuLmZpbHRlcmFibGUsaC5maWx0ZXJhYmxlKTohMSxpPXtkYXRhU291cmNlOmQuZGF0YVNvdXJjZSx2YWx1ZXM6bi52YWx1ZXMsY29sdW1uczpwLmNvbHVtbnMsc29ydGFibGU6cixmaWx0ZXJhYmxlOm8sbWVzc2FnZXM6cC5tZXNzYWdlcyxvd25lcjpkLGNsb3NlQ2FsbGJhY2s6dixpbml0Om0scGFuZTpkLnBhbmUsZmlsdGVyOmc/XCI6bm90KC5rLWNvbHVtbi1hY3RpdmUpXCI6XCJcIixsb2NrZWRDb2x1bW5zOiFmJiZuLmxvY2thYmxlIT09ITEmJkkodSkubGVuZ3RoPjB9LF8mJihpLiRhbmd1bGFyPV8pLGMua2VuZG9Db2x1bW5NZW51KGkpKX0sX2hlYWRlckNlbGxzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGhlYWQuZmluZChcInRoXCIpLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cmV0dXJuIXQuaGFzQ2xhc3MoXCJrLWdyb3VwLWNlbGxcIikmJiF0Lmhhc0NsYXNzKFwiay1oaWVyYXJjaHktY2VsbFwiKX0pfSxfZmlsdGVyYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhLHM9dGhpcyxsPUwocy5jb2x1bW5zKSxjPWZ1bmN0aW9uKGUpe3MudHJpZ2dlcihXdCx7ZmllbGQ6ZS5maWVsZCxjb250YWluZXI6ZS5jb250YWluZXJ9KX0sZD1mdW5jdGlvbihlKXtudChlLmNsb3Nlc3QoXCJ0YWJsZVwiKSwhMCl9LHU9cy5vcHRpb25zLmZpbHRlcmFibGU7aWYodSYmdHlwZW9mIHUubW9kZT09Y24mJi0xPT11Lm1vZGUuaW5kZXhPZihcIm1lbnVcIikmJih1PSExKSx1JiYhcy5vcHRpb25zLmNvbHVtbk1lbnUpZm9yKHQ9TyhzLnRoZWFkKSxpPTAscj10Lmxlbmd0aDtyPmk7aSsrKW49dC5lcShpKSxsW2ldLmZpbHRlcmFibGU9PT0hMXx8bFtpXS5jb21tYW5kfHwhbFtpXS5maWVsZCYmIW4uYXR0cihcImRhdGEtXCIrdXQubnMrXCJmaWVsZFwiKXx8KGU9bi5kYXRhKFwia2VuZG9GaWx0ZXJNZW51XCIpLGUmJmUuZGVzdHJveSgpLG89bFtpXS5maWx0ZXJhYmxlLGE9d3Qoe30sdSxvLHtkYXRhU291cmNlOnMuZGF0YVNvdXJjZSx2YWx1ZXM6bFtpXS52YWx1ZXMsY2xvc2VDYWxsYmFjazpkLGluaXQ6YyxwYW5lOnMucGFuZX0pLG8mJm8ubWVzc2FnZXMmJihhLm1lc3NhZ2VzPXd0KCEwLHt9LHUubWVzc2FnZXMsby5tZXNzYWdlcykpLG4ua2VuZG9GaWx0ZXJNZW51KGEpKX0sX2ZpbHRlclJvdzpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYSxzLGwsYyxkLHUsaCxwPXRoaXM7aWYocC5faGFzRmlsdGVyUm93KCkpZm9yKHQ9TChwLmNvbHVtbnMpLG49cC5vcHRpb25zLmZpbHRlcmFibGUsaT1wLnRoZWFkLmZpbmQoXCIuay1maWx0ZXItcm93XCIpLHRoaXMuX3VwZGF0ZUhlYWRlcih0aGlzLmRhdGFTb3VyY2UuZ3JvdXAoKS5sZW5ndGgpLHI9MDt0Lmxlbmd0aD5yO3IrKylpZihhPXRbcl0scz1wLm9wdGlvbnMuZmlsdGVyYWJsZS5vcGVyYXRvcnMsbD0hMSxjPWUoXCI8dGgvPlwiKSxkPWEuZmllbGQsYS5oaWRkZW4mJmMuaGlkZSgpLGkuYXBwZW5kKGMpLGQmJmEuZmlsdGVyYWJsZSE9PSExKXtpZih1PWEuZmlsdGVyYWJsZSYmYS5maWx0ZXJhYmxlLmNlbGx8fHt9LG89cC5vcHRpb25zLmRhdGFTb3VyY2UsbyBpbnN0YW5jZW9mIHB0JiYobz1wLm9wdGlvbnMuZGF0YVNvdXJjZS5vcHRpb25zKSxoPXd0KCEwLHt9LG4ubWVzc2FnZXMpLGEuZmlsdGVyYWJsZSYmd3QoITAsaCxhLmZpbHRlcmFibGUubWVzc2FnZXMpLHUuZW5hYmxlZD09PSExKXtjLmh0bWwoXCImbmJzcDtcIik7Y29udGludWV9dS5kYXRhU291cmNlJiYobz11LmRhdGFTb3VyY2UsbD0hMCksYS5maWx0ZXJhYmxlJiZhLmZpbHRlcmFibGUub3BlcmF0b3JzJiYocz1hLmZpbHRlcmFibGUub3BlcmF0b3JzKSxlKFwiPHNwYW4vPlwiKS5hdHRyKHV0LmF0dHIoXCJmaWVsZFwiKSxkKS5rZW5kb0ZpbHRlckNlbGwoe2RhdGFTb3VyY2U6cC5kYXRhU291cmNlLHN1Z2dlc3REYXRhU291cmNlOm8sY3VzdG9tRGF0YVNvdXJjZTpsLGZpZWxkOmQsbWVzc2FnZXM6aCx2YWx1ZXM6YS52YWx1ZXMsdGVtcGxhdGU6dS50ZW1wbGF0ZSxkZWxheTp1LmRlbGF5LGlucHV0V2lkdGg6dS5pbnB1dFdpZHRoLHN1Z2dlc3Rpb25PcGVyYXRvcjp1LnN1Z2dlc3Rpb25PcGVyYXRvcixtaW5MZW5ndGg6dS5taW5MZW5ndGgsZGF0YVRleHRGaWVsZDp1LmRhdGFUZXh0RmllbGQsb3BlcmF0b3I6dS5vcGVyYXRvcixvcGVyYXRvcnM6cyxzaG93T3BlcmF0b3JzOnUuc2hvd09wZXJhdG9yc30pLmFwcGVuZFRvKGMpfWVsc2UgYy5odG1sKFwiJm5ic3A7XCIpfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYT10aGlzLHM9TChhLmNvbHVtbnMpLGw9YS5vcHRpb25zLnNvcnRhYmxlO2lmKGwpe2ZvcihpPU8oYS50aGVhZCkscj0wLG89aS5sZW5ndGg7bz5yO3IrKyllPXNbcl0sZS5zb3J0YWJsZSE9PSExJiYhZS5jb21tYW5kJiZlLmZpZWxkJiYobj1pLmVxKHIpLHQ9bi5kYXRhKFwia2VuZG9Db2x1bW5Tb3J0ZXJcIiksdCYmdC5kZXN0cm95KCksbi5hdHRyKFwiZGF0YS1cIit1dC5ucytcImZpZWxkXCIsZS5maWVsZCkua2VuZG9Db2x1bW5Tb3J0ZXIod3Qoe30sbCxlLnNvcnRhYmxlLHtkYXRhU291cmNlOmEuZGF0YVNvdXJjZSxhcmlhOiEwLGZpbHRlcjpcIjpub3QoLmstY29sdW1uLWFjdGl2ZSlcIn0pKSk7aT1udWxsfX0sX2NvbHVtbnM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89dGhpcyxhPW8udGFibGUscz1hLmZpbmQoXCJjb2xcIiksbD1vLm9wdGlvbnMuZGF0YVNvdXJjZTtpZih0PXQubGVuZ3RoP3Q6YnQoYS5maW5kKFwidGhcIiksZnVuY3Rpb24odCxuKXt0PWUodCk7dmFyIGk9dC5hdHRyKHV0LmF0dHIoXCJzb3J0YWJsZVwiKSkscj10LmF0dHIodXQuYXR0cihcImZpbHRlcmFibGVcIikpLG89dC5hdHRyKHV0LmF0dHIoXCJ0eXBlXCIpKSxhPXQuYXR0cih1dC5hdHRyKFwiZ3JvdXBhYmxlXCIpKSxsPXQuYXR0cih1dC5hdHRyKFwiZmllbGRcIikpLGM9dC5hdHRyKHV0LmF0dHIoXCJtZW51XCIpKTtyZXR1cm4gbHx8KGw9dC50ZXh0KCkucmVwbGFjZSgvXFxzfFteQS16MC05XS9nLFwiXCIpKSx7ZmllbGQ6bCx0eXBlOm8sc29ydGFibGU6XCJmYWxzZVwiIT09aSxmaWx0ZXJhYmxlOlwiZmFsc2VcIiE9PXIsZ3JvdXBhYmxlOlwiZmFsc2VcIiE9PWEsbWVudTpjLHRlbXBsYXRlOnQuYXR0cih1dC5hdHRyKFwidGVtcGxhdGVcIikpLHdpZHRoOnMuZXEobikuY3NzKFwid2lkdGhcIil9fSksbj0hKG8udGFibGUuZmluZChcInRib2R5IHRyXCIpLmxlbmd0aD4wJiYoIWx8fCFsLnRyYW5zcG9ydCkpLG8ub3B0aW9ucy5zY3JvbGxhYmxlKXtpZihyPXQsaT1JKHQpLHQ9eih0KSxpLmxlbmd0aD4wJiYwPT09dC5sZW5ndGgpdGhyb3cgRXJyb3IoXCJUaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIG5vbiBsb2NrZWQgY29sdW1uc1wiKTtHKG8uZWxlbWVudC5maW5kKFwidHI6aGFzKHRoKTpmaXJzdFwiKS5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpXCIpLHIpLHQ9aS5jb25jYXQodCl9by5jb2x1bW5zPWModCxuKX0sX2dyb3VwczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YVNvdXJjZS5ncm91cCgpO3JldHVybiBlP2UubGVuZ3RoOjB9LF90bXBsOmZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBhLHMsbCxjLGQ9dGhpcyx1PXd0KHt9LHV0LlRlbXBsYXRlLGQub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxoPXQubGVuZ3RoLHA9e3N0b3JhZ2U6e30sY291bnQ6MH0sZj1kLl9oYXNEZXRhaWxzKCksZz1bXSxtPWQuX2dyb3VwcygpO2lmKCFlKXtmb3IoZT1cIjx0clwiLHImJmcucHVzaChcImstYWx0XCIpLGYmJmcucHVzaChcImstbWFzdGVyLXJvd1wiKSxnLmxlbmd0aCYmKGUrPScgY2xhc3M9XCInK2cuam9pbihcIiBcIikrJ1wiJyksaCYmKGUrPVwiIFwiK3V0LmF0dHIoXCJ1aWRcIikrJz1cIiM9Jyt1dC5leHByKFwidWlkXCIsdS5wYXJhbU5hbWUpKycjXCInKSxlKz1cIiByb2xlPSdyb3cnPlwiLG0+MCYmIW8mJihlKz1uKG0pKSxmJiYoZSs9Jzx0ZCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj48YSBjbGFzcz1cImstaWNvbiBrLXBsdXNcIiBocmVmPVwiXFxcXCNcIiB0YWJpbmRleD1cIi0xXCI+PC9hPjwvdGQ+JyksYT0wO2g+YTthKyspbD10W2FdLHM9bC50ZW1wbGF0ZSxjPXR5cGVvZiBzLGUrPVwiPHRkXCIraShsLmF0dHJpYnV0ZXMpK1wiIHJvbGU9J2dyaWRjZWxsJz5cIixlKz1kLl9jZWxsVG1wbChsLHApLGUrPVwiPC90ZD5cIjtlKz1cIjwvdHI+XCJ9cmV0dXJuIGU9dXQudGVtcGxhdGUoZSx1KSxwLmNvdW50PjA/VHQoZSxwLnN0b3JhZ2UpOmV9LF9oZWFkZXJDZWxsVGV4dDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49d3Qoe30sdXQuVGVtcGxhdGUsdC5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLGk9ZS5oZWFkZXJUZW1wbGF0ZSxyPXR5cGVvZiBpLG89ZS50aXRsZXx8ZS5maWVsZHx8XCJcIjtyZXR1cm4gcj09PWxuP289dXQudGVtcGxhdGUoaSxuKSh7fSk6cj09PWNuJiYobz1pKSxvfSxfY2VsbFRtcGw6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXd0KHt9LHV0LlRlbXBsYXRlLHIub3B0aW9ucy50ZW1wbGF0ZVNldHRpbmdzKSxhPWUudGVtcGxhdGUscz1vLnBhcmFtTmFtZSxsPWUuZmllbGQsYz1cIlwiLGQ9ZS5mb3JtYXQsdT10eXBlb2YgYSxoPWUudmFsdWVzO2lmKGUuY29tbWFuZCl7aWYoeHQoZS5jb21tYW5kKSl7Zm9yKG49MCxpPWUuY29tbWFuZC5sZW5ndGg7aT5uO24rKyljKz1yLl9jcmVhdGVCdXR0b24oZS5jb21tYW5kW25dKTtyZXR1cm4gYy5yZXBsYWNlKGZuLFwiXFxcXCNcIil9cmV0dXJuIHIuX2NyZWF0ZUJ1dHRvbihlLmNvbW1hbmQpLnJlcGxhY2UoZm4sXCJcXFxcI1wiKX1yZXR1cm4gdT09PWxuPyh0LnN0b3JhZ2VbXCJ0bXBsXCIrdC5jb3VudF09YSxjKz1cIiM9dGhpcy50bXBsXCIrdC5jb3VudCtcIihcIitzK1wiKSNcIix0LmNvdW50KyspOnU9PT1jbj9jKz1hOmgmJmgubGVuZ3RoJiZ5dChoWzBdKSYmXCJ2YWx1ZVwiaW4gaFswXSYmbD8oYys9XCIjdmFyIHYgPVwiK3V0LnN0cmluZ2lmeShxKGgpKS5yZXBsYWNlKGZuLFwiXFxcXCNcIikrXCIjXCIsYys9XCIjdmFyIGYgPSB2W1wiLG8udXNlV2l0aEJsb2NrfHwoYys9cytcIi5cIiksYys9bCtcIl0jXCIsYys9XCIke2YgIT0gbnVsbCA/IGYgOiAnJ31cIik6KGMrPWUuZW5jb2RlZD9cIiM6XCI6XCIjPVwiLGQmJihjKz0na2VuZG8uZm9ybWF0KFwiJytkLnJlcGxhY2UocG4sXCJcXFxcJDFcIikrJ1wiLCcpLGw/KGw9dXQuZXhwcihsLHMpLGMrPWwrXCI9PW51bGw/Jyc6XCIrbCk6Yys9XCInJ1wiLGQmJihjKz1cIilcIiksYys9XCIjXCIpLGN9LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC5kYXRhU291cmNlLHI9aS5ncm91cCgpLG89dC5mb290ZXJ8fHQud3JhcHBlci5maW5kKFwiLmstZ3JpZC1mb290ZXJcIiksYT1pLmFnZ3JlZ2F0ZSgpLHM9TCh0LmNvbHVtbnMpLGw9TChJKHQuY29sdW1ucykpLGM9bi5zY3JvbGxhYmxlP0woeih0LmNvbHVtbnMpKTpzO2lmKG4uc2Nyb2xsYWJsZSYmbC5sZW5ndGgpe2lmKG4ucm93VGVtcGxhdGV8fG4uYWx0Um93VGVtcGxhdGUpdGhyb3cgRXJyb3IoXCJIYXZpbmcgYm90aCByb3cgdGVtcGxhdGUgYW5kIGxvY2tlZCBjb2x1bW5zIGlzIG5vdCBzdXBwb3J0ZWRcIik7dC5yb3dUZW1wbGF0ZT10Ll90bXBsKG4ucm93VGVtcGxhdGUsYywhMSwhMCksdC5hbHRSb3dUZW1wbGF0ZT10Ll90bXBsKG4uYWx0Um93VGVtcGxhdGV8fG4ucm93VGVtcGxhdGUsYywhMCwhMCksdC5sb2NrZWRSb3dUZW1wbGF0ZT10Ll90bXBsKG4ucm93VGVtcGxhdGUsbCksdC5sb2NrZWRBbHRSb3dUZW1wbGF0ZT10Ll90bXBsKG4uYWx0Um93VGVtcGxhdGV8fG4ucm93VGVtcGxhdGUsbCwhMCl9ZWxzZSB0LnJvd1RlbXBsYXRlPXQuX3RtcGwobi5yb3dUZW1wbGF0ZSxjKSx0LmFsdFJvd1RlbXBsYXRlPXQuX3RtcGwobi5hbHRSb3dUZW1wbGF0ZXx8bi5yb3dUZW1wbGF0ZSxjLCEwKTtcbnQuX2hhc0RldGFpbHMoKSYmKHQuZGV0YWlsVGVtcGxhdGU9dC5fZGV0YWlsVG1wbChuLmRldGFpbFRlbXBsYXRlfHxcIlwiKSksKHQuX2dyb3VwJiYhQXQoYSl8fCFBdChhKSYmIW8ubGVuZ3RofHxrdChzLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZvb3RlclRlbXBsYXRlfSkubGVuZ3RoKSYmKHQuZm9vdGVyVGVtcGxhdGU9dC5fZm9vdGVyVG1wbChzLGEsXCJmb290ZXJUZW1wbGF0ZVwiLFwiay1mb290ZXItdGVtcGxhdGVcIikpLHImJmt0KHMsZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXBGb290ZXJUZW1wbGF0ZX0pLmxlbmd0aCYmKGE9ZS5tYXAocixmdW5jdGlvbihlKXtyZXR1cm4gZS5hZ2dyZWdhdGVzfSksdC5ncm91cEZvb3RlclRlbXBsYXRlPXQuX2Zvb3RlclRtcGwoYyxhLFwiZ3JvdXBGb290ZXJUZW1wbGF0ZVwiLFwiay1ncm91cC1mb290ZXJcIixsLmxlbmd0aCksbi5zY3JvbGxhYmxlJiZsLmxlbmd0aCYmKHQubG9ja2VkR3JvdXBGb290ZXJUZW1wbGF0ZT10Ll9mb290ZXJUbXBsKGwsYSxcImdyb3VwRm9vdGVyVGVtcGxhdGVcIixcImstZ3JvdXAtZm9vdGVyXCIpKSl9LF9mb290ZXJUbXBsOmZ1bmN0aW9uKGUsdCxyLGEscyl7dmFyIGwsYyxkLHUsaCxwPXRoaXMsZj13dCh7fSx1dC5UZW1wbGF0ZSxwLm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksZz1mLnBhcmFtTmFtZSxtPVwiXCIsdj17fSxfPTAseT17fSx3PXAuX2dyb3VwcygpLGI9byh0KTtmb3IobSs9Jzx0ciBjbGFzcz1cIicrYSsnXCI+Jyx3PjAmJiFzJiYobSs9bih3KSkscC5faGFzRGV0YWlscygpJiYobSs9Jzx0ZCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RkPicpLGw9MCxjPWUubGVuZ3RoO2M+bDtsKyspaD1lW2xdLGQ9aFtyXSx1PXR5cGVvZiBkLG0rPVwiPHRkXCIraShoLmZvb3RlckF0dHJpYnV0ZXMpK1wiPlwiLGQ/KHUhPT1sbiYmKHk9YltoLmZpZWxkXT93dCh7fSxmLHtwYXJhbU5hbWU6ZytcIlsnXCIraC5maWVsZCtcIiddXCJ9KTp7fSxkPXV0LnRlbXBsYXRlKGQseSkpLHZbXCJ0bXBsXCIrX109ZCxtKz1cIiM9dGhpcy50bXBsXCIrXytcIihcIitnK1wiKSNcIixfKyspOm0rPVwiJm5ic3A7XCIsbSs9XCI8L3RkPlwiO3JldHVybiBtKz1cIjwvdHI+XCIsbT11dC50ZW1wbGF0ZShtLGYpLF8+MD9UdChtLHYpOm19LF9kZXRhaWxUbXBsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT1cIlwiLHI9d3Qoe30sdXQuVGVtcGxhdGUsdC5vcHRpb25zLnRlbXBsYXRlU2V0dGluZ3MpLG89ci5wYXJhbU5hbWUsYT17fSxzPTAsbD10Ll9ncm91cHMoKSxjPWYoTCh0LmNvbHVtbnMpKS5sZW5ndGgsZD10eXBlb2YgZTtyZXR1cm4gaSs9Jzx0ciBjbGFzcz1cImstZGV0YWlsLXJvd1wiPicsbD4wJiYoaSs9bihsKSksaSs9Jzx0ZCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj48L3RkPjx0ZCBjbGFzcz1cImstZGV0YWlsLWNlbGxcIicrKGM/JyBjb2xzcGFuPVwiJytjKydcIic6XCJcIikrXCI+XCIsZD09PWxuPyhhW1widG1wbFwiK3NdPWUsaSs9XCIjPXRoaXMudG1wbFwiK3MrXCIoXCIrbytcIikjXCIscysrKTppKz1lLGkrPVwiPC90ZD48L3RyPlwiLGk9dXQudGVtcGxhdGUoaSxyKSxzPjA/VHQoaSxhKTppfSxfaGFzRGV0YWlsczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG51bGwhPT1lLm9wdGlvbnMuZGV0YWlsVGVtcGxhdGV8fChlLl9ldmVudHNbVXRdfHxbXSkubGVuZ3RofSxfaGFzRmlsdGVyUm93OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmZpbHRlcmFibGUsbj10JiZ0eXBlb2YgdC5tb2RlPT1jbiYmLTEhPXQubW9kZS5pbmRleE9mKFwicm93XCIpLGk9dGhpcy5jb2x1bW5zLHI9ZS5ncmVwKGksZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVyYWJsZT09PSExfSk7cmV0dXJuIGkubGVuZ3RoJiZyLmxlbmd0aD09aS5sZW5ndGgmJihuPSExKSxufSxfZGV0YWlsczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodC5vcHRpb25zLnNjcm9sbGFibGUmJnQuX2hhc0RldGFpbHMoKSYmSSh0LmNvbHVtbnMpLmxlbmd0aCl0aHJvdyBFcnJvcihcIkhhdmluZyBib3RoIGRldGFpbCB0ZW1wbGF0ZSBhbmQgbG9ja2VkIGNvbHVtbnMgaXMgbm90IHN1cHBvcnRlZFwiKTt0LnRhYmxlLm9uKG9uK090LFwiLmstaGllcmFyY2h5LWNlbGwgLmstcGx1cywgLmstaGllcmFyY2h5LWNlbGwgLmstbWludXNcIixmdW5jdGlvbihuKXt2YXIgaSxyLG89ZSh0aGlzKSxhPW8uaGFzQ2xhc3MoXCJrLXBsdXNcIikscz1vLmNsb3Nlc3QoXCJ0ci5rLW1hc3Rlci1yb3dcIiksbD10LmRldGFpbFRlbXBsYXRlLGM9dC5faGFzRGV0YWlscygpO3JldHVybiBvLnRvZ2dsZUNsYXNzKFwiay1wbHVzXCIsIWEpLnRvZ2dsZUNsYXNzKFwiay1taW51c1wiLGEpLGk9cy5uZXh0KCksYyYmIWkuaGFzQ2xhc3MoXCJrLWRldGFpbC1yb3dcIikmJihyPXQuZGF0YUl0ZW0ocyksaT1lKGwocikpLmFkZENsYXNzKHMuaGFzQ2xhc3MoXCJrLWFsdFwiKT9cImstYWx0XCI6XCJcIikuaW5zZXJ0QWZ0ZXIocyksdC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmkuZ2V0KCksZGF0YTpbe2RhdGFJdGVtOnJ9XX19KSx0LnRyaWdnZXIoVXQse21hc3RlclJvdzpzLGRldGFpbFJvdzppLGRhdGE6cixkZXRhaWxDZWxsOmkuZmluZChcIi5rLWRldGFpbC1jZWxsXCIpfSkpLHQudHJpZ2dlcihhP1F0Olh0LHttYXN0ZXJSb3c6cyxkZXRhaWxSb3c6aX0pLGkudG9nZ2xlKGEpLHQuX2N1cnJlbnQmJnQuX2N1cnJlbnQuYXR0cihcImFyaWEtZXhwYW5kZWRcIixhKSxuLnByZXZlbnREZWZhdWx0KCksITF9KX0sZGF0YUl0ZW06ZnVuY3Rpb24odCl7aWYodD1lKHQpWzBdLCF0KXJldHVybiBudWxsO3ZhciBuLGkscj10aGlzLnRib2R5LmNoaWxkcmVuKCksbz0vay1ncm91cGluZy1yb3d8ay1kZXRhaWwtcm93fGstZ3JvdXAtZm9vdGVyLyxhPXQuc2VjdGlvblJvd0luZGV4O2ZvcihpPWEsbj0wO2E+bjtuKyspby50ZXN0KHJbbl0uY2xhc3NOYW1lKSYmaS0tO3JldHVybiB0aGlzLl9kYXRhW2ldfSxleHBhbmRSb3c6ZnVuY3Rpb24odCl7ZSh0KS5maW5kKFwiPiB0ZCAuay1wbHVzLCA+IHRkIC5rLWktZXhwYW5kXCIpLmNsaWNrKCl9LGNvbGxhcHNlUm93OmZ1bmN0aW9uKHQpe2UodCkuZmluZChcIj4gdGQgLmstbWludXMsID4gdGQgLmstaS1jb2xsYXBzZVwiKS5jbGljaygpfSxfY3JlYXRlSGVhZGVyQ2VsbHM6ZnVuY3Rpb24oZSxuKXt2YXIgcixvLGEscyxsLGM9dGhpcyxkPVwiXCIsdT1MKGMuY29sdW1ucyk7Zm9yKHI9MCxzPWUubGVuZ3RoO3M+cjtyKyspbz1lW3JdLmNvbHVtbnx8ZVtyXSxhPWMuX2hlYWRlckNlbGxUZXh0KG8pLGw9Q3Qobyx1KSxvLmNvbW1hbmQ/KGQrPVwiPHRoXCIraShvLmhlYWRlckF0dHJpYnV0ZXMpLG4mJiFlW3JdLmNvbFNwYW4mJihkKz1cIiByb3dzcGFuPSdcIituK1wiJ1wiKSxsPi0xJiYoZCs9dXQuYXR0cihcImluZGV4XCIpK1wiPSdcIitsK1wiJ1wiKSxkKz1cIj5cIithK1wiPC90aD5cIik6KGQrPVwiPHRoIHJvbGU9J2NvbHVtbmhlYWRlcicgXCIrdXQuYXR0cihcImZpZWxkXCIpK1wiPSdcIisoby5maWVsZHx8XCJcIikrXCInIFwiLG4mJiFlW3JdLmNvbFNwYW4mJihkKz1cIiByb3dzcGFuPSdcIituK1wiJ1wiKSxlW3JdLmNvbFNwYW4+MSYmKGQrPSdjb2xzcGFuPVwiJysoZVtyXS5jb2xTcGFuLVQoby5jb2x1bW5zKSkrJ1wiICcsZCs9dXQuYXR0cihcImNvbHNwYW5cIikrXCI9J1wiK2Vbcl0uY29sU3BhbitcIidcIiksby50aXRsZSYmKGQrPXV0LmF0dHIoXCJ0aXRsZVwiKSsnPVwiJytvLnRpdGxlLnJlcGxhY2UoLycvZyxcIidcIikrJ1wiICcpLG8uZ3JvdXBhYmxlIT09dCYmKGQrPXV0LmF0dHIoXCJncm91cGFibGVcIikrXCI9J1wiK28uZ3JvdXBhYmxlK1wiJyBcIiksby5hZ2dyZWdhdGVzJiZvLmFnZ3JlZ2F0ZXMubGVuZ3RoJiYoZCs9dXQuYXR0cihcImFnZ3JlZ2F0ZXNcIikrXCI9J1wiK28uYWdncmVnYXRlcytcIidcIiksbD4tMSYmKGQrPXV0LmF0dHIoXCJpbmRleFwiKStcIj0nXCIrbCtcIidcIiksZCs9aShvLmhlYWRlckF0dHJpYnV0ZXMpLGQrPVwiPlwiK2ErXCI8L3RoPlwiKTtyZXR1cm4gZH0sX2FwcGVuZExvY2tlZENvbHVtbkNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvLGE9dGhpcy5jb2x1bW5zLHM9dGhpcy50YWJsZS5maW5kKFwiY29sZ3JvdXBcIiksbD1zLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCwuay1oaWVyYXJjaHktY29sKVwiKSxjPWUoKSxkPTAsdT0wO2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKWlmKGFbdF0ubG9ja2VkKWlmKHAoYVt0XSkpe2ZvcihyPTEsYVt0XS5jb2x1bW5zJiYocj1MKGFbdF0uY29sdW1ucykubGVuZ3RoLVQoYVt0XS5jb2x1bW5zKSkscj1yfHwxLG89MDtyPm87bysrKWM9Yy5hZGQobC5lcSh0K3Urby1kKSk7dSs9ci0xfWVsc2UgZCsrO2k9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1jb250ZW50LWxvY2tlZFwiPjx0YWJsZScrKGJuPycgY2VsbHNwYWNpbmc9XCIwXCInOlwiXCIpK1wiPjxjb2xncm91cC8+PHRib2R5PjwvdGJvZHk+PC90YWJsZT48L2Rpdj5cIikscy5kZXRhY2goKSxpLmZpbmQoXCJjb2xncm91cFwiKS5hcHBlbmQoYykscy5pbnNlcnRCZWZvcmUodGhpcy50YWJsZS5maW5kKFwidGJvZHlcIikpLHRoaXMubG9ja2VkQ29udGVudD1pLmluc2VydEJlZm9yZSh0aGlzLmNvbnRlbnQpLHRoaXMubG9ja2VkVGFibGU9aS5jaGlsZHJlbihcInRhYmxlXCIpfSxfYXBwZW5kTG9ja2VkQ29sdW1uRm9vdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMscj1pLmZvb3RlcixvPXIuZmluZChcIi5rLWZvb3Rlci10ZW1wbGF0ZT50ZFwiKSxhPXIuZmluZChcIi5rLWdyaWQtZm9vdGVyLXdyYXA+dGFibGU+Y29sZ3JvdXA+Y29sXCIpLHM9ZSgnPGRpdiBjbGFzcz1cImstZ3JpZC1mb290ZXItbG9ja2VkXCI+PHRhYmxlPjxjb2xncm91cCAvPjx0Ym9keT48dHIgY2xhc3M9XCJrLWZvb3Rlci10ZW1wbGF0ZVwiPjwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PicpLGw9aS5fZ3JvdXBzKCksYz1lKCksZD1lKCk7Zm9yKGM9Yy5hZGQoby5maWx0ZXIoXCIuay1ncm91cC1jZWxsXCIpKSx0PTAsbj1MKEkoaS5jb2x1bW5zKSkubGVuZ3RoO24+dDt0KyspYz1jLmFkZChvLmVxKHQrbCkpO2ZvcihkPWQuYWRkKGEuZmlsdGVyKFwiLmstZ3JvdXAtY29sXCIpKSx0PTAsbj1MKFIoaS5jb2x1bW5zKSkubGVuZ3RoO24+dDt0KyspZD1kLmFkZChhLmVxKHQrbCkpO2MuYXBwZW5kVG8ocy5maW5kKFwidHJcIikpLGQuYXBwZW5kVG8ocy5maW5kKFwiY29sZ3JvdXBcIikpLGkubG9ja2VkRm9vdGVyPXMucHJlcGVuZFRvKHIpfSxfYXBwZW5kTG9ja2VkQ29sdW1uSGVhZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGgsZj10aGlzLG09dGhpcy5jb2x1bW5zLHY9W10sXz0wLHk9ZSgpLHc9Zi5faGFzRmlsdGVyUm93KCksYj0wLGs9ZSgpLHg9MCxDPWUoKSxTPWYudGhlYWQucHJldigpLmZpbmQoXCJjb2w6bm90KC5rLWdyb3VwLWNvbCwuay1oaWVyYXJjaHktY29sKVwiKSxEPWYudGhlYWQuZmluZChcInRyOmZpcnN0IC5rLWhlYWRlcjpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksRT1mLnRoZWFkLmZpbmQoXCIuay1maWx0ZXItcm93XCIpLmZpbmQoXCJ0aDpub3QoLmstZ3JvdXAtY2VsbCwuay1oaWVyYXJjaHktY2VsbClcIiksST0wO2ZvcihuPTAscj1tLmxlbmd0aDtyPm47bisrKXtpZihtW25dLmxvY2tlZCl7aWYobD1ELmVxKG4pLHg9TChtW25dLmNvbHVtbnN8fFtdKS5sZW5ndGgscChtW25dKSl7Zm9yKG1bbl0uY29sdW1ucyYmKGM9eC1UKG1bbl0uY29sdW1ucykpLGM9Y3x8MSxkPTA7Yz5kO2QrKyl5PXkuYWRkKFMuZXEobitJK2QtXykpO0krPWMtMX1mb3IoUChbbVtuXV0sTihsKSx2LDAsMCkseD14fHwxLHU9MDt4PnU7dSsrKWs9ay5hZGQoRS5lcShiK3UpKTtiKz14fW1bbl0uY29sdW1ucyYmKF8rPVQobVtuXS5jb2x1bW5zKSkscChtW25dKXx8XysrfWlmKHYubGVuZ3RoKXtmb3IoaT0nPGRpdiBjbGFzcz1cImstZ3JpZC1oZWFkZXItbG9ja2VkXCIgc3R5bGU9XCJ3aWR0aDoxcHhcIj48dGFibGUnKyhibj8nIGNlbGxzcGFjaW5nPVwiMFwiJzpcIlwiKStcIj48Y29sZ3JvdXAvPjx0aGVhZD5cIixpKz1BcnJheSh2Lmxlbmd0aCsxKS5qb2luKFwiPHRyPjwvdHI+XCIpLGkrPSh3Pyc8dHIgY2xhc3M9XCJrLWZpbHRlci1yb3dcIiAvPic6XCJcIikrXCI8L3RoZWFkPjwvdGFibGU+PC9kaXY+XCIscz1lKGkpLFM9cy5maW5kKFwiY29sZ3JvdXBcIiksUy5hcHBlbmQoZi50aGVhZC5wcmV2KCkuZmluZChcImNvbC5rLWdyb3VwLWNvbFwiKS5hZGQoeSkpLG89cy5maW5kKFwidGhlYWQgdHI6bm90KC5rLWZpbHRlci1yb3cpXCIpLG49MCxyPXYubGVuZ3RoO3I+bjtuKyspQz1nKHZbbl0pLG8uZXEobikuYXBwZW5kKGYudGhlYWQuZmluZChcInRyOmVxKFwiK24rXCIpIC5rLWdyb3VwLWNlbGxcIikuYWRkKEMpKTtoPU0odGhpcy50aGVhZCksaD52Lmxlbmd0aCYmQShzLGgpLGE9cy5maW5kKFwiLmstZmlsdGVyLXJvd1wiKSxhLmFwcGVuZChmLnRoZWFkLmZpbmQoXCIuay1maWx0ZXItcm93IC5rLWdyb3VwLWNlbGxcIikuYWRkKGspKSx0aGlzLmxvY2tlZEhlYWRlcj1zLnByZXBlbmRUbyh0KSx0aGlzLl9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCl9fSxfcmVtb3ZlTG9ja2VkQ29udGFpbmVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMubG9ja2VkSGVhZGVyLmFkZCh0aGlzLmxvY2tlZENvbnRlbnQpLmFkZCh0aGlzLmxvY2tlZEZvb3Rlcik7dXQuZGVzdHJveShlKSxlLm9mZihPdCkucmVtb3ZlKCksdGhpcy5sb2NrZWRIZWFkZXI9dGhpcy5sb2NrZWRDb250ZW50PXRoaXMubG9ja2VkRm9vdGVyPW51bGwsdGhpcy5zZWxlY3RhYmxlPW51bGx9LF90aGVhZDpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG89dGhpcyxhPW8uY29sdW1ucyxzPW8uX2hhc0RldGFpbHMoKSYmYS5sZW5ndGgsbD1vLl9oYXNGaWx0ZXJSb3coKSxjPVwiXCIsZD1vLnRhYmxlLmZpbmQoXCI+dGhlYWRcIiksdT1vLmVsZW1lbnQuZmluZChcInRoZWFkOmZpcnN0XCIpLmxlbmd0aD4wO2lmKGQubGVuZ3RofHwoZD1lKFwiPHRoZWFkLz5cIikuaW5zZXJ0QmVmb3JlKG8udGJvZHkpKSxvLmxvY2tlZEhlYWRlciYmby50aGVhZD8obj1vLnRoZWFkLmZpbmQoXCJ0cjpoYXModGgpOm5vdCguay1maWx0ZXItcm93KVwiKS5odG1sKFwiXCIpLG8uX3JlbW92ZUxvY2tlZENvbnRhaW5lcnMoKSk6bj1vLmVsZW1lbnQuZmluZCh1P1widGhlYWQ6Zmlyc3QgdHI6aGFzKHRoKTpub3QoLmstZmlsdGVyLXJvdylcIjpcInRyOmhhcyh0aCk6Zmlyc3RcIiksIW4ubGVuZ3RoJiYobj1kLmNoaWxkcmVuKCkuZmlyc3QoKSwhbi5sZW5ndGgpKXtmb3IoaT1be3Jvd1NwYW46MSxjZWxsczpbXSxpbmRleDowfV0sby5fcHJlcGFyZUNvbHVtbnMoaSxhKSx0PTA7aS5sZW5ndGg+dDt0KyspYys9XCI8dHI+XCIscyYmKGMrPSc8dGggY2xhc3M9XCJrLWhpZXJhcmNoeS1jZWxsXCI+Jm5ic3A7PC90aD4nKSxjKz1vLl9jcmVhdGVIZWFkZXJDZWxscyhpW3RdLmNlbGxzLGlbdF0ucm93U3BhbiksYys9XCI8L3RyPlwiO249ZShjKX1sJiYocj1lKFwiPHRyLz5cIiksci5hZGRDbGFzcyhcImstZmlsdGVyLXJvd1wiKSxzJiZyLnByZXBlbmQoJzx0aCBjbGFzcz1cImstaGllcmFyY2h5LWNlbGxcIj4mbmJzcDs8L3RoPicpLGQuYXBwZW5kKHIpKSxuLmNoaWxkcmVuKCkubGVuZ3RoP3MmJiFuLmZpbmQoXCIuay1oaWVyYXJjaHktY2VsbFwiKVswXSYmbi5wcmVwZW5kKCc8dGggY2xhc3M9XCJrLWhpZXJhcmNoeS1jZWxsXCI+Jm5ic3A7PC90aD4nKTooYz1cIlwiLHMmJihjKz0nPHRoIGNsYXNzPVwiay1oaWVyYXJjaHktY2VsbFwiPiZuYnNwOzwvdGg+JyksYys9by5fY3JlYXRlSGVhZGVyQ2VsbHMoYSksbi5odG1sKGMpKSxuLmF0dHIoXCJyb2xlXCIsXCJyb3dcIikuZmluZChcInRoXCIpLmFkZENsYXNzKFwiay1oZWFkZXJcIiksby5vcHRpb25zLnNjcm9sbGFibGV8fGQuYWRkQ2xhc3MoXCJrLWdyaWQtaGVhZGVyXCIpLG4uZmluZChcInNjcmlwdFwiKS5yZW1vdmUoKS5lbmQoKS5wcmVwZW5kVG8oZCksby50aGVhZCYmby5fZGVzdHJveUNvbHVtbkF0dGFjaG1lbnRzKCksdGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmQuZmluZChcInRoXCIpLmdldCgpfX0pLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpkLmZpbmQoXCJ0aFwiKS5nZXQoKSxkYXRhOmJ0KGEsZnVuY3Rpb24oZSl7cmV0dXJue2NvbHVtbjplfX0pfX0pLG8udGhlYWQ9ZC5hdHRyKFwicm9sZVwiLFwicm93Z3JvdXBcIiksby5fc29ydGFibGUoKSxvLl9maWx0ZXJhYmxlKCksby5fZmlsdGVyUm93KCksby5fc2Nyb2xsYWJsZSgpLG8uX3VwZGF0ZUNvbHMoKSxvLl9jb2x1bW5NZW51KCksdGhpcy5vcHRpb25zLnNjcm9sbGFibGUmJkkodGhpcy5jb2x1bW5zKS5sZW5ndGgmJihvLl9hcHBlbmRMb2NrZWRDb2x1bW5IZWFkZXIoby50aGVhZC5jbG9zZXN0KFwiLmstZ3JpZC1oZWFkZXJcIikpLG8uX2FwcGVuZExvY2tlZENvbHVtbkNvbnRlbnQoKSxvLmxvY2tlZENvbnRlbnQuYmluZChcIkRPTU1vdXNlU2Nyb2xsXCIrT3QrXCIgbW91c2V3aGVlbFwiK090LFR0KG8uX3doZWVsU2Nyb2xsLG8pKSxvLl9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpKSxvLl91cGRhdGVGaXJzdENvbHVtbkNsYXNzKCksby5fcmVzaXphYmxlKCksby5fZHJhZ2dhYmxlKCksby5fcmVvcmRlcmFibGUoKSxvLmdyb3VwYWJsZSYmby5fYXR0YWNoR3JvdXBhYmxlKCl9LF91cGRhdGVGaXJzdENvbHVtbkNsYXNzOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXMscj1pLmNvbHVtbnN8fFtdLG89aS5faGFzRGV0YWlscygpJiZyLmxlbmd0aDtvfHxpLl9ncm91cHMoKXx8KHQ9ZSgpLG49aS50aGVhZC5maW5kKFwiPnRyOm5vdCguay1maWx0ZXItcm93KTpub3QoOmZpcnN0KVwiKSxyPXoociksbi5sZW5ndGgmJnJbMF0mJiFyWzBdLmNvbHVtbnMmJih0PXQuYWRkKG4pKSxpLl9pc0xvY2tlZCgpJiYobj1pLmxvY2tlZEhlYWRlci5maW5kKFwidGhlYWQ+dHI6bm90KC5rLWZpbHRlci1yb3cpOm5vdCg6Zmlyc3QpXCIpLHI9SShpLmNvbHVtbnMpLG4ubGVuZ3RoJiZyWzBdJiYhclswXS5jb2x1bW5zJiYodD10LmFkZChuKSkpLHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZmluZChcInRoXCIpO3QucmVtb3ZlQ2xhc3MoXCJrLWZpcnN0XCIpLHQuZXEoMCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpfSkpfSxfcHJlcGFyZUNvbHVtbnM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhPWl8fGVbZS5sZW5ndGgtMV0scz1lW2EuaW5kZXgrMV0sbD0wO2ZvcihyPTA7dC5sZW5ndGg+cjtyKyspbz17Y29sdW1uOnRbcl0sY29sU3BhbjowfSxhLmNlbGxzLnB1c2gobyksdFtyXS5jb2x1bW5zJiZ0W3JdLmNvbHVtbnMubGVuZ3RoJiYoc3x8KHM9e3Jvd1NwYW46MCxjZWxsczpbXSxpbmRleDplLmxlbmd0aH0sZS5wdXNoKHMpKSxvLmNvbFNwYW49dFtyXS5jb2x1bW5zLmxlbmd0aCx0aGlzLl9wcmVwYXJlQ29sdW1ucyhlLHRbcl0uY29sdW1ucyxvLHMpLGwrPW8uY29sU3Bhbi0xLGEucm93U3Bhbj1lLmxlbmd0aC1hLmluZGV4KTtuJiYobi5jb2xTcGFuKz1sKX0sX3doZWVsU2Nyb2xsOmZ1bmN0aW9uKHQpe3ZhciBuLGkscjt0LmN0cmxLZXl8fChuPXRoaXMuY29udGVudCx0aGlzLm9wdGlvbnMuc2Nyb2xsYWJsZS52aXJ0dWFsJiYobj10aGlzLnZpcnR1YWxTY3JvbGxhYmxlLnZlcnRpY2FsU2Nyb2xsYmFyKSxpPW4uc2Nyb2xsVG9wKCkscj11dC53aGVlbERlbHRhWSh0KSxyJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUodC5jdXJyZW50VGFyZ2V0KS5vbmUoXCJ3aGVlbFwiK090LCExKSxuLnNjcm9sbFRvcChpKy1yKSkpfSxfaXNMb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5sb2NrZWRIZWFkZXJ9LF91cGRhdGVDb2xzOmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy50aGVhZC5wYXJlbnQoKS5hZGQodGhpcy50YWJsZSksdGhpcy5fYXBwZW5kQ29scyhlLHRoaXMuX2lzTG9ja2VkKCkpfSxfdXBkYXRlTG9ja2VkQ29sczpmdW5jdGlvbihlKXt0aGlzLl9pc0xvY2tlZCgpJiYoZT1lfHx0aGlzLmxvY2tlZEhlYWRlci5maW5kKFwidGFibGVcIikuYWRkKHRoaXMubG9ja2VkVGFibGUpLGooZSxCKFIodGhpcy5jb2x1bW5zKSksdGhpcy5faGFzRGV0YWlscygpLHRoaXMuX2dyb3VwcygpKSl9LF9hcHBlbmRDb2xzOmZ1bmN0aW9uKGUsdCl7dD9qKGUsQihGKHRoaXMuY29sdW1ucykpLHRoaXMuX2hhc0RldGFpbHMoKSwwKTpqKGUsQihmKHRoaXMuY29sdW1ucykpLHRoaXMuX2hhc0RldGFpbHMoKSx0aGlzLl9ncm91cHMoKSl9LF9hdXRvQ29sdW1uczpmdW5jdGlvbihlKXtpZihlJiZlLnRvSlNPTil7dmFyIHQsbj10aGlzO2U9ZS50b0pTT04oKTtmb3IodCBpbiBlKW4uY29sdW1ucy5wdXNoKHtmaWVsZDp0fSk7bi5fdGhlYWQoKSxuLl90ZW1wbGF0ZXMoKX19LF9yb3dzSHRtbDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLG89XCJcIixhPXQucm93VGVtcGxhdGUscz10LmFsdFJvd1RlbXBsYXRlO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKW8rPW4lMj9zKGVbbl0pOmEoZVtuXSksci5fZGF0YS5wdXNoKGVbbl0pO3JldHVybiBvfSxfZ3JvdXBSb3dIdG1sOmZ1bmN0aW9uKGUsdCxuLGkscixvKXt2YXIgYSxzLGw9dGhpcyxjPVwiXCIsZD1lLmZpZWxkLHU9a3QobC5jb2x1bW5zLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT1kfSlbMF18fHt9LGg9dS5ncm91cEhlYWRlclRlbXBsYXRlLHA9KHUudGl0bGV8fGQpK1wiOiBcIiskKGUudmFsdWUsdS5mb3JtYXQsdS52YWx1ZXMpLGY9bC5fZ3JvdXBBZ2dyZWdhdGVzRGVmYXVsdE9iamVjdHx8e30sZz13dChmLGUuYWdncmVnYXRlcyksbT13dCh7fSx7ZmllbGQ6ZS5maWVsZCx2YWx1ZTplLnZhbHVlLGFnZ3JlZ2F0ZXM6Z30sZS5hZ2dyZWdhdGVzW2UuZmllbGRdKSx2PXIuZ3JvdXBGb290ZXJUZW1wbGF0ZSxfPWUuaXRlbXM7aWYoaCYmKHA9dHlwZW9mIGg9PT1sbj9oKG0pOnV0LnRlbXBsYXRlKGgpKG0pKSxjKz1pKHQsbixwKSxlLmhhc1N1Ymdyb3Vwcylmb3IoYT0wLHM9Xy5sZW5ndGg7cz5hO2ErKyljKz1sLl9ncm91cFJvd0h0bWwoX1thXSxvP3Q6dC0xLG4rMSxpLHIsbyk7ZWxzZSBjKz1sLl9yb3dzSHRtbChfLHIpO3JldHVybiB2JiYoYys9dihnKSksY30sY29sbGFwc2VHcm91cDpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG4saSxyLG8sYSxzPXRoaXMub3B0aW9ucy5ncm91cGFibGUsbD1zLnNob3dGb290ZXIsYz1sPzA6MSxkPWUoKTtmb3IodGhpcy5faXNMb2NrZWQoKSYmKHQuY2xvc2VzdChcImRpdlwiKS5oYXNDbGFzcyhcImstZ3JpZC1jb250ZW50LWxvY2tlZFwiKT9kPXRoaXMudGJvZHkuY2hpbGRyZW4oXCJ0cjplcShcIit0LmluZGV4KCkrXCIpXCIpLm5leHRBbGwoXCJ0clwiKTooZD10Lm5leHRBbGwoXCJ0clwiKSx0PXRoaXMubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50cjplcShcIit0LmluZGV4KCkrXCIpXCIpKSksbj10LmZpbmQoXCIuay1ncm91cC1jZWxsXCIpLmxlbmd0aCx0LmZpbmQoXCIuay1pY29uXCIpLmFkZENsYXNzKFwiay1pLWV4cGFuZFwiKS5yZW1vdmVDbGFzcyhcImstaS1jb2xsYXBzZVwiKSx0LmZpbmQoXCJ0ZDpmaXJzdFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSx0PXQubmV4dEFsbChcInRyXCIpLHI9MCxvPXQubGVuZ3RoO28+ciYmKGE9dC5lcShyKSxpPWEuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLGEuaGFzQ2xhc3MoXCJrLWdyb3VwaW5nLXJvd1wiKT9jKys6YS5oYXNDbGFzcyhcImstZ3JvdXAtZm9vdGVyXCIpJiZjLS0sIShuPj1pfHxhLmhhc0NsYXNzKFwiay1ncm91cC1mb290ZXJcIikmJjA+YykpO3IrKylhLmhpZGUoKSxkLmVxKHIpLmhpZGUoKX0sZXhwYW5kR3JvdXA6ZnVuY3Rpb24odCl7dD1lKHQpO3ZhciBuLGkscixvLGEscz10aGlzLGw9ZSgpLGM9MTtmb3IodGhpcy5faXNMb2NrZWQoKSYmKHQuY2xvc2VzdChcImRpdlwiKS5oYXNDbGFzcyhcImstZ3JpZC1jb250ZW50LWxvY2tlZFwiKT9sPXRoaXMudGJvZHkuY2hpbGRyZW4oXCJ0cjplcShcIit0LmluZGV4KCkrXCIpXCIpLm5leHRBbGwoXCJ0clwiKToobD10Lm5leHRBbGwoXCJ0clwiKSx0PXRoaXMubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50cjplcShcIit0LmluZGV4KCkrXCIpXCIpKSksbj10LmZpbmQoXCIuay1ncm91cC1jZWxsXCIpLmxlbmd0aCx0LmZpbmQoXCIuay1pY29uXCIpLmFkZENsYXNzKFwiay1pLWNvbGxhcHNlXCIpLnJlbW92ZUNsYXNzKFwiay1pLWV4cGFuZFwiKSx0LmZpbmQoXCJ0ZDpmaXJzdFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0PXQubmV4dEFsbChcInRyXCIpLG89MCxhPXQubGVuZ3RoO2E+byYmKGk9dC5lcShvKSxyPWkuZmluZChcIi5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLCEobj49cikpO28rKylyIT1uKzF8fGkuaGFzQ2xhc3MoXCJrLWRldGFpbC1yb3dcIil8fChpLnNob3coKSxsLmVxKG8pLnNob3coKSxpLmhhc0NsYXNzKFwiay1ncm91cGluZy1yb3dcIikmJmkuZmluZChcIi5rLWljb25cIikuaGFzQ2xhc3MoXCJrLWktY29sbGFwc2VcIikmJnMuZXhwYW5kR3JvdXAoaSksaS5oYXNDbGFzcyhcImstbWFzdGVyLXJvd1wiKSYmaS5maW5kKFwiLmstaWNvblwiKS5oYXNDbGFzcyhcImstbWludXNcIikmJihpLm5leHQoKS5zaG93KCksbC5lcShvKzEpLnNob3coKSkpLGkuaGFzQ2xhc3MoXCJrLWdyb3VwaW5nLXJvd1wiKSYmYysrLGkuaGFzQ2xhc3MoXCJrLWdyb3VwLWZvb3RlclwiKSYmKDE9PWM/KGkuc2hvdygpLGwuZXEobykuc2hvdygpKTpjLS0pfSxfdXBkYXRlSGVhZGVyOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLl9pc0xvY2tlZCgpP24ubG9ja2VkSGVhZGVyLmZpbmQoXCJ0aGVhZFwiKTpuLnRoZWFkLHI9aS5maW5kKFwidHIuay1maWx0ZXItcm93XCIpLmZpbmQoXCJ0aC5rLWdyb3VwLWNlbGxcIikubGVuZ3RoLG89aS5maW5kKFwidHI6Zmlyc3RcIikuZmluZChcInRoLmstZ3JvdXAtY2VsbFwiKS5sZW5ndGgsYT1pLmNoaWxkcmVuKFwidHI6bm90KDpmaXJzdClcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuY2hpbGRyZW4oXCI6dmlzaWJsZVwiKS5sZW5ndGh9KTt0Pm8/KGUoQXJyYXkodC1vKzEpLmpvaW4oJzx0aCBjbGFzcz1cImstZ3JvdXAtY2VsbCBrLWhlYWRlclwiPiZuYnNwOzwvdGg+JykpLnByZXBlbmRUbyhpLmNoaWxkcmVuKFwidHI6bm90KC5rLWZpbHRlci1yb3cpXCIpKSxuLmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSYmYS5maW5kKFwidGguay1ncm91cC1jZWxsXCIpLmhpZGUoKSk6bz50JiZpLmZpbmQoXCJ0clwiKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5maW5kKFwidGguay1ncm91cC1jZWxsXCIpLmZpbHRlcihcIjplcShcIit0K1wiKSw6Z3QoXCIrdCtcIilcIikucmVtb3ZlKCl9KSx0PnImJmUoQXJyYXkodC1yKzEpLmpvaW4oJzx0aCBjbGFzcz1cImstZ3JvdXAtY2VsbCBrLWhlYWRlclwiPiZuYnNwOzwvdGg+JykpLnByZXBlbmRUbyhpLmZpbmQoXCIuay1maWx0ZXItcm93XCIpKX0sX2ZpcnN0RGF0YUl0ZW06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmdCYmKGU9ZS5oYXNTdWJncm91cHM/dGhpcy5fZmlyc3REYXRhSXRlbShlLml0ZW1zWzBdLHQpOmUuaXRlbXNbMF0pLGV9LF91cGRhdGVUYWJsZXNXaWR0aDpmdW5jdGlvbigpe3ZhciB0LG49dGhpcztuLl9pc0xvY2tlZCgpJiYodD1lKFwiPi5rLWdyaWQtZm9vdGVyPi5rLWdyaWQtZm9vdGVyLXdyYXA+dGFibGVcIixuLndyYXBwZXIpLmFkZChuLnRoZWFkLnBhcmVudCgpKS5hZGQobi50YWJsZSksbi5fZm9vdGVyV2lkdGg9Sih0LmVxKDApKSx0LndpZHRoKG4uX2Zvb3RlcldpZHRoKSx0PWUoXCI+LmstZ3JpZC1mb290ZXI+LmstZ3JpZC1mb290ZXItbG9ja2VkPnRhYmxlXCIsbi53cmFwcGVyKS5hZGQobi5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZVwiKSkuYWRkKG4ubG9ja2VkVGFibGUpLHQud2lkdGgoSih0LmVxKDApKSkpfSxoaWRlQ29sdW1uOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhLGwsYyxkLHUsZyxtLHY9dGhpcyxfPTAseT12LmZvb3Rlcnx8di53cmFwcGVyLmZpbmQoXCIuay1ncmlkLWZvb3RlclwiKSx3PXYuY29sdW1ucyxiPXYubG9ja2VkSGVhZGVyP08odi5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZT50aGVhZFwiKSkuZmlsdGVyKFwiOnZpc2libGVcIikubGVuZ3RoOjA7aWYobj1cIm51bWJlclwiPT10eXBlb2Ygbj93W25dOnl0KG4pP2t0KFModyksZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1ufSlbMF06a3QoUyh3KSxmdW5jdGlvbihlKXtyZXR1cm4gZS5maWVsZD09PW59KVswXSxuJiZwKG4pKXtpZihuLmNvbHVtbnMmJm4uY29sdW1ucy5sZW5ndGgpe2ZvcihjPXgobix3KSxoKG4sITEpLFkocyhlKFwiPnRhYmxlPnRoZWFkXCIsdi5sb2NrZWRIZWFkZXIpLHYudGhlYWQsXCI+dHI6ZXEoXCIrYy5yb3crXCIpPnRoXCIpLGMuY2VsbCwhMSksbz0wO24uY29sdW1ucy5sZW5ndGg+bztvKyspdGhpcy5oaWRlQ29sdW1uKG4uY29sdW1uc1tvXSk7cmV0dXJuIHYudHJpZ2dlcihxdCx7Y29sdW1uOm59KSx0fWlmKGc9Q3QobixmKEwodykpKSxoKG4sITEpLHYuX3NldFBhcmVudHNWaXNpYmlsaXR5KG4sITEpLHYuX3RlbXBsYXRlcygpLHYuX3VwZGF0ZUNvbHMoKSx2Ll91cGRhdGVMb2NrZWRDb2xzKCksbT12LnRoZWFkLGQ9Zyx2LmxvY2tlZEhlYWRlciYmYj5nP209di5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZT50aGVhZFwiKTpkLT1iLGk9TyhtKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5lcShkKSxpWzBdLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsWShzKGUoXCI+dGFibGU+dGhlYWRcIix2LmxvY2tlZEhlYWRlciksdi50aGVhZCxcIj50ci5rLWZpbHRlci1yb3c+dGhcIiksZywhMSkseVswXSYmKHYuX3VwZGF0ZUNvbHMoeS5maW5kKFwiPi5rLWdyaWQtZm9vdGVyLXdyYXA+dGFibGVcIikpLHYuX3VwZGF0ZUxvY2tlZENvbHMoeS5maW5kKFwiPi5rLWdyaWQtZm9vdGVyLWxvY2tlZD50YWJsZVwiKSksWSh5LmZpbmQoXCIuay1mb290ZXItdGVtcGxhdGU+dGRcIiksZywhMSkpLHYubG9ja2VkVGFibGUmJmI+Zz9LKHYubG9ja2VkVGFibGUuZmluZChcIj50Ym9keT50clwiKSxnKTpLKHYudGJvZHkuY2hpbGRyZW4oKSxnLWIpLHYubG9ja2VkVGFibGUpdi5fdXBkYXRlVGFibGVzV2lkdGgoKSx2Ll9hcHBseUxvY2tlZENvbnRhaW5lcnNXaWR0aCgpLHYuX3N5bmNMb2NrZWRDb250ZW50SGVpZ2h0KCksdi5fc3luY0xvY2tlZEhlYWRlckhlaWdodCgpLHYuX3N5bmNMb2NrZWRGb290ZXJIZWlnaHQoKTtlbHNle2ZvcihhPXYudGhlYWQucHJldigpLmZpbmQoXCJjb2xcIiksbz0wLHU9YS5sZW5ndGg7dT5vO28rPTEpe2lmKGw9YVtvXS5zdHlsZS53aWR0aCwhbHx8LTEhPWwuaW5kZXhPZihcIiVcIikpe189MDticmVha31fKz1wYXJzZUludChsLDEwKX1yPWUoXCI+LmstZ3JpZC1oZWFkZXIgdGFibGU6Zmlyc3QsPi5rLWdyaWQtZm9vdGVyIHRhYmxlOmZpcnN0XCIsdi53cmFwcGVyKS5hZGQodi50YWJsZSksdi5fZm9vdGVyV2lkdGg9bnVsbCxfJiYoci53aWR0aChfKSx2Ll9mb290ZXJXaWR0aD1fKSx3bi5tc2llJiY4PT13bi52ZXJzaW9uJiYoci5jc3MoXCJkaXNwbGF5XCIsXCJpbmxpbmUtdGFibGVcIiksc2V0VGltZW91dChmdW5jdGlvbigpe3IuY3NzKFwiZGlzcGxheVwiLFwidGFibGVcIil9LDEpKX12Ll91cGRhdGVGaXJzdENvbHVtbkNsYXNzKCksdi50cmlnZ2VyKHF0LHtjb2x1bW46bn0pfX0sX3NldFBhcmVudHNWaXNpYmlsaXR5OmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEsbCxjPXRoaXMuY29sdW1ucyxkPVtdLHA9bj9mdW5jdGlvbihlKXtyZXR1cm4gZihlLmNvbHVtbnMpLmxlbmd0aCYmZS5oaWRkZW59OmZ1bmN0aW9uKGUpe3JldHVybiFmKGUuY29sdW1ucykubGVuZ3RoJiYhZS5oaWRkZW59O2lmKHUodCxjLGQpJiZkLmxlbmd0aClmb3IoaT1kLmxlbmd0aC0xO2k+PTA7aS0tKXI9ZFtpXSxvPWIocixjKSxhPXMoZShcIj50YWJsZT50aGVhZFwiLHRoaXMubG9ja2VkSGVhZGVyKSx0aGlzLnRoZWFkLFwiPnRyOmVxKFwiK28ucm93K1wiKT50aDpub3QoLmstZ3JvdXAtY2VsbCk6bm90KC5rLWhpZXJhcmNoeS1jZWxsKVwiKS5lcShvLmNlbGwpLHAocikmJihoKHIsbiksYVswXS5zdHlsZS5kaXNwbGF5PW4/XCJcIjpcIm5vbmVcIiksYS5maWx0ZXIoXCJbXCIrdXQuYXR0cihcImNvbHNwYW5cIikrXCJdXCIpLmxlbmd0aCYmKGw9cGFyc2VJbnQoYS5hdHRyKHV0LmF0dHIoXCJjb2xzcGFuXCIpKSwxMCksYVswXS5jb2xTcGFuPWwtVChyLmNvbHVtbnMpfHwxKX0sc2hvd0NvbHVtbjpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxsLGMsZCx1LGYsZyxtLHY9dGhpcyxfPXYuY29sdW1ucyx5PXYuZm9vdGVyfHx2LndyYXBwZXIuZmluZChcIi5rLWdyaWQtZm9vdGVyXCIpLHc9di5sb2NrZWRIZWFkZXI/Tyh2LmxvY2tlZEhlYWRlci5maW5kKFwiPnRhYmxlPnRoZWFkXCIpKS5sZW5ndGg6MDtpZihuPVwibnVtYmVyXCI9PXR5cGVvZiBuP19bbl06eXQobik/a3QoUyhfKSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PW59KVswXTprdChTKF8pLGZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkPT09bn0pWzBdLG4mJiFwKG4pKXtpZihuLmNvbHVtbnMmJm4uY29sdW1ucy5sZW5ndGgpe2ZvcihkPXgobixfKSxoKG4sITApLFkocyhlKFwiPnRhYmxlPnRoZWFkXCIsdi5sb2NrZWRIZWFkZXIpLHYudGhlYWQsXCI+dHI6ZXEoXCIrZC5yb3crXCIpPnRoXCIpLGQuY2VsbCwhMCksaT0wO24uY29sdW1ucy5sZW5ndGg+aTtpKyspdGhpcy5zaG93Q29sdW1uKG4uY29sdW1uc1tpXSk7cmV0dXJuIHYudHJpZ2dlcigkdCx7Y29sdW1uOm59KSx0fWlmKGc9Q3QobixMKF8pKSxoKG4sITApLHYuX3NldFBhcmVudHNWaXNpYmlsaXR5KG4sITApLHYuX3RlbXBsYXRlcygpLHYuX3VwZGF0ZUNvbHMoKSx2Ll91cGRhdGVMb2NrZWRDb2xzKCksbT12LnRoZWFkLGM9Zyx2LmxvY2tlZEhlYWRlciYmdz5nP209di5sb2NrZWRIZWFkZXIuZmluZChcIj50YWJsZT50aGVhZFwiKTpjLT13LG89TyhtKS5lcShjKSxvWzBdLnN0eWxlLmRpc3BsYXk9XCJcIixZKHMoZShcIj50YWJsZT50aGVhZFwiLHYubG9ja2VkSGVhZGVyKSx2LnRoZWFkLFwiPnRyLmstZmlsdGVyLXJvdz50aFwiKSxnLCEwKSx5WzBdJiYodi5fdXBkYXRlQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItd3JhcD50YWJsZVwiKSksdi5fdXBkYXRlTG9ja2VkQ29scyh5LmZpbmQoXCI+LmstZ3JpZC1mb290ZXItbG9ja2VkPnRhYmxlXCIpKSxZKHkuZmluZChcIi5rLWZvb3Rlci10ZW1wbGF0ZT50ZFwiKSxnLCEwKSksdi5sb2NrZWRUYWJsZSYmdz5nP1Eodi5sb2NrZWRUYWJsZS5maW5kKFwiPnRib2R5PnRyXCIpLGcpOlEodi50Ym9keS5jaGlsZHJlbigpLGctdyksdi5sb2NrZWRUYWJsZSl2Ll91cGRhdGVUYWJsZXNXaWR0aCgpLHYuX2FwcGx5TG9ja2VkQ29udGFpbmVyc1dpZHRoKCksdi5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKSx2Ll9zeW5jTG9ja2VkSGVhZGVySGVpZ2h0KCk7ZWxzZSBpZihhPWUoXCI+LmstZ3JpZC1oZWFkZXIgdGFibGU6Zmlyc3QsPi5rLWdyaWQtZm9vdGVyIHRhYmxlOmZpcnN0XCIsdi53cmFwcGVyKS5hZGQodi50YWJsZSksbi53aWR0aCl7Zm9yKGw9MCxmPXYudGhlYWQucHJldigpLmZpbmQoXCJjb2xcIiksaT0wLHI9Zi5sZW5ndGg7cj5pO2krPTEpe2lmKHU9ZltpXS5zdHlsZS53aWR0aCx1LmluZGV4T2YoXCIlXCIpPi0xKXtsPTA7YnJlYWt9bCs9cGFyc2VJbnQodSwxMCl9di5fZm9vdGVyV2lkdGg9bnVsbCxsJiYoYS53aWR0aChsKSx2Ll9mb290ZXJXaWR0aD1sKX1lbHNlIGEud2lkdGgoXCJcIik7di5fdXBkYXRlRmlyc3RDb2x1bW5DbGFzcygpLHYudHJpZ2dlcigkdCx7Y29sdW1uOm59KX19LF9wcm9ncmVzczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmVsZW1lbnQ7dGhpcy5sb2NrZWRDb250ZW50P3Q9dGhpcy53cmFwcGVyOnRoaXMuZWxlbWVudC5pcyhcInRhYmxlXCIpP3Q9dGhpcy5lbGVtZW50LnBhcmVudCgpOnRoaXMuY29udGVudCYmdGhpcy5jb250ZW50Lmxlbmd0aCYmKHQ9dGhpcy5jb250ZW50KSx1dC51aS5wcm9ncmVzcyh0LGUpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50JiYodGhpcy5fc2V0Q29udGVudEhlaWdodCgpLHRoaXMuX3NldENvbnRlbnRXaWR0aCgpKX0sX2lzQWN0aXZlSW5UYWJsZTpmdW5jdGlvbigpe3ZhciB0PW10KCk7cmV0dXJuIHRoaXMudGFibGVbMF09PT10fHxlLmNvbnRhaW5zKHRoaXMudGFibGVbMF0sdCl8fHRoaXMuX2lzTG9ja2VkKCkmJih0aGlzLmxvY2tlZFRhYmxlWzBdPT09dHx8ZS5jb250YWlucyh0aGlzLmxvY2tlZFRhYmxlWzBdLHQpKX0scmVmcmVzaDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1pLmRhdGFTb3VyY2UudmlldygpLG89aS5vcHRpb25zLm5hdmlnYXRhYmxlLGE9ZShpLmN1cnJlbnQoKSkscz0hMSxsPShpLmRhdGFTb3VyY2UuZ3JvdXAoKXx8W10pLmxlbmd0aCxjPWwrQihmKGkuY29sdW1ucykpLmxlbmd0aDt0JiZcIml0ZW1jaGFuZ2VcIj09PXQuYWN0aW9uJiZpLmVkaXRhYmxlfHwodD10fHx7fSxpLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiLHthY3Rpb246dC5hY3Rpb258fFwicmViaW5kXCIsaW5kZXg6dC5pbmRleCxpdGVtczp0Lml0ZW1zfSl8fChpLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLG8mJihpLl9pc0FjdGl2ZUluVGFibGUoKXx8aS5fZWRpdENvbnRhaW5lciYmaS5fZWRpdENvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikpJiYocz1hLmlzKFwidGhcIiksbj0wLHMmJihuPWkudGhlYWQuZmluZChcInRoOm5vdCguay1ncm91cC1jZWxsKVwiKS5pbmRleChhKSkpLGkuX2Rlc3Ryb3lFZGl0YWJsZSgpLGkuX3Byb2dyZXNzKCExKSxpLl9oaWRlUmVzaXplSGFuZGxlKCksaS5fZGF0YT1bXSxpLmNvbHVtbnMubGVuZ3RofHwoaS5fYXV0b0NvbHVtbnMoaS5fZmlyc3REYXRhSXRlbShyWzBdLGwpKSxjPWwraS5jb2x1bW5zLmxlbmd0aCksaS5fZ3JvdXA9bD4wfHxpLl9ncm91cCxpLl9ncm91cCYmKGkuX3RlbXBsYXRlcygpLGkuX3VwZGF0ZUNvbHMoKSxpLl91cGRhdGVMb2NrZWRDb2xzKCksaS5fdXBkYXRlSGVhZGVyKGwpLGkuX2dyb3VwPWw+MCksaS5fcmVuZGVyQ29udGVudChyLGMsbCksaS5fcmVuZGVyTG9ja2VkQ29udGVudChyLGMsbCksaS5fZm9vdGVyKCksaS5fc2V0Q29udGVudEhlaWdodCgpLGkuX3NldENvbnRlbnRXaWR0aCgpLGkubG9ja2VkVGFibGUmJihpLm9wdGlvbnMuc2Nyb2xsYWJsZS52aXJ0dWFsP2kuY29udGVudC5maW5kKFwiPi5rLXZpcnR1YWwtc2Nyb2xsYWJsZS13cmFwXCIpLnRyaWdnZXIoXCJzY3JvbGxcIik6aS5jb250ZW50LnRyaWdnZXIoXCJzY3JvbGxcIikpLG4+PTAmJihpLl9yZW1vdmVDdXJyZW50KCksaS5jdXJyZW50KHM/aS50aGVhZC5maW5kKFwidGg6bm90KC5rLWdyb3VwLWNlbGwpXCIpLmVxKG4pOmkudGFibGUuYWRkKGkubG9ja2VkVGFibGUpLmZpbmQoQnQpLmZpcnN0KCkpLGkuX2N1cnJlbnQmJm50KGkuX2N1cnJlbnQuY2xvc2VzdChcInRhYmxlXCIpWzBdLCEwKSksaS50b3VjaFNjcm9sbGVyJiZpLnRvdWNoU2Nyb2xsZXIuY29udGVudFJlc2l6ZWQoKSxpLnNlbGVjdGFibGUmJmkuc2VsZWN0YWJsZS5yZXNldFRvdWNoRXZlbnRzKCksaS5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKSxpLnRyaWdnZXIoS3QpKSl9LF9yZW5kZXJDb250ZW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLGE9dGhpcyxzPVwiXCIsbD1udWxsIT1hLmxvY2tlZENvbnRlbnQsYz17cm93VGVtcGxhdGU6YS5yb3dUZW1wbGF0ZSxhbHRSb3dUZW1wbGF0ZTphLmFsdFJvd1RlbXBsYXRlLGdyb3VwRm9vdGVyVGVtcGxhdGU6YS5ncm91cEZvb3RlclRlbXBsYXRlfTtpZih0PWw/dC1CKFIoYS5jb2x1bW5zKSkubGVuZ3RoOnQsbj4wKWZvcih0PWw/dC1uOnQsYS5kZXRhaWxUZW1wbGF0ZSYmdCsrLGEuZ3JvdXBGb290ZXJUZW1wbGF0ZSYmKGEuX2dyb3VwQWdncmVnYXRlc0RlZmF1bHRPYmplY3Q9byhhLmRhdGFTb3VyY2UuYWdncmVnYXRlKCkpKSxpPTAscj1lLmxlbmd0aDtyPmk7aSsrKXMrPWEuX2dyb3VwUm93SHRtbChlW2ldLHQsMCxsP2R0OmN0LGMsbCk7ZWxzZSBzKz1hLl9yb3dzSHRtbChlLGMpO2EudGJvZHk9VihhLnRib2R5LGEudGFibGUscyl9LF9yZW5kZXJMb2NrZWRDb250ZW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT1cIlwiLHM9e3Jvd1RlbXBsYXRlOnRoaXMubG9ja2VkUm93VGVtcGxhdGUsYWx0Um93VGVtcGxhdGU6dGhpcy5sb2NrZWRBbHRSb3dUZW1wbGF0ZSxncm91cEZvb3RlclRlbXBsYXRlOnRoaXMubG9ja2VkR3JvdXBGb290ZXJUZW1wbGF0ZX07aWYodGhpcy5sb2NrZWRDb250ZW50KXtpZihvPXRoaXMubG9ja2VkVGFibGUsbj4wKWZvcih0LT1mKEwoeih0aGlzLmNvbHVtbnMpKSkubGVuZ3RoLGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspYSs9dGhpcy5fZ3JvdXBSb3dIdG1sKGVbaV0sdCwwLGN0LHMpO2Vsc2UgYT10aGlzLl9yb3dzSHRtbChlLHMpO1Yoby5jaGlsZHJlbihcInRib2R5XCIpLG8sYSksdGhpcy5fc3luY0xvY2tlZENvbnRlbnRIZWlnaHQoKX19LF9hZGp1c3RSb3dzSGVpZ2h0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYT1lWzBdLnJvd3Mscz1hLmxlbmd0aCxsPXRbMF0ucm93cyxjPWUuYWRkKHQpLGQ9Yy5sZW5ndGgsdT1bXTtmb3Iobj0wO3M+biYmbFtuXTtuKyspYVtuXS5zdHlsZS5oZWlnaHQmJihhW25dLnN0eWxlLmhlaWdodD1sW25dLnN0eWxlLmhlaWdodD1cIlwiKSxpPWFbbl0ub2Zmc2V0SGVpZ2h0LHI9bFtuXS5vZmZzZXRIZWlnaHQsbz0wLGk+cj9vPWk6cj5pJiYobz1yKSx1LnB1c2gobyk7Zm9yKG49MDtkPm47bisrKWNbbl0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtmb3Iobj0wO3M+bjtuKyspdVtuXSYmKGFbbl0uc3R5bGUuaGVpZ2h0PWxbbl0uc3R5bGUuaGVpZ2h0PXVbbl0rXCJweFwiKTtmb3Iobj0wO2Q+bjtuKyspY1tuXS5zdHlsZS5kaXNwbGF5PVwiXCJ9fSk7dXQuRXhjZWxNaXhpbiYmdXQuRXhjZWxNaXhpbi5leHRlbmQoU24ucHJvdG90eXBlKSx1dC5QREZNaXhpbiYmdXQuUERGTWl4aW4uZXh0ZW5kKFNuLnByb3RvdHlwZSksaHQucGx1Z2luKFNuKSxodC5wbHVnaW4oeG4pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPVwiY2hhbmdlXCIscj1cImNhbmNlbFwiLG89XCJkYXRhQm91bmRcIixhPVwiZGF0YUJpbmRpbmdcIixzPW4udWkuV2lkZ2V0LGw9bi5rZXlzLGM9XCI+KlwiLGQ9XCJwcm9ncmVzc1wiLHU9XCJlcnJvclwiLGg9XCJrLXN0YXRlLWZvY3VzZWRcIixwPVwiay1zdGF0ZS1zZWxlY3RlZFwiLGY9XCJrLWVkaXQtaXRlbVwiLGc9XCJlZGl0XCIsbT1cInJlbW92ZVwiLHY9XCJzYXZlXCIsXz1cImNsaWNrXCIseT1cIi5rZW5kb0xpc3RWaWV3XCIsdz1lLnByb3h5LGI9bi5fYWN0aXZlRWxlbWVudCxrPW4udWkucHJvZ3Jlc3MseD1uLmRhdGEuRGF0YVNvdXJjZSxDPW4udWkuRGF0YUJvdW5kV2lkZ2V0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGkpe3ZhciByPXRoaXM7aT1lLmlzQXJyYXkoaSk/e2RhdGFTb3VyY2U6aX06aSxzLmZuLmluaXQuY2FsbChyLHQsaSksaT1yLm9wdGlvbnMsci53cmFwcGVyPXQ9ci5lbGVtZW50LHRbMF0uaWQmJihyLl9pdGVtSWQ9dFswXS5pZCtcIl9sdl9hY3RpdmVcIiksci5fZWxlbWVudCgpLHIuX2RhdGFTb3VyY2UoKSxyLl90ZW1wbGF0ZXMoKSxyLl9uYXZpZ2F0YWJsZSgpLHIuX3NlbGVjdGFibGUoKSxyLl9wYWdlYWJsZSgpLHIuX2NydWRIYW5kbGVycygpLHIub3B0aW9ucy5hdXRvQmluZCYmci5kYXRhU291cmNlLmZldGNoKCksbi5ub3RpZnkocil9LGV2ZW50czpbaSxyLGEsbyxnLG0sdl0sb3B0aW9uczp7bmFtZTpcIkxpc3RWaWV3XCIsYXV0b0JpbmQ6ITAsc2VsZWN0YWJsZTohMSxuYXZpZ2F0YWJsZTohMSx0ZW1wbGF0ZTpcIlwiLGFsdFRlbXBsYXRlOlwiXCIsZWRpdFRlbXBsYXRlOlwiXCJ9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7cy5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZXMoKX0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uczt0aGlzLnRlbXBsYXRlPW4udGVtcGxhdGUoZS50ZW1wbGF0ZXx8XCJcIiksdGhpcy5hbHRUZW1wbGF0ZT1uLnRlbXBsYXRlKGUuYWx0VGVtcGxhdGV8fGUudGVtcGxhdGUpLHRoaXMuZWRpdFRlbXBsYXRlPW4udGVtcGxhdGUoZS5lZGl0VGVtcGxhdGV8fFwiXCIpfSxfaXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKClbZV0oKX0saXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCl9LGRhdGFJdGVtOmZ1bmN0aW9uKHQpe3ZhciBpPW4uYXR0cihcInVpZFwiKSxyPWUodCkuY2xvc2VzdChcIltcIitpK1wiXVwiKS5hdHRyKGkpO3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQocil9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LF91bmJpbmREYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmRhdGFTb3VyY2UudW5iaW5kKGksZS5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChkLGUuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKHUsZS5fZXJyb3JIYW5kbGVyKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZGF0YVNvdXJjZSYmZS5fcmVmcmVzaEhhbmRsZXI/ZS5fdW5iaW5kRGF0YVNvdXJjZSgpOihlLl9yZWZyZXNoSGFuZGxlcj13KGUucmVmcmVzaCxlKSxlLl9wcm9ncmVzc0hhbmRsZXI9dyhlLl9wcm9ncmVzcyxlKSxlLl9lcnJvckhhbmRsZXI9dyhlLl9lcnJvcixlKSksZS5kYXRhU291cmNlPXguY3JlYXRlKGUub3B0aW9ucy5kYXRhU291cmNlKS5iaW5kKGksZS5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoZCxlLl9wcm9ncmVzc0hhbmRsZXIpLmJpbmQodSxlLl9lcnJvckhhbmRsZXIpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oKXtrKHRoaXMuZWxlbWVudCwhMCl9LF9lcnJvcjpmdW5jdGlvbigpe2sodGhpcy5lbGVtZW50LCExKX0sX2VsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldCBrLWxpc3R2aWV3XCIpLmF0dHIoXCJyb2xlXCIsXCJsaXN0Ym94XCIpfSxyZWZyZXNoOmZ1bmN0aW9uKGUpe3ZhciBpLHIscyxsLGMsZD10aGlzLHU9ZC5kYXRhU291cmNlLnZpZXcoKSxoPVwiXCIscD1kLnRlbXBsYXRlLGY9ZC5hbHRUZW1wbGF0ZSxnPWIoKTtpZihlPWV8fHt9LFwiaXRlbWNoYW5nZVwiPT09ZS5hY3Rpb24pcmV0dXJuIGQuX2hhc0JpbmRpbmdUYXJnZXQoKXx8ZC5lZGl0YWJsZXx8KGk9ZS5pdGVtc1swXSxzPWQuaXRlbXMoKS5maWx0ZXIoXCJbXCIrbi5hdHRyKFwidWlkXCIpK1wiPVwiK2kudWlkK1wiXVwiKSxzLmxlbmd0aD4wJiYobD1zLmluZGV4KCksZC5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOltzXX19KSxzLnJlcGxhY2VXaXRoKHAoaSkpLHM9ZC5pdGVtcygpLmVxKGwpLHMuYXR0cihuLmF0dHIoXCJ1aWRcIiksaS51aWQpLGQuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpbc10sZGF0YTpbe2RhdGFJdGVtOml9XX19KSxkLnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06cyxkYXRhOml9KSkpLHQ7aWYoIWQudHJpZ2dlcihhLHthY3Rpb246ZS5hY3Rpb258fFwicmViaW5kXCIsaXRlbXM6ZS5pdGVtcyxpbmRleDplLmluZGV4fSkpe2ZvcihkLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLGQuX2Rlc3Ryb3lFZGl0YWJsZSgpLGw9MCxjPXUubGVuZ3RoO2M+bDtsKyspaCs9bCUyP2YodVtsXSk6cCh1W2xdKTtmb3IoZC5lbGVtZW50Lmh0bWwoaCkscj1kLml0ZW1zKCksbD0wLGM9dS5sZW5ndGg7Yz5sO2wrKylyLmVxKGwpLmF0dHIobi5hdHRyKFwidWlkXCIpLHVbbF0udWlkKS5hdHRyKFwicm9sZVwiLFwib3B0aW9uXCIpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsXCJmYWxzZVwiKTtkLmVsZW1lbnRbMF09PT1nJiZkLm9wdGlvbnMubmF2aWdhdGFibGUmJmQuY3VycmVudChyLmVxKDApKSxkLl9hbmd1bGFySXRlbXMoXCJjb21waWxlXCIpLGQudHJpZ2dlcihvKX19LF9wYWdlYWJsZTpmdW5jdGlvbigpe3ZhciB0LGkscj10aGlzLG89ci5vcHRpb25zLnBhZ2VhYmxlO2UuaXNQbGFpbk9iamVjdChvKSYmKGk9by5wYWdlcklkLHQ9ZS5leHRlbmQoe30sbyx7ZGF0YVNvdXJjZTpyLmRhdGFTb3VyY2UscGFnZXJJZDpudWxsfSksci5wYWdlcj1uZXcgbi51aS5QYWdlcihlKFwiI1wiK2kpLHQpKX0sX3NlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgZSxyLG89dGhpcyxhPW8ub3B0aW9ucy5zZWxlY3RhYmxlLHM9by5vcHRpb25zLm5hdmlnYXRhYmxlO2EmJihlPW4udWkuU2VsZWN0YWJsZS5wYXJzZU9wdGlvbnMoYSkubXVsdGlwbGUsby5zZWxlY3RhYmxlPW5ldyBuLnVpLlNlbGVjdGFibGUoby5lbGVtZW50LHthcmlhOiEwLG11bHRpcGxlOmUsZmlsdGVyOmMsY2hhbmdlOmZ1bmN0aW9uKCl7by50cmlnZ2VyKGkpfX0pLHMmJm8uZWxlbWVudC5vbihcImtleWRvd25cIit5LGZ1bmN0aW9uKG4pe2lmKG4ua2V5Q29kZT09PWwuU1BBQ0VCQVIpe2lmKHI9by5jdXJyZW50KCksbi50YXJnZXQ9PW4uY3VycmVudFRhcmdldCYmbi5wcmV2ZW50RGVmYXVsdCgpLGUpaWYobi5jdHJsS2V5KXtpZihyJiZyLmhhc0NsYXNzKHApKXJldHVybiByLnJlbW92ZUNsYXNzKHApLHR9ZWxzZSBvLnNlbGVjdGFibGUuY2xlYXIoKTtlbHNlIG8uc2VsZWN0YWJsZS5jbGVhcigpO28uc2VsZWN0YWJsZS52YWx1ZShyKX19KSl9LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uZWxlbWVudCxyPW4uX2N1cnJlbnQsbz1uLl9pdGVtSWQ7cmV0dXJuIGU9PT10P3I6KHImJnJbMF0mJihyWzBdLmlkPT09byYmci5yZW1vdmVBdHRyKFwiaWRcIiksci5yZW1vdmVDbGFzcyhoKSxpLnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikpLGUmJmVbMF0mJihvPWVbMF0uaWR8fG8sbi5fc2Nyb2xsVG8oZVswXSksaS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsbyksZS5hZGRDbGFzcyhoKS5hdHRyKFwiaWRcIixvKSksbi5fY3VycmVudD1lLHQpfSxfc2Nyb2xsVG86ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMsbz0hMSxhPVwic2Nyb2xsXCI7XCJhdXRvXCI9PXIud3JhcHBlci5jc3MoXCJvdmVyZmxvd1wiKXx8ci53cmFwcGVyLmNzcyhcIm92ZXJmbG93XCIpPT1hP249ci53cmFwcGVyWzBdOihuPXdpbmRvdyxvPSEwKSxpPWZ1bmN0aW9uKGkscil7dmFyIHM9bz9lKHQpLm9mZnNldCgpW2kudG9Mb3dlckNhc2UoKV06dFtcIm9mZnNldFwiK2ldLGw9dFtcImNsaWVudFwiK3JdLGM9ZShuKVthK2ldKCksZD1lKG4pW3IudG9Mb3dlckNhc2UoKV0oKTtzK2w+YytkP2UobilbYStpXShzK2wtZCk6Yz5zJiZlKG4pW2EraV0ocyl9LGkoXCJUb3BcIixcIkhlaWdodFwiKSxpKFwiTGVmdFwiLFwiV2lkdGhcIil9LF9uYXZpZ2F0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsaT10Lm9wdGlvbnMubmF2aWdhdGFibGUscj10LmVsZW1lbnQsbz1mdW5jdGlvbihuKXt0LmN1cnJlbnQoZShuLmN1cnJlbnRUYXJnZXQpKSxlKG4udGFyZ2V0KS5pcyhcIjpidXR0b24sYSw6aW5wdXQsYT4uay1pY29uLHRleHRhcmVhXCIpfHxyLmZvY3VzKCl9O2kmJih0Ll90YWJpbmRleCgpLHIub24oXCJmb2N1c1wiK3ksZnVuY3Rpb24oKXt2YXIgZT10Ll9jdXJyZW50O2UmJmUuaXMoXCI6dmlzaWJsZVwiKXx8KGU9dC5faXRlbShcImZpcnN0XCIpKSx0LmN1cnJlbnQoZSl9KS5vbihcImZvY3Vzb3V0XCIreSxmdW5jdGlvbigpe3QuX2N1cnJlbnQmJnQuX2N1cnJlbnQucmVtb3ZlQ2xhc3MoaCl9KS5vbihcImtleWRvd25cIit5LGZ1bmN0aW9uKGkpe3ZhciBvLGEscz1pLmtleUNvZGUsYz10LmN1cnJlbnQoKSxkPWUoaS50YXJnZXQpLHU9IWQuaXMoXCI6YnV0dG9uLHRleHRhcmVhLGEsYT4udC1pY29uLGlucHV0XCIpLGg9ZC5pcyhcIjp0ZXh0XCIpLHA9bi5wcmV2ZW50RGVmYXVsdCxnPXIuZmluZChcIi5cIitmKSxtPWIoKTtpZighKCF1JiYhaCYmbC5FU0MhPXN8fGgmJmwuRVNDIT1zJiZsLkVOVEVSIT1zKSlpZihsLlVQPT09c3x8bC5MRUZUPT09cyljJiYoYz1jLnByZXYoKSksdC5jdXJyZW50KGMmJmNbMF0/Yzp0Ll9pdGVtKFwibGFzdFwiKSkscChpKTtlbHNlIGlmKGwuRE9XTj09PXN8fGwuUklHSFQ9PT1zKWMmJihjPWMubmV4dCgpKSx0LmN1cnJlbnQoYyYmY1swXT9jOnQuX2l0ZW0oXCJmaXJzdFwiKSkscChpKTtlbHNlIGlmKGwuUEFHRVVQPT09cyl0LmN1cnJlbnQobnVsbCksdC5kYXRhU291cmNlLnBhZ2UodC5kYXRhU291cmNlLnBhZ2UoKS0xKSxwKGkpO2Vsc2UgaWYobC5QQUdFRE9XTj09PXMpdC5jdXJyZW50KG51bGwpLHQuZGF0YVNvdXJjZS5wYWdlKHQuZGF0YVNvdXJjZS5wYWdlKCkrMSkscChpKTtlbHNlIGlmKGwuSE9NRT09PXMpdC5jdXJyZW50KHQuX2l0ZW0oXCJmaXJzdFwiKSkscChpKTtlbHNlIGlmKGwuRU5EPT09cyl0LmN1cnJlbnQodC5faXRlbShcImxhc3RcIikpLHAoaSk7ZWxzZSBpZihsLkVOVEVSPT09cykwIT09Zy5sZW5ndGgmJih1fHxoKT8obz10Lml0ZW1zKCkuaW5kZXgoZyksbSYmbS5ibHVyKCksdC5zYXZlKCksYT1mdW5jdGlvbigpe3QuZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIiksdC5jdXJyZW50KHQuaXRlbXMoKS5lcShvKSl9LHQub25lKFwiZGF0YUJvdW5kXCIsYSkpOlwiXCIhPT10Lm9wdGlvbnMuZWRpdFRlbXBsYXRlJiZ0LmVkaXQoYyk7ZWxzZSBpZihsLkVTQz09PXMpe2lmKGc9ci5maW5kKFwiLlwiK2YpLDA9PT1nLmxlbmd0aClyZXR1cm47bz10Lml0ZW1zKCkuaW5kZXgoZyksdC5jYW5jZWwoKSx0LmVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpLHQuY3VycmVudCh0Lml0ZW1zKCkuZXEobykpfX0pLHIub24oXCJtb3VzZWRvd25cIit5K1wiIHRvdWNoc3RhcnRcIit5LGMsdyhvLHQpKSl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnNlbGVjdGFibGUuY2xlYXIoKSxlLnRyaWdnZXIoaSl9LHNlbGVjdDpmdW5jdGlvbihuKXt2YXIgaT10aGlzLHI9aS5zZWxlY3RhYmxlO3JldHVybiBuPWUobiksbi5sZW5ndGg/KHIub3B0aW9ucy5tdWx0aXBsZXx8KHIuY2xlYXIoKSxuPW4uZmlyc3QoKSksci52YWx1ZShuKSx0KTpyLnZhbHVlKCl9LF9kZXN0cm95RWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZWRpdGFibGUmJihlLmVkaXRhYmxlLmRlc3Ryb3koKSxkZWxldGUgZS5lZGl0YWJsZSl9LF9tb2RlbEZyb21FbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cihuLmF0dHIoXCJ1aWRcIikpO3JldHVybiB0aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQodCl9LF9jbG9zZUVkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LGkscixvPXRoaXMsYT1vLmVkaXRhYmxlLHM9by50ZW1wbGF0ZSxsPSEwO3JldHVybiBhJiYoZSYmKGw9YS5lbmQoKSksbCYmKGEuZWxlbWVudC5pbmRleCgpJTImJihzPW8uYWx0VGVtcGxhdGUpLHQ9by5fbW9kZWxGcm9tRWxlbWVudChhLmVsZW1lbnQpLG8uX2Rlc3Ryb3lFZGl0YWJsZSgpLHI9YS5lbGVtZW50LmluZGV4KCksYS5lbGVtZW50LnJlcGxhY2VXaXRoKHModCkpLGk9by5pdGVtcygpLmVxKHIpLGkuYXR0cihuLmF0dHIoXCJ1aWRcIiksdC51aWQpLG8uX2hhc0JpbmRpbmdUYXJnZXQoKSYmbi5iaW5kKGksdCkpKSxsfSxlZGl0OmZ1bmN0aW9uKGUpe3ZhciB0LGkscj10aGlzLG89ci5fbW9kZWxGcm9tRWxlbWVudChlKSxhPW8udWlkO3IuY2FuY2VsKCksZT1yLml0ZW1zKCkuZmlsdGVyKFwiW1wiK24uYXR0cihcInVpZFwiKStcIj1cIithK1wiXVwiKSxpPWUuaW5kZXgoKSxlLnJlcGxhY2VXaXRoKHIuZWRpdFRlbXBsYXRlKG8pKSx0PXIuaXRlbXMoKS5lcShpKS5hZGRDbGFzcyhmKS5hdHRyKG4uYXR0cihcInVpZFwiKSxvLnVpZCksci5lZGl0YWJsZT10LmtlbmRvRWRpdGFibGUoe21vZGVsOm8sY2xlYXJDb250YWluZXI6ITEsZXJyb3JUZW1wbGF0ZTohMSx0YXJnZXQ6cn0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLHIudHJpZ2dlcihnLHttb2RlbDpvLGl0ZW06dH0pfSxzYXZlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5lZGl0YWJsZTtuJiYobj1uLmVsZW1lbnQsZT10Ll9tb2RlbEZyb21FbGVtZW50KG4pLCF0LnRyaWdnZXIodix7bW9kZWw6ZSxpdGVtOm59KSYmdC5fY2xvc2VFZGl0YWJsZSghMCkmJnQuZGF0YVNvdXJjZS5zeW5jKCkpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZGF0YVNvdXJjZSxpPXQuX21vZGVsRnJvbUVsZW1lbnQoZSk7dC50cmlnZ2VyKG0se21vZGVsOmksaXRlbTplfSl8fChlLmhpZGUoKSxuLnJlbW92ZShpKSxuLnN5bmMoKSl9LGFkZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmRhdGFTb3VyY2Usbj10LmluZGV4T2YoKHQudmlldygpfHxbXSlbMF0pOzA+biYmKG49MCksZS5jYW5jZWwoKSx0Lmluc2VydChuLHt9KSxlLmVkaXQoZS5lbGVtZW50LmNoaWxkcmVuKCkuZmlyc3QoKSl9LGNhbmNlbDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLGk9bi5kYXRhU291cmNlO24uZWRpdGFibGUmJihlPW4uZWRpdGFibGUuZWxlbWVudCx0PW4uX21vZGVsRnJvbUVsZW1lbnQoZSksbi50cmlnZ2VyKHIse21vZGVsOnQsY29udGFpbmVyOmV9KXx8KGkuY2FuY2VsQ2hhbmdlcyh0KSxuLl9jbG9zZUVkaXRhYmxlKCExKSkpfSxfY3J1ZEhhbmRsZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPV8reTt0LmVsZW1lbnQub24oaSxcIi5rLWVkaXQtYnV0dG9uXCIsZnVuY3Rpb24oaSl7dmFyIHI9ZSh0aGlzKS5jbG9zZXN0KFwiW1wiK24uYXR0cihcInVpZFwiKStcIl1cIik7dC5lZGl0KHIpLGkucHJldmVudERlZmF1bHQoKX0pLHQuZWxlbWVudC5vbihpLFwiLmstZGVsZXRlLWJ1dHRvblwiLGZ1bmN0aW9uKGkpe3ZhciByPWUodGhpcykuY2xvc2VzdChcIltcIituLmF0dHIoXCJ1aWRcIikrXCJdXCIpO3QucmVtb3ZlKHIpLGkucHJldmVudERlZmF1bHQoKX0pLHQuZWxlbWVudC5vbihpLFwiLmstdXBkYXRlLWJ1dHRvblwiLGZ1bmN0aW9uKGUpe3Quc2F2ZSgpLGUucHJldmVudERlZmF1bHQoKX0pLHQuZWxlbWVudC5vbihpLFwiLmstY2FuY2VsLWJ1dHRvblwiLGZ1bmN0aW9uKGUpe3QuY2FuY2VsKCksZS5wcmV2ZW50RGVmYXVsdCgpfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3MuZm4uZGVzdHJveS5jYWxsKGUpLGUuX3VuYmluZERhdGFTb3VyY2UoKSxlLl9kZXN0cm95RWRpdGFibGUoKSxlLmVsZW1lbnQub2ZmKHkpLGUucGFnZXImJmUucGFnZXIuZGVzdHJveSgpLG4uZGVzdHJveShlLmVsZW1lbnQpfX0pO24udWkucGx1Z2luKEMpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIGUubWFwKGkodCksZnVuY3Rpb24oZSl7cmV0dXJuIGUubmFtZX0pLmpvaW4oXCIsIFwiKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWVbMF07cmV0dXJuIHQuZmlsZXM/cih0LmZpbGVzKTpbe25hbWU6cyh0LnZhbHVlKSxleHRlbnNpb246YSh0LnZhbHVlKSxzaXplOm51bGx9XX1mdW5jdGlvbiByKHQpe3JldHVybiBlLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLm5hbWV8fGUuZmlsZU5hbWU7cmV0dXJue25hbWU6eS5odG1sRW5jb2RlKHQpLGV4dGVuc2lvbjphKHQpLHNpemU6ZS5zaXplfHxlLmZpbGVTaXplLHJhd0ZpbGU6ZX19ZnVuY3Rpb24gYShlKXt2YXIgdD1lLm1hdGNoKGspO3JldHVybiB0P3RbMF06XCJcIn1mdW5jdGlvbiBzKGUpe3ZhciB0PWUubGFzdEluZGV4T2YoXCJcXFxcXCIpO3JldHVybi0xIT10P2Uuc3Vic3RyKHQrMSk6ZX1mdW5jdGlvbiBsKHQsbil7dmFyIGk9eS5ndWlkKCk7cmV0dXJuIGUubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIGUudWlkPW4/eS5ndWlkKCk6aSxlfSl9ZnVuY3Rpb24gYyh0LG4saSl7dmFyIHIsbztuLl9zdXBwb3J0c1JlbW92ZSgpJiYocj10LmRhdGEoXCJmaWxlTmFtZXNcIiksbz1lLm1hcChyLGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KSxuLl9zdWJtaXRSZW1vdmUobyxpLGZ1bmN0aW9uKGUsaSxvKXtuLl9yZW1vdmVGaWxlRW50cnkodCksbi50cmlnZ2VyKFQse29wZXJhdGlvbjpcInJlbW92ZVwiLGZpbGVzOnIscmVzcG9uc2U6ZSxYTUxIdHRwUmVxdWVzdDpvfSl9LGZ1bmN0aW9uKGUpe24udHJpZ2dlcihELHtvcGVyYXRpb246XCJyZW1vdmVcIixmaWxlczpyLFhNTEh0dHBSZXF1ZXN0OmV9KSxiKFwiU2VydmVyIHJlc3BvbnNlOiBcIitlLnJlc3BvbnNlVGV4dCl9KSl9ZnVuY3Rpb24gZCh0LG4saSl7dmFyIHI9ITEsbz1cIlwiO3RyeXtvPWUucGFyc2VKU09OKHUodCkpLHI9ITB9Y2F0Y2goYSl7aSgpfXImJm4obyl9ZnVuY3Rpb24gdShlKXtyZXR1cm4odD09PWV8fFwiXCI9PT1lKSYmKGU9XCJ7fVwiKSxlfWZ1bmN0aW9uIGgoZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gcChlLHQsbixpKXt2YXIgcixvO2Uub24oXCJkcmFnZW50ZXJcIit0LGZ1bmN0aW9uKCl7bigpLG89bmV3IERhdGUscnx8KHI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT1uZXcgRGF0ZS1vO2U+MTAwJiYoaSgpLGNsZWFySW50ZXJ2YWwocikscj1udWxsKX0sMTAwKSl9KS5vbihcImRyYWdvdmVyXCIrdCxmdW5jdGlvbigpe289bmV3IERhdGV9KX1mdW5jdGlvbiBmKGUpe3JldHVybiBlLmlzKFwiLmstZmlsZS1wcm9ncmVzcywgLmstZmlsZS1zdWNjZXNzLCAuay1maWxlLWVycm9yXCIpfWZ1bmN0aW9uIGcodCl7cmV0dXJuIGUodC50YXJnZXQpLmNsb3Nlc3QoXCIuay1maWxlXCIpfWZ1bmN0aW9uIG0oKXt2YXIgbj17fSxpPWUoXCJtZXRhW25hbWU9Y3NyZi10b2tlbl1cIikuYXR0cihcImNvbnRlbnRcIikscj1lKFwibWV0YVtuYW1lPWNzcmYtcGFyYW1dXCIpLmF0dHIoXCJjb250ZW50XCIpO3JldHVybiBlKFwiaW5wdXRbbmFtZV49J19fUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJ11cIikuZWFjaChmdW5jdGlvbigpe25bdGhpcy5uYW1lXT10aGlzLnZhbHVlfSksciE9PXQmJmkhPT10JiYobltyXT1pKSxufXZhciB2LF8seT13aW5kb3cua2VuZG8sdz15LnVpLldpZGdldCxiPXkubG9nVG9Db25zb2xlLGs9L1xcLihbXlxcLl0rKSQvLHg9XCIua2VuZG9VcGxvYWRcIixDPVwic2VsZWN0XCIsUz1cInVwbG9hZFwiLFQ9XCJzdWNjZXNzXCIsRD1cImVycm9yXCIsQT1cImNvbXBsZXRlXCIsRT1cImNhbmNlbFwiLE09XCJwcm9ncmVzc1wiLFA9XCJyZW1vdmVcIixJPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGE9dGhpczt3LmZuLmluaXQuY2FsbChhLHQsbiksYS5uYW1lPXQubmFtZSxhLm11bHRpcGxlPWEub3B0aW9ucy5tdWx0aXBsZSxhLmxvY2FsaXphdGlvbj1hLm9wdGlvbnMubG9jYWxpemF0aW9uLGk9YS5lbGVtZW50LGEud3JhcHBlcj1pLmNsb3Nlc3QoXCIuay11cGxvYWRcIiksMD09PWEud3JhcHBlci5sZW5ndGgmJihhLndyYXBwZXI9YS5fd3JhcElucHV0KGkpKSxhLl9hY3RpdmVJbnB1dChpKSxhLnRvZ2dsZShhLm9wdGlvbnMuZW5hYmxlZCkscj1hLl9ucz14K1wiLVwiK3kuZ3VpZCgpLGkuY2xvc2VzdChcImZvcm1cIikub24oXCJzdWJtaXRcIityLGUucHJveHkoYS5fb25QYXJlbnRGb3JtU3VibWl0LGEpKS5vbihcInJlc2V0XCIrcixlLnByb3h5KGEuX29uUGFyZW50Rm9ybVJlc2V0LGEpKSxhLm9wdGlvbnMuYXN5bmMuc2F2ZVVybD8oYS5fbW9kdWxlPWEuX3N1cHBvcnRzRm9ybURhdGEoKT9uZXcgXyhhKTpuZXcgdihhKSxhLl9hc3luYz0hMCxvPWEub3B0aW9ucy5maWxlcyxvLmxlbmd0aD4wJiZhLl9yZW5kZXJJbml0aWFsRmlsZXMobykpOmEuX21vZHVsZT1uZXcgeihhKSxhLl9zdXBwb3J0c0Ryb3AoKSYmYS5fc2V0dXBEcm9wWm9uZSgpLGEud3JhcHBlci5vbihcImNsaWNrXCIsXCIuay11cGxvYWQtYWN0aW9uXCIsZS5wcm94eShhLl9vbkZpbGVBY3Rpb24sYSkpLm9uKFwiY2xpY2tcIixcIi5rLXVwbG9hZC1zZWxlY3RlZFwiLGUucHJveHkoYS5fb25VcGxvYWRTZWxlY3RlZCxhKSksYS5lbGVtZW50LnZhbCgpJiZhLl9vbklucHV0Q2hhbmdlKHt0YXJnZXQ6YS5lbGVtZW50fSl9LGV2ZW50czpbQyxTLFQsRCxBLEUsTSxQXSxvcHRpb25zOntuYW1lOlwiVXBsb2FkXCIsZW5hYmxlZDohMCxtdWx0aXBsZTohMCxzaG93RmlsZUxpc3Q6ITAsdGVtcGxhdGU6XCJcIixmaWxlczpbXSxhc3luYzp7cmVtb3ZlVmVyYjpcIlBPU1RcIixhdXRvVXBsb2FkOiEwLHdpdGhDcmVkZW50aWFsczohMH0sbG9jYWxpemF0aW9uOntzZWxlY3Q6XCJTZWxlY3QgZmlsZXMuLi5cIixjYW5jZWw6XCJDYW5jZWxcIixyZXRyeTpcIlJldHJ5XCIscmVtb3ZlOlwiUmVtb3ZlXCIsdXBsb2FkU2VsZWN0ZWRGaWxlczpcIlVwbG9hZCBmaWxlc1wiLGRyb3BGaWxlc0hlcmU6XCJkcm9wIGZpbGVzIGhlcmUgdG8gdXBsb2FkXCIsc3RhdHVzVXBsb2FkaW5nOlwidXBsb2FkaW5nXCIsc3RhdHVzVXBsb2FkZWQ6XCJ1cGxvYWRlZFwiLHN0YXR1c1dhcm5pbmc6XCJ3YXJuaW5nXCIsc3RhdHVzRmFpbGVkOlwiZmFpbGVkXCIsaGVhZGVyU3RhdHVzVXBsb2FkaW5nOlwiVXBsb2FkaW5nLi4uXCIsaGVhZGVyU3RhdHVzVXBsb2FkZWQ6XCJEb25lXCJ9fSxzZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQ7dy5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSx0Lm11bHRpcGxlPXQub3B0aW9ucy5tdWx0aXBsZSxuLmF0dHIoXCJtdWx0aXBsZVwiLHQuX3N1cHBvcnRzTXVsdGlwbGUoKT90Lm11bHRpcGxlOiExKSx0LnRvZ2dsZSh0Lm9wdGlvbnMuZW5hYmxlZCl9LGVuYWJsZTpmdW5jdGlvbihlKXtlPXQ9PT1lPyEwOmUsdGhpcy50b2dnbGUoZSlcbn0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlKCExKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe2U9dD09PWU/ZTohZSx0aGlzLndyYXBwZXIudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsZSksdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLGUpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKGRvY3VtZW50KS5hZGQoZShcIi5rLWRyb3B6b25lXCIsdC53cmFwcGVyKSkuYWRkKHQud3JhcHBlci5jbG9zZXN0KFwiZm9ybVwiKSkub2ZmKHQuX25zKSxlKHQuZWxlbWVudCkub2ZmKHgpLHcuZm4uZGVzdHJveS5jYWxsKHQpfSxfYWRkSW5wdXQ6ZnVuY3Rpb24odCl7aWYodFswXS5ub2RlVHlwZSl7dmFyIG49dGhpcyxpPXQuY2xvbmUoKS52YWwoXCJcIik7aS5pbnNlcnRBZnRlcihuLmVsZW1lbnQpLmRhdGEoXCJrZW5kb1VwbG9hZFwiLG4pLGUobi5lbGVtZW50KS5oaWRlKCkuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKS5yZW1vdmVBdHRyKFwiaWRcIikub2ZmKHgpLG4uX2FjdGl2ZUlucHV0KGkpLG4uZWxlbWVudC5mb2N1cygpfX0sX2FjdGl2ZUlucHV0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLndyYXBwZXI7bi5lbGVtZW50PXQsdC5hdHRyKFwibXVsdGlwbGVcIixuLl9zdXBwb3J0c011bHRpcGxlKCk/bi5tdWx0aXBsZTohMSkuYXR0cihcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpLm9uKFwiY2xpY2tcIit4LGZ1bmN0aW9uKGUpe2kuaGFzQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpJiZlLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImZvY3VzXCIreCxmdW5jdGlvbigpe2UodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIil9KS5vbihcImJsdXJcIit4LGZ1bmN0aW9uKCl7ZSh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0pLm9uKFwiY2hhbmdlXCIreCxlLnByb3h5KG4uX29uSW5wdXRDaGFuZ2UsbikpLm9uKFwia2V5ZG93blwiK3gsZS5wcm94eShuLl9vbklucHV0S2V5RG93bixuKSl9LF9vbklucHV0S2V5RG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC53cmFwcGVyLmZpbmQoXCIuay11cGxvYWQtYWN0aW9uOmZpcnN0XCIpO2Uua2V5Q29kZT09PXkua2V5cy5UQUImJm4ubGVuZ3RoPjAmJihlLnByZXZlbnREZWZhdWx0KCksbi5mb2N1cygpKX0sX29uSW5wdXRDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPWUodC50YXJnZXQpLHI9bChuLl9pbnB1dEZpbGVzKGkpLG4uX2lzQXN5bmNOb25CYXRjaCgpKSxvPW4udHJpZ2dlcihDLHtmaWxlczpyfSk7bz8obi5fYWRkSW5wdXQoaSksaS5yZW1vdmUoKSk6bi5fbW9kdWxlLm9uU2VsZWN0KHt0YXJnZXQ6aX0scil9LF9vbkRyb3A6ZnVuY3Rpb24odCl7dmFyIG4saT10Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLG89dGhpcyxhPWkuZmlsZXMscz1sKHIoYSksby5faXNBc3luY05vbkJhdGNoKCkpO2godCksYS5sZW5ndGg+MCYmKG49by50cmlnZ2VyKEMse2ZpbGVzOnN9KSxufHxvLl9tb2R1bGUub25TZWxlY3Qoe3RhcmdldDplKFwiLmstZHJvcHpvbmVcIixvLndyYXBwZXIpfSxzKSl9LF9pc0FzeW5jTm9uQmF0Y2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXN5bmMmJiF0aGlzLm9wdGlvbnMuYXN5bmMuYmF0Y2h8fCExfSxfcmVuZGVySW5pdGlhbEZpbGVzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLG89MDtmb3IodD1sKHQsITApLG89MDt0Lmxlbmd0aD5vO28rKyluPXRbb10saT1yLl9lbnF1ZXVlRmlsZShuLm5hbWUse2ZpbGVOYW1lczpbbl19KSxpLmFkZENsYXNzKFwiay1maWxlLXN1Y2Nlc3NcIikuZGF0YShcImZpbGVzXCIsW3Rbb11dKSxlKFwiLmstcHJvZ3Jlc3NcIixpKS53aWR0aChcIjEwMCVcIiksZShcIi5rLXVwbG9hZC1zdGF0dXNcIixpKS5wcmVwZW5kKFwiPHNwYW4gY2xhc3M9J2stdXBsb2FkLXBjdCc+MTAwJTwvc3Bhbj5cIiksci5fZmlsZUFjdGlvbihpLFApfSxfcHJlcGFyZVRlbXBsYXRlRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuZmlsZU5hbWVzLGk9e30scj0wLG89MDtmb3Iobz0wO24ubGVuZ3RoPm87bysrKXIrPW5bb10uc2l6ZTtyZXR1cm4gaS5uYW1lPWUsaS5zaXplPXIsaS5maWxlcz10LmZpbGVOYW1lcyxpfSxfcHJlcGFyZURlZmF1bHRGaWxlRW50cnlUZW1wbGF0ZTpmdW5jdGlvbih0LG4pe3ZhciBpPVwiXCIscj1lKFwiPGxpIGNsYXNzPSdrLWZpbGUnPjxzcGFuIGNsYXNzPSdrLXByb2dyZXNzJz48L3NwYW4+PHNwYW4gY2xhc3M9J2staWNvbic+PC9zcGFuPjxzcGFuIGNsYXNzPSdrLWZpbGVuYW1lJyB0aXRsZT0nXCIrdCtcIic+XCIrdCtcIjwvc3Bhbj48c3Ryb25nIGNsYXNzPSdrLXVwbG9hZC1zdGF0dXMnPjwvc3Ryb25nPjwvbGk+XCIpO3JldHVybiAxPT1uLmZpbGVOYW1lcy5sZW5ndGgmJm4uZmlsZU5hbWVzWzBdLmV4dGVuc2lvbiYmKGk9bi5maWxlTmFtZXNbMF0uZXh0ZW5zaW9uLnN1YnN0cmluZygxKSxlKFwiLmstaWNvblwiLHIpLmFkZENsYXNzKFwiay1pLVwiK2kpKSxyfSxfZW5xdWV1ZUZpbGU6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYT10aGlzLHM9bi5maWxlTmFtZXNbMF0udWlkLGw9ZShcIi5rLXVwbG9hZC1maWxlc1wiLGEud3JhcHBlciksYz1hLm9wdGlvbnMsZD1jLnRlbXBsYXRlO3JldHVybiAwPT09bC5sZW5ndGgmJihsPWUoXCI8dWwgY2xhc3M9J2stdXBsb2FkLWZpbGVzIGstcmVzZXQnPjwvdWw+XCIpLmFwcGVuZFRvKGEud3JhcHBlciksYS5vcHRpb25zLnNob3dGaWxlTGlzdHx8bC5oaWRlKCksYS53cmFwcGVyLnJlbW92ZUNsYXNzKFwiay11cGxvYWQtZW1wdHlcIikpLGk9ZShcIi5rLWZpbGVcIixsKSxkPyhvPWEuX3ByZXBhcmVUZW1wbGF0ZURhdGEodCxuKSxkPXkudGVtcGxhdGUoZCkscj1lKFwiPGxpIGNsYXNzPSdrLWZpbGUnPlwiK2QobykrXCI8L2xpPlwiKSxyLmZpbmQoXCIuay11cGxvYWQtYWN0aW9uXCIpLmFkZENsYXNzKFwiay1idXR0b24gay1idXR0b24tYmFyZVwiKSk6cj1hLl9wcmVwYXJlRGVmYXVsdEZpbGVFbnRyeVRlbXBsYXRlKHQsbiksci5hdHRyKHkuYXR0cihcInVpZFwiKSxzKS5hcHBlbmRUbyhsKS5kYXRhKG4pLGEuX2FzeW5jfHxlKFwiLmstcHJvZ3Jlc3NcIixyKS53aWR0aChcIjEwMCVcIiksIWEubXVsdGlwbGUmJmkubGVuZ3RoPjAmJmEuX21vZHVsZS5vblJlbW92ZSh7dGFyZ2V0OmUoaSxhLndyYXBwZXIpfSkscn0sX3JlbW92ZUZpbGVFbnRyeTpmdW5jdGlvbih0KXt2YXIgbixpLHI9dGhpcyxvPXQuY2xvc2VzdChcIi5rLXVwbG9hZC1maWxlc1wiKTt0LnJlbW92ZSgpLG49ZShcIi5rLWZpbGVcIixvKSxpPWUoXCIuay1maWxlLXN1Y2Nlc3MsIC5rLWZpbGUtZXJyb3JcIixvKSxpLmxlbmd0aD09PW4ubGVuZ3RoJiZ0aGlzLl9oaWRlVXBsb2FkQnV0dG9uKCksMD09PW4ubGVuZ3RoJiYoby5yZW1vdmUoKSxyLndyYXBwZXIuYWRkQ2xhc3MoXCJrLXVwbG9hZC1lbXB0eVwiKSxyLl9oaWRlSGVhZGVyVXBsb2Fkc3RhdHVzKCkpfSxfZmlsZUFjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXtyZW1vdmU6XCJrLWRlbGV0ZVwiLGNhbmNlbDpcImstY2FuY2VsXCIscmV0cnk6XCJrLXJldHJ5XCJ9LGk9e3JlbW92ZTpcImstaS1jbG9zZVwiLGNhbmNlbDpcImstaS1jbG9zZVwiLHJldHJ5Olwiay1pLXJlZnJlc2hcIn07bi5oYXNPd25Qcm9wZXJ0eSh0KSYmKHRoaXMuX2NsZWFyRmlsZUFjdGlvbihlKSx0aGlzLm9wdGlvbnMudGVtcGxhdGU/ZS5maW5kKFwiLmstdXBsb2FkLWFjdGlvblwiKS5hZGRDbGFzcyhcImstYnV0dG9uIGstYnV0dG9uLWJhcmVcIikuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBcIitpW3RdK1wiIFwiK25bdF0rXCInIHRpdGxlPSdcIit0aGlzLmxvY2FsaXphdGlvblt0XStcIic+PC9zcGFuPlwiKS5zaG93KCk6KGUuZmluZChcIi5rLXVwbG9hZC1zdGF0dXMgLmstdXBsb2FkLWFjdGlvblwiKS5yZW1vdmUoKSxlLmZpbmQoXCIuay11cGxvYWQtc3RhdHVzXCIpLmFwcGVuZCh0aGlzLl9yZW5kZXJBY3Rpb24oblt0XSx0aGlzLmxvY2FsaXphdGlvblt0XSxpW3RdKSkpKX0sX2ZpbGVTdGF0ZTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMubG9jYWxpemF0aW9uLHI9e3VwbG9hZGluZzp7dGV4dDppLnN0YXR1c1VwbG9hZGluZ30sdXBsb2FkZWQ6e3RleHQ6aS5zdGF0dXNVcGxvYWRlZH0sZmFpbGVkOnt0ZXh0Omkuc3RhdHVzRmFpbGVkfX0sbz1yW25dO28mJmUoXCIuay1pY29uOm5vdCguay1kZWxldGUsIC5rLWNhbmNlbCwgLmstcmV0cnkpXCIsdCkudGV4dChvLnRleHQpfSxfcmVuZGVyQWN0aW9uOmZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gZShcIlwiIT09dD9cIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nay1idXR0b24gay1idXR0b24tYmFyZSBrLXVwbG9hZC1hY3Rpb24nPjxzcGFuIGNsYXNzPSdrLWljb24gXCIraStcIiBcIit0K1wiJyB0aXRsZT0nXCIrbitcIic+PC9zcGFuPjwvYnV0dG9uPlwiOlwiPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdrLWJ1dHRvbic+XCIrbitcIjwvYnV0dG9uPlwiKX0sX2NsZWFyRmlsZUFjdGlvbjpmdW5jdGlvbih0KXtlKFwiLmstdXBsb2FkLWFjdGlvblwiLHQpLmVtcHR5KCkuaGlkZSgpfSxfb25GaWxlQWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGE9dGhpcztyZXR1cm4gYS53cmFwcGVyLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKXx8KG49ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLXVwbG9hZC1hY3Rpb25cIiksaT1uLmZpbmQoXCIuay1pY29uXCIpLHI9bi5jbG9zZXN0KFwiLmstZmlsZVwiKSxvPXtmaWxlczpyLmRhdGEoXCJmaWxlTmFtZXNcIil9LGkuaGFzQ2xhc3MoXCJrLWRlbGV0ZVwiKT9hLnRyaWdnZXIoUCxvKXx8YS5fbW9kdWxlLm9uUmVtb3ZlKHt0YXJnZXQ6ZShyLGEud3JhcHBlcil9LG8uZGF0YSk6aS5oYXNDbGFzcyhcImstY2FuY2VsXCIpPyhhLnRyaWdnZXIoRSxvKSxhLl9tb2R1bGUub25DYW5jZWwoe3RhcmdldDplKHIsYS53cmFwcGVyKX0pLHRoaXMuX2NoZWNrQWxsQ29tcGxldGUoKSxhLl91cGRhdGVIZWFkZXJVcGxvYWRTdGF0dXMoKSk6aS5oYXNDbGFzcyhcImstcmV0cnlcIikmJihlKFwiLmstd2FybmluZ1wiLHIpLnJlbW92ZSgpLGEuX21vZHVsZS5vblJldHJ5KHt0YXJnZXQ6ZShyLGEud3JhcHBlcil9KSkpLCExfSxfb25VcGxvYWRTZWxlY3RlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLndyYXBwZXI7cmV0dXJuIHQuaGFzQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfHx0aGlzLl9tb2R1bGUub25TYXZlU2VsZWN0ZWQoKSwhMX0sX29uRmlsZVByb2dyZXNzOmZ1bmN0aW9uKHQsbil7dmFyIGk7dGhpcy5vcHRpb25zLnRlbXBsYXRlP2UoXCIuay1wcm9ncmVzc1wiLHQudGFyZ2V0KS53aWR0aChuK1wiJVwiKTooaT1lKFwiLmstdXBsb2FkLXBjdFwiLHQudGFyZ2V0KSwwPT09aS5sZW5ndGgmJmUoXCIuay11cGxvYWQtc3RhdHVzXCIsdC50YXJnZXQpLnByZXBlbmQoXCI8c3BhbiBjbGFzcz0nay11cGxvYWQtcGN0Jz48L3NwYW4+XCIpLGUoXCIuay11cGxvYWQtcGN0XCIsdC50YXJnZXQpLnRleHQobitcIiVcIiksZShcIi5rLXByb2dyZXNzXCIsdC50YXJnZXQpLndpZHRoKG4rXCIlXCIpKSx0aGlzLnRyaWdnZXIoTSx7ZmlsZXM6Zyh0KS5kYXRhKFwiZmlsZU5hbWVzXCIpLHBlcmNlbnRDb21wbGV0ZTpufSl9LF9vblVwbG9hZFN1Y2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWcoZSk7dGhpcy5fZmlsZVN0YXRlKGksXCJ1cGxvYWRlZFwiKSxpLnJlbW92ZUNsYXNzKFwiay1maWxlLXByb2dyZXNzXCIpLmFkZENsYXNzKFwiay1maWxlLXN1Y2Nlc3NcIiksdGhpcy5fdXBkYXRlSGVhZGVyVXBsb2FkU3RhdHVzKCksdGhpcy50cmlnZ2VyKFQse2ZpbGVzOmkuZGF0YShcImZpbGVOYW1lc1wiKSxyZXNwb25zZTp0LG9wZXJhdGlvbjpcInVwbG9hZFwiLFhNTEh0dHBSZXF1ZXN0Om59KSx0aGlzLl9zdXBwb3J0c1JlbW92ZSgpP3RoaXMuX2ZpbGVBY3Rpb24oaSxQKTp0aGlzLl9jbGVhckZpbGVBY3Rpb24oaSksdGhpcy5fY2hlY2tBbGxDb21wbGV0ZSgpfSxfb25VcGxvYWRFcnJvcjpmdW5jdGlvbih0LG4pe3ZhciBpPWcodCkscj1lKFwiLmstdXBsb2FkLXBjdFwiLGkpO3RoaXMuX2ZpbGVTdGF0ZShpLFwiZmFpbGVkXCIpLGkucmVtb3ZlQ2xhc3MoXCJrLWZpbGUtcHJvZ3Jlc3NcIikuYWRkQ2xhc3MoXCJrLWZpbGUtZXJyb3JcIiksZShcIi5rLXByb2dyZXNzXCIsaSkud2lkdGgoXCIxMDAlXCIpLHIubGVuZ3RoPjA/ci5lbXB0eSgpLnJlbW92ZUNsYXNzKFwiay11cGxvYWQtcGN0XCIpLmFkZENsYXNzKFwiay1pY29uIGstd2FybmluZ1wiKTplKFwiLmstdXBsb2FkLXN0YXR1c1wiLGkpLnByZXBlbmQoXCI8c3BhbiBjbGFzcz0nay1pY29uIGstd2FybmluZyc+PC9zcGFuPlwiKSx0aGlzLl91cGRhdGVIZWFkZXJVcGxvYWRTdGF0dXMoKSx0aGlzLl9maWxlQWN0aW9uKGksXCJyZXRyeVwiKSx0aGlzLnRyaWdnZXIoRCx7b3BlcmF0aW9uOlwidXBsb2FkXCIsZmlsZXM6aS5kYXRhKFwiZmlsZU5hbWVzXCIpLFhNTEh0dHBSZXF1ZXN0Om59KSxiKFwiU2VydmVyIHJlc3BvbnNlOiBcIituLnJlc3BvbnNlVGV4dCksdGhpcy5fY2hlY2tBbGxDb21wbGV0ZSgpfSxfc2hvd1VwbG9hZEJ1dHRvbjpmdW5jdGlvbigpe3ZhciB0PWUoXCIuay11cGxvYWQtc2VsZWN0ZWRcIix0aGlzLndyYXBwZXIpOzA9PT10Lmxlbmd0aCYmKHQ9dGhpcy5fcmVuZGVyQWN0aW9uKFwiXCIsdGhpcy5sb2NhbGl6YXRpb24udXBsb2FkU2VsZWN0ZWRGaWxlcykuYWRkQ2xhc3MoXCJrLXVwbG9hZC1zZWxlY3RlZFwiKSksdGhpcy53cmFwcGVyLmFwcGVuZCh0KX0sX2hpZGVVcGxvYWRCdXR0b246ZnVuY3Rpb24oKXtlKFwiLmstdXBsb2FkLXNlbGVjdGVkXCIsdGhpcy53cmFwcGVyKS5yZW1vdmUoKX0sX3Nob3dIZWFkZXJVcGxvYWRTdGF0dXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxvY2FsaXphdGlvbixuPWUoXCIuay1kcm9wem9uZVwiLHRoaXMud3JhcHBlciksaT1lKFwiLmstdXBsb2FkLXN0YXR1cy10b3RhbFwiLHRoaXMud3JhcHBlcik7MCE9PWkubGVuZ3RoJiZpLnJlbW92ZSgpLGk9JzxzdHJvbmcgY2xhc3M9XCJrLXVwbG9hZC1zdGF0dXMgay11cGxvYWQtc3RhdHVzLXRvdGFsXCI+Jyt0LmhlYWRlclN0YXR1c1VwbG9hZGluZysnPHNwYW4gY2xhc3M9XCJrLWljb24gay1sb2FkaW5nXCI+Jyt0LnN0YXR1c1VwbG9hZGluZytcIjwvc3Bhbj48L3N0cm9uZz5cIixuLmxlbmd0aD4wP24uYXBwZW5kKGkpOmUoXCIuay11cGxvYWQtYnV0dG9uXCIsdGhpcy53cmFwcGVyKS5hZnRlcihpKX0sX3VwZGF0ZUhlYWRlclVwbG9hZFN0YXR1czpmdW5jdGlvbigpe3ZhciB0LG4saSxyPXRoaXMsbz1yLmxvY2FsaXphdGlvbixhPWUoXCIuay1maWxlXCIsci53cmFwcGVyKS5ub3QoXCIuay1maWxlLXN1Y2Nlc3MsIC5rLWZpbGUtZXJyb3JcIik7MD09PWEubGVuZ3RoJiYodD1lKFwiLmstZmlsZS5rLWZpbGUtZXJyb3JcIixyLndyYXBwZXIpLG49ZShcIi5rLXVwbG9hZC1zdGF0dXMtdG90YWxcIixyLndyYXBwZXIpLGk9ZShcIi5rLWljb25cIixuKS5yZW1vdmVDbGFzcyhcImstbG9hZGluZ1wiKS5hZGRDbGFzcygwIT09dC5sZW5ndGg/XCJrLXdhcm5pbmdcIjpcImstaS10aWNrXCIpLnRleHQoMCE9PXQubGVuZ3RoP28uc3RhdHVzV2FybmluZzpvLnN0YXR1c1VwbG9hZGVkKSxuLnRleHQoci5sb2NhbGl6YXRpb24uaGVhZGVyU3RhdHVzVXBsb2FkZWQpLmFwcGVuZChpKSl9LF9oaWRlSGVhZGVyVXBsb2Fkc3RhdHVzOmZ1bmN0aW9uKCl7ZShcIi5rLXVwbG9hZC1zdGF0dXMtdG90YWxcIix0aGlzLndyYXBwZXIpLnJlbW92ZSgpfSxfb25QYXJlbnRGb3JtU3VibWl0OmZ1bmN0aW9uKCl7dmFyIG4saT10aGlzLHI9aS5lbGVtZW50O3QhPT10aGlzLl9tb2R1bGUub25BYm9ydCYmdGhpcy5fbW9kdWxlLm9uQWJvcnQoKSxyLnZhbHVlfHwobj1lKHIpLG4uYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpfSwwKSl9LF9vblBhcmVudEZvcm1SZXNldDpmdW5jdGlvbigpe2UoXCIuay11cGxvYWQtZmlsZXNcIix0aGlzLndyYXBwZXIpLnJlbW92ZSgpfSxfc3VwcG9ydHNGb3JtRGF0YTpmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBGb3JtRGF0YX0sX3N1cHBvcnRzTXVsdGlwbGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl91c2VyQWdlbnQoKS5pbmRleE9mKFwiV2luZG93c1wiKT4tMTtyZXR1cm4hKHkuc3VwcG9ydC5icm93c2VyLm9wZXJhfHx5LnN1cHBvcnQuYnJvd3Nlci5zYWZhcmkmJmUpfSxfc3VwcG9ydHNEcm9wOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdXNlckFnZW50KCkudG9Mb3dlckNhc2UoKSx0PS9jaHJvbWUvLnRlc3QoZSksbj0hdCYmL3NhZmFyaS8udGVzdChlKSxpPW4mJi93aW5kb3dzLy50ZXN0KGUpO3JldHVybiFpJiZ0aGlzLl9zdXBwb3J0c0Zvcm1EYXRhKCkmJnRoaXMub3B0aW9ucy5hc3luYy5zYXZlVXJsfSxfdXNlckFnZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnR9LF9zZXR1cERyb3Bab25lOmZ1bmN0aW9uKCl7dmFyIHQsbixpPXRoaXM7ZShcIi5rLXVwbG9hZC1idXR0b25cIix0aGlzLndyYXBwZXIpLndyYXAoXCI8ZGl2IGNsYXNzPSdrLWRyb3B6b25lJz48L2Rpdj5cIiksdD1pLl9ucyxuPWUoXCIuay1kcm9wem9uZVwiLGkud3JhcHBlcikuYXBwZW5kKGUoXCI8ZW0+XCIraS5sb2NhbGl6YXRpb24uZHJvcEZpbGVzSGVyZStcIjwvZW0+XCIpKS5vbihcImRyYWdlbnRlclwiK3QsaCkub24oXCJkcmFnb3ZlclwiK3QsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJkcm9wXCIrdCxlLnByb3h5KHRoaXMuX29uRHJvcCx0aGlzKSkscChuLHQsZnVuY3Rpb24oKXtuLmFkZENsYXNzKFwiay1kcm9wem9uZS1ob3ZlcmVkXCIpfSxmdW5jdGlvbigpe24ucmVtb3ZlQ2xhc3MoXCJrLWRyb3B6b25lLWhvdmVyZWRcIil9KSxwKGUoZG9jdW1lbnQpLHQsZnVuY3Rpb24oKXtuLmFkZENsYXNzKFwiay1kcm9wem9uZS1hY3RpdmVcIiksbi5jbG9zZXN0KFwiLmstdXBsb2FkXCIpLnJlbW92ZUNsYXNzKFwiay11cGxvYWQtZW1wdHlcIil9LGZ1bmN0aW9uKCl7bi5yZW1vdmVDbGFzcyhcImstZHJvcHpvbmUtYWN0aXZlXCIpLDA9PT1lKFwibGkuay1maWxlXCIsbi5jbG9zZXN0KFwiLmstdXBsb2FkXCIpKS5sZW5ndGgmJm4uY2xvc2VzdChcIi5rLXVwbG9hZFwiKS5hZGRDbGFzcyhcImstdXBsb2FkLWVtcHR5XCIpfSl9LF9zdXBwb3J0c1JlbW92ZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5vcHRpb25zLmFzeW5jLnJlbW92ZVVybH0sX3N1Ym1pdFJlbW92ZTpmdW5jdGlvbih0LG4saSxyKXt2YXIgbz10aGlzLGE9by5vcHRpb25zLmFzeW5jLnJlbW92ZUZpZWxkfHxcImZpbGVOYW1lc1wiLHM9ZS5leHRlbmQobixtKCkpO3NbYV09dCxqUXVlcnkuYWpheCh7dHlwZTp0aGlzLm9wdGlvbnMuYXN5bmMucmVtb3ZlVmVyYixkYXRhVHlwZTpcImpzb25cIixkYXRhRmlsdGVyOnUsdXJsOnRoaXMub3B0aW9ucy5hc3luYy5yZW1vdmVVcmwsdHJhZGl0aW9uYWw6ITAsZGF0YTpzLHN1Y2Nlc3M6aSxlcnJvcjpyfSl9LF93cmFwSW5wdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucztyZXR1cm4gZS53cmFwKFwiPGRpdiBjbGFzcz0nay13aWRnZXQgay11cGxvYWQgay1oZWFkZXInPjxkaXYgY2xhc3M9J2stYnV0dG9uIGstdXBsb2FkLWJ1dHRvbic+PC9kaXY+PC9kaXY+XCIpLG4uYXN5bmMuc2F2ZVVybHx8ZS5jbG9zZXN0KFwiLmstdXBsb2FkXCIpLmFkZENsYXNzKFwiay11cGxvYWQtc3luY1wiKSxlLmNsb3Nlc3QoXCIuay11cGxvYWRcIikuYWRkQ2xhc3MoXCJrLXVwbG9hZC1lbXB0eVwiKSxlLmNsb3Nlc3QoXCIuay1idXR0b25cIikuYXBwZW5kKFwiPHNwYW4+XCIrdGhpcy5sb2NhbGl6YXRpb24uc2VsZWN0K1wiPC9zcGFuPlwiKSxlLmNsb3Nlc3QoXCIuay11cGxvYWRcIil9LF9jaGVja0FsbENvbXBsZXRlOmZ1bmN0aW9uKCl7MD09PWUoXCIuay1maWxlLmstZmlsZS1wcm9ncmVzc1wiLHRoaXMud3JhcHBlcikubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoQSl9LF9pbnB1dEZpbGVzOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfX0pLHo9ZnVuY3Rpb24oZSl7dGhpcy5uYW1lPVwic3luY1VwbG9hZE1vZHVsZVwiLHRoaXMuZWxlbWVudD1lLndyYXBwZXIsdGhpcy51cGxvYWQ9ZSx0aGlzLmVsZW1lbnQuY2xvc2VzdChcImZvcm1cIikuYXR0cihcImVuY3R5cGVcIixcIm11bHRpcGFydC9mb3JtLWRhdGFcIikuYXR0cihcImVuY29kaW5nXCIsXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIpfTt6LnByb3RvdHlwZT17b25TZWxlY3Q6ZnVuY3Rpb24odCxpKXt2YXIgcixvPXRoaXMudXBsb2FkLGE9ZSh0LnRhcmdldCk7by5fYWRkSW5wdXQoYSkscj1vLl9lbnF1ZXVlRmlsZShuKGEpLHtyZWxhdGVkSW5wdXQ6YSxmaWxlTmFtZXM6aX0pLG8uX2ZpbGVBY3Rpb24ocixQKX0sb25SZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTt0LmRhdGEoXCJyZWxhdGVkSW5wdXRcIikucmVtb3ZlKCksdGhpcy51cGxvYWQuX3JlbW92ZUZpbGVFbnRyeSh0KX19LHY9ZnVuY3Rpb24oZSl7dGhpcy5uYW1lPVwiaWZyYW1lVXBsb2FkTW9kdWxlXCIsdGhpcy5lbGVtZW50PWUud3JhcHBlcix0aGlzLnVwbG9hZD1lLHRoaXMuaWZyYW1lcz1bXX0sSS5fZnJhbWVJZD0wLHYucHJvdG90eXBlPXtvblNlbGVjdDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMudXBsb2FkLHI9ZSh0LnRhcmdldCksbz10aGlzLnByZXBhcmVVcGxvYWQocixuKTtpLm9wdGlvbnMuYXN5bmMuYXV0b1VwbG9hZD90aGlzLnBlcmZvcm1VcGxvYWQobyk6KGkuX3N1cHBvcnRzUmVtb3ZlKCkmJnRoaXMudXBsb2FkLl9maWxlQWN0aW9uKG8sUCksaS5fc2hvd1VwbG9hZEJ1dHRvbigpKX0scHJlcGFyZVVwbG9hZDpmdW5jdGlvbih0LGkpe3ZhciByLG8sYSxzPXRoaXMudXBsb2FkLGw9ZShzLmVsZW1lbnQpLGM9cy5vcHRpb25zLmFzeW5jLnNhdmVGaWVsZHx8dC5hdHRyKFwibmFtZVwiKTtyZXR1cm4gcy5fYWRkSW5wdXQodCksdC5hdHRyKFwibmFtZVwiLGMpLHI9dGhpcy5jcmVhdGVGcmFtZShzLm5hbWUrXCJfXCIrSS5fZnJhbWVJZCsrKSx0aGlzLnJlZ2lzdGVyRnJhbWUociksbz10aGlzLmNyZWF0ZUZvcm0ocy5vcHRpb25zLmFzeW5jLnNhdmVVcmwsci5hdHRyKFwibmFtZVwiKSkuYXBwZW5kKGwpLGE9cy5fZW5xdWV1ZUZpbGUobih0KSx7ZnJhbWU6cixyZWxhdGVkSW5wdXQ6bCxmaWxlTmFtZXM6aX0pLHIuZGF0YSh7Zm9ybTpvLGZpbGU6YX0pLGF9LHBlcmZvcm1VcGxvYWQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG89e2ZpbGVzOnQuZGF0YShcImZpbGVOYW1lc1wiKX0sYT10LmRhdGEoXCJmcmFtZVwiKSxzPXRoaXMudXBsb2FkO2lmKHMudHJpZ2dlcihTLG8pKXMuX3JlbW92ZUZpbGVFbnRyeShhLmRhdGEoXCJmaWxlXCIpKSx0aGlzLmNsZWFudXBGcmFtZShhKSx0aGlzLnVucmVnaXN0ZXJGcmFtZShhKTtlbHNle3MuX2hpZGVVcGxvYWRCdXR0b24oKSxzLl9zaG93SGVhZGVyVXBsb2FkU3RhdHVzKCksYS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSxuPWEuZGF0YShcImZvcm1cIikuYXR0cihcImFjdGlvblwiLHMub3B0aW9ucy5hc3luYy5zYXZlVXJsKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSxvLmRhdGE9ZS5leHRlbmQoe30sby5kYXRhLG0oKSk7Zm9yKGkgaW4gby5kYXRhKXI9bi5maW5kKFwiaW5wdXRbbmFtZT0nXCIraStcIiddXCIpLDA9PT1yLmxlbmd0aCYmKHI9ZShcIjxpbnB1dD5cIix7dHlwZTpcImhpZGRlblwiLG5hbWU6aX0pLnByZXBlbmRUbyhuKSksci52YWwoby5kYXRhW2ldKTtzLl9maWxlQWN0aW9uKHQsRSkscy5fZmlsZVN0YXRlKHQsXCJ1cGxvYWRpbmdcIiksZSh0KS5yZW1vdmVDbGFzcyhcImstZmlsZS1lcnJvclwiKS5hZGRDbGFzcyhcImstZmlsZS1wcm9ncmVzc1wiKSxhLm9uZShcImxvYWRcIixlLnByb3h5KHRoaXMub25JZnJhbWVMb2FkLHRoaXMpKSxuWzBdLnN1Ym1pdCgpfX0sb25TYXZlU2VsZWN0ZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoXCIuay1maWxlXCIsdGhpcy5lbGVtZW50KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZSh0aGlzKSxpPWYobik7aXx8dC5wZXJmb3JtVXBsb2FkKG4pfSl9LG9uSWZyYW1lTG9hZDpmdW5jdGlvbih0KXt2YXIgbixpPWUodC50YXJnZXQpO3RyeXtuPWkuY29udGVudHMoKS50ZXh0KCl9Y2F0Y2gocil7bj1cIkVycm9yIHRyeWluZyB0byBnZXQgc2VydmVyIHJlc3BvbnNlOiBcIityfXRoaXMucHJvY2Vzc1Jlc3BvbnNlKGksbil9LHByb2Nlc3NSZXNwb25zZTpmdW5jdGlvbih0LG4pe3ZhciBpPXQuZGF0YShcImZpbGVcIikscj10aGlzLG89e3Jlc3BvbnNlVGV4dDpufTtkKG4sZnVuY3Rpb24obil7ZS5leHRlbmQobyx7c3RhdHVzVGV4dDpcIk9LXCIsc3RhdHVzOlwiMjAwXCJ9KSxyLnVwbG9hZC5fb25GaWxlUHJvZ3Jlc3Moe3RhcmdldDplKGksci51cGxvYWQud3JhcHBlcil9LDEwMCksci51cGxvYWQuX29uVXBsb2FkU3VjY2Vzcyh7dGFyZ2V0OmUoaSxyLnVwbG9hZC53cmFwcGVyKX0sbixvKSxyLmNsZWFudXBGcmFtZSh0KSxyLnVucmVnaXN0ZXJGcmFtZSh0KX0sZnVuY3Rpb24oKXtlLmV4dGVuZChvLHtzdGF0dXNUZXh0OlwiZXJyb3JcIixzdGF0dXM6XCI1MDBcIn0pLHIudXBsb2FkLl9vblVwbG9hZEVycm9yKHt0YXJnZXQ6ZShpLHIudXBsb2FkLndyYXBwZXIpfSxvKX0pfSxvbkNhbmNlbDpmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KS5kYXRhKFwiZnJhbWVcIik7dGhpcy5zdG9wRnJhbWVTdWJtaXQobiksdGhpcy5jbGVhbnVwRnJhbWUobiksdGhpcy51bnJlZ2lzdGVyRnJhbWUobiksdGhpcy51cGxvYWQuX3JlbW92ZUZpbGVFbnRyeShuLmRhdGEoXCJmaWxlXCIpKX0sb25SZXRyeTpmdW5jdGlvbihlKXt2YXIgdD1nKGUpO3RoaXMucGVyZm9ybVVwbG9hZCh0KX0sb25SZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1nKGUpLGk9bi5kYXRhKFwiZnJhbWVcIik7aT8odGhpcy51bnJlZ2lzdGVyRnJhbWUoaSksdGhpcy51cGxvYWQuX3JlbW92ZUZpbGVFbnRyeShuKSx0aGlzLmNsZWFudXBGcmFtZShpKSk6YyhuLHRoaXMudXBsb2FkLHQpfSxvbkFib3J0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LG49dGhpcztlLmVhY2godGhpcy5pZnJhbWVzLGZ1bmN0aW9uKCl7ZShcImlucHV0XCIsdGhpcy5kYXRhKFwiZm9ybVwiKSkuYXBwZW5kVG8odCksbi5zdG9wRnJhbWVTdWJtaXQodGhpc1swXSksdGhpcy5kYXRhKFwiZm9ybVwiKS5yZW1vdmUoKSx0aGlzLnJlbW92ZSgpfSksdGhpcy5pZnJhbWVzPVtdfSxjcmVhdGVGcmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gZShcIjxpZnJhbWUgbmFtZT0nXCIrdCtcIicgaWQ9J1wiK3QrXCInIHN0eWxlPSdkaXNwbGF5Om5vbmU7JyAvPlwiKX0sY3JlYXRlRm9ybTpmdW5jdGlvbih0LG4pe3JldHVybiBlKFwiPGZvcm0gZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YScgbWV0aG9kPSdQT1NUJyBhY3Rpb249J1wiK3QrXCInIHRhcmdldD0nXCIrbitcIicvPlwiKX0sc3RvcEZyYW1lU3VibWl0OmZ1bmN0aW9uKGUpe3QhPT1lLnN0b3A/ZS5zdG9wKCk6ZS5kb2N1bWVudCYmZS5kb2N1bWVudC5leGVjQ29tbWFuZChcIlN0b3BcIil9LHJlZ2lzdGVyRnJhbWU6ZnVuY3Rpb24oZSl7dGhpcy5pZnJhbWVzLnB1c2goZSl9LHVucmVnaXN0ZXJGcmFtZTpmdW5jdGlvbih0KXt0aGlzLmlmcmFtZXM9ZS5ncmVwKHRoaXMuaWZyYW1lcyxmdW5jdGlvbihlKXtyZXR1cm4gZS5hdHRyKFwibmFtZVwiKSE9dC5hdHRyKFwibmFtZVwiKX0pfSxjbGVhbnVwRnJhbWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhKFwiZm9ybVwiKTtlLmRhdGEoXCJmaWxlXCIpLmRhdGEoXCJmcmFtZVwiLG51bGwpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnJlbW92ZSgpLGUucmVtb3ZlKCl9LDEpfX0sXz1mdW5jdGlvbihlKXt0aGlzLm5hbWU9XCJmb3JtRGF0YVVwbG9hZE1vZHVsZVwiLHRoaXMuZWxlbWVudD1lLndyYXBwZXIsdGhpcy51cGxvYWQ9ZX0sXy5wcm90b3R5cGU9e29uU2VsZWN0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy51cGxvYWQscj10aGlzLG89ZSh0LnRhcmdldCksYT10aGlzLnByZXBhcmVVcGxvYWQobyxuKTtlLmVhY2goYSxmdW5jdGlvbigpe2kub3B0aW9ucy5hc3luYy5hdXRvVXBsb2FkP3IucGVyZm9ybVVwbG9hZCh0aGlzKTooaS5fc3VwcG9ydHNSZW1vdmUoKSYmaS5fZmlsZUFjdGlvbih0aGlzLFApLGkuX3Nob3dVcGxvYWRCdXR0b24oKSl9KX0scHJlcGFyZVVwbG9hZDpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMuZW5xdWV1ZUZpbGVzKG4pO3JldHVybiB0LmlzKFwiaW5wdXRcIikmJihlLmVhY2goaSxmdW5jdGlvbigpe2UodGhpcykuZGF0YShcInJlbGF0ZWRJbnB1dFwiLHQpfSksdC5kYXRhKFwicmVsYXRlZEZpbGVFbnRyaWVzXCIsaSksdGhpcy51cGxvYWQuX2FkZElucHV0KHQpKSxpfSxlbnF1ZXVlRmlsZXM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYT10aGlzLnVwbG9hZCxzPXQubGVuZ3RoLGw9W107aWYoYS5vcHRpb25zLmFzeW5jLmJhdGNoPT09ITApbj1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KS5qb2luKFwiLCBcIiksbz1hLl9lbnF1ZXVlRmlsZShuLHtmaWxlTmFtZXM6dH0pLG8uZGF0YShcImZpbGVzXCIsdCksbC5wdXNoKG8pO2Vsc2UgZm9yKGk9MDtzPmk7aSsrKXI9dFtpXSxuPXIubmFtZSxvPWEuX2VucXVldWVGaWxlKG4se2ZpbGVOYW1lczpbcl19KSxvLmRhdGEoXCJmaWxlc1wiLFtyXSksbC5wdXNoKG8pO3JldHVybiBsfSxwZXJmb3JtVXBsb2FkOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcy51cGxvYWQscj10aGlzLmNyZWF0ZUZvcm1EYXRhKCksbz10aGlzLmNyZWF0ZVhIUigpLGE9e2ZpbGVzOnQuZGF0YShcImZpbGVOYW1lc1wiKSxYTUxIdHRwUmVxdWVzdDpvfTtpZihpLnRyaWdnZXIoUyxhKSl0aGlzLnJlbW92ZUZpbGVFbnRyeSh0KTtlbHNle2kuX2ZpbGVBY3Rpb24odCxFKSxpLl9oaWRlVXBsb2FkQnV0dG9uKCksaS5fc2hvd0hlYWRlclVwbG9hZFN0YXR1cygpLGEuZGF0YT1lLmV4dGVuZCh7fSxhLmRhdGEsbSgpKTtmb3IobiBpbiBhLmRhdGEpci5hcHBlbmQobixhLmRhdGFbbl0pO3RoaXMucG9wdWxhdGVGb3JtRGF0YShyLHQuZGF0YShcImZpbGVzXCIpKSxpLl9maWxlU3RhdGUodCxcInVwbG9hZGluZ1wiKSxlKHQpLnJlbW92ZUNsYXNzKFwiay1maWxlLWVycm9yXCIpLmFkZENsYXNzKFwiay1maWxlLXByb2dyZXNzXCIpLHRoaXMucG9zdEZvcm1EYXRhKGkub3B0aW9ucy5hc3luYy5zYXZlVXJsLHIsdCxvKX19LG9uU2F2ZVNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlKFwiLmstZmlsZVwiLHRoaXMuZWxlbWVudCkuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcyksaT1mKG4pO2l8fHQucGVyZm9ybVVwbG9hZChuKX0pfSxvbkNhbmNlbDpmdW5jdGlvbihlKXt2YXIgdD1nKGUpO3RoaXMuc3RvcFVwbG9hZFJlcXVlc3QodCksdGhpcy5yZW1vdmVGaWxlRW50cnkodCl9LG9uUmV0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZyhlKTt0aGlzLnBlcmZvcm1VcGxvYWQodCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZyhlKTtuLmhhc0NsYXNzKFwiay1maWxlLXN1Y2Nlc3NcIik/YyhuLHRoaXMudXBsb2FkLHQpOnRoaXMucmVtb3ZlRmlsZUVudHJ5KG4pfSxjcmVhdGVYSFI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fSxwb3N0Rm9ybURhdGE6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcztuLmRhdGEoXCJyZXF1ZXN0XCIsaSksaS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKGUpe3Iub25SZXF1ZXN0U3VjY2Vzcy5jYWxsKHIsZSxuKX0sITEpLGkuYWRkRXZlbnRMaXN0ZW5lcihELGZ1bmN0aW9uKGUpe3Iub25SZXF1ZXN0RXJyb3IuY2FsbChyLGUsbil9LCExKSxpLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihlKXtyLm9uUmVxdWVzdFByb2dyZXNzLmNhbGwocixlLG4pfSwhMSksaS5vcGVuKFwiUE9TVFwiLGUsITApLGkud2l0aENyZWRlbnRpYWxzPXRoaXMudXBsb2FkLm9wdGlvbnMuYXN5bmMud2l0aENyZWRlbnRpYWxzLGkuc2VuZCh0KX0sY3JlYXRlRm9ybURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZvcm1EYXRhfSxwb3B1bGF0ZUZvcm1EYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzLnVwbG9hZCxyPXQubGVuZ3RoO2ZvcihuPTA7cj5uO24rKyllLmFwcGVuZChpLm9wdGlvbnMuYXN5bmMuc2F2ZUZpZWxkfHxpLm5hbWUsdFtuXS5yYXdGaWxlKTtyZXR1cm4gZX0sb25SZXF1ZXN0U3VjY2VzczpmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGkoKXtvLnVwbG9hZC5fb25VcGxvYWRFcnJvcih7dGFyZ2V0OmUobixvLnVwbG9hZC53cmFwcGVyKX0scil9dmFyIHI9dC50YXJnZXQsbz10aGlzO3Iuc3RhdHVzPj0yMDAmJjI5OT49ci5zdGF0dXM/ZChyLnJlc3BvbnNlVGV4dCxmdW5jdGlvbih0KXtvLnVwbG9hZC5fb25GaWxlUHJvZ3Jlc3Moe3RhcmdldDplKG4sby51cGxvYWQud3JhcHBlcil9LDEwMCksby51cGxvYWQuX29uVXBsb2FkU3VjY2Vzcyh7dGFyZ2V0OmUobixvLnVwbG9hZC53cmFwcGVyKX0sdCxyKSxvLmNsZWFudXBGaWxlRW50cnkobil9LGkpOmkoKX0sb25SZXF1ZXN0RXJyb3I6ZnVuY3Rpb24odCxuKXt2YXIgaT10LnRhcmdldDt0aGlzLnVwbG9hZC5fb25VcGxvYWRFcnJvcih7dGFyZ2V0OmUobix0aGlzLnVwbG9hZC53cmFwcGVyKX0saSl9LGNsZWFudXBGaWxlRW50cnk6ZnVuY3Rpb24odCl7dmFyIG49dC5kYXRhKFwicmVsYXRlZElucHV0XCIpLGk9ITA7biYmKGUuZWFjaChuLmRhdGEoXCJyZWxhdGVkRmlsZUVudHJpZXNcIil8fFtdLGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQoKS5sZW5ndGg+MCYmdGhpc1swXSE9dFswXSYmKGk9aSYmdGhpcy5oYXNDbGFzcyhcImstZmlsZS1zdWNjZXNzXCIpKX0pLGkmJm4ucmVtb3ZlKCkpfSxyZW1vdmVGaWxlRW50cnk6ZnVuY3Rpb24oZSl7dGhpcy5jbGVhbnVwRmlsZUVudHJ5KGUpLHRoaXMudXBsb2FkLl9yZW1vdmVGaWxlRW50cnkoZSl9LG9uUmVxdWVzdFByb2dyZXNzOmZ1bmN0aW9uKHQsbil7dmFyIGk9TWF0aC5yb3VuZCgxMDAqdC5sb2FkZWQvdC50b3RhbCk7dGhpcy51cGxvYWQuX29uRmlsZVByb2dyZXNzKHt0YXJnZXQ6ZShuLHRoaXMudXBsb2FkLndyYXBwZXIpfSxpKX0sc3RvcFVwbG9hZFJlcXVlc3Q6ZnVuY3Rpb24oZSl7ZS5kYXRhKFwicmVxdWVzdFwiKS5hYm9ydCgpfX0seS51aS5wbHVnaW4oSSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbil7dmFyIGkscjtlLm9uKFwiZHJhZ2VudGVyXCIreCxmdW5jdGlvbigpe3QoKSxyPW5ldyBEYXRlLGl8fChpPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9bmV3IERhdGUtcjtlPjEwMCYmKG4oKSxjbGVhckludGVydmFsKGkpLGk9bnVsbCl9LDEwMCkpfSkub24oXCJkcmFnb3ZlclwiK3gsZnVuY3Rpb24oKXtyPW5ldyBEYXRlfSl9ZnVuY3Rpb24gaShlLG4pe3JldHVybiBlIT09dCYmZS5tYXRjaCgvXFwvJC8pfHwoZT0oZXx8XCJcIikrXCIvXCIpLGUrbn1mdW5jdGlvbiByKGUpe2lmKCFlKXJldHVyblwiXCI7dmFyIHQ9XCIgYnl0ZXNcIjtyZXR1cm4gZT49MTA3Mzc0MTgyND8odD1cIiBHQlwiLGUvPTEwNzM3NDE4MjQpOmU+PTEwNDg1NzY/KHQ9XCIgTUJcIixlLz0xMDQ4NTc2KTplPj0xMDI0JiYodD1cIiBLQlwiLGUvPTEwMjQpLE1hdGgucm91bmQoMTAwKmUpLzEwMCt0fWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1lW3RdO3JldHVybiBoKG4pP24uZnJvbXx8bi5maWVsZHx8dDpufXZhciBhLHMsbCxjLGQ9d2luZG93LmtlbmRvLHU9ZC51aS5XaWRnZXQsaD1lLmlzUGxhaW5PYmplY3QscD1lLnByb3h5LGY9ZS5leHRlbmQsZz1kLnN1cHBvcnQucGxhY2Vob2xkZXIsbT1kLnN1cHBvcnQuYnJvd3Nlcix2PWQuaXNGdW5jdGlvbixfPS8oXlxcL3xcXC8kKS9nLHk9XCJjaGFuZ2VcIix3PVwiYXBwbHlcIixiPVwiZXJyb3JcIixrPVwiY2xpY2tcIix4PVwiLmtlbmRvRmlsZUJyb3dzZXJcIixDPVwiLmtlbmRvQnJlYWRjcnVtYnNcIixTPVwiLmtlbmRvU2VhcmNoQm94XCIsVD1cIm5hbWVcIixEPVwic2l6ZVwiLEE9XCJ0eXBlXCIsRT17ZmllbGQ6QSxkaXI6XCJhc2NcIn0sTT1kLnRlbXBsYXRlKCc8bGkgY2xhc3M9XCJrLXRpbGUtZW1wdHlcIj48c3Ryb25nPiR7dGV4dH08L3N0cm9uZz48L2xpPicpLFA9JzxkaXYgY2xhc3M9XCJrLXdpZGdldCBrLWZpbGVicm93c2VyLXRvb2xiYXIgay1oZWFkZXIgay1mbG9hdHdyYXBcIj48ZGl2IGNsYXNzPVwiay10b29sYmFyLXdyYXBcIj4jIGlmIChzaG93VXBsb2FkKSB7ICMgPGRpdiBjbGFzcz1cImstd2lkZ2V0IGstdXBsb2FkXCI+PGRpdiBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb250ZXh0IGstdXBsb2FkLWJ1dHRvblwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstYWRkXCI+PC9zcGFuPiM9bWVzc2FnZXMudXBsb2FkRmlsZSM8aW5wdXQgdHlwZT1cImZpbGVcIiBuYW1lPVwiZmlsZVwiIC8+PC9kaXY+PC9kaXY+IyB9ICMjIGlmIChzaG93Q3JlYXRlKSB7ICM8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb25cIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWFkZGZvbGRlclwiIC8+PC9idXR0b24+IyB9ICMjIGlmIChzaG93RGVsZXRlKSB7ICM8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWljb24gay1zdGF0ZS1kaXNhYmxlZFwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstZGVsZXRlXCIgLz48L2J1dHRvbj4mbmJzcDsjIH0gIzwvZGl2PjxkaXYgY2xhc3M9XCJrLXRpbGVzLWFycmFuZ2VcIj48bGFiZWw+Iz1tZXNzYWdlcy5vcmRlckJ5IzogPHNlbGVjdCAvPjwvbGFiZWw+PC9hPjwvZGl2PjwvZGl2Pic7ZighMCxkLmRhdGEse3NjaGVtYXM6e2ZpbGVicm93c2VyOntkYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBlLml0ZW1zfHxlfHxbXX0sbW9kZWw6e2lkOlwibmFtZVwiLGZpZWxkczp7bmFtZTpcIm5hbWVcIixzaXplOlwic2l6ZVwiLHR5cGU6XCJ0eXBlXCJ9fX19fSksZighMCxkLmRhdGEse3RyYW5zcG9ydHM6e2ZpbGVicm93c2VyOmQuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2QuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm4uaW5pdC5jYWxsKHRoaXMsZS5leHRlbmQoITAse30sdGhpcy5vcHRpb25zLHQpKX0sX2NhbGw6ZnVuY3Rpb24odCxuKXtuLmRhdGE9ZS5leHRlbmQoe30sbi5kYXRhLHtwYXRoOnRoaXMub3B0aW9ucy5wYXRoKCl9KSx2KHRoaXMub3B0aW9uc1t0XSk/dGhpcy5vcHRpb25zW3RdLmNhbGwodGhpcyxuKTpkLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuW3RdLmNhbGwodGhpcyxuKX0scmVhZDpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwicmVhZFwiLGUpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcImNyZWF0ZVwiLGUpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJkZXN0cm95XCIsZSl9LHVwZGF0ZTpmdW5jdGlvbigpe30sb3B0aW9uczp7cmVhZDp7dHlwZTpcIlBPU1RcIn0sdXBkYXRlOnt0eXBlOlwiUE9TVFwifSxjcmVhdGU6e3R5cGU6XCJQT1NUXCJ9LGRlc3Ryb3k6e3R5cGU6XCJQT1NUXCJ9fX0pfX0pLGE9bS5tc2llJiY4Pm0udmVyc2lvbj9mdW5jdGlvbihlKXtyZXR1cm4gZS5vZmZzZXRUb3B9OmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9mZnNldFRvcC1lKHQpLmhlaWdodCgpfSxzPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fHt9LHUuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLWZpbGVicm93c2VyXCIpLG4uZWxlbWVudC5vbihrK3gsXCIuay1maWxlYnJvd3Nlci10b29sYmFyIGJ1dHRvbjpub3QoLmstc3RhdGUtZGlzYWJsZWQpOmhhcyguay1kZWxldGUpXCIscChuLl9kZWxldGVDbGljayxuKSkub24oayt4LFwiLmstZmlsZWJyb3dzZXItdG9vbGJhciBidXR0b246bm90KC5rLXN0YXRlLWRpc2FibGVkKTpoYXMoLmstYWRkZm9sZGVyKVwiLHAobi5fYWRkQ2xpY2ssbikpLm9uKFwia2V5ZG93blwiK3gsXCJsaS5rLXN0YXRlLXNlbGVjdGVkIGlucHV0XCIscChuLl9kaXJlY3RvcnlLZXlEb3duLG4pKS5vbihcImJsdXJcIit4LFwibGkuay1zdGF0ZS1zZWxlY3RlZCBpbnB1dFwiLHAobi5fZGlyZWN0b3J5Qmx1cixuKSksbi5fZGF0YVNvdXJjZSgpLG4ucmVmcmVzaCgpLG4ucGF0aChuLm9wdGlvbnMucGF0aCl9LG9wdGlvbnM6e25hbWU6XCJGaWxlQnJvd3NlclwiLG1lc3NhZ2VzOnt1cGxvYWRGaWxlOlwiVXBsb2FkXCIsb3JkZXJCeTpcIkFycmFuZ2UgYnlcIixvcmRlckJ5TmFtZTpcIk5hbWVcIixvcmRlckJ5U2l6ZTpcIlNpemVcIixkaXJlY3RvcnlOb3RGb3VuZDpcIkEgZGlyZWN0b3J5IHdpdGggdGhpcyBuYW1lIHdhcyBub3QgZm91bmQuXCIsZW1wdHlGb2xkZXI6XCJFbXB0eSBGb2xkZXJcIixkZWxldGVGaWxlOidBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiezB9XCI/JyxpbnZhbGlkRmlsZVR5cGU6J1RoZSBzZWxlY3RlZCBmaWxlIFwiezB9XCIgaXMgbm90IHZhbGlkLiBTdXBwb3J0ZWQgZmlsZSB0eXBlcyBhcmUgezF9Licsb3ZlcndyaXRlRmlsZTonQSBmaWxlIHdpdGggbmFtZSBcInswfVwiIGFscmVhZHkgZXhpc3RzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4gRG8geW91IHdhbnQgdG8gb3ZlcndyaXRlIGl0PycsZHJvcEZpbGVzSGVyZTpcImRyb3AgZmlsZSBoZXJlIHRvIHVwbG9hZFwiLHNlYXJjaDpcIlNlYXJjaFwifSx0cmFuc3BvcnQ6e30scGF0aDpcIi9cIixmaWxlVHlwZXM6XCIqLipcIn0sZXZlbnRzOltiLHksd10sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dS5mbi5kZXN0cm95LmNhbGwoZSksZS5kYXRhU291cmNlLnVuYmluZChiLGUuX2Vycm9ySGFuZGxlciksZS5lbGVtZW50LmFkZChlLmxpc3QpLmFkZChlLnRvb2xiYXIpLm9mZih4KSxkLmRlc3Ryb3koZS5lbGVtZW50KX0sdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMscj1uLl9zZWxlY3RlZEl0ZW0oKSxvPW4ub3B0aW9ucy50cmFuc3BvcnQuZmlsZVVybDtyZXR1cm4gciYmXCJmXCI9PT1yLmdldChBKT8oZT1pKG4ucGF0aCgpLHIuZ2V0KFQpKS5yZXBsYWNlKF8sXCJcIiksbyYmKGU9dihvKT9vKGUpOmQuZm9ybWF0KG8sZW5jb2RlVVJJQ29tcG9uZW50KGUpKSksZSk6dH0sX3NlbGVjdGVkSXRlbTpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGlzdFZpZXcsbj1lLnNlbGVjdCgpO3JldHVybiBuLmxlbmd0aD90aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQobi5hdHRyKGQuYXR0cihcInVpZFwiKSkpOnR9LF90b29sYmFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWQudGVtcGxhdGUoUCksaT10Lm9wdGlvbnMubWVzc2FnZXMscj1be3RleHQ6aS5vcmRlckJ5TmFtZSx2YWx1ZTpcIm5hbWVcIn0se3RleHQ6aS5vcmRlckJ5U2l6ZSx2YWx1ZTpcInNpemVcIn1dO3QudG9vbGJhcj1lKG4oe21lc3NhZ2VzOmksc2hvd1VwbG9hZDp0Lm9wdGlvbnMudHJhbnNwb3J0LnVwbG9hZFVybCxzaG93Q3JlYXRlOnQub3B0aW9ucy50cmFuc3BvcnQuY3JlYXRlLHNob3dEZWxldGU6dC5vcHRpb25zLnRyYW5zcG9ydC5kZXN0cm95fSkpLmFwcGVuZFRvKHQuZWxlbWVudCkuZmluZChcIi5rLXVwbG9hZCBpbnB1dFwiKS5rZW5kb1VwbG9hZCh7bXVsdGlwbGU6ITEsbG9jYWxpemF0aW9uOntkcm9wRmlsZXNIZXJlOmkuZHJvcEZpbGVzSGVyZX0sYXN5bmM6e3NhdmVVcmw6dC5vcHRpb25zLnRyYW5zcG9ydC51cGxvYWRVcmwsYXV0b1VwbG9hZDohMH0sdXBsb2FkOnAodC5fZmlsZVVwbG9hZCx0KSxlcnJvcjpmdW5jdGlvbihlKXt0Ll9lcnJvcih7eGhyOmUuWE1MSHR0cFJlcXVlc3Qsc3RhdHVzOlwiZXJyb3JcIn0pfX0pLmVuZCgpLHQudXBsb2FkPXQudG9vbGJhci5maW5kKFwiLmstdXBsb2FkIGlucHV0XCIpLmRhdGEoXCJrZW5kb1VwbG9hZFwiKSx0LmFycmFuZ2VCeT10LnRvb2xiYXIuZmluZChcIi5rLXRpbGVzLWFycmFuZ2Ugc2VsZWN0XCIpLmtlbmRvRHJvcERvd25MaXN0KHtkYXRhU291cmNlOnIsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsY2hhbmdlOmZ1bmN0aW9uKCl7dC5vcmRlckJ5KHRoaXMudmFsdWUoKSl9fSkuZGF0YShcImtlbmRvRHJvcERvd25MaXN0XCIpLHQuX2F0dGFjaERyb3B6b25lRXZlbnRzKCl9LF9hdHRhY2hEcm9wem9uZUV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLnRyYW5zcG9ydC51cGxvYWRVcmwmJihuKGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSxlLnByb3h5KHQuX2Ryb3BFbnRlcix0KSxlLnByb3h5KHQuX2Ryb3BMZWF2ZSx0KSksdC5fc2Nyb2xsSGFuZGxlcj1wKHQuX3Bvc2l0aW9uRHJvcHpvbmUsdCkpfSxfZHJvcEVudGVyOmZ1bmN0aW9uKCl7dGhpcy5fcG9zaXRpb25Ecm9wem9uZSgpLGUoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIreCx0aGlzLl9zY3JvbGxIYW5kbGVyKX0sX2Ryb3BMZWF2ZTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZURyb3B6b25lKCksZShkb2N1bWVudCkub2ZmKFwic2Nyb2xsXCIreCx0aGlzLl9zY3JvbGxIYW5kbGVyKX0sX3Bvc2l0aW9uRHJvcHpvbmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49dC5vZmZzZXQoKTtlLnRvb2xiYXIuZmluZChcIi5rLWRyb3B6b25lXCIpLmFkZENsYXNzKFwiay1maWxlYnJvd3Nlci1kcm9wem9uZVwiKS5vZmZzZXQobikuY3NzKHt3aWR0aDp0WzBdLmNsaWVudFdpZHRoLGhlaWdodDp0WzBdLmNsaWVudEhlaWdodCxsaW5lSGVpZ2h0OnRbMF0uY2xpZW50SGVpZ2h0K1wicHhcIn0pfSxfcmVtb3ZlRHJvcHpvbmU6ZnVuY3Rpb24oKXt0aGlzLnRvb2xiYXIuZmluZChcIi5rLWRyb3B6b25lXCIpLnJlbW92ZUNsYXNzKFwiay1maWxlYnJvd3Nlci1kcm9wem9uZVwiKS5jc3Moe3dpZHRoOlwiXCIsaGVpZ2h0OlwiXCIsbGluZUhlaWdodDpcIlwiLHRvcDpcIlwiLGxlZnQ6XCJcIn0pfSxfZGVsZXRlQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5saXN0Vmlldy5zZWxlY3QoKSxuPWQuZm9ybWF0KGUub3B0aW9ucy5tZXNzYWdlcy5kZWxldGVGaWxlLHQuZmluZChcInN0cm9uZ1wiKS50ZXh0KCkpO3QubGVuZ3RoJiZlLl9zaG93TWVzc2FnZShuLFwiY29uZmlybVwiKSYmZS5saXN0Vmlldy5yZW1vdmUodCl9LF9hZGRDbGljazpmdW5jdGlvbigpe3RoaXMuY3JlYXRlRGlyZWN0b3J5KCl9LF9nZXRGaWVsZE5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcy5kYXRhU291cmNlLnJlYWRlci5tb2RlbC5maWVsZHMsZSl9LF9maWxlVXBsb2FkOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZmlsZVR5cGVzLG89UmVnRXhwKChcIihcIityLnNwbGl0KFwiLFwiKS5qb2luKFwiKXwoXCIpK1wiKVwiKS5yZXBsYWNlKC9cXCpcXC4vZyxcIi4qLlwiKSxcImlcIiksYT1lLmZpbGVzWzBdLm5hbWUscz1ULGw9RDtvLnRlc3QoYSk/KGUuZGF0YT17cGF0aDpuLnBhdGgoKX0sdD1uLl9jcmVhdGVGaWxlKGEpLHQ/bi51cGxvYWQub25lKFwic3VjY2Vzc1wiLGZ1bmN0aW9uKGUpe3Quc2V0KHMsZS5yZXNwb25zZVtuLl9nZXRGaWVsZE5hbWUocyldKSx0LnNldChsLGUucmVzcG9uc2Vbbi5fZ2V0RmllbGROYW1lKGwpXSksbi5fdGlsZXM9bi5saXN0Vmlldy5pdGVtcygpLmZpbHRlcihcIltcIitkLmF0dHIoXCJ0eXBlXCIpK1wiPWZdXCIpfSk6ZS5wcmV2ZW50RGVmYXVsdCgpKTooZS5wcmV2ZW50RGVmYXVsdCgpLG4uX3Nob3dNZXNzYWdlKGQuZm9ybWF0KGkubWVzc2FnZXMuaW52YWxpZEZpbGVUeXBlLGEscikpKX0sX2ZpbmRGaWxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMuZGF0YVNvdXJjZS5kYXRhKCksbz1BLGE9VDtmb3IoZT1lLnRvTG93ZXJDYXNlKCksdD0wLGk9ci5sZW5ndGg7aT50O3QrKylpZihcImZcIj09PXJbdF0uZ2V0KG8pJiZyW3RdLmdldChhKS50b0xvd2VyQ2FzZSgpPT09ZSl7bj1yW3RdO2JyZWFrfXJldHVybiBufSxfY3JlYXRlRmlsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcyxyPTAsbz17fSxhPUEscz1pLmRhdGFTb3VyY2UudmlldygpLGw9aS5fZmluZEZpbGUoZSk7aWYobCYmIWkuX3Nob3dNZXNzYWdlKGQuZm9ybWF0KGkub3B0aW9ucy5tZXNzYWdlcy5vdmVyd3JpdGVGaWxlLGUpLFwiY29uZmlybVwiKSlyZXR1cm4gbnVsbDtpZihsKXJldHVybiBsO2Zvcih0PTAsbj1zLmxlbmd0aDtuPnQ7dCsrKWlmKFwiZlwiPT09c1t0XS5nZXQoYSkpe3I9dDticmVha31yZXR1cm4gb1thXT1cImZcIixvW1RdPWUsb1tEXT0wLGkuZGF0YVNvdXJjZS5pbnNlcnQoKytyLG8pfSxjcmVhdGVEaXJlY3Rvcnk6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcyxpPTAscj1BLG89VCxhPW4uZGF0YVNvdXJjZS5kYXRhKCkscz1uLl9uYW1lRGlyZWN0b3J5KCksbD1uZXcgbi5kYXRhU291cmNlLnJlYWRlci5tb2RlbDtmb3IoZT0wLHQ9YS5sZW5ndGg7dD5lO2UrKylcImRcIj09PWFbZV0uZ2V0KHIpJiYoaT1lKTtsLnNldChyLFwiZFwiKSxsLnNldChvLHMpLG4ubGlzdFZpZXcub25lKFwiZGF0YUJvdW5kXCIsZnVuY3Rpb24oKXt2YXIgZT1uLmxpc3RWaWV3Lml0ZW1zKCkuZmlsdGVyKFwiW1wiK2QuYXR0cihcInVpZFwiKStcIj1cIitsLnVpZCtcIl1cIiksdD1lLmZpbmQoXCJpbnB1dFwiKTtlLmxlbmd0aCYmdGhpcy5lZGl0KGUpLHRoaXMuZWxlbWVudC5zY3JvbGxUb3AoZS5hdHRyKFwib2Zmc2V0VG9wXCIpLXRoaXMuZWxlbWVudFswXS5vZmZzZXRIZWlnaHQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNlbGVjdCgpfSl9KS5vbmUoXCJzYXZlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tb2RlbC5nZXQobyk7dD9lLm1vZGVsLnNldChvLG4uX25hbWVFeGlzdHModCxsLnVpZCk/bi5fbmFtZURpcmVjdG9yeSgpOnQpOmUubW9kZWwuc2V0KG8scyl9KSxuLmRhdGFTb3VyY2UuaW5zZXJ0KCsraSxsKX0sX2RpcmVjdG9yeUtleURvd246ZnVuY3Rpb24oZSl7MTM9PWUua2V5Q29kZSYmZS5jdXJyZW50VGFyZ2V0LmJsdXIoKX0sX2RpcmVjdG9yeUJsdXI6ZnVuY3Rpb24oKXt0aGlzLmxpc3RWaWV3LnNhdmUoKX0sX25hbWVFeGlzdHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcy5kYXRhU291cmNlLmRhdGEoKSxvPUEsYT1UO2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKWlmKFwiZFwiPT09cltuXS5nZXQobykmJnJbbl0uZ2V0KGEpLnRvTG93ZXJDYXNlKCk9PT1lLnRvTG93ZXJDYXNlKCkmJnJbbl0udWlkIT09dClyZXR1cm4hMDtyZXR1cm4hMX0sX25hbWVEaXJlY3Rvcnk6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj1cIk5ldyBmb2xkZXJcIixvPXRoaXMuZGF0YVNvdXJjZS5kYXRhKCksYT1bXSxzPUEsbD1UO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKVwiZFwiPT09b1tuXS5nZXQocykmJm9bbl0uZ2V0KGwpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihyLnRvTG93ZXJDYXNlKCkpPi0xJiZhLnB1c2gob1tuXS5nZXQobCkpO2lmKGUuaW5BcnJheShyLGEpPi0xKXtuPTI7ZG8gdD1yK1wiIChcIituK1wiKVwiLG4rKzt3aGlsZShlLmluQXJyYXkodCxhKT4tMSk7cj10fXJldHVybiByfSxvcmRlckJ5OmZ1bmN0aW9uKGUpe3RoaXMuZGF0YVNvdXJjZS5zb3J0KFt7ZmllbGQ6QSxkaXI6XCJhc2NcIn0se2ZpZWxkOmUsZGlyOlwiYXNjXCJ9XSl9LHNlYXJjaDpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2UuZmlsdGVyKHtmaWVsZDpULG9wZXJhdG9yOlwiY29udGFpbnNcIix2YWx1ZTplfSl9LF9jb250ZW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lmxpc3Q9ZSgnPHVsIGNsYXNzPVwiay1yZXNldCBrLWZsb2F0cyBrLXRpbGVzXCIgLz4nKS5hcHBlbmRUbyh0LmVsZW1lbnQpLm9uKFwiZGJsY2xpY2tcIit4LFwibGlcIixwKHQuX2RibENsaWNrLHQpKSx0Lmxpc3RWaWV3PW5ldyBkLnVpLkxpc3RWaWV3KHQubGlzdCx7ZGF0YVNvdXJjZTp0LmRhdGFTb3VyY2UsdGVtcGxhdGU6dC5faXRlbVRtcGwoKSxlZGl0VGVtcGxhdGU6dC5fZWRpdFRtcGwoKSxzZWxlY3RhYmxlOiEwLGF1dG9CaW5kOiExLGRhdGFCaW5kaW5nOmZ1bmN0aW9uKGUpe3QudG9vbGJhci5maW5kKFwiLmstZGVsZXRlXCIpLnBhcmVudCgpLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSwoXCJyZW1vdmVcIj09PWUuYWN0aW9ufHxcInN5bmNcIj09PWUuYWN0aW9uKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxkYXRhQm91bmQ6ZnVuY3Rpb24oKXt0LmRhdGFTb3VyY2UudmlldygpLmxlbmd0aD90Ll90aWxlcz10aGlzLml0ZW1zKCkuZmlsdGVyKFwiW1wiK2QuYXR0cihcInR5cGVcIikrXCI9Zl1cIik6dGhpcy53cmFwcGVyLmFwcGVuZChNKHt0ZXh0OnQub3B0aW9ucy5tZXNzYWdlcy5lbXB0eUZvbGRlcn0pKX0sY2hhbmdlOnAodC5fbGlzdFZpZXdDaGFuZ2UsdCl9KX0sX2RibENsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuLHI9dGhpcyxvPWUodC5jdXJyZW50VGFyZ2V0KTtvLmhhc0NsYXNzKFwiay1lZGl0LWl0ZW1cIikmJnIuX2RpcmVjdG9yeUJsdXIoKSxvLmZpbHRlcihcIltcIitkLmF0dHIoXCJ0eXBlXCIpK1wiPWRdXCIpLmxlbmd0aD8obj1yLmRhdGFTb3VyY2UuZ2V0QnlVaWQoby5hdHRyKGQuYXR0cihcInVpZFwiKSkpLG4mJihyLnBhdGgoaShyLnBhdGgoKSxuLmdldChUKSkpLHIuYnJlYWRjcnVtYnMudmFsdWUoci5wYXRoKCkpKSk6by5maWx0ZXIoXCJbXCIrZC5hdHRyKFwidHlwZVwiKStcIj1mXVwiKS5sZW5ndGgmJnIudHJpZ2dlcih3KX0sX2xpc3RWaWV3Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc2VsZWN0ZWRJdGVtKCk7ZSYmKHRoaXMudG9vbGJhci5maW5kKFwiLmstZGVsZXRlXCIpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSxcImZcIj09PWUuZ2V0KEEpJiZ0aGlzLnRyaWdnZXIoeSkpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQub3B0aW9ucyxpPW4udHJhbnNwb3J0LHI9Zih7fSxFKSxvPXtmaWVsZDpULGRpcjpcImFzY1wifSxhPXt0eXBlOmkudHlwZXx8XCJmaWxlYnJvd3NlclwiLHNvcnQ6W3Isb119O2goaSkmJihpLnBhdGg9cCh0LnBhdGgsdCksYS50cmFuc3BvcnQ9aSksaChuLnNjaGVtYSk/YS5zY2hlbWE9bi5zY2hlbWE6aS50eXBlJiZoKGQuZGF0YS5zY2hlbWFzW2kudHlwZV0pJiYoZT1kLmRhdGEuc2NoZW1hc1tpLnR5cGVdKSx0LmRhdGFTb3VyY2UmJnQuX2Vycm9ySGFuZGxlcj90LmRhdGFTb3VyY2UudW5iaW5kKGIsdC5fZXJyb3JIYW5kbGVyKTp0Ll9lcnJvckhhbmRsZXI9cCh0Ll9lcnJvcix0KSx0LmRhdGFTb3VyY2U9ZC5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKGEpLmJpbmQoYix0Ll9lcnJvckhhbmRsZXIpfSxfbmF2aWdhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1lKCc8ZGl2IGNsYXNzPVwiay1mbG9hdHdyYXBcIj48aW5wdXQvPjxpbnB1dC8+PC9kaXY+JykuYXBwZW5kVG8odGhpcy5lbGVtZW50KTt0LmJyZWFkY3J1bWJzPW4uZmluZChcImlucHV0OmZpcnN0XCIpLmtlbmRvQnJlYWRjcnVtYnMoe3ZhbHVlOnQub3B0aW9ucy5wYXRoLGNoYW5nZTpmdW5jdGlvbigpe3QucGF0aCh0aGlzLnZhbHVlKCkpfX0pLmRhdGEoXCJrZW5kb0JyZWFkY3J1bWJzXCIpLHQuc2VhcmNoQm94PW4ucGFyZW50KCkuZmluZChcImlucHV0Omxhc3RcIikua2VuZG9TZWFyY2hCb3goe2xhYmVsOnQub3B0aW9ucy5tZXNzYWdlcy5zZWFyY2gsY2hhbmdlOmZ1bmN0aW9uKCl7dC5zZWFyY2godGhpcy52YWx1ZSgpKX19KS5kYXRhKFwia2VuZG9TZWFyY2hCb3hcIil9LF9lcnJvcjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXM7bi50cmlnZ2VyKGIsZSl8fCh0PWUueGhyLnN0YXR1cyxcImVycm9yXCI9PWUuc3RhdHVzP1wiNDA0XCI9PXQ/bi5fc2hvd01lc3NhZ2Uobi5vcHRpb25zLm1lc3NhZ2VzLmRpcmVjdG9yeU5vdEZvdW5kKTpcIjBcIiE9dCYmbi5fc2hvd01lc3NhZ2UoXCJFcnJvciEgVGhlIHJlcXVlc3RlZCBVUkwgcmV0dXJuZWQgXCIrdCtcIiAtIFwiK2UueGhyLnN0YXR1c1RleHQpOlwidGltZW91dFwiPT10JiZuLl9zaG93TWVzc2FnZShcIkVycm9yISBTZXJ2ZXIgdGltZW91dC5cIikpfSxfc2hvd01lc3NhZ2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gd2luZG93W3R8fFwiYWxlcnRcIl0oZSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX25hdmlnYXRpb24oKSxlLl90b29sYmFyKCksZS5fY29udGVudCgpfSxfZWRpdFRtcGw6ZnVuY3Rpb24oKXt2YXIgZT0nPGxpIGNsYXNzPVwiay10aWxlIGstc3RhdGUtc2VsZWN0ZWRcIiAnK2QuYXR0cihcInVpZFwiKSsnPVwiIz11aWQjXCIgJztyZXR1cm4gZSs9ZC5hdHRyKFwidHlwZVwiKSsnPVwiJHsnK0ErJ31cIj4nLGUrPVwiI2lmKFwiK0ErJyA9PSBcImRcIikgeyAjJyxlKz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZvbGRlclwiPjwvc3Bhbj48L2Rpdj4nLGUrPVwiI31lbHNleyNcIixlKz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWxvYWRpbmdcIj48L3NwYW4+PC9kaXY+JyxlKz1cIiN9I1wiLGUrPVwiI2lmKFwiK0ErJyA9PSBcImRcIikgeyAjJyxlKz0nPGlucHV0IGNsYXNzPVwiay1pbnB1dFwiICcrZC5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytUKydcIi8+JyxlKz1cIiN9I1wiLGUrPVwiPC9saT5cIixwKGQudGVtcGxhdGUoZSkse3NpemVGb3JtYXR0ZXI6cn0pfSxfaXRlbVRtcGw6ZnVuY3Rpb24oKXt2YXIgZT0nPGxpIGNsYXNzPVwiay10aWxlXCIgJytkLmF0dHIoXCJ1aWRcIikrJz1cIiM9dWlkI1wiICc7cmV0dXJuIGUrPWQuYXR0cihcInR5cGVcIikrJz1cIiR7JytBKyd9XCI+JyxlKz1cIiNpZihcIitBKycgPT0gXCJkXCIpIHsgIycsZSs9JzxkaXYgY2xhc3M9XCJrLXRodW1iXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1mb2xkZXJcIj48L3NwYW4+PC9kaXY+JyxlKz1cIiN9ZWxzZXsjXCIsZSs9JzxkaXYgY2xhc3M9XCJrLXRodW1iXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWxlXCI+PC9zcGFuPjwvZGl2PicsZSs9XCIjfSNcIixlKz1cIjxzdHJvbmc+JHtcIitUK1wifTwvc3Ryb25nPlwiLGUrPVwiI2lmKFwiK0ErJyA9PSBcImZcIikgeyAjIDxzcGFuIGNsYXNzPVwiay1maWxlc2l6ZVwiPiR7dGhpcy5zaXplRm9ybWF0dGVyKCcrRCtcIil9PC9zcGFuPiAjfSNcIixlKz1cIjwvbGk+XCIscChkLnRlbXBsYXRlKGUpLHtzaXplRm9ybWF0dGVyOnJ9KX0scGF0aDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fcGF0aHx8XCJcIjtyZXR1cm4gZSE9PXQ/KG4uX3BhdGg9ZS5yZXBsYWNlKF8sXCJcIikrXCIvXCIsbi5kYXRhU291cmNlLnJlYWQoe3BhdGg6bi5fcGF0aH0pLHQpOihpJiYoaT1pLnJlcGxhY2UoXyxcIlwiKSksXCIvXCI9PT1pfHxcIlwiPT09aT9cIlwiOmkrXCIvXCIpfX0pLGw9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9dHx8e30sdS5mbi5pbml0LmNhbGwobixlLHQpLGcmJm4uZWxlbWVudC5hdHRyKFwicGxhY2Vob2xkZXJcIixuLm9wdGlvbnMubGFiZWwpLG4uX3dyYXBwZXIoKSxuLmVsZW1lbnQub24oXCJrZXlkb3duXCIrUyxwKG4uX2tleWRvd24sbikpLm9uKFwiY2hhbmdlXCIrUyxwKG4uX3VwZGF0ZVZhbHVlLG4pKSxuLndyYXBwZXIub24oaytTLFwiYVwiLHAobi5fY2xpY2ssbikpLGd8fG4uZWxlbWVudC5vbihcImZvY3VzXCIrUyxwKG4uX2ZvY3VzLG4pKS5vbihcImJsdXJcIitTLHAobi5fYmx1cixuKSl9LG9wdGlvbnM6e25hbWU6XCJTZWFyY2hCb3hcIixsYWJlbDpcIlNlYXJjaFwiLHZhbHVlOlwiXCJ9LGV2ZW50czpbeV0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS53cmFwcGVyLmFkZChlLmVsZW1lbnQpLmFkZChlLmxhYmVsKS5vZmYoUyksdS5mbi5kZXN0cm95LmNhbGwoZSl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpezEzPT09ZS5rZXlDb2RlJiZ0aGlzLl91cGRhdGVWYWx1ZSgpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3VwZGF0ZVZhbHVlKCl9LF91cGRhdGVWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQudmFsKCk7dCE9PWUudmFsdWUoKSYmKGUudmFsdWUodCksZS50cmlnZ2VyKHkpKX0sX2JsdXI6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVWYWx1ZSgpLHRoaXMuX3RvZ2dsZUxhYmVsKCl9LF90b2dnbGVMYWJlbDpmdW5jdGlvbigpe2d8fHRoaXMubGFiZWwudG9nZ2xlKCF0aGlzLmVsZW1lbnQudmFsKCkpfSxfZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmxhYmVsLmhpZGUoKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQsbj10LnBhcmVudHMoXCIuay1zZWFyY2gtd3JhcFwiKTt0WzBdLnN0eWxlLndpZHRoPVwiXCIsdC5hZGRDbGFzcyhcImstaW5wdXRcIiksbi5sZW5ndGh8fChuPXQud3JhcChlKCc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay1zZWFyY2gtd3JhcCBrLXRleHRib3hcIi8+JykpLnBhcmVudCgpLGd8fGUoJzxsYWJlbCBzdHlsZT1cImRpc3BsYXk6YmxvY2tcIj4nK3RoaXMub3B0aW9ucy5sYWJlbCtcIjwvbGFiZWw+XCIpLmluc2VydEJlZm9yZSh0KSxlKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1pY29uIGstaS1zZWFyY2ggay1zZWFyY2hcIi8+JykuYXBwZW5kVG8obikpLHRoaXMud3JhcHBlcj1uLHRoaXMubGFiZWw9bi5maW5kKFwiPmxhYmVsXCIpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlIT09dD8obi5vcHRpb25zLnZhbHVlPWUsbi5lbGVtZW50LnZhbChlKSxuLl90b2dnbGVMYWJlbCgpLHQpOm4ub3B0aW9ucy52YWx1ZX19KSxjPXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fHt9LHUuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLl93cmFwcGVyKCksbi53cmFwcGVyLm9uKFwiZm9jdXNcIitDLFwiaW5wdXRcIixwKG4uX2ZvY3VzLG4pKS5vbihcImJsdXJcIitDLFwiaW5wdXRcIixwKG4uX2JsdXIsbikpLm9uKFwia2V5ZG93blwiK0MsXCJpbnB1dFwiLHAobi5fa2V5ZG93bixuKSkub24oaytDLFwiYS5rLWktYXJyb3ctbjpmaXJzdFwiLHAobi5fcm9vdENsaWNrLG4pKS5vbihrK0MsXCJhOm5vdCguay1pLWFycm93LW4pXCIscChuLl9jbGljayxuKSksbi52YWx1ZShuLm9wdGlvbnMudmFsdWUpfSxvcHRpb25zOntuYW1lOlwiQnJlYWRjcnVtYnNcIixnYXA6NTB9LGV2ZW50czpbeV0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dS5mbi5kZXN0cm95LmNhbGwoZSksZS53cmFwcGVyLmFkZChlLndyYXBwZXIuZmluZChcImlucHV0XCIpKS5hZGQoZS53cmFwcGVyLmZpbmQoXCJhXCIpKS5vZmYoQyl9LF91cGRhdGU6ZnVuY3Rpb24oZSl7ZT1cIi9cIj09PShlfHxcIlwiKS5jaGFyQXQoMCk/ZTpcIi9cIisoZXx8XCJcIiksZSE9PXRoaXMudmFsdWUoKSYmKHRoaXMudmFsdWUoZSksdGhpcy50cmlnZ2VyKHkpKX0sX2NsaWNrOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0aGlzLl91cGRhdGUodGhpcy5fcGF0aChlKHQudGFyZ2V0KS5wcmV2QWxsKFwiYTpub3QoLmstaS1hcnJvdy1uKVwiKS5hZGRCYWNrKCkpKX0sX3Jvb3RDbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fdXBkYXRlKFwiXCIpfSxfZm9jdXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50O2Uub3ZlcmxheS5oaWRlKCksZS5lbGVtZW50LnZhbChlLnZhbHVlKCkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNlbGVjdCgpfSl9LF9ibHVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3ZlcmxheS5pcyhcIjp2aXNpYmxlXCIpKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50LG49dC52YWwoKS5yZXBsYWNlKC9cXC97Mix9L2csXCIvXCIpO2Uub3ZlcmxheS5zaG93KCksdC52YWwoXCJcIiksZS5fdXBkYXRlKG4pfX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsxMz09PWUua2V5Q29kZSYmKHQuX2JsdXIoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5vdmVybGF5LmZpbmQoXCJhOmZpcnN0XCIpLmZvY3VzKCl9KSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLmVsZW1lbnQsaT1uLnBhcmVudHMoXCIuay1icmVhZGNydW1ic1wiKTtuWzBdLnN0eWxlLndpZHRoPVwiXCIsbi5hZGRDbGFzcyhcImstaW5wdXRcIiksaS5sZW5ndGh8fChpPW4ud3JhcChlKCc8ZGl2IGNsYXNzPVwiay13aWRnZXQgay1icmVhZGNydW1icyBrLXRleHRib3hcIi8+JykpLnBhcmVudCgpKSx0PWkuZmluZChcIi5rLWJyZWFkY3J1bWJzLXdyYXBcIiksdC5sZW5ndGh8fCh0PWUoJzxkaXYgY2xhc3M9XCJrLWJyZWFkY3J1bWJzLXdyYXBcIi8+JykuYXBwZW5kVG8oaSkpLHRoaXMud3JhcHBlcj1pLHRoaXMub3ZlcmxheT10fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIG4saSxyLG8sYT1cIlwiLHM9dGhpcy52YWx1ZSgpO2ZvcihzIT09dCYmcy5tYXRjaCgvXlxcLy8pfHwocz1cIi9cIisoc3x8XCJcIikpLG49cy5zcGxpdChcIi9cIikscj0wLG89bi5sZW5ndGg7bz5yO3IrKylpPW5bcl0saSYmKGF8fChhKz0nPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctblwiPnJvb3Q8L2E+JyksYSs9JzxhIGNsYXNzPVwiay1saW5rXCIgaHJlZj1cIiNcIj4nK25bcl0rXCI8L2E+XCIsYSs9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+Jmd0Ozwvc3Bhbj4nKTt0aGlzLm92ZXJsYXkuZW1wdHkoKS5hcHBlbmQoZShhKSksdGhpcy5fYWRqdXN0U2VjdGlvbldpZHRoKCl9LF9hZGp1c3RTZWN0aW9uV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLndyYXBwZXIscj1pLndpZHRoKCktbi5vcHRpb25zLmdhcCxvPW4ub3ZlcmxheS5maW5kKFwiYVwiKTtvLmVhY2goZnVuY3Rpb24obil7dD1lKHRoaXMpLHQucGFyZW50KCkud2lkdGgoKT5yJiYobj09by5sZW5ndGgtMT90LndpZHRoKHIpOnQucHJldigpLmFkZEJhY2soKS5oaWRlKCkpfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09dD8odGhpcy5fdmFsdWU9ZS5yZXBsYWNlKC9cXC97Mix9L2csXCIvXCIpLHRoaXMucmVmcmVzaCgpLHQpOnRoaXMuX3ZhbHVlXG59LF9wYXRoOmZ1bmN0aW9uKHQpe3JldHVyblwiL1wiK2UubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIGUodCkudGV4dCgpfSkuam9pbihcIi9cIil9fSksZC51aS5wbHVnaW4ocyksZC51aS5wbHVnaW4oYyksZC51aS5wbHVnaW4obCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLG4pe3JldHVybiBlIT09dCYmZS5tYXRjaCgvXFwvJC8pfHwoZT0oZXx8XCJcIikrXCIvXCIpLGUrbn1mdW5jdGlvbiBpKGUpe2lmKCFlKXJldHVyblwiXCI7dmFyIHQ9XCIgYnl0ZXNcIjtyZXR1cm4gZT49MTA3Mzc0MTgyND8odD1cIiBHQlwiLGUvPTEwNzM3NDE4MjQpOmU+PTEwNDg1NzY/KHQ9XCIgTUJcIixlLz0xMDQ4NTc2KTplPj0xMDI0JiYodD1cIiBLQlwiLGUvPTEwMjQpLE1hdGgucm91bmQoMTAwKmUpLzEwMCt0fXZhciByLG8sYT13aW5kb3cua2VuZG8scz1hLnVpLkZpbGVCcm93c2VyLGw9ZS5pc1BsYWluT2JqZWN0LGM9ZS5wcm94eSxkPWUuZXh0ZW5kLHU9YS5zdXBwb3J0LmJyb3dzZXIsaD1hLmlzRnVuY3Rpb24scD0vKF5cXC98XFwvJCkvZyxmPVwiZXJyb3JcIixnPVwiLmtlbmRvSW1hZ2VCcm93c2VyXCIsbT1cIm5hbWVcIix2PVwic2l6ZVwiLF89XCJ0eXBlXCIseT17ZmllbGQ6XyxkaXI6XCJhc2NcIn0sdz1hLnRlbXBsYXRlKCc8bGkgY2xhc3M9XCJrLXRpbGUtZW1wdHlcIj48c3Ryb25nPiR7dGV4dH08L3N0cm9uZz48L2xpPicpO2QoITAsYS5kYXRhLHtzY2hlbWFzOntpbWFnZWJyb3dzZXI6e2RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXRlbXN8fGV8fFtdfSxtb2RlbDp7aWQ6XCJuYW1lXCIsZmllbGRzOntuYW1lOlwibmFtZVwiLHNpemU6XCJzaXplXCIsdHlwZTpcInR5cGVcIn19fX19KSxkKCEwLGEuZGF0YSx7dHJhbnNwb3J0czp7aW1hZ2Vicm93c2VyOmEuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2EuZGF0YS5SZW1vdGVUcmFuc3BvcnQuZm4uaW5pdC5jYWxsKHRoaXMsZS5leHRlbmQoITAse30sdGhpcy5vcHRpb25zLHQpKX0sX2NhbGw6ZnVuY3Rpb24odCxuKXtuLmRhdGE9ZS5leHRlbmQoe30sbi5kYXRhLHtwYXRoOnRoaXMub3B0aW9ucy5wYXRoKCl9KSxoKHRoaXMub3B0aW9uc1t0XSk/dGhpcy5vcHRpb25zW3RdLmNhbGwodGhpcyxuKTphLmRhdGEuUmVtb3RlVHJhbnNwb3J0LmZuW3RdLmNhbGwodGhpcyxuKX0scmVhZDpmdW5jdGlvbihlKXt0aGlzLl9jYWxsKFwicmVhZFwiLGUpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7dGhpcy5fY2FsbChcImNyZWF0ZVwiLGUpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RoaXMuX2NhbGwoXCJkZXN0cm95XCIsZSl9LHVwZGF0ZTpmdW5jdGlvbigpe30sb3B0aW9uczp7cmVhZDp7dHlwZTpcIlBPU1RcIn0sdXBkYXRlOnt0eXBlOlwiUE9TVFwifSxjcmVhdGU6e3R5cGU6XCJQT1NUXCJ9LGRlc3Ryb3k6e3R5cGU6XCJQT1NUXCJ9fX0pfX0pLHI9dS5tc2llJiY4PnUudmVyc2lvbj9mdW5jdGlvbihlKXtyZXR1cm4gZS5vZmZzZXRUb3B9OmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9mZnNldFRvcC1lKHQpLmhlaWdodCgpfSxvPXMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0PXR8fHt9LHMuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLWltYWdlYnJvd3NlclwiKX0sb3B0aW9uczp7bmFtZTpcIkltYWdlQnJvd3NlclwiLGZpbGVUeXBlczpcIioucG5nLCouZ2lmLCouanBnLCouanBlZ1wifSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLGk9dGhpcyxyPWkuX3NlbGVjdGVkSXRlbSgpLG89aS5vcHRpb25zLnRyYW5zcG9ydC5pbWFnZVVybDtyZXR1cm4gciYmXCJmXCI9PT1yLmdldChfKT8oZT1uKGkucGF0aCgpLHIuZ2V0KG0pKS5yZXBsYWNlKHAsXCJcIiksbyYmKGU9aChvKT9vKGUpOmEuZm9ybWF0KG8sZW5jb2RlVVJJQ29tcG9uZW50KGUpKSksZSk6dH0sX2ZpbGVVcGxvYWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLHI9aS5maWxlVHlwZXMsbz1SZWdFeHAoKFwiKFwiK3Iuc3BsaXQoXCIsXCIpLmpvaW4oXCIpfChcIikrXCIpXCIpLnJlcGxhY2UoL1xcKlxcLi9nLFwiLiouXCIpLFwiaVwiKSxzPWUuZmlsZXNbMF0ubmFtZSxsPW0sYz12O28udGVzdChzKT8oZS5kYXRhPXtwYXRoOm4ucGF0aCgpfSx0PW4uX2NyZWF0ZUZpbGUocyksdD8odC5fdXBsb2FkaW5nPSEwLG4udXBsb2FkLm9uZShcInN1Y2Nlc3NcIixmdW5jdGlvbihlKXtkZWxldGUgdC5fdXBsb2FkaW5nLHQuc2V0KGwsZS5yZXNwb25zZVtuLl9nZXRGaWVsZE5hbWUobCldKSx0LnNldChjLGUucmVzcG9uc2Vbbi5fZ2V0RmllbGROYW1lKGMpXSksbi5fdGlsZXM9bi5saXN0Vmlldy5pdGVtcygpLmZpbHRlcihcIltcIithLmF0dHIoXCJ0eXBlXCIpK1wiPWZdXCIpLG4uX3Njcm9sbCgpfSkpOmUucHJldmVudERlZmF1bHQoKSk6KGUucHJldmVudERlZmF1bHQoKSxuLl9zaG93TWVzc2FnZShhLmZvcm1hdChpLm1lc3NhZ2VzLmludmFsaWRGaWxlVHlwZSxzLHIpKSl9LF9jb250ZW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lmxpc3Q9ZSgnPHVsIGNsYXNzPVwiay1yZXNldCBrLWZsb2F0cyBrLXRpbGVzXCIgLz4nKS5hcHBlbmRUbyh0LmVsZW1lbnQpLm9uKFwic2Nyb2xsXCIrZyxjKHQuX3Njcm9sbCx0KSkub24oXCJkYmxjbGlja1wiK2csXCJsaVwiLGModC5fZGJsQ2xpY2ssdCkpLHQubGlzdFZpZXc9bmV3IGEudWkuTGlzdFZpZXcodC5saXN0LHtkYXRhU291cmNlOnQuZGF0YVNvdXJjZSx0ZW1wbGF0ZTp0Ll9pdGVtVG1wbCgpLGVkaXRUZW1wbGF0ZTp0Ll9lZGl0VG1wbCgpLHNlbGVjdGFibGU6ITAsYXV0b0JpbmQ6ITEsZGF0YUJpbmRpbmc6ZnVuY3Rpb24oZSl7dC50b29sYmFyLmZpbmQoXCIuay1kZWxldGVcIikucGFyZW50KCkuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLChcInJlbW92ZVwiPT09ZS5hY3Rpb258fFwic3luY1wiPT09ZS5hY3Rpb24pJiZlLnByZXZlbnREZWZhdWx0KCl9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3QuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoPyh0Ll90aWxlcz10aGlzLml0ZW1zKCkuZmlsdGVyKFwiW1wiK2EuYXR0cihcInR5cGVcIikrXCI9Zl1cIiksdC5fc2Nyb2xsKCkpOnRoaXMud3JhcHBlci5hcHBlbmQodyh7dGV4dDp0Lm9wdGlvbnMubWVzc2FnZXMuZW1wdHlGb2xkZXJ9KSl9LGNoYW5nZTpjKHQuX2xpc3RWaWV3Q2hhbmdlLHQpfSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5vcHRpb25zLGk9bi50cmFuc3BvcnQscj1kKHt9LHkpLG89e2ZpZWxkOm0sZGlyOlwiYXNjXCJ9LHM9e3R5cGU6aS50eXBlfHxcImltYWdlYnJvd3NlclwiLHNvcnQ6W3Isb119O2woaSkmJihpLnBhdGg9Yyh0LnBhdGgsdCkscy50cmFuc3BvcnQ9aSksbChuLnNjaGVtYSk/cy5zY2hlbWE9bi5zY2hlbWE6aS50eXBlJiZsKGEuZGF0YS5zY2hlbWFzW2kudHlwZV0pJiYoZT1hLmRhdGEuc2NoZW1hc1tpLnR5cGVdKSx0LmRhdGFTb3VyY2UmJnQuX2Vycm9ySGFuZGxlcj90LmRhdGFTb3VyY2UudW5iaW5kKGYsdC5fZXJyb3JIYW5kbGVyKTp0Ll9lcnJvckhhbmRsZXI9Yyh0Ll9lcnJvcix0KSx0LmRhdGFTb3VyY2U9YS5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHMpLmJpbmQoZix0Ll9lcnJvckhhbmRsZXIpfSxfbG9hZEltYWdlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQpLHI9bi5kYXRhU291cmNlLmdldEJ5VWlkKGkuYXR0cihhLmF0dHIoXCJ1aWRcIikpKSxvPXIuZ2V0KG0pLHM9bi5vcHRpb25zLnRyYW5zcG9ydC50aHVtYm5haWxVcmwsbD1lKFwiPGltZyAvPlwiLHthbHQ6b30pLGM9XCI/XCI7ci5fdXBsb2FkaW5nfHwobC5oaWRlKCkub24oXCJsb2FkXCIrZyxmdW5jdGlvbigpe2UodGhpcykucHJldigpLnJlbW92ZSgpLmVuZCgpLmFkZENsYXNzKFwiay1pbWFnZVwiKS5mYWRlSW4oKX0pLGkuZmluZChcIi5rLWxvYWRpbmdcIikuYWZ0ZXIobCksaChzKT9zPXMobi5wYXRoKCksZW5jb2RlVVJJQ29tcG9uZW50KG8pKToocy5pbmRleE9mKFwiP1wiKT49MCYmKGM9XCImXCIpLHM9cytjK1wicGF0aD1cIituLnBhdGgoKStlbmNvZGVVUklDb21wb25lbnQobykpLGwuYXR0cihcInNyY1wiLHMpLHQubG9hZGVkPSEwKX0sX3Njcm9sbDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5vcHRpb25zLnRyYW5zcG9ydCYmZS5vcHRpb25zLnRyYW5zcG9ydC50aHVtYm5haWxVcmwmJihjbGVhclRpbWVvdXQoZS5fdGltZW91dCksZS5fdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIG49ZS5saXN0Lm91dGVySGVpZ2h0KCksaT1lLmxpc3Quc2Nyb2xsVG9wKCksbz1pK247ZS5fdGlsZXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXIodGhpcyksYT1uK3RoaXMub2Zmc2V0SGVpZ2h0O3JldHVybihuPj1pJiZvPm58fGE+PWkmJm8+YSkmJmUuX2xvYWRJbWFnZSh0aGlzKSxuPm8/ITE6dH0pLGUuX3RpbGVzPWUuX3RpbGVzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiF0aGlzLmxvYWRlZH0pfSwyNTApKX0sX2l0ZW1UbXBsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PSc8bGkgY2xhc3M9XCJrLXRpbGVcIiAnK2EuYXR0cihcInVpZFwiKSsnPVwiIz11aWQjXCIgJztyZXR1cm4gdCs9YS5hdHRyKFwidHlwZVwiKSsnPVwiJHsnK18rJ31cIj4nLHQrPVwiI2lmKFwiK18rJyA9PSBcImRcIikgeyAjJyx0Kz0nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZvbGRlclwiPjwvc3Bhbj48L2Rpdj4nLHQrPVwiI31lbHNleyNcIix0Kz1lLm9wdGlvbnMudHJhbnNwb3J0JiZlLm9wdGlvbnMudHJhbnNwb3J0LnRodW1ibmFpbFVybD8nPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWxvYWRpbmdcIj48L3NwYW4+PC9kaXY+JzonPGRpdiBjbGFzcz1cImstdGh1bWJcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWZpbGVcIj48L3NwYW4+PC9kaXY+Jyx0Kz1cIiN9I1wiLHQrPVwiPHN0cm9uZz4ke1wiK20rXCJ9PC9zdHJvbmc+XCIsdCs9XCIjaWYoXCIrXysnID09IFwiZlwiKSB7ICMgPHNwYW4gY2xhc3M9XCJrLWZpbGVzaXplXCI+JHt0aGlzLnNpemVGb3JtYXR0ZXIoJyt2K1wiKX08L3NwYW4+ICN9I1wiLHQrPVwiPC9saT5cIixjKGEudGVtcGxhdGUodCkse3NpemVGb3JtYXR0ZXI6aX0pfX0pLGEudWkucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGE9d2luZG93LmtlbmRvLHM9YS5DbGFzcyxsPWEudWkuV2lkZ2V0LGM9YS5zdXBwb3J0Lm1vYmlsZU9TLGQ9YS5zdXBwb3J0LmJyb3dzZXIsdT1lLmV4dGVuZCxoPWUucHJveHkscD1hLmRlZXBFeHRlbmQsZj1cIi5rZW5kb0VkaXRvclwiLGc9YS5rZXlzLG09cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV9LGdldEh0bWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGEudGVtcGxhdGUoZS50ZW1wbGF0ZSx7dXNlV2l0aEJsb2NrOiExfSkoZSl9fSksdj17ZWRpdG9yV3JhcHBlclRlbXBsYXRlOic8dGFibGUgY2VsbHNwYWNpbmc9XCI0XCIgY2VsbHBhZGRpbmc9XCIwXCIgY2xhc3M9XCJrLXdpZGdldCBrLWVkaXRvciBrLWhlYWRlclwiIHJvbGU9XCJwcmVzZW50YXRpb25cIj48dGJvZHk+PHRyIHJvbGU9XCJwcmVzZW50YXRpb25cIj48dGQgY2xhc3M9XCJrLWVkaXRvci10b29sYmFyLXdyYXBcIiByb2xlPVwicHJlc2VudGF0aW9uXCI+PHVsIGNsYXNzPVwiay1lZGl0b3ItdG9vbGJhclwiIHJvbGU9XCJ0b29sYmFyXCIgLz48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz1cImstZWRpdGFibGUtYXJlYVwiIC8+PC90cj48L3Rib2R5PjwvdGFibGU+JyxidXR0b25UZW1wbGF0ZTonPGEgaHJlZj1cIlwiIHJvbGU9XCJidXR0b25cIiBjbGFzcz1cImstdG9vbFwiIz0gZGF0YS5wb3B1cCA/IFwiIGRhdGEtcG9wdXBcIiA6IFwiXCIgIyB1bnNlbGVjdGFibGU9XCJvblwiIHRpdGxlPVwiIz0gZGF0YS50aXRsZSAjXCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstdG9vbC1pY29uICM9IGRhdGEuY3NzQ2xhc3MgI1wiPiM9IGRhdGEudGl0bGUgIzwvc3Bhbj48L2E+Jyxjb2xvclBpY2tlclRlbXBsYXRlOic8ZGl2IGNsYXNzPVwiay1jb2xvcnBpY2tlciAjPSBkYXRhLmNzc0NsYXNzICNcIiAvPicsY29tYm9Cb3hUZW1wbGF0ZTonPHNlbGVjdCB0aXRsZT1cIiM9IGRhdGEudGl0bGUgI1wiIGNsYXNzPVwiIz0gZGF0YS5jc3NDbGFzcyAjXCIgLz4nLGRyb3BEb3duTGlzdFRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstZWRpdG9yLWRyb3Bkb3duXCI+PHNlbGVjdCB0aXRsZT1cIiM9IGRhdGEudGl0bGUgI1wiIGNsYXNzPVwiIz0gZGF0YS5jc3NDbGFzcyAjXCIgLz48L3NwYW4+JyxzZXBhcmF0b3JUZW1wbGF0ZTonPHNwYW4gY2xhc3M9XCJrLXNlcGFyYXRvclwiIC8+Jyxmb3JtYXRCeU5hbWU6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGk9MDtuLmxlbmd0aD5pO2krKylpZihlLmluQXJyYXkodCxuW2ldLnRhZ3MpPj0wKXJldHVybiBuW2ldfSxyZWdpc3RlclRvb2w6ZnVuY3Rpb24oZSx0KXt2YXIgbj10Lm9wdGlvbnM7biYmbi50ZW1wbGF0ZSYmKG4udGVtcGxhdGUub3B0aW9ucy5jc3NDbGFzcz1cImstXCIrZSksdC5uYW1lfHwodC5vcHRpb25zLm5hbWU9ZSx0Lm5hbWU9ZS50b0xvd2VyQ2FzZSgpKSxiLmRlZmF1bHRUb29sc1tlXT10fSxyZWdpc3RlckZvcm1hdDpmdW5jdGlvbihlLHQpe2IuZm4ub3B0aW9ucy5mb3JtYXRzW2VdPXR9fSxfPXtib2xkOlwiQm9sZFwiLGl0YWxpYzpcIkl0YWxpY1wiLHVuZGVybGluZTpcIlVuZGVybGluZVwiLHN0cmlrZXRocm91Z2g6XCJTdHJpa2V0aHJvdWdoXCIsc3VwZXJzY3JpcHQ6XCJTdXBlcnNjcmlwdFwiLHN1YnNjcmlwdDpcIlN1YnNjcmlwdFwiLGp1c3RpZnlDZW50ZXI6XCJDZW50ZXIgdGV4dFwiLGp1c3RpZnlMZWZ0OlwiQWxpZ24gdGV4dCBsZWZ0XCIsanVzdGlmeVJpZ2h0OlwiQWxpZ24gdGV4dCByaWdodFwiLGp1c3RpZnlGdWxsOlwiSnVzdGlmeVwiLGluc2VydFVub3JkZXJlZExpc3Q6XCJJbnNlcnQgdW5vcmRlcmVkIGxpc3RcIixpbnNlcnRPcmRlcmVkTGlzdDpcIkluc2VydCBvcmRlcmVkIGxpc3RcIixpbmRlbnQ6XCJJbmRlbnRcIixvdXRkZW50OlwiT3V0ZGVudFwiLGNyZWF0ZUxpbms6XCJJbnNlcnQgaHlwZXJsaW5rXCIsdW5saW5rOlwiUmVtb3ZlIGh5cGVybGlua1wiLGluc2VydEltYWdlOlwiSW5zZXJ0IGltYWdlXCIsaW5zZXJ0RmlsZTpcIkluc2VydCBmaWxlXCIsaW5zZXJ0SHRtbDpcIkluc2VydCBIVE1MXCIsdmlld0h0bWw6XCJWaWV3IEhUTUxcIixmb250TmFtZTpcIlNlbGVjdCBmb250IGZhbWlseVwiLGZvbnROYW1lSW5oZXJpdDpcIihpbmhlcml0ZWQgZm9udClcIixmb250U2l6ZTpcIlNlbGVjdCBmb250IHNpemVcIixmb250U2l6ZUluaGVyaXQ6XCIoaW5oZXJpdGVkIHNpemUpXCIsZm9ybWF0QmxvY2s6XCJGb3JtYXRcIixmb3JtYXR0aW5nOlwiRm9ybWF0XCIsZm9yZUNvbG9yOlwiQ29sb3JcIixiYWNrQ29sb3I6XCJCYWNrZ3JvdW5kIGNvbG9yXCIsc3R5bGU6XCJTdHlsZXNcIixlbXB0eUZvbGRlcjpcIkVtcHR5IEZvbGRlclwiLHVwbG9hZEZpbGU6XCJVcGxvYWRcIixvcmRlckJ5OlwiQXJyYW5nZSBieTpcIixvcmRlckJ5U2l6ZTpcIlNpemVcIixvcmRlckJ5TmFtZTpcIk5hbWVcIixpbnZhbGlkRmlsZVR5cGU6J1RoZSBzZWxlY3RlZCBmaWxlIFwiezB9XCIgaXMgbm90IHZhbGlkLiBTdXBwb3J0ZWQgZmlsZSB0eXBlcyBhcmUgezF9LicsZGVsZXRlRmlsZTonQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcInswfVwiPycsb3ZlcndyaXRlRmlsZTonQSBmaWxlIHdpdGggbmFtZSBcInswfVwiIGFscmVhZHkgZXhpc3RzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4gRG8geW91IHdhbnQgdG8gb3ZlcndyaXRlIGl0PycsZGlyZWN0b3J5Tm90Rm91bmQ6XCJBIGRpcmVjdG9yeSB3aXRoIHRoaXMgbmFtZSB3YXMgbm90IGZvdW5kLlwiLGltYWdlV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsaW1hZ2VBbHRUZXh0OlwiQWx0ZXJuYXRlIHRleHRcIixpbWFnZVdpZHRoOlwiV2lkdGggKHB4KVwiLGltYWdlSGVpZ2h0OlwiSGVpZ2h0IChweClcIixmaWxlV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsZmlsZVRpdGxlOlwiVGl0bGVcIixsaW5rV2ViQWRkcmVzczpcIldlYiBhZGRyZXNzXCIsbGlua1RleHQ6XCJUZXh0XCIsbGlua1Rvb2xUaXA6XCJUb29sVGlwXCIsbGlua09wZW5Jbk5ld1dpbmRvdzpcIk9wZW4gbGluayBpbiBuZXcgd2luZG93XCIsZGlhbG9nVXBkYXRlOlwiVXBkYXRlXCIsZGlhbG9nSW5zZXJ0OlwiSW5zZXJ0XCIsZGlhbG9nQ2FuY2VsOlwiQ2FuY2VsXCIsY3JlYXRlVGFibGU6XCJDcmVhdGUgdGFibGVcIixjcmVhdGVUYWJsZUhpbnQ6XCJDcmVhdGUgYSB7MH0geCB7MX0gdGFibGVcIixhZGRDb2x1bW5MZWZ0OlwiQWRkIGNvbHVtbiBvbiB0aGUgbGVmdFwiLGFkZENvbHVtblJpZ2h0OlwiQWRkIGNvbHVtbiBvbiB0aGUgcmlnaHRcIixhZGRSb3dBYm92ZTpcIkFkZCByb3cgYWJvdmVcIixhZGRSb3dCZWxvdzpcIkFkZCByb3cgYmVsb3dcIixkZWxldGVSb3c6XCJEZWxldGUgcm93XCIsZGVsZXRlQ29sdW1uOlwiRGVsZXRlIGNvbHVtblwifSx5PSFjfHxjLmlvcyYmYy5mbGF0VmVyc2lvbj49NTAwfHwhYy5pb3MmJnQhPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGVudEVkaXRhYmxlLHc9e2Jhc2ljOltcImJvbGRcIixcIml0YWxpY1wiLFwidW5kZXJsaW5lXCJdLGFsaWdubWVudDpbXCJqdXN0aWZ5TGVmdFwiLFwianVzdGlmeUNlbnRlclwiLFwianVzdGlmeVJpZ2h0XCJdLGxpc3RzOltcImluc2VydFVub3JkZXJlZExpc3RcIixcImluc2VydE9yZGVyZWRMaXN0XCJdLGluZGVudGluZzpbXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sbGlua3M6W1wiY3JlYXRlTGlua1wiLFwidW5saW5rXCJdLHRhYmxlczpbXCJjcmVhdGVUYWJsZVwiLFwiYWRkQ29sdW1uTGVmdFwiLFwiYWRkQ29sdW1uUmlnaHRcIixcImFkZFJvd0Fib3ZlXCIsXCJhZGRSb3dCZWxvd1wiLFwiZGVsZXRlUm93XCIsXCJkZWxldGVDb2x1bW5cIl19LGI9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8scyxjPXRoaXMsZD1hLnVpLmVkaXRvcjt5JiYobC5mbi5pbml0LmNhbGwoYyx0LG4pLGMub3B0aW9ucz1wKHt9LGMub3B0aW9ucyxuKSx0PWMuZWxlbWVudCxzPWQuRG9tLm5hbWUodFswXSksdC5jbG9zZXN0KFwiZm9ybVwiKS5vbihcInN1Ym1pdFwiK2YsZnVuY3Rpb24oKXtjLnVwZGF0ZSgpfSksbz11KHt9LGMub3B0aW9ucyksby5lZGl0b3I9YyxcInRleHRhcmVhXCI9PXM/KGMuX3dyYXBUZXh0YXJlYSgpLHI9Yy53cmFwcGVyLmZpbmQoXCIuay1lZGl0b3ItdG9vbGJhclwiKSx0WzBdLmlkJiZyLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsdFswXS5pZCkpOihjLmVsZW1lbnQuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLCEwKS5hZGRDbGFzcyhcImstd2lkZ2V0IGstZWRpdG9yIGstZWRpdG9yLWlubGluZVwiKSxvLnBvcHVwPSEwLHI9ZSgnPHVsIGNsYXNzPVwiay1lZGl0b3ItdG9vbGJhclwiIHJvbGU9XCJ0b29sYmFyXCIgLz4nKS5pbnNlcnRCZWZvcmUodCkpLGMudG9vbGJhcj1uZXcgZC5Ub29sYmFyKHJbMF0sbyksYy50b29sYmFyLmJpbmRUbyhjKSxcInRleHRhcmVhXCI9PXMmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1jLndyYXBwZXJbMF0uc3R5bGUuaGVpZ2h0LHQ9cGFyc2VJbnQoZSwxMCksbj1jLndyYXBwZXIuaGVpZ2h0KCk7ZS5pbmRleE9mKFwicHhcIik+MCYmIWlzTmFOKHQpJiZuPnQmJmMud3JhcHBlci5oZWlnaHQodC0obi10KSl9KSxjLl9pbml0aWFsaXplQ29udGVudEVsZW1lbnQoYyksYy5rZXlib2FyZD1uZXcgZC5LZXlib2FyZChbbmV3IGQuVHlwaW5nSGFuZGxlcihjKSxuZXcgZC5CYWNrc3BhY2VIYW5kbGVyKGMpLG5ldyBkLlN5c3RlbUhhbmRsZXIoYyldKSxjLmNsaXBib2FyZD1uZXcgZC5DbGlwYm9hcmQodGhpcyksYy51bmRvUmVkb1N0YWNrPW5ldyBkLlVuZG9SZWRvU3RhY2ssaT1uJiZuLnZhbHVlP24udmFsdWU6Yy50ZXh0YXJlYT90LnZhbCgpLnJlcGxhY2UoL1tcXHJcXG5cXHZcXGZcXHQgXSsvZ2ksXCIgXCIpOnRbMF0uaW5uZXJIVE1MLGMudmFsdWUoaSksZShkb2N1bWVudCkub24oXCJtb3VzZWRvd25cIixoKGMuX2VuZFR5cGluZyxjKSkub24oXCJtb3VzZXVwXCIsaChjLl9tb3VzZXVwLGMpKSxhLm5vdGlmeShjKSl9LF9lbmRUeXBpbmc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmtleWJvYXJkO3RyeXtlLmlzVHlwaW5nSW5Qcm9ncmVzcygpJiYoZS5lbmRUeXBpbmcoITApLHRoaXMuc2F2ZVNlbGVjdGlvbigpKX1jYXRjaCh0KXt9fSxfc2VsZWN0aW9uQ2hhbmdlOmZ1bmN0aW9uKCl7ZC5tc2llfHxhLnVpLmVkaXRvci5Eb20uZW5zdXJlVHJhaWxpbmdCcmVha3ModGhpcy5ib2R5KSx0aGlzLl9zZWxlY3Rpb25TdGFydGVkPSExLHRoaXMuc2F2ZVNlbGVjdGlvbigpLHRoaXMudHJpZ2dlcihcInNlbGVjdFwiLHt9KX0sX3dyYXBUZXh0YXJlYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10LmVsZW1lbnQsaT1uWzBdLnN0eWxlLndpZHRoLHI9blswXS5zdHlsZS5oZWlnaHQsbz12LmVkaXRvcldyYXBwZXJUZW1wbGF0ZSxhPWUobykuaW5zZXJ0QmVmb3JlKG4pLndpZHRoKGkpLmhlaWdodChyKSxzPWEuZmluZChcIi5rLWVkaXRhYmxlLWFyZWFcIik7bi5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIikuYXBwZW5kVG8ocykuYWRkQ2xhc3MoXCJrLWNvbnRlbnQgay1yYXctY29udGVudFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLHQudGV4dGFyZWE9bix0LndyYXBwZXI9YX0sX2NyZWF0ZUNvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXRoaXMscz1vLnRleHRhcmVhLGw9by5vcHRpb25zLmRvbWFpbixjPWx8fGRvY3VtZW50LmRvbWFpbixkPVwiXCIsdT0namF2YXNjcmlwdDpcIlwiJztyZXR1cm4obHx8YyE9bG9jYXRpb24uaG9zdG5hbWUpJiYoZD0nPHNjcmlwdD5kb2N1bWVudC5kb21haW49XCInK2MrJ1wiPC9zY3JpcHQ+Jyx1PVwiamF2YXNjcmlwdDpkb2N1bWVudC53cml0ZSgnXCIrZCtcIicpXCIpLHMuaGlkZSgpLG49ZShcIjxpZnJhbWUgLz5cIix7ZnJhbWVCb3JkZXI6XCIwXCJ9KVswXSxlKG4pLmNzcyhcImRpc3BsYXlcIixcIlwiKS5hZGRDbGFzcyhcImstY29udGVudFwiKS5pbnNlcnRCZWZvcmUocyksbi5zcmM9dSxpPW4uY29udGVudFdpbmRvd3x8bixyPWkuZG9jdW1lbnR8fG4uY29udGVudERvY3VtZW50LGUobikub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7by50b29sYmFyLmRlY29yYXRlRnJvbShyLmJvZHkpfSksci5vcGVuKCksci53cml0ZShcIjwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9J3V0Zi04JyAvPjxzdHlsZT5odG1sLGJvZHl7cGFkZGluZzowO21hcmdpbjowO2hlaWdodDoxMDAlO21pbi1oZWlnaHQ6MTAwJTt9Ym9keXtmb250LXNpemU6MTJweDtmb250LWZhbWlseTpWZXJkYW5hLEdlbmV2YSxzYW5zLXNlcmlmO3BhZGRpbmctdG9wOjFweDttYXJnaW4tdG9wOi0xcHg7d29yZC13cmFwOiBicmVhay13b3JkOy13ZWJraXQtbmJzcC1tb2RlOiBzcGFjZTstd2Via2l0LWxpbmUtYnJlYWs6IGFmdGVyLXdoaXRlLXNwYWNlO1wiKyhhLnN1cHBvcnQuaXNSdGwocyk/XCJkaXJlY3Rpb246cnRsO1wiOlwiXCIpK1wifWgxe2ZvbnQtc2l6ZToyZW07bWFyZ2luOi42N2VtIDB9aDJ7Zm9udC1zaXplOjEuNWVtfWgze2ZvbnQtc2l6ZToxLjE2ZW19aDR7Zm9udC1zaXplOjFlbX1oNXtmb250LXNpemU6LjgzZW19aDZ7Zm9udC1zaXplOi43ZW19cHttYXJnaW46MCAwIDFlbTtwYWRkaW5nOjAgLjJlbX0uay1tYXJrZXJ7ZGlzcGxheTpub25lO30uay1wYXN0ZS1jb250YWluZXIsLkFwcGxlLXN0eWxlLXNwYW57cG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTAwMDBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtvdmVyZmxvdzpoaWRkZW59dWwsb2x7cGFkZGluZy1sZWZ0OjIuNWVtfXNwYW57LW1zLWhpZ2gtY29udHJhc3QtYWRqdXN0Om5vbmU7fWF7Y29sb3I6IzAwYX1jb2Rle2ZvbnQtc2l6ZToxLjIzZW19dGVsZXJpa1xcXFwzQXNjcmlwdHtkaXNwbGF5OiBub25lO30uay10YWJsZXt0YWJsZS1sYXlvdXQ6Zml4ZWQ7d2lkdGg6MTAwJTtib3JkZXItc3BhY2luZzowO21hcmdpbjogMCAwIDFlbTt9LmstdGFibGUgdGR7bWluLXdpZHRoOjFweDtwYWRkaW5nOi4yZW0gLjNlbTt9LmstdGFibGUsLmstdGFibGUgdGR7b3V0bGluZTowO2JvcmRlcjogMXB4IGRvdHRlZCAjY2NjO30uay10YWJsZSBwe21hcmdpbjowO3BhZGRpbmc6MDt9PC9zdHlsZT5cIitkK1wiPHNjcmlwdD4oZnVuY3Rpb24oZCxjKXtkW2NdKCdoZWFkZXInKSxkW2NdKCdhcnRpY2xlJyksZFtjXSgnbmF2JyksZFtjXSgnc2VjdGlvbicpLGRbY10oJ2Zvb3RlcicpO30pKGRvY3VtZW50LCAnY3JlYXRlRWxlbWVudCcpOzwvc2NyaXB0PlwiK2UubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuXCI8bGluayByZWw9J3N0eWxlc2hlZXQnIGhyZWY9J1wiK2UrXCInPlwifSkuam9pbihcIlwiKStcIjwvaGVhZD48Ym9keSBhdXRvY29ycmVjdD0nb2ZmJyBjb250ZW50ZWRpdGFibGU9J3RydWUnPjwvYm9keT48L2h0bWw+XCIpLHIuY2xvc2UoKSxpfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXMudGV4dGFyZWEsdD1lP2UudmFsKCk6dGhpcy5fb2xkVmFsdWUsbj10aGlzLm9wdGlvbnMuZW5jb2RlZD90aGlzLmVuY29kZWRWYWx1ZSgpOnRoaXMudmFsdWUoKTt0aGlzLnVwZGF0ZSgpLGUmJmUudHJpZ2dlcihcImJsdXJcIiksbiE9dCYmdGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIpfSxfaW5pdGlhbGl6ZUNvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIG4saSxyPXRoaXM7ci50ZXh0YXJlYT8oci53aW5kb3c9ci5fY3JlYXRlQ29udGVudEVsZW1lbnQoci5vcHRpb25zLnN0eWxlc2hlZXRzKSxuPXIuZG9jdW1lbnQ9ci53aW5kb3cuY29udGVudERvY3VtZW50fHxyLndpbmRvdy5kb2N1bWVudCxyLmJvZHk9bi5ib2R5LGk9ci53aW5kb3csZShuKS5vbihcIm1vdXNldXBcIitmLGgoci5fbW91c2V1cCxyKSkpOihyLndpbmRvdz13aW5kb3csbj1yLmRvY3VtZW50PWRvY3VtZW50LHIuYm9keT1yLmVsZW1lbnRbMF0saT1yLmJvZHksci50b29sYmFyLmRlY29yYXRlRnJvbShyLmJvZHkpKSxlKGkpLm9uKFwiYmx1clwiK2YsaCh0aGlzLl9ibHVyLHRoaXMpKTt0cnl7bi5leGVjQ29tbWFuZChcImVuYWJsZUlubGluZVRhYmxlRWRpdGluZ1wiLG51bGwsITEpfWNhdGNoKG8pe31hLnN1cHBvcnQudG91Y2gmJmUobikub24oXCJzZWxlY3Rpb25jaGFuZ2VcIitmLGgodGhpcy5fc2VsZWN0aW9uQ2hhbmdlLHRoaXMpKS5vbihcImtleWRvd25cIitmLGZ1bmN0aW9uKCl7YS5fYWN0aXZlRWxlbWVudCgpIT1uLmJvZHkmJnIud2luZG93LmZvY3VzKCl9KSxlKHIuYm9keSkub24oXCJrZXlkb3duXCIrZixmdW5jdGlvbihlKXt2YXIgbixpLG8sYSxzLGw7cmV0dXJuIGUua2V5Q29kZT09PWcuRjEwPyhzZXRUaW1lb3V0KGgoci50b29sYmFyLmZvY3VzLHIudG9vbGJhciksMTAwKSxlLnByZXZlbnREZWZhdWx0KCksdCk6KChlLmtleUNvZGU9PWcuTEVGVHx8ZS5rZXlDb2RlPT1nLlJJR0hUKSYmKG49ci5nZXRSYW5nZSgpLGk9ZS5rZXlDb2RlPT1nLkxFRlQsbz1uW2k/XCJzdGFydENvbnRhaW5lclwiOlwiZW5kQ29udGFpbmVyXCJdLGE9bltpP1wic3RhcnRPZmZzZXRcIjpcImVuZE9mZnNldFwiXSxzPWk/LTE6MSxpJiYoYS09MSksYStzPjAmJjM9PW8ubm9kZVR5cGUmJlwi77u/XCI9PW8ubm9kZVZhbHVlW2FdJiYobi5zZXRTdGFydChvLGErcyksbi5jb2xsYXBzZSghMCksci5zZWxlY3RSYW5nZShuKSkpLChsPXIua2V5Ym9hcmQudG9vbEZyb21TaG9ydGN1dChyLnRvb2xiYXIudG9vbHMsZSkpPyhlLnByZXZlbnREZWZhdWx0KCksL14odW5kb3xyZWRvKSQvLnRlc3QobCl8fHIua2V5Ym9hcmQuZW5kVHlwaW5nKCEwKSxyLnRyaWdnZXIoXCJrZXlkb3duXCIsZSksci5leGVjKGwpLCExKTooci5rZXlib2FyZC5jbGVhclRpbWVvdXQoKSxyLmtleWJvYXJkLmtleWRvd24oZSksdCkpfSkub24oXCJrZXl1cFwiK2YsZnVuY3Rpb24odCl7dmFyIG49WzgsOSwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MCw0NSw0Nl07KGUuaW5BcnJheSh0LmtleUNvZGUsbik+LTF8fDY1PT10LmtleUNvZGUmJnQuY3RybEtleSYmIXQuYWx0S2V5JiYhdC5zaGlmdEtleSkmJnIuX3NlbGVjdGlvbkNoYW5nZSgpLHIua2V5Ym9hcmQua2V5dXAodCl9KS5vbihcIm1vdXNlZG93blwiK2YsZnVuY3Rpb24odCl7aWYoci5fc2VsZWN0aW9uU3RhcnRlZD0hMCwhZC5nZWNrbyl7dmFyIG49ZSh0LnRhcmdldCk7KDI9PXQud2hpY2h8fDE9PXQud2hpY2gmJnQuY3RybEtleSkmJm4uaXMoXCJhW2hyZWZdXCIpJiZ3aW5kb3cub3BlbihuLmF0dHIoXCJocmVmXCIpLFwiX25ld1wiKX19KS5vbihcImNsaWNrXCIrZixmdW5jdGlvbihlKXt2YXIgdCxuPWEudWkuZWRpdG9yLkRvbTtcImltZ1wiPT09bi5uYW1lKGUudGFyZ2V0KSYmKHQ9ci5jcmVhdGVSYW5nZSgpLHQuc2VsZWN0Tm9kZShlLnRhcmdldCksci5zZWxlY3RSYW5nZSh0KSl9KS5vbihcImN1dFwiK2YrXCIgcGFzdGVcIitmLGZ1bmN0aW9uKGUpe3IuY2xpcGJvYXJkW1wib25cIitlLnR5cGVdKGUpfSkub24oXCJmb2N1c2luXCIrZixmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoXCJrLXN0YXRlLWFjdGl2ZVwiKSxyLnRvb2xiYXIuc2hvdygpLHIudGV4dGFyZWEmJnIuc2VsZWN0UmFuZ2Uoci5nZXRSYW5nZSgpKX0pLm9uKFwiZm9jdXNvdXRcIitmLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWEuX2FjdGl2ZUVsZW1lbnQoKSxuPXIuYm9keSxpPXIudG9vbGJhcjt0PT1ufHxlLmNvbnRhaW5zKG4sdCl8fGUodCkuaXMoXCIuay1lZGl0b3J0b29sYmFyLWRyYWdIYW5kbGVcIil8fGkuZm9jdXNlZCgpfHwoZShuKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtYWN0aXZlXCIpLGkuaGlkZSgpKX0sMTApfSl9LF9tb3VzZXVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9zZWxlY3Rpb25TdGFydGVkJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fc2VsZWN0aW9uQ2hhbmdlKCl9LDEpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnRleHRhcmVhJiYoZS50ZXh0YXJlYS52YWwoZS52YWx1ZSgpKSxlLndyYXBwZXIuZmluZChcImlmcmFtZVwiKS5yZW1vdmUoKSxlLl9pbml0aWFsaXplQ29udGVudEVsZW1lbnQoZSksZS52YWx1ZShlLnRleHRhcmVhLnZhbCgpKSl9LGV2ZW50czpbXCJzZWxlY3RcIixcImNoYW5nZVwiLFwiZXhlY3V0ZVwiLFwiZXJyb3JcIixcInBhc3RlXCIsXCJrZXlkb3duXCIsXCJrZXl1cFwiXSxvcHRpb25zOntuYW1lOlwiRWRpdG9yXCIsbWVzc2FnZXM6Xyxmb3JtYXRzOnt9LGVuY29kZWQ6ITAsZG9tYWluOm51bGwsc2VyaWFsaXphdGlvbjp7ZW50aXRpZXM6ITAsc2NyaXB0czohMX0sc3R5bGVzaGVldHM6W10sZGlhbG9nT3B0aW9uczp7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCxhbmltYXRpb246ITF9LGZvbnROYW1lOlt7dGV4dDpcIkFyaWFsXCIsdmFsdWU6XCJBcmlhbCxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwifSx7dGV4dDpcIkNvdXJpZXIgTmV3XCIsdmFsdWU6XCInQ291cmllciBOZXcnLENvdXJpZXIsbW9ub3NwYWNlXCJ9LHt0ZXh0OlwiR2VvcmdpYVwiLHZhbHVlOlwiR2VvcmdpYSxzZXJpZlwifSx7dGV4dDpcIkltcGFjdFwiLHZhbHVlOlwiSW1wYWN0LENoYXJjb2FsLHNhbnMtc2VyaWZcIn0se3RleHQ6XCJMdWNpZGEgQ29uc29sZVwiLHZhbHVlOlwiJ0x1Y2lkYSBDb25zb2xlJyxNb25hY28sbW9ub3NwYWNlXCJ9LHt0ZXh0OlwiVGFob21hXCIsdmFsdWU6XCJUYWhvbWEsR2VuZXZhLHNhbnMtc2VyaWZcIn0se3RleHQ6XCJUaW1lcyBOZXcgUm9tYW5cIix2YWx1ZTpcIidUaW1lcyBOZXcgUm9tYW4nLFRpbWVzLHNlcmlmXCJ9LHt0ZXh0OlwiVHJlYnVjaGV0IE1TXCIsdmFsdWU6XCInVHJlYnVjaGV0IE1TJyxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwifSx7dGV4dDpcIlZlcmRhbmFcIix2YWx1ZTpcIlZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWZcIn1dLGZvbnRTaXplOlt7dGV4dDpcIjEgKDhwdClcIix2YWx1ZTpcInh4LXNtYWxsXCJ9LHt0ZXh0OlwiMiAoMTBwdClcIix2YWx1ZTpcIngtc21hbGxcIn0se3RleHQ6XCIzICgxMnB0KVwiLHZhbHVlOlwic21hbGxcIn0se3RleHQ6XCI0ICgxNHB0KVwiLHZhbHVlOlwibWVkaXVtXCJ9LHt0ZXh0OlwiNSAoMThwdClcIix2YWx1ZTpcImxhcmdlXCJ9LHt0ZXh0OlwiNiAoMjRwdClcIix2YWx1ZTpcIngtbGFyZ2VcIn0se3RleHQ6XCI3ICgzNnB0KVwiLHZhbHVlOlwieHgtbGFyZ2VcIn1dLGZvcm1hdEJsb2NrOlt7dGV4dDpcIlBhcmFncmFwaFwiLHZhbHVlOlwicFwifSx7dGV4dDpcIlF1b3RhdGlvblwiLHZhbHVlOlwiYmxvY2txdW90ZVwifSx7dGV4dDpcIkhlYWRpbmcgMVwiLHZhbHVlOlwiaDFcIn0se3RleHQ6XCJIZWFkaW5nIDJcIix2YWx1ZTpcImgyXCJ9LHt0ZXh0OlwiSGVhZGluZyAzXCIsdmFsdWU6XCJoM1wifSx7dGV4dDpcIkhlYWRpbmcgNFwiLHZhbHVlOlwiaDRcIn0se3RleHQ6XCJIZWFkaW5nIDVcIix2YWx1ZTpcImg1XCJ9LHt0ZXh0OlwiSGVhZGluZyA2XCIsdmFsdWU6XCJoNlwifV0sdG9vbHM6W10uY29uY2F0LmNhbGwoW1wiZm9ybWF0dGluZ1wiXSx3LmJhc2ljLHcuYWxpZ25tZW50LHcubGlzdHMsdy5pbmRlbnRpbmcsdy5saW5rcyxbXCJpbnNlcnRJbWFnZVwiXSx3LnRhYmxlcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2wuZm4uZGVzdHJveS5jYWxsKHQpLGUodC53aW5kb3cpLmFkZCh0LmRvY3VtZW50KS5hZGQodC5ib2R5KS5hZGQodC53cmFwcGVyKS5hZGQodC5lbGVtZW50LmNsb3Nlc3QoXCJmb3JtXCIpKS5vZmYoZiksZShkb2N1bWVudCkub2ZmKFwibW91c2Vkb3duXCIsaCh0Ll9lbmRUeXBpbmcsdCkpLm9mZihcIm1vdXNldXBcIixoKHQuX21vdXNldXAsdCkpLHQuX2ZvY3VzT3V0c2lkZSgpLHQudG9vbGJhci5kZXN0cm95KCksYS5kZXN0cm95KHQud3JhcHBlcil9LF9mb2N1c091dHNpZGU6ZnVuY3Rpb24oKXtpZihhLnN1cHBvcnQuYnJvd3Nlci5tc2llJiZ0aGlzLnRleHRhcmVhKXt2YXIgdD1lKFwiPGlucHV0IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMHB4O3RvcDotMTBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtmb250LXNpemU6MDtib3JkZXI6MDsnIC8+XCIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmZvY3VzKCk7dC5ibHVyKCkucmVtb3ZlKCl9fSxzdGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9Yi5kZWZhdWx0VG9vbHNbZV0scj1pJiYoaS5vcHRpb25zLmZpbmRlcnx8aS5maW5kZXIpLG89YS51aS5lZGl0b3IuUmFuZ2VVdGlscztyZXR1cm4gcj8odD10aGlzLmdldFJhbmdlKCksbj1vLnRleHROb2Rlcyh0KSwhbi5sZW5ndGgmJnQuY29sbGFwc2VkJiYobj1bdC5zdGFydENvbnRhaW5lcl0pLHIuZ2V0Rm9ybWF0P3IuZ2V0Rm9ybWF0KG4pOnIuaXNGb3JtYXR0ZWQobikpOiExfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLmJvZHksaT1hLnVpLmVkaXRvcixyPWkuU2VyaWFsaXplci5kb21Ub1hodG1sKG4sdGhpcy5vcHRpb25zLnNlcmlhbGl6YXRpb24pO3JldHVybiBlPT09dD9yOihlIT1yJiYoaS5TZXJpYWxpemVyLmh0bWxUb0RvbShlLG4pLGQubXNpZXx8YS51aS5lZGl0b3IuRG9tLmVuc3VyZVRyYWlsaW5nQnJlYWtzKHRoaXMuYm9keSksdGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQ9bnVsbCx0aGlzLnVwZGF0ZSgpLHRoaXMudG9vbGJhci5yZWZyZXNoVG9vbHMoKSksdCl9LHNhdmVTZWxlY3Rpb246ZnVuY3Rpb24odCl7dD10fHx0aGlzLmdldFJhbmdlKCk7dmFyIG49dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcixpPXRoaXMuYm9keTsobj09aXx8ZS5jb250YWlucyhpLG4pKSYmKHRoaXMuc2VsZWN0aW9uUmVzdG9yZVBvaW50PW5ldyBhLnVpLmVkaXRvci5SZXN0b3JlUG9pbnQodCkpfSxfZm9jdXNCb2R5OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmJvZHksbj10aGlzLndyYXBwZXImJnRoaXMud3JhcHBlci5maW5kKFwiaWZyYW1lXCIpWzBdLGk9dGhpcy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQscj1hLl9hY3RpdmVFbGVtZW50KCk7ciE9dCYmciE9biYmKGU9aS5zY3JvbGxUb3AsdC5mb2N1cygpLGkuc2Nyb2xsVG9wPWUpfSxyZXN0b3JlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5fZm9jdXNCb2R5KCksdGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQmJnRoaXMuc2VsZWN0UmFuZ2UodGhpcy5zZWxlY3Rpb25SZXN0b3JlUG9pbnQudG9SYW5nZSgpKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnJlc3RvcmVTZWxlY3Rpb24oKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5vcHRpb25zLmVuY29kZWQ/dGhpcy5lbmNvZGVkVmFsdWUoKTp0aGlzLnZhbHVlKCksdGhpcy50ZXh0YXJlYT90aGlzLnRleHRhcmVhLnZhbChlKTp0aGlzLl9vbGRWYWx1ZT1lfSxlbmNvZGVkVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gYS51aS5lZGl0b3IuRG9tLmVuY29kZSh0aGlzLnZhbHVlKCkpfSxjcmVhdGVSYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gYS51aS5lZGl0b3IuUmFuZ2VVdGlscy5jcmVhdGVSYW5nZShlfHx0aGlzLmRvY3VtZW50KX0sZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGEudWkuZWRpdG9yLlNlbGVjdGlvblV0aWxzLnNlbGVjdGlvbkZyb21Eb2N1bWVudCh0aGlzLmRvY3VtZW50KX0sc2VsZWN0UmFuZ2U6ZnVuY3Rpb24oZSl7dGhpcy5fZm9jdXNCb2R5KCk7dmFyIHQ9dGhpcy5nZXRTZWxlY3Rpb24oKTt0LnJlbW92ZUFsbFJhbmdlcygpLHQuYWRkUmFuZ2UoZSksdGhpcy5zYXZlU2VsZWN0aW9uKGUpfSxnZXRSYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0U2VsZWN0aW9uKCksdD1lJiZlLnJhbmdlQ291bnQ+MD9lLmdldFJhbmdlQXQoMCk6dGhpcy5jcmVhdGVSYW5nZSgpLG49dGhpcy5kb2N1bWVudDtyZXR1cm4gdC5zdGFydENvbnRhaW5lciE9bnx8dC5lbmRDb250YWluZXIhPW58fHQuc3RhcnRPZmZzZXR8fHQuZW5kT2Zmc2V0fHwodC5zZXRTdGFydCh0aGlzLmJvZHksMCksdC5jb2xsYXBzZSghMCkpLHR9LHNlbGVjdGVkSHRtbDpmdW5jdGlvbigpe3JldHVybiBhLnVpLmVkaXRvci5TZXJpYWxpemVyLmRvbVRvWGh0bWwodGhpcy5nZXRSYW5nZSgpLmNsb25lQ29udGVudHMoKSl9LHBhc3RlOmZ1bmN0aW9uKGUsdCl7dGhpcy5jbGlwYm9hcmQucGFzdGUoZSx0KX0sZXhlYzpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbyxhPXRoaXMscz1udWxsO2lmKCFlKXRocm93IEVycm9yKFwia2VuZG9FZGl0b3IuZXhlYygpOiBgbmFtZWAgcGFyYW1ldGVyIGNhbm5vdCBiZSBlbXB0eVwiKTtpZihlPWUudG9Mb3dlckNhc2UoKSxhLmtleWJvYXJkLmlzVHlwaW5nSW5Qcm9ncmVzcygpfHxhLnJlc3RvcmVTZWxlY3Rpb24oKSxyPWEudG9vbGJhci50b29sQnlJZChlKSwhcilmb3IobyBpbiBiLmRlZmF1bHRUb29scylpZihvLnRvTG93ZXJDYXNlKCk9PWUpe3I9Yi5kZWZhdWx0VG9vbHNbb107YnJlYWt9aWYocil7aWYoaT1hLmdldFJhbmdlKCksci5jb21tYW5kJiYocz1yLmNvbW1hbmQodSh7cmFuZ2U6aX0sbikpKSxhLnRyaWdnZXIoXCJleGVjdXRlXCIse25hbWU6ZSxjb21tYW5kOnN9KSwvXih1bmRvfHJlZG8pJC9pLnRlc3QoZSkpYS51bmRvUmVkb1N0YWNrW2VdKCk7ZWxzZSBpZihzJiYocy5tYW5hZ2VzVW5kb1JlZG98fGEudW5kb1JlZG9TdGFjay5wdXNoKHMpLHMuZWRpdG9yPWEscy5leGVjKCkscy5hc3luYykpcmV0dXJuIHMuY2hhbmdlPWgoYS5fc2VsZWN0aW9uQ2hhbmdlLGEpLHQ7YS5fc2VsZWN0aW9uQ2hhbmdlKCl9fX0pO2IuZGVmYXVsdFRvb2xzPXt1bmRvOntvcHRpb25zOntrZXk6XCJaXCIsY3RybDohMH19LHJlZG86e29wdGlvbnM6e2tleTpcIllcIixjdHJsOiEwfX19LGEudWkucGx1Z2luKGIpLG49cy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXtlLmF0dHIoe3Vuc2VsZWN0YWJsZTpcIm9uXCIsdGl0bGU6dC50aXRsZX0pfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdGhpcy5vcHRpb25zLmNvbW1hbmQoZSl9LHVwZGF0ZTplLm5vb3B9KSxuLmV4ZWM9ZnVuY3Rpb24oZSx0LG4pe2UuZXhlYyh0LHt2YWx1ZTpufSl9LGk9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7bi5mbi5pbml0LmNhbGwodGhpcyxlKX0sY29tbWFuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS51aS5lZGl0b3IuRm9ybWF0Q29tbWFuZCh1KGUse2Zvcm1hdHRlcjp0Lm9wdGlvbnMuZm9ybWF0dGVyfSkpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLm9wdGlvbnMuZmluZGVyLmlzRm9ybWF0dGVkKHQpO2UudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIsbiksZS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsbil9fSksdi5yZWdpc3RlclRvb2woXCJzZXBhcmF0b3JcIixuZXcgbih7dGVtcGxhdGU6bmV3IG0oe3RlbXBsYXRlOnYuc2VwYXJhdG9yVGVtcGxhdGV9KX0pKSxyPWQubXNpZSYmOT5kLnZlcnNpb24/XCLvu79cIjpcIlwiLG89JzxiciBjbGFzcz1cImstYnJcIiAvPicsZC5tc2llJiYoMTA+ZC52ZXJzaW9uP289XCLvu79cIjoxMT5kLnZlcnNpb24mJihvPVwiIFwiKSksdShhLnVpLHtlZGl0b3I6e1Rvb2xUZW1wbGF0ZTptLEVkaXRvclV0aWxzOnYsVG9vbDpuLEZvcm1hdFRvb2w6aSxfYm9tRmlsbDpyLGVtcHR5RWxlbWVudENvbnRlbnQ6b319KX0od2luZG93LmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdCxuLGk9e307Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaVtlW3RdXT0hMDtyZXR1cm4gaX12YXIgbixpLHIsbyxhLHMsbCxjLGQsdSxoPXdpbmRvdy5rZW5kbyxwPWUubWFwLGY9ZS5leHRlbmQsZz1oLnN1cHBvcnQuYnJvd3NlcixtPVwic3R5bGVcIix2PVwiZmxvYXRcIixfPVwiY3NzRmxvYXRcIix5PVwic3R5bGVGbG9hdFwiLHc9XCJjbGFzc1wiLGI9XCJrLW1hcmtlclwiLGs9dChcImFyZWEsYmFzZSxiYXNlZm9udCxicixjb2wsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsbGluayxtZXRhLHBhcmFtLGVtYmVkXCIuc3BsaXQoXCIsXCIpKSx4PVwiZGl2LHAsaDEsaDIsaDMsaDQsaDUsaDYsYWRkcmVzcyxhcHBsZXQsYmxvY2txdW90ZSxidXR0b24sY2VudGVyLGRkLGRpcixkbCxkdCxmaWVsZHNldCxmb3JtLGZyYW1lc2V0LGhyLGlmcmFtZSxpc2luZGV4LG1hcCxtZW51LG5vZnJhbWVzLG5vc2NyaXB0LG9iamVjdCxwcmUsc2NyaXB0LHRhYmxlLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyLGhlYWRlcixhcnRpY2xlLG5hdixmb290ZXIsc2VjdGlvbixhc2lkZSxtYWluLGZpZ3VyZSxmaWdjYXB0aW9uXCIuc3BsaXQoXCIsXCIpLEM9eC5jb25jYXQoW1widWxcIixcIm9sXCIsXCJsaVwiXSksUz10KEMpLFQ9XCJzcGFuLGVtLGEsYWJicixhY3JvbnltLGFwcGxldCxiLGJhc2Vmb250LGJkbyxiaWcsYnIsYnV0dG9uLGNpdGUsY29kZSxkZWwsZGZuLGZvbnQsaSxpZnJhbWUsaW1nLGlucHV0LGlucyxrYmQsbGFiZWwsbWFwLG9iamVjdCxxLHMsc2FtcCxzY3JpcHQsc2VsZWN0LHNtYWxsLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0ZXh0YXJlYSx0dCx1LHZhcixkYXRhLHRpbWUsbWFyayxydWJ5XCIuc3BsaXQoXCIsXCIpLEQ9dChUKSxBPXQoXCJjaGVja2VkLGNvbXBhY3QsZGVjbGFyZSxkZWZlcixkaXNhYmxlZCxpc21hcCxtdWx0aXBsZSxub2hyZWYsbm9yZXNpemUsbm9zaGFkZSxub3dyYXAscmVhZG9ubHksc2VsZWN0ZWRcIi5zcGxpdChcIixcIikpLEU9ZnVuY3Rpb24oZSl7MT09ZS5ub2RlVHlwZSYmZS5ub3JtYWxpemUoKX07Zy5tc2llJiZnLnZlcnNpb24+PTgmJihFPWZ1bmN0aW9uKGUpe2lmKDE9PWUubm9kZVR5cGUmJmUuZmlyc3RDaGlsZClmb3IodmFyIHQ9ZS5maXJzdENoaWxkLG49dDs7KXtpZihuPW4ubmV4dFNpYmxpbmcsIW4pYnJlYWs7Mz09bi5ub2RlVHlwZSYmMz09dC5ub2RlVHlwZSYmKG4ubm9kZVZhbHVlPXQubm9kZVZhbHVlK24ubm9kZVZhbHVlLHUucmVtb3ZlKHQpKSx0PW59fSksbj0vXlxccyskLyxpPS9yZ2JcXHMqXFwoXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccypcXCkvaSxyPS9cXHVmZWZmL2csbz0vXihcXHMrfFxcdWZlZmYpJC8scz1cImNvbG9yLHBhZGRpbmctbGVmdCxwYWRkaW5nLXJpZ2h0LHBhZGRpbmctdG9wLHBhZGRpbmctYm90dG9tLGJhY2tncm91bmQtY29sb3IsYmFja2dyb3VuZC1hdHRhY2htZW50LGJhY2tncm91bmQtaW1hZ2UsYmFja2dyb3VuZC1wb3NpdGlvbixiYWNrZ3JvdW5kLXJlcGVhdCxib3JkZXItdG9wLXN0eWxlLGJvcmRlci10b3Atd2lkdGgsYm9yZGVyLXRvcC1jb2xvcixib3JkZXItYm90dG9tLXN0eWxlLGJvcmRlci1ib3R0b20td2lkdGgsYm9yZGVyLWJvdHRvbS1jb2xvcixib3JkZXItbGVmdC1zdHlsZSxib3JkZXItbGVmdC13aWR0aCxib3JkZXItbGVmdC1jb2xvcixib3JkZXItcmlnaHQtc3R5bGUsYm9yZGVyLXJpZ2h0LXdpZHRoLGJvcmRlci1yaWdodC1jb2xvcixmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zdHlsZSxmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsbGluZS1oZWlnaHRcIi5zcGxpdChcIixcIiksbD0vWzw+XFwmXS9nLGM9L1tcXHUwMEEwLVxcdTI2NjY8PlxcJl0vZyxkPXszNDpcInF1b3RcIiwzODpcImFtcFwiLDM5OlwiYXBvc1wiLDYwOlwibHRcIiw2MjpcImd0XCIsMTYwOlwibmJzcFwiLDE2MTpcImlleGNsXCIsMTYyOlwiY2VudFwiLDE2MzpcInBvdW5kXCIsMTY0OlwiY3VycmVuXCIsMTY1OlwieWVuXCIsMTY2OlwiYnJ2YmFyXCIsMTY3Olwic2VjdFwiLDE2ODpcInVtbFwiLDE2OTpcImNvcHlcIiwxNzA6XCJvcmRmXCIsMTcxOlwibGFxdW9cIiwxNzI6XCJub3RcIiwxNzM6XCJzaHlcIiwxNzQ6XCJyZWdcIiwxNzU6XCJtYWNyXCIsMTc2OlwiZGVnXCIsMTc3OlwicGx1c21uXCIsMTc4Olwic3VwMlwiLDE3OTpcInN1cDNcIiwxODA6XCJhY3V0ZVwiLDE4MTpcIm1pY3JvXCIsMTgyOlwicGFyYVwiLDE4MzpcIm1pZGRvdFwiLDE4NDpcImNlZGlsXCIsMTg1Olwic3VwMVwiLDE4NjpcIm9yZG1cIiwxODc6XCJyYXF1b1wiLDE4ODpcImZyYWMxNFwiLDE4OTpcImZyYWMxMlwiLDE5MDpcImZyYWMzNFwiLDE5MTpcImlxdWVzdFwiLDE5MjpcIkFncmF2ZVwiLDE5MzpcIkFhY3V0ZVwiLDE5NDpcIkFjaXJjXCIsMTk1OlwiQXRpbGRlXCIsMTk2OlwiQXVtbFwiLDE5NzpcIkFyaW5nXCIsMTk4OlwiQUVsaWdcIiwxOTk6XCJDY2VkaWxcIiwyMDA6XCJFZ3JhdmVcIiwyMDE6XCJFYWN1dGVcIiwyMDI6XCJFY2lyY1wiLDIwMzpcIkV1bWxcIiwyMDQ6XCJJZ3JhdmVcIiwyMDU6XCJJYWN1dGVcIiwyMDY6XCJJY2lyY1wiLDIwNzpcIkl1bWxcIiwyMDg6XCJFVEhcIiwyMDk6XCJOdGlsZGVcIiwyMTA6XCJPZ3JhdmVcIiwyMTE6XCJPYWN1dGVcIiwyMTI6XCJPY2lyY1wiLDIxMzpcIk90aWxkZVwiLDIxNDpcIk91bWxcIiwyMTU6XCJ0aW1lc1wiLDIxNjpcIk9zbGFzaFwiLDIxNzpcIlVncmF2ZVwiLDIxODpcIlVhY3V0ZVwiLDIxOTpcIlVjaXJjXCIsMjIwOlwiVXVtbFwiLDIyMTpcIllhY3V0ZVwiLDIyMjpcIlRIT1JOXCIsMjIzOlwic3psaWdcIiwyMjQ6XCJhZ3JhdmVcIiwyMjU6XCJhYWN1dGVcIiwyMjY6XCJhY2lyY1wiLDIyNzpcImF0aWxkZVwiLDIyODpcImF1bWxcIiwyMjk6XCJhcmluZ1wiLDIzMDpcImFlbGlnXCIsMjMxOlwiY2NlZGlsXCIsMjMyOlwiZWdyYXZlXCIsMjMzOlwiZWFjdXRlXCIsMjM0OlwiZWNpcmNcIiwyMzU6XCJldW1sXCIsMjM2OlwiaWdyYXZlXCIsMjM3OlwiaWFjdXRlXCIsMjM4OlwiaWNpcmNcIiwyMzk6XCJpdW1sXCIsMjQwOlwiZXRoXCIsMjQxOlwibnRpbGRlXCIsMjQyOlwib2dyYXZlXCIsMjQzOlwib2FjdXRlXCIsMjQ0Olwib2NpcmNcIiwyNDU6XCJvdGlsZGVcIiwyNDY6XCJvdW1sXCIsMjQ3OlwiZGl2aWRlXCIsMjQ4Olwib3NsYXNoXCIsMjQ5OlwidWdyYXZlXCIsMjUwOlwidWFjdXRlXCIsMjUxOlwidWNpcmNcIiwyNTI6XCJ1dW1sXCIsMjUzOlwieWFjdXRlXCIsMjU0OlwidGhvcm5cIiwyNTU6XCJ5dW1sXCIsNDAyOlwiZm5vZlwiLDkxMzpcIkFscGhhXCIsOTE0OlwiQmV0YVwiLDkxNTpcIkdhbW1hXCIsOTE2OlwiRGVsdGFcIiw5MTc6XCJFcHNpbG9uXCIsOTE4OlwiWmV0YVwiLDkxOTpcIkV0YVwiLDkyMDpcIlRoZXRhXCIsOTIxOlwiSW90YVwiLDkyMjpcIkthcHBhXCIsOTIzOlwiTGFtYmRhXCIsOTI0OlwiTXVcIiw5MjU6XCJOdVwiLDkyNjpcIlhpXCIsOTI3OlwiT21pY3JvblwiLDkyODpcIlBpXCIsOTI5OlwiUmhvXCIsOTMxOlwiU2lnbWFcIiw5MzI6XCJUYXVcIiw5MzM6XCJVcHNpbG9uXCIsOTM0OlwiUGhpXCIsOTM1OlwiQ2hpXCIsOTM2OlwiUHNpXCIsOTM3OlwiT21lZ2FcIiw5NDU6XCJhbHBoYVwiLDk0NjpcImJldGFcIiw5NDc6XCJnYW1tYVwiLDk0ODpcImRlbHRhXCIsOTQ5OlwiZXBzaWxvblwiLDk1MDpcInpldGFcIiw5NTE6XCJldGFcIiw5NTI6XCJ0aGV0YVwiLDk1MzpcImlvdGFcIiw5NTQ6XCJrYXBwYVwiLDk1NTpcImxhbWJkYVwiLDk1NjpcIm11XCIsOTU3OlwibnVcIiw5NTg6XCJ4aVwiLDk1OTpcIm9taWNyb25cIiw5NjA6XCJwaVwiLDk2MTpcInJob1wiLDk2MjpcInNpZ21hZlwiLDk2MzpcInNpZ21hXCIsOTY0OlwidGF1XCIsOTY1OlwidXBzaWxvblwiLDk2NjpcInBoaVwiLDk2NzpcImNoaVwiLDk2ODpcInBzaVwiLDk2OTpcIm9tZWdhXCIsOTc3OlwidGhldGFzeW1cIiw5Nzg6XCJ1cHNpaFwiLDk4MjpcInBpdlwiLDgyMjY6XCJidWxsXCIsODIzMDpcImhlbGxpcFwiLDgyNDI6XCJwcmltZVwiLDgyNDM6XCJQcmltZVwiLDgyNTQ6XCJvbGluZVwiLDgyNjA6XCJmcmFzbFwiLDg0NzI6XCJ3ZWllcnBcIiw4NDY1OlwiaW1hZ2VcIiw4NDc2OlwicmVhbFwiLDg0ODI6XCJ0cmFkZVwiLDg1MDE6XCJhbGVmc3ltXCIsODU5MjpcImxhcnJcIiw4NTkzOlwidWFyclwiLDg1OTQ6XCJyYXJyXCIsODU5NTpcImRhcnJcIiw4NTk2OlwiaGFyclwiLDg2Mjk6XCJjcmFyclwiLDg2NTY6XCJsQXJyXCIsODY1NzpcInVBcnJcIiw4NjU4OlwickFyclwiLDg2NTk6XCJkQXJyXCIsODY2MDpcImhBcnJcIiw4NzA0OlwiZm9yYWxsXCIsODcwNjpcInBhcnRcIiw4NzA3OlwiZXhpc3RcIiw4NzA5OlwiZW1wdHlcIiw4NzExOlwibmFibGFcIiw4NzEyOlwiaXNpblwiLDg3MTM6XCJub3RpblwiLDg3MTU6XCJuaVwiLDg3MTk6XCJwcm9kXCIsODcyMTpcInN1bVwiLDg3MjI6XCJtaW51c1wiLDg3Mjc6XCJsb3dhc3RcIiw4NzMwOlwicmFkaWNcIiw4NzMzOlwicHJvcFwiLDg3MzQ6XCJpbmZpblwiLDg3MzY6XCJhbmdcIiw4NzQzOlwiYW5kXCIsODc0NDpcIm9yXCIsODc0NTpcImNhcFwiLDg3NDY6XCJjdXBcIiw4NzQ3OlwiaW50XCIsODc1NjpcInRoZXJlNFwiLDg3NjQ6XCJzaW1cIiw4NzczOlwiY29uZ1wiLDg3NzY6XCJhc3ltcFwiLDg4MDA6XCJuZVwiLDg4MDE6XCJlcXVpdlwiLDg4MDQ6XCJsZVwiLDg4MDU6XCJnZVwiLDg4MzQ6XCJzdWJcIiw4ODM1Olwic3VwXCIsODgzNjpcIm5zdWJcIiw4ODM4Olwic3ViZVwiLDg4Mzk6XCJzdXBlXCIsODg1MzpcIm9wbHVzXCIsODg1NTpcIm90aW1lc1wiLDg4Njk6XCJwZXJwXCIsODkwMTpcInNkb3RcIiw4OTY4OlwibGNlaWxcIiw4OTY5OlwicmNlaWxcIiw4OTcwOlwibGZsb29yXCIsODk3MTpcInJmbG9vclwiLDkwMDE6XCJsYW5nXCIsOTAwMjpcInJhbmdcIiw5Njc0OlwibG96XCIsOTgyNDpcInNwYWRlc1wiLDk4Mjc6XCJjbHVic1wiLDk4Mjk6XCJoZWFydHNcIiw5ODMwOlwiZGlhbXNcIiwzMzg6XCJPRWxpZ1wiLDMzOTpcIm9lbGlnXCIsMzUyOlwiU2Nhcm9uXCIsMzUzOlwic2Nhcm9uXCIsMzc2OlwiWXVtbFwiLDcxMDpcImNpcmNcIiw3MzI6XCJ0aWxkZVwiLDgxOTQ6XCJlbnNwXCIsODE5NTpcImVtc3BcIiw4MjAxOlwidGhpbnNwXCIsODIwNDpcInp3bmpcIiw4MjA1OlwiendqXCIsODIwNjpcImxybVwiLDgyMDc6XCJybG1cIiw4MjExOlwibmRhc2hcIiw4MjEyOlwibWRhc2hcIiw4MjE2OlwibHNxdW9cIiw4MjE3OlwicnNxdW9cIiw4MjE4Olwic2JxdW9cIiw4MjIwOlwibGRxdW9cIiw4MjIxOlwicmRxdW9cIiw4MjIyOlwiYmRxdW9cIiw4MjI0OlwiZGFnZ2VyXCIsODIyNTpcIkRhZ2dlclwiLDgyNDA6XCJwZXJtaWxcIiw4MjQ5OlwibHNhcXVvXCIsODI1MDpcInJzYXF1b1wiLDgzNjQ6XCJldXJvXCJ9LHU9e2Jsb2NrOlMsaW5saW5lOkQsZmluZE5vZGVJbmRleDpmdW5jdGlvbihlLHQpe3ZhciBuPTA7aWYoIWUpcmV0dXJuLTE7Zm9yKDs7KXtpZihlPWUucHJldmlvdXNTaWJsaW5nLCFlKWJyZWFrO3QmJjM9PWUubm9kZVR5cGV8fG4rK31yZXR1cm4gbn0saXNEYXRhTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmbnVsbCE9PWUubm9kZVZhbHVlJiZudWxsIT09ZS5kYXRhfSxpc0FuY2VzdG9yT2Y6ZnVuY3Rpb24odCxuKXt0cnl7cmV0dXJuIXUuaXNEYXRhTm9kZSh0KSYmKGUuY29udGFpbnModCx1LmlzRGF0YU5vZGUobik/bi5wYXJlbnROb2RlOm4pfHxuLnBhcmVudE5vZGU9PXQpfWNhdGNoKGkpe3JldHVybiExfX0saXNBbmNlc3Rvck9yU2VsZjpmdW5jdGlvbihlLHQpe3JldHVybiB1LmlzQW5jZXN0b3JPZihlLHQpfHxlPT10fSxmaW5kQ2xvc2VzdEFuY2VzdG9yOmZ1bmN0aW9uKGUsdCl7aWYodS5pc0FuY2VzdG9yT2YoZSx0KSlmb3IoO3QmJnQucGFyZW50Tm9kZSE9ZTspdD10LnBhcmVudE5vZGU7cmV0dXJuIHR9LGdldE5vZGVMZW5ndGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHUuaXNEYXRhTm9kZShlKT9lLmxlbmd0aDplLmNoaWxkTm9kZXMubGVuZ3RofSxzcGxpdERhdGFOb2RlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWUuY2xvbmVOb2RlKCExKSxpPVwiXCIscj1lO3IubmV4dFNpYmxpbmcmJjM9PXIubmV4dFNpYmxpbmcubm9kZVR5cGUmJnIubmV4dFNpYmxpbmcubm9kZVZhbHVlOylpKz1yLm5leHRTaWJsaW5nLm5vZGVWYWx1ZSxyPXIubmV4dFNpYmxpbmc7ZS5kZWxldGVEYXRhKHQsZS5sZW5ndGgpLG4uZGVsZXRlRGF0YSgwLHQpLG4ubm9kZVZhbHVlKz1pLHUuaW5zZXJ0QWZ0ZXIobixlKX0sYXR0ckVxdWFsczpmdW5jdGlvbihlLHQpe3ZhciBuLGk7Zm9yKG4gaW4gdClpZihpPWVbbl0sbj09diYmKGk9ZVtoLnN1cHBvcnQuY3NzRmxvYXQ/Xzp5XSksXCJvYmplY3RcIj09dHlwZW9mIGkpe2lmKCF1LmF0dHJFcXVhbHMoaSx0W25dKSlyZXR1cm4hMX1lbHNlIGlmKGkhPXRbbl0pcmV0dXJuITE7cmV0dXJuITB9LGJsb2NrUGFyZW50T3JCb2R5OmZ1bmN0aW9uKGUpe3JldHVybiB1LnBhcmVudE9mVHlwZShlLEMpfHxlLm93bmVyRG9jdW1lbnQuYm9keX0sYmxvY2tQYXJlbnRzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPVtdO2ZvcihuPTAsaT10Lmxlbmd0aDtpPm47bisrKXI9dS5wYXJlbnRPZlR5cGUodFtuXSx1LmJsb2NrRWxlbWVudHMpLHImJmUuaW5BcnJheShyLG8pPDAmJm8ucHVzaChyKTtyZXR1cm4gb30sd2luZG93RnJvbURvY3VtZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLmRlZmF1bHRWaWV3fHxlLnBhcmVudFdpbmRvd30sbm9ybWFsaXplOkUsYmxvY2tFbGVtZW50czpDLG5vbkxpc3RCbG9ja0VsZW1lbnRzOngsaW5saW5lRWxlbWVudHM6VCxlbXB0eTprLGZpbGxBdHRyczpBLHRvSGV4OmZ1bmN0aW9uKGUpe3ZhciB0PWkuZXhlYyhlKTtyZXR1cm4gdD9cIiNcIitwKHQuc2xpY2UoMSksZnVuY3Rpb24oZSl7cmV0dXJuIGU9cGFyc2VJbnQoZSwxMCkudG9TdHJpbmcoMTYpLGUubGVuZ3RoPjE/ZTpcIjBcIitlfSkuam9pbihcIlwiKTplfSxlbmNvZGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0hdHx8dC5lbnRpdGllcz9jOmw7cmV0dXJuIGUucmVwbGFjZShuLGZ1bmN0aW9uKGUpe3ZhciB0PWUuY2hhckNvZGVBdCgwKSxuPWRbdF07cmV0dXJuIG4/XCImXCIrbitcIjtcIjplfSl9LHN0cmlwQm9tOmZ1bmN0aW9uKGUpe3JldHVybihlfHxcIlwiKS5yZXBsYWNlKHIsXCJcIil9LGluc2lnbmlmaWNhbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzO3JldHVyblwiay1tYXJrZXJcIj09ZS5jbGFzc05hbWV8fHUuaXMoZSxcImJyXCIpJiYoXCJrLWJyXCI9PWUuY2xhc3NOYW1lfHx0Ll9tb3pfZGlydHl8fHQuX21vel9lZGl0b3JfYm9ndXNfbm9kZSl9LGVtcHR5Tm9kZTpmdW5jdGlvbih0KXt2YXIgbj1lLmdyZXAodC5jaGlsZE5vZGVzLGZ1bmN0aW9uKGUpe3JldHVybiB1LmlzKGUsXCJiclwiKT8hMTp1Lmluc2lnbmlmaWNhbnQoZSk/ITE6Mz09ZS5ub2RlVHlwZSYmby50ZXN0KGUubm9kZVZhbHVlKT8hMTp1LmlzKGUsXCJwXCIpJiZ1LmVtcHR5Tm9kZShlKT8hMTohMH0pO3JldHVybiFuLmxlbmd0aH0sbmFtZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfSxzaWduaWZpY2FudENoaWxkTm9kZXM6ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ3JlcCh0LmNoaWxkTm9kZXMsZnVuY3Rpb24oZSl7cmV0dXJuIDMhPWUubm9kZVR5cGV8fCF1LmlzV2hpdGVzcGFjZShlKX0pfSxsYXN0VGV4dE5vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsO2lmKDM9PWUubm9kZVR5cGUpcmV0dXJuIGU7Zm9yKHQ9ZS5sYXN0Q2hpbGQ7dDt0PXQucHJldmlvdXNTaWJsaW5nKWlmKG49dS5sYXN0VGV4dE5vZGUodCkpcmV0dXJuIG47cmV0dXJuIG59LGlzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUubmFtZShlKT09dH0saXNNYXJrZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPT1ifSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG4udGVzdChlLm5vZGVWYWx1ZSl9LGlzQmxvY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIFNbdS5uYW1lKGUpXX0saXNFbXB0eTpmdW5jdGlvbihlKXtyZXR1cm4ga1t1Lm5hbWUoZSldfSxpc0lubGluZTpmdW5jdGlvbihlKXtyZXR1cm4gRFt1Lm5hbWUoZSldfSxzY3JvbGxDb250YWluZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dS53aW5kb3dGcm9tRG9jdW1lbnQoZSksbj0odC5jb250ZW50V2luZG93fHx0KS5kb2N1bWVudHx8dC5vd25lckRvY3VtZW50fHx0O3JldHVybiBuPWguc3VwcG9ydC5icm93c2VyLndlYmtpdHx8XCJCYWNrQ29tcGF0XCI9PW4uY29tcGF0TW9kZT9uLmJvZHk6bi5kb2N1bWVudEVsZW1lbnR9LHNjcm9sbFRvOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1lKHUuaXNEYXRhTm9kZSh0KT90LnBhcmVudE5vZGU6dCksbz11LndpbmRvd0Zyb21Eb2N1bWVudCh0Lm93bmVyRG9jdW1lbnQpLGE9by5pbm5lckhlaWdodCxzPXUuc2Nyb2xsQ29udGFpbmVyKHQub3duZXJEb2N1bWVudCk7XCJiclwiPT11Lm5hbWUoclswXSkmJihyPXIucGFyZW50KCkpLG49ci5vZmZzZXQoKS50b3AsaT1yWzBdLm9mZnNldEhlaWdodCxpK24+cy5zY3JvbGxUb3ArYSYmKHMuc2Nyb2xsVG9wPWkrbi1hKX0scGVyc2lzdFNjcm9sbFRvcDpmdW5jdGlvbihlKXthPXUuc2Nyb2xsQ29udGFpbmVyKGUpLnNjcm9sbFRvcH0scmVzdG9yZVNjcm9sbFRvcDpmdW5jdGlvbihlKXt1LnNjcm9sbENvbnRhaW5lcihlKS5zY3JvbGxUb3A9YX0saW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0LG4pe2UuaW5zZXJ0QmVmb3JlKHQsZS5jaGlsZE5vZGVzW25dfHxudWxsKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQucGFyZW50Tm9kZT90LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdCk6dH0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQubmV4dFNpYmxpbmcpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfSxyZW1vdmVUZXh0U2libGluZ3M6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucGFyZW50Tm9kZTtlLm5leHRTaWJsaW5nJiYzPT1lLm5leHRTaWJsaW5nLm5vZGVUeXBlOyl0LnJlbW92ZUNoaWxkKGUubmV4dFNpYmxpbmcpO2Zvcig7ZS5wcmV2aW91c1NpYmxpbmcmJjM9PWUucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlOyl0LnJlbW92ZUNoaWxkKGUucHJldmlvdXNTaWJsaW5nKX0sdHJpbTpmdW5jdGlvbihlKXt2YXIgdCxuO2Zvcih0PWUuY2hpbGROb2Rlcy5sZW5ndGgtMTt0Pj0wO3QtLSluPWUuY2hpbGROb2Rlc1t0XSx1LmlzRGF0YU5vZGUobik/KHUuc3RyaXBCb20obi5ub2RlVmFsdWUpLmxlbmd0aHx8dS5yZW1vdmUobiksdS5pc1doaXRlc3BhY2UobikmJnUuaW5zZXJ0QmVmb3JlKG4sZSkpOm4uY2xhc3NOYW1lIT1iJiYodS50cmltKG4pLG4uY2hpbGROb2Rlcy5sZW5ndGh8fHUuaXNFbXB0eShuKXx8dS5yZW1vdmUobikpO3JldHVybiBlfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7Zm9yKDtlJiZ1Lm5hbWUoZSkhPXQ7KWU9ZS5wYXJlbnROb2RlO3JldHVybiBlfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7ZG8gZT1lW3RdO3doaWxlKGUmJjEhPWUubm9kZVR5cGUpO3JldHVybiBlfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB1LnNpYmxpbmcoZSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiB1LnNpYmxpbmcoZSxcInByZXZpb3VzU2libGluZ1wiKX0scGFyZW50T2ZUeXBlOmZ1bmN0aW9uKGUsdCl7ZG8gZT1lLnBhcmVudE5vZGU7d2hpbGUoZSYmIXUub2ZUeXBlKGUsdCkpO3JldHVybiBlfSxvZlR5cGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5pbkFycmF5KHUubmFtZSh0KSxuKT49MH0sY2hhbmdlVGFnOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGw9dS5jcmVhdGUoZS5vd25lckRvY3VtZW50LHQpLGM9ZS5hdHRyaWJ1dGVzO2lmKCFuKWZvcihpPTAscj1jLmxlbmd0aDtyPmk7aSsrKXM9Y1tpXSxzLnNwZWNpZmllZCYmKG89cy5ub2RlTmFtZSxhPXMubm9kZVZhbHVlLG89PXc/bC5jbGFzc05hbWU9YTpvPT1tP2wuc3R5bGUuY3NzVGV4dD1lLnN0eWxlLmNzc1RleHQ6bC5zZXRBdHRyaWJ1dGUobyxhKSk7Zm9yKDtlLmZpcnN0Q2hpbGQ7KWwuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKTtyZXR1cm4gdS5pbnNlcnRCZWZvcmUobCxlKSx1LnJlbW92ZShlKSxsfSxlZGl0YWJsZVBhcmVudDpmdW5jdGlvbihlKXtmb3IoO2UmJigzPT1lLm5vZGVUeXBlfHxcInRydWVcIiE9PWUuY29udGVudEVkaXRhYmxlKTspZT1lLnBhcmVudE5vZGU7cmV0dXJuIGV9LHdyYXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdS5pbnNlcnRCZWZvcmUodCxlKSx0LmFwcGVuZENoaWxkKGUpLHR9LHVud3JhcDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJlbnROb2RlO2UuZmlyc3RDaGlsZDspdC5pbnNlcnRCZWZvcmUoZS5maXJzdENoaWxkLGUpO3QucmVtb3ZlQ2hpbGQoZSl9LGNyZWF0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHUuYXR0cihlLmNyZWF0ZUVsZW1lbnQodCksbil9LGF0dHI6ZnVuY3Rpb24oZSx0KXt0PWYoe30sdCksdCYmbSBpbiB0JiYodS5zdHlsZShlLHQuc3R5bGUpLGRlbGV0ZSB0LnN0eWxlKTtmb3IodmFyIG4gaW4gdCludWxsPT09dFtuXT8oZS5yZW1vdmVBdHRyaWJ1dGUobiksZGVsZXRlIHRbbl0pOlwiY2xhc3NOYW1lXCI9PW4mJihlW25dPXRbbl0pO3JldHVybiBmKGUsdCl9LHN0eWxlOmZ1bmN0aW9uKHQsbil7ZSh0KS5jc3Mobnx8e30pfSx1bnN0eWxlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpbj09diYmKG49aC5zdXBwb3J0LmNzc0Zsb2F0P186eSksZS5zdHlsZVtuXT1cIlwiO1wiXCI9PT1lLnN0eWxlLmNzc1RleHQmJmUucmVtb3ZlQXR0cmlidXRlKG0pfSxpbmxpbmVTdHlsZTpmdW5jdGlvbih0LG4saSl7dmFyIHIsbz1lKHUuY3JlYXRlKHQub3duZXJEb2N1bWVudCxuLGkpKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChvWzBdKSxyPXAocyxmdW5jdGlvbihlKXtyZXR1cm4gZy5tc2llJiZcImxpbmUtaGVpZ2h0XCI9PWUmJlwiMXB4XCI9PW8uY3NzKGUpP1wibGluZS1oZWlnaHQ6MS41XCI6ZStcIjpcIitvLmNzcyhlKX0pLmpvaW4oXCI7XCIpLG8ucmVtb3ZlKCkscn0sZ2V0RWZmZWN0aXZlQmFja2dyb3VuZDpmdW5jdGlvbihlKXt2YXIgdD1lLmNzcyhcImJhY2tncm91bmQtY29sb3JcIik7cmV0dXJuIHQuaW5kZXhPZihcInJnYmEoMCwgMCwgMCwgMFwiKTwwJiZcInRyYW5zcGFyZW50XCIhPT10P3Q6XCJodG1sXCI9PT1lWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9cIldpbmRvd1wiOnUuZ2V0RWZmZWN0aXZlQmFja2dyb3VuZChlLnBhcmVudCgpKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG89XCIgXCIrdC5jbGFzc05hbWUrXCIgXCIsYT1uLnNwbGl0KFwiIFwiKTtmb3IoaT0wLHI9YS5sZW5ndGg7cj5pO2krKylvPW8ucmVwbGFjZShcIiBcIithW2ldK1wiIFwiLFwiIFwiKTtvPWUudHJpbShvKSxvLmxlbmd0aD90LmNsYXNzTmFtZT1vOnQucmVtb3ZlQXR0cmlidXRlKHcpfSxjb21tb25BbmNlc3RvcjpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz1hcmd1bWVudHMubGVuZ3RoLGE9W10scz0xLzAsbD1udWxsO2lmKCFvKXJldHVybiBudWxsO2lmKDE9PW8pcmV0dXJuIGFyZ3VtZW50c1swXTtmb3IoZT0wO28+ZTtlKyspe2Zvcih0PVtdLG49YXJndW1lbnRzW2VdO247KXQucHVzaChuKSxuPW4ucGFyZW50Tm9kZTthLnB1c2godC5yZXZlcnNlKCkpLHM9TWF0aC5taW4ocyx0Lmxlbmd0aCl9aWYoMT09bylyZXR1cm4gYVswXVswXTtmb3IoZT0wO3M+ZTtlKyspe2ZvcihpPWFbMF1bZV0scj0xO28+cjtyKyspaWYoaSE9YVtyXVtlXSlyZXR1cm4gbDtsPWl9cmV0dXJuIGx9LGNsb3Nlc3RTcGxpdHRhYmxlUGFyZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscjtyZXR1cm4gbj0xPT10Lmxlbmd0aD91LnBhcmVudE9mVHlwZSh0WzBdLFtcInVsXCIsXCJvbFwiXSk6dS5jb21tb25BbmNlc3Rvci5hcHBseShudWxsLHQpLG58fChuPXUucGFyZW50T2ZUeXBlKHRbMF0sW1wicFwiLFwidGRcIl0pfHx0WzBdLm93bmVyRG9jdW1lbnQuYm9keSksdS5pc0lubGluZShuKSYmKG49dS5ibG9ja1BhcmVudE9yQm9keShuKSksaT1wKHQsdS5lZGl0YWJsZVBhcmVudCkscj11LmNvbW1vbkFuY2VzdG9yKGkpWzBdLGUuY29udGFpbnMobixyKSYmKG49ciksbn0sY2xvc2VzdEVkaXRhYmxlOmZ1bmN0aW9uKHQsbil7dmFyIGk9dS5wYXJlbnRPZlR5cGUodCxuKSxyPXUuZWRpdGFibGVQYXJlbnQodCk7cmV0dXJuIGkmJnImJmUuY29udGFpbnMoaSxyKT9pPXI6IWkmJnImJihpPXIpLGl9LGNsb3Nlc3RFZGl0YWJsZU9mVHlwZTpmdW5jdGlvbihlLHQpe3ZhciBuPXUuY2xvc2VzdEVkaXRhYmxlKGUsdCk7cmV0dXJuIG4mJnUub2ZUeXBlKG4sdCk/bjp2b2lkIDB9LGZpbHRlcjpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpLHI9MCxvPXQubGVuZ3RoLGE9W107bz5yO3IrKylpPXUubmFtZSh0W3JdKSwoIW4mJmk9PWV8fG4mJmkhPWUpJiZhLnB1c2godFtyXSk7cmV0dXJuIGF9LGVuc3VyZVRyYWlsaW5nQnJlYWtzOmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuZmluZChcInAsdGQsdGhcIiksaT1uLmxlbmd0aCxyPTA7XG5pZihpKWZvcig7aT5yO3IrKyl1LmVuc3VyZVRyYWlsaW5nQnJlYWsobltyXSk7ZWxzZSB1LmVuc3VyZVRyYWlsaW5nQnJlYWsodCl9LGVuc3VyZVRyYWlsaW5nQnJlYWs6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmxhc3RDaGlsZCxpPW4mJnUubmFtZShuKTsoIWl8fFwiYnJcIiE9aSYmXCJpbWdcIiE9aXx8XCJiclwiPT1pJiZcImstYnJcIiE9bi5jbGFzc05hbWUpJiYodD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpLHQuY2xhc3NOYW1lPVwiay1iclwiLGUuYXBwZW5kQ2hpbGQodCkpfX0saC51aS5lZGl0b3IuRG9tPXV9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXdpbmRvdy5rZW5kbyxvPXIudWkuZWRpdG9yLGE9by5Eb20scz1lLmV4dGVuZCxsPVwieHgtc21hbGwseC1zbWFsbCxzbWFsbCxtZWRpdW0sbGFyZ2UseC1sYXJnZSx4eC1sYXJnZVwiLnNwbGl0KFwiLFwiKSxjPS9cIi9nLGQ9LzxicltePl0qPi9pLHU9L15cXGQrKFxcLlxcZCopPyhweCk/JC9pLGg9LzxwPjxcXC9wPi9pLHA9LyhbXFx3fFxcLV0rKVxccyo6XFxzKihbXjtdKyk7Py9pLGY9L15zaXp6bGUtXFxkKy9pLGc9L15rLXNjcmlwdC0vaSxtPS9cXHMqb25lcnJvclxccyo9XFxzKig/Oid8XCIpPyhbXidcIj5cXHNdKikoPzonfFwiKT8vaSx2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7di5pbm5lckhUTUw9XCIgPGhyPlwiLG49Mz09PXYuZmlyc3RDaGlsZC5ub2RlVHlwZSx2PW51bGwsaT17dG9FZGl0YWJsZUh0bWw6ZnVuY3Rpb24oZSl7dmFyIHQ9JzxiciBjbGFzcz1cImstYnJcIj4nO3JldHVybiBlPWV8fFwiXCIsZS5yZXBsYWNlKC88IVxcW0NEQVRBXFxbKC4qKT9cXF1cXF0+L2csXCI8IS0tW0NEQVRBWyQxXV0tLT5cIikucmVwbGFjZSgvPHNjcmlwdChbXj5dKik+KC4qKT88XFwvc2NyaXB0Pi9naSxcIjx0ZWxlcmlrOnNjcmlwdCQxPiQyPC90ZWxlcmlrOnNjcmlwdD5cIikucmVwbGFjZSgvPGltZyhbXj5dKik+L2dpLGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UobSxcIlwiKX0pLnJlcGxhY2UoLyg8XFwvP2ltZ1tePl0qPilbXFxyXFxuXFx2XFxmXFx0IF0rL2dpLFwiJDFcIikucmVwbGFjZSgvXjwodGFibGV8YmxvY2txdW90ZSkvaSx0K1wiPCQxXCIpLnJlcGxhY2UoLzxcXC8odGFibGV8YmxvY2txdW90ZSk+JC9pLFwiPC8kMT5cIit0KX0sX2ZpbGxFbXB0eUVsZW1lbnRzOmZ1bmN0aW9uKHQpe2UodCkuZmluZChcInBcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0LG49ZSh0aGlzKTtpZigvXlxccyokL2cudGVzdChuLnRleHQoKSkmJiFuLmZpbmQoXCJpbWcsaW5wdXRcIikubGVuZ3RoKXtmb3IodD10aGlzO3QuZmlyc3RDaGlsZCYmMyE9dC5maXJzdENoaWxkLm5vZGVUeXBlOyl0PXQuZmlyc3RDaGlsZDsxIT10Lm5vZGVUeXBlfHxhLmVtcHR5W2EubmFtZSh0KV18fCh0LmlubmVySFRNTD1yLnVpLmVkaXRvci5lbXB0eUVsZW1lbnRDb250ZW50KX19KX0sX3JlbW92ZVN5c3RlbUVsZW1lbnRzOmZ1bmN0aW9uKHQpe2UoXCIuay1wYXN0ZS1jb250YWluZXJcIix0KS5yZW1vdmUoKX0sX3Jlc2V0T3JkZXJlZExpc3RzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJvbFwiKTtmb3IodD0wO3IubGVuZ3RoPnQ7dCsrKW49clt0XSxpPW4uZ2V0QXR0cmlidXRlKFwic3RhcnRcIiksbi5zZXRBdHRyaWJ1dGUoXCJzdGFydFwiLDEpLGk/bi5zZXRBdHRyaWJ1dGUoXCJzdGFydFwiLGkpOm4ucmVtb3ZlQXR0cmlidXRlKGkpfSxfcHJldmVudFNjcmlwdEV4ZWN1dGlvbjpmdW5jdGlvbih0KXtlKHQpLmZpbmQoXCIqXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuYXR0cmlidXRlcztmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKyllPXJbdF0saT1lLm5vZGVOYW1lLGUuc3BlY2lmaWVkJiYvXm9uL2kudGVzdChpKSYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGkpLHRoaXMuc2V0QXR0cmlidXRlKFwiay1zY3JpcHQtXCIraSxlLm5vZGVWYWx1ZSkpfSl9LGh0bWxUb0RvbTpmdW5jdGlvbih0LG4pe3ZhciBvLHMsbD1yLnN1cHBvcnQuYnJvd3NlcixjPWwubXNpZSxkPWMmJjk+bC52ZXJzaW9uO3JldHVybiB0PWkudG9FZGl0YWJsZUh0bWwodCksZCYmKHQ9XCI8YnIvPlwiK3Qsbz1cIm9yaWdpbmFsc3JjXCIscz1cIm9yaWdpbmFsaHJlZlwiLHQ9dC5yZXBsYWNlKC9ocmVmXFxzKj1cXHMqKD86J3xcIik/KFteJ1wiPlxcc10qKSg/Oid8XCIpPy8scysnPVwiJDFcIicpLHQ9dC5yZXBsYWNlKC9zcmNcXHMqPVxccyooPzonfFwiKT8oW14nXCI+XFxzXSopKD86J3xcIik/LyxvKyc9XCIkMVwiJykpLG4uaW5uZXJIVE1MPXQsZD8oYS5yZW1vdmUobi5maXJzdENoaWxkKSxlKG4pLmZpbmQoXCJ0ZWxlcmlrXFxcXDpzY3JpcHQsc2NyaXB0LGxpbmssaW1nLGFcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZVtzXSYmKGUuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGVbc10pLGUucmVtb3ZlQXR0cmlidXRlKHMpKSxlW29dJiYoZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIixlW29dKSxlLnJlbW92ZUF0dHJpYnV0ZShvKSl9KSk6YyYmKGEubm9ybWFsaXplKG4pLGkuX3Jlc2V0T3JkZXJlZExpc3RzKG4pKSxpLl9wcmV2ZW50U2NyaXB0RXhlY3V0aW9uKG4pLGkuX2ZpbGxFbXB0eUVsZW1lbnRzKG4pLGkuX3JlbW92ZVN5c3RlbUVsZW1lbnRzKG4pLGUoXCJ0YWJsZVwiLG4pLmFkZENsYXNzKFwiay10YWJsZVwiKSxufSxkb21Ub1hodG1sOmZ1bmN0aW9uKGksbyl7ZnVuY3Rpb24gcyh0KXt2YXIgbixpLHIsbyxzPWUudHJpbSxsPXModCkuc3BsaXQoXCI7XCIpLGQ9bC5sZW5ndGg7Zm9yKG49MCxkPWwubGVuZ3RoO2Q+bjtuKyspbFtuXS5sZW5ndGgmJihpPXAuZXhlYyhsW25dKSxpJiYocj1zKGlbMV0udG9Mb3dlckNhc2UoKSksbz1zKGlbMl0pLFwiZm9udC1zaXplLWFkanVzdFwiIT1yJiZcImZvbnQtc3RyZXRjaFwiIT1yJiYoci5pbmRleE9mKFwiY29sb3JcIik+PTA/bz1hLnRvSGV4KG8pOnIuaW5kZXhPZihcImZvbnRcIik+PTA/bz1vLnJlcGxhY2UoYyxcIidcIik6L1xcYnVybFxcKC9nLnRlc3QobykmJihvPW8ucmVwbGFjZShjLFwiXCIpKSxiLnB1c2gociksYi5wdXNoKFwiOlwiKSxiLnB1c2gobyksYi5wdXNoKFwiO1wiKSkpKX1mdW5jdGlvbiBtKG4pe3ZhciBpLGwsYyxkLGgscCxtLHYsXyx5PVtdLHc9bi5hdHRyaWJ1dGVzO2ZvcihhLmlzKG4sXCJpbWdcIikmJihtPW4uc3R5bGUud2lkdGgsdj1uLnN0eWxlLmhlaWdodCxfPWUobiksbSYmdS50ZXN0KG0pJiYoXy5hdHRyKFwid2lkdGhcIixwYXJzZUludChtLDEwKSksYS51bnN0eWxlKG4se3dpZHRoOnR9KSksdiYmdS50ZXN0KHYpJiYoXy5hdHRyKFwiaGVpZ2h0XCIscGFyc2VJbnQodiwxMCkpLGEudW5zdHlsZShuLHtoZWlnaHQ6dH0pKSksbD0wLGM9dy5sZW5ndGg7Yz5sO2wrKylpPXdbbF0sZD1pLm5vZGVOYW1lLGg9aS5ub2RlVmFsdWUscD1pLnNwZWNpZmllZCxcInZhbHVlXCI9PWQmJlwidmFsdWVcImluIG4mJm4udmFsdWU/cD0hMDpcInR5cGVcIj09ZCYmXCJ0ZXh0XCI9PWg/cD0hMDpcImNsYXNzXCIhPWR8fGg/Zi50ZXN0KGQpP3A9ITE6XCJjb21wbGV0ZVwiPT1kP3A9ITE6XCJhbHRIdG1sXCI9PWQ/cD0hMTpcInN0YXJ0XCI9PWQmJihhLmlzKG4sXCJ1bFwiKXx8YS5pcyhuLFwib2xcIikpP3A9ITE6ZC5pbmRleE9mKFwiX21velwiKT49MD9wPSExOmcudGVzdChkKSYmKHA9ISFvLnNjcmlwdHMpOnA9ITEscCYmeS5wdXNoKGkpO2lmKHkubGVuZ3RoKWZvcih5LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5ub2RlTmFtZT50Lm5vZGVOYW1lPzE6dC5ub2RlTmFtZT5lLm5vZGVOYW1lPy0xOjB9KSxsPTAsYz15Lmxlbmd0aDtjPmw7bCsrKWk9eVtsXSxkPWkubm9kZU5hbWUsaD1pLm5vZGVWYWx1ZSwoXCJjbGFzc1wiIT1kfHxcImstdGFibGVcIiE9aCkmJihkPWQucmVwbGFjZShnLFwiXCIpLGIucHVzaChcIiBcIiksYi5wdXNoKGQpLGIucHVzaCgnPVwiJyksXCJzdHlsZVwiPT1kP3MoaHx8bi5zdHlsZS5jc3NUZXh0KTpiLnB1c2goXCJzcmNcIj09ZHx8XCJocmVmXCI9PWQ/ci5odG1sRW5jb2RlKG4uZ2V0QXR0cmlidXRlKGQsMikpOmEuZmlsbEF0dHJzW2RdP2Q6aCksYi5wdXNoKCdcIicpKX1mdW5jdGlvbiB2KGUsdCxuKXtmb3IodmFyIGk9ZS5maXJzdENoaWxkO2k7aT1pLm5leHRTaWJsaW5nKXkoaSx0LG4pfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGUubm9kZVZhbHVlLnJlcGxhY2UoL1xcdWZlZmYvZyxcIlwiKX1mdW5jdGlvbiB5KGUsaSxyKXt2YXIgcyxsLGMsZCx1LGg9ZS5ub2RlVHlwZTtpZigxPT1oKXtpZihzPWEubmFtZShlKSwhc3x8YS5pbnNpZ25pZmljYW50KGUpKXJldHVybjtpZihhLmlzSW5saW5lKGUpJiYxPT1lLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1lLmZpcnN0Q2hpbGQubm9kZVR5cGUmJiFfKGUuZmlyc3RDaGlsZCkpcmV0dXJuO2lmKCFvLnNjcmlwdHMmJlwidGVsZXJpazpzY3JpcHRcIj09cylyZXR1cm47aWYobD1rW3NdKXJldHVybiBsLnN0YXJ0KGUpLHYoZSwhMSxsLnNraXBFbmNvZGluZyksbC5lbmQoZSksdDtiLnB1c2goXCI8XCIpLGIucHVzaChzKSxtKGUpLGEuZW1wdHlbc10/Yi5wdXNoKFwiIC8+XCIpOihiLnB1c2goXCI+XCIpLHYoZSxpfHxhLmlzKGUsXCJwcmVcIikpLGIucHVzaChcIjwvXCIpLGIucHVzaChzKSxiLnB1c2goXCI+XCIpKX1lbHNlIDM9PWg/KGQ9XyhlKSwhaSYmbiYmKGM9ZS5wYXJlbnROb2RlLHU9ZS5wcmV2aW91c1NpYmxpbmcsdXx8KHU9KGEuaXNJbmxpbmUoYyk/YzplKS5wcmV2aW91c1NpYmxpbmcpLCghdXx8XCJcIj09PXUuaW5uZXJIVE1MfHxhLmlzQmxvY2sodSkpJiYoZD1kLnJlcGxhY2UoL15bXFxyXFxuXFx2XFxmXFx0IF0rLyxcIlwiKSksZD1kLnJlcGxhY2UoLyArLyxcIiBcIikpLGIucHVzaChyP2Q6YS5lbmNvZGUoZCxvKSkpOjQ9PWg/KGIucHVzaChcIjwhW0NEQVRBW1wiKSxiLnB1c2goZS5kYXRhKSxiLnB1c2goXCJdXT5cIikpOjg9PWgmJihlLmRhdGEuaW5kZXhPZihcIltDREFUQVtcIik8MD8oYi5wdXNoKFwiPCEtLVwiKSxiLnB1c2goZS5kYXRhKSxiLnB1c2goXCItLT5cIikpOihiLnB1c2goXCI8IVwiKSxiLnB1c2goZS5kYXRhKSxiLnB1c2goXCI+XCIpKSl9ZnVuY3Rpb24gdyhlKXt2YXIgdD1lLmNoaWxkTm9kZXMubGVuZ3RoLG49dCYmMz09ZS5maXJzdENoaWxkLm5vZGVUeXBlO3JldHVybiBuJiYoMT09dHx8Mj09dCYmYS5pbnNpZ25pZmljYW50KGUubGFzdENoaWxkKSl9dmFyIGI9W10saz17XCJ0ZWxlcmlrOnNjcmlwdFwiOntzdGFydDpmdW5jdGlvbihlKXtiLnB1c2goXCI8c2NyaXB0XCIpLG0oZSksYi5wdXNoKFwiPlwiKX0sZW5kOmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPC9zY3JpcHQ+XCIpfSxza2lwRW5jb2Rpbmc6ITB9LGI6e3N0YXJ0OmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPHN0cm9uZz5cIil9LGVuZDpmdW5jdGlvbigpe2IucHVzaChcIjwvc3Ryb25nPlwiKX19LGk6e3N0YXJ0OmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPGVtPlwiKX0sZW5kOmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPC9lbT5cIil9fSx1OntzdGFydDpmdW5jdGlvbigpe2IucHVzaCgnPHNwYW4gc3R5bGU9XCJ0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO1wiPicpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L3NwYW4+XCIpfX0saWZyYW1lOntzdGFydDpmdW5jdGlvbihlKXtiLnB1c2goXCI8aWZyYW1lXCIpLG0oZSksYi5wdXNoKFwiPlwiKX0sZW5kOmZ1bmN0aW9uKCl7Yi5wdXNoKFwiPC9pZnJhbWU+XCIpfX0sZm9udDp7c3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2IucHVzaCgnPHNwYW4gc3R5bGU9XCInKSx0PWUuZ2V0QXR0cmlidXRlKFwiY29sb3JcIiksbj1sW2UuZ2V0QXR0cmlidXRlKFwic2l6ZVwiKV0saT1lLmdldEF0dHJpYnV0ZShcImZhY2VcIiksdCYmKGIucHVzaChcImNvbG9yOlwiKSxiLnB1c2goYS50b0hleCh0KSksYi5wdXNoKFwiO1wiKSksaSYmKGIucHVzaChcImZvbnQtZmFjZTpcIiksYi5wdXNoKGkpLGIucHVzaChcIjtcIikpLG4mJihiLnB1c2goXCJmb250LXNpemU6XCIpLGIucHVzaChuKSxiLnB1c2goXCI7XCIpKSxiLnB1c2goJ1wiPicpfSxlbmQ6ZnVuY3Rpb24oKXtiLnB1c2goXCI8L3NwYW4+XCIpfX19O3JldHVybiBvPW98fHt9LHcoaSk/YS5lbmNvZGUoXyhpLmZpcnN0Q2hpbGQpLnJlcGxhY2UoL1tcXHJcXG5cXHZcXGZcXHQgXSsvLFwiIFwiKSxvKToodihpKSxiPWIuam9pbihcIlwiKSxcIlwiPT09Yi5yZXBsYWNlKGQsXCJcIikucmVwbGFjZShoLFwiXCIpP1wiXCI6Yil9fSxzKG8se1NlcmlhbGl6ZXI6aX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxuLGkpe3ZhciByLG8sYSxzO2lmKGU9PXQpcmV0dXJuIGktbjtmb3Iocj10O3ImJnIucGFyZW50Tm9kZSE9ZTspcj1yLnBhcmVudE5vZGU7aWYocilyZXR1cm4gcChyKS1uO2ZvcihyPWU7ciYmci5wYXJlbnROb2RlIT10OylyPXIucGFyZW50Tm9kZTtpZihyKXJldHVybiBpLXAociktMTtmb3Iobz1oLmNvbW1vbkFuY2VzdG9yKGUsdCksYT1lO2EmJmEucGFyZW50Tm9kZSE9bzspYT1hLnBhcmVudE5vZGU7Zm9yKGF8fChhPW8pLHM9dDtzJiZzLnBhcmVudE5vZGUhPW87KXM9cy5wYXJlbnROb2RlO3JldHVybiBzfHwocz1vKSxhPT1zPzA6cChzKS1wKGEpfWZ1bmN0aW9uIG4oZSxuKXtmdW5jdGlvbiBpKGUpe3RyeXtyZXR1cm4gdChlLnN0YXJ0Q29udGFpbmVyLGUuZW5kQ29udGFpbmVyLGUuc3RhcnRPZmZzZXQsZS5lbmRPZmZzZXQpPDB9Y2F0Y2gobil7cmV0dXJuITB9fWkoZSkmJihuPyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyPWUuZW5kQ29udGFpbmVyPWUuc3RhcnRDb250YWluZXIsZS5lbmRPZmZzZXQ9ZS5zdGFydE9mZnNldCk6KGUuY29tbW9uQW5jZXN0b3JDb250YWluZXI9ZS5zdGFydENvbnRhaW5lcj1lLmVuZENvbnRhaW5lcixlLnN0YXJ0T2Zmc2V0PWUuZW5kT2Zmc2V0KSxlLmNvbGxhcHNlZD0hMCl9ZnVuY3Rpb24gaShlKXtlLmNvbGxhcHNlZD1lLnN0YXJ0Q29udGFpbmVyPT1lLmVuZENvbnRhaW5lciYmZS5zdGFydE9mZnNldD09ZS5lbmRPZmZzZXQ7Zm9yKHZhciB0PWUuc3RhcnRDb250YWluZXI7dCYmdCE9ZS5lbmRDb250YWluZXImJiFoLmlzQW5jZXN0b3JPZih0LGUuZW5kQ29udGFpbmVyKTspdD10LnBhcmVudE5vZGU7ZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcj10fWZ1bmN0aW9uIHIoZSl7dmFyIHQ9ZS5kdXBsaWNhdGUoKSxuPWUuZHVwbGljYXRlKCk7cmV0dXJuIHQuY29sbGFwc2UoITApLG4uY29sbGFwc2UoITEpLGguY29tbW9uQW5jZXN0b3IoZS5wYXJlbnRFbGVtZW50KCksdC5wYXJlbnRFbGVtZW50KCksbi5wYXJlbnRFbGVtZW50KCkpfWZ1bmN0aW9uIG8oZSx0LG4pe3ZhciBpLHI9dFtuP1wic3RhcnRDb250YWluZXJcIjpcImVuZENvbnRhaW5lclwiXSxvPXRbbj9cInN0YXJ0T2Zmc2V0XCI6XCJlbmRPZmZzZXRcIl0sYT0wLHM9ZihyKSxsPXM/cjpyLmNoaWxkTm9kZXNbb118fG51bGwsYz1zP3IucGFyZW50Tm9kZTpyLGQ9dC5vd25lckRvY3VtZW50LHU9ZC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpOygzPT1yLm5vZGVUeXBlfHw0PT1yLm5vZGVUeXBlKSYmKGE9byksY3x8KGM9ZC5ib2R5KSxcImltZ1wiPT1jLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/KHUubW92ZVRvRWxlbWVudFRleHQoYyksdS5jb2xsYXBzZSghMSksZS5zZXRFbmRQb2ludChuP1wiU3RhcnRUb1N0YXJ0XCI6XCJFbmRUb1N0YXJ0XCIsdSkpOihpPWMuaW5zZXJ0QmVmb3JlKGguY3JlYXRlKGQsXCJhXCIpLGwpLHUubW92ZVRvRWxlbWVudFRleHQoaSksaC5yZW1vdmUoaSksdVtuP1wibW92ZVN0YXJ0XCI6XCJtb3ZlRW5kXCJdKFwiY2hhcmFjdGVyXCIsYSksdS5jb2xsYXBzZSghMSksZS5zZXRFbmRQb2ludChuP1wiU3RhcnRUb1N0YXJ0XCI6XCJFbmRUb1N0YXJ0XCIsdSkpfWZ1bmN0aW9uIGEoZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdT1oLmNyZWF0ZSh0Lm93bmVyRG9jdW1lbnQsXCJhXCIpLGc9ZS5kdXBsaWNhdGUoKSxtPWk/XCJTdGFydFRvU3RhcnRcIjpcIlN0YXJ0VG9FbmRcIix2PSExO3UuaW5uZXJIVE1MPVwi77u/XCIsZy5jb2xsYXBzZShpKSxvPWcucGFyZW50RWxlbWVudCgpLGguaXNBbmNlc3Rvck9yU2VsZihuLG8pfHwobz1uKTtkbyB2P28uaW5zZXJ0QmVmb3JlKHUsdS5wcmV2aW91c1NpYmxpbmcpOihvLmFwcGVuZENoaWxkKHUpLHY9ITApLGcubW92ZVRvRWxlbWVudFRleHQodSk7d2hpbGUoKHI9Zy5jb21wYXJlRW5kUG9pbnRzKG0sZSkpPjAmJnUucHJldmlvdXNTaWJsaW5nKTthPXUubmV4dFNpYmxpbmcsLTE9PXImJmYoYSk/KGcuc2V0RW5kUG9pbnQoaT9cIkVuZFRvU3RhcnRcIjpcIkVuZFRvRW5kXCIsZSksaC5yZW1vdmUodSksYz1bYSxnLnRleHQubGVuZ3RoXSk6KHM9IWkmJnUucHJldmlvdXNTaWJsaW5nLGw9aSYmdS5uZXh0U2libGluZyxmKGwpP2M9W2wsMF06ZihzKT9jPVtzLHMubGVuZ3RoXTooZD1wKHUpLGM9by5uZXh0U2libGluZyYmZD09by5jaGlsZE5vZGVzLmxlbmd0aC0xP1tvLm5leHRTaWJsaW5nLDBdOltvLGRdKSxoLnJlbW92ZSh1KSksdFtpP1wic2V0U3RhcnRcIjpcInNldEVuZFwiXS5hcHBseSh0LGMpfXZhciBzPXdpbmRvdy5rZW5kbyxsPXMuQ2xhc3MsYz1lLmV4dGVuZCxkPXMudWkuZWRpdG9yLHU9cy5zdXBwb3J0LmJyb3dzZXIsaD1kLkRvbSxwPWguZmluZE5vZGVJbmRleCxmPWguaXNEYXRhTm9kZSxnPWguZmluZENsb3Nlc3RBbmNlc3RvcixtPWguZ2V0Tm9kZUxlbmd0aCx2PWgubm9ybWFsaXplLF89e3NlbGVjdGlvbkZyb21XaW5kb3c6ZnVuY3Rpb24oZSl7cmV0dXJuXCJnZXRTZWxlY3Rpb25cImluIGU/ZS5nZXRTZWxlY3Rpb24oKTpuZXcgYihlLmRvY3VtZW50KX0sc2VsZWN0aW9uRnJvbVJhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PVQuZG9jdW1lbnRGcm9tUmFuZ2UoZSk7cmV0dXJuIF8uc2VsZWN0aW9uRnJvbURvY3VtZW50KHQpfSxzZWxlY3Rpb25Gcm9tRG9jdW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIF8uc2VsZWN0aW9uRnJvbVdpbmRvdyhoLndpbmRvd0Zyb21Eb2N1bWVudChlKSl9fSx5PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe2UuZXh0ZW5kKHRoaXMse293bmVyRG9jdW1lbnQ6dCxzdGFydENvbnRhaW5lcjp0LGVuZENvbnRhaW5lcjp0LGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOnQsc3RhcnRPZmZzZXQ6MCxlbmRPZmZzZXQ6MCxjb2xsYXBzZWQ6ITB9KX0sc2V0U3RhcnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnN0YXJ0Q29udGFpbmVyPWUsdGhpcy5zdGFydE9mZnNldD10LGkodGhpcyksbih0aGlzLCEwKX0sc2V0RW5kOmZ1bmN0aW9uKGUsdCl7dGhpcy5lbmRDb250YWluZXI9ZSx0aGlzLmVuZE9mZnNldD10LGkodGhpcyksbih0aGlzLCExKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGFydChlLnBhcmVudE5vZGUscChlKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGFydChlLnBhcmVudE5vZGUscChlKSsxKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGUpe3RoaXMuc2V0RW5kKGUucGFyZW50Tm9kZSxwKGUpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oZSl7dGhpcy5zZXRFbmQoZS5wYXJlbnROb2RlLHAoZSkrMSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGFydEJlZm9yZShlKSx0aGlzLnNldEVuZEFmdGVyKGUpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGFydChlLDApLHRoaXMuc2V0RW5kKGUsZVsxPT09ZS5ub2RlVHlwZT9cImNoaWxkTm9kZXNcIjpcIm5vZGVWYWx1ZVwiXS5sZW5ndGgpfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2U/dC5zZXRFbmQodC5zdGFydENvbnRhaW5lcix0LnN0YXJ0T2Zmc2V0KTp0LnNldFN0YXJ0KHQuZW5kQ29udGFpbmVyLHQuZW5kT2Zmc2V0KX0sZGVsZXRlQ29udGVudHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5jbG9uZVJhbmdlKCk7ZS5zdGFydENvbnRhaW5lciE9ZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciYmZS5zZXRTdGFydEFmdGVyKGcoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcixlLnN0YXJ0Q29udGFpbmVyKSksZS5jb2xsYXBzZSghMCksZnVuY3Rpb24gbihlKXtmb3IoO2UubmV4dCgpOyllLmhhc1BhcnRpYWxTdWJ0cmVlKCk/bihlLmdldFN1YnRyZWVJdGVyYXRvcigpKTplLnJlbW92ZSgpfShuZXcgdyh0KSl9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXt2YXIgZT1ULmRvY3VtZW50RnJvbVJhbmdlKHRoaXMpO3JldHVybiBmdW5jdGlvbiB0KG4pe2Zvcih2YXIgaSxyPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2k9bi5uZXh0KCk7KWk9aS5jbG9uZU5vZGUoIW4uaGFzUGFydGlhbFN1YnRyZWUoKSksbi5oYXNQYXJ0aWFsU3VidHJlZSgpJiZpLmFwcGVuZENoaWxkKHQobi5nZXRTdWJ0cmVlSXRlcmF0b3IoKSkpLHIuYXBwZW5kQ2hpbGQoaSk7cmV0dXJuIHJ9KG5ldyB3KHRoaXMpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC5jbG9uZVJhbmdlKCk7cmV0dXJuIHQuc3RhcnRDb250YWluZXIhPXQuY29tbW9uQW5jZXN0b3JDb250YWluZXImJnQuc2V0U3RhcnRBZnRlcihnKHQuY29tbW9uQW5jZXN0b3JDb250YWluZXIsdC5zdGFydENvbnRhaW5lcikpLHQuY29sbGFwc2UoITApLGU9VC5kb2N1bWVudEZyb21SYW5nZSh0KSxmdW5jdGlvbiBpKG4pe2Zvcih2YXIgcixvPWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3I9bi5uZXh0KCk7KW4uaGFzUGFydGlhbFN1YnRyZWUoKT8ocj1yLmNsb25lTm9kZSghMSksci5hcHBlbmRDaGlsZChpKG4uZ2V0U3VidHJlZUl0ZXJhdG9yKCkpKSk6bi5yZW1vdmUodC5vcmlnaW5hbFJhbmdlKSxvLmFwcGVuZENoaWxkKHIpO3JldHVybiBvfShuZXcgdyhuKSl9LGluc2VydE5vZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztmKHQuc3RhcnRDb250YWluZXIpPyh0LnN0YXJ0T2Zmc2V0IT10LnN0YXJ0Q29udGFpbmVyLm5vZGVWYWx1ZS5sZW5ndGgmJmguc3BsaXREYXRhTm9kZSh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpLGguaW5zZXJ0QWZ0ZXIoZSx0LnN0YXJ0Q29udGFpbmVyKSk6aC5pbnNlcnRBdCh0LnN0YXJ0Q29udGFpbmVyLGUsdC5zdGFydE9mZnNldCksdC5zZXRTdGFydCh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZXh0ZW5kKG5ldyB5KHRoaXMub3duZXJEb2N1bWVudCkse3N0YXJ0Q29udGFpbmVyOnRoaXMuc3RhcnRDb250YWluZXIsZW5kQ29udGFpbmVyOnRoaXMuZW5kQ29udGFpbmVyLGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOnRoaXMuY29tbW9uQW5jZXN0b3JDb250YWluZXIsc3RhcnRPZmZzZXQ6dGhpcy5zdGFydE9mZnNldCxlbmRPZmZzZXQ6dGhpcy5lbmRPZmZzZXQsY29sbGFwc2VkOnRoaXMuY29sbGFwc2VkLG9yaWdpbmFsUmFuZ2U6dGhpc30pfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhcnRDb250YWluZXIubm9kZU5hbWUsdD10aGlzLmVuZENvbnRhaW5lci5ub2RlTmFtZTtyZXR1cm4oXCIjdGV4dFwiPT1lP3RoaXMuc3RhcnRDb250YWluZXIubm9kZVZhbHVlOmUpK1wiKFwiK3RoaXMuc3RhcnRPZmZzZXQrXCIpIDogXCIrKFwiI3RleHRcIj09dD90aGlzLmVuZENvbnRhaW5lci5ub2RlVmFsdWU6dCkrXCIoXCIrdGhpcy5lbmRPZmZzZXQrXCIpXCJ9fSksdz1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtpZihlLmV4dGVuZCh0aGlzLHtyYW5nZTp0LF9jdXJyZW50Om51bGwsX25leHQ6bnVsbCxfZW5kOm51bGx9KSwhdC5jb2xsYXBzZWQpe3ZhciBuPXQuY29tbW9uQW5jZXN0b3JDb250YWluZXI7dGhpcy5fbmV4dD10LnN0YXJ0Q29udGFpbmVyIT1ufHxmKHQuc3RhcnRDb250YWluZXIpP2cobix0LnN0YXJ0Q29udGFpbmVyKTp0LnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbdC5zdGFydE9mZnNldF0sdGhpcy5fZW5kPXQuZW5kQ29udGFpbmVyIT1ufHxmKHQuZW5kQ29udGFpbmVyKT9nKG4sdC5lbmRDb250YWluZXIpLm5leHRTaWJsaW5nOnQuZW5kQ29udGFpbmVyLmNoaWxkTm9kZXNbdC5lbmRPZmZzZXRdfX0saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fbmV4dH0sbmV4dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9jdXJyZW50PWUuX25leHQ7cmV0dXJuIGUuX25leHQ9ZS5fY3VycmVudCYmZS5fY3VycmVudC5uZXh0U2libGluZyE9ZS5fZW5kP2UuX2N1cnJlbnQubmV4dFNpYmxpbmc6bnVsbCxmKGUuX2N1cnJlbnQpJiYoZS5yYW5nZS5lbmRDb250YWluZXI9PWUuX2N1cnJlbnQmJih0PXQuY2xvbmVOb2RlKCEwKSx0LmRlbGV0ZURhdGEoZS5yYW5nZS5lbmRPZmZzZXQsdC5sZW5ndGgtZS5yYW5nZS5lbmRPZmZzZXQpKSxlLnJhbmdlLnN0YXJ0Q29udGFpbmVyPT1lLl9jdXJyZW50JiYodD10LmNsb25lTm9kZSghMCksdC5kZWxldGVEYXRhKDAsZS5yYW5nZS5zdGFydE9mZnNldCkpKSx0fSx0cmF2ZXJzZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGkuX2N1cnJlbnQ9aS5fbmV4dCxpLl9uZXh0PWkuX2N1cnJlbnQmJmkuX2N1cnJlbnQubmV4dFNpYmxpbmchPWkuX2VuZD9pLl9jdXJyZW50Lm5leHRTaWJsaW5nOm51bGwsaS5fY3VycmVudH1mb3IodmFyIG4saT10aGlzO249dCgpOylpLmhhc1BhcnRpYWxTdWJ0cmVlKCk/aS5nZXRTdWJ0cmVlSXRlcmF0b3IoKS50cmF2ZXJzZShlKTplKG4pO3JldHVybiBufSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz1hLnJhbmdlLnN0YXJ0Q29udGFpbmVyPT1hLl9jdXJyZW50LGw9YS5yYW5nZS5lbmRDb250YWluZXI9PWEuX2N1cnJlbnQ7ZihhLl9jdXJyZW50KSYmKHN8fGwpPyh0PXM/YS5yYW5nZS5zdGFydE9mZnNldDowLG49bD9hLnJhbmdlLmVuZE9mZnNldDphLl9jdXJyZW50Lmxlbmd0aCxpPW4tdCxlJiYoc3x8bCkmJihhLl9jdXJyZW50PT1lLnN0YXJ0Q29udGFpbmVyJiZlLnN0YXJ0T2Zmc2V0Pj10JiYoZS5zdGFydE9mZnNldC09aSksYS5fY3VycmVudD09ZS5lbmRDb250YWluZXImJmUuZW5kT2Zmc2V0Pj1uJiYoZS5lbmRPZmZzZXQtPWkpKSxhLl9jdXJyZW50LmRlbGV0ZURhdGEodCxpKSk6KHI9YS5fY3VycmVudC5wYXJlbnROb2RlLCFlfHxhLnJhbmdlLnN0YXJ0Q29udGFpbmVyIT1yJiZhLnJhbmdlLmVuZENvbnRhaW5lciE9cnx8KG89cChhLl9jdXJyZW50KSxyPT1lLnN0YXJ0Q29udGFpbmVyJiZlLnN0YXJ0T2Zmc2V0Pj1vJiYoZS5zdGFydE9mZnNldC09MSkscj09ZS5lbmRDb250YWluZXImJmUuZW5kT2Zmc2V0Pm8mJihlLmVuZE9mZnNldC09MSkpLGgucmVtb3ZlKGEuX2N1cnJlbnQpKX0saGFzUGFydGlhbFN1YnRyZWU6ZnVuY3Rpb24oKXtyZXR1cm4hZih0aGlzLl9jdXJyZW50KSYmKGguaXNBbmNlc3Rvck9yU2VsZih0aGlzLl9jdXJyZW50LHRoaXMucmFuZ2Uuc3RhcnRDb250YWluZXIpfHxoLmlzQW5jZXN0b3JPclNlbGYodGhpcy5fY3VycmVudCx0aGlzLnJhbmdlLmVuZENvbnRhaW5lcikpfSxnZXRTdWJ0cmVlSXRlcmF0b3I6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5yYW5nZS5jbG9uZVJhbmdlKCk7cmV0dXJuIHQuc2VsZWN0Tm9kZUNvbnRlbnRzKGUuX2N1cnJlbnQpLGguaXNBbmNlc3Rvck9yU2VsZihlLl9jdXJyZW50LGUucmFuZ2Uuc3RhcnRDb250YWluZXIpJiZ0LnNldFN0YXJ0KGUucmFuZ2Uuc3RhcnRDb250YWluZXIsZS5yYW5nZS5zdGFydE9mZnNldCksaC5pc0FuY2VzdG9yT3JTZWxmKGUuX2N1cnJlbnQsZS5yYW5nZS5lbmRDb250YWluZXIpJiZ0LnNldEVuZChlLnJhbmdlLmVuZENvbnRhaW5lcixlLnJhbmdlLmVuZE9mZnNldCksbmV3IHcodCl9fSksYj1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm93bmVyRG9jdW1lbnQ9ZSx0aGlzLnJhbmdlQ291bnQ9MX0sYWRkUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vd25lckRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7byh0LGUsITEpLG8odCxlLCEwKSx0LnNlbGVjdCgpfSxyZW1vdmVBbGxSYW5nZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uO1wiTm9uZVwiIT1lLnR5cGUmJmUuZW1wdHkoKX0sZ2V0UmFuZ2VBdDpmdW5jdGlvbigpe3ZhciBlLHQsbixpLG8scyxsLGMsZD1uZXcgeSh0aGlzLm93bmVyRG9jdW1lbnQpLHU9dGhpcy5vd25lckRvY3VtZW50LnNlbGVjdGlvbjt0cnl7aWYoZT11LmNyZWF0ZVJhbmdlKCksdD1lLml0ZW0/ZS5pdGVtKDApOmUucGFyZW50RWxlbWVudCgpLHQub3duZXJEb2N1bWVudCE9dGhpcy5vd25lckRvY3VtZW50KXJldHVybiBkfWNhdGNoKGgpe3JldHVybiBkfWlmKFwiQ29udHJvbFwiPT11LnR5cGUpZC5zZWxlY3ROb2RlKGUuaXRlbSgwKSk7ZWxzZSBpZihuPXIoZSksYShlLGQsbiwhMCksYShlLGQsbiwhMSksOT09ZC5zdGFydENvbnRhaW5lci5ub2RlVHlwZSYmZC5zZXRTdGFydChkLmVuZENvbnRhaW5lcixkLnN0YXJ0T2Zmc2V0KSw5PT1kLmVuZENvbnRhaW5lci5ub2RlVHlwZSYmZC5zZXRFbmQoZC5zdGFydENvbnRhaW5lcixkLmVuZE9mZnNldCksMD09PWUuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIixlKSYmZC5jb2xsYXBzZSghMSksaT1kLnN0YXJ0Q29udGFpbmVyLG89ZC5lbmRDb250YWluZXIscz10aGlzLm93bmVyRG9jdW1lbnQuYm9keSwhKGQuY29sbGFwc2VkfHwwIT09ZC5zdGFydE9mZnNldHx8ZC5lbmRPZmZzZXQhPW0oZC5lbmRDb250YWluZXIpfHxpPT1vJiZmKGkpJiZpLnBhcmVudE5vZGU9PXMpKXtmb3IobD0hMSxjPSExOzA9PT1wKGkpJiZpPT1pLnBhcmVudE5vZGUuZmlyc3RDaGlsZCYmaSE9czspaT1pLnBhcmVudE5vZGUsbD0hMDtmb3IoO3Aobyk9PW0oby5wYXJlbnROb2RlKS0xJiZvPT1vLnBhcmVudE5vZGUubGFzdENoaWxkJiZvIT1zOylvPW8ucGFyZW50Tm9kZSxjPSEwO2k9PXMmJm89PXMmJmwmJmMmJihkLnNldFN0YXJ0KGksMCksZC5zZXRFbmQobyxtKHMpKSl9cmV0dXJuIGR9fSksaz1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmVudW1lcmF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7aWYoaC5pcyhlLFwiaW1nXCIpfHwzPT1lLm5vZGVUeXBlJiYoIWguaXNXaGl0ZXNwYWNlKGUpfHxcIu+7v1wiPT1lLm5vZGVWYWx1ZSkpbi5wdXNoKGUpO2Vsc2UgZm9yKGU9ZS5maXJzdENoaWxkO2U7KXQoZSksZT1lLm5leHRTaWJsaW5nfXZhciBuPVtdO3JldHVybiBuZXcgdyhlKS50cmF2ZXJzZSh0KSxufX19KSx4PWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLnJhbmdlPWUsbi5yb290Tm9kZT1ULmRvY3VtZW50RnJvbVJhbmdlKGUpLG4uYm9keT10fHxuLmdldEVkaXRhYmxlKGUpLFwiYm9keVwiIT1oLm5hbWUobi5ib2R5KSYmKG4ucm9vdE5vZGU9bi5ib2R5KSxuLmh0bWw9bi5ib2R5LmlubmVySFRNTCxuLnN0YXJ0Q29udGFpbmVyPW4ubm9kZVRvUGF0aChlLnN0YXJ0Q29udGFpbmVyKSxuLmVuZENvbnRhaW5lcj1uLm5vZGVUb1BhdGgoZS5lbmRDb250YWluZXIpLG4uc3RhcnRPZmZzZXQ9bi5vZmZzZXQoZS5zdGFydENvbnRhaW5lcixlLnN0YXJ0T2Zmc2V0KSxuLmVuZE9mZnNldD1uLm9mZnNldChlLmVuZENvbnRhaW5lcixlLmVuZE9mZnNldCl9LGluZGV4OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAsaT1lLm5vZGVUeXBlO2U9ZS5wcmV2aW91c1NpYmxpbmc7KXQ9ZS5ub2RlVHlwZSwoMyE9dHx8aSE9dCkmJm4rKyxpPXQ7cmV0dXJuIG59LGdldEVkaXRhYmxlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO3QmJigzPT10Lm5vZGVUeXBlfHx0LmF0dHJpYnV0ZXMmJiF0LmF0dHJpYnV0ZXMuY29udGVudEVkaXRhYmxlKTspdD10LnBhcmVudE5vZGU7cmV0dXJuIHR9LHJlc3RvcmVIdG1sOmZ1bmN0aW9uKCl7dGhpcy5ib2R5LmlubmVySFRNTD10aGlzLmh0bWx9LG9mZnNldDpmdW5jdGlvbihlLHQpe2lmKDM9PWUubm9kZVR5cGUpZm9yKDsoZT1lLnByZXZpb3VzU2libGluZykmJjM9PWUubm9kZVR5cGU7KXQrPWUubm9kZVZhbHVlLmxlbmd0aDtyZXR1cm4gdH0sbm9kZVRvUGF0aDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W107ZSE9dGhpcy5yb290Tm9kZTspdC5wdXNoKHRoaXMuaW5kZXgoZSkpLGU9ZS5wYXJlbnROb2RlO3JldHVybiB0fSx0b1JhbmdlUG9pbnQ6ZnVuY3Rpb24oZSx0LG4saSl7Zm9yKHZhciByPXRoaXMucm9vdE5vZGUsbz1uLmxlbmd0aCxhPWk7by0tOylyPXIuY2hpbGROb2Rlc1tuW29dXTtmb3IoO3ImJjM9PXIubm9kZVR5cGUmJmE+ci5ub2RlVmFsdWUubGVuZ3RoOylhLT1yLm5vZGVWYWx1ZS5sZW5ndGgscj1yLm5leHRTaWJsaW5nO3ImJmE+PTAmJmVbdD9cInNldFN0YXJ0XCI6XCJzZXRFbmRcIl0ocixhKX0sdG9SYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnJhbmdlLmNsb25lUmFuZ2UoKTtyZXR1cm4gZS50b1JhbmdlUG9pbnQodCwhMCxlLnN0YXJ0Q29udGFpbmVyLGUuc3RhcnRPZmZzZXQpLGUudG9SYW5nZVBvaW50KHQsITEsZS5lbmRDb250YWluZXIsZS5lbmRPZmZzZXQpLHR9fSksQz1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuY2FyZXQ9bnVsbH0sYWRkQ2FyZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC5jYXJldD1oLmNyZWF0ZShULmRvY3VtZW50RnJvbVJhbmdlKGUpLFwic3BhblwiLHtjbGFzc05hbWU6XCJrLW1hcmtlclwifSksZS5pbnNlcnROb2RlKHQuY2FyZXQpLGUuc2VsZWN0Tm9kZSh0LmNhcmV0KSx0LmNhcmV0fSxyZW1vdmVDYXJldDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvPXRoaXMsYT1vLmNhcmV0LnByZXZpb3VzU2libGluZyxzPTA7YSYmKHM9ZihhKT9hLm5vZGVWYWx1ZS5sZW5ndGg6cChhKSksdD1vLmNhcmV0LnBhcmVudE5vZGUsbj1hP3AoYSk6MCxoLnJlbW92ZShvLmNhcmV0KSx2KHQpLGk9dC5jaGlsZE5vZGVzW25dLGYoaSk/ZS5zZXRTdGFydChpLHMpOmk/KHI9aC5sYXN0VGV4dE5vZGUoaSkscj9lLnNldFN0YXJ0KHIsci5ub2RlVmFsdWUubGVuZ3RoKTplW2E/XCJzZXRTdGFydEFmdGVyXCI6XCJzZXRTdGFydEJlZm9yZVwiXShpKSk6KHUubXNpZXx8dC5pbm5lckhUTUx8fCh0LmlubmVySFRNTD0nPGJyIF9tb3pfZGlydHk9XCJcIiAvPicpLGUuc2VsZWN0Tm9kZUNvbnRlbnRzKHQpKSxlLmNvbGxhcHNlKCEwKX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz1lLmNvbGxhcHNlZCYmIVQuaXNFeHBhbmRhYmxlKGUpLGE9VC5kb2N1bWVudEZyb21SYW5nZShlKTtyZXR1cm4gdCYmZS5jb2xsYXBzZWQmJihyLmFkZENhcmV0KGUpLGU9VC5leHBhbmQoZSkpLG49ZS5jbG9uZVJhbmdlKCksbi5jb2xsYXBzZSghMSksci5lbmQ9aC5jcmVhdGUoYSxcInNwYW5cIix7Y2xhc3NOYW1lOlwiay1tYXJrZXJcIn0pLG4uaW5zZXJ0Tm9kZShyLmVuZCksbj1lLmNsb25lUmFuZ2UoKSxuLmNvbGxhcHNlKCEwKSxyLnN0YXJ0PXIuZW5kLmNsb25lTm9kZSghMCksbi5pbnNlcnROb2RlKHIuc3RhcnQpLHIuX3JlbW92ZURlYWRNYXJrZXJzKHIuc3RhcnQsci5lbmQpLG8mJihpPWEuY3JlYXRlVGV4dE5vZGUoXCLvu79cIiksaC5pbnNlcnRBZnRlcihpLmNsb25lTm9kZSgpLHIuc3RhcnQpLGguaW5zZXJ0QmVmb3JlKGksci5lbmQpKSxlLnNldFN0YXJ0QmVmb3JlKHIuc3RhcnQpLGUuc2V0RW5kQWZ0ZXIoci5lbmQpLHYoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciksZX0sX3JlbW92ZURlYWRNYXJrZXJzOmZ1bmN0aW9uKGUsdCl7ZS5wcmV2aW91c1NpYmxpbmcmJlwi77u/XCI9PWUucHJldmlvdXNTaWJsaW5nLm5vZGVWYWx1ZSYmaC5yZW1vdmUoZS5wcmV2aW91c1NpYmxpbmcpLHQubmV4dFNpYmxpbmcmJlwi77u/XCI9PXQubmV4dFNpYmxpbmcubm9kZVZhbHVlJiZoLnJlbW92ZSh0Lm5leHRTaWJsaW5nKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxzLGwsYyxkLHUsZyxtLF89dGhpcyx5PV8uc3RhcnQsdz1fLmVuZDtmb3IodihlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKTsheS5uZXh0U2libGluZyYmeS5wYXJlbnROb2RlOyl5PXkucGFyZW50Tm9kZTtmb3IoOyF3LnByZXZpb3VzU2libGluZyYmdy5wYXJlbnROb2RlOyl3PXcucGFyZW50Tm9kZTtpZih0PXkucHJldmlvdXNTaWJsaW5nJiYzPT15LnByZXZpb3VzU2libGluZy5ub2RlVHlwZSYmeS5uZXh0U2libGluZyYmMz09eS5uZXh0U2libGluZy5ub2RlVHlwZSxuPXcucHJldmlvdXNTaWJsaW5nJiYzPT13LnByZXZpb3VzU2libGluZy5ub2RlVHlwZSYmdy5uZXh0U2libGluZyYmMz09dy5uZXh0U2libGluZy5ub2RlVHlwZSxpPXQmJm4seT15Lm5leHRTaWJsaW5nLHc9dy5wcmV2aW91c1NpYmxpbmcscj0hMSxvPSExLHk9PV8uZW5kJiYobz0hIV8uc3RhcnQucHJldmlvdXNTaWJsaW5nLHk9dz1fLnN0YXJ0LnByZXZpb3VzU2libGluZ3x8Xy5lbmQubmV4dFNpYmxpbmcscj0hMCksaC5yZW1vdmUoXy5zdGFydCksaC5yZW1vdmUoXy5lbmQpLCF5fHwhdylyZXR1cm4gZS5zZWxlY3ROb2RlQ29udGVudHMoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lciksdm9pZCBlLmNvbGxhcHNlKCEwKTtpZihhPXI/Zih5KT95Lm5vZGVWYWx1ZS5sZW5ndGg6eS5jaGlsZE5vZGVzLmxlbmd0aDowLHM9Zih3KT93Lm5vZGVWYWx1ZS5sZW5ndGg6dy5jaGlsZE5vZGVzLmxlbmd0aCwzPT15Lm5vZGVUeXBlKWZvcig7eS5wcmV2aW91c1NpYmxpbmcmJjM9PXkucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlOyl5PXkucHJldmlvdXNTaWJsaW5nLGErPXkubm9kZVZhbHVlLmxlbmd0aDtpZigzPT13Lm5vZGVUeXBlKWZvcig7dy5wcmV2aW91c1NpYmxpbmcmJjM9PXcucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlOyl3PXcucHJldmlvdXNTaWJsaW5nLHMrPXcubm9kZVZhbHVlLmxlbmd0aDtmb3IobD1wKHkpLGM9eS5wYXJlbnROb2RlLGQ9cCh3KSx1PXcucGFyZW50Tm9kZSxnPXk7Zy5wcmV2aW91c1NpYmxpbmc7Zz1nLnByZXZpb3VzU2libGluZykzPT1nLm5vZGVUeXBlJiYzPT1nLnByZXZpb3VzU2libGluZy5ub2RlVHlwZSYmbC0tO2ZvcihtPXc7bS5wcmV2aW91c1NpYmxpbmc7bT1tLnByZXZpb3VzU2libGluZykzPT1tLm5vZGVUeXBlJiYzPT1tLnByZXZpb3VzU2libGluZy5ub2RlVHlwZSYmZC0tO3YoYyksMz09eS5ub2RlVHlwZSYmKHk9Yy5jaGlsZE5vZGVzW2xdKSx2KHUpLDM9PXcubm9kZVR5cGUmJih3PXUuY2hpbGROb2Rlc1tkXSkscj8oMz09eS5ub2RlVHlwZT9lLnNldFN0YXJ0KHksYSk6ZVtvP1wic2V0U3RhcnRBZnRlclwiOlwic2V0U3RhcnRCZWZvcmVcIl0oeSksZS5jb2xsYXBzZSghMCkpOigzPT15Lm5vZGVUeXBlP2Uuc2V0U3RhcnQoeSxhKTplLnNldFN0YXJ0QmVmb3JlKHkpLDM9PXcubm9kZVR5cGU/ZS5zZXRFbmQodyxzKTplLnNldEVuZEFmdGVyKHcpKSxfLmNhcmV0JiZfLnJlbW92ZUNhcmV0KGUpfX0pLFM9L1tcXHUwMDA5LVxcdTAwMGRdfFxcdTAwMjB8XFx1MDBhMHxcXHVmZWZmfFxcLnwsfDt8OnwhfFxcKHxcXCl8XFw/LyxUPXtub2RlczpmdW5jdGlvbihlKXt2YXIgdD1ULnRleHROb2RlcyhlKTtyZXR1cm4gdC5sZW5ndGh8fChlLnNlbGVjdE5vZGVDb250ZW50cyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSx0PVQudGV4dE5vZGVzKGUpLHQubGVuZ3RofHwodD1oLnNpZ25pZmljYW50Q2hpbGROb2RlcyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSkpLHR9LHRleHROb2RlczpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGsoZSkuZW51bWVyYXRlKCl9LGRvY3VtZW50RnJvbVJhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnRDb250YWluZXI7cmV0dXJuIDk9PXQubm9kZVR5cGU/dDp0Lm93bmVyRG9jdW1lbnR9LGNyZWF0ZVJhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiB1Lm1zaWUmJjk+dS52ZXJzaW9uP25ldyB5KGUpOmUuY3JlYXRlUmFuZ2UoKX0sc2VsZWN0UmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQsbj1ULmltYWdlKGUpO24mJihlLnNldFN0YXJ0QWZ0ZXIobiksZS5zZXRFbmRBZnRlcihuKSksdD1fLnNlbGVjdGlvbkZyb21SYW5nZShlKSx0LnJlbW92ZUFsbFJhbmdlcygpLHQuYWRkUmFuZ2UoZSl9LHN0cmluZ2lmeTpmdW5jdGlvbihlKXtyZXR1cm4gcy5mb3JtYXQoXCJ7MH06ezF9IC0gezJ9OnszfVwiLGgubmFtZShlLnN0YXJ0Q29udGFpbmVyKSxlLnN0YXJ0T2Zmc2V0LGgubmFtZShlLmVuZENvbnRhaW5lciksZS5lbmRPZmZzZXQpfSxzcGxpdDpmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaShpKXt2YXIgcixvPWUuY2xvbmVSYW5nZSgpO28uY29sbGFwc2UoaSksb1tpP1wic2V0U3RhcnRCZWZvcmVcIjpcInNldEVuZEFmdGVyXCJdKHQpLHI9by5leHRyYWN0Q29udGVudHMoKSxuJiYocj1oLnRyaW0ocikpLGhbaT9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0ocix0KX1pKCEwKSxpKCExKX0sbWFwQWxsOmZ1bmN0aW9uKHQsbil7dmFyIGk9W107cmV0dXJuIG5ldyB3KHQpLnRyYXZlcnNlKGZ1bmN0aW9uKHQpe3ZhciByPW4odCk7ciYmZS5pbkFycmF5KHIsaSk8MCYmaS5wdXNoKHIpfSksaX0sZ2V0QWxsOmZ1bmN0aW9uKGUsdCl7dmFyIG49dDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGguaXMoZSxuKX0pLFQubWFwQWxsKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSk/ZTp2b2lkIDB9KX0sZ2V0TWFya2VyczpmdW5jdGlvbihlKXtyZXR1cm4gVC5nZXRBbGwoZSxmdW5jdGlvbihlKXtyZXR1cm5cImstbWFya2VyXCI9PWUuY2xhc3NOYW1lfSl9LGltYWdlOmZ1bmN0aW9uKGUpe3ZhciB0PVQuZ2V0QWxsKGUsXCJpbWdcIik7cmV0dXJuIDE9PXQubGVuZ3RoP3RbMF06dm9pZCAwfSx3cmFwU2VsZWN0ZWRFbGVtZW50czpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dmFyIG4saT1oLmdldE5vZGVMZW5ndGgodCk7aWYoZT09aSlyZXR1cm4hMDtmb3Iobj1lO2k+bjtuKyspaWYoIWguaW5zaWduaWZpY2FudCh0LmNoaWxkTm9kZXNbbl0pKXJldHVybiExO3JldHVybiEwfWZvcih2YXIgbj1oLmVkaXRhYmxlUGFyZW50KGUuc3RhcnRDb250YWluZXIpLGk9aC5lZGl0YWJsZVBhcmVudChlLmVuZENvbnRhaW5lcik7MD09PWUuc3RhcnRPZmZzZXQmJmUuc3RhcnRDb250YWluZXIhPW47KWUuc2V0U3RhcnQoZS5zdGFydENvbnRhaW5lci5wYXJlbnROb2RlLGguZmluZE5vZGVJbmRleChlLnN0YXJ0Q29udGFpbmVyKSk7Zm9yKDt0KGUuZW5kT2Zmc2V0LGUuZW5kQ29udGFpbmVyKSYmZS5lbmRDb250YWluZXIhPWk7KWUuc2V0RW5kKGUuZW5kQ29udGFpbmVyLnBhcmVudE5vZGUsaC5maW5kTm9kZUluZGV4KGUuZW5kQ29udGFpbmVyKSsxKTtyZXR1cm4gZX0sZXhwYW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG89ZS5jbG9uZVJhbmdlKCksYT1vLnN0YXJ0Q29udGFpbmVyLmNoaWxkTm9kZXNbMD09PW8uc3RhcnRPZmZzZXQ/MDpvLnN0YXJ0T2Zmc2V0LTFdLHM9by5lbmRDb250YWluZXIuY2hpbGROb2Rlc1tvLmVuZE9mZnNldF07cmV0dXJuIGYoYSkmJmYocyk/KHQ9YS5ub2RlVmFsdWUsbj1zLm5vZGVWYWx1ZSx0JiZuPyhpPXQuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIikuc2VhcmNoKFMpLHI9bi5zZWFyY2goUyksaSYmcj8ocj0tMT09cj9uLmxlbmd0aDpyLGk9LTE9PWk/MDp0Lmxlbmd0aC1pLG8uc2V0U3RhcnQoYSxpKSxvLnNldEVuZChzLHIpLG8pOm8pOm8pOm99LGlzRXhwYW5kYWJsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscz1lLnN0YXJ0Q29udGFpbmVyLGw9VC5kb2N1bWVudEZyb21SYW5nZShlKTtyZXR1cm4gcz09bHx8cz09bC5ib2R5PyExOih0PWUuY2xvbmVSYW5nZSgpLChuPXMubm9kZVZhbHVlKT8oaT1uLnN1YnN0cmluZygwLHQuc3RhcnRPZmZzZXQpLHI9bi5zdWJzdHJpbmcodC5zdGFydE9mZnNldCksbz0wLGE9MCxpJiYobz1pLnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpLnNlYXJjaChTKSksciYmKGE9ci5zZWFyY2goUykpLG8mJmEpOiExKX19O2MoZCx7U2VsZWN0aW9uVXRpbHM6XyxXM0NSYW5nZTp5LFJhbmdlSXRlcmF0b3I6dyxXM0NTZWxlY3Rpb246YixSYW5nZUVudW1lcmF0b3I6ayxSZXN0b3JlUG9pbnQ6eCxNYXJrZXI6QyxSYW5nZVV0aWxzOlR9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3ZhciBuPWUuc2VsZWN0aW9uUmVzdG9yZVBvaW50PW5ldyBkKGUuZ2V0UmFuZ2UoKSksaT1uZXcgZih0LG4pO3JldHVybiBpLmVkaXRvcj1lLGUudW5kb1JlZG9TdGFjay5wdXNoKGkpLG59dmFyIG49d2luZG93LmtlbmRvLGk9bi5DbGFzcyxyPW4udWkuZWRpdG9yLG89ci5FZGl0b3JVdGlscyxhPW8ucmVnaXN0ZXJUb29sLHM9ci5Eb20sbD1yLlRvb2wsYz1yLlRvb2xUZW1wbGF0ZSxkPXIuUmVzdG9yZVBvaW50LHU9ci5NYXJrZXIsaD1lLmV4dGVuZCxwPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lLHRoaXMucmVzdG9yZVBvaW50PW5ldyBkKGUucmFuZ2UpLHRoaXMubWFya2VyPW5ldyB1LHRoaXMuZm9ybWF0dGVyPWUuZm9ybWF0dGVyfSxnZXRSYW5nZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3RvcmVQb2ludC50b1JhbmdlKCl9LGxvY2tSYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXJrZXIuYWRkKHRoaXMuZ2V0UmFuZ2UoKSxlKX0scmVsZWFzZVJhbmdlOmZ1bmN0aW9uKGUpe3RoaXMubWFya2VyLnJlbW92ZShlKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShlKX0sdW5kbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVzdG9yZVBvaW50O2UucmVzdG9yZUh0bWwoKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShlLnRvUmFuZ2UoKSl9LHJlZG86ZnVuY3Rpb24oKXt0aGlzLmV4ZWMoKX0sY3JlYXRlRGlhbG9nOmZ1bmN0aW9uKHQsaSl7dmFyIHI9dGhpcy5lZGl0b3I7cmV0dXJuIGUodCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkua2VuZG9XaW5kb3coaCh7fSxyLm9wdGlvbnMuZGlhbG9nT3B0aW9ucyxpKSkuY2xvc2VzdChcIi5rLXdpbmRvd1wiKS50b2dnbGVDbGFzcyhcImstcnRsXCIsbi5zdXBwb3J0LmlzUnRsKHIud3JhcHBlcikpLmVuZCgpfSxleGVjOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sb2NrUmFuZ2UoITApO3RoaXMuZm9ybWF0dGVyLmVkaXRvcj10aGlzLmVkaXRvcix0aGlzLmZvcm1hdHRlci50b2dnbGUoZSksdGhpcy5yZWxlYXNlUmFuZ2UoZSl9fSksZj1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuYm9keT1lLmJvZHksdGhpcy5zdGFydFJlc3RvcmVQb2ludD1lLHRoaXMuZW5kUmVzdG9yZVBvaW50PXR9LHJlZG86ZnVuY3Rpb24oKXt0aGlzLmJvZHkuaW5uZXJIVE1MPXRoaXMuZW5kUmVzdG9yZVBvaW50Lmh0bWwsdGhpcy5lZGl0b3Iuc2VsZWN0UmFuZ2UodGhpcy5lbmRSZXN0b3JlUG9pbnQudG9SYW5nZSgpKX0sdW5kbzpmdW5jdGlvbigpe3RoaXMuYm9keS5pbm5lckhUTUw9dGhpcy5zdGFydFJlc3RvcmVQb2ludC5odG1sLHRoaXMuZWRpdG9yLnNlbGVjdFJhbmdlKHRoaXMuc3RhcnRSZXN0b3JlUG9pbnQudG9SYW5nZSgpKX19KSxnPXAuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3AuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5tYW5hZ2VzVW5kb1JlZG89ITB9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWRpdG9yLG49dGhpcy5vcHRpb25zLGk9bi5yYW5nZSxyPXQuYm9keSxvPW5ldyBkKGksciksYT1uLmh0bWx8fG4udmFsdWV8fFwiXCI7dC5zZWxlY3RSYW5nZShpKSx0LmNsaXBib2FyZC5wYXN0ZShhLG4pLG4ucG9zdFByb2Nlc3MmJm4ucG9zdFByb2Nlc3ModCx0LmdldFJhbmdlKCkpLGU9bmV3IGYobyxuZXcgZCh0LmdldFJhbmdlKCkscikpLGUuZWRpdG9yPXQsdC51bmRvUmVkb1N0YWNrLnB1c2goZSksdC5mb2N1cygpfX0pLG09bC5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmVkaXRvcixpPXRoaXMub3B0aW9ucyxvPWkuaXRlbXM/aS5pdGVtczpuLm9wdGlvbnMuaW5zZXJ0SHRtbDtuZXcgci5TZWxlY3RCb3goZSx7ZGF0YVNvdXJjZTpvLGRhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGNoYW5nZTpmdW5jdGlvbigpe2wuZXhlYyhuLFwiaW5zZXJ0SHRtbFwiLHRoaXMudmFsdWUoKSl9LHRpdGxlOm4ub3B0aW9ucy5tZXNzYWdlcy5pbnNlcnRIdG1sLGhpZ2hsaWdodEZpcnN0OiExfSl9LGNvbW1hbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBnKGUpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhKFwia2VuZG9TZWxlY3RCb3hcIil8fGUuZmluZChcInNlbGVjdFwiKS5kYXRhKFwia2VuZG9TZWxlY3RCb3hcIik7dC5jbG9zZSgpLHQudmFsdWUodC5vcHRpb25zLnRpdGxlKX19KSx2PWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5zdGFjaz1bXSx0aGlzLmN1cnJlbnRDb21tYW5kSW5kZXg9LTF9LHB1c2g6ZnVuY3Rpb24oZSl7dGhpcy5zdGFjaz10aGlzLnN0YWNrLnNsaWNlKDAsdGhpcy5jdXJyZW50Q29tbWFuZEluZGV4KzEpLHRoaXMuY3VycmVudENvbW1hbmRJbmRleD10aGlzLnN0YWNrLnB1c2goZSktMX0sdW5kbzpmdW5jdGlvbigpe3RoaXMuY2FuVW5kbygpJiZ0aGlzLnN0YWNrW3RoaXMuY3VycmVudENvbW1hbmRJbmRleC0tXS51bmRvKCl9LHJlZG86ZnVuY3Rpb24oKXt0aGlzLmNhblJlZG8oKSYmdGhpcy5zdGFja1srK3RoaXMuY3VycmVudENvbW1hbmRJbmRleF0ucmVkbygpfSxjYW5VbmRvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudENvbW1hbmRJbmRleD49MH0sY2FuUmVkbzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRDb21tYW5kSW5kZXghPXRoaXMuc3RhY2subGVuZ3RoLTF9fSksXz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmVkaXRvcj1lfSxrZXlkb3duOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPXIuZWRpdG9yLGE9by5rZXlib2FyZCxzPWEuaXNUeXBpbmdLZXkobiksbD1oKGUuRXZlbnQoKSxuKTtyZXR1cm4gci5lZGl0b3IudHJpZ2dlcihcImtleWRvd25cIixsKSxsLmlzRGVmYXVsdFByZXZlbnRlZCgpPyhuLnByZXZlbnREZWZhdWx0KCksITApOmwuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFzfHxhLmlzVHlwaW5nSW5Qcm9ncmVzcygpPyExOihpPW8uZ2V0UmFuZ2UoKSxyLnN0YXJ0UmVzdG9yZVBvaW50PW5ldyBkKGkpLGEuc3RhcnRUeXBpbmcoZnVuY3Rpb24oKXtyLmVuZFJlc3RvcmVQb2ludD10KG8sci5zdGFydFJlc3RvcmVQb2ludCl9KSwhMCl9LGtleXVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWRpdG9yLmtleWJvYXJkO3JldHVybiB0aGlzLmVkaXRvci50cmlnZ2VyKFwia2V5dXBcIixlKSx0LmlzVHlwaW5nSW5Qcm9ncmVzcygpPyh0LmVuZFR5cGluZygpLCEwKTohMX19KSx5PWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yPWV9LGtleWRvd246ZnVuY3Rpb24oZSl7dmFyIGkscixvLGEsbDtpZihlLmtleUNvZGU9PT1uLmtleXMuQkFDS1NQQUNFKXtpZihpPXRoaXMuZWRpdG9yLHI9aS5nZXRSYW5nZSgpLG89bi5zdXBwb3J0LmJyb3dzZXIubXNpZT9cIlwiOic8YnIgX21vel9kaXJ0eT1cIlwiIC8+JyxyLmNvbGxhcHNlZClyZXR1cm47ZS5wcmV2ZW50RGVmYXVsdCgpLGE9bmV3IGQociksbD1yLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLC90KGFibGV8Ym9keXxyKS9pLnRlc3Qocy5uYW1lKGwpKSYmci5zZWxlY3ROb2RlKHMuY2xvc2VzdChsLFwidGFibGVcIikpLHIuZGVsZXRlQ29udGVudHMoKSxsPXIuY29tbW9uQW5jZXN0b3JDb250YWluZXIsXCJwXCI9PT1zLm5hbWUobCkmJlwiXCI9PT1sLmlubmVySFRNTCYmKGwuaW5uZXJIVE1MPW8sci5zZXRTdGFydChsLDApLHIuY29sbGFwc2UoITApLGkuc2VsZWN0UmFuZ2UocikpLHQoaSxhKX19LGtleXVwOmZ1bmN0aW9uKCl7fX0pLHc9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5lZGl0b3I9ZSx0aGlzLnN5c3RlbUNvbW1hbmRJc0luUHJvZ3Jlc3M9ITF9LGNyZWF0ZVVuZG9Db21tYW5kOmZ1bmN0aW9uKCl7dGhpcy5zdGFydFJlc3RvcmVQb2ludD10aGlzLmVuZFJlc3RvcmVQb2ludD10KHRoaXMuZWRpdG9yLHRoaXMuc3RhcnRSZXN0b3JlUG9pbnQpfSxjaGFuZ2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRSZXN0b3JlUG9pbnQ/dGhpcy5zdGFydFJlc3RvcmVQb2ludC5odG1sIT10aGlzLmVkaXRvci5ib2R5LmlubmVySFRNTDohMX0sa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5lZGl0b3IsaT1uLmtleWJvYXJkO3JldHVybiBpLmlzTW9kaWZpZXJLZXkoZSk/KGkuaXNUeXBpbmdJblByb2dyZXNzKCkmJmkuZW5kVHlwaW5nKCEwKSx0LnN0YXJ0UmVzdG9yZVBvaW50PW5ldyBkKG4uZ2V0UmFuZ2UoKSksITApOmkuaXNTeXN0ZW0oZSk/KHQuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMCx0LmNoYW5nZWQoKSYmKHQuc3lzdGVtQ29tbWFuZElzSW5Qcm9ncmVzcz0hMSx0LmNyZWF0ZVVuZG9Db21tYW5kKCkpLCEwKTohMX0sa2V5dXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLnN5c3RlbUNvbW1hbmRJc0luUHJvZ3Jlc3MmJmUuY2hhbmdlZCgpPyhlLnN5c3RlbUNvbW1hbmRJc0luUHJvZ3Jlc3M9ITEsZS5jcmVhdGVVbmRvQ29tbWFuZCgpLCEwKTohMX19KSxiPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuaGFuZGxlcnM9ZSx0aGlzLnR5cGluZ0luUHJvZ3Jlc3M9ITF9LGlzQ2hhcmFjdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlPj00OCYmOTA+PWV8fGU+PTk2JiYxMTE+PWV8fGU+PTE4NiYmMTkyPj1lfHxlPj0yMTkmJjIyMj49ZXx8MjI5PT1lfSx0b29sRnJvbVNob3J0Y3V0OmZ1bmN0aW9uKHQsbil7dmFyIGkscixvPVN0cmluZy5mcm9tQ2hhckNvZGUobi5rZXlDb2RlKTtmb3IoaSBpbiB0KWlmKHI9ZS5leHRlbmQoe2N0cmw6ITEsYWx0OiExLHNoaWZ0OiExfSx0W2ldLm9wdGlvbnMpLChyLmtleT09b3x8ci5rZXk9PW4ua2V5Q29kZSkmJnIuY3RybD09bi5jdHJsS2V5JiZyLmFsdD09bi5hbHRLZXkmJnIuc2hpZnQ9PW4uc2hpZnRLZXkpcmV0dXJuIGl9LGlzVHlwaW5nS2V5OmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5Q29kZTtyZXR1cm4gdGhpcy5pc0NoYXJhY3Rlcih0KSYmIWUuY3RybEtleSYmIWUuYWx0S2V5fHwzMj09dHx8MTM9PXR8fDg9PXR8fDQ2PT10JiYhZS5zaGlmdEtleSYmIWUuY3RybEtleSYmIWUuYWx0S2V5fSxpc01vZGlmaWVyS2V5OmZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5Q29kZTtyZXR1cm4gMTc9PXQmJiFlLnNoaWZ0S2V5JiYhZS5hbHRLZXl8fDE2PT10JiYhZS5jdHJsS2V5JiYhZS5hbHRLZXl8fDE4PT10JiYhZS5jdHJsS2V5JiYhZS5zaGlmdEtleX0saXNTeXN0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIDQ2PT1lLmtleUNvZGUmJmUuY3RybEtleSYmIWUuYWx0S2V5JiYhZS5zaGlmdEtleX0sc3RhcnRUeXBpbmc6ZnVuY3Rpb24oZSl7dGhpcy5vbkVuZFR5cGluZz1lLHRoaXMudHlwaW5nSW5Qcm9ncmVzcz0hMH0sc3RvcFR5cGluZzpmdW5jdGlvbigpe3RoaXMudHlwaW5nSW5Qcm9ncmVzcyYmdGhpcy5vbkVuZFR5cGluZyYmdGhpcy5vbkVuZFR5cGluZygpLHRoaXMudHlwaW5nSW5Qcm9ncmVzcz0hMX0sZW5kVHlwaW5nOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5jbGVhclRpbWVvdXQoKSx0P24uc3RvcFR5cGluZygpOm4udGltZW91dD13aW5kb3cuc2V0VGltZW91dChlLnByb3h5KG4uc3RvcFR5cGluZyxuKSwxZTMpfSxpc1R5cGluZ0luUHJvZ3Jlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBpbmdJblByb2dyZXNzfSxjbGVhclRpbWVvdXQ6ZnVuY3Rpb24oKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCl9LG5vdGlmeTpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5oYW5kbGVycztmb3Iobj0wO2kubGVuZ3RoPm4mJiFpW25dW3RdKGUpO24rKyk7fSxrZXlkb3duOmZ1bmN0aW9uKGUpe3RoaXMubm90aWZ5KGUsXCJrZXlkb3duXCIpfSxrZXl1cDpmdW5jdGlvbihlKXt0aGlzLm5vdGlmeShlLFwia2V5dXBcIil9fSksaz1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLmVkaXRvcj1lLHRoaXMuY2xlYW5lcnM9W25ldyBDLG5ldyBTLG5ldyBUXX0saHRtbFRvRnJhZ21lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lZGl0b3Isbj10LmRvY3VtZW50LGk9cy5jcmVhdGUobixcImRpdlwiKSxyPW4uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2ZvcihpLmlubmVySFRNTD1lO2kuZmlyc3RDaGlsZDspci5hcHBlbmRDaGlsZChpLmZpcnN0Q2hpbGQpO3JldHVybiByfSxpc0Jsb2NrOmZ1bmN0aW9uKGUpe3JldHVybi88KGRpdnxwfHVsfG9sfHRhYmxlfGhbMS02XSkvaS50ZXN0KGUpfSxfc3RhcnRNb2RpZmljYXRpb246ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5lZGl0b3I7aWYoIXRoaXMuX2luUHJvZ3Jlc3MpcmV0dXJuIHRoaXMuX2luUHJvZ3Jlc3M9ITAsZT1uLmdldFJhbmdlKCksdD1uZXcgZChlKSxzLnBlcnNpc3RTY3JvbGxUb3Aobi5kb2N1bWVudCkse3JhbmdlOmUscmVzdG9yZVBvaW50OnR9fSxfZW5kTW9kaWZpY2F0aW9uOmZ1bmN0aW9uKGUpe3QodGhpcy5lZGl0b3IsZS5yZXN0b3JlUG9pbnQpLHRoaXMuZWRpdG9yLl9zZWxlY3Rpb25DaGFuZ2UoKSx0aGlzLl9pblByb2dyZXNzPSExfSxfY29udGVudE1vZGlmaWNhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLmVkaXRvcixyPW4uX3N0YXJ0TW9kaWZpY2F0aW9uKCk7ciYmKGUuY2FsbChuLGksci5yYW5nZSksc2V0VGltZW91dChmdW5jdGlvbigpe3QuY2FsbChuLGksci5yYW5nZSksbi5fZW5kTW9kaWZpY2F0aW9uKHIpfSkpfSxvbmN1dDpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnRNb2RpZmljYXRpb24oZS5ub29wLGUubm9vcCl9LF9maWxlVG9EYXRhVVJMOmZ1bmN0aW9uKHQsbil7dmFyIGk9dC5nZXRBc0ZpbGUoKSxyPW5ldyBGaWxlUmVhZGVyO3Iub25sb2FkPW58fGUubm9vcCxyLnJlYWRBc0RhdGFVUkwoaSl9LF90cmlnZ2VyUGFzdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj17aHRtbDplfHxcIlwifTtuLmh0bWw9bi5odG1sLnJlcGxhY2UoL1xcdWZlZmYvZyxcIlwiKSx0aGlzLmVkaXRvci50cmlnZ2VyKFwicGFzdGVcIixuKSx0aGlzLnBhc3RlKG4uaHRtbCx0fHx7fSl9LF9oYW5kbGVJbWFnZVBhc3RlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyO2lmKFwiRmlsZVJlYWRlclwiaW4gd2luZG93JiYodD10aGlzLG49ZS5jbGlwYm9hcmREYXRhfHxlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YSxpPW4mJihuLml0ZW1zfHxuLmZpbGVzKSxpJiZpLmxlbmd0aCYmL15pbWFnZVxcLy9pLnRlc3QoaVswXS50eXBlKSYmKHI9dC5fc3RhcnRNb2RpZmljYXRpb24oKSkpKXJldHVybiB0aGlzLl9maWxlVG9EYXRhVVJMKGlbMF0sZnVuY3Rpb24oZSl7dC5fdHJpZ2dlclBhc3RlKCc8aW1nIHNyYz1cIicrZS50YXJnZXQucmVzdWx0KydcIiAvPicpLHQuX2VuZE1vZGlmaWNhdGlvbihyKX0pLCEwfSxvbnBhc3RlOmZ1bmN0aW9uKHQpe3RoaXMuX2hhbmRsZUltYWdlUGFzdGUodCl8fHRoaXMuX2NvbnRlbnRNb2RpZmljYXRpb24oZnVuY3Rpb24oaSxyKXt2YXIgbyxhLGwsYz1zLmNyZWF0ZShpLmRvY3VtZW50LFwiZGl2XCIse2NsYXNzTmFtZTpcImstcGFzdGUtY29udGFpbmVyXCIsaW5uZXJIVE1MOlwi77u/XCJ9KSxkPW4uc3VwcG9ydC5icm93c2VyO2kuYm9keS5hcHBlbmRDaGlsZChjKSxkLm1zaWUmJjExPmQudmVyc2lvbj8odC5wcmV2ZW50RGVmYXVsdCgpLG89aS5jcmVhdGVSYW5nZSgpLG8uc2VsZWN0Tm9kZUNvbnRlbnRzKGMpLGkuc2VsZWN0UmFuZ2UobyksYT1pLmRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksYS5tb3ZlVG9FbGVtZW50VGV4dChjKSxlKGkuYm9keSkudW5iaW5kKFwicGFzdGVcIiksYS5leGVjQ29tbWFuZChcIlBhc3RlXCIpLGUoaS5ib2R5KS5iaW5kKFwicGFzdGVcIixlLnByb3h5KHRoaXMub25wYXN0ZSx0aGlzKSkpOihsPWkuY3JlYXRlUmFuZ2UoKSxsLnNlbGVjdE5vZGVDb250ZW50cyhjKSxpLnNlbGVjdFJhbmdlKGwpKSxyLmRlbGV0ZUNvbnRlbnRzKCl9LGZ1bmN0aW9uKHQsbil7dmFyIGkscj1cIlwiO3Quc2VsZWN0UmFuZ2UobiksaT1lKHQuYm9keSkuY2hpbGRyZW4oXCIuay1wYXN0ZS1jb250YWluZXJcIiksaS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sYXN0Q2hpbGQ7ZSYmcy5pcyhlLFwiYnJcIikmJnMucmVtb3ZlKGUpLHIrPXRoaXMuaW5uZXJIVE1MfSksaS5yZW1vdmUoKSx0aGlzLl90cmlnZ2VyUGFzdGUocix7Y2xlYW46ITB9KX0pfSxzcGxpdHRhYmxlUGFyZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtpZihlKXJldHVybiBzLmNsb3Nlc3RFZGl0YWJsZU9mVHlwZSh0LFtcInBcIixcInVsXCIsXCJvbFwiXSl8fHQucGFyZW50Tm9kZTtpZihuPXQucGFyZW50Tm9kZSxpPXQub3duZXJEb2N1bWVudC5ib2R5LHMuaXNJbmxpbmUobikpZm9yKDtuLnBhcmVudE5vZGUhPWkmJiFzLmlzQmxvY2sobi5wYXJlbnROb2RlKTspbj1uLnBhcmVudE5vZGU7cmV0dXJuIG59LHBhc3RlOmZ1bmN0aW9uKHQsbil7dmFyIGksbyxhLGwsYyxkLHAsZixnLG0sdixfPXRoaXMuZWRpdG9yO2ZvcihuPWgoe2NsZWFuOiExLHNwbGl0OiEwfSxuKSxpPTAsbz10aGlzLmNsZWFuZXJzLmxlbmd0aDtvPmk7aSsrKXRoaXMuY2xlYW5lcnNbaV0uYXBwbGljYWJsZSh0KSYmKHQ9dGhpcy5jbGVhbmVyc1tpXS5jbGVhbih0KSk7aWYobi5jbGVhbiYmKHQ9dC5yZXBsYWNlKC8oPGJyPihcXHN8Jm5ic3A7KSopKyg8XFwvPyhkaXZ8cHxsaXxjb2x8dCkpL2dpLFwiJDNcIiksdD10LnJlcGxhY2UoLzwoYXxzcGFuKVtePl0qPjxcXC9cXDE+L2dpLFwiXCIpKSx0PXQucmVwbGFjZSgvXjxsaS9pLFwiPHVsPjxsaVwiKS5yZXBsYWNlKC9saT4kL2csXCJsaT48L3VsPlwiKSxhPXRoaXMuaXNCbG9jayh0KSxfLmZvY3VzKCksbD1fLmdldFJhbmdlKCksbC5kZWxldGVDb250ZW50cygpLGwuc3RhcnRDb250YWluZXI9PV8uZG9jdW1lbnQmJmwuc2VsZWN0Tm9kZUNvbnRlbnRzKF8uYm9keSksYz1uZXcgdSxkPWMuYWRkQ2FyZXQobCkscD10aGlzLnNwbGl0dGFibGVQYXJlbnQoYSxkKSxmPSExLGc9cCE9Xy5ib2R5JiYhcy5pcyhwLFwidGRcIiksbi5zcGxpdCYmZyYmKGF8fHMuaXNJbmxpbmUocCkpJiYobC5zZWxlY3ROb2RlKGQpLHIuUmFuZ2VVdGlscy5zcGxpdChsLHAsITApLGY9ITApLG09dGhpcy5odG1sVG9GcmFnbWVudCh0KSxtLmZpcnN0Q2hpbGQmJlwiay1wYXN0ZS1jb250YWluZXJcIj09PW0uZmlyc3RDaGlsZC5jbGFzc05hbWUpe2Zvcih2PVtdLGk9MCxvPW0uY2hpbGROb2Rlcy5sZW5ndGg7bz5pO2krKyl2LnB1c2gobS5jaGlsZE5vZGVzW2ldLmlubmVySFRNTCk7bT10aGlzLmh0bWxUb0ZyYWdtZW50KHYuam9pbihcIjxiciAvPlwiKSl9aWYoZShtLmNoaWxkTm9kZXMpLmZpbHRlcihcInRhYmxlXCIpLmFkZENsYXNzKFwiay10YWJsZVwiKS5lbmQoKS5maW5kKFwidGFibGVcIikuYWRkQ2xhc3MoXCJrLXRhYmxlXCIpLGwuaW5zZXJ0Tm9kZShtKSxwPXRoaXMuc3BsaXR0YWJsZVBhcmVudChhLGQpLGYpe2Zvcig7ZC5wYXJlbnROb2RlIT1wOylzLnVud3JhcChkLnBhcmVudE5vZGUpO3MudW53cmFwKGQucGFyZW50Tm9kZSl9cy5ub3JtYWxpemUobC5jb21tb25BbmNlc3RvckNvbnRhaW5lciksZC5zdHlsZS5kaXNwbGF5PVwiaW5saW5lXCIscy5yZXN0b3JlU2Nyb2xsVG9wKF8uZG9jdW1lbnQpLHMuc2Nyb2xsVG8oZCksYy5yZW1vdmVDYXJldChsKSxfLnNlbGVjdFJhbmdlKGwpfX0pLHg9aS5leHRlbmQoe2NsZWFuOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLHI9aS5yZXBsYWNlbWVudHM7Zm9yKHQ9MCxuPXIubGVuZ3RoO24+dDt0Kz0yKWU9ZS5yZXBsYWNlKHJbdF0sclt0KzFdKTtyZXR1cm4gZX19KSxDPXguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5yZXBsYWNlbWVudHM9Wy88KFxcLz8pc2NyaXB0KFtePl0qKT4vaSxcIjwkMXRlbGVyaWs6c2NyaXB0JDI+XCJdfSxhcHBsaWNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybi88c2NyaXB0W14+XSo+L2kudGVzdChlKX19KSxTPXguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5yZXBsYWNlbWVudHM9Wy88XFw/eG1sW14+XSo+L2dpLFwiXCIsLzwhLS0oLnxcXG4pKj8tLT4vZyxcIlwiLC8mcXVvdDsvZyxcIidcIiwvKD86PGJyPiZuYnNwO1tcXHNcXHJcXG5dK3w8YnI+KSooPFxcLz8oaFsxLTZdfGhyfHB8ZGl2fHRhYmxlfHRib2R5fHRoZWFkfHRmb290fHRofHRyfHRkfGxpfG9sfHVsfGNhcHRpb258YWRkcmVzc3xwcmV8Zm9ybXxibG9ja3F1b3RlfGRsfGR0fGRkfGRpcnxmaWVsZHNldClbXj5dKj4pKD86PGJyPiZuYnNwO1tcXHNcXHJcXG5dK3w8YnI+KSovZyxcIiQxXCIsLzxicj48YnI+L2csXCI8QlI+PEJSPlwiLC88YnI+KD8hXFxuKS9nLFwiIFwiLC88dGFibGUoW14+XSopPihcXHN8Jm5ic3A7KSs8dC9naSxcIjx0YWJsZSQxPjx0XCIsLzx0cltePl0qPihcXHN8Jm5ic3A7KSo8XFwvdHI+L2dpLFwiXCIsLzx0Ym9keVtePl0qPihcXHN8Jm5ic3A7KSo8XFwvdGJvZHk+L2dpLFwiXCIsLzx0YWJsZVtePl0qPihcXHN8Jm5ic3A7KSo8XFwvdGFibGU+L2dpLFwiXCIsLzxCUj48QlI+L2csXCI8YnI+XCIsL15cXHMqKCZuYnNwOykrL2dpLFwiXCIsLygmbmJzcDt8PGJyW14+XSo+KStcXHMqJC9naSxcIlwiLC9tc28tW147XCJdKjs/L2dpLFwiXCIsLzwoXFwvPyliKFxcc1tePl0qKT8+L2dpLFwiPCQxc3Ryb25nJDI+XCIsLzwoXFwvPylpKFxcc1tePl0qKT8+L2dpLFwiPCQxZW0kMj5cIiwvPG86cD4mbmJzcDs8XFwvbzpwPi9naSxcIiZuYnNwO1wiLC88XFwvPyhtZXRhfGxpbmt8c3R5bGV8bzp8djp8eDopW14+XSo+KCg/Oi58XFxuKSo/PFxcLyhtZXRhfGxpbmt8c3R5bGV8bzp8djp8eDopW14+XSo+KT8vZ2ksXCJcIiwvPFxcL28+L2csXCJcIiwvc3R5bGU9KFtcInwnXSlcXHMqXFwxL2csXCJcIiwvKDxicltePl0qPik/XFxuL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9lOlwiIFwiXG59XX0sYXBwbGljYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4vY2xhc3M9XCI/TXNvfHN0eWxlPVwiW15cIl0qbXNvLS9pLnRlc3QoZSl8fC91cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZS8udGVzdChlKX0sc3RyaXBFbXB0eUFuY2hvcnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvPGEoW14+XSopPlxccyo8XFwvYT4vZ2ksZnVuY3Rpb24oZSx0KXtyZXR1cm4hdHx8dC5pbmRleE9mKFwiaHJlZlwiKTwwP1wiXCI6ZX0pfSxsaXN0VHlwZTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4vXig8c3BhbiBbXj5dKnRleGh0bWxbXj5dKj4pPzxzcGFuIFtePl0qKFN5bWJvbHxXaW5nZGluZ3MpW14+XSo+L2kudGVzdChlKSYmKHQ9ITApLGU9ZS5yZXBsYWNlKC88XFwvP1xcdytbXj5dKj4vZyxcIlwiKS5yZXBsYWNlKC8mbmJzcDsvZyxcIsKgXCIpLCF0JiYvXltcXHUyMDIyXFx1MDBiN1xcdTAwYTdcXHUwMGQ4b11cXHUwMGEwKy8udGVzdChlKXx8dCYmL14uXFx1MDBhMCsvLnRlc3QoZSk/XCJ1bFwiOi9eXFxzKlxcdytbXFwuXFwpXVxcdTAwYTB7Mix9Ly50ZXN0KGUpP1wib2xcIjp2b2lkIDB9LF9jb252ZXJ0VG9MaTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gMT09ZS5jaGlsZE5vZGVzLmxlbmd0aD90PWUuZmlyc3RDaGlsZC5pbm5lckhUTUwucmVwbGFjZSgvXlxcdytbXFwuXFwpXSgmbmJzcDspKyAvLFwiXCIpOihzLnJlbW92ZShlLmZpcnN0Q2hpbGQpLDM9PWUuZmlyc3RDaGlsZC5ub2RlVHlwZSYmL15baXZ4XStcXC4kL2kudGVzdChlLmZpcnN0Q2hpbGQubm9kZVZhbHVlKSYmcy5yZW1vdmUoZS5maXJzdENoaWxkKSwvXigmbmJzcDt8XFxzKSskL2kudGVzdChlLmZpcnN0Q2hpbGQuaW5uZXJIVE1MKSYmcy5yZW1vdmUoZS5maXJzdENoaWxkKSx0PWUuaW5uZXJIVE1MKSxzLnJlbW92ZShlKSxzLmNyZWF0ZShkb2N1bWVudCxcImxpXCIse2lubmVySFRNTDp0fSl9LGxpc3RzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEsbCxjLGQsdSxoPWUocy5ibG9ja0VsZW1lbnRzLmpvaW4oXCIsXCIpLHQpLHA9LTEsZj17dWw6e30sb2w6e319LGc9dDtmb3Iocj0wO2gubGVuZ3RoPnI7cisrKWlmKG89aFtyXSxhPXRoaXMubGlzdFR5cGUoby5pbm5lckhUTUwpLGk9cy5uYW1lKG8pLFwidGRcIiE9aSlpZihhJiZcInBcIj09aSl7aWYobD1wYXJzZUZsb2F0KG8uc3R5bGUubWFyZ2luTGVmdHx8MCksYz1mW2FdW2xdLChsPnB8fCFjKSYmKGM9cy5jcmVhdGUoZG9jdW1lbnQsYSksZz09dD9zLmluc2VydEJlZm9yZShjLG8pOmcuYXBwZW5kQ2hpbGQoYyksZlthXVtsXT1jKSxuIT1hKWZvcihkIGluIGYpZm9yKHUgaW4gZltkXSllLmNvbnRhaW5zKGMsZltkXVt1XSkmJmRlbGV0ZSBmW2RdW3VdO2c9dGhpcy5fY29udmVydFRvTGkobyksYy5hcHBlbmRDaGlsZChnKSxwPWwsbj1hfWVsc2Ugby5pbm5lckhUTUw/KGY9e3VsOnt9LG9sOnt9fSxnPXQscD0tMSk6cy5yZW1vdmUobyl9LHJlbW92ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuYXR0cmlidXRlcyxuPXQubGVuZ3RoO24tLTspXCJjb2xzcGFuXCIhPXMubmFtZSh0W25dKSYmZS5yZW1vdmVBdHRyaWJ1dGVOb2RlKHRbbl0pfSxjcmVhdGVDb2xHcm91cDpmdW5jdGlvbih0KXt2YXIgaT10LmNlbGxzLHI9ZSh0KS5jbG9zZXN0KFwidGFibGVcIiksbz1yLmNoaWxkcmVuKFwiY29sZ3JvdXBcIik7Mj5pLmxlbmd0aHx8KG8ubGVuZ3RoJiYoaT1vLmNoaWxkcmVuKCksb1swXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9bMF0pKSxvPWUoZS5tYXAoaSxmdW5jdGlvbihlKXt2YXIgdD1lLndpZHRoO3JldHVybiB0JiYwIT09cGFyc2VJbnQodCwxMCk/bi5mb3JtYXQoJzxjb2wgc3R5bGU9XCJ3aWR0aDp7MH1weDtcIi8+Jyx0KTpcIjxjb2wgLz5cIn0pLmpvaW4oXCJcIikpLG8uaXMoXCJjb2xncm91cFwiKXx8KG89ZShcIjxjb2xncm91cC8+XCIpLmFwcGVuZChvKSksby5wcmVwZW5kVG8ocikpfSxjb252ZXJ0SGVhZGVyczpmdW5jdGlvbih0KXt2YXIgbixpPXQuY2VsbHMscj1lLm1hcChpLGZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuY2hpbGRyZW4oXCJwXCIpLmNoaWxkcmVuKFwic3Ryb25nXCIpWzBdO3JldHVybiBuJiZcInN0cm9uZ1wiPT1zLm5hbWUobik/bjp2b2lkIDB9KTtpZihyLmxlbmd0aD09aS5sZW5ndGgpe2ZvcihuPTA7ci5sZW5ndGg+bjtuKyspcy51bndyYXAocltuXSk7Zm9yKGUodCkuY2xvc2VzdChcInRhYmxlXCIpLmZpbmQoXCJjb2xncm91cFwiKS5hZnRlcihcIjx0aGVhZD48L3RoZWFkPlwiKS5lbmQoKS5maW5kKFwidGhlYWRcIikuYXBwZW5kKHQpLG49MDtpLmxlbmd0aD5uO24rKylzLmNoYW5nZVRhZyhpW25dLFwidGhcIil9fSxyZW1vdmVQYXJhZ3JhcGhzOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGE7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylmb3IodGhpcy5yZW1vdmVBdHRyaWJ1dGVzKHRbbl0pLG89ZSh0W25dKSxhPW8uY2hpbGRyZW4oXCJwXCIpLGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspci0xPmkmJnMuaW5zZXJ0QWZ0ZXIocy5jcmVhdGUoZG9jdW1lbnQsXCJiclwiKSxhW2ldKSxzLnVud3JhcChhW2ldKX0scmVtb3ZlRGVmYXVsdENvbG9yczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrKykvXlxccypjb2xvcjpcXHMqW147XSo7PyQvaS50ZXN0KGVbdF0uc3R5bGUuY3NzVGV4dCkmJnMudW53cmFwKGVbdF0pfSx0YWJsZXM6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYSxzPWUodCkuZmluZChcInRhYmxlXCIpLGw9dGhpcztmb3Iobz0wO3MubGVuZ3RoPm87bysrKXtmb3Iobj1zW29dLnJvd3Mscj1pPW5bMF0sYT0xO24ubGVuZ3RoPmE7YSsrKW5bYV0uY2VsbHMubGVuZ3RoPnIuY2VsbHMubGVuZ3RoJiYocj1uW2FdKTtsLmNyZWF0ZUNvbEdyb3VwKHIpLGwuY29udmVydEhlYWRlcnMoaSksbC5yZW1vdmVBdHRyaWJ1dGVzKHNbb10pLGwucmVtb3ZlUGFyYWdyYXBocyhzLmVxKG8pLmZpbmQoXCJ0ZCx0aFwiKSksbC5yZW1vdmVEZWZhdWx0Q29sb3JzKHMuZXEobykuZmluZChcInNwYW5cIikpfX0saGVhZGVyczpmdW5jdGlvbih0KXt2YXIgbixpPWUodCkuZmluZChcInAuTXNvVGl0bGVcIik7Zm9yKG49MDtpLmxlbmd0aD5uO24rKylzLmNoYW5nZVRhZyhpW25dLFwiaDFcIil9LGNsZWFuOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcztyZXR1cm4gZT14LmZuLmNsZWFuLmNhbGwobixlKSxlPW4uc3RyaXBFbXB0eUFuY2hvcnMoZSksdD1zLmNyZWF0ZShkb2N1bWVudCxcImRpdlwiLHtpbm5lckhUTUw6ZX0pLG4uaGVhZGVycyh0KSxuLmxpc3RzKHQpLG4udGFibGVzKHQpLGU9dC5pbm5lckhUTUwucmVwbGFjZSgvKDxbXj5dKilcXHMrY2xhc3M9XCI/W15cIlxccz5dKlwiPy9naSxcIiQxXCIpfX0pLFQ9eC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlcGxhY2VtZW50cz1bL1xccytjbGFzcz1cIkFwcGxlLXN0eWxlLXNwYW5bXlwiXSpcIi9naSxcIlwiLC88KGRpdnxwfGhbMS02XSlcXHMrc3R5bGU9XCJbXlwiXSpcIi9naSxcIjwkMVwiLC9ePGRpdj4oLiopPFxcL2Rpdj4kLyxcIiQxXCJdfSxhcHBsaWNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybi9jbGFzcz1cIj9BcHBsZS1zdHlsZS1zcGFufHN0eWxlPVwiW15cIl0qLXdlYmtpdC1uYnNwLW1vZGUvaS50ZXN0KGUpfX0pO2gocix7Q29tbWFuZDpwLEdlbmVyaWNDb21tYW5kOmYsSW5zZXJ0SHRtbENvbW1hbmQ6ZyxJbnNlcnRIdG1sVG9vbDptLFVuZG9SZWRvU3RhY2s6dixUeXBpbmdIYW5kbGVyOl8sU3lzdGVtSGFuZGxlcjp3LEJhY2tzcGFjZUhhbmRsZXI6eSxLZXlib2FyZDpiLENsaXBib2FyZDprLENsZWFuZXI6eCxNU1dvcmRGb3JtYXRDbGVhbmVyOlMsV2Via2l0Rm9ybWF0Q2xlYW5lcjpUfSksYShcImluc2VydEh0bWxcIixuZXcgbSh7dGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOm8uZHJvcERvd25MaXN0VGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgSFRNTFwiLGluaXRpYWxWYWx1ZTpcIkluc2VydCBIVE1MXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5DbGFzcyxpPXQudWkuZWRpdG9yLHI9dC51aS5FZGl0b3IuZm4ub3B0aW9ucy5mb3JtYXRzLG89aS5FZGl0b3JVdGlscyxhPWkuVG9vbCxzPWkuVG9vbFRlbXBsYXRlLGw9aS5Gb3JtYXRUb29sLGM9aS5Eb20sZD1pLlJhbmdlVXRpbHMsdT1lLmV4dGVuZCxoPWkuRWRpdG9yVXRpbHMucmVnaXN0ZXJUb29sLHA9aS5FZGl0b3JVdGlscy5yZWdpc3RlckZvcm1hdCxmPVwiay1tYXJrZXJcIixnPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuZm9ybWF0PWV9LG51bWJlck9mU2libGluZ3M6ZnVuY3Rpb24oZSl7dmFyIHQsbj0wLGk9MCxyPTAsbz1lLnBhcmVudE5vZGU7Zm9yKHQ9by5maXJzdENoaWxkO3Q7dD10Lm5leHRTaWJsaW5nKXQhPWUmJih0LmNsYXNzTmFtZT09Zj9yKys6Mz09dC5ub2RlVHlwZT9uKys6aSsrKTtyZXR1cm4gcj4xJiZvLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPT1mJiZvLmxhc3RDaGlsZC5jbGFzc05hbWU9PWY/MDppK259LGZpbmRTdWl0YWJsZTpmdW5jdGlvbihlLHQpe3JldHVybiF0JiZ0aGlzLm51bWJlck9mU2libGluZ3MoZSk+MD9udWxsOmMucGFyZW50T2ZUeXBlKGUsdGhpcy5mb3JtYXRbMF0udGFncyl9LGZpbmRGb3JtYXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMuZm9ybWF0LHM9Yy5hdHRyRXF1YWxzO2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKXtpZihpPWUscj1hW3RdLnRhZ3Msbz1hW3RdLmF0dHIsaSYmYy5vZlR5cGUoaSxyKSYmcyhpLG8pKXJldHVybiBpO2Zvcig7aTspaWYoaT1jLnBhcmVudE9mVHlwZShpLHIpLGkmJnMoaSxvKSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0saXNGb3JtYXR0ZWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpZih0aGlzLmZpbmRGb3JtYXQoZVt0XSkpcmV0dXJuITA7cmV0dXJuITF9fSksbT1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuZmluZGVyPW5ldyBnKGUpLHRoaXMuYXR0cmlidXRlcz11KHt9LGVbMF0uYXR0cix0KSx0aGlzLnRhZz1lWzBdLnRhZ3NbMF19LHdyYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIGMud3JhcChlLGMuY3JlYXRlKGUub3duZXJEb2N1bWVudCx0aGlzLnRhZyx0aGlzLmF0dHJpYnV0ZXMpKX0sYWN0aXZhdGU6ZnVuY3Rpb24oZSx0KXt0aGlzLmZpbmRlci5pc0Zvcm1hdHRlZCh0KT8odGhpcy5zcGxpdChlKSx0aGlzLnJlbW92ZSh0KSk6dGhpcy5hcHBseSh0KX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PWQudGV4dE5vZGVzKGUpO3QubGVuZ3RoPjAmJnRoaXMuYWN0aXZhdGUoZSx0KX0sYXBwbHk6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz1bXTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpPWVbdF0scj10aGlzLmZpbmRlci5maW5kU3VpdGFibGUoaSkscj9jLmF0dHIocix0aGlzLmF0dHJpYnV0ZXMpOnI9dGhpcy53cmFwKGkpLG8ucHVzaChyKTt0aGlzLmNvbnNvbGlkYXRlKG8pfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9dGhpcy5maW5kZXIuZmluZEZvcm1hdChlW3RdKSxpJiYodGhpcy5hdHRyaWJ1dGVzJiZ0aGlzLmF0dHJpYnV0ZXMuc3R5bGU/KGMudW5zdHlsZShpLHRoaXMuYXR0cmlidXRlcy5zdHlsZSksaS5zdHlsZS5jc3NUZXh0fHxpLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXXx8Yy51bndyYXAoaSkpOmMudW53cmFwKGkpKX0sc3BsaXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWQudGV4dE5vZGVzKGUpLHI9aS5sZW5ndGg7aWYocj4wKWZvcih0PTA7cj50O3QrKyluPXRoaXMuZmluZGVyLmZpbmRGb3JtYXQoaVt0XSksbiYmZC5zcGxpdChlLG4sITApfSxjb25zb2xpZGF0ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsbjtlLmxlbmd0aD4xOylpZih0PWUucG9wKCksbj1lW2UubGVuZ3RoLTFdLHQucHJldmlvdXNTaWJsaW5nJiZ0LnByZXZpb3VzU2libGluZy5jbGFzc05hbWU9PWYmJm4uYXBwZW5kQ2hpbGQodC5wcmV2aW91c1NpYmxpbmcpLHQudGFnTmFtZT09bi50YWdOYW1lJiZ0LnByZXZpb3VzU2libGluZz09biYmdC5zdHlsZS5jc3NUZXh0PT1uLnN0eWxlLmNzc1RleHQpe2Zvcig7dC5maXJzdENoaWxkOyluLmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7Yy5yZW1vdmUodCl9fX0pLHY9Zy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLmZvcm1hdD1lLHRoaXMuZ3JlZWR5UHJvcGVydHk9dCxnLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxnZXRJbmxpbmVDc3NWYWx1ZTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHMsbCxkLHUsaCxwLGYsZz10LmF0dHJpYnV0ZXMsbT1lLnRyaW07aWYoZylmb3Iobj0wLGk9Zy5sZW5ndGg7aT5uO24rKylpZihyPWdbbl0sbz1yLm5vZGVOYW1lLGE9ci5ub2RlVmFsdWUsci5zcGVjaWZpZWQmJlwic3R5bGVcIj09bylmb3Iocz1tKGF8fHQuc3R5bGUuY3NzVGV4dCkuc3BsaXQoXCI7XCIpLGQ9MCx1PXMubGVuZ3RoO3U+ZDtkKyspaWYobD1zW2RdLGwubGVuZ3RoKXtpZihoPWwuc3BsaXQoXCI6XCIpLHA9bShoWzBdLnRvTG93ZXJDYXNlKCkpLGY9bShoWzFdKSxwIT10aGlzLmdyZWVkeVByb3BlcnR5KWNvbnRpbnVlO3JldHVybiBwLmluZGV4T2YoXCJjb2xvclwiKT49MD9jLnRvSGV4KGYpOmZ9fSxnZXRGb3JtYXRJbm5lcjpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz1lKGMuaXNEYXRhTm9kZSh0KT90LnBhcmVudE5vZGU6dCksYT1vLnBhcmVudHNVbnRpbChcIltjb250ZW50RWRpdGFibGVdXCIpLmFkZEJhY2soKS50b0FycmF5KCkucmV2ZXJzZSgpO2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKWlmKHI9XCJjbGFzc05hbWVcIj09dGhpcy5ncmVlZHlQcm9wZXJ0eT9hW25dLmNsYXNzTmFtZTp0aGlzLmdldElubGluZUNzc1ZhbHVlKGFbbl0pKXJldHVybiByO3JldHVyblwiaW5oZXJpdFwifSxnZXRGb3JtYXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuZ2V0Rm9ybWF0SW5uZXIoZVswXSk7Zm9yKHQ9MSxuPWUubGVuZ3RoO24+dDt0KyspaWYoaSE9dGhpcy5nZXRGb3JtYXRJbm5lcihlW3RdKSlyZXR1cm5cIlwiO3JldHVybiBpfSxpc0Zvcm1hdHRlZDpmdW5jdGlvbihlKXtyZXR1cm5cIlwiIT09dGhpcy5nZXRGb3JtYXQoZSl9fSksXz1tLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLG4saSl7bS5mbi5pbml0LmNhbGwodGhpcyxlLG4pLHRoaXMudmFsdWVzPW4sdGhpcy5maW5kZXI9bmV3IHYoZSxpKSxpJiYodGhpcy5ncmVlZHlQcm9wZXJ0eT10LnRvQ2FtZWxDYXNlKGkpKX0sYWN0aXZhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdyZWVkeVByb3BlcnR5LGk9XCJhcHBseVwiO3RoaXMuc3BsaXQoZSksbiYmXCJpbmhlcml0XCI9PXRoaXMudmFsdWVzLnN0eWxlW25dJiYoaT1cInJlbW92ZVwiKSx0aGlzW2ldKHQpfX0pLHk9bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7bC5mbi5pbml0LmNhbGwodGhpcyx1KGUse2ZpbmRlcjpuZXcgZyhlLmZvcm1hdCksZm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBtKGUuZm9ybWF0KX19KSl9fSksdz1hLmV4dGVuZCh7dXBkYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5kYXRhKHRoaXMudHlwZSk7bi5jbG9zZSgpLG4udmFsdWUodGhpcy5maW5kZXIuZ2V0Rm9ybWF0KHQpKX19KSxiPXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2EuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy50eXBlPXQuc3VwcG9ydC5icm93c2VyLm1zaWV8fHQuc3VwcG9ydC50b3VjaD9cImtlbmRvRHJvcERvd25MaXN0XCI6XCJrZW5kb0NvbWJvQm94XCIsdGhpcy5mb3JtYXQ9W3t0YWdzOltcInNwYW5cIl19XSx0aGlzLmZpbmRlcj1uZXcgdih0aGlzLmZvcm1hdCxlLmNzc0F0dHIpfSxjb21tYW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxuPXRoaXMuZm9ybWF0LHI9e307cmV0dXJuIG5ldyBpLkZvcm1hdENvbW1hbmQodShlLHtmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gclt0LmRvbUF0dHJdPWUudmFsdWUsbmV3IF8obix7c3R5bGU6cn0sdC5jc3NBdHRyKX19KSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXQuZWRpdG9yLHI9dGhpcy5vcHRpb25zLG89ci5uYW1lLHM9W107ci5kZWZhdWx0VmFsdWUmJihzPVt7dGV4dDppLm9wdGlvbnMubWVzc2FnZXNbci5kZWZhdWx0VmFsdWVbMF0udGV4dF0sdmFsdWU6ci5kZWZhdWx0VmFsdWVbMF0udmFsdWV9XSksbj1zLmNvbmNhdChyLml0ZW1zP3IuaXRlbXM6aS5vcHRpb25zW29dfHxbXSksZVt0aGlzLnR5cGVdKHtkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOm4sY2hhbmdlOmZ1bmN0aW9uKCl7YS5leGVjKGksbyx0aGlzLnZhbHVlKCkpfSxoaWdobGlnaHRGaXJzdDohMX0pLGUuY2xvc2VzdChcIi5rLXdpZGdldFwiKS5yZW1vdmVDbGFzcyhcImstXCIrbykuZmluZChcIipcIikuYWRkQmFjaygpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpLGUuZGF0YSh0aGlzLnR5cGUpLnZhbHVlKFwiaW5oZXJpdFwiKX19KSxrPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2EuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5mb3JtYXQ9W3t0YWdzOltcInNwYW5cIl19XSx0aGlzLmZpbmRlcj1uZXcgdih0aGlzLmZvcm1hdCxlLmNzc0F0dHIpfSxvcHRpb25zOntwYWxldHRlOlwid2Vic2FmZVwifSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl93aWRnZXQuY2xvc2UoKX0sY29tbWFuZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMsbj10aGlzLmZvcm1hdCxyPXt9O3JldHVybiBuZXcgaS5Gb3JtYXRDb21tYW5kKHUoZSx7Zm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHJbdC5kb21BdHRyXT1lLnZhbHVlLG5ldyBfKG4se3N0eWxlOnJ9LHQuY3NzQXR0cil9fSkpfSxpbml0aWFsaXplOmZ1bmN0aW9uKG4saSl7dmFyIHI9aS5lZGl0b3Isbz10aGlzLm5hbWUscz11KHt9LGsuZm4ub3B0aW9ucyx0aGlzLm9wdGlvbnMpLGw9cy5wYWxldHRlO249dGhpcy5fd2lkZ2V0PW5ldyB0LnVpLkNvbG9yUGlja2VyKG4se3ZhbHVlOmUuaXNBcnJheShsKT9sWzBdOlwiIzAwMFwiLHRvb2xJY29uOlwiay1cIitzLm5hbWUscGFsZXR0ZTpsLGNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPW4udmFsdWUoKTtlJiZhLmV4ZWMocixvLGUpLHIuZm9jdXMoKX0sYWN0aXZhdGU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4udHJpZ2dlcihcImNoYW5nZVwiKX19KSxuLndyYXBwZXIuYXR0cih7dGl0bGU6aS50aXRsZSx1bnNlbGVjdGFibGU6XCJvblwifSkuZmluZChcIipcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLFwib25cIil9fSk7dShpLHtJbmxpbmVGb3JtYXRGaW5kZXI6ZyxJbmxpbmVGb3JtYXR0ZXI6bSxEZWxheWVkRXhlY3V0aW9uVG9vbDp3LEdyZWVkeUlubGluZUZvcm1hdEZpbmRlcjp2LEdyZWVkeUlubGluZUZvcm1hdHRlcjpfLElubGluZUZvcm1hdFRvb2w6eSxGb250VG9vbDpiLENvbG9yVG9vbDprfSkscChcImJvbGRcIixbe3RhZ3M6W1wic3Ryb25nXCIsXCJiXCJdfSx7dGFnczpbXCJzcGFuXCJdLGF0dHI6e3N0eWxlOntmb250V2VpZ2h0OlwiYm9sZFwifX19XSksaChcImJvbGRcIixuZXcgeSh7a2V5OlwiQlwiLGN0cmw6ITAsZm9ybWF0OnIuYm9sZCx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkJvbGRcIn0pfSkpLHAoXCJpdGFsaWNcIixbe3RhZ3M6W1wiZW1cIixcImlcIl19LHt0YWdzOltcInNwYW5cIl0sYXR0cjp7c3R5bGU6e2ZvbnRTdHlsZTpcIml0YWxpY1wifX19XSksaChcIml0YWxpY1wiLG5ldyB5KHtrZXk6XCJJXCIsY3RybDohMCxmb3JtYXQ6ci5pdGFsaWMsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJdGFsaWNcIn0pfSkpLHAoXCJ1bmRlcmxpbmVcIixbe3RhZ3M6W1wic3BhblwiXSxhdHRyOntzdHlsZTp7dGV4dERlY29yYXRpb246XCJ1bmRlcmxpbmVcIn19fSx7dGFnczpbXCJ1XCJdfV0pLGgoXCJ1bmRlcmxpbmVcIixuZXcgeSh7a2V5OlwiVVwiLGN0cmw6ITAsZm9ybWF0OnIudW5kZXJsaW5lLHRlbXBsYXRlOm5ldyBzKHt0ZW1wbGF0ZTpvLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiVW5kZXJsaW5lXCJ9KX0pKSxwKFwic3RyaWtldGhyb3VnaFwiLFt7dGFnczpbXCJkZWxcIixcInN0cmlrZVwiXX0se3RhZ3M6W1wic3BhblwiXSxhdHRyOntzdHlsZTp7dGV4dERlY29yYXRpb246XCJsaW5lLXRocm91Z2hcIn19fV0pLGgoXCJzdHJpa2V0aHJvdWdoXCIsbmV3IHkoe2Zvcm1hdDpyLnN0cmlrZXRocm91Z2gsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJTdHJpa2V0aHJvdWdoXCJ9KX0pKSxwKFwic3VwZXJzY3JpcHRcIixbe3RhZ3M6W1wic3VwXCJdfV0pLGgoXCJzdXBlcnNjcmlwdFwiLG5ldyB5KHtmb3JtYXQ6ci5zdXBlcnNjcmlwdCx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlN1cGVyc2NyaXB0XCJ9KX0pKSxwKFwic3Vic2NyaXB0XCIsW3t0YWdzOltcInN1YlwiXX1dKSxoKFwic3Vic2NyaXB0XCIsbmV3IHkoe2Zvcm1hdDpyLnN1YnNjcmlwdCx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIlN1YnNjcmlwdFwifSl9KSksaChcImZvcmVDb2xvclwiLG5ldyBrKHtjc3NBdHRyOlwiY29sb3JcIixkb21BdHRyOlwiY29sb3JcIixuYW1lOlwiZm9yZUNvbG9yXCIsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uY29sb3JQaWNrZXJUZW1wbGF0ZSx0aXRsZTpcIkNvbG9yXCJ9KX0pKSxoKFwiYmFja0NvbG9yXCIsbmV3IGsoe2Nzc0F0dHI6XCJiYWNrZ3JvdW5kLWNvbG9yXCIsZG9tQXR0cjpcImJhY2tncm91bmRDb2xvclwiLG5hbWU6XCJiYWNrQ29sb3JcIix0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5jb2xvclBpY2tlclRlbXBsYXRlLHRpdGxlOlwiQmFja2dyb3VuZCBDb2xvclwifSl9KSksaChcImZvbnROYW1lXCIsbmV3IGIoe2Nzc0F0dHI6XCJmb250LWZhbWlseVwiLGRvbUF0dHI6XCJmb250RmFtaWx5XCIsbmFtZTpcImZvbnROYW1lXCIsZGVmYXVsdFZhbHVlOlt7dGV4dDpcImZvbnROYW1lSW5oZXJpdFwiLHZhbHVlOlwiaW5oZXJpdFwifV0sdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOm8uY29tYm9Cb3hUZW1wbGF0ZSx0aXRsZTpcIkZvbnQgTmFtZVwifSl9KSksaChcImZvbnRTaXplXCIsbmV3IGIoe2Nzc0F0dHI6XCJmb250LXNpemVcIixkb21BdHRyOlwiZm9udFNpemVcIixuYW1lOlwiZm9udFNpemVcIixkZWZhdWx0VmFsdWU6W3t0ZXh0OlwiZm9udFNpemVJbmhlcml0XCIsdmFsdWU6XCJpbmhlcml0XCJ9XSx0ZW1wbGF0ZTpuZXcgcyh7dGVtcGxhdGU6by5jb21ib0JveFRlbXBsYXRlLHRpdGxlOlwiRm9udCBTaXplXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQsbj13aW5kb3cua2VuZG8saT1uLkNsYXNzLHI9ZS5leHRlbmQsbz1uLnVpLmVkaXRvcixhPW4udWkuRWRpdG9yLmZuLm9wdGlvbnMuZm9ybWF0cyxzPW8uRG9tLGw9by5Db21tYW5kLGM9by5Ub29sVGVtcGxhdGUsZD1vLkZvcm1hdFRvb2wsdT1vLkVkaXRvclV0aWxzLGg9dS5yZWdpc3RlclRvb2wscD11LnJlZ2lzdGVyRm9ybWF0LGY9by5SYW5nZVV0aWxzLGc9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5mb3JtYXQ9ZX0sY29udGFpbnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspaWYocj10W25dLCFyfHwhcy5pc0FuY2VzdG9yT3JTZWxmKGUscikpcmV0dXJuITE7cmV0dXJuITB9LGZpbmRTdWl0YWJsZTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhPXRoaXMuZm9ybWF0LGw9W107Zm9yKG49MCxpPXQubGVuZ3RoO2k+bjtuKyspe2ZvcihvPWEubGVuZ3RoLTE7bz49MCYmIShyPXMub2ZUeXBlKHRbbl0sYVtvXS50YWdzKT90W25dOnMucGFyZW50T2ZUeXBlKHRbbl0sYVtvXS50YWdzKSk7by0tKTtpZighcnx8XCJ0cnVlXCI9PT1yLmNvbnRlbnRFZGl0YWJsZSlyZXR1cm5bXTtlLmluQXJyYXkocixsKTwwJiZsLnB1c2gocil9Zm9yKG49MCxpPWwubGVuZ3RoO2k+bjtuKyspaWYodGhpcy5jb250YWlucyhsW25dLGwpKXJldHVybltsW25dXTtyZXR1cm4gbH0sZmluZEZvcm1hdDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcy5mb3JtYXQsbD1zLmVkaXRhYmxlUGFyZW50KGUpO2Zvcih0PTAsbj1hLmxlbmd0aDtuPnQ7dCsrKWZvcihpPWUscj1hW3RdLnRhZ3Msbz1hW3RdLmF0dHI7aSYmcy5pc0FuY2VzdG9yT2YobCxpKTspe2lmKHMub2ZUeXBlKGkscikmJnMuYXR0ckVxdWFscyhpLG8pKXJldHVybiBpO2k9aS5wYXJlbnROb2RlfXJldHVybiBudWxsfSxnZXRGb3JtYXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1mdW5jdGlvbihlKXtyZXR1cm4gaS5maW5kRm9ybWF0KHMuaXNEYXRhTm9kZShlKT9lLnBhcmVudE5vZGU6ZSl9LG89cihlWzBdKTtpZighbylyZXR1cm5cIlwiO2Zvcih0PTEsbj1lLmxlbmd0aDtuPnQ7dCsrKWlmKG8hPXIoZVt0XSkpcmV0dXJuXCJcIjtyZXR1cm4gby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfSxpc0Zvcm1hdHRlZDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaWYoIXRoaXMuZmluZEZvcm1hdChlW3RdKSlyZXR1cm4hMTtyZXR1cm4hMH19KSxtPWkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dGhpcy5mb3JtYXQ9ZSx0aGlzLnZhbHVlcz10LHRoaXMuZmluZGVyPW5ldyBnKGUpfSx3cmFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxsLGM9MT09bi5sZW5ndGg/cy5ibG9ja1BhcmVudE9yQm9keShuWzBdKTpzLmNvbW1vbkFuY2VzdG9yLmFwcGx5KG51bGwsbik7Zm9yKHMuaXNJbmxpbmUoYykmJihjPXMuYmxvY2tQYXJlbnRPckJvZHkoYykpLGk9cy5zaWduaWZpY2FudENoaWxkTm9kZXMoYykscj1zLmZpbmROb2RlSW5kZXgoaVswXSksbz1zLmNyZWF0ZShjLm93bmVyRG9jdW1lbnQsZSx0KSxhPTA7aS5sZW5ndGg+YTthKyspbD1pW2FdLHMuaXNCbG9jayhsKT8ocy5hdHRyKGwsdCksby5jaGlsZE5vZGVzLmxlbmd0aCYmKHMuaW5zZXJ0QmVmb3JlKG8sbCksbz1vLmNsb25lTm9kZSghMSkpLHI9cy5maW5kTm9kZUluZGV4KGwpKzEpOm8uYXBwZW5kQ2hpbGQobCk7by5maXJzdENoaWxkJiZzLmluc2VydEF0KGMsbyxyKX0sYXBwbHk6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gcih7fSxlJiZlLmF0dHIsZCl9dmFyIGksbyxhLGwsYyxkPXRoaXMudmFsdWVzLGg9cy5maWx0ZXIoXCJpbWdcIix0KSxwPXUuZm9ybWF0QnlOYW1lKFwiaW1nXCIsdGhpcy5mb3JtYXQpLGY9bihwKTtpZihlLmVhY2goaCxmdW5jdGlvbigpe3MuYXR0cih0aGlzLGYpfSksaC5sZW5ndGghPXQubGVuZ3RoKWlmKG89cy5maWx0ZXIoXCJpbWdcIix0LCEwKSxhPXRoaXMuZmluZGVyLmZpbmRTdWl0YWJsZShvKSxhLmxlbmd0aClmb3IobD0wLGM9YS5sZW5ndGg7Yz5sO2wrKylpPXUuZm9ybWF0QnlOYW1lKHMubmFtZShhW2xdKSx0aGlzLmZvcm1hdCkscy5hdHRyKGFbbF0sbihpKSk7ZWxzZSBpPXRoaXMuZm9ybWF0WzBdLHRoaXMud3JhcChpLnRhZ3NbMF0sbihpKSxvKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG87Zm9yKHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspaT10aGlzLmZpbmRlci5maW5kRm9ybWF0KGVbdF0pLGkmJihvPXMubmFtZShpKSxcImRpdlwiIT1vfHxpLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpPyhyPXUuZm9ybWF0QnlOYW1lKG8sdGhpcy5mb3JtYXQpLHIuYXR0ci5zdHlsZSYmcy51bnN0eWxlKGksci5hdHRyLnN0eWxlKSxyLmF0dHIuY2xhc3NOYW1lJiZzLnJlbW92ZUNsYXNzKGksci5hdHRyLmNsYXNzTmFtZSkpOnMudW53cmFwKGkpKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1mLm5vZGVzKGUpO3QuZmluZGVyLmlzRm9ybWF0dGVkKG4pP3QucmVtb3ZlKG4pOnQuYXBwbHkobil9fSksdj1pLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5mb3JtYXQ9ZSxuLnZhbHVlcz10LG4uZmluZGVyPW5ldyBnKGUpfSxhcHBseTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixhLGwsYyxkPXRoaXMuZm9ybWF0LHU9cy5ibG9ja1BhcmVudHMoZSksaD1kWzBdLnRhZ3NbMF07aWYodS5sZW5ndGgpZm9yKHQ9MCxuPXUubGVuZ3RoO24+dDt0KyspYz1zLm5hbWUodVt0XSksXCJsaVwiPT1jPyhpPXVbdF0ucGFyZW50Tm9kZSxyPW5ldyBvLkxpc3RGb3JtYXR0ZXIoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGgpLGE9dGhpcy5lZGl0b3IuY3JlYXRlUmFuZ2UoKSxhLnNlbGVjdE5vZGUodVt0XSksci50b2dnbGUoYSkpOmgmJihcInRkXCI9PWN8fHVbdF0uYXR0cmlidXRlcy5jb250ZW50RWRpdGFibGUpP25ldyBtKGQsdGhpcy52YWx1ZXMpLmFwcGx5KHVbdF0uY2hpbGROb2Rlcyk6KGw9cy5jaGFuZ2VUYWcodVt0XSxoKSxzLmF0dHIobCxkWzBdLmF0dHIpKTtlbHNlIG5ldyBtKGQsdGhpcy52YWx1ZXMpLmFwcGx5KGUpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9Zi50ZXh0Tm9kZXMoZSk7dC5sZW5ndGh8fChlLnNlbGVjdE5vZGVDb250ZW50cyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSx0PWYudGV4dE5vZGVzKGUpLHQubGVuZ3RofHwodD1zLnNpZ25pZmljYW50Q2hpbGROb2RlcyhlLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKSkpLHRoaXMuYXBwbHkodCl9fSksXz1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlLmZvcm1hdHRlcj1lLmZvcm1hdHRlcigpLGwuZm4uaW5pdC5jYWxsKHRoaXMsZSl9fSkseT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtkLmZuLmluaXQuY2FsbCh0aGlzLHIoZSx7ZmluZGVyOm5ldyBnKGUuZm9ybWF0KSxmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG0oZS5mb3JtYXQpfX0pKX19KTtyKG8se0Jsb2NrRm9ybWF0RmluZGVyOmcsQmxvY2tGb3JtYXR0ZXI6bSxHcmVlZHlCbG9ja0Zvcm1hdHRlcjp2LEZvcm1hdENvbW1hbmQ6XyxCbG9ja0Zvcm1hdFRvb2w6eX0pLHQ9W1widWxcIixcIm9sXCIsXCJsaVwiXSxwKFwianVzdGlmeUxlZnRcIixbe3RhZ3M6cy5ub25MaXN0QmxvY2tFbGVtZW50cyxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwibGVmdFwifX19LHt0YWdzOltcImltZ1wiXSxhdHRyOntzdHlsZTp7XCJmbG9hdFwiOlwibGVmdFwiLGRpc3BsYXk6XCJcIixtYXJnaW5MZWZ0OlwiXCIsbWFyZ2luUmlnaHQ6XCJcIn19fSx7dGFnczp0LGF0dHI6e3N0eWxlOnt0ZXh0QWxpZ246XCJsZWZ0XCIsbGlzdFN0eWxlUG9zaXRpb246XCJcIn19fV0pLGgoXCJqdXN0aWZ5TGVmdFwiLG5ldyB5KHtmb3JtYXQ6YS5qdXN0aWZ5TGVmdCx0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6dS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkp1c3RpZnkgTGVmdFwifSl9KSkscChcImp1c3RpZnlDZW50ZXJcIixbe3RhZ3M6cy5ub25MaXN0QmxvY2tFbGVtZW50cyxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwiY2VudGVyXCJ9fX0se3RhZ3M6W1wiaW1nXCJdLGF0dHI6e3N0eWxlOntkaXNwbGF5OlwiYmxvY2tcIixtYXJnaW5MZWZ0OlwiYXV0b1wiLG1hcmdpblJpZ2h0OlwiYXV0b1wiLFwiZmxvYXRcIjpcIlwifX19LHt0YWdzOnQsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImNlbnRlclwiLGxpc3RTdHlsZVBvc2l0aW9uOlwiaW5zaWRlXCJ9fX1dKSxoKFwianVzdGlmeUNlbnRlclwiLG5ldyB5KHtmb3JtYXQ6YS5qdXN0aWZ5Q2VudGVyLHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTp1LmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSnVzdGlmeSBDZW50ZXJcIn0pfSkpLHAoXCJqdXN0aWZ5UmlnaHRcIixbe3RhZ3M6cy5ub25MaXN0QmxvY2tFbGVtZW50cyxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwicmlnaHRcIn19fSx7dGFnczpbXCJpbWdcIl0sYXR0cjp7c3R5bGU6e1wiZmxvYXRcIjpcInJpZ2h0XCIsZGlzcGxheTpcIlwiLG1hcmdpbkxlZnQ6XCJcIixtYXJnaW5SaWdodDpcIlwifX19LHt0YWdzOnQsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcInJpZ2h0XCIsbGlzdFN0eWxlUG9zaXRpb246XCJpbnNpZGVcIn19fV0pLGgoXCJqdXN0aWZ5UmlnaHRcIixuZXcgeSh7Zm9ybWF0OmEuanVzdGlmeVJpZ2h0LHRlbXBsYXRlOm5ldyBjKHt0ZW1wbGF0ZTp1LmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSnVzdGlmeSBSaWdodFwifSl9KSkscChcImp1c3RpZnlGdWxsXCIsW3t0YWdzOnMubm9uTGlzdEJsb2NrRWxlbWVudHMsYXR0cjp7c3R5bGU6e3RleHRBbGlnbjpcImp1c3RpZnlcIn19fSx7dGFnczpbXCJpbWdcIl0sYXR0cjp7c3R5bGU6e2Rpc3BsYXk6XCJibG9ja1wiLG1hcmdpbkxlZnQ6XCJhdXRvXCIsbWFyZ2luUmlnaHQ6XCJhdXRvXCIsXCJmbG9hdFwiOlwiXCJ9fX0se3RhZ3M6dCxhdHRyOntzdHlsZTp7dGV4dEFsaWduOlwianVzdGlmeVwiLGxpc3RTdHlsZVBvc2l0aW9uOlwiXCJ9fX1dKSxoKFwianVzdGlmeUZ1bGxcIixuZXcgeSh7Zm9ybWF0OmEuanVzdGlmeUZ1bGwsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnUuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJKdXN0aWZ5IEZ1bGxcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj1lLmV4dGVuZCxpPXQudWkuZWRpdG9yLHI9aS5Eb20sbz1pLkNvbW1hbmQsYT1pLlRvb2wscz1pLkJsb2NrRm9ybWF0dGVyLGw9ci5ub3JtYWxpemUsYz1pLlJhbmdlVXRpbHMsZD1pLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCx1PW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lLG8uZm4uaW5pdC5jYWxsKHRoaXMsZSl9LF9pbnNlcnRNYXJrZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXIuY3JlYXRlKGUsXCJhXCIpO3JldHVybiBpLmNsYXNzTmFtZT1cImstbWFya2VyXCIsdC5pbnNlcnROb2RlKGkpLGkucGFyZW50Tm9kZXx8KG49dC5jb21tb25BbmNlc3RvckNvbnRhaW5lcixuLmlubmVySFRNTD1cIlwiLG4uYXBwZW5kQ2hpbGQoaSkpLGwoaS5wYXJlbnROb2RlKSxpfSxfbW92ZUZvY3VzOmZ1bmN0aW9uKGUsdCl7aWYoci5pcyh0LFwiaW1nXCIpKWUuc2V0U3RhcnRCZWZvcmUodCk7ZWxzZXtlLnNlbGVjdE5vZGVDb250ZW50cyh0KTt2YXIgbj1jLnRleHROb2RlcyhlKVswXTtpZihuKXIuaXMobixcImltZ1wiKT9lLnNldFN0YXJ0QmVmb3JlKG4pOmUuc2VsZWN0Tm9kZUNvbnRlbnRzKG4pO2Vsc2V7Zm9yKDt0LmNoaWxkTm9kZXMubGVuZ3RoJiYhci5pcyh0LmZpcnN0Q2hpbGQsXCJiclwiKTspdD10LmZpcnN0Q2hpbGQ7ZS5zZWxlY3ROb2RlQ29udGVudHModCl9fX0sc2hvdWxkVHJpbTpmdW5jdGlvbihlKXt2YXIgdD1cInAsaDEsaDIsaDMsaDQsaDUsaDZcIi5zcGxpdChcIixcIiksbj1yLnBhcmVudE9mVHlwZShlLnN0YXJ0Q29udGFpbmVyLHQpLGk9ci5wYXJlbnRPZlR5cGUoZS5lbmRDb250YWluZXIsdCk7cmV0dXJuIG4mJiFpfHwhbiYmaX0sX2JsYW5rQWZ0ZXI6ZnVuY3Rpb24oZSl7Zm9yKDtlJiYoci5pc01hcmtlcihlKXx8XCJcIj09PXIuc3RyaXBCb20oZS5ub2RlVmFsdWUpKTspZT1lLm5leHRTaWJsaW5nO3JldHVybiFlfSxleGVjOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLG8sYSxkLHUsaCxwPXRoaXMuZ2V0UmFuZ2UoKSxmPWMuZG9jdW1lbnRGcm9tUmFuZ2UocCksZz1pLmVtcHR5RWxlbWVudENvbnRlbnQsbT10aGlzLnNob3VsZFRyaW0ocCk7cC5kZWxldGVDb250ZW50cygpLGE9dGhpcy5faW5zZXJ0TWFya2VyKGYscCksZD1yLmNsb3Nlc3RFZGl0YWJsZU9mVHlwZShhLFtcImxpXCJdKSx1PXIuY2xvc2VzdEVkaXRhYmxlT2ZUeXBlKGEsXCJoMSxoMixoMyxoNCxoNSxoNlwiLnNwbGl0KFwiLFwiKSksZD9yLmVtcHR5Tm9kZShkKSYmKG89ci5jcmVhdGUoZixcInBcIiksZC5uZXh0U2libGluZyYmKGg9cC5jbG9uZVJhbmdlKCksaC5zZWxlY3ROb2RlKGQpLGMuc3BsaXQoaCxkLnBhcmVudE5vZGUpKSxyLmluc2VydEFmdGVyKG8sZC5wYXJlbnROb2RlKSxyLnJlbW92ZSgxPT1kLnBhcmVudE5vZGUuY2hpbGROb2Rlcy5sZW5ndGg/ZC5wYXJlbnROb2RlOmQpLG8uaW5uZXJIVE1MPWcsbj1vKTp1JiZ0aGlzLl9ibGFua0FmdGVyKGEpJiYobz1yLmNyZWF0ZShmLFwicFwiKSxyLmluc2VydEFmdGVyKG8sdSksby5pbm5lckhUTUw9ZyxyLnJlbW92ZShhKSxuPW8pLG58fChkfHx1fHxuZXcgcyhbe3RhZ3M6W1wicFwiXX1dKS5hcHBseShbYV0pLHAuc2VsZWN0Tm9kZShhKSxlPXIucGFyZW50T2ZUeXBlKGEsW2Q/XCJsaVwiOnU/ci5uYW1lKHUpOlwicFwiXSksYy5zcGxpdChwLGUsbSksdD1lLnByZXZpb3VzU2libGluZyxyLmlzKHQsXCJsaVwiKSYmdC5maXJzdENoaWxkJiYhci5pcyh0LmZpcnN0Q2hpbGQsXCJiclwiKSYmKHQ9dC5maXJzdENoaWxkKSxuPWUubmV4dFNpYmxpbmcsci5pcyhuLFwibGlcIikmJm4uZmlyc3RDaGlsZCYmIXIuaXMobi5maXJzdENoaWxkLFwiYnJcIikmJihuPW4uZmlyc3RDaGlsZCksci5yZW1vdmUoZSksdGhpcy5jbGVhbih0KSx0aGlzLmNsZWFuKG4se2xpbmtzOiEwfSksbCh0KSksbChuKSx0aGlzLl9tb3ZlRm9jdXMocCxuKSxwLmNvbGxhcHNlKCEwKSxyLnNjcm9sbFRvKG4pLGMuc2VsZWN0UmFuZ2UocCl9LGNsZWFuOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZTtpZihlLmZpcnN0Q2hpbGQmJnIuaXMoZS5maXJzdENoaWxkLFwiYnJcIikmJnIucmVtb3ZlKGUuZmlyc3RDaGlsZCksci5pc0RhdGFOb2RlKGUpJiYhZS5ub2RlVmFsdWUmJihlPWUucGFyZW50Tm9kZSksZSl7Zm9yKDtlLmZpcnN0Q2hpbGQmJjE9PWUuZmlyc3RDaGlsZC5ub2RlVHlwZTspZT1lLmZpcnN0Q2hpbGQ7aWYoIXIuaXNFbXB0eShlKSYmL15cXHMqJC8udGVzdChlLmlubmVySFRNTCkmJihlLmlubmVySFRNTD1pLmVtcHR5RWxlbWVudENvbnRlbnQpLHQmJnQubGlua3MpZm9yKDtlIT1uOyl7aWYoci5pcyhlLFwiYVwiKSYmci5lbXB0eU5vZGUoZSkpe3IudW53cmFwKGUpO2JyZWFrfWU9ZS5wYXJlbnROb2RlfX19fSksaD1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSxvLmZuLmluaXQuY2FsbCh0aGlzLGUpfSxleGVjOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLmdldFJhbmdlKCksaT1yLmNyZWF0ZShjLmRvY3VtZW50RnJvbVJhbmdlKG4pLFwiYnJcIiksbz10LnN1cHBvcnQuYnJvd3NlcixhPW8ubXNpZSYmMTE+by52ZXJzaW9uO24uZGVsZXRlQ29udGVudHMoKSxuLmluc2VydE5vZGUoaSksbChpLnBhcmVudE5vZGUpLGF8fGkubmV4dFNpYmxpbmcmJiFyLmlzV2hpdGVzcGFjZShpLm5leHRTaWJsaW5nKXx8KGU9aS5jbG9uZU5vZGUoITApLGUuY2xhc3NOYW1lPVwiay1iclwiLHIuaW5zZXJ0QWZ0ZXIoZSxpKSksbi5zZXRTdGFydEFmdGVyKGkpLG4uY29sbGFwc2UoITApLHIuc2Nyb2xsVG8oaS5uZXh0U2libGluZ3x8aSksYy5zZWxlY3RSYW5nZShuKX19KTtuKGkse1BhcmFncmFwaENvbW1hbmQ6dSxOZXdMaW5lQ29tbWFuZDpofSksZChcImluc2VydExpbmVCcmVha1wiLG5ldyBhKHtrZXk6MTMsc2hpZnQ6ITAsY29tbWFuZDpofSkpLGQoXCJpbnNlcnRQYXJhZ3JhcGhcIixuZXcgYSh7a2V5OjEzLGNvbW1hbmQ6dX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5DbGFzcyxpPWUuZXh0ZW5kLHI9dC51aS5lZGl0b3Isbz1yLkRvbSxhPXIuUmFuZ2VVdGlscyxzPXIuRWRpdG9yVXRpbHMsbD1yLkNvbW1hbmQsYz1yLlRvb2xUZW1wbGF0ZSxkPXIuRm9ybWF0VG9vbCx1PXIuQmxvY2tGb3JtYXRGaW5kZXIsaD1hLnRleHROb2RlcyxwPXIuRWRpdG9yVXRpbHMucmVnaXN0ZXJUb29sLGY9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy50YWc9ZTt2YXIgdD10aGlzLnRhZ3M9W1widWxcIj09ZT9cIm9sXCI6XCJ1bFwiLGVdO3UuZm4uaW5pdC5jYWxsKHRoaXMsW3t0YWdzOnR9XSl9LGlzRm9ybWF0dGVkOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKSh0PXRoaXMuZmluZEZvcm1hdChlW25dKSkmJm8ubmFtZSh0KT09dGhpcy50YWcmJmkucHVzaCh0KTtpZigxPmkubGVuZ3RoKXJldHVybiExO2lmKGkubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3Iobj0wO2kubGVuZ3RoPm4mJmlbbl0ucGFyZW50Tm9kZT09dC5wYXJlbnROb2RlO24rKylpZihpW25dIT10KXJldHVybiExO3JldHVybiEwfSxmaW5kU3VpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9by5wYXJlbnRPZlR5cGUoZVswXSx0aGlzLnRhZ3MpO3JldHVybiB0JiZvLm5hbWUodCk9PXRoaXMudGFnP3Q6bnVsbH19KSxnPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLmZpbmRlcj1uZXcgZihlKSxuLnRhZz1lLG4udW53cmFwVGFnPXR9LGlzTGlzdDpmdW5jdGlvbihlKXt2YXIgdD1vLm5hbWUoZSk7cmV0dXJuXCJ1bFwiPT10fHxcIm9sXCI9PXR8fFwiZGxcIj09dH0sd3JhcDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1vLmNyZWF0ZShlLm93bmVyRG9jdW1lbnQsXCJsaVwiKTtmb3Iobj0wO3QubGVuZ3RoPm47bisrKWlmKGk9dFtuXSxvLmlzKGksXCJsaVwiKSllLmFwcGVuZENoaWxkKGkpO2Vsc2UgaWYodGhpcy5pc0xpc3QoaSkpZm9yKDtpLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoaS5maXJzdENoaWxkKTtlbHNlIGlmKG8uaXMoaSxcInRkXCIpKXtmb3IoO2kuZmlyc3RDaGlsZDspci5hcHBlbmRDaGlsZChpLmZpcnN0Q2hpbGQpO2UuYXBwZW5kQ2hpbGQociksaS5hcHBlbmRDaGlsZChlKSxlPWUuY2xvbmVOb2RlKCExKSxyPXIuY2xvbmVOb2RlKCExKX1lbHNlIHIuYXBwZW5kQ2hpbGQoaSksby5pc0Jsb2NrKGkpJiYoZS5hcHBlbmRDaGlsZChyKSxvLnVud3JhcChpKSxyPXIuY2xvbmVOb2RlKCExKSk7ci5maXJzdENoaWxkJiZlLmFwcGVuZENoaWxkKHIpfSxjb250YWluc0FueTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO3QubGVuZ3RoPm47bisrKWlmKG8uaXNBbmNlc3Rvck9yU2VsZihlLHRbbl0pKXJldHVybiEwO3JldHVybiExfSxzdWl0YWJsZTpmdW5jdGlvbihlLHQpe2lmKFwiay1tYXJrZXJcIj09ZS5jbGFzc05hbWUpe3ZhciBuPWUubmV4dFNpYmxpbmc7aWYobiYmby5pc0Jsb2NrKG4pKXJldHVybiExO2lmKG49ZS5wcmV2aW91c1NpYmxpbmcsbiYmby5pc0Jsb2NrKG4pKXJldHVybiExfXJldHVybiB0aGlzLmNvbnRhaW5zQW55KGUsdCl8fG8uaXNJbmxpbmUoZSl8fDM9PWUubm9kZVR5cGV9LHNwbGl0OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLGwsYyxkPWgodCk7aWYoZC5sZW5ndGgpZm9yKG49by5wYXJlbnRPZlR5cGUoZFswXSxbXCJsaVwiXSksaT1vLnBhcmVudE9mVHlwZShkW2QubGVuZ3RoLTFdLFtcImxpXCJdKSx0LnNldFN0YXJ0QmVmb3JlKG4pLHQuc2V0RW5kQWZ0ZXIoaSkscj0wLHM9ZC5sZW5ndGg7cz5yO3IrKylsPXRoaXMuZmluZGVyLmZpbmRGb3JtYXQoZFtyXSksbCYmKGM9ZShsKS5wYXJlbnRzKFwidWwsb2xcIiksY1swXT9hLnNwbGl0KHQsYy5sYXN0KClbMF0sITApOmEuc3BsaXQodCxsLCEwKSl9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGk9dC5wcmV2aW91c1NpYmxpbmc7aSYmKFwiay1tYXJrZXJcIj09aS5jbGFzc05hbWV8fDM9PWkubm9kZVR5cGUmJm8uaXNXaGl0ZXNwYWNlKGkpKTspaT1pLnByZXZpb3VzU2libGluZztpZihpJiZvLm5hbWUoaSk9PWUpe2Zvcig7dC5maXJzdENoaWxkOylpLmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7by5yZW1vdmUodCksdD1pfWZvcihuPXQubmV4dFNpYmxpbmc7biYmKFwiay1tYXJrZXJcIj09bi5jbGFzc05hbWV8fDM9PW4ubm9kZVR5cGUmJm8uaXNXaGl0ZXNwYWNlKG4pKTspbj1uLm5leHRTaWJsaW5nO2lmKG4mJm8ubmFtZShuKT09ZSl7Zm9yKDt0Lmxhc3RDaGlsZDspbi5pbnNlcnRCZWZvcmUodC5sYXN0Q2hpbGQsbi5maXJzdENoaWxkKTtvLnJlbW92ZSh0KX19LGJyZWFrYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZSE9ZS5vd25lckRvY3VtZW50LmJvZHkmJiEvdGFibGV8dGJvZHl8dHJ8dGQvLnRlc3Qoby5uYW1lKGUpKSYmIWUuYXR0cmlidXRlcy5jb250ZW50RWRpdGFibGV9LGFwcGx5T25TZWN0aW9uOmZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3UucHVzaCh0aGlzKX12YXIgcixhLHMsbCxjPXRoaXMudGFnLGQ9by5jbG9zZXN0U3BsaXR0YWJsZVBhcmVudChuKSx1PVtdLGg9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKG4pO2ZvcihofHwoaD1uZXcgZihcInVsXCI9PWM/XCJvbFwiOlwidWxcIikuZmluZFN1aXRhYmxlKG4pKSwvdGFibGV8dGJvZHkvLnRlc3Qoby5uYW1lKGQpKT9yPWUubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJuIG8ucGFyZW50T2ZUeXBlKGUsW1widGRcIl0pfSk6KHI9by5zaWduaWZpY2FudENoaWxkTm9kZXMoZCksZS5ncmVwKHIsby5pc0Jsb2NrKS5sZW5ndGgmJihyPWUuZ3JlcChyLGUucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udGFpbnNBbnkoZSxuKX0sdGhpcykpKSxyLmxlbmd0aHx8KHI9bikpLGE9MDtyLmxlbmd0aD5hO2ErKylzPXJbYV0sbD0oIWh8fCFvLmlzQW5jZXN0b3JPclNlbGYoaCxzKSkmJnRoaXMuc3VpdGFibGUocyxuKSxsJiYoaCYmdGhpcy5pc0xpc3Qocyk/KGUuZWFjaChzLmNoaWxkTm9kZXMsaSksby5yZW1vdmUocykpOnUucHVzaChzKSk7dS5sZW5ndGg9PXIubGVuZ3RoJiZ0aGlzLmJyZWFrYWJsZShkKSYmKHU9W2RdKSxofHwoaD1vLmNyZWF0ZShkLm93bmVyRG9jdW1lbnQsYyksby5pbnNlcnRCZWZvcmUoaCx1WzBdKSksdGhpcy53cmFwKGgsdSksby5pcyhoLGMpfHxvLmNoYW5nZVRhZyhoLGMpLHRoaXMubWVyZ2UoYyxoKX0sYXBwbHk6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9MCxhPVtdO2RvIGk9by5jbG9zZXN0RWRpdGFibGUoZVtyXSxbXCJ0ZFwiLFwiYm9keVwiXSksdCYmaT09dD9uLnB1c2goZVtyXSk6KHQmJmEucHVzaCh7c2VjdGlvbjp0LG5vZGVzOm59KSxuPVtlW3JdXSx0PWkpLHIrKzt3aGlsZShlLmxlbmd0aD5yKTtmb3IoYS5wdXNoKHtzZWN0aW9uOnQsbm9kZXM6bn0pLHI9MDthLmxlbmd0aD5yO3IrKyl0aGlzLmFwcGx5T25TZWN0aW9uKGFbcl0uc2VjdGlvbixhW3JdLm5vZGVzKX0sdW53cmFwOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixhLHM9dC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPXRoaXMudW53cmFwVGFnO2ZvcihpPXQuZmlyc3RDaGlsZDtpO2k9aS5uZXh0U2libGluZyl7Zm9yKHI9by5jcmVhdGUodC5vd25lckRvY3VtZW50LGx8fFwicFwiKTtpLmZpcnN0Q2hpbGQ7KWE9aS5maXJzdENoaWxkLG8uaXNCbG9jayhhKT8oci5maXJzdENoaWxkJiYocy5hcHBlbmRDaGlsZChyKSxyPW8uY3JlYXRlKHQub3duZXJEb2N1bWVudCxsfHxcInBcIikpLHMuYXBwZW5kQ2hpbGQoYSkpOnIuYXBwZW5kQ2hpbGQoYSk7ci5maXJzdENoaWxkJiZzLmFwcGVuZENoaWxkKHIpfW49ZSh0KS5wYXJlbnRzKFwidWwsb2xcIiksblswXT8oby5pbnNlcnRBZnRlcihzLG4ubGFzdCgpWzBdKSxuLmxhc3QoKS5yZW1vdmUoKSk6by5pbnNlcnRBZnRlcihzLHQpLG8ucmVtb3ZlKHQpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQ9dGhpcy5maW5kZXIuZmluZEZvcm1hdChlW25dKSx0JiZ0aGlzLnVud3JhcCh0KX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPWgoZSkscj1lLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyO2kubGVuZ3RofHwoZS5zZWxlY3ROb2RlQ29udGVudHMociksaT1oKGUpLGkubGVuZ3RofHwodD1yLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIiksZS5zdGFydENvbnRhaW5lci5hcHBlbmRDaGlsZCh0KSxpPVt0XSxlLnNlbGVjdE5vZGUodC5wYXJlbnROb2RlKSkpLG4uZmluZGVyLmlzRm9ybWF0dGVkKGkpPyhuLnNwbGl0KGUpLG4ucmVtb3ZlKGkpKTpuLmFwcGx5KGkpfX0pLG09bC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZS5mb3JtYXR0ZXI9bmV3IGcoZS50YWcpLGwuZm4uaW5pdC5jYWxsKHRoaXMsZSl9fSksdj1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSxkLmZuLmluaXQuY2FsbCh0aGlzLGkoZSx7ZmluZGVyOm5ldyBmKGUudGFnKX0pKX0sY29tbWFuZDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG0oaShlLHt0YWc6dGhpcy5vcHRpb25zLnRhZ30pKX19KTtpKHIse0xpc3RGb3JtYXRGaW5kZXI6ZixMaXN0Rm9ybWF0dGVyOmcsTGlzdENvbW1hbmQ6bSxMaXN0VG9vbDp2fSkscChcImluc2VydFVub3JkZXJlZExpc3RcIixuZXcgdih7dGFnOlwidWxcIix0ZW1wbGF0ZTpuZXcgYyh7dGVtcGxhdGU6cy5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkluc2VydCB1bm9yZGVyZWQgbGlzdFwifSl9KSkscChcImluc2VydE9yZGVyZWRMaXN0XCIsbmV3IHYoe3RhZzpcIm9sXCIsdGVtcGxhdGU6bmV3IGMoe3RlbXBsYXRlOnMuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgb3JkZXJlZCBsaXN0XCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC5DbGFzcyxpPWUuZXh0ZW5kLHI9ZS5wcm94eSxvPXQudWkuZWRpdG9yLGE9by5Eb20scz1vLlJhbmdlVXRpbHMsbD1vLkVkaXRvclV0aWxzLGM9by5Db21tYW5kLGQ9by5Ub29sLHU9by5Ub29sVGVtcGxhdGUsaD1vLklubGluZUZvcm1hdHRlcixwPW8uSW5saW5lRm9ybWF0RmluZGVyLGY9cy50ZXh0Tm9kZXMsZz1vLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCxtPW4uZXh0ZW5kKHtmaW5kU3VpdGFibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGEucGFyZW50T2ZUeXBlKGUsW1wiYVwiXSl9fSksdj1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuZmluZGVyPW5ldyBtfSxhcHBseTpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGwsYz1mKGUpO3QuaW5uZXJIVE1MPyhuPXMuZ2V0TWFya2VycyhlKSxpPXMuZG9jdW1lbnRGcm9tUmFuZ2UoZSksZS5kZWxldGVDb250ZW50cygpLG89YS5jcmVhdGUoaSxcImFcIix0KSxlLmluc2VydE5vZGUobyksbD1vLnBhcmVudE5vZGUsXCJhXCI9PWEubmFtZShsKSYmYS5pbnNlcnRBZnRlcihvLGwpLGEuZW1wdHlOb2RlKGwpJiZhLnJlbW92ZShsKSxuLmxlbmd0aD4xJiYoYS5pbnNlcnRBZnRlcihuW24ubGVuZ3RoLTFdLG8pLGEuaW5zZXJ0QWZ0ZXIoblsxXSxvKSxhW2MubGVuZ3RoPjA/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKG5bMF0sbykpKToocj1uZXcgaChbe3RhZ3M6W1wiYVwiXX1dLHQpLHIuZmluZGVyPXRoaXMuZmluZGVyLHIuYXBwbHkoYykpfX0pLF89Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7ZS5mb3JtYXR0ZXI9e3RvZ2dsZTpmdW5jdGlvbihlKXtuZXcgaChbe3RhZ3M6W1wiYVwiXX1dKS5yZW1vdmUoZihlKSl9fSx0aGlzLm9wdGlvbnM9ZSxjLmZuLmluaXQuY2FsbCh0aGlzLGUpfX0pLHk9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Lm9wdGlvbnM9ZSxjLmZuLmluaXQuY2FsbCh0LGUpLHQuZm9ybWF0dGVyPW5ldyB2LGUudXJsP3RoaXMuZXhlYz1mdW5jdGlvbigpe3RoaXMuZm9ybWF0dGVyLmFwcGx5KGUucmFuZ2Use2hyZWY6ZS51cmwsaW5uZXJIVE1MOmUudGV4dHx8ZS51cmwsdGFyZ2V0OmUudGFyZ2V0fSl9Oih0LmF0dHJpYnV0ZXM9bnVsbCx0LmFzeW5jPSEwKX0sX2RpYWxvZ1RlbXBsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHQudGVtcGxhdGUoXCI8ZGl2IGNsYXNzPVxcXCJrLWVkaXRvci1kaWFsb2cgay1wb3B1cC1lZGl0LWZvcm0gay1lZGl0LWZvcm0tY29udGFpbmVyXFxcIj48ZGl2IGNsYXNzPSdrLWVkaXQtbGFiZWwnPjxsYWJlbCBmb3I9J2stZWRpdG9yLWxpbmstdXJsJz4jOiBtZXNzYWdlcy5saW5rV2ViQWRkcmVzcyAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtZmllbGQnPjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nay1pbnB1dCBrLXRleHRib3gnIGlkPSdrLWVkaXRvci1saW5rLXVybCc+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWxhYmVsIGstZWRpdG9yLWxpbmstdGV4dC1yb3cnPjxsYWJlbCBmb3I9J2stZWRpdG9yLWxpbmstdGV4dCc+IzogbWVzc2FnZXMubGlua1RleHQgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWZpZWxkIGstZWRpdG9yLWxpbmstdGV4dC1yb3cnPjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0nay1pbnB1dCBrLXRleHRib3gnIGlkPSdrLWVkaXRvci1saW5rLXRleHQnPjwvZGl2PjxkaXYgY2xhc3M9J2stZWRpdC1sYWJlbCc+PGxhYmVsIGZvcj0nay1lZGl0b3ItbGluay10aXRsZSc+IzogbWVzc2FnZXMubGlua1Rvb2xUaXAgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWZpZWxkJz48aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2staW5wdXQgay10ZXh0Ym94JyBpZD0nay1lZGl0b3ItbGluay10aXRsZSc+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWxhYmVsJz48L2Rpdj48ZGl2IGNsYXNzPSdrLWVkaXQtZmllbGQnPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J2stY2hlY2tib3gnIGlkPSdrLWVkaXRvci1saW5rLXRhcmdldCc+PGxhYmVsIGZvcj0nay1lZGl0b3ItbGluay10YXJnZXQnPiM6IG1lc3NhZ2VzLmxpbmtPcGVuSW5OZXdXaW5kb3cgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz0nay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0Jz48YnV0dG9uIGNsYXNzPVxcXCJrLWRpYWxvZy1pbnNlcnQgay1idXR0b24gay1wcmltYXJ5XFxcIj4jOiBtZXNzYWdlcy5kaWFsb2dJbnNlcnQgIzwvYnV0dG9uPjxidXR0b24gY2xhc3M9XFxcImstZGlhbG9nLWNsb3NlIGstYnV0dG9uXFxcIj4jOiBtZXNzYWdlcy5kaWFsb2dDYW5jZWwgIzwvYnV0dG9uPjwvZGl2PjwvZGl2PlwiKSh7bWVzc2FnZXM6dGhpcy5lZGl0b3Iub3B0aW9ucy5tZXNzYWdlc30pfSxleGVjOmZ1bmN0aW9uKCl7dmFyIHQsbixpLG8scz10aGlzLmdldFJhbmdlKCkuY29sbGFwc2VkLGw9dGhpcy5lZGl0b3Iub3B0aW9ucy5tZXNzYWdlczt0aGlzLl9pbml0aWFsVGV4dD1cIlwiLHRoaXMuX3JhbmdlPXRoaXMubG9ja1JhbmdlKCEwKSx0PWYodGhpcy5fcmFuZ2UpLG49dC5sZW5ndGg/dGhpcy5mb3JtYXR0ZXIuZmluZGVyLmZpbmRTdWl0YWJsZSh0WzBdKTpudWxsLGk9dC5sZW5ndGgmJlwiaW1nXCI9PWEubmFtZSh0WzBdKSxvPXRoaXMuY3JlYXRlRGlhbG9nKHRoaXMuX2RpYWxvZ1RlbXBsYXRlKCkse3RpdGxlOmwuY3JlYXRlTGluayxjbG9zZTpyKHRoaXMuX2Nsb3NlLHRoaXMpLHZpc2libGU6ITF9KSxvLmZpbmQoXCIuay1kaWFsb2ctaW5zZXJ0XCIpLmNsaWNrKHIodGhpcy5fYXBwbHksdGhpcykpLmVuZCgpLmZpbmQoXCIuay1kaWFsb2ctY2xvc2VcIikuY2xpY2socih0aGlzLl9jbG9zZSx0aGlzKSkuZW5kKCkuZmluZChcIi5rLWVkaXQtZmllbGQgaW5wdXRcIikua2V5ZG93bihyKHRoaXMuX2tleWRvd24sdGhpcykpLmVuZCgpLmZpbmQoXCIjay1lZGl0b3ItbGluay11cmxcIikudmFsKHRoaXMubGlua1VybChuKSkuZW5kKCkuZmluZChcIiNrLWVkaXRvci1saW5rLXRleHRcIikudmFsKHRoaXMubGlua1RleHQodCkpLmVuZCgpLmZpbmQoXCIjay1lZGl0b3ItbGluay10aXRsZVwiKS52YWwobj9uLnRpdGxlOlwiXCIpLmVuZCgpLmZpbmQoXCIjay1lZGl0b3ItbGluay10YXJnZXRcIikuYXR0cihcImNoZWNrZWRcIixuP1wiX2JsYW5rXCI9PW4udGFyZ2V0OiExKS5lbmQoKS5maW5kKFwiLmstZWRpdG9yLWxpbmstdGV4dC1yb3dcIikudG9nZ2xlKCFpKSx0Lmxlbmd0aD4wJiYhcyYmKHRoaXMuX2luaXRpYWxUZXh0PWUoXCIjay1lZGl0b3ItbGluay10ZXh0XCIsbykudmFsKCkpLHRoaXMuX2RpYWxvZz1vLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCksZShcIiNrLWVkaXRvci1saW5rLXVybFwiLG8pLmZvY3VzKCkuc2VsZWN0KCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBuPXQua2V5cztlLmtleUNvZGU9PW4uRU5URVI/dGhpcy5fYXBwbHkoZSk6ZS5rZXlDb2RlPT1uLkVTQyYmdGhpcy5fY2xvc2UoZSl9LF9hcHBseTpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLl9kaWFsb2cuZWxlbWVudCxzPWUoXCIjay1lZGl0b3ItbGluay11cmxcIixvKS52YWwoKSxsPWUoXCIjay1lZGl0b3ItbGluay10ZXh0XCIsbyk7cyYmXCJodHRwOi8vXCIhPXMmJihzLmluZGV4T2YoXCJAXCIpPjAmJiEvXihcXHcrOil8KFxcL1xcLykvaS50ZXN0KHMpJiYocz1cIm1haWx0bzpcIitzKSx0aGlzLmF0dHJpYnV0ZXM9e2hyZWY6c30sbj1lKFwiI2stZWRpdG9yLWxpbmstdGl0bGVcIixvKS52YWwoKSxuJiYodGhpcy5hdHRyaWJ1dGVzLnRpdGxlPW4pLGwuaXMoXCI6dmlzaWJsZVwiKSYmKGk9bC52YWwoKSxpfHx0aGlzLl9pbml0aWFsVGV4dD9pJiZpIT09dGhpcy5faW5pdGlhbFRleHQmJih0aGlzLmF0dHJpYnV0ZXMuaW5uZXJIVE1MPWEuc3RyaXBCb20oaSkpOnRoaXMuYXR0cmlidXRlcy5pbm5lckhUTUw9cykscj1lKFwiI2stZWRpdG9yLWxpbmstdGFyZ2V0XCIsbykuaXMoXCI6Y2hlY2tlZFwiKSx0aGlzLmF0dHJpYnV0ZXMudGFyZ2V0PXI/XCJfYmxhbmtcIjpudWxsLHRoaXMuZm9ybWF0dGVyLmFwcGx5KHRoaXMuX3JhbmdlLHRoaXMuYXR0cmlidXRlcykpLHRoaXMuX2Nsb3NlKHQpLHRoaXMuY2hhbmdlJiZ0aGlzLmNoYW5nZSgpfSxfY2xvc2U6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2RpYWxvZy5kZXN0cm95KCksYS53aW5kb3dGcm9tRG9jdW1lbnQocy5kb2N1bWVudEZyb21SYW5nZSh0aGlzLl9yYW5nZSkpLmZvY3VzKCksdGhpcy5yZWxlYXNlUmFuZ2UodGhpcy5fcmFuZ2UpfSxsaW5rVXJsOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLDIpOlwiaHR0cDovL1wifSxsaW5rVGV4dDpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybiAxPT1lLmxlbmd0aD90PWVbMF0ubm9kZVZhbHVlOmUubGVuZ3RoJiYodD1lWzBdLm5vZGVWYWx1ZStlWzFdLm5vZGVWYWx1ZSksYS5zdHJpcEJvbSh0fHxcIlwiKX0scmVkbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMubG9ja1JhbmdlKCEwKTt0aGlzLmZvcm1hdHRlci5hcHBseShlLHRoaXMuYXR0cmlidXRlcyksdGhpcy5yZWxlYXNlUmFuZ2UoZSl9fSksdz1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnM9dCx0aGlzLmZpbmRlcj1uZXcgcChbe3RhZ3M6W1wiYVwiXX1dKSxkLmZuLmluaXQuY2FsbCh0aGlzLGUuZXh0ZW5kKHQse2NvbW1hbmQ6X30pKX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe2QuZm4uaW5pdGlhbGl6ZS5jYWxsKHRoaXMsZSx0KSxlLmFkZENsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKX0sdXBkYXRlOmZ1bmN0aW9uKGUsdCl7ZS50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiwhdGhpcy5maW5kZXIuaXNGb3JtYXR0ZWQodCkpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX19KTtpKHQudWkuZWRpdG9yLHtMaW5rRm9ybWF0RmluZGVyOm0sTGlua0Zvcm1hdHRlcjp2LFVubGlua0NvbW1hbmQ6XyxMaW5rQ29tbWFuZDp5LFVubGlua1Rvb2w6d30pLGcoXCJjcmVhdGVMaW5rXCIsbmV3IGQoe2tleTpcIktcIixjdHJsOiEwLGNvbW1hbmQ6eSx0ZW1wbGF0ZTpuZXcgdSh7dGVtcGxhdGU6bC5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkNyZWF0ZSBMaW5rXCJ9KX0pKSxnKFwidW5saW5rXCIsbmV3IHcoe2tleTpcIktcIixjdHJsOiEwLHNoaWZ0OiEwLHRlbXBsYXRlOm5ldyB1KHt0ZW1wbGF0ZTpsLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiUmVtb3ZlIExpbmtcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPWUuZXh0ZW5kLHI9bi51aS5lZGl0b3Isbz1yLkVkaXRvclV0aWxzLGE9ci5Eb20scz1vLnJlZ2lzdGVyVG9vbCxsPXIuVG9vbFRlbXBsYXRlLGM9ci5SYW5nZVV0aWxzLGQ9ci5Db21tYW5kLHU9ci5MaW5rRm9ybWF0dGVyLGg9Yy50ZXh0Tm9kZXMscD1uLmtleXMsZj1cIiNrLWVkaXRvci1maWxlLXVybFwiLGc9XCIjay1lZGl0b3ItZmlsZS10aXRsZVwiLG09ZC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztkLmZuLmluaXQuY2FsbCh0LGUpLHQuZm9ybWF0dGVyPW5ldyB1LHQuYXN5bmM9ITAsdC5hdHRyaWJ1dGVzPXt9fSxpbnNlcnRGaWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5hdHRyaWJ1dGVzLGk9Yy5kb2N1bWVudEZyb21SYW5nZSh0KTtpZihuLmhyZWYmJlwiaHR0cDovL1wiIT1uLmhyZWYpe2lmKCFlKXJldHVybiBlPWEuY3JlYXRlKGksXCJhXCIse2hyZWY6bi5ocmVmfSksZS5pbm5lckhUTUw9bi5pbm5lckhUTUwsdC5kZWxldGVDb250ZW50cygpLHQuaW5zZXJ0Tm9kZShlKSxlLm5leHRTaWJsaW5nfHxhLmluc2VydEFmdGVyKGkuY3JlYXRlVGV4dE5vZGUoXCLvu79cIiksZSksdC5zZXRTdGFydEFmdGVyKGUpLHQuc2V0RW5kQWZ0ZXIoZSksYy5zZWxlY3RSYW5nZSh0KSwhMDthLmF0dHIoZSxuKX1yZXR1cm4hMX0sX2RpYWxvZ1RlbXBsYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBuLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1lZGl0b3ItZGlhbG9nIGstcG9wdXAtZWRpdC1mb3JtIGstZWRpdC1mb3JtLWNvbnRhaW5lclwiPiMgaWYgKHNob3dCcm93c2VyKSB7ICM8ZGl2IGNsYXNzPVwiay1maWxlYnJvd3NlclwiPjwvZGl2PiMgfSAjPGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWZpbGUtdXJsXCI+IzogbWVzc2FnZXMuZmlsZVdlYkFkZHJlc3MgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItZmlsZS11cmxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItZmlsZS10aXRsZVwiPiM6IG1lc3NhZ2VzLmZpbGVUaXRsZSAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1maWVsZFxcJz48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImstaW5wdXQgay10ZXh0Ym94XCIgaWQ9XCJrLWVkaXRvci1maWxlLXRpdGxlXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPjxidXR0b24gY2xhc3M9XCJrLWRpYWxvZy1pbnNlcnQgay1idXR0b24gay1wcmltYXJ5XCI+IzogbWVzc2FnZXMuZGlhbG9nSW5zZXJ0ICM8L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwiay1kaWFsb2ctY2xvc2Ugay1idXR0b25cIj4jOiBtZXNzYWdlcy5kaWFsb2dDYW5jZWwgIzwvYnV0dG9uPjwvZGl2PjwvZGl2PicpKHttZXNzYWdlczp0aGlzLmVkaXRvci5vcHRpb25zLm1lc3NhZ2VzLHNob3dCcm93c2VyOmV9KX0scmVkbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmxvY2tSYW5nZSgpO3RoaXMuZm9ybWF0dGVyLmFwcGx5KHQsdGhpcy5hdHRyaWJ1dGVzKSxlLnJlbGVhc2VSYW5nZSh0KX0sZXhlYzpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9cy5lbGVtZW50LG49dC5maW5kKGYpLnZhbCgpLnJlcGxhY2UoLyAvZyxcIiUyMFwiKSxpPXQuZmluZChnKS52YWwoKTtsLmF0dHJpYnV0ZXM9e2hyZWY6bixpbm5lckhUTUw6XCJcIiE9PWk/aTpufSxtPWwuaW5zZXJ0RmlsZSh2LGQpLHIoZSksbC5jaGFuZ2UmJmwuY2hhbmdlKCl9ZnVuY3Rpb24gcihlKXtlLnByZXZlbnREZWZhdWx0KCkscy5kZXN0cm95KCksYS53aW5kb3dGcm9tRG9jdW1lbnQoYy5kb2N1bWVudEZyb21SYW5nZShkKSkuZm9jdXMoKSxtfHxsLnJlbGVhc2VSYW5nZShkKX1mdW5jdGlvbiBvKHQpe3Qua2V5Q29kZT09cC5FTlRFUj9lKHQpOnQua2V5Q29kZT09cC5FU0MmJnIodCl9dmFyIHMsbD10aGlzLGQ9bC5sb2NrUmFuZ2UoKSx1PWgoZCksbT0hMSx2PXUubGVuZ3RoP3RoaXMuZm9ybWF0dGVyLmZpbmRlci5maW5kU3VpdGFibGUodVswXSk6bnVsbCxfPWwuZWRpdG9yLm9wdGlvbnMseT1fLm1lc3NhZ2VzLHc9Xy5maWxlQnJvd3NlcixiPSEhKG4udWkuRmlsZUJyb3dzZXImJncmJncudHJhbnNwb3J0JiZ3LnRyYW5zcG9ydC5yZWFkIT09dCksaz17dGl0bGU6eS5pbnNlcnRGaWxlLHZpc2libGU6ITEscmVzaXphYmxlOmJ9O2suY2xvc2U9cixiJiYoay53aWR0aD03NTApLHM9dGhpcy5jcmVhdGVEaWFsb2cobC5fZGlhbG9nVGVtcGxhdGUoYiksaykudG9nZ2xlQ2xhc3MoXCJrLWZpbGVicm93c2VyLWRpYWxvZ1wiLGIpLmZpbmQoXCIuay1kaWFsb2ctaW5zZXJ0XCIpLmNsaWNrKGUpLmVuZCgpLmZpbmQoXCIuay1kaWFsb2ctY2xvc2VcIikuY2xpY2socikuZW5kKCkuZmluZChcIi5rLWVkaXQtZmllbGQgaW5wdXRcIikua2V5ZG93bihvKS5lbmQoKS5maW5kKGYpLnZhbCh2P3YuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLDIpOlwiaHR0cDovL1wiKS5lbmQoKS5maW5kKGcpLnZhbCh2P3YudGl0bGU6XCJcIikuZW5kKCkuZGF0YShcImtlbmRvV2luZG93XCIpLGImJm5ldyBuLnVpLkZpbGVCcm93c2VyKHMuZWxlbWVudC5maW5kKFwiLmstZmlsZWJyb3dzZXJcIiksaSh7fSx3LHtjaGFuZ2U6ZnVuY3Rpb24oKXtzLmVsZW1lbnQuZmluZChmKS52YWwodGhpcy52YWx1ZSgpKX0sYXBwbHk6ZX0pKSxzLmNlbnRlcigpLm9wZW4oKSxzLmVsZW1lbnQuZmluZChmKS5mb2N1cygpLnNlbGVjdCgpfX0pO24udWkuZWRpdG9yLkZpbGVDb21tYW5kPW0scyhcImluc2VydEZpbGVcIixuZXcgci5Ub29sKHtjb21tYW5kOm0sdGVtcGxhdGU6bmV3IGwoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgRmlsZVwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9ZS5leHRlbmQscj1uLnVpLmVkaXRvcixvPXIuRWRpdG9yVXRpbHMsYT1yLkRvbSxzPW8ucmVnaXN0ZXJUb29sLGw9ci5Ub29sVGVtcGxhdGUsYz1yLlJhbmdlVXRpbHMsZD1yLkNvbW1hbmQsdT1uLmtleXMsaD1cIiNrLWVkaXRvci1pbWFnZS11cmxcIixwPVwiI2stZWRpdG9yLWltYWdlLXRpdGxlXCIsZj1cIiNrLWVkaXRvci1pbWFnZS13aWR0aFwiLGc9XCIjay1lZGl0b3ItaW1hZ2UtaGVpZ2h0XCIsbT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO1xuZC5mbi5pbml0LmNhbGwodCxlKSx0LmFzeW5jPSEwLHQuYXR0cmlidXRlcz17fX0saW5zZXJ0SW1hZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMuYXR0cmlidXRlcyxyPWMuZG9jdW1lbnRGcm9tUmFuZ2UodCk7aWYoaS5zcmMmJlwiaHR0cDovL1wiIT1pLnNyYyl7aWYobj1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpLndpZHRofHxlLnJlbW92ZUF0dHJpYnV0ZShcIndpZHRoXCIpLGkuaGVpZ2h0fHxlLnJlbW92ZUF0dHJpYnV0ZShcImhlaWdodFwiKSxlLnJlbW92ZUF0dHJpYnV0ZShcImNvbXBsZXRlXCIpfSl9LCFlKXJldHVybiBlPWEuY3JlYXRlKHIsXCJpbWdcIixpKSxlLm9ubG9hZD1lLm9uZXJyb3I9ZnVuY3Rpb24oKXtuKCl9LHQuZGVsZXRlQ29udGVudHMoKSx0Lmluc2VydE5vZGUoZSksZS5uZXh0U2libGluZ3x8YS5pbnNlcnRBZnRlcihyLmNyZWF0ZVRleHROb2RlKFwi77u/XCIpLGUpLG4oKSx0LnNldFN0YXJ0QWZ0ZXIoZSksdC5zZXRFbmRBZnRlcihlKSxjLnNlbGVjdFJhbmdlKHQpLCEwO2EuYXR0cihlLGkpLG4oKX1yZXR1cm4hMX0sX2RpYWxvZ1RlbXBsYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBuLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1lZGl0b3ItZGlhbG9nIGstcG9wdXAtZWRpdC1mb3JtIGstZWRpdC1mb3JtLWNvbnRhaW5lclwiPiMgaWYgKHNob3dCcm93c2VyKSB7ICM8ZGl2IGNsYXNzPVwiay1maWxlYnJvd3NlciBrLWltYWdlYnJvd3NlclwiPjwvZGl2PiMgfSAjPGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWltYWdlLXVybFwiPiM6IG1lc3NhZ2VzLmltYWdlV2ViQWRkcmVzcyAjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1maWVsZFxcJz48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImstaW5wdXQgay10ZXh0Ym94XCIgaWQ9XCJrLWVkaXRvci1pbWFnZS11cmxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2UtdGl0bGVcIj4jOiBtZXNzYWdlcy5pbWFnZUFsdFRleHQgIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtZmllbGRcXCc+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJrLWlucHV0IGstdGV4dGJveFwiIGlkPVwiay1lZGl0b3ItaW1hZ2UtdGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVxcJ2stZWRpdC1sYWJlbFxcJz48bGFiZWwgZm9yPVwiay1lZGl0b3ItaW1hZ2Utd2lkdGhcIj4jOiBtZXNzYWdlcy5pbWFnZVdpZHRoICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWltYWdlLXdpZHRoXCI+PC9kaXY+PGRpdiBjbGFzcz1cXCdrLWVkaXQtbGFiZWxcXCc+PGxhYmVsIGZvcj1cImstZWRpdG9yLWltYWdlLWhlaWdodFwiPiM6IG1lc3NhZ2VzLmltYWdlSGVpZ2h0ICM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XFwnay1lZGl0LWZpZWxkXFwnPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiay1pbnB1dCBrLXRleHRib3hcIiBpZD1cImstZWRpdG9yLWltYWdlLWhlaWdodFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIj48YnV0dG9uIGNsYXNzPVwiay1kaWFsb2ctaW5zZXJ0IGstYnV0dG9uIGstcHJpbWFyeVwiPiM6IG1lc3NhZ2VzLmRpYWxvZ0luc2VydCAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImstZGlhbG9nLWNsb3NlIGstYnV0dG9uXCI+IzogbWVzc2FnZXMuZGlhbG9nQ2FuY2VsICM8L2J1dHRvbj48L2Rpdj48L2Rpdj4nKSh7bWVzc2FnZXM6dGhpcy5lZGl0b3Iub3B0aW9ucy5tZXNzYWdlcyxzaG93QnJvd3NlcjplfSl9LHJlZG86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5sb2NrUmFuZ2UoKTtlLmluc2VydEltYWdlKGMuaW1hZ2UodCksdCl8fGUucmVsZWFzZVJhbmdlKHQpfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1zLmVsZW1lbnQsbj1wYXJzZUludCh0LmZpbmQoZikudmFsKCksMTApLGk9cGFyc2VJbnQodC5maW5kKGcpLnZhbCgpLDEwKTtsLmF0dHJpYnV0ZXM9e3NyYzp0LmZpbmQoaCkudmFsKCkucmVwbGFjZSgvIC9nLFwiJTIwXCIpLGFsdDp0LmZpbmQocCkudmFsKCl9LGwuYXR0cmlidXRlcy53aWR0aD1udWxsLGwuYXR0cmlidXRlcy5oZWlnaHQ9bnVsbCwhaXNOYU4obikmJm4+MCYmKGwuYXR0cmlidXRlcy53aWR0aD1uKSwhaXNOYU4oaSkmJmk+MCYmKGwuYXR0cmlidXRlcy5oZWlnaHQ9aSksbT1sLmluc2VydEltYWdlKHYsZCkscihlKSxsLmNoYW5nZSYmbC5jaGFuZ2UoKX1mdW5jdGlvbiByKGUpe2UucHJldmVudERlZmF1bHQoKSxzLmRlc3Ryb3koKSxhLndpbmRvd0Zyb21Eb2N1bWVudChjLmRvY3VtZW50RnJvbVJhbmdlKGQpKS5mb2N1cygpLG18fGwucmVsZWFzZVJhbmdlKGQpfWZ1bmN0aW9uIG8odCl7dC5rZXlDb2RlPT11LkVOVEVSP2UodCk6dC5rZXlDb2RlPT11LkVTQyYmcih0KX12YXIgcyxsPXRoaXMsZD1sLmxvY2tSYW5nZSgpLG09ITEsdj1jLmltYWdlKGQpLF89diYmdi5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKXx8XCJcIix5PXYmJnYuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIlwiLHc9bC5lZGl0b3Iub3B0aW9ucyxiPXcubWVzc2FnZXMsaz13LmltYWdlQnJvd3Nlcix4PSEhKG4udWkuSW1hZ2VCcm93c2VyJiZrJiZrLnRyYW5zcG9ydCYmay50cmFuc3BvcnQucmVhZCE9PXQpLEM9e3RpdGxlOmIuaW5zZXJ0SW1hZ2UsdmlzaWJsZTohMSxyZXNpemFibGU6eH07Qy5jbG9zZT1yLHgmJihDLndpZHRoPTc1MCkscz10aGlzLmNyZWF0ZURpYWxvZyhsLl9kaWFsb2dUZW1wbGF0ZSh4KSxDKS50b2dnbGVDbGFzcyhcImstZmlsZWJyb3dzZXItZGlhbG9nXCIseCkuZmluZChcIi5rLWRpYWxvZy1pbnNlcnRcIikuY2xpY2soZSkuZW5kKCkuZmluZChcIi5rLWRpYWxvZy1jbG9zZVwiKS5jbGljayhyKS5lbmQoKS5maW5kKFwiLmstZWRpdC1maWVsZCBpbnB1dFwiKS5rZXlkb3duKG8pLmVuZCgpLmZpbmQoaCkudmFsKHY/di5nZXRBdHRyaWJ1dGUoXCJzcmNcIiwyKTpcImh0dHA6Ly9cIikuZW5kKCkuZmluZChwKS52YWwodj92LmFsdDpcIlwiKS5lbmQoKS5maW5kKGYpLnZhbChfKS5lbmQoKS5maW5kKGcpLnZhbCh5KS5lbmQoKS5kYXRhKFwia2VuZG9XaW5kb3dcIikseCYmbmV3IG4udWkuSW1hZ2VCcm93c2VyKHMuZWxlbWVudC5maW5kKFwiLmstaW1hZ2Vicm93c2VyXCIpLGkoe30sayx7Y2hhbmdlOmZ1bmN0aW9uKCl7cy5lbGVtZW50LmZpbmQoaCkudmFsKHRoaXMudmFsdWUoKSl9LGFwcGx5OmV9KSkscy5jZW50ZXIoKS5vcGVuKCkscy5lbGVtZW50LmZpbmQoaCkuZm9jdXMoKS5zZWxlY3QoKX19KTtuLnVpLmVkaXRvci5JbWFnZUNvbW1hbmQ9bSxzKFwiaW5zZXJ0SW1hZ2VcIixuZXcgci5Ub29sKHtjb21tYW5kOm0sdGVtcGxhdGU6bmV3IGwoe3RlbXBsYXRlOm8uYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJJbnNlcnQgSW1hZ2VcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe3ZhciBuPXdpbmRvdy5rZW5kbyxpPW4udWkuRHJvcERvd25MaXN0LHI9bi51aS5lZGl0b3IuRG9tLG89aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt2YXIgbz10aGlzO2kuZm4uaW5pdC5jYWxsKG8sdCxyKSxuLnN1cHBvcnQubW9iaWxlT1MuaW9zJiYodGhpcy5faW5pdFNlbGVjdE92ZXJsYXkoKSx0aGlzLmJpbmQoXCJkYXRhQm91bmRcIixlLnByb3h5KHRoaXMuX2luaXRTZWxlY3RPdmVybGF5LHRoaXMpKSksby52YWx1ZShvLm9wdGlvbnMudGl0bGUpLG8uYmluZChcIm9wZW5cIixmdW5jdGlvbigpe2lmKG8ub3B0aW9ucy5hdXRvU2l6ZSl7dmFyIGUsdD1vLmxpc3Q7dC5jc3Moe3doaXRlU3BhY2U6XCJub3dyYXBcIix3aWR0aDpcImF1dG9cIn0pLGU9dC53aWR0aCgpLGU/ZSs9MjA6ZT1vLl9saXN0V2lkdGgsdC5jc3MoXCJ3aWR0aFwiLGUrbi5zdXBwb3J0LnNjcm9sbGJhcigpKSxvLl9saXN0V2lkdGg9ZX19KX0sb3B0aW9uczp7bmFtZTpcIlNlbGVjdEJveFwifSxfaW5pdFNlbGVjdE92ZXJsYXk6ZnVuY3Rpb24oKXt2YXIgdCxpLHIsbyxhPXRoaXMscz1hLnZhbHVlKCksbD10aGlzLmRhdGFTb3VyY2UudmlldygpLGM9XCJcIixkPW4uaHRtbEVuY29kZTtmb3IoaT0wO2wubGVuZ3RoPmk7aSsrKXQ9bFtpXSxjKz1cIjxvcHRpb24gdmFsdWU9J1wiK2QodC52YWx1ZSkrXCInXCIsdC52YWx1ZT09cyYmKGMrPVwiIHNlbGVjdGVkXCIpLGMrPVwiPlwiK2QodC50ZXh0KStcIjwvb3B0aW9uPlwiO3I9ZShcIjxzZWxlY3QgY2xhc3M9J2stc2VsZWN0LW92ZXJsYXknPlwiK2MrXCI8L3NlbGVjdD5cIiksbz1lKHRoaXMuZWxlbWVudCkuY2xvc2VzdChcIi5rLXdpZGdldFwiKSxvLm5leHQoXCIuay1zZWxlY3Qtb3ZlcmxheVwiKS5yZW1vdmUoKSxyLmluc2VydEFmdGVyKG8pLHIub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EudmFsdWUodGhpcy52YWx1ZSksYS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMscj1pLmZuLnZhbHVlLmNhbGwobixlKTtyZXR1cm4gZT09PXQ/cjooZSE9PWkuZm4udmFsdWUuY2FsbChuKSYmKG4udGV4dChuLm9wdGlvbnMudGl0bGUpLG4uX2N1cnJlbnQmJm4uX2N1cnJlbnQucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLG4uY3VycmVudChudWxsKSxuLl9vbGRJbmRleD1uLnNlbGVjdGVkSW5kZXg9LTEpLHQpfSxkZWNvcmF0ZTpmdW5jdGlvbih0KXt2YXIgbixpLG8sYSxzPXRoaXMsbD1zLmRhdGFTb3VyY2UsYz1sLmRhdGEoKTtmb3IodCYmcy5saXN0LmNzcyhcImJhY2tncm91bmQtY29sb3JcIixyLmdldEVmZmVjdGl2ZUJhY2tncm91bmQoZSh0KSkpLG49MDtjLmxlbmd0aD5uO24rKylpPWNbbl0udGFnfHxcInNwYW5cIixvPWNbbl0uY2xhc3NOYW1lLGE9ci5pbmxpbmVTdHlsZSh0LGkse2NsYXNzTmFtZTpvfSksYT1hLnJlcGxhY2UoL1wiL2csXCInXCIpLGNbbl0uc3R5bGU9YStcIjtkaXNwbGF5OmlubGluZS1ibG9ja1wiO2wudHJpZ2dlcihcImNoYW5nZVwiKX19KTtuLnVpLnBsdWdpbihvKSxuLnVpLmVkaXRvci5TZWxlY3RCb3g9b30od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKG4saSl7dmFyIHI9XCJydGxcIj09ZShuKS5jc3MoXCJkaXJlY3Rpb25cIiksbz1yP1wiUmlnaHRcIjpcIkxlZnRcIixhPVwidGRcIiE9cy5uYW1lKG4pP1wibWFyZ2luXCIrbzpcInBhZGRpbmdcIitvO3JldHVybiBpPT09dD9uLnN0eWxlW2FdfHwwOihpPjA/bi5zdHlsZVthXT1pK1wicHhcIjoobi5zdHlsZVthXT1cIlwiLG4uc3R5bGUuY3NzVGV4dHx8bi5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSksdCl9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5DbGFzcyxvPWUuZXh0ZW5kLGE9aS51aS5lZGl0b3Iscz1hLkRvbSxsPWEuRWRpdG9yVXRpbHMsYz1sLnJlZ2lzdGVyVG9vbCxkPWEuQ29tbWFuZCx1PWEuVG9vbCxoPWEuVG9vbFRlbXBsYXRlLHA9YS5SYW5nZVV0aWxzLGY9cy5ibG9ja0VsZW1lbnRzLGc9YS5CbG9ja0Zvcm1hdEZpbmRlcixtPWEuQmxvY2tGb3JtYXR0ZXIsdj1yLmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMuZmluZGVyPW5ldyBnKFt7dGFnczpzLmJsb2NrRWxlbWVudHN9XSl9LGFwcGx5OmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhLGwsYyxkLHUsaCxwLGY9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKHQpLGc9W107aWYoZi5sZW5ndGgpe2ZvcihpPTAscj1mLmxlbmd0aDtyPmk7aSsrKXMuaXMoZltpXSxcImxpXCIpP2UoZltpXSkuaW5kZXgoKT9lLmluQXJyYXkoZltpXS5wYXJlbnROb2RlLGcpPDAmJmcucHVzaChmW2ldKTpnLnB1c2goZltpXS5wYXJlbnROb2RlKTpnLnB1c2goZltpXSk7Zm9yKDtnLmxlbmd0aDspaWYobz1nLnNoaWZ0KCkscy5pcyhvLFwibGlcIikpaWYoYT1vLnBhcmVudE5vZGUsbD1lKG8pLnByZXYoXCJsaVwiKSxjPWwuZmluZChcInVsLG9sXCIpLmxhc3QoKSxkPWUobykuY2hpbGRyZW4oXCJ1bCxvbFwiKVswXSxkJiZsWzBdKWNbMF0/KGMuYXBwZW5kKG8pLGMuYXBwZW5kKGUoZCkuY2hpbGRyZW4oKSkscy5yZW1vdmUoZCkpOihsLmFwcGVuZChkKSxkLmluc2VydEJlZm9yZShvLGQuZmlyc3RDaGlsZCkpO2Vsc2UgZm9yKGQ9bC5jaGlsZHJlbihcInVsLG9sXCIpWzBdLGR8fChkPXMuY3JlYXRlKG8ub3duZXJEb2N1bWVudCxzLm5hbWUoYSkpLGwuYXBwZW5kKGQpKTtvJiZvLnBhcmVudE5vZGU9PWE7KWQuYXBwZW5kQ2hpbGQobyksbz1nLnNoaWZ0KCk7ZWxzZSBmb3IodT1wYXJzZUludChuKG8pLDEwKSszMCxuKG8sdSksaD0wO2cubGVuZ3RoPmg7aCsrKWUuY29udGFpbnMobyxnW2hdKSYmZy5zcGxpY2UoaCwxKX1lbHNlIHA9bmV3IG0oW3t0YWdzOltcInBcIl19XSx7c3R5bGU6e21hcmdpbkxlZnQ6MzB9fSkscC5hcHBseSh0KX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbyxhLHMsbCxjLGQsdT10aGlzLmZpbmRlci5maW5kU3VpdGFibGUodCk7Zm9yKHI9MCxvPXUubGVuZ3RoO28+cjtyKyspe2lmKGM9ZSh1W3JdKSxjLmlzKFwibGlcIikpe2lmKGE9Yy5wYXJlbnQoKSxzPWEucGFyZW50KCkscy5pcyhcImxpLHVsLG9sXCIpJiYhbihhWzBdKSl7aWYoaSYmZS5jb250YWlucyhpLHNbMF0pKWNvbnRpbnVlO2w9Yy5uZXh0QWxsKFwibGlcIiksbC5sZW5ndGgmJmUoYVswXS5jbG9uZU5vZGUoITEpKS5hcHBlbmRUbyhjKS5hcHBlbmQobCkscy5pcyhcImxpXCIpP2MuaW5zZXJ0QWZ0ZXIocyk6Yy5hcHBlbmRUbyhzKSxhLmNoaWxkcmVuKFwibGlcIikubGVuZ3RofHxhLnJlbW92ZSgpO2NvbnRpbnVlfWlmKGk9PWFbMF0pY29udGludWU7aT1hWzBdfWVsc2UgaT11W3JdO2Q9cGFyc2VJbnQobihpKSwxMCktMzAsbihpLGQpfX19KSxfPWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe2UuZm9ybWF0dGVyPXt0b2dnbGU6ZnVuY3Rpb24oZSl7KG5ldyB2KS5hcHBseShwLm5vZGVzKGUpKX19LGQuZm4uaW5pdC5jYWxsKHRoaXMsZSl9fSkseT1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtlLmZvcm1hdHRlcj17dG9nZ2xlOmZ1bmN0aW9uKGUpeyhuZXcgdikucmVtb3ZlKHAubm9kZXMoZSkpfX0sZC5mbi5pbml0LmNhbGwodGhpcyxlKX19KSx3PXUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3UuZm4uaW5pdC5jYWxsKHRoaXMsZSksdGhpcy5maW5kZXI9bmV3IGcoW3t0YWdzOmZ9XSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt1LmZuLmluaXRpYWxpemUuY2FsbCh0aGlzLGUsdCksZS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHVwZGF0ZTpmdW5jdGlvbihpLHIpe3ZhciBvLGEsbCxjLGQ9dGhpcy5maW5kZXIuZmluZFN1aXRhYmxlKHIpO2ZvcihsPTAsYz1kLmxlbmd0aDtjPmw7bCsrKWlmKG89bihkW2xdKSxvfHwoYT1lKGRbbF0pLnBhcmVudHMoXCJ1bCxvbFwiKS5sZW5ndGgsbz1zLmlzKGRbbF0sXCJsaVwiKSYmKGE+MXx8bihkW2xdLnBhcmVudE5vZGUpKXx8cy5vZlR5cGUoZFtsXSxbXCJ1bFwiLFwib2xcIl0pJiZhPjApLG8pcmV0dXJuIGkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLHQ7aS5hZGRDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfX0pO28oYSx7SW5kZW50Rm9ybWF0dGVyOnYsSW5kZW50Q29tbWFuZDpfLE91dGRlbnRDb21tYW5kOnksT3V0ZGVudFRvb2w6d30pLGMoXCJpbmRlbnRcIixuZXcgdSh7Y29tbWFuZDpfLHRlbXBsYXRlOm5ldyBoKHt0ZW1wbGF0ZTpsLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiSW5kZW50XCJ9KX0pKSxjKFwib3V0ZGVudFwiLG5ldyB3KHtjb21tYW5kOnksdGVtcGxhdGU6bmV3IGgoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJPdXRkZW50XCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49ZS5leHRlbmQsaT10LnVpLmVkaXRvcixyPWkuRWRpdG9yVXRpbHMsbz1pLkNvbW1hbmQsYT1pLlRvb2wscz1pLlRvb2xUZW1wbGF0ZSxsPW8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5vcHRpb25zPWUsby5mbi5pbml0LmNhbGwodCxlKSx0LmF0dHJpYnV0ZXM9bnVsbCx0LmFzeW5jPSEwfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihlKXtvLnZhbHVlKHMuZmluZChkKS52YWwoKSksaShlKSxyLmNoYW5nZSYmci5jaGFuZ2UoKSxvLnRyaWdnZXIoXCJjaGFuZ2VcIil9ZnVuY3Rpb24gaShlKXtlLnByZXZlbnREZWZhdWx0KCkscy5kYXRhKFwia2VuZG9XaW5kb3dcIikuZGVzdHJveSgpLG8uZm9jdXMoKX12YXIgcj10aGlzLG89ci5lZGl0b3IsYT1vLm9wdGlvbnMubWVzc2FnZXMscz1lKHQudGVtcGxhdGUobC50ZW1wbGF0ZSkoYSkpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLGM9bC5pbmRlbnQoby52YWx1ZSgpKSxkPVwiLmstZWRpdG9yLXRleHRhcmVhXCI7dGhpcy5jcmVhdGVEaWFsb2cocyx7dGl0bGU6YS52aWV3SHRtbCxjbG9zZTppLHZpc2libGU6ITF9KS5maW5kKGQpLnZhbChjKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLXVwZGF0ZVwiKS5jbGljayhuKS5lbmQoKS5maW5kKFwiLmstZGlhbG9nLWNsb3NlXCIpLmNsaWNrKGkpLmVuZCgpLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCkscy5maW5kKGQpLmZvY3VzKCl9fSk7bihsLHt0ZW1wbGF0ZTpcIjxkaXYgY2xhc3M9J2stZWRpdG9yLWRpYWxvZyBrLXBvcHVwLWVkaXQtZm9ybSBrLWVkaXQtZm9ybS1jb250YWluZXIgay12aWV3aHRtbC1kaWFsb2cnPjx0ZXh0YXJlYSBjbGFzcz0nay1lZGl0b3ItdGV4dGFyZWEgay1pbnB1dCc+PC90ZXh0YXJlYT48ZGl2IGNsYXNzPSdrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHQnPjxidXR0b24gY2xhc3M9J2stZGlhbG9nLXVwZGF0ZSBrLWJ1dHRvbiBrLXByaW1hcnknPiM6IGRpYWxvZ1VwZGF0ZSAjPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0nay1kaWFsb2ctY2xvc2Ugay1idXR0b24nPiM6IGRpYWxvZ0NhbmNlbCAjPC9idXR0b24+PC9kaXY+PC9kaXY+XCIsaW5kZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLzxcXC8ocHxsaXx1bHxvbHxoWzEtNl18dGFibGV8dHJ8dGR8dGgpPi9naSxcIjwvJDE+XFxuXCIpLnJlcGxhY2UoLzwodWx8b2wpKFtePl0qKT48bGkvZ2ksXCI8JDEkMj5cXG48bGlcIikucmVwbGFjZSgvPGJyIFxcLz4vZ2ksXCI8YnIgLz5cXG5cIikucmVwbGFjZSgvXFxuJC8sXCJcIil9fSksdC51aS5lZGl0b3IuVmlld0h0bWxDb21tYW5kPWwsaS5FZGl0b3JVdGlscy5yZWdpc3RlclRvb2woXCJ2aWV3SHRtbFwiLG5ldyBhKHtjb21tYW5kOmwsdGVtcGxhdGU6bmV3IHMoe3RlbXBsYXRlOnIuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJWaWV3IEhUTUxcIn0pfSkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj10LnVpLmVkaXRvcixpPW4uVG9vbCxyPW4uVG9vbFRlbXBsYXRlLG89bi5EZWxheWVkRXhlY3V0aW9uVG9vbCxhPW4uQ29tbWFuZCxzPW4uRG9tLGw9bi5FZGl0b3JVdGlscyxjPW4uUmFuZ2VVdGlscyxkPWwucmVnaXN0ZXJUb29sLHU9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztpLmZuLmluaXQuY2FsbChuLHQuZGVlcEV4dGVuZCh7fSxuLm9wdGlvbnMsZSkpLG4udHlwZT1cImtlbmRvU2VsZWN0Qm94XCIsbi5maW5kZXI9e2dldEZvcm1hdDpmdW5jdGlvbigpe3JldHVyblwiXCJ9fX0sb3B0aW9uczp7aXRlbXM6W3t0ZXh0OlwiUGFyYWdyYXBoXCIsdmFsdWU6XCJwXCJ9LHt0ZXh0OlwiUXVvdGF0aW9uXCIsdmFsdWU6XCJibG9ja3F1b3RlXCJ9LHt0ZXh0OlwiSGVhZGluZyAxXCIsdmFsdWU6XCJoMVwifSx7dGV4dDpcIkhlYWRpbmcgMlwiLHZhbHVlOlwiaDJcIn0se3RleHQ6XCJIZWFkaW5nIDNcIix2YWx1ZTpcImgzXCJ9LHt0ZXh0OlwiSGVhZGluZyA0XCIsdmFsdWU6XCJoNFwifSx7dGV4dDpcIkhlYWRpbmcgNVwiLHZhbHVlOlwiaDVcIn0se3RleHQ6XCJIZWFkaW5nIDZcIix2YWx1ZTpcImg2XCJ9XSx3aWR0aDoxMTB9LHRvRm9ybWF0dGluZ0l0ZW06ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnZhbHVlO3JldHVybiBuP2UudGFnfHxlLmNsYXNzTmFtZT9lOih0PW4uaW5kZXhPZihcIi5cIiksMD09PXQ/ZS5jbGFzc05hbWU9bi5zdWJzdHJpbmcoMSk6LTE9PXQ/ZS50YWc9bjooZS50YWc9bi5zdWJzdHJpbmcoMCx0KSxlLmNsYXNzTmFtZT1uLnN1YnN0cmluZyh0KzEpKSxlKTplfSxjb21tYW5kOmZ1bmN0aW9uKHQpe3ZhciBpPXQudmFsdWU7cmV0dXJuIGk9dGhpcy50b0Zvcm1hdHRpbmdJdGVtKGkpLG5ldyBuLkZvcm1hdENvbW1hbmQoe3JhbmdlOnQucmFuZ2UsZm9ybWF0dGVyOmZ1bmN0aW9uKCl7dmFyIHQscj0oaS50YWd8fGkuY29udGV4dHx8XCJzcGFuXCIpLnNwbGl0KFwiLFwiKSxvPVt7dGFnczpyLGF0dHI6e2NsYXNzTmFtZTppLmNsYXNzTmFtZXx8XCJcIn19XTtyZXR1cm4gdD1lLmluQXJyYXkoclswXSxzLmlubGluZUVsZW1lbnRzKT49MD9uZXcgbi5HcmVlZHlJbmxpbmVGb3JtYXR0ZXIobyk6bmV3IG4uR3JlZWR5QmxvY2tGb3JtYXR0ZXIobyl9fSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmVkaXRvcixvPXRoaXMub3B0aW9ucyxhPW8ubmFtZSxzPXRoaXM7ZS53aWR0aChvLndpZHRoKSxlLmtlbmRvU2VsZWN0Qm94KHtkYXRhVGV4dEZpZWxkOlwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOlwidmFsdWVcIixkYXRhU291cmNlOm8uaXRlbXN8fHIub3B0aW9uc1thXSx0aXRsZTpyLm9wdGlvbnMubWVzc2FnZXNbYV0sYXV0b1NpemU6ITAsY2hhbmdlOmZ1bmN0aW9uKCl7aS5leGVjKHIsYSx0aGlzLmRhdGFJdGVtKCkudG9KU09OKCkpfSxkYXRhQm91bmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZGF0YVNvdXJjZS5kYXRhKCk7Zm9yKGU9MDt0Lmxlbmd0aD5lO2UrKyl0W2VdPXMudG9Gb3JtYXR0aW5nSXRlbSh0W2VdKX0saGlnaGxpZ2h0Rmlyc3Q6ITEsdGVtcGxhdGU6dC50ZW1wbGF0ZSgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBzdHlsZT1cImRpc3BsYXk6YmxvY2s7Iz0oZGF0YS5zdHlsZXx8XCJcIikjXCI+IzpkYXRhLnRleHQjPC9zcGFuPicpfSksZS5hZGRDbGFzcyhcImstZGVjb3JhdGVkXCIpLmNsb3Nlc3QoXCIuay13aWRnZXRcIikucmVtb3ZlQ2xhc3MoXCJrLVwiK2EpLmZpbmQoXCIqXCIpLmFkZEJhY2soKS5hdHRyKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKX0sZ2V0Rm9ybWF0dGluZ1ZhbHVlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGM7Zm9yKGk9MDt0Lmxlbmd0aD5pO2krKylpZihyPXRbaV0sbz1yLnRhZ3x8ci5jb250ZXh0fHxcIlwiLGE9ci5jbGFzc05hbWU/XCIuXCIrci5jbGFzc05hbWU6XCJcIixzPW8rYSxsPWUoblswXSkuY2xvc2VzdChzKVswXSl7aWYoMT09bi5sZW5ndGgpcmV0dXJuIHIudmFsdWU7Zm9yKGM9MTtuLmxlbmd0aD5jJiZlKG5bY10pLmNsb3Nlc3QocylbMF07YysrKWlmKGM9PW4ubGVuZ3RoLTEpcmV0dXJuIHIudmFsdWV9cmV0dXJuXCJcIn0sdXBkYXRlOmZ1bmN0aW9uKHQsbil7dmFyIGkscixhLGwsYyxkPWUodCkuZGF0YSh0aGlzLnR5cGUpO2lmKGQpe2ZvcihpPWQuZGF0YVNvdXJjZSxyPWkuZGF0YSgpLGM9cy5jb21tb25BbmNlc3Rvci5hcHBseShudWxsLG4pLGE9MDtyLmxlbmd0aD5hO2ErKylsPXJbYV0uY29udGV4dCxyW2FdLnZpc2libGU9IWx8fCEhZShjKS5jbG9zZXN0KGwpLmxlbmd0aDtpLmZpbHRlcihbe2ZpZWxkOlwidmlzaWJsZVwiLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTohMH1dKSxvLmZuLnVwZGF0ZS5jYWxsKHRoaXMsdCxuKSxkLnZhbHVlKHRoaXMuZ2V0Rm9ybWF0dGluZ1ZhbHVlKGkudmlldygpLG4pKSxkLndyYXBwZXIudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsIWkudmlldygpLmxlbmd0aCl9fX0pLGg9YS5leHRlbmQoe2V4ZWM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMubG9ja1JhbmdlKCEwKSxpPXRoaXMub3B0aW9ucy5yZW1vdmV8fFwic3Ryb25nLGVtLHNwYW5cIi5zcGxpdChcIixcIik7Yy53cmFwU2VsZWN0ZWRFbGVtZW50cyh0KSxlPW5ldyBuLlJhbmdlSXRlcmF0b3IodCksZS50cmF2ZXJzZShmdW5jdGlvbiByKGUpe2lmKGUmJiFzLmlzTWFya2VyKGUpKXtpZigxPT1lLm5vZGVUeXBlJiYhcy5pbnNpZ25pZmljYW50KGUpKXtmb3IodmFyIHQ9ZS5jaGlsZE5vZGVzLmxlbmd0aC0xO3Q+PTA7dC0tKXIoZS5jaGlsZE5vZGVzW3RdKTtlLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpLGUucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIil9aS5pbmRleE9mKHMubmFtZShlKSk+LTEmJnMudW53cmFwKGUpfX0pLHRoaXMucmVsZWFzZVJhbmdlKHQpfX0pO2UuZXh0ZW5kKG4se0Zvcm1hdHRpbmdUb29sOnUsQ2xlYW5Gb3JtYXRDb21tYW5kOmh9KSxkKFwiZm9ybWF0dGluZ1wiLG5ldyB1KHt0ZW1wbGF0ZTpuZXcgcih7dGVtcGxhdGU6bC5kcm9wRG93bkxpc3RUZW1wbGF0ZSx0aXRsZTpcIkZvcm1hdFwifSl9KSksZChcImNsZWFuRm9ybWF0dGluZ1wiLG5ldyBpKHtjb21tYW5kOmgsdGVtcGxhdGU6bmV3IHIoe3RlbXBsYXRlOmwuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJDbGVhbiBmb3JtYXR0aW5nXCJ9KX0pKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC51aSxpPW4uZWRpdG9yLHI9bi5XaWRnZXQsbz1lLmV4dGVuZCxhPWUucHJveHkscz10LmtleXMsbD1cIi5rZW5kb0VkaXRvclwiLGM9XCJhLmstdG9vbDpub3QoLmstc3RhdGUtZGlzYWJsZWQpLC5rLXdpZGdldC5rLWNvbG9ycGlja2VyLC5rLXNlbGVjdGJveCwuay1kcm9wZG93biwuay1jb21ib2JveCAuay1pbnB1dFwiLGQ9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3Q9byh7fSx0LHtuYW1lOlwiRWRpdG9yVG9vbGJhclwifSksci5mbi5pbml0LmNhbGwobixlLHQpLHQucG9wdXAmJm4uX2luaXRQb3B1cCgpfSxldmVudHM6W1wiZXhlY3V0ZVwiXSxncm91cHM6e2Jhc2ljOltcImJvbGRcIixcIml0YWxpY1wiLFwidW5kZXJsaW5lXCIsXCJzdHJpa2V0aHJvdWdoXCJdLHNjcmlwdHM6W1wic3Vic2NyaXB0XCIsXCJzdXBlcnNjcmlwdFwiXSxhbGlnbm1lbnQ6W1wianVzdGlmeUxlZnRcIixcImp1c3RpZnlDZW50ZXJcIixcImp1c3RpZnlSaWdodFwiLFwianVzdGlmeUZ1bGxcIl0sbGlua3M6W1wiaW5zZXJ0SW1hZ2VcIixcImluc2VydEZpbGVcIixcImNyZWF0ZUxpbmtcIixcInVubGlua1wiXSxsaXN0czpbXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIsXCJpbnNlcnRPcmRlcmVkTGlzdFwiLFwiaW5kZW50XCIsXCJvdXRkZW50XCJdLHRhYmxlczpbXCJjcmVhdGVUYWJsZVwiLFwiYWRkQ29sdW1uTGVmdFwiLFwiYWRkQ29sdW1uUmlnaHRcIixcImFkZFJvd0Fib3ZlXCIsXCJhZGRSb3dCZWxvd1wiLFwiZGVsZXRlUm93XCIsXCJkZWxldGVDb2x1bW5cIl0sYWR2YW5jZWQ6W1widmlld0h0bWxcIixcImNsZWFuRm9ybWF0dGluZ1wiXX0sX2luaXRQb3B1cDpmdW5jdGlvbigpe3RoaXMud2luZG93PWUodGhpcy5lbGVtZW50KS53cmFwKFwiPGRpdiBjbGFzcz0nZWRpdG9yVG9vbGJhcldpbmRvdyBrLWhlYWRlcicgLz5cIikucGFyZW50KCkucHJlcGVuZChcIjxidXR0b24gY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLWJhcmUgay1lZGl0b3J0b29sYmFyLWRyYWdIYW5kbGUnPjxzcGFuIGNsYXNzPSdrLWljb24gay1pLW1vdmUnIC8+PC9idXR0b24+XCIpLmtlbmRvV2luZG93KHt0aXRsZTohMSxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOntkcmFnSGFuZGxlOlwiLmstZWRpdG9ydG9vbGJhci1kcmFnSGFuZGxlXCJ9LGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcImZhZGU6aW5cIn0sY2xvc2U6e2VmZmVjdHM6XCJmYWRlOm91dFwifX0sbWluSGVpZ2h0OjQyLHZpc2libGU6ITEsYXV0b0ZvY3VzOiExLGFjdGlvbnM6W10sZHJhZ2VuZDpmdW5jdGlvbigpe3RoaXMuX21vdmVkPSEwfX0pLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuaXMoXCIuay1pY29uXCIpfHx0LnByZXZlbnREZWZhdWx0KCl9KS5kYXRhKFwia2VuZG9XaW5kb3dcIil9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLmZpbmQoXCI+ICosIHNlbGVjdFwiKX0sZm9jdXNlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuZmluZChcIi5rLXN0YXRlLWZvY3VzZWRcIikubGVuZ3RoPjB9LHRvb2xCeUlkOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy50b29scztmb3IodCBpbiBuKWlmKHQudG9Mb3dlckNhc2UoKT09ZSlyZXR1cm4gblt0XX0sdG9vbEdyb3VwRm9yOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcy5ncm91cHM7aWYodGhpcy5pc0N1c3RvbVRvb2wodCkpcmV0dXJuXCJjdXN0b21cIjtmb3IobiBpbiBpKWlmKGUuaW5BcnJheSh0LGlbbl0pPj0wKXJldHVybiBufSxiaW5kVG86ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPW4ud2luZG93O24uX2VkaXRvciYmbi5fZWRpdG9yLnVuYmluZChcInNlbGVjdFwiLGEobi5yZWZyZXNoVG9vbHMsbikpLG4uX2VkaXRvcj10LG4udG9vbHM9bi5leHBhbmRUb29scyh0Lm9wdGlvbnMudG9vbHMpLG4ucmVuZGVyKCksbi5lbGVtZW50LmZpbmQoXCIuay1jb21ib2JveCAuay1pbnB1dFwiKS5rZXlkb3duKGZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcykuY2xvc2VzdChcIi5rLWNvbWJvYm94XCIpLmRhdGEoXCJrZW5kb0NvbWJvQm94XCIpLGk9dC5rZXlDb2RlO2k9PXMuUklHSFR8fGk9PXMuTEVGVD9uLmNsb3NlKCk6aT09cy5ET1dOJiYobi5kcm9wRG93bi5pc09wZW5lZCgpfHwodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxuLm9wZW4oKSkpfSksbi5fYXR0YWNoRXZlbnRzKCksbi5pdGVtcygpLmVhY2goZnVuY3Rpb24oKXt2YXIgaSxyPW4uX3Rvb2xOYW1lKHRoaXMpLG89bi50b29sc1tyXSxhPW8mJm8ub3B0aW9ucyxzPXQub3B0aW9ucy5tZXNzYWdlcyxsPWEmJmEudG9vbHRpcHx8c1tyXSxjPWUodGhpcyk7byYmby5pbml0aWFsaXplJiYoKFwiZm9udFNpemVcIj09cnx8XCJmb250TmFtZVwiPT1yKSYmKGk9c1tyK1wiSW5oZXJpdFwiXSxjLmZpbmQoXCJpbnB1dFwiKS52YWwoaSkuZW5kKCkuZmluZChcInNwYW4uay1pbnB1dFwiKS50ZXh0KGkpLmVuZCgpKSxvLmluaXRpYWxpemUoYyx7dGl0bGU6bi5fYXBwZW5kU2hvcnRjdXRTZXF1ZW5jZShsLG8pLGVkaXRvcjpuLl9lZGl0b3J9KSxjLmNsb3Nlc3QoXCIuay13aWRnZXRcIixuLmVsZW1lbnQpLmFkZENsYXNzKFwiay1lZGl0b3Itd2lkZ2V0XCIpLGMuY2xvc2VzdChcIi5rLWNvbG9ycGlja2VyXCIsbi5lbGVtZW50KS5uZXh0KFwiLmstY29sb3JwaWNrZXJcIikuYWRkQ2xhc3MoXCJrLWVkaXRvci13aWRnZXRcIikpfSksdC5iaW5kKFwic2VsZWN0XCIsYShuLnJlZnJlc2hUb29scyxuKSksbi51cGRhdGUoKSxpJiZpLndyYXBwZXIuY3NzKHt0b3A6XCJcIixsZWZ0OlwiXCIsd2lkdGg6XCJcIn0pfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcyxyPWkud2luZG93LG89aS5vcHRpb25zLmVkaXRvcjtyJiYoZT1yLndyYXBwZXIsdD1vLmVsZW1lbnQsZS5pcyhcIjp2aXNpYmxlXCIpJiZpLndpbmRvdy5vcHRpb25zLnZpc2libGV8fChlWzBdLnN0eWxlLndpZHRofHxlLndpZHRoKHQub3V0ZXJXaWR0aCgpLXBhcnNlSW50KGUuY3NzKFwiYm9yZGVyLWxlZnQtd2lkdGhcIiksMTApLXBhcnNlSW50KGUuY3NzKFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIpLDEwKSksci5fbW92ZWR8fChuPXQub2Zmc2V0KCksZS5jc3Moe3RvcDpNYXRoLm1heCgwLHBhcnNlSW50KG4udG9wLDEwKS1lLm91dGVySGVpZ2h0KCktcGFyc2VJbnQoaS53aW5kb3cuZWxlbWVudC5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSwxMCkpLGxlZnQ6TWF0aC5tYXgoMCxwYXJzZUludChuLmxlZnQsMTApKX0pKSxyLm9wZW4oKSkpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cmJnRoaXMud2luZG93LmNsb3NlKCl9LGZvY3VzOmZ1bmN0aW9uKCl7dmFyIGU9XCJ0YWJJbmRleFwiLHQ9dGhpcy5lbGVtZW50LG49dGhpcy5fZWRpdG9yLmVsZW1lbnQuYXR0cihlKTt0LmF0dHIoZSxufHwwKS5mb2N1cygpLmZpbmQoYykuZmlyc3QoKS5mb2N1cygpLG58fDA9PT1ufHx0LnJlbW92ZUF0dHIoZSl9LF9hcHBlbmRTaG9ydGN1dFNlcXVlbmNlOmZ1bmN0aW9uKGUsdCl7aWYoIXQua2V5KXJldHVybiBlO3ZhciBuPWUrXCIgKFwiO3JldHVybiB0LmN0cmwmJihuKz1cIkN0cmwgKyBcIiksdC5zaGlmdCYmKG4rPVwiU2hpZnQgKyBcIiksdC5hbHQmJihuKz1cIkFsdCArIFwiKSxuKz10LmtleStcIilcIn0sX25hdGl2ZVRvb2xzOltcImluc2VydExpbmVCcmVha1wiLFwiaW5zZXJ0UGFyYWdyYXBoXCIsXCJyZWRvXCIsXCJ1bmRvXCJdLHRvb2xzOnt9LGlzQ3VzdG9tVG9vbDpmdW5jdGlvbihlKXtyZXR1cm4hKGUgaW4gdC51aS5FZGl0b3IuZGVmYXVsdFRvb2xzKX0sZXhwYW5kVG9vbHM6ZnVuY3Rpb24obil7dmFyIHIsYSxzLGwsYz10aGlzLl9uYXRpdmVUb29scyxkPXQuZGVlcEV4dGVuZCh7fSx0LnVpLkVkaXRvci5kZWZhdWx0VG9vbHMpLHU9e307Zm9yKGE9MDtuLmxlbmd0aD5hO2ErKylyPW5bYV0sbD1yLm5hbWUsZS5pc1BsYWluT2JqZWN0KHIpP2wmJmRbbF0/KHVbbF09byh7fSxkW2xdKSxvKHVbbF0ub3B0aW9ucyxyKSk6KHM9byh7Y3NzQ2xhc3M6XCJrLWktY3VzdG9tXCIsdHlwZTpcImJ1dHRvblwiLHRpdGxlOlwiXCJ9LHIpLHMubmFtZXx8KHMubmFtZT1cImN1c3RvbVwiKSxzLmNzc0NsYXNzPVwiay1cIisoXCJjdXN0b21cIj09cy5uYW1lP1wiaS1jdXN0b21cIjpzLm5hbWUpLHMudGVtcGxhdGV8fFwiYnV0dG9uXCIhPXMudHlwZXx8KHMudGVtcGxhdGU9aS5FZGl0b3JVdGlscy5idXR0b25UZW1wbGF0ZSxzLnRpdGxlPXMudGl0bGV8fHMudG9vbHRpcCksdVtsXT17b3B0aW9uczpzfSk6ZFtyXSYmKHVbcl09ZFtyXSk7Zm9yKGE9MDtjLmxlbmd0aD5hO2ErKyl1W2NbYV1dfHwodVtjW2FdXT1kW2NbYV1dKTtyZXR1cm4gdX0scmVuZGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXt2YXIgaTtyZXR1cm4gbi5nZXRIdG1sP2k9bi5nZXRIdG1sKCk6KGUuaXNGdW5jdGlvbihuKXx8KG49dC50ZW1wbGF0ZShuKSksaT1uKG8pKSxlLnRyaW0oaSl9ZnVuY3Rpb24gaSgpe2guY2hpbGRyZW4oKS5sZW5ndGgmJmguYXBwZW5kVG8odil9ZnVuY3Rpb24gcigpe2g9ZShcIjxsaSBjbGFzcz0nay10b29sLWdyb3VwJyByb2xlPSdwcmVzZW50YXRpb24nIC8+XCIpfXZhciBvLHMsbCxjLGQsdSxoLHAsZj10aGlzLGc9Zi50b29scyxtPWYuX2VkaXRvci5lbGVtZW50LHY9Zi5lbGVtZW50LmVtcHR5KCksXz1mLl9lZGl0b3Iub3B0aW9ucy50b29scyx5PXQuc3VwcG9ydC5icm93c2VyO2Zvcih2LmVtcHR5KCkscigpLHA9MDtfLmxlbmd0aD5wO3ArKyljPV9bcF0ubmFtZXx8X1twXSxvPWdbY10mJmdbY10ub3B0aW9ucywhbyYmZS5pc1BsYWluT2JqZWN0KGMpJiYobz1jKSxzPW8mJm8udGVtcGxhdGUsXCJicmVha1wiPT1jJiYoaSgpLGUoXCI8bGkgY2xhc3M9J2stcm93LWJyZWFrJyAvPlwiKS5hcHBlbmRUbyhmLmVsZW1lbnQpLHIoKSkscyYmKHU9Zi50b29sR3JvdXBGb3IoYyksZCE9dSYmKGkoKSxyKCksZD11KSxzPW4ocyksbD1lKHMpLmFwcGVuZFRvKGgpLFwiY3VzdG9tXCI9PXUmJihpKCkscigpKSxvLmV4ZWMmJmwuaGFzQ2xhc3MoXCJrLXRvb2xcIikmJmwuY2xpY2soYShvLmV4ZWMsbVswXSkpKTtpKCksZShmLmVsZW1lbnQpLmNoaWxkcmVuKFwiOmhhcyg+IC5rLXRvb2wpXCIpLmFkZENsYXNzKFwiay1idXR0b24tZ3JvdXBcIiksZi5vcHRpb25zLnBvcHVwJiZ5Lm1zaWUmJjk+eS52ZXJzaW9uJiZmLndpbmRvdy53cmFwcGVyLmZpbmQoXCIqXCIpLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpLGYudXBkYXRlR3JvdXBzKCksZi5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmYuZWxlbWVudH19KX0sdXBkYXRlR3JvdXBzOmZ1bmN0aW9uKCl7ZSh0aGlzLmVsZW1lbnQpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2UodGhpcykuY2hpbGRyZW4oKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX0pLnJlbW92ZUNsYXNzKFwiay1ncm91cC1lbmRcIikuZmlyc3QoKS5hZGRDbGFzcyhcImstZ3JvdXAtc3RhcnRcIikuZW5kKCkubGFzdCgpLmFkZENsYXNzKFwiay1ncm91cC1lbmRcIikuZW5kKCl9KX0sZGVjb3JhdGVGcm9tOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbXMoKS5maWx0ZXIoXCIuay1kZWNvcmF0ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcykuZGF0YShcImtlbmRvU2VsZWN0Qm94XCIpO24mJm4uZGVjb3JhdGUodCl9KX0sZGVzdHJveTpmdW5jdGlvbigpe3IuZm4uZGVzdHJveS5jYWxsKHRoaXMpO3ZhciBlLHQ9dGhpcy50b29scztmb3IoZSBpbiB0KXRbZV0uZGVzdHJveSYmdFtlXS5kZXN0cm95KCk7dGhpcy53aW5kb3cmJnRoaXMud2luZG93LmRlc3Ryb3koKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1cIltyb2xlPWJ1dHRvbl0uay10b29sXCIsaT1uK1wiOm5vdCguay1zdGF0ZS1kaXNhYmxlZClcIixyPW4rXCIuay1zdGF0ZS1kaXNhYmxlZFwiO3QuZWxlbWVudC5vZmYobCkub24oXCJtb3VzZWVudGVyXCIrbCxpLGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9KS5vbihcIm1vdXNlbGVhdmVcIitsLGksZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiKX0pLm9uKFwibW91c2Vkb3duXCIrbCxuLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pLm9uKFwia2V5ZG93blwiK2wsYyxmdW5jdGlvbihuKXtmdW5jdGlvbiBpKGUsbil7dmFyIGk9dC5lbGVtZW50LmZpbmQoYykscj1pLmluZGV4KG8pK2U7cmV0dXJuIG4mJihyPU1hdGgubWF4KDAsTWF0aC5taW4oaS5sZW5ndGgtMSxyKSkpLGlbcl19dmFyIHIsbz10aGlzLGE9bi5rZXlDb2RlO2E9PXMuUklHSFR8fGE9PXMuTEVGVD9lKG8pLmhhc0NsYXNzKFwiLmstZHJvcGRvd25cIil8fChyPWkoYT09cy5SSUdIVD8xOi0xLCEwKSk6YT09cy5FU0M/cj10Ll9lZGl0b3I6YSE9cy5UQUJ8fG4uY3RybEtleXx8bi5hbHRLZXl8fChuLnNoaWZ0S2V5P3I9aSgtMSk6KHI9aSgxKSxyfHwocj10Ll9lZGl0b3IpKSksciYmKG4ucHJldmVudERlZmF1bHQoKSxyLmZvY3VzKCkpfSkub24oXCJjbGlja1wiK2wsaSxmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpO24ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpLGkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpLGkuaXMoXCJbZGF0YS1wb3B1cF1cIil8fHQuX2VkaXRvci5leGVjKHQuX3Rvb2xOYW1lKHRoaXMpKX0pLm9uKFwiY2xpY2tcIitsLHIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b29sTmFtZTpmdW5jdGlvbih0KXt2YXIgbixpO2lmKHQpcmV0dXJuIG49dC5jbGFzc05hbWUsL2stdG9vbFxcYi9pLnRlc3QobikmJihuPXQuZmlyc3RDaGlsZC5jbGFzc05hbWUpLGk9ZS5ncmVwKG4uc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUpe3JldHVybiEvXmstKHdpZGdldHx0b29sfHRvb2wtaWNvbnxzdGF0ZS1ob3ZlcnxoZWFkZXJ8Y29tYm9ib3h8ZHJvcGRvd258c2VsZWN0Ym94fGNvbG9ycGlja2VyKSQvaS50ZXN0KGUpfSksaVswXT9pWzBdLnN1YnN0cmluZyhpWzBdLmxhc3RJbmRleE9mKFwiLVwiKSsxKTpcImN1c3RvbVwifSxyZWZyZXNoVG9vbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLGk9bi5fZWRpdG9yLHI9aS5nZXRSYW5nZSgpLG89dC51aS5lZGl0b3IuUmFuZ2VVdGlscy50ZXh0Tm9kZXMocik7by5sZW5ndGh8fChvPVtyLnN0YXJ0Q29udGFpbmVyXSksbi5pdGVtcygpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1uLnRvb2xzW24uX3Rvb2xOYW1lKHRoaXMpXTt0JiZ0LnVwZGF0ZSYmdC51cGRhdGUoZSh0aGlzKSxvKX0pLHRoaXMudXBkYXRlKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5jaGlsZHJlbigpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5jc3MoXCJkaXNwbGF5XCIsdC5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIik/XCJub25lXCI6XCJcIil9KSx0aGlzLnVwZGF0ZUdyb3VwcygpfX0pO2UuZXh0ZW5kKGkse1Rvb2xiYXI6ZH0pfSh3aW5kb3cualF1ZXJ5KSxmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cua2VuZG8sbj1lLmV4dGVuZCxpPWUucHJveHkscj10LnVpLmVkaXRvcixvPXIuRG9tLGE9ci5FZGl0b3JVdGlscyxzPXIuUmFuZ2VVdGlscyxsPXIuQ29tbWFuZCxjPVwiLmtlbmRvRWRpdG9yXCIsZD1cImstc3RhdGUtYWN0aXZlXCIsdT1cImstc3RhdGUtc2VsZWN0ZWRcIixoPXIuVG9vbCxwPXIuVG9vbFRlbXBsYXRlLGY9ci5JbnNlcnRIdG1sQ29tbWFuZCxnPXIuQmxvY2tGb3JtYXRGaW5kZXIsbT1yLkVkaXRvclV0aWxzLnJlZ2lzdGVyVG9vbCx2PVwiPHRkPlwiK3IuZW1wdHlFbGVtZW50Q29udGVudCtcIjwvdGQ+XCIsXz1uZXcgZyhbe3RhZ3M6W1widGFibGVcIl19XSkseT1mLmV4dGVuZCh7X3RhYmxlSHRtbDpmdW5jdGlvbihlLHQpe3JldHVybiBlPWV8fDEsdD10fHwxLFwiPHRhYmxlIGNsYXNzPSdrLXRhYmxlJyBkYXRhLWxhc3Q+XCIrQXJyYXkoZSsxKS5qb2luKFwiPHRyPlwiK0FycmF5KHQrMSkuam9pbih2KStcIjwvdHI+XCIpK1wiPC90YWJsZT5cIn0scG9zdFByb2Nlc3M6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKFwidGFibGVbZGF0YS1sYXN0XVwiLHQuZG9jdW1lbnQpLnJlbW92ZUF0dHIoXCJkYXRhLWxhc3RcIik7bi5zZWxlY3ROb2RlQ29udGVudHMoaS5maW5kKFwidGRcIilbMF0pLHQuc2VsZWN0UmFuZ2Uobil9LGV4ZWM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5odG1sPXRoaXMuX3RhYmxlSHRtbChlLnJvd3MsZS5jb2x1bW5zKSxlLnBvc3RQcm9jZXNzPXRoaXMucG9zdFByb2Nlc3MsZi5mbi5leGVjLmNhbGwodGhpcyl9fSksdz1oLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LG4pe2guZm4uaW5pdGlhbGl6ZS5jYWxsKHRoaXMsdCxuKTt2YXIgcj1lKHRoaXMub3B0aW9ucy5wb3B1cFRlbXBsYXRlKS5hcHBlbmRUbyhcImJvZHlcIikua2VuZG9Qb3B1cCh7YW5jaG9yOnQsY29weUFuY2hvclN0eWxlczohMSxvcGVuOmkodGhpcy5fb3Blbix0aGlzKSxhY3RpdmF0ZTppKHRoaXMuX2FjdGl2YXRlLHRoaXMpLGNsb3NlOmkodGhpcy5fY2xvc2UsdGhpcyl9KS5kYXRhKFwia2VuZG9Qb3B1cFwiKTt0LmNsaWNrKGkodGhpcy5fdG9nZ2xlLHRoaXMpKS5rZXlkb3duKGkodGhpcy5fa2V5ZG93bix0aGlzKSksdGhpcy5fZWRpdG9yPW4uZWRpdG9yLHRoaXMuX3BvcHVwPXJ9LHBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwfSxfYWN0aXZhdGU6ZS5ub29wLF9vcGVuOmZ1bmN0aW9uKCl7dGhpcy5fcG9wdXAub3B0aW9ucy5hbmNob3IuYWRkQ2xhc3MoZCl9LF9jbG9zZTpmdW5jdGlvbigpe3RoaXMuX3BvcHVwLm9wdGlvbnMuYW5jaG9yLnJlbW92ZUNsYXNzKGQpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbj10LmtleXMsaT1lLmtleUNvZGU7aT09bi5ET1dOJiZlLmFsdEtleT90aGlzLl9wb3B1cC5vcGVuKCk6aT09bi5FU0MmJnRoaXMuX3BvcHVwLmNsb3NlKCl9LF90b2dnbGU6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5rLXRvb2xcIik7bi5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil8fHRoaXMucG9wdXAoKS50b2dnbGUoKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3RoaXMucG9wdXAoKS5jbG9zZSgpLGUucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcG9wdXAuZGVzdHJveSgpfX0pLGI9dy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dGhpcy5jb2xzPTgsdGhpcy5yb3dzPTYsdy5mbi5pbml0LmNhbGwodGhpcyxlLmV4dGVuZCh0LHtjb21tYW5kOnkscG9wdXBUZW1wbGF0ZTpcIjxkaXYgY2xhc3M9J2stY3QtcG9wdXAnPlwiK0FycmF5KHRoaXMuY29scyp0aGlzLnJvd3MrMSkuam9pbihcIjxzcGFuIGNsYXNzPSdrLWN0LWNlbGwgay1zdGF0ZS1kaXNhYmxlZCcgLz5cIikrXCI8ZGl2IGNsYXNzPSdrLXN0YXR1cyc+PC9kaXY+PC9kaXY+XCJ9KSl9LF9hY3RpdmF0ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dmFyIG49ZSh3aW5kb3cpO3JldHVybntyb3c6TWF0aC5mbG9vcigodC5jbGllbnRZK24uc2Nyb2xsVG9wKCktdS50b3ApL3IpKzEsY29sOk1hdGguZmxvb3IoKHQuY2xpZW50WCtuLnNjcm9sbExlZnQoKS11LmxlZnQpL2kpKzF9fXZhciBpLHIsbz10aGlzLGE9by5fcG9wdXAuZWxlbWVudCxzPWEuZmluZChcIi5rLWN0LWNlbGxcIiksbD1zLmVxKDApLGQ9cy5lcShzLmxlbmd0aC0xKSx1PXQuZ2V0T2Zmc2V0KGwpLGg9dC5nZXRPZmZzZXQoZCkscD1vLmNvbHMsZj1vLnJvd3M7aC5sZWZ0Kz1kWzBdLm9mZnNldFdpZHRoLGgudG9wKz1kWzBdLm9mZnNldEhlaWdodCxpPShoLmxlZnQtdS5sZWZ0KS9wLHI9KGgudG9wLXUudG9wKS9mLGEub24oXCJtb3VzZW1vdmVcIitjLGZ1bmN0aW9uKGUpe28uX3NldFRhYmxlU2l6ZShuKGUpKX0pLm9uKFwibW91c2VsZWF2ZVwiK2MsZnVuY3Rpb24oKXtvLl9zZXRUYWJsZVNpemUoKX0pLm9uKFwibW91c2V1cFwiK2MsZnVuY3Rpb24oZSl7by5fZXhlYyhuKGUpKX0pfSxfdmFsaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUucm93PjAmJmUuY29sPjAmJnRoaXMucm93cz49ZS5yb3cmJnRoaXMuY29scz49ZS5jb2x9LF9leGVjOmZ1bmN0aW9uKGUpe3RoaXMuX3ZhbGlkKGUpJiYodGhpcy5fZWRpdG9yLmV4ZWMoXCJjcmVhdGVUYWJsZVwiLHtyb3dzOmUucm93LGNvbHVtbnM6ZS5jb2x9KSx0aGlzLl9wb3B1cC5jbG9zZSgpKX0sX3NldFRhYmxlU2l6ZTpmdW5jdGlvbihuKXt2YXIgaT10aGlzLl9wb3B1cC5lbGVtZW50LHI9aS5maW5kKFwiLmstc3RhdHVzXCIpLG89aS5maW5kKFwiLmstY3QtY2VsbFwiKSxhPXRoaXMuY29scyxzPXRoaXMuX2VkaXRvci5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuX3ZhbGlkKG4pPyhyLnRleHQodC5mb3JtYXQocy5jcmVhdGVUYWJsZUhpbnQsbi5yb3csbi5jb2wpKSxvLmVhY2goZnVuY3Rpb24odCl7ZSh0aGlzKS50b2dnbGVDbGFzcyh1LG4uY29sPnQlYSYmbi5yb3c+dC9hKX0pKTooci50ZXh0KHMuZGlhbG9nQ2FuY2VsKSxvLnJlbW92ZUNsYXNzKHUpKX0sX2tleWRvd246ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG8sYSxzLGwsYzt3LmZuLl9rZXlkb3duLmNhbGwodGhpcyxlKSxuPXQua2V5cyxpPWUua2V5Q29kZSxyPXRoaXMuX3BvcHVwLmVsZW1lbnQuZmluZChcIi5rLWN0LWNlbGxcIiksbz1NYXRoLm1heChyLmZpbHRlcihcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLmxhc3QoKS5pbmRleCgpLDApLGE9TWF0aC5mbG9vcihvL3RoaXMuY29scykscz1vJXRoaXMuY29scyxsPSExLGkhPW4uRE9XTnx8ZS5hbHRLZXk/aT09bi5VUD8obD0hMCxhLS0pOmk9PW4uUklHSFQ/KGw9ITAscysrKTppPT1uLkxFRlQmJihsPSEwLHMtLSk6KGw9ITAsYSsrKSxjPXtyb3c6TWF0aC5tYXgoMSxNYXRoLm1pbih0aGlzLnJvd3MsYSsxKSksY29sOk1hdGgubWF4KDEsTWF0aC5taW4odGhpcy5jb2xzLHMrMSkpfSxpPT1uLkVOVEVSP3RoaXMuX2V4ZWMoYyk6dGhpcy5fc2V0VGFibGVTaXplKGMpLGwmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9LF9vcGVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZWRpdG9yLm9wdGlvbnMubWVzc2FnZXM7dy5mbi5fb3Blbi5jYWxsKHRoaXMpLHRoaXMucG9wdXAoKS5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIikudGV4dChlLmRpYWxvZ0NhbmNlbCkuZW5kKCkuZmluZChcIi5rLWN0LWNlbGxcIikucmVtb3ZlQ2xhc3ModSl9LF9jbG9zZTpmdW5jdGlvbigpe3cuZm4uX2Nsb3NlLmNhbGwodGhpcyksdGhpcy5wb3B1cCgpLmVsZW1lbnQub2ZmKGMpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbjt3LmZuLnVwZGF0ZS5jYWxsKHRoaXMsZSksbj1fLmlzRm9ybWF0dGVkKHQpLGUudG9nZ2xlQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIsbil9fSksaz1sLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG4saSxhPXRoaXMubG9ja1JhbmdlKCEwKSxzPWEuZW5kQ29udGFpbmVyO1widGRcIiE9by5uYW1lKHMpOylzPXMucGFyZW50Tm9kZTtmb3IodD1zLnBhcmVudE5vZGUsZT10LmNoaWxkcmVuLmxlbmd0aCxuPXQuY2xvbmVOb2RlKCEwKSxpPTA7dC5jZWxscy5sZW5ndGg+aTtpKyspbi5jZWxsc1tpXS5pbm5lckhUTUw9ci5lbXB0eUVsZW1lbnRDb250ZW50O1wiYmVmb3JlXCI9PXRoaXMub3B0aW9ucy5wb3NpdGlvbj9vLmluc2VydEJlZm9yZShuLHQpOm8uaW5zZXJ0QWZ0ZXIobix0KSx0aGlzLnJlbGVhc2VSYW5nZShhKX19KSx4PWwuZXh0ZW5kKHtleGVjOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksYT10aGlzLmxvY2tSYW5nZSghMCkscz1vLmNsb3Nlc3QoYS5lbmRDb250YWluZXIsXCJ0ZFwiKSxsPW8uY2xvc2VzdChzLFwidGFibGVcIiksYz1sLnJvd3MsZD10aGlzLm9wdGlvbnMucG9zaXRpb247Zm9yKGU9by5maW5kTm9kZUluZGV4KHMpLHQ9MDtjLmxlbmd0aD50O3QrKyluPWNbdF0uY2VsbHNbZV0saT1uLmNsb25lTm9kZSgpLGkuaW5uZXJIVE1MPXIuZW1wdHlFbGVtZW50Q29udGVudCxcImJlZm9yZVwiPT1kP28uaW5zZXJ0QmVmb3JlKGksbik6by5pbnNlcnRBZnRlcihpLG4pO3RoaXMucmVsZWFzZVJhbmdlKGEpfX0pLEM9bC5leHRlbmQoe2V4ZWM6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLmxvY2tSYW5nZSgpLGE9cy5tYXBBbGwocixmdW5jdGlvbih0KXtyZXR1cm4gZSh0KS5jbG9zZXN0KFwidHJcIilbMF19KSxsPW8uY2xvc2VzdChhWzBdLFwidGFibGVcIik7aWYoYS5sZW5ndGg+PWwucm93cy5sZW5ndGgpdD1vLm5leHQobCksKCF0fHxvLmluc2lnbmlmaWNhbnQodCkpJiYodD1vLnByZXYobCkpLG8ucmVtb3ZlKGwpO2Vsc2UgZm9yKG49MDthLmxlbmd0aD5uO24rKylpPWFbbl0sby5yZW1vdmVUZXh0U2libGluZ3MoaSksdD1vLm5leHQoaSl8fG8ucHJldihpKSx0PXQuY2VsbHNbMF0sby5yZW1vdmUoaSk7dCYmKHIuc2V0U3RhcnQodCwwKSxyLmNvbGxhcHNlKCEwKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShyKSl9fSksUz1sLmV4dGVuZCh7ZXhlYzpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxvY2tSYW5nZSgpLGk9by5jbG9zZXN0KG4uZW5kQ29udGFpbmVyLFwidGRcIikscj1vLmNsb3Nlc3QoaSxcInRhYmxlXCIpLGE9ci5yb3dzLHM9by5maW5kTm9kZUluZGV4KGksITApLGw9YVswXS5jZWxscy5sZW5ndGg7aWYoMT09bCllPW8ubmV4dChyKSwoIWV8fG8uaW5zaWduaWZpY2FudChlKSkmJihlPW8ucHJldihyKSksby5yZW1vdmUocik7ZWxzZSBmb3Ioby5yZW1vdmVUZXh0U2libGluZ3MoaSksZT1vLm5leHQoaSl8fG8ucHJldihpKSx0PTA7YS5sZW5ndGg+dDt0Kyspby5yZW1vdmUoYVt0XS5jZWxsc1tzXSk7ZSYmKG4uc2V0U3RhcnQoZSwwKSxuLmNvbGxhcHNlKCEwKSx0aGlzLmVkaXRvci5zZWxlY3RSYW5nZShuKSl9fSksVD1oLmV4dGVuZCh7Y29tbWFuZDpmdW5jdGlvbihlKXtyZXR1cm4gZT1uKGUsdGhpcy5vcHRpb25zKSxcImRlbGV0ZVwiPT1lLmFjdGlvbj9cInJvd1wiPT1lLnR5cGU/bmV3IEMoZSk6bmV3IFMoZSk6XCJyb3dcIj09ZS50eXBlP25ldyBrKGUpOm5ldyB4KGUpfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCl7aC5mbi5pbml0aWFsaXplLmNhbGwodGhpcyxlLHQpLGUuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpfSx1cGRhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0hXy5pc0Zvcm1hdHRlZCh0KTtlLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLG4pfX0pO24odC51aS5lZGl0b3Ise1BvcHVwVG9vbDp3LFRhYmxlQ29tbWFuZDp5LEluc2VydFRhYmxlVG9vbDpiLFRhYmxlTW9kaWZpY2F0aW9uVG9vbDpULEluc2VydFJvd0NvbW1hbmQ6ayxJbnNlcnRDb2x1bW5Db21tYW5kOngsRGVsZXRlUm93Q29tbWFuZDpDLERlbGV0ZUNvbHVtbkNvbW1hbmQ6U30pLG0oXCJjcmVhdGVUYWJsZVwiLG5ldyBiKHt0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSxwb3B1cDohMCx0aXRsZTpcIkNyZWF0ZSB0YWJsZVwifSl9KSksbShcImFkZENvbHVtbkxlZnRcIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLHBvc2l0aW9uOlwiYmVmb3JlXCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJBZGQgY29sdW1uIG9uIHRoZSBsZWZ0XCJ9KX0pKSxtKFwiYWRkQ29sdW1uUmlnaHRcIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiQWRkIGNvbHVtbiBvbiB0aGUgcmlnaHRcIn0pfSkpLG0oXCJhZGRSb3dBYm92ZVwiLG5ldyBUKHt0eXBlOlwicm93XCIscG9zaXRpb246XCJiZWZvcmVcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkFkZCByb3cgYWJvdmVcIn0pfSkpLG0oXCJhZGRSb3dCZWxvd1wiLG5ldyBUKHt0eXBlOlwicm93XCIsdGVtcGxhdGU6bmV3IHAoe3RlbXBsYXRlOmEuYnV0dG9uVGVtcGxhdGUsdGl0bGU6XCJBZGQgcm93IGJlbG93XCJ9KX0pKSxtKFwiZGVsZXRlUm93XCIsbmV3IFQoe3R5cGU6XCJyb3dcIixhY3Rpb246XCJkZWxldGVcIix0ZW1wbGF0ZTpuZXcgcCh7dGVtcGxhdGU6YS5idXR0b25UZW1wbGF0ZSx0aXRsZTpcIkRlbGV0ZSByb3dcIn0pfSkpLG0oXCJkZWxldGVDb2x1bW5cIixuZXcgVCh7dHlwZTpcImNvbHVtblwiLGFjdGlvbjpcImRlbGV0ZVwiLHRlbXBsYXRlOm5ldyBwKHt0ZW1wbGF0ZTphLmJ1dHRvblRlbXBsYXRlLHRpdGxlOlwiRGVsZXRlIGNvbHVtblwifSl9KSl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi5jYXJldCxyPW4ua2V5cyxvPW4udWksYT1vLldpZGdldCxzPVwiLmtlbmRvTWFza2VkVGV4dEJveFwiLGw9ZS5wcm94eSxjPShuLnN1cHBvcnQucHJvcGVydHlDaGFuZ2VFdmVudD9cInByb3BlcnR5Y2hhbmdlXCI6XCJpbnB1dFwiKStzLGQ9XCJrLXN0YXRlLWRpc2FibGVkXCIsdT1cImRpc2FibGVkXCIsaD1cInJlYWRvbmx5XCIscD1cImNoYW5nZVwiLGY9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt2YXIgbyxsLGM9dGhpczthLmZuLmluaXQuY2FsbChjLHQsciksYy5fcnVsZXM9ZS5leHRlbmQoe30sYy5ydWxlcyxjLm9wdGlvbnMucnVsZXMpLHQ9Yy5lbGVtZW50LG89dFswXSxjLndyYXBwZXI9dCxjLl90b2tlbml6ZSgpLGMuX3Jlc2V0KCksYy5lbGVtZW50LmFkZENsYXNzKFwiay10ZXh0Ym94XCIpLmF0dHIoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKS5vbihcImZvY3VzXCIrcyxmdW5jdGlvbigpe3ZhciBlPW8udmFsdWU7ZT9jLl90b2dnbGVQcm9tcHQoITApOm8udmFsdWU9Yy5fb2xkPWMuX2VtcHR5TWFzayxjLl9vbGRWYWx1ZT1lLGMuX3RpbWVvdXRJZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aSh0LDAsZT9jLl9tYXNrTGVuZ3RoOjApfSl9KS5vbihcImZvY3Vzb3V0XCIrcyxmdW5jdGlvbigpe3ZhciBlPXQudmFsKCk7Y2xlYXJUaW1lb3V0KGMuX3RpbWVvdXRJZCksby52YWx1ZT1jLl9vbGQ9XCJcIixlIT09Yy5fZW1wdHlNYXNrJiYoby52YWx1ZT1jLl9vbGQ9ZSksYy5fY2hhbmdlKCksYy5fdG9nZ2xlUHJvbXB0KCl9KSxsPXQuaXMoXCJbZGlzYWJsZWRdXCIpLGw/Yy5lbmFibGUoITEpOmMucmVhZG9ubHkodC5pcyhcIltyZWFkb25seV1cIikpLGMudmFsdWUoYy5vcHRpb25zLnZhbHVlfHx0LnZhbCgpKSxuLm5vdGlmeShjKX0sb3B0aW9uczp7bmFtZTpcIk1hc2tlZFRleHRCb3hcIixwcm9tcHRDaGFyOlwiX1wiLGNsZWFyUHJvbXB0Q2hhcjohMSxjdWx0dXJlOlwiXCIscnVsZXM6e30sdmFsdWU6XCJcIixtYXNrOlwiXCJ9LGV2ZW50czpbcF0scnVsZXM6ezA6L1xcZC8sOTovXFxkfFxccy8sXCIjXCI6L1xcZHxcXHN8XFwrfFxcLS8sTDovW2EtekEtWl0vLFwiP1wiOi9bYS16QS1aXXxcXHMvLFwiJlwiOi9cXFMvLEM6Ly4vLEE6L1thLXpBLVowLTldLyxhOi9bYS16QS1aMC05XXxcXHMvfSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7YS5mbi5zZXRPcHRpb25zLmNhbGwobix0KSxuLl9ydWxlcz1lLmV4dGVuZCh7fSxuLnJ1bGVzLG4ub3B0aW9ucy5ydWxlcyksbi5fdG9rZW5pemUoKSx0aGlzLl91bmJpbmRJbnB1dCgpLHRoaXMuX2JpbmRJbnB1dCgpLG4udmFsdWUobi5lbGVtZW50LnZhbCgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5lbGVtZW50Lm9mZihzKSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKSxhLmZuLmRlc3Ryb3kuY2FsbChlKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5lbGVtZW50LHI9dGhpcy5fZW1wdHlNYXNrO3JldHVybiBlPT09dD90aGlzLmVsZW1lbnQudmFsKCk6KG51bGw9PT1lJiYoZT1cIlwiKSxyPyhlPXRoaXMuX3VubWFzayhlK1wiXCIpLGkudmFsKGU/cjpcIlwiKSx0aGlzLl9tYXNrKDAsdGhpcy5fbWFza0xlbmd0aCxlKSxlPWkudmFsKCksdGhpcy5fb2xkVmFsdWU9ZSxuLl9hY3RpdmVFbGVtZW50KCkhPT1pJiYoZT09PXI/aS52YWwoXCJcIik6dGhpcy5fdG9nZ2xlUHJvbXB0KCkpLHQpOihpLnZhbChlKSx0KSl9LF90b2dnbGVQcm9tcHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbGVtZW50WzBdLG49dC52YWx1ZTt0aGlzLm9wdGlvbnMuY2xlYXJQcm9tcHRDaGFyJiYobj1lP3RoaXMuX29sZFZhbHVlOm4ucmVwbGFjZShSZWdFeHAodGhpcy5vcHRpb25zLnByb21wdENoYXIsXCJnXCIpLFwiIFwiKSx0LnZhbHVlPXRoaXMuX29sZD1uKX0scmVhZG9ubHk6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OmU9PT10PyEwOmUsZGlzYWJsZTohMX0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdGFibGUoe3JlYWRvbmx5OiExLGRpc2FibGU6IShlPWU9PT10PyEwOmUpfSl9LF9iaW5kSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX21hc2tMZW5ndGgmJmUuZWxlbWVudC5vbihcImtleWRvd25cIitzLGwoZS5fa2V5ZG93bixlKSkub24oXCJrZXlwcmVzc1wiK3MsbChlLl9rZXlwcmVzcyxlKSkub24oXCJwYXN0ZVwiK3MsbChlLl9wYXN0ZSxlKSkub24oYyxsKGUuX3Byb3BlcnR5Q2hhbmdlLGUpKX0sX3VuYmluZElucHV0OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9mZihcImtleWRvd25cIitzKS5vZmYoXCJrZXlwcmVzc1wiK3MpLm9mZihcInBhc3RlXCIrcykub2ZmKGMpfSxfZWRpdGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPWUuZGlzYWJsZSxyPWUucmVhZG9ubHk7dC5fdW5iaW5kSW5wdXQoKSxyfHxpP24uYXR0cih1LGkpLmF0dHIoaCxyKS50b2dnbGVDbGFzcyhkLGkpOihuLnJlbW92ZUF0dHIodSkucmVtb3ZlQXR0cihoKS5yZW1vdmVDbGFzcyhkKSx0Ll9iaW5kSW5wdXQoKSl9LF9jaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS52YWx1ZSgpO3QhPT1lLl9vbGRWYWx1ZSYmKGUuX29sZFZhbHVlPXQsZS50cmlnZ2VyKHApLGUuZWxlbWVudC50cmlnZ2VyKHApKX0sX3Byb3BlcnR5Q2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMscj1uLmVsZW1lbnRbMF0sbz1yLnZhbHVlO289PT1uLl9vbGR8fG4uX3Bhc3Rpbmd8fCh0PWkocilbMF0sZT1uLl91bm1hc2soby5zdWJzdHJpbmcodCksdCksci52YWx1ZT1uLl9vbGQ9by5zdWJzdHJpbmcoMCx0KStuLl9lbXB0eU1hc2suc3Vic3RyaW5nKHQpLG4uX21hc2sodCx0LGUpLGkocix0KSl9LF9wYXN0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS50YXJnZXQscj1pKG4pLG89clswXSxhPXJbMV0scz10Ll91bm1hc2sobi52YWx1ZS5zdWJzdHJpbmcoYSksYSk7dC5fcGFzdGluZz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9bi52YWx1ZSxyPWUuc3Vic3RyaW5nKG8saShuKVswXSk7bi52YWx1ZT10Ll9vbGQ9ZS5zdWJzdHJpbmcoMCxvKSt0Ll9lbXB0eU1hc2suc3Vic3RyaW5nKG8pLHQuX21hc2sobyxvLHIpLG89aShuKVswXSx0Ll9tYXNrKG8sbyxzKSxpKG4sbyksdC5fcGFzdGluZz0hMX0pfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5lbGVtZW50LGk9bi5hdHRyKFwiZm9ybVwiKSxyPWk/ZShcIiNcIitpKTpuLmNsb3Nlc3QoXCJmb3JtXCIpO3JbMF0mJih0Ll9yZXNldEhhbmRsZXI9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLnZhbHVlKX0pfSx0Ll9mb3JtPXIub24oXCJyZXNldFwiLHQuX3Jlc2V0SGFuZGxlcikpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgbixvPWUua2V5Q29kZSxhPXRoaXMuZWxlbWVudFswXSxzPWkoYSksbD1zWzBdLGM9c1sxXSxkPW89PT1yLkJBQ0tTUEFDRTtkfHxvPT09ci5ERUxFVEU/KGw9PT1jJiYoZD9sLT0xOmMrPTEsbj10aGlzLl9maW5kKGwsZCkpLG4hPT10JiZuIT09bD8oZCYmKG4rPTEpLGkoYSxuKSk6bD4tMSYmdGhpcy5fbWFzayhsLGMsXCJcIixkKSxlLnByZXZlbnREZWZhdWx0KCkpOm89PT1yLkVOVEVSJiZ0aGlzLl9jaGFuZ2UoKX0sX2tleXByZXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG47MD09PWUud2hpY2h8fGUuY3RybEtleXx8ZS5rZXlDb2RlPT09ci5FTlRFUnx8KHQ9U3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKSxuPWkodGhpcy5lbGVtZW50KSx0aGlzLl9tYXNrKG5bMF0sblsxXSx0KSwoZS5rZXlDb2RlPT09ci5CQUNLU1BBQ0V8fHQpJiZlLnByZXZlbnREZWZhdWx0KCkpfSxfZmluZDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZWxlbWVudC52YWwoKXx8dGhpcy5fZW1wdHlNYXNrLGk9MTtmb3IodD09PSEwJiYoaT0tMSk7ZT4tMXx8dGhpcy5fbWFza0xlbmd0aD49ZTspe2lmKG4uY2hhckF0KGUpIT09dGhpcy50b2tlbnNbZV0pcmV0dXJuIGU7ZSs9aX1yZXR1cm4tMX0sX21hc2s6ZnVuY3Rpb24oZSxyLG8sYSl7dmFyIHMsbCxjLGQsdT10aGlzLmVsZW1lbnRbMF0saD11LnZhbHVlfHx0aGlzLl9lbXB0eU1hc2sscD10aGlzLm9wdGlvbnMucHJvbXB0Q2hhcixmPTA7Zm9yKGU9dGhpcy5fZmluZChlLGEpLGU+ciYmKHI9ZSksbD10aGlzLl91bm1hc2soaC5zdWJzdHJpbmcociksciksbz10aGlzLl91bm1hc2sobyxlKSxzPW8ubGVuZ3RoLG8mJihsPWwucmVwbGFjZShSZWdFeHAoXCJeX3swLFwiK3MrXCJ9XCIpLFwiXCIpKSxvKz1sLGg9aC5zcGxpdChcIlwiKSxjPW8uY2hhckF0KGYpO3RoaXMuX21hc2tMZW5ndGg+ZTspaFtlXT1jfHxwLGM9by5jaGFyQXQoKytmKSxkPT09dCYmZj5zJiYoZD1lKSxlPXRoaXMuX2ZpbmQoZSsxKTt1LnZhbHVlPXRoaXMuX29sZD1oLmpvaW4oXCJcIiksbi5fYWN0aXZlRWxlbWVudCgpPT09dSYmKGQ9PT10JiYoZD10aGlzLl9tYXNrTGVuZ3RoKSxpKHUsZCkpfSxfdW5tYXNrOmZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscyxsLGMsZDtpZighdClyZXR1cm5cIlwiO2Zvcih0PSh0K1wiXCIpLnNwbGl0KFwiXCIpLG89MCxhPW58fDAscz10aGlzLm9wdGlvbnMucHJvbXB0Q2hhcixsPXQubGVuZ3RoLGM9dGhpcy50b2tlbnMubGVuZ3RoLGQ9XCJcIjtjPmEmJihpPXRbb10scj10aGlzLnRva2Vuc1thXSxpPT09cnx8aT09PXM/KGQrPWk9PT1zP3M6XCJcIixvKz0xLGErPTEpOlwic3RyaW5nXCIhPXR5cGVvZiByPygoci50ZXN0JiZyLnRlc3QoaSl8fGUuaXNGdW5jdGlvbihyKSYmcihpKSkmJihkKz1pLGErPTEpLG8rPTEpOmErPTEsIShvPj1sKSk7KTtyZXR1cm4gZH0sX3Rva2VuaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsaSxyLG89W10sYT0wLHM9dGhpcy5vcHRpb25zLm1hc2t8fFwiXCIsbD1zLnNwbGl0KFwiXCIpLGM9bC5sZW5ndGgsZD0wLHU9XCJcIixoPXRoaXMub3B0aW9ucy5wcm9tcHRDaGFyLHA9bi5nZXRDdWx0dXJlKHRoaXMub3B0aW9ucy5jdWx0dXJlKS5udW1iZXJGb3JtYXQsZj10aGlzLl9ydWxlcztjPmQ7ZCsrKWlmKGU9bFtkXSx0PWZbZV0pb1thXT10LHUrPWgsYSs9MTtlbHNlIGZvcihcIi5cIj09PWV8fFwiLFwiPT09ZT9lPXBbZV06XCIkXCI9PT1lP2U9cC5jdXJyZW5jeS5zeW1ib2w6XCJcXFxcXCI9PT1lJiYoZCs9MSxlPWxbZF0pLGU9ZS5zcGxpdChcIlwiKSxpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW9bYV09ZVtpXSx1Kz1lW2ldLGErPTE7dGhpcy50b2tlbnM9byx0aGlzLl9lbXB0eU1hc2s9dSx0aGlzLl9tYXNrTGVuZ3RoPXUubGVuZ3RofX0pO28ucGx1Z2luKGYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIG49XCJzdHJpbmdcIj09dHlwZW9mIGU/W3tuYW1lOmV9XTplLGk9XCJbb2JqZWN0IEFycmF5XVwiPT09X3QuY2FsbChuKT9uOm4hPT10P1tuXTpbXTtyZXR1cm4gd3QoaSxmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT97bmFtZTplfTp7bmFtZTplLm5hbWUsdHlwZTplLnR5cGV9fSl9ZnVuY3Rpb24gaShlKXt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgZT9be25hbWU6W2VdLGV4cGFuZDohMX1dOmUsaT1cIltvYmplY3QgQXJyYXldXCI9PT1fdC5jYWxsKG4pP246biE9PXQ/W25dOltdO3JldHVybiB3dChpLGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3tuYW1lOltlXSxleHBhbmQ6ITF9OntuYW1lOlwiW29iamVjdCBBcnJheV1cIj09PV90LmNhbGwoZS5uYW1lKT9lLm5hbWUuc2xpY2UoKTpbZS5uYW1lXSxleHBhbmQ6ZS5leHBhbmR9fSl9ZnVuY3Rpb24gcihlLHQsbixpKXt2YXIgbyxhLHMsbDtpZihufHwobj10KSxpfHwoaT0wKSxsPW4ubWVtYmVyc1tpXSxsJiYhbC5tZWFzdXJlKXtpZihzPWwuY2hpbGRyZW4sYT1zLmxlbmd0aCxuPT09dD9lW3B0LnN0cmluZ2lmeShbbC5uYW1lXSldPSEhYTphJiYoZVtwdC5zdHJpbmdpZnkobHQobixpKSldPSEwKSxhKWZvcihvPTA7YT5vO28rKylyKGUsdCxzW29dLGkpO1xucihlLHQsbixpKzEpfX1mdW5jdGlvbiBvKHQpe3ZhciBuLGksbz17fTt0Lmxlbmd0aCYmcihvLHRbMF0pLG49W107Zm9yKGkgaW4gbyluLnB1c2goe25hbWU6ZS5wYXJzZUpTT04oaSksZXhwYW5kOm9baV19KTtyZXR1cm4gbn1mdW5jdGlvbiBhKGUsdCl7dmFyIG4saSxyLG8sYT10LnR1cGxlc3x8W10scz1hWzBdO2lmKHMmJnMubWVtYmVycy5sZW5ndGg+ZS5sZW5ndGgpZm9yKG49cy5tZW1iZXJzLGk9MDtuLmxlbmd0aD5pO2krKylpZighbltpXS5tZWFzdXJlKXtmb3Iocj0hMSxvPTA7ZS5sZW5ndGg+bztvKyspaWYoMD09PU8oZVtvXSkuaW5kZXhPZihuW2ldLmhpZXJhcmNoeSkpe3I9ITA7YnJlYWt9cnx8ZS5wdXNoKHtuYW1lOltuW2ldLm5hbWVdLGV4cGFuZDohMX0pfX1mdW5jdGlvbiBzKGUpe3ZhciB0LG49W10saT1lLm1lbWJlcnM7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKylpW3RdLm1lYXN1cmV8fG4ucHVzaCh7bmFtZTpbaVt0XS5uYW1lXSxleHBhbmQ6aVt0XS5jaGlsZHJlbi5sZW5ndGg+MH0pO3JldHVybiBufWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciByLG87cmV0dXJuIGU9ZXx8e30sYSh0LGUpLG4ubGVuZ3RoPjEmJnQucHVzaCh7bmFtZTpcIk1lYXN1cmVzXCIsbWVhc3VyZTohMCxjaGlsZHJlbjppKG4pfSkscj17bWVtYmVyczp0fSxlLnR1cGxlcyYmKG89eChlLnR1cGxlcyxyKSxvLnR1cGxlJiYodD1zKG8udHVwbGUpKSksdH1mdW5jdGlvbiBjKGUsdCxuLGkscixvLGEpe3ZhciBzLGwsYyxkLHUsaCxwLGY9MCxnPXQ7Zm9yKGwgaW4gbltpXS5hZ2dyZWdhdGVzKXM9bltpXS5hZ2dyZWdhdGVzW2xdLGQ9cltsXSx1PW9bbF0scz1kP2Qocyk6cy5hY2N1bXVsYXRvcixlW2ddPXtvcmRpbmFsOmcsdmFsdWU6cyxmbXRWYWx1ZTp1P3B0LmZvcm1hdCh1LHMpOnN9LCsrZixnKz1hO2g9bltpXS5pdGVtcztmb3IoYyBpbiBoKXtwPWhbY10uaW5kZXgqZixwPWcrcCphO2ZvcihsIGluIGhbY10uYWdncmVnYXRlcylzPWhbY10uYWdncmVnYXRlc1tsXSxkPXJbbF0sdT1vW2xdLHM9ZD9kKHMpOnMuYWNjdW11bGF0b3IsZVtwXT17b3JkaW5hbDpwLHZhbHVlOnMsZm10VmFsdWU6dT9wdC5mb3JtYXQodSxzKTpzfSxwKz1hfX1mdW5jdGlvbiBkKGUsdCxuLGkscixvKXt2YXIgYSxzLGwsYyxkLHUsaCxwPTA7Zm9yKHMgaW4gbltpXS5hZ2dyZWdhdGVzKWE9bltpXS5hZ2dyZWdhdGVzW3NdLGM9cltzXSxkPW9bc10sYT1jP2MoYSk6YS5hY2N1bXVsYXRvcixlW2UubGVuZ3RoXT17b3JkaW5hbDp0KyssdmFsdWU6YSxmbXRWYWx1ZTpkP3B0LmZvcm1hdChkLGEpOmF9LCsrcDt1PW5baV0uaXRlbXM7Zm9yKGwgaW4gdSl7aD11W2xdLmluZGV4KnA7Zm9yKHMgaW4gdVtsXS5hZ2dyZWdhdGVzKWE9dVtsXS5hZ2dyZWdhdGVzW3NdLGM9cltzXSxkPW9bc10sYT1jP2MoYSk6YS5hY2N1bXVsYXRvcixlW2UubGVuZ3RoXT17b3JkaW5hbDp0K2grKyx2YWx1ZTphLGZtdFZhbHVlOmQ/cHQuZm9ybWF0KGQsYSk6YX19fWZ1bmN0aW9uIHUoZSl7dmFyIHQ9cHQuZ2V0dGVyKGUuZmllbGQsITApO3JldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiBlLmFnZ3JlZ2F0ZSh0KG4uZGF0YUl0ZW0pLGksbil9fWZ1bmN0aW9uIGgoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlKX1mdW5jdGlvbiBwKGUpe3JldHVybiBlJiZlLmdldFRpbWV9ZnVuY3Rpb24gZihlLG4saSl7cmV0dXJuIGUudHVwbGVzLmxlbmd0aDxfKG4udHVwbGVzLGkpP246dH1mdW5jdGlvbiBnKGUsdCxuLGkscil7dmFyIG8sYSxzLGw9ZS5sZW5ndGgsYz1fKHQsaSksZD1pLmxlbmd0aHx8MTtmb3IoYT0wO24+YTthKyspZm9yKG89MDtsPm87bysrKXM9dihlW29dLHQpKmQscys9byVkLHJbYSpsK29dLm9yZGluYWw9YSpjK3N9ZnVuY3Rpb24gbShlLHQsbixpLHIpe3ZhciBvLGEscyxsPWUubGVuZ3RoLGM9KF8odCxpKSxpLmxlbmd0aHx8MSk7Zm9yKGE9MDtsPmE7YSsrKWZvcihzPXYoZVthXSx0KSxzKj1jLHMrPWElYyxvPTA7bj5vO28rKylyW2EqbitvXS5vcmRpbmFsPXMqbitvfWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4geCh0LGUpLmluZGV4fWZ1bmN0aW9uIF8oZSx0KXt2YXIgbixpLHI7aWYoIWUubGVuZ3RoKXJldHVybiAwO2ZvcihuPWUuc2xpY2UoKSxpPW4uc2hpZnQoKSxyPTE7aTspaS5tZW1iZXJzP1tdLnB1c2guYXBwbHkobixpLm1lbWJlcnMpOmkuY2hpbGRyZW4mJihpLm1lYXN1cmV8fChyKz1pLmNoaWxkcmVuLmxlbmd0aCksW10ucHVzaC5hcHBseShuLGkuY2hpbGRyZW4pKSxpPW4uc2hpZnQoKTtyZXR1cm4gdC5sZW5ndGgmJihyKj10Lmxlbmd0aCkscn1mdW5jdGlvbiB5KGUpe3JldHVybiBlfHwoZT17dHVwbGVzOltdfSksZS50dXBsZXN8fChlLnR1cGxlcz1bXSksZX1mdW5jdGlvbiB3KGUsdCxuKXt2YXIgaSxyLG87aWYoIWUpcmV0dXJuIDA7Zm9yKGk9TWF0aC5tYXgobi5sZW5ndGgsMSkscj1lLm1lbWJlcnMuc2xpY2UoMCx0KSxvPXIuc2hpZnQoKTtvOylvLmNoaWxkcmVuP1tdLnB1c2guYXBwbHkocixvLmNoaWxkcmVuKTooaSsrLFtdLnB1c2guYXBwbHkocixvLm1lbWJlcnMpKSxvPXIuc2hpZnQoKTtyZXR1cm4gaX1mdW5jdGlvbiBiKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGw7aWYoIXRbMF0pcmV0dXJue3BhcnNlZFJvb3Q6bnVsbCx0dXBsZXM6ZSxtZW1iZXJJbmRleDowLGluZGV4OjB9O2lmKGk9eChlLHRbMF0pLCFpLnR1cGxlKXJldHVybntwYXJzZWRSb290Om51bGwsdHVwbGVzOnQsbWVtYmVySW5kZXg6MCxpbmRleDowfTtpZihyPWkudHVwbGUubWVtYmVycyxvPXRbMF0ubWVtYmVycyxhPS0xLHIubGVuZ3RoIT09by5sZW5ndGgpcmV0dXJue3BhcnNlZFJvb3Q6bnVsbCx0dXBsZXM6dCxtZW1iZXJJbmRleDowLGluZGV4OjB9O2ZvcihzPTAsbD1yLmxlbmd0aDtsPnM7cysrKSFyW3NdLm1lYXN1cmUmJm9bc10uY2hpbGRyZW5bMF0mJigtMT09YSYmb1tzXS5jaGlsZHJlbi5sZW5ndGgmJihhPXMpLHJbc10uY2hpbGRyZW49b1tzXS5jaGlsZHJlbik7cmV0dXJuIG49TWF0aC5tYXgobi5sZW5ndGgsMSkse3BhcnNlZFJvb3Q6aS50dXBsZSxpbmRleDppLmluZGV4Km4sbWVtYmVySW5kZXg6YSx0dXBsZXM6ZX19ZnVuY3Rpb24gayhlLHQpe3ZhciBuLGkscj0hMDtmb3IoZT1lLm1lbWJlcnMsdD10Lm1lbWJlcnMsbj0wLGk9ZS5sZW5ndGg7aT5uO24rKyllW25dLm1lYXN1cmV8fHRbbl0ubWVhc3VyZXx8KHI9ciYmTyhlW25dKT09PU8odFtuXSkpO3JldHVybiByfWZ1bmN0aW9uIHgoZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjPTA7Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspe2lmKHI9ZVtuXSxrKHIsdCkpcmV0dXJue3R1cGxlOnIsaW5kZXg6Y307Zm9yKGMrKyxhPTAscz1yLm1lbWJlcnMubGVuZ3RoO3M+YTthKyspaWYobD1yLm1lbWJlcnNbYV0sIWwubWVhc3VyZSYmKG89eChsLmNoaWxkcmVuLHQpLGMrPW8uaW5kZXgsby50dXBsZSkpcmV0dXJue3R1cGxlOm8udHVwbGUsaW5kZXg6Y319cmV0dXJue2luZGV4OmN9fWZ1bmN0aW9uIEMoZSx0KXt2YXIgbixpLHIsbz1cIlwiO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW49ZVtpXSxvKz1uLm5hbWUsdFtvXXx8KHRbb109bil9ZnVuY3Rpb24gUyhlLHQpe3ZhciBuLGkscixvLGE9ZS5tZW1iZXJzLHM9XCJcIixsPVwiXCI7Zm9yKG49MCxpPWEubGVuZ3RoO2k+bjtuKyspe2lmKHI9YVtuXSxvKXtpZih0W3Mrci5uYW1lXSl7cys9ci5uYW1lLG89dFtzXTtjb250aW51ZX1yZXR1cm4gdFtzK3IucGFyZW50TmFtZV0/dFtzK3IucGFyZW50TmFtZV06KHIucGFyZW50TmFtZSYmKGwrPXIucGFyZW50TmFtZSksdFtsXSl9aWYocys9ci5uYW1lLG89dFtyLnBhcmVudE5hbWVdLCFvJiYobz10W3NdLCFvKSlyZXR1cm4gbnVsbDtvJiYobCs9by5uYW1lKX1yZXR1cm4gb31mdW5jdGlvbiBUKGUsdCl7dmFyIG4saSxyLG87aWYoMD09PXQubGVuZ3RoKXJldHVybi0xO2ZvcihuPXRbMF0saT1lLm1lbWJlcnMscj0wLG89aS5sZW5ndGg7bz5yO3IrKylpZihpW3JdLm5hbWU9PW4ubmFtZSlyZXR1cm4gcn1mdW5jdGlvbiBEKG4saSl7aWYoISgwPmkpKXt2YXIgcj17bmFtZTpcIk1lYXN1cmVzXCIsbWVhc3VyZTohMCxjaGlsZHJlbjpbZS5leHRlbmQoe21lbWJlcnM6W10sZGF0YUluZGV4Om4uZGF0YUluZGV4fSxuLm1lbWJlcnNbaV0pXX07bi5tZW1iZXJzLnNwbGljZShpLDEsciksbi5kYXRhSW5kZXg9dH19ZnVuY3Rpb24gQShlLHQpe3ZhciBuLGkscixvLGEscztpZigxPmUubGVuZ3RoKXJldHVybltdO2ZvcihuPVtdLGk9e30scj1UKGVbMF0sdCksbz0wO2UubGVuZ3RoPm87bysrKWE9ZVtvXSxhLmRhdGFJbmRleD1vLEQoYSxyKSxzPVMoYSxpKSxzP3MuY2hpbGRyZW4ucHVzaCgwPnJ8fCFzLm1lYXN1cmU/YTphLm1lbWJlcnNbcl0uY2hpbGRyZW5bMF0pOm4ucHVzaChhKSxDKGEubWVtYmVycyxpKTtyZXR1cm4gbn1mdW5jdGlvbiBFKGUsdCl7dmFyIG4saSxyLG8sYSxzLGwsYyxkO2lmKCFlfHwhZS5sZW5ndGgpcmV0dXJuIHQ7Zm9yKG49W10saT1QKGUpLHI9aS5sZW5ndGgsbz1NYXRoLm1heCh0Lmxlbmd0aC9yLDEpLGE9MDtyPmE7YSsrKWZvcihsPW8qYSxjPW8qaVthXSxzPTA7bz5zO3MrKylkPXBhcnNlSW50KGMrcywxMCksbltwYXJzZUludChsK3MsMTApXT10W2RdfHx7dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6ZH07cmV0dXJuIG59ZnVuY3Rpb24gTShlLHQpe3ZhciBuLGkscixvLGEscyxsLGM7aWYoIWV8fCFlLmxlbmd0aClyZXR1cm4gdDtmb3Iobj1bXSxpPVAoZSkscj1pLmxlbmd0aCxvPU1hdGgubWF4KHQubGVuZ3RoL3IsMSkscz0wO28+cztzKyspZm9yKGw9cipzLGE9MDtyPmE7YSsrKWM9aVthXStsLG5bbCthXT10W2NdfHx7dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6Y307cmV0dXJuIG59ZnVuY3Rpb24gUChlKXt2YXIgbixpLHIsbyxhLHMsbDtmb3IoZT1lLnNsaWNlKCksbj1bXSxpPWUuc2hpZnQoKTtpOyl7Zm9yKGkuZGF0YUluZGV4IT09dCYmbi5wdXNoKGkuZGF0YUluZGV4KSxhPTAscj0wLG89aS5tZW1iZXJzLmxlbmd0aDtvPnI7cisrKWw9aS5tZW1iZXJzW3JdLHM9bC5jaGlsZHJlbixsLm1lYXN1cmU/W10uc3BsaWNlLmFwcGx5KGUsWzAsMF0uY29uY2F0KHMpKTpbXS5zcGxpY2UuYXBwbHkoZSxbYSwwXS5jb25jYXQocykpLGErPXMubGVuZ3RoO2k9ZS5zaGlmdCgpfXJldHVybiBufWZ1bmN0aW9uIEkoZSl7dmFyIHQ9ZS5zcGxpdChcIi5cIik7cmV0dXJuIHQubGVuZ3RoPjI/dFswXStcIi5cIit0WzFdOmV9ZnVuY3Rpb24geihlLHQpe3ZhciBuPWUubGVuZ3RoLTEsaT1lW25dLHI9Rih0LGkpO3JldHVybiByJiZyLmRpcj9pPVwiT1JERVIoXCIraStcIi5DaGlsZHJlbixcIityLmZpZWxkK1wiLkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04sXCIrci5kaXIrXCIpXCI6aSs9XCIuQ2hpbGRyZW5cIixlW25dPWksZX1mdW5jdGlvbiBGKGUsdCl7Zm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKDA9PT10LmluZGV4T2YoZVtuXS5maWVsZCkpcmV0dXJuIGVbbl07cmV0dXJuIG51bGx9ZnVuY3Rpb24gUihlKXt2YXIgdCxuPVwiQ1JPU1NKT0lOKHtcIjtyZXR1cm4gZS5sZW5ndGg+Mj8odD1lLnBvcCgpLG4rPVIoZSkpOihuKz1lLnNoaWZ0KCksdD1lLnBvcCgpKSxuKz1cIn0se1wiLG4rPXQsbis9XCJ9KVwifWZ1bmN0aW9uIEIoZSx0KXt2YXIgbj1lLnNsaWNlKDApO3JldHVybiB0Lmxlbmd0aD4xJiZuLnB1c2goXCJ7XCIrTCh0KS5qb2luKFwiLFwiKStcIn1cIiksUihuKX1mdW5jdGlvbiBMKGUpe2Zvcih2YXIgbixpPTAscj1lLmxlbmd0aCxvPVtdO3I+aTtpKyspbj1lW2ldLG8ucHVzaChuLm5hbWUhPT10P24ubmFtZTpuKTtyZXR1cm4gb31mdW5jdGlvbiBPKGUpe3JldHVybiBlPWUubmFtZXx8ZSxcIltvYmplY3QgQXJyYXldXCI9PT1fdC5jYWxsKGUpJiYoZT1lW2UubGVuZ3RoLTFdKSxlfWZ1bmN0aW9uIEgoZSl7Zm9yKHZhciB0PWUubGVuZ3RoLG49W10saT0wO3Q+aTtpKyspbi5wdXNoKGVbaV0ubmFtZVswXSk7cmV0dXJuIG59ZnVuY3Rpb24gTihlLHQpe3ZhciBuLGkscixvPTAsYT1lLmxlbmd0aCxzPXQubGVuZ3RoO2Zvcih0PXQuc2xpY2UoMCk7YT5vO28rKylmb3Iobj1lW29dLHI9MDtzPnI7cisrKWlmKGk9SSh0W3JdKSwtMSE9PW4uaW5kZXhPZihpKSl7dFtyXT1uO2JyZWFrfXJldHVybiB0fWZ1bmN0aW9uIFYoZSl7Zm9yKHZhciB0LG4saSxyLG8sYSxzPVtdLGw9W10sYz1bXSxkPTAsdT1lLmxlbmd0aDt1PmQ7ZCsrKWlmKHQ9ZVtkXSxyPXQubmFtZSxhPSExLFwiW29iamVjdCBBcnJheV1cIiE9PV90LmNhbGwocikmJih0Lm5hbWU9cj1bcl0pLHIubGVuZ3RoPjEpbC5wdXNoKHQpO2Vsc2V7Zm9yKG89SShyWzBdKSxuPTAsaT1jLmxlbmd0aDtpPm47bisrKWlmKDA9PT1jW25dLm5hbWVbMF0uaW5kZXhPZihvKSl7YT0hMDticmVha31hfHxjLnB1c2godCksdC5leHBhbmQmJnMucHVzaCh0KX1yZXR1cm4gcz1zLmNvbmNhdChsKSx7cm9vdDpjLGV4cGFuZGVkOnN9fWZ1bmN0aW9uIFUoZSx0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdT1cIlwiO2lmKGU9ZXx8W10saT1WKGUpLHI9aS5yb290LG89SChyKSxhPVtdLGk9aS5leHBhbmRlZCxzPWkubGVuZ3RoLGw9MCxkPVtdLG8ubGVuZ3RoPjF8fHQubGVuZ3RoPjEpe2ZvcihhLnB1c2goQihvLHQpKTtzPmw7bCsrKWM9eihpW2xdLm5hbWUsbiksZD1OKGMsbyksYS5wdXNoKEIoZCx0KSk7dSs9YS5qb2luKFwiLFwiKX1lbHNle2Zvcig7cz5sO2wrKyljPXooaVtsXS5uYW1lLG4pLGQucHVzaChjWzBdKTt1Kz1vLmNvbmNhdChkKS5qb2luKFwiLFwiKX1yZXR1cm4gdX1mdW5jdGlvbiBXKGUpe3ZhciB0PVwiXCIsbj1lLnZhbHVlLGk9ZS5maWVsZCxyPWUub3BlcmF0b3I7cmV0dXJuXCJpblwiPT1yPyh0Kz1cIntcIix0Kz1uLHQrPVwifVwiKToodCs9XCJGaWx0ZXIoXCIsdCs9aStcIi5DaGlsZHJlblwiLHQrPXB0LmZvcm1hdChZW3JdLGksbiksdCs9XCIpXCIpLHR9ZnVuY3Rpb24gaihlLHQpe3ZhciBuLGkscj1cIlwiLG89ZS5maWx0ZXJzLGE9by5sZW5ndGg7Zm9yKGk9YS0xO2k+PTA7aS0tKW49XCJTRUxFQ1QgKFwiLG4rPVcob1tpXSksbis9XCIpIE9OIDBcIixpPT1hLTE/KG4rPVwiIEZST00gW1wiK3QrXCJdXCIscj1uKTpyPW4rXCIgRlJPTSAoIFwiK3IrXCIgKVwiO3JldHVybiByfWZ1bmN0aW9uIEcoZSx0LG4pe3ZhciBpLHIsbz1cIlwiO2lmKHQpe28rPVwiPFwiK2UrXCI+XCI7Zm9yKHIgaW4gdClpPXRbcl0sbiYmKHI9ci5yZXBsYWNlKC8oW0EtWl0rKD89JHxbQS1aXVthLXpdKXxbQS1aXT9bYS16XSspL2csXCIkMV9cIikudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9fJC8sXCJcIikpLG8rPVwiPFwiK3IrXCI+XCIraStcIjwvXCIrcitcIj5cIjtvKz1cIjwvXCIrZStcIj5cIn1lbHNlIG8rPVwiPFwiK2UrXCIvPlwiO3JldHVybiBvfWZ1bmN0aW9uIHEoZSl7aWYobnVsbD09ZSlyZXR1cm5bXTt2YXIgdD1fdC5jYWxsKGUpO3JldHVyblwiW29iamVjdCBBcnJheV1cIiE9PXQ/W2VdOmV9ZnVuY3Rpb24gJChlKXt2YXIgdCxuLGkscixvPXt0dXBsZXM6W119LGE9cShwdC5nZXR0ZXIoXCJUdXBsZXMuVHVwbGVcIiwhMCkoZSkpLHM9cHQuZ2V0dGVyKFwiQ2FwdGlvblsnI3RleHQnXVwiKSxsPXB0LmdldHRlcihcIlVOYW1lWycjdGV4dCddXCIpLGM9cHQuZ2V0dGVyKFwiTE5hbWVbJyN0ZXh0J11cIiksZD1wdC5nZXR0ZXIoXCJMTnVtWycjdGV4dCddXCIpLHU9cHQuZ2V0dGVyKFwiQ0hJTERSRU5fQ0FSRElOQUxJVFlbJyN0ZXh0J11cIiwhMCksaD1wdC5nZXR0ZXIoXCJbJ0BIaWVyYXJjaHknXVwiKSxwPXB0LmdldHRlcihcIlBBUkVOVF9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKTtmb3IodD0wO2EubGVuZ3RoPnQ7dCsrKXtmb3Iobj1bXSxpPXEoYVt0XS5NZW1iZXIpLHI9MDtpLmxlbmd0aD5yO3IrKyluLnB1c2goe2NoaWxkcmVuOltdLGNhcHRpb246cyhpW3JdKSxuYW1lOmwoaVtyXSksbGV2ZWxOYW1lOmMoaVtyXSksbGV2ZWxOdW06ZChpW3JdKSxoYXNDaGlsZHJlbjpwYXJzZUludCh1KGlbcl0pLDEwKT4wLHBhcmVudE5hbWU6cChpW3JdKSxoaWVyYXJjaHk6aChpW3JdKX0pO28udHVwbGVzLnB1c2goe21lbWJlcnM6bn0pfXJldHVybiBvfXZhciBZLEssUSxYLEosWixldCx0dCxudCxpdCxydCxvdCxhdCxzdCxsdCxjdCxkdCx1dCxodCxwdD13aW5kb3cua2VuZG8sZnQ9cHQudWksZ3Q9cHQuQ2xhc3MsbXQ9ZnQuV2lkZ2V0LHZ0PXB0LmRhdGEuRGF0YVNvdXJjZSxfdD17fS50b1N0cmluZyx5dD1mdW5jdGlvbihlKXtyZXR1cm4gZX0sd3Q9ZS5tYXAsYnQ9ZS5leHRlbmQsa3Q9cHQuaXNGdW5jdGlvbix4dD1cImNoYW5nZVwiLEN0PVwiZXJyb3JcIixTdD1cInByb2dyZXNzXCIsVHQ9XCJzdGF0ZVJlc2V0XCIsRHQ9XCJhdXRvXCIsQXQ9XCI8ZGl2Lz5cIixFdD1cIi5rZW5kb1Bpdm90R3JpZFwiLE10PVwiX19yb3dfdG90YWxfX1wiLFB0PVwiZGF0YUJpbmRpbmdcIixJdD1cImRhdGFCb3VuZFwiLHp0PVwiZXhwYW5kTWVtYmVyXCIsRnQ9XCJjb2xsYXBzZU1lbWJlclwiLFJ0PVwiay1pLWFycm93LXNcIixCdD1cImstaS1hcnJvdy1lXCIsTHQ9XCIjOiBkYXRhLm1lbWJlci5jYXB0aW9uIHx8IGRhdGEubWVtYmVyLm5hbWUgI1wiLE90PSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWkta3BpLSM9ZGF0YS5kYXRhSXRlbS52YWx1ZSA+IDAgPyBcIm9wZW5cIiA6IGRhdGEuZGF0YUl0ZW0udmFsdWUgPCAwID8gXCJkZW5pZWRcIiA6IFwiaG9sZFwiI1wiPiM6ZGF0YS5kYXRhSXRlbS52YWx1ZSM8L3NwYW4+JyxIdD0nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWtwaS0jPWRhdGEuZGF0YUl0ZW0udmFsdWUgPiAwID8gXCJpbmNyZWFzZVwiIDogZGF0YS5kYXRhSXRlbS52YWx1ZSA8IDAgPyBcImRlY3JlYXNlXCIgOiBcImVxdWFsXCIjXCI+IzpkYXRhLmRhdGFJdGVtLnZhbHVlIzwvc3Bhbj4nLE50PScjPSBkYXRhLmRhdGFJdGVtID8ga2VuZG8uaHRtbEVuY29kZShkYXRhLmRhdGFJdGVtLmZtdFZhbHVlIHx8IGRhdGEuZGF0YUl0ZW0udmFsdWUpIHx8IFwiJm5ic3A7XCIgOiBcIiZuYnNwO1wiICMnLFZ0PSc8dGFibGUgY2xhc3M9XCJrLXBpdm90LWxheW91dFwiPjx0cj48dGQ+PGRpdiBjbGFzcz1cImstcGl2b3Qtcm93aGVhZGVyc1wiPjwvZGl2PjwvdGQ+PHRkPjxkaXYgY2xhc3M9XCJrLXBpdm90LXRhYmxlIGstc3RhdGUtZGVmYXVsdFwiPjwvZGl2PjwvdGQ+PC90cj48L3RhYmxlPicsVXQ9e3N1bTpmdW5jdGlvbihlLHQpe3ZhciBuPXQuYWNjdW11bGF0b3I7cmV0dXJuIGgobik/aChlKSYmKG4rPWUpOm49ZSxufSxjb3VudDpmdW5jdGlvbihlLHQpe3JldHVybih0LmFjY3VtdWxhdG9yfHwwKSsxfSxhdmVyYWdlOnthZ2dyZWdhdGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT1uLmFjY3VtdWxhdG9yO3JldHVybiBuLmNvdW50PT09dCYmKG4uY291bnQ9MCksaChpKT9oKGUpJiYoaSs9ZSk6aT1lLGgoZSkmJm4uY291bnQrKyxpfSxyZXN1bHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hY2N1bXVsYXRvcjtyZXR1cm4gaCh0KSYmKHQvPWUuY291bnQpLHR9fSxtYXg6ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmFjY3VtdWxhdG9yO3JldHVybiBoKG4pfHxwKG4pfHwobj1lKSxlPm4mJihoKGUpfHxwKGUpKSYmKG49ZSksbn0sbWluOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5hY2N1bXVsYXRvcjtyZXR1cm4gaChuKXx8cChuKXx8KG49ZSksbj5lJiYoaChlKXx8cChlKSkmJihuPWUpLG59fSxXdD1ndC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zPWJ0KHt9LHRoaXMub3B0aW9ucyxlKSx0aGlzLmRpbWVuc2lvbnM9dGhpcy5fbm9ybWFsaXplRGVzY3JpcHRvcnMoXCJmaWVsZFwiLHRoaXMub3B0aW9ucy5kaW1lbnNpb25zKSx0aGlzLm1lYXN1cmVzPXRoaXMuX25vcm1hbGl6ZURlc2NyaXB0b3JzKFwibmFtZVwiLHRoaXMub3B0aW9ucy5tZWFzdXJlcyl9LF9ub3JtYWxpemVEZXNjcmlwdG9yczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvO2lmKHQ9dHx8e30sbj17fSxcIltvYmplY3QgQXJyYXldXCI9PT1fdC5jYWxsKHQpKXtmb3Iocj0wLG89dC5sZW5ndGg7bz5yO3IrKylpPXRbcl0sXCJzdHJpbmdcIj09dHlwZW9mIGk/bltpXT17fTppW2VdJiYobltpW2VdXT1pKTt0PW59cmV0dXJuIHR9LF9hc1R1cGxlczpmdW5jdGlvbihlLG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoLHA7aWYoaT1pfHxbXSxyPXRoaXMuZGltZW5zaW9uc3x8W10sbz1bXSxoPWkubGVuZ3RofHwxLG4ubGVuZ3RofHxpLmxlbmd0aClmb3IoYz0wO2g+YztjKyspe2ZvcihhPXttZW1iZXJzOltdfSxzPTAsbD1uLmxlbmd0aDtsPnM7cysrKXU9TyhuW3NdLm5hbWUpLGEubWVtYmVyc1thLm1lbWJlcnMubGVuZ3RoXT17Y2hpbGRyZW46W10sY2FwdGlvbjooclt1XXx8e30pLmNhcHRpb258fFwiQWxsXCIsbmFtZTp1LGxldmVsTmFtZTp1LGxldmVsTnVtOlwiMFwiLGhhc0NoaWxkcmVuOiEwLHBhcmVudE5hbWU6dCxoaWVyYXJjaHk6dX07aD4xJiYoYS5tZW1iZXJzW2EubWVtYmVycy5sZW5ndGhdPXtjaGlsZHJlbjpbXSxjYXB0aW9uOmlbY10uY2FwdGlvbixuYW1lOmlbY10uZGVzY3JpcHRvci5uYW1lLGxldmVsTmFtZTpcIk1FQVNVUkVTXCIsbGV2ZWxOdW06XCIwXCIsaGFzQ2hpbGRyZW46ITEscGFyZW50TmFtZTp0LGhpZXJhcmNoeTpcIk1FQVNVUkVTXCJ9KSxvW28ubGVuZ3RoXT1hfWZvcihwIGluIGUpZm9yKGM9MDtoPmM7YysrKXtmb3IoZD17bWVtYmVyczpbXX0scz0wLGw9bi5sZW5ndGg7bD5zO3MrKyl1PU8obltzXS5uYW1lKSxkLm1lbWJlcnNbZC5tZW1iZXJzLmxlbmd0aF09MD09PWVbcF0ucGFyZW50TmFtZS5pbmRleE9mKHUpP3tjaGlsZHJlbjpbXSxjYXB0aW9uOmVbcF0udmFsdWUsbmFtZTplW3BdLm5hbWUsbGV2ZWxOYW1lOmVbcF0ubmFtZSxsZXZlbE51bToxLGhhc0NoaWxkcmVuOiExLHBhcmVudE5hbWU6dSxoaWVyYXJjaHk6dX06e2NoaWxkcmVuOltdLGNhcHRpb246KHJbdV18fHt9KS5jYXB0aW9ufHxcIkFsbFwiLG5hbWU6dSxsZXZlbE5hbWU6dSxsZXZlbE51bTpcIjBcIixoYXNDaGlsZHJlbjohMCxwYXJlbnROYW1lOnQsaGllcmFyY2h5OnV9O2g+MSYmKGQubWVtYmVyc1tkLm1lbWJlcnMubGVuZ3RoXT17Y2hpbGRyZW46W10sY2FwdGlvbjppW2NdLmNhcHRpb24sbmFtZTppW2NdLmRlc2NyaXB0b3IubmFtZSxsZXZlbE5hbWU6XCJNRUFTVVJFU1wiLGxldmVsTnVtOlwiMFwiLGhhc0NoaWxkcmVuOiEwLHBhcmVudE5hbWU6dCxoaWVyYXJjaHk6XCJNRUFTVVJFU1wifSksb1tvLmxlbmd0aF09ZH1yZXR1cm4gb30sX3RvRGF0YUFycmF5OmZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIG8sYSxzLGwsYyxkLHU9e30saD17fSxwPTAsZj1uJiZuLmxlbmd0aDtpZihmKWZvcihvPXRoaXMubWVhc3VyZXN8fHt9O2Y+cDtwKyspcz1uW3BdLm5hbWUsYT1vW3NdLGEucmVzdWx0JiYoaFtzXT1hLnJlc3VsdCksYS5mb3JtYXQmJih1W3NdPWEuZm9ybWF0KTtsPVtdLGM9MCxyKGwsYyxlLE10LGgsdSx0KTtmb3IoZCBpbiBlKWQhPT1NdCYmKGMrPWkscihsLGMsZSxkLGgsdSx0KSk7cmV0dXJuIGx9LF9tYXRjaERlc2NyaXB0b3JzOmZ1bmN0aW9uKGUsdCxuLGkpe2Zvcih2YXIgcixvLGEscyxsO2k+MDspaWYocj10Wy0taV0sbz1PKHIpLnNwbGl0KFwiJlwiKSxvLmxlbmd0aD4xJiYoYT1vWzBdLHM9b1sxXSxsPW5bYV0sbChlKSE9cykpcmV0dXJuITE7cmV0dXJuITB9LF9pc0V4cGFuZGVkOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGg7bj50O3QrKylpZihlW3RdLmV4cGFuZClyZXR1cm4hMDtyZXR1cm4hMX0sX2NhbGN1bGF0ZUFnZ3JlZ2F0ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGE9e307Zm9yKG89MDtlLmxlbmd0aD5vO28rKylyPWVbb10uZGVzY3JpcHRvci5uYW1lLGk9bi5hZ2dyZWdhdGVzW3JdfHx7fSxpLmFjY3VtdWxhdG9yPWVbb10uYWdncmVnYXRvcih0LGkpLGFbcl09aTtyZXR1cm4gYX0sX3Byb2Nlc3NDb2x1bW5zOmZ1bmN0aW9uKGUsbixpLHIsbyxhLHMsbCl7dmFyIGMsZCx1LGgscCxmLGc9by5kYXRhSXRlbTtmb3IoZj0wO24ubGVuZ3RoPmY7ZisrKWlmKGQ9bltmXSxkLmV4cGFuZCl7aWYoIXRoaXMuX21hdGNoRGVzY3JpcHRvcnMoZyxuLGksZikpY29udGludWU7dT1PKGQpLGM9aVt1XShnKSxjPWMhPT10P1wiXCIrYzpjLHU9dStcIiZcIitjLGg9clt1XXx8e2luZGV4OnMuY29sdW1uSW5kZXgsbmFtZTp1LHBhcmVudE5hbWU6dSx2YWx1ZTpjfSxwPWEuaXRlbXNbdV18fHthZ2dyZWdhdGVzOnt9fSxhLml0ZW1zW3VdPXtpbmRleDpoLmluZGV4LGFnZ3JlZ2F0ZXM6dGhpcy5fY2FsY3VsYXRlQWdncmVnYXRlKGUsbyxwKX0sbCYmKHJbdV18fHMuY29sdW1uSW5kZXgrKyxyW3VdPWgpfX0sX21lYXN1cmVBZ2dyZWdhdG9yczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEscz1lLm1lYXN1cmVzfHxbXSxsPXRoaXMubWVhc3VyZXN8fHt9LGM9W107aWYocy5sZW5ndGgpe2ZvcihpPTAscj1zLmxlbmd0aDtyPmk7aSsrKWlmKHQ9c1tpXSxuPWxbdC5uYW1lXSxvPW51bGwsbil7aWYoYT1uLmFnZ3JlZ2F0ZSxcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYobz1VdFthLnRvTG93ZXJDYXNlKCldLCFvKXRocm93IEVycm9yKFwiVGhlcmUgaXMgbm8gc3VjaCBhZ2dyZWdhdGUgZnVuY3Rpb25cIik7bi5hZ2dyZWdhdGU9by5hZ2dyZWdhdGV8fG8sbi5yZXN1bHQ9by5yZXN1bHR9Yy5wdXNoKHtkZXNjcmlwdG9yOnQsY2FwdGlvbjpuLmNhcHRpb24scmVzdWx0Om4ucmVzdWx0LGFnZ3JlZ2F0b3I6dShuKX0pfX1lbHNlIGMucHVzaCh7ZGVzY3JpcHRvcjp7bmFtZTpcImRlZmF1bHRcIn0sY2FwdGlvbjpcImRlZmF1bHRcIixhZ2dyZWdhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIDF9fSk7cmV0dXJuIGN9LF9idWlsZEdldHRlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXt9O2ZvcihyPTAsbz1lLmxlbmd0aDtvPnI7cisrKXQ9ZVtyXSxpPU8odCksbj1pLnNwbGl0KFwiJlwiKSxuLmxlbmd0aD4xP2FbblswXV09cHQuZ2V0dGVyKG5bMF0sITApOmFbaV09cHQuZ2V0dGVyKGksITApO3JldHVybiBhfSxwcm9jZXNzOmZ1bmN0aW9uKGUsbil7dmFyIHIsbyxhLHMsbCx1LGgscCxmLGcsbSx2LF8seSx3LGIsayx4LEMsUyxULEQsQSxFLE0sUDtpZihlPWV8fFtdLG49bnx8e30scj1uLm1lYXN1cmVzfHxbXSxvPVwicm93c1wiPT09bi5tZWFzdXJlc0F4aXMsYT0obz9uLnJvd3M6bi5jb2x1bW5zKXx8W10scz0obz9uLmNvbHVtbnM6bi5yb3dzKXx8W10sIWEubGVuZ3RoJiZzLmxlbmd0aCYmKCFyLmxlbmd0aHx8ci5sZW5ndGgmJm8pJiYoYT1zLHM9W10sbz0hMSksYS5sZW5ndGh8fHMubGVuZ3RofHwobz0hMSksIWEubGVuZ3RoJiZyLmxlbmd0aCYmKGE9aShuLm1lYXN1cmVzKSksbD17fSx1PXt9LGg9e30sZj17Y29sdW1uSW5kZXg6MH0sZz10aGlzLl9tZWFzdXJlQWdncmVnYXRvcnMobiksbT10aGlzLl9idWlsZEdldHRlcnMoYSksdj10aGlzLl9idWlsZEdldHRlcnMocyksXz0hMSxhLmxlbmd0aHx8cy5sZW5ndGgpZm9yKGI9dGhpcy5faXNFeHBhbmRlZChzKSxfPSEwLGs9MCx4PWUubGVuZ3RoO3g+aztrKyspZm9yKHk9ZVtrXSx3PXtkYXRhSXRlbTp5LGluZGV4Omt9LEM9bFtNdF18fHtpdGVtczp7fSxhZ2dyZWdhdGVzOnt9fSx0aGlzLl9wcm9jZXNzQ29sdW1ucyhnLGEsbSx1LHcsQyxmLCFiKSxDLmFnZ3JlZ2F0ZXM9dGhpcy5fY2FsY3VsYXRlQWdncmVnYXRlKGcsdyxDKSxsW010XT1DLFM9MCxUPXMubGVuZ3RoO1Q+UztTKyspaWYoRD1zW1NdLEQuZXhwYW5kKXtpZighdGhpcy5fbWF0Y2hEZXNjcmlwdG9ycyh5LHMsdixTKSljb250aW51ZTtBPU8oRCkscD12W0FdKHkpLHA9cCE9PXQ/XCJcIitwOnAsaFtwXT17bmFtZTpBK1wiJlwiK3AscGFyZW50TmFtZTpBLHZhbHVlOnB9LEU9bFtwXXx8e2l0ZW1zOnt9LGFnZ3JlZ2F0ZXM6e319LHRoaXMuX3Byb2Nlc3NDb2x1bW5zKGcsYSxtLHUsdyxFLGYsITApLEUuYWdncmVnYXRlcz10aGlzLl9jYWxjdWxhdGVBZ2dyZWdhdGUoZyx3LEUpLGxbcF09RX1yZXR1cm4gXyYmZS5sZW5ndGg/KCEoZy5sZW5ndGg+MSl8fG4uY29sdW1ucyYmbi5jb2x1bW5zLmxlbmd0aHx8KGE9W10pLHU9dGhpcy5fYXNUdXBsZXModSxhLGcpLGg9dGhpcy5fYXNUdXBsZXMoaCxzLFtdKSxNPXUubGVuZ3RoLG8mJihNPTEsUD11LHU9aCxoPVApLGw9dGhpcy5fdG9EYXRhQXJyYXkobCx1Lmxlbmd0aCxuLm1lYXN1cmVzLE0sbz9jOmQpLGw9dGhpcy5fbm9ybWFsaXplRGF0YShsLHUubGVuZ3RoLGgubGVuZ3RoKSk6bD11PWg9W10se2F4ZXM6e2NvbHVtbnM6e3R1cGxlczp1fSxyb3dzOnt0dXBsZXM6aH19LGRhdGE6bH19LF9ub3JtYWxpemVEYXRhOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89KHR8fDEpKihufHwxKSxhPUFycmF5KG8pLHM9ZS5sZW5ndGg7aWYocz09PW8pcmV0dXJuIGU7Zm9yKHI9MDtvPnI7cisrKWFbcl09e3ZhbHVlOlwiXCIsZm10VmFsdWU6XCJcIixvcmRpbmFsOnJ9O2ZvcihyPTA7cz5yO3IrKylpPWVbcl0saSYmKGFbaS5vcmRpbmFsXT1pKTtyZXR1cm4gYX19KSxqdD1ndC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnRyYW5zcG9ydD10LHRoaXMub3B0aW9ucz10Lm9wdGlvbnN8fHt9LHRoaXMudHJhbnNwb3J0LmRpc2NvdmVyfHxrdChlLmRpc2NvdmVyKSYmKHRoaXMuZGlzY292ZXI9ZS5kaXNjb3Zlcil9LHJlYWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LnJlYWQoZSl9LHVwZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQudXBkYXRlKGUpfSxjcmVhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LmNyZWF0ZShlKX0sZGVzdHJveTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuZGVzdHJveShlKX0sZGlzY292ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LmRpc2NvdmVyP3RoaXMudHJhbnNwb3J0LmRpc2NvdmVyKGUpOihlLnN1Y2Nlc3Moe30pLHQpfSxjYXRhbG9nOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcy5vcHRpb25zfHx7fTtyZXR1cm4gbj09PXQ/KHIuY29ubmVjdGlvbnx8e30pLmNhdGFsb2c6KGk9ci5jb25uZWN0aW9ufHx7fSxpLmNhdGFsb2c9bix0aGlzLm9wdGlvbnMuY29ubmVjdGlvbj1pLGUuZXh0ZW5kKHRoaXMudHJhbnNwb3J0Lm9wdGlvbnMse2Nvbm5lY3Rpb246aX0pLHQpfSxjdWJlOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcy5vcHRpb25zfHx7fTtyZXR1cm4gZT09PXQ/KGkuY29ubmVjdGlvbnx8e30pLmN1YmU6KG49aS5jb25uZWN0aW9ufHx7fSxuLmN1YmU9ZSx0aGlzLm9wdGlvbnMuY29ubmVjdGlvbj1uLGJ0KCEwLHRoaXMudHJhbnNwb3J0Lm9wdGlvbnMse2Nvbm5lY3Rpb246bn0pLHQpfX0pLEd0PXZ0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt2YXIgcixvPSgodHx8e30pLnNjaGVtYXx8e30pLmN1YmUsYT1cImNvbHVtbnNcIixzPXtheGVzOnl0LGN1YmVzOnl0LGNhdGFsb2dzOnl0LG1lYXN1cmVzOnl0LGRpbWVuc2lvbnM6eXQsaGllcmFyY2hpZXM6eXQsbGV2ZWxzOnl0LG1lbWJlcnM6eXR9O28mJihzPWUuZXh0ZW5kKHMsdGhpcy5fY3ViZVNjaGVtYShvKSksdGhpcy5jdWJlQnVpbGRlcj1uZXcgV3QobykpLHZ0LmZuLmluaXQuY2FsbCh0aGlzLGJ0KCEwLHt9LHtzY2hlbWE6c30sdCkpLHRoaXMudHJhbnNwb3J0PW5ldyBqdCh0aGlzLm9wdGlvbnMudHJhbnNwb3J0fHx7fSx0aGlzLnRyYW5zcG9ydCksdGhpcy5fY29sdW1ucz1pKHRoaXMub3B0aW9ucy5jb2x1bW5zKSx0aGlzLl9yb3dzPWkodGhpcy5vcHRpb25zLnJvd3MpLHI9dGhpcy5vcHRpb25zLm1lYXN1cmVzfHxbXSxudWxsIT09dGhpcy5vcHRpb25zLm1lYXN1cmVzJiZcIltvYmplY3QgT2JqZWN0XVwiPT09X3QuY2FsbCh0aGlzLm9wdGlvbnMubWVhc3VyZXMpJiYocj10aGlzLm9wdGlvbnMubWVhc3VyZXMudmFsdWVzfHxbXSxhPXRoaXMub3B0aW9ucy5tZWFzdXJlcy5heGlzfHxcImNvbHVtbnNcIiksdGhpcy5fbWVhc3VyZXM9bihyfHxbXSksdGhpcy5fbWVhc3VyZXNBeGlzPWEsdGhpcy5fYXhlcz17fX0sX2N1YmVTY2hlbWE6ZnVuY3Rpb24oZSl7cmV0dXJue2RpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgdCxuPVtdLGk9ZS5kaW1lbnNpb25zO2Zvcih0IGluIGkpbi5wdXNoKHtuYW1lOnQsY2FwdGlvbjppW3RdLmNhcHRpb258fHQsdW5pcXVlTmFtZTp0LGRlZmF1bHRIaWVyYXJjaHk6dCx0eXBlOjF9KTtyZXR1cm4gZS5tZWFzdXJlcyYmbi5wdXNoKHtuYW1lOlwiTWVhc3VyZXNcIixjYXB0aW9uOlwiTWVhc3VyZXNcIix1bmlxdWVOYW1lOlwiTWVhc3VyZXNcIix0eXBlOjJ9KSxufSxoaWVyYXJjaGllczpmdW5jdGlvbigpe3JldHVybltdfSxtZWFzdXJlczpmdW5jdGlvbigpe3ZhciB0LG49W10saT1lLm1lYXN1cmVzO2Zvcih0IGluIGkpbi5wdXNoKHtuYW1lOnQsY2FwdGlvbjp0LHVuaXF1ZU5hbWU6dCxhZ2dyZWdhdG9yOnR9KTtyZXR1cm4gbn19fSxvcHRpb25zOntzZXJ2ZXJTb3J0aW5nOiEwLHNlcnZlclBhZ2luZzohMCxzZXJ2ZXJGaWx0ZXJpbmc6ITAsc2VydmVyR3JvdXBpbmc6ITAsc2VydmVyQWdncmVnYXRlczohMH0sY2F0YWxvZzpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy50cmFuc3BvcnQuY2F0YWxvZygpOih0aGlzLnRyYW5zcG9ydC5jYXRhbG9nKGUpLHRoaXMuX21lcmdlU3RhdGUoe30pLHRoaXMuX2F4ZXM9e30sdGhpcy5kYXRhKFtdKSx0KX0sY3ViZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy50cmFuc3BvcnQuY3ViZSgpOih0aGlzLnRyYW5zcG9ydC5jdWJlKGUpLHRoaXMuX2F4ZXM9e30sdGhpcy5fbWVyZ2VTdGF0ZSh7fSksdGhpcy5kYXRhKFtdKSx0KX0sYXhlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9heGVzfSxjb2x1bW5zOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9jb2x1bW5zOih0aGlzLl9jbGVhckF4ZXNEYXRhPSEwLHRoaXMuX2NvbHVtbnM9aShlKSx0aGlzLnF1ZXJ5KHtjb2x1bW5zOmUscm93czp0aGlzLnJvd3NBeGlzRGVzY3JpcHRvcnMoKSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9KSx0KX0scm93czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5fcm93czoodGhpcy5fY2xlYXJBeGVzRGF0YT0hMCx0aGlzLl9yb3dzPWkoZSksdGhpcy5xdWVyeSh7Y29sdW1uczp0aGlzLmNvbHVtbnNBeGlzRGVzY3JpcHRvcnMoKSxyb3dzOmUsbWVhc3VyZXM6dGhpcy5tZWFzdXJlcygpfSksdCl9LG1lYXN1cmVzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD90aGlzLl9tZWFzdXJlczoodGhpcy5fY2xlYXJBeGVzRGF0YT0hMCx0aGlzLnF1ZXJ5KHtjb2x1bW5zOnRoaXMuY29sdW1uc0F4aXNEZXNjcmlwdG9ycygpLHJvd3M6dGhpcy5yb3dzQXhpc0Rlc2NyaXB0b3JzKCksbWVhc3VyZXM6bihlKX0pLHQpfSxtZWFzdXJlc0F4aXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVhc3VyZXNBeGlzfHxcImNvbHVtbnNcIn0sX2V4cGFuZFBhdGg6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLG8sYT1cImNvbHVtbnNcIj09PXQ/XCJjb2x1bW5zXCI6XCJyb3dzXCIscz1cImNvbHVtbnNcIj09PXQ/XCJyb3dzXCI6XCJjb2x1bW5zXCIsYz1pKGUpLGQ9TyhjW2MubGVuZ3RoLTFdKTtmb3IodGhpcy5fbGFzdEV4cGFuZGVkPWEsYz1sKHRoaXMuYXhlcygpW2FdLGMsdGhpcy5tZWFzdXJlcygpKSxuPTA7Yy5sZW5ndGg+bjtuKyspaWYocj1PKGNbbl0pLHI9PT1kKXtpZihjW25dLmV4cGFuZClyZXR1cm47Y1tuXS5leHBhbmQ9ITB9ZWxzZSBjW25dLmV4cGFuZD0hMTtvPXt9LG9bYV09YyxvW3NdPXRoaXMuX2Rlc2NyaXB0b3JzRm9yQXhpcyhzKSx0aGlzLl9xdWVyeShvKX0sX2Rlc2NyaXB0b3JzRm9yQXhpczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmF4ZXMoKSxuPXRoaXNbZV0oKXx8W107cmV0dXJuIHQmJnRbZV0mJnRbZV0udHVwbGVzJiZ0W2VdLnR1cGxlc1swXSYmKG49byh0W2VdLnR1cGxlc3x8W10pKSxufSxjb2x1bW5zQXhpc0Rlc2NyaXB0b3JzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3JzRm9yQXhpcyhcImNvbHVtbnNcIil9LHJvd3NBeGlzRGVzY3JpcHRvcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcnNGb3JBeGlzKFwicm93c1wiKX0sX3Byb2Nlc3M6ZnVuY3Rpb24oZSx0KXt0aGlzLl92aWV3PWUsdD10fHx7fSx0Lml0ZW1zPXQuaXRlbXN8fHRoaXMuX3ZpZXcsdGhpcy50cmlnZ2VyKHh0LHQpfSxfcXVlcnk6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZXx8KHRoaXMuX2NsZWFyQXhlc0RhdGE9ITApLHQucXVlcnkoYnQoe30se3BhZ2U6dC5wYWdlKCkscGFnZVNpemU6dC5wYWdlU2l6ZSgpLHNvcnQ6dC5zb3J0KCksZmlsdGVyOnQuZmlsdGVyKCksZ3JvdXA6dC5ncm91cCgpLGFnZ3JlZ2F0ZTp0LmFnZ3JlZ2F0ZSgpLGNvbHVtbnM6dGhpcy5jb2x1bW5zQXhpc0Rlc2NyaXB0b3JzKCkscm93czp0aGlzLnJvd3NBeGlzRGVzY3JpcHRvcnMoKSxtZWFzdXJlczp0aGlzLm1lYXN1cmVzKCl9LGUpKX0scXVlcnk6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5fbWVyZ2VTdGF0ZSh0KTtyZXR1cm4gdGhpcy5fZGF0YS5sZW5ndGgmJnRoaXMuY3ViZUJ1aWxkZXI/KHRoaXMuX3BhcmFtcyhuKSx0aGlzLl91cGRhdGVMb2NhbERhdGEodGhpcy5fcHJpc3RpbmVEYXRhKSxlLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKSk6dGhpcy5yZWFkKG4pfSxfbWVyZ2VTdGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT12dC5mbi5fbWVyZ2VTdGF0ZS5jYWxsKHRoaXMsZSksZSE9PXQmJih0aGlzLl9tZWFzdXJlcz1uKGUubWVhc3VyZXMpLGUuY29sdW1ucz9lLmNvbHVtbnM9aShlLmNvbHVtbnMpOmUuY29sdW1uc3x8KHRoaXMuX2NvbHVtbnM9W10pLGUucm93cz9lLnJvd3M9aShlLnJvd3MpOmUucm93c3x8KHRoaXMuX3Jvd3M9W10pKSxlfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3RoaXMuX2ZpbHRlcjoodGhpcy5fY2xlYXJBeGVzRGF0YT0hMCx0aGlzLl9xdWVyeSh7ZmlsdGVyOmUscGFnZToxfSksdCl9LGV4cGFuZENvbHVtbjpmdW5jdGlvbihlKXt0aGlzLl9leHBhbmRQYXRoKGUsXCJjb2x1bW5zXCIpfSxleHBhbmRSb3c6ZnVuY3Rpb24oZSl7dGhpcy5fZXhwYW5kUGF0aChlLFwicm93c1wiKX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgdDt0aGlzLmN1YmVCdWlsZGVyJiYodD0odGhpcy5yZWFkZXIuZGF0YShlKXx8W10pLnNsaWNlKDApKSx2dC5mbi5zdWNjZXNzLmNhbGwodGhpcyxlKSx0JiYodGhpcy5fcHJpc3RpbmVEYXRhPXQpfSxfcHJvY2Vzc1Jlc3VsdDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGg7cmV0dXJuIHRoaXMuY3ViZUJ1aWxkZXImJihuPXRoaXMuY3ViZUJ1aWxkZXIucHJvY2VzcyhlLHRoaXMuX3JlcXVlc3REYXRhKSxlPW4uZGF0YSx0PW4uYXhlcyksYz10aGlzLmNvbHVtbnMoKS5sZW5ndGgsZD10aGlzLnJvd3MoKS5sZW5ndGgsdT10LmNvbHVtbnMmJnQuY29sdW1ucy50dXBsZXMsY3x8IWR8fCF1fHwhdGhpcy5fcm93TWVhc3VyZXMoKS5sZW5ndGgmJnRoaXMubWVhc3VyZXMoKS5sZW5ndGh8fCh0PXtjb2x1bW5zOnt9LHJvd3M6dC5jb2x1bW5zfSksY3x8ZHx8XCJyb3dzXCIhPT10aGlzLm1lYXN1cmVzQXhpcygpfHwhdXx8KHQ9e2NvbHVtbnM6e30scm93czp0LmNvbHVtbnN9KSx0aGlzLl9heGVzPXtjb2x1bW5zOnkodGhpcy5fYXhlcy5jb2x1bW5zKSxyb3dzOnkodGhpcy5fYXhlcy5yb3dzKX0sdD17Y29sdW1uczp5KHQuY29sdW1ucykscm93czp5KHQucm93cyl9LGk9dGhpcy5fbm9ybWFsaXplVHVwbGVzKHQuY29sdW1ucy50dXBsZXMsdGhpcy5fYXhlcy5jb2x1bW5zLnR1cGxlcyx0aGlzLl9jb2x1bW5NZWFzdXJlcygpKSxyPXRoaXMuX25vcm1hbGl6ZVR1cGxlcyh0LnJvd3MudHVwbGVzLHRoaXMuX2F4ZXMucm93cy50dXBsZXMsdGhpcy5fcm93TWVhc3VyZXMoKSksdGhpcy5jdWJlQnVpbGRlcnx8KGU9dGhpcy5fbm9ybWFsaXplRGF0YSh7Y29sdW1uc0xlbmd0aDp0LmNvbHVtbnMudHVwbGVzLmxlbmd0aCxyb3dzTGVuZ3RoOnQucm93cy50dXBsZXMubGVuZ3RoLGNvbHVtbkluZGV4ZXM6aSxyb3dJbmRleGVzOnIsZGF0YTplfSkpLFwicm93c1wiPT10aGlzLl9sYXN0RXhwYW5kZWQ/KG89dC5jb2x1bW5zLnR1cGxlcyxzPXRoaXMuX2NvbHVtbk1lYXN1cmVzKCksYT1mKHQuY29sdW1ucyx0aGlzLl9heGVzLmNvbHVtbnMscyksYSYmKGw9XCJjb2x1bW5zXCIsdC5jb2x1bW5zPWEsZyhvLGEudHVwbGVzLHQucm93cy50dXBsZXMubGVuZ3RoLHMsZSksZT10aGlzLl9ub3JtYWxpemVEYXRhKHtjb2x1bW5zTGVuZ3RoOl8odC5jb2x1bW5zLnR1cGxlcyxzKSxyb3dzTGVuZ3RoOnQucm93cy50dXBsZXMubGVuZ3RoLGRhdGE6ZX0pKSk6XCJjb2x1bW5zXCI9PXRoaXMuX2xhc3RFeHBhbmRlZCYmKG89dC5yb3dzLnR1cGxlcyxzPXRoaXMuX3Jvd01lYXN1cmVzKCksYT1mKHQucm93cyx0aGlzLl9heGVzLnJvd3MscyksYSYmKGw9XCJyb3dzXCIsdC5yb3dzPWEsbShvLGEudHVwbGVzLHQuY29sdW1ucy50dXBsZXMubGVuZ3RoLHMsZSksZT10aGlzLl9ub3JtYWxpemVEYXRhKHtjb2x1bW5zTGVuZ3RoOl8odC5yb3dzLnR1cGxlcyxzKSxyb3dzTGVuZ3RoOnQuY29sdW1ucy50dXBsZXMubGVuZ3RoLGRhdGE6ZX0pKSksdGhpcy5fbGFzdEV4cGFuZGVkPW51bGwsaD10aGlzLl9tZXJnZUF4ZXModCxlLGwpLHRoaXMuX2F4ZXM9aC5heGVzLGguZGF0YX0sX3JlYWREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucmVhZGVyLmF4ZXMoZSksbj10aGlzLnJlYWRlci5kYXRhKGUpO3JldHVybiB0aGlzLl9wcm9jZXNzUmVzdWx0KG4sdCl9LF9jcmVhdGVUdXBsZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsPWUubWVtYmVycyxjPWwubGVuZ3RoLGQ9e21lbWJlcnM6W119LHU9MDtmb3IodCYmKGMtPTEpO2M+dTt1Kyspcj1sW3VdLGE9K3IubGV2ZWxOdW0saT1yLm5hbWUsbz1yLnBhcmVudE5hbWUscz1yLmNhcHRpb258fGksbiYmKHM9XCJBbGxcIiwwPT09YT9vPXIubmFtZTphLT0xLGk9byksZC5tZW1iZXJzLnB1c2goe25hbWU6aSxjaGlsZHJlbjpbXSxjYXB0aW9uOnMsbGV2ZWxOYW1lOm8sbGV2ZWxOdW06XCJcIithLGhhc0NoaWxkcmVuOm4saGllcmFyY2h5Om8scGFyZW50TmFtZTpuP1wiXCI6b30pO3JldHVybiB0JiZkLm1lbWJlcnMucHVzaCh7bmFtZTp0Lm5hbWUsY2hpbGRyZW46W119KSxkfSxfaGFzUm9vdDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscztpZih0Lmxlbmd0aClyZXR1cm4geCh0LGUpLnR1cGxlO2ZvcihuPWUubWVtYmVycyxyPSEwLGE9MCxzPW4ubGVuZ3RoO3M+YTthKyspaWYoaT1uW2FdLG89K2kubGV2ZWxOdW18fDAsMCE9PW8pe3I9ITE7YnJlYWt9cmV0dXJuIHJ9LF9tZXJnZUF4ZXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbD10aGlzLl9jb2x1bW5NZWFzdXJlcygpLGM9dGhpcy5fcm93TWVhc3VyZXMoKSxkPXRoaXMuYXhlcygpLHU9ZS5yb3dzLnR1cGxlcy5sZW5ndGgsaD1fKGQuY29sdW1ucy50dXBsZXMsbCkscD1lLmNvbHVtbnMudHVwbGVzLmxlbmd0aDtyZXR1cm5cImNvbHVtbnNcIj09bj8ocD1oLHI9ZS5jb2x1bW5zLnR1cGxlcyk6KHI9QShlLmNvbHVtbnMudHVwbGVzLGwpLHQ9TShyLHQpKSxvPWIoZC5jb2x1bW5zLnR1cGxlcyxyLGwpLFwicm93c1wiPT1uPyh1PV8oZS5yb3dzLnR1cGxlcyxjKSxyPWUucm93cy50dXBsZXMpOihyPUEoZS5yb3dzLnR1cGxlcyxjKSx0PUUocix0KSksYT1iKGQucm93cy50dXBsZXMscixjKSxkLmNvbHVtbnMudHVwbGVzPW8udHVwbGVzLGQucm93cy50dXBsZXM9YS50dXBsZXMsaCE9PV8oZC5jb2x1bW5zLnR1cGxlcyxsKT8oaT1vLmluZGV4K3coby5wYXJzZWRSb290LG8ubWVtYmVySW5kZXgsbCkscz1oK3AsdD10aGlzLl9tZXJnZUNvbHVtbkRhdGEodCxpLHUscCxzKSk6KGk9YS5pbmRleCt3KGEucGFyc2VkUm9vdCxhLm1lbWJlckluZGV4LGMpLHQ9dGhpcy5fbWVyZ2VSb3dEYXRhKHQsaSx1LHApKSx7YXhlczpkLGRhdGE6dH19LF9tZXJnZUNvbHVtbkRhdGE6ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbyxhLHMsbD10aGlzLmRhdGEoKS50b0pTT04oKSxjPTAsZD1NYXRoLm1heCh0aGlzLl9jb2x1bW5NZWFzdXJlcygpLmxlbmd0aCwxKTtmb3Iobj1NYXRoLm1heChuLDEpLGwubGVuZ3RoPjAmJihjPWQsci09ZCksbz0wO24+bztvKyspYT10K28qcixzPWUuc3BsaWNlKDAsaSkscy5zcGxpY2UoMCxjKSxbXS5zcGxpY2UuYXBwbHkobCxbYSwwXS5jb25jYXQocykpO3JldHVybiBsfSxfbWVyZ2VSb3dEYXRhOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxzPXRoaXMuZGF0YSgpLnRvSlNPTigpLGw9TWF0aC5tYXgodGhpcy5fcm93TWVhc3VyZXMoKS5sZW5ndGgsMSk7Zm9yKGk9TWF0aC5tYXgoaSwxKSxzLmxlbmd0aD4wJiYobi09bCxlLnNwbGljZSgwLGkqbCkpLHI9MDtuPnI7cisrKWE9ZS5zcGxpY2UoMCxpKSxvPXQqaStyKmksW10uc3BsaWNlLmFwcGx5KHMsW28sMF0uY29uY2F0KGEpKTtyZXR1cm4gc30sX2NvbHVtbk1lYXN1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWFzdXJlcygpLHQ9W107cmV0dXJuXCJjb2x1bW5zXCI9PT10aGlzLm1lYXN1cmVzQXhpcygpJiYoMD09PXRoaXMuY29sdW1ucygpLmxlbmd0aD90PWU6ZS5sZW5ndGg+MSYmKHQ9ZSkpLHR9LF9yb3dNZWFzdXJlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVhc3VyZXMoKSx0PVtdO3JldHVyblwicm93c1wiPT09dGhpcy5tZWFzdXJlc0F4aXMoKSYmKDA9PT10aGlzLnJvd3MoKS5sZW5ndGg/dD1lOmUubGVuZ3RoPjEmJih0PWUpKSx0fSxfdXBkYXRlTG9jYWxEYXRhOmZ1bmN0aW9uKGUsdCl7dGhpcy5jdWJlQnVpbGRlciYmKHQmJih0aGlzLl9yZXF1ZXN0RGF0YT10KSxlPXRoaXMuX3Byb2Nlc3NSZXN1bHQoZSkpLHRoaXMuX2RhdGE9dGhpcy5fb2JzZXJ2ZShlKSx0aGlzLl9yYW5nZXM9W10sdGhpcy5fYWRkUmFuZ2UodGhpcy5fZGF0YSksdGhpcy5fdG90YWw9dGhpcy5fZGF0YS5sZW5ndGgsdGhpcy5fcHJpc3RpbmVUb3RhbD10aGlzLl90b3RhbCx0aGlzLl9wcm9jZXNzKHRoaXMuX2RhdGEpfSxkYXRhOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU9PT10P24uX2RhdGE6KHRoaXMuX3ByaXN0aW5lRGF0YT1lLnNsaWNlKDApLHRoaXMuX3VwZGF0ZUxvY2FsRGF0YShlLHtjb2x1bW5zOnRoaXMuY29sdW1ucygpLHJvd3M6dGhpcy5yb3dzKCksbWVhc3VyZXM6dGhpcy5tZWFzdXJlcygpfSksdCl9LF9ub3JtYWxpemVUdXBsZXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPW4ubGVuZ3RofHwxLHM9MCxsPVtdLGM9e30sZD0wO2lmKGUubGVuZ3RoKXtpZighdGhpcy5faGFzUm9vdChlWzBdLHQpKXtmb3IoO2E+cztzKyspbC5wdXNoKHRoaXMuX2NyZWF0ZVR1cGxlKGVbMF0sbltzXSwhMCkpLGNbc109cztlLnNwbGljZS5hcHBseShlLFswLGUubGVuZ3RoXS5jb25jYXQobCkuY29uY2F0KGUpKSxzPWF9aWYobi5sZW5ndGgpZm9yKG89aT1lW3NdLHI9aS5tZW1iZXJzLmxlbmd0aC0xO2k7KXtpZihkPj1hJiYoZD0wKSxpLm1lbWJlcnNbcl0ubmFtZSE9PW5bZF0ubmFtZSYmKGUuc3BsaWNlKHMsMCx0aGlzLl9jcmVhdGVUdXBsZShpLG5bZF0pKSxjW3NdPXMpLHMrPTEsZCs9MSxpPWVbc10sYT5kJiYoIWl8fGN0KG8sci0xKSE9PWN0KGksci0xKSkpe2Zvcig7YT5kO2QrKyllLnNwbGljZShzLDAsdGhpcy5fY3JlYXRlVHVwbGUobyxuW2RdKSksY1tzXT1zLHMrPTE7aT1lW3NdfW89aX1yZXR1cm4gY319LF9ub3JtYWxpemVEYXRhOmZ1bmN0aW9uKGUpe3ZhciBuLGkscj1lLmRhdGEsbz1lLmNvbHVtbkluZGV4ZXN8fHt9LGE9ZS5yb3dJbmRleGVzfHx7fSxzPWUuY29sdW1uc0xlbmd0aHx8MSxsPXMqKGUucm93c0xlbmd0aHx8MSksYz0wLGQ9MCx1PTAsaD1BcnJheShsKTtpZihyLmxlbmd0aD09PWwpcmV0dXJuIHI7Zm9yKDtsPmM7YysrKXtpZihhW3BhcnNlSW50KGMvcywxMCldIT09dClmb3IoaT0wO3M+aTtpKyspaFtjXT17dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6Y30sYys9MTtpZihvW2Mlc10hPT10JiYoaFtjXT17dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6Y30sYys9MSksbj1yW2RdKXtpZihuLm9yZGluYWwtdT4xKWZvcih1Kz0xO24ub3JkaW5hbD51O3UrKyloW2NdPXt2YWx1ZTpcIlwiLGZtdFZhbHVlOlwiXCIsb3JkaW5hbDpjfSxjKz0xO3U9bi5vcmRpbmFsLG4ub3JkaW5hbD1jLGhbY109bixkKz0xfWVsc2UgaFtjXT17dmFsdWU6XCJcIixmbXRWYWx1ZTpcIlwiLG9yZGluYWw6Y319cmV0dXJuIGh9LGRpc2NvdmVyOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcyxyPWkudHJhbnNwb3J0O3JldHVybiBlLkRlZmVycmVkKGZ1bmN0aW9uKGUpe3IuZGlzY292ZXIoYnQoe3N1Y2Nlc3M6ZnVuY3Rpb24odCl7dD1pLnJlYWRlci5wYXJzZSh0KSxpLl9oYW5kbGVDdXN0b21FcnJvcnModCl8fChuJiYodD1uKHQpKSxlLnJlc29sdmUodCkpfSxlcnJvcjpmdW5jdGlvbih0LG4scil7ZS5yZWplY3QodCksaS5lcnJvcih0LG4scil9fSx0KSl9KS5wcm9taXNlKCkuZG9uZShmdW5jdGlvbigpe2kudHJpZ2dlcihcInNjaGVtYUNoYW5nZVwiKX0pfSxzY2hlbWFNZWFzdXJlczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFNZWFzdXJlc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6ZS50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOmUudHJhbnNwb3J0LmN1YmUoKX19fSxmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWFkZXIubWVhc3VyZXModCl9KX0sc2NoZW1hS1BJczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFLUElzXCIscmVzdHJpY3Rpb25zOntjYXRhbG9nTmFtZTplLnRyYW5zcG9ydC5jYXRhbG9nKCksY3ViZU5hbWU6ZS50cmFuc3BvcnQuY3ViZSgpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5rcGlzKHQpfSl9LHNjaGVtYURpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hRGltZW5zaW9uc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6ZS50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOmUudHJhbnNwb3J0LmN1YmUoKX19fSxmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWFkZXIuZGltZW5zaW9ucyh0KX0pfSxzY2hlbWFIaWVyYXJjaGllczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0LmRpc2NvdmVyKHtkYXRhOntjb21tYW5kOlwic2NoZW1hSGllcmFyY2hpZXNcIixyZXN0cmljdGlvbnM6e2NhdGFsb2dOYW1lOnQudHJhbnNwb3J0LmNhdGFsb2coKSxjdWJlTmFtZTp0LnRyYW5zcG9ydC5jdWJlKCksZGltZW5zaW9uVW5pcXVlTmFtZTplfX19LGZ1bmN0aW9uKGUpe3JldHVybiB0LnJlYWRlci5oaWVyYXJjaGllcyhlKX0pfSxzY2hlbWFMZXZlbHM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYUxldmVsc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6dC50cmFuc3BvcnQuY2F0YWxvZygpLGN1YmVOYW1lOnQudHJhbnNwb3J0LmN1YmUoKSxoaWVyYXJjaHlVbmlxdWVOYW1lOmV9fX0sZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVhZGVyLmxldmVscyhlKX0pfSxzY2hlbWFDdWJlczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFDdWJlc1wiLHJlc3RyaWN0aW9uczp7Y2F0YWxvZ05hbWU6ZS50cmFuc3BvcnQuY2F0YWxvZygpfX19LGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlYWRlci5jdWJlcyh0KX0pfSxzY2hlbWFDYXRhbG9nczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuZGlzY292ZXIoe2RhdGE6e2NvbW1hbmQ6XCJzY2hlbWFDYXRhbG9nc1wifX0sZnVuY3Rpb24odCl7cmV0dXJuIGUucmVhZGVyLmNhdGFsb2dzKHQpfSl9LHNjaGVtYU1lbWJlcnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdC5kaXNjb3Zlcih7ZGF0YTp7Y29tbWFuZDpcInNjaGVtYU1lbWJlcnNcIixyZXN0cmljdGlvbnM6YnQoe2NhdGFsb2dOYW1lOnQudHJhbnNwb3J0LmNhdGFsb2coKSxjdWJlTmFtZTp0LnRyYW5zcG9ydC5jdWJlKCl9LGUpfX0sZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVhZGVyLm1lbWJlcnMoZSl9KX0sX3BhcmFtczpmdW5jdGlvbihlKXt0aGlzLl9jbGVhckF4ZXNEYXRhJiYodGhpcy5fYXhlcz17fSx0aGlzLl9kYXRhPXRoaXMuX29ic2VydmUoW10pLHRoaXMuX2NsZWFyQXhlc0RhdGE9ITEsdGhpcy50cmlnZ2VyKFR0KSk7dmFyIHQ9dnQuZm4uX3BhcmFtcy5jYWxsKHRoaXMsZSk7cmV0dXJuIHQ9YnQoe21lYXN1cmVzOnRoaXMubWVhc3VyZXMoKSxtZWFzdXJlc0F4aXM6dGhpcy5tZWFzdXJlc0F4aXMoKSxjb2x1bW5zOnRoaXMuY29sdW1ucygpLHJvd3M6dGhpcy5yb3dzKCl9LHQpLHRoaXMuY3ViZUJ1aWxkZXImJih0aGlzLl9yZXF1ZXN0RGF0YT10KSx0fX0pO0d0LmNyZWF0ZT1mdW5jdGlvbihlKXtlPWUmJmUucHVzaD97ZGF0YTplfTplO3ZhciB0PWV8fHt9LG49dC5kYXRhO2lmKHQuZGF0YT1uLCEodCBpbnN0YW5jZW9mIEd0KSYmdCBpbnN0YW5jZW9mIHB0LmRhdGEuRGF0YVNvdXJjZSl0aHJvdyBFcnJvcihcIkluY29ycmVjdCBEYXRhU291cmNlIHR5cGUuIE9ubHkgUGl2b3REYXRhU291cmNlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkXCIpO3JldHVybiB0IGluc3RhbmNlb2YgR3Q/dDpuZXcgR3QodCl9LFk9e2NvbnRhaW5zOicsIEluU3RyKHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OLFwiezF9XCIpID4gMCcsZG9lc25vdGNvbnRhaW46JywgSW5TdHIoezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04sXCJ7MX1cIikgPSAwJyxzdGFydHN3aXRoOicsIExlZnQoezB9LkN1cnJlbnRNZW1iZXIuTUVNQkVSX0NBUFRJT04sTGVuKFwiezF9XCIpKT1cInsxfVwiJyxlbmRzd2l0aDonLCBSaWdodCh7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTixMZW4oXCJ7MX1cIikpPVwiezF9XCInLGVxOicsIHswfS5DdXJyZW50TWVtYmVyLk1FTUJFUl9DQVBUSU9OID0gXCJ7MX1cIicsbmVxOicsIE5PVCB7MH0uQ3VycmVudE1lbWJlci5NRU1CRVJfQ0FQVElPTiA9IFwiezF9XCInfSxLPXtzY2hlbWFDdWJlczpcIk1EU0NIRU1BX0NVQkVTXCIsc2NoZW1hQ2F0YWxvZ3M6XCJEQlNDSEVNQV9DQVRBTE9HU1wiLHNjaGVtYU1lYXN1cmVzOlwiTURTQ0hFTUFfTUVBU1VSRVNcIixzY2hlbWFEaW1lbnNpb25zOlwiTURTQ0hFTUFfRElNRU5TSU9OU1wiLHNjaGVtYUhpZXJhcmNoaWVzOlwiTURTQ0hFTUFfSElFUkFSQ0hJRVNcIixzY2hlbWFMZXZlbHM6XCJNRFNDSEVNQV9MRVZFTFNcIixzY2hlbWFNZW1iZXJzOlwiTURTQ0hFTUFfTUVNQkVSU1wiLHNjaGVtYUtQSXM6XCJNRFNDSEVNQV9LUElTXCJ9LFE9e3JlYWQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPSc8RW52ZWxvcGUgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VudmVsb3BlL1wiPjxIZWFkZXIvPjxCb2R5PjxFeGVjdXRlIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp4bWwtYW5hbHlzaXNcIj48Q29tbWFuZD48U3RhdGVtZW50Pic7cmV0dXJuIGErPVwiU0VMRUNUIE5PTiBFTVBUWSB7XCIsdD1lLmNvbHVtbnN8fFtdLG49ZS5yb3dzfHxbXSxpPWUubWVhc3VyZXN8fFtdLHI9XCJyb3dzXCI9PT1lLm1lYXN1cmVzQXhpcyxvPWUuc29ydHx8W10sIXQubGVuZ3RoJiZuLmxlbmd0aCYmKCFpLmxlbmd0aHx8aS5sZW5ndGgmJnIpJiYodD1uLG49W10scj0hMSksdC5sZW5ndGh8fG4ubGVuZ3RofHwocj0hMSksdC5sZW5ndGg/YSs9VSh0LHI/W106aSxvKTppLmxlbmd0aCYmIXImJihhKz1MKGkpLmpvaW4oXCIsXCIpKSxhKz1cIn0gRElNRU5TSU9OIFBST1BFUlRJRVMgQ0hJTERSRU5fQ0FSRElOQUxJVFksIFBBUkVOVF9VTklRVUVfTkFNRSBPTiBDT0xVTU5TXCIsKG4ubGVuZ3RofHxyJiZpLmxlbmd0aD4xKSYmKGErPVwiLCBOT04gRU1QVFkge1wiLGErPW4ubGVuZ3RoP1UobixyP2k6W10sbyk6TChpKS5qb2luKFwiLFwiKSxhKz1cIn0gRElNRU5TSU9OIFBST1BFUlRJRVMgQ0hJTERSRU5fQ0FSRElOQUxJVFksIFBBUkVOVF9VTklRVUVfTkFNRSBPTiBST1dTXCIpLGUuZmlsdGVyPyhhKz1cIiBGUk9NIFwiLGErPVwiKFwiLGErPWooZS5maWx0ZXIsZS5jb25uZWN0aW9uLmN1YmUpLGErPVwiKVwiKTphKz1cIiBGUk9NIFtcIitlLmNvbm5lY3Rpb24uY3ViZStcIl1cIiwxPT1pLmxlbmd0aCYmdC5sZW5ndGgmJihhKz1cIiBXSEVSRSAoXCIrTChpKS5qb2luKFwiLFwiKStcIilcIiksYSs9XCI8L1N0YXRlbWVudD48L0NvbW1hbmQ+PFByb3BlcnRpZXM+PFByb3BlcnR5TGlzdD48Q2F0YWxvZz5cIitlLmNvbm5lY3Rpb24uY2F0YWxvZytcIjwvQ2F0YWxvZz48Rm9ybWF0Pk11bHRpZGltZW5zaW9uYWw8L0Zvcm1hdD48L1Byb3BlcnR5TGlzdD48L1Byb3BlcnRpZXM+PC9FeGVjdXRlPjwvQm9keT48L0VudmVsb3BlPlwiLGEucmVwbGFjZSgvXFwmL2csXCImYW1wO1wiKX0sZGlzY292ZXI6ZnVuY3Rpb24odCl7dD10fHx7fTt2YXIgbj0nPEVudmVsb3BlIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS9cIj48SGVhZGVyLz48Qm9keT48RGlzY292ZXIgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnhtbC1hbmFseXNpc1wiPic7cmV0dXJuIG4rPVwiPFJlcXVlc3RUeXBlPlwiKyhLW3QuY29tbWFuZF18fHQuY29tbWFuZCkrXCI8L1JlcXVlc3RUeXBlPlwiLG4rPVwiPFJlc3RyaWN0aW9ucz5cIitHKFwiUmVzdHJpY3Rpb25MaXN0XCIsdC5yZXN0cmljdGlvbnMsITApK1wiPC9SZXN0cmljdGlvbnM+XCIsdC5jb25uZWN0aW9uJiZ0LmNvbm5lY3Rpb24uY2F0YWxvZyYmKHQucHJvcGVydGllcz1lLmV4dGVuZCh7fSx7Q2F0YWxvZzp0LmNvbm5lY3Rpb24uY2F0YWxvZ30sdC5wcm9wZXJ0aWVzKSksbis9XCI8UHJvcGVydGllcz5cIitHKFwiUHJvcGVydHlMaXN0XCIsdC5wcm9wZXJ0aWVzKStcIjwvUHJvcGVydGllcz5cIixuKz1cIjwvRGlzY292ZXI+PC9Cb2R5PjwvRW52ZWxvcGU+XCJ9fSxYPXB0LmRhdGEuUmVtb3RlVHJhbnNwb3J0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD1lO2U9dGhpcy5vcHRpb25zPWJ0KCEwLHt9LHRoaXMub3B0aW9ucyxlKSxwdC5kYXRhLlJlbW90ZVRyYW5zcG9ydC5jYWxsKHRoaXMsZSksa3QodC5kaXNjb3Zlcik/dGhpcy5kaXNjb3Zlcj10LmRpc2NvdmVyOlwic3RyaW5nXCI9PXR5cGVvZiB0LmRpc2NvdmVyP3RoaXMub3B0aW9ucy5kaXNjb3Zlcj17dXJsOnQuZGlzY292ZXJ9OnQuZGlzY292ZXJ8fCh0aGlzLm9wdGlvbnMuZGlzY292ZXI9dGhpcy5vcHRpb25zLnJlYWQpfSxzZXR1cDpmdW5jdGlvbih0LG4pe3JldHVybiB0LmRhdGE9dC5kYXRhfHx7fSxlLmV4dGVuZCghMCx0LmRhdGEse2Nvbm5lY3Rpb246dGhpcy5vcHRpb25zLmNvbm5lY3Rpb259KSxwdC5kYXRhLlJlbW90ZVRyYW5zcG9ydC5mbi5zZXR1cC5jYWxsKHRoaXMsdCxuKX0sb3B0aW9uczp7cmVhZDp7ZGF0YVR5cGU6XCJ0ZXh0XCIsY29udGVudFR5cGU6XCJ0ZXh0L3htbFwiLHR5cGU6XCJQT1NUXCJ9LGRpc2NvdmVyOntkYXRhVHlwZTpcInRleHRcIixjb250ZW50VHlwZTpcInRleHQveG1sXCIsdHlwZTpcIlBPU1RcIn0scGFyYW1ldGVyTWFwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFFbdF0oZSx0KX19LGRpc2NvdmVyOmZ1bmN0aW9uKHQpe3JldHVybiBlLmFqYXgodGhpcy5zZXR1cCh0LFwiZGlzY292ZXJcIikpfX0pLEo9e2N1YmVzOntuYW1lOnB0LmdldHRlcihcIkNVQkVfTkFNRVsnI3RleHQnXVwiLCEwKSxjYXB0aW9uOnB0LmdldHRlcihcIkNVQkVfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSxkZXNjcmlwdGlvbjpwdC5nZXR0ZXIoXCJERVNDUklQVElPTlsnI3RleHQnXVwiLCEwKSx0eXBlOnB0LmdldHRlcihcIkNVQkVfVFlQRVsnI3RleHQnXVwiLCEwKX0sY2F0YWxvZ3M6e25hbWU6cHQuZ2V0dGVyKFwiQ0FUQUxPR19OQU1FWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApfSxtZWFzdXJlczp7bmFtZTpwdC5nZXR0ZXIoXCJNRUFTVVJFX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJNRUFTVVJFX0NBUFRJT05bJyN0ZXh0J11cIiwhMCksdW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJNRUFTVVJFX1VOSVFVRV9OQU1FWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLGFnZ3JlZ2F0b3I6cHQuZ2V0dGVyKFwiTUVBU1VSRV9BR0dSRUdBVE9SWycjdGV4dCddXCIsITApLGdyb3VwTmFtZTpwdC5nZXR0ZXIoXCJNRUFTVVJFR1JPVVBfTkFNRVsnI3RleHQnXVwiLCEwKSxkaXNwbGF5Rm9sZGVyOnB0LmdldHRlcihcIk1FQVNVUkVfRElTUExBWV9GT0xERVJbJyN0ZXh0J11cIiwhMCksZGVmYXVsdEZvcm1hdDpwdC5nZXR0ZXIoXCJERUZBVUxUX0ZPUk1BVF9TVFJJTkdbJyN0ZXh0J11cIiwhMCl9LGtwaXM6e25hbWU6cHQuZ2V0dGVyKFwiS1BJX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJLUElfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSx2YWx1ZTpwdC5nZXR0ZXIoXCJLUElfVkFMVUVbJyN0ZXh0J11cIiwhMCksZ29hbDpwdC5nZXR0ZXIoXCJLUElfR09BTFsnI3RleHQnXVwiLCEwKSxzdGF0dXM6cHQuZ2V0dGVyKFwiS1BJX1NUQVRVU1snI3RleHQnXVwiLCEwKSx0cmVuZDpwdC5nZXR0ZXIoXCJLUElfVFJFTkRbJyN0ZXh0J11cIiwhMCksc3RhdHVzR3JhcGhpYzpwdC5nZXR0ZXIoXCJLUElfU1RBVFVTX0dSQVBISUNbJyN0ZXh0J11cIiwhMCksdHJlbmRHcmFwaGljOnB0LmdldHRlcihcIktQSV9UUkVORF9HUkFQSElDWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIktQSV9ERVNDUklQVElPTlsnI3RleHQnXVwiLCEwKSxncm91cE5hbWU6cHQuZ2V0dGVyKFwiTUVBU1VSRUdST1VQX05BTUVbJyN0ZXh0J11cIiwhMCl9LGRpbWVuc2lvbnM6e25hbWU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJESU1FTlNJT05fQ0FQVElPTlsnI3RleHQnXVwiLCEwKSxkZXNjcmlwdGlvbjpwdC5nZXR0ZXIoXCJERVNDUklQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkZWZhdWx0SGllcmFyY2h5OnB0LmdldHRlcihcIkRFRkFVTFRfSElFUkFSQ0hZWycjdGV4dCddXCIsITApLHR5cGU6cHQuZ2V0dGVyKFwiRElNRU5TSU9OX1RZUEVbJyN0ZXh0J11cIiwhMCl9LGhpZXJhcmNoaWVzOntuYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9OQU1FWycjdGV4dCddXCIsITApLGNhcHRpb246cHQuZ2V0dGVyKFwiSElFUkFSQ0hZX0NBUFRJT05bJyN0ZXh0J11cIiwhMCksZGVzY3JpcHRpb246cHQuZ2V0dGVyKFwiREVTQ1JJUFRJT05bJyN0ZXh0J11cIiwhMCksdW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJISUVSQVJDSFlfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGltZW5zaW9uVW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGlzcGxheUZvbGRlcjpwdC5nZXR0ZXIoXCJISUVSQVJDSFlfRElTUExBWV9GT0xERVJbJyN0ZXh0J11cIiwhMCksb3JpZ2luOnB0LmdldHRlcihcIkhJRVJBUkNIWV9PUklHSU5bJyN0ZXh0J11cIiwhMCksZGVmYXVsdE1lbWJlcjpwdC5nZXR0ZXIoXCJERUZBVUxUX01FTUJFUlsnI3RleHQnXVwiLCEwKX0sbGV2ZWxzOntuYW1lOnB0LmdldHRlcihcIkxFVkVMX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJMRVZFTF9DQVBUSU9OWycjdGV4dCddXCIsITApLGRlc2NyaXB0aW9uOnB0LmdldHRlcihcIkRFU0NSSVBUSU9OWycjdGV4dCddXCIsITApLHVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiTEVWRUxfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGltZW5zaW9uVW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJESU1FTlNJT05fVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksZGlzcGxheUZvbGRlcjpwdC5nZXR0ZXIoXCJMRVZFTF9ESVNQTEFZX0ZPTERFUlsnI3RleHQnXVwiLCEwKSxvcmRlcmluZ1Byb3BlcnR5OnB0LmdldHRlcihcIkxFVkVMX09SREVSSU5HX1BST1BFUlRZWycjdGV4dCddXCIsITApLG9yaWdpbjpwdC5nZXR0ZXIoXCJMRVZFTF9PUklHSU5bJyN0ZXh0J11cIiwhMCksaGllcmFyY2h5VW5pcXVlTmFtZTpwdC5nZXR0ZXIoXCJISUVSQVJDSFlfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCl9LG1lbWJlcnM6e25hbWU6cHQuZ2V0dGVyKFwiTUVNQkVSX05BTUVbJyN0ZXh0J11cIiwhMCksY2FwdGlvbjpwdC5nZXR0ZXIoXCJNRU1CRVJfQ0FQVElPTlsnI3RleHQnXVwiLCEwKSx1bmlxdWVOYW1lOnB0LmdldHRlcihcIk1FTUJFUl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxkaW1lbnNpb25VbmlxdWVOYW1lOnB0LmdldHRlcihcIkRJTUVOU0lPTl9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxoaWVyYXJjaHlVbmlxdWVOYW1lOnB0LmdldHRlcihcIkhJRVJBUkNIWV9VTklRVUVfTkFNRVsnI3RleHQnXVwiLCEwKSxsZXZlbFVuaXF1ZU5hbWU6cHQuZ2V0dGVyKFwiTEVWRUxfVU5JUVVFX05BTUVbJyN0ZXh0J11cIiwhMCksY2hpbGRyZW5DYXJkaW5hbGl0eTpwdC5nZXR0ZXIoXCJDSElMRFJFTl9DQVJESU5BTElUWVsnI3RleHQnXVwiLCEwKX19LFo9W1wiYXhlc1wiLFwiY2F0YWxvZ3NcIixcImN1YmVzXCIsXCJkaW1lbnNpb25zXCIsXCJoaWVyYXJjaGllc1wiLFwibGV2ZWxzXCIsXCJtZWFzdXJlc1wiXSxldD1wdC5kYXRhLlhtbERhdGFSZWFkZXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3B0LmRhdGEuWG1sRGF0YVJlYWRlci5jYWxsKHRoaXMsZSksdGhpcy5fZXh0ZW5kKGUpXG59LF9leHRlbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT0wLHI9Wi5sZW5ndGg7cj5pO2krKyl0PVpbaV0sbj1lW3RdLG4mJm4hPT15dCYmKHRoaXNbdF09bil9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PXB0LmRhdGEuWG1sRGF0YVJlYWRlci5mbi5wYXJzZShlLnJlcGxhY2UoLzwoXFwvPykoXFx3fC0pKzovZyxcIjwkMVwiKSk7cmV0dXJuIHB0LmdldHRlcihcIlsnRW52ZWxvcGUnXVsnQm9keSddXCIsITApKHQpfSxlcnJvcnM6ZnVuY3Rpb24oZSl7dmFyIHQ9cHQuZ2V0dGVyKFwiWydGYXVsdCddXCIsITApKGUpO3JldHVybiB0P1t7ZmF1bHRzdHJpbmc6cHQuZ2V0dGVyKFwiZmF1bHRzdHJpbmdbJyN0ZXh0J11cIiwhMCkodCksZmF1bHRjb2RlOnB0LmdldHRlcihcImZhdWx0Y29kZVsnI3RleHQnXVwiLCEwKSh0KX1dOm51bGx9LGF4ZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO3JldHVybiBlPXB0LmdldHRlcihcIkV4ZWN1dGVSZXNwb25zZS5yZXR1cm4ucm9vdFwiLCEwKShlKSx0PXEocHQuZ2V0dGVyKFwiQXhlcy5BeGlzXCIsITApKGUpKSxuPSQodFswXSksaT17fSx0Lmxlbmd0aD4yJiYoaT0kKHRbMV0pKSx7Y29sdW1uczpuLHJvd3M6aX19LGRhdGE6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhO2ZvcihlPXB0LmdldHRlcihcIkV4ZWN1dGVSZXNwb25zZS5yZXR1cm4ucm9vdFwiLCEwKShlKSx0PXEocHQuZ2V0dGVyKFwiQ2VsbERhdGEuQ2VsbFwiLCEwKShlKSksbj1bXSxpPXB0LmdldHRlcihcIlsnQENlbGxPcmRpbmFsJ11cIikscj1wdC5nZXR0ZXIoXCJWYWx1ZVsnI3RleHQnXVwiKSxvPXB0LmdldHRlcihcIkZtdFZhbHVlWycjdGV4dCddXCIpLGE9MDt0Lmxlbmd0aD5hO2ErKyluLnB1c2goe3ZhbHVlOnIodFthXSksZm10VmFsdWU6byh0W2FdKSxvcmRpbmFsOnBhcnNlSW50KGkodFthXSksMTApfSk7cmV0dXJuIG59LF9tYXBTY2hlbWE6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhO2ZvcihlPXB0LmdldHRlcihcIkRpc2NvdmVyUmVzcG9uc2UucmV0dXJuLnJvb3RcIiwhMCkoZSksbj1xKHB0LmdldHRlcihcInJvd1wiLCEwKShlKSksaT1bXSxyPTA7bi5sZW5ndGg+cjtyKyspe289e307Zm9yKGEgaW4gdClvW2FdPXRbYV0obltyXSk7aS5wdXNoKG8pfXJldHVybiBpfSxtZWFzdXJlczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbWFwU2NoZW1hKGUsSi5tZWFzdXJlcyl9LGtwaXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEoua3Bpcyl9LGhpZXJhcmNoaWVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmhpZXJhcmNoaWVzKX0sbGV2ZWxzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmxldmVscyl9LGRpbWVuc2lvbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEouZGltZW5zaW9ucyl9LGN1YmVzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLmN1YmVzKX0sY2F0YWxvZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21hcFNjaGVtYShlLEouY2F0YWxvZ3MpfSxtZW1iZXJzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tYXBTY2hlbWEoZSxKLm1lbWJlcnMpfX0pLGJ0KCEwLHB0LmRhdGEse1Bpdm90RGF0YVNvdXJjZTpHdCxYbWxhVHJhbnNwb3J0OlgsWG1sYURhdGFSZWFkZXI6ZXQsUGl2b3RDdWJlQnVpbGRlcjpXdCx0cmFuc3BvcnRzOnt4bWxhOlh9LHJlYWRlcnM6e3htbGE6ZXR9fSksdHQ9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49MCxpPWUubGVuZ3RoO2k+bjtuKyspaWYoZVtuXS5maWVsZD09PXQpcmV0dXJuIGVbbl07cmV0dXJuIG51bGx9LG50PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPVtdO2ZvcihuPTAsaT1lLmxlbmd0aDtpPm47bisrKWVbbl0uZmllbGQhPT10JiZyLnB1c2goZVtuXSk7cmV0dXJuIHJ9LHB0LnVpLlBpdm90U2V0dGluZ1RhcmdldD1tdC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzO210LmZuLmluaXQuY2FsbChpLHQsbiksaS5lbGVtZW50LmFkZENsYXNzKFwiay1waXZvdC1zZXR0aW5nXCIpLGkuZGF0YVNvdXJjZT1wdC5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUobi5kYXRhU291cmNlKSxpLl9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KGkucmVmcmVzaCxpKSxpLmRhdGFTb3VyY2UuZmlyc3QoeHQsaS5fcmVmcmVzaEhhbmRsZXIpLG4udGVtcGxhdGV8fChpLm9wdGlvbnMudGVtcGxhdGU9XCI8ZGl2IGRhdGEtXCIrcHQubnMrJ25hbWU9XCIke2RhdGEubmFtZSB8fCBkYXRhfVwiPiR7ZGF0YS5uYW1lIHx8IGRhdGF9JysoaS5vcHRpb25zLmVuYWJsZWQ/JzxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24taWNvbiBrLWJ1dHRvbi1iYXJlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zZXR0aW5nLWRlbGV0ZVwiPjwvc3Bhbj48L2E+JzpcIlwiKStcIjwvZGl2PlwiKSxpLnRlbXBsYXRlPXB0LnRlbXBsYXRlKGkub3B0aW9ucy50ZW1wbGF0ZSksaS5lbXB0eVRlbXBsYXRlPXB0LnRlbXBsYXRlKGkub3B0aW9ucy5lbXB0eVRlbXBsYXRlKSxpLl9zb3J0YWJsZSgpLGkuZWxlbWVudC5vbihcImNsaWNrXCIrRXQsXCIuay1idXR0b24sLmstaXRlbVwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUodC50YXJnZXQpLHI9bi5jbG9zZXN0KFwiW1wiK3B0LmF0dHIoXCJuYW1lXCIpK1wiXVwiKS5hdHRyKHB0LmF0dHIoXCJuYW1lXCIpKTtyJiYobi5oYXNDbGFzcyhcImstc2V0dGluZy1kZWxldGVcIik/aS5yZW1vdmUocik6aS5vcHRpb25zLnNvcnRhYmxlJiZuWzBdPT09dC5jdXJyZW50VGFyZ2V0JiZpLnNvcnQoe2ZpZWxkOnIsZGlyOm4uZmluZChcIi5rLWktc29ydC1hc2NcIilbMF0/XCJkZXNjXCI6XCJhc2NcIn0pKX0pLChuLmZpbHRlcmFibGV8fG4uc29ydGFibGUpJiYoaS5maWVsZE1lbnU9bmV3IGZ0LlBpdm90RmllbGRNZW51KGkuZWxlbWVudCx7bWVzc2FnZXM6aS5vcHRpb25zLm1lc3NhZ2VzLmZpZWxkTWVudSxmaWx0ZXI6XCIuay1zZXR0aW5nLWZpZWxkbWVudVwiLGZpbHRlcmFibGU6bi5maWx0ZXJhYmxlLHNvcnRhYmxlOm4uc29ydGFibGUsZGF0YVNvdXJjZTppLmRhdGFTb3VyY2V9KSksaS5yZWZyZXNoKCl9LG9wdGlvbnM6e25hbWU6XCJQaXZvdFNldHRpbmdUYXJnZXRcIix0ZW1wbGF0ZTpudWxsLGZpbHRlcmFibGU6ITEsc29ydGFibGU6ITEsZW1wdHlUZW1wbGF0ZTpcIjxkaXYgY2xhc3M9J2stZW1wdHknPiR7ZGF0YX08L2Rpdj5cIixzZXR0aW5nOlwiY29sdW1uc1wiLGVuYWJsZWQ6ITAsbWVzc2FnZXM6e2VtcHR5OlwiRHJvcCBGaWVsZHMgSGVyZVwifX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2UudW5iaW5kKHh0LHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmRhdGFTb3VyY2U9dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLmZpZWxkTWVudSYmdGhpcy5maWVsZE1lbnUuc2V0RGF0YVNvdXJjZShlKSxlLmZpcnN0KHh0LHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLnJlZnJlc2goKX0sX3NvcnRhYmxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9wdGlvbnMuZW5hYmxlZCYmKHRoaXMuc29ydGFibGU9dGhpcy5lbGVtZW50LmtlbmRvU29ydGFibGUoe2Nvbm5lY3RXaXRoOnRoaXMub3B0aW9ucy5jb25uZWN0V2l0aCxmaWx0ZXI6XCI+Om5vdCguay1lbXB0eSlcIixoaW50OmUub3B0aW9ucy5oaW50LGN1cnNvcjpcIm1vdmVcIixzdGFydDpmdW5jdGlvbihlKXtlLml0ZW0uZm9jdXMoKS5ibHVyKCl9LGNoYW5nZTpmdW5jdGlvbih0KXt2YXIgbj10Lml0ZW0uYXR0cihwdC5hdHRyKFwibmFtZVwiKSk7XCJyZWNlaXZlXCI9PXQuYWN0aW9uP2UuYWRkKG4pOlwicmVtb3ZlXCI9PXQuYWN0aW9uP2UucmVtb3ZlKG4pOlwic29ydFwiPT10LmFjdGlvbiYmZS5tb3ZlKG4sdC5uZXdJbmRleCl9fSkuZGF0YShcImtlbmRvU29ydGFibGVcIikpfSxfaW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj0tMTtmb3Iobj0wLGk9dC5sZW5ndGg7aT5uO24rKylpZihPKHRbbl0pPT09ZSl7cj1uO2JyZWFrfXJldHVybiByfSxfaXNLUEk6ZnVuY3Rpb24oZSl7cmV0dXJuXCJrcGlcIj09PWUudHlwZXx8ZS5tZWFzdXJlfSx2YWxpZGF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9Mj09ZS50eXBlfHxcImFnZ3JlZ2F0b3JcImluIGV8fHRoaXMuX2lzS1BJKGUpO3JldHVybiBpP1wibWVhc3VyZXNcIj09PXRoaXMub3B0aW9ucy5zZXR0aW5nOlwibWVhc3VyZXNcIj09PXRoaXMub3B0aW9ucy5zZXR0aW5nP2k6KHQ9dGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSgpLG49ZS5kZWZhdWx0SGllcmFyY2h5fHxlLnVuaXF1ZU5hbWUsdGhpcy5faW5kZXhPZihuLHQpPi0xPyExOih0PXRoaXMuZGF0YVNvdXJjZVtcImNvbHVtbnNcIj09PXRoaXMub3B0aW9ucy5zZXR0aW5nP1wicm93c1wiOlwiY29sdW1uc1wiXSgpLHRoaXMuX2luZGV4T2Yobix0KT4tMT8hMTohMCkpfSxhZGQ6ZnVuY3Rpb24odCl7dmFyIG4saSxyPXRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10oKTtmb3IodD1lLmlzQXJyYXkodCk/dC5zbGljZSgwKTpbdF0sbj0wLGk9dC5sZW5ndGg7aT5uO24rKyktMSE9PXRoaXMuX2luZGV4T2YodFtuXSxyKSYmKHQuc3BsaWNlKG4sMSksbi09MSxpLT0xKTt0Lmxlbmd0aCYmKHI9ci5jb25jYXQodCksdGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXShyKSl9LG1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKCksaT10aGlzLl9pbmRleE9mKGUsbik7aT4tMSYmKGU9bi5zcGxpY2UoaSwxKVswXSxuLnNwbGljZSh0LDAsZSksdGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXShuKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFTb3VyY2VbdGhpcy5vcHRpb25zLnNldHRpbmddKCksbj10aGlzLl9pbmRleE9mKGUsdCk7bj4tMSYmKHQuc3BsaWNlKG4sMSksdGhpcy5kYXRhU291cmNlW3RoaXMub3B0aW9ucy5zZXR0aW5nXSh0KSl9LHNvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLnNvcnRhYmxlLG49dD09PSEwfHx0LmFsbG93VW5zb3J0LGk9biYmXCJhc2NcIj09PWUuZGlyLHI9dGhpcy5kYXRhU291cmNlLnNvcnQoKXx8W10sbz1udChyLGUuZmllbGQpO2kmJnIubGVuZ3RoIT09by5sZW5ndGgmJihlPW51bGwpLGUmJm8ucHVzaChlKSx0aGlzLmRhdGFTb3VyY2Uuc29ydChvKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLG49XCJcIixpPXRoaXMuZGF0YVNvdXJjZVt0aGlzLm9wdGlvbnMuc2V0dGluZ10oKSxyPWkubGVuZ3RoLG89MDtpZihyKWZvcig7cj5vO28rKyllPWlbb10sZT1lLm5hbWU9PT10P3tuYW1lOmV9OmUsbis9dGhpcy50ZW1wbGF0ZShidCh7c29ydEljb246dGhpcy5fc29ydEljb24oZS5uYW1lKX0sZSkpO2Vsc2Ugbj10aGlzLmVtcHR5VGVtcGxhdGUodGhpcy5vcHRpb25zLm1lc3NhZ2VzLmVtcHR5KTt0aGlzLmVsZW1lbnQuaHRtbChuKX0sZGVzdHJveTpmdW5jdGlvbigpe210LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmRhdGFTb3VyY2UudW5iaW5kKHh0LHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmVsZW1lbnQub2ZmKEV0KSx0aGlzLnNvcnRhYmxlJiZ0aGlzLnNvcnRhYmxlLmRlc3Ryb3koKSx0aGlzLmZpZWxkTWVudSYmdGhpcy5maWVsZE1lbnUuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsLHRoaXMuX3JlZnJlc2hIYW5kbGVyPW51bGx9LF9zb3J0SWNvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFTb3VyY2Uuc29ydCgpLG49dHQodCxPKGUpKSxpPVwiXCI7cmV0dXJuIG4mJihpPVwiay1pLXNvcnQtXCIrbi5kaXIpLGl9fSksaXQ9bXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHIsbyxhPXRoaXM7bXQuZm4uaW5pdC5jYWxsKGEsbixpKSxhLl9kYXRhU291cmNlKCksYS5fYmluZENvbmZpZ3VyYXRvcigpLGEuX3dyYXBwZXIoKSxhLl9jcmVhdGVMYXlvdXQoKSxhLl9jb2x1bW5CdWlsZGVyPXI9bmV3IGR0LGEuX3Jvd0J1aWxkZXI9bz1uZXcgdXQsYS5fY29udGVudEJ1aWxkZXI9bmV3IGh0LGEuX3RlbXBsYXRlcygpLGEuY29sdW1uc0hlYWRlci5hZGQoYS5yb3dzSGVhZGVyKS5vbihcImNsaWNrXCIsXCJzcGFuLmstaWNvblwiLGZ1bmN0aW9uKCl7dmFyIG4saSxzLGwsYz1lKHRoaXMpLGQ9cix1PVwiZXhwYW5kQ29sdW1uXCIsaD1jLmF0dHIocHQuYXR0cihcInBhdGhcIikpLHA9e2F4aXM6XCJjb2x1bW5zXCIscGF0aDplLnBhcnNlSlNPTihoKX07Yy5wYXJlbnQoKS5pcyhcInRkXCIpJiYoZD1vLHU9XCJleHBhbmRSb3dcIixwLmF4aXM9XCJyb3dzXCIpLGk9Yy5oYXNDbGFzcyhSdCkscz1kLm1ldGFkYXRhW2hdLGw9cy5leHBhbmRlZD09PXQsbj1pP0Z0Onp0LGEudHJpZ2dlcihuLHApfHwoZC5tZXRhZGF0YVtoXS5leHBhbmRlZD0haSxjLnRvZ2dsZUNsYXNzKFJ0LCFpKS50b2dnbGVDbGFzcyhCdCxpKSwhaSYmbD9hLmRhdGFTb3VyY2VbdV0ocC5wYXRoKTphLnJlZnJlc2goKSl9KSxhLl9zY3JvbGxhYmxlKCksYS5vcHRpb25zLmF1dG9CaW5kJiZhLmRhdGFTb3VyY2UuZmV0Y2goKSxwdC5ub3RpZnkoYSl9LGV2ZW50czpbUHQsSXQsenQsRnRdLG9wdGlvbnM6e25hbWU6XCJQaXZvdEdyaWRcIixhdXRvQmluZDohMCxyZW9yZGVyYWJsZTohMCxmaWx0ZXJhYmxlOiExLHNvcnRhYmxlOiExLGhlaWdodDpudWxsLGNvbHVtbldpZHRoOjEwMCxjb25maWd1cmF0b3I6XCJcIixjb2x1bW5IZWFkZXJUZW1wbGF0ZTpudWxsLHJvd0hlYWRlclRlbXBsYXRlOm51bGwsZGF0YUNlbGxUZW1wbGF0ZTpudWxsLGtwaVN0YXR1c1RlbXBsYXRlOm51bGwsa3BpVHJlbmRUZW1wbGF0ZTpudWxsLG1lc3NhZ2VzOnttZWFzdXJlRmllbGRzOlwiRHJvcCBEYXRhIEZpZWxkcyBIZXJlXCIsY29sdW1uRmllbGRzOlwiRHJvcCBDb2x1bW4gRmllbGRzIEhlcmVcIixyb3dGaWVsZHM6XCJEcm9wIFJvd3MgRmllbGRzIEhlcmVcIn19LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuY29sdW1uSGVhZGVyVGVtcGxhdGUsdD10aGlzLm9wdGlvbnMucm93SGVhZGVyVGVtcGxhdGUsbj10aGlzLm9wdGlvbnMuZGF0YUNlbGxUZW1wbGF0ZSxpPXRoaXMub3B0aW9ucy5rcGlTdGF0dXNUZW1wbGF0ZSxyPXRoaXMub3B0aW9ucy5rcGlUcmVuZFRlbXBsYXRlO3RoaXMuX2NvbHVtbkJ1aWxkZXIudGVtcGxhdGU9cHQudGVtcGxhdGUoZXx8THQse3VzZVdpdGhCbG9jazohIWV9KSx0aGlzLl9jb250ZW50QnVpbGRlci5kYXRhVGVtcGxhdGU9cHQudGVtcGxhdGUobnx8TnQse3VzZVdpdGhCbG9jazohIW59KSx0aGlzLl9jb250ZW50QnVpbGRlci5rcGlTdGF0dXNUZW1wbGF0ZT1wdC50ZW1wbGF0ZShpfHxPdCx7dXNlV2l0aEJsb2NrOiEhaX0pLHRoaXMuX2NvbnRlbnRCdWlsZGVyLmtwaVRyZW5kVGVtcGxhdGU9cHQudGVtcGxhdGUocnx8SHQse3VzZVdpdGhCbG9jazohIXJ9KSx0aGlzLl9yb3dCdWlsZGVyLnRlbXBsYXRlPXB0LnRlbXBsYXRlKHR8fEx0LHt1c2VXaXRoQmxvY2s6ISF0fSl9LF9iaW5kQ29uZmlndXJhdG9yOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbmZpZ3VyYXRvcjt0JiZlKHQpLmtlbmRvUGl2b3RDb25maWd1cmF0b3IoXCJzZXREYXRhU291cmNlXCIsdGhpcy5kYXRhU291cmNlKX0sY2VsbEluZm9CeUVsZW1lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9ZSh0KSx0aGlzLmNlbGxJbmZvKHQuaW5kZXgoKSx0LnBhcmVudChcInRyXCIpLmluZGV4KCkpfSxjZWxsSW5mbzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5fY29udGVudEJ1aWxkZXIscj1pLmNvbHVtbkluZGV4ZXNbZXx8MF0sbz1pLnJvd0luZGV4ZXNbdHx8MF07cmV0dXJuIHImJm8/KG49by5pbmRleCppLnJvd0xlbmd0aCtyLmluZGV4LHtjb2x1bW5UdXBsZTpyLnR1cGxlLHJvd1R1cGxlOm8udHVwbGUsbWVhc3VyZTpyLm1lYXN1cmV8fG8ubWVhc3VyZSxkYXRhSXRlbTp0aGlzLmRhdGFTb3VyY2UudmlldygpW25dfSk6bnVsbH0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLm1lYXN1cmVzVGFyZ2V0JiZ0aGlzLm1lYXN1cmVzVGFyZ2V0LnNldERhdGFTb3VyY2UoZSksdGhpcy5yb3dzVGFyZ2V0JiZ0aGlzLnJvd3NUYXJnZXQuc2V0RGF0YVNvdXJjZShlKSx0aGlzLmNvbHVtbnNUYXJnZXQmJnRoaXMuY29sdW1uc1RhcmdldC5zZXREYXRhU291cmNlKGUpLHRoaXMuX2JpbmRDb25maWd1cmF0b3IoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJmUuZmV0Y2goKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXttdC5mbi5zZXRPcHRpb25zLmNhbGwodGhpcyxlKSx0aGlzLl90ZW1wbGF0ZXMoKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLmRhdGFTb3VyY2U7bj1lLmlzQXJyYXkobik/e2RhdGE6bn06bix0LmRhdGFTb3VyY2UmJnRoaXMuX3JlZnJlc2hIYW5kbGVyP3QuZGF0YVNvdXJjZS51bmJpbmQoeHQsdC5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChUdCx0Ll9zdGF0ZVJlc2V0SGFuZGxlcikudW5iaW5kKFN0LHQuX3Byb2dyZXNzSGFuZGxlcikudW5iaW5kKEN0LHQuX2Vycm9ySGFuZGxlcik6KHQuX3JlZnJlc2hIYW5kbGVyPWUucHJveHkodC5yZWZyZXNoLHQpLHQuX3Byb2dyZXNzSGFuZGxlcj1lLnByb3h5KHQuX3JlcXVlc3RTdGFydCx0KSx0Ll9zdGF0ZVJlc2V0SGFuZGxlcj1lLnByb3h5KHQuX3N0YXRlUmVzZXQsdCksdC5fZXJyb3JIYW5kbGVyPWUucHJveHkodC5fZXJyb3IsdCkpLHQuZGF0YVNvdXJjZT1wdC5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUobikuYmluZCh4dCx0Ll9yZWZyZXNoSGFuZGxlcikuYmluZChTdCx0Ll9wcm9ncmVzc0hhbmRsZXIpLmJpbmQoVHQsdC5fc3RhdGVSZXNldEhhbmRsZXIpLmJpbmQoQ3QsdC5fZXJyb3JIYW5kbGVyKX0sX2Vycm9yOmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITEpfSxfcmVxdWVzdFN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fcHJvZ3Jlc3MoITApfSxfc3RhdGVSZXNldDpmdW5jdGlvbigpe3RoaXMuX2NvbHVtbkJ1aWxkZXIucmVzZXQoKSx0aGlzLl9yb3dCdWlsZGVyLnJlc2V0KCl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmhlaWdodDt0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50LmFkZENsYXNzKFwiay13aWRnZXQgay1waXZvdFwiKSxlJiZ0aGlzLndyYXBwZXIuY3NzKFwiaGVpZ2h0XCIsZSl9LF9tZWFzdXJlRmllbGRzOmZ1bmN0aW9uKCl7dGhpcy5tZWFzdXJlRmllbGRzPWUoQXQpLmFkZENsYXNzKFwiay1waXZvdC10b29sYmFyIGstaGVhZGVyIGstc2V0dGluZ3MtbWVhc3VyZXNcIiksdGhpcy5tZWFzdXJlc1RhcmdldD10aGlzLl9jcmVhdGVTZXR0aW5nVGFyZ2V0KHRoaXMubWVhc3VyZUZpZWxkcyx7c2V0dGluZzpcIm1lYXN1cmVzXCIsbWVzc2FnZXM6e2VtcHR5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5tZWFzdXJlRmllbGRzfX0pfSxfY3JlYXRlU2V0dGluZ1RhcmdldDpmdW5jdGlvbih0LG4pe3ZhciBpPSc8c3BhbiB0YWJpbmRleD1cIjBcIiBjbGFzcz1cImstYnV0dG9uXCIgZGF0YS0nK3B0Lm5zKyduYW1lPVwiJHtkYXRhLm5hbWV9XCI+JHtkYXRhLm5hbWV9JyxyPW4uc29ydGFibGUsbz1cIlwiO3JldHVybiByJiYobys9XCIjaWYgKGRhdGEuc29ydEljb24pIHsjXCIsbys9JzxzcGFuIGNsYXNzPVwiay1pY29uICR7ZGF0YS5zb3J0SWNvbn0gay1zZXR0aW5nLXNvcnRcIj48L3NwYW4+JyxvKz1cIiN9I1wiKSwobi5maWx0ZXJhYmxlfHxyKSYmKG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3doZWFkLXMgay1zZXR0aW5nLWZpZWxkbWVudVwiPjwvc3Bhbj4nKSx0aGlzLm9wdGlvbnMucmVvcmRlcmFibGUmJihvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1jbG9zZSBrLXNldHRpbmctZGVsZXRlXCI+PC9zcGFuPicpLG8mJihpKz0nPHNwYW4gY2xhc3M9XCJrLWZpZWxkLWFjdGlvbnNcIj4nK28rXCI8L3NwYW4+XCIpLGkrPVwiPC9zcGFuPlwiLG5ldyBwdC51aS5QaXZvdFNldHRpbmdUYXJnZXQodCxlLmV4dGVuZCh7dGVtcGxhdGU6aSxlbXB0eVRlbXBsYXRlOic8c3BhbiBjbGFzcz1cImstZW1wdHlcIj4ke2RhdGF9PC9zcGFuPicsZW5hYmxlZDp0aGlzLm9wdGlvbnMucmVvcmRlcmFibGUsZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2V9LG4pKX0sX2luaXRTZXR0aW5nVGFyZ2V0czpmdW5jdGlvbigpe3RoaXMuY29sdW1uc1RhcmdldD10aGlzLl9jcmVhdGVTZXR0aW5nVGFyZ2V0KHRoaXMuY29sdW1uRmllbGRzLHtjb25uZWN0V2l0aDp0aGlzLnJvd0ZpZWxkcyxzZXR0aW5nOlwiY29sdW1uc1wiLGZpbHRlcmFibGU6dGhpcy5vcHRpb25zLmZpbHRlcmFibGUsc29ydGFibGU6dGhpcy5vcHRpb25zLnNvcnRhYmxlLG1lc3NhZ2VzOntlbXB0eTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuY29sdW1uRmllbGRzLGZpZWxkTWVudTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZmllbGRNZW51fX0pLHRoaXMucm93c1RhcmdldD10aGlzLl9jcmVhdGVTZXR0aW5nVGFyZ2V0KHRoaXMucm93RmllbGRzLHtjb25uZWN0V2l0aDp0aGlzLmNvbHVtbkZpZWxkcyxzZXR0aW5nOlwicm93c1wiLGZpbHRlcmFibGU6dGhpcy5vcHRpb25zLmZpbHRlcmFibGUsc29ydGFibGU6dGhpcy5vcHRpb25zLnNvcnRhYmxlLG1lc3NhZ2VzOntlbXB0eTp0aGlzLm9wdGlvbnMubWVzc2FnZXMucm93RmllbGRzLGZpZWxkTWVudTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZmllbGRNZW51fX0pfSxfY3JlYXRlTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoVnQpLGk9bi5maW5kKFwiLmstcGl2b3Qtcm93aGVhZGVyc1wiKSxyPW4uZmluZChcIi5rLXBpdm90LXRhYmxlXCIpLG89ZShBdCkuYWRkQ2xhc3MoXCJrLWdyaWQgay13aWRnZXRcIik7dC5fbWVhc3VyZUZpZWxkcygpLHQuY29sdW1uRmllbGRzPWUoQXQpLmFkZENsYXNzKFwiay1waXZvdC10b29sYmFyIGstaGVhZGVyIGstc2V0dGluZ3MtY29sdW1uc1wiKSx0LnJvd0ZpZWxkcz1lKEF0KS5hZGRDbGFzcyhcImstcGl2b3QtdG9vbGJhciBrLWhlYWRlciBrLXNldHRpbmdzLXJvd3NcIiksdC5jb2x1bW5zSGVhZGVyPWUoJzxkaXYgY2xhc3M9XCJrLWdyaWQtaGVhZGVyLXdyYXBcIiAvPicpLndyYXAoJzxkaXYgY2xhc3M9XCJrLWdyaWQtaGVhZGVyXCIgLz4nKSx0LmNvbHVtbnNIZWFkZXIucGFyZW50KCkuY3NzKFwicGFkZGluZy1yaWdodFwiLHB0LnN1cHBvcnQuc2Nyb2xsYmFyKCkpLHQucm93c0hlYWRlcj1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkIGstd2lkZ2V0IGstYWx0XCIvPicpLHQuY29udGVudD1lKCc8ZGl2IGNsYXNzPVwiay1ncmlkLWNvbnRlbnRcIiAvPicpLGkuYXBwZW5kKHQubWVhc3VyZUZpZWxkcyksaS5hcHBlbmQodC5yb3dGaWVsZHMpLGkuYXBwZW5kKHQucm93c0hlYWRlciksby5hcHBlbmQodC5jb2x1bW5zSGVhZGVyLnBhcmVudCgpKSxvLmFwcGVuZCh0LmNvbnRlbnQpLHIuYXBwZW5kKHQuY29sdW1uRmllbGRzKSxyLmFwcGVuZChvKSx0LndyYXBwZXIuYXBwZW5kKG4pLHQuY29sdW1uc0hlYWRlclRyZWU9bmV3IHB0LmRvbS5UcmVlKHQuY29sdW1uc0hlYWRlclswXSksdC5yb3dzSGVhZGVyVHJlZT1uZXcgcHQuZG9tLlRyZWUodC5yb3dzSGVhZGVyWzBdKSx0LmNvbnRlbnRUcmVlPW5ldyBwdC5kb20uVHJlZSh0LmNvbnRlbnRbMF0pLHQuX2luaXRTZXR0aW5nVGFyZ2V0cygpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7cHQudWkucHJvZ3Jlc3ModGhpcy53cmFwcGVyLGUpfSxfcmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb2x1bW5zSGVhZGVyLmNoaWxkcmVuKFwidGFibGVcIik7dGhpcy5jb250ZW50WzBdLmZpcnN0Q2hpbGQmJih0aGlzLl9zZXRTZWN0aW9uc1dpZHRoKCksdGhpcy5fc2V0U2VjdGlvbnNIZWlnaHQoKSx0aGlzLl9zZXRDb250ZW50V2lkdGgoKSx0aGlzLl9zZXRDb250ZW50SGVpZ2h0KCksZS5jc3MoXCJ0YWJsZS1sYXlvdXRcIixEdCksY2xlYXJUaW1lb3V0KHRoaXMuX2xheW91dFRpbWVvdXQpLHRoaXMuX2xheW91dFRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2UuY3NzKFwidGFibGUtbGF5b3V0XCIsXCJmaXhlZFwiKX0pKX0sX3NldFNlY3Rpb25zV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvd3NIZWFkZXIsdD1lLnBhcmVudChcIi5rLXBpdm90LXJvd2hlYWRlcnNcIikud2lkdGgoRHQpLG49TWF0aC5tYXgodGhpcy5tZWFzdXJlRmllbGRzLm91dGVyV2lkdGgoKSx0aGlzLnJvd0ZpZWxkcy5vdXRlcldpZHRoKCkpO249TWF0aC5tYXgoZS5jaGlsZHJlbihcInRhYmxlXCIpLndpZHRoKCksbiksdC53aWR0aChuKX0sX3NldFNlY3Rpb25zSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWFzdXJlRmllbGRzLmhlaWdodChEdCkuaGVpZ2h0KCksdD10aGlzLmNvbHVtbkZpZWxkcy5oZWlnaHQoRHQpLmhlaWdodCgpLG49dGhpcy5yb3dGaWVsZHMuaGVpZ2h0KER0KS5pbm5lckhlaWdodCgpLGk9dGhpcy5jb2x1bW5zSGVhZGVyLmhlaWdodChEdCkuaW5uZXJIZWlnaHQoKSxyPW4tdGhpcy5yb3dGaWVsZHMuaGVpZ2h0KCksbz10PmU/dDplLGE9aT5uP2k6bjt0aGlzLm1lYXN1cmVGaWVsZHMuaGVpZ2h0KG8pLHRoaXMuY29sdW1uRmllbGRzLmhlaWdodChvKSx0aGlzLnJvd0ZpZWxkcy5oZWlnaHQoYS1yKSx0aGlzLmNvbHVtbnNIZWFkZXIuaGVpZ2h0KGEpfSxfc2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSx0PXRoaXMuY29udGVudC53aWR0aCgpLG49ZS5jaGlsZHJlbihcImNvbGdyb3VwXCIpLmNoaWxkcmVuKCkubGVuZ3RoLGk9MTAwLHI9bip0aGlzLm9wdGlvbnMuY29sdW1uV2lkdGg7cj50JiYoaT1NYXRoLmNlaWwoci90KjEwMCkpLGUuYWRkKHRoaXMuY29sdW1uc0hlYWRlci5jaGlsZHJlbihcInRhYmxlXCIpKS5jc3MoXCJtaW4td2lkdGhcIixpK1wiJVwiKX0sX3NldENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5jb250ZW50LGk9ZS5yb3dzSGVhZGVyLHI9ZS53cmFwcGVyLmlubmVySGVpZ2h0KCksbz1wdC5zdXBwb3J0LnNjcm9sbGJhcigpLGE9blswXS5vZmZzZXRIZWlnaHQ9PT1uWzBdLmNsaWVudEhlaWdodDtpZihlLndyYXBwZXIuaXMoXCI6dmlzaWJsZVwiKSl7aWYoIXIpcmV0dXJuIGEmJihvPTApLGkuaGVpZ2h0KG4uaGVpZ2h0KCktbyksdDtyLT1lLmNvbHVtbkZpZWxkcy5vdXRlckhlaWdodCgpLHItPWUuY29sdW1uc0hlYWRlci5vdXRlckhlaWdodCgpLDIqbz49ciYmKHI9MipvKzEsYXx8KHIrPW8pKSxuLmhlaWdodChyKSxhJiYobz0wKSxpLmhlaWdodChyLW8pfX0sX2F4aXNNZWFzdXJlczpmdW5jdGlvbihlKXt2YXIgdD1bXSxuPXRoaXMuZGF0YVNvdXJjZSxpPW4ubWVhc3VyZXMoKSxyPWkubGVuZ3RoPjF8fGlbMF0mJmlbMF0udHlwZTtyZXR1cm4gbi5tZWFzdXJlc0F4aXMoKT09PWUmJigwPT09bltlXSgpLmxlbmd0aHx8cikmJih0PWkpLHR9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10LmRhdGFTb3VyY2UsaT1uLmF4ZXMoKSxyPShpLmNvbHVtbnN8fHt9KS50dXBsZXN8fFtdLG89KGkucm93c3x8e30pLnR1cGxlc3x8W10sYT10Ll9jb2x1bW5CdWlsZGVyLHM9dC5fcm93QnVpbGRlcixsPXt9LGM9e307dC50cmlnZ2VyKFB0LHthY3Rpb246XCJyZWJpbmRcIn0pfHwoYS5tZWFzdXJlcz10aGlzLl9heGlzTWVhc3VyZXMoXCJjb2x1bW5zXCIpLHQuY29sdW1uc0hlYWRlclRyZWUucmVuZGVyKGEuYnVpbGQocikpLHQucm93c0hlYWRlclRyZWUucmVuZGVyKHMuYnVpbGQobykpLGw9e2luZGV4ZXM6YS5faW5kZXhlcyxtZWFzdXJlczphLm1lYXN1cmVzLG1ldGFkYXRhOmEubWV0YWRhdGF9LGM9e2luZGV4ZXM6cy5faW5kZXhlcyxtZWFzdXJlczp0aGlzLl9heGlzTWVhc3VyZXMoXCJyb3dzXCIpLG1ldGFkYXRhOnMubWV0YWRhdGF9LHQuY29udGVudFRyZWUucmVuZGVyKHQuX2NvbnRlbnRCdWlsZGVyLmJ1aWxkKG4udmlldygpLGwsYykpLHQuX3Jlc2l6ZSgpLHQudG91Y2hTY3JvbGxlcj90LnRvdWNoU2Nyb2xsZXIuY29udGVudFJlc2l6ZWQoKTooZT1wdC50b3VjaFNjcm9sbGVyKHQuY29udGVudCksZSYmZS5tb3ZhYmxlJiYodC50b3VjaFNjcm9sbGVyPWUsZS5tb3ZhYmxlLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXt0LmNvbHVtbnNIZWFkZXIuc2Nyb2xsTGVmdCgtZS5zZW5kZXIueCksdC5yb3dzSGVhZGVyLnNjcm9sbFRvcCgtZS5zZW5kZXIueSl9KSkpLHQuX3Byb2dyZXNzKCExKSx0LnRyaWdnZXIoSXQpKX0sX3Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5jb2x1bW5zSGVhZGVyLGk9dC5yb3dzSGVhZGVyO3QuY29udGVudC5zY3JvbGwoZnVuY3Rpb24oKXtuLnNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0KSxpLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFRvcCl9KSxpLmJpbmQoXCJET01Nb3VzZVNjcm9sbFwiK0V0K1wiIG1vdXNld2hlZWxcIitFdCxlLnByb3h5KHQuX3doZWVsU2Nyb2xsLHQpKX0sX3doZWVsU2Nyb2xsOmZ1bmN0aW9uKHQpe3ZhciBuLGk7dC5jdHJsS2V5fHwobj1wdC53aGVlbERlbHRhWSh0KSxpPXRoaXMuY29udGVudC5zY3JvbGxUb3AoKSxuJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUodC5jdXJyZW50VGFyZ2V0KS5vbmUoXCJ3aGVlbFwiK0V0LCExKSx0aGlzLnJvd3NIZWFkZXIuc2Nyb2xsVG9wKGkrLW4pLHRoaXMuY29udGVudC5zY3JvbGxUb3AoaSstbikpKX19KSxydD1wdC5kb20uZWxlbWVudCxvdD1wdC5kb20uaHRtbCxhdD1wdC5kb20udGV4dCxzdD1mdW5jdGlvbihlLHQpe3JldHVybnttYXhDaGlsZHJlbjowLGNoaWxkcmVuOjAsbWF4TWVtYmVyczowLG1lbWJlcnM6MCxtZWFzdXJlczoxLGxldmVsTnVtOmUscGFyZW50TWVtYmVyOjAhPT10fX0sbHQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10saT0wO3Q+PWk7aSsrKW4ucHVzaChlLm1lbWJlcnNbaV0ubmFtZSk7cmV0dXJuIG59LGN0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVwiXCIsaT0wO3Q+PWk7aSsrKW4rPWUubWVtYmVyc1tpXS5uYW1lO3JldHVybiBufSxkdD1ndC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm1lYXN1cmVzPTEsdGhpcy5tZXRhZGF0YT17fX0sYnVpbGQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdGJvZHkoZSksbj10aGlzLl9jb2xHcm91cCgpO3JldHVybltydChcInRhYmxlXCIsbnVsbCxbbix0XSldfSxyZXNldDpmdW5jdGlvbigpe3RoaXMubWV0YWRhdGE9e319LF9jb2xHcm91cDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9yb3dMZW5ndGgoKSx0PVtdLG49MDtlPm47bisrKXQucHVzaChydChcImNvbFwiLG51bGwpKTtyZXR1cm4gcnQoXCJjb2xncm91cFwiLG51bGwsdCl9LF90Ym9keTpmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3JldHVybiB0aGlzLm1hcD17fSx0aGlzLnJvd3M9W10sdGhpcy5yb290VHVwbGU9dCx0aGlzLl9pbmRleGVzPVtdLHQ/KHRoaXMuX2J1aWxkUm93cyh0LDApLHRoaXMuX25vcm1hbGl6ZSgpKTp0aGlzLnJvd3MucHVzaChydChcInRyXCIsbnVsbCxbcnQoXCJ0aFwiLG51bGwsW290KFwiJm5ic3A7XCIpXSldKSkscnQoXCJ0Ym9keVwiLG51bGwsdGhpcy5yb3dzKX0sX25vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG4saSxyLG89dGhpcy5yb3dzLGE9by5sZW5ndGgscz0wO2E+cztzKyspaWYoZT1vW3NdLDEhPT1lLnJvd1NwYW4pZm9yKGk9ZS5jaGlsZHJlbixuPTAsdD1pLmxlbmd0aDt0Pm47bisrKXI9aVtuXSxyLnR1cGxlQWxsJiYoci5hdHRyLnJvd1NwYW49ZS5yb3dTcGFuKX0sX3Jvd0luZGV4OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnJvd3Msbj10Lmxlbmd0aCxpPTA7bj5pJiZ0W2ldIT09ZTtpKyspO3JldHVybiBpfSxfcm93TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb3dzWzBdP3RoaXMucm93c1swXS5jaGlsZHJlbjpbXSx0PWUubGVuZ3RoLG49MCxpPTA7aWYodClmb3IoO3Q+aTtpKyspbis9ZVtpXS5hdHRyLmNvbFNwYW58fDE7cmV0dXJuIG58fChuPXRoaXMubWVhc3VyZXMpLG59LF9yb3c6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbz10aGlzLnJvb3RUdXBsZS5tZW1iZXJzW3RdLm5hbWUsYT1lLm1lbWJlcnNbdF0ubGV2ZWxOdW0scz1vK2EsbD10aGlzLm1hcCxjPWxbc107cmV0dXJuIGM/KGMubm90Rmlyc3Q9ITEsYy5wYXJlbnRNZW1iZXImJmMucGFyZW50TWVtYmVyPT09bnx8KGMucGFyZW50TWVtYmVyPW4sYy5jb2xTcGFuPTApKTooYz1ydChcInRyXCIsbnVsbCxbXSksYy5wYXJlbnRNZW1iZXI9bixjLmNvbFNwYW49MCxjLnJvd1NwYW49MSxsW3NdPWMsaT1sW28rKCthLTEpXSxpJiYocj1pLmNoaWxkcmVuLGMubm90Rmlyc3Q9clsxXSYmLTE9PT1yWzFdLmF0dHIuY2xhc3NOYW1lLmluZGV4T2YoXCJrLWFsdFwiKT8hMDppLm5vdEZpcnN0KSx0aGlzLnJvd3Muc3BsaWNlKHRoaXMuX3Jvd0luZGV4KGkpKzEsMCxjKSksY30sX21lYXN1cmVzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYT10aGlzLm1hcCxzPWEubWVhc3VyZVJvdztmb3Ioc3x8KHM9cnQoXCJ0clwiLG51bGwsW10pLGEubWVhc3VyZVJvdz1zLHRoaXMucm93cy5wdXNoKHMpKSxyPTAsbz1lLmxlbmd0aDtvPnI7cisrKWk9ZVtyXSxzLmNoaWxkcmVuLnB1c2gocnQoXCJ0aFwiLHtjbGFzc05hbWU6XCJrLWhlYWRlclwiKyhufHxcIlwiKX0sW3RoaXMuX2NvbnRlbnQoaSx0KV0pKTtyZXR1cm4gb30sX2NvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QodGhpcy50ZW1wbGF0ZSh7bWVtYmVyOmUsdHVwbGU6dH0pKX0sX2NlbGw6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcnQoXCJ0aFwiLHtjbGFzc05hbWU6XCJrLWhlYWRlclwiK2V9LHQpfSxfYnVpbGRSb3dzOmZ1bmN0aW9uKGUsbixpKXt2YXIgcixvLGEscyxsLGMsZCx1LGgscCxmPWUubWVtYmVycyxnPWZbbl0sbT1mW24rMV0sdj1bXSxfPTA7aWYoZy5tZWFzdXJlKXJldHVybiB0aGlzLl9tZWFzdXJlcyhnLmNoaWxkcmVuLGUpLHQ7aWYodT1wdC5zdHJpbmdpZnkobHQoZSxuKSkscj10aGlzLl9yb3coZSxuLGkpLGE9Zy5jaGlsZHJlbixzPWEubGVuZ3RoLHA9dGhpcy5tZXRhZGF0YVt1XSxwfHwodGhpcy5tZXRhZGF0YVt1XT1wPXN0KCtnLmxldmVsTnVtLG4pKSx0aGlzLl9pbmRleGVzLnB1c2goe3BhdGg6dSx0dXBsZTplfSksZy5oYXNDaGlsZHJlbiYmKHAuZXhwYW5kZWQ9PT0hMSYmKHM9MCxwLmNoaWxkcmVuPTApLGQ9e2NsYXNzTmFtZTpcImstaWNvbiBcIisocz9SdDpCdCl9LGRbcHQuYXR0cihcInBhdGhcIildPXUsdi5wdXNoKHJ0KFwic3BhblwiLGQpKSksdi5wdXNoKHRoaXMuX2NvbnRlbnQoZyxlKSksbD10aGlzLl9jZWxsKHIubm90Rmlyc3Q/XCIgay1maXJzdFwiOlwiXCIsdiksci5jaGlsZHJlbi5wdXNoKGwpLHIuY29sU3Bhbis9MSxzKXtmb3IoYz10aGlzLl9jZWxsKFwiIGstYWx0XCIsW3RoaXMuX2NvbnRlbnQoZyxlKV0pLHIuY2hpbGRyZW4ucHVzaChjKTtzPl87XysrKW89dGhpcy5fYnVpbGRSb3dzKGFbX10sbixnKTtoPW8uY29sU3BhbixsLmF0dHIuY29sU3Bhbj1oLHAuY2hpbGRyZW49aCxwLm1lbWJlcnM9MSxyLmNvbFNwYW4rPWgsci5yb3dTcGFuPW8ucm93U3BhbisxLG0mJihoPW0ubWVhc3VyZT90aGlzLl9tZWFzdXJlcyhtLmNoaWxkcmVuLGUsXCIgay1hbHRcIik6dGhpcy5fYnVpbGRSb3dzKGUsbisxKS5jb2xTcGFuLGMuYXR0ci5jb2xTcGFuPWgsaC09MSxwLm1lbWJlcnMrPWgsci5jb2xTcGFuKz1oKX1lbHNlIG0mJihoPW0ubWVhc3VyZT90aGlzLl9tZWFzdXJlcyhtLmNoaWxkcmVuLGUpOnRoaXMuX2J1aWxkUm93cyhlLG4rMSkuY29sU3BhbixwLm1lbWJlcnM9aCxoPjEmJihsLmF0dHIuY29sU3Bhbj1oLHIuY29sU3Bhbis9aC0xKSk7cmV0dXJuIHAuY2hpbGRyZW4+cC5tYXhDaGlsZHJlbiYmKHAubWF4Q2hpbGRyZW49cC5jaGlsZHJlbikscC5tZW1iZXJzPnAubWF4TWVtYmVycyYmKHAubWF4TWVtYmVycz1wLm1lbWJlcnMpLChjfHxsKS50dXBsZUFsbD0hMCxyfX0pLHV0PWd0LmV4dGVuZCh7aW5pdDpmdW5jdGlvbigpe3RoaXMubWV0YWRhdGE9e319LGJ1aWxkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3Rib2R5KGUpLG49dGhpcy5fY29sR3JvdXAoKTtyZXR1cm5bcnQoXCJ0YWJsZVwiLG51bGwsW24sdF0pXX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm1ldGFkYXRhPXt9fSxfY29sR3JvdXA6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5yb3dzWzBdLmNoaWxkcmVuLmxlbmd0aCx0PVtdLG49MDtlPm47bisrKXQucHVzaChydChcImNvbFwiLG51bGwpKTtyZXR1cm4gcnQoXCJjb2xncm91cFwiLG51bGwsdCl9LF90Ym9keTpmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3JldHVybiB0aGlzLnJvb3RUdXBsZT10LHRoaXMucm93cz1bXSx0aGlzLm1hcD17fSx0aGlzLl9pbmRleGVzPVtdLHQ/KHRoaXMuX2J1aWxkUm93cyh0LDApLHRoaXMuX25vcm1hbGl6ZSgpKTp0aGlzLnJvd3MucHVzaChydChcInRyXCIsbnVsbCxbcnQoXCJ0ZFwiLG51bGwsW290KFwiJm5ic3A7XCIpXSldKSkscnQoXCJ0Ym9keVwiLG51bGwsdGhpcy5yb3dzKX0sX25vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG4saSxyPXRoaXMucm93cyxvPXIubGVuZ3RoLGE9MCxzPXRoaXMucm9vdFR1cGxlLm1lbWJlcnMsbD1zWzBdLm5hbWUsYz1zLmxlbmd0aCxkPTAsdT10aGlzLm1hcDtvPmE7YSsrKWZvcihlPXJbYV0sZD0wO2M+ZDtkKyspbj10aGlzW3NbZF0ubmFtZV0sdD1lLmNvbFNwYW5bXCJkaW1cIitkXSx0JiZuPnQubGV2ZWxOdW0mJih0LmF0dHIuY29sU3Bhbj1uLXQubGV2ZWxOdW0rMSk7ZT11W2xdLGk9dVtsK1wiYWxsXCJdLGUmJihlLmNoaWxkcmVuWzBdLmF0dHIuY2xhc3NOYW1lPVwiay1maXJzdFwiKSxpJiYoaS5jaGlsZHJlblswXS5hdHRyLmNsYXNzTmFtZSs9XCIgay1maXJzdFwiKX0sX3JvdzpmdW5jdGlvbihlKXt2YXIgdD1ydChcInRyXCIsbnVsbCxlKTtyZXR1cm4gdC5yb3dTcGFuPTEsdC5jb2xTcGFuPXt9LHRoaXMucm93cy5wdXNoKHQpLHR9LF9jb250ZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG90KHRoaXMudGVtcGxhdGUoe21lbWJlcjplLHR1cGxlOnR9KSl9LF9idWlsZFJvd3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQsdT10aGlzLm1hcCxoPWUubWVtYmVycyxwPWhbdF0sZj1oW3QrMV0sZz1wLmNoaWxkcmVuLG09Zy5sZW5ndGgsdj0rcC5sZXZlbE51bSsxLF89dGhpcy5yb290VHVwbGUubWVtYmVyc1t0XS5uYW1lLHk9bHQoZSx0LTEpLmpvaW4oXCJcIiksdz15KyhwLnBhcmVudE5hbWV8fFwiXCIpLGI9dVt3K1wiYWxsXCJdfHx1W3ddLGs9W107aWYoIWJ8fGIuaGFzQ2hpbGQ/Yj10aGlzLl9yb3coKTpiLmhhc0NoaWxkPSEwLHAubWVhc3VyZSl7Zm9yKGM9e2NsYXNzTmFtZTpiLmFsbENlbGw/XCJrLWdyaWQtZm9vdGVyXCI6XCJcIn0sYi5jaGlsZHJlbi5wdXNoKHJ0KFwidGRcIixjLFt0aGlzLl9jb250ZW50KGdbMF0sZSldKSksYi5yb3dTcGFuPW0sZD0xO20+ZDtkKyspdGhpcy5fcm93KFtydChcInRkXCIsYyxbdGhpcy5fY29udGVudChnW2RdLGUpXSldKTtyZXR1cm4gYn1pZih1W3krcC5uYW1lXT1iLG49cHQuc3RyaW5naWZ5KGx0KGUsdCkpLG89dGhpcy5tZXRhZGF0YVtuXSxvfHwodGhpcy5tZXRhZGF0YVtuXT1vPXN0KHYtMSx0KSksdGhpcy5faW5kZXhlcy5wdXNoKHtwYXRoOm4sdHVwbGU6ZX0pLHAuaGFzQ2hpbGRyZW4mJihvLmV4cGFuZGVkPT09ITEmJihtPTAsby5jaGlsZHJlbj0wKSxhPXtjbGFzc05hbWU6XCJrLWljb24gXCIrKG0/UnQ6QnQpfSxhW3B0LmF0dHIoXCJwYXRoXCIpXT1uLGsucHVzaChydChcInNwYW5cIixhKSkpLGsucHVzaCh0aGlzLl9jb250ZW50KHAsZSkpLGw9cnQoXCJ0ZFwiLHtjbGFzc05hbWU6Yi5hbGxDZWxsJiYhbT9cImstZ3JpZC1mb290ZXJcIjpcIlwifSxrKSxsLmxldmVsTnVtPXYsYi5jaGlsZHJlbi5wdXNoKGwpLGIuY29sU3BhbltcImRpbVwiK3RdPWwsKCF0aGlzW19dfHx2PnRoaXNbX10pJiYodGhpc1tfXT12KSxtKXtmb3IoYi5hbGxDZWxsPSExLGIuaGFzQ2hpbGQ9ITEsZD0wO20+ZDtkKyspaT10aGlzLl9idWlsZFJvd3MoZ1tkXSx0KSxiIT09aSYmKGIucm93U3Bhbis9aS5yb3dTcGFuKTtiLnJvd1NwYW4+MSYmKGwuYXR0ci5yb3dTcGFuPWIucm93U3Bhbiksby5jaGlsZHJlbj1iLnJvd1NwYW4scz1ydChcInRkXCIse2NsYXNzTmFtZTpcImstZ3JpZC1mb290ZXJcIn0sW3RoaXMuX2NvbnRlbnQocCxlKV0pLHMubGV2ZWxOdW09dixyPXRoaXMuX3Jvdyhbc10pLHIuY29sU3BhbltcImRpbVwiK3RdPXMsci5hbGxDZWxsPSEwLHVbeStwLm5hbWUrXCJhbGxcIl09cixmJiYoaT10aGlzLl9idWlsZFJvd3MoZSx0KzEpLHMuYXR0ci5yb3dTcGFuPWkucm93U3BhbiksYi5yb3dTcGFuKz1yLnJvd1NwYW4sby5tZW1iZXJzPXIucm93U3Bhbn1lbHNlIGYmJihiLmhhc0NoaWxkPSExLHRoaXMuX2J1aWxkUm93cyhlLHQrMSksKHN8fGwpLmF0dHIucm93U3Bhbj1iLnJvd1NwYW4sby5tZW1iZXJzPWIucm93U3Bhbik7cmV0dXJuIG8uY2hpbGRyZW4+by5tYXhDaGlsZHJlbiYmKG8ubWF4Q2hpbGRyZW49by5jaGlsZHJlbiksby5tZW1iZXJzPm8ubWF4TWVtYmVycyYmKG8ubWF4TWVtYmVycz1vLm1lbWJlcnMpLGJ9fSksaHQ9Z3QuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5jb2x1bW5BeGlzPXt9LHRoaXMucm93QXhpcz17fX0sYnVpbGQ6ZnVuY3Rpb24oZSxuLGkpe3ZhciByLG8sYT1uLmluZGV4ZXNbMF0scz1uLm1ldGFkYXRhW2E/YS5wYXRoOnRdO3JldHVybiB0aGlzLmNvbHVtbkF4aXM9bix0aGlzLnJvd0F4aXM9aSx0aGlzLmRhdGE9ZSx0aGlzLnJvd0xlbmd0aD1zP3MubWF4Q2hpbGRyZW4rcy5tYXhNZW1iZXJzOm4ubWVhc3VyZXMubGVuZ3RofHwxLHRoaXMucm93TGVuZ3RofHwodGhpcy5yb3dMZW5ndGg9MSkscj10aGlzLl90Ym9keSgpLG89dGhpcy5fY29sR3JvdXAoKSxbcnQoXCJ0YWJsZVwiLG51bGwsW28scl0pXX0sX2NvbEdyb3VwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb2x1bW5BeGlzLm1lYXN1cmVzLmxlbmd0aHx8MSx0PVtdLG49MDtmb3IodGhpcy5yb3dzWzBdJiYoZT10aGlzLnJvd3NbMF0uY2hpbGRyZW4ubGVuZ3RoKTtlPm47bisrKXQucHVzaChydChcImNvbFwiLG51bGwpKTtyZXR1cm4gcnQoXCJjb2xncm91cFwiLG51bGwsdCl9LF90Ym9keTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvd3M9W10sdGhpcy5kYXRhWzBdPyh0aGlzLmNvbHVtbkluZGV4ZXM9dGhpcy5faW5kZXhlcyh0aGlzLmNvbHVtbkF4aXMpLHRoaXMucm93SW5kZXhlcz10aGlzLl9pbmRleGVzKHRoaXMucm93QXhpcyksdGhpcy5fYnVpbGRSb3dzKCkpOnRoaXMucm93cy5wdXNoKHJ0KFwidHJcIixudWxsLFtydChcInRkXCIsbnVsbCxbb3QoXCImbmJzcDtcIildKV0pKSxydChcInRib2R5XCIsbnVsbCx0aGlzLnJvd3MpfSxfaW5kZXhlczpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhLHM9W10sbD1lLmluZGV4ZXMsYz1lLm1ldGFkYXRhLGQ9ZS5tZWFzdXJlcyx1PWQubGVuZ3RofHwxLGg9MCxwPTAsZj0wLGc9bC5sZW5ndGg7aWYoIWcpe2ZvcihyPTA7dT5yO3IrKylzW3JdPXtpbmRleDpyLG1lYXN1cmU6ZFtyXSx0dXBsZTpudWxsfTtyZXR1cm4gc31mb3IoO2c+ZjtmKyspe2lmKG49bFtmXSxpPWNbbi5wYXRoXSxvPWkuY2hpbGRyZW4raS5tZW1iZXJzLGE9MCxvJiYoby09dSksaS5leHBhbmRlZD09PSExJiZpLmNoaWxkcmVuIT09aS5tYXhDaGlsZHJlbiYmKGE9aS5tYXhDaGlsZHJlbiksaS5wYXJlbnRNZW1iZXImJjA9PT1pLmxldmVsTnVtJiYobz0tMSksbz4tMSl7Zm9yKHI9MDt1PnI7cisrKXNbbytwK3JdPXtjaGlsZHJlbjpvLGluZGV4OmgsbWVhc3VyZTpkW3JdLHR1cGxlOm4udHVwbGV9LGgrPTE7Zm9yKDtzW3BdIT09dDspcCs9MX1oKz1hfXJldHVybiBzfSxfYnVpbGRSb3dzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMucm93SW5kZXhlcyx0PWUubGVuZ3RoLG49MDt0Pm47bisrKXRoaXMucm93cy5wdXNoKHRoaXMuX2J1aWxkUm93KGVbbl0pKX0sX2J1aWxkUm93OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLGkscixvLGEscz1lLmluZGV4KnRoaXMucm93TGVuZ3RoLGw9dGhpcy5jb2x1bW5JbmRleGVzLGM9bC5sZW5ndGgsZD1bXSx1PTA7Yz51O3UrKyl0PWxbdV0scj17fSx0LmNoaWxkcmVuJiYoci5jbGFzc05hbWU9XCJrLWFsdFwiKSxpPVwiXCIsbz10aGlzLmRhdGFbcyt0LmluZGV4XSxhPXQubWVhc3VyZXx8ZS5tZWFzdXJlLG49e2NvbHVtblR1cGxlOnQudHVwbGUscm93VHVwbGU6ZS50dXBsZSxtZWFzdXJlOmEsZGF0YUl0ZW06b30sXCJcIiE9PW8udmFsdWUmJmEmJmEudHlwZSYmKFwic3RhdHVzXCI9PT1hLnR5cGU/aT10aGlzLmtwaVN0YXR1c1RlbXBsYXRlKG4pOlwidHJlbmRcIj09PWEudHlwZSYmKGk9dGhpcy5rcGlUcmVuZFRlbXBsYXRlKG4pKSksaXx8KGk9dGhpcy5kYXRhVGVtcGxhdGUobikpLGQucHVzaChydChcInRkXCIscixbb3QoaSldKSk7cmV0dXJuIHI9e30sZS5jaGlsZHJlbiYmKHIuY2xhc3NOYW1lPVwiay1ncmlkLWZvb3RlclwiKSxydChcInRyXCIscixkKX19KSxmdC5wbHVnaW4oaXQpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQuY2hpbGRyZW4oXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpO3JldHVybiBuLmxlbmd0aHx8KG49dCksbi5jaGlsZHJlbihlKX19ZnVuY3Rpb24gaShlKXtyZXR1cm4gZi50ZW1wbGF0ZShlLHt1c2VXaXRoQmxvY2s6ITF9KX1mdW5jdGlvbiByKGUpe3JldHVybiBlLmZpbmQoXCI+IGRpdiAuay1jaGVja2JveCBbdHlwZT1jaGVja2JveF1cIil9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXtuPW4uY2xvc2VzdChHKTt2YXIgaSxyPW4ucGFyZW50KCk7cmV0dXJuIHIucGFyZW50KCkuaXMoXCJsaVwiKSYmKGk9ci5wYXJlbnQoKSksdGhpcy5fZGF0YVNvdXJjZU1vdmUodCxyLGksZnVuY3Rpb24odCxpKXtyZXR1cm4gdGhpcy5faW5zZXJ0KHQuZGF0YSgpLGksbi5pbmRleCgpK2UpfSl9fWZ1bmN0aW9uIGEodCxuKXtmb3IodmFyIGk7dCYmXCJ1bFwiIT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7KWk9dCx0PXQubmV4dFNpYmxpbmcsMz09aS5ub2RlVHlwZSYmKGkubm9kZVZhbHVlPWUudHJpbShpLm5vZGVWYWx1ZSkpLHAudGVzdChpLmNsYXNzTmFtZSk/bi5pbnNlcnRCZWZvcmUoaSxuLmZpcnN0Q2hpbGQpOm4uYXBwZW5kQ2hpbGQoaSl9ZnVuY3Rpb24gcyh0KXt2YXIgbj10LmNoaWxkcmVuKFwiZGl2XCIpLGk9dC5jaGlsZHJlbihcInVsXCIpLHI9bi5jaGlsZHJlbihcIi5rLWljb25cIiksbz10LmNoaWxkcmVuKFwiOmNoZWNrYm94XCIpLHM9bi5jaGlsZHJlbihcIi5rLWluXCIpO3QuaGFzQ2xhc3MoXCJrLXRyZWV2aWV3XCIpfHwobi5sZW5ndGh8fChuPWUoXCI8ZGl2IC8+XCIpLnByZXBlbmRUbyh0KSksIXIubGVuZ3RoJiZpLmxlbmd0aD9yPWUoXCI8c3BhbiBjbGFzcz0nay1pY29uJyAvPlwiKS5wcmVwZW5kVG8obik6aS5sZW5ndGgmJmkuY2hpbGRyZW4oKS5sZW5ndGh8fChyLnJlbW92ZSgpLGkucmVtb3ZlKCkpLG8ubGVuZ3RoJiZlKFwiPHNwYW4gY2xhc3M9J2stY2hlY2tib3gnIC8+XCIpLmFwcGVuZFRvKG4pLmFwcGVuZChvKSxzLmxlbmd0aHx8KHM9dC5jaGlsZHJlbihcImFcIikuZXEoMCkuYWRkQ2xhc3MoXCJrLWluXCIpLHMubGVuZ3RofHwocz1lKFwiPHNwYW4gY2xhc3M9J2staW4nIC8+XCIpKSxzLmFwcGVuZFRvKG4pLG4ubGVuZ3RoJiZhKG5bMF0ubmV4dFNpYmxpbmcsc1swXSkpKX1mdW5jdGlvbiBsKGUpe3ZhciB0PXRoaXM7dC50cmVldmlldz1lLHQuaG92ZXJlZD1lLmVsZW1lbnQsdC5fZHJhZ2dhYmxlPW5ldyBnLkRyYWdnYWJsZShlLmVsZW1lbnQse2ZpbHRlcjpcImRpdjpub3QoLmstc3RhdGUtZGlzYWJsZWQpIC5rLWluXCIsaGludDpmdW5jdGlvbih0KXtyZXR1cm4gZS50ZW1wbGF0ZXMuZHJhZ0NsdWUoe2l0ZW06ZS5kYXRhSXRlbSh0KSx0cmVldmlldzplLm9wdGlvbnN9KX0sY3Vyc29yT2Zmc2V0OntsZWZ0OjEwLHRvcDpmLnN1cHBvcnQubW9iaWxlT1M/LTQwL2Yuc3VwcG9ydC56b29tTGV2ZWwoKToxMH0sZHJhZ3N0YXJ0OmsodC5kcmFnc3RhcnQsdCksZHJhZ2NhbmNlbDprKHQuZHJhZ2NhbmNlbCx0KSxkcmFnOmsodC5kcmFnLHQpLGRyYWdlbmQ6ayh0LmRyYWdlbmQsdCksJGFuZ3VsYXI6ZS5vcHRpb25zLiRhbmd1bGFyfSl9dmFyIGMsZCx1LGgscCxmPXdpbmRvdy5rZW5kbyxnPWYudWksbT1mLmRhdGEsdj1lLmV4dGVuZCxfPWYudGVtcGxhdGUseT1lLmlzQXJyYXksdz1nLldpZGdldCxiPW0uSGllcmFyY2hpY2FsRGF0YVNvdXJjZSxrPWUucHJveHkseD1mLmtleXMsQz1cIi5rZW5kb1RyZWVWaWV3XCIsUz1cInNlbGVjdFwiLFQ9XCJjaGVja1wiLEQ9XCJuYXZpZ2F0ZVwiLEE9XCJleHBhbmRcIixFPVwiY2hhbmdlXCIsTT1cImVycm9yXCIsUD1cImNoZWNrZWRcIixJPVwiaW5kZXRlcm1pbmF0ZVwiLHo9XCJjb2xsYXBzZVwiLEY9XCJkcmFnc3RhcnRcIixSPVwiZHJhZ1wiLEI9XCJkcm9wXCIsTD1cImRyYWdlbmRcIixPPVwiZGF0YUJvdW5kXCIsSD1cImNsaWNrXCIsTj1cInZpc2liaWxpdHlcIixWPVwidW5kZWZpbmVkXCIsVT1cImstc3RhdGUtaG92ZXJcIixXPVwiay10cmVldmlld1wiLGo9XCI6dmlzaWJsZVwiLEc9XCIuay1pdGVtXCIscT1cInN0cmluZ1wiLCQ9XCJhcmlhLXNlbGVjdGVkXCIsWT1cImFyaWEtZGlzYWJsZWRcIixLPXt0ZXh0OlwiZGF0YVRleHRGaWVsZFwiLHVybDpcImRhdGFVcmxGaWVsZFwiLHNwcml0ZUNzc0NsYXNzOlwiZGF0YVNwcml0ZUNzc0NsYXNzRmllbGRcIixpbWFnZVVybDpcImRhdGFJbWFnZVVybEZpZWxkXCJ9LFE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIEhUTUxFbGVtZW50P2UgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDplJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmMT09PWUubm9kZVR5cGUmJnR5cGVvZiBlLm5vZGVOYW1lPT09cX07ZD1uKFwiLmstZ3JvdXBcIiksdT1uKFwiLmstZ3JvdXAsLmstY29udGVudFwiKSxoPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkcmVuKFwiZGl2XCIpLmNoaWxkcmVuKFwiLmstaWNvblwiKX0scD0vay1zcHJpdGUvLGM9Zi51aS5EYXRhQm91bmRXaWRnZXQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMsbz0hMSxhPXQmJiEhdC5kYXRhU291cmNlO3kodCkmJihuPSEwLHQ9e2RhdGFTb3VyY2U6dH0pLHQmJnR5cGVvZiB0LmxvYWRPbkRlbWFuZD09ViYmeSh0LmRhdGFTb3VyY2UpJiYodC5sb2FkT25EZW1hbmQ9ITEpLHcucHJvdG90eXBlLmluaXQuY2FsbChyLGUsdCksZT1yLmVsZW1lbnQsdD1yLm9wdGlvbnMsaT1lLmlzKFwidWxcIikmJmV8fGUuaGFzQ2xhc3MoVykmJmUuY2hpbGRyZW4oXCJ1bFwiKSxvPSFhJiZpLmxlbmd0aCxvJiYodC5kYXRhU291cmNlLmxpc3Q9aSksci5fYW5pbWF0aW9uKCksci5fYWNjZXNzb3JzKCksci5fdGVtcGxhdGVzKCksZS5oYXNDbGFzcyhXKT8oci53cmFwcGVyPWUsci5yb290PWUuY2hpbGRyZW4oXCJ1bFwiKS5lcSgwKSk6KHIuX3dyYXBwZXIoKSxpJiYoci5yb290PWUsci5fZ3JvdXAoci53cmFwcGVyKSkpLHIuX3RhYmluZGV4KCksci5yb290LmF0dHIoXCJyb2xlXCIsXCJ0cmVlXCIpLHIuX2RhdGFTb3VyY2Uobyksci5fYXR0YWNoRXZlbnRzKCksci5fZHJhZ2dpbmcoKSxvP3IuX3N5bmNIdG1sQW5kRGF0YVNvdXJjZSgpOnQuYXV0b0JpbmQmJihyLl9wcm9ncmVzcyghMCksci5kYXRhU291cmNlLmZldGNoKCkpLHQuY2hlY2tib3hlcyYmdC5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW4mJnIudXBkYXRlSW5kZXRlcm1pbmF0ZSgpLHIuZWxlbWVudFswXS5pZCYmKHIuX2FyaWFJZD1mLmZvcm1hdChcInswfV90dl9hY3RpdmVcIixyLmVsZW1lbnRbMF0uaWQpKSxmLm5vdGlmeShyKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1cIi5rLWluOm5vdCguay1zdGF0ZS1zZWxlY3RlZCwuay1zdGF0ZS1kaXNhYmxlZClcIixpPVwibW91c2VlbnRlclwiO3Qud3JhcHBlci5vbihpK0MsXCIuay1pbi5rLXN0YXRlLXNlbGVjdGVkXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oaStDLG4sZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKFUpfSkub24oXCJtb3VzZWxlYXZlXCIrQyxuLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhVKX0pLm9uKEgrQyxuLGsodC5fY2xpY2ssdCkpLm9uKFwiZGJsY2xpY2tcIitDLFwiLmstaW46bm90KC5rLXN0YXRlLWRpc2FibGVkKVwiLGsodC5fdG9nZ2xlQnV0dG9uQ2xpY2ssdCkpLm9uKEgrQyxcIi5rLXBsdXMsLmstbWludXNcIixrKHQuX3RvZ2dsZUJ1dHRvbkNsaWNrLHQpKS5vbihcImtleWRvd25cIitDLGsodC5fa2V5ZG93bix0KSkub24oXCJmb2N1c1wiK0Msayh0Ll9mb2N1cyx0KSkub24oXCJibHVyXCIrQyxrKHQuX2JsdXIsdCkpLm9uKFwibW91c2Vkb3duXCIrQyxcIi5rLWluLC5rLWNoZWNrYm94IDpjaGVja2JveCwuay1wbHVzLC5rLW1pbnVzXCIsayh0Ll9tb3VzZWRvd24sdCkpLm9uKFwiY2hhbmdlXCIrQyxcIi5rLWNoZWNrYm94IDpjaGVja2JveFwiLGsodC5fY2hlY2tib3hDaGFuZ2UsdCkpLm9uKFwiY2xpY2tcIitDLFwiLmstY2hlY2tib3ggOmNoZWNrYm94XCIsayh0Ll9jaGVja2JveENsaWNrLHQpKS5vbihcImNsaWNrXCIrQyxcIi5rLXJlcXVlc3QtcmV0cnlcIixrKHQuX3JldHJ5UmVxdWVzdCx0KSkub24oXCJjbGlja1wiK0MsZnVuY3Rpb24obil7ZShuLnRhcmdldCkuaXMoXCI6a2VuZG9Gb2N1c2FibGVcIil8fHQuZm9jdXMoKX0pfSxfY2hlY2tib3hDbGljazpmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KTtuLmRhdGEoSSkmJihuLmRhdGEoSSwhMSkucHJvcChJLCExKS5wcm9wKFAsITApLHRoaXMuX2NoZWNrYm94Q2hhbmdlKHQpKX0sX3N5bmNIdG1sQW5kRGF0YVNvdXJjZTpmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxhLHMsbCxjLGQ7Zm9yKGU9ZXx8dGhpcy5yb290LHQ9dHx8dGhpcy5kYXRhU291cmNlLG49dC52aWV3KCksaT1mLmF0dHIoXCJ1aWRcIiksbz1mLmF0dHIoXCJleHBhbmRlZFwiKSxhPXRoaXMub3B0aW9ucy5jaGVja2JveGVzLHM9ZS5jaGlsZHJlbihcImxpXCIpLGw9MDtzLmxlbmd0aD5sO2wrKylkPW5bbF0sYz1zLmVxKGwpLGMuYXR0cihcInJvbGVcIixcInRyZWVpdGVtXCIpLmF0dHIoaSxkLnVpZCksZC5leHBhbmRlZD1cInRydWVcIj09PWMuYXR0cihvKSxhJiYoZC5jaGVja2VkPXIoYykucHJvcChQKSksdGhpcy5fc3luY0h0bWxBbmREYXRhU291cmNlKGMuY2hpbGRyZW4oXCJ1bFwiKSxkLmNoaWxkcmVuKX0sX2FuaW1hdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PWUuYW5pbWF0aW9uO3Q9PT0hMT90PXtleHBhbmQ6e2VmZmVjdHM6e319LGNvbGxhcHNlOntoaWRlOiEwLGVmZmVjdHM6e319fTp0LmNvbGxhcHNlJiZcImVmZmVjdHNcImluIHQuY29sbGFwc2V8fCh0LmNvbGxhcHNlPXYoe3JldmVyc2U6ITB9LHQuZXhwYW5kKSksdih0LmNvbGxhcHNlLHtoaWRlOiEwfSksZS5hbmltYXRpb249dH0sX2RyYWdnaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmRyYWdBbmREcm9wLHQ9dGhpcy5kcmFnZ2luZztlJiYhdD90aGlzLmRyYWdnaW5nPW5ldyBsKHRoaXMpOiFlJiZ0JiYodC5kZXN0cm95KCksdGhpcy5kcmFnZ2luZz1udWxsKX0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj1rKGUuX2ZpZWxkQWNjZXNzb3IsZSk7dC50ZW1wbGF0ZSYmdHlwZW9mIHQudGVtcGxhdGU9PXE/dC50ZW1wbGF0ZT1fKHQudGVtcGxhdGUpOnQudGVtcGxhdGV8fCh0LnRlbXBsYXRlPWkoXCIjIHZhciB0ZXh0ID0gXCIrbihcInRleHRcIikrXCIoZGF0YS5pdGVtKTsgIyMgaWYgKHR5cGVvZiBkYXRhLml0ZW0uZW5jb2RlZCAhPSAndW5kZWZpbmVkJyAmJiBkYXRhLml0ZW0uZW5jb2RlZCA9PT0gZmFsc2UpIHsjIz0gdGV4dCAjIyB9IGVsc2UgeyAjIzogdGV4dCAjIyB9ICNcIikpLGUuX2NoZWNrYm94ZXMoKSxlLnRlbXBsYXRlcz17d3JhcHBlckNzc0NsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJrLWl0ZW1cIixpPXQuaW5kZXg7cmV0dXJuIGUuZmlyc3RMZXZlbCYmMD09PWkmJihuKz1cIiBrLWZpcnN0XCIpLGk9PWUubGVuZ3RoLTEmJihuKz1cIiBrLWxhc3RcIiksbn0sY3NzQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cIlwiLGk9dC5pbmRleCxyPWUubGVuZ3RoLTE7cmV0dXJuIGUuZmlyc3RMZXZlbCYmMD09PWkmJihuKz1cImstdG9wIFwiKSxuKz0wPT09aSYmaSE9cj9cImstdG9wXCI6aT09cj9cImstYm90XCI6XCJrLW1pZFwifSx0ZXh0Q2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJrLWluXCI7cmV0dXJuIGUuZW5hYmxlZD09PSExJiYodCs9XCIgay1zdGF0ZS1kaXNhYmxlZFwiKSxlLnNlbGVjdGVkPT09ITAmJih0Kz1cIiBrLXN0YXRlLXNlbGVjdGVkXCIpLHR9LHRvZ2dsZUJ1dHRvbkNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PVwiay1pY29uXCI7cmV0dXJuIHQrPWUuZXhwYW5kZWQhPT0hMD9cIiBrLXBsdXNcIjpcIiBrLW1pbnVzXCIsZS5lbmFibGVkPT09ITEmJih0Kz1cIi1kaXNhYmxlZFwiKSx0fSxncm91cEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIjtyZXR1cm4gZS5maXJzdExldmVsfHwodD1cInJvbGU9J2dyb3VwJ1wiKSx0KyhlLmV4cGFuZGVkIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSdcIjpcIlwiKX0sZ3JvdXBDc3NDbGFzczpmdW5jdGlvbihlKXt2YXIgdD1cImstZ3JvdXBcIjtyZXR1cm4gZS5maXJzdExldmVsJiYodCs9XCIgay10cmVldmlldy1saW5lc1wiKSx0fSxkcmFnQ2x1ZTppKFwiPGRpdiBjbGFzcz0nay1oZWFkZXIgay1kcmFnLWNsdWUnPjxzcGFuIGNsYXNzPSdrLWljb24gay1kcmFnLXN0YXR1cycgLz4jPSBkYXRhLnRyZWV2aWV3LnRlbXBsYXRlKGRhdGEpICM8L2Rpdj5cIiksZ3JvdXA6aShcIjx1bCBjbGFzcz0nIz0gZGF0YS5yLmdyb3VwQ3NzQ2xhc3MoZGF0YS5ncm91cCkgIycjPSBkYXRhLnIuZ3JvdXBBdHRyaWJ1dGVzKGRhdGEuZ3JvdXApICM+Iz0gZGF0YS5yZW5kZXJJdGVtcyhkYXRhKSAjPC91bD5cIiksaXRlbUNvbnRlbnQ6aShcIiMgdmFyIGltYWdlVXJsID0gXCIrbihcImltYWdlVXJsXCIpK1wiKGRhdGEuaXRlbSk7ICMjIHZhciBzcHJpdGVDc3NDbGFzcyA9IFwiK24oXCJzcHJpdGVDc3NDbGFzc1wiKStcIihkYXRhLml0ZW0pOyAjIyBpZiAoaW1hZ2VVcmwpIHsgIzxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnPiMgfSAjIyBpZiAoc3ByaXRlQ3NzQ2xhc3MpIHsgIzxzcGFuIGNsYXNzPSdrLXNwcml0ZSAjPSBzcHJpdGVDc3NDbGFzcyAjJyAvPiMgfSAjIz0gZGF0YS50cmVldmlldy50ZW1wbGF0ZShkYXRhKSAjXCIpLGl0ZW1FbGVtZW50OmkoXCIjIHZhciBpdGVtID0gZGF0YS5pdGVtLCByID0gZGF0YS5yOyAjIyB2YXIgdXJsID0gXCIrbihcInVybFwiKStcIihpdGVtKTsgIzxkaXYgY2xhc3M9JyM9IHIuY3NzQ2xhc3MoZGF0YS5ncm91cCwgaXRlbSkgIyc+IyBpZiAoaXRlbS5oYXNDaGlsZHJlbikgeyAjPHNwYW4gY2xhc3M9JyM9IHIudG9nZ2xlQnV0dG9uQ2xhc3MoaXRlbSkgIycgcm9sZT0ncHJlc2VudGF0aW9uJyAvPiMgfSAjIyBpZiAoZGF0YS50cmVldmlldy5jaGVja2JveGVzKSB7ICM8c3BhbiBjbGFzcz0nay1jaGVja2JveCcgcm9sZT0ncHJlc2VudGF0aW9uJz4jPSBkYXRhLnRyZWV2aWV3LmNoZWNrYm94ZXMudGVtcGxhdGUoZGF0YSkgIzwvc3Bhbj4jIH0gIyMgdmFyIHRhZyA9IHVybCA/ICdhJyA6ICdzcGFuJzsgIyMgdmFyIHRleHRBdHRyID0gdXJsID8gJyBocmVmPVxcXFwnJyArIHVybCArICdcXFxcJycgOiAnJzsgIzwjPXRhZyMgIGNsYXNzPScjPSByLnRleHRDbGFzcyhpdGVtKSAjJyM9IHRleHRBdHRyICM+Iz0gci5pdGVtQ29udGVudChkYXRhKSAjPC8jPXRhZyM+PC9kaXY+XCIpLGl0ZW06aShcIiMgdmFyIGl0ZW0gPSBkYXRhLml0ZW0sIHIgPSBkYXRhLnI7ICM8bGkgcm9sZT0ndHJlZWl0ZW0nIGNsYXNzPScjPSByLndyYXBwZXJDc3NDbGFzcyhkYXRhLmdyb3VwLCBpdGVtKSAjJyBcIitmLmF0dHIoXCJ1aWRcIikrXCI9JyM9IGl0ZW0udWlkICMnIGFyaWEtc2VsZWN0ZWQ9JyM9IGl0ZW0uc2VsZWN0ZWQgPyBcXFwidHJ1ZVxcXCIgOiBcXFwiZmFsc2UgXFxcIiAjJyAjPWl0ZW0uZW5hYmxlZCA9PT0gZmFsc2UgPyBcXFwiYXJpYS1kaXNhYmxlZD0ndHJ1ZSdcXFwiIDogJycjPiM9IHIuaXRlbUVsZW1lbnQoZGF0YSkgIzwvbGk+XCIpLGxvYWRpbmc6aShcIjxkaXYgY2xhc3M9J2staWNvbiBrLWxvYWRpbmcnIC8+ICM6IGRhdGEubWVzc2FnZXMubG9hZGluZyAjXCIpLHJldHJ5OmkoXCIjOiBkYXRhLm1lc3NhZ2VzLnJlcXVlc3RGYWlsZWQgIyA8YnV0dG9uIGNsYXNzPSdrLWJ1dHRvbiBrLXJlcXVlc3QtcmV0cnknPiM6IGRhdGEubWVzc2FnZXMucmV0cnkgIzwvYnV0dG9uPlwiKX19LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKFwiLmstaXRlbSBkaXY6Zmlyc3QtY2hpbGRcIil9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO3QuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLmRhdGFTb3VyY2UuZmV0Y2goKSx0LmNoZWNrYm94ZXMmJnQuY2hlY2tib3hlcy5jaGVja0NoaWxkcmVuJiZ0aGlzLnVwZGF0ZUluZGV0ZXJtaW5hdGUoKX0sX2JpbmREYXRhU291cmNlOmZ1bmN0aW9uKCl7dGhpcy5fcmVmcmVzaEhhbmRsZXI9ayh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5fZXJyb3JIYW5kbGVyPWsodGhpcy5fZXJyb3IsdGhpcyksdGhpcy5kYXRhU291cmNlLmJpbmQoRSx0aGlzLl9yZWZyZXNoSGFuZGxlciksdGhpcy5kYXRhU291cmNlLmJpbmQoTSx0aGlzLl9lcnJvckhhbmRsZXIpfSxfdW5iaW5kRGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YVNvdXJjZTtlJiYoZS51bmJpbmQoRSx0aGlzLl9yZWZyZXNoSGFuZGxlciksZS51bmJpbmQoTSx0aGlzLl9lcnJvckhhbmRsZXIpKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtmb3IodmFyIG49MDtlLmxlbmd0aD5uO24rKyllW25dLl9pbml0Q2hpbGRyZW4oKSxlW25dLmNoaWxkcmVuLmZldGNoKCksdChlW25dLmNoaWxkcmVuLnZpZXcoKSl9dmFyIG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuZGF0YVNvdXJjZTtyPXkocik/e2RhdGE6cn06cixuLl91bmJpbmREYXRhU291cmNlKCksci5maWVsZHN8fChyLmZpZWxkcz1be2ZpZWxkOlwidGV4dFwifSx7ZmllbGQ6XCJ1cmxcIn0se2ZpZWxkOlwic3ByaXRlQ3NzQ2xhc3NcIn0se2ZpZWxkOlwiaW1hZ2VVcmxcIn1dKSxuLmRhdGFTb3VyY2U9cj1iLmNyZWF0ZShyKSxlJiYoci5mZXRjaCgpLHQoci52aWV3KCkpKSxuLl9iaW5kRGF0YVNvdXJjZSgpfSxldmVudHM6W0YsUixCLEwsTyxBLHosUyxFLEQsVF0sb3B0aW9uczp7bmFtZTpcIlRyZWVWaWV3XCIsZGF0YVNvdXJjZTp7fSxhbmltYXRpb246e2V4cGFuZDp7ZWZmZWN0czpcImV4cGFuZDp2ZXJ0aWNhbFwiLGR1cmF0aW9uOjIwMH0sY29sbGFwc2U6e2R1cmF0aW9uOjEwMH19LG1lc3NhZ2VzOntsb2FkaW5nOlwiTG9hZGluZy4uLlwiLHJlcXVlc3RGYWlsZWQ6XCJSZXF1ZXN0IGZhaWxlZC5cIixyZXRyeTpcIlJldHJ5XCJ9LGRyYWdBbmREcm9wOiExLGNoZWNrYm94ZXM6ITEsYXV0b0JpbmQ6ITAsbG9hZE9uRGVtYW5kOiEwLHRlbXBsYXRlOlwiXCIsZGF0YVRleHRGaWVsZDpudWxsfSxfYWNjZXNzb3JzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcyxyPWkub3B0aW9ucyxvPWkuZWxlbWVudDtmb3IoZSBpbiBLKXQ9cltLW2VdXSxuPW8uYXR0cihmLmF0dHIoZStcIi1maWVsZFwiKSksIXQmJm4mJih0PW4pLHR8fCh0PWUpLHkodCl8fCh0PVt0XSkscltLW2VdXT10fSxfZmllbGRBY2Nlc3NvcjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9wdGlvbnNbS1t0XV0saT1uLmxlbmd0aCxyPVwiKGZ1bmN0aW9uKGl0ZW0pIHtcIjtyZXR1cm4gMD09PWk/cis9XCJyZXR1cm4gaXRlbVsnXCIrdCtcIiddO1wiOihyKz1cInZhciBsZXZlbHMgPSBbXCIrZS5tYXAobixmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uKGQpeyByZXR1cm4gXCIrZi5leHByKGUpK1wifVwifSkuam9pbihcIixcIikrXCJdO1wiLHIrPVwicmV0dXJuIGxldmVsc1tNYXRoLm1pbihpdGVtLmxldmVsKCksIFwiK2krXCItMSldKGl0ZW0pXCIpLHIrPVwifSlcIn0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt3LmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpLHRoaXMuX2FuaW1hdGlvbigpLHRoaXMuX2RyYWdnaW5nKCksdGhpcy5fdGVtcGxhdGVzKCl9LF90cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudHJpZ2dlcihlLHtub2RlOnQuY2xvc2VzdChHKVswXX0pfSxfc2V0Q2hlY2tlZDpmdW5jdGlvbih0LG4pe2lmKHQmJmUuaXNGdW5jdGlvbih0LnZpZXcpKWZvcih2YXIgaT0wLHI9dC52aWV3KCk7ci5sZW5ndGg+aTtpKyspcltpXVtQXT1uLHJbaV0uY2hpbGRyZW4mJnRoaXMuX3NldENoZWNrZWQocltpXS5jaGlsZHJlbixuKX0sX3NldEluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLG89ZChlKSxhPSEwO2lmKG8ubGVuZ3RoJiYodD1yKG8uY2hpbGRyZW4oKSksbj10Lmxlbmd0aCkpe2lmKG4+MSl7Zm9yKGk9MTtuPmk7aSsrKWlmKHRbaV0uY2hlY2tlZCE9dFtpLTFdLmNoZWNrZWR8fHRbaV0uaW5kZXRlcm1pbmF0ZXx8dFtpLTFdLmluZGV0ZXJtaW5hdGUpe2E9ITE7XG5icmVha319ZWxzZSBhPSF0WzBdLmluZGV0ZXJtaW5hdGU7cmV0dXJuIHIoZSkuZGF0YShJLCFhKS5wcm9wKEksIWEpLnByb3AoUCxhJiZ0WzBdLmNoZWNrZWQpfX0sdXBkYXRlSW5kZXRlcm1pbmF0ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYoZT1lfHx0aGlzLndyYXBwZXIsdD1kKGUpLmNoaWxkcmVuKCksdC5sZW5ndGgpe2ZvcihuPTA7dC5sZW5ndGg+bjtuKyspdGhpcy51cGRhdGVJbmRldGVybWluYXRlKHQuZXEobikpO2k9dGhpcy5fc2V0SW5kZXRlcm1pbmF0ZShlKSxpJiZpLnByb3AoUCkmJih0aGlzLmRhdGFJdGVtKGUpLmNoZWNrZWQ9ITApfX0sX2J1YmJsZUluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGgpe3ZhciB0LG49dGhpcy5wYXJlbnQoZSk7bi5sZW5ndGgmJih0aGlzLl9zZXRJbmRldGVybWluYXRlKG4pLHQ9bi5jaGlsZHJlbihcImRpdlwiKS5maW5kKFwiLmstY2hlY2tib3ggOmNoZWNrYm94XCIpLHQucHJvcChJKT09PSExP3RoaXMuZGF0YUl0ZW0obikuc2V0KFAsdC5wcm9wKFApKTp0aGlzLmRhdGFJdGVtKG4pLmNoZWNrZWQ9ITEsdGhpcy5fYnViYmxlSW5kZXRlcm1pbmF0ZShuKSl9fSxfY2hlY2tib3hDaGFuZ2U6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LnRhcmdldCksaT1uLnByb3AoUCkscj1uLmNsb3Nlc3QoRyk7dGhpcy5kYXRhSXRlbShyKS5zZXQoUCxpKSx0aGlzLl90cmlnZ2VyKFQscil9LF90b2dnbGVCdXR0b25DbGljazpmdW5jdGlvbih0KXt0aGlzLnRvZ2dsZShlKHQudGFyZ2V0KS5jbG9zZXN0KEcpKX0sX21vdXNlZG93bjpmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCkuY2xvc2VzdChHKTt0aGlzLl9jbGlja1RhcmdldD1uLHRoaXMuY3VycmVudChuKX0sX2ZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGgmJmUuaXMoXCI6dmlzaWJsZVwiKSYmIWUuZmluZChcIi5rLWluOmZpcnN0XCIpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKX0sX2ZvY3VzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zZWxlY3QoKSxuPXRoaXMuX2NsaWNrVGFyZ2V0O2Yuc3VwcG9ydC50b3VjaHx8KG4mJm4ubGVuZ3RoJiYodD1uKSx0aGlzLl9mb2N1c2FibGUodCl8fCh0PXRoaXMuY3VycmVudCgpKSx0aGlzLl9mb2N1c2FibGUodCl8fCh0PXRoaXMuX25leHRWaXNpYmxlKGUoKSkpLHRoaXMuY3VycmVudCh0KSl9LGZvY3VzOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLndyYXBwZXIsbj10WzBdLGk9W10scj1bXSxvPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtkbyBuPW4ucGFyZW50Tm9kZSxuLnNjcm9sbEhlaWdodD5uLmNsaWVudEhlaWdodCYmKGkucHVzaChuKSxyLnB1c2gobi5zY3JvbGxUb3ApKTt3aGlsZShuIT1vKTtmb3IodC5mb2N1cygpLGU9MDtpLmxlbmd0aD5lO2UrKylpW2VdLnNjcm9sbFRvcD1yW2VdfSxfYmx1cjpmdW5jdGlvbigpe3RoaXMuY3VycmVudCgpLmZpbmQoXCIuay1pbjpmaXJzdFwiKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtZm9jdXNlZFwiKX0sX2VuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIWUuY2hpbGRyZW4oXCJkaXZcIikuY2hpbGRyZW4oXCIuay1pblwiKS5oYXNDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIil9LHBhcmVudDpmdW5jdGlvbih0KXt2YXIgbixpLHI9L1xcYmstdHJlZXZpZXdcXGIvLG89L1xcYmstaXRlbVxcYi87dHlwZW9mIHQ9PXEmJih0PXRoaXMuZWxlbWVudC5maW5kKHQpKSxRKHQpfHwodD10WzBdKSxpPW8udGVzdCh0LmNsYXNzTmFtZSk7ZG8gdD10LnBhcmVudE5vZGUsby50ZXN0KHQuY2xhc3NOYW1lKSYmKGk/bj10Omk9ITApO3doaWxlKCFyLnRlc3QodC5jbGFzc05hbWUpJiYhbik7cmV0dXJuIGUobil9LF9uZXh0VmlzaWJsZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcig7ZS5sZW5ndGgmJiFlLm5leHQoKS5sZW5ndGg7KWU9aS5wYXJlbnQoZSk7cmV0dXJuIGUubmV4dCgpLmxlbmd0aD9lLm5leHQoKTplfXZhciBuLGk9dGhpcyxyPWkuX2V4cGFuZGVkKGUpO3JldHVybiBlLmxlbmd0aCYmZS5pcyhcIjp2aXNpYmxlXCIpP3I/KG49ZChlKS5jaGlsZHJlbigpLmZpcnN0KCksbi5sZW5ndGh8fChuPXQoZSkpKTpuPXQoZSk6bj1pLnJvb3QuY2hpbGRyZW4oKS5lcSgwKSxpLl9lbmFibGVkKG4pfHwobj1pLl9uZXh0VmlzaWJsZShuKSksbn0sX3ByZXZpb3VzVmlzaWJsZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcztpZighZS5sZW5ndGh8fGUucHJldigpLmxlbmd0aClmb3Iobj1lLmxlbmd0aD9lLnByZXYoKTppLnJvb3QuY2hpbGRyZW4oKS5sYXN0KCk7aS5fZXhwYW5kZWQobikmJih0PWQobikuY2hpbGRyZW4oKS5sYXN0KCksdC5sZW5ndGgpOyluPXQ7ZWxzZSBuPWkucGFyZW50KGUpfHxlO3JldHVybiBpLl9lbmFibGVkKG4pfHwobj1pLl9wcmV2aW91c1Zpc2libGUobikpLG59LF9rZXlkb3duOmZ1bmN0aW9uKG4pe3ZhciBpLHI9dGhpcyxvPW4ua2V5Q29kZSxhPXIuY3VycmVudCgpLHM9ci5fZXhwYW5kZWQoYSksbD1hLmZpbmQoXCIuay1jaGVja2JveDpmaXJzdCA6Y2hlY2tib3hcIiksYz1mLnN1cHBvcnQuaXNSdGwoci5lbGVtZW50KTtuLnRhcmdldD09bi5jdXJyZW50VGFyZ2V0JiYoIWMmJm89PXguUklHSFR8fGMmJm89PXguTEVGVD9zP2k9ci5fbmV4dFZpc2libGUoYSk6ci5leHBhbmQoYSk6IWMmJm89PXguTEVGVHx8YyYmbz09eC5SSUdIVD9zP3IuY29sbGFwc2UoYSk6KGk9ci5wYXJlbnQoYSksci5fZW5hYmxlZChpKXx8KGk9dCkpOm89PXguRE9XTj9pPXIuX25leHRWaXNpYmxlKGEpOm89PXguVVA/aT1yLl9wcmV2aW91c1Zpc2libGUoYSk6bz09eC5IT01FP2k9ci5fbmV4dFZpc2libGUoZSgpKTpvPT14LkVORD9pPXIuX3ByZXZpb3VzVmlzaWJsZShlKCkpOm89PXguRU5URVI/YS5maW5kKFwiLmstaW46Zmlyc3RcIikuaGFzQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpfHxyLl90cmlnZ2VyKFMsYSl8fHIuc2VsZWN0KGEpOm89PXguU1BBQ0VCQVImJmwubGVuZ3RoJiYobC5wcm9wKFAsIWwucHJvcChQKSkuZGF0YShJLCExKS5wcm9wKEksITEpLHIuX2NoZWNrYm94Q2hhbmdlKHt0YXJnZXQ6bH0pLGk9YSksaSYmKG4ucHJldmVudERlZmF1bHQoKSxhWzBdIT1pWzBdJiYoci5fdHJpZ2dlcihELGkpLHIuY3VycmVudChpKSkpKX0sX2NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcyxyPWUodC5jdXJyZW50VGFyZ2V0KSxvPXUoci5jbG9zZXN0KEcpKSxhPXIuYXR0cihcImhyZWZcIik7bj1hP1wiI1wiPT1hfHxhLmluZGV4T2YoXCIjXCIrdGhpcy5lbGVtZW50LmlkK1wiLVwiKT49MDpvLmxlbmd0aCYmIW8uY2hpbGRyZW4oKS5sZW5ndGgsbiYmdC5wcmV2ZW50RGVmYXVsdCgpLHIuaGFzQ2xhc3MoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKXx8aS5fdHJpZ2dlcihTLHIpfHxpLnNlbGVjdChyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcyxpPW4uZWxlbWVudCxyPVwiay13aWRnZXQgay10cmVldmlld1wiO2kuaXMoXCJ1bFwiKT8oZT1pLndyYXAoXCI8ZGl2IC8+XCIpLnBhcmVudCgpLHQ9aSk6KGU9aSx0PWUuY2hpbGRyZW4oXCJ1bFwiKS5lcSgwKSksbi53cmFwcGVyPWUuYWRkQ2xhc3Mociksbi5yb290PXR9LF9ncm91cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5oYXNDbGFzcyhXKSxpPXtmaXJzdExldmVsOm4sZXhwYW5kZWQ6bnx8dC5fZXhwYW5kZWQoZSl9LHI9ZS5jaGlsZHJlbihcInVsXCIpO3IuYWRkQ2xhc3ModC50ZW1wbGF0ZXMuZ3JvdXBDc3NDbGFzcyhpKSkuY3NzKFwiZGlzcGxheVwiLGkuZXhwYW5kZWQ/XCJcIjpcIm5vbmVcIiksdC5fbm9kZXMocixpKX0sX25vZGVzOmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzLG89dC5jaGlsZHJlbihcImxpXCIpO249dih7bGVuZ3RoOm8ubGVuZ3RofSxuKSxvLmVhY2goZnVuY3Rpb24odCxvKXtvPWUobyksaT17aW5kZXg6dCxleHBhbmRlZDpyLl9leHBhbmRlZChvKX0scyhvKSxyLl91cGRhdGVOb2RlQ2xhc3NlcyhvLG4saSksci5fZ3JvdXAobyl9KX0sX2NoZWNrYm94ZXM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucyxuPXQuY2hlY2tib3hlcztuJiYoZT1cIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgIz0gKGl0ZW0uZW5hYmxlZCA9PT0gZmFsc2UpID8gJ2Rpc2FibGVkJyA6ICcnICMgIz0gaXRlbS5jaGVja2VkID8gJ2NoZWNrZWQnIDogJycgI1wiLG4ubmFtZSYmKGUrPVwiIG5hbWU9J1wiK24ubmFtZStcIidcIiksZSs9XCIgLz5cIixuPXYoe3RlbXBsYXRlOmV9LHQuY2hlY2tib3hlcyksdHlwZW9mIG4udGVtcGxhdGU9PXEmJihuLnRlbXBsYXRlPV8obi50ZW1wbGF0ZSkpLHQuY2hlY2tib3hlcz1uKX0sX3VwZGF0ZU5vZGVDbGFzc2VzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLmNoaWxkcmVuKFwiZGl2XCIpLHI9ZS5jaGlsZHJlbihcInVsXCIpLG89dGhpcy50ZW1wbGF0ZXM7ZS5oYXNDbGFzcyhcImstdHJlZXZpZXdcIil8fChuPW58fHt9LG4uZXhwYW5kZWQ9dHlwZW9mIG4uZXhwYW5kZWQhPVY/bi5leHBhbmRlZDp0aGlzLl9leHBhbmRlZChlKSxuLmluZGV4PXR5cGVvZiBuLmluZGV4IT1WP24uaW5kZXg6ZS5pbmRleCgpLG4uZW5hYmxlZD10eXBlb2Ygbi5lbmFibGVkIT1WP24uZW5hYmxlZDohaS5jaGlsZHJlbihcIi5rLWluXCIpLmhhc0NsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiKSx0PXR8fHt9LHQuZmlyc3RMZXZlbD10eXBlb2YgdC5maXJzdExldmVsIT1WP3QuZmlyc3RMZXZlbDplLnBhcmVudCgpLnBhcmVudCgpLmhhc0NsYXNzKFcpLHQubGVuZ3RoPXR5cGVvZiB0Lmxlbmd0aCE9Vj90Lmxlbmd0aDplLnBhcmVudCgpLmNoaWxkcmVuKCkubGVuZ3RoLGUucmVtb3ZlQ2xhc3MoXCJrLWZpcnN0IGstbGFzdFwiKS5hZGRDbGFzcyhvLndyYXBwZXJDc3NDbGFzcyh0LG4pKSxpLnJlbW92ZUNsYXNzKFwiay10b3Agay1taWQgay1ib3RcIikuYWRkQ2xhc3Moby5jc3NDbGFzcyh0LG4pKSxpLmNoaWxkcmVuKFwiLmstaW5cIikucmVtb3ZlQ2xhc3MoXCJrLWluIGstc3RhdGUtZGVmYXVsdCBrLXN0YXRlLWRpc2FibGVkXCIpLmFkZENsYXNzKG8udGV4dENsYXNzKG4pKSwoci5sZW5ndGh8fFwidHJ1ZVwiPT1lLmF0dHIoXCJkYXRhLWhhc0NoaWxkcmVuXCIpKSYmKGkuY2hpbGRyZW4oXCIuay1pY29uXCIpLnJlbW92ZUNsYXNzKFwiay1wbHVzIGstbWludXMgay1wbHVzLWRpc2FibGVkIGstbWludXMtZGlzYWJsZWRcIikuYWRkQ2xhc3Moby50b2dnbGVCdXR0b25DbGFzcyhuKSksci5hZGRDbGFzcyhcImstZ3JvdXBcIikpKX0sX3Byb2Nlc3NOb2RlczpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7aS5lbGVtZW50LmZpbmQodCkuZWFjaChmdW5jdGlvbih0LHIpe24uY2FsbChpLHQsZShyKS5jbG9zZXN0KEcpKX0pfSxkYXRhSXRlbTpmdW5jdGlvbih0KXt2YXIgbj1lKHQpLmNsb3Nlc3QoRykuYXR0cihmLmF0dHIoXCJ1aWRcIikpLGk9dGhpcy5kYXRhU291cmNlO3JldHVybiBpJiZpLmdldEJ5VWlkKG4pfSxfaW5zZXJ0Tm9kZTpmdW5jdGlvbih0LG4saSxyLG8pe3ZhciBhLGwsYyx1LGg9dGhpcyxwPWQoaSksZj1wLmNoaWxkcmVuKCkubGVuZ3RoKzEsZz17Zmlyc3RMZXZlbDppLmhhc0NsYXNzKFcpLGV4cGFuZGVkOiFvLGxlbmd0aDpmfSxtPVwiXCIsdj1mdW5jdGlvbihlLHQpe2UuYXBwZW5kVG8odCl9O2ZvcihjPTA7dC5sZW5ndGg+YztjKyspdT10W2NdLHUuaW5kZXg9bitjLG0rPWguX3JlbmRlckl0ZW0oe2dyb3VwOmcsaXRlbTp1fSk7aWYobD1lKG0pLGwubGVuZ3RoKXtmb3IoaC5hbmd1bGFyKFwiY29tcGlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmwuZ2V0KCksZGF0YTp0Lm1hcChmdW5jdGlvbihlKXtyZXR1cm57ZGF0YUl0ZW06ZX19KX19KSxwLmxlbmd0aHx8KHA9ZShoLl9yZW5kZXJHcm91cCh7Z3JvdXA6Z30pKS5hcHBlbmRUbyhpKSkscihsLHApLGkuaGFzQ2xhc3MoXCJrLWl0ZW1cIikmJihzKGkpLGguX3VwZGF0ZU5vZGVDbGFzc2VzKGkpKSxoLl91cGRhdGVOb2RlQ2xhc3NlcyhsLnByZXYoKS5maXJzdCgpKSxoLl91cGRhdGVOb2RlQ2xhc3NlcyhsLm5leHQoKS5sYXN0KCkpLGM9MDt0Lmxlbmd0aD5jO2MrKyl1PXRbY10sdS5oYXNDaGlsZHJlbiYmKGE9dS5jaGlsZHJlbi5kYXRhKCksYS5sZW5ndGgmJmguX2luc2VydE5vZGUoYSx1LmluZGV4LGwuZXEoYyksdiwhaC5fZXhwYW5kZWQobC5lcShjKSkpKTtyZXR1cm4gbH19LF91cGRhdGVOb2RlOmZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3A9ITB9ZnVuY3Rpb24gcihlLHQpe2UuZmluZChcIi5rLWNoZWNrYm94IDpjaGVja2JveFwiKS5wcm9wKFAsdCkuZGF0YShJLCExKS5wcm9wKEksITEpfXZhciBvLGEscyxsLGMsZD10aGlzLGg9e3RyZWV2aWV3OmQub3B0aW9ucyxpdGVtOnN9LHA9ITE7aWYoXCJzZWxlY3RlZFwiPT10KXM9blswXSxhPWQuZmluZEJ5VWlkKHMudWlkKS5maW5kKFwiLmstaW46Zmlyc3RcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiLHNbdF0pLmVuZCgpLHNbdF0/KGQuY3VycmVudChhKSxhLmF0dHIoJCwhMCkpOmEuYXR0cigkLCExKTtlbHNlIGZvcihlLmluQXJyYXkodCxkLm9wdGlvbnMuZGF0YVRleHRGaWVsZCk+PTA/cD0hMDooaC5pdGVtPW5bMF0saC5pdGVtLmJpbmQoXCJnZXRcIixpKSxkLnRlbXBsYXRlcy5pdGVtQ29udGVudChoKSxoLml0ZW0udW5iaW5kKFwic2V0XCIsaSkpLG89MDtuLmxlbmd0aD5vO28rKyloLml0ZW09cz1uW29dLChcInNwcml0ZUNzc0NsYXNzXCI9PXR8fFwiaW1hZ2VVcmxcIj09dHx8cCkmJmQuZmluZEJ5VWlkKHMudWlkKS5maW5kKFwiPmRpdj4uay1pblwiKS5odG1sKGQudGVtcGxhdGVzLml0ZW1Db250ZW50KGgpKSx0PT1QPyhhPWQuZmluZEJ5VWlkKHMudWlkKSxsPXNbdF0scihhLmNoaWxkcmVuKFwiZGl2XCIpLGwpLGQub3B0aW9ucy5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW4mJihyKGEuY2hpbGRyZW4oXCIuay1ncm91cFwiKSxsKSxkLl9zZXRDaGVja2VkKHMuY2hpbGRyZW4sbCksZC5fYnViYmxlSW5kZXRlcm1pbmF0ZShhKSkpOlwiZXhwYW5kZWRcIj09dD9kLl90b2dnbGUoZC5maW5kQnlVaWQocy51aWQpLHMsc1t0XSk6XCJlbmFibGVkXCI9PXQmJihhPWQuZmluZEJ5VWlkKHMudWlkKSxhLmZpbmQoXCIuay1jaGVja2JveCA6Y2hlY2tib3hcIikucHJvcChcImRpc2FibGVkXCIsIXNbdF0pLGM9IXUoYSkuaXMoaiksYS5yZW1vdmVBdHRyKFkpLHNbdF18fChzLnNlbGVjdGVkJiZzLnNldChcInNlbGVjdGVkXCIsITEpLHMuZXhwYW5kZWQmJnMuc2V0KFwiZXhwYW5kZWRcIiwhMSksYz0hMCxhLmF0dHIoJCwhMSkuYXR0cihZLCEwKSksZC5fdXBkYXRlTm9kZUNsYXNzZXMoYSx7fSx7ZW5hYmxlZDpzW3RdLGV4cGFuZGVkOiFjfSkpfSxfYXBwZW5kSXRlbXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWQobikscj1pLmNoaWxkcmVuKCksbz0hdGhpcy5fZXhwYW5kZWQobik7dHlwZW9mIGU9PVYmJihlPXIubGVuZ3RoKSx0aGlzLl9pbnNlcnROb2RlKHQsZSxuLGZ1bmN0aW9uKHQsbil7ZT49ci5sZW5ndGg/dC5hcHBlbmRUbyhuKTp0Lmluc2VydEJlZm9yZShyLmVxKGUpKX0sbyksdGhpcy5fZXhwYW5kZWQobikmJih0aGlzLl91cGRhdGVOb2RlQ2xhc3NlcyhuKSxkKG4pLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpKX0scmVmcmVzaDpmdW5jdGlvbihuKXt2YXIgaSxyLG8sYSxsLGMsdT10aGlzLndyYXBwZXIsaD1uLm5vZGUscD1uLmFjdGlvbixmPW4uaXRlbXMsbT10aGlzLm9wdGlvbnMsdj1tLmxvYWRPbkRlbWFuZCxfPW0uY2hlY2tib3hlcyYmbS5jaGVja2JveGVzLmNoZWNrQ2hpbGRyZW47aWYobi5maWVsZCl7aWYoIWZbMF18fCFmWzBdLmxldmVsKXJldHVybjtyZXR1cm4gdGhpcy5fdXBkYXRlTm9kZShuLmZpZWxkLGYpfWlmKGgmJih1PXRoaXMuZmluZEJ5VWlkKGgudWlkKSx0aGlzLl9wcm9ncmVzcyh1LCExKSksXyYmXCJyZW1vdmVcIiE9cCl7Zm9yKHI9ITEsaT0wO2YubGVuZ3RoPmk7aSsrKWlmKFwiY2hlY2tlZFwiaW4gZltpXSl7cj0hMDticmVha31pZighciYmaCYmaC5jaGVja2VkKWZvcihpPTA7Zi5sZW5ndGg+aTtpKyspZltpXS5jaGVja2VkPSEwfWlmKFwiYWRkXCI9PXApdGhpcy5fYXBwZW5kSXRlbXMobi5pbmRleCxmLHUpO2Vsc2UgaWYoXCJyZW1vdmVcIj09cCl0aGlzLl9yZW1vdmUodGhpcy5maW5kQnlVaWQoZlswXS51aWQpLCExKTtlbHNlIGlmKGgpaWYoZCh1KS5lbXB0eSgpLGYubGVuZ3RoKWZvcih0aGlzLl9hcHBlbmRJdGVtcyhuLmluZGV4LGYsdSksbz1kKHUpLmNoaWxkcmVuKCksdiYmXyYmdGhpcy5fYnViYmxlSW5kZXRlcm1pbmF0ZShvLmxhc3QoKSksaT0wO28ubGVuZ3RoPmk7aSsrKWE9by5lcShpKSx0aGlzLnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06YSxkYXRhOnRoaXMuZGF0YUl0ZW0oYSksbnM6Z30pO2Vsc2Ugcyh1KSx0aGlzLnRyaWdnZXIoXCJpdGVtQ2hhbmdlXCIse2l0ZW06dSxkYXRhOmgsbnM6Z30pO2Vsc2UgbD10aGlzLl9yZW5kZXJHcm91cCh7aXRlbXM6Zixncm91cDp7Zmlyc3RMZXZlbDohMCxleHBhbmRlZDohMH19KSx0aGlzLnJvb3QubGVuZ3RoPyh0aGlzLl9hbmd1bGFySXRlbXMoXCJjbGVhbnVwXCIpLGM9ZShsKSx0aGlzLnJvb3QuYXR0cihcImNsYXNzXCIsYy5hdHRyKFwiY2xhc3NcIikpLmh0bWwoYy5odG1sKCkpKTp0aGlzLnJvb3Q9dGhpcy53cmFwcGVyLmh0bWwobCkuY2hpbGRyZW4oXCJ1bFwiKSx0aGlzLnJvb3QuYXR0cihcInJvbGVcIixcInRyZWVcIiksdGhpcy5fYW5ndWxhckl0ZW1zKFwiY29tcGlsZVwiKTtmb3IoaT0wO2YubGVuZ3RoPmk7aSsrKSghdnx8ZltpXS5leHBhbmRlZCkmJmZbaV0ubG9hZCgpO3RoaXMudHJpZ2dlcihPLHtub2RlOmg/dTp0fSl9LF9lcnJvcjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGUmJnRoaXMuZmluZEJ5VWlkKGUubm9kZS51aWQpLG49dGhpcy50ZW1wbGF0ZXMucmV0cnkoe21lc3NhZ2VzOnRoaXMub3B0aW9ucy5tZXNzYWdlc30pO3Q/KHRoaXMuX3Byb2dyZXNzKHQsITEpLHRoaXMuX2V4cGFuZGVkKHQsITEpLGgodCkuYWRkQ2xhc3MoXCJrLWktcmVmcmVzaFwiKSxlLm5vZGUubG9hZGVkKCExKSk6KHRoaXMuX3Byb2dyZXNzKCExKSx0aGlzLmVsZW1lbnQuaHRtbChuKSl9LF9yZXRyeVJlcXVlc3Q6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fcHJvY2Vzc05vZGVzKGUsZnVuY3Rpb24oZSx0KXt0aGlzLnRvZ2dsZSh0LCEwKX0pfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt0aGlzLl9wcm9jZXNzTm9kZXMoZSxmdW5jdGlvbihlLHQpe3RoaXMudG9nZ2xlKHQsITEpfSl9LGVuYWJsZTpmdW5jdGlvbihlLHQpe3Q9Mj09YXJndW1lbnRzLmxlbmd0aD8hIXQ6ITAsdGhpcy5fcHJvY2Vzc05vZGVzKGUsZnVuY3Rpb24oZSxuKXt0aGlzLmRhdGFJdGVtKG4pLnNldChcImVuYWJsZWRcIix0KX0pfSxjdXJyZW50OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLl9jdXJyZW50LG89aS5lbGVtZW50LGE9aS5fYXJpYUlkO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjAmJm4mJm4ubGVuZ3RoPyhyJiYoclswXS5pZD09PWEmJnIucmVtb3ZlQXR0cihcImlkXCIpLHIuZmluZChcIi5rLWluOmZpcnN0XCIpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1mb2N1c2VkXCIpKSxyPWkuX2N1cnJlbnQ9ZShuLG8pLmNsb3Nlc3QoRyksci5maW5kKFwiLmstaW46Zmlyc3RcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWZvY3VzZWRcIiksYT1yWzBdLmlkfHxhLGEmJihpLndyYXBwZXIucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxyLmF0dHIoXCJpZFwiLGEpLGkud3JhcHBlci5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsYSkpLHQpOihyfHwocj1pLl9uZXh0VmlzaWJsZShlKCkpKSxyKX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMscj1pLmVsZW1lbnQ7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ZShuLHIpLmNsb3Nlc3QoRyksci5maW5kKFwiLmstc3RhdGUtc2VsZWN0ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPWkuZGF0YUl0ZW0odGhpcyk7ZS5zZXQoXCJzZWxlY3RlZFwiLCExKSxkZWxldGUgZS5zZWxlY3RlZH0pLG4ubGVuZ3RoJiZpLmRhdGFJdGVtKG4pLnNldChcInNlbGVjdGVkXCIsITApLGkudHJpZ2dlcihFKSx0KTpyLmZpbmQoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKS5jbG9zZXN0KEcpfSxfdG9nZ2xlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcy5vcHRpb25zLGE9dShlKSxzPW4/XCJleHBhbmRcIjpcImNvbGxhcHNlXCI7aWYoIWEuZGF0YShcImFuaW1hdGluZ1wiKSYmIXRoaXMuX3RyaWdnZXIocyxlKSlpZih0aGlzLl9leHBhbmRlZChlLG4pLGk9dCYmdC5sb2FkZWQoKSxyPSFhLmNoaWxkcmVuKCkubGVuZ3RoLCFufHxpJiYhcil7aWYodGhpcy5fdXBkYXRlTm9kZUNsYXNzZXMoZSx7fSx7ZXhwYW5kZWQ6bn0pLGEuY3NzKFwiZGlzcGxheVwiKT09KG4/XCJibG9ja1wiOlwibm9uZVwiKSlyZXR1cm47bnx8YS5jc3MoXCJoZWlnaHRcIixhLmhlaWdodCgpKS5jc3MoXCJoZWlnaHRcIiksYS5rZW5kb1N0b3AoITAsITApLmtlbmRvQW5pbWF0ZSh2KHtyZXNldDohMH0sby5hbmltYXRpb25bc10se2NvbXBsZXRlOmZ1bmN0aW9uKCl7biYmYS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KSl9ZWxzZSBvLmxvYWRPbkRlbWFuZCYmdGhpcy5fcHJvZ3Jlc3MoZSwhMCksYS5yZW1vdmUoKSx0LmxvYWQoKX0sdG9nZ2xlOmZ1bmN0aW9uKHQsbil7dD1lKHQpLGgodCkuaXMoXCIuay1taW51cywuay1wbHVzLC5rLW1pbnVzLWRpc2FibGVkLC5rLXBsdXMtZGlzYWJsZWRcIikmJigxPT1hcmd1bWVudHMubGVuZ3RoJiYobj0hdGhpcy5fZXhwYW5kZWQodCkpLHRoaXMuX2V4cGFuZGVkKHQsbikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3LmZuLmRlc3Ryb3kuY2FsbChlKSxlLndyYXBwZXIub2ZmKEMpLGUuX3VuYmluZERhdGFTb3VyY2UoKSxlLmRyYWdnaW5nJiZlLmRyYWdnaW5nLmRlc3Ryb3koKSxmLmRlc3Ryb3koZS5lbGVtZW50KSxlLnJvb3Q9ZS53cmFwcGVyPWUuZWxlbWVudD1udWxsfSxfZXhwYW5kZWQ6ZnVuY3Rpb24oZSxuKXt2YXIgaT1mLmF0dHIoXCJleHBhbmRlZFwiKSxyPXRoaXMuZGF0YUl0ZW0oZSk7cmV0dXJuIDE9PWFyZ3VtZW50cy5sZW5ndGg/XCJ0cnVlXCI9PT1lLmF0dHIoaSl8fHImJnIuZXhwYW5kZWQ6KHUoZSkuZGF0YShcImFuaW1hdGluZ1wiKXx8KHImJihyLnNldChcImV4cGFuZGVkXCIsbiksbj1yLmV4cGFuZGVkKSxuPyhlLmF0dHIoaSxcInRydWVcIiksZS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwidHJ1ZVwiKSk6KGUucmVtb3ZlQXR0cihpKSxlLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJmYWxzZVwiKSkpLHQpfSxfcHJvZ3Jlc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmVsZW1lbnQsaT10aGlzLnRlbXBsYXRlcy5sb2FkaW5nKHttZXNzYWdlczp0aGlzLm9wdGlvbnMubWVzc2FnZXN9KTsxPT1hcmd1bWVudHMubGVuZ3RoPyh0PWUsdD9uLmh0bWwoaSk6bi5lbXB0eSgpKTpoKGUpLnRvZ2dsZUNsYXNzKFwiay1sb2FkaW5nXCIsdCkucmVtb3ZlQ2xhc3MoXCJrLWktcmVmcmVzaFwiKX0sdGV4dDpmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuZGF0YUl0ZW0oZSkscj10aGlzLm9wdGlvbnNbSy50ZXh0XSxvPWkubGV2ZWwoKSxhPXIubGVuZ3RoLHM9cltNYXRoLm1pbihvLGEtMSldO3JldHVybiBuPyhpLnNldChzLG4pLHQpOmlbc119LF9vYmplY3RPclNlbGY6ZnVuY3Rpb24odCl7cmV0dXJuIGUodCkuY2xvc2VzdChcIltkYXRhLXJvbGU9dHJlZXZpZXddXCIpLmRhdGEoXCJrZW5kb1RyZWVWaWV3XCIpfHx0aGlzfSxfZGF0YVNvdXJjZU1vdmU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbz10aGlzLl9vYmplY3RPclNlbGYobnx8dCksYT1vLmRhdGFTb3VyY2U7cmV0dXJuIG4mJm5bMF0hPW8uZWxlbWVudFswXSYmKHI9by5kYXRhSXRlbShuKSxyLmxvYWRlZCgpfHwoby5fcHJvZ3Jlc3MobiwhMCksci5sb2FkKCkpLG4hPXRoaXMucm9vdCYmKGE9ci5jaGlsZHJlbixhJiZhIGluc3RhbmNlb2YgYnx8KHIuX2luaXRDaGlsZHJlbigpLHIubG9hZGVkKCEwKSxhPXIuY2hpbGRyZW4pKSksZT10aGlzLl90b09ic2VydmFibGVEYXRhKGUpLGkuY2FsbCh0aGlzLGEsZSl9LF90b09ic2VydmFibGVEYXRhOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10O3JldHVybih0IGluc3RhbmNlb2Ygd2luZG93LmpRdWVyeXx8USh0KSkmJihuPXRoaXMuX29iamVjdE9yU2VsZih0KS5kYXRhU291cmNlLGk9ZSh0KS5hdHRyKGYuYXR0cihcInVpZFwiKSkscj1uLmdldEJ5VWlkKGkpLHImJihyPW4ucmVtb3ZlKHIpKSkscn0sX2luc2VydDpmdW5jdGlvbihlLHQsbil7dCBpbnN0YW5jZW9mIGYuZGF0YS5PYnNlcnZhYmxlQXJyYXk/dD10LnRvSlNPTigpOnkodCl8fCh0PVt0XSk7dmFyIGk9ZS5wYXJlbnQoKTtyZXR1cm4gaSYmaS5faW5pdENoaWxkcmVuJiYoaS5oYXNDaGlsZHJlbj0hMCxpLl9pbml0Q2hpbGRyZW4oKSksZS5zcGxpY2UuYXBwbHkoZSxbbiwwXS5jb25jYXQodCkpLHRoaXMuZmluZEJ5VWlkKGVbbl0udWlkKX0saW5zZXJ0QWZ0ZXI6bygxKSxpbnNlcnRCZWZvcmU6bygwKSxhcHBlbmQ6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXRoaXMsbz1yLnJvb3Q7cmV0dXJuIGk9aXx8ZS5ub29wLG4mJihvPWQobikpLHIuX2RhdGFTb3VyY2VNb3ZlKHQsbyxuLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbygpe24mJnIuX2V4cGFuZGVkKG4sITApO3ZhciBpPWUuZGF0YSgpLG89TWF0aC5tYXgoaS5sZW5ndGgsMCk7cmV0dXJuIHIuX2luc2VydChpLHQsbyl9dmFyIGE7cmV0dXJuIGUuZGF0YSgpPyhhPW8oKSxpKGEpLGEpOihlLm9uZShFLGZ1bmN0aW9uKCl7aShvKCkpfSksbnVsbCl9KX0sX3JlbW92ZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsbyxhPXRoaXM7cmV0dXJuIHQ9ZSh0LGEuZWxlbWVudCksdGhpcy5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOnQuZ2V0KCl9fSksaT10LnBhcmVudCgpLnBhcmVudCgpLHI9dC5wcmV2KCksbz10Lm5leHQoKSx0W24/XCJkZXRhY2hcIjpcInJlbW92ZVwiXSgpLGkuaGFzQ2xhc3MoXCJrLWl0ZW1cIikmJihzKGkpLGEuX3VwZGF0ZU5vZGVDbGFzc2VzKGkpKSxhLl91cGRhdGVOb2RlQ2xhc3NlcyhyKSxhLl91cGRhdGVOb2RlQ2xhc3NlcyhvKSx0fSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kYXRhSXRlbShlKTt0JiZ0aGlzLmRhdGFTb3VyY2UucmVtb3ZlKHQpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlbW92ZShlLCEwKX0sZmluZEJ5VGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLmVsZW1lbnQpLmZpbmQoXCIuay1pblwiKS5maWx0ZXIoZnVuY3Rpb24obixpKXtyZXR1cm4gZShpKS50ZXh0KCk9PXR9KS5jbG9zZXN0KEcpfSxmaW5kQnlVaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKFwiLmstaXRlbVtcIitmLmF0dHIoXCJ1aWRcIikrXCI9XCIrZStcIl1cIil9LGV4cGFuZFBhdGg6ZnVuY3Rpb24obixpKXt2YXIgcixvLGE7Zm9yKG49bi5zbGljZSgwKSxyPXRoaXMsbz10aGlzLmRhdGFTb3VyY2UsYT1vLmdldChuWzBdKSxpPWl8fGUubm9vcDtuLmxlbmd0aD4wJiYoYS5leHBhbmRlZHx8YS5sb2FkZWQoKSk7KWEuc2V0KFwiZXhwYW5kZWRcIiwhMCksbi5zaGlmdCgpLGE9by5nZXQoblswXSk7cmV0dXJuIG4ubGVuZ3RoPyhvLmJpbmQoXCJjaGFuZ2VcIixmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGUmJmUubm9kZS5pZDt0JiZ0PT09blswXSYmKG4uc2hpZnQoKSxuLmxlbmd0aD9vLmdldChuWzBdKS5zZXQoXCJleHBhbmRlZFwiLCEwKTppLmNhbGwocikpfSksYS5zZXQoXCJleHBhbmRlZFwiLCEwKSx0KTppLmNhbGwocil9LF9wYXJlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lJiZlLnBhcmVudE5vZGUoKSxuPVtdO3Q7KW4ucHVzaCh0KSx0PXQucGFyZW50Tm9kZSgpO3JldHVybiBufSxleHBhbmRUbzpmdW5jdGlvbihlKXt2YXIgdCxuO2ZvcihlIGluc3RhbmNlb2YgZi5kYXRhLk5vZGV8fChlPXRoaXMuZGF0YVNvdXJjZS5nZXQoZSkpLHQ9dGhpcy5fcGFyZW50cyhlKSxuPTA7dC5sZW5ndGg+bjtuKyspdFtuXS5zZXQoXCJleHBhbmRlZFwiLCEwKX0sX3JlbmRlckl0ZW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXB8fChlLmdyb3VwPXt9KSxlLnRyZWV2aWV3PXRoaXMub3B0aW9ucyxlLnI9dGhpcy50ZW1wbGF0ZXMsdGhpcy50ZW1wbGF0ZXMuaXRlbShlKX0sX3JlbmRlckdyb3VwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUucmVuZGVySXRlbXM9ZnVuY3Rpb24oZSl7dmFyIG49XCJcIixpPTAscj1lLml0ZW1zLG89cj9yLmxlbmd0aDowLGE9ZS5ncm91cDtmb3IoYS5sZW5ndGg9bztvPmk7aSsrKWUuZ3JvdXA9YSxlLml0ZW09cltpXSxlLml0ZW0uaW5kZXg9aSxuKz10Ll9yZW5kZXJJdGVtKGUpO3JldHVybiBufSxlLnI9dC50ZW1wbGF0ZXMsdC50ZW1wbGF0ZXMuZ3JvdXAoZSl9fSksbC5wcm90b3R5cGU9e19yZW1vdmVUb3VjaEhvdmVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztmLnN1cHBvcnQudG91Y2gmJmUuaG92ZXJlZCYmKGUuaG92ZXJlZC5maW5kKFwiLlwiK1UpLnJlbW92ZUNsYXNzKFUpLGUuaG92ZXJlZD0hMSl9LF9oaW50U3RhdHVzOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMuX2RyYWdnYWJsZS5oaW50LmZpbmQoXCIuay1kcmFnLXN0YXR1c1wiKVswXTtyZXR1cm4gbj8oaS5jbGFzc05hbWU9XCJrLWljb24gay1kcmFnLXN0YXR1cyBcIituLHQpOmUudHJpbShpLmNsYXNzTmFtZS5yZXBsYWNlKC9rLShpY29ufGRyYWctc3RhdHVzKS9nLFwiXCIpKX0sZHJhZ3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLnRyZWV2aWV3LHI9bi5zb3VyY2VOb2RlPXQuY3VycmVudFRhcmdldC5jbG9zZXN0KEcpO2kudHJpZ2dlcihGLHtzb3VyY2VOb2RlOnJbMF19KSYmdC5wcmV2ZW50RGVmYXVsdCgpLG4uZHJvcEhpbnQ9ZShcIjxkaXYgY2xhc3M9J2stZHJvcC1oaW50JyAvPlwiKS5jc3MoTixcImhpZGRlblwiKS5hcHBlbmRUbyhpLmVsZW1lbnQpfSxkcmFnOmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvLGEscyxsLGMsZCx1LGg9dGhpcyxwPWgudHJlZXZpZXcsZz1oLnNvdXJjZU5vZGUsbT1oLmRyb3BUYXJnZXQ9ZShmLmV2ZW50VGFyZ2V0KHQpKSx2PW0uY2xvc2VzdChcIi5rLXRyZWV2aWV3XCIpO3YubGVuZ3RoP2UuY29udGFpbnMoZ1swXSxtWzBdKT9uPVwiay1kZW5pZWRcIjoobj1cImstaW5zZXJ0LW1pZGRsZVwiLGk9bS5jbG9zZXN0KFwiLmstdG9wLC5rLW1pZCwuay1ib3RcIiksaS5sZW5ndGg/KG89aS5vdXRlckhlaWdodCgpLGE9Zi5nZXRPZmZzZXQoaSkudG9wLHM9bS5jbG9zZXN0KFwiLmstaW5cIiksbD1vLyhzLmxlbmd0aD4wPzQ6MiksYz1hK2w+dC55LmxvY2F0aW9uLGQ9dC55LmxvY2F0aW9uPmErby1sLGguX3JlbW92ZVRvdWNoSG92ZXIoKSx1PXMubGVuZ3RoJiYhYyYmIWQsaC5ob3ZlcmVkPXU/djohMSxoLmRyb3BIaW50LmNzcyhOLHU/XCJoaWRkZW5cIjpcInZpc2libGVcIikscy50b2dnbGVDbGFzcyhVLHUpLHU/bj1cImstYWRkXCI6KHI9aS5wb3NpdGlvbigpLHIudG9wKz1jPzA6byxoLmRyb3BIaW50LmNzcyhyKVtjP1wicHJlcGVuZFRvXCI6XCJhcHBlbmRUb1wiXShtLmNsb3Nlc3QoRykuY2hpbGRyZW4oXCJkaXY6Zmlyc3RcIikpLGMmJmkuaGFzQ2xhc3MoXCJrLXRvcFwiKSYmKG49XCJrLWluc2VydC10b3BcIiksZCYmaS5oYXNDbGFzcyhcImstYm90XCIpJiYobj1cImstaW5zZXJ0LWJvdHRvbVwiKSkpOm1bMF0hPWguZHJvcEhpbnRbMF0mJihuPXZbMF0hPXAuZWxlbWVudFswXT9cImstYWRkXCI6XCJrLWRlbmllZFwiKSk6KG49XCJrLWRlbmllZFwiLGguX3JlbW92ZVRvdWNoSG92ZXIoKSkscC50cmlnZ2VyKFIse3NvdXJjZU5vZGU6Z1swXSxkcm9wVGFyZ2V0Om1bMF0scGFnZVk6dC55LmxvY2F0aW9uLHBhZ2VYOnQueC5sb2NhdGlvbixzdGF0dXNDbGFzczpuLnN1YnN0cmluZygyKSxzZXRTdGF0dXNDbGFzczpmdW5jdGlvbihlKXtuPWV9fSksMCE9PW4uaW5kZXhPZihcImstaW5zZXJ0XCIpJiZoLmRyb3BIaW50LmNzcyhOLFwiaGlkZGVuXCIpLGguX2hpbnRTdGF0dXMobil9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmRyb3BIaW50LnJlbW92ZSgpfSxkcmFnZW5kOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXthLnVwZGF0ZUluZGV0ZXJtaW5hdGUoKSxhLnRyaWdnZXIoTCx7c291cmNlTm9kZTplJiZlWzBdLGRlc3RpbmF0aW9uTm9kZTpuWzBdLGRyb3BQb3NpdGlvbjpzfSl9dmFyIG4saSxyLG89dGhpcyxhPW8udHJlZXZpZXcscz1cIm92ZXJcIixsPW8uc291cmNlTm9kZSxjPW8uZHJvcEhpbnQsZD1vLmRyb3BUYXJnZXQ7cmV0dXJuXCJ2aXNpYmxlXCI9PWMuY3NzKE4pPyhzPWMucHJldkFsbChcIi5rLWluXCIpLmxlbmd0aD4wP1wiYWZ0ZXJcIjpcImJlZm9yZVwiLG49Yy5jbG9zZXN0KEcpKTpkJiYobj1kLmNsb3Nlc3QoXCIuay10cmVldmlldyAuay1pdGVtXCIpLG4ubGVuZ3RofHwobj1kLmNsb3Nlc3QoXCIuay10cmVldmlld1wiKSkpLGk9e3NvdXJjZU5vZGU6bFswXSxkZXN0aW5hdGlvbk5vZGU6blswXSx2YWxpZDpcImstZGVuaWVkXCIhPW8uX2hpbnRTdGF0dXMoKSxzZXRWYWxpZDpmdW5jdGlvbihlKXt0aGlzLnZhbGlkPWV9LGRyb3BUYXJnZXQ6ZFswXSxkcm9wUG9zaXRpb246c30scj1hLnRyaWdnZXIoQixpKSxjLnJlbW92ZSgpLG8uX3JlbW92ZVRvdWNoSG92ZXIoKSwhaS52YWxpZHx8cj8oby5fZHJhZ2dhYmxlLmRyb3BwZWQ9aS52YWxpZCx0KTooby5fZHJhZ2dhYmxlLmRyb3BwZWQ9ITAsXCJvdmVyXCI9PXM/YS5hcHBlbmQobCxuLGUpOihcImJlZm9yZVwiPT1zP2w9YS5pbnNlcnRCZWZvcmUobCxuKTpcImFmdGVyXCI9PXMmJihsPWEuaW5zZXJ0QWZ0ZXIobCxuKSksZShsKSksdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnZ2FibGUuZGVzdHJveSgpfX0sZy5wbHVnaW4oYyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuLGkscj1bXTtmb3Iobj0wLGk9ZS5sZW5ndGg7aT5uO24rKyllW25dLmZpZWxkIT09dCYmci5wdXNoKGVbbl0pO3JldHVybiByfWZ1bmN0aW9uIGkoZSx0LG4pe3ZhciBpLHIsbyxhO2lmKCFlKXJldHVybltdO2ZvcihlPWUuZmlsdGVycyxpPTAscj1bXSxvPWUubGVuZ3RoO28+aTtpKyspYT1lW2ldLm9wZXJhdG9yLChufHxcImluXCI9PT1hKSYmYSE9PW58fGVbaV0uZmllbGQhPT10fHxyLnB1c2goZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gcih0LG4scil7dmFyIG8sYT0wLHM9ci5sZW5ndGg7aWYodD1pKHQsbixcImluXCIpWzBdKWZvcihvPXQudmFsdWUuc3BsaXQoXCIsXCIpO3M+YTthKyspclthXS5jaGVja2VkPWUuaW5BcnJheShyW2FdLnVuaXF1ZU5hbWUsbyk+PTA7ZWxzZSBmb3IoO3M+YTthKyspclthXS5jaGVja2VkPSEwfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbixpPWUubGVuZ3RoO2ZvcihuPTA7aT5uO24rKyllW25dLmNoZWNrZWQmJjAhPT1lW25dLmxldmVsKCkmJnQucHVzaChlW25dLnVuaXF1ZU5hbWUpLGVbbl0uaGFzQ2hpbGRyZW4mJm8oZVtuXS5jaGlsZHJlbi52aWV3KCksdCl9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPVwia2VuZG9Db250ZXh0TWVudVwiLGM9ZS5wcm94eSxkPVwiLmtlbmRvUGl2b3RGaWVsZE1lbnVcIix1PXMuV2lkZ2V0LGg9dS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt1LmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMuX2xheW91dCgpLGEubm90aWZ5KHRoaXMpfSxldmVudHM6W10sb3B0aW9uczp7bmFtZTpcIlBpdm90RmllbGRNZW51XCIsZmlsdGVyOm51bGwsZmlsdGVyYWJsZTohMCxzb3J0YWJsZTohMCxtZXNzYWdlczp7aW5mbzpcIlNob3cgaXRlbXMgd2l0aCB2YWx1ZSB0aGF0OlwiLHNvcnRBc2NlbmRpbmc6XCJTb3J0IEFzY2VuZGluZ1wiLHNvcnREZXNjZW5kaW5nOlwiU29ydCBEZXNjZW5kaW5nXCIsZmlsdGVyRmllbGRzOlwiRmllbGRzIEZpbHRlclwiLGZpbHRlcjpcIkZpbHRlclwiLGluY2x1ZGU6XCJJbmNsdWRlIEZpZWxkcy4uLlwiLHRpdGxlOlwiRmllbGRzIHRvIGluY2x1ZGVcIixjbGVhcjpcIkNsZWFyXCIsb2s6XCJPS1wiLGNhbmNlbDpcIkNhbmNlbFwiLG9wZXJhdG9yczp7Y29udGFpbnM6XCJDb250YWluc1wiLGRvZXNub3Rjb250YWluOlwiRG9lcyBub3QgY29udGFpblwiLHN0YXJ0c3dpdGg6XCJTdGFydHMgd2l0aFwiLGVuZHN3aXRoOlwiRW5kcyB3aXRoXCIsZXE6XCJJcyBlcXVhbCB0b1wiLG5lcTpcIklzIG5vdCBlcXVhbCB0b1wifX19LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnM7dGhpcy53cmFwcGVyPWUoYS50ZW1wbGF0ZShmKSh7bnM6YS5ucyxmaWx0ZXJhYmxlOnQuZmlsdGVyYWJsZSxzb3J0YWJsZTp0LnNvcnRhYmxlLG1lc3NhZ2VzOnQubWVzc2FnZXN9KSksdGhpcy5tZW51PXRoaXMud3JhcHBlcltsXSh7ZmlsdGVyOnQuZmlsdGVyLHRhcmdldDp0aGlzLmVsZW1lbnQsb3JpZW50YXRpb246XCJ2ZXJ0aWNhbFwiLHNob3dPbjpcImNsaWNrXCIsY2xvc2VPbkNsaWNrOiExLG9wZW46Yyh0aGlzLl9tZW51T3Blbix0aGlzKSxzZWxlY3Q6Yyh0aGlzLl9zZWxlY3QsdGhpcyksY29weUFuY2hvclN0eWxlczohMX0pLmRhdGEobCksdGhpcy5fY3JlYXRlV2luZG93KCksdC5maWx0ZXJhYmxlJiZ0aGlzLl9pbml0RmlsdGVyRm9ybSgpfSxfaW5pdEZpbHRlckZvcm06ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lbnUuZWxlbWVudC5maW5kKFwiLmstZmlsdGVyLWl0ZW1cIiksdD1jKHRoaXMuX2ZpbHRlcix0aGlzKTt0aGlzLl9maWx0ZXJPcGVyYXRvcj1uZXcgYS51aS5Ecm9wRG93bkxpc3QoZS5maW5kKFwic2VsZWN0XCIpKSx0aGlzLl9maWx0ZXJWYWx1ZT1lLmZpbmQoXCIuay10ZXh0Ym94XCIpLGUub24oXCJzdWJtaXRcIitkLHQpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWZpbHRlclwiLHQpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWNsZWFyXCIsYyh0aGlzLl9yZXNldCx0aGlzKSl9LF9zZXRGaWx0ZXJGb3JtOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIsbj1cIlwiO2UmJih0PWUub3BlcmF0b3Isbj1lLnZhbHVlKSx0aGlzLl9maWx0ZXJPcGVyYXRvci52YWx1ZSh0KSx0aGlzLl9maWx0ZXJWYWx1ZS52YWwobil9LF9jbGVhckZpbHRlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e30sbz0wO2ZvcihyLmZpbHRlcnM9ci5maWx0ZXJzfHxbXSx0PWkocixlKSxuPXQubGVuZ3RoO24+bztvKyspci5maWx0ZXJzLnNwbGljZShyLmZpbHRlcnMuaW5kZXhPZih0W29dKSwxKTtyZXR1cm4gcn0sX2ZpbHRlcjpmdW5jdGlvbihlKXt2YXIgbixpLHI9dGhpcyxvPXIuX2ZpbHRlclZhbHVlLnZhbCgpO3JldHVybiBlLnByZXZlbnREZWZhdWx0KCksbz8obj17ZmllbGQ6ci5jdXJyZW50TWVtYmVyLG9wZXJhdG9yOnIuX2ZpbHRlck9wZXJhdG9yLnZhbHVlKCksdmFsdWU6b30saT1yLl9jbGVhckZpbHRlcnMoci5jdXJyZW50TWVtYmVyKSxpLmZpbHRlcnMucHVzaChuKSxyLmRhdGFTb3VyY2UuZmlsdGVyKGkpLHIubWVudS5jbG9zZSgpLHQpOihyLm1lbnUuY2xvc2UoKSx0KX0sX3Jlc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9jbGVhckZpbHRlcnModC5jdXJyZW50TWVtYmVyKTtlLnByZXZlbnREZWZhdWx0KCksbi5maWx0ZXJzWzBdfHwobj17fSksdC5kYXRhU291cmNlLmZpbHRlcihuKSx0Ll9zZXRGaWx0ZXJGb3JtKG51bGwpLHQubWVudS5jbG9zZSgpfSxfc29ydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnJlbnRNZW1iZXIsaT10aGlzLmRhdGFTb3VyY2Uuc29ydCgpfHxbXTtpPW4oaSx0KSxpLnB1c2goe2ZpZWxkOnQsZGlyOmV9KSx0aGlzLmRhdGFTb3VyY2Uuc29ydChpKSx0aGlzLm1lbnUuY2xvc2UoKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt0aGlzLmRhdGFTb3VyY2U9YS5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpfSxfY3JlYXRlV2luZG93OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuaW5jbHVkZVdpbmRvdz1lKGEudGVtcGxhdGUoZykoe21lc3NhZ2VzOnR9KSkub24oXCJjbGlja1wiK2QsXCIuay1idXR0b24tb2tcIixjKHRoaXMuX2FwcGx5SW5jbHVkZXMsdGhpcykpLm9uKFwiY2xpY2tcIitkLFwiLmstYnV0dG9uLWNhbmNlbFwiLGModGhpcy5fY2xvc2VXaW5kb3csdGhpcykpLHRoaXMuaW5jbHVkZVdpbmRvdz1uZXcgcy5XaW5kb3codGhpcy5pbmNsdWRlV2luZG93LHt0aXRsZTp0LnRpdGxlLHZpc2libGU6ITEscmVzaXphYmxlOiExLG9wZW46Yyh0aGlzLl93aW5kb3dPcGVuLHRoaXMpfSl9LF9hcHBseUluY2x1ZGVzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj10aGlzLnRyZWVWaWV3LmRhdGFTb3VyY2UudmlldygpLGE9clswXS5jaGVja2VkLHM9dGhpcy5kYXRhU291cmNlLmZpbHRlcigpLGw9aShzLHRoaXMuY3VycmVudE1lbWJlcixcImluXCIpWzBdO28ocixuKSxsJiYoYT8ocy5maWx0ZXJzLnNwbGljZShzLmZpbHRlcnMuaW5kZXhPZihsKSwxKSxzLmZpbHRlcnMubGVuZ3RofHwocz17fSkpOmwudmFsdWU9bi5qb2luKFwiLFwiKSx0PXMpLG4ubGVuZ3RoJiYodHx8YXx8KHQ9e2ZpZWxkOnRoaXMuY3VycmVudE1lbWJlcixvcGVyYXRvcjpcImluXCIsdmFsdWU6bi5qb2luKFwiLFwiKX0scyYmKHMuZmlsdGVycy5wdXNoKHQpLHQ9cykpKSx0JiZ0aGlzLmRhdGFTb3VyY2UuZmlsdGVyKHQpLHRoaXMuX2Nsb3NlV2luZG93KGUpfSxfY2xvc2VXaW5kb3c6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaW5jbHVkZVdpbmRvdy5jbG9zZSgpfSxfdHJlZVZpZXdEYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gYS5kYXRhLkhpZXJhcmNoaWNhbERhdGFTb3VyY2UuY3JlYXRlKHtzY2hlbWE6e21vZGVsOntpZDpcInVuaXF1ZU5hbWVcIixoYXNDaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZS5jaGlsZHJlbkNhcmRpbmFsaXR5LDEwKT4wfX19LHRyYW5zcG9ydDp7cmVhZDpmdW5jdGlvbih0KXt2YXIgbj17fSxpPWUudHJlZVZpZXcuZGF0YVNvdXJjZS5nZXQodC5kYXRhLnVuaXF1ZU5hbWUpLG89dC5kYXRhLnVuaXF1ZU5hbWU7bz8obi5tZW1iZXJVbmlxdWVOYW1lPWkudW5pcXVlTmFtZS5yZXBsYWNlKC9cXCYvZyxcIiZhbXA7XCIpLG4udHJlZU9wPTEpOm4ubGV2ZWxVbmlxdWVOYW1lPWUuY3VycmVudE1lbWJlcitcIi5bKEFMTCldXCIsZS5kYXRhU291cmNlLnNjaGVtYU1lbWJlcnMobikuZG9uZShmdW5jdGlvbihuKXtyKGUuZGF0YVNvdXJjZS5maWx0ZXIoKSxlLmN1cnJlbnRNZW1iZXIsbiksdC5zdWNjZXNzKG4pfSkuZmFpbCh0LmVycm9yKX19fSl9LF9jcmVhdGVUcmVlVmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QudHJlZVZpZXc9bmV3IHMuVHJlZVZpZXcoZSx7YXV0b0JpbmQ6ITEsZGF0YVNvdXJjZTp0Ll90cmVlVmlld0RhdGFTb3VyY2UoKSxkYXRhVGV4dEZpZWxkOlwibmFtZVwiLGNoZWNrYm94ZXM6e2NoZWNrQ2hpbGRyZW46ITB9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3MucHJvZ3Jlc3ModC5pbmNsdWRlV2luZG93LmVsZW1lbnQsITEpfX0pfSxfbWVudU9wZW46ZnVuY3Rpb24odCl7dmFyIG47dC5ldmVudCYmKG49YS5hdHRyKFwibmFtZVwiKSx0aGlzLmN1cnJlbnRNZW1iZXI9ZSh0LmV2ZW50LnRhcmdldCkuY2xvc2VzdChcIltcIituK1wiXVwiKS5hdHRyKG4pLHRoaXMub3B0aW9ucy5maWx0ZXJhYmxlJiZ0aGlzLl9zZXRGaWx0ZXJGb3JtKGkodGhpcy5kYXRhU291cmNlLmZpbHRlcigpLHRoaXMuY3VycmVudE1lbWJlcilbMF0pKX0sX3NlbGVjdDpmdW5jdGlvbih0KXt2YXIgbj1lKHQuaXRlbSk7ZShcIi5rLXBpdm90LWZpbHRlci13aW5kb3dcIikubm90KHRoaXMuaW5jbHVkZVdpbmRvdy5lbGVtZW50KS5rZW5kb1dpbmRvdyhcImNsb3NlXCIpLG4uaGFzQ2xhc3MoXCJrLWluY2x1ZGUtaXRlbVwiKT90aGlzLmluY2x1ZGVXaW5kb3cuY2VudGVyKCkub3BlbigpOm4uaGFzQ2xhc3MoXCJrLXNvcnQtYXNjXCIpP3RoaXMuX3NvcnQoXCJhc2NcIik6bi5oYXNDbGFzcyhcImstc29ydC1kZXNjXCIpJiZ0aGlzLl9zb3J0KFwiZGVzY1wiKX0sX3dpbmRvd09wZW46ZnVuY3Rpb24oKXt0aGlzLnRyZWVWaWV3fHx0aGlzLl9jcmVhdGVUcmVlVmlldyh0aGlzLmluY2x1ZGVXaW5kb3cuZWxlbWVudC5maW5kKFwiLmstdHJlZXZpZXdcIikpLHMucHJvZ3Jlc3ModGhpcy5pbmNsdWRlV2luZG93LmVsZW1lbnQsITApLHRoaXMudHJlZVZpZXcuZGF0YVNvdXJjZS5yZWFkKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt1LmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLm1lbnUmJih0aGlzLm1lbnUuZGVzdHJveSgpLHRoaXMubWVudT1udWxsKSx0aGlzLnJlZWVWaWV3JiYodGhpcy50cmVlVmlldy5kZXN0cm95KCksdGhpcy50cmVlVmlldz1udWxsKSx0aGlzLmluY2x1ZGVXaW5kb3cmJih0aGlzLmluY2x1ZGVXaW5kb3cuZGVzdHJveSgpLHRoaXMuaW5jbHVkZVdpbmRvdz1udWxsKSx0aGlzLndyYXBwZXI9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbH19KSxwPSc8ZGl2IGNsYXNzPVwiay1maWx0ZXJhYmxlIGstY29udGVudFwiIHRhYmluZGV4PVwiLTFcIiBkYXRhLXJvbGU9XCJmaWVsZG1lbnVcIj48Zm9ybSBjbGFzcz1cImstZmlsdGVyLW1lbnVcIj48ZGl2PjxkaXYgY2xhc3M9XCJrLWZpbHRlci1oZWxwLXRleHRcIj4jPW1lc3NhZ2VzLmluZm8jPC9kaXY+PHNlbGVjdD4jZm9yKHZhciBvcCBpbiBtZXNzYWdlcy5vcGVyYXRvcnMpeyM8b3B0aW9uIHZhbHVlPVwiIz1vcCNcIj4jPW1lc3NhZ2VzLm9wZXJhdG9yc1tvcF0jPC9vcHRpb24+I30jPC9zZWxlY3Q+PGlucHV0IGNsYXNzPVwiay10ZXh0Ym94XCIgdHlwZT1cInRleHRcIiAvPjxkaXY+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnkgay1idXR0b24tZmlsdGVyXCIgaHJlZj1cIlxcXFwjXCI+Iz1tZXNzYWdlcy5maWx0ZXIjPC9hPjxhIGNsYXNzPVwiay1idXR0b24gay1idXR0b24tY2xlYXJcIiBocmVmPVwiXFxcXCNcIj4jPW1lc3NhZ2VzLmNsZWFyIzwvYT48L2Rpdj48L2Rpdj48L2Zvcm0+PC9kaXY+JyxmPSc8dWwgY2xhc3M9XCJrLXBpdm90LWZpZWxkbWVudVwiPiMgaWYgKHNvcnRhYmxlKSB7IzxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtYXNjXCI+PHNwYW4gY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc29ydC1hc2NcIj48L3NwYW4+JHttZXNzYWdlcy5zb3J0QXNjZW5kaW5nfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstaXRlbSBrLXNvcnQtZGVzY1wiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXNvcnQtZGVzY1wiPjwvc3Bhbj4ke21lc3NhZ2VzLnNvcnREZXNjZW5kaW5nfTwvc3Bhbj48L2xpPiMgaWYgKGZpbHRlcmFibGUpIHsjPGxpIGNsYXNzPVwiay1zZXBhcmF0b3JcIj48L2xpPiMgfSAjIyB9ICMjIGlmIChmaWx0ZXJhYmxlKSB7IzxsaSBjbGFzcz1cImstaXRlbSBrLWluY2x1ZGUtaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWx0ZXJcIj48L3NwYW4+JHttZXNzYWdlcy5pbmNsdWRlfTwvc3Bhbj48L2xpPjxsaSBjbGFzcz1cImstc2VwYXJhdG9yXCI+PC9saT48bGkgY2xhc3M9XCJrLWl0ZW0gay1maWx0ZXItaXRlbVwiPjxzcGFuIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1maWx0ZXJcIj48L3NwYW4+JHttZXNzYWdlcy5maWx0ZXJGaWVsZHN9PC9zcGFuPjx1bD48bGk+JytwK1wiPC9saT48L3VsPjwvbGk+IyB9ICM8L3VsPlwiLGc9JzxkaXYgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXBpdm90LWZpbHRlci13aW5kb3dcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWZvcm0tY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImstdHJlZXZpZXdcIj48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCI+PGEgY2xhc3M9XCJrLWJ1dHRvbiBrLXByaW1hcnkgay1idXR0b24tb2tcIiBocmVmPVwiXFxcXCNcIj4ke21lc3NhZ2VzLm9rfTwvYT48YSBjbGFzcz1cImstYnV0dG9uIGstYnV0dG9uLWNhbmNlbFwiIGhyZWY9XCJcXFxcI1wiPiR7bWVzc2FnZXMuY2FuY2VsfTwvYT48L2Rpdj48L2Rpdj4nO3MucGx1Z2luKGgpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCxpKXt2YXIgcixvLGE9W107aWYoZS5pc1BsYWluT2JqZWN0KHQpKWlmKHQuaGFzT3duUHJvcGVydHkoXCJmaWx0ZXJzXCIpKWE9dC5maWx0ZXJzO2Vsc2UgaWYodC5maWVsZD09aSlyZXR1cm4gdDtmb3IoZS5pc0FycmF5KHQpJiYoYT10KSxyPTA7YS5sZW5ndGg+cjtyKyspaWYobz1uKGFbcl0saSkpcmV0dXJuIG99ZnVuY3Rpb24gaSh0LG4pe3QuZmlsdGVycyYmKHQuZmlsdGVycz1lLmdyZXAodC5maWx0ZXJzLGZ1bmN0aW9uKGUpe3JldHVybiBpKGUsbiksZS5maWx0ZXJzP2UuZmlsdGVycy5sZW5ndGg6ZS5maWVsZCE9bn0pKX1mdW5jdGlvbiByKGUsdCl7dmFyIG49by5nZXR0ZXIodCwhMCk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgaSxyLG89ZSh0KSxhPVtdLHM9MCxsPXt9O28ubGVuZ3RoPnM7KWk9b1tzKytdLHI9bihpKSxsLmhhc093blByb3BlcnR5KHIpfHwoYS5wdXNoKGkpLGxbcl09ITApO3JldHVybiBhfX12YXIgbz13aW5kb3cua2VuZG8sYT1vLnVpLHM9by5kYXRhLkRhdGFTb3VyY2UsbD1hLldpZGdldCxjPVwiY2hhbmdlXCIsZD1cImJvb2xlYW5cIix1PVwiZW51bXNcIixoPVwic3RyaW5nXCIscD1cIklzIGVxdWFsIHRvXCIsZj1cIklzIG5vdCBlcXVhbCB0b1wiLGc9ZS5wcm94eSxtPWwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSl7dmFyIHIsYSxzLHAsZixtLHYsXyx5LHc7bj1lKG4pLmFkZENsYXNzKFwiay1maWx0ZXJjZWxsXCIpLHI9dGhpcy53cmFwcGVyPWUoXCI8c3Bhbi8+XCIpLmFwcGVuZFRvKG4pLGE9dGhpcyxtPWEub3BlcmF0b3JzPWkub3BlcmF0b3JzfHx7fSx2PWEuaW5wdXQ9ZShcIjxpbnB1dC8+XCIpLmF0dHIoby5hdHRyKFwiYmluZFwiKSxcInZhbHVlOiB2YWx1ZVwiKS5hcHBlbmRUbyhyKSxsLmZuLmluaXQuY2FsbChhLG5bMF0saSksaT1hLm9wdGlvbnMscz1hLmRhdGFTb3VyY2U9aS5kYXRhU291cmNlLGEubW9kZWw9cy5yZWFkZXIubW9kZWwsZj1pLnR5cGU9aCxfPW8uZ2V0dGVyKFwicmVhZGVyLm1vZGVsLmZpZWxkc1wiLCEwKShzKXx8e30seT1fW2kuZmllbGRdLHkmJnkudHlwZSYmKGY9aS50eXBlPXkudHlwZSksaS52YWx1ZXMmJihpLnR5cGU9Zj11KSxtPW1bZl18fGkub3BlcmF0b3JzW2ZdLGEuX3BhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBlK1wiXCJ9LGEubW9kZWwmJmEubW9kZWwuZmllbGRzJiYodz1hLm1vZGVsLmZpZWxkc1tpLmZpZWxkXSx3JiZ3LnBhcnNlJiYoYS5fcGFyc2U9Zyh3LnBhcnNlLHcpKSksYS52aWV3TW9kZWw9cD1vLm9ic2VydmFibGUoe29wZXJhdG9yOmkub3BlcmF0b3IsdmFsdWU6bnVsbCxvcGVyYXRvclZpc2libGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldChcInZhbHVlXCIpO3JldHVybiBudWxsIT09ZSYmZSE9PXQmJlwidW5kZWZpbmVkXCIhPWV9fSkscC5iaW5kKGMsZyhhLnVwZGF0ZURzRmlsdGVyLGEpKSxmPT1oJiZhLmluaXRTdWdnZXN0RGF0YVNvdXJjZShpKSxudWxsIT09aS5pbnB1dFdpZHRoJiZ2LndpZHRoKGkuaW5wdXRXaWR0aCksYS5fc2V0SW5wdXRUeXBlKGksZiksZiE9ZCYmaS5zaG93T3BlcmF0b3JzIT09ITE/YS5fY3JlYXRlT3BlcmF0b3JEcm9wRG93bihtKTpyLmFkZENsYXNzKFwiay1vcGVyYXRvci1oaWRkZW5cIiksYS5fY3JlYXRlQ2xlYXJJY29uKCksby5iaW5kKHRoaXMud3JhcHBlcixwKSxmPT1oJiYoaS50ZW1wbGF0ZXx8YS5zZXRBdXRvQ29tcGxldGVTb3VyY2UoKSksZj09dSYmYS5zZXRDb21ib0JveFNvdXJjZShhLm9wdGlvbnMudmFsdWVzKSxhLl9yZWZyZXNoVUkoKSxhLl9yZWZyZXNoSGFuZGxlcj1nKGEuX3JlZnJlc2hVSSxhKSxhLmRhdGFTb3VyY2UuYmluZChjLGEuX3JlZnJlc2hIYW5kbGVyKX0sX3NldElucHV0VHlwZTpmdW5jdGlvbih0LG4pe3ZhciBpLHIsYSxzLGwsYz10aGlzLHA9Yy5pbnB1dDtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnRlbXBsYXRlP3QudGVtcGxhdGUuY2FsbChjLnZpZXdNb2RlbCx7ZWxlbWVudDpjLmlucHV0LGRhdGFTb3VyY2U6Yy5zdWdnZXN0RGF0YVNvdXJjZX0pOm49PWg/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJhdXRvY29tcGxldGVcIikuYXR0cihvLmF0dHIoXCJ0ZXh0LWZpZWxkXCIpLHQuZGF0YVRleHRGaWVsZHx8dC5maWVsZCkuYXR0cihvLmF0dHIoXCJmaWx0ZXJcIiksdC5zdWdnZXN0aW9uT3BlcmF0b3IpLmF0dHIoby5hdHRyKFwiZGVsYXlcIiksdC5kZWxheSkuYXR0cihvLmF0dHIoXCJtaW4tbGVuZ3RoXCIpLHQubWluTGVuZ3RoKS5hdHRyKG8uYXR0cihcInZhbHVlLXByaW1pdGl2ZVwiKSwhMCk6XCJkYXRlXCI9PW4/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJkYXRlcGlja2VyXCIpOm49PWQ/KHAucmVtb3ZlKCksaT1lKFwiPGlucHV0IHR5cGU9J3JhZGlvJy8+XCIpLHI9Yy53cmFwcGVyLGE9by5ndWlkKCkscz1lKFwiPGxhYmVsLz5cIikudGV4dCh0Lm1lc3NhZ2VzLmlzVHJ1ZSkuYXBwZW5kKGkpLGkuYXR0cihvLmF0dHIoXCJiaW5kXCIpLFwiY2hlY2tlZDp2YWx1ZVwiKS5hdHRyKFwibmFtZVwiLGEpLnZhbChcInRydWVcIiksbD1zLmNsb25lKCkudGV4dCh0Lm1lc3NhZ2VzLmlzRmFsc2UpLGkuY2xvbmUoKS52YWwoXCJmYWxzZVwiKS5hcHBlbmRUbyhsKSxyLmFwcGVuZChbcyxsXSkpOlwibnVtYmVyXCI9PW4/cC5hdHRyKG8uYXR0cihcInJvbGVcIiksXCJudW1lcmljdGV4dGJveFwiKTpuPT11JiZwLmF0dHIoby5hdHRyKFwicm9sZVwiKSxcImNvbWJvYm94XCIpLmF0dHIoby5hdHRyKFwidGV4dC1maWVsZFwiKSxcInRleHRcIikuYXR0cihvLmF0dHIoXCJzdWdnZXN0XCIpLCEwKS5hdHRyKG8uYXR0cihcImZpbHRlclwiKSxcImNvbnRhaW5zXCIpLmF0dHIoby5hdHRyKFwidmFsdWUtZmllbGRcIiksXCJ2YWx1ZVwiKS5hdHRyKG8uYXR0cihcInZhbHVlLXByaW1pdGl2ZVwiKSwhMCl9LF9jcmVhdGVPcGVyYXRvckRyb3BEb3duOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj1bXTtmb3IobiBpbiB0KXIucHVzaCh7dGV4dDp0W25dLHZhbHVlOm59KTtpPWUoJzxpbnB1dCBjbGFzcz1cImstZHJvcGRvd24tb3BlcmF0b3JcIiAnK28uYXR0cihcImJpbmRcIikrJz1cInZhbHVlOiBvcGVyYXRvclwiLz4nKS5hcHBlbmRUbyh0aGlzLndyYXBwZXIpLHRoaXMub3BlcmF0b3JEcm9wRG93bj1pLmtlbmRvRHJvcERvd25MaXN0KHtkYXRhU291cmNlOnIsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsb3BlbjpmdW5jdGlvbigpe3RoaXMucG9wdXAuZWxlbWVudC53aWR0aCgxNTApfSx2YWx1ZVByaW1pdGl2ZTohMH0pLmRhdGEoXCJrZW5kb0Ryb3BEb3duTGlzdFwiKSx0aGlzLm9wZXJhdG9yRHJvcERvd24ud3JhcHBlci5maW5kKFwiLmstaS1hcnJvdy1zXCIpLnJlbW92ZUNsYXNzKFwiay1pLWFycm93LXNcIikuYWRkQ2xhc3MoXCJrLWZpbHRlclwiKX0saW5pdFN1Z2dlc3REYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciBuPWUuc3VnZ2VzdERhdGFTb3VyY2U7biBpbnN0YW5jZW9mIHN8fCghZS5jdXN0b21EYXRhU291cmNlJiZuJiYobi5ncm91cD10KSxuPXRoaXMuc3VnZ2VzdERhdGFTb3VyY2U9cy5jcmVhdGUobikpLGUuY3VzdG9tRGF0YVNvdXJjZXx8KG4uX3BhZ2VTaXplPXQsbi5yZWFkZXIuZGF0YT1yKG4ucmVhZGVyLmRhdGEsdGhpcy5vcHRpb25zLmZpZWxkKSksdGhpcy5zdWdnZXN0RGF0YVNvdXJjZT1ufSxzZXRBdXRvQ29tcGxldGVTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlucHV0LmRhdGEoXCJrZW5kb0F1dG9Db21wbGV0ZVwiKTtlJiZlLnNldERhdGFTb3VyY2UodGhpcy5zdWdnZXN0RGF0YVNvdXJjZSl9LHNldENvbWJvQm94U291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXMuY3JlYXRlKHtkYXRhOmV9KSxuPXRoaXMuaW5wdXQuZGF0YShcImtlbmRvQ29tYm9Cb3hcIik7biYmbi5zZXREYXRhU291cmNlKHQpfSxfcmVmcmVzaFVJOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPW4odC5kYXRhU291cmNlLmZpbHRlcigpLHRoaXMub3B0aW9ucy5maWVsZCl8fHt9LHI9dC52aWV3TW9kZWw7dC5tYW51YWxseVVwZGF0aW5nVk09ITAsaT1lLmV4dGVuZCghMCx7fSxpKSx0Lm9wdGlvbnMudHlwZT09ZCYmci52YWx1ZSE9PWkudmFsdWUmJnQud3JhcHBlci5maW5kKFwiOnJhZGlvXCIpLnByb3AoXCJjaGVja2VkXCIsITEpLGkub3BlcmF0b3ImJnIuc2V0KFwib3BlcmF0b3JcIixpLm9wZXJhdG9yKSxyLnNldChcInZhbHVlXCIsaS52YWx1ZSksdC5tYW51YWxseVVwZGF0aW5nVk09ITF9LHVwZGF0ZURzRmlsdGVyOmZ1bmN0aW9uKG4pe3ZhciBpLHIsbyxhPXRoaXMscz1hLnZpZXdNb2RlbDthLm1hbnVhbGx5VXBkYXRpbmdWTXx8XCJvcGVyYXRvclwiPT1uLmZpZWxkJiZzLnZhbHVlPT09dHx8KGk9ZS5leHRlbmQoe30sYS52aWV3TW9kZWwudG9KU09OKCkse2ZpZWxkOmEub3B0aW9ucy5maWVsZH0pLHI9e2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpbXX0saS52YWx1ZSE9PXQmJm51bGwhPT1pLnZhbHVlJiZyLmZpbHRlcnMucHVzaChpKSxvPWEuX21lcmdlKHIpLGEuZGF0YVNvdXJjZS5maWx0ZXIoby5maWx0ZXJzLmxlbmd0aD9vOnt9KSl9LF9tZXJnZTpmdW5jdGlvbih0KXt2YXIgbixyLG8sYT10aGlzLHM9dC5sb2dpY3x8XCJhbmRcIixsPXQuZmlsdGVycyxjPWEuZGF0YVNvdXJjZS5maWx0ZXIoKXx8e2ZpbHRlcnM6W10sbG9naWM6XCJhbmRcIn07Zm9yKGkoYyxhLm9wdGlvbnMuZmllbGQpLHI9MCxvPWwubGVuZ3RoO28+cjtyKyspbj1sW3JdLG4udmFsdWU9YS5fcGFyc2Uobi52YWx1ZSk7cmV0dXJuIGw9ZS5ncmVwKGwsZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWUudmFsdWUmJm51bGwhPT1lLnZhbHVlfSksbC5sZW5ndGgmJihjLmZpbHRlcnMubGVuZ3RoPyh0LmZpbHRlcnM9bCxcImFuZFwiIT09Yy5sb2dpYyYmKGMuZmlsdGVycz1be2xvZ2ljOmMubG9naWMsZmlsdGVyczpjLmZpbHRlcnN9XSxjLmxvZ2ljPVwiYW5kXCIpLGMuZmlsdGVycy5wdXNoKGwubGVuZ3RoPjE/dDpsWzBdKSk6KGMuZmlsdGVycz1sLGMubG9naWM9cykpLGN9LF9jcmVhdGVDbGVhckljb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UoXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2stYnV0dG9uIGstYnV0dG9uLWljb24nLz5cIikuYXR0cihvLmF0dHIoXCJiaW5kXCIpLFwidmlzaWJsZTpvcGVyYXRvclZpc2libGVcIikuaHRtbChcIjxzcGFuIGNsYXNzPSdrLWljb24gay1pLWNsb3NlJy8+XCIpLmNsaWNrKGcodC5jbGVhckZpbHRlcix0KSkuYXBwZW5kVG8odC53cmFwcGVyKX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oKXt0aGlzLnZpZXdNb2RlbC5zZXQoXCJ2YWx1ZVwiLG51bGwpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmZpbHRlck1vZGVsPW51bGwsbC5mbi5kZXN0cm95LmNhbGwoZSksby5kZXN0cm95KGUuZWxlbWVudCl9LGV2ZW50czpbY10sb3B0aW9uczp7bmFtZTpcIkZpbHRlckNlbGxcIixkZWxheToyMDAsbWluTGVuZ3RoOjEsaW5wdXRXaWR0aDpudWxsLHZhbHVlczp0LGN1c3RvbURhdGFTb3VyY2U6ITEsZmllbGQ6XCJcIixkYXRhVGV4dEZpZWxkOlwiXCIsdHlwZTpcInN0cmluZ1wiLHN1Z2dlc3REYXRhU291cmNlOm51bGwsc3VnZ2VzdGlvbk9wZXJhdG9yOlwic3RhcnRzd2l0aFwiLG9wZXJhdG9yOlwiZXFcIixzaG93T3BlcmF0b3JzOiEwLHRlbXBsYXRlOm51bGwsbWVzc2FnZXM6e2lzVHJ1ZTpcImlzIHRydWVcIixpc0ZhbHNlOlwiaXMgZmFsc2VcIixmaWx0ZXI6XCJGaWx0ZXJcIixjbGVhcjpcIkNsZWFyXCIsb3BlcmF0b3I6XCJPcGVyYXRvclwifSxvcGVyYXRvcnM6e3N0cmluZzp7ZXE6cCxuZXE6ZixzdGFydHN3aXRoOlwiU3RhcnRzIHdpdGhcIixjb250YWluczpcIkNvbnRhaW5zXCIsZG9lc25vdGNvbnRhaW46XCJEb2VzIG5vdCBjb250YWluXCIsZW5kc3dpdGg6XCJFbmRzIHdpdGhcIn0sbnVtYmVyOntlcTpwLG5lcTpmLGd0ZTpcIklzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0b1wiLGd0OlwiSXMgZ3JlYXRlciB0aGFuXCIsbHRlOlwiSXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvXCIsbHQ6XCJJcyBsZXNzIHRoYW5cIn0sZGF0ZTp7ZXE6cCxuZXE6ZixndGU6XCJJcyBhZnRlciBvciBlcXVhbCB0b1wiLGd0OlwiSXMgYWZ0ZXJcIixsdGU6XCJJcyBiZWZvcmUgb3IgZXF1YWwgdG9cIixsdDpcIklzIGJlZm9yZVwifSxlbnVtczp7ZXE6cCxuZXE6Zn19fX0pO2EucGx1Z2luKG0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4odCl7dD1lKHQpLHQuY2hpbGRyZW4odikuY2hpbGRyZW4oXCIuay1pY29uXCIpLnJlbW92ZSgpLHQuZmlsdGVyKFwiOmhhcyguay1wYW5lbCksOmhhcyguay1jb250ZW50KVwiKS5jaGlsZHJlbihcIi5rLWxpbms6bm90KDpoYXMoW2NsYXNzKj1rLWktYXJyb3ddKSlcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbj10LnBhcmVudCgpO3QuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J2staWNvbiBcIisobi5oYXNDbGFzcyhJKT9cImstaS1hcnJvdy1uIGstcGFuZWxiYXItY29sbGFwc2VcIjpcImstaS1hcnJvdy1zIGstcGFuZWxiYXItZXhwYW5kXCIpK1wiJy8+XCIpfSl9ZnVuY3Rpb24gaSh0KXt0PWUodCksdC5maWx0ZXIoXCIuay1maXJzdDpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyh4KSx0LmZpbHRlcihcIi5rLWxhc3Q6bm90KDpsYXN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyhnKSx0LmZpbHRlcihcIjpmaXJzdC1jaGlsZFwiKS5hZGRDbGFzcyh4KSx0LmZpbHRlcihcIjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKGcpfXZhciByPXdpbmRvdy5rZW5kbyxvPXIudWksYT1yLmtleXMscz1lLmV4dGVuZCxsPWUuZWFjaCxjPXIudGVtcGxhdGUsZD1vLldpZGdldCx1PS9eKHVsfGF8ZGl2KSQvaSxoPVwiLmtlbmRvUGFuZWxCYXJcIixwPVwiaW1nXCIsZj1cImhyZWZcIixnPVwiay1sYXN0XCIsbT1cImstbGlua1wiLHY9XCIuXCIrbSxfPVwiZXJyb3JcIix5PVwiLmstaXRlbVwiLHc9XCIuay1ncm91cFwiLGI9dytcIjp2aXNpYmxlXCIsaz1cImstaW1hZ2VcIix4PVwiay1maXJzdFwiLEM9XCJleHBhbmRcIixTPVwic2VsZWN0XCIsVD1cImstY29udGVudFwiLEQ9XCJhY3RpdmF0ZVwiLEE9XCJjb2xsYXBzZVwiLEU9XCJtb3VzZWVudGVyXCIsTT1cIm1vdXNlbGVhdmVcIixQPVwiY29udGVudExvYWRcIixJPVwiay1zdGF0ZS1hY3RpdmVcIix6PVwiPiAuay1wYW5lbFwiLEY9XCI+IC5rLWNvbnRlbnRcIixSPVwiay1zdGF0ZS1mb2N1c2VkXCIsQj1cImstc3RhdGUtZGlzYWJsZWRcIixMPVwiay1zdGF0ZS1zZWxlY3RlZFwiLE89XCIuXCIrTCxIPVwiay1zdGF0ZS1oaWdobGlnaHRcIixOPXkrXCI6bm90KC5rLXN0YXRlLWRpc2FibGVkKVwiLFY9TitcIiA+IC5rLWxpbmtcIixVPXkrXCIuay1zdGF0ZS1kaXNhYmxlZCA+IC5rLWxpbmtcIixXPVwiPiBsaSA+IFwiK08rXCIsIC5rLXBhbmVsID4gbGkgPiBcIitPLGo9XCJrLXN0YXRlLWRlZmF1bHRcIixHPVwiYXJpYS1kaXNhYmxlZFwiLHE9XCJhcmlhLWV4cGFuZGVkXCIsJD1cImFyaWEtaGlkZGVuXCIsWT1cImFyaWEtc2VsZWN0ZWRcIixLPVwiOnZpc2libGVcIixRPVwiOmVtcHR5XCIsWD1cInNpbmdsZVwiLEo9e2NvbnRlbnQ6YyhcIjxkaXYgcm9sZT0ncmVnaW9uJyBjbGFzcz0nay1jb250ZW50JyM9IGNvbnRlbnRBdHRyaWJ1dGVzKGRhdGEpICM+Iz0gY29udGVudChpdGVtKSAjPC9kaXY+XCIpLGdyb3VwOmMoXCI8dWwgcm9sZT0nZ3JvdXAnIGFyaWEtaGlkZGVuPSd0cnVlJyBjbGFzcz0nIz0gZ3JvdXBDc3NDbGFzcyhncm91cCkgIycjPSBncm91cEF0dHJpYnV0ZXMoZ3JvdXApICM+Iz0gcmVuZGVySXRlbXMoZGF0YSkgIzwvdWw+XCIpLGl0ZW1XcmFwcGVyOmMoXCI8Iz0gdGFnKGl0ZW0pICMgY2xhc3M9JyM9IHRleHRDbGFzcyhpdGVtLCBncm91cCkgIycgIz0gY29udGVudFVybChpdGVtKSAjIz0gdGV4dEF0dHJpYnV0ZXMoaXRlbSkgIz4jPSBpbWFnZShpdGVtKSAjIz0gc3ByaXRlKGl0ZW0pICMjPSB0ZXh0KGl0ZW0pICMjPSBhcnJvdyhkYXRhKSAjPC8jPSB0YWcoaXRlbSkgIz5cIiksaXRlbTpjKFwiPGxpIHJvbGU9J21lbnVpdGVtJyAjPWFyaWEoaXRlbSkjY2xhc3M9JyM9IHdyYXBwZXJDc3NDbGFzcyhncm91cCwgaXRlbSkgIyc+Iz0gaXRlbVdyYXBwZXIoZGF0YSkgIyMgaWYgKGl0ZW0uaXRlbXMpIHsgIyM9IHN1Ykdyb3VwKHsgaXRlbXM6IGl0ZW0uaXRlbXMsIHBhbmVsQmFyOiBwYW5lbEJhciwgZ3JvdXA6IHsgZXhwYW5kZWQ6IGl0ZW0uZXhwYW5kZWQgfSB9KSAjIyB9IGVsc2UgaWYgKGl0ZW0uY29udGVudCB8fCBpdGVtLmNvbnRlbnRVcmwpIHsgIyM9IHJlbmRlckNvbnRlbnQoZGF0YSkgIyMgfSAjPC9saT5cIiksaW1hZ2U6YyhcIjxpbWcgY2xhc3M9J2staW1hZ2UnIGFsdD0nJyBzcmM9JyM9IGltYWdlVXJsICMnIC8+XCIpLGFycm93OmMoXCI8c3BhbiBjbGFzcz0nIz0gYXJyb3dDbGFzcyhpdGVtKSAjJz48L3NwYW4+XCIpLHNwcml0ZTpjKFwiPHNwYW4gY2xhc3M9J2stc3ByaXRlICM9IHNwcml0ZUNzc0NsYXNzICMnPjwvc3Bhbj5cIiksZW1wdHk6YyhcIlwiKX0sWj17YXJpYTpmdW5jdGlvbihlKXt2YXIgdD1cIlwiO3JldHVybihlLml0ZW1zfHxlLmNvbnRlbnR8fGUuY29udGVudFVybCkmJih0Kz1xK1wiPSdcIisoZS5leHBhbmRlZD9cInRydWVcIjpcImZhbHNlXCIpK1wiJyBcIiksZS5lbmFibGVkPT09ITEmJih0Kz1HK1wiPSd0cnVlJ1wiKSx0XG59LHdyYXBwZXJDc3NDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiay1pdGVtXCIsaT10LmluZGV4O3JldHVybiBuKz10LmVuYWJsZWQ9PT0hMT9cIiBcIitCOnQuZXhwYW5kZWQ9PT0hMD9cIiBcIitJOlwiIGstc3RhdGUtZGVmYXVsdFwiLDA9PT1pJiYobis9XCIgay1maXJzdFwiKSxpPT1lLmxlbmd0aC0xJiYobis9XCIgay1sYXN0XCIpLHQuY3NzQ2xhc3MmJihuKz1cIiBcIit0LmNzc0NsYXNzKSxufSx0ZXh0Q2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj1tO3JldHVybiB0LmZpcnN0TGV2ZWwmJihuKz1cIiBrLWhlYWRlclwiKSxufSx0ZXh0QXR0cmlidXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmw/XCIgaHJlZj0nXCIrZS51cmwrXCInXCI6XCJcIn0sYXJyb3dDbGFzczpmdW5jdGlvbihlKXt2YXIgdD1cImstaWNvblwiO3JldHVybiB0Kz1lLmV4cGFuZGVkP1wiIGstaS1hcnJvdy1uIGstcGFuZWxiYXItY29sbGFwc2VcIjpcIiBrLWktYXJyb3ctcyBrLXBhbmVsYmFyLWV4cGFuZFwifSx0ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmVuY29kZWQ9PT0hMT9lLnRleHQ6ci5odG1sRW5jb2RlKGUudGV4dCl9LHRhZzpmdW5jdGlvbihlKXtyZXR1cm4gZS51cmx8fGUuY29udGVudFVybD9cImFcIjpcInNwYW5cIn0sZ3JvdXBBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmV4cGFuZGVkIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSdcIjpcIlwifSxncm91cENzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuXCJrLWdyb3VwIGstcGFuZWxcIn0sY29udGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXRlbS5leHBhbmRlZCE9PSEwP1wiIHN0eWxlPSdkaXNwbGF5Om5vbmUnXCI6XCJcIn0sY29udGVudDpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50P2UuY29udGVudDplLmNvbnRlbnRVcmw/XCJcIjpcIiZuYnNwO1wifSxjb250ZW50VXJsOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnRVcmw/J2hyZWY9XCInK2UuY29udGVudFVybCsnXCInOlwiXCJ9fSxldD1kLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LG4pe3ZhciBpLG89dGhpcztkLmZuLmluaXQuY2FsbChvLHQsbiksdD1vLndyYXBwZXI9by5lbGVtZW50LmFkZENsYXNzKFwiay13aWRnZXQgay1yZXNldCBrLWhlYWRlciBrLXBhbmVsYmFyXCIpLG49by5vcHRpb25zLHRbMF0uaWQmJihvLl9pdGVtSWQ9dFswXS5pZCtcIl9wYl9hY3RpdmVcIiksby5fdGFiaW5kZXgoKSxvLl9pbml0RGF0YShuKSxvLl91cGRhdGVDbGFzc2VzKCksby5fYW5pbWF0aW9ucyhuKSx0Lm9uKFwiY2xpY2tcIitoLFYsZnVuY3Rpb24odCl7by5fY2xpY2soZSh0LmN1cnJlbnRUYXJnZXQpKSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkub24oRStoK1wiIFwiK00raCxWLG8uX3RvZ2dsZUhvdmVyKS5vbihcImNsaWNrXCIraCxVLCExKS5vbihcImtleWRvd25cIitoLGUucHJveHkoby5fa2V5ZG93bixvKSkub24oXCJmb2N1c1wiK2gsZnVuY3Rpb24oKXt2YXIgZT1vLnNlbGVjdCgpO28uX2N1cnJlbnQoZVswXT9lOm8uX2ZpcnN0KCkpfSkub24oXCJibHVyXCIraCxmdW5jdGlvbigpe28uX2N1cnJlbnQobnVsbCl9KS5hdHRyKFwicm9sZVwiLFwibWVudVwiKSxpPXQuZmluZChcImxpLlwiK0krXCIgPiAuXCIrVCksaVswXSYmby5leHBhbmQoaS5wYXJlbnQoKSwhMSksci5ub3RpZnkobyl9LGV2ZW50czpbQyxBLFMsRCxfLFBdLG9wdGlvbnM6e25hbWU6XCJQYW5lbEJhclwiLGFuaW1hdGlvbjp7ZXhwYW5kOntlZmZlY3RzOlwiZXhwYW5kOnZlcnRpY2FsXCIsZHVyYXRpb246MjAwfSxjb2xsYXBzZTp7ZHVyYXRpb246MjAwfX0sZXhwYW5kTW9kZTpcIm11bHRpcGxlXCJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtkLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub2ZmKGgpLHIuZGVzdHJveSh0aGlzLmVsZW1lbnQpfSxfaW5pdERhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmRhdGFTb3VyY2UmJih0LmVsZW1lbnQuZW1wdHkoKSx0LmFwcGVuZChlLmRhdGFTb3VyY2UsdC5lbGVtZW50KSl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLmFuaW1hdGlvbjt0aGlzLl9hbmltYXRpb25zKGUpLGUuYW5pbWF0aW9uPXMoITAsdCxlLmFuaW1hdGlvbiksXCJkYXRhU291cmNlXCJpbiBlJiZ0aGlzLl9pbml0RGF0YShlKSxkLmZuLnNldE9wdGlvbnMuY2FsbCh0aGlzLGUpfSxleHBhbmQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9e307cmV0dXJuIG49biE9PSExLHQ9dGhpcy5lbGVtZW50LmZpbmQodCksdC5lYWNoKGZ1bmN0aW9uKG8sYSl7YT1lKGEpO3ZhciBzPWEuZmluZCh6KS5hZGQoYS5maW5kKEYpKTtpZighYS5oYXNDbGFzcyhCKSYmcy5sZW5ndGg+MCl7aWYoaS5vcHRpb25zLmV4cGFuZE1vZGU9PVgmJmkuX2NvbGxhcHNlQWxsRXhwYW5kZWQoYSkpcmV0dXJuIGk7dC5maW5kKFwiLlwiK0gpLnJlbW92ZUNsYXNzKEgpLGEuYWRkQ2xhc3MoSCksbnx8KHI9aS5vcHRpb25zLmFuaW1hdGlvbixpLm9wdGlvbnMuYW5pbWF0aW9uPXtleHBhbmQ6e2VmZmVjdHM6e319LGNvbGxhcHNlOntoaWRlOiEwLGVmZmVjdHM6e319fSksaS5fdHJpZ2dlckV2ZW50KEMsYSl8fGkuX3RvZ2dsZUl0ZW0oYSwhMSksbnx8KGkub3B0aW9ucy5hbmltYXRpb249cil9fSksaX0sY29sbGFwc2U6ZnVuY3Rpb24odCxuKXt2YXIgaT10aGlzLHI9e307cmV0dXJuIG49biE9PSExLHQ9aS5lbGVtZW50LmZpbmQodCksdC5lYWNoKGZ1bmN0aW9uKHQsbyl7bz1lKG8pO3ZhciBhPW8uZmluZCh6KS5hZGQoby5maW5kKEYpKTshby5oYXNDbGFzcyhCKSYmYS5pcyhLKSYmKG8ucmVtb3ZlQ2xhc3MoSCksbnx8KHI9aS5vcHRpb25zLmFuaW1hdGlvbixpLm9wdGlvbnMuYW5pbWF0aW9uPXtleHBhbmQ6e2VmZmVjdHM6e319LGNvbGxhcHNlOntoaWRlOiEwLGVmZmVjdHM6e319fSksaS5fdHJpZ2dlckV2ZW50KEEsbyl8fGkuX3RvZ2dsZUl0ZW0obywhMCksbnx8KGkub3B0aW9ucy5hbmltYXRpb249cikpfSksaX0sX3RvZ2dsZURpc2FibGVkOmZ1bmN0aW9uKGUsdCl7ZT10aGlzLmVsZW1lbnQuZmluZChlKSxlLnRvZ2dsZUNsYXNzKGosdCkudG9nZ2xlQ2xhc3MoQiwhdCkuYXR0cihHLCF0KX0sc2VsZWN0OmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXM7cmV0dXJuIG49PT10P2kuZWxlbWVudC5maW5kKFcpLnBhcmVudCgpOihuPWkuZWxlbWVudC5maW5kKG4pLG4ubGVuZ3RoP24uZWFjaChmdW5jdGlvbigpe3ZhciBuPWUodGhpcykscj1uLmNoaWxkcmVuKHYpO3JldHVybiBuLmhhc0NsYXNzKEIpP2k6KGkuX3RyaWdnZXJFdmVudChTLG4pfHxpLl91cGRhdGVTZWxlY3RlZChyKSx0KX0pOnRoaXMuX3VwZGF0ZVNlbGVjdGVkKG4pLGkpfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3RoaXMuc2VsZWN0KGUoKSl9LGVuYWJsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLHQhPT0hMSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdG9nZ2xlRGlzYWJsZWQoZSwhMSksdGhpc30sYXBwZW5kOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgcj10aGlzLl9pbnNlcnQoZSx0LHQubGVuZ3RoP3QuZmluZCh6KTpudWxsKTtyZXR1cm4gbChyLml0ZW1zLGZ1bmN0aW9uKCl7ci5ncm91cC5hcHBlbmQodGhpcyksaSh0aGlzKX0pLG4odCksaShyLmdyb3VwLmZpbmQoXCIuay1maXJzdCwgLmstbGFzdFwiKSksci5ncm91cC5oZWlnaHQoXCJhdXRvXCIpLHRoaXN9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQpe3Q9dGhpcy5lbGVtZW50LmZpbmQodCk7dmFyIG49dGhpcy5faW5zZXJ0KGUsdCx0LnBhcmVudCgpKTtyZXR1cm4gbChuLml0ZW1zLGZ1bmN0aW9uKCl7dC5iZWZvcmUodGhpcyksaSh0aGlzKX0pLGkodCksbi5ncm91cC5oZWlnaHQoXCJhdXRvXCIpLHRoaXN9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGUsdCl7dD10aGlzLmVsZW1lbnQuZmluZCh0KTt2YXIgbj10aGlzLl9pbnNlcnQoZSx0LHQucGFyZW50KCkpO3JldHVybiBsKG4uaXRlbXMsZnVuY3Rpb24oKXt0LmFmdGVyKHRoaXMpLGkodGhpcyl9KSxpKHQpLG4uZ3JvdXAuaGVpZ2h0KFwiYXV0b1wiKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZT10aGlzLmVsZW1lbnQuZmluZChlKTt2YXIgdD10aGlzLHI9ZS5wYXJlbnRzVW50aWwodC5lbGVtZW50LHkpLG89ZS5wYXJlbnQoXCJ1bFwiKTtyZXR1cm4gZS5yZW1vdmUoKSwhb3x8by5oYXNDbGFzcyhcImstcGFuZWxiYXJcIil8fG8uY2hpbGRyZW4oeSkubGVuZ3RofHxvLnJlbW92ZSgpLHIubGVuZ3RoJiYocj1yLmVxKDApLG4ociksaShyKSksdH0scmVsb2FkOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7dD1uLmVsZW1lbnQuZmluZCh0KSx0LmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO24uX2FqYXhSZXF1ZXN0KHQsdC5jaGlsZHJlbihcIi5cIitUKSwhdC5pcyhLKSl9KX0sX2ZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbihOKS5maXJzdCgpfSxfbGFzdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5jaGlsZHJlbihOKS5sYXN0KCksdD1lLmNoaWxkcmVuKGIpO3JldHVybiB0WzBdP3QuY2hpbGRyZW4oTikubGFzdCgpOmV9LF9jdXJyZW50OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLl9mb2N1c2VkLHI9bi5faXRlbUlkO3JldHVybiBlPT09dD9pOihuLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSxpJiYoaVswXS5pZD09PXImJmkucmVtb3ZlQXR0cihcImlkXCIpLGkuY2hpbGRyZW4odikucmVtb3ZlQ2xhc3MoUikpLGUmJihyPWVbMF0uaWR8fHIsZS5hdHRyKFwiaWRcIixyKS5jaGlsZHJlbih2KS5hZGRDbGFzcyhSKSxuLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLHIpKSxuLl9mb2N1c2VkPWUsdCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmtleUNvZGUsaT10Ll9jdXJyZW50KCk7ZS50YXJnZXQ9PWUuY3VycmVudFRhcmdldCYmKG49PWEuRE9XTnx8bj09YS5SSUdIVD8odC5fY3VycmVudCh0Ll9uZXh0SXRlbShpKSksZS5wcmV2ZW50RGVmYXVsdCgpKTpuPT1hLlVQfHxuPT1hLkxFRlQ/KHQuX2N1cnJlbnQodC5fcHJldkl0ZW0oaSkpLGUucHJldmVudERlZmF1bHQoKSk6bj09YS5FTlRFUnx8bj09YS5TUEFDRUJBUj8odC5fY2xpY2soaS5jaGlsZHJlbih2KSksZS5wcmV2ZW50RGVmYXVsdCgpKTpuPT1hLkhPTUU/KHQuX2N1cnJlbnQodC5fZmlyc3QoKSksZS5wcmV2ZW50RGVmYXVsdCgpKTpuPT1hLkVORCYmKHQuX2N1cnJlbnQodC5fbGFzdCgpKSxlLnByZXZlbnREZWZhdWx0KCkpKX0sX25leHRJdGVtOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLl9maXJzdCgpO3ZhciB0PWUuY2hpbGRyZW4oYiksbj1lLm5leHRBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO3JldHVybiB0WzBdJiYobj10LmNoaWxkcmVuKFwiLlwiK3gpKSxuWzBdfHwobj1lLnBhcmVudChiKS5wYXJlbnQoeSkubmV4dCgpKSxuWzBdfHwobj10aGlzLl9maXJzdCgpKSxuLmhhc0NsYXNzKEIpJiYobj10aGlzLl9uZXh0SXRlbShuKSksbn0sX3ByZXZJdGVtOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLl9sYXN0KCk7dmFyIHQsbj1lLnByZXZBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO2lmKG5bMF0pZm9yKHQ9bjt0WzBdOyl0PXQuY2hpbGRyZW4oYikuY2hpbGRyZW4oXCIuXCIrZyksdFswXSYmKG49dCk7ZWxzZSBuPWUucGFyZW50KGIpLnBhcmVudCh5KSxuWzBdfHwobj10aGlzLl9sYXN0KCkpO3JldHVybiBuLmhhc0NsYXNzKEIpJiYobj10aGlzLl9wcmV2SXRlbShuKSksbn0sX2luc2VydDpmdW5jdGlvbih0LG4saSl7dmFyIHIsbyxhPXRoaXMsbD1lLmlzUGxhaW5PYmplY3QodCksYz1uJiZuWzBdO3JldHVybiBjfHwoaT1hLmVsZW1lbnQpLG89e2ZpcnN0TGV2ZWw6aS5oYXNDbGFzcyhcImstcGFuZWxiYXJcIiksZXhwYW5kZWQ6aS5wYXJlbnQoKS5oYXNDbGFzcyhJKSxsZW5ndGg6aS5jaGlsZHJlbigpLmxlbmd0aH0sYyYmIWkubGVuZ3RoJiYoaT1lKGV0LnJlbmRlckdyb3VwKHtncm91cDpvfSkpLmFwcGVuZFRvKG4pKSxsfHxlLmlzQXJyYXkodCk/KHI9ZS5tYXAobD9bdF06dCxmdW5jdGlvbih0LG4pe3JldHVybiBlKFwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6ZXQucmVuZGVySXRlbSh7Z3JvdXA6byxpdGVtOnModCx7aW5kZXg6bn0pfSkpfSksYyYmbi5hdHRyKHEsITEpKToocj1cInN0cmluZ1wiPT10eXBlb2YgdCYmXCI8XCIhPXRbMF0/YS5lbGVtZW50LmZpbmQodCk6ZSh0KSxhLl91cGRhdGVJdGVtc0NsYXNzZXMocikpLHtpdGVtczpyLGdyb3VwOml9fSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpO24ucGFyZW50cyhcImxpLlwiK0IpLmxlbmd0aHx8bi50b2dnbGVDbGFzcyhcImstc3RhdGUtaG92ZXJcIix0LnR5cGU9PUUpfSxfdXBkYXRlQ2xhc3NlczpmdW5jdGlvbigpe3ZhciB0LHIsbz10aGlzO3Q9by5lbGVtZW50LmZpbmQoXCJsaSA+IHVsXCIpLm5vdChmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLnBhcmVudHNVbnRpbChcIi5rLXBhbmVsYmFyXCIsXCJkaXZcIikubGVuZ3RofSkuYWRkQ2xhc3MoXCJrLWdyb3VwIGstcGFuZWxcIikuYXR0cihcInJvbGVcIixcImdyb3VwXCIpLHQucGFyZW50KCkuYXR0cihxLCExKS5ub3QoXCIuXCIrSSkuY2hpbGRyZW4oXCJ1bFwiKS5hdHRyKCQsITApLmhpZGUoKSxyPW8uZWxlbWVudC5hZGQodCkuY2hpbGRyZW4oKSxvLl91cGRhdGVJdGVtc0NsYXNzZXMociksbihyKSxpKHIpfSxfdXBkYXRlSXRlbXNDbGFzc2VzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmxlbmd0aCxuPTA7dD5uO24rKyl0aGlzLl91cGRhdGVJdGVtQ2xhc3NlcyhlW25dLG4pfSxfdXBkYXRlSXRlbUNsYXNzZXM6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGE9dGhpcy5fc2VsZWN0ZWQscz10aGlzLm9wdGlvbnMuY29udGVudFVybHMsbD1zJiZzW25dLGM9dGhpcy5lbGVtZW50WzBdO3Q9ZSh0KS5hZGRDbGFzcyhcImstaXRlbVwiKS5hdHRyKFwicm9sZVwiLFwibWVudWl0ZW1cIiksci5zdXBwb3J0LmJyb3dzZXIubXNpZSYmdC5jc3MoXCJsaXN0LXN0eWxlLXBvc2l0aW9uXCIsXCJpbnNpZGVcIikuY3NzKFwibGlzdC1zdHlsZS1wb3NpdGlvblwiLFwiXCIpLHQuY2hpbGRyZW4ocCkuYWRkQ2xhc3Moayksbz10LmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhtKSxvWzBdJiYoby5hdHRyKFwiaHJlZlwiLGwpLG8uY2hpbGRyZW4ocCkuYWRkQ2xhc3MoaykpLHQuZmlsdGVyKFwiOm5vdChbZGlzYWJsZWRdKTpub3QoW2NsYXNzKj1rLXN0YXRlXSlcIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWRlZmF1bHRcIiksdC5maWx0ZXIoXCJsaVtkaXNhYmxlZF1cIikuYWRkQ2xhc3MoXCJrLXN0YXRlLWRpc2FibGVkXCIpLmF0dHIoRywhMCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpLHQuY2hpbGRyZW4oXCJkaXZcIikuYWRkQ2xhc3MoVCkuYXR0cihcInJvbGVcIixcInJlZ2lvblwiKS5hdHRyKCQsITApLmhpZGUoKS5wYXJlbnQoKS5hdHRyKHEsITEpLG89dC5jaGlsZHJlbihPKSxvWzBdJiYoYSYmYS5yZW1vdmVBdHRyKFkpLmNoaWxkcmVuKE8pLnJlbW92ZUNsYXNzKEwpLG8uYWRkQ2xhc3MoTCksdGhpcy5fc2VsZWN0ZWQ9dC5hdHRyKFksITApKSx0LmNoaWxkcmVuKHYpWzBdfHwoaT1cIjxzcGFuIGNsYXNzPSdcIittK1wiJy8+XCIscyYmc1tuXSYmdFswXS5wYXJlbnROb2RlPT1jJiYoaT0nPGEgY2xhc3M9XCJrLWxpbmsgay1oZWFkZXJcIiBocmVmPVwiJytzW25dKydcIi8+JyksdC5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiEodGhpcy5ub2RlTmFtZS5tYXRjaCh1KXx8Mz09dGhpcy5ub2RlVHlwZSYmIWUudHJpbSh0aGlzLm5vZGVWYWx1ZSkpfSkud3JhcEFsbChpKSksdC5wYXJlbnQoXCIuay1wYW5lbGJhclwiKVswXSYmdC5jaGlsZHJlbih2KS5hZGRDbGFzcyhcImstaGVhZGVyXCIpfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbD10aGlzLGM9bC5lbGVtZW50O2lmKCFlLnBhcmVudHMoXCJsaS5cIitCKS5sZW5ndGgmJmUuY2xvc2VzdChcIi5rLXdpZGdldFwiKVswXT09Y1swXSl7aWYobz1lLmNsb3Nlc3QodiksYT1vLmNsb3Nlc3QoeSksbC5fdXBkYXRlU2VsZWN0ZWQobyksbj1hLmZpbmQoeikuYWRkKGEuZmluZChGKSksaT1vLmF0dHIoZikscj1pJiYoXCIjXCI9PWkuY2hhckF0KGkubGVuZ3RoLTEpfHwtMSE9aS5pbmRleE9mKFwiI1wiK2wuZWxlbWVudFswXS5pZCtcIi1cIikpLHQ9ISghciYmIW4ubGVuZ3RoKSxuLmRhdGEoXCJhbmltYXRpbmdcIikpcmV0dXJuIHQ7aWYobC5fdHJpZ2dlckV2ZW50KFMsYSkmJih0PSEwKSx0IT09ITEpcmV0dXJuIGwub3B0aW9ucy5leHBhbmRNb2RlPT1YJiZsLl9jb2xsYXBzZUFsbEV4cGFuZGVkKGEpP3Q6KG4ubGVuZ3RoJiYocz1uLmlzKEspLGwuX3RyaWdnZXJFdmVudChzP0E6QyxhKXx8KHQ9bC5fdG9nZ2xlSXRlbShhLHMpKSksdCl9fSxfdG9nZ2xlSXRlbTpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbz10aGlzLGE9ZS5maW5kKHopLHM9ZS5maW5kKHYpLGw9cy5hdHRyKGYpO3JldHVybiBhLmxlbmd0aD8odGhpcy5fdG9nZ2xlR3JvdXAoYSxuKSxpPSEwKToocj1lLmNoaWxkcmVuKFwiLlwiK1QpLHIubGVuZ3RoJiYoaT0hMCxyLmlzKFEpJiZsIT09dD9vLl9hamF4UmVxdWVzdChlLHIsbik6by5fdG9nZ2xlR3JvdXAocixuKSkpLGl9LF90b2dnbGVHcm91cDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMuYW5pbWF0aW9uLHI9aS5leHBhbmQsbz1zKHt9LGkuY29sbGFwc2UpLGE9byYmXCJlZmZlY3RzXCJpbiBvO2UuaXMoSyk9PXQmJihlLnBhcmVudCgpLmF0dHIocSwhdCkuYXR0cigkLHQpLnRvZ2dsZUNsYXNzKEksIXQpLmZpbmQoXCI+IC5rLWxpbmsgPiAuay1pY29uXCIpLnRvZ2dsZUNsYXNzKFwiay1pLWFycm93LW5cIiwhdCkudG9nZ2xlQ2xhc3MoXCJrLXBhbmVsYmFyLWNvbGxhcHNlXCIsIXQpLnRvZ2dsZUNsYXNzKFwiay1pLWFycm93LXNcIix0KS50b2dnbGVDbGFzcyhcImstcGFuZWxiYXItZXhwYW5kXCIsdCkscj10P3MoYT9vOnMoe3JldmVyc2U6ITB9LHIpLHtoaWRlOiEwfSk6cyh7Y29tcGxldGU6ZnVuY3Rpb24oZSl7bi5fdHJpZ2dlckV2ZW50KEQsZS5jbG9zZXN0KHkpKX19LHIpLGUua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUocikpfSxfY29sbGFwc2VBbGxFeHBhbmRlZDpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj0hMSxvPXQuZmluZCh6KS5hZGQodC5maW5kKEYpKTtyZXR1cm4gby5pcyhLKSYmKHI9ITApLG8uaXMoSyl8fDA9PT1vLmxlbmd0aHx8KG49dC5zaWJsaW5ncygpLG4uZmluZCh6KS5hZGQobi5maW5kKEYpKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5pcyhLKX0pLmVhY2goZnVuY3Rpb24odCxuKXtuPWUobikscj1pLl90cmlnZ2VyRXZlbnQoQSxuLmNsb3Nlc3QoeSkpLHJ8fGkuX3RvZ2dsZUdyb3VwKG4sITApfSkpLHJ9LF9hamF4UmVxdWVzdDpmdW5jdGlvbih0LG4saSl7dmFyIHI9dGhpcyxvPXQuZmluZChcIi5rLXBhbmVsYmFyLWNvbGxhcHNlLCAuay1wYW5lbGJhci1leHBhbmRcIiksYT10LmZpbmQodikscz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5hZGRDbGFzcyhcImstbG9hZGluZ1wiKX0sMTAwKSxsPXt9LGM9YS5hdHRyKGYpO2UuYWpheCh7dHlwZTpcIkdFVFwiLGNhY2hlOiExLHVybDpjLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6bCxlcnJvcjpmdW5jdGlvbihlLHQpe28ucmVtb3ZlQ2xhc3MoXCJrLWxvYWRpbmdcIiksci50cmlnZ2VyKF8se3hocjplLHN0YXR1czp0fSkmJnRoaXMuY29tcGxldGUoKX0sY29tcGxldGU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocyksby5yZW1vdmVDbGFzcyhcImstbG9hZGluZ1wiKX0sc3VjY2VzczpmdW5jdGlvbihlKXtmdW5jdGlvbiBvKCl7cmV0dXJue2VsZW1lbnRzOm4uZ2V0KCl9fXRyeXtyLmFuZ3VsYXIoXCJjbGVhbnVwXCIsbyksbi5odG1sKGUpLHIuYW5ndWxhcihcImNvbXBpbGVcIixvKX1jYXRjaChhKXt2YXIgcz13aW5kb3cuY29uc29sZTtzJiZzLmVycm9yJiZzLmVycm9yKGEubmFtZStcIjogXCIrYS5tZXNzYWdlK1wiIGluIFwiK2MpLHRoaXMuZXJyb3IodGhpcy54aHIsXCJlcnJvclwiKX1yLl90b2dnbGVHcm91cChuLGkpLHIudHJpZ2dlcihQLHtpdGVtOnRbMF0sY29udGVudEVsZW1lbnQ6blswXX0pfX0pfSxfdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gbi50cmlnZ2VyKGUse2l0ZW06dFswXX0pfSxfdXBkYXRlU2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPWUucGFyZW50KHkpLHI9dC5fc2VsZWN0ZWQ7ciYmci5yZW1vdmVBdHRyKFkpLHQuX3NlbGVjdGVkPWkuYXR0cihZLCEwKSxuLmZpbmQoVykucmVtb3ZlQ2xhc3MoTCksbi5maW5kKFwiPiAuXCIrSCtcIiwgLmstcGFuZWwgPiAuXCIrSCkucmVtb3ZlQ2xhc3MoSCksZS5hZGRDbGFzcyhMKSxlLnBhcmVudHNVbnRpbChuLHkpLmZpbHRlcihcIjpoYXMoLmstaGVhZGVyKVwiKS5hZGRDbGFzcyhIKSx0Ll9jdXJyZW50KGlbMF0/aTpudWxsKX0sX2FuaW1hdGlvbnM6ZnVuY3Rpb24oZSl7ZSYmXCJhbmltYXRpb25cImluIGUmJiFlLmFuaW1hdGlvbiYmKGUuYW5pbWF0aW9uPXtleHBhbmQ6e2VmZmVjdHM6e319LGNvbGxhcHNlOntoaWRlOiEwLGVmZmVjdHM6e319fSl9fSk7cyhldCx7cmVuZGVySXRlbTpmdW5jdGlvbihlKXtlPXMoe3BhbmVsQmFyOnt9LGdyb3VwOnt9fSxlKTt2YXIgdD1KLmVtcHR5LG49ZS5pdGVtO3JldHVybiBKLml0ZW0ocyhlLHtpbWFnZTpuLmltYWdlVXJsP0ouaW1hZ2U6dCxzcHJpdGU6bi5zcHJpdGVDc3NDbGFzcz9KLnNwcml0ZTp0LGl0ZW1XcmFwcGVyOkouaXRlbVdyYXBwZXIscmVuZGVyQ29udGVudDpldC5yZW5kZXJDb250ZW50LGFycm93Om4uaXRlbXN8fG4uY29udGVudHx8bi5jb250ZW50VXJsP0ouYXJyb3c6dCxzdWJHcm91cDpldC5yZW5kZXJHcm91cH0sWikpfSxyZW5kZXJHcm91cDpmdW5jdGlvbihlKXtyZXR1cm4gSi5ncm91cChzKHtyZW5kZXJJdGVtczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9XCJcIixuPTAsaT1lLml0ZW1zLHI9aT9pLmxlbmd0aDowLG89cyh7bGVuZ3RoOnJ9LGUuZ3JvdXApO3I+bjtuKyspdCs9ZXQucmVuZGVySXRlbShzKGUse2dyb3VwOm8saXRlbTpzKHtpbmRleDpufSxpW25dKX0pKTtyZXR1cm4gdH19LGUsWikpfSxyZW5kZXJDb250ZW50OmZ1bmN0aW9uKGUpe3JldHVybiBKLmNvbnRlbnQocyhlLFopKX19KSxyLnVpLnBsdWdpbihldCl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmtlbmRvLGk9bi51aSxyPWkuV2lkZ2V0LG89XCJob3Jpem9udGFsXCIsYT1cInZlcnRpY2FsXCIscz0wLGw9MTAwLGM9MCxkPTUsdT1cImstcHJvZ3Jlc3NiYXJcIixoPVwiay1wcm9ncmVzc2Jhci1yZXZlcnNlXCIscD1cImstcHJvZ3Jlc3NiYXItaW5kZXRlcm1pbmF0ZVwiLGY9XCJrLWNvbXBsZXRlXCIsZz1cImstc3RhdGUtc2VsZWN0ZWRcIixtPVwiay1wcm9ncmVzcy1zdGF0dXNcIix2PVwiay1zdGF0ZS1zZWxlY3RlZFwiLF89XCJrLXN0YXRlLWRlZmF1bHRcIix5PVwiay1zdGF0ZS1kaXNhYmxlZFwiLHc9e1ZBTFVFOlwidmFsdWVcIixQRVJDRU5UOlwicGVyY2VudFwiLENIVU5LOlwiY2h1bmtcIn0sYj1cImNoYW5nZVwiLGs9XCJjb21wbGV0ZVwiLHg9XCJib29sZWFuXCIsQz1NYXRoLFM9ZS5leHRlbmQsVD1lLnByb3h5LEQ9MTAwLEE9NDAwLEU9MyxNPXtwcm9ncmVzc1N0YXR1czpcIjxzcGFuIGNsYXNzPSdrLXByb2dyZXNzLXN0YXR1cy13cmFwJz48c3BhbiBjbGFzcz0nay1wcm9ncmVzcy1zdGF0dXMnPjwvc3Bhbj48L3NwYW4+XCJ9LFA9ci5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3IuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0PW4ub3B0aW9ucyxuLl9wcm9ncmVzc1Byb3BlcnR5PXQub3JpZW50YXRpb249PT1vP1wid2lkdGhcIjpcImhlaWdodFwiLG4uX2ZpZWxkcygpLHQudmFsdWU9bi5fdmFsaWRhdGVWYWx1ZSh0LnZhbHVlKSxuLl92YWxpZGF0ZVR5cGUodC50eXBlKSxuLl93cmFwcGVyKCksbi5fcHJvZ3Jlc3NBbmltYXRpb24oKSx0LnZhbHVlIT09dC5taW4mJnQudmFsdWUhPT0hMSYmbi5fdXBkYXRlUHJvZ3Jlc3MoKX0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3IuZm4uc2V0T3B0aW9ucy5jYWxsKHQsZSksZS5oYXNPd25Qcm9wZXJ0eShcInJldmVyc2VcIikmJnQud3JhcHBlci50b2dnbGVDbGFzcyhcImstcHJvZ3Jlc3NiYXItcmV2ZXJzZVwiLGUucmV2ZXJzZSksZS5oYXNPd25Qcm9wZXJ0eShcImVuYWJsZVwiKSYmdC5lbmFibGUoZS5lbmFibGUpLHQuX3Byb2dyZXNzQW5pbWF0aW9uKCksdC5fdmFsaWRhdGVWYWx1ZSgpLHQuX3VwZGF0ZVByb2dyZXNzKCl9LGV2ZW50czpbYixrXSxvcHRpb25zOntuYW1lOlwiUHJvZ3Jlc3NCYXJcIixvcmllbnRhdGlvbjpvLHJldmVyc2U6ITEsbWluOnMsbWF4OmwsdmFsdWU6YyxlbmFibGU6ITAsdHlwZTp3LlZBTFVFLGNodW5rQ291bnQ6ZCxzaG93U3RhdHVzOiEwLGFuaW1hdGlvbjp7fX0sX2ZpZWxkczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5faXNTdGFydGVkPSExLHQucHJvZ3Jlc3NXcmFwcGVyPXQucHJvZ3Jlc3NTdGF0dXM9ZSgpfSxfdmFsaWRhdGVUeXBlOmZ1bmN0aW9uKGkpe3ZhciByPSExO2lmKGUuZWFjaCh3LGZ1bmN0aW9uKGUsbil7cmV0dXJuIG49PT1pPyhyPSEwLCExKTp0fSksIXIpdGhyb3cgRXJyb3Iobi5mb3JtYXQoXCJJbnZhbGlkIFByb2dyZXNzQmFyIHR5cGUgJ3swfSdcIixpKSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLG49dC53cmFwcGVyPXQuZWxlbWVudCxpPXQub3B0aW9ucyxyPWkub3JpZW50YXRpb247bi5hZGRDbGFzcyhcImstd2lkZ2V0IFwiK3UpLG4uYWRkQ2xhc3ModStcIi1cIisocj09PW8/bzphKSksaS5lbmFibGU9PT0hMSYmbi5hZGRDbGFzcyh5KSxpLnJldmVyc2UmJm4uYWRkQ2xhc3MoaCksaS52YWx1ZT09PSExJiZuLmFkZENsYXNzKHApLGkudHlwZT09PXcuQ0hVTks/dC5fYWRkQ2h1bmtQcm9ncmVzc1dyYXBwZXIoKTppLnNob3dTdGF0dXMmJih0LnByb2dyZXNzU3RhdHVzPXQud3JhcHBlci5wcmVwZW5kKE0ucHJvZ3Jlc3NTdGF0dXMpLmZpbmQoXCIuXCIrbSksZT1pLnZhbHVlIT09ITE/aS52YWx1ZTppLm1pbix0LnByb2dyZXNzU3RhdHVzLnRleHQoaS50eXBlPT09dy5WQUxVRT9lOnQuX2NhbGN1bGF0ZVBlcmNlbnRhZ2UoZSkrXCIlXCIpKX0sdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3ZhbHVlKGUpfSxfdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5vcHRpb25zO3JldHVybiBlPT09dD9yLnZhbHVlOih0eXBlb2YgZSE9PXg/KGU9aS5fcm91bmRWYWx1ZShlKSxpc05hTihlKXx8KG49aS5fdmFsaWRhdGVWYWx1ZShlKSxuIT09ci52YWx1ZSYmKGkud3JhcHBlci5yZW1vdmVDbGFzcyhwKSxyLnZhbHVlPW4saS5faXNTdGFydGVkPSEwLGkuX3VwZGF0ZVByb2dyZXNzKCkpKSk6ZXx8KGkud3JhcHBlci5hZGRDbGFzcyhwKSxyLnZhbHVlPSExKSx0KX0sX3JvdW5kVmFsdWU6ZnVuY3Rpb24oZSl7ZT1wYXJzZUZsb2F0KGUpO3ZhciB0PUMucG93KDEwLEUpO3JldHVybiBDLmZsb29yKGUqdCkvdH0sX3ZhbGlkYXRlVmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucztpZihlIT09ITEpe2lmKG4ubWluPj1lfHxlPT09ITApcmV0dXJuIG4ubWluO2lmKGU+PW4ubWF4KXJldHVybiBuLm1heH1lbHNlIGlmKGU9PT0hMSlyZXR1cm4hMTtyZXR1cm4gaXNOYU4odC5fcm91bmRWYWx1ZShlKSk/bi5taW46ZX0sX3VwZGF0ZVByb2dyZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPWUuX2NhbGN1bGF0ZVBlcmNlbnRhZ2UoKTt0LnR5cGU9PT13LkNIVU5LPyhlLl91cGRhdGVDaHVua3MobiksZS5fb25Qcm9ncmVzc1VwZGF0ZUFsd2F5cyh0LnZhbHVlKSk6ZS5fdXBkYXRlUHJvZ3Jlc3NXcmFwcGVyKG4pfSxfdXBkYXRlQ2h1bmtzOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPWkuY2h1bmtDb3VudCxzPXBhcnNlSW50KEQvcioxMDAsMTApLzEwMCxsPXBhcnNlSW50KDEwMCplLDEwKS8xMDAsYz1DLmZsb29yKGwvcyk7dD1uLndyYXBwZXIuZmluZChpLm9yaWVudGF0aW9uPT09byYmIWkucmV2ZXJzZXx8aS5vcmllbnRhdGlvbj09PWEmJmkucmV2ZXJzZT9cImxpLmstaXRlbTpsdChcIitjK1wiKVwiOlwibGkuay1pdGVtOmd0KC1cIisoYysxKStcIilcIiksbi53cmFwcGVyLmZpbmQoXCIuXCIrdikucmVtb3ZlQ2xhc3ModikuYWRkQ2xhc3MoXyksdC5yZW1vdmVDbGFzcyhfKS5hZGRDbGFzcyh2KX0sX3VwZGF0ZVByb2dyZXNzV3JhcHBlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5vcHRpb25zLGk9dC53cmFwcGVyLmZpbmQoXCIuXCIrZykscj10Ll9pc1N0YXJ0ZWQ/dC5fYW5pbWF0aW9uLmR1cmF0aW9uOjAsbz17fTswPT09aS5sZW5ndGgmJnQuX2FkZFJlZ3VsYXJQcm9ncmVzc1dyYXBwZXIoKSxvW3QuX3Byb2dyZXNzUHJvcGVydHldPWUrXCIlXCIsdC5wcm9ncmVzc1dyYXBwZXIuYW5pbWF0ZShvLHtkdXJhdGlvbjpyLHN0YXJ0OlQodC5fb25Qcm9ncmVzc0FuaW1hdGVTdGFydCx0KSxwcm9ncmVzczpUKHQuX29uUHJvZ3Jlc3NBbmltYXRlLHQpLGNvbXBsZXRlOlQodC5fb25Qcm9ncmVzc0FuaW1hdGVDb21wbGV0ZSx0LG4udmFsdWUpLGFsd2F5czpUKHQuX29uUHJvZ3Jlc3NVcGRhdGVBbHdheXMsdCxuLnZhbHVlKX0pfSxfb25Qcm9ncmVzc0FuaW1hdGVTdGFydDpmdW5jdGlvbigpe3RoaXMucHJvZ3Jlc3NXcmFwcGVyLnNob3coKX0sX29uUHJvZ3Jlc3NBbmltYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxpPW4ub3B0aW9ucyxyPXBhcnNlRmxvYXQoZS5lbGVtLnN0eWxlW24uX3Byb2dyZXNzUHJvcGVydHldLDEwKTtpLnNob3dTdGF0dXMmJih0PTFlNC9wYXJzZUZsb2F0KG4ucHJvZ3Jlc3NXcmFwcGVyWzBdLnN0eWxlW24uX3Byb2dyZXNzUHJvcGVydHldKSxuLnByb2dyZXNzV3JhcHBlci5maW5kKFwiLmstcHJvZ3Jlc3Mtc3RhdHVzLXdyYXBcIikuY3NzKG4uX3Byb2dyZXNzUHJvcGVydHksdCtcIiVcIikpLGkudHlwZSE9PXcuQ0hVTksmJjk4Pj1yJiZuLnByb2dyZXNzV3JhcHBlci5yZW1vdmVDbGFzcyhmKX0sX29uUHJvZ3Jlc3NBbmltYXRlQ29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPXBhcnNlRmxvYXQodC5wcm9ncmVzc1dyYXBwZXJbMF0uc3R5bGVbdC5fcHJvZ3Jlc3NQcm9wZXJ0eV0pO24udHlwZSE9PXcuQ0hVTksmJmk+OTgmJnQucHJvZ3Jlc3NXcmFwcGVyLmFkZENsYXNzKGYpLG4uc2hvd1N0YXR1cyYmdC5wcm9ncmVzc1N0YXR1cy50ZXh0KG4udHlwZT09PXcuVkFMVUU/ZTpDLmZsb29yKHQuX2NhbGN1bGF0ZVBlcmNlbnRhZ2UoZSkpK1wiJVwiKSxlPT09bi5taW4mJnQucHJvZ3Jlc3NXcmFwcGVyLmhpZGUoKX0sX29uUHJvZ3Jlc3NVcGRhdGVBbHdheXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9uczt0Ll9pc1N0YXJ0ZWQmJnQudHJpZ2dlcihiLHt2YWx1ZTplfSksZT09PW4ubWF4JiZ0Ll9pc1N0YXJ0ZWQmJnQudHJpZ2dlcihrLHt2YWx1ZTpuLm1heH0pfSxlbmFibGU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucztpLmVuYWJsZT10PT09ZT8hMDplLG4ud3JhcHBlci50b2dnbGVDbGFzcyh5LCFpLmVuYWJsZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3IuZm4uZGVzdHJveS5jYWxsKGUpfSxfYWRkQ2h1bmtQcm9ncmVzc1dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Lm9wdGlvbnMsaT10LndyYXBwZXIscj1EL24uY2h1bmtDb3VudCxvPVwiXCI7Zm9yKDE+PW4uY2h1bmtDb3VudCYmKG4uY2h1bmtDb3VudD1kKSxvKz1cIjx1bCBjbGFzcz0nay1yZXNldCc+XCIsZT1uLmNodW5rQ291bnQtMTtlPj0wO2UtLSlvKz1cIjxsaSBjbGFzcz0nay1pdGVtIGstc3RhdGUtZGVmYXVsdCc+PC9saT5cIjtvKz1cIjwvdWw+XCIsaS5hcHBlbmQobykuZmluZChcIi5rLWl0ZW1cIikuY3NzKHQuX3Byb2dyZXNzUHJvcGVydHkscitcIiVcIikuZmlyc3QoKS5hZGRDbGFzcyhcImstZmlyc3RcIikuZW5kKCkubGFzdCgpLmFkZENsYXNzKFwiay1sYXN0XCIpLHQuX25vcm1hbGl6ZUNodW5rU2l6ZSgpfSxfbm9ybWFsaXplQ2h1bmtTaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPWUud3JhcHBlci5maW5kKFwiLmstaXRlbTpsYXN0XCIpLGk9cGFyc2VGbG9hdChuWzBdLnN0eWxlW2UuX3Byb2dyZXNzUHJvcGVydHldKSxyPUQtdC5jaHVua0NvdW50Kmk7cj4wJiZuLmNzcyhlLl9wcm9ncmVzc1Byb3BlcnR5LGkrcitcIiVcIil9LF9hZGRSZWd1bGFyUHJvZ3Jlc3NXcmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LnByb2dyZXNzV3JhcHBlcj1lKFwiPGRpdiBjbGFzcz0nXCIrZytcIic+PC9kaXY+XCIpLmFwcGVuZFRvKHQud3JhcHBlciksdC5vcHRpb25zLnNob3dTdGF0dXMmJih0LnByb2dyZXNzV3JhcHBlci5hcHBlbmQoTS5wcm9ncmVzc1N0YXR1cyksdC5wcm9ncmVzc1N0YXR1cz10LndyYXBwZXIuZmluZChcIi5cIittKSl9LF9jYWxjdWxhdGVDaHVua1NpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLmNodW5rQ291bnQsbj1lLndyYXBwZXIuZmluZChcInVsLmstcmVzZXRcIik7cmV0dXJuKHBhcnNlSW50KG4uY3NzKGUuX3Byb2dyZXNzUHJvcGVydHkpLDEwKS0odC0xKSkvdH0sX2NhbGN1bGF0ZVBlcmNlbnRhZ2U6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4ub3B0aW9ucyxyPWUhPT10P2U6aS52YWx1ZSxvPWkubWluLGE9aS5tYXg7cmV0dXJuIG4uX29uZVBlcmNlbnQ9Qy5hYnMoKGEtbykvMTAwKSxDLmFicygoci1vKS9uLl9vbmVQZXJjZW50KX0sX3Byb2dyZXNzQW5pbWF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUub3B0aW9ucyxuPXQuYW5pbWF0aW9uO2UuX2FuaW1hdGlvbj1uPT09ITE/e2R1cmF0aW9uOjB9OlMoe2R1cmF0aW9uOkF9LHQuYW5pbWF0aW9uKX19KTtuLnVpLnBsdWdpbihQKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKHQpe3QuY2hpbGRyZW4oZykuYWRkQ2xhc3MoQyksdC5jaGlsZHJlbihcImFcIikuYWRkQ2xhc3MoeSkuY2hpbGRyZW4oZykuYWRkQ2xhc3MoQyksdC5maWx0ZXIoXCI6bm90KFtkaXNhYmxlZF0pOm5vdChbY2xhc3MqPWstc3RhdGUtZGlzYWJsZWRdKVwiKS5hZGRDbGFzcyhGKSx0LmZpbHRlcihcImxpW2Rpc2FibGVkXVwiKS5hZGRDbGFzcyh6KS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIiksdC5maWx0ZXIoXCI6bm90KFtjbGFzcyo9ay1zdGF0ZV0pXCIpLmNoaWxkcmVuKFwiYVwiKS5maWx0ZXIoXCI6Zm9jdXNcIikucGFyZW50KCkuYWRkQ2xhc3MoUitcIiBcIitPKSx0LmF0dHIoXCJyb2xlXCIsXCJ0YWJcIiksdC5maWx0ZXIoXCIuXCIrUikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0LmNoaWxkcmVuKFwiLlwiK3kpLmxlbmd0aHx8dC5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiEodGhpcy5ub2RlTmFtZS5tYXRjaChwKXx8Mz09dGhpcy5ub2RlVHlwZSYmIWModGhpcy5ub2RlVmFsdWUpKX0pLndyYXBBbGwoXCI8YSBjbGFzcz0nXCIreStcIicvPlwiKX0pfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5jaGlsZHJlbihcIi5rLWl0ZW1cIik7dC5maWx0ZXIoXCIuay1maXJzdDpub3QoOmZpcnN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyhTKSx0LmZpbHRlcihcIi5rLWxhc3Q6bm90KDpsYXN0LWNoaWxkKVwiKS5yZW1vdmVDbGFzcyh3KSx0LmZpbHRlcihcIjpmaXJzdC1jaGlsZFwiKS5hZGRDbGFzcyhTKSx0LmZpbHRlcihcIjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKHcpfXZhciByPXdpbmRvdy5rZW5kbyxvPXIudWksYT1yLmtleXMscz1lLm1hcCxsPWUuZWFjaCxjPWUudHJpbSxkPWUuZXh0ZW5kLHU9ci50ZW1wbGF0ZSxoPW8uV2lkZ2V0LHA9L14oYXxkaXYpJC9pLGY9XCIua2VuZG9UYWJTdHJpcFwiLGc9XCJpbWdcIixtPVwiaHJlZlwiLHY9XCJwcmV2XCIsXz1cInNob3dcIix5PVwiay1saW5rXCIsdz1cImstbGFzdFwiLGI9XCJjbGlja1wiLGs9XCJlcnJvclwiLHg9XCI6ZW1wdHlcIixDPVwiay1pbWFnZVwiLFM9XCJrLWZpcnN0XCIsVD1cInNlbGVjdFwiLEQ9XCJhY3RpdmF0ZVwiLEE9XCJrLWNvbnRlbnRcIixFPVwiY29udGVudFVybFwiLE09XCJtb3VzZWVudGVyXCIsUD1cIm1vdXNlbGVhdmVcIixJPVwiY29udGVudExvYWRcIix6PVwiay1zdGF0ZS1kaXNhYmxlZFwiLEY9XCJrLXN0YXRlLWRlZmF1bHRcIixSPVwiay1zdGF0ZS1hY3RpdmVcIixCPVwiay1zdGF0ZS1mb2N1c2VkXCIsTD1cImstc3RhdGUtaG92ZXJcIixPPVwiay10YWItb24tdG9wXCIsSD1cIi5rLWl0ZW06bm90KC5cIit6K1wiKVwiLE49XCIuay10YWJzdHJpcC1pdGVtcyA+IFwiK0grXCI6bm90KC5cIitSK1wiKVwiLFY9e2NvbnRlbnQ6dShcIjxkaXYgY2xhc3M9J2stY29udGVudCcjPSBjb250ZW50QXR0cmlidXRlcyhkYXRhKSAjIHJvbGU9J3RhYnBhbmVsJz4jPSBjb250ZW50KGl0ZW0pICM8L2Rpdj5cIiksaXRlbVdyYXBwZXI6dShcIjwjPSB0YWcoaXRlbSkgIyBjbGFzcz0nay1saW5rJyM9IGNvbnRlbnRVcmwoaXRlbSkgIyM9IHRleHRBdHRyaWJ1dGVzKGl0ZW0pICM+Iz0gaW1hZ2UoaXRlbSkgIyM9IHNwcml0ZShpdGVtKSAjIz0gdGV4dChpdGVtKSAjPC8jPSB0YWcoaXRlbSkgIz5cIiksaXRlbTp1KFwiPGxpIGNsYXNzPScjPSB3cmFwcGVyQ3NzQ2xhc3MoZ3JvdXAsIGl0ZW0pICMnIHJvbGU9J3RhYicgIz1pdGVtLmFjdGl2ZSA/IFxcXCJhcmlhLXNlbGVjdGVkPSd0cnVlJ1xcXCIgOiAnJyM+Iz0gaXRlbVdyYXBwZXIoZGF0YSkgIzwvbGk+XCIpLGltYWdlOnUoXCI8aW1nIGNsYXNzPSdrLWltYWdlJyBhbHQ9Jycgc3JjPScjPSBpbWFnZVVybCAjJyAvPlwiKSxzcHJpdGU6dShcIjxzcGFuIGNsYXNzPSdrLXNwcml0ZSAjPSBzcHJpdGVDc3NDbGFzcyAjJz48L3NwYW4+XCIpLGVtcHR5OnUoXCJcIil9LFU9e3dyYXBwZXJDc3NDbGFzczpmdW5jdGlvbihlLHQpe3ZhciBuPVwiay1pdGVtXCIsaT10LmluZGV4O3JldHVybiBuKz10LmVuYWJsZWQ9PT0hMT9cIiBrLXN0YXRlLWRpc2FibGVkXCI6XCIgay1zdGF0ZS1kZWZhdWx0XCIsMD09PWkmJihuKz1cIiBrLWZpcnN0XCIpLGk9PWUubGVuZ3RoLTEmJihuKz1cIiBrLWxhc3RcIiksbn0sdGV4dEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudXJsP1wiIGhyZWY9J1wiK2UudXJsK1wiJ1wiOlwiXCJ9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5jb2RlZD09PSExP2UudGV4dDpyLmh0bWxFbmNvZGUoZS50ZXh0KX0sdGFnOmZ1bmN0aW9uKGUpe3JldHVybiBlLnVybD9cImFcIjpcInNwYW5cIn0sY29udGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWN0aXZlIT09ITA/XCIgc3R5bGU9J2Rpc3BsYXk6bm9uZScgYXJpYS1oaWRkZW49J3RydWUnIGFyaWEtZXhwYW5kZWQ9J2ZhbHNlJ1wiOlwiXCJ9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudD9lLmNvbnRlbnQ6ZS5jb250ZW50VXJsP1wiXCI6XCImbmJzcDtcIn0sY29udGVudFVybDpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50VXJsP3IuYXR0cihcImNvbnRlbnQtdXJsXCIpKyc9XCInK2UuY29udGVudFVybCsnXCInOlwiXCJ9fSxXPWguZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGksbyxhPXRoaXM7aC5mbi5pbml0LmNhbGwoYSx0LG4pLGEuX2FuaW1hdGlvbnMoYS5vcHRpb25zKSxuPWEub3B0aW9ucyxhLl93cmFwcGVyKCksYS5faXNSdGw9ci5zdXBwb3J0LmlzUnRsKGEud3JhcHBlciksYS5fdGFiaW5kZXgoKSxhLl91cGRhdGVDbGFzc2VzKCksYS5fZGF0YVNvdXJjZSgpLG4uZGF0YVNvdXJjZSYmYS5kYXRhU291cmNlLmZldGNoKCksYS5vcHRpb25zLmNvbnRlbnRVcmxzJiZhLndyYXBwZXIuZmluZChcIi5rLXRhYnN0cmlwLWl0ZW1zID4gLmstaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKHQsbil7ZShuKS5maW5kKFwiPi5cIit5KS5kYXRhKEUsYS5vcHRpb25zLmNvbnRlbnRVcmxzW3RdKX0pLGEud3JhcHBlci5vbihNK2YrXCIgXCIrUCtmLE4sYS5fdG9nZ2xlSG92ZXIpLm9uKFwiZm9jdXNcIitmLGUucHJveHkoYS5fYWN0aXZlLGEpKS5vbihcImJsdXJcIitmLGZ1bmN0aW9uKCl7YS5fY3VycmVudChudWxsKX0pLGEuX2tleURvd25Qcm94eT1lLnByb3h5KGEuX2tleWRvd24sYSksbi5uYXZpZ2F0YWJsZSYmYS53cmFwcGVyLm9uKFwia2V5ZG93blwiK2YsYS5fa2V5RG93blByb3h5KSxhLndyYXBwZXIuY2hpbGRyZW4oXCIuay10YWJzdHJpcC1pdGVtc1wiKS5vbihiK2YsXCIuay1zdGF0ZS1kaXNhYmxlZCAuay1saW5rXCIsITEpLm9uKGIrZixcIiA+IFwiK0gsZnVuY3Rpb24odCl7dmFyIG4saT1hLndyYXBwZXJbMF07aWYoaSE9PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpaWYobj1yLnN1cHBvcnQuYnJvd3Nlci5tc2llKXRyeXtpLnNldEFjdGl2ZSgpfWNhdGNoKG8pe2kuZm9jdXMoKX1lbHNlIGkuZm9jdXMoKTthLl9jbGljayhlKHQuY3VycmVudFRhcmdldCkpJiZ0LnByZXZlbnREZWZhdWx0KCl9KSxpPWEudGFiR3JvdXAuY2hpbGRyZW4oXCJsaS5cIitSKSxvPWEuY29udGVudEhvbGRlcihpLmluZGV4KCkpLGlbMF0mJm8ubGVuZ3RoPjAmJjA9PT1vWzBdLmNoaWxkTm9kZXMubGVuZ3RoJiZhLmFjdGl2YXRlVGFiKGkuZXEoMCkpLGEuZWxlbWVudC5hdHRyKFwicm9sZVwiLFwidGFibGlzdFwiKSxhLmVsZW1lbnRbMF0uaWQmJihhLl9hcmlhSWQ9YS5lbGVtZW50WzBdLmlkK1wiX3RzX2FjdGl2ZVwiKSxyLm5vdGlmeShhKX0sX2FjdGl2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudGFiR3JvdXAuY2hpbGRyZW4oKS5maWx0ZXIoXCIuXCIrUik7ZT1lWzBdP2U6dGhpcy5fZW5kSXRlbShcImZpcnN0XCIpLGVbMF0mJnRoaXMuX2N1cnJlbnQoZSl9LF9lbmRJdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRhYkdyb3VwLmNoaWxkcmVuKEgpW2VdKCl9LF9pdGVtOmZ1bmN0aW9uKGUsdCl7dmFyIG47cmV0dXJuIG49dD09PXY/XCJsYXN0XCI6XCJmaXJzdFwiLGU/KGU9ZVt0XSgpLGVbMF18fChlPXRoaXMuX2VuZEl0ZW0obikpLGUuaGFzQ2xhc3MoeikmJihlPXRoaXMuX2l0ZW0oZSx0KSksZSk6dGhpcy5fZW5kSXRlbShuKX0sX2N1cnJlbnQ6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPW4uX2ZvY3VzZWQscj1uLl9hcmlhSWQ7cmV0dXJuIGU9PT10P2k6KGkmJihpWzBdLmlkPT09ciYmaS5yZW1vdmVBdHRyKFwiaWRcIiksaS5yZW1vdmVDbGFzcyhCKSksZSYmKGUuaGFzQ2xhc3MoUil8fGUuYWRkQ2xhc3MoQiksbi5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikscj1lWzBdLmlkfHxyLHImJihlLmF0dHIoXCJpZFwiLHIpLG4uZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscikpKSxuLl9mb2N1c2VkPWUsdCl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcyxyPWUua2V5Q29kZSxvPWkuX2N1cnJlbnQoKSxzPWkuX2lzUnRsO2lmKGUudGFyZ2V0PT1lLmN1cnJlbnRUYXJnZXQpe2lmKHI9PWEuRE9XTnx8cj09YS5SSUdIVCluPXM/djpcIm5leHRcIjtlbHNlIGlmKHI9PWEuVVB8fHI9PWEuTEVGVCluPXM/XCJuZXh0XCI6djtlbHNlIGlmKHI9PWEuRU5URVJ8fHI9PWEuU1BBQ0VCQVIpaS5fY2xpY2sobyksZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7aWYocj09YS5IT01FKXJldHVybiBpLl9jbGljayhpLl9lbmRJdGVtKFwiZmlyc3RcIikpLGUucHJldmVudERlZmF1bHQoKSx0O2lmKHI9PWEuRU5EKXJldHVybiBpLl9jbGljayhpLl9lbmRJdGVtKFwibGFzdFwiKSksZS5wcmV2ZW50RGVmYXVsdCgpLHR9biYmKGkuX2NsaWNrKGkuX2l0ZW0obyxuKSksZS5wcmV2ZW50RGVmYXVsdCgpKX19LF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmRhdGFTb3VyY2UmJnQuX3JlZnJlc2hIYW5kbGVyP3QuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIix0Ll9yZWZyZXNoSGFuZGxlcik6dC5fcmVmcmVzaEhhbmRsZXI9ZS5wcm94eSh0LnJlZnJlc2gsdCksdC5kYXRhU291cmNlPXIuZGF0YS5EYXRhU291cmNlLmNyZWF0ZSh0Lm9wdGlvbnMuZGF0YVNvdXJjZSkuYmluZChcImNoYW5nZVwiLHQuX3JlZnJlc2hIYW5kbGVyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZT1lLHRoaXMuX2RhdGFTb3VyY2UoKSxlLmZldGNoKCl9LF9hbmltYXRpb25zOmZ1bmN0aW9uKGUpe2UmJlwiYW5pbWF0aW9uXCJpbiBlJiYhZS5hbmltYXRpb24mJihlLmFuaW1hdGlvbj17b3Blbjp7ZWZmZWN0czp7fX0sY2xvc2U6e2VmZmVjdHM6e319fSl9LHJlZnJlc2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLG8sYT10aGlzLHM9YS5vcHRpb25zLGw9ci5nZXR0ZXIocy5kYXRhVGV4dEZpZWxkKSxjPXIuZ2V0dGVyKHMuZGF0YUNvbnRlbnRGaWVsZCksZD1yLmdldHRlcihzLmRhdGFDb250ZW50VXJsRmllbGQpLHU9ci5nZXR0ZXIocy5kYXRhSW1hZ2VVcmxGaWVsZCksaD1yLmdldHRlcihzLmRhdGFVcmxGaWVsZCkscD1yLmdldHRlcihzLmRhdGFTcHJpdGVDc3NDbGFzcyksZj1bXSxnPWEuZGF0YVNvdXJjZS52aWV3KCk7Zm9yKGU9ZXx8e30saT1lLmFjdGlvbixpJiYoZz1lLml0ZW1zKSx0PTAsbz1nLmxlbmd0aDtvPnQ7dCsrKW49e3RleHQ6bChnW3RdKX0scy5kYXRhQ29udGVudEZpZWxkJiYobi5jb250ZW50PWMoZ1t0XSkpLHMuZGF0YUNvbnRlbnRVcmxGaWVsZCYmKG4uY29udGVudFVybD1kKGdbdF0pKSxzLmRhdGFVcmxGaWVsZCYmKG4udXJsPWgoZ1t0XSkpLHMuZGF0YUltYWdlVXJsRmllbGQmJihuLmltYWdlVXJsPXUoZ1t0XSkpLHMuZGF0YVNwcml0ZUNzc0NsYXNzJiYobi5zcHJpdGVDc3NDbGFzcz1wKGdbdF0pKSxmW3RdPW47aWYoXCJhZGRcIj09ZS5hY3Rpb24pZS5pbmRleDxhLnRhYkdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoP2EuaW5zZXJ0QmVmb3JlKGYsYS50YWJHcm91cC5jaGlsZHJlbigpLmVxKGUuaW5kZXgpKTphLmFwcGVuZChmKTtlbHNlIGlmKFwicmVtb3ZlXCI9PWUuYWN0aW9uKWZvcih0PTA7Zy5sZW5ndGg+dDt0KyspYS5yZW1vdmUoZS5pbmRleCk7ZWxzZVwiaXRlbWNoYW5nZVwiPT1lLmFjdGlvbj8odD1hLmRhdGFTb3VyY2UudmlldygpLmluZGV4T2YoZ1swXSksZS5maWVsZD09PXMuZGF0YVRleHRGaWVsZCYmYS50YWJHcm91cC5jaGlsZHJlbigpLmVxKHQpLmZpbmQoXCIuay1saW5rXCIpLnRleHQoZ1swXS5nZXQoZS5maWVsZCkpKTooYS50cmlnZ2VyKFwiZGF0YUJpbmRpbmdcIiksYS5yZW1vdmUoXCJsaVwiKSxhLmFwcGVuZChmKSxhLnRyaWdnZXIoXCJkYXRhQm91bmRcIikpfSx2YWx1ZTpmdW5jdGlvbihuKXt2YXIgaT10aGlzO3JldHVybiBuPT09dD9pLnNlbGVjdCgpLnRleHQoKToobiE9aS52YWx1ZSgpJiZpLnRhYkdyb3VwLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2UudHJpbShlKHRoaXMpLnRleHQoKSk9PW4mJmkuc2VsZWN0KHRoaXMpfSksdCl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFiR3JvdXBbMF0uY2hpbGRyZW59LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5hbmltYXRpb247dC5fYW5pbWF0aW9ucyhlKSxlLmFuaW1hdGlvbj1kKCEwLG4sZS5hbmltYXRpb24pLGUubmF2aWdhdGFibGU/dC53cmFwcGVyLm9uKFwia2V5ZG93blwiK2YsdC5fa2V5RG93blByb3h5KTp0LndyYXBwZXIub2ZmKFwia2V5ZG93blwiK2YsdC5fa2V5RG93blByb3h5KSxoLmZuLnNldE9wdGlvbnMuY2FsbCh0LGUpfSxldmVudHM6W1QsRCxfLGssSSxcImNoYW5nZVwiLFwiZGF0YUJpbmRpbmdcIixcImRhdGFCb3VuZFwiXSxvcHRpb25zOntuYW1lOlwiVGFiU3RyaXBcIixkYXRhVGV4dEZpZWxkOlwiXCIsZGF0YUNvbnRlbnRGaWVsZDpcIlwiLGRhdGFJbWFnZVVybEZpZWxkOlwiXCIsZGF0YVVybEZpZWxkOlwiXCIsZGF0YVNwcml0ZUNzc0NsYXNzOlwiXCIsZGF0YUNvbnRlbnRVcmxGaWVsZDpcIlwiLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcImV4cGFuZDp2ZXJ0aWNhbCBmYWRlSW5cIixkdXJhdGlvbjoyMDB9LGNsb3NlOntkdXJhdGlvbjoyMDB9fSxjb2xsYXBzaWJsZTohMSxuYXZpZ2F0YWJsZTohMCxjb250ZW50VXJsczohMX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aC5mbi5kZXN0cm95LmNhbGwoZSksZS5fcmVmcmVzaEhhbmRsZXImJmUuZGF0YVNvdXJjZS51bmJpbmQoXCJjaGFuZ2VcIixlLl9yZWZyZXNoSGFuZGxlciksZS53cmFwcGVyLm9mZihmKSxlLndyYXBwZXIuY2hpbGRyZW4oXCIuay10YWJzdHJpcC1pdGVtc1wiKS5vZmYoZiksZS5zY3JvbGxXcmFwLmNoaWxkcmVuKFwiLmstdGFic3RyaXBcIikudW53cmFwKCksci5kZXN0cm95KGUud3JhcHBlcil9LHNlbGVjdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9uLnRhYkdyb3VwLmNoaWxkcmVuKFwibGkuXCIrUik6KGlzTmFOKHQpfHwodD1uLnRhYkdyb3VwLmNoaWxkcmVuKCkuZ2V0KHQpKSx0PW4udGFiR3JvdXAuZmluZCh0KSxlKHQpLmVhY2goZnVuY3Rpb24odCxpKXtpPWUoaSksaS5oYXNDbGFzcyhSKXx8bi50cmlnZ2VyKFQse2l0ZW06aVswXSxjb250ZW50RWxlbWVudDpuLmNvbnRlbnRIb2xkZXIoaS5pbmRleCgpKVswXX0pfHxuLmFjdGl2YXRlVGFiKGkpfSksbil9LGVuYWJsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl90b2dnbGVEaXNhYmxlZChlLHQhPT0hMSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdG9nZ2xlRGlzYWJsZWQoZSwhMSksdGhpc30scmVsb2FkOmZ1bmN0aW9uKHQpe3Q9dGhpcy50YWJHcm91cC5maW5kKHQpO3ZhciBuPXRoaXM7cmV0dXJuIHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksaT10LmZpbmQoXCIuXCIreSkuZGF0YShFKSxyPW4uY29udGVudEhvbGRlcih0LmluZGV4KCkpO2kmJm4uYWpheFJlcXVlc3QodCxyLG51bGwsaSl9KSxufSxhcHBlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX2NyZWF0ZShlKTtyZXR1cm4gbChuLnRhYnMsZnVuY3Rpb24oZSl7dC50YWJHcm91cC5hcHBlbmQodGhpcyksdC53cmFwcGVyLmFwcGVuZChuLmNvbnRlbnRzW2VdKX0pLGkodC50YWJHcm91cCksdC5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCksdH0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHQsbil7bj10aGlzLnRhYkdyb3VwLmZpbmQobik7dmFyIHI9dGhpcyxvPXIuX2NyZWF0ZSh0KSxhPWUoci5jb250ZW50RWxlbWVudChuLmluZGV4KCkpKTtyZXR1cm4gbChvLnRhYnMsZnVuY3Rpb24oZSl7bi5iZWZvcmUodGhpcyksYS5iZWZvcmUoby5jb250ZW50c1tlXSl9KSxpKHIudGFiR3JvdXApLHIuX3VwZGF0ZUNvbnRlbnRFbGVtZW50cygpLHJ9LGluc2VydEFmdGVyOmZ1bmN0aW9uKHQsbil7bj10aGlzLnRhYkdyb3VwLmZpbmQobik7dmFyIHI9dGhpcyxvPXIuX2NyZWF0ZSh0KSxhPWUoci5jb250ZW50RWxlbWVudChuLmluZGV4KCkpKTtyZXR1cm4gbChvLnRhYnMsZnVuY3Rpb24oZSl7bi5hZnRlcih0aGlzKSxhLmFmdGVyKG8uY29udGVudHNbZV0pfSksaShyLnRhYkdyb3VwKSxyLl91cGRhdGVDb250ZW50RWxlbWVudHMoKSxyfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLG89dHlwZW9mIHQ7cmV0dXJuXCJzdHJpbmdcIj09PW8/dD1pLnRhYkdyb3VwLmZpbmQodCk6XCJudW1iZXJcIj09PW8mJih0PWkudGFiR3JvdXAuY2hpbGRyZW4oKS5lcSh0KSksbj10Lm1hcChmdW5jdGlvbigpe3ZhciB0PWkuY29udGVudEVsZW1lbnQoZSh0aGlzKS5pbmRleCgpKTtyZXR1cm4gci5kZXN0cm95KHQpLHR9KSx0LnJlbW92ZSgpLG4ucmVtb3ZlKCksaS5fdXBkYXRlQ29udGVudEVsZW1lbnRzKCksaX0sX2NyZWF0ZTpmdW5jdGlvbihpKXt2YXIgcixvLGEsbD1lLmlzUGxhaW5PYmplY3QoaSksYz10aGlzO3JldHVybiBsfHxlLmlzQXJyYXkoaSk/KGk9ZS5pc0FycmF5KGkpP2k6W2ldLHI9cyhpLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUoVy5yZW5kZXJJdGVtKHtncm91cDpjLnRhYkdyb3VwLGl0ZW06ZCh0LHtpbmRleDpufSl9KSl9KSxvPXMoaSxmdW5jdGlvbihuLGkpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBuLmNvbnRlbnR8fG4uY29udGVudFVybD9lKFcucmVuZGVyQ29udGVudCh7aXRlbTpkKG4se2luZGV4Oml9KX0pKTp0fSkpOihyPVwic3RyaW5nXCI9PXR5cGVvZiBpJiZcIjxcIiE9aVswXT9jLmVsZW1lbnQuZmluZChpKTplKGkpLG89ZSgpLHIuZWFjaChmdW5jdGlvbigpe2lmKGE9ZShcIjxkaXYgY2xhc3M9J1wiK0ErXCInLz5cIiksL2stdGFic3RyaXAtaXRlbXMvLnRlc3QodGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSkpe3ZhciB0PXBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiYXJpYS1jb250cm9sc1wiKS5yZXBsYWNlKC9eLiotLyxcIlwiKSwxMCktMTthPWUoYy5jb250ZW50RWxlbWVudCh0KSl9bz1vLmFkZChhKX0pLG4ocikpLHt0YWJzOnIsY29udGVudHM6b319LF90b2dnbGVEaXNhYmxlZDpmdW5jdGlvbih0LG4pe3Q9dGhpcy50YWJHcm91cC5maW5kKHQpLHQuZWFjaChmdW5jdGlvbigpe2UodGhpcykudG9nZ2xlQ2xhc3MoRixuKS50b2dnbGVDbGFzcyh6LCFuKX0pfSxfdXBkYXRlQ2xhc3NlczpmdW5jdGlvbigpe3ZhciByLG8sYSxzPXRoaXM7cy53cmFwcGVyLmFkZENsYXNzKFwiay13aWRnZXQgay1oZWFkZXIgay10YWJzdHJpcFwiKSxzLnRhYkdyb3VwPXMud3JhcHBlci5jaGlsZHJlbihcInVsXCIpLmFkZENsYXNzKFwiay10YWJzdHJpcC1pdGVtcyBrLXJlc2V0XCIpLHMudGFiR3JvdXBbMF18fChzLnRhYkdyb3VwPWUoXCI8dWwgY2xhc3M9J2stdGFic3RyaXAtaXRlbXMgay1yZXNldCcvPlwiKS5hcHBlbmRUbyhzLndyYXBwZXIpKSxyPXMudGFiR3JvdXAuZmluZChcImxpXCIpLmFkZENsYXNzKFwiay1pdGVtXCIpLHIubGVuZ3RoJiYobz1yLmZpbHRlcihcIi5cIitSKS5pbmRleCgpLGE9bz49MD9vOnQscy50YWJHcm91cC5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAzPT10aGlzLm5vZGVUeXBlJiYhYyh0aGlzLm5vZGVWYWx1ZSl9KS5yZW1vdmUoKSksbz49MCYmci5lcShvKS5hZGRDbGFzcyhPKSxzLmNvbnRlbnRFbGVtZW50cz1zLndyYXBwZXIuY2hpbGRyZW4oXCJkaXZcIikscy5jb250ZW50RWxlbWVudHMuYWRkQ2xhc3MoQSkuZXEoYSkuYWRkQ2xhc3MoUikuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIn0pLHIubGVuZ3RoJiYobihyKSxpKHMudGFiR3JvdXApLHMuX3VwZGF0ZUNvbnRlbnRFbGVtZW50cygpKX0sX3VwZGF0ZUNvbnRlbnRFbGVtZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMuY29udGVudFVybHN8fFtdLGk9dC50YWJHcm91cC5maW5kKFwiLmstaXRlbVwiKSxvPSh0LmVsZW1lbnQuYXR0cihcImlkXCIpfHxyLmd1aWQoKSkrXCItXCIsYT10LndyYXBwZXIuY2hpbGRyZW4oXCJkaXZcIik7YS5sZW5ndGgmJmkubGVuZ3RoPmEubGVuZ3RoPyhhLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQodGhpcy5pZC5yZXBsYWNlKG8sXCJcIiksMTApLG49aS5maWx0ZXIoXCJbYXJpYS1jb250cm9scz1cIitvK3QrXCJdXCIpLHI9bysoZSsxKTtuLmRhdGEoXCJhcmlhXCIsciksdGhpcy5zZXRBdHRyaWJ1dGUoXCJpZFwiLHIpfSksaS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0aGlzLnNldEF0dHJpYnV0ZShcImFyaWEtY29udHJvbHNcIix0LmRhdGEoXCJhcmlhXCIpKSx0LnJlbW92ZURhdGEoXCJhcmlhXCIpfSkpOmkuZWFjaChmdW5jdGlvbihpKXt2YXIgcj1hLmVxKGkpLHM9bysoaSsxKTt0aGlzLnNldEF0dHJpYnV0ZShcImFyaWEtY29udHJvbHNcIixzKSwhci5sZW5ndGgmJm5baV0/ZShcIjxkaXYgY2xhc3M9J1wiK0ErXCInLz5cIikuYXBwZW5kVG8odC53cmFwcGVyKS5hdHRyKFwiaWRcIixzKTooci5hdHRyKFwiaWRcIixzKSxlKHRoaXMpLmNoaWxkcmVuKFwiLmstbG9hZGluZ1wiKVswXXx8bltpXXx8ZShcIjxzcGFuIGNsYXNzPSdrLWxvYWRpbmcgay1jb21wbGV0ZScvPlwiKS5wcmVwZW5kVG8odGhpcykpLHIuYXR0cihcInJvbGVcIixcInRhYnBhbmVsXCIpLHIuZmlsdGVyKFwiOm5vdCguXCIrUitcIilcIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHIuZmlsdGVyKFwiLlwiK1IpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApfSksdC5jb250ZW50RWxlbWVudHM9dC5jb250ZW50QW5pbWF0b3JzPXQud3JhcHBlci5jaGlsZHJlbihcImRpdlwiKSx0LnRhYnNIZWlnaHQ9dC50YWJHcm91cC5vdXRlckhlaWdodCgpK3BhcnNlSW50KHQud3JhcHBlci5jc3MoXCJib3JkZXItdG9wLXdpZHRoXCIpLDEwKStwYXJzZUludCh0LndyYXBwZXIuY3NzKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiKSwxMCksci5raW5ldGljU2Nyb2xsTmVlZGVkJiZyLm1vYmlsZS51aS5TY3JvbGxlciYmKHIudG91Y2hTY3JvbGxlcih0LmNvbnRlbnRFbGVtZW50cyksdC5jb250ZW50RWxlbWVudHM9dC5jb250ZW50RWxlbWVudHMuY2hpbGRyZW4oXCIua20tc2Nyb2xsLWNvbnRhaW5lclwiKSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLndyYXBwZXI9ZS5lbGVtZW50LmlzKFwidWxcIik/ZS5lbGVtZW50LndyYXBBbGwoXCI8ZGl2IC8+XCIpLnBhcmVudCgpOmUuZWxlbWVudCxlLnNjcm9sbFdyYXA9ZS53cmFwcGVyLnBhcmVudChcIi5rLXRhYnN0cmlwLXdyYXBwZXJcIiksZS5zY3JvbGxXcmFwWzBdfHwoZS5zY3JvbGxXcmFwPWUud3JhcHBlci53cmFwQWxsKFwiPGRpdiBjbGFzcz0nay10YWJzdHJpcC13cmFwcGVyJyAvPlwiKS5wYXJlbnQoKSl9LF9zaXplU2Nyb2xsV3JhcDpmdW5jdGlvbihlKXt0aGlzLnNjcm9sbFdyYXAuY3NzKFwiaGVpZ2h0XCIsTWF0aC5mbG9vcihlLm91dGVySGVpZ2h0KCEwKSkrdGhpcy50YWJzSGVpZ2h0KS5jc3MoXCJoZWlnaHRcIil9LF90b2dnbGVIb3ZlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoTCx0LnR5cGU9PU0pfSxfY2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMscj1lLmZpbmQoXCIuXCIreSksbz1yLmF0dHIobSksYT1pLm9wdGlvbnMuY29sbGFwc2libGUscz1pLmNvbnRlbnRIb2xkZXIoZS5pbmRleCgpKTtpZihlLmNsb3Nlc3QoXCIuay13aWRnZXRcIilbMF09PWkud3JhcHBlclswXSl7aWYoZS5pcyhcIi5cIit6KyhhP1wiXCI6XCIsLlwiK1IpKSlyZXR1cm4hMDtpZihuPXIuZGF0YShFKXx8byYmKFwiI1wiPT1vLmNoYXJBdChvLmxlbmd0aC0xKXx8LTEhPW8uaW5kZXhPZihcIiNcIitpLmVsZW1lbnRbMF0uaWQrXCItXCIpKSx0PSFvfHxuLGkudGFiR3JvdXAuY2hpbGRyZW4oXCJbZGF0YS1hbmltYXRpbmddXCIpLmxlbmd0aClyZXR1cm4gdDtpZihpLnRyaWdnZXIoVCx7aXRlbTplWzBdLGNvbnRlbnRFbGVtZW50OnNbMF19KSlyZXR1cm4hMDtpZih0IT09ITEpcmV0dXJuIGEmJmUuaXMoXCIuXCIrUik/KGkuZGVhY3RpdmF0ZVRhYihlKSwhMCk6KGkuYWN0aXZhdGVUYWIoZSkmJih0PSEwKSx0KX19LGRlYWN0aXZhdGVUYWI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5hbmltYXRpb24saT1uLm9wZW4sbz1kKHt9LG4uY2xvc2UpLGE9byYmXCJlZmZlY3RzXCJpbiBvO2U9dC50YWJHcm91cC5maW5kKGUpLG89ZChhP286ZCh7cmV2ZXJzZTohMH0saSkse2hpZGU6ITB9KSxyLnNpemUoaS5lZmZlY3RzKT8oZS5rZW5kb0FkZENsYXNzKEYse2R1cmF0aW9uOmkuZHVyYXRpb259KSxlLmtlbmRvUmVtb3ZlQ2xhc3MoUix7ZHVyYXRpb246aS5kdXJhdGlvbn0pKTooZS5hZGRDbGFzcyhGKSxlLnJlbW92ZUNsYXNzKFIpKSxlLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLHQuY29udGVudEFuaW1hdG9ycy5maWx0ZXIoXCIuXCIrUikua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUobykucmVtb3ZlQ2xhc3MoUikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApfSxhY3RpdmF0ZVRhYjpmdW5jdGlvbihlKXt2YXIgdCxuLGksbyxhLHMsbCxjLHUsaCxwLGYsZyxtLHY7aWYoIXRoaXMudGFiR3JvdXAuY2hpbGRyZW4oXCJbZGF0YS1hbmltYXRpbmddXCIpLmxlbmd0aClyZXR1cm4gZT10aGlzLnRhYkdyb3VwLmZpbmQoZSksdD10aGlzLG49dC5vcHRpb25zLmFuaW1hdGlvbixpPW4ub3BlbixvPWQoe30sbi5jbG9zZSksYT1vJiZcImVmZmVjdHNcImluIG8scz1lLnBhcmVudCgpLmNoaWxkcmVuKCksbD1zLmZpbHRlcihcIi5cIitSKSxjPXMuaW5kZXgoZSksbz1kKGE/bzpkKHtyZXZlcnNlOiEwfSxpKSx7aGlkZTohMH0pLHIuc2l6ZShpLmVmZmVjdHMpPyhsLmtlbmRvUmVtb3ZlQ2xhc3MoUix7ZHVyYXRpb246by5kdXJhdGlvbn0pLGUua2VuZG9SZW1vdmVDbGFzcyhMLHtkdXJhdGlvbjpvLmR1cmF0aW9ufSkpOihsLnJlbW92ZUNsYXNzKFIpLGUucmVtb3ZlQ2xhc3MoTCkpLHU9dC5jb250ZW50QW5pbWF0b3JzLHQuaW5SZXF1ZXN0JiYodC54aHIuYWJvcnQoKSx0LmluUmVxdWVzdD0hMSksMD09PXUubGVuZ3RoPyhsLnJlbW92ZUNsYXNzKE8pLGUuYWRkQ2xhc3MoTykuY3NzKFwiei1pbmRleFwiKSxlLmFkZENsYXNzKFIpLHQuX2N1cnJlbnQoZSksdC50cmlnZ2VyKFwiY2hhbmdlXCIpLCExKTooaD11LmZpbHRlcihcIi5cIitSKSxwPXQuY29udGVudEhvbGRlcihjKSxmPXAuY2xvc2VzdChcIi5rLWNvbnRlbnRcIiksdC50YWJzSGVpZ2h0PXQudGFiR3JvdXAub3V0ZXJIZWlnaHQoKStwYXJzZUludCh0LndyYXBwZXIuY3NzKFwiYm9yZGVyLXRvcC13aWR0aFwiKSwxMCkrcGFyc2VJbnQodC53cmFwcGVyLmNzcyhcImJvcmRlci1ib3R0b20td2lkdGhcIiksMTApLHQuX3NpemVTY3JvbGxXcmFwKGgpLDA9PT1wLmxlbmd0aD8oaC5yZW1vdmVDbGFzcyhSKS5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCkua2VuZG9TdG9wKCEwLCEwKS5rZW5kb0FuaW1hdGUobyksITEpOihlLmF0dHIoXCJkYXRhLWFuaW1hdGluZ1wiLCEwKSxnPShlLmNoaWxkcmVuKFwiLlwiK3kpLmRhdGEoRSl8fCExKSYmcC5pcyh4KSxtPWZ1bmN0aW9uKCl7bC5yZW1vdmVDbGFzcyhPKSxlLmFkZENsYXNzKE8pLmNzcyhcInotaW5kZXhcIiksci5zaXplKGkuZWZmZWN0cyk/KGwua2VuZG9BZGRDbGFzcyhGLHtkdXJhdGlvbjppLmR1cmF0aW9ufSksZS5rZW5kb0FkZENsYXNzKFIse2R1cmF0aW9uOmkuZHVyYXRpb259KSk6KGwuYWRkQ2xhc3MoRiksZS5hZGRDbGFzcyhSKSksbC5yZW1vdmVBdHRyKFwiYXJpYS1zZWxlY3RlZFwiKSxlLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLHQuX2N1cnJlbnQoZSksdC5fc2l6ZVNjcm9sbFdyYXAoZiksZi5hZGRDbGFzcyhSKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW5cIikua2VuZG9TdG9wKCEwLCEwKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKS5rZW5kb0FuaW1hdGUoZCh7aW5pdDpmdW5jdGlvbigpe3QudHJpZ2dlcihfLHtpdGVtOmVbMF0sY29udGVudEVsZW1lbnQ6cFswXX0pLHIucmVzaXplKHApfX0saSx7Y29tcGxldGU6ZnVuY3Rpb24oKXtlLnJlbW92ZUF0dHIoXCJkYXRhLWFuaW1hdGluZ1wiKSx0LnRyaWdnZXIoRCx7aXRlbTplWzBdLGNvbnRlbnRFbGVtZW50OnBbMF19KSxyLnJlc2l6ZShwKSx0LnNjcm9sbFdyYXAuY3NzKFwiaGVpZ2h0XCIsXCJcIikuY3NzKFwiaGVpZ2h0XCIpfX0pKX0sdj1mdW5jdGlvbigpe2c/KGUucmVtb3ZlQXR0cihcImRhdGEtYW5pbWF0aW5nXCIpLHQuYWpheFJlcXVlc3QoZSxwLGZ1bmN0aW9uKCl7ZS5hdHRyKFwiZGF0YS1hbmltYXRpbmdcIiwhMCksbSgpLHQudHJpZ2dlcihcImNoYW5nZVwiKX0pKToobSgpLHQudHJpZ2dlcihcImNoYW5nZVwiKSl9LGgucmVtb3ZlQ2xhc3MoUiksaC5hdHRyKFwiYXJpYS1oaWRkZW5cIiwhMCksaC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSxoLmxlbmd0aD9oLmtlbmRvU3RvcCghMCwhMCkua2VuZG9BbmltYXRlKGQoe2NvbXBsZXRlOnZ9LG8pKTp2KCksITApKX0sY29udGVudEVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIG4saSxvLGE7aWYoaXNOYU4oZS0wKSlyZXR1cm4gdDtpZihuPXRoaXMuY29udGVudEVsZW1lbnRzJiZ0aGlzLmNvbnRlbnRFbGVtZW50c1swXSYmIXIua2luZXRpY1Njcm9sbE5lZWRlZD90aGlzLmNvbnRlbnRFbGVtZW50czp0aGlzLmNvbnRlbnRBbmltYXRvcnMsZT1uJiYwPmU/bi5sZW5ndGgrZTplLGk9UmVnRXhwKFwiLVwiKyhlKzEpK1wiJFwiKSxuKWZvcihvPTAsYT1uLmxlbmd0aDthPm87bysrKWlmKGkudGVzdChuLmVxKG8pLmNsb3Nlc3QoXCIuay1jb250ZW50XCIpWzBdLmlkKSlyZXR1cm4gbltvXTtyZXR1cm4gdH0sY29udGVudEhvbGRlcjpmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMuY29udGVudEVsZW1lbnQodCkpLGk9bi5jaGlsZHJlbihcIi5rbS1zY3JvbGwtY29udGFpbmVyXCIpO3JldHVybiByLnN1cHBvcnQudG91Y2gmJmlbMF0/aTpufSxhamF4UmVxdWVzdDpmdW5jdGlvbih0LG4saSxvKXt2YXIgYSxzLGwsYyxkLHUsaCxwLGY7dD10aGlzLnRhYkdyb3VwLmZpbmQodCksYT10aGlzLHM9ZS5hamF4U2V0dGluZ3MueGhyLGw9dC5maW5kKFwiLlwiK3kpLGM9e30sZD10LndpZHRoKCkvMix1PSExLGg9dC5maW5kKFwiLmstbG9hZGluZ1wiKS5yZW1vdmVDbGFzcyhcImstY29tcGxldGVcIiksaFswXXx8KGg9ZShcIjxzcGFuIGNsYXNzPSdrLWxvYWRpbmcnLz5cIikucHJlcGVuZFRvKHQpKSxwPTIqZC1oLndpZHRoKCksZj1mdW5jdGlvbigpe2guYW5pbWF0ZSh7bWFyZ2luTGVmdDoocGFyc2VJbnQoaC5jc3MoXCJtYXJnaW5MZWZ0XCIpLDEwKXx8MCk8ZD9wOjB9LDUwMCxmKVxufSxyLnN1cHBvcnQuYnJvd3Nlci5tc2llJiYxMD5yLnN1cHBvcnQuYnJvd3Nlci52ZXJzaW9uJiZzZXRUaW1lb3V0KGYsNDApLG89b3x8bC5kYXRhKEUpfHxsLmF0dHIobSksYS5pblJlcXVlc3Q9ITAsYS54aHI9ZS5hamF4KHt0eXBlOlwiR0VUXCIsY2FjaGU6ITEsdXJsOm8sZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpjLHhocjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1zKCksaT10LnByb2dyZXNzVXBsb2FkP1wicHJvZ3Jlc3NVcGxvYWRcIjp0LnByb2dyZXNzP1wicHJvZ3Jlc3NcIjohMTtyZXR1cm4gbiYmZS5lYWNoKFtuLG4udXBsb2FkXSxmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lciYmdGhpcy5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihlKXtpJiZ0W2ldKGUpfSwhMSl9KSx0Lm5vUHJvZ3Jlc3M9ISh3aW5kb3cuWE1MSHR0cFJlcXVlc3QmJlwidXBsb2FkXCJpbiBuZXcgWE1MSHR0cFJlcXVlc3QpLG59LHByb2dyZXNzOmZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoQ29tcHV0YWJsZSl7dmFyIHQ9cGFyc2VJbnQoZS5sb2FkZWQvZS50b3RhbCoxMDAsMTApK1wiJVwiO2guc3RvcCghMCkuYWRkQ2xhc3MoXCJrLXByb2dyZXNzXCIpLmNzcyh7d2lkdGg6dCxtYXJnaW5MZWZ0OjB9KX19LGVycm9yOmZ1bmN0aW9uKGUsdCl7YS50cmlnZ2VyKFwiZXJyb3JcIix7eGhyOmUsc3RhdHVzOnR9KSYmdGhpcy5jb21wbGV0ZSgpfSxzdG9wUHJvZ3Jlc3M6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHUpLGguc3RvcCghMCkuYWRkQ2xhc3MoXCJrLXByb2dyZXNzXCIpWzBdLnN0eWxlLmNzc1RleHQ9XCJcIn0sY29tcGxldGU6ZnVuY3Rpb24oZSl7YS5pblJlcXVlc3Q9ITEsdGhpcy5ub1Byb2dyZXNzP3NldFRpbWVvdXQodGhpcy5zdG9wUHJvZ3Jlc3MsNTAwKTp0aGlzLnN0b3BQcm9ncmVzcygpLFwiYWJvcnRcIj09ZS5zdGF0dXNUZXh0JiZoLnJlbW92ZSgpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciBzLGwsYztoLmFkZENsYXNzKFwiay1jb21wbGV0ZVwiKTt0cnl7cz10aGlzLGw9MTAscy5ub1Byb2dyZXNzJiYoaC53aWR0aChsK1wiJVwiKSx1PXNldEludGVydmFsKGZ1bmN0aW9uKCl7cy5wcm9ncmVzcyh7bGVuZ3RoQ29tcHV0YWJsZTohMCxsb2FkZWQ6TWF0aC5taW4obCwxMDApLHRvdGFsOjEwMH0pLGwrPTEwfSw0MCkpLGEuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpuLmdldCgpfX0pLHIuZGVzdHJveShuKSxuLmh0bWwoZSl9Y2F0Y2goZCl7Yz13aW5kb3cuY29uc29sZSxjJiZjLmVycm9yJiZjLmVycm9yKGQubmFtZStcIjogXCIrZC5tZXNzYWdlK1wiIGluIFwiK28pLHRoaXMuZXJyb3IodGhpcy54aHIsXCJlcnJvclwiKX1pJiZpLmNhbGwoYSxuKSxhLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bi5nZXQoKX19KSxhLnRyaWdnZXIoSSx7aXRlbTp0WzBdLGNvbnRlbnRFbGVtZW50Om5bMF19KX19KX19KTtkKFcse3JlbmRlckl0ZW06ZnVuY3Rpb24oZSl7ZT1kKHt0YWJTdHJpcDp7fSxncm91cDp7fX0sZSk7dmFyIHQ9Vi5lbXB0eSxuPWUuaXRlbTtyZXR1cm4gVi5pdGVtKGQoZSx7aW1hZ2U6bi5pbWFnZVVybD9WLmltYWdlOnQsc3ByaXRlOm4uc3ByaXRlQ3NzQ2xhc3M/Vi5zcHJpdGU6dCxpdGVtV3JhcHBlcjpWLml0ZW1XcmFwcGVyfSxVKSl9LHJlbmRlckNvbnRlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFYuY29udGVudChkKGUsVSkpfX0pLHIudWkucGx1Z2luKFcpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3ZhciBpLHI9ZS5nZXRUaW1lem9uZU9mZnNldCgpO2Uuc2V0VGltZShlLmdldFRpbWUoKSt0KSxufHwoaT1lLmdldFRpbWV6b25lT2Zmc2V0KCktcixlLnNldFRpbWUoZS5nZXRUaW1lKCkraSp6KSl9ZnVuY3Rpb24gaSgpe3ZhciBlPW5ldyAkLHQ9bmV3ICQoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSxlLmdldERhdGUoKSwwLDAsMCksbj1uZXcgJChlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLGUuZ2V0RGF0ZSgpLDEyLDAsMCk7cmV0dXJuLTEqKHQuZ2V0VGltZXpvbmVPZmZzZXQoKS1uLmdldFRpbWV6b25lT2Zmc2V0KCkpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIDYwKmUuZ2V0SG91cnMoKSp6K2UuZ2V0TWludXRlcygpKnorMWUzKmUuZ2V0U2Vjb25kcygpK2UuZ2V0TWlsbGlzZWNvbmRzKCl9ZnVuY3Rpb24gbyhlLHQsbil7dmFyIGksbz1yKHQpLGE9cihuKTtyZXR1cm4gZSYmbyE9YT8oaT1yKGUpLG8+aSYmKGkrPUYpLG8+YSYmKGErPUYpLGk+PW8mJmE+PWkpOiEwfWZ1bmN0aW9uIGEoZSl7dmFyIHQ9ZS5wYXJzZUZvcm1hdHM7ZS5mb3JtYXQ9ZihlLmZvcm1hdHx8ZC5nZXRDdWx0dXJlKGUuY3VsdHVyZSkuY2FsZW5kYXJzLnN0YW5kYXJkLnBhdHRlcm5zLnQpLHQ9aih0KT90Olt0XSx0LnNwbGljZSgwLDAsZS5mb3JtYXQpLGUucGFyc2VGb3JtYXRzPXR9ZnVuY3Rpb24gcyhlKXtlLnByZXZlbnREZWZhdWx0KCl9dmFyIGwsYyxkPXdpbmRvdy5rZW5kbyx1PWQua2V5cyxoPWQucGFyc2VEYXRlLHA9ZC5fYWN0aXZlRWxlbWVudCxmPWQuX2V4dHJhY3RGb3JtYXQsZz1kLnN1cHBvcnQsbT1nLmJyb3dzZXIsdj1kLnVpLF89di5XaWRnZXQseT1cIm9wZW5cIix3PVwiY2xvc2VcIixiPVwiY2hhbmdlXCIsaz1cIi5rZW5kb1RpbWVQaWNrZXJcIix4PVwiY2xpY2tcIitrLEM9XCJrLXN0YXRlLWRlZmF1bHRcIixTPVwiZGlzYWJsZWRcIixUPVwicmVhZG9ubHlcIixEPVwibGlcIixBPVwiPHNwYW4vPlwiLEU9XCJrLXN0YXRlLWZvY3VzZWRcIixNPVwiay1zdGF0ZS1ob3ZlclwiLFA9XCJtb3VzZWVudGVyXCIraytcIiBtb3VzZWxlYXZlXCIrayxJPVwibW91c2Vkb3duXCIrayx6PTZlNCxGPTg2NGU1LFI9XCJrLXN0YXRlLXNlbGVjdGVkXCIsQj1cImstc3RhdGUtZGlzYWJsZWRcIixMPVwiYXJpYS1zZWxlY3RlZFwiLE89XCJhcmlhLWV4cGFuZGVkXCIsSD1cImFyaWEtaGlkZGVuXCIsTj1cImFyaWEtZGlzYWJsZWRcIixWPVwiYXJpYS1yZWFkb25seVwiLFU9XCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixXPVwiaWRcIixqPWUuaXNBcnJheSxHPWUuZXh0ZW5kLHE9ZS5wcm94eSwkPURhdGUsWT1uZXcgJDtZPW5ldyAkKFkuZ2V0RnVsbFllYXIoKSxZLmdldE1vbnRoKCksWS5nZXREYXRlKCksMCwwLDApLGw9ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxpPXQuaWQ7bi5vcHRpb25zPXQsbi51bD1lKCc8dWwgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJsaXN0Ym94XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstbGlzdCBrLXJlc2V0XCIvPicpLmNzcyh7b3ZlcmZsb3c6Zy5raW5ldGljU2Nyb2xsTmVlZGVkP1wiXCI6XCJhdXRvXCJ9KS5vbih4LEQscShuLl9jbGljayxuKSkub24oXCJtb3VzZWVudGVyXCIrayxELGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhNKX0pLm9uKFwibW91c2VsZWF2ZVwiK2ssRCxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3MoTSl9KSxuLmxpc3Q9ZShcIjxkaXYgY2xhc3M9J2stbGlzdC1jb250YWluZXInLz5cIikuYXBwZW5kKG4udWwpLm9uKEkscyksaSYmKG4uX3RpbWVWaWV3SUQ9aStcIl90aW1ldmlld1wiLG4uX29wdGlvbklEPWkrXCJfb3B0aW9uX3NlbGVjdGVkXCIsbi51bC5hdHRyKFcsbi5fdGltZVZpZXdJRCkpLG4uX3BvcHVwKCksbi5faGVpZ2h0SGFuZGxlcj1xKG4uX2hlaWdodCxuKSxuLnRlbXBsYXRlPWQudGVtcGxhdGUoJzxsaSB0YWJpbmRleD1cIi0xXCIgcm9sZT1cIm9wdGlvblwiIGNsYXNzPVwiay1pdGVtXCIgdW5zZWxlY3RhYmxlPVwib25cIj4jPWRhdGEjPC9saT4nLHt1c2VXaXRoQmxvY2s6ITF9KX0sbC5wcm90b3R5cGU9e2N1cnJlbnQ6ZnVuY3Rpb24obil7dmFyIGk9dGhpcyxyPWkub3B0aW9ucy5hY3RpdmU7cmV0dXJuIG49PT10P2kuX2N1cnJlbnQ6KGkuX2N1cnJlbnQmJmkuX2N1cnJlbnQucmVtb3ZlQ2xhc3MoUikucmVtb3ZlQXR0cihMKS5yZW1vdmVBdHRyKFcpLG4mJihuPWUobikuYWRkQ2xhc3MoUikuYXR0cihXLGkuX29wdGlvbklEKS5hdHRyKEwsITApLGkuc2Nyb2xsKG5bMF0pKSxpLl9jdXJyZW50PW4sciYmcihuKSx0KX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLmNsb3NlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UudWwub2ZmKGspLGUubGlzdC5vZmYoayksZS5fdG91Y2hTY3JvbGxlciYmZS5fdG91Y2hTY3JvbGxlci5kZXN0cm95KCksZS5wb3B1cC5kZXN0cm95KCl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UudWxbMF0uZmlyc3RDaGlsZHx8ZS5iaW5kKCksZS5wb3B1cC5vcGVuKCksZS5fY3VycmVudCYmZS5zY3JvbGwoZS5fY3VycmVudFswXSl9LGRhdGFCaW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmZvcm1hdCxhPWQudG9TdHJpbmcscz1uLnRlbXBsYXRlLGw9ZS5sZW5ndGgsYz0wLHU9XCJcIjtsPmM7YysrKXQ9ZVtjXSxvKHQsaS5taW4saS5tYXgpJiYodSs9cyhhKHQscixpLmN1bHR1cmUpKSk7bi5faHRtbCh1KX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsbyxhPXRoaXMscz1hLm9wdGlvbnMsbD1zLmZvcm1hdCxjPWkoKSx1PTA+YyxoPXMubWluLHA9cy5tYXgsZj1yKGgpLGc9cihwKSxtPXMuaW50ZXJ2YWwqeix2PWQudG9TdHJpbmcsXz1hLnRlbXBsYXRlLHk9bmV3ICQoK2gpLHc9eS5nZXREYXRlKCksYj0wLGs9XCJcIjtmb3Iobz11PyhGK2MqeikvbTpGL20sZiE9ZyYmKGY+ZyYmKGcrPUYpLG89KGctZikvbSsxKSx0PXBhcnNlSW50KG8sMTApO28+YjtiKyspYiYmbih5LG0sdSksZyYmdD09YiYmKGU9cih5KSx3PHkuZ2V0RGF0ZSgpJiYoZSs9RiksZT5nJiYoeT1uZXcgJCgrcCkpKSxrKz1fKHYoeSxsLHMuY3VsdHVyZSkpO2EuX2h0bWwoayl9LGJpbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5vcHRpb25zLmRhdGVzO3QmJnRbMF0/ZS5kYXRhQmluZCh0KTplLnJlZnJlc2goKX0sX2h0bWw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LnVsWzBdLmlubmVySFRNTD1lLHQucG9wdXAudW5iaW5kKHksdC5faGVpZ2h0SGFuZGxlciksdC5wb3B1cC5vbmUoeSx0Ll9oZWlnaHRIYW5kbGVyKSx0LmN1cnJlbnQobnVsbCksdC5zZWxlY3QodC5fdmFsdWUpfSxzY3JvbGw6ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQsbj10aGlzLnVsWzBdLGk9ZS5vZmZzZXRUb3Ascj1lLm9mZnNldEhlaWdodCxvPW4uc2Nyb2xsVG9wLGE9bi5jbGllbnRIZWlnaHQscz1pK3IsbD10aGlzLl90b3VjaFNjcm9sbGVyO2w/KHQ9dGhpcy5saXN0LmhlaWdodCgpLGk+dCYmKGk9aS10K3IpLGwuc2Nyb2xsVG8oMCwtaSkpOm4uc2Nyb2xsVG9wPW8+aT9pOnM+bythP3MtYTpvfX0sc2VsZWN0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1uLm9wdGlvbnMscj1uLl9jdXJyZW50O3QgaW5zdGFuY2VvZiBEYXRlJiYodD1kLnRvU3RyaW5nKHQsaS5mb3JtYXQsaS5jdWx0dXJlKSksXCJzdHJpbmdcIj09dHlwZW9mIHQmJihyJiZyLnRleHQoKT09PXQ/dD1yOih0PWUuZ3JlcChuLnVsWzBdLmNoaWxkTm9kZXMsZnVuY3Rpb24oZSl7cmV0dXJuKGUudGV4dENvbnRlbnR8fGUuaW5uZXJUZXh0KT09dH0pLHQ9dFswXT90Om51bGwpKSxuLmN1cnJlbnQodCl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO2UubWluPWgoZS5taW4pLGUubWF4PWgoZS5tYXgpLHRoaXMub3B0aW9ucz1HKHQsZSx7YWN0aXZlOnQuYWN0aXZlLGNoYW5nZTp0LmNoYW5nZSxjbG9zZTp0LmNsb3NlLG9wZW46dC5vcGVufSksdGhpcy5iaW5kKCl9LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5wb3B1cC52aXNpYmxlKCk/ZS5jbG9zZSgpOmUub3BlbigpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX3ZhbHVlPWUsdC51bFswXS5maXJzdENoaWxkJiZ0LnNlbGVjdChlKX0sX2NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsaT1lKHQuY3VycmVudFRhcmdldCk7dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KG4uc2VsZWN0KGkpLG4ub3B0aW9ucy5jaGFuZ2UoaS50ZXh0KCksITApLG4uY2xvc2UoKSl9LF9oZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5saXN0LG49dC5wYXJlbnQoXCIuay1hbmltYXRpb24tY29udGFpbmVyXCIpLGk9ZS5vcHRpb25zLmhlaWdodDtlLnVsWzBdLmNoaWxkcmVuLmxlbmd0aCYmdC5hZGQobikuc2hvdygpLmhlaWdodChlLnVsWzBdLnNjcm9sbEhlaWdodD5pP2k6XCJhdXRvXCIpLmhpZGUoKX0sX3BhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT10Ll92YWx1ZXx8WTtyZXR1cm4gZSBpbnN0YW5jZW9mICQ/ZTooZT1oKGUsbi5wYXJzZUZvcm1hdHMsbi5jdWx0dXJlKSxlJiYoZT1uZXcgJChpLmdldEZ1bGxZZWFyKCksaS5nZXRNb250aCgpLGkuZ2V0RGF0ZSgpLGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSxlLmdldE1pbGxpc2Vjb25kcygpKSksZSl9LF9hZGp1c3RMaXN0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5saXN0LGk9blswXS5zdHlsZS53aWR0aCxyPXRoaXMub3B0aW9ucy5hbmNob3I7KG4uZGF0YShcIndpZHRoXCIpfHwhaSkmJihlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlP3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHJbMF0sbnVsbCk6MCx0PWU/cGFyc2VGbG9hdChlLndpZHRoKTpyLm91dGVyV2lkdGgoKSxlJiYobS5tb3ppbGxhfHxtLm1zaWUpJiYodCs9cGFyc2VGbG9hdChlLnBhZGRpbmdMZWZ0KStwYXJzZUZsb2F0KGUucGFkZGluZ1JpZ2h0KStwYXJzZUZsb2F0KGUuYm9yZGVyTGVmdFdpZHRoKStwYXJzZUZsb2F0KGUuYm9yZGVyUmlnaHRXaWR0aCkpLGk9dC0obi5vdXRlcldpZHRoKCktbi53aWR0aCgpKSxuLmNzcyh7Zm9udEZhbWlseTpyLmNzcyhcImZvbnQtZmFtaWx5XCIpLHdpZHRoOml9KS5kYXRhKFwid2lkdGhcIixpKSl9LF9wb3B1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmxpc3Qsbj1lLm9wdGlvbnMsaT1uLmFuY2hvcjtlLnBvcHVwPW5ldyB2LlBvcHVwKHQsRyhuLnBvcHVwLHthbmNob3I6aSxvcGVuOm4ub3BlbixjbG9zZTpuLmNsb3NlLGFuaW1hdGlvbjpuLmFuaW1hdGlvbixpc1J0bDpnLmlzUnRsKG4uYW5jaG9yKX0pKSxlLl90b3VjaFNjcm9sbGVyPWQudG91Y2hTY3JvbGxlcihlLnBvcHVwLmVsZW1lbnQpfSxtb3ZlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1lLmtleUNvZGUscj1uLnVsWzBdLG89bi5fY3VycmVudCxhPWk9PT11LkRPV047aWYoaT09PXUuVVB8fGEpe2lmKGUuYWx0S2V5KXJldHVybiBuLnRvZ2dsZShhKSx0O289YT9vP29bMF0ubmV4dFNpYmxpbmc6ci5maXJzdENoaWxkOm8/b1swXS5wcmV2aW91c1NpYmxpbmc6ci5sYXN0Q2hpbGQsbyYmbi5zZWxlY3Qobyksbi5vcHRpb25zLmNoYW5nZShuLl9jdXJyZW50LnRleHQoKSksZS5wcmV2ZW50RGVmYXVsdCgpfWVsc2UoaT09PXUuRU5URVJ8fGk9PT11LlRBQnx8aT09PXUuRVNDKSYmKGUucHJldmVudERlZmF1bHQoKSxvJiZuLm9wdGlvbnMuY2hhbmdlKG8udGV4dCgpLCEwKSxuLmNsb3NlKCkpfX0sbC5nZXRNaWxsaXNlY29uZHM9cixkLlRpbWVWaWV3PWwsYz1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXM7Xy5mbi5pbml0LmNhbGwobyxlLHQpLGU9by5lbGVtZW50LHQ9by5vcHRpb25zLHQubWluPWgoZS5hdHRyKFwibWluXCIpKXx8aCh0Lm1pbiksdC5tYXg9aChlLmF0dHIoXCJtYXhcIikpfHxoKHQubWF4KSxhKHQpLG8uX3dyYXBwZXIoKSxvLnRpbWVWaWV3PWk9bmV3IGwoRyh7fSx0LHtpZDplLmF0dHIoVyksYW5jaG9yOm8ud3JhcHBlcixmb3JtYXQ6dC5mb3JtYXQsY2hhbmdlOmZ1bmN0aW9uKHQsbil7bj9vLl9jaGFuZ2UodCk6ZS52YWwodCl9LG9wZW46ZnVuY3Rpb24odCl7by50aW1lVmlldy5fYWRqdXN0TGlzdFdpZHRoKCksby50cmlnZ2VyKHkpP3QucHJldmVudERlZmF1bHQoKTooZS5hdHRyKE8sITApLG4uYXR0cihILCExKSl9LGNsb3NlOmZ1bmN0aW9uKHQpe28udHJpZ2dlcih3KT90LnByZXZlbnREZWZhdWx0KCk6KGUuYXR0cihPLCExKSxuLmF0dHIoSCwhMCkpfSxhY3RpdmU6ZnVuY3Rpb24odCl7ZS5yZW1vdmVBdHRyKFUpLHQmJmUuYXR0cihVLGkuX29wdGlvbklEKX19KSksbj1pLnVsLG8uX2ljb24oKSxvLl9yZXNldCgpO3RyeXtlWzBdLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHRcIil9Y2F0Y2gocyl7ZVswXS50eXBlPVwidGV4dFwifWUuYWRkQ2xhc3MoXCJrLWlucHV0XCIpLmF0dHIoe3JvbGU6XCJjb21ib2JveFwiLFwiYXJpYS1leHBhbmRlZFwiOiExLFwiYXJpYS1vd25zXCI6aS5fdGltZVZpZXdJRH0pLHI9ZS5pcyhcIltkaXNhYmxlZF1cIikscj9vLmVuYWJsZSghMSk6by5yZWFkb25seShlLmlzKFwiW3JlYWRvbmx5XVwiKSksby5fb2xkPW8uX3VwZGF0ZSh0LnZhbHVlfHxvLmVsZW1lbnQudmFsKCkpLG8uX29sZFRleHQ9ZS52YWwoKSxkLm5vdGlmeShvKX0sb3B0aW9uczp7bmFtZTpcIlRpbWVQaWNrZXJcIixtaW46WSxtYXg6WSxmb3JtYXQ6XCJcIixkYXRlczpbXSxwYXJzZUZvcm1hdHM6W10sdmFsdWU6bnVsbCxpbnRlcnZhbDozMCxoZWlnaHQ6MjAwLGFuaW1hdGlvbjp7fX0sZXZlbnRzOlt5LHcsYl0sc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fdmFsdWU7Xy5mbi5zZXRPcHRpb25zLmNhbGwodCxlKSxlPXQub3B0aW9ucyxhKGUpLHQudGltZVZpZXcuc2V0T3B0aW9ucyhlKSxuJiZ0LmVsZW1lbnQudmFsKGQudG9TdHJpbmcobixlLmZvcm1hdCxlLmN1bHR1cmUpKX0sZGF0YUJpbmQ6ZnVuY3Rpb24oZSl7aihlKSYmdGhpcy50aW1lVmlldy5kYXRhQmluZChlKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmRpc2FibGUsaT1lLnJlYWRvbmx5LHI9dC5fYXJyb3cub2ZmKGspLG89dC5lbGVtZW50Lm9mZihrKSxhPXQuX2lucHV0V3JhcHBlci5vZmYoayk7aXx8bj8oYS5hZGRDbGFzcyhuP0I6QykucmVtb3ZlQ2xhc3Mobj9DOkIpLG8uYXR0cihTLG4pLmF0dHIoVCxpKS5hdHRyKE4sbikuYXR0cihWLGkpKTooYS5hZGRDbGFzcyhDKS5yZW1vdmVDbGFzcyhCKS5vbihQLHQuX3RvZ2dsZUhvdmVyKSxvLnJlbW92ZUF0dHIoUykucmVtb3ZlQXR0cihUKS5hdHRyKE4sITEpLmF0dHIoViwhMSkub24oXCJrZXlkb3duXCIrayxxKHQuX2tleWRvd24sdCkpLm9uKFwiZm9jdXNvdXRcIitrLHEodC5fYmx1cix0KSkub24oXCJmb2N1c1wiK2ssZnVuY3Rpb24oKXt0Ll9pbnB1dFdyYXBwZXIuYWRkQ2xhc3MoRSl9KSxyLm9uKHgscSh0Ll9jbGljayx0KSkub24oSSxzKSl9LHJlYWRvbmx5OmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTplPT09dD8hMDplLGRpc2FibGU6ITF9KX0sZW5hYmxlOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTohMSxkaXNhYmxlOiEoZT1lPT09dD8hMDplKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztfLmZuLmRlc3Ryb3kuY2FsbChlKSxlLnRpbWVWaWV3LmRlc3Ryb3koKSxlLmVsZW1lbnQub2ZmKGspLGUuX2Fycm93Lm9mZihrKSxlLl9pbnB1dFdyYXBwZXIub2ZmKGspLGUuX2Zvcm0mJmUuX2Zvcm0ub2ZmKFwicmVzZXRcIixlLl9yZXNldEhhbmRsZXIpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMudGltZVZpZXcuY2xvc2UoKX0sb3BlbjpmdW5jdGlvbigpe3RoaXMudGltZVZpZXcub3BlbigpfSxtaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1pblwiLGUpfSxtYXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1heFwiLGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl92YWx1ZToobi5fb2xkPW4uX3VwZGF0ZShlKSxudWxsPT09bi5fb2xkJiZuLmVsZW1lbnQudmFsKFwiXCIpLG4uX29sZFRleHQ9bi5lbGVtZW50LnZhbCgpLHQpfSxfYmx1cjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmVsZW1lbnQudmFsKCk7ZS5jbG9zZSgpLHQhPT1lLl9vbGRUZXh0JiZlLl9jaGFuZ2UodCksZS5faW5wdXRXcmFwcGVyLnJlbW92ZUNsYXNzKEUpfSxfY2xpY2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5lbGVtZW50O2UudGltZVZpZXcudG9nZ2xlKCksZy50b3VjaHx8dFswXT09PXAoKXx8dC5mb2N1cygpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT10Ll91cGRhdGUoZSksK3QuX29sZCE9K2UmJih0Ll9vbGQ9ZSx0Ll9vbGRUZXh0PXQuZWxlbWVudC52YWwoKSx0LmVsZW1lbnQudHJpZ2dlcihiKSx0LnRyaWdnZXIoYikpfSxfaWNvbjpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4uZWxlbWVudDt0PWkubmV4dChcInNwYW4uay1zZWxlY3RcIiksdFswXXx8KHQ9ZSgnPHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstc2VsZWN0XCI+PHNwYW4gdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImstaWNvbiBrLWktY2xvY2tcIj5zZWxlY3Q8L3NwYW4+PC9zcGFuPicpLmluc2VydEFmdGVyKGkpKSxuLl9hcnJvdz10LmF0dHIoe3JvbGU6XCJidXR0b25cIixcImFyaWEtY29udHJvbHNcIjpuLnRpbWVWaWV3Ll90aW1lVmlld0lEfSl9LF9rZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmtleUNvZGUsaT10LnRpbWVWaWV3LHI9dC5lbGVtZW50LnZhbCgpO2kucG9wdXAudmlzaWJsZSgpfHxlLmFsdEtleT9pLm1vdmUoZSk6bj09PXUuRU5URVImJnIhPT10Ll9vbGRUZXh0JiZ0Ll9jaGFuZ2Uocil9LF9vcHRpb246ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLHI9aS5vcHRpb25zO3JldHVybiBuPT09dD9yW2VdOihuPWkudGltZVZpZXcuX3BhcnNlKG4pLG4mJihuPW5ldyAkKCtuKSxyW2VdPW4saS50aW1lVmlldy5vcHRpb25zW2VdPW4saS50aW1lVmlldy5iaW5kKCkpLHQpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKE0sXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMsaT10LnRpbWVWaWV3LHI9aS5fcGFyc2UoZSk7cmV0dXJuIG8ocixuLm1pbixuLm1heCl8fChyPW51bGwpLHQuX3ZhbHVlPXIsdC5lbGVtZW50LnZhbChyP2QudG9TdHJpbmcocixuLmZvcm1hdCxuLmN1bHR1cmUpOmUpLGkudmFsdWUocikscn0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLmVsZW1lbnQ7dD1pLnBhcmVudHMoXCIuay10aW1lcGlja2VyXCIpLHRbMF18fCh0PWkud3JhcChBKS5wYXJlbnQoKS5hZGRDbGFzcyhcImstcGlja2VyLXdyYXAgay1zdGF0ZS1kZWZhdWx0XCIpLHQ9dC53cmFwKEEpLnBhcmVudCgpKSx0WzBdLnN0eWxlLmNzc1RleHQ9aVswXS5zdHlsZS5jc3NUZXh0LG4ud3JhcHBlcj10LmFkZENsYXNzKFwiay13aWRnZXQgay10aW1lcGlja2VyIGstaGVhZGVyXCIpLmFkZENsYXNzKGlbMF0uY2xhc3NOYW1lKSxpLmNzcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OmlbMF0uc3R5bGUuaGVpZ2h0fSksbi5faW5wdXRXcmFwcGVyPWUodFswXS5maXJzdENoaWxkKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLmRlZmF1bHRWYWx1ZSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9fSksdi5wbHVnaW4oYyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgaT1lKG4udXNlQnV0dG9uVGFnP1wiPGJ1dHRvbj48L2J1dHRvbj5cIjpcIjxhPjwvYT5cIik7cmV0dXJuIGkuZGF0YSh7dHlwZTpcImJ1dHRvblwifSksaS5hdHRyKCQsbi51aWQpLG4uYXR0cmlidXRlcyYmaS5hdHRyKG4uYXR0cmlidXRlcyksbi50b2dnbGFibGUmJihpLmFkZENsYXNzKG0pLG4uc2VsZWN0ZWQmJmkuYWRkQ2xhc3MoaykpLG4uZW5hYmxlPT09ITEmJmkuYWRkQ2xhc3MoeCksbi51cmw9PT10fHxuLnVzZUJ1dHRvblRhZ3x8KGkuYXR0cihcImhyZWZcIixuLnVybCksbi5tb2JpbGUmJmkuYXR0cihjLmF0dHIoXCJyb2xlXCIpLFwiYnV0dG9uXCIpKSxuLmdyb3VwJiZpLmF0dHIoYy5hdHRyKFwiZ3JvdXBcIiksbi5ncm91cCksIW4udG9nZ2xhYmxlJiZuLmNsaWNrJiZoKG4uY2xpY2spJiZpLmRhdGEoXCJjbGlja1wiLG4uY2xpY2spLG4udG9nZ2xhYmxlJiZuLnRvZ2dsZSYmaChuLnRvZ2dsZSkmJmkuZGF0YShcInRvZ2dsZVwiLG4udG9nZ2xlKSxpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbj1ZLmJ1dHRvbi5iYXNlKGUpO3JldHVybiBuLmFkZENsYXNzKGYpLGUucHJpbWFyeSYmbi5hZGRDbGFzcyhUKSxlLmFsaWduJiZuLmFkZENsYXNzKFwiay1hbGlnbi1cIitlLmFsaWduKSxlLmlkJiZuLmF0dHIoXCJpZFwiLGUuaWQpLFwib3ZlcmZsb3dcIiE9ZS5zaG93VGV4dCYmZS50ZXh0JiZuLmh0bWwoZS5tb2JpbGU/JzxzcGFuIGNsYXNzPVwia20tdGV4dFwiPicrZS50ZXh0K1wiPC9zcGFuPlwiOmUudGV4dCksdD1cIm92ZXJmbG93XCIhPWUuc2hvd0ljb24mJihlLmljb258fGUuc3ByaXRlQ3NzQ2xhc3N8fGUuaW1hZ2VVcmwpLHQmJm8oZSxuKSxufWZ1bmN0aW9uIHIoZSl7dmFyIHQsbj1ZLmJ1dHRvbi5iYXNlKGUpO3JldHVybiBuLmFkZENsYXNzKGcrXCIgXCIrZiksZS5wcmltYXJ5JiZuLmFkZENsYXNzKFQpLGUuaWQmJm4uYXR0cihcImlkXCIsZS5pZCtcIl9vdmVyZmxvd1wiKSxcInRvb2xiYXJcIiE9ZS5zaG93VGV4dCYmZS50ZXh0JiZuLmh0bWwoZS5tb2JpbGU/JzxzcGFuIGNsYXNzPVwia20tdGV4dFwiPicrZS50ZXh0K1wiPC9zcGFuPlwiOmUudGV4dCksdD1cInRvb2xiYXJcIiE9ZS5zaG93SWNvbiYmKGUuaWNvbnx8ZS5zcHJpdGVDc3NDbGFzc3x8ZS5pbWFnZVVybCksdCYmbyhlLG4pLG59ZnVuY3Rpb24gbyh0LG4pe3ZhciBpLHIsbyxhPXQuaWNvbixzPXQuc3ByaXRlQ3NzQ2xhc3MsbD10LmltYWdlVXJsOyhzfHxsfHxhKSYmKGk9ITAsbi5jb250ZW50cygpLm5vdChcInNwYW4uay1zcHJpdGUsc3Bhbi5cIitEK1wiLGltZy5rLWltYWdlXCIpLmVhY2goZnVuY3Rpb24odCxuKXsoMT09bi5ub2RlVHlwZXx8Mz09bi5ub2RlVHlwZSYmZS50cmltKG4ubm9kZVZhbHVlKS5sZW5ndGg+MCkmJihpPSExKX0pLG4uYWRkQ2xhc3MoaT9FOk0pKSxhPyhyPW4uY2hpbGRyZW4oXCJzcGFuLlwiK0QpLmZpcnN0KCksclswXXx8KHI9ZSgnPHNwYW4gY2xhc3M9XCInK0QrJ1wiPjwvc3Bhbj4nKS5wcmVwZW5kVG8obikpLHIuYWRkQ2xhc3MoQSthKSk6cz8ocj1uLmNoaWxkcmVuKFwic3Bhbi5rLXNwcml0ZVwiKS5maXJzdCgpLHJbMF18fChyPWUoJzxzcGFuIGNsYXNzPVwiay1zcHJpdGVcIj48L3NwYW4+JykucHJlcGVuZFRvKG4pKSxyLmFkZENsYXNzKHMpKTpsJiYobz1uLmNoaWxkcmVuKFwiaW1nLmstaW1hZ2VcIikuZmlyc3QoKSxvWzBdfHwobz1lKCc8aW1nIGFsdD1cImljb25cIiBjbGFzcz1cImstaW1hZ2VcIiAvPicpLnByZXBlbmRUbyhuKSksby5hdHRyKFwic3JjXCIsbCkpfWZ1bmN0aW9uIGEoKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5hbmNob3Isbj10Lm91dGVyV2lkdGgoKTtjLndyYXAodGhpcy5lbGVtZW50KS5hZGRDbGFzcyhcImstc3BsaXQtd3JhcHBlclwiKSxlPVwiYm9yZGVyLWJveFwiIT09dGhpcy5lbGVtZW50LmNzcyhcImJveC1zaXppbmdcIik/bi0odGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKS10aGlzLmVsZW1lbnQud2lkdGgoKSk6bix0aGlzLmVsZW1lbnQuY3NzKHtmb250RmFtaWx5OnQuY3NzKFwiZm9udC1mYW1pbHlcIiksXCJtaW4td2lkdGhcIjplfSl9ZnVuY3Rpb24gcyhlKXtlLnRhcmdldC5pcyhcIi5rLXRvZ2dsZS1idXR0b25cIil8fGUudGFyZ2V0LnRvZ2dsZUNsYXNzKGssXCJwcmVzc1wiPT1lLnR5cGUpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIHQ9ZSh0KSx0Lmhhc0NsYXNzKFwia20tYWN0aW9uc2hlZXRcIik/dC5jbG9zZXN0KFwiLmttLXBvcHVwLXdyYXBwZXJcIik6dC5hZGRDbGFzcyhcImttLXdpZGdldCBrbS1hY3Rpb25zaGVldFwiKS53cmFwKCc8ZGl2IGNsYXNzPVwia20tYWN0aW9uc2hlZXQtd3JhcHBlciBrbS1hY3Rpb25zaGVldC10YWJsZXQga20td2lkZ2V0IGttLXBvcHVwXCI+PC9kaXY+JykucGFyZW50KCkud3JhcCgnPGRpdiBjbGFzcz1cImttLXBvcHVwLXdyYXBwZXIgay1wb3B1cFwiPjwvZGl2PicpLnBhcmVudCgpfXZhciBjPXdpbmRvdy5rZW5kbyxkPWMudWkuV2lkZ2V0LHU9ZS5wcm94eSxoPWMuaXNGdW5jdGlvbixwPVwiay10b29sYmFyXCIsZj1cImstYnV0dG9uXCIsZz1cImstb3ZlcmZsb3ctYnV0dG9uXCIsbT1cImstdG9nZ2xlLWJ1dHRvblwiLHY9XCJrLWJ1dHRvbi1ncm91cFwiLF89XCJrLXNwbGl0LWJ1dHRvblwiLHk9XCJrLXNlcGFyYXRvclwiLHc9XCJrLXBvcHVwXCIsYj1cImstdG9vbGJhci1yZXNpemFibGVcIixrPVwiay1zdGF0ZS1hY3RpdmVcIix4PVwiay1zdGF0ZS1kaXNhYmxlZFwiLEM9XCJrLWdyb3VwLXN0YXJ0XCIsUz1cImstZ3JvdXAtZW5kXCIsVD1cImstcHJpbWFyeVwiLEQ9XCJrLWljb25cIixBPVwiay1pLVwiLEU9XCJrLWJ1dHRvbi1pY29uXCIsTT1cImstYnV0dG9uLWljb250ZXh0XCIsUD1cImstbGlzdC1jb250YWluZXIgay1zcGxpdC1jb250YWluZXJcIixJPVwiay1zcGxpdC1idXR0b24tYXJyb3dcIix6PVwiay1vdmVyZmxvdy1hbmNob3JcIixGPVwiay1vdmVyZmxvdy1jb250YWluZXJcIixSPVwiay10b29sYmFyLWZpcnN0LXZpc2libGVcIixCPVwiay10b29sYmFyLWxhc3QtdmlzaWJsZVwiLEw9XCJjbGlja1wiLE89XCJ0b2dnbGVcIixIPVwib3BlblwiLE49XCJjbG9zZVwiLFY9XCJvdmVyZmxvd09wZW5cIixVPVwib3ZlcmZsb3dDbG9zZVwiLFc9XCJuZXZlclwiLGo9XCJhdXRvXCIsRz1cImFsd2F5c1wiLHE9XCJrLW92ZXJmbG93LWhpZGRlblwiLCQ9Yy5hdHRyKFwidWlkXCIpLFk9e2J1dHRvbjp7YmFzZTpuLHRvb2xiYXI6aSxvdmVyZmxvdzpyfSxidXR0b25Hcm91cDp7YmFzZTpmdW5jdGlvbih0LG4saSl7dmFyIHIsbyxhPXQuYnV0dG9ucztpZihhKXtmb3IodC5hdHRyaWJ1dGVzJiZpLmF0dHIodC5hdHRyaWJ1dGVzKSxpLmRhdGEoe3R5cGU6XCJidXR0b25Hcm91cFwifSksaS5hdHRyKCQsdC51aWQpLG89MDthLmxlbmd0aD5vO28rKylhW29dLnVpZHx8KGFbb10udWlkPWMuZ3VpZCgpKSxyPW4oZS5leHRlbmQoe21vYmlsZTp0Lm1vYmlsZX0sYVtvXSkpLHIuYXBwZW5kVG8oaSk7aS5jaGlsZHJlbigpLmZpcnN0KCkuYWRkQ2xhc3MoQyksaS5jaGlsZHJlbigpLmxhc3QoKS5hZGRDbGFzcyhTKX19LHRvb2xiYXI6ZnVuY3Rpb24odCl7dmFyIG49ZShcIjxkaXY+PC9kaXY+XCIpO3JldHVybiBZLmJ1dHRvbkdyb3VwLmJhc2UodCxZLmJ1dHRvbi50b29sYmFyLG4pLG4uYWRkQ2xhc3ModiksdC5hbGlnbiYmbi5hZGRDbGFzcyhcImstYWxpZ24tXCIrdC5hbGlnbiksdC5pZCYmbi5hdHRyKFwiaWRcIix0LmlkKSxufSxvdmVyZmxvdzpmdW5jdGlvbih0KXt2YXIgbj1lKFwiPGxpPjwvbGk+XCIpO3JldHVybiBZLmJ1dHRvbkdyb3VwLmJhc2UodCxZLmJ1dHRvbi5vdmVyZmxvdyxuKSxuLmFkZENsYXNzKCh0Lm1vYmlsZT9cIlwiOnYpK1wiIGstb3ZlcmZsb3ctZ3JvdXBcIiksdC5pZCYmbi5hdHRyKFwiaWRcIix0LmlkK1wiX292ZXJmbG93XCIpLG59fSxzcGxpdEJ1dHRvbjp7dG9vbGJhcjpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz1lKCc8ZGl2IGNsYXNzPVwiJytfKydcIj48L2Rpdj4nKSxzPVkuYnV0dG9uLnRvb2xiYXIodCksYz1lKCc8YSBjbGFzcz1cIicrZitcIiBcIitJKydcIj48c3BhbiBjbGFzcz1cIicrKHQubW9iaWxlP1wia20taWNvbiBrbS1hcnJvd2Rvd25cIjpcImstaWNvbiBrLWktYXJyb3ctc1wiKSsnXCI+PC9zcGFuPjwvYT4nKSxkPWUoJzx1bCBjbGFzcz1cIicrUCsnXCI+PC91bD4nKSx1PXQubWVudUJ1dHRvbnM7Zm9yKHMuYXBwZW5kVG8obyksYy5hcHBlbmRUbyhvKSxkLmFwcGVuZFRvKG8pLHI9MDt1Lmxlbmd0aD5yO3IrKylpPVkuYnV0dG9uLnRvb2xiYXIoZS5leHRlbmQoe21vYmlsZTp0Lm1vYmlsZSxjbGljazp0LmNsaWNrfSx1W3JdKSksaS53cmFwKFwiPGxpPjwvbGk+XCIpLnBhcmVudCgpLmFwcGVuZFRvKGQpO3JldHVybiB0LmFsaWduJiZvLmFkZENsYXNzKFwiay1hbGlnbi1cIit0LmFsaWduKSx0LmlkfHwodC5pZD10LnVpZCksby5hdHRyKFwiaWRcIix0LmlkK1wiX3dyYXBwZXJcIiksZC5hdHRyKFwiaWRcIix0LmlkK1wiX29wdGlvbmxpc3RcIikuYXR0cigkLHQucm9vdFVpZCksdC5tb2JpbGUmJihkPWwoZCkpLG49ZC5rZW5kb1BvcHVwKHthcHBlbmRUbzp0Lm1vYmlsZT9lKHQubW9iaWxlKS5jaGlsZHJlbihcIi5rbS1wYW5lXCIpOm51bGwsYW5jaG9yOm8sY29weUFuY2hvclN0eWxlczohMSxhbmltYXRpb246dC5hbmltYXRpb24sb3BlbjphfSkuZGF0YShcImtlbmRvUG9wdXBcIiksby5kYXRhKHt0eXBlOlwic3BsaXRCdXR0b25cIixrZW5kb1BvcHVwOm59KSxvLmF0dHIoJCx0LnVpZCksb30sb3ZlcmZsb3c6ZnVuY3Rpb24odCl7dmFyIG4saSxyPWUoJzxsaSBjbGFzcz1cIicrXysnXCI+PC9saT4nKSxvPVkuYnV0dG9uLm92ZXJmbG93KHQpLGE9dC5tZW51QnV0dG9ucztmb3Ioby5hcHBlbmRUbyhyKSxpPTA7YS5sZW5ndGg+aTtpKyspbj1ZLmJ1dHRvbi5vdmVyZmxvdyhlLmV4dGVuZCh7bW9iaWxlOnQubW9iaWxlfSxhW2ldKSksbi5hcHBlbmRUbyhyKTtyZXR1cm4gdC5pZCYmci5hdHRyKFwiaWRcIix0LmlkK1wiX292ZXJmbG93XCIpLHIuZGF0YSh7dHlwZTpcInNwbGl0QnV0dG9uXCJ9KSxyLmF0dHIoJCx0LnVpZCkscn19LHNlcGFyYXRvcjp7YmFzZTpmdW5jdGlvbih0LG4pe3ZhciBpPWUobj9cIjxsaT4mbmJzcDs8L2xpPlwiOlwiPGRpdj4mbmJzcDs8L2Rpdj5cIik7cmV0dXJuIGkuZGF0YSh7dHlwZTpcInNlcGFyYXRvclwifSksaS5hdHRyKCQsdC51aWQpLHQuYXR0cmlidXRlcyYmaS5hdHRyKHQuYXR0cmlidXRlcyksaS5hZGRDbGFzcyh5KSxpfSx0b29sYmFyOmZ1bmN0aW9uKGUpe3JldHVybiBZLnNlcGFyYXRvci5iYXNlKGUsITEpfSxvdmVyZmxvdzpmdW5jdGlvbihlKXtyZXR1cm4gWS5zZXBhcmF0b3IuYmFzZShlLCEwKX19LG92ZXJmbG93QW5jaG9yOic8ZGl2IGNsYXNzPVwiay1vdmVyZmxvdy1hbmNob3JcIj48L2Rpdj4nLG92ZXJmbG93Q29udGFpbmVyOic8dWwgY2xhc3M9XCJrLW92ZXJmbG93LWNvbnRhaW5lciBrLWxpc3QtY29udGFpbmVyXCI+PC91bD4nfSxLPWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGkscj10aGlzO2lmKGQuZm4uaW5pdC5jYWxsKHIsdCxuKSxuPXIub3B0aW9ucyx0PXIud3JhcHBlcj1yLmVsZW1lbnQsdC5hZGRDbGFzcyhwK1wiIGstd2lkZ2V0XCIpLHRoaXMudWlkPWMuZ3VpZCgpLHQuYXR0cigkLHRoaXMudWlkKSxyLmlzTW9iaWxlPVwiYm9vbGVhblwiPT10eXBlb2Ygbi5tb2JpbGU/bi5tb2JpbGU6ci5lbGVtZW50LmNsb3Nlc3QoXCIua20tcm9vdFwiKVswXSxyLmFuaW1hdGlvbj1yLmlzTW9iaWxlP3tvcGVuOntlZmZlY3RzOlwiZmFkZVwifX06e30sci5pc01vYmlsZSYmKHQuYWRkQ2xhc3MoXCJrbS13aWRnZXRcIiksRD1cImttLWljb25cIixBPVwia20tXCIsZj1cImttLWJ1dHRvblwiLHY9XCJrbS1idXR0b25ncm91cCBrbS13aWRnZXRcIixrPVwia20tc3RhdGUtYWN0aXZlXCIseD1cImttLXN0YXRlLWRpc2FibGVkXCIpLG4ucmVzaXphYmxlPyhyLl9yZW5kZXJPdmVyZmxvdygpLHQuYWRkQ2xhc3MoYiksci5vdmVyZmxvd1VzZXJFdmVudHM9bmV3IGMuVXNlckV2ZW50cyhyLmVsZW1lbnQse3RocmVzaG9sZDo1LGFsbG93U2VsZWN0aW9uOiEwLGZpbHRlcjpcIi5cIit6LHRhcDp1KHIuX3RvZ2dsZU92ZXJmbG93LHIpfSksYy5vblJlc2l6ZShmdW5jdGlvbigpe3IucmVzaXplKCl9KSk6ci5wb3B1cD17ZWxlbWVudDplKFtdKX0sbi5pdGVtcyYmbi5pdGVtcy5sZW5ndGgpZm9yKGk9MDtuLml0ZW1zLmxlbmd0aD5pO2krKylyLmFkZChuLml0ZW1zW2ldKTtyLnVzZXJFdmVudHM9bmV3IGMuVXNlckV2ZW50cyhkb2N1bWVudCx7dGhyZXNob2xkOjUsYWxsb3dTZWxlY3Rpb246ITAsZmlsdGVyOlwiW1wiKyQrXCI9XCIrdGhpcy51aWQrXCJdIC5cIitmK1wiLCBbXCIrJCtcIj1cIit0aGlzLnVpZCtcIl0gLlwiK2csdGFwOnUoci5fYnV0dG9uQ2xpY2sscikscHJlc3M6cyxyZWxlYXNlOnN9KSxuLnJlc2l6YWJsZSYmdGhpcy5fdG9nZ2xlT3ZlcmZsb3dBbmNob3IoKSxjLm5vdGlmeShyKX0sZXZlbnRzOltMLE8sSCxOLFYsVV0sb3B0aW9uczp7bmFtZTpcIlRvb2xCYXJcIixpdGVtczpbXSxyZXNpemFibGU6ITAsbW9iaWxlOm51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5maW5kKFwiLlwiK18pLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLmRhdGEoXCJrZW5kb1BvcHVwXCIpLmRlc3Ryb3koKX0pLHQudXNlckV2ZW50cy5kZXN0cm95KCksdC5vcHRpb25zLnJlc2l6YWJsZSYmKHQub3ZlcmZsb3dVc2VyRXZlbnRzLmRlc3Ryb3koKSx0LnBvcHVwLmRlc3Ryb3koKSksZC5mbi5kZXN0cm95LmNhbGwodCl9LGFkZDpmdW5jdGlvbih0KXt2YXIgbixpLHI9WVt0LnR5cGVdLG89dC50ZW1wbGF0ZSxhPXRoaXMscz1hLmlzTW9iaWxlP1wiXCI6XCJrLWl0ZW0gay1zdGF0ZS1kZWZhdWx0XCIsbD10Lm92ZXJmbG93VGVtcGxhdGU7ZS5leHRlbmQodCx7dWlkOmMuZ3VpZCgpLGFuaW1hdGlvbjphLmFuaW1hdGlvbixtb2JpbGU6YS5pc01vYmlsZSxyb290VWlkOmEudWlkfSksbyYmIWwmJih0Lm92ZXJmbG93PVcpLHQub3ZlcmZsb3chPT1XJiZhLm9wdGlvbnMucmVzaXphYmxlJiYobD9pPWUoaChsKT9sKHQpOmwpOnImJihpPShyLm92ZXJmbG93fHxlLm5vb3ApKHQpKSxpJiZpLmxlbmd0aCYmKFwiTElcIiE9PWkucHJvcChcInRhZ05hbWVcIikmJihpLnJlbW92ZUF0dHIoJCksaT1pLndyYXAoXCI8bGk+PC9saT5cIikucGFyZW50KCksaS5hdHRyKCQsdC51aWQpKSxhLl9hdHRyaWJ1dGVzKGksdCksaS5hZGRDbGFzcyhzKS5hcHBlbmRUbyhhLnBvcHVwLmNvbnRhaW5lciksaS5kYXRhKFwib3ZlcmZsb3dcIik9PT1qJiZpLmFkZENsYXNzKHEpLGEuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czppLmdldCgpfX0pKSksdC5vdmVyZmxvdyE9PUcmJihvPyhuPWgobyk/byh0KTpvLG4gaW5zdGFuY2VvZiBqUXVlcnl8fChuPWUobi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpKSksbj1uLndyYXAoXCI8ZGl2PjwvZGl2PlwiKS5wYXJlbnQoKSxuLmF0dHIoJCx0LnVpZCkpOnImJihuPShyLnRvb2xiYXJ8fGUubm9vcCkodCkpLG4mJm4ubGVuZ3RoJiYoYS5fYXR0cmlidXRlcyhuLHQpLGEub3B0aW9ucy5yZXNpemFibGU/KG4uYXBwZW5kVG8oYS5lbGVtZW50KS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksYS5fc2hyaW5rKGEuZWxlbWVudC5pbm5lcldpZHRoKCkpLG4uY3NzKFwidmlzaWJpbGl0eVwiLFwidmlzaWJsZVwiKSk6bi5hcHBlbmRUbyhhLmVsZW1lbnQpLGEuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpuLmdldCgpfX0pKSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5lbGVtZW50LmZpbmQoZSk7IWkubGVuZ3RoJiZ0aGlzLm9wdGlvbnMucmVzaXphYmxlPyhpPXRoaXMucG9wdXAuZWxlbWVudC5maW5kKGUpLG49aS5wYXJlbnQoKS5hdHRyKCQpKTpuPWkuYXR0cigkKSx0PWkuZGF0YShcInR5cGVcIiksaS5wYXJlbnQoXCIuXCIrXykuZGF0YShcInR5cGVcIikmJih0PVwic3BsaXRCdXR0b25cIixpPWkucGFyZW50KCkpLFwic3BsaXRCdXR0b25cIj09PXQmJmkuZGF0YShcImtlbmRvUG9wdXBcIikuZGVzdHJveSgpLGkuYWRkKHRoaXMucG9wdXAuZWxlbWVudC5maW5kKFwiW1wiKyQrXCI9J1wiK24rXCInXVwiKSkucmVtb3ZlKCl9LGVuYWJsZTpmdW5jdGlvbihuLGkpe3ZhciByPXRoaXMuZWxlbWVudC5maW5kKG4pLmF0dHIoJCk7IXImJnRoaXMucG9wdXAmJihyPXRoaXMucG9wdXAuZWxlbWVudC5maW5kKG4pLnBhcmVudChcImxpXCIpLmF0dHIoJCkpLHQ9PT1pJiYoaT0hMCksaT9lKFwiW1wiKyQrXCI9J1wiK3IrXCInXVwiKS5yZW1vdmVDbGFzcyh4KTplKFwiW1wiKyQrXCI9J1wiK3IrXCInXVwiKS5hZGRDbGFzcyh4KX0sZ2V0U2VsZWN0ZWRGcm9tR3JvdXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKFwiLlwiK20rXCJbZGF0YS1ncm91cD0nXCIrZStcIiddXCIpLmZpbHRlcihcIi5cIitrKX0sdG9nZ2xlOmZ1bmN0aW9uKHQsbil7dmFyIGkscj1lKHQpLG89ci5kYXRhKFwidWlkXCIpLGE9ci5kYXRhKFwiZ3JvdXBcIik7ci5oYXNDbGFzcyhtKSYmKGEmJnRoaXMuZWxlbWVudC5hZGQodGhpcy5wb3B1cC5lbGVtZW50KS5maW5kKFwiLlwiK20rXCJbZGF0YS1ncm91cD0nXCIrYStcIiddXCIpLmZpbHRlcihcIi5cIitrKS5yZW1vdmVDbGFzcyhrKSxlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSxyWzBdKT8oaT10aGlzLnBvcHVwLmVsZW1lbnQuZmluZChcIltcIiskK1wiPSdcIitvK1wiJ11cIiksXCJMSVwiPT09aS5wcm9wKFwidGFnTmFtZVwiKSYmKGk9aS5maW5kKFwiLlwiK20rXCI6Zmlyc3RcIikpKToobz1vP286ci5wYXJlbnQoKS5kYXRhKFwidWlkXCIpLGk9dGhpcy5lbGVtZW50LmZpbmQoXCJbXCIrJCtcIj0nXCIrbytcIiddXCIpKSxyLmFkZChpKS50b2dnbGVDbGFzcyhrLG4pKX0sX2F0dHJpYnV0ZXM6ZnVuY3Rpb24oZSx0KXtlLmF0dHIoYy5hdHRyKFwib3ZlcmZsb3dcIiksdC5vdmVyZmxvd3x8ail9LF9yZW5kZXJPdmVyZmxvdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1ZLm92ZXJmbG93Q29udGFpbmVyO3Qub3ZlcmZsb3dBbmNob3I9ZShZLm92ZXJmbG93QW5jaG9yKS5hZGRDbGFzcyhmKSx0LmVsZW1lbnQuYXBwZW5kKHQub3ZlcmZsb3dBbmNob3IpLHQuaXNNb2JpbGU/KHQub3ZlcmZsb3dBbmNob3IuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImttLWljb24ga20tbW9yZVwiPjwvc3Bhbj4nKSxuPWwobikpOnQub3ZlcmZsb3dBbmNob3IuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktbW9yZVwiPjwvc3Bhbj4nKSx0LnBvcHVwPW5ldyBjLnVpLlBvcHVwKG4se29yaWdpbjpcImJvdHRvbSByaWdodFwiLHBvc2l0aW9uOlwidG9wIHJpZ2h0XCIsYW5jaG9yOnQub3ZlcmZsb3dBbmNob3IsYW5pbWF0aW9uOnQuYW5pbWF0aW9uLGFwcGVuZFRvOnQuaXNNb2JpbGU/ZSh0LmlzTW9iaWxlKS5jaGlsZHJlbihcIi5rbS1wYW5lXCIpOm51bGwsY29weUFuY2hvclN0eWxlczohMSxvcGVuOmZ1bmN0aW9uKG4pe3ZhciBpPWMud3JhcCh0LnBvcHVwLmVsZW1lbnQpLmFkZENsYXNzKFwiay1vdmVyZmxvdy13cmFwcGVyXCIpO3QuaXNNb2JpbGU/dC5wb3B1cC5jb250YWluZXIuY3NzKFwibWF4LWhlaWdodFwiLHBhcnNlRmxvYXQoZShcIi5rbS1jb250ZW50OnZpc2libGVcIikuaW5uZXJIZWlnaHQoKSktMTUrXCJweFwiKTppLmNzcyhcIm1hcmdpbi1sZWZ0XCIsKGkub3V0ZXJXaWR0aCgpLWkud2lkdGgoKSkvMisxKSx0LnRyaWdnZXIoVikmJm4ucHJldmVudERlZmF1bHQoKX0sY2xvc2U6ZnVuY3Rpb24oZSl7dC50cmlnZ2VyKFUpJiZlLnByZXZlbnREZWZhdWx0KCl9fSksdC5wb3B1cC5jb250YWluZXI9dC5pc01vYmlsZT90LnBvcHVwLmVsZW1lbnQuZmluZChcIi5cIitGKTp0LnBvcHVwLmVsZW1lbnQsdC5wb3B1cC5jb250YWluZXIuYXR0cigkLHRoaXMudWlkKX0sX3RvZ2dsZU92ZXJmbG93QW5jaG9yOmZ1bmN0aW9uKCl7dGhpcy5vdmVyZmxvd0FuY2hvci5jc3ModGhpcy5wb3B1cC5lbGVtZW50LmNoaWxkcmVuKFwiOm5vdCguXCIrcStcIiwgLlwiK3crXCIpXCIpLmxlbmd0aD4wP3t2aXNpYmlsaXR5OlwidmlzaWJsZVwiLHdpZHRoOlwiXCJ9Ont2aXNpYmlsaXR5OlwiaGlkZGVuXCIsd2lkdGg6XCIxcHhcIn0pfSxfYnV0dG9uQ2xpY2s6ZnVuY3Rpb24obil7dmFyIGkscixvLGEscyxsLGMsZCx1LHA9dGhpcztpZihuLnByZXZlbnREZWZhdWx0KCkscj1lKG4udGFyZ2V0KS5jbG9zZXN0KFwiLlwiK2YscC5lbGVtZW50KSwhci5oYXNDbGFzcyh6KSYmKCFyLmxlbmd0aCYmcC5wb3B1cCYmKHI9ZShuLnRhcmdldCkuY2xvc2VzdChcIi5cIitnLHAucG9wdXAuY29udGFpbmVyKSksYT1yLmhhc0NsYXNzKGcpP3IucGFyZW50KFwibGlcIikuaGFzQ2xhc3MoeCk6ci5oYXNDbGFzcyh4KSwhYSkpe2lmKG4udGFyZ2V0LmNsb3Nlc3QoXCIuXCIrSSkubGVuZ3RoKXJldHVybiBwLl90b2dnbGUobiksdDt1PXIuYXR0cihcImlkXCIpP3IuYXR0cihcImlkXCIpLnJlcGxhY2UoLyhfb3ZlcmZsb3ckKS8sXCJcIik6dCxyLmhhc0NsYXNzKG0pPyhsPXIuZGF0YShcImdyb3VwXCIpLGM9aChyLmRhdGEoXCJ0b2dnbGVcIikpP3IuZGF0YShcInRvZ2dsZVwiKTpudWxsLHAudG9nZ2xlKHIpLHM9ci5oYXNDbGFzcyhrKSxkPXt0YXJnZXQ6cixncm91cDpsLGNoZWNrZWQ6cyxpZDp1fSxjJiZjLmNhbGwocCxkKSxwLnRyaWdnZXIoTyxkKSk6KGM9aChyLmRhdGEoXCJjbGlja1wiKSk/ci5kYXRhKFwiY2xpY2tcIik6bnVsbCxkPXt0YXJnZXQ6cixpZDp1fSxjJiZjLmNhbGwocCxkKSxwLnRyaWdnZXIoTCxkKSksci5oYXNDbGFzcyhnKSYmcC5wb3B1cC5jbG9zZSgpLG89ci5jbG9zZXN0KFwiLmstc3BsaXQtY29udGFpbmVyXCIpLG9bMF0mJihpPW8uZGF0YShcImtlbmRvUG9wdXBcIiksKGk/aTpvLnBhcmVudHMoXCIua20tcG9wdXAtd3JhcHBlclwiKS5kYXRhKFwia2VuZG9Qb3B1cFwiKSkuY2xvc2UoKSl9fSxfdG9nZ2xlOmZ1bmN0aW9uKHQpe3ZhciBuLGk9ZSh0LnRhcmdldCkuY2xvc2VzdChcIi5cIitfKSxyPWkuZGF0YShcImtlbmRvUG9wdXBcIik7dC5wcmV2ZW50RGVmYXVsdCgpLGkuaGFzQ2xhc3MoeCl8fChuPXIuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpP3RoaXMudHJpZ2dlcihOLHt0YXJnZXQ6aX0pOnRoaXMudHJpZ2dlcihILHt0YXJnZXQ6aX0pLG58fHIudG9nZ2xlKCkpfSxfdG9nZ2xlT3ZlcmZsb3c6ZnVuY3Rpb24oKXt0aGlzLnBvcHVwLnRvZ2dsZSgpfSxfcmVzaXplOmZ1bmN0aW9uKGUpe3ZhciB0PWUud2lkdGg7dGhpcy5vcHRpb25zLnJlc2l6YWJsZSYmKHRoaXMucG9wdXAuY2xvc2UoKSx0aGlzLl9zaHJpbmsodCksdGhpcy5fc3RyZXRjaCh0KSx0aGlzLl9tYXJrVmlzaWJsZXMoKSx0aGlzLl90b2dnbGVPdmVyZmxvd0FuY2hvcigpKX0sX2NoaWxkcmVuV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCI6dmlzaWJsZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dCs9ZSh0aGlzKS5vdXRlcldpZHRoKCEwKX0pLE1hdGguY2VpbCh0KX0sX3NocmluazpmdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYoZTx0aGlzLl9jaGlsZHJlbldpZHRoKCkpZm9yKG49dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiOnZpc2libGU6bm90KFtkYXRhLW92ZXJmbG93PSduZXZlciddLCAuXCIreitcIilcIiksaT1uLmxlbmd0aC0xO2k+PTAmJih0PW4uZXEoaSksIShlPnRoaXMuX2NoaWxkcmVuV2lkdGgoKSkpO2ktLSl0aGlzLl9oaWRlSXRlbSh0KX0sX3N0cmV0Y2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2lmKGU+dGhpcy5fY2hpbGRyZW5XaWR0aCgpKWZvcihuPXRoaXMuZWxlbWVudC5jaGlsZHJlbihcIjpoaWRkZW5cIiksaT0wO24ubGVuZ3RoPmkmJih0PW4uZXEoaSksIShlPHRoaXMuX2NoaWxkcmVuV2lkdGgoKSkmJnRoaXMuX3Nob3dJdGVtKHQsZSkpO2krKyk7fSxfaGlkZUl0ZW06ZnVuY3Rpb24oZSl7ZS5oaWRlKCksdGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5jb250YWluZXIuZmluZChcIj5saVtkYXRhLXVpZD0nXCIrZS5kYXRhKFwidWlkXCIpK1wiJ11cIikucmVtb3ZlQ2xhc3MocSl9LF9zaG93SXRlbTpmdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aCYmdD50aGlzLl9jaGlsZHJlbldpZHRoKCkrZS5vdXRlcldpZHRoKCEwKT8oZS5zaG93KCksdGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5jb250YWluZXIuZmluZChcIj5saVtkYXRhLXVpZD0nXCIrZS5kYXRhKFwidWlkXCIpK1wiJ11cIikuYWRkQ2xhc3MocSksITApOiExfSxfbWFya1Zpc2libGVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wb3B1cC5jb250YWluZXIuY2hpbGRyZW4oKSx0PXRoaXMuZWxlbWVudC5jaGlsZHJlbihcIjpub3QoLmstb3ZlcmZsb3ctYW5jaG9yKVwiKSxuPWUuZmlsdGVyKFwiOm5vdCguay1vdmVyZmxvdy1oaWRkZW4pXCIpLGk9dC5maWx0ZXIoXCI6dmlzaWJsZVwiKTtlLmFkZCh0KS5yZW1vdmVDbGFzcyhSK1wiIFwiK0IpLG4uZmlyc3QoKS5hZGQoaS5maXJzdCgpKS5hZGRDbGFzcyhSKSxuLmxhc3QoKS5hZGQoaS5sYXN0KCkpLmFkZENsYXNzKEIpfX0pO2MudWkucGx1Z2luKEspfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IERhdGUoMjEwMCwwLDEpO3JldHVybiB0LnNldE1pbnV0ZXMoLWUpLHR9ZnVuY3Rpb24gaShlKXtlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gcih0KXt2YXIgbixpPW8uZ2V0Q3VsdHVyZSh0LmN1bHR1cmUpLmNhbGVuZGFycy5zdGFuZGFyZC5wYXR0ZXJuczt0LmZvcm1hdD1jKHQuZm9ybWF0fHxpLmcpLHQudGltZUZvcm1hdD1uPWModC50aW1lRm9ybWF0fHxpLnQpLG8uRGF0ZVZpZXcubm9ybWFsaXplKHQpLC0xPT09ZS5pbkFycmF5KG4sdC5wYXJzZUZvcm1hdHMpJiZ0LnBhcnNlRm9ybWF0cy5zcGxpY2UoMSwwLG4pfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8uVGltZVZpZXcscz1vLnBhcnNlRGF0ZSxsPW8uX2FjdGl2ZUVsZW1lbnQsYz1vLl9leHRyYWN0Rm9ybWF0LGQ9by5jYWxlbmRhcix1PWQuaXNJblJhbmdlLGg9ZC5yZXN0cmljdFZhbHVlLHA9ZC5pc0VxdWFsRGF0ZVBhcnQsZj1hLmdldE1pbGxpc2Vjb25kcyxnPW8udWksbT1nLldpZGdldCx2PVwib3BlblwiLF89XCJjbG9zZVwiLHk9XCJjaGFuZ2VcIix3PVwiLmtlbmRvRGF0ZVRpbWVQaWNrZXJcIixiPVwiY2xpY2tcIit3LGs9XCJkaXNhYmxlZFwiLHg9XCJyZWFkb25seVwiLEM9XCJrLXN0YXRlLWRlZmF1bHRcIixTPVwiay1zdGF0ZS1mb2N1c2VkXCIsVD1cImstc3RhdGUtaG92ZXJcIixEPVwiay1zdGF0ZS1kaXNhYmxlZFwiLEE9XCJtb3VzZWVudGVyXCIrdytcIiBtb3VzZWxlYXZlXCIrdyxFPVwibW91c2Vkb3duXCIrdyxNPVwibW9udGhcIixQPVwiPHNwYW4vPlwiLEk9XCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix6PVwiYXJpYS1leHBhbmRlZFwiLEY9XCJhcmlhLWhpZGRlblwiLFI9XCJhcmlhLW93bnNcIixCPVwiYXJpYS1kaXNhYmxlZFwiLEw9XCJhcmlhLXJlYWRvbmx5XCIsTz1EYXRlLEg9bmV3IE8oMTkwMCwwLDEpLE49bmV3IE8oMjA5OSwxMSwzMSksVj17dmlldzpcImRhdGVcIn0sVT17dmlldzpcInRpbWVcIn0sVz1lLmV4dGVuZCxqPW0uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO20uZm4uaW5pdC5jYWxsKGksZSx0KSxlPWkuZWxlbWVudCx0PWkub3B0aW9ucyx0Lm1pbj1zKGUuYXR0cihcIm1pblwiKSl8fHModC5taW4pLHQubWF4PXMoZS5hdHRyKFwibWF4XCIpKXx8cyh0Lm1heCkscih0KSxpLl93cmFwcGVyKCksaS5fdmlld3MoKSxpLl9pY29ucygpLGkuX3Jlc2V0KCksaS5fdGVtcGxhdGUoKTt0cnl7ZVswXS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0XCIpfWNhdGNoKGEpe2VbMF0udHlwZT1cInRleHRcIn1lLmFkZENsYXNzKFwiay1pbnB1dFwiKS5hdHRyKHtyb2xlOlwiY29tYm9ib3hcIixcImFyaWEtZXhwYW5kZWRcIjohMX0pLGkuX21pZG5pZ2h0PWYodC5taW4pK2YodC5tYXgpPT09MCxuPWUuaXMoXCJbZGlzYWJsZWRdXCIpLG4/aS5lbmFibGUoITEpOmkucmVhZG9ubHkoZS5pcyhcIltyZWFkb25seV1cIikpLGkuX29sZD1pLl91cGRhdGUodC52YWx1ZXx8aS5lbGVtZW50LnZhbCgpKSxpLl9vbGRUZXh0PWUudmFsKCksby5ub3RpZnkoaSl9LG9wdGlvbnM6e25hbWU6XCJEYXRlVGltZVBpY2tlclwiLHZhbHVlOm51bGwsZm9ybWF0OlwiXCIsdGltZUZvcm1hdDpcIlwiLGN1bHR1cmU6XCJcIixwYXJzZUZvcm1hdHM6W10sZGF0ZXM6W10sbWluOm5ldyBPKEgpLG1heDpuZXcgTyhOKSxpbnRlcnZhbDozMCxoZWlnaHQ6MjAwLGZvb3RlcjpcIlwiLHN0YXJ0Ok0sZGVwdGg6TSxhbmltYXRpb246e30sbW9udGg6e30sQVJJQVRlbXBsYXRlOidDdXJyZW50IGZvY3VzZWQgZGF0ZSBpcyAjPWtlbmRvLnRvU3RyaW5nKGRhdGEuY3VycmVudCwgXCJkXCIpIyd9LGV2ZW50czpbdixfLHldLHNldE9wdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLGE9dGhpcyxsPWEuX3ZhbHVlO20uZm4uc2V0T3B0aW9ucy5jYWxsKGEsZSksZT1hLm9wdGlvbnMsZS5taW49dD1zKGUubWluKSxlLm1heD1uPXMoZS5tYXgpLHIoZSksaT1lLnZhbHVlfHxhLl92YWx1ZXx8YS5kYXRlVmlldy5fY3VycmVudCx0JiYhcCh0LGkpJiYodD1uZXcgTyhIKSksbiYmIXAobixpKSYmKG49bmV3IE8oTikpLGEuZGF0ZVZpZXcuc2V0T3B0aW9ucyhlKSxhLnRpbWVWaWV3LnNldE9wdGlvbnMoVyh7fSxlLHtmb3JtYXQ6ZS50aW1lRm9ybWF0LG1pbjp0LG1heDpufSkpLGwmJihhLmVsZW1lbnQudmFsKG8udG9TdHJpbmcobCxlLmZvcm1hdCxlLmN1bHR1cmUpKSxhLl91cGRhdGVBUklBKGwpKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMscj1uLmVsZW1lbnQub2ZmKHcpLGE9bi5fZGF0ZUljb24ub2ZmKHcpLHM9bi5fdGltZUljb24ub2ZmKHcpLGM9bi5faW5wdXRXcmFwcGVyLm9mZih3KSxkPXQucmVhZG9ubHksdT10LmRpc2FibGU7ZHx8dT8oYy5hZGRDbGFzcyh1P0Q6QykucmVtb3ZlQ2xhc3ModT9DOkQpLHIuYXR0cihrLHUpLmF0dHIoeCxkKS5hdHRyKEIsdSkuYXR0cihMLGQpKTooYy5hZGRDbGFzcyhDKS5yZW1vdmVDbGFzcyhEKS5vbihBLG4uX3RvZ2dsZUhvdmVyKSxyLnJlbW92ZUF0dHIoaykucmVtb3ZlQXR0cih4KS5hdHRyKEIsITEpLmF0dHIoTCwhMSkub24oXCJrZXlkb3duXCIrdyxlLnByb3h5KG4uX2tleWRvd24sbikpLm9uKFwiZm9jdXNcIit3LGZ1bmN0aW9uKCl7bi5faW5wdXRXcmFwcGVyLmFkZENsYXNzKFMpfSkub24oXCJmb2N1c291dFwiK3csZnVuY3Rpb24oKXtuLl9pbnB1dFdyYXBwZXIucmVtb3ZlQ2xhc3MoUyksci52YWwoKSE9PW4uX29sZFRleHQmJm4uX2NoYW5nZShyLnZhbCgpKSxuLmNsb3NlKFwiZGF0ZVwiKSxuLmNsb3NlKFwidGltZVwiKX0pLGEub24oRSxpKS5vbihiLGZ1bmN0aW9uKCl7bi50b2dnbGUoXCJkYXRlXCIpLG8uc3VwcG9ydC50b3VjaHx8clswXT09PWwoKXx8ci5mb2N1cygpfSkscy5vbihFLGkpLm9uKGIsZnVuY3Rpb24oKXtuLnRvZ2dsZShcInRpbWVcIiksby5zdXBwb3J0LnRvdWNofHxyWzBdPT09bCgpfHxyLmZvY3VzKCl9KSl9LHJlYWRvbmx5OmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTplPT09dD8hMDplLGRpc2FibGU6ITF9KX0sZW5hYmxlOmZ1bmN0aW9uKGUpe3RoaXMuX2VkaXRhYmxlKHtyZWFkb25seTohMSxkaXNhYmxlOiEoZT1lPT09dD8hMDplKX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpczttLmZuLmRlc3Ryb3kuY2FsbChlKSxlLmRhdGVWaWV3LmRlc3Ryb3koKSxlLnRpbWVWaWV3LmRlc3Ryb3koKSxlLmVsZW1lbnQub2ZmKHcpLGUuX2RhdGVJY29uLm9mZih3KSxlLl90aW1lSWNvbi5vZmYodyksZS5faW5wdXRXcmFwcGVyLm9mZih3KSxlLl9mb3JtJiZlLl9mb3JtLm9mZihcInJlc2V0XCIsZS5fcmVzZXRIYW5kbGVyKX0sY2xvc2U6ZnVuY3Rpb24oZSl7XCJ0aW1lXCIhPT1lJiYoZT1cImRhdGVcIiksdGhpc1tlK1wiVmlld1wiXS5jbG9zZSgpfSxvcGVuOmZ1bmN0aW9uKGUpe1widGltZVwiIT09ZSYmKGU9XCJkYXRlXCIpLHRoaXNbZStcIlZpZXdcIl0ub3BlbigpfSxtaW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1pblwiLGUpfSxtYXg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29wdGlvbihcIm1heFwiLGUpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJ0aW1lVmlld1wiO1widGltZVwiIT09ZT9lPVwiZGF0ZVwiOnQ9XCJkYXRlVmlld1wiLHRoaXNbZStcIlZpZXdcIl0udG9nZ2xlKCksdGhpc1t0XS5jbG9zZSgpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlPT09dD9uLl92YWx1ZToobi5fb2xkPW4uX3VwZGF0ZShlKSxudWxsPT09bi5fb2xkJiZuLmVsZW1lbnQudmFsKFwiXCIpLG4uX29sZFRleHQ9bi5lbGVtZW50LnZhbCgpLHQpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT10Ll91cGRhdGUoZSksK3QuX29sZCE9K2UmJih0Ll9vbGQ9ZSx0Ll9vbGRUZXh0PXQuZWxlbWVudC52YWwoKSx0LnRyaWdnZXIoeSksdC5lbGVtZW50LnRyaWdnZXIoeSkpfSxfb3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIHIsbyxhPXRoaXMsbD1hLm9wdGlvbnMsYz1hLnRpbWVWaWV3LGQ9Yy5vcHRpb25zLHU9YS5fdmFsdWV8fGEuX29sZDtpZihpPT09dClyZXR1cm4gbFtlXTtpZihpPXMoaSxsLnBhcnNlRm9ybWF0cyxsLmN1bHR1cmUpKXtpZihsLm1pbi5nZXRUaW1lKCk9PT1sLm1heC5nZXRUaW1lKCkmJihkLmRhdGVzPVtdKSxsW2VdPW5ldyBPKGkuZ2V0VGltZSgpKSxhLmRhdGVWaWV3W2VdKGkpLGEuX21pZG5pZ2h0PWYobC5taW4pK2YobC5tYXgpPT09MCx1JiYocj1wKGwubWluLHUpLG89cChsLm1heCx1KSkscnx8byl7aWYoZFtlXT1pLHImJiFvJiYoZC5tYXg9bihsLmludGVydmFsKSksbyl7aWYoYS5fbWlkbmlnaHQpcmV0dXJuIGMuZGF0YUJpbmQoW05dKSx0O3J8fChkLm1pbj1IKX19ZWxzZSBkLm1heD1OLGQubWluPUg7Yy5iaW5kKCl9fSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKFQsXCJtb3VzZWVudGVyXCI9PT10LnR5cGUpfSxfdXBkYXRlOmZ1bmN0aW9uKHQpe3ZhciBpLHIsYSxsLGMsZD10aGlzLGY9ZC5vcHRpb25zLGc9Zi5taW4sbT1mLm1heCx2PWYuZGF0ZXMsXz1kLnRpbWVWaWV3LHk9ZC5fdmFsdWUsdz1zKHQsZi5wYXJzZUZvcm1hdHMsZi5jdWx0dXJlKSxiPW51bGw9PT13JiZudWxsPT09eXx8dyBpbnN0YW5jZW9mIERhdGUmJnkgaW5zdGFuY2VvZiBEYXRlO3JldHVybit3PT09K3kmJmI/KGM9by50b1N0cmluZyh3LGYuZm9ybWF0LGYuY3VsdHVyZSksYyE9PXQmJmQuZWxlbWVudC52YWwobnVsbD09PXc/dDpjKSx3KToobnVsbCE9PXcmJnAodyxnKT93PWgodyxnLG0pOnUodyxnLG0pfHwodz1udWxsKSxkLl92YWx1ZT13LF8udmFsdWUodyksZC5kYXRlVmlldy52YWx1ZSh3KSx3JiYoYT1kLl9vbGQscj1fLm9wdGlvbnMsdlswXSYmKHY9ZS5ncmVwKHYsZnVuY3Rpb24oZSl7cmV0dXJuIHAodyxlKX0pLHZbMF0mJihfLmRhdGFCaW5kKHYpLGw9ITApKSxsfHwocCh3LGcpJiYoci5taW49ZyxyLm1heD1uKGYuaW50ZXJ2YWwpLGk9ITApLHAodyxtKSYmKGQuX21pZG5pZ2h0PyhfLmRhdGFCaW5kKFtOXSksbD0hMCk6KHIubWF4PW0saXx8KHIubWluPUgpLGk9ITApKSksIWwmJighYSYmaXx8YSYmIXAoYSx3KSkmJihpfHwoci5tYXg9TixyLm1pbj1IKSxfLmJpbmQoKSkpLGQuZWxlbWVudC52YWwodz9vLnRvU3RyaW5nKHcsZi5mb3JtYXQsZi5jdWx0dXJlKTp0KSxkLl91cGRhdGVBUklBKHcpLHcpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kYXRlVmlldyxpPXQudGltZVZpZXcscj10LmVsZW1lbnQudmFsKCksYT1uLnBvcHVwLnZpc2libGUoKTtlLmFsdEtleSYmZS5rZXlDb2RlPT09by5rZXlzLkRPV04/dC50b2dnbGUoYT9cInRpbWVcIjpcImRhdGVcIik6YT8obi5tb3ZlKGUpLHQuX3VwZGF0ZUFSSUEobi5fY3VycmVudCkpOmkucG9wdXAudmlzaWJsZSgpP2kubW92ZShlKTplLmtleUNvZGU9PT1vLmtleXMuRU5URVImJnIhPT10Ll9vbGRUZXh0JiZ0Ll9jaGFuZ2Uocil9LF92aWV3czpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbCxjPXRoaXMsZD1jLmVsZW1lbnQsaD1jLm9wdGlvbnMscD1kLmF0dHIoXCJpZFwiKTtjLmRhdGVWaWV3PWU9bmV3IG8uRGF0ZVZpZXcoVyh7fSxoLHtpZDpwLGFuY2hvcjpjLndyYXBwZXIsY2hhbmdlOmZ1bmN0aW9uKCl7dmFyIHQsbj1lLmNhbGVuZGFyLnZhbHVlKCksaT0rbixyPStoLm1pbixvPStoLm1heDsoaT09PXJ8fGk9PT1vKSYmKHQ9bmV3IE8oK2MuX3ZhbHVlKSx0LnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksbi5nZXREYXRlKCkpLHUodCxyLG8pJiYobj10KSksYy5fY2hhbmdlKG4pLGMuY2xvc2UoXCJkYXRlXCIpfSxjbG9zZTpmdW5jdGlvbihlKXtjLnRyaWdnZXIoXyxWKT9lLnByZXZlbnREZWZhdWx0KCk6KGQuYXR0cih6LCExKSxuLmF0dHIoRiwhMCksdC5wb3B1cC52aXNpYmxlKCl8fGQucmVtb3ZlQXR0cihSKSl9LG9wZW46ZnVuY3Rpb24odCl7Yy50cmlnZ2VyKHYsVik/dC5wcmV2ZW50RGVmYXVsdCgpOihjLmVsZW1lbnQudmFsKCkhPT1jLl9vbGRUZXh0JiYobD1zKGQudmFsKCksaC5wYXJzZUZvcm1hdHMsaC5jdWx0dXJlKSxjLmRhdGVWaWV3W2w/XCJjdXJyZW50XCI6XCJ2YWx1ZVwiXShsKSksbi5hdHRyKEYsITEpLGQuYXR0cih6LCEwKS5hdHRyKFIsZS5fZGF0ZVZpZXdJRCksYy5fdXBkYXRlQVJJQShsKSl9fSkpLG49ZS5kaXYscj1oLm1pbi5nZXRUaW1lKCksYy50aW1lVmlldz10PW5ldyBhKHtpZDpwLHZhbHVlOmgudmFsdWUsYW5jaG9yOmMud3JhcHBlcixhbmltYXRpb246aC5hbmltYXRpb24sZm9ybWF0OmgudGltZUZvcm1hdCxjdWx0dXJlOmguY3VsdHVyZSxoZWlnaHQ6aC5oZWlnaHQsaW50ZXJ2YWw6aC5pbnRlcnZhbCxtaW46bmV3IE8oSCksbWF4Om5ldyBPKE4pLGRhdGVzOnI9PT1oLm1heC5nZXRUaW1lKCk/W25ldyBEYXRlKHIpXTpbXSxwYXJzZUZvcm1hdHM6aC5wYXJzZUZvcm1hdHMsY2hhbmdlOmZ1bmN0aW9uKG4saSl7bj10Ll9wYXJzZShuKSxoLm1pbj5uPyhuPW5ldyBPKCtoLm1pbiksdC5vcHRpb25zLm1pbj1uKTpuPmgubWF4JiYobj1uZXcgTygraC5tYXgpLHQub3B0aW9ucy5tYXg9biksaT8oYy5fdGltZVNlbGVjdGVkPSEwLGMuX2NoYW5nZShuKSk6KGQudmFsKG8udG9TdHJpbmcobixoLmZvcm1hdCxoLmN1bHR1cmUpKSxlLnZhbHVlKG4pLGMuX3VwZGF0ZUFSSUEobikpfSxjbG9zZTpmdW5jdGlvbih0KXtjLnRyaWdnZXIoXyxVKT90LnByZXZlbnREZWZhdWx0KCk6KGkuYXR0cihGLCEwKSxkLmF0dHIoeiwhMSksZS5wb3B1cC52aXNpYmxlKCl8fGQucmVtb3ZlQXR0cihSKSl9LG9wZW46ZnVuY3Rpb24oZSl7dC5fYWRqdXN0TGlzdFdpZHRoKCksYy50cmlnZ2VyKHYsVSk/ZS5wcmV2ZW50RGVmYXVsdCgpOihpLmF0dHIoRiwhMSksZC5hdHRyKHosITApLmF0dHIoUix0Ll90aW1lVmlld0lEKSx0Lm9wdGlvbnMuYWN0aXZlKHQuY3VycmVudCgpKSl9LGFjdGl2ZTpmdW5jdGlvbihlKXtkLnJlbW92ZUF0dHIoSSksZSYmZC5hdHRyKEksdC5fb3B0aW9uSUQpfX0pLGk9dC51bH0sX2ljb25zOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5uZXh0KFwic3Bhbi5rLXNlbGVjdFwiKSx0WzBdfHwodD1lKCc8c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1zZWxlY3RcIj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1jYWxlbmRhclwiPnNlbGVjdDwvc3Bhbj48c3BhbiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwiay1pY29uIGstaS1jbG9ja1wiPnNlbGVjdDwvc3Bhbj48L3NwYW4+JykuaW5zZXJ0QWZ0ZXIoaSkpLHQ9dC5jaGlsZHJlbigpLG4uX2RhdGVJY29uPXQuZXEoMCkuYXR0cih7cm9sZTpcImJ1dHRvblwiLFwiYXJpYS1jb250cm9sc1wiOm4uZGF0ZVZpZXcuX2RhdGVWaWV3SUR9KSxuLl90aW1lSWNvbj10LmVxKDEpLmF0dHIoe3JvbGU6XCJidXR0b25cIixcImFyaWEtY29udHJvbHNcIjpuLnRpbWVWaWV3Ll90aW1lVmlld0lEfSl9LF93cmFwcGVyOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5lbGVtZW50O3Q9aS5wYXJlbnRzKFwiLmstZGF0ZXRpbWVwaWNrZXJcIiksdFswXXx8KHQ9aS53cmFwKFApLnBhcmVudCgpLmFkZENsYXNzKFwiay1waWNrZXItd3JhcCBrLXN0YXRlLWRlZmF1bHRcIiksdD10LndyYXAoUCkucGFyZW50KCkpLHRbMF0uc3R5bGUuY3NzVGV4dD1pWzBdLnN0eWxlLmNzc1RleHQsaS5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDppWzBdLnN0eWxlLmhlaWdodH0pLG4ud3JhcHBlcj10LmFkZENsYXNzKFwiay13aWRnZXQgay1kYXRldGltZXBpY2tlciBrLWhlYWRlclwiKS5hZGRDbGFzcyhpWzBdLmNsYXNzTmFtZSksbi5faW5wdXRXcmFwcGVyPWUodFswXS5maXJzdENoaWxkKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQuZWxlbWVudCxpPW4uYXR0cihcImZvcm1cIikscj1pP2UoXCIjXCIraSk6bi5jbG9zZXN0KFwiZm9ybVwiKTtyWzBdJiYodC5fcmVzZXRIYW5kbGVyPWZ1bmN0aW9uKCl7dC52YWx1ZShuWzBdLmRlZmF1bHRWYWx1ZSl9LHQuX2Zvcm09ci5vbihcInJlc2V0XCIsdC5fcmVzZXRIYW5kbGVyKSl9LF90ZW1wbGF0ZTpmdW5jdGlvbigpe3RoaXMuX2FyaWFUZW1wbGF0ZT1vLnRlbXBsYXRlKHRoaXMub3B0aW9ucy5BUklBVGVtcGxhdGUpfSxfdXBkYXRlQVJJQTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT1uLmRhdGVWaWV3LmNhbGVuZGFyO24uZWxlbWVudC5yZW1vdmVBdHRyKEkpLGkmJih0PWkuX2NlbGwsdC5hdHRyKFwiYXJpYS1sYWJlbFwiLG4uX2FyaWFUZW1wbGF0ZSh7Y3VycmVudDplfHxpLmN1cnJlbnQoKX0pKSxuLmVsZW1lbnQuYXR0cihJLHQuYXR0cihcImlkXCIpKSl9fSk7Zy5wbHVnaW4oail9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gdi50ZXN0KGUpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIG0udGVzdChlKXx8L15cXGQrJC8udGVzdChlKVxufWZ1bmN0aW9uIHIoZSl7cmV0dXJuIW4oZSkmJiFpKGUpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgaT1wYXJzZUludChlLDEwKTtyZXR1cm4gbihlKSYmKGk9TWF0aC5mbG9vcihpKnQvMTAwKSksaX1mdW5jdGlvbiBhKGUsbil7cmV0dXJuIGZ1bmN0aW9uKGkscil7dmFyIG8sYT10aGlzLmVsZW1lbnQuZmluZChpKS5kYXRhKEUpO3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoP2FbZV06KGFbZV09cixuJiYobz10aGlzLmVsZW1lbnQuZGF0YShcImtlbmRvXCIrdGhpcy5vcHRpb25zLm5hbWUpLG8ucmVzaXplKCEwKSksdCl9fWZ1bmN0aW9uIHMoZSl7dmFyIHQ9dGhpcyxuPWUub3JpZW50YXRpb247dC5vd25lcj1lLHQuX2VsZW1lbnQ9ZS5lbGVtZW50LHQub3JpZW50YXRpb249bixwKHQsbj09PVM/YzpsKSx0Ll9yZXNpemFibGU9bmV3IGQudWkuUmVzaXphYmxlKGUuZWxlbWVudCx7b3JpZW50YXRpb246bixoYW5kbGU6XCIuay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrbitcIltkYXRhLW1hcmtlcj1cIitlLl9tYXJrZXIrXCJdXCIsaGludDpmKHQuX2NyZWF0ZUhpbnQsdCksc3RhcnQ6Zih0Ll9zdGFydCx0KSxtYXg6Zih0Ll9tYXgsdCksbWluOmYodC5fbWluLHQpLGludmFsaWRDbGFzczpcImstcmVzdHJpY3RlZC1zaXplLVwiK24scmVzaXplZW5kOmYodC5fc3RvcCx0KX0pfXZhciBsLGMsZD13aW5kb3cua2VuZG8sdT1kLnVpLGg9ZC5rZXlzLHA9ZS5leHRlbmQsZj1lLnByb3h5LGc9dS5XaWRnZXQsbT0vXlxcZCsoXFwuXFxkKyk/cHgkL2ksdj0vXlxcZCsoXFwuXFxkKyk/JSQvaSxfPVwiLmtlbmRvU3BsaXR0ZXJcIix5PVwiZXhwYW5kXCIsdz1cImNvbGxhcHNlXCIsYj1cImNvbnRlbnRMb2FkXCIsaz1cImVycm9yXCIseD1cInJlc2l6ZVwiLEM9XCJsYXlvdXRDaGFuZ2VcIixTPVwiaG9yaXpvbnRhbFwiLFQ9XCJ2ZXJ0aWNhbFwiLEQ9XCJtb3VzZWVudGVyXCIsQT1cImNsaWNrXCIsRT1cInBhbmVcIixNPVwibW91c2VsZWF2ZVwiLFA9XCJrLXN0YXRlLWZvY3VzZWRcIixJPVwiay1cIitFLHo9XCIuXCIrSSxGPWcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT10aGlzO2cuZm4uaW5pdC5jYWxsKGksZSx0KSxpLndyYXBwZXI9aS5lbGVtZW50LG49aS5vcHRpb25zLm9yaWVudGF0aW9uLnRvTG93ZXJDYXNlKCkhPVQsaS5vcmllbnRhdGlvbj1uP1M6VCxpLl9kaW1lbnNpb249bj9cIndpZHRoXCI6XCJoZWlnaHRcIixpLl9rZXlzPXtkZWNyZWFzZTpuP2guTEVGVDpoLlVQLGluY3JlYXNlOm4/aC5SSUdIVDpoLkRPV059LGkuX3Jlc2l6ZVN0ZXA9MTAsaS5fbWFya2VyPWQuZ3VpZCgpLnN1YnN0cmluZygwLDgpLGkuX2luaXRQYW5lcygpLGkucmVzaXppbmc9bmV3IHMoaSksaS5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKFwiaW5pdFwiK18pfSxldmVudHM6W3ksdyxiLGsseCxDXSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucy5vcmllbnRhdGlvbjt0LmVsZW1lbnQuY2hpbGRyZW4oXCIuay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrbikub24oXCJrZXlkb3duXCIrXyxlLnByb3h5KHQuX2tleWRvd24sdCkpLm9uKFwibW91c2Vkb3duXCIrXyxmdW5jdGlvbihlKXtlLmN1cnJlbnRUYXJnZXQuZm9jdXMoKX0pLm9uKFwiZm9jdXNcIitfLGZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhQKX0pLm9uKFwiYmx1clwiK18sZnVuY3Rpb24obil7ZShuLmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFApLHQucmVzaXppbmcmJnQucmVzaXppbmcuZW5kKCl9KS5vbihEK18sZnVuY3Rpb24oKXtlKHRoaXMpLmFkZENsYXNzKFwiay1zcGxpdGJhci1cIit0Lm9yaWVudGF0aW9uK1wiLWhvdmVyXCIpfSkub24oTStfLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhcImstc3BsaXRiYXItXCIrdC5vcmllbnRhdGlvbitcIi1ob3ZlclwiKX0pLm9uKFwibW91c2Vkb3duXCIrXyxmdW5jdGlvbigpe3QuX3BhbmVzKCkuYXBwZW5kKFwiPGRpdiBjbGFzcz0nay1zcGxpdHRlci1vdmVybGF5IGstb3ZlcmxheScgLz5cIil9KS5vbihcIm1vdXNldXBcIitfLGZ1bmN0aW9uKCl7dC5fcGFuZXMoKS5jaGlsZHJlbihcIi5rLXNwbGl0dGVyLW92ZXJsYXlcIikucmVtb3ZlKCl9KS5lbmQoKS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLm9uKFwiZGJsY2xpY2tcIitfLGYodC5fdG9nZ2xlUGFuZSx0KSkuY2hpbGRyZW4oXCIuay1jb2xsYXBzZS1uZXh0LCAuay1jb2xsYXBzZS1wcmV2XCIpLm9uKEErXyx0Ll9hcnJvd0NsaWNrKHcpKS5lbmQoKS5jaGlsZHJlbihcIi5rLWV4cGFuZC1uZXh0LCAuay1leHBhbmQtcHJldlwiKS5vbihBK18sdC5fYXJyb3dDbGljayh5KSkuZW5kKCkuZW5kKCksZSh3aW5kb3cpLm9uKFwicmVzaXplXCIrXyt0Ll9tYXJrZXIsZih0LnJlc2l6ZSx0KSl9LF9kZXRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyLWRyYWdnYWJsZS1cIit0Lm9yaWVudGF0aW9uKS5vZmYoXykuZW5kKCkuY2hpbGRyZW4oXCIuay1zcGxpdGJhclwiKS5vZmYoXCJkYmxjbGlja1wiK18pLmNoaWxkcmVuKFwiLmstY29sbGFwc2UtbmV4dCwgLmstY29sbGFwc2UtcHJldiwgLmstZXhwYW5kLW5leHQsIC5rLWV4cGFuZC1wcmV2XCIpLm9mZihfKSxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrXyt0Ll9tYXJrZXIpfSxvcHRpb25zOntuYW1lOlwiU3BsaXR0ZXJcIixvcmllbnRhdGlvbjpTLHBhbmVzOltdfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fZGV0YWNoRXZlbnRzKCksdGhpcy5yZXNpemluZyYmdGhpcy5yZXNpemluZy5kZXN0cm95KCksZC5kZXN0cm95KHRoaXMuZWxlbWVudCksdGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudD1udWxsfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj10LmtleUNvZGUsbz1pLnJlc2l6aW5nLGE9ZSh0LmN1cnJlbnRUYXJnZXQpLHM9aS5fa2V5cyxsPXI9PT1zLmluY3JlYXNlLGM9cj09PXMuZGVjcmVhc2U7bHx8Yz8odC5jdHJsS2V5PyhuPWFbYz9cIm5leHRcIjpcInByZXZcIl0oKSxvJiZvLmlzUmVzaXppbmcoKSYmby5lbmQoKSxuW2kuX2RpbWVuc2lvbl0oKT9pLl90cmlnZ2VyQWN0aW9uKHcsYVtjP1wicHJldlwiOlwibmV4dFwiXSgpKTppLl90cmlnZ2VyQWN0aW9uKHksbikpOm8mJm8ubW92ZSgoYz8tMToxKSppLl9yZXNpemVTdGVwLGEpLHQucHJldmVudERlZmF1bHQoKSk6cj09PWguRU5URVImJm8mJihvLmVuZCgpLHQucHJldmVudERlZmF1bHQoKSl9LF9pbml0UGFuZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMucGFuZXN8fFtdLHQ9dGhpczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJrLXdpZGdldFwiKS5hZGRDbGFzcyhcImstc3BsaXR0ZXJcIikuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKG4saSl7XCJzY3JpcHRcIiE9aS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZ0Ll9pbml0UGFuZShpLGVbbl0pfSksdGhpcy5yZXNpemUoKX0sX2luaXRQYW5lOmZ1bmN0aW9uKHQsbil7dD1lKHQpLmF0dHIoXCJyb2xlXCIsXCJncm91cFwiKS5hZGRDbGFzcyhJKSx0LmRhdGEoRSxuP246e30pLnRvZ2dsZUNsYXNzKFwiay1zY3JvbGxhYmxlXCIsbj9uLnNjcm9sbGFibGUhPT0hMTohMCksdGhpcy5hamF4UmVxdWVzdCh0KX0sYWpheFJlcXVlc3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcztlPXIuZWxlbWVudC5maW5kKGUpLGk9ZS5kYXRhKEUpLHQ9dHx8aS5jb250ZW50VXJsLHQmJihlLmFwcGVuZChcIjxzcGFuIGNsYXNzPSdrLWljb24gay1sb2FkaW5nIGstcGFuZS1sb2FkaW5nJyAvPlwiKSxkLmlzTG9jYWxVcmwodCk/alF1ZXJ5LmFqYXgoe3VybDp0LGRhdGE6bnx8e30sdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwiaHRtbFwiLHN1Y2Nlc3M6ZnVuY3Rpb24odCl7ci5hbmd1bGFyKFwiY2xlYW51cFwiLGZ1bmN0aW9uKCl7cmV0dXJue2VsZW1lbnRzOmUuZ2V0KCl9fSksZS5odG1sKHQpLHIuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czplLmdldCgpfX0pLHIudHJpZ2dlcihiLHtwYW5lOmVbMF19KX0sZXJyb3I6ZnVuY3Rpb24odCxuKXtyLnRyaWdnZXIoayx7cGFuZTplWzBdLHN0YXR1czpuLHhocjp0fSl9fSk6ZS5yZW1vdmVDbGFzcyhcImstc2Nyb2xsYWJsZVwiKS5odG1sKFwiPGlmcmFtZSBzcmM9J1wiK3QrXCInIGZyYW1lYm9yZGVyPScwJyBjbGFzcz0nay1jb250ZW50LWZyYW1lJz5UaGlzIHBhZ2UgcmVxdWlyZXMgZnJhbWVzIGluIG9yZGVyIHRvIHNob3cgY29udGVudDwvaWZyYW1lPlwiKSl9LF90cmlnZ2VyQWN0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50cmlnZ2VyKGUse3BhbmU6dFswXX0pfHx0aGlzW2VdKHRbMF0pfSxfdG9nZ2xlUGFuZTpmdW5jdGlvbih0KXt2YXIgbixpPXRoaXMscj1lKHQudGFyZ2V0KTtyLmNsb3Nlc3QoXCIuay1zcGxpdHRlclwiKVswXT09aS5lbGVtZW50WzBdJiYobj1yLmNoaWxkcmVuKFwiLmstaWNvbjpub3QoLmstcmVzaXplLWhhbmRsZSlcIiksMT09PW4ubGVuZ3RoJiYobi5pcyhcIi5rLWNvbGxhcHNlLXByZXZcIik/aS5fdHJpZ2dlckFjdGlvbih3LHIucHJldigpKTpuLmlzKFwiLmstY29sbGFwc2UtbmV4dFwiKT9pLl90cmlnZ2VyQWN0aW9uKHcsci5uZXh0KCkpOm4uaXMoXCIuay1leHBhbmQtcHJldlwiKT9pLl90cmlnZ2VyQWN0aW9uKHksci5wcmV2KCkpOm4uaXMoXCIuay1leHBhbmQtbmV4dFwiKSYmaS5fdHJpZ2dlckFjdGlvbih5LHIubmV4dCgpKSkpfSxfYXJyb3dDbGljazpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihpKXt2YXIgcixvPWUoaS50YXJnZXQpO28uY2xvc2VzdChcIi5rLXNwbGl0dGVyXCIpWzBdPT1uLmVsZW1lbnRbMF0mJihyPW8uaXMoXCIuay1cIit0K1wiLXByZXZcIik/by5wYXJlbnQoKS5wcmV2KCk6by5wYXJlbnQoKS5uZXh0KCksbi5fdHJpZ2dlckFjdGlvbih0LHIpKX19LF91cGRhdGVTcGxpdEJhcjpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9cIjxkaXYgY2xhc3M9J2staWNvbiBcIitlK1wiJyAvPlwiOlwiXCJ9LHI9dGhpcy5vcmllbnRhdGlvbixvPXQucmVzaXphYmxlIT09ITEmJm4ucmVzaXphYmxlIT09ITEsYT10LmNvbGxhcHNpYmxlLHM9dC5jb2xsYXBzZWQsbD1uLmNvbGxhcHNpYmxlLGM9bi5jb2xsYXBzZWQ7ZS5hZGRDbGFzcyhcImstc3BsaXRiYXIgay1zdGF0ZS1kZWZhdWx0IGstc3BsaXRiYXItXCIrcikuYXR0cihcInJvbGVcIixcInNlcGFyYXRvclwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEoc3x8YykpLnJlbW92ZUNsYXNzKFwiay1zcGxpdGJhci1cIityK1wiLWhvdmVyXCIpLnRvZ2dsZUNsYXNzKFwiay1zcGxpdGJhci1kcmFnZ2FibGUtXCIrcixvJiYhcyYmIWMpLnRvZ2dsZUNsYXNzKFwiay1zcGxpdGJhci1zdGF0aWMtXCIrciwhbyYmIWEmJiFsKS5odG1sKGkoXCJrLWNvbGxhcHNlLXByZXZcIixhJiYhcyYmIWMpK2koXCJrLWV4cGFuZC1wcmV2XCIsYSYmcyYmIWMpK2koXCJrLXJlc2l6ZS1oYW5kbGVcIixvKStpKFwiay1jb2xsYXBzZS1uZXh0XCIsbCYmIWMmJiFzKStpKFwiay1leHBhbmQtbmV4dFwiLGwmJmMmJiFzKSksb3x8YXx8bHx8ZS5yZW1vdmVBdHRyKFwidGFiaW5kZXhcIil9LF91cGRhdGVTcGxpdEJhcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZWxlbWVudC5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLGk9bi5wcmV2QWxsKHopLmZpcnN0KCkuZGF0YShFKSxyPW4ubmV4dEFsbCh6KS5maXJzdCgpLmRhdGEoRSk7ciYmdC5fdXBkYXRlU3BsaXRCYXIobixpLHIpfSl9LF9yZW1vdmVTcGxpdEJhcnM6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuay1zcGxpdGJhclwiKS5yZW1vdmUoKX0sX3BhbmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jaGlsZHJlbih6KX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBuLGksYSxzLGwsYyx1LGgscCxmLGc9dGhpcyxtPWcuZWxlbWVudCx2PW0uY2hpbGRyZW4oeiksXz1nLm9yaWVudGF0aW9uPT1TLHk9bS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpLHc9eS5sZW5ndGgsYj1fP1wid2lkdGhcIjpcImhlaWdodFwiLGs9bVtiXSgpOzA9PT13Pyh3PXYubGVuZ3RoLTEsdi5zbGljZSgwLHcpLmFmdGVyKFwiPGRpdiB0YWJpbmRleD0nMCcgY2xhc3M9J2stc3BsaXRiYXInIGRhdGEtbWFya2VyPSdcIitnLl9tYXJrZXIrXCInIC8+XCIpLGcuX3VwZGF0ZVNwbGl0QmFycygpLHk9bS5jaGlsZHJlbihcIi5rLXNwbGl0YmFyXCIpKTpnLl91cGRhdGVTcGxpdEJhcnMoKSx5LmVhY2goZnVuY3Rpb24oKXtrLT10aGlzW18/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCJdfSksbj0wLGk9MCxhPWUoKSx2LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowfSlbYl0oZnVuY3Rpb24oKXt2YXIgcyxsPWUodGhpcyksYz1sLmRhdGEoRSl8fHt9O2lmKGwucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWNvbGxhcHNlZFwiKSxjLmNvbGxhcHNlZClzPWMuY29sbGFwc2VkU2l6ZT9vKGMuY29sbGFwc2VkU2l6ZSxrKTowLGwuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5hZGRDbGFzcyhcImstc3RhdGUtY29sbGFwc2VkXCIpO2Vsc2V7aWYocihjLnNpemUpKXJldHVybiBhPWEuYWRkKHRoaXMpLHQ7cz1vKGMuc2l6ZSxrKX1yZXR1cm4gaSsrLG4rPXMsc30pLGstPW4scz1hLmxlbmd0aCxsPU1hdGguZmxvb3Ioay9zKSxhLnNsaWNlKDAscy0xKS5jc3MoYixsKS5lbmQoKS5lcShzLTEpLmNzcyhiLGstKHMtMSkqbCksYz0wLHU9Xz9cImhlaWdodFwiOlwid2lkdGhcIixoPV8/XCJsZWZ0XCI6XCJ0b3BcIixwPV8/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCIsMD09PXMmJihmPXYuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIShlKHRoaXMpLmRhdGEoRSl8fHt9KS5jb2xsYXBzZWR9KS5sYXN0KCksZltiXShrK2ZbMF1bcF0pKSxtLmNoaWxkcmVuKCkuY3NzKHUsbVt1XSgpKS5lYWNoKGZ1bmN0aW9uKGUsdCl7XCJzY3JpcHRcIiE9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJih0LnN0eWxlW2hdPU1hdGguZmxvb3IoYykrXCJweFwiLGMrPXRbcF0pfSksZy5fZGV0YWNoRXZlbnRzKCksZy5fYXR0YWNoRXZlbnRzKCksZC5yZXNpemUodiksZy50cmlnZ2VyKEMpfSx0b2dnbGU6ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXM7ZT1yLmVsZW1lbnQuZmluZChlKSxpPWUuZGF0YShFKSwobnx8aS5jb2xsYXBzaWJsZSkmJigxPT1hcmd1bWVudHMubGVuZ3RoJiYobj1pLmNvbGxhcHNlZD09PXQ/ITE6aS5jb2xsYXBzZWQpLGkuY29sbGFwc2VkPSFuLGkuY29sbGFwc2VkP2UuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTplLmNzcyhcIm92ZXJmbG93XCIsXCJcIiksci5yZXNpemUoITApKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSl7dGhpcy50b2dnbGUoZSwhMSl9LGV4cGFuZDpmdW5jdGlvbihlKXt0aGlzLnRvZ2dsZShlLCEwKX0sX2FkZFBhbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7cmV0dXJuIG4ubGVuZ3RoJiYoaS5vcHRpb25zLnBhbmVzLnNwbGljZSh0LDAsZSksaS5faW5pdFBhbmUobixlKSxpLl9yZW1vdmVTcGxpdEJhcnMoKSxpLnJlc2l6ZSghMCkpLG59LGFwcGVuZDpmdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBuPXRoaXMsaT1lKFwiPGRpdiAvPlwiKS5hcHBlbmRUbyhuLmVsZW1lbnQpO3JldHVybiBuLl9hZGRQYW5lKHQsbi5vcHRpb25zLnBhbmVzLmxlbmd0aCxpKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHQsbil7bj1lKG4pLHQ9dHx8e307dmFyIGk9dGhpcyxyPWkud3JhcHBlci5jaGlsZHJlbihcIi5rLXBhbmVcIikuaW5kZXgobiksbz1lKFwiPGRpdiAvPlwiKS5pbnNlcnRCZWZvcmUoZShuKSk7cmV0dXJuIGkuX2FkZFBhbmUodCxyLG8pfSxpbnNlcnRBZnRlcjpmdW5jdGlvbih0LG4pe249ZShuKSx0PXR8fHt9O3ZhciBpPXRoaXMscj1pLndyYXBwZXIuY2hpbGRyZW4oXCIuay1wYW5lXCIpLmluZGV4KG4pLG89ZShcIjxkaXYgLz5cIikuaW5zZXJ0QWZ0ZXIoZShuKSk7cmV0dXJuIGkuX2FkZFBhbmUodCxyKzEsbyl9LHJlbW92ZTpmdW5jdGlvbih0KXt0PWUodCk7dmFyIG49dGhpcztyZXR1cm4gdC5sZW5ndGgmJihkLmRlc3Ryb3kodCksdC5lYWNoKGZ1bmN0aW9uKHQsaSl7bi5vcHRpb25zLnBhbmVzLnNwbGljZShuLndyYXBwZXIuY2hpbGRyZW4oXCIuay1wYW5lXCIpLmluZGV4KGkpLDEpLGUoaSkucmVtb3ZlKCl9KSxuLl9yZW1vdmVTcGxpdEJhcnMoKSxuLm9wdGlvbnMucGFuZXMubGVuZ3RoJiZuLnJlc2l6ZSghMCkpLG59LHNpemU6YShcInNpemVcIiwhMCksbWluOmEoXCJtaW5cIiksbWF4OmEoXCJtYXhcIil9KTt1LnBsdWdpbihGKSxsPXtzaXppbmdQcm9wZXJ0eTpcImhlaWdodFwiLHNpemluZ0RvbVByb3BlcnR5Olwib2Zmc2V0SGVpZ2h0XCIsYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHk6XCJ3aWR0aFwiLHBvc2l0aW9uaW5nUHJvcGVydHk6XCJ0b3BcIixtb3VzZVBvc2l0aW9uaW5nUHJvcGVydHk6XCJwYWdlWVwifSxjPXtzaXppbmdQcm9wZXJ0eTpcIndpZHRoXCIsc2l6aW5nRG9tUHJvcGVydHk6XCJvZmZzZXRXaWR0aFwiLGFsdGVybmF0ZVNpemluZ1Byb3BlcnR5OlwiaGVpZ2h0XCIscG9zaXRpb25pbmdQcm9wZXJ0eTpcImxlZnRcIixtb3VzZVBvc2l0aW9uaW5nUHJvcGVydHk6XCJwYWdlWFwifSxzLnByb3RvdHlwZT17cHJlc3M6ZnVuY3Rpb24oZSl7dGhpcy5fcmVzaXphYmxlLnByZXNzKGUpfSxtb3ZlOmZ1bmN0aW9uKGUsdCl7dGhpcy5wcmVzc2VkfHwodGhpcy5wcmVzcyh0KSx0aGlzLnByZXNzZWQ9ITApLHRoaXMuX3Jlc2l6YWJsZS50YXJnZXR8fHRoaXMuX3Jlc2l6YWJsZS5wcmVzcyh0KSx0aGlzLl9yZXNpemFibGUubW92ZShlKX0sZW5kOmZ1bmN0aW9uKCl7dGhpcy5fcmVzaXphYmxlLmVuZCgpLHRoaXMucHJlc3NlZD0hMX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3Jlc2l6YWJsZS5kZXN0cm95KCksdGhpcy5fcmVzaXphYmxlPXRoaXMuX2VsZW1lbnQ9dGhpcy5vd25lcj1udWxsfSxpc1Jlc2l6aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc2l6YWJsZS5yZXNpemluZ30sX2NyZWF0ZUhpbnQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztyZXR1cm4gZShcIjxkaXYgY2xhc3M9J2stZ2hvc3Qtc3BsaXRiYXIgay1naG9zdC1zcGxpdGJhci1cIituLm9yaWVudGF0aW9uK1wiIGstc3RhdGUtZGVmYXVsdCcgLz5cIikuY3NzKG4uYWx0ZXJuYXRlU2l6aW5nUHJvcGVydHksdFtuLmFsdGVybmF0ZVNpemluZ1Byb3BlcnR5XSgpKX0sX3N0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMscj1lKHQuY3VycmVudFRhcmdldCksbz1yLnByZXYoKSxhPXIubmV4dCgpLHM9by5kYXRhKEUpLGw9YS5kYXRhKEUpLGM9cGFyc2VJbnQob1swXS5zdHlsZVtuLnBvc2l0aW9uaW5nUHJvcGVydHldLDEwKSxkPXBhcnNlSW50KGFbMF0uc3R5bGVbbi5wb3NpdGlvbmluZ1Byb3BlcnR5XSwxMCkrYVswXVtuLnNpemluZ0RvbVByb3BlcnR5XS1yWzBdW24uc2l6aW5nRG9tUHJvcGVydHldLHU9cGFyc2VJbnQobi5fZWxlbWVudC5jc3Mobi5zaXppbmdQcm9wZXJ0eSksMTApLGg9ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7cmV0dXJuKGkoZSk/dDp1KnQvMTAwKXx8MH0scD1oKHMubWluKSxmPWgocy5tYXgpfHxkLWMsZz1oKGwubWluKSxtPWgobC5tYXgpfHxkLWM7bi5wcmV2aW91c1BhbmU9byxuLm5leHRQYW5lPWEsbi5fbWF4UG9zaXRpb249TWF0aC5taW4oZC1nLGMrZiksbi5fbWluUG9zaXRpb249TWF0aC5tYXgoYytwLGQtbSl9LF9tYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4UG9zaXRpb259LF9taW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluUG9zaXRpb259LF9zdG9wOmZ1bmN0aW9uKHQpe3ZhciBuLGksbyxhLHMsbCxjLHUsaD10aGlzLHA9ZSh0LmN1cnJlbnRUYXJnZXQpLGY9aC5vd25lcjtyZXR1cm4gZi5fcGFuZXMoKS5jaGlsZHJlbihcIi5rLXNwbGl0dGVyLW92ZXJsYXlcIikucmVtb3ZlKCksdC5rZXlDb2RlIT09ZC5rZXlzLkVTQyYmKG49dC5wb3NpdGlvbixpPXAucHJldigpLG89cC5uZXh0KCksYT1pLmRhdGEoRSkscz1vLmRhdGEoRSksbD1uLXBhcnNlSW50KGlbMF0uc3R5bGVbaC5wb3NpdGlvbmluZ1Byb3BlcnR5XSwxMCksYz1wYXJzZUludChvWzBdLnN0eWxlW2gucG9zaXRpb25pbmdQcm9wZXJ0eV0sMTApK29bMF1baC5zaXppbmdEb21Qcm9wZXJ0eV0tbi1wWzBdW2guc2l6aW5nRG9tUHJvcGVydHldLHU9aC5fZWxlbWVudC5jaGlsZHJlbih6KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcihlKHRoaXMpLmRhdGEoRSkuc2l6ZSl9KS5sZW5ndGgsKCFyKGEuc2l6ZSl8fHU+MSkmJihyKGEuc2l6ZSkmJnUtLSxhLnNpemU9bCtcInB4XCIpLCghcihzLnNpemUpfHx1PjEpJiYocy5zaXplPWMrXCJweFwiKSxmLnJlc2l6ZSghMCkpLCExfX19KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtmdW5jdGlvbiBuKGUscil7dmFyIG8sYTtpZihyPXJbdF0pZm9yKG89aVtlXT1pW2VdfHxbXSxhPTA7ci5sZW5ndGg+YTthKyspby5wdXNoKHJbYV0pLG4oZSsxLHJbYV0pfXZhciBpPVtdO3JldHVybiBuKDAsZSksaX1mdW5jdGlvbiBuKCl7cmV0dXJuIE0uc3VwcG9ydC5jc3NCb3JkZXJTcGFjaW5nP1wiXCI6J2NlbGxzcGFjaW5nPVwiMFwiJ31mdW5jdGlvbiBpKHQsaSl7cmV0dXJuIHQubGVuZ3RoP1wiPHRhYmxlIFwiK24oKSsnIGNsYXNzPVwiJytlLnRyaW0oXCJrLXNjaGVkdWxlci10YWJsZSBcIisoaXx8XCJcIikpKydcIj48dHI+Jyt0LmpvaW4oXCI8L3RyPjx0cj5cIikrXCI8L3RyPjwvdGFibGU+XCI6XCJcIn1mdW5jdGlvbiByKGUsdCl7cmV0dXJuIGUubGVuZ3RoP1wiPGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmUnPlwiK2koZSx0KStcIjwvZGl2PlwiOlwiXCJ9ZnVuY3Rpb24gbyh0LG4scil7dmFyIG8sYT1bXTtpZihyPjApZm9yKG89MDt0Pm87bysrKWEucHVzaChcIjx0aD4mbmJzcDs8L3RoPlwiKTtyZXR1cm4gbiYmYS5wdXNoKCc8dGggY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lcy1hbGwtZGF5XCI+JytuLnRleHQrXCI8L3RoPlwiKSwxPnI/ZSgpOmUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lc1wiPicraShhKStcIjwvZGl2PlwiKX1mdW5jdGlvbiBhKHQsbixvKXt2YXIgYSxzLGwsYyxkLHUsaCxwLGYsZyxtPVtdO2ZvcihzPTA7dC5sZW5ndGg+cztzKyspe2ZvcihsPXRbc10sYz1bXSxkPW4vbC5sZW5ndGgsYT0wO2wubGVuZ3RoPmE7YSsrKXU9bFthXSxjLnB1c2goJzx0aCBjb2xzcGFuPVwiJysodS5jb2xzcGFufHxkKSsnXCIgY2xhc3M9XCInKyh1LmNsYXNzTmFtZXx8XCJcIikrJ1wiPicrdS50ZXh0K1wiPC90aD5cIik7bS5wdXNoKGMuam9pbihcIlwiKSl9aWYoaD1bXSxvKXtmb3IocD10W3QubGVuZ3RoLTFdLGY9W10sZz1vLmNlbGxDb250ZW50LGE9MDtwLmxlbmd0aD5hO2ErKylmLnB1c2goJzx0ZCBjbGFzcz1cIicrKHBbYV0uY2xhc3NOYW1lfHxcIlwiKSsnXCI+JysoZz9nKGEpOlwiJm5ic3A7XCIpK1wiPC90aD5cIik7aC5wdXNoKGYuam9pbihcIlwiKSl9cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci1oZWFkZXIgay1zdGF0ZS1kZWZhdWx0XCI+PGRpdiBjbGFzcz1cImstc2NoZWR1bGVyLWhlYWRlci13cmFwXCI+JytpKG0pK3IoaCxcImstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5XCIpK1wiPC9kaXY+PC9kaXY+XCIpfWZ1bmN0aW9uIHModCxuKXt2YXIgcixvLGEscyxsLGM9QXJyYXkobikuam9pbigpLnNwbGl0KFwiLFwiKSxkPVtdO2ZvcihvPTA7dC5sZW5ndGg+bztvKyspZm9yKGE9dFtvXSxzPW4vYS5sZW5ndGgscj0wO2EubGVuZ3RoPnI7cisrKWw9YVtyXS5jbGFzc05hbWV8fFwiXCIsYVtyXS5hbGxEYXkmJihsPVwiay1zY2hlZHVsZXItdGltZXMtYWxsLWRheVwiKSxjW3Mqcl0rPSc8dGggY2xhc3M9XCInK2wrJ1wiIHJvd3NwYW49XCInK3MrJ1wiPicrYVtyXS50ZXh0K1wiPC90aD5cIjtmb3Iocj0wO24+cjtyKyspZC5wdXNoKGNbcl0pO3JldHVybiAxPm4/ZSgpOmUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lc1wiPicraShkKStcIjwvZGl2PlwiKX1mdW5jdGlvbiBsKCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci1jb250ZW50XCI+PHRhYmxlICcrbigpKycgY2xhc3M9XCJrLXNjaGVkdWxlci10YWJsZVwiLz48L2Rpdj4nKX1mdW5jdGlvbiBjKCl7cmV0dXJuIEQ9RD9EOk0uc3VwcG9ydC5zY3JvbGxiYXIoKX1mdW5jdGlvbiBkKGUsdCxuKXt2YXIgaSxyLG8sYSxzO2ZvcihpPWUubGVuZ3RoLTE7aT49MDtpLS0pcj11KGVbaV0pLG89ci5zdGFydCxzPXIuZW5kLGE9dD49byYmcz49dCwoYXx8bz49dCYmbj49c3x8bz49dCYmbj49bykmJih0Pm8mJih0PW8pLHM+biYmKG49cykpO3JldHVybiBoKGUsdCxuKX1mdW5jdGlvbiB1KGUpe3JldHVybntzdGFydDplLnN0YXJ0LGVuZDplLmVuZH19ZnVuY3Rpb24gaChlLHQsbil7dmFyIGkscixvPVtdO2ZvcihpPTA7ZS5sZW5ndGg+aTtpKyspcj11KGVbaV0pLCh0PnIuc3RhcnQmJnIuZW5kPnR8fHIuc3RhcnQ+PXQmJm4+PXIuZW5kKSYmby5wdXNoKGVbaV0pO3JldHVybiBvfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGcoZSl9ZnVuY3Rpb24gZihlKXtyZXR1cm4gZyhlKX1mdW5jdGlvbiBnKGUpe3ZhciB0LG4saSxyLG8sYSxzLGw9W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyl7Zm9yKG49ZVt0XSxpPXUobikscj1udWxsLG89MCxhPWwubGVuZ3RoO2E+bztvKyspaWYocz1pLnN0YXJ0Pmxbb10uZW5kLGxbb10uc3RhcnQ+aS5zdGFydHx8cyl7cj1sW29dLGkuZW5kPnIuZW5kJiYoci5lbmQ9aS5lbmQpO2JyZWFrfXJ8fChyPXtzdGFydDppLnN0YXJ0LGVuZDppLmVuZCxldmVudHM6W119LGwucHVzaChyKSksci5ldmVudHMucHVzaChuKX1yZXR1cm4gbH1mdW5jdGlvbiBtKGUsdCxuLGkpe3ZhciByLG8sYSxzLGw9dFswXTtpZihsKXtmb3Iocj1bXSxvPWwuZGF0YVNvdXJjZS52aWV3KCksYT0wO28ubGVuZ3RoPmE7YSsrKXM9e3RleHQ6aSh7dGV4dDpNLmh0bWxFbmNvZGUoTS5nZXR0ZXIobC5kYXRhVGV4dEZpZWxkKShvW2FdKSksY29sb3I6TS5nZXR0ZXIobC5kYXRhQ29sb3JGaWVsZCkob1thXSksZmllbGQ6bC5maWVsZCx0aXRsZTpsLnRpdGxlLG5hbWU6bC5uYW1lLHZhbHVlOk0uZ2V0dGVyKGwuZGF0YVZhbHVlRmllbGQpKG9bYV0pfSksY2xhc3NOYW1lOlwiay1zbG90LWNlbGxcIn0sc1tlXT1tKGUsdC5zbGljZSgxKSxuLGkpLHIucHVzaChzKTtyZXR1cm4gcn1yZXR1cm4gbn1mdW5jdGlvbiB2KHQpe3JldHVybiBmdW5jdGlvbihuKXtpZihlLmlzQXJyYXkobil8fG4gaW5zdGFuY2VvZiBNLmRhdGEuT2JzZXJ2YWJsZUFycmF5KXtmb3IodmFyIGk9MDtuLmxlbmd0aD5pO2krKylpZihuW2ldPT10KXJldHVybiEwO3JldHVybiExfXJldHVybiBuPT10fX1mdW5jdGlvbiBfKGUpe2UuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnJlcGxhY2UoRSxcIlwiKStcIiBrLXN0YXRlLXNlbGVjdGVkXCJ9dmFyIHksdyxiLGsseCxDLFMsVCxELEEsRSxNPXdpbmRvdy5rZW5kbyxQPU0udWksST1QLldpZGdldCx6PU0ua2V5cyxGPVwiLmtlbmRvU2NoZWR1bGVyVmlld1wiLFI9TWF0aCxCPSc8ZGl2IGNsYXNzPVwiay1tYXJxdWVlIGstc2NoZWR1bGVyLW1hcnF1ZWVcIj48ZGl2IGNsYXNzPVwiay1tYXJxdWVlLWNvbG9yXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbWFycXVlZS10ZXh0XCI+PGRpdiBjbGFzcz1cImstbGFiZWwtdG9wXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbGFiZWwtYm90dG9tXCI+PC9kaXY+PC9kaXY+PC9kaXY+JztNLnVpLnNjaGVkdWxlcj17fSx5PU0uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMuX2luZGV4PWUsdGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucz1bXSx0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnM9W119LGFkZFRpbWVTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9hZGRDb2xsZWN0aW9uKGUsdCx0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zKX0sYWRkRGF5U2xvdENvbGxlY3Rpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fYWRkQ29sbGVjdGlvbihlLHQsdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zKX0sX2FkZENvbGxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyB4KGUsdCx0aGlzLl9pbmRleCxuLmxlbmd0aCk7cmV0dXJuIG4ucHVzaChpKSxpfSx0aW1lU2xvdENvbGxlY3Rpb25Db3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zLmxlbmd0aH0sZGF5U2xvdENvbGxlY3Rpb25Db3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMubGVuZ3RofSxkYXlTbG90QnlQb3NpdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9zbG90QnlQb3NpdGlvbihlLHQsdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zKX0sdGltZVNsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKGUsdCx0aGlzLl90aW1lU2xvdENvbGxlY3Rpb25zKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYTtmb3IoaT0wO24ubGVuZ3RoPmk7aSsrKWZvcihyPW5baV0sbz0wO288ci5jb3VudCgpO28rKylpZihhPXIuYXQobyksZT49YS5vZmZzZXRMZWZ0JiZhLm9mZnNldExlZnQrYS5jbGllbnRXaWR0aD5lJiZ0Pj1hLm9mZnNldFRvcCYmYS5vZmZzZXRUb3ArYS5jbGllbnRIZWlnaHQ+PXQpcmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZTtmb3IoZT0wO3RoaXMuX2RheVNsb3RDb2xsZWN0aW9ucy5sZW5ndGg+ZTtlKyspdGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zW2VdLnJlZnJlc2goKTtmb3IoZT0wO3RoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnMubGVuZ3RoPmU7ZSsrKXRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnNbZV0ucmVmcmVzaCgpfSx0aW1lU2xvdFJhbmdlczpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucyxyPXRoaXMuX3N0YXJ0U2xvdChlLGkpO3JldHVybiFyLmluUmFuZ2UmJmU+PXIuc2xvdC5lbmQmJihyPW51bGwpLG49cix0PmUmJihuPXRoaXMuX2VuZFNsb3QodCxpKSksbiYmIW4uaW5SYW5nZSYmbi5zbG90LnN0YXJ0Pj10JiYobj1udWxsKSxudWxsPT09ciYmbnVsbD09PW4/W106KG51bGw9PT1yJiYocj17aW5SYW5nZTohMCxzbG90Omlbbi5zbG90LmNvbGxlY3Rpb25JbmRleF0uZmlyc3QoKX0pLG51bGw9PT1uJiYobj17aW5SYW5nZTohMCxzbG90Omlbci5zbG90LmNvbGxlY3Rpb25JbmRleF0ubGFzdCgpfSksdGhpcy5fY29udGludW91c1JhbmdlKGIsaSxyLG4pKX0sZGF5U2xvdFJhbmdlczpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9kYXlTbG90Q29sbGVjdGlvbnMsbz10aGlzLl9zdGFydFNsb3QoZSxyLG4pO2lmKCFvLmluUmFuZ2UmJmU+PW8uc2xvdC5lbmQmJihvPW51bGwpLGk9byx0PmUmJihpPXRoaXMuX2VuZFNsb3QodCxyLG4pKSxpJiYhaS5pblJhbmdlJiZpLnNsb3Quc3RhcnQ+PXQmJihpPW51bGwpLG51bGw9PT1vJiZudWxsPT09aSlyZXR1cm5bXTtpZihudWxsPT09bylkbyBlKz1NLmRhdGUuTVNfUEVSX0RBWSxvPXRoaXMuX3N0YXJ0U2xvdChlLHIsbik7d2hpbGUoIW8uaW5SYW5nZSYmZT49by5zbG90LmVuZCk7aWYobnVsbD09PWkpZG8gdC09TS5kYXRlLk1TX1BFUl9EQVksaT10aGlzLl9lbmRTbG90KHQscixuKTt3aGlsZSghaS5pblJhbmdlJiZpLnNsb3Quc3RhcnQ+PXQpO3JldHVybiB0aGlzLl9jb250aW51b3VzUmFuZ2UoayxyLG8saSl9LF9jb250aW51b3VzUmFuZ2U6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjLGQ9bi5zbG90LHU9aS5zbG90LGg9ZC5jb2xsZWN0aW9uSW5kZXgscD11LmNvbGxlY3Rpb25JbmRleCxmPVtdO2ZvcihyPWg7cD49cjtyKyspbz10W3JdLGE9by5maXJzdCgpLHM9by5sYXN0KCksbD0hMSxjPSExLHI9PWgmJihjPSFuLmluUmFuZ2UpLHI9PXAmJihsPSFpLmluUmFuZ2UpLGQuc3RhcnQ+YS5zdGFydCYmKGE9ZCkscy5zdGFydD51LnN0YXJ0JiYocz11KSxwPmgmJihyPT1oP2w9ITA6cj09cD9jPSEwOmw9Yz0hMCksZi5wdXNoKG5ldyBlKHtzdGFydDphLGVuZDpzLGNvbGxlY3Rpb246byxoZWFkOmwsdGFpbDpjfSkpO3JldHVybiBmfSxzbG90UmFuZ2VzOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zdGFydFRpbWV8fE0uZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCksaT1lLmVuZFRpbWV8fE0uZGF0ZS50b1V0Y1RpbWUoZS5lbmQpO3JldHVybiB2b2lkIDA9PT10JiYodD1lLmlzTXVsdGlEYXkoKSksdD90aGlzLmRheVNsb3RSYW5nZXMobixpLGUuaXNBbGxEYXkpOnRoaXMudGltZVNsb3RSYW5nZXMobixpKX0scmFuZ2VzOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlJiYoZT1NLmRhdGUudG9VdGNUaW1lKGUpKSxcIm51bWJlclwiIT10eXBlb2YgdCYmKHQ9TS5kYXRlLnRvVXRjVGltZSh0KSksbj90aGlzLmRheVNsb3RSYW5nZXMoZSx0LGkpOnRoaXMudGltZVNsb3RSYW5nZXMoZSx0KX0sX3N0YXJ0Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGk7Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylpZihpPXRbbl0saS5zdGFydEluUmFuZ2UoZSkpcmV0dXJuIGk7cmV0dXJuIG51bGx9LF9lbmRDb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO2ZvcihpPTA7dC5sZW5ndGg+aTtpKyspaWYocj10W2ldLHIuZW5kSW5SYW5nZShlLG4pKXJldHVybiByO3JldHVybiBudWxsfSxfZ2V0Q29sbGVjdGlvbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5fZGF5U2xvdENvbGxlY3Rpb25zOnRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnN9LGNvbnRpbnVvdXNTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG49dD8tMToxLGk9dGhpcy5fZ2V0Q29sbGVjdGlvbnMoZS5pc0RheVNsb3QpLHI9aVtlLmNvbGxlY3Rpb25JbmRleCtuXTtyZXR1cm4gcj9yW3Q/XCJsYXN0XCI6XCJmaXJzdFwiXSgpOnZvaWQgMH0sZmlyc3RTbG90OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0Q29sbGVjdGlvbnModGhpcy5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCkpO3JldHVybiBlWzBdLmZpcnN0KCl9LGxhc3RTbG90OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0Q29sbGVjdGlvbnModGhpcy5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCkpO3JldHVybiBlW2UubGVuZ3RoLTFdLmxhc3QoKX0sdXBTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPWZ1bmN0aW9uKGUsaSxyKXt2YXIgbz0wPT09cjtyZXR1cm4hdCYmIWUmJm8mJm4uZGF5U2xvdENvbGxlY3Rpb25Db3VudCgpP24uX2RheVNsb3RDb2xsZWN0aW9uc1swXS5hdChpKTp2b2lkIDB9O3JldHVybiB0aGlzLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fCh0PSEwKSx0aGlzLl92ZXJ0aWNhbFNsb3QoZSwtMSxpKX0sZG93blNsb3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZnVuY3Rpb24oZSxpLHIpe3JldHVybiF0JiZlJiZuLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/bi5fdGltZVNsb3RDb2xsZWN0aW9uc1tyXS5hdCgwKTp2b2lkIDB9O3JldHVybiB0aGlzLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fCh0PSEwKSx0aGlzLl92ZXJ0aWNhbFNsb3QoZSwxLGkpfSxsZWZ0U2xvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbFNsb3QoZSwtMSl9LHJpZ2h0U2xvdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbFNsb3QoZSwxKX0sX2hvcml6b250YWxTbG90OmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmluZGV4LHI9ZS5pc0RheVNsb3Qsbz1lLmNvbGxlY3Rpb25JbmRleCxhPXRoaXMuX2dldENvbGxlY3Rpb25zKHIpO3JldHVybiByP2krPXQ6bys9dCxuPWFbb10sbj9uLmF0KGkpOnZvaWQgMH0sX3ZlcnRpY2FsU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj1lLmluZGV4LG89ZS5pc0RheVNsb3QsYT1lLmNvbGxlY3Rpb25JbmRleCxzPXRoaXMuX2dldENvbGxlY3Rpb25zKG8pO3JldHVybihlPW4obyxhLHIpKT9lOihvP2ErPXQ6cis9dCxpPXNbYV0saT9pLmF0KHIpOnZvaWQgMCl9LF9jb2xsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG49dD90aGlzLl9kYXlTbG90Q29sbGVjdGlvbnM6dGhpcy5fdGltZVNsb3RDb2xsZWN0aW9ucztyZXR1cm4gbltlXX0sX3N0YXJ0U2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9zdGFydENvbGxlY3Rpb24oZSx0KSxvPSEwO3JldHVybiByfHwocj10WzBdLG89ITEpLGk9ci5zbG90QnlTdGFydERhdGUoZSxuKSxpfHwoaT1yLmZpcnN0KCksbz0hMSkse3Nsb3Q6aSxpblJhbmdlOm99fSxfZW5kU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLl9lbmRDb2xsZWN0aW9uKGUsdCxuKSxvPSEwO3JldHVybiByfHwocj10W3QubGVuZ3RoLTFdLG89ITEpLGk9ci5zbG90QnlFbmREYXRlKGUsbiksaXx8KGk9ci5sYXN0KCksbz0hMSkse3Nsb3Q6aSxpblJhbmdlOm99fSxnZXRTbG90Q29sbGVjdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzW3Q/XCJnZXREYXlTbG90Q29sbGVjdGlvblwiOlwiZ2V0VGltZVNsb3RDb2xsZWN0aW9uXCJdKGUpfSxnZXRUaW1lU2xvdENvbGxlY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RpbWVTbG90Q29sbGVjdGlvbnNbZV19LGdldERheVNsb3RDb2xsZWN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXlTbG90Q29sbGVjdGlvbnNbZV19fSksdz1NLkNsYXNzLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXtlLmV4dGVuZCh0aGlzLHQpfSxpbm5lckhlaWdodDpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jb2xsZWN0aW9uLG49dGhpcy5zdGFydC5pbmRleCxpPXRoaXMuZW5kLmluZGV4LHI9MDtmb3IoZT1uO2k+PWU7ZSsrKXIrPXQuYXQoZSkub2Zmc2V0SGVpZ2h0O3JldHVybiByfSxldmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmV2ZW50cygpfSxhZGRFdmVudDpmdW5jdGlvbihlKXt0aGlzLmV2ZW50cygpLnB1c2goZSl9LHN0YXJ0U2xvdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0Lm9mZnNldExlZnQ+dGhpcy5lbmQub2Zmc2V0TGVmdD90aGlzLmVuZDp0aGlzLnN0YXJ0fSxlbmRTbG90OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQub2Zmc2V0TGVmdD50aGlzLmVuZC5vZmZzZXRMZWZ0P3RoaXMuc3RhcnQ6dGhpcy5lbmR9fSksYj13LmV4dGVuZCh7aW5uZXJIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuY29sbGVjdGlvbixuPXRoaXMuc3RhcnQuaW5kZXgsaT10aGlzLmVuZC5pbmRleCxyPTA7Zm9yKGU9bjtpPj1lO2UrKylyKz10LmF0KGUpLm9mZnNldEhlaWdodDtyZXR1cm4gcn0sb3V0ZXJSZWN0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fcmVjdChcIm9mZnNldFwiLGUsdCxuKX0sX3JlY3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHMsbCxjLGQsdSxoPXRoaXMuc3RhcnQscD10aGlzLmVuZCxmPU0uc3VwcG9ydC5pc1J0bChoLmVsZW1lbnQpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD1NLmRhdGUudG9VdGNUaW1lKHQpKSxcIm51bWJlclwiIT10eXBlb2YgbiYmKG49TS5kYXRlLnRvVXRjVGltZShuKSksaT8ocj1oLm9mZnNldFRvcCxvPXAub2Zmc2V0VG9wK3BbZStcIkhlaWdodFwiXSxmPyhhPXAub2Zmc2V0TGVmdCxzPWgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXSk6KGE9aC5vZmZzZXRMZWZ0LHM9cC5vZmZzZXRMZWZ0K3BbZStcIldpZHRoXCJdKSk6KGw9dC1oLnN0YXJ0LDA+bCYmKGw9MCksYz1oLmVuZC1oLnN0YXJ0LHI9aC5vZmZzZXRUb3AraFtlK1wiSGVpZ2h0XCJdKmwvYyxkPXAuZW5kLW4sMD5kJiYoZD0wKSx1PXAuZW5kLXAuc3RhcnQsbz1wLm9mZnNldFRvcCtwW2UrXCJIZWlnaHRcIl0tcFtlK1wiSGVpZ2h0XCJdKmQvdSxmPyhhPU1hdGgucm91bmQocC5vZmZzZXRMZWZ0K3BbZStcIldpZHRoXCJdKmQvdSkscz1NYXRoLnJvdW5kKGgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXS1oW2UrXCJXaWR0aFwiXSpsL2MpKTooYT1NYXRoLnJvdW5kKGgub2Zmc2V0TGVmdCtoW2UrXCJXaWR0aFwiXSpsL2MpLHM9TWF0aC5yb3VuZChwLm9mZnNldExlZnQrcFtlK1wiV2lkdGhcIl0tcFtlK1wiV2lkdGhcIl0qZC91KSkpLHt0b3A6cixib3R0b206byxsZWZ0OjA9PT1hP2E6YSsxLHJpZ2h0OnN9fSxpbm5lclJlY3Q6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9yZWN0KFwiY2xpZW50XCIsZSx0LG4pfX0pLGs9dy5leHRlbmQoe2lubmVyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuY29sbGVjdGlvbixuPXRoaXMuc3RhcnQuaW5kZXgsaT10aGlzLmVuZC5pbmRleCxyPTAsbz1uIT09aT9cIm9mZnNldFdpZHRoXCI6XCJjbGllbnRXaWR0aFwiO2ZvcihlPW47aT49ZTtlKyspcis9dC5hdChlKVtvXTtyZXR1cm4gcn19KSx4PU0uQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMuX3Nsb3RzPVtdLHRoaXMuX2V2ZW50cz1bXSx0aGlzLl9zdGFydD1NLmRhdGUudG9VdGNUaW1lKGUpLHRoaXMuX2VuZD1NLmRhdGUudG9VdGNUaW1lKHQpLHRoaXMuX2dyb3VwSW5kZXg9bix0aGlzLl9jb2xsZWN0aW9uSW5kZXg9aX0scmVmcmVzaDpmdW5jdGlvbigpe2Zvcih2YXIgZT0wO3RoaXMuX3Nsb3RzLmxlbmd0aD5lO2UrKyl0aGlzLl9zbG90c1tlXS5yZWZyZXNoKCl9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5fc3RhcnQmJnRoaXMuX2VuZD5lfSxlbmRJblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dD90aGlzLl9lbmQ+ZTp0aGlzLl9lbmQ+PWU7cmV0dXJuIGU+PXRoaXMuX3N0YXJ0JiZufSxzbG90QnlTdGFydERhdGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWU7Zm9yKFwibnVtYmVyXCIhPXR5cGVvZiBpJiYoaT1NLmRhdGUudG9VdGNUaW1lKGUpKSx0PTA7dGhpcy5fc2xvdHMubGVuZ3RoPnQ7dCsrKWlmKG49dGhpcy5fc2xvdHNbdF0sbi5zdGFydEluUmFuZ2UoaSkpcmV0dXJuIG47cmV0dXJuIG51bGx9LHNsb3RCeUVuZERhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9ZTtpZihcIm51bWJlclwiIT10eXBlb2YgciYmKHI9TS5kYXRlLnRvVXRjVGltZShlKSksdClyZXR1cm4gdGhpcy5zbG90QnlTdGFydERhdGUoZSwhMSk7Zm9yKG49MDt0aGlzLl9zbG90cy5sZW5ndGg+bjtuKyspaWYoaT10aGlzLl9zbG90c1tuXSxpLmVuZEluUmFuZ2UocikpcmV0dXJuIGk7cmV0dXJuIG51bGx9LGNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzLmxlbmd0aH0sZXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c30sYWRkVGltZVNsb3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9bmV3IFMoZSx0LG4sdGhpcy5fZ3JvdXBJbmRleCx0aGlzLl9jb2xsZWN0aW9uSW5kZXgsdGhpcy5fc2xvdHMubGVuZ3RoLGkpO3RoaXMuX3Nsb3RzLnB1c2gocil9LGFkZERheVNsb3Q6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9bmV3IFQoZSx0LG4sdGhpcy5fZ3JvdXBJbmRleCx0aGlzLl9jb2xsZWN0aW9uSW5kZXgsdGhpcy5fc2xvdHMubGVuZ3RoLGkpO3RoaXMuX3Nsb3RzLnB1c2gocil9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzWzBdfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nsb3RzW3RoaXMuX3Nsb3RzLmxlbmd0aC0xXX0sYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Nsb3RzW2VdfX0pLEM9TS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSxyLG8pe3RoaXMuZWxlbWVudD1lLHRoaXMuY2xpZW50V2lkdGg9ZS5jbGllbnRXaWR0aCx0aGlzLmNsaWVudEhlaWdodD1lLmNsaWVudEhlaWdodCx0aGlzLm9mZnNldFdpZHRoPWUub2Zmc2V0V2lkdGgsdGhpcy5vZmZzZXRIZWlnaHQ9ZS5vZmZzZXRIZWlnaHQsdGhpcy5vZmZzZXRUb3A9ZS5vZmZzZXRUb3AsdGhpcy5vZmZzZXRMZWZ0PWUub2Zmc2V0TGVmdCx0aGlzLnN0YXJ0PXQsdGhpcy5lbmQ9bix0aGlzLmVsZW1lbnQ9ZSx0aGlzLmdyb3VwSW5kZXg9aSx0aGlzLmNvbGxlY3Rpb25JbmRleD1yLHRoaXMuaW5kZXg9byx0aGlzLmlzRGF5U2xvdD0hMX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE0udGltZXpvbmUudG9Mb2NhbERhdGUodGhpcy5zdGFydCl9LGVuZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gTS50aW1lem9uZS50b0xvY2FsRGF0ZSh0aGlzLmVuZCl9LHN0YXJ0SW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5zdGFydCYmdGhpcy5lbmQ+ZX0sZW5kSW5SYW5nZTpmdW5jdGlvbihlKXtyZXR1cm4gZT50aGlzLnN0YXJ0JiZ0aGlzLmVuZD49ZX0sc3RhcnRPZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydH0sZW5kT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kfX0pLFM9Qy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0LG4saSxyLG8sYSl7Qy5mbi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmlzSG9yaXpvbnRhbD1hPyEwOiExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50O3RoaXMuY2xpZW50V2lkdGg9ZS5jbGllbnRXaWR0aCx0aGlzLmNsaWVudEhlaWdodD1lLmNsaWVudEhlaWdodCx0aGlzLm9mZnNldFdpZHRoPWUub2Zmc2V0V2lkdGgsdGhpcy5vZmZzZXRIZWlnaHQ9ZS5vZmZzZXRIZWlnaHQsdGhpcy5vZmZzZXRUb3A9ZS5vZmZzZXRUb3AsdGhpcy5vZmZzZXRMZWZ0PWUub2Zmc2V0TGVmdH0sb2Zmc2V0WDpmdW5jdGlvbihlLHQpe3JldHVybiBlP3RoaXMub2Zmc2V0TGVmdCt0OnRoaXMub2Zmc2V0TGVmdCt0fSxzdGFydEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuc3RhcnQmJnRoaXMuZW5kPmV9LGVuZEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+dGhpcy5zdGFydCYmdGhpcy5lbmQ+PWV9LHN0YXJ0T2Zmc2V0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGEscyxsO2lmKGkpcmV0dXJuIHRoaXMuc3RhcnQ7aWYocj1lKHRoaXMuZWxlbWVudCkub2Zmc2V0KCksbz10aGlzLmVuZC10aGlzLnN0YXJ0LHRoaXMuaXNIb3Jpem9udGFsKXtpZihsPU0uc3VwcG9ydC5pc1J0bCh0aGlzLmVsZW1lbnQpLGE9dC1yLmxlZnQscz1NYXRoLmZsb29yKG8qKGEvdGhpcy5vZmZzZXRXaWR0aCkpLGwpcmV0dXJuIHRoaXMuc3RhcnQrby1zfWVsc2UgYT1uLXIudG9wLHM9TWF0aC5mbG9vcihvKihhL3RoaXMub2Zmc2V0SGVpZ2h0KSk7cmV0dXJuIHRoaXMuc3RhcnQrc30sZW5kT2Zmc2V0OmZ1bmN0aW9uKHQsbixpKXt2YXIgcixvLGEscyxsO2lmKGkpcmV0dXJuIHRoaXMuZW5kO2lmKHI9ZSh0aGlzLmVsZW1lbnQpLm9mZnNldCgpLG89dGhpcy5lbmQtdGhpcy5zdGFydCx0aGlzLmlzSG9yaXpvbnRhbCl7aWYobD1NLnN1cHBvcnQuaXNSdGwodGhpcy5lbGVtZW50KSxhPXQtci5sZWZ0LHM9TWF0aC5mbG9vcihvKihhL3RoaXMub2Zmc2V0V2lkdGgpKSxsKXJldHVybiB0aGlzLnN0YXJ0K28tc31lbHNlIGE9bi1yLnRvcCxzPU1hdGguZmxvb3IobyooYS90aGlzLm9mZnNldEhlaWdodCkpO3JldHVybiB0aGlzLnN0YXJ0K3N9fSksVD1DLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQsbixpLHIsbyxhKXtDLmZuLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZXZlbnRDb3VudD1hLHRoaXMuaXNEYXlTbG90PSEwLHRoaXMuZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg/KHRoaXMuZmlyc3RDaGlsZEhlaWdodD10aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF0ub2Zmc2V0SGVpZ2h0KzMsdGhpcy5maXJzdENoaWxkVG9wPXRoaXMuZWxlbWVudC5jaGlsZHJlblswXS5vZmZzZXRUb3ApOih0aGlzLmZpcnN0Q2hpbGRIZWlnaHQ9Myx0aGlzLmZpcnN0Q2hpbGRUb3A9MCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmNsaWVudEhlaWdodD10aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0LHRoaXMub2Zmc2V0VG9wPXRoaXMuZWxlbWVudC5vZmZzZXRUb3B9LHN0YXJ0RGF0ZTpmdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlKHRoaXMuc3RhcnQpO3JldHVybiBNLnRpbWV6b25lLmFwcGx5KGUsXCJFdGMvVVRDXCIpfSxlbmREYXRlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IERhdGUodGhpcy5lbmQpO3JldHVybiBNLnRpbWV6b25lLmFwcGx5KGUsXCJFdGMvVVRDXCIpfSxzdGFydEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuc3RhcnQmJnRoaXMuZW5kPmV9LGVuZEluUmFuZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+dGhpcy5zdGFydCYmdGhpcy5lbmQ+PWV9fSksTS51aS5TY2hlZHVsZXJWaWV3PUkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7SS5mbi5pbml0LmNhbGwodGhpcyx0LG4pLHRoaXMuX3Njcm9sbGJhcj1jKCksdGhpcy5faXNSdGw9TS5zdXBwb3J0LmlzUnRsKHQpLHRoaXMuX3Jlc2l6ZUhpbnQ9ZSgpLHRoaXMuX21vdmVIaW50PWUoKSx0aGlzLl9jZWxsSWQ9TS5ndWlkKCksdGhpcy5fcmVzb3VyY2VzRm9yR3JvdXBzKCksdGhpcy5fc2VsZWN0ZWRTbG90cz1bXX0sX2lzTW9iaWxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLm1vYmlsZT09PSEwJiZNLnN1cHBvcnQubW9iaWxlT1N8fFwicGhvbmVcIj09PWUubW9iaWxlfHxcInRhYmxldFwiPT09ZS5tb2JpbGV9LF9pc01vYmlsZVBob25lVmlldzpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tb2JpbGU9PT0hMCYmTS5zdXBwb3J0Lm1vYmlsZU9TJiYhTS5zdXBwb3J0Lm1vYmlsZU9TLnRhYmxldHx8XCJwaG9uZVwiPT09ZS5tb2JpbGV9LF9hZGRSZXNvdXJjZVZpZXc6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgeSh0aGlzLmdyb3Vwcy5sZW5ndGgpO3JldHVybiB0aGlzLmdyb3Vwcy5wdXNoKGUpLGV9LGRhdGVGb3JUaXRsZTpmdW5jdGlvbigpe3JldHVybiBNLmZvcm1hdCh0aGlzLm9wdGlvbnMuc2VsZWN0ZWREYXRlRm9ybWF0LHRoaXMuc3RhcnREYXRlKCksdGhpcy5lbmREYXRlKCkpfSxfY2hhbmdlR3JvdXA6ZnVuY3Rpb24oZSx0KXt2YXIgbj10P1wicHJldkdyb3VwU2xvdFwiOlwibmV4dEdyb3VwU2xvdFwiLGk9dGhpc1tuXShlLnN0YXJ0LGUuZ3JvdXBJbmRleCxlLmlzQWxsRGF5KTtyZXR1cm4gaSYmKGUuZ3JvdXBJbmRleCs9dD8tMToxKSxpfSxfY2hhbmdlR3JvdXBDb250aW51b3VzbHk6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sX2NoYW5nZVZpZXdQZXJpb2Q6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sX2hvcml6b250YWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9aT9cImxlZnRTbG90XCI6XCJyaWdodFNsb3RcIixzPXRbMF0uc3RhcnQsbD10W3QubGVuZ3RoLTFdLmVuZCxjPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIG58fChyPXRoaXMuX25vcm1hbGl6ZUhvcml6b250YWxTZWxlY3Rpb24oZSx0LGkpLHImJihzPWw9cikpLHM9Y1thXShzKSxsPWNbYV0obCksbnx8dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHxzJiZsfHwocz1sPXRoaXMuX2NoYW5nZUdyb3VwKGUsaSkpLHMmJmx8fChvPXRoaXMuX2NvbnRpbnVvdXNTbG90KGUsdCxpKSxvPXRoaXMuX2NoYW5nZUdyb3VwQ29udGludW91c2x5KGUsbyxuLGkpLG8mJihzPWw9bykpLHtzdGFydFNsb3Q6cyxlbmRTbG90Omx9fSxfdmVydGljYWxTbG90czpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGE9dFswXS5zdGFydCxzPXRbdC5sZW5ndGgtMV0uZW5kLGw9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gbnx8KHI9dGhpcy5fbm9ybWFsaXplVmVydGljYWxTZWxlY3Rpb24oZSx0LGkpLHImJihhPXM9cikpLG89aT9cInVwU2xvdFwiOlwiZG93blNsb3RcIixhPWxbb10oYSxuKSxzPWxbb10ocyxuKSxufHwhdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHxhJiZzfHwoYT1zPXRoaXMuX2NoYW5nZUdyb3VwKGUsaSkpLHtzdGFydFNsb3Q6YSxlbmRTbG90OnN9fSxfbm9ybWFsaXplSG9yaXpvbnRhbFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxfbm9ybWFsaXplVmVydGljYWxTZWxlY3Rpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBpPW4/dFswXS5zdGFydDp0W3QubGVuZ3RoLTFdLmVuZH0sX2NvbnRpbnVvdXNTbG90OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGNvbnN0cmFpblNlbGVjdGlvbjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZ3JvdXBzWzBdO3RoaXMuaW5SYW5nZShlKT9uLmRheVNsb3RDb2xsZWN0aW9uQ291bnQoKXx8KGUuaXNBbGxEYXk9ITEpOih0PW4uZmlyc3RTbG90KCksZS5pc0FsbERheT10LmlzRGF5U2xvdCxlLnN0YXJ0PXQuc3RhcnREYXRlKCksZS5lbmQ9dC5lbmREYXRlKCkpLHRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF18fChlLmdyb3VwSW5kZXg9MCl9LG1vdmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbCxjPSExLGQ9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtpZihkLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCl8fChlLmlzQWxsRGF5PSEwKSxpPWQucmFuZ2VzKGUuc3RhcnQsZS5lbmQsZS5pc0FsbERheSwhMSksdD09PXouRE9XTnx8dD09PXouVVApe2lmKGM9ITAsYT10PT09ei5VUCx0aGlzLl91cGRhdGVEaXJlY3Rpb24oZSxpLG4sYSwhMCkscz10aGlzLl92ZXJ0aWNhbFNsb3RzKGUsaSxuLGEpLCFzLnN0YXJ0U2xvdCYmIW4mJnRoaXMuX2NoYW5nZVZpZXdQZXJpb2QoZSxhLCEwKSlyZXR1cm4gY31lbHNlIGlmKCh0PT09ei5MRUZUfHx0PT09ei5SSUdIVCkmJihjPSEwLGE9dD09PXouTEVGVCx0aGlzLl91cGRhdGVEaXJlY3Rpb24oZSxpLG4sYSwhMSkscz10aGlzLl9ob3Jpem9udGFsU2xvdHMoZSxpLG4sYSksIXMuc3RhcnRTbG90JiYhbiYmdGhpcy5fY2hhbmdlVmlld1BlcmlvZChlLGEsITEpKSlyZXR1cm4gYztyZXR1cm4gYyYmKHI9cy5zdGFydFNsb3Qsbz1zLmVuZFNsb3Qsbj8obD1lLmJhY2t3YXJkLGwmJnI/ZS5zdGFydD1yLnN0YXJ0RGF0ZSgpOiFsJiZvJiYoZS5lbmQ9by5lbmREYXRlKCkpKTpyJiZvJiYoZS5pc0FsbERheT1yLmlzRGF5U2xvdCxlLnN0YXJ0PXIuc3RhcnREYXRlKCksZS5lbmQ9by5lbmREYXRlKCkpLGUuZXZlbnRzPVtdKSxjfSxtb3ZlVG9FdmVudEluR3JvdXA6ZnVuY3Rpb24odCxuLGkscil7Zm9yKHZhciBvLGEscz10Ll9jb250aW51b3VzRXZlbnRzfHxbXSxsPXI/LTE6MSxjPXMubGVuZ3RoLGQ9cj9jLTE6MDtjPmQmJmQ+LTE7KXtpZihhPXNbZF0sKCFyJiZhLnN0YXJ0LnN0YXJ0RGF0ZSgpPj1uLnN0YXJ0RGF0ZSgpfHxyJiZhLnN0YXJ0LnN0YXJ0RGF0ZSgpPD1uLnN0YXJ0RGF0ZSgpKSYmKGkubGVuZ3RoJiYoYT1zW2QrbF0pLGEmJi0xPT09ZS5pbkFycmF5KGEudWlkLGkpKSl7bz0hIWE7YnJlYWt9ZCs9bH1yZXR1cm4gYX0sbW92ZVRvRXZlbnQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saT1lLmdyb3VwSW5kZXgscj10aGlzLmdyb3Vwc1tpXSxvPXIucmFuZ2VzKGUuc3RhcnQsZS5lbmQsZS5pc0FsbERheSwhMSlbMF0uc3RhcnQsYT10aGlzLmdyb3Vwcy5sZW5ndGgscz10Py0xOjEsbD1lLmV2ZW50czthPmkmJmk+LTEmJihuPXRoaXMubW92ZVRvRXZlbnRJbkdyb3VwKHIsbyxsLHQpLGkrPXMscj10aGlzLmdyb3Vwc1tpXSxyJiYhbik7KWw9W10sbz10P3IubGFzdFNsb3QoKTpyLmZpcnN0U2xvdCghMCk7cmV0dXJuIG4mJihlLmV2ZW50cz1bbi51aWRdLGUuc3RhcnQ9bi5zdGFydC5zdGFydERhdGUoKSxlLmVuZD1uLmVuZC5lbmREYXRlKCksZS5pc0FsbERheT1uLnN0YXJ0LmlzRGF5U2xvdCxlLmdyb3VwSW5kZXg9bi5zdGFydC5ncm91cEluZGV4KSwhIW59LGN1cnJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5fY3VycmVudDoodGhpcy5fY3VycmVudD1lLHZvaWQgdGhpcy5fc2Nyb2xsVG8oZSx0aGlzLmNvbnRlbnRbMF0pKX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9zZWxlY3RFdmVudHMoZSl8fHRoaXMuX3NlbGVjdFNsb3RzKGUpfSxfc2VsZWN0U2xvdHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbD1lLmlzQWxsRGF5LGM9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtmb3IoYy50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpfHwobD0hMCksdGhpcy5fc2VsZWN0ZWRTbG90cz1bXSx0PWMucmFuZ2VzKGUuc3RhcnQsZS5lbmQsbCwhMSkscj0wO3QubGVuZ3RoPnI7cisrKWZvcihvPXRbcl0sYT1vLmNvbGxlY3Rpb24scz1vLnN0YXJ0LmluZGV4O28uZW5kLmluZGV4Pj1zO3MrKylpPWEuYXQocyksbj1pLmVsZW1lbnQsbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITApLF8obiksdGhpcy5fc2VsZWN0ZWRTbG90cy5wdXNoKHtzdGFydDppLnN0YXJ0RGF0ZSgpLGVuZDppLmVuZERhdGUoKSxlbGVtZW50Om59KTtlLmJhY2t3YXJkJiYobj10WzBdLnN0YXJ0LmVsZW1lbnQpLHRoaXMuY3VycmVudChuKX0sX3NlbGVjdEV2ZW50czpmdW5jdGlvbih0KXt2YXIgbixpLHI9ITEsbz10LmV2ZW50cyxhPXRoaXMuZ3JvdXBzW3QuZ3JvdXBJbmRleF0uX2NvbnRpbnVvdXNFdmVudHN8fFtdLHM9YS5sZW5ndGg7aWYoIW9bMF18fCFhWzBdKXJldHVybiByO2ZvcihpPWUoKSx0LmV2ZW50cz1bXSxuPTA7cz5uO24rKyllLmluQXJyYXkoYVtuXS51aWQsbyk+LTEmJihpPWkuYWRkKGFbbl0uZWxlbWVudCksdC5ldmVudHMucHVzaChhW25dLnVpZCkpO3JldHVybiBpWzBdJiYoaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdGhpcy5jdXJyZW50KGkubGFzdCgpWzBdKSx0aGlzLl9zZWxlY3RlZFNsb3RzPVtdLHI9ITApLHJ9LGluUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdGFydERhdGUoKSxuPU0uZGF0ZS5hZGREYXlzKHRoaXMuZW5kRGF0ZSgpLDEpLGk9ZS5zdGFydCxyPWUuZW5kO3JldHVybiBpPj10JiZuPmkmJnI+dCYmbj49cn0sX3Jlc291cmNlVmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS52YWx1ZVByaW1pdGl2ZSYmKHQ9TS5nZXR0ZXIoZS5kYXRhVmFsdWVGaWVsZCkodCkpLHR9LF9yZXNvdXJjZUJ5U2xvdDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9dGhpcy5ncm91cGVkUmVzb3VyY2VzLHM9e307aWYoYS5sZW5ndGgpZm9yKHQ9ZS5ncm91cEluZGV4LG49YS5sZW5ndGgtMTtuPj0wO24tLSlpPWFbbl0scj10aGlzLl9yZXNvdXJjZVZhbHVlKGksaS5kYXRhU291cmNlLnZpZXcoKVt0JWkuZGF0YVNvdXJjZS50b3RhbCgpXSksaS5tdWx0aXBsZSYmKHI9W3JdKSxvPU0uc2V0dGVyKGkuZmllbGQpLG8ocyxyKSx0PU1hdGguZmxvb3IodC9pLmRhdGFTb3VyY2UudG90YWwoKSk7cmV0dXJuIHN9LF9jcmVhdGVSZXNpemVIaW50OmZ1bmN0aW9uKHQsbixpLHIpe3JldHVybiBlKEIpLmNzcyh7bGVmdDp0LHRvcDpuLHdpZHRoOmksaGVpZ2h0OnJ9KX0sX3JlbW92ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemVIaW50LnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZUhpbnQ9ZSgpfSxfcmVtb3ZlTW92ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9tb3ZlSGludC5yZW1vdmUoKSx0aGlzLl9tb3ZlSGludD1lKCl9LF9zY3JvbGxUbzpmdW5jdGlvbihlLHQpe3ZhciBuPWUub2Zmc2V0VG9wLGk9ZS5vZmZzZXRIZWlnaHQscj10LnNjcm9sbFRvcCxvPXQuY2xpZW50SGVpZ2h0LGE9bitpLHM9MDtzPXI+bj9uOmE+citvP28+PWk/YS1vOm46cix0LnNjcm9sbFRvcD1zfSxfc2hvdWxkSW52ZXJzZVJlc291cmNlQ29sb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEEoZS5jb2xvcikuaXNEYXJrKCksbj10aGlzLmVsZW1lbnQuY3NzKFwiY29sb3JcIiksaT1uZXcgQShuKS5pc0RhcmsoKTtyZXR1cm4gdD09aX0sX2V2ZW50VG1wbDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcy5vcHRpb25zLG89ZS5leHRlbmQoe30sTS5UZW1wbGF0ZSxyLnRlbXBsYXRlU2V0dGluZ3MpLGE9by5wYXJhbU5hbWUscz1cIlwiLGw9dHlwZW9mIHQsYz17c3RvcmFnZTp7fSxjb3VudDowfTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1sPyhjLnN0b3JhZ2VbXCJ0bXBsXCIrYy5jb3VudF09dCxzKz1cIiM9dGhpcy50bXBsXCIrYy5jb3VudCtcIihcIithK1wiKSNcIixjLmNvdW50KyspOlwic3RyaW5nXCI9PT1sJiYocys9dCksaT1NLnRlbXBsYXRlKE0uZm9ybWF0KG4scyksbyksYy5jb3VudD4wJiYoaT1lLnByb3h5KGksYy5zdG9yYWdlKSksaX0sZXZlbnRSZXNvdXJjZXM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxjLGQsdT1bXSxoPXRoaXMub3B0aW9ucztpZighaC5yZXNvdXJjZXMpcmV0dXJuIHU7Zm9yKHQ9MDtoLnJlc291cmNlcy5sZW5ndGg+dDt0KyspaWYobj1oLnJlc291cmNlc1t0XSxpPW4uZmllbGQscj1NLmdldHRlcihpKShlKSlmb3Iobi5tdWx0aXBsZXx8KHI9W3JdKSxvPW4uZGF0YVNvdXJjZS52aWV3KCksYT0wO3IubGVuZ3RoPmE7YSsrKXtmb3Iocz1udWxsLGw9clthXSxuLnZhbHVlUHJpbWl0aXZlfHwobD1NLmdldHRlcihuLmRhdGFWYWx1ZUZpZWxkKShsKSksYz0wO28ubGVuZ3RoPmM7YysrKWlmKG9bY10uZ2V0KG4uZGF0YVZhbHVlRmllbGQpPT1sKXtzPW9bY107YnJlYWt9bnVsbCE9PXMmJihkPU0uZ2V0dGVyKG4uZGF0YUNvbG9yRmllbGQpKHMpLHUucHVzaCh7ZmllbGQ6bi5maWVsZCx0aXRsZTpuLnRpdGxlLG5hbWU6bi5uYW1lLHRleHQ6TS5nZXR0ZXIobi5kYXRhVGV4dEZpZWxkKShzKSx2YWx1ZTpsLGNvbG9yOmR9KSl9cmV0dXJuIHV9LGNyZWF0ZUxheW91dDpmdW5jdGlvbihpKXt2YXIgcixvLGEscyxsLGM9LTE7Zm9yKGkucm93c3x8KGkucm93cz1bXSkscj0wO2kucm93cy5sZW5ndGg+cjtyKyspaWYoaS5yb3dzW3JdLmFsbERheSl7Yz1yO2JyZWFrfW89aS5yb3dzW2NdLGM+PTAmJmkucm93cy5zcGxpY2UoYywxKSxhPXRoaXMuY29sdW1uTGV2ZWxzPXQoaSxcImNvbHVtbnNcIikscz10aGlzLnJvd0xldmVscz10KGksXCJyb3dzXCIpLHRoaXMudGFibGU9ZShcIjx0YWJsZSBcIituKCkrJyBjbGFzcz1cImstc2NoZWR1bGVyLWxheW91dCBrLXNjaGVkdWxlci0nK3RoaXMubmFtZSsndmlld1wiLz4nKSxsPXNbcy5sZW5ndGgtMV0ubGVuZ3RoLHRoaXMudGFibGUuYXBwZW5kKHRoaXMuX3RvcFNlY3Rpb24oYSxvLGwpKSx0aGlzLnRhYmxlLmFwcGVuZCh0aGlzLl9ib3R0b21TZWN0aW9uKGEscyxsKSksdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLnRhYmxlKSx0aGlzLl9zY3JvbGxlcigpfSxyZWZyZXNoTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhLHM9dGhpcyxsPXMuZWxlbWVudC5maW5kKFwiPi5rLXNjaGVkdWxlci10b29sYmFyXCIpLGM9cy5lbGVtZW50LmlubmVySGVpZ2h0KCksZD10aGlzLl9zY3JvbGxiYXIsdT0wLGg9dGhpcy5faXNSdGw/XCJsZWZ0XCI6XCJyaWdodFwiO2Zvcih0PTA7bC5sZW5ndGg+dDt0KyspYy09bC5lcSh0KS5vdXRlckhlaWdodCgpO3MuZGF0ZXNIZWFkZXImJih1PXMuZGF0ZXNIZWFkZXIub3V0ZXJIZWlnaHQoKSkscy50aW1lc0hlYWRlciYmcy50aW1lc0hlYWRlci5vdXRlckhlaWdodCgpPnUmJih1PXMudGltZXNIZWFkZXIub3V0ZXJIZWlnaHQoKSkscy5kYXRlc0hlYWRlciYmcy50aW1lc0hlYWRlciYmKG49cy5kYXRlc0hlYWRlci5maW5kKFwidGFibGU6Zmlyc3QgdHJcIikscy50aW1lc0hlYWRlci5maW5kKFwidHJcIikuaGVpZ2h0KGZ1bmN0aW9uKHQpe2UodGhpcykuaGVpZ2h0KG4uZXEodCkuaGVpZ2h0KCkpfSkpLHUmJihjLT11KSxzLmZvb3RlciYmKGMtPXMuZm9vdGVyLm91dGVySGVpZ2h0KCkpLGk9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gZVswXS5zdHlsZS5oZWlnaHQ/ITA6KHQ9ZS5oZWlnaHQoKSxlLmhlaWdodChcImF1dG9cIiksbj1lLmhlaWdodCgpLHQhPW4/KGUuaGVpZ2h0KFwiXCIpLCEwKTooZS5oZWlnaHQoXCJcIiksITEpKX0scj1zLmNvbnRlbnRbMF0sbz1NLnN1cHBvcnQua2luZXRpY1Njcm9sbE5lZWRlZD8wOmQsaShzLmVsZW1lbnQpJiYocy5jb250ZW50LmhlaWdodChjPjIqZD9jOjIqZCsxKSxzLnRpbWVzLmhlaWdodChyLmNsaWVudEhlaWdodCksYT1zLnRpbWVzLmZpbmQoXCJ0YWJsZVwiKSxhLmxlbmd0aCYmYS5oZWlnaHQocy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKVswXS5jbGllbnRIZWlnaHQpKSxyLm9mZnNldFdpZHRoLXIuY2xpZW50V2lkdGg+MD8ocy50YWJsZS5hZGRDbGFzcyhcImstc2Nyb2xsYmFyLXZcIikscy5kYXRlc0hlYWRlci5jc3MoXCJwYWRkaW5nLVwiK2gsby1wYXJzZUludChzLmRhdGVzSGVhZGVyLmNoaWxkcmVuKCkuY3NzKFwiYm9yZGVyLVwiK2grXCItd2lkdGhcIiksMTApKSk6cy5kYXRlc0hlYWRlci5jc3MoXCJwYWRkaW5nLVwiK2gsXCJcIiksci5vZmZzZXRIZWlnaHQtci5jbGllbnRIZWlnaHQ+MHx8ci5jbGllbnRIZWlnaHQ+cy5jb250ZW50LmNoaWxkcmVuKFwiLmstc2NoZWR1bGVyLXRhYmxlXCIpLmhlaWdodCgpP3MudGFibGUuYWRkQ2xhc3MoXCJrLXNjcm9sbGJhci1oXCIpOnMudGFibGUucmVtb3ZlQ2xhc3MoXCJrLXNjcm9sbGJhci1oXCIpfSxfdG9wU2VjdGlvbjpmdW5jdGlvbih0LG4saSl7dGhpcy50aW1lc0hlYWRlcj1vKHQubGVuZ3RoLG4saSk7dmFyIHI9dFt0Lmxlbmd0aC0xXS5sZW5ndGg7cmV0dXJuIHRoaXMuZGF0ZXNIZWFkZXI9YSh0LHIsbiksZShcIjx0cj5cIikuYXBwZW5kKHRoaXMudGltZXNIZWFkZXIuYWRkKHRoaXMuZGF0ZXNIZWFkZXIpLndyYXAoXCI8dGQ+XCIpLnBhcmVudCgpKVxufSxfYm90dG9tU2VjdGlvbjpmdW5jdGlvbih0LG4saSl7cmV0dXJuIHRoaXMudGltZXM9cyhuLGkpLHRoaXMuY29udGVudD1sKHRbdC5sZW5ndGgtMV0sbltuLmxlbmd0aC0xXSksZShcIjx0cj5cIikuYXBwZW5kKHRoaXMudGltZXMuYWRkKHRoaXMuY29udGVudCkud3JhcChcIjx0ZD5cIikucGFyZW50KCkpfSxfc2Nyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7dGhpcy5jb250ZW50LmJpbmQoXCJzY3JvbGxcIitGLGZ1bmN0aW9uKCl7bi5kYXRlc0hlYWRlci5maW5kKFwiPi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcFwiKS5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksbi50aW1lcy5zY3JvbGxUb3AodGhpcy5zY3JvbGxUb3ApfSksdD1NLnRvdWNoU2Nyb2xsZXIodGhpcy5jb250ZW50LHthdm9pZFNjcm9sbGluZzpmdW5jdGlvbih0KXtyZXR1cm4gZSh0LmV2ZW50LnRhcmdldCkuY2xvc2VzdChcIi5rLWV2ZW50LmstZXZlbnQtYWN0aXZlXCIpLmxlbmd0aD4wfX0pLHQmJnQubW92YWJsZSYmKHRoaXMuX3RvdWNoU2Nyb2xsZXI9dCx0aGlzLmNvbnRlbnQ9dC5zY3JvbGxFbGVtZW50LHQubW92YWJsZS5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSl7bi5kYXRlc0hlYWRlci5maW5kKFwiPi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcFwiKS5zY3JvbGxMZWZ0KC1lLnNlbmRlci54KSxuLnRpbWVzLnNjcm9sbFRvcCgtZS5zZW5kZXIueSl9KSl9LF9yZXNvdXJjZXNGb3JHcm91cHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPVtdLG89dGhpcy5vcHRpb25zLmdyb3VwLGE9dGhpcy5vcHRpb25zLnJlc291cmNlcztpZihvPW8mJm8ucmVzb3VyY2VzP28ucmVzb3VyY2VzOltdLGEmJm8ubGVuZ3RoKWZvcihlPTAsdD1hLmxlbmd0aDt0PmU7ZSsrKWZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWFbZV0ubmFtZT09PW9bbl0mJnIucHVzaChhW2VdKTt0aGlzLmdyb3VwZWRSZXNvdXJjZXM9cn0sX2NyZWF0ZUNvbHVtbnNMYXlvdXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBtKFwiY29sdW1uc1wiLGUsdCxuKX0sX2dyb3VwT3JpZW50YXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuZ3JvdXA7cmV0dXJuIGUmJmUucmVzb3VyY2VzP2Uub3JpZW50YXRpb246XCJob3Jpem9udGFsXCJ9LF9pc1ZlcnRpY2FsbHlHcm91cGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXBlZFJlc291cmNlcy5sZW5ndGgmJlwidmVydGljYWxcIj09PXRoaXMuX2dyb3VwT3JpZW50YXRpb24oKX0sX2NyZWF0ZVJvd3NMYXlvdXQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBtKFwicm93c1wiLGUsdCxuKX0sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmZpbmQoXCIuay1zdGF0ZS1zZWxlY3RlZFwiKS5yZW1vdmVBdHRyKFwiaWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztJLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxlLnRhYmxlJiYoTS5kZXN0cm95KGUudGFibGUpLGUudGFibGUucmVtb3ZlKCkpLGUuZ3JvdXBzPW51bGwsZS50YWJsZT1udWxsLGUuY29udGVudD1udWxsLGUudGltZXM9bnVsbCxlLmRhdGVzSGVhZGVyPW51bGwsZS50aW1lc0hlYWRlcj1udWxsLGUuZm9vdGVyPW51bGwsZS5fcmVzaXplSGludD1udWxsLGUuX21vdmVIaW50PW51bGx9LGNhbGVuZGFySW5mbzpmdW5jdGlvbigpe3JldHVybiBNLmdldEN1bHR1cmUoKS5jYWxlbmRhcnMuc3RhbmRhcmR9LHByZXZHcm91cFNsb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcy5ncm91cHNbdF0sbz1yLnJhbmdlcyhlLGUsbiwhMSlbMF0uc3RhcnQ7aWYoISgwPj10KSlyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3IudGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKT8oaT1yLl9jb2xsZWN0aW9uKG4/by5pbmRleDpvLmNvbGxlY3Rpb25JbmRleCwhMSksaS5sYXN0KCkpOihpPXIuX2NvbGxlY3Rpb24oci5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCktMSwhMCksaS5hdChvLmluZGV4KSk6ci50aW1lU2xvdENvbGxlY3Rpb25Db3VudCgpPyhpPXIuX2NvbGxlY3Rpb24obj8wOnIudGltZVNsb3RDb2xsZWN0aW9uQ291bnQoKS0xLG4pLG4/aS5sYXN0KCk6aS5hdChvLmluZGV4KSk6KGk9ci5fY29sbGVjdGlvbihvLmNvbGxlY3Rpb25JbmRleCwhMCksaS5sYXN0KCkpfSxuZXh0R3JvdXBTbG90OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG89dGhpcy5ncm91cHNbdF0sYT1vLnJhbmdlcyhlLGUsbiwhMSlbMF0uc3RhcnQ7aWYoISh0Pj10aGlzLmdyb3Vwcy5sZW5ndGgtMSkpcmV0dXJuIHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT9vLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/KHI9by5kYXlTbG90Q29sbGVjdGlvbkNvdW50KCksaT1vLl9jb2xsZWN0aW9uKHI/MDphLmNvbGxlY3Rpb25JbmRleCxyKSxuP2kuZmlyc3QoKTppLmF0KGEuY29sbGVjdGlvbkluZGV4KSk6KGk9by5fY29sbGVjdGlvbigwLCEwKSxpLmF0KGEuaW5kZXgpKTpvLnRpbWVTbG90Q29sbGVjdGlvbkNvdW50KCk/KGk9by5fY29sbGVjdGlvbigwLG4pLG4/aS5maXJzdCgpOmkuYXQoYS5pbmRleCkpOihpPW8uX2NvbGxlY3Rpb24oYS5jb2xsZWN0aW9uSW5kZXgsITApLGkuZmlyc3QoKSl9LF91cGRhdGVFdmVudEZvck1vdmU6ZnVuY3Rpb24oKXt9LF91cGRhdGVFdmVudEZvclJlc2l6ZTpmdW5jdGlvbigpe30sX3VwZGF0ZUV2ZW50Rm9yU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiBlfX0pLEE9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz1BLmZvcm1hdHM7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGU9YS5yZXNvbHZlQ29sb3IoZSkscj0wO3MubGVuZ3RoPnI7cisrKXQ9c1tyXS5yZSxuPXNbcl0ucHJvY2VzcyxpPXQuZXhlYyhlKSxpJiYobz1uKGkpLGEucj1vWzBdLGEuZz1vWzFdLGEuYj1vWzJdKTtlbHNlIGEucj1hcmd1bWVudHNbMF0sYS5nPWFyZ3VtZW50c1sxXSxhLmI9YXJndW1lbnRzWzJdO2Eucj1hLm5vcm1hbGl6ZUJ5dGUoYS5yKSxhLmc9YS5ub3JtYWxpemVCeXRlKGEuZyksYS5iPWEubm9ybWFsaXplQnl0ZShhLmIpfSxBLnByb3RvdHlwZT17cmVzb2x2ZUNvbG9yOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fFwiIzAwMFwiLFwiI1wiPT1lLmNoYXJBdCgwKSYmKGU9ZS5zdWJzdHIoMSw2KSksZT1lLnJlcGxhY2UoLyAvZyxcIlwiKSxlPWUudG9Mb3dlckNhc2UoKSxlPUEubmFtZWRDb2xvcnNbZV18fGV9LG5vcm1hbGl6ZUJ5dGU6ZnVuY3Rpb24oZSl7cmV0dXJuIDA+ZXx8aXNOYU4oZSk/MDplPjI1NT8yNTU6ZX0scGVyY0JyaWdodG5lc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBSLnNxcnQoLjI0MSplLnIqZS5yKy42OTEqZS5nKmUuZysuMDY4KmUuYiplLmIpfSxpc0Rhcms6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5wZXJjQnJpZ2h0bmVzcygpO3JldHVybiAxODA+dH19LEEuZm9ybWF0cz1be3JlOi9ecmdiXFwoKFxcZHsxLDN9KSxcXHMqKFxcZHsxLDN9KSxcXHMqKFxcZHsxLDN9KVxcKSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW3BhcnNlSW50KGVbMV0sMTApLHBhcnNlSW50KGVbMl0sMTApLHBhcnNlSW50KGVbM10sMTApXX19LHtyZTovXihcXHd7Mn0pKFxcd3syfSkoXFx3ezJ9KSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW3BhcnNlSW50KGVbMV0sMTYpLHBhcnNlSW50KGVbMl0sMTYpLHBhcnNlSW50KGVbM10sMTYpXX19LHtyZTovXihcXHd7MX0pKFxcd3sxfSkoXFx3ezF9KSQvLHByb2Nlc3M6ZnVuY3Rpb24oZSl7cmV0dXJuW3BhcnNlSW50KGVbMV0rZVsxXSwxNikscGFyc2VJbnQoZVsyXStlWzJdLDE2KSxwYXJzZUludChlWzNdK2VbM10sMTYpXX19XSxBLm5hbWVkQ29sb3JzPXthcXVhOlwiMDBmZmZmXCIsYXp1cmU6XCJmMGZmZmZcIixiZWlnZTpcImY1ZjVkY1wiLGJsYWNrOlwiMDAwMDAwXCIsYmx1ZTpcIjAwMDBmZlwiLGJyb3duOlwiYTUyYTJhXCIsY29yYWw6XCJmZjdmNTBcIixjeWFuOlwiMDBmZmZmXCIsZGFya2JsdWU6XCIwMDAwOGJcIixkYXJrY3lhbjpcIjAwOGI4YlwiLGRhcmtncmF5OlwiYTlhOWE5XCIsZGFya2dyZWVuOlwiMDA2NDAwXCIsZGFya29yYW5nZTpcImZmOGMwMFwiLGRhcmtyZWQ6XCI4YjAwMDBcIixkaW1ncmF5OlwiNjk2OTY5XCIsZnVjaHNpYTpcImZmMDBmZlwiLGdvbGQ6XCJmZmQ3MDBcIixnb2xkZW5yb2Q6XCJkYWE1MjBcIixncmF5OlwiODA4MDgwXCIsZ3JlZW46XCIwMDgwMDBcIixncmVlbnllbGxvdzpcImFkZmYyZlwiLGluZGlnbzpcIjRiMDA4MlwiLGl2b3J5OlwiZmZmZmYwXCIsa2hha2k6XCJmMGU2OGNcIixsaWdodGJsdWU6XCJhZGQ4ZTZcIixsaWdodGdyZXk6XCJkM2QzZDNcIixsaWdodGdyZWVuOlwiOTBlZTkwXCIsbGlnaHRwaW5rOlwiZmZiNmMxXCIsbGlnaHR5ZWxsb3c6XCJmZmZmZTBcIixsaW1lOlwiMDBmZjAwXCIsbGltZWdyZWVuOlwiMzJjZDMyXCIsbGluZW46XCJmYWYwZTZcIixtYWdlbnRhOlwiZmYwMGZmXCIsbWFyb29uOlwiODAwMDAwXCIsbWVkaXVtYmx1ZTpcIjAwMDBjZFwiLG5hdnk6XCIwMDAwODBcIixvbGl2ZTpcIjgwODAwMFwiLG9yYW5nZTpcImZmYTUwMFwiLG9yYW5nZXJlZDpcImZmNDUwMFwiLG9yY2hpZDpcImRhNzBkNlwiLHBpbms6XCJmZmMwY2JcIixwbHVtOlwiZGRhMGRkXCIscHVycGxlOlwiODAwMDgwXCIscmVkOlwiZmYwMDAwXCIscm95YWxibHVlOlwiNDE2OWUxXCIsc2FsbW9uOlwiZmE4MDcyXCIsc2lsdmVyOlwiYzBjMGMwXCIsc2t5Ymx1ZTpcIjg3Y2VlYlwiLHNsYXRlYmx1ZTpcIjZhNWFjZFwiLHNsYXRlZ3JheTpcIjcwODA5MFwiLHNub3c6XCJmZmZhZmFcIixzdGVlbGJsdWU6XCI0NjgyYjRcIix0YW46XCJkMmI0OGNcIix0ZWFsOlwiMDA4MDgwXCIsdG9tYXRvOlwiZmY2MzQ3XCIsdHVycXVvaXNlOlwiNDBlMGQwXCIsdmlvbGV0OlwiZWU4MmVlXCIsd2hlYXQ6XCJmNWRlYjNcIix3aGl0ZTpcImZmZmZmZlwiLHdoaXRlc21va2U6XCJmNWY1ZjVcIix5ZWxsb3c6XCJmZmZmMDBcIix5ZWxsb3dncmVlbjpcIjlhY2QzMlwifSxFPS9cXHMqay1zdGF0ZS1zZWxlY3RlZC8sZS5leHRlbmQoUC5TY2hlZHVsZXJWaWV3LHtjcmVhdGVDb2x1bW5zOnAsY3JlYXRlUm93czpmLHJhbmdlSW5kZXg6dSxjb2xsaWRpbmdFdmVudHM6ZCxncm91cEVxRmlsdGVyOnZ9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0PW5ldyBEYXRlKDE5ODAsMSwxLDAsMCwwKTtyZXR1cm4gYyh0LG0oZSkpLHR9ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIGU+PXQmJm4+PWV9ZnVuY3Rpb24gcihlLHQsbixpKXtyZXR1cm4gaT1pP24+PWU6bj5lLGU+dCYmaX1mdW5jdGlvbiBvKGUsdCxuLGkpe3ZhciByLG89ZS5fY29udGludW91c0V2ZW50cyxhPW9bby5sZW5ndGgtMV0sbD1wKHQuc3RhcnQuc3RhcnREYXRlKCkpLmdldFRpbWUoKTtpZihpJiZhJiZwKGEuc3RhcnQuc3RhcnREYXRlKCkpLmdldFRpbWUoKT09bCl7Zm9yKHI9by5sZW5ndGgtMTtyPi0xJiYhKG9bcl0uaXNBbGxEYXl8fHAob1tyXS5zdGFydC5zdGFydERhdGUoKSkuZ2V0VGltZSgpPGwpO3ItLSk7by5zcGxpY2UocisxLDAse2VsZW1lbnQ6bixpc0FsbERheTohMCx1aWQ6bi5hdHRyKHMuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KX1lbHNlIG8ucHVzaCh7ZWxlbWVudDpuLGlzQWxsRGF5OmksdWlkOm4uYXR0cihzLmF0dHIoXCJ1aWRcIikpLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSl9ZnVuY3Rpb24gYShlKXt2YXIgdD1bXSxuPWUud29ya1dlZWtTdGFydDtmb3IodC5wdXNoKG4pO2Uud29ya1dlZWtFbmQhPW47KW4+Nj9uLT03Om4rKyx0LnB1c2gobik7cmV0dXJuIHR9dmFyIHM9d2luZG93LmtlbmRvLGw9cy51aSxjPXMuZGF0ZS5zZXRUaW1lLGQ9bC5TY2hlZHVsZXJWaWV3LHU9ZS5leHRlbmQsaD1lLnByb3h5LHA9cy5kYXRlLmdldERhdGUsZj1zLmRhdGUuTVNfUEVSX01JTlVURSxnPXMuZGF0ZS5NU19QRVJfREFZLG09cy5kYXRlLmdldE1pbGxpc2Vjb25kcyx2PVwiLmtlbmRvTXVsdGlEYXlWaWV3XCIsXz1zLnRlbXBsYXRlKCc8ZGl2IHRpdGxlPVwiKCM9a2VuZG8uZm9ybWF0KFwiezA6dH0gLSB7MTp0fVwiLCBzdGFydCwgZW5kKSMpOiAjPXRpdGxlLnJlcGxhY2UoL1wiL2csXCImXFxcXCMzNDtcIikjXCI+PGRpdiBjbGFzcz1cImstZXZlbnQtdGVtcGxhdGUgay1ldmVudC10aW1lXCI+IzprZW5kby5mb3JtYXQoXCJ7MDp0fSAtIHsxOnR9XCIsIHN0YXJ0LCBlbmQpIzwvZGl2PjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlXCI+JHt0aXRsZX08L2Rpdj48L2Rpdj4nKSx5PXMudGVtcGxhdGUoJzxkaXYgdGl0bGU9XCIoIz1rZW5kby5mb3JtYXQoXCJ7MDp0fVwiLCBzdGFydCkjKTogIz10aXRsZS5yZXBsYWNlKC9cIi9nLFwiJlxcXFwjMzQ7XCIpI1wiPjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlXCI+JHt0aXRsZX08L2Rpdj48L2Rpdj4nKSx3PXMudGVtcGxhdGUoXCI8c3BhbiBjbGFzcz0nay1saW5rIGstbmF2LWRheSc+Iz1rZW5kby50b1N0cmluZyhkYXRlLCAnZGRkIE0vZGQnKSM8L3NwYW4+XCIpLGI9JzxkaXYgcm9sZT1cImdyaWRjZWxsXCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCIgZGF0YS0jPW5zI3VpZD1cIiM9dWlkI1wiI2lmIChyZXNvdXJjZXNbMF0pIHsgI3N0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPXJlc291cmNlc1swXS5jb2xvciM7IGJvcmRlci1jb2xvcjogIz1yZXNvdXJjZXNbMF0uY29sb3IjXCJjbGFzcz1cImstZXZlbnQjPWludmVyc2VDb2xvciA/IFwiIGstZXZlbnQtaW52ZXJzZVwiIDogXCJcIiNcIiAjfSBlbHNlIHsjY2xhc3M9XCJrLWV2ZW50XCIjfSM+PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jIGlmKGRhdGEudGFpbCB8fCBkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj4jfSMjIGlmKGRhdGEuaXNFeGNlcHRpb24oKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktZXhjZXB0aW9uXCI+PC9zcGFuPiMgfSBlbHNlIGlmKGRhdGEuaXNSZWN1cnJpbmcoKSkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktcmVmcmVzaFwiPjwvc3Bhbj4jIH0gIzwvc3Bhbj57MH08c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiNpZiAoc2hvd0RlbGV0ZSkgeyM8YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGluayBrLWV2ZW50LWRlbGV0ZVwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstc2ktY2xvc2VcIj48L3NwYW4+PC9hPiN9IyMgaWYoZGF0YS5oZWFkIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPiN9Izwvc3Bhbj4jaWYocmVzaXphYmxlICYmICFzaW5nbGVEYXkgJiYgIWRhdGEudGFpbCAmJiAhZGF0YS5taWRkbGUpeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS13XCI+PC9zcGFuPiN9IyNpZihyZXNpemFibGUgJiYgIXNpbmdsZURheSAmJiAhZGF0YS5oZWFkICYmICFkYXRhLm1pZGRsZSl7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLWVcIj48L3NwYW4+I30jPC9kaXY+JyxrPSc8ZGl2IHJvbGU9XCJncmlkY2VsbFwiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiIGRhdGEtIz1ucyN1aWQ9XCIjPXVpZCNcIiAjaWYgKHJlc291cmNlc1swXSkgeyAjc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9cmVzb3VyY2VzWzBdLmNvbG9yICM7IGJvcmRlci1jb2xvcjogIz1yZXNvdXJjZXNbMF0uY29sb3IjXCJjbGFzcz1cImstZXZlbnQjPWludmVyc2VDb2xvciA/IFwiIGstZXZlbnQtaW52ZXJzZVwiIDogXCJcIiNcIiN9IGVsc2UgeyNjbGFzcz1cImstZXZlbnRcIiN9Iz48c3BhbiBjbGFzcz1cImstZXZlbnQtYWN0aW9uc1wiPiMgaWYoZGF0YS5pc0V4Y2VwdGlvbigpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1leGNlcHRpb25cIj48L3NwYW4+IyB9IGVsc2UgaWYoZGF0YS5pc1JlY3VycmluZygpKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1yZWZyZXNoXCI+PC9zcGFuPiMgfSAjPC9zcGFuPnswfTxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+I2lmIChzaG93RGVsZXRlKSB7IzxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rIGstZXZlbnQtZGVsZXRlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1jbG9zZVwiPjwvc3Bhbj48L2E+I30jPC9zcGFuPjxzcGFuIGNsYXNzPVwiay1ldmVudC10b3AtYWN0aW9uc1wiPiMgaWYoZGF0YS50YWlsIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1uXCI+PC9zcGFuPiMgfSAjPC9zcGFuPjxzcGFuIGNsYXNzPVwiay1ldmVudC1ib3R0b20tYWN0aW9uc1wiPiMgaWYoZGF0YS5oZWFkIHx8IGRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1zXCI+PC9zcGFuPiMgfSAjPC9zcGFuPiMgaWYocmVzaXphYmxlICYmICFkYXRhLnRhaWwgJiYgIWRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLW5cIj48L3NwYW4+IyB9ICMjIGlmKHJlc2l6YWJsZSAmJiAhZGF0YS5oZWFkICYmICFkYXRhLm1pZGRsZSkgeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS1zXCI+PC9zcGFuPiMgfSAjPC9kaXY+Jyx4PWQuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztkLmZuLmluaXQuY2FsbChuLGUsdCksbi50aXRsZT1uLm9wdGlvbnMudGl0bGV8fG4ub3B0aW9ucy5uYW1lLG4uX3dvcmtEYXlzPWEobi5vcHRpb25zKSxuLl90ZW1wbGF0ZXMoKSxuLl9lZGl0YWJsZSgpLG4uY2FsY3VsYXRlRGF0ZVJhbmdlKCksbi5fZ3JvdXBzKCksbi5fY3VycmVudFRpbWUoKX0sX2N1cnJlbnRUaW1lTWFya2VyVXBkYXRlcjpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYSxsLGMsZCx1LGg9bmV3IERhdGUscD10aGlzLm9wdGlvbnM7Zm9yKHAuY3VycmVudFRpbWVNYXJrZXIudXNlTG9jYWxUaW1lem9uZT09PSExJiYodD1wLmRhdGFTb3VyY2Uub3B0aW9ucy5zY2hlbWEudGltZXpvbmUscC5kYXRhU291cmNlJiZ0JiYobj1zLnRpbWV6b25lLm9mZnNldChoLHQpLGg9cy50aW1lem9uZS5jb252ZXJ0KGgsaC5nZXRUaW1lem9uZU9mZnNldCgpLG4pKSksdGhpcy50aW1lcy5maW5kKFwiLmstY3VycmVudC10aW1lXCIpLnJlbW92ZSgpLGk9cC5ncm91cCYmXCJob3Jpem9udGFsXCIhPXAuZ3JvdXAub3JpZW50YXRpb24/dGhpcy5ncm91cHMubGVuZ3RoOjEscj0wO2k+cjtyKyspe2lmKG89dGhpcy5ncm91cHNbcl0sYT1zLmRhdGUudG9VdGNUaW1lKGgpLGw9by50aW1lU2xvdFJhbmdlcyhhLGErMSksMD09PWwubGVuZ3RoKXJldHVybjtjPWxbMF0uY29sbGVjdGlvbixkPWMuc2xvdEJ5U3RhcnREYXRlKGgpLGQmJih1PWUoXCI8ZGl2IGNsYXNzPSdrLWN1cnJlbnQtdGltZSc+PC9kaXY+XCIpLHUuYXBwZW5kVG8odGhpcy50aW1lcykuY3NzKHt0b3A6TWF0aC5yb3VuZChsWzBdLmlubmVyUmVjdChoLG5ldyBEYXRlKGguZ2V0VGltZSgpKzEpLCExKS50b3ApLGhlaWdodDpcIjFweFwiLHJpZ2h0OlwiMXB4XCIsbGVmdDowfSkpfX0sX2N1cnJlbnRUaW1lOmZ1bmN0aW9uKCl7dmFyIGUsbj10aGlzLGk9bi5vcHRpb25zLmN1cnJlbnRUaW1lTWFya2VyO2khPT0hMSYmaS51cGRhdGVJbnRlcnZhbCE9PXQmJihlPWkudXBkYXRlSW50ZXJ2YWwsbi5fY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyKCksbi5fY3VycmVudFRpbWVVcGRhdGVUaW1lcj1zZXRJbnRlcnZhbChoKHRoaXMuX2N1cnJlbnRUaW1lTWFya2VyVXBkYXRlcixuKSxlKSl9LF91cGRhdGVSZXNpemVIaW50OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8sYSxsLGMsdSxoLHAsZixnLG09ZS5pc011bHRpRGF5KCksdj10aGlzLmdyb3Vwc1t0XSxfPXYucmFuZ2VzKG4saSxtLGUuaXNBbGxEYXkpO2Zvcih0aGlzLl9yZW1vdmVSZXNpemVIaW50KCkscj0wO18ubGVuZ3RoPnI7cisrKW89X1tyXSxhPW8uc3RhcnRTbG90KCksbD1hLm9mZnNldFdpZHRoLGM9YS5jbGllbnRIZWlnaHQsdT1hLm9mZnNldFRvcCxtP2w9by5pbm5lcldpZHRoKCk6KGg9by5vdXRlclJlY3QobixpLHRoaXMub3B0aW9ucy5zbmFwKSx1PWgudG9wLGM9aC5ib3R0b20taC50b3ApLHA9ZC5mbi5fY3JlYXRlUmVzaXplSGludC5jYWxsKHRoaXMsYS5vZmZzZXRMZWZ0LHUsbCxjKSx0aGlzLl9yZXNpemVIaW50PXRoaXMuX3Jlc2l6ZUhpbnQuYWRkKHApO2Y9XCJ0XCIsZz10aGlzLmNvbnRlbnQsbSYmKGY9XCJNL2RkXCIsZz10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcDpoYXMoLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5KSA+IGRpdlwiKSxnLmxlbmd0aHx8KGc9dGhpcy5jb250ZW50KSksdGhpcy5fcmVzaXplSGludC5hcHBlbmRUbyhnKSx0aGlzLl9yZXNpemVIaW50LmZpbmQoXCIuay1sYWJlbC10b3AsLmstbGFiZWwtYm90dG9tXCIpLnRleHQoXCJcIiksdGhpcy5fcmVzaXplSGludC5maXJzdCgpLmFkZENsYXNzKFwiay1maXJzdFwiKS5maW5kKFwiLmstbGFiZWwtdG9wXCIpLnRleHQocy50b1N0cmluZyhzLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pLGYpKSx0aGlzLl9yZXNpemVIaW50Lmxhc3QoKS5hZGRDbGFzcyhcImstbGFzdFwiKS5maW5kKFwiLmstbGFiZWwtYm90dG9tXCIpLnRleHQocy50b1N0cmluZyhzLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpLGYpKX0sX3VwZGF0ZU1vdmVIaW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxsLGMsZCx1PWUuaXNNdWx0aURheSgpLGg9dGhpcy5ncm91cHNbdF0scD1zLmRhdGUudG9VdGNUaW1lKGUuc3RhcnQpK24sZj1wK2UuZHVyYXRpb24oKSxnPWgucmFuZ2VzKHAsZix1LGUuaXNBbGxEYXkpO2ZvcihwPXMudGltZXpvbmUudG9Mb2NhbERhdGUocCksZj1zLnRpbWV6b25lLnRvTG9jYWxEYXRlKGYpLHRoaXMuX3JlbW92ZU1vdmVIaW50KCksIXUmJigwPT09bShmKXx8bShmKTxtKHRoaXMuc3RhcnRUaW1lKCkpKSYmZy5sZW5ndGg+MSYmZy5wb3AoKSxpPTA7Zy5sZW5ndGg+aTtpKyspcj1nW2ldLG89ci5zdGFydCxhPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChlLmNsb25lKHtzdGFydDpwLGVuZDpmfSksIXUpLGEuYWRkQ2xhc3MoXCJrLWV2ZW50LWRyYWctaGludFwiKSxsPXtsZWZ0Om8ub2Zmc2V0TGVmdCsyLHRvcDpvLm9mZnNldFRvcH0sdGhpcy5faXNSdGwmJihsLmxlZnQ9LjEqby5jbGllbnRXaWR0aCtvLm9mZnNldExlZnQrMiksdT9sLndpZHRoPXIuaW5uZXJXaWR0aCgpLTQ6KGM9ci5vdXRlclJlY3QocCxmLHRoaXMub3B0aW9ucy5zbmFwKSxsLnRvcD1jLnRvcCxsLmhlaWdodD1jLmJvdHRvbS1jLnRvcCxsLndpZHRoPS45Km8uY2xpZW50V2lkdGgtNCksYS5jc3MobCksdGhpcy5fbW92ZUhpbnQ9dGhpcy5fbW92ZUhpbnQuYWRkKGEpO2Q9dGhpcy5jb250ZW50LHUmJihkPXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWhlYWRlci13cmFwOmhhcyguay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkpID4gZGl2XCIpLGQubGVuZ3RofHwoZD10aGlzLmNvbnRlbnQpKSx0aGlzLl9tb3ZlSGludC5hcHBlbmRUbyhkKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG87Zm9yKHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT8oaT10aGlzLmNvbnRlbnQub2Zmc2V0KCksdCs9dGhpcy5jb250ZW50WzBdLnNjcm9sbFRvcCxlKz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsTGVmdCk6aT10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcDpoYXMoLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5KVwiKS5maW5kKFwiPmRpdlwiKS5vZmZzZXQoKSxpJiYoZS09aS5sZWZ0LHQtPWkudG9wKSxlPU1hdGguY2VpbChlKSx0PU1hdGguY2VpbCh0KSxvPTA7dGhpcy5ncm91cHMubGVuZ3RoPm87bysrKWlmKHI9dGhpcy5ncm91cHNbb10sbj1yLmRheVNsb3RCeVBvc2l0aW9uKGUsdCkpcmV0dXJuIG47Zm9yKGkmJihlKz1pLmxlZnQsdCs9aS50b3ApLGk9dGhpcy5jb250ZW50Lm9mZnNldCgpLGUtPWkubGVmdCx0LT1pLnRvcCx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fCh0Kz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsVG9wLGUrPXRoaXMuY29udGVudFswXS5zY3JvbGxMZWZ0KSxlPU1hdGguY2VpbChlKSx0PU1hdGguY2VpbCh0KSxvPTA7dGhpcy5ncm91cHMubGVuZ3RoPm87bysrKWlmKHI9dGhpcy5ncm91cHNbb10sbj1yLnRpbWVTbG90QnlQb3NpdGlvbihlLHQpKXJldHVybiBuO3JldHVybiBudWxsfSxfZ3JvdXBDb3VudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JvdXBlZFJlc291cmNlcztyZXR1cm4gZS5sZW5ndGg/XCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpP3RoaXMuX3Jvd0NvdW50Rm9yTGV2ZWwoZS5sZW5ndGgtMSk6dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlLmxlbmd0aCkvdGhpcy5fY29sdW1uT2Zmc2V0Rm9yUmVzb3VyY2UoZS5sZW5ndGgpOjF9LF9jb2x1bW5Db3VudEluUmVzb3VyY2VWaWV3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzO3JldHVybiFlLmxlbmd0aHx8dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3RoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoMCk6dGhpcy5fY29sdW1uT2Zmc2V0Rm9yUmVzb3VyY2UoZS5sZW5ndGgpfSxfdGltZVNsb3RHcm91cHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQsdSxoLHAsZixnLHYsXyx5PXRoaXMuX3RpbWVTbG90SW50ZXJ2YWwoKSx3PXRoaXMuY29udGVudC5maW5kKFwidHI6bm90KC5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSlcIik7Zm9yKHcuYXR0cihcInJvbGVcIixcInJvd1wiKSxuPXcubGVuZ3RoLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKG49TWF0aC5mbG9vcihuL2UpKSxpPTA7ZT5pO2krKylmb3Iocj0wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKHI9aSksbz1yKm4scz0wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KHM9aSk7KHIrMSkqbj5vOyl7Zm9yKGw9d1tvXS5jaGlsZHJlbixjPXRoaXMuZ3JvdXBzW2ldLG8lbj09PTAmJihhPW0obmV3IERhdGUoK3RoaXMuc3RhcnRUaW1lKCkpKSksZD1zKnQ7KHMrMSkqdD5kO2QrKyl1PWxbZF0saD1kJXQscD1jLmdldFRpbWVTbG90Q29sbGVjdGlvbihoKSxmPXRoaXMuX2RhdGVzW2hdLGc9RGF0ZS5VVEMoZi5nZXRGdWxsWWVhcigpLGYuZ2V0TW9udGgoKSxmLmdldERhdGUoKSksdj1nK2EsXz12K3ksdS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncmlkY2VsbFwiKSx1LnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMSkscC5hZGRUaW1lU2xvdCh1LHYsXyk7YSs9eSxvKyt9fSxfZGF5U2xvdEdyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEsbCxjLGQsdSxoLHAsZjtmb3Iobj10aGlzLmVsZW1lbnQuZmluZCh0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCk/XCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXlcIjpcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0clwiKSxuLmF0dHIoXCJyb2xlXCIsXCJyb3dcIiksaT0wO2U+aTtpKyspZm9yKHI9MCx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkmJihyPWkpLG89dGhpcy5ncm91cHNbaV0sYT1vLmdldERheVNsb3RDb2xsZWN0aW9uKDApLGw9bltyXS5jaGlsZHJlbixjPTAsdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpfHwoYz1pKSxkPTAsdT1jKnQ7KGMrMSkqdD51O3UrKyloPWxbdV0sdSV0PT09MCYmKGQ9MCkscD10aGlzLl9kYXRlc1tkXSxmPURhdGUuVVRDKHAuZ2V0RnVsbFllYXIoKSxwLmdldE1vbnRoKCkscC5nZXREYXRlKCkpLGQrKyxoLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyaWRjZWxsXCIpLGguc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCExKSxhLmFkZERheVNsb3QoaCxmLGYrcy5kYXRlLk1TX1BFUl9EQVkpfSxfZ3JvdXBzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9dGhpcy5fZ3JvdXBDb3VudCgpLHI9dGhpcy5fY29sdW1uQ291bnRJblJlc291cmNlVmlldygpO2Zvcih0aGlzLmdyb3Vwcz1bXSxlPTA7aT5lO2UrKyl7Zm9yKHQ9dGhpcy5fYWRkUmVzb3VyY2VWaWV3KGUpLG49MDtyPm47bisrKXQuYWRkVGltZVNsb3RDb2xsZWN0aW9uKHRoaXMuX2RhdGVzW25dLHMuZGF0ZS5hZGREYXlzKHRoaXMuX2RhdGVzW25dLDEpKTt0aGlzLm9wdGlvbnMuYWxsRGF5U2xvdCYmdC5hZGREYXlTbG90Q29sbGVjdGlvbih0aGlzLl9kYXRlc1swXSxzLmRhdGUuYWRkRGF5cyh0aGlzLl9kYXRlc1t0aGlzLl9kYXRlcy5sZW5ndGgtMV0sMSkpfXRoaXMuX3RpbWVTbG90R3JvdXBzKGksciksdGhpcy5vcHRpb25zLmFsbERheVNsb3QmJnRoaXMuX2RheVNsb3RHcm91cHMoaSxyKX0sb3B0aW9uczp7bmFtZTpcIk11bHRpRGF5Vmlld1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9XCIsYWxsRGF5U2xvdDohMCxzaG93V29ya0hvdXJzOiExLHRpdGxlOlwiXCIsc3RhcnRUaW1lOnMuZGF0ZS50b2RheSgpLGVuZFRpbWU6cy5kYXRlLnRvZGF5KCksbWlub3JUaWNrQ291bnQ6MixtYWpvclRpY2s6NjAsbWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU6XCIjPWtlbmRvLnRvU3RyaW5nKGRhdGUsICd0JykjXCIsbWlub3JUaW1lSGVhZGVyVGVtcGxhdGU6XCImbmJzcDtcIixncm91cEhlYWRlclRlbXBsYXRlOlwiIz10ZXh0I1wiLHNsb3RUZW1wbGF0ZTpcIiZuYnNwO1wiLGFsbERheVNsb3RUZW1wbGF0ZTpcIiZuYnNwO1wiLGV2ZW50VGVtcGxhdGU6XyxhbGxEYXlFdmVudFRlbXBsYXRlOnksZGF0ZUhlYWRlclRlbXBsYXRlOncsZWRpdGFibGU6ITAsd29ya0RheVN0YXJ0Om5ldyBEYXRlKDE5ODAsMSwxLDgsMCwwKSx3b3JrRGF5RW5kOm5ldyBEYXRlKDE5ODAsMSwxLDE3LDAsMCksd29ya1dlZWtTdGFydDoxLHdvcmtXZWVrRW5kOjUsZm9vdGVyOntjb21tYW5kOlwid29ya0RheVwifSxtZXNzYWdlczp7YWxsRGF5OlwiYWxsIGRheVwiLHNob3dGdWxsRGF5OlwiU2hvdyBmdWxsIGRheVwiLHNob3dXb3JrRGF5OlwiU2hvdyBidXNpbmVzcyBob3Vyc1wifSxjdXJyZW50VGltZU1hcmtlcjp7dXBkYXRlSW50ZXJ2YWw6MWU0LHVzZUxvY2FsVGltZXpvbmU6ITB9fSxldmVudHM6W1wicmVtb3ZlXCIsXCJhZGRcIixcImVkaXRcIl0sX3RlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucyx0PXUoe30scy5UZW1wbGF0ZSxlLnRlbXBsYXRlU2V0dGluZ3MpO3RoaXMuZXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwoZS5ldmVudFRlbXBsYXRlLGspLHRoaXMuYWxsRGF5RXZlbnRUZW1wbGF0ZT10aGlzLl9ldmVudFRtcGwoZS5hbGxEYXlFdmVudFRlbXBsYXRlLGIpLHRoaXMubWFqb3JUaW1lSGVhZGVyVGVtcGxhdGU9cy50ZW1wbGF0ZShlLm1ham9yVGltZUhlYWRlclRlbXBsYXRlLHQpLHRoaXMubWlub3JUaW1lSGVhZGVyVGVtcGxhdGU9cy50ZW1wbGF0ZShlLm1pbm9yVGltZUhlYWRlclRlbXBsYXRlLHQpLHRoaXMuZGF0ZUhlYWRlclRlbXBsYXRlPXMudGVtcGxhdGUoZS5kYXRlSGVhZGVyVGVtcGxhdGUsdCksdGhpcy5zbG90VGVtcGxhdGU9cy50ZW1wbGF0ZShlLnNsb3RUZW1wbGF0ZSx0KSx0aGlzLmFsbERheVNsb3RUZW1wbGF0ZT1zLnRlbXBsYXRlKGUuYWxsRGF5U2xvdFRlbXBsYXRlLHQpLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZT1zLnRlbXBsYXRlKGUuZ3JvdXBIZWFkZXJUZW1wbGF0ZSx0KX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5faXNNb2JpbGUoKT90aGlzLl90b3VjaEVkaXRhYmxlKCk6dGhpcy5fbW91c2VFZGl0YWJsZSgpKX0sX21vdXNlRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5vbihcImNsaWNrXCIrdixcIi5rLWV2ZW50IGE6aGFzKC5rLXNpLWNsb3NlKVwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcInJlbW92ZVwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihzLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK3YsXCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLGZ1bmN0aW9uKG4pe3ZhciBpLHI7ZSh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcyhcImstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5XCIpfHwoaT10Ll9zbG90QnlQb3NpdGlvbihuLnBhZ2VYLG4ucGFnZVkpLGkmJihyPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LHIpfSkpLG4ucHJldmVudERlZmF1bHQoKSl9KS5vbihcImRibGNsaWNrXCIrdixcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZFwiLGZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS5wYWdlWCxlLnBhZ2VZKTtpJiYobj10Ll9yZXNvdXJjZUJ5U2xvdChpKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOnUoe30se2lzQWxsRGF5OiEwLHN0YXJ0OnMuZGF0ZS5nZXREYXRlKGkuc3RhcnREYXRlKCkpLGVuZDpzLmRhdGUuZ2V0RGF0ZShpLnN0YXJ0RGF0ZSgpKX0sbil9KSksZS5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK3YsXCIuay1ldmVudFwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcImVkaXRcIix7dWlkOmUodGhpcykuY2xvc2VzdChcIi5rLWV2ZW50XCIpLmF0dHIocy5hdHRyKFwidWlkXCIpKX0pLG4ucHJldmVudERlZmF1bHQoKX0pfSxfdG91Y2hFZGl0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiYodC5fYWRkVXNlckV2ZW50cz1uZXcgcy5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstc2NoZWR1bGVyLWNvbnRlbnQgdGRcIix0YXA6ZnVuY3Rpb24obil7dmFyIGkscjtlKG4udGFyZ2V0KS5wYXJlbnQoKS5oYXNDbGFzcyhcImstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5XCIpfHwoaT10Ll9zbG90QnlQb3NpdGlvbihuLngubG9jYXRpb24sbi55LmxvY2F0aW9uKSxpJiYocj10Ll9yZXNvdXJjZUJ5U2xvdChpKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOnUoe3N0YXJ0Omkuc3RhcnREYXRlKCksZW5kOmkuZW5kRGF0ZSgpfSxyKX0pKSxuLnByZXZlbnREZWZhdWx0KCkpfX0pLHQuX2FsbERheVVzZXJFdmVudHM9bmV3IHMuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZFwiLHRhcDpmdW5jdGlvbihlKXt2YXIgbixpPXQuX3Nsb3RCeVBvc2l0aW9uKGUueC5sb2NhdGlvbixlLnkubG9jYXRpb24pO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86dSh7fSx7aXNBbGxEYXk6ITAsc3RhcnQ6cy5kYXRlLmdldERhdGUoaS5zdGFydERhdGUoKSksZW5kOnMuZGF0ZS5nZXREYXRlKGkuc3RhcnREYXRlKCkpfSxuKX0pKSxlLnByZXZlbnREZWZhdWx0KCl9fSkpLHQub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmKHQuX2VkaXRVc2VyRXZlbnRzPW5ldyBzLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1ldmVudFwiLHRhcDpmdW5jdGlvbihuKXt2YXIgaT1lKG4udGFyZ2V0KS5jbG9zZXN0KFwiLmstZXZlbnRcIik7aS5oYXNDbGFzcyhcImstZXZlbnQtYWN0aXZlXCIpfHx0LnRyaWdnZXIoXCJlZGl0XCIse3VpZDppLmF0dHIocy5hdHRyKFwidWlkXCIpKX0pLG4ucHJldmVudERlZmF1bHQoKX19KSl9LF9sYXlvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9W10sbz1bXSxhPXRoaXMub3B0aW9ucyxsPXRoaXM7Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyluPXt9LG4udGV4dD1sLmRhdGVIZWFkZXJUZW1wbGF0ZSh7ZGF0ZTplW3RdfSkscy5kYXRlLmlzVG9kYXkoZVt0XSkmJihuLmNsYXNzTmFtZT1cImstdG9kYXlcIiksci5wdXNoKG4pO3JldHVybiBpPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxhLmFsbERheVNsb3QmJm8ucHVzaCh7dGV4dDphLm1lc3NhZ2VzLmFsbERheSxhbGxEYXk6ITAsY2VsbENvbnRlbnQ6ZnVuY3Rpb24odCl7dmFyIG49dDtyZXR1cm4gdD1pLmxlbmd0aCYmXCJ2ZXJ0aWNhbFwiIT09bC5fZ3JvdXBPcmllbnRhdGlvbigpP3QlZS5sZW5ndGg6dCxsLmFsbERheVNsb3RUZW1wbGF0ZSh7ZGF0ZTplW3RdLHJlc291cmNlczpmdW5jdGlvbigpe3JldHVybiBsLl9yZXNvdXJjZUJ5U2xvdCh7Z3JvdXBJbmRleDpufSl9fSl9fSksdGhpcy5fZm9yVGltZVJhbmdlKHRoaXMuc3RhcnRUaW1lKCksdGhpcy5lbmRUaW1lKCksZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dD9sLm1ham9yVGltZUhlYWRlclRlbXBsYXRlOmwubWlub3JUaW1lSGVhZGVyVGVtcGxhdGUsYT17dGV4dDpyKHtkYXRlOmV9KSxjbGFzc05hbWU6aT9cImstc2xvdC1jZWxsXCI6XCJcIn07by5wdXNoKGEpfSksaS5sZW5ndGgmJihcInZlcnRpY2FsXCI9PT10aGlzLl9ncm91cE9yaWVudGF0aW9uKCk/bz10aGlzLl9jcmVhdGVSb3dzTGF5b3V0KGksbyx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpOnI9dGhpcy5fY3JlYXRlQ29sdW1uc0xheW91dChpLHIsdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlKSkse2NvbHVtbnM6cixyb3dzOm99fSxfZm9vdGVyOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcy5vcHRpb25zO3IuZm9vdGVyIT09ITEmJih0PSc8ZGl2IGNsYXNzPVwiay1oZWFkZXIgay1zY2hlZHVsZXItZm9vdGVyXCI+JyxuPXIuZm9vdGVyLmNvbW1hbmQsbiYmXCJ3b3JrRGF5XCI9PT1uPyh0Kz0nPHVsIGNsYXNzPVwiay1yZXNldCBrLWhlYWRlclwiPicsdCs9JzxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLXNjaGVkdWxlci1mdWxsZGF5XCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1jbG9ja1wiPjwvc3Bhbj4nLHQrPShyLnNob3dXb3JrSG91cnM/ci5tZXNzYWdlcy5zaG93RnVsbERheTpyLm1lc3NhZ2VzLnNob3dXb3JrRGF5KStcIjwvYT48L2xpPlwiLHQrPVwiPC91bD5cIik6dCs9XCImbmJzcDtcIix0Kz1cIjwvZGl2PlwiLHRoaXMuZm9vdGVyPWUodCkuYXBwZW5kVG8odGhpcy5lbGVtZW50KSxpPXRoaXMsdGhpcy5mb290ZXIub24oXCJjbGlja1wiK3YsXCIuay1zY2hlZHVsZXItZnVsbGRheVwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxpLnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3OmkubmFtZXx8ci5uYW1lLGRhdGU6aS5zdGFydERhdGUoKSxpc1dvcmtEYXk6IXIuc2hvd1dvcmtIb3Vyc30pfSkpfSxfZm9yVGltZVJhbmdlOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBvLGEscyxsLGQsdSxoLHAsdixfLHksdyxiLGsseCxDO2ZvcihlPW4oZSksdD1uKHQpLG89dGhpcyxhPW0oZSkscz1tKHQpLGw9by5vcHRpb25zLm1pbm9yVGlja0NvdW50LGQ9by5vcHRpb25zLm1ham9yVGljaypmLHU9ZC9sfHwxLGg9bmV3IERhdGUoK2UpLHA9aC5nZXREYXRlKCksXz0wLHc9XCJcIix5PWcvdSxhIT1zJiYoYT5zJiYocys9ZykseT0ocy1hKS91KSx5PU1hdGgucm91bmQoeSk7eT5fO18rKyliPV8lKGQvdSksaz0wPT09Yix4PWwtMT5iLEM9Yj09PWwtMSx3Kz1pKGgsayx4LEMpLGMoaCx1LCExKTtyZXR1cm4gcyYmKHY9bShoKSxwPGguZ2V0RGF0ZSgpJiYodis9Zyksdj5zJiYoaD1uZXcgRGF0ZSgrdCkpKSxyJiYodys9cihoKSksd30sX2NvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPXIuc3RhcnRUaW1lKCksbD10aGlzLmVuZFRpbWUoKSxjPTEsZD0xLHU9ZS5sZW5ndGgsaD1cIlwiLHA9dGhpcy5ncm91cGVkUmVzb3VyY2VzLGY9dGhpcy5zbG90VGVtcGxhdGUsZz10aGlzLmFsbERheVNsb3RUZW1wbGF0ZSxtPSExO2ZvcihwLmxlbmd0aCYmKG09XCJ2ZXJ0aWNhbFwiPT09ci5fZ3JvdXBPcmllbnRhdGlvbigpLG0/KGQ9dGhpcy5fcm93Q291bnRGb3JMZXZlbCh0aGlzLnJvd0xldmVscy5sZW5ndGgtMiksby5hbGxEYXlTbG90JiYodD1mdW5jdGlvbih0KXt2YXIgbixpLG89Jzx0ciBjbGFzcz1cImstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5XCI+JyxhPWZ1bmN0aW9uKCl7cmV0dXJuIHIuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4OnR9KX07Zm9yKG49MCxpPWUubGVuZ3RoO2k+bjtuKyspbys9XCI8dGQ+XCIrZyh7ZGF0ZTplW25dLHJlc291cmNlczphfSkrXCI8L3RkPlwiO3JldHVybiBvK1wiPC90cj5cIn0pKTpjPXRoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwodGhpcy5jb2x1bW5MZXZlbHMubGVuZ3RoLTIpKSxoKz1cIjx0Ym9keT5cIixuPWZ1bmN0aW9uKHQsbil7dmFyIG8sYSxsLGQsaD1cIlwiLHA9XCJcIixnPTA7Zm9yKGg9XCI8dHJcIisobj8nIGNsYXNzPVwiay1taWRkbGUtcm93XCInOlwiXCIpK1wiPlwiLGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHIuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4OmV9KX19O2M+ZztnKyspZm9yKG89MCxhPXU7YT5vO28rKylwPVwiXCIscy5kYXRlLmlzVG9kYXkoZVtvXSkmJihwKz1cImstdG9kYXlcIiksKHMuZGF0ZS5nZXRNaWxsaXNlY29uZHModCk8cy5kYXRlLmdldE1pbGxpc2Vjb25kcyhyLm9wdGlvbnMud29ya0RheVN0YXJ0KXx8cy5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KT49cy5kYXRlLmdldE1pbGxpc2Vjb25kcyhyLm9wdGlvbnMud29ya0RheUVuZCl8fCFyLl9pc1dvcmtEYXkoZVtvXSkpJiYocCs9XCIgay1ub253b3JrLWhvdXJcIiksaCs9XCI8dGRcIisoXCJcIiE9PXA/JyBjbGFzcz1cIicrcCsnXCInOlwiXCIpK1wiPlwiLGw9cy5kYXRlLmdldERhdGUoZVtvXSkscy5kYXRlLnNldFRpbWUobCxzLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKHQpKSxoKz1mKHtkYXRlOmwscmVzb3VyY2VzOmQobT9pOmcpfSksaCs9XCI8L3RkPlwiO3JldHVybiBoKz1cIjwvdHI+XCJ9LGk9MDtkPmk7aSsrKWgrPXQ/dChpKTpcIlwiLGgrPXRoaXMuX2ZvclRpbWVSYW5nZShhLGwsbik7aCs9XCI8L3Rib2R5PlwiLHRoaXMuY29udGVudC5maW5kKFwidGFibGVcIikuYXBwZW5kKGgpfSxfaXNXb3JrRGF5OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5nZXREYXkoKSxpPXRoaXMuX3dvcmtEYXlzO2Zvcih0PTA7aS5sZW5ndGg+dDt0KyspaWYoaVt0XT09PW4pcmV0dXJuITA7cmV0dXJuITF9LF9yZW5kZXI6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzO3Q9dHx8W10sdGhpcy5fZGF0ZXM9dCx0aGlzLl9zdGFydERhdGU9dFswXSx0aGlzLl9lbmREYXRlPXRbdC5sZW5ndGgtMXx8MF0sdGhpcy5jcmVhdGVMYXlvdXQodGhpcy5fbGF5b3V0KHQpKSx0aGlzLl9jb250ZW50KHQpLHRoaXMuX2Zvb3RlcigpLHRoaXMucmVmcmVzaExheW91dCgpLG49dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkgdGRcIiksbi5sZW5ndGgmJih0aGlzLl9hbGxEYXlIZWFkZXJIZWlnaHQ9bi5maXJzdCgpWzBdLmNsaWVudEhlaWdodCksaS5kYXRlc0hlYWRlci5vbihcImNsaWNrXCIrdixcIi5rLW5hdi1kYXlcIixmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCkuY2xvc2VzdChcInRoXCIpLHI9bi5vZmZzZXQoKSxvPWkuX3Nsb3RCeVBvc2l0aW9uKHIubGVmdCxyLnRvcCtuLm91dGVySGVpZ2h0KCkpO2kudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6XCJkYXlcIixkYXRlOm8uc3RhcnREYXRlKCl9KX0pfSxzdGFydFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUuc2hvd1dvcmtIb3Vycz9lLndvcmtEYXlTdGFydDplLnN0YXJ0VGltZX0sZW5kVGltZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5zaG93V29ya0hvdXJzP2Uud29ya0RheUVuZDplLmVuZFRpbWV9LHN0YXJ0RGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydERhdGV9LGVuZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kRGF0ZX0sX2VuZDpmdW5jdGlvbihlKXt2YXIgdD1tKHRoaXMuZW5kVGltZSgpKXx8ZztyZXR1cm4gZSYmKHQ9MCksbmV3IERhdGUodGhpcy5fZW5kRGF0ZS5nZXRUaW1lKCkrdCl9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGF0ZS5uZXh0RGF5KHRoaXMuZW5kRGF0ZSgpKX0scHJldmlvdXNEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGF0ZS5wcmV2aW91c0RheSh0aGlzLnN0YXJ0RGF0ZSgpKX0sY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKFt0aGlzLm9wdGlvbnMuZGF0ZV0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyJiZjbGVhckludGVydmFsKGUuX2N1cnJlbnRUaW1lVXBkYXRlVGltZXIpLGUuZGF0ZXNIZWFkZXImJmUuZGF0ZXNIZWFkZXIub2ZmKHYpLGUuZWxlbWVudCYmZS5lbGVtZW50Lm9mZih2KSxlLmZvb3RlciYmZS5mb290ZXIucmVtb3ZlKCksZC5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5faXNNb2JpbGUoKSYmZS5vcHRpb25zLmVkaXRhYmxlJiYoZS5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiYoZS5fYWRkVXNlckV2ZW50cy5kZXN0cm95KCksZS5fYWxsRGF5VXNlckV2ZW50cy5kZXN0cm95KCkpLGUub3B0aW9ucy5lZGl0YWJsZS51cGRhdGUhPT0hMSYmZS5fZWRpdFVzZXJFdmVudHMuZGVzdHJveSgpKX0saW5SYW5nZTpmdW5jdGlvbihlKXt2YXIgdD1kLmZuLmluUmFuZ2UuY2FsbCh0aGlzLGUpLG49bSh0aGlzLnN0YXJ0VGltZSgpKSxpPW0odGhpcy5lbmRUaW1lKCkpfHxzLmRhdGUuTVNfUEVSX0RBWSxyPW0oZS5zdGFydCksbz1tKGUuZW5kKXx8cy5kYXRlLk1TX1BFUl9EQVk7cmV0dXJuIHQmJnI+PW4mJmk+PW99LHNlbGVjdGlvbkJ5RWxlbWVudDpmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldCgpO3JldHVybiB0aGlzLl9zbG90QnlQb3NpdGlvbih0LmxlZnQsdC50b3ApfSxfdGltZVNsb3RJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tYWpvclRpY2svZS5taW5vclRpY2tDb3VudCpmfSxfdGltZVNsb3RJbmRleDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMsbj1tKGUpLGk9bSh0aGlzLnN0YXJ0VGltZSgpKSxyPXQubWFqb3JUaWNrL3QubWlub3JUaWNrQ291bnQqZjtyZXR1cm4obi1pKS9yfSxfc2xvdEluZGV4OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dGhpcy5fZGF0ZVNsb3RJbmRleChlKTp0aGlzLl90aW1lU2xvdEluZGV4KGUpfSxfZGF0ZVNsb3RJbmRleDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsbyxhLGw9dGhpcy5fZGF0ZXN8fFtdLGM9MTtmb3Iobj0wLHI9bC5sZW5ndGg7cj5uO24rKylpZihvPXMuZGF0ZS5nZXREYXRlKGxbbl0pLGE9bmV3IERhdGUocy5kYXRlLmdldERhdGUobFtuXSkuZ2V0VGltZSgpK2ctKHQ/MDoxKSksaShlLG8sYSkpcmV0dXJuIG4qYztyZXR1cm4tMX0sX3Bvc2l0aW9uQWxsRGF5RXZlbnQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxyLG8sYSxzLGwsYyx1PW4uaW5uZXJXaWR0aCgpLGg9bi5zdGFydC5pbmRleCxwPW4uZW5kLmluZGV4LGY9ZC5jb2xsaWRpbmdFdmVudHMobi5ldmVudHMoKSxoLHApLGc9dGhpcy5faGVhZGVyQ29sdW1uQ291bnR8fDAsbT0yLHY9aCE9PXA/NTo0LF89dGhpcy5fYWxsRGF5SGVhZGVySGVpZ2h0LHk9bi5zdGFydFNsb3QoKTtmb3IodC5jc3Moe2xlZnQ6eS5vZmZzZXRMZWZ0K20sd2lkdGg6dS12fSksbi5hZGRFdmVudCh7c2xvdEluZGV4Omgsc3RhcnQ6aCxlbmQ6cCxlbGVtZW50OnR9KSxmLnB1c2goe3Nsb3RJbmRleDpoLHN0YXJ0OmgsZW5kOnAsZWxlbWVudDp0fSksaT1kLmNyZWF0ZVJvd3MoZiksaS5sZW5ndGgmJmkubGVuZ3RoPmcmJih0aGlzLl9oZWFkZXJDb2x1bW5Db3VudD1pLmxlbmd0aCkscj1uLnN0YXJ0Lm9mZnNldFRvcCxvPTAsYT1pLmxlbmd0aDthPm87bysrKWZvcihzPWlbb10uZXZlbnRzLGw9MCxjPXMubGVuZ3RoO2M+bDtsKyspZShzW2xdLmVsZW1lbnQpLmNzcyh7dG9wOnIrbypffSl9LF9hcnJhbmdlQ29sdW1uczpmdW5jdGlvbihlLHQsbixpKXt2YXIgcixvLGEscyxsLGMsdSxoLHAsZixnLG09aS5zdGFydDtmb3IoZT17ZWxlbWVudDplLHNsb3RJbmRleDptLmluZGV4LHN0YXJ0OnQsZW5kOnQrbn0sbz1tLmNsaWVudFdpZHRoLGE9LjEqbyxsPWkuZXZlbnRzKCksYz1kLmNvbGxpZGluZ0V2ZW50cyhsLGUuc3RhcnQsZS5lbmQpLGkuYWRkRXZlbnQoZSksYy5wdXNoKGUpLHI9ZC5jcmVhdGVDb2x1bW5zKGMpLHU9KG8tYSkvci5sZW5ndGgsaD0wLHA9ci5sZW5ndGg7cD5oO2grKylmb3Iocz1yW2hdLmV2ZW50cyxmPTAsZz1zLmxlbmd0aDtnPmY7ZisrKXNbZl0uZWxlbWVudFswXS5zdHlsZS53aWR0aD11LTQrXCJweFwiLHNbZl0uZWxlbWVudFswXS5zdHlsZS5sZWZ0PSh0aGlzLl9pc1J0bD9hOjApK20ub2Zmc2V0TGVmdCtoKnUrMitcInB4XCJ9LF9wb3NpdGlvbkV2ZW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLnN0YXJ0VGltZXx8ZS5zdGFydCxyPWUuZW5kVGltZXx8ZS5lbmQsbz1uLmlubmVyUmVjdChpLHIsITEpLGE9by5ib3R0b20tby50b3AtMjswPmEmJihhPTApLHQuY3NzKHt0b3A6by50b3AsaGVpZ2h0OmF9KSx0aGlzLl9hcnJhbmdlQ29sdW1ucyh0LG8udG9wLHRbMF0uY2xpZW50SGVpZ2h0LG4pfSxfY3JlYXRlRXZlbnRFbGVtZW50OmZ1bmN0aW9uKHQsbixyLG8pe3ZhciBhLGwsYyxkLGgsZix2PW4/dGhpcy5ldmVudFRlbXBsYXRlOnRoaXMuYWxsRGF5RXZlbnRUZW1wbGF0ZSxfPXRoaXMub3B0aW9ucyx5PV8uZWRpdGFibGUsdz10aGlzLl9pc01vYmlsZSgpLGI9eSYmeS5kZXN0cm95IT09ITEmJiF3LGs9eSYmeS5yZXNpemUhPT0hMSx4PXAodGhpcy5zdGFydERhdGUoKSksQz1wKHRoaXMuZW5kRGF0ZSgpKSxTPW0odGhpcy5zdGFydFRpbWUoKSksVD1tKHRoaXMuZW5kVGltZSgpKSxEPXQuX3RpbWUoXCJzdGFydFwiKSxBPXQuX3RpbWUoXCJlbmRcIik7cmV0dXJuIFM+PVQmJihUPW0obmV3IERhdGUodGhpcy5lbmRUaW1lKCkuZ2V0VGltZSgpK2ctMSkpKSxufHx0LmlzQWxsRGF5fHwoQz1uZXcgRGF0ZShDLmdldFRpbWUoKStnKSksbD10LnN0YXJ0LGM9dC5lbmQsdC5pc0FsbERheSYmKGM9cCh0LmVuZCkpLCFpKHAobCkseCxDKSYmIWkoYyx4LEMpfHxuJiZTPkQmJkE+VD9hPSEwOnAobCk8eHx8biYmUz5EP289ITA6KGM+QyYmIW58fG4mJkE+VCkmJihyPSEwKSxkPXRoaXMuZXZlbnRSZXNvdXJjZXModCksdC5zdGFydFRpbWUmJihsPW5ldyBEYXRlKEQpLGw9cy50aW1lem9uZS5hcHBseShsLFwiRXRjL1VUQ1wiKSksdC5lbmRUaW1lJiYoYz1uZXcgRGF0ZShBKSxjPXMudGltZXpvbmUuYXBwbHkoYyxcIkV0Yy9VVENcIikpLGg9dSh7fSx7bnM6cy5ucyxyZXNpemFibGU6ayxzaG93RGVsZXRlOmIsbWlkZGxlOmEsaGVhZDpyLHRhaWw6byxzaW5nbGVEYXk6MT09dGhpcy5fZGF0ZXMubGVuZ3RoLHJlc291cmNlczpkLGludmVyc2VDb2xvcjpkJiZkWzBdP3RoaXMuX3Nob3VsZEludmVyc2VSZXNvdXJjZUNvbG9yKGRbMF0pOiExfSx0LHtzdGFydDpsLGVuZDpjfSksZj1lKHYoaCkpLHRoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czpmLGRhdGE6W3tkYXRhSXRlbTpofV19fSksZn0sX2lzSW5UaW1lU2xvdDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuc3RhcnRUaW1lKCksaT10aGlzLmVuZFRpbWUoKSxvPWUuc3RhcnRUaW1lfHxlLnN0YXJ0LGE9ZS5lbmRUaW1lfHxlLmVuZDtyZXR1cm4gbShpKT09PW0ocy5kYXRlLmdldERhdGUoaSkpJiYoaT1zLmRhdGUuZ2V0RGF0ZShpKSxjKGksZy0xKSksZS5fZGF0ZShcImVuZFwiKT5lLl9kYXRlKFwic3RhcnRcIikmJihhPStlLl9kYXRlKFwiZW5kXCIpKyhnLTEpKSxhLT1lLl9kYXRlKFwiZW5kXCIpLG8tPWUuX2RhdGUoXCJzdGFydFwiKSxpPW0oaSksbj1tKG4pLG49PT1vJiZvPT09YT8hMDoodD1vIT09aSxyKG8sbixpLHQpfHxyKGEsbixpLHQpfHxyKG4sbyxhKXx8cihpLG8sYSkpfSxfaXNJbkRhdGVTbG90OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ3JvdXBzWzBdLG49dC5maXJzdFNsb3QoKS5zdGFydCxyPXQubGFzdFNsb3QoKS5lbmQtMSxvPXMuZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCksYT1zLmRhdGUudG9VdGNUaW1lKGUuZW5kKTtyZXR1cm4oaShvLG4scil8fGkoYSxuLHIpfHxpKG4sbyxhKXx8aShyLG8sYSkpJiYoIWkoYSxuLG4pfHxpKGEsbyxvKXx8ZS5pc0FsbERheSl9LF91cGRhdGVBbGxEYXlIZWFkZXJIZWlnaHQ6ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZih0aGlzLl9oZWlnaHQhPT1lJiYodGhpcy5faGVpZ2h0PWUsdD10aGlzLmVsZW1lbnQuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItYWxsLWRheSB0ZFwiKSx0Lmxlbmd0aCkpZm9yKHQucGFyZW50KCkuYWRkKHRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLXRpbWVzLWFsbC1kYXlcIikucGFyZW50KCkpLmhlaWdodChlKSxuPTA7dGhpcy5ncm91cHMubGVuZ3RoPm47bisrKXRoaXMuZ3JvdXBzW25dLnJlZnJlc2goKX0sX3JlbmRlckV2ZW50czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixhLHMsbCxjLGQsdSxoLHAsZixtLHYsXyx5PXRoaXMuZGF0ZXNIZWFkZXIuZmluZChcIi5rLXNjaGVkdWxlci1oZWFkZXItd3JhcCA+IGRpdlwiKTtmb3IoaT0wLHI9ZS5sZW5ndGg7cj5pO2krKylpZihuPWVbaV0sdGhpcy5faXNJbkRhdGVTbG90KG4pKWlmKGE9bi5pc0FsbERheXx8bi5lbmQuZ2V0VGltZSgpLW4uc3RhcnQuZ2V0VGltZSgpPj1nLHM9YSYmIXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT95OnRoaXMuY29udGVudCxhKXRoaXMub3B0aW9ucy5hbGxEYXlTbG90JiYoZD10aGlzLmdyb3Vwc1t0XSxkLl9jb250aW51b3VzRXZlbnRzfHwoZC5fY29udGludW91c0V2ZW50cz1bXSksYz1kLnNsb3RSYW5nZXMobiksYy5sZW5ndGgmJihsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChuLCFhKSx0aGlzLl9wb3NpdGlvbkFsbERheUV2ZW50KGwsY1swXSksbyhkLGNbMF0sbCwhMCksbC5hcHBlbmRUbyhzKSkpO2Vsc2UgaWYodGhpcy5faXNJblRpbWVTbG90KG4pKWZvcihkPXRoaXMuZ3JvdXBzW3RdLGQuX2NvbnRpbnVvdXNFdmVudHN8fChkLl9jb250aW51b3VzRXZlbnRzPVtdKSxjPWQuc2xvdFJhbmdlcyhuKSx1PWMubGVuZ3RoLGg9MDt1Pmg7aCsrKXA9Y1toXSxmPW4uc3RhcnQsbT1uLmVuZCx1PjEmJigwPT09aD9tPXAuZW5kLmVuZERhdGUoKTpoPT11LTE/Zj1wLnN0YXJ0LnN0YXJ0RGF0ZSgpOihmPXAuc3RhcnQuc3RhcnREYXRlKCksbT1wLmVuZC5lbmREYXRlKCkpKSx2PW4uY2xvbmUoe3N0YXJ0OmYsZW5kOm0sc3RhcnRUaW1lOm4uc3RhcnRUaW1lLGVuZFRpbWU6bi5lbmRUaW1lfSksdGhpcy5faXNJblRpbWVTbG90KHYpJiYoXz1wLmhlYWQsbD10aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQobiwhYSxfLHAudGFpbCksbC5hcHBlbmRUbyhzKSx0aGlzLl9wb3NpdGlvbkV2ZW50KHYsbCxwKSxvKGQscCxsLCExKSl9LHJlbmRlcjpmdW5jdGlvbih0KXt2YXIgbixyLG8sYSxsO2Zvcih0aGlzLl9oZWFkZXJDb2x1bW5Db3VudD0wLHRoaXMuX2dyb3VwcygpLHRoaXMuZWxlbWVudC5maW5kKFwiLmstZXZlbnRcIikucmVtb3ZlKCksdD1uZXcgcy5kYXRhLlF1ZXJ5KHQpLnNvcnQoW3tmaWVsZDpcInN0YXJ0XCIsZGlyOlwiYXNjXCJ9LHtmaWVsZDpcImVuZFwiLGRpcjpcImRlc2NcIn1dKS50b0FycmF5KCksbj1bXSx0aGlzLl9ldmVudHNCeVJlc291cmNlKHQsdGhpcy5ncm91cGVkUmVzb3VyY2VzLG4pLHI9dGhpcyxvPWUubWFwKHRoaXMuX2RhdGVzLGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heC5hcHBseShudWxsLGUubWFwKG4sZnVuY3Rpb24obil7cmV0dXJuIGUuZ3JlcChuLGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzTXVsdGlEYXkoKSYmaSh0LHAoZS5zdGFydCkscChlLmVuZCkpfSkubGVuZ3RofSkpfSksYT1NYXRoLm1heC5hcHBseShudWxsLG8pLHRoaXMuX3VwZGF0ZUFsbERheUhlYWRlckhlaWdodCgoYSsxKSp0aGlzLl9hbGxEYXlIZWFkZXJIZWlnaHQpLGw9MDtuLmxlbmd0aD5sO2wrKyl0aGlzLl9yZW5kZXJFdmVudHMobltsXSxsKTt0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0sX2V2ZW50c0J5UmVzb3VyY2U6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLGw9dFswXTtpZihsKWZvcihpPWwuZGF0YVNvdXJjZS52aWV3KCkscj0wO2kubGVuZ3RoPnI7cisrKW89dGhpcy5fcmVzb3VyY2VWYWx1ZShsLGlbcl0pLGE9bmV3IHMuZGF0YS5RdWVyeShlKS5maWx0ZXIoe2ZpZWxkOmwuZmllbGQsb3BlcmF0b3I6ZC5ncm91cEVxRmlsdGVyKG8pfSkudG9BcnJheSgpLHQubGVuZ3RoPjE/dGhpcy5fZXZlbnRzQnlSZXNvdXJjZShhLHQuc2xpY2UoMSksbik6bi5wdXNoKGEpO2Vsc2Ugbi5wdXNoKGUpfSxfY29sdW1uT2Zmc2V0Rm9yUmVzb3VyY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoZSkvdGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlLTEpfSxfY29sdW1uQ291bnRGb3JMZXZlbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbHVtbkxldmVsc1tlXTtyZXR1cm4gdD90Lmxlbmd0aDowfSxfcm93Q291bnRGb3JMZXZlbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJvd0xldmVsc1tlXTtyZXR1cm4gdD90Lmxlbmd0aDowfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3RoaXMuY29udGVudC5hZGQodGhpcy5kYXRlc0hlYWRlcikuZmluZChcIi5rLXN0YXRlLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJpZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIil9LF91cGRhdGVEaXJlY3Rpb246ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbz1lLmlzQWxsRGF5LGE9dFswXS5zdGFydCxzPXRbdC5sZW5ndGgtMV0uZW5kO24mJihyP298fGEuaW5kZXghPT1zLmluZGV4fHxhLmNvbGxlY3Rpb25JbmRleCE9PXMuY29sbGVjdGlvbkluZGV4fHwoZS5iYWNrd2FyZD1pKToobyYmYS5pbmRleD09PXMuaW5kZXh8fCFvJiZhLmNvbGxlY3Rpb25JbmRleD09PXMuY29sbGVjdGlvbkluZGV4KSYmKGUuYmFja3dhcmQ9aSkpfSxfY2hhbmdlVmlld1BlcmlvZDpmdW5jdGlvbihlLG4saSl7dmFyIHIsbyxhLHM7cmV0dXJuIGk/dDoocj1uP3RoaXMucHJldmlvdXNEYXRlKCk6dGhpcy5uZXh0RGF0ZSgpLG89ZS5zdGFydCxhPWUuZW5kLGUuc3RhcnQ9bmV3IERhdGUociksZS5lbmQ9bmV3IERhdGUocikscz1lLmlzQWxsRGF5P2c6bShhKSxjKGUuc3RhcnQsbShvKSksYyhlLmVuZCxzKSx0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fChlLmdyb3VwSW5kZXg9bj90aGlzLmdyb3Vwcy5sZW5ndGgtMTowKSxlLmV2ZW50cz1bXSwhMCl9fSk7dSghMCxsLHtNdWx0aURheVZpZXc6eCxEYXlWaWV3OnguZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiRGF5Vmlld1wiLHRpdGxlOlwiRGF5XCJ9LG5hbWU6XCJkYXlcIn0pLFdlZWtWaWV3OnguZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiV2Vla1ZpZXdcIix0aXRsZTpcIldlZWtcIixzZWxlY3RlZERhdGVGb3JtYXQ6XCJ7MDpEfSAtIHsxOkR9XCJ9LG5hbWU6XCJ3ZWVrXCIsY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucy5kYXRlLGk9cy5kYXRlLmRheU9mV2VlayhuLHRoaXMuY2FsZW5kYXJJbmZvKCkuZmlyc3REYXksLTEpLHI9W107Zm9yKGU9MCx0PTc7dD5lO2UrKylyLnB1c2goaSksaT1zLmRhdGUubmV4dERheShpKTt0aGlzLl9yZW5kZXIocil9fSksV29ya1dlZWtWaWV3OnguZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiV29ya1dlZWtWaWV3XCIsdGl0bGU6XCJXb3JrIFdlZWtcIixzZWxlY3RlZERhdGVGb3JtYXQ6XCJ7MDpEfSAtIHsxOkR9XCJ9LG5hbWU6XCJ3b3JrV2Vla1wiLG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGF0ZS5kYXlPZldlZWsocy5kYXRlLm5leHREYXkodGhpcy5lbmREYXRlKCkpLHRoaXMub3B0aW9ucy53b3JrV2Vla1N0YXJ0LDEpfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kYXRlLnByZXZpb3VzRGF5KHRoaXMuc3RhcnREYXRlKCkpfSxjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5vcHRpb25zLmRhdGUsdD1zLmRhdGUuZGF5T2ZXZWVrKGUsdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsLTEpLG49cy5kYXRlLmRheU9mV2Vlayh0LHRoaXMub3B0aW9ucy53b3JrV2Vla0VuZCwxKSxpPVtdO24+PXQ7KWkucHVzaCh0KSx0PXMuZGF0ZS5uZXh0RGF5KHQpO3RoaXMuX3JlbmRlcihpKX19KX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0LG4saT0wO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWkrPWVbdF0uaXRlbXMubGVuZ3RoO3JldHVybiBpfWZ1bmN0aW9uIG4oZSx0KXtyZXR1cm4gZS52YWx1ZVByaW1pdGl2ZSYmKHQ9by5nZXR0ZXIoZS5kYXRhVmFsdWVGaWVsZCkodCkpLHR9ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQsbj0wLGk9ZS5sZW5ndGgsbz1bXTtpPm47bisrKXQ9ZVtuXSx0Lmdyb3Vwcz8odD1yKHQuZ3JvdXBzKSxvPW8uY29uY2F0KHQpKTpvPW8uY29uY2F0KHIodC5pdGVtcykpO3JldHVybiBvfWZ1bmN0aW9uIHIoZSl7Zm9yKHZhciB0PVtdLmNvbmNhdChlKSxuPXQuc2hpZnQoKSxpPVtdLHI9W10ucHVzaDtuOyluLmdyb3Vwcz9yLmFwcGx5KHQsbi5ncm91cHMpOm4uaXRlbXM/ci5hcHBseSh0LG4uaXRlbXMpOnIuY2FsbChpLG4pLG49dC5zaGlmdCgpO3JldHVybiBpfXZhciBvPXdpbmRvdy5rZW5kbyxhPW8udWkscz1cIi5rZW5kb0FnZW5kYVZpZXdcIixsPSc8ZGl2IGNsYXNzPVwiay10YXNrXCIgdGl0bGU9XCIjOnRpdGxlLnJlcGxhY2UoL1wiL2csXCJcXCdcIikjXCIgZGF0YS0jPWtlbmRvLm5zI3VpZD1cIiM9dWlkI1wiPiMgaWYgKHJlc291cmNlc1swXSkgeyM8c3BhbiBjbGFzcz1cImstc2NoZWR1bGVyLW1hcmtcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IjXCI+PC9zcGFuPiMgfSAjIyBpZiAoZGF0YS5pc0V4Y2VwdGlvbigpKSB7ICM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktZXhjZXB0aW9uXCI+PC9zcGFuPiMgfSBlbHNlIGlmIChkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+IyB9ICN7MH0jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSM8L2Rpdj4nO2EuQWdlbmRhVmlldz1hLlNjaGVkdWxlclZpZXcuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7YS5TY2hlZHVsZXJWaWV3LmZuLmluaXQuY2FsbCh0aGlzLHQsbiksbj10aGlzLm9wdGlvbnMsbi5lZGl0YWJsZSYmKG4uZWRpdGFibGU9ZS5leHRlbmQoe1wiZGVsZXRlXCI6ITB9LG4uZWRpdGFibGUse2NyZWF0ZTohMSx1cGRhdGU6ITF9KSksdGhpcy50aXRsZT1uLnRpdGxlLHRoaXMubmFtZT1cImFnZW5kYVwiLHRoaXMuX2V2ZW50VGVtcGxhdGU9dGhpcy5fZXZlbnRUbXBsKG4uZXZlbnRUZW1wbGF0ZSxsKSx0aGlzLl9kYXRlVGVtcGxhdGU9by50ZW1wbGF0ZShuLmV2ZW50RGF0ZVRlbXBsYXRlKSx0aGlzLl9ncm91cFRlbXBsYXRlPW8udGVtcGxhdGUobi5ldmVudEdyb3VwVGVtcGxhdGUpLHRoaXMuX3RpbWVUZW1wbGF0ZT1vLnRlbXBsYXRlKG4uZXZlbnRUaW1lVGVtcGxhdGUpLHRoaXMuZWxlbWVudC5vbihcIm1vdXNlZW50ZXJcIitzLFwiLmstc2NoZWR1bGVyLWFnZW5kYSAuay1zY2hlZHVsZXItY29udGVudCB0clwiLFwiX21vdXNlZW50ZXJcIikub24oXCJtb3VzZWxlYXZlXCIrcyxcIi5rLXNjaGVkdWxlci1hZ2VuZGEgLmstc2NoZWR1bGVyLWNvbnRlbnQgdHJcIixcIl9tb3VzZWxlYXZlXCIpLm9uKFwiY2xpY2tcIitzLFwiLmstc2NoZWR1bGVyLWFnZW5kYSAuay1zY2hlZHVsZXItY29udGVudCAuay1saW5rOmhhcyguay1zaS1jbG9zZSlcIixcIl9yZW1vdmVcIiksdGhpcy5fcmVuZGVyTGF5b3V0KG4uZGF0ZSl9LF9tb3VzZWVudGVyOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9LF9tb3VzZWxlYXZlOmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcImstc3RhdGUtaG92ZXJcIil9LF9yZW1vdmU6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMudHJpZ2dlcihcInJlbW92ZVwiLHt1aWQ6ZSh0LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuay10YXNrXCIpLmF0dHIoby5hdHRyKFwidWlkXCIpKX0pfSxuZXh0RGF0ZTpmdW5jdGlvbigpe3JldHVybiBvLmRhdGUubmV4dERheSh0aGlzLnN0YXJ0RGF0ZSgpKX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGF0ZX0sZW5kRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmREYXRlfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gby5kYXRlLnByZXZpb3VzRGF5KHRoaXMuc3RhcnREYXRlKCkpfSxfcmVuZGVyTGF5b3V0OmZ1bmN0aW9uKGUpe3RoaXMuX3N0YXJ0RGF0ZT1lLHRoaXMuX2VuZERhdGU9by5kYXRlLmFkZERheXMoZSw3KSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQoKSksdGhpcy50YWJsZS5hZGRDbGFzcyhcImstc2NoZWR1bGVyLWFnZW5kYVwiKVxufSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9W3t0ZXh0OnRoaXMub3B0aW9ucy5tZXNzYWdlcy50aW1lLGNsYXNzTmFtZTpcImstc2NoZWR1bGVyLXRpbWVjb2x1bW5cIn0se3RleHQ6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmV2ZW50fV07aWYodGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKXx8aS5zcGxpY2UoMCwwLHt0ZXh0OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5kYXRlLGNsYXNzTmFtZTpcImstc2NoZWR1bGVyLWRhdGVjb2x1bW5cIn0pLGU9dGhpcy5ncm91cGVkUmVzb3VyY2VzLGUubGVuZ3RoKXtmb3IodD1bXSxuPTA7ZS5sZW5ndGg+bjtuKyspdC5wdXNoKHt0ZXh0OlwiXCIsY2xhc3NOYW1lOlwiay1zY2hlZHVsZXItZ3JvdXBjb2x1bW5cIn0pO2k9dC5jb25jYXQoaSl9cmV0dXJue2NvbHVtbnM6aX19LF90YXNrczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixhLHMsbCxjPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspaWYobj1lW3RdLGk9bi5zdGFydCxyPW4uZW5kLGE9KG8uZGF0ZS5nZXREYXRlKHIpLW8uZGF0ZS5nZXREYXRlKGkpKS9vLmRhdGUuTVNfUEVSX0RBWSsxLHM9bi5jbG9uZSgpLHMuc3RhcnREYXRlPW8uZGF0ZS5nZXREYXRlKGkpLHMuc3RhcnREYXRlPj10aGlzLnN0YXJ0RGF0ZSgpJiZjLnB1c2gocyksYT4xKWZvcihzLmVuZD1vLmRhdGUubmV4dERheShpKSxzLmhlYWQ9ITAsbD0xO2E+bDtsKyspaT1zLmVuZCxzPW4uY2xvbmUoKSxzLnN0YXJ0PWkscy5zdGFydERhdGU9by5kYXRlLmdldERhdGUoaSkscy5lbmQ9by5kYXRlLm5leHREYXkoaSksbD09YS0xPyhzLmVuZD1uZXcgRGF0ZShzLnN0YXJ0LmdldEZ1bGxZZWFyKCkscy5zdGFydC5nZXRNb250aCgpLHMuc3RhcnQuZ2V0RGF0ZSgpLHIuZ2V0SG91cnMoKSxyLmdldE1pbnV0ZXMoKSxyLmdldFNlY29uZHMoKSxyLmdldE1pbGxpc2Vjb25kcygpKSxzLnRhaWw9ITApOihzLmlzQWxsRGF5PSEwLHMubWlkZGxlPSEwKSxzLmVuZDw9dGhpcy5lbmREYXRlKCkmJnMuc3RhcnQ+PXRoaXMuc3RhcnREYXRlKCkmJmMucHVzaChzKTtyZXR1cm4gbmV3IG8uZGF0YS5RdWVyeShjKS5zb3J0KFt7ZmllbGQ6XCJzdGFydFwiLGRpcjpcImFzY1wifSx7ZmllbGQ6XCJlbmRcIixkaXI6XCJhc2NcIn1dKS5ncm91cEJ5KHtmaWVsZDpcInN0YXJ0RGF0ZVwifSkudG9BcnJheSgpfSxfcmVuZGVyVGFza0dyb3VwczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixhLHMsbCxjLGQsdSxoPVtdLHA9dGhpcy5vcHRpb25zLmVkaXRhYmxlLGY9cCYmcC5kZXN0cm95IT09ITEmJiF0aGlzLl9pc01vYmlsZSgpLGc9dGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKTtmb3Iobj0wO2UubGVuZ3RoPm47bisrKWZvcihpPWVbbl0udmFsdWUscj1lW25dLml0ZW1zLGE9by5kYXRlLmlzVG9kYXkoaSkscz0wO3IubGVuZ3RoPnM7cysrKXtpZihsPXJbc10sYz1bXSxkPWc/W106YywwPT09biYmMD09PXMmJnQubGVuZ3RoKWZvcih1PTA7dC5sZW5ndGg+dTt1KyspZC5wdXNoKG8uZm9ybWF0KCc8dGQgY2xhc3M9XCJrLXNjaGVkdWxlci1ncm91cGNvbHVtbnsyfVwiIHJvd3NwYW49XCJ7MH1cIj57MX08L3RkPicsdFt1XS5yb3dTcGFuLHRoaXMuX2dyb3VwVGVtcGxhdGUoe3ZhbHVlOnRbdV0udGV4dH0pLHRbdV0uY2xhc3NOYW1lKSk7MD09PXMmJihnPyhkLnB1c2goby5mb3JtYXQoJzx0ZCBjbGFzcz1cImstc2NoZWR1bGVyLWRhdGVjb2x1bW5cIiBjb2xzcGFuPVwiMlwiPnswfTwvdGQ+Jyx0aGlzLl9kYXRlVGVtcGxhdGUoe2RhdGU6aX0pKSksaC5wdXNoKCc8dHIgcm9sZT1cInJvd1wiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiJysoYT8nIGNsYXNzPVwiay10b2RheVwiPic6XCI+XCIpK2Quam9pbihcIlwiKStcIjwvdHI+XCIpKTpjLnB1c2goby5mb3JtYXQoJzx0ZCBjbGFzcz1cImstc2NoZWR1bGVyLWRhdGVjb2x1bW57M317Mn1cIiByb3dzcGFuPVwiezB9XCI+ezF9PC90ZD4nLHIubGVuZ3RoLHRoaXMuX2RhdGVUZW1wbGF0ZSh7ZGF0ZTppfSksbiE9ZS5sZW5ndGgtMXx8dC5sZW5ndGg/XCJcIjpcIiBrLWxhc3RcIix0Lmxlbmd0aD9cIlwiOlwiIGstZmlyc3RcIikpKSxsLmZvcm1hdD1sLmhlYWQ/XCJ7MDp0fVwiOmwudGFpbD9cInsxOnR9XCI6XCJ7MDp0fS17MTp0fVwiLGwucmVzb3VyY2VzPXRoaXMuZXZlbnRSZXNvdXJjZXMobCksYy5wdXNoKG8uZm9ybWF0KCc8dGQgY2xhc3M9XCJrLXNjaGVkdWxlci10aW1lY29sdW1uXCI+PGRpdj57MH17MX17Mn08L2Rpdj48L3RkPjx0ZD57M308L3RkPicsbC50YWlsfHxsLm1pZGRsZT8nPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+JzpcIlwiLHRoaXMuX3RpbWVUZW1wbGF0ZShsLmNsb25lKHtzdGFydDpsLnN0YXJ0VGltZXx8bC5zdGFydCxlbmQ6bC5lbmRUaW1lfHxsLmVuZH0pKSxsLmhlYWR8fGwubWlkZGxlPyc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj4nOlwiXCIsdGhpcy5fZXZlbnRUZW1wbGF0ZShsLmNsb25lKHtzaG93RGVsZXRlOmZ9KSkpKSxoLnB1c2goJzx0ciByb2xlPVwicm93XCIgYXJpYS1zZWxlY3RlZD1cImZhbHNlXCInKyhhPycgY2xhc3M9XCJrLXRvZGF5XCI+JzpcIj5cIikrYy5qb2luKFwiXCIpK1wiPC90cj5cIil9cmV0dXJuIGguam9pbihcIlwiKX0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLmVtcHR5KCksbz1bXTtlLmxlbmd0aD4wJiYodD10aGlzLmdyb3VwZWRSZXNvdXJjZXMsdC5sZW5ndGg/KG89dGhpcy5fY3JlYXRlR3JvdXBDb25maWd1cmF0aW9uKGUsdCxudWxsKSx0aGlzLl9yZW5kZXJHcm91cHMobyxyLFtdKSk6KG89dGhpcy5fdGFza3MoZSksci5hcHBlbmQodGhpcy5fcmVuZGVyVGFza0dyb3VwcyhvLFtdKSkpKSxuPXRoaXMuX2V2ZW50c0xpc3Q9aShvKSx0aGlzLl9hbmd1bGFySXRlbXMocixuKSx0aGlzLnJlZnJlc2hMYXlvdXQoKSx0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0sX2FuZ3VsYXJJdGVtczpmdW5jdGlvbihlLHQpe3RoaXMuYW5ndWxhcihcImNvbXBpbGVcIixmdW5jdGlvbigpe3ZhciBuPVtdLGk9dC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucHVzaCh7ZGF0YUl0ZW06dH0pLGUuZmluZChcIi5rLXRhc2tbXCIrby5hdHRyKFwidWlkXCIpK1wiPVwiK3QudWlkK1wiXVwiKX0pO3JldHVybntlbGVtZW50czppLGRhdGE6bn19KX0sX3JlbmRlckdyb3VwczpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW89bi5zcGxpY2UoMCksby5wdXNoKGVbaV0pLGVbaV0uZ3JvdXBzP3RoaXMuX3JlbmRlckdyb3VwcyhlW2ldLmdyb3Vwcyx0LG8pOnQuYXBwZW5kKHRoaXMuX3JlbmRlclRhc2tHcm91cHMoZVtpXS5pdGVtcyxvKSl9LF9jcmVhdGVHcm91cENvbmZpZ3VyYXRpb246ZnVuY3Rpb24oZSxpLHIpe3ZhciBzLGwsYyxkLHUsaCxwLGY9aVswXSxnPVtdLG09Zi5kYXRhU291cmNlLnZpZXcoKSx2PXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCk7Zm9yKHM9MDttLmxlbmd0aD5zO3MrKylsPW4oZixtW3NdKSxjPW5ldyBvLmRhdGEuUXVlcnkoZSkuZmlsdGVyKHtmaWVsZDpmLmZpZWxkLG9wZXJhdG9yOmEuU2NoZWR1bGVyVmlldy5ncm91cEVxRmlsdGVyKGwpfSkudG9BcnJheSgpLGMubGVuZ3RoJiYoZD10aGlzLl90YXNrcyhjKSx1PXI/XCJcIjpcIiBrLWZpcnN0XCIscz09PW0ubGVuZ3RoLTEmJighcnx8ci5jbGFzc05hbWUuaW5kZXhPZihcImstbGFzdFwiKT4tMSkmJih1Kz1cIiBrLWxhc3RcIiksaD17dGV4dDpvLmdldHRlcihmLmRhdGFUZXh0RmllbGQpKG1bc10pLHZhbHVlOmwscm93U3BhbjowLGNsYXNzTmFtZTp1fSxpLmxlbmd0aD4xPyhoLmdyb3Vwcz10aGlzLl9jcmVhdGVHcm91cENvbmZpZ3VyYXRpb24oYyxpLnNsaWNlKDEpLGgpLHImJihyLnJvd1NwYW4rPWgucm93U3BhbikpOihoLml0ZW1zPWQscD10KGguaXRlbXMpLHYmJihwKz1oLml0ZW1zLmxlbmd0aCksaC5yb3dTcGFuPXAsciYmKHIucm93U3Bhbis9cCkpLGcucHVzaChoKSk7cmV0dXJuIGd9LHNlbGVjdGlvbkJ5RWxlbWVudDpmdW5jdGlvbih0KXt2YXIgbixpLHI7cmV0dXJuIHQ9ZSh0KSx0Lmhhc0NsYXNzKFwiay1zY2hlZHVsZXItZGF0ZWNvbHVtblwiKT92b2lkIDA6KHRoaXMuX2lzTW9iaWxlKCk/KHI9dC5wYXJlbnQoKSxuPXIucGFyZW50KCkuY2hpbGRyZW4oKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5jaGlsZHJlbihcIjpub3QoLmstc2NoZWR1bGVyLWRhdGVjb2x1bW4pXCIpLmxlbmd0aH0pLmluZGV4KHIpKTpuPXQucGFyZW50KCkuaW5kZXgoKSxpPXRoaXMuX2V2ZW50c0xpc3Rbbl0se2luZGV4Om4sc3RhcnQ6aS5zdGFydCxlbmQ6aS5lbmQsaXNBbGxEYXk6aS5pc0FsbERheSx1aWQ6aS51aWR9KX0sc2VsZWN0OmZ1bmN0aW9uKGUpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKTt2YXIgdD10aGlzLnRhYmxlLmZpbmQoXCIuay10YXNrXCIpLmVxKGUuaW5kZXgpLmNsb3Nlc3QoXCJ0clwiKS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMClbMF07dGhpcy5jdXJyZW50KHQpfSxtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT0hMSxyPWUuaW5kZXg7cmV0dXJuIHQ9PW8ua2V5cy5VUD8oci0tLGk9ITApOnQ9PW8ua2V5cy5ET1dOJiYocisrLGk9ITApLGkmJihuPXRoaXMuX2V2ZW50c0xpc3Rbcl0sbiYmKGUuc3RhcnQ9bi5zdGFydCxlLmVuZD1uLmVuZCxlLmlzQWxsRGF5PW4uaXNBbGxEYXksZS5ldmVudHM9W24udWlkXSxlLmluZGV4PXIpKSxpfSxtb3ZlVG9FdmVudDpmdW5jdGlvbigpe3JldHVybiExfSxjb25zdHJhaW5TZWxlY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZXZlbnRzTGlzdFswXTt0JiYoZS5zdGFydD10LnN0YXJ0LGUuZW5kPXQuZW5kLGUuaXNBbGxEYXk9dC5pc0FsbERheSxlLmV2ZW50cz1bdC51aWRdLGUuaW5kZXg9MCl9LGlzSW5SYW5nZTpmdW5jdGlvbigpe3JldHVybiEwfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQub2ZmKHMpLGEuU2NoZWR1bGVyVmlldy5mbi5kZXN0cm95LmNhbGwodGhpcyl9LG9wdGlvbnM6e3RpdGxlOlwiQWdlbmRhXCIsbmFtZTpcImFnZW5kYVwiLGVkaXRhYmxlOiEwLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9LXsxOkR9XCIsZXZlbnRUZW1wbGF0ZTpcIiM6dGl0bGUjXCIsZXZlbnRUaW1lVGVtcGxhdGU6XCIjaWYoZGF0YS5pc0FsbERheSkgeyMjPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5hbGxEYXkjI30gZWxzZSB7ICMjPWtlbmRvLmZvcm1hdChmb3JtYXQsIHN0YXJ0LCBlbmQpIyMgfSAjXCIsZXZlbnREYXRlVGVtcGxhdGU6JzxzdHJvbmcgY2xhc3M9XCJrLXNjaGVkdWxlci1hZ2VuZGFkYXlcIj4jPWtlbmRvLnRvU3RyaW5nKGRhdGUsIFwiZGRcIikjPC9zdHJvbmc+PGVtIGNsYXNzPVwiay1zY2hlZHVsZXItYWdlbmRhd2Vla1wiPiM9a2VuZG8udG9TdHJpbmcoZGF0ZSxcImRkZGRcIikjPC9lbT48c3BhbiBjbGFzcz1cImstc2NoZWR1bGVyLWFnZW5kYWRhdGVcIj4jPWtlbmRvLnRvU3RyaW5nKGRhdGUsIFwieVwiKSM8L3NwYW4+JyxldmVudEdyb3VwVGVtcGxhdGU6JzxzdHJvbmcgY2xhc3M9XCJrLXNjaGVkdWxlci1hZGdlbmRhZ3JvdXBcIj4jPXZhbHVlIzwvc3Ryb25nPicsbWVzc2FnZXM6e2V2ZW50OlwiRXZlbnRcIixkYXRlOlwiRGF0ZVwiLHRpbWU6XCJUaW1lXCIsYWxsRGF5OlwiYWxsIGRheVwifX19KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiBlLnNsaWNlKHQpLmNvbmNhdChlLnNsaWNlKDAsdCkpfWZ1bmN0aW9uIG4oZSx0KXtmb3IodmFyIG49dC5maXJzdERheSxpPW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMCxlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSk7aS5nZXREYXkoKSE9bjspci5kYXRlLnNldFRpbWUoaSwtMSpkKTtyZXR1cm4gaX1mdW5jdGlvbiBpKGUsdCxuKXt2YXIgaSxyPXQsbz1uO3JldHVybiBpPWUsaT49ciYmbz49aX12YXIgcj13aW5kb3cua2VuZG8sbz1yLnVpLGE9by5TY2hlZHVsZXJWaWV3LHM9XCIua2VuZG9Nb250aFZpZXdcIixsPWUuZXh0ZW5kLGM9ci5kYXRlLmdldERhdGUsZD1yLmRhdGUuTVNfUEVSX0RBWSx1PTYsaD03LHA9ci50ZW1wbGF0ZSgnPHNwYW4gY2xhc3M9XCJrLWxpbmsgay1uYXYtZGF5XCI+IzprZW5kby50b1N0cmluZyhkYXRlLCBcImRkXCIpIzwvc3Bhbj4nKSxmPSc8ZGl2IHJvbGU9XCJncmlkY2VsbFwiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiIGRhdGEtIz1ucyN1aWQ9XCIjPXVpZCNcIiNpZiAocmVzb3VyY2VzWzBdKSB7ICNzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IgIzsgYm9yZGVyLWNvbG9yOiAjPXJlc291cmNlc1swXS5jb2xvciNcImNsYXNzPVwiay1ldmVudCM9aW52ZXJzZUNvbG9yID8gXCIgay1ldmVudC1pbnZlcnNlXCIgOiBcIlwiI1wiI30gZWxzZSB7I2NsYXNzPVwiay1ldmVudFwiI30jPjxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+IyBpZihkYXRhLnRhaWwgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+I30jIyBpZihkYXRhLmlzRXhjZXB0aW9uKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWV4Y2VwdGlvblwiPjwvc3Bhbj4jIH0gZWxzZSBpZihkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+I30jPC9zcGFuPnswfTxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+I2lmIChzaG93RGVsZXRlKSB7IzxhIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rIGstZXZlbnQtZGVsZXRlXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1zaS1jbG9zZVwiPjwvc3Bhbj48L2E+I30jIyBpZihkYXRhLmhlYWQgfHwgZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LWVcIj48L3NwYW4+I30jPC9zcGFuPiMgaWYocmVzaXphYmxlICYmICFkYXRhLnRhaWwgJiYgIWRhdGEubWlkZGxlKSB7IzxzcGFuIGNsYXNzPVwiay1yZXNpemUtaGFuZGxlIGstcmVzaXplLXdcIj48L3NwYW4+I30jIyBpZihyZXNpemFibGUgJiYgIWRhdGEuaGVhZCAmJiAhZGF0YS5taWRkbGUpIHsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtZVwiPjwvc3Bhbj4jfSM8L2Rpdj4nLGc9ci50ZW1wbGF0ZSgnPGRpdiB0aXRsZT1cIiM9dGl0bGUucmVwbGFjZSgvXCIvZyxcIiZcXFxcIzM0O1wiKSNcIj48ZGl2IGNsYXNzPVwiay1ldmVudC10ZW1wbGF0ZVwiPiM6dGl0bGUjPC9kaXY+PC9kaXY+JyksbT1yLnRlbXBsYXRlKCc8ZGl2IHN0eWxlPVwid2lkdGg6Iz13aWR0aCNweDtsZWZ0OiM9bGVmdCNweDt0b3A6Iz10b3AjcHhcIiBjbGFzcz1cImstbW9yZS1ldmVudHMgay1idXR0b25cIj48c3Bhbj4uLi48L3NwYW4+PC9kaXY+Jyk7by5Nb250aFZpZXc9YS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2EuZm4uaW5pdC5jYWxsKG4sZSx0KSxuLnRpdGxlPW4ub3B0aW9ucy50aXRsZSxuLm5hbWU9XCJtb250aFwiLG4uX3RlbXBsYXRlcygpLG4uX2VkaXRhYmxlKCksbi5fcmVuZGVyTGF5b3V0KG4ub3B0aW9ucy5kYXRlKSxuLl9ncm91cHMoKX0sX3VwZGF0ZURpcmVjdGlvbjpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvLGEscyxsLGM7biYmKG89dFswXS5zdGFydCxhPXRbdC5sZW5ndGgtMV0uZW5kLHM9by5pbmRleD09PWEuaW5kZXgsbD1vLmNvbGxlY3Rpb25JbmRleD09PWEuY29sbGVjdGlvbkluZGV4LGM9cj9zJiZsfHxsOnMmJmwsYyYmKGUuYmFja3dhcmQ9aSkpfSxfY2hhbmdlVmlld1BlcmlvZDpmdW5jdGlvbihlLHQsbil7dmFyIGk9bj83OjE7cmV0dXJuIHQmJihpKj0tMSksZS5zdGFydD1yLmRhdGUuYWRkRGF5cyhlLnN0YXJ0LGkpLGUuZW5kPXIuZGF0ZS5hZGREYXlzKGUuZW5kLGkpLCghbnx8biYmdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpKSYmKGUuZ3JvdXBJbmRleD10P3RoaXMuZ3JvdXBzLmxlbmd0aC0xOjApLGUuZXZlbnRzPVtdLCEwfSxfY29udGludW91c1Nsb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUuYmFja3dhcmQ/MDp0Lmxlbmd0aC0xLHI9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XTtyZXR1cm4gci5jb250aW51b3VzU2xvdCh0W2ldLnN0YXJ0LG4pfSxfY2hhbmdlR3JvdXBDb250aW51b3VzbHk6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIsbyxhLHM7cmV0dXJuIG58fChyPWUuZ3JvdXBJbmRleCxvPXRoaXMuZ3JvdXBzLmxlbmd0aC0xLGE9dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpLHM9dGhpcy5ncm91cHNbcl0sIXQmJmE/KHQ9c1tpP1wibGFzdFNsb3RcIjpcImZpcnN0U2xvdFwiXSgpLHIrPWk/LTE6MSk6dCYmIWEmJihyPWk/bzowKSwoMD5yfHxyPm8pJiYocj1pP286MCx0PW51bGwpLGUuZ3JvdXBJbmRleD1yKSx0fSxfbm9ybWFsaXplSG9yaXpvbnRhbFNlbGVjdGlvbjpmdW5jdGlvbihlLHQsbil7dmFyIGk7cmV0dXJuIGk9bj90WzBdLnN0YXJ0OnRbdC5sZW5ndGgtMV0uZW5kfSxfbm9ybWFsaXplVmVydGljYWxTZWxlY3Rpb246ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gbj1lLmJhY2t3YXJkP3RbMF0uc3RhcnQ6dFt0Lmxlbmd0aC0xXS5lbmR9LF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1sKHt9LHIuVGVtcGxhdGUsZS50ZW1wbGF0ZVNldHRpbmdzKTt0aGlzLmV2ZW50VGVtcGxhdGU9dGhpcy5fZXZlbnRUbXBsKGUuZXZlbnRUZW1wbGF0ZSxmKSx0aGlzLmRheVRlbXBsYXRlPXIudGVtcGxhdGUoZS5kYXlUZW1wbGF0ZSx0KSx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGU9ci50ZW1wbGF0ZShlLmdyb3VwSGVhZGVyVGVtcGxhdGUsdCl9LGRhdGVGb3JUaXRsZTpmdW5jdGlvbigpe3JldHVybiByLmZvcm1hdCh0aGlzLm9wdGlvbnMuc2VsZWN0ZWREYXRlRm9ybWF0LHRoaXMuX2ZpcnN0RGF5T2ZNb250aCx0aGlzLl9sYXN0RGF5T2ZNb250aCl9LG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHIuZGF0ZS5uZXh0RGF5KHRoaXMuX2xhc3REYXlPZk1vbnRoKX0scHJldmlvdXNEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHIuZGF0ZS5wcmV2aW91c0RheSh0aGlzLl9maXJzdERheU9mTW9udGgpfSxzdGFydERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnREYXRlfSxlbmREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZERhdGV9LF9yZW5kZXJMYXlvdXQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpczt0aGlzLl9maXJzdERheU9mTW9udGg9ci5kYXRlLmZpcnN0RGF5T2ZNb250aCh0KSx0aGlzLl9sYXN0RGF5T2ZNb250aD1yLmRhdGUubGFzdERheU9mTW9udGgodCksdGhpcy5fc3RhcnREYXRlPW4odCx0aGlzLmNhbGVuZGFySW5mbygpKSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQoKSksdGhpcy5fY29udGVudCgpLHRoaXMucmVmcmVzaExheW91dCgpLHRoaXMuY29udGVudC5vbihcImNsaWNrXCIrcyxcIi5rLW5hdi1kYXksLmstbW9yZS1ldmVudHNcIixmdW5jdGlvbih0KXt2YXIgbj1lKHQuY3VycmVudFRhcmdldCkub2Zmc2V0KCkscj1pLl9zbG90QnlQb3NpdGlvbihuLmxlZnQsbi50b3ApO3QucHJldmVudERlZmF1bHQoKSxpLnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3OlwiZGF5XCIsZGF0ZTpyLnN0YXJ0RGF0ZSgpfSl9KX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYhdGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKSYmKHRoaXMuX2lzTW9iaWxlKCk/dGhpcy5fdG91Y2hFZGl0YWJsZSgpOnRoaXMuX21vdXNlRWRpdGFibGUoKSl9LF9tb3VzZUVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LmVsZW1lbnQub24oXCJjbGlja1wiK3MsXCIuay1zY2hlZHVsZXItbW9udGh2aWV3IC5rLWV2ZW50IGE6aGFzKC5rLXNpLWNsb3NlKVwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcInJlbW92ZVwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihyLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK3MsXCIuay1zY2hlZHVsZXItbW9udGh2aWV3IC5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsZnVuY3Rpb24obil7dmFyIGkscj1lKG4uY3VycmVudFRhcmdldCkub2Zmc2V0KCksbz10Ll9zbG90QnlQb3NpdGlvbihyLmxlZnQsci50b3ApO28mJihpPXQuX3Jlc291cmNlQnlTbG90KG8pLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86bCh7aXNBbGxEYXk6ITAsc3RhcnQ6by5zdGFydERhdGUoKSxlbmQ6by5zdGFydERhdGUoKX0saSl9KSksbi5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK3MsXCIuay1zY2hlZHVsZXItbW9udGh2aWV3IC5rLWV2ZW50XCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihyLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b3VjaEVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJih0Ll9hZGRVc2VyRXZlbnRzPW5ldyByLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItbW9udGh2aWV3IC5rLXNjaGVkdWxlci1jb250ZW50IHRkXCIsdGFwOmZ1bmN0aW9uKG4pe3ZhciBpLHI9ZShuLnRhcmdldCkub2Zmc2V0KCksbz10Ll9zbG90QnlQb3NpdGlvbihyLmxlZnQsci50b3ApO28mJihpPXQuX3Jlc291cmNlQnlTbG90KG8pLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86bCh7aXNBbGxEYXk6ITAsc3RhcnQ6by5zdGFydERhdGUoKSxlbmQ6by5zdGFydERhdGUoKX0saSl9KSksbi5wcmV2ZW50RGVmYXVsdCgpfX0pKSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJih0Ll9lZGl0VXNlckV2ZW50cz1uZXcgci5Vc2VyRXZlbnRzKHQuZWxlbWVudCx7ZmlsdGVyOlwiLmstc2NoZWR1bGVyLW1vbnRodmlldyAuay1ldmVudFwiLHRhcDpmdW5jdGlvbihuKXswPT09ZShuLmV2ZW50LnRhcmdldCkuY2xvc2VzdChcImE6aGFzKC5rLXNpLWNsb3NlKVwiKS5sZW5ndGgmJih0LnRyaWdnZXIoXCJlZGl0XCIse3VpZDplKG4udGFyZ2V0KS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihyLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpKX19KSl9LHNlbGVjdGlvbkJ5RWxlbWVudDpmdW5jdGlvbih0KXt2YXIgbj1lKHQpLm9mZnNldCgpO3JldHVybiB0aGlzLl9zbG90QnlQb3NpdGlvbihuLmxlZnQsbi50b3ApfSxfY29sdW1uQ291bnRGb3JMZXZlbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbHVtbkxldmVsc1tlXTtyZXR1cm4gdD90Lmxlbmd0aDowfSxfcm93Q291bnRGb3JMZXZlbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJvd0xldmVsc1tlXTtyZXR1cm4gdD90Lmxlbmd0aDowfSxfY29udGVudDpmdW5jdGlvbigpe3ZhciBlLHQ9XCI8dGJvZHk+XCIsbj0xLGk9dGhpcy5ncm91cGVkUmVzb3VyY2VzO2ZvcihpLmxlbmd0aCYmdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpJiYobj10aGlzLl9yb3dDb3VudEZvckxldmVsKGkubGVuZ3RoLTEpKSxlPTA7bj5lO2UrKyl0Kz10aGlzLl9jcmVhdGVDYWxlbmRhcihlKTt0Kz1cIjwvdGJvZHk+XCIsdGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKS5odG1sKHQpfSxfY3JlYXRlQ2FsZW5kYXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLG8sYT10aGlzLnN0YXJ0RGF0ZSgpLHM9aCp1LGw9aCxjPVthXSxkPVwiXCIscD0xLGY9dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpLGc9dGhpcy5ncm91cGVkUmVzb3VyY2VzO2ZvcihnLmxlbmd0aCYmKGZ8fChwPXRoaXMuX2NvbHVtbkNvdW50Rm9yTGV2ZWwoZy5sZW5ndGgtMSkpKSx0aGlzLl9zbG90SW5kaWNlcz17fSx0PTAsbj1zL2w7bj50O3QrKyl7Zm9yKGQrPVwiPHRyPlwiLGMucHVzaChhKSxpPXQqbCxvPTA7cD5vO28rKylkKz10aGlzLl9jcmVhdGVSb3coYSxpLGwsZj9lOm8pO2E9ci5kYXRlLmFkZERheXMoYSxsKSxkKz1cIjwvdHI+XCJ9cmV0dXJuIHRoaXMuX3dlZWtTdGFydERhdGVzPWMsdGhpcy5fZW5kRGF0ZT1yLmRhdGUucHJldmlvdXNEYXkoYSksZH0sX2NyZWF0ZVJvdzpmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhPXRoaXMscz1hLl9maXJzdERheU9mTW9udGgsbD1hLl9sYXN0RGF5T2ZNb250aCxkPWEuZGF5VGVtcGxhdGUsdT1cIlwiLGg9XCJcIixwPWZ1bmN0aW9uKCl7cmV0dXJuIGEuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4Oml9KX07Zm9yKG89MDtuPm87bysrKXU9XCJcIixyLmRhdGUuaXNUb2RheShlKSYmKHUrPVwiay10b2RheVwiKSxyLmRhdGUuaXNJbkRhdGVSYW5nZShlLHMsbCl8fCh1Kz1cIiBrLW90aGVyLW1vbnRoXCIpLGgrPVwiPHRkIFwiLFwiXCIhPT11JiYoaCs9J2NsYXNzPVwiJyt1KydcIicpLGgrPVwiPlwiLGgrPWQoe2RhdGU6ZSxyZXNvdXJjZXM6cH0pLGgrPVwiPC90ZD5cIixhLl9zbG90SW5kaWNlc1tjKGUpLmdldFRpbWUoKV09dCtvLGU9ci5kYXRlLm5leHREYXkoZSk7cmV0dXJuIGh9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgbixpLHIsbz10aGlzLmNhbGVuZGFySW5mbygpLGE9dGhpcy5faXNNb2JpbGUoKT9vLmRheXMubmFtZXNTaG9ydDpvLmRheXMubmFtZXMscz10KGEsby5maXJzdERheSksbD1lLm1hcChzLGZ1bmN0aW9uKGUpe3JldHVybnt0ZXh0OmV9fSksYz10aGlzLmdyb3VwZWRSZXNvdXJjZXM7aWYoYy5sZW5ndGgpaWYodGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpKXtmb3IoaT1bXSxyPTA7Nj5yO3IrKylpLnB1c2goe3RleHQ6XCI8ZGl2PiZuYnNwOzwvZGl2PlwiLGNsYXNzTmFtZTpcImstaGlkZGVuIGstc2xvdC1jZWxsXCJ9KTtuPXRoaXMuX2NyZWF0ZVJvd3NMYXlvdXQoYyxpLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSl9ZWxzZSBsPXRoaXMuX2NyZWF0ZUNvbHVtbnNMYXlvdXQoYyxsLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSk7cmV0dXJue2NvbHVtbnM6bCxyb3dzOm59fSxfY3JlYXRlRXZlbnRFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcy5vcHRpb25zLG89aS5lZGl0YWJsZSxhPXRoaXMuX2lzTW9iaWxlKCk7cmV0dXJuIHQuc2hvd0RlbGV0ZT1vJiZvLmRlc3Ryb3khPT0hMSYmIWEsdC5yZXNpemFibGU9byYmby5yZXNpemUhPT0hMSYmIWEsdC5ucz1yLm5zLHQucmVzb3VyY2VzPXRoaXMuZXZlbnRSZXNvdXJjZXModCksdC5pbnZlcnNlQ29sb3I9dC5yZXNvdXJjZXMmJnQucmVzb3VyY2VzWzBdP3RoaXMuX3Nob3VsZEludmVyc2VSZXNvdXJjZUNvbG9yKHQucmVzb3VyY2VzWzBdKTohMSxuPWUodGhpcy5ldmVudFRlbXBsYXRlKHQpKSx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6bixkYXRhOlt7ZGF0YUl0ZW06dH1dfX0pLG59LF9pc0luRGF0ZVNsb3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ncm91cHNbMF0sbj10LmZpcnN0U2xvdCgpLnN0YXJ0LG89dC5sYXN0U2xvdCgpLmVuZC0xLGE9ci5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KSxzPXIuZGF0ZS50b1V0Y1RpbWUoZS5lbmQpO3JldHVybihpKGEsbixvKXx8aShzLG4sbyl8fGkobixhLHMpfHxpKG8sYSxzKSkmJighaShzLG4sbil8fGkocyxhLGEpfHxlLmlzQWxsRGF5KX0sX3Nsb3RJbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2xvdEluZGljZXNbYyhlKS5nZXRUaW1lKCldfSxfcG9zaXRpb25Nb2JpbGVFdmVudDpmdW5jdGlvbih0LG4saSl7dmFyIG8scyxsLGMsZCx1LGgscD10LnN0YXJ0O3Quc3RhcnQub2Zmc2V0TGVmdD50LmVuZC5vZmZzZXRMZWZ0JiYocD10LmVuZCksbz10LnN0YXJ0LmluZGV4LHM9byxsPTMsYz1hLmNvbGxpZGluZ0V2ZW50cyh0LmV2ZW50cygpLG8scyksYy5wdXNoKHtlbGVtZW50Om4sc3RhcnQ6byxlbmQ6c30pLGQ9YS5jcmVhdGVSb3dzKGMpLHU9dC5jb2xsZWN0aW9uLmF0KG8pLGg9dS5jb250YWluZXIsaHx8KGg9ZShyLmZvcm1hdCgnPGRpdiBjbGFzcz1cImstZXZlbnRzLWNvbnRhaW5lclwiIHN0eWxlPVwidG9wOnswfTtsZWZ0OnsxfTt3aWR0aDp7Mn1cIi8+JyxwLm9mZnNldFRvcCtwLmZpcnN0Q2hpbGRUb3ArcC5maXJzdENoaWxkSGVpZ2h0LTMrXCJweFwiLHAub2Zmc2V0TGVmdCtcInB4XCIscC5vZmZzZXRXaWR0aCtcInB4XCIpKSx1LmNvbnRhaW5lcj1oLHRoaXMuY29udGVudFswXS5hcHBlbmRDaGlsZChoWzBdKSksbD49ZC5sZW5ndGgmJih0LmFkZEV2ZW50KHtlbGVtZW50Om4sc3RhcnQ6byxlbmQ6cyxncm91cEluZGV4OnAuZ3JvdXBJbmRleH0pLGkuX2NvbnRpbnVvdXNFdmVudHMucHVzaCh7ZWxlbWVudDpuLHVpZDpuLmF0dHIoci5hdHRyKFwidWlkXCIpKSxzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pLGhbMF0uYXBwZW5kQ2hpbGQoblswXSkpfSxfcG9zaXRpb25FdmVudDpmdW5jdGlvbih0LG4saSl7dmFyIG8scyxsLGMsZCx1LGgscCxmLGcsdixfLHksdyxiLGs9dGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0LHg9dC5zdGFydDtmb3IodC5zdGFydC5vZmZzZXRMZWZ0PnQuZW5kLm9mZnNldExlZnQmJih4PXQuZW5kKSxvPXQuc3RhcnQuaW5kZXgscz10LmVuZC5pbmRleCxsPXguZXZlbnRDb3VudCxjPWEuY29sbGlkaW5nRXZlbnRzKHQuZXZlbnRzKCksbyxzKSxkPW8hPT1zPzU6NCxjLnB1c2goe2VsZW1lbnQ6bixzdGFydDpvLGVuZDpzfSksdT1hLmNyZWF0ZVJvd3MoYyksaD0wLHA9TWF0aC5taW4odS5sZW5ndGgsbCk7cD5oO2grKylmb3IoZj11W2hdLmV2ZW50cyxnPXgub2Zmc2V0VG9wK3guZmlyc3RDaGlsZEhlaWdodCtoKmsrMypoK1wicHhcIix2PTAsXz1mLmxlbmd0aDtfPnY7disrKWZbdl0uZWxlbWVudFswXS5zdHlsZS50b3A9ZztpZih1Lmxlbmd0aD5sKWZvcih5PW87cz49eTt5Kyspe2lmKHc9dC5jb2xsZWN0aW9uLGI9dy5hdCh5KSxiLm1vcmUpcmV0dXJuO2IubW9yZT1lKG0oe25zOnIubnMsc3RhcnQ6eSxlbmQ6eSx3aWR0aDpiLmNsaWVudFdpZHRoLTIsbGVmdDpiLm9mZnNldExlZnQrMix0b3A6Yi5vZmZzZXRUb3ArYi5maXJzdENoaWxkSGVpZ2h0K2wqayszKmx9KSksdGhpcy5jb250ZW50WzBdLmFwcGVuZENoaWxkKGIubW9yZVswXSl9ZWxzZSB0LmFkZEV2ZW50KHtlbGVtZW50Om4sc3RhcnQ6byxlbmQ6cyxncm91cEluZGV4OnguZ3JvdXBJbmRleH0pLG5bMF0uc3R5bGUud2lkdGg9dC5pbm5lcldpZHRoKCktZCtcInB4XCIsblswXS5zdHlsZS5sZWZ0PXgub2Zmc2V0TGVmdCsyK1wicHhcIixuWzBdLnN0eWxlLmhlaWdodD1rK1wicHhcIixpLl9jb250aW51b3VzRXZlbnRzLnB1c2goe2VsZW1lbnQ6bix1aWQ6bi5hdHRyKHIuYXR0cihcInVpZFwiKSksc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KSx0aGlzLmNvbnRlbnRbMF0uYXBwZW5kQ2hpbGQoblswXSl9LF9zbG90QnlQb3NpdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj10aGlzLmNvbnRlbnQub2Zmc2V0KCk7Zm9yKGUtPXIubGVmdCx0LT1yLnRvcCx0Kz10aGlzLmNvbnRlbnRbMF0uc2Nyb2xsVG9wLGUrPXRoaXMuY29udGVudFswXS5zY3JvbGxMZWZ0LGU9TWF0aC5jZWlsKGUpLHQ9TWF0aC5jZWlsKHQpLG49MDt0aGlzLmdyb3Vwcy5sZW5ndGg+bjtuKyspaWYoaT10aGlzLmdyb3Vwc1tuXS5kYXlTbG90QnlQb3NpdGlvbihlLHQpKXJldHVybiBpO3JldHVybiBudWxsfSxfY3JlYXRlUmVzaXplSGludDpmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXJ0U2xvdCgpLm9mZnNldExlZnQsbj1lLnN0YXJ0Lm9mZnNldFRvcCxpPWUuaW5uZXJXaWR0aCgpLHI9ZS5zdGFydC5jbGllbnRIZWlnaHQtMixvPWEuZm4uX2NyZWF0ZVJlc2l6ZUhpbnQuY2FsbCh0aGlzLHQsbixpLHIpO28uYXBwZW5kVG8odGhpcy5jb250ZW50KSx0aGlzLl9yZXNpemVIaW50PXRoaXMuX3Jlc2l6ZUhpbnQuYWRkKG8pfSxfdXBkYXRlUmVzaXplSGludDpmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxhLHM7Zm9yKHRoaXMuX3JlbW92ZVJlc2l6ZUhpbnQoKSxvPXRoaXMuZ3JvdXBzW3RdLGE9by5yYW5nZXMobixpLCEwLGUuaXNBbGxEYXkpLHM9MDthLmxlbmd0aD5zO3MrKyl0aGlzLl9jcmVhdGVSZXNpemVIaW50KGFbc10pO3RoaXMuX3Jlc2l6ZUhpbnQuZmluZChcIi5rLWxhYmVsLXRvcCwuay1sYWJlbC1ib3R0b21cIikudGV4dChcIlwiKSx0aGlzLl9yZXNpemVIaW50LmZpcnN0KCkuYWRkQ2xhc3MoXCJrLWZpcnN0XCIpLmZpbmQoXCIuay1sYWJlbC10b3BcIikudGV4dChyLnRvU3RyaW5nKHIudGltZXpvbmUudG9Mb2NhbERhdGUobiksXCJNL2RkXCIpKSx0aGlzLl9yZXNpemVIaW50Lmxhc3QoKS5hZGRDbGFzcyhcImstbGFzdFwiKS5maW5kKFwiLmstbGFiZWwtYm90dG9tXCIpLnRleHQoci50b1N0cmluZyhyLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpLFwiTS9kZFwiKSl9LF91cGRhdGVNb3ZlSGludDpmdW5jdGlvbihlLHQsbil7dmFyIGksbyxhLHMsbCxjPXIuZGF0ZS50b1V0Y1RpbWUoZS5zdGFydCkrbixkPWMrZS5kdXJhdGlvbigpLHU9dGhpcy5ncm91cHNbdF0saD11LnJhbmdlcyhjLGQsITAsZS5pc0FsbERheSk7Zm9yKHRoaXMuX3JlbW92ZU1vdmVIaW50KCksaT0wO2gubGVuZ3RoPmk7aSsrKW89aFtpXSxhPW8uc3RhcnRTbG90KCkscz1vLmVuZFNsb3QoKSxsPXRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChlLmNsb25lKHtoZWFkOm8uaGVhZCx0YWlsOm8udGFpbH0pKSxsLmNzcyh7bGVmdDphLm9mZnNldExlZnQrMix0b3A6YS5vZmZzZXRUb3ArYS5maXJzdENoaWxkSGVpZ2h0LGhlaWdodDp0aGlzLm9wdGlvbnMuZXZlbnRIZWlnaHQsd2lkdGg6by5pbm5lcldpZHRoKCktKGEuaW5kZXghPT1zLmluZGV4PzU6NCl9KSxsLmFkZENsYXNzKFwiay1ldmVudC1kcmFnLWhpbnRcIiksbC5hcHBlbmRUbyh0aGlzLmNvbnRlbnQpLHRoaXMuX21vdmVIaW50PXRoaXMuX21vdmVIaW50LmFkZChsKX0sX2dyb3VwczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLG8sYSxzLGwsYyxkLHAsZixnLG0sdixfLHksdz10aGlzLl9ncm91cENvdW50KCksYj1oLGs9dTtmb3IodGhpcy5ncm91cHM9W10sZT0wO3c+ZTtlKyspdGhpcy5fYWRkUmVzb3VyY2VWaWV3KGUpO2Zvcih0PXRoaXMuY29udGVudFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRyXCIpLG49MDt3Pm47bisrKWZvcihpPTAsbz0wLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKSYmKG89biksYT1vKms7KG8rMSkqaz5hO2ErKylmb3Iocz10aGlzLmdyb3Vwc1tuXSxsPXMuYWRkRGF5U2xvdENvbGxlY3Rpb24oci5kYXRlLmFkZERheXModGhpcy5zdGFydERhdGUoKSxpKSxyLmRhdGUuYWRkRGF5cyh0aGlzLnN0YXJ0RGF0ZSgpLGkrYikpLGM9dFthXSxkPWMuY2hpbGRyZW4scD0wLGMuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicm93XCIpLHRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKXx8KHA9biksZj1wKmI7KHArMSkqYj5mO2YrKylnPWRbZl0sbT1nLmNsaWVudEhlaWdodCx2PWcuY2hpbGRyZW4ubGVuZ3RoP2cuY2hpbGRyZW5bMF0ub2Zmc2V0SGVpZ2h0KzM6MCxfPXIuZGF0ZS50b1V0Y1RpbWUoci5kYXRlLmFkZERheXModGhpcy5zdGFydERhdGUoKSxpKSksaSsrLHk9TWF0aC5mbG9vcigobS12LXRoaXMub3B0aW9ucy5tb3JlQnV0dG9uSGVpZ2h0KS8odGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0KzMpKSxnLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyaWRjZWxsXCIpLGcuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCExKSxsLmFkZERheVNsb3QoZyxfLF8rci5kYXRlLk1TX1BFUl9EQVkseSl9LHJlbmRlcjpmdW5jdGlvbihlKXt0aGlzLmNvbnRlbnQuY2hpbGRyZW4oXCIuay1ldmVudCwuay1tb3JlLWV2ZW50cywuay1ldmVudHMtY29udGFpbmVyXCIpLnJlbW92ZSgpLHRoaXMuX2dyb3VwcygpLGU9bmV3IHIuZGF0YS5RdWVyeShlKS5zb3J0KFt7ZmllbGQ6XCJzdGFydFwiLGRpcjpcImFzY1wifSx7ZmllbGQ6XCJlbmRcIixkaXI6XCJkZXNjXCJ9XSkudG9BcnJheSgpO3ZhciB0PXRoaXMuZ3JvdXBlZFJlc291cmNlczt0Lmxlbmd0aD90aGlzLl9yZW5kZXJHcm91cHMoZSx0LDAsMSk6dGhpcy5fcmVuZGVyRXZlbnRzKGUsMCksdGhpcy5yZWZyZXNoTGF5b3V0KCksdGhpcy50cmlnZ2VyKFwiYWN0aXZhdGVcIil9LF9yZW5kZXJFdmVudHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQsdSxoLHA9dGhpcy5faXNNb2JpbGVQaG9uZVZpZXcoKTtmb3IoaT0wLHI9ZS5sZW5ndGg7cj5pO2krKylpZihuPWVbaV0sdGhpcy5faXNJbkRhdGVTbG90KG4pKWZvcihvPXRoaXMuZ3JvdXBzW3RdLG8uX2NvbnRpbnVvdXNFdmVudHN8fChvLl9jb250aW51b3VzRXZlbnRzPVtdKSxhPW8uc2xvdFJhbmdlcyhuLCEwKSxzPWEubGVuZ3RoLGw9MDtzPmw7bCsrKWM9YVtsXSxkPW4uc3RhcnQsdT1uLmVuZCxzPjEmJigwPT09bD91PWMuZW5kLmVuZERhdGUoKTpsPT1zLTE/ZD1jLnN0YXJ0LnN0YXJ0RGF0ZSgpOihkPWMuc3RhcnQuc3RhcnREYXRlKCksdT1jLmVuZC5lbmREYXRlKCkpKSxoPW4uY2xvbmUoe3N0YXJ0OmQsZW5kOnUsaGVhZDpjLmhlYWQsdGFpbDpjLnRhaWx9KSxwP3RoaXMuX3Bvc2l0aW9uTW9iaWxlRXZlbnQoYyx0aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQoaCksbyk6dGhpcy5fcG9zaXRpb25FdmVudChjLHRoaXMuX2NyZWF0ZUV2ZW50RWxlbWVudChoKSxvKX0sX3JlbmRlckdyb3VwczpmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzLGwsYyxkPXRbMF07aWYoZClmb3Iobz1kLmRhdGFTb3VyY2UudmlldygpLHM9MDtvLmxlbmd0aD5zO3MrKylsPXRoaXMuX3Jlc291cmNlVmFsdWUoZCxvW3NdKSxjPW5ldyByLmRhdGEuUXVlcnkoZSkuZmlsdGVyKHtmaWVsZDpkLmZpZWxkLG9wZXJhdG9yOmEuZ3JvdXBFcUZpbHRlcihsKX0pLnRvQXJyYXkoKSx0Lmxlbmd0aD4xP249dGhpcy5fcmVuZGVyR3JvdXBzKGMsdC5zbGljZSgxKSxuKyssaSsxKTp0aGlzLl9yZW5kZXJFdmVudHMoYyxuKyspO3JldHVybiBufSxfZ3JvdXBDb3VudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JvdXBlZFJlc291cmNlcztyZXR1cm4gZS5sZW5ndGg/dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3RoaXMuX3Jvd0NvdW50Rm9yTGV2ZWwoZS5sZW5ndGgtMSk6dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlLmxlbmd0aCkvdGhpcy5fY29sdW1uT2Zmc2V0Rm9yUmVzb3VyY2UoZS5sZW5ndGgpOjF9LF9jb2x1bW5PZmZzZXRGb3JSZXNvdXJjZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlKS90aGlzLl9jb2x1bW5Db3VudEZvckxldmVsKGUtMSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnRhYmxlJiZ0aGlzLnRhYmxlLnJlbW92ZUNsYXNzKFwiay1zY2hlZHVsZXItbW9udGh2aWV3XCIpLHRoaXMuY29udGVudCYmdGhpcy5jb250ZW50Lm9mZihzKSx0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5vZmYocyksYS5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5faXNNb2JpbGUoKSYmIXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCkmJnRoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMub3B0aW9ucy5lZGl0YWJsZS5jcmVhdGUhPT0hMSYmdGhpcy5fYWRkVXNlckV2ZW50cy5kZXN0cm95KCksdGhpcy5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZ0aGlzLl9lZGl0VXNlckV2ZW50cy5kZXN0cm95KCkpfSxldmVudHM6W1wicmVtb3ZlXCIsXCJhZGRcIixcImVkaXRcIixcIm5hdmlnYXRlXCJdLG9wdGlvbnM6e3RpdGxlOlwiTW9udGhcIixuYW1lOlwibW9udGhcIixldmVudEhlaWdodDoyNSxtb3JlQnV0dG9uSGVpZ2h0OjEzLGVkaXRhYmxlOiEwLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOnl9XCIsZ3JvdXBIZWFkZXJUZW1wbGF0ZTpcIiM9dGV4dCNcIixkYXlUZW1wbGF0ZTpwLGV2ZW50VGVtcGxhdGU6Z319KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7dmFyIG47cmV0dXJuIDAhPT1lJiZ0PmU/bj10LWU6KG49ZSV0LG4mJihuPXQtbikpLG59ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmdldE1vbnRoKCksbj1tKGUpP2V0W3RdOnR0W3RdO3JldHVybiBuK2UuZ2V0RGF0ZSgpfWZ1bmN0aW9uIHIoZSxuKXt2YXIgaSxyO3JldHVybiBlPW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksZS5nZXREYXRlKCkpLFgoZSwwKSxpPWUuZ2V0RnVsbFllYXIoKSxuIT09dD8oUShlLG4sLTEpLGUuc2V0RGF0ZShlLmdldERhdGUoKSs0KSk6ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpKyg0LShlLmdldERheSgpfHw3KSkpLFgoZSwwKSxyPU1hdGguZmxvb3IoKGUuZ2V0VGltZSgpLW5ldyBEYXRlKGksMCwxLC02KSkvODY0ZTUpLDErTWF0aC5mbG9vcihyLzcpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1KKGUpLmdldERheSgpLGk9Ny0obis3LSh0fHw3KSl8fDc7cmV0dXJuIDA+aSYmKGkrPTcpLE1hdGguY2VpbCgoZS5nZXREYXRlKCktaSkvNykrMX1mdW5jdGlvbiBhKGUsdCl7cmV0dXJuIGUrKHQ+ZT83OjApfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciBpLHIscyxsLGMsZD10Lm9mZnNldDtyZXR1cm4gZD8oaT1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsMCkscj1vKGksbikscz1hKHQuZGF5LG4pLGw9czxhKG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMSkuZ2V0RGF5KCksbiksYz1zPmEoaS5nZXREYXkoKSxuKSwwPmQ/ZD1yKyhkKzEtKGM/MTowKSk6bCYmKGQrPTEpLHItPWM/MTowLChsPzE6MCk+ZHx8ZD5yP251bGw6ZCk6byhlLG4pfWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gbyhuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsMCksdCl9ZnVuY3Rpb24gYyhlLHQsbil7cmV0dXJuIG8oZSxuKT09PXMoZSx0LG4pfWZ1bmN0aW9uIGQoZSx0LG4pe2Zvcih2YXIgaSxyLGwsYyxkPWEodC5nZXREYXkoKSxuKSx1PWUubGVuZ3RoLGg9W10scD0wO3U+cDtwKyspaWYocj1lW3BdLGM9byh0LG4pLGk9cyh0LHIsbiksbnVsbCE9PWkpaWYoaT5jKWgucHVzaChyKTtlbHNlIGlmKGM9PT1pKWlmKGw9YShyLmRheSxuKSxsPmQpaC5wdXNoKHIpO2Vsc2UgaWYoZD09PWwpcmV0dXJuIG51bGw7cmV0dXJuIGh9ZnVuY3Rpb24gdShlLHQsbil7Zm9yKHZhciBpLHI9MCxvPWUubGVuZ3RoLGE9W107bz5yO3IrKyl7aWYoaT1lW3JdLG4mJihpPW4oaSkpLHQ9PT1pKXJldHVybiBudWxsO2k+dCYmYS5wdXNoKGkpfXJldHVybiBhfWZ1bmN0aW9uIGgoZSx0KXtmb3IodmFyIG4saT0wLHI9ZS5sZW5ndGg7cj5pO2krKyl7aWYobj1wYXJzZUludChlW2ldLDEwKSxpc05hTihuKXx8dC5zdGFydD5ufHxuPnQuZW5kfHwwPT09biYmMD50LnN0YXJ0KXJldHVybiBudWxsO2VbaV09bn1yZXR1cm4gZS5zb3J0KHYpfWZ1bmN0aW9uIHAoZSl7Zm9yKHZhciBuLGkscixvPTAsYT1lLmxlbmd0aDthPm87bysrKXtpZihuPWVbb10saT1uLmxlbmd0aCxyPW4uc3Vic3RyaW5nKGktMikudG9VcHBlckNhc2UoKSxyPXJ0W3JdLHI9PT10KXJldHVybiBudWxsO2Vbb109e29mZnNldDpwYXJzZUludChuLnN1YnN0cmluZygwLGktMiksMTApfHwwLGRheTpyfX1yZXR1cm4gZX1mdW5jdGlvbiBmKGUpe2Zvcih2YXIgdCxuLGk9MCxyPWUubGVuZ3RoLG89W107cj5pO2krKyl0PWVbaV0sXCJzdHJpbmdcIj09dHlwZW9mIHQ/bj10OihuPVwiXCIraXRbdC5kYXldLHQub2Zmc2V0JiYobj10Lm9mZnNldCtuKSksby5wdXNoKG4pO3JldHVyblwiXCIrb31mdW5jdGlvbiBnKGUpe3ZhciB0PWUuZ2V0TW9udGgoKTtyZXR1cm4gMT09PXQ/MT09PW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwxLDI5KS5nZXRNb250aCgpPzI5OjI4Om50W3RdfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIGU9ZS5nZXRGdWxsWWVhcigpLGUlND09PTAmJmUlMTAwIT09MHx8ZSU0MDA9PT0wfWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gZS10fWZ1bmN0aW9uIF8oZSx0KXt2YXIgbixpLHI9MCxvPVtdO2lmKGUpZm9yKGU9ZS5zcGxpdChcIjtcIiksbj1lLmxlbmd0aDtuPnI7cisrKWk9UyhlW3JdLHQpLGkmJm8ucHVzaChpKTtyZXR1cm4gb31mdW5jdGlvbiB5KHQsbixpKXtmb3IodmFyIHI9ZS5pc0FycmF5KHQpP3Q6Xyh0LGkpLG89bi5nZXRUaW1lKCktbi5nZXRNaWxsaXNlY29uZHMoKSxhPTAscz1yLmxlbmd0aDtzPmE7YSsrKWlmKHJbYV0uZ2V0VGltZSgpPT09bylyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiB3KGUsdCl7dmFyIG4saSxyPTAsbz1bXS5jb25jYXQoZSk7Zm9yKG49by5sZW5ndGg7bj5yO3IrKylpPW9bcl0saT1VLnRpbWV6b25lLmNvbnZlcnQoaSx0fHxpLmdldFRpbWV6b25lT2Zmc2V0KCksXCJFdGMvVVRDXCIpLG9bcl09VS50b1N0cmluZyhpLGx0KTtyZXR1cm4gby5qb2luKFwiO1wiKStcIjtcIn1mdW5jdGlvbiBiKGUsdCl7dmFyIG49bmV3IERhdGUoZSk7c3dpdGNoKHQuZnJlcSl7Y2FzZVwieWVhcmx5XCI6bi5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksMCwxKTticmVhaztjYXNlXCJtb250aGx5XCI6bi5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksbi5nZXRNb250aCgpLDEpO2JyZWFrO2Nhc2VcIndlZWtseVwiOlEobix0LndlZWtTdGFydCwtMSl9cmV0dXJuIHQuaG91cnMmJm4uc2V0SG91cnMoMCksdC5taW51dGVzJiZuLnNldE1pbnV0ZXMoMCksdC5zZWNvbmRzJiZuLnNldFNlY29uZHMoMCksbn1mdW5jdGlvbiBrKGUsdCl7dmFyIG49bmV3IERhdGUoZSk7c3dpdGNoKHQuZnJlcSl7Y2FzZVwieWVhcmx5XCI6bi5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksMTEsMzEpO2JyZWFrO2Nhc2VcIm1vbnRobHlcIjpuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCkrMSwwKTticmVhaztjYXNlXCJ3ZWVrbHlcIjpRKG4sdC53ZWVrU3RhcnQsLTEpLG4uc2V0RGF0ZShuLmdldERhdGUoKSs2KX1yZXR1cm4gdC5ob3VycyYmbi5zZXRIb3VycygyMyksdC5taW51dGVzJiZuLnNldE1pbnV0ZXMoNTkpLHQuc2Vjb25kcyYmbi5zZXRTZWNvbmRzKDU5KSxufWZ1bmN0aW9uIHgoZSx0LG4pe3ZhciBpLHIsbyxhLHM9ZS5zbGljZShuLl9zdGFydElkeCksbD1zLmxlbmd0aCxjPW4ucG9zaXRpb25zLGQ9W107Zm9yKG89MCxhPWMubGVuZ3RoO2E+bztvKyspaT1jW29dLDA+aT9pPWwraTppLT0xLHI9c1tpXSxyJiZyLnN0YXJ0Pj10JiZkLnB1c2gocik7cmV0dXJuIGU9ZS5zbGljZSgwLG4uX3N0YXJ0SWR4KS5jb25jYXQoZCksbi5fc3RhcnRJZHg9ZS5sZW5ndGgsZX1mdW5jdGlvbiBDKGUsbixpLHIpe3ZhciBvLGEscyxsLGMsZCx1LGgscCxmLGcsbSx2LEMsUyxULEEsRSxNLFAsSSx6LEY9RChlLnJlY3VycmVuY2VSdWxlLHIpLFI9W107aWYoIUYpcmV0dXJuW2VdO2ZvcihQPUYucG9zaXRpb25zLEk9UD8wOjEsZj1GLnN0YXJ0LGc9Ri5lbmQsKGZ8fGcpJiYoZT1lLmNsb25lKHtzdGFydDpmP25ldyBEYXRlKGYudmFsdWVbMF0pOnQsZW5kOmc/bmV3IERhdGUoZy52YWx1ZVswXSk6dH0pKSxBPWUuc3RhcnQsVD1BLmdldFRpbWUoKSxTPVooQSksQz1fKGUucmVjdXJyZW5jZUV4Y2VwdGlvbixyKSwhQ1swXSYmRi5leGRhdGVzJiYoQz1GLmV4ZGF0ZXMudmFsdWUsZS5zZXQoXCJyZWN1cnJlbmNlRXhjZXB0aW9uXCIsdyhDLHIpKSksaD1uPW5ldyBEYXRlKG4pLGk9bmV3IERhdGUoaSksdj1GLmZyZXEsTT1tdFt2XSxFPUYuY291bnQsRi51bnRpbCYmaT5GLnVudGlsJiYoaT1uZXcgRGF0ZShGLnVudGlsKSksbT1cInllYXJseVwiPT09dnx8XCJtb250aGx5XCI9PT12fHxcIndlZWtseVwiPT09dixUPm58fEV8fEYuaW50ZXJ2YWw+MXx8bT9uPW5ldyBEYXRlKFQpOihsPW4uZ2V0SG91cnMoKSxjPW4uZ2V0TWludXRlcygpLGQ9bi5nZXRTZWNvbmRzKCksRi5ob3Vyc3x8KGw9QS5nZXRIb3VycygpKSxGLm1pbnV0ZXN8fChjPUEuZ2V0TWludXRlcygpKSxGLnNlY29uZHN8fChkPUEuZ2V0U2Vjb25kcygpKSxuLnNldEhvdXJzKGwsYyxkLEEuZ2V0TWlsbGlzZWNvbmRzKCkpKSxGLl9zdGFydFBlcmlvZD1uZXcgRGF0ZShuKSxQJiYobj1iKG4sRiksaT1rKGksRiksej1aKGkpLVoobiksMD56JiYobD1uLmdldEhvdXJzKCksaS5zZXRIb3VycyhsLG4uZ2V0TWludXRlcygpLG4uZ2V0U2Vjb25kcygpLG4uZ2V0TWlsbGlzZWNvbmRzKCkpLFkuYWRqdXN0RFNUKGksbCkpLEYuX3N0YXJ0UGVyaW9kPW5ldyBEYXRlKG4pLEYuX2VuZFBlcmlvZD1rKG4sRiksRi5fc3RhcnRJZHg9MCksdT1lLmR1cmF0aW9uKCksRi5fc3RhcnRUaW1lPW89WS50b0ludmFyaWFudFRpbWUobiksTS5zZXR1cCYmTS5zZXR1cChGLEEsbiksTS5saW1pdChuLGksRik7aT49bjspaWYocz1uZXcgRGF0ZShuKSxLKHMsdSkscD1uPj1ofHxzPmgsKHAmJiF5KEMsbixyKXx8UCkmJihvPVkudG9VdGNUaW1lKFkuZ2V0RGF0ZShuKSkrWihGLl9zdGFydFRpbWUpLGE9byt1LFQhPT1uLmdldFRpbWUoKXx8UyE9PVooRi5fc3RhcnRUaW1lKT9SLnB1c2goZS50b09jY3VycmVuY2Uoe3N0YXJ0Om5ldyBEYXRlKG4pLGVuZDpzLHN0YXJ0VGltZTpvLGVuZFRpbWU6YX0pKTooZS5zdGFydFRpbWU9byxlLmVuZFRpbWU9YSxSLnB1c2goZSkpKSxQKXtpZihNLm5leHQobixGKSxNLmxpbWl0KG4saSxGKSxuPkYuX2VuZFBlcmlvZCYmKFI9eChSLEEsRiksRi5fZW5kUGVyaW9kPWsobixGKSxJPVIubGVuZ3RoKSxFJiZFPT09SSlicmVha31lbHNle2lmKEUmJkU9PT1JKWJyZWFrO0krKyxNLm5leHQobixGKSxNLmxpbWl0KG4saSxGKX1yZXR1cm4gUn1mdW5jdGlvbiBTKGUsdCl7cmV0dXJuIGU9VS5wYXJzZURhdGUoZSxvdCksZSYmdCYmKGU9Vy5jb252ZXJ0KGUsZS5nZXRUaW1lem9uZU9mZnNldCgpLHQpKSxlfWZ1bmN0aW9uIFQoZSxuKXt2YXIgaSxyLG8sYSxzLGwsYyxkLHU9ZS5zcGxpdChcIjtcIik7Zm9yKGM9MCxkPXUubGVuZ3RoO2Q+YztjKyspaWYoaT11W2NdLnNwbGl0KFwiOlwiKSxyPWlbMF0sbz1pWzFdLC0xIT09ci5pbmRleE9mKFwiVFpJRFwiKSYmKGE9ci5zdWJzdHJpbmcoci5pbmRleE9mKFwiVFpJRFwiKSkuc3BsaXQoXCI9XCIpWzFdKSxvKWZvcihvPW8uc3BsaXQoXCIsXCIpLHM9MCxsPW8ubGVuZ3RoO2w+cztzKyspb1tzXT1TKG9bc10sYXx8bik7cmV0dXJuIG8/e3ZhbHVlOm8sdHppZDphfTp0fWZ1bmN0aW9uIEQobixpKXt2YXIgcixvLGEscyxsLGMsZCx1LGYsZz17fSxtPTAsdj0hMSxfPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5kYXksaT10LmRheTtyZXR1cm4gdT5uJiYobis9NyksdT5pJiYoaSs9Nyksbi1pfTtpZighbilyZXR1cm4gbnVsbDtmb3IoYz1uLnNwbGl0KFwiXFxuXCIpLGNbMV18fC0xPT09bi5pbmRleE9mKFwiRFRTVEFSVFwiKSYmLTE9PT1uLmluZGV4T2YoXCJEVEVORFwiKSYmLTE9PT1uLmluZGV4T2YoXCJFWERBVEVcIil8fChjPW4uc3BsaXQoXCIgXCIpKSxtPTAsYT1jLmxlbmd0aDthPm07bSsrKWw9Y1ttXSwtMSE9PWwuaW5kZXhPZihcIkRUU1RBUlRcIik/Zy5zdGFydD1UKGwsaSk6LTEhPT1sLmluZGV4T2YoXCJEVEVORFwiKT9nLmVuZD1UKGwsaSk6LTEhPT1sLmluZGV4T2YoXCJFWERBVEVcIik/Zy5leGRhdGVzPVQobCxpKTpzPS0xIT09bC5pbmRleE9mKFwiUlJVTEVcIik/bC5zdWJzdHJpbmcoNik6bDtmb3Iocz1zLnNwbGl0KFwiO1wiKSxtPTAsYT1zLmxlbmd0aDthPm07bSsrKXN3aXRjaChkPXNbbV0scj1kLnNwbGl0KFwiPVwiKSxvPWUudHJpbShyWzFdKS5zcGxpdChcIixcIiksZS50cmltKHJbMF0pLnRvVXBwZXJDYXNlKCkpe2Nhc2VcIkZSRVFcIjpnLmZyZXE9b1swXS50b0xvd2VyQ2FzZSgpO2JyZWFrO2Nhc2VcIlVOVElMXCI6Zy51bnRpbD1TKG9bMF0saSk7YnJlYWs7Y2FzZVwiQ09VTlRcIjpnLmNvdW50PXBhcnNlSW50KG9bMF0sMTApO2JyZWFrO2Nhc2VcIklOVEVSVkFMXCI6Zy5pbnRlcnZhbD1wYXJzZUludChvWzBdLDEwKTticmVhaztjYXNlXCJCWVNFQ09ORFwiOmcuc2Vjb25kcz1oKG8se3N0YXJ0OjAsZW5kOjYwfSksdj0hMDticmVhaztjYXNlXCJCWU1JTlVURVwiOmcubWludXRlcz1oKG8se3N0YXJ0OjAsZW5kOjU5fSksdj0hMDticmVhaztjYXNlXCJCWUhPVVJcIjpnLmhvdXJzPWgobyx7c3RhcnQ6MCxlbmQ6MjN9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZTU9OVEhEQVlcIjpnLm1vbnRoRGF5cz1oKG8se3N0YXJ0Oi0zMSxlbmQ6MzF9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZWUVBUkRBWVwiOmcueWVhckRheXM9aChvLHtzdGFydDotMzY2LGVuZDozNjZ9KSx2PSEwO2JyZWFrO2Nhc2VcIkJZTU9OVEhcIjpnLm1vbnRocz1oKG8se3N0YXJ0OjEsZW5kOjEyfSksdj0hMDticmVhaztjYXNlXCJCWURBWVwiOmcud2Vla0RheXM9Zj1wKG8pLHY9ITA7YnJlYWs7Y2FzZVwiQllXRUVLTk9cIjpnLndlZWtzPWgobyx7c3RhcnQ6LTUzLGVuZDo1M30pLHY9ITA7YnJlYWs7Y2FzZVwiQllTRVRQT1NcIjpnLnBvc2l0aW9ucz1oKG8se3N0YXJ0Oi0zNjYsZW5kOjM2Nn0pO2JyZWFrO2Nhc2VcIldLU1RcIjpnLndlZWtTdGFydD11PXJ0W29bMF1dfXJldHVybiBnLmZyZXE9PT10fHxnLmNvdW50IT09dCYmZy51bnRpbD9udWxsOihnLmludGVydmFsfHwoZy5pbnRlcnZhbD0xKSx1PT09dCYmKGcud2Vla1N0YXJ0PXU9VS5jdWx0dXJlKCkuY2FsZW5kYXIuZmlyc3REYXkpLGYmJihnLndlZWtEYXlzPWYuc29ydChfKSksZy5wb3NpdGlvbnMmJiF2JiYoZy5wb3NpdGlvbnM9bnVsbCksZy5faGFzUnVsZVZhbHVlPXYsZyl9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbixpPWUudmFsdWUscj1lLnR6aWR8fFwiXCIsbz1pLmxlbmd0aCxhPTA7bz5hO2ErKyluPWlbYV0sbj1XLmNvbnZlcnQobixyfHx0fHxuLmdldFRpbWV6b25lT2Zmc2V0KCksXCJFdGMvVVRDXCIpLGlbYV09VS50b1N0cmluZyhuLFwieXl5eU1NZGRUSEhtbXNzWlwiKTtyZXR1cm4gciYmKHI9XCI7VFpJRD1cIityKSxyK1wiOlwiK2kuam9pbihcIixcIikrXCIgXCJ9ZnVuY3Rpb24gRShlLG4pe3ZhciBpPWUud2Vla1N0YXJ0LHI9XCJGUkVRPVwiK2UuZnJlcS50b1VwcGVyQ2FzZSgpLG89ZS5leGRhdGVzfHxcIlwiLGE9ZS5zdGFydHx8XCJcIixzPWUuZW5kfHxcIlwiLGw9ZS51bnRpbDtyZXR1cm4gZS5pbnRlcnZhbD4xJiYocis9XCI7SU5URVJWQUw9XCIrZS5pbnRlcnZhbCksZS5jb3VudCYmKHIrPVwiO0NPVU5UPVwiK2UuY291bnQpLGwmJihsPVcuY29udmVydChsLG58fGwuZ2V0VGltZXpvbmVPZmZzZXQoKSxcIkV0Yy9VVENcIikscis9XCI7VU5USUw9XCIrVS50b1N0cmluZyhsLFwieXl5eU1NZGRUSEhtbXNzWlwiKSksZS5tb250aHMmJihyKz1cIjtCWU1PTlRIPVwiK2UubW9udGhzKSxlLndlZWtzJiYocis9XCI7QllXRUVLTk89XCIrZS53ZWVrcyksZS55ZWFyRGF5cyYmKHIrPVwiO0JZWUVBUkRBWT1cIitlLnllYXJEYXlzKSxlLm1vbnRoRGF5cyYmKHIrPVwiO0JZTU9OVEhEQVk9XCIrZS5tb250aERheXMpLGUud2Vla0RheXMmJihyKz1cIjtCWURBWT1cIitmKGUud2Vla0RheXMpKSxlLmhvdXJzJiYocis9XCI7QllIT1VSPVwiK2UuaG91cnMpLGUubWludXRlcyYmKHIrPVwiO0JZTUlOVVRFPVwiK2UubWludXRlcyksZS5zZWNvbmRzJiYocis9XCI7QllTRUNPTkQ9XCIrZS5zZWNvbmRzKSxlLnBvc2l0aW9ucyYmKHIrPVwiO0JZU0VUUE9TPVwiK2UucG9zaXRpb25zKSxpIT09dCYmKHIrPVwiO1dLU1Q9XCIraXRbaV0pLGEmJihhPVwiRFRTVEFSVFwiK0EoYSxuKSkscyYmKHM9XCJEVEVORFwiK0EocyxuKSksbyYmKG89XCJFWERBVEVcIitBKG8sbikpLChhfHxzfHxvKSYmKHI9YStzK28rXCJSUlVMRTpcIityKSxyfXZhciBNLFAsSSx6LEYsUixCLEwsTyxILE4sVixVPXdpbmRvdy5rZW5kbyxXPVUudGltZXpvbmUsaj1VLkNsYXNzLEc9VS51aSxxPUcuV2lkZ2V0LCQ9Ry5Ecm9wRG93bkxpc3QsWT1VLmRhdGUsSz1ZLnNldFRpbWUsUT1ZLnNldERheU9mV2VlayxYPVkuYWRqdXN0RFNULEo9WS5maXJzdERheU9mTW9udGgsWj1ZLmdldE1pbGxpc2Vjb25kcyxldD1bMCwzMSw2MCw5MSwxMjEsMTUyLDE4MiwyMTMsMjQ0LDI3NCwzMDUsMzM1LDM2Nl0sdHQ9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNCwzNjVdLG50PVszMSwyOCwzMCwzMSwzMCwzMSwzMCwzMSwzMCwzMSwzMCwzMV0saXQ9ezA6XCJTVVwiLDE6XCJNT1wiLDI6XCJUVVwiLDM6XCJXRVwiLDQ6XCJUSFwiLDU6XCJGUlwiLDY6XCJTQVwifSxydD17U1U6MCxNTzoxLFRVOjIsV0U6MyxUSDo0LEZSOjUsU0E6Nn0sb3Q9W1wieXl5eS1NTS1kZFRISDptbTpzcy5mZmZ6enpcIixcInl5eXktTU0tZGRUSEg6bW06c3N6enpcIixcInl5eXktTU0tZGRUSEg6bW06c3NcIixcInl5eXktTU0tZGRUSEg6bW1cIixcInl5eXktTU0tZGRUSEhcIixcInl5eXktTU0tZGRcIixcInl5eXlNTWRkVEhIbW1zc2ZmZnp6elwiLFwieXl5eU1NZGRUSEhtbXNzenp6XCIsXCJ5eXl5TU1kZFRISG1tc3NcIixcInl5eXlNTWRkVEhIbW1cIixcInl5eXlNTWRkVEhIXCIsXCJ5eXl5TU1kZFwiXSxhdD1bXCJtb250aHNcIixcIndlZWtzXCIsXCJ5ZWFyRGF5c1wiLFwibW9udGhEYXlzXCIsXCJ3ZWVrRGF5c1wiLFwiaG91cnNcIixcIm1pbnV0ZXNcIixcInNlY29uZHNcIl0sc3Q9YXQubGVuZ3RoLGx0PVwieXl5eU1NZGRUSEhtbXNzWlwiLGN0PXttb250aHM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4ubW9udGhzLHI9dShpLGUuZ2V0TW9udGgoKSsxKSxvPSExO3JldHVybiBudWxsIT09ciYmKHIubGVuZ3RoP2Uuc2V0TW9udGgoclswXS0xLDEpOmUuc2V0RnVsbFllYXIoZS5nZXRGdWxsWWVhcigpKzEsaVswXS0xLDEpLG89ITApLG99LG1vbnRoRGF5czpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpLHIsbyxhPSExLHM9ZS5nZXRIb3VycygpLGw9ZnVuY3Rpb24oZSl7cmV0dXJuIDA+ZSYmKGU9aStlKSxlfTt0Pj1lOyl7aWYocj1lLmdldE1vbnRoKCksaT1nKGUpLG89dShuLm1vbnRoRGF5cyxlLmdldERhdGUoKSxsKSxudWxsPT09bylyZXR1cm4gYTtpZihhPSEwLG8ubGVuZ3RoKXtpZihlLnNldE1vbnRoKHIsby5zb3J0KHYpWzBdKSxYKGUscykscj09PWUuZ2V0TW9udGgoKSlicmVha31lbHNlIGUuc2V0TW9udGgocisxLDEpfXJldHVybiBhfSx5ZWFyRGF5czpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLG8sYT0hMSxzPWUuZ2V0SG91cnMoKSxsPWZ1bmN0aW9uKGUpe3JldHVybiAwPmUmJihlPXIrZSksZX07dD5lOyl7aWYocj1tKGUpPzM2NjozNjUsbz11KG4ueWVhckRheXMsaShlKSxsKSxudWxsPT09bylyZXR1cm4gYTtpZihhPSEwLHI9ZS5nZXRGdWxsWWVhcigpLG8ubGVuZ3RoKXtlLnNldEZ1bGxZZWFyKHIsMCxvLnNvcnQodilbMF0pLFgoZSxzKTticmVha31lLnNldEZ1bGxZZWFyKHIrMSwwLDEpfXJldHVybiBhfSx3ZWVrczpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpLG8sYSxzPW4ud2Vla1N0YXJ0LGw9ITEsYz1lLmdldEhvdXJzKCksZD1mdW5jdGlvbihlKXtyZXR1cm4gMD5lJiYoZT01MytlKSxlfTt0PmU7KXtpZihvPXUobi53ZWVrcyxyKGUscyksZCksbnVsbD09PW8pcmV0dXJuIGw7aWYobD0hMCxpPWUuZ2V0RnVsbFllYXIoKSxvLmxlbmd0aCl7YT03Km8uc29ydCh2KVswXS0xLGUuc2V0RnVsbFllYXIoaSwwLGEpLFEoZSxzLC0xKSxYKGUsYyk7YnJlYWt9ZS5zZXRGdWxsWWVhcihpKzEsMCwxKX1yZXR1cm4gbH0sd2Vla0RheXM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsYT1uLndlZWtEYXlzLHM9bi53ZWVrU3RhcnQsdT1kKGEsZSxzKSxoPWUuZ2V0SG91cnMoKTtpZihudWxsPT09dSlyZXR1cm4hMTtpZihpPXVbMF0saXx8KGk9YVswXSxRKGUscykpLHI9aS5kYXksaS5vZmZzZXQpZm9yKDt0Pj1lJiYhYyhlLGkscyk7KW8oZSxzKT09PWwoZSxzKT8oZS5zZXRNb250aChlLmdldE1vbnRoKCkrMSwxKSxYKGUsaCkpOihlLnNldERhdGUoZS5nZXREYXRlKCkrNyksWChlLGgpLFEoZSxzLC0xKSk7cmV0dXJuIGUuZ2V0RGF5KCkhPT1yJiZRKGUsciksITB9LGhvdXJzOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLmhvdXJzLHI9bi5fc3RhcnRUaW1lLG89ci5nZXRIb3VycygpLGE9dShpLG8pLHM9ITE7cmV0dXJuIG51bGwhPT1hJiYocz0hMCxlLnNldEhvdXJzKG8pLFgoZSxvKSxhLmxlbmd0aD8oYT1hWzBdLGUuc2V0SG91cnMoYSkpOihhPWUuZ2V0SG91cnMoKSxlLnNldERhdGUoZS5nZXREYXRlKCkrMSksWChlLGEpLGE9aVswXSxlLnNldEhvdXJzKGEpLFgoZSxhKSksbi5taW51dGVzJiZlLnNldE1pbnV0ZXMoMCksci5zZXRIb3VycyhhLGUuZ2V0TWludXRlcygpKSksc30sbWludXRlczpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5taW51dGVzLHI9ZS5nZXRNaW51dGVzKCksbz11KGksciksYT1uLl9zdGFydFRpbWUuZ2V0SG91cnMoKSxzPSExO3JldHVybiBudWxsIT09byYmKHM9ITAsby5sZW5ndGg/bz1vWzBdOihhKz0xLG89aVswXSksbi5zZWNvbmRzJiZlLnNldFNlY29uZHMoMCksZS5zZXRIb3VycyhhLG8pLGElPTI0LFgoZSxhKSxuLl9zdGFydFRpbWUuc2V0SG91cnMoYSxvLGUuZ2V0U2Vjb25kcygpKSksc30sc2Vjb25kczpmdW5jdGlvbihlLHQsbil7dmFyIGk9bi5zZWNvbmRzLHI9bi5fc3RhcnRUaW1lLmdldEhvdXJzKCksbz11KGksZS5nZXRTZWNvbmRzKCkpLGE9ZS5nZXRNaW51dGVzKCkscz0hMTtyZXR1cm4gbnVsbCE9PW8mJihzPSEwLG8ubGVuZ3RoP2Uuc2V0U2Vjb25kcyhvWzBdKTooYSs9MSxlLnNldE1pbnV0ZXMoYSxpWzBdKSxhPjU5JiYoYSU9NjAscj0ocisxKSUyNCkpLG4uX3N0YXJ0VGltZS5zZXRIb3VycyhyLGEsZS5nZXRTZWNvbmRzKCkpKSxzfX0sZHQ9ai5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dC5fc3RhcnRUaW1lLG89ci5nZXREYXRlKCk7aWYodC5zZWNvbmRzKWk9ZS5nZXRTZWNvbmRzKCkrMSxlLnNldFNlY29uZHMoaSksci5zZXRTZWNvbmRzKGkpLHIuc2V0RGF0ZShvKTtlbHNle2lmKCF0Lm1pbnV0ZXMpcmV0dXJuITE7bj1lLmdldE1pbnV0ZXMoKSsxLGUuc2V0TWludXRlcyhuKSxyLnNldE1pbnV0ZXMobiksci5zZXREYXRlKG8pfXJldHVybiEwfSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ydWxlOzQ9PT1lLmlkeCYmdC5ob3VycyYmKHQuX3N0YXJ0VGltZS5zZXRIb3VycygwKSx0aGlzLl9ob3VyKGUuZGF0ZSx0KSl9LGxpbWl0OmZ1bmN0aW9uKGUsbixpKXtmb3IodmFyIHIsbyxhLHMsbCxjPWkuaW50ZXJ2YWw7bj49ZTspe2ZvcihhPW89dCxsPWUuZ2V0RGF0ZSgpLHM9MDtzdD5zO3MrKyl7aWYocj1hdFtzXSxpW3JdKXtpZihhPWN0W3JdKGUsbixpKSxvIT09dCYmYSlicmVhaztvPWF9YSYmdGhpcy5ub3JtYWxpemUoe2RhdGU6ZSxydWxlOmksZGF5OmwsaWR4OnN9KX1pZigoMT09PWN8fCF0aGlzLmludGVydmFsKGksZSkpJiZzPT09c3QpYnJlYWt9fSxpbnRlcnZhbDpmdW5jdGlvbihlLHQpe3ZhciBpLG8sYT1uZXcgRGF0ZShlLl9zdGFydFBlcmlvZCkscz1uZXcgRGF0ZSh0KSxsPXQuZ2V0SG91cnMoKSxjPWUud2Vla1N0YXJ0LGQ9ZS5pbnRlcnZhbCx1PWUuZnJlcSxoPSExLHA9MCxmPTAsZz0xO3JldHVyblwiaG91cmx5XCI9PT11PyhpPXMuZ2V0VGltZXpvbmVPZmZzZXQoKS1hLmdldFRpbWV6b25lT2Zmc2V0KCksbz1lLl9zdGFydFRpbWUuZ2V0SG91cnMoKSxzPXMuZ2V0VGltZSgpLGwhPT1vJiYocys9KG8tbCkqWS5NU19QRVJfSE9VUikscy09YSxpJiYocy09aSpZLk1TX1BFUl9NSU5VVEUpLGk9TWF0aC5mbG9vcihzL1kuTVNfUEVSX0hPVVIpLHA9bihpLGQpLDAhPT1wJiYodGhpcy5faG91cih0LGUscCksaD0hMCkpOlwiZGFpbHlcIj09PXU/KFkuc2V0VGltZShzLC1hKSxpPU1hdGguZmxvb3Iocy9ZLk1TX1BFUl9EQVkpLHA9bihpLGQpLDAhPT1wJiYodGhpcy5fZGF0ZSh0LGUscCksaD0hMCkpOlwid2Vla2x5XCI9PT11PyhpPTUyKih0LmdldEZ1bGxZZWFyKCktYS5nZXRGdWxsWWVhcigpKSxwPXIodCxjKS1yKGEsYykraSxwPW4ocCxkKSwwIT09cCYmKFkuc2V0RGF5T2ZXZWVrKHQsZS53ZWVrU3RhcnQsLTEpLHQuc2V0RGF0ZSh0LmdldERhdGUoKSs3KnApLFgodCxsKSxoPSEwKSk6XCJtb250aGx5XCI9PT11PyhpPXQuZ2V0RnVsbFllYXIoKS1hLmdldEZ1bGxZZWFyKCksaT10LmdldE1vbnRoKCktYS5nZXRNb250aCgpKzEyKmkscD1uKGksZCksMCE9PXAmJihnPWUuX2hhc1J1bGVWYWx1ZT8xOnQuZ2V0RGF0ZSgpLHQuc2V0RnVsbFllYXIodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKStwLGcpLFgodCxsKSxoPSEwKSk6XCJ5ZWFybHlcIj09PXUmJihpPXQuZ2V0RnVsbFllYXIoKS1hLmdldEZ1bGxZZWFyKCkscD1uKGksZCksZS5tb250aHN8fChmPXQuZ2V0TW9udGgoKSksZS55ZWFyRGF5c3x8ZS5tb250aERheXN8fGUud2Vla0RheXN8fChnPXQuZ2V0RGF0ZSgpKSwwIT09cCYmKHQuc2V0RnVsbFllYXIodC5nZXRGdWxsWWVhcigpK3AsZixnKSxYKHQsbCksaD0hMCkpLGh9LF9ob3VyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10Ll9zdGFydFRpbWUscj1pLmdldEhvdXJzKCk7biYmKHIrPW4pLGUuc2V0SG91cnMociksciU9MjQsaS5zZXRIb3VycyhyKSxYKGUscil9LF9kYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lLmdldEhvdXJzKCk7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpK24pLFgoZSxpKXx8dGhpcy5faG91cihlLHQpfX0pLHV0PWR0LmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe2R0LmZuLm5leHQoZSx0KXx8dGhpcy5faG91cihlLHQsMSlcbn0sbm9ybWFsaXplOmZ1bmN0aW9uKGUpe3ZhciB0PWUucnVsZTs0PT09ZS5pZHgmJih0Ll9zdGFydFRpbWUuc2V0SG91cnMoMCksdGhpcy5faG91cihlLmRhdGUsdCkpfX0pLGh0PWR0LmV4dGVuZCh7bmV4dDpmdW5jdGlvbihlLHQpe2R0LmZuLm5leHQoZSx0KXx8dGhpc1t0LmhvdXJzP1wiX2hvdXJcIjpcIl9kYXRlXCJdKGUsdCwxKX19KSxwdD1odC5leHRlbmQoe3NldHVwOmZ1bmN0aW9uKGUsdCl7ZS53ZWVrRGF5c3x8KGUud2Vla0RheXM9W3tkYXk6dC5nZXREYXkoKSxvZmZzZXQ6MH1dKX19KSxmdD1kdC5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2lmKCFkdC5mbi5uZXh0KGUsdCkpaWYodC5ob3Vycyl0aGlzLl9ob3VyKGUsdCwxKTtlbHNlIGlmKHQubW9udGhEYXlzfHx0LndlZWtEYXlzfHx0LnllYXJEYXlzfHx0LndlZWtzKXRoaXMuX2RhdGUoZSx0LDEpO2Vsc2V7Zm9yKG49ZS5nZXREYXRlKCksaT1lLmdldEhvdXJzKCksZS5zZXRNb250aChlLmdldE1vbnRoKCkrMSksWChlLGkpO2UuZ2V0RGF0ZSgpIT09bjspZS5zZXREYXRlKG4pLFgoZSxpKTt0aGlzLl9ob3VyKGUsdCl9fSxub3JtYWxpemU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ydWxlLG49ZS5kYXRlLGk9bi5nZXRIb3VycygpOzAhPT1lLmlkeHx8dC5tb250aERheXN8fHQud2Vla0RheXM/ZHQuZm4ubm9ybWFsaXplKGUpOihuLnNldERhdGUoZS5kYXkpLFgobixpKSl9LHNldHVwOmZ1bmN0aW9uKGUsdCxuKXtlLm1vbnRoRGF5c3x8ZS53ZWVrRGF5c3x8bi5zZXREYXRlKHQuZ2V0RGF0ZSgpKX19KSxndD1mdC5leHRlbmQoe25leHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuZ2V0SG91cnMoKTtpZighZHQuZm4ubmV4dChlLHQpKWlmKHQuaG91cnMpdGhpcy5faG91cihlLHQsMSk7ZWxzZSBpZih0Lm1vbnRoRGF5c3x8dC53ZWVrRGF5c3x8dC55ZWFyRGF5c3x8dC53ZWVrcyl0aGlzLl9kYXRlKGUsdCwxKTtlbHNlIGlmKHQubW9udGhzKXtmb3Iobj1lLmdldERhdGUoKSxlLnNldE1vbnRoKGUuZ2V0TW9udGgoKSsxKSxYKGUsaSk7ZS5nZXREYXRlKCkhPT1uOyllLnNldERhdGUobiksWChlLGkpO3RoaXMuX2hvdXIoZSx0KX1lbHNlIGUuc2V0RnVsbFllYXIoZS5nZXRGdWxsWWVhcigpKzEpLFgoZSxpKSx0aGlzLl9ob3VyKGUsdCl9LHNldHVwOmZ1bmN0aW9uKCl7fX0pLG10PXtob3VybHk6bmV3IHV0LGRhaWx5Om5ldyBodCx3ZWVrbHk6bmV3IHB0LG1vbnRobHk6bmV3IGZ0LHllYXJseTpuZXcgZ3R9LHZ0PVwiY2xpY2tcIjtVLnJlY3VycmVuY2U9e3J1bGU6e3BhcnNlOkQsc2VyaWFsaXplOkV9LGV4cGFuZDpDLGRheUluWWVhcjppLHdlZWtJblllYXI6cix3ZWVrSW5Nb250aDpvLG51bWJlck9mV2Vla3M6bCxpc0V4Y2VwdGlvbjp5LHRvRXhjZXB0aW9uU3RyaW5nOnd9LE09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVUuY3VsdHVyZSgpLmNhbGVuZGFyLmRheXMubmFtZXNTaG9ydCxuPXQubGVuZ3RoLGk9XCJcIixyPTAsbz1bXTtuPnI7cisrKW8ucHVzaChyKTtmb3IodD10LnNsaWNlKGUpLmNvbmNhdCh0LnNsaWNlKDAsZSkpLG89by5zbGljZShlKS5jb25jYXQoby5zbGljZSgwLGUpKSxyPTA7bj5yO3IrKylpKz0nPGxhYmVsIGNsYXNzPVwiay1jaGVja1wiPjxpbnB1dCBjbGFzcz1cImstcmVjdXItd2Vla2RheS1jaGVja2JveFwiIHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwiJytvW3JdKydcIiAvPiAnK3Rbcl0rXCI8L2xhYmVsPlwiO3JldHVybiBpfSxQPVUudGVtcGxhdGUoJyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0RXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1pbnRlcnZhbFwiLz4jOm1lc3NhZ2VzLmludGVydmFsIzwvZGl2PiMgfSAjIyBpZiAoZnJlcXVlbmN5ID09PSBcIndlZWtseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0T24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+Iz13ZWVrRGF5Q2hlY2tCb3hlcyhmaXJzdFdlZWtEYXkpIzwvZGl2PiMgfSBlbHNlIGlmIChmcmVxdWVuY3kgPT09IFwibW9udGhseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0T24jPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHVsIGNsYXNzPVwiay1yZXNldFwiPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aC1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJtb250aFwiIHZhbHVlPVwibW9udGhkYXlcIiAvPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aGRheVwiIC8+PC9saT48bGk+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aC1yYWRpb1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJtb250aFwiIHZhbHVlPVwid2Vla2RheVwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCIgLz48L2xpPjwvdWw+PC9kaXY+IyB9IGVsc2UgaWYgKGZyZXF1ZW5jeSA9PT0gXCJ5ZWFybHlcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLnJlcGVhdE9uIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjx1bCBjbGFzcz1cImstcmVzZXRcIj48bGk+PGlucHV0IGNsYXNzPVwiay1yZWN1ci15ZWFyLXJhZGlvXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cInllYXJcIiB2YWx1ZT1cIm1vbnRoZGF5XCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoXCIgLz48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgLz48L2xpPjxsaT48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXllYXItcmFkaW9cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwieWVhclwiIHZhbHVlPVwid2Vla2RheVwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiIC8+PGlucHV0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCIgLz4jOm1lc3NhZ2VzLm9mIzxpbnB1dCBjbGFzcz1cImstcmVjdXItbW9udGhcIiAvPjwvbGk+PC91bD48L2Rpdj4jIH0gIyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6ZW5kLmxhYmVsIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjx1bCBjbGFzcz1cImstcmVzZXRcIj48bGk+PGxhYmVsPjxpbnB1dCBjbGFzcz1cImstcmVjdXItZW5kLW5ldmVyXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImVuZFwiIHZhbHVlPVwibmV2ZXJcIiAvPiM6ZW5kLm5ldmVyIzwvbGFiZWw+PC9saT48bGk+PGxhYmVsPjxpbnB1dCBjbGFzcz1cImstcmVjdXItZW5kLWNvdW50XCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cImVuZFwiIHZhbHVlPVwiY291bnRcIiAvPiM6ZW5kLmFmdGVyIzwvbGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1jb3VudFwiIC8+IzplbmQub2NjdXJyZW5jZSM8L2xpPjxsaT48bGFiZWw+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1lbmQtdW50aWxcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwiZW5kXCIgdmFsdWU9XCJ1bnRpbFwiIC8+IzplbmQub24jPC9sYWJlbD48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLXVudGlsXCIgLz48L2xpPjwvdWw+PC9kaXY+IyB9ICMnKSxJPVt7ZGF5OjAsb2Zmc2V0OjB9LHtkYXk6MSxvZmZzZXQ6MH0se2RheToyLG9mZnNldDowfSx7ZGF5OjMsb2Zmc2V0OjB9LHtkYXk6NCxvZmZzZXQ6MH0se2RheTo1LG9mZnNldDowfSx7ZGF5OjYsb2Zmc2V0OjB9XSx6PVt7ZGF5OjEsb2Zmc2V0OjB9LHtkYXk6MixvZmZzZXQ6MH0se2RheTozLG9mZnNldDowfSx7ZGF5OjQsb2Zmc2V0OjB9LHtkYXk6NSxvZmZzZXQ6MH1dLEY9W3tkYXk6MCxvZmZzZXQ6MH0se2RheTo2LG9mZnNldDowfV0sUj1xLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPXQmJnQuZnJlcXVlbmNpZXM7cS5mbi5pbml0LmNhbGwoaSxlLHQpLGkud3JhcHBlcj1pLmVsZW1lbnQsdD1pLm9wdGlvbnMsdC5zdGFydD1uPXQuc3RhcnR8fFkudG9kYXkoKSxyJiYodC5mcmVxdWVuY2llcz1yKSxcInN0cmluZ1wiPT10eXBlb2YgbiYmKHQuc3RhcnQ9VS5wYXJzZURhdGUobixcInl5eXlNTWRkVEhIbW1zc1wiKSksbnVsbD09PXQuZmlyc3RXZWVrRGF5JiYodC5maXJzdFdlZWtEYXk9VS5jdWx0dXJlKCkuY2FsZW5kYXIuZmlyc3REYXkpLGkuX25hbWVzcGFjZT1cIi5cIit0Lm5hbWV9LG9wdGlvbnM6e3ZhbHVlOlwiXCIsc3RhcnQ6XCJcIix0aW1lem9uZTpcIlwiLHNwaW5uZXJzOiEwLGZpcnN0V2Vla0RheTpudWxsLGZyZXF1ZW5jaWVzOltcIm5ldmVyXCIsXCJkYWlseVwiLFwid2Vla2x5XCIsXCJtb250aGx5XCIsXCJ5ZWFybHlcIl0sbW9iaWxlOiExLG1lc3NhZ2VzOntmcmVxdWVuY2llczp7bmV2ZXI6XCJOZXZlclwiLGhvdXJseTpcIkhvdXJseVwiLGRhaWx5OlwiRGFpbHlcIix3ZWVrbHk6XCJXZWVrbHlcIixtb250aGx5OlwiTW9udGhseVwiLHllYXJseTpcIlllYXJseVwifSxob3VybHk6e3JlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixpbnRlcnZhbDpcIiBob3VyKHMpXCJ9LGRhaWx5OntyZXBlYXRFdmVyeTpcIlJlcGVhdCBldmVyeTogXCIsaW50ZXJ2YWw6XCIgZGF5KHMpXCJ9LHdlZWtseTp7aW50ZXJ2YWw6XCIgd2VlayhzKVwiLHJlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixyZXBlYXRPbjpcIlJlcGVhdCBvbjogXCJ9LG1vbnRobHk6e3JlcGVhdEV2ZXJ5OlwiUmVwZWF0IGV2ZXJ5OiBcIixyZXBlYXRPbjpcIlJlcGVhdCBvbjogXCIsaW50ZXJ2YWw6XCIgbW9udGgocylcIixkYXk6XCJEYXkgXCJ9LHllYXJseTp7cmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLHJlcGVhdE9uOlwiUmVwZWF0IG9uOiBcIixpbnRlcnZhbDpcIiB5ZWFyKHMpXCIsb2Y6XCIgb2YgXCJ9LGVuZDp7bGFiZWw6XCJFbmQ6XCIsbW9iaWxlTGFiZWw6XCJFbmRzXCIsbmV2ZXI6XCJOZXZlclwiLGFmdGVyOlwiQWZ0ZXIgXCIsb2NjdXJyZW5jZTpcIiBvY2N1cnJlbmNlKHMpXCIsb246XCJPbiBcIn0sb2Zmc2V0UG9zaXRpb25zOntmaXJzdDpcImZpcnN0XCIsc2Vjb25kOlwic2Vjb25kXCIsdGhpcmQ6XCJ0aGlyZFwiLGZvdXJ0aDpcImZvdXJ0aFwiLGxhc3Q6XCJsYXN0XCJ9LHdlZWtkYXlzOntkYXk6XCJkYXlcIix3ZWVrZGF5Olwid2Vla2RheVwiLHdlZWtlbmQ6XCJ3ZWVrZW5kIGRheVwifX19LGV2ZW50czpbXCJjaGFuZ2VcIl0sX2luaXRJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZTtlLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLWludGVydmFsXCIpLmtlbmRvTnVtZXJpY1RleHRCb3goe3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyx2YWx1ZTp0LmludGVydmFsfHwxLGRlY2ltYWxzOjAsZm9ybWF0OlwiI1wiLG1pbjoxLGNoYW5nZTpmdW5jdGlvbigpe3QuaW50ZXJ2YWw9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KX0sX3dlZWtEYXlSdWxlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0odC5fd2Vla0RheS5lbGVtZW50fHx0Ll93ZWVrRGF5KS52YWwoKSxpPSsodC5fd2Vla0RheU9mZnNldC5lbGVtZW50fHx0Ll93ZWVrRGF5T2Zmc2V0KS52YWwoKSxyPW51bGwsbz1udWxsO2V8fChcImRheVwiPT09bj8ocj1JLG89aSk6XCJ3ZWVrZGF5XCI9PT1uPyhyPXosbz1pKTpcIndlZWtlbmRcIj09PW4/KHI9RixvPWkpOnI9W3tvZmZzZXQ6aSxkYXk6K259XSksdC5fdmFsdWUud2Vla0RheXM9cix0Ll92YWx1ZS5wb3NpdGlvbnM9b30sX3dlZWtEYXlWaWV3OmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLG89ci5fdmFsdWUud2Vla0RheXMsYT1yLl92YWx1ZS5wb3NpdGlvbnMscz1yLl93ZWVrRGF5T2Zmc2V0O28mJihuPW8ubGVuZ3RoLGEmJig3PT09bj8odD1cImRheVwiLGU9YSk6NT09PW4/KHQ9XCJ3ZWVrZGF5XCIsZT1hKToyPT09biYmKHQ9XCJ3ZWVrZW5kXCIsZT1hKSksdHx8KG89b1swXSx0PW8uZGF5LGU9by5vZmZzZXR8fFwiXCIpLGk9cy52YWx1ZT9cInZhbHVlXCI6XCJ2YWxcIixzW2ldKGUpLHIuX3dlZWtEYXlbaV0odCkpfSxfaW5pdFdlZWtEYXk6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXMud2Vla2RheXMscj1uLm9wdGlvbnMubWVzc2FnZXMub2Zmc2V0UG9zaXRpb25zLG89bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5XCIpLGE9ZnVuY3Rpb24oKXtuLl93ZWVrRGF5UnVsZSgpLG4uX3RyaWdnZXIoKX07b1swXSYmKG4uX3dlZWtEYXlPZmZzZXQ9bmV3ICQobi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci13ZWVrZGF5LW9mZnNldFwiKSx7Y2hhbmdlOmEsZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTpbe3RleHQ6ci5maXJzdCx2YWx1ZTpcIjFcIn0se3RleHQ6ci5zZWNvbmQsdmFsdWU6XCIyXCJ9LHt0ZXh0OnIudGhpcmQsdmFsdWU6XCIzXCJ9LHt0ZXh0OnIuZm91cnRoLHZhbHVlOlwiNFwifSx7dGV4dDpyLmxhc3QsdmFsdWU6XCItMVwifV19KSx0PVt7dGV4dDppLmRheSx2YWx1ZTpcImRheVwifSx7dGV4dDppLndlZWtkYXksdmFsdWU6XCJ3ZWVrZGF5XCJ9LHt0ZXh0Omkud2Vla2VuZCx2YWx1ZTpcIndlZWtlbmRcIn1dLG4uX3dlZWtEYXk9bmV3ICQobyx7dmFsdWU6bi5vcHRpb25zLnN0YXJ0LmdldERheSgpLGNoYW5nZTphLGRhdGFUZXh0RmllbGQ6XCJ0ZXh0XCIsZGF0YVZhbHVlRmllbGQ6XCJ2YWx1ZVwiLGRhdGFTb3VyY2U6dC5jb25jYXQoZS5tYXAoVS5jdWx0dXJlKCkuY2FsZW5kYXIuZGF5cy5uYW1lcyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dH19KSl9KSxuLl93ZWVrRGF5VmlldygpKX0sX2luaXRXZWVrRGF5czpmdW5jdGlvbigpe3ZhciB0LG4saSxyLG8sYT10aGlzLHM9YS5fdmFsdWUsbD1hLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXdlZWtkYXktY2hlY2tib3hcIik7aWYobFswXSYmKGwub24odnQrYS5fbmFtZXNwYWNlLGZ1bmN0aW9uKCl7cy53ZWVrRGF5cz1lLm1hcChsLmZpbHRlcihcIjpjaGVja2VkXCIpLGZ1bmN0aW9uKGUpe3JldHVybntkYXk6K2UudmFsdWUsb2Zmc2V0OjB9fSksYS5vcHRpb25zLm1vYmlsZXx8YS5fdHJpZ2dlcigpfSkscy53ZWVrRGF5cykpZm9yKGk9MCxyPWwubGVuZ3RoLG89cy53ZWVrRGF5cy5sZW5ndGg7cj5pO2krKylmb3Iobj1sW2ldLHQ9MDtvPnQ7dCsrKW4udmFsdWU9PXMud2Vla0RheXNbdF0uZGF5JiYobi5jaGVja2VkPSEwKX0sX2luaXRNb250aERheTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZSxuPWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItbW9udGhkYXlcIik7blswXSYmKGUuX21vbnRoRGF5PW5ldyBVLnVpLk51bWVyaWNUZXh0Qm94KG4se3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyxtaW46MSxtYXg6MzEsZGVjaW1hbHM6MCxmb3JtYXQ6XCIjXCIsdmFsdWU6dC5tb250aERheXM/dC5tb250aERheXNbMF06ZS5vcHRpb25zLnN0YXJ0LmdldERhdGUoKSxjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnZhbHVlKCk7dC5tb250aERheXM9bj9bbl06bixlLl90cmlnZ2VyKCl9fSkpfSxfaW5pdENvdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItY291bnRcIiksbj1lLl92YWx1ZTtlLl9jb3VudD10LmtlbmRvTnVtZXJpY1RleHRCb3goe3NwaW5uZXJzOmUub3B0aW9ucy5zcGlubmVycyx2YWx1ZTpuLmNvdW50fHwxLGRlY2ltYWxzOjAsZm9ybWF0OlwiI1wiLG1pbjoxLGNoYW5nZTpmdW5jdGlvbigpe24uY291bnQ9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KS5kYXRhKFwia2VuZG9OdW1lcmljVGV4dEJveFwiKX0sX2luaXRVbnRpbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9jb250YWluZXIuZmluZChcIi5rLXJlY3VyLXVudGlsXCIpLG49ZS5vcHRpb25zLnN0YXJ0LGk9ZS5fdmFsdWUscj1pLnVudGlsO2UuX3VudGlsPXQua2VuZG9EYXRlUGlja2VyKHttaW46ciYmbj5yP3I6bix2YWx1ZTpyfHxuLGNoYW5nZTpmdW5jdGlvbigpe2kudW50aWw9dGhpcy52YWx1ZSgpLGUuX3RyaWdnZXIoKX19KS5kYXRhKFwia2VuZG9EYXRlUGlja2VyXCIpfSxfdHJpZ2dlcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5tb2JpbGV8fHRoaXMudHJpZ2dlcihcImNoYW5nZVwiKX19KSxCPVIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztSLmZuLmluaXQuY2FsbChuLGUsdCksbi5faW5pdEZyZXF1ZW5jeSgpLG4uX2luaXRDb250YWluZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJSZWN1cnJlbmNlRWRpdG9yXCJ9LGV2ZW50czpbXCJjaGFuZ2VcIl0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fZnJlcXVlbmN5LmRlc3Ryb3koKSxlLl9jb250YWluZXIuZmluZChcImlucHV0W3R5cGU9cmFkaW9dLGlucHV0W3R5cGU9Y2hlY2tib3hdXCIpLm9mZih2dCtlLl9uYW1lc3BhY2UpLFUuZGVzdHJveShlLl9jb250YWluZXIpLFIuZm4uZGVzdHJveS5jYWxsKGUpfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLnRpbWV6b25lO3JldHVybiBlPT09dD9uLl92YWx1ZS5mcmVxP0Uobi5fdmFsdWUsaSk6XCJcIjoobi5fdmFsdWU9RChlLGkpfHx7fSxuLl9mcmVxdWVuY3kudmFsdWUobi5fdmFsdWUuZnJlcXx8XCJcIiksbi5faW5pdFZpZXcobi5fZnJlcXVlbmN5LnZhbHVlKCkpLHQpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudCxuPWUoJzxkaXYgY2xhc3M9XCJrLXJlY3VyLXZpZXdcIiAvPicpLGk9dC5wYXJlbnQoXCIuay1lZGl0LWZpZWxkXCIpO2lbMF0/bi5pbnNlcnRBZnRlcihpKTp0LmFwcGVuZChuKSx0aGlzLl9jb250YWluZXI9bn0sX2luaXRGcmVxdWVuY3k6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMscj1pLmZyZXF1ZW5jaWVzLG89aS5tZXNzYWdlcy5mcmVxdWVuY2llcyxhPWUoXCI8aW5wdXQgLz5cIik7cj1lLm1hcChyLGZ1bmN0aW9uKGUpe3JldHVybnt0ZXh0Om9bZV0sdmFsdWU6ZX19KSx0PXJbMF0sdCYmXCJuZXZlclwiPT09dC52YWx1ZSYmKHQudmFsdWU9XCJcIiksbi5lbGVtZW50LmFwcGVuZChhKSxuLl9mcmVxdWVuY3k9bmV3ICQoYSx7ZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTpyLGNoYW5nZTpmdW5jdGlvbigpe24uX3ZhbHVlPXt9LG4uX2luaXRWaWV3KG4uX2ZyZXF1ZW5jeS52YWx1ZSgpKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIil9fSl9LF9pbml0VmlldzpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5fdmFsdWUscj1uLm9wdGlvbnMsbz17ZnJlcXVlbmN5OmV8fFwibmV2ZXJcIix3ZWVrRGF5Q2hlY2tCb3hlczpNLGZpcnN0V2Vla0RheTpyLmZpcnN0V2Vla0RheSxtZXNzYWdlczpyLm1lc3NhZ2VzW2VdLGVuZDpyLm1lc3NhZ2VzLmVuZH07cmV0dXJuIFUuZGVzdHJveShuLl9jb250YWluZXIpLG4uX2NvbnRhaW5lci5odG1sKFAobykpLGU/KGkuZnJlcT1lLFwid2Vla2x5XCIhPT1lfHxpLndlZWtEYXlzfHwoaS53ZWVrRGF5cz1be2RheTpyLnN0YXJ0LmdldERheSgpLG9mZnNldDowfV0pLG4uX2luaXRJbnRlcnZhbCgpLG4uX2luaXRXZWVrRGF5cygpLG4uX2luaXRNb250aERheSgpLG4uX2luaXRXZWVrRGF5KCksbi5faW5pdE1vbnRoKCksbi5faW5pdENvdW50KCksbi5faW5pdFVudGlsKCksbi5fcGVyaW9kKCksbi5fZW5kKCksdCk6KG4uX3ZhbHVlPXt9LHQpfSxfaW5pdE1vbnRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5fdmFsdWUscj1pLm1vbnRoc3x8W24ub3B0aW9ucy5zdGFydC5nZXRNb250aCgpKzFdLG89bi5fY29udGFpbmVyLmZpbmQoXCIuay1yZWN1ci1tb250aFwiKTtvWzBdJiYodD17Y2hhbmdlOmZ1bmN0aW9uKCl7aS5tb250aHM9Wyt0aGlzLnZhbHVlKCldLG4udHJpZ2dlcihcImNoYW5nZVwiKX0sZGF0YVRleHRGaWVsZDpcInRleHRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCIsZGF0YVNvdXJjZTplLm1hcChVLmN1bHR1cmUoKS5jYWxlbmRhci5tb250aHMubmFtZXMsZnVuY3Rpb24oZSx0KXtyZXR1cm57dGV4dDplLHZhbHVlOnQrMX19KX0sbi5fbW9udGgxPW5ldyAkKG9bMF0sdCksbi5fbW9udGgyPW5ldyAkKG9bMV0sdCksciYmKHI9clswXSxuLl9tb250aDEudmFsdWUociksbi5fbW9udGgyLnZhbHVlKHIpKSl9LF9lbmQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsbj10Ll92YWx1ZSxpPXQuX2NvbnRhaW5lcixyPXQuX25hbWVzcGFjZSxvPWZ1bmN0aW9uKGUpe3QuX3RvZ2dsZUVuZChlLmN1cnJlbnRUYXJnZXQudmFsdWUpLHQudHJpZ2dlcihcImNoYW5nZVwiKX07dC5fYnV0dG9uTmV2ZXI9aS5maW5kKFwiLmstcmVjdXItZW5kLW5ldmVyXCIpLm9uKHZ0K3IsbyksdC5fYnV0dG9uQ291bnQ9aS5maW5kKFwiLmstcmVjdXItZW5kLWNvdW50XCIpLm9uKHZ0K3IsbyksdC5fYnV0dG9uVW50aWw9aS5maW5kKFwiLmstcmVjdXItZW5kLXVudGlsXCIpLm9uKHZ0K3Isbyksbi5jb3VudD9lPVwiY291bnRcIjpuLnVudGlsJiYoZT1cInVudGlsXCIpLHQuX3RvZ2dsZUVuZChlKX0sX3BlcmlvZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl92YWx1ZSxuPVwibW9udGhseVwiPT09dC5mcmVxLGk9bj9lLl90b2dnbGVNb250aERheTplLl90b2dnbGVZZWFyLHI9XCIuay1yZWN1ci1cIisobj9cIm1vbnRoXCI6XCJ5ZWFyXCIpK1wiLXJhZGlvXCIsbz1lLl9jb250YWluZXIuZmluZChyKTsobnx8XCJ5ZWFybHlcIj09PXQuZnJlcSkmJihvLm9uKHZ0K2UuX25hbWVzcGFjZSxmdW5jdGlvbih0KXtpLmNhbGwoZSx0LmN1cnJlbnRUYXJnZXQudmFsdWUpLGUudHJpZ2dlcihcImNoYW5nZVwiKX0pLGUuX2J1dHRvbk1vbnRoRGF5PW8uZXEoMCksZS5fYnV0dG9uV2Vla0RheT1vLmVxKDEpLGkuY2FsbChlLHQud2Vla0RheXM/XCJ3ZWVrZGF5XCI6XCJtb250aGRheVwiKSl9LF90b2dnbGVFbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzO1wiY291bnRcIj09PWU/KG8uX2J1dHRvbkNvdW50LnByb3AoXCJjaGVja2VkXCIsITApLGk9ITAscj0hMSx0PW8uX2NvdW50LnZhbHVlKCksbj1udWxsKTpcInVudGlsXCI9PT1lPyhvLl9idXR0b25VbnRpbC5wcm9wKFwiY2hlY2tlZFwiLCEwKSxpPSExLHI9ITAsdD1udWxsLG49by5fdW50aWwudmFsdWUoKSk6KG8uX2J1dHRvbk5ldmVyLnByb3AoXCJjaGVja2VkXCIsITApLGk9cj0hMSx0PW49bnVsbCksby5fY291bnQuZW5hYmxlKGkpLG8uX3VudGlsLmVuYWJsZShyKSxvLl92YWx1ZS5jb3VudD10LG8uX3ZhbHVlLnVudGlsPW59LF90b2dnbGVNb250aERheTpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSEwLG89ITE7XCJtb250aGRheVwiPT09ZT8obi5fYnV0dG9uTW9udGhEYXkucHJvcChcImNoZWNrZWRcIiwhMCksdD1bbi5fbW9udGhEYXkudmFsdWUoKV0saT0hMCxyPSExLG89ITApOihuLl9idXR0b25XZWVrRGF5LnByb3AoXCJjaGVja2VkXCIsITApLHQ9bnVsbCksbi5fd2Vla0RheS5lbmFibGUociksbi5fd2Vla0RheU9mZnNldC5lbmFibGUociksbi5fbW9udGhEYXkuZW5hYmxlKGkpLG4uX3ZhbHVlLm1vbnRoRGF5cz10LG4uX3dlZWtEYXlSdWxlKG8pfSxfdG9nZ2xlWWVhcjpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMsaT0hMSxyPSEwO1wibW9udGhkYXlcIj09PWU/KGk9ITAscj0hMSx0PW4uX21vbnRoMS52YWx1ZSgpKTp0PW4uX21vbnRoMi52YWx1ZSgpLG4uX21vbnRoMS5lbmFibGUoaSksbi5fbW9udGgyLmVuYWJsZShyKSxuLl92YWx1ZS5tb250aHM9W3RdLG4uX3RvZ2dsZU1vbnRoRGF5KGUpfX0pLEcucGx1Z2luKEIpLEw9VS50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOmhlYWRlclRpdGxlIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZCBrLXJlY3VyLXBhdHRlcm4gay1zY2hlZHVsZXItdG9vbGJhclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLXJlY3VyLXZpZXdcIj48L2Rpdj4nKSxPPVUudGVtcGxhdGUoJyMgaWYgKGZyZXF1ZW5jeSAhPT0gXCJuZXZlclwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0RXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1pbnRlcnZhbFwiIHBhdHRlcm49XCJcXFxcXFxcXGQqXCIvPiM6bWVzc2FnZXMuaW50ZXJ2YWwjPC9kaXY+IyB9ICMjIGlmIChmcmVxdWVuY3kgPT09IFwid2Vla2x5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRPbiM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj4jPXdlZWtEYXlDaGVja0JveGVzKGZpcnN0V2Vla0RheSkjPC9kaXY+IyB9IGVsc2UgaWYgKGZyZXF1ZW5jeSA9PT0gXCJtb250aGx5XCIpIHsgIzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5yZXBlYXRCeSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGQgay1zY2hlZHVsZXItdG9vbGJhciBrLXJlcGVhdC1ydWxlXCI+PC9kaXY+PGRpdiBjbGFzcz1cImstbW9udGhkYXktdmlld1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmRheSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48aW5wdXQgY2xhc3M9XCJrLXJlY3VyLW1vbnRoZGF5XCIgcGF0dGVybj1cIlxcXFxcXFxcZCpcIi8+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImstd2Vla2RheS12aWV3XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZXZlcnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PHNlbGVjdCBjbGFzcz1cImstcmVjdXItd2Vla2RheS1vZmZzZXRcIj48L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMuZGF5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXlcIj48L3NlbGVjdD48L2Rpdj48L2Rpdj4jIH0gZWxzZSBpZiAoZnJlcXVlbmN5ID09PSBcInllYXJseVwiKSB7ICM8ZGl2IGNsYXNzPVwiay1lZGl0LWxhYmVsXCI+PGxhYmVsPiM6bWVzc2FnZXMucmVwZWF0QnkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkIGstc2NoZWR1bGVyLXRvb2xiYXIgay1yZXBlYXQtcnVsZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJrLW1vbnRoZGF5LXZpZXdcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWw+IzptZXNzYWdlcy5kYXkjPC9sYWJlbD48L2Rpdj48ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGlucHV0IGNsYXNzPVwiay1yZWN1ci1tb250aGRheVwiIHBhdHRlcm49XCJcXFxcXFxcXGQqXCIvPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJrLXdlZWtkYXktdmlld1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmV2ZXJ5IzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLXdlZWtkYXktb2Zmc2V0XCI+PC9zZWxlY3Q+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmRheSM8L2xhYmVsPjwvZGl2PjxkaXYgY2xhc3M9XCJrLWVkaXQtZmllbGRcIj48c2VsZWN0IGNsYXNzPVwiay1yZWN1ci13ZWVrZGF5XCI+PC9zZWxlY3Q+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLm1vbnRoIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxzZWxlY3QgY2xhc3M9XCJrLXJlY3VyLW1vbnRoXCI+PC9zZWxlY3Q+PC9kaXY+IyB9ICMnKSxIPVUudGVtcGxhdGUoJyMgaWYgKGVuZFBhdHRlcm4gPT09IFwiY291bnRcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLmFmdGVyIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxpbnB1dCBjbGFzcz1cImstcmVjdXItY291bnRcIiBwYXR0ZXJuPVwiXFxcXFxcXFxkKlwiIC8+PC9kaXY+IyB9IGVsc2UgaWYgKGVuZFBhdHRlcm4gPT09IFwidW50aWxcIikgeyAjPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4jOm1lc3NhZ2VzLm9uIzwvbGFiZWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjxpbnB1dCB0eXBlPVwiZGF0ZVwiIGNsYXNzPVwiay1yZWN1ci11bnRpbFwiIC8+PC9kaXY+IyB9ICMnKSxOPVUudGVtcGxhdGUoJzx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPiNmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZGF0YVNvdXJjZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgeyM8bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgIz0gdmFsdWUgPT09IGRhdGFTb3VyY2VbaV0udmFsdWUgPyBcImstc3RhdGUtc2VsZWN0ZWRcIiA6IFwiXCIgI1wiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiIGRhdGEtIz1ucyN2YWx1ZT1cIiM9ZGF0YVNvdXJjZVtpXS52YWx1ZSNcIj4jOmRhdGFTb3VyY2VbaV0udGV4dCM8L2E+PC9saT4jfSM8L3VsPicpLFY9Ui5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO1IuZm4uaW5pdC5jYWxsKG4sZSx0KSx0PW4ub3B0aW9ucyxuLl9vcHRpb25UZW1wbGF0ZT1VLnRlbXBsYXRlKCc8b3B0aW9uIHZhbHVlPVwiIzp2YWx1ZSNcIj4jOnRleHQjPC9vcHRpb24+Jyksbi52YWx1ZSh0LnZhbHVlKSxuLl9wYW5lPXQucGFuZSxuLl9pbml0UmVwZWF0QnV0dG9uKCksbi5faW5pdFJlcGVhdEVuZCgpLG4uX2RlZmF1bHRWYWx1ZT1uLl92YWx1ZX0sb3B0aW9uczp7bmFtZTpcIk1vYmlsZVJlY3VycmVuY2VFZGl0b3JcIixhbmltYXRpb25zOntsZWZ0Olwic2xpZGVcIixyaWdodDpcInNsaWRlOnJpZ2h0XCJ9LG1vYmlsZTohMCxtZXNzYWdlczp7Y2FuY2VsOlwiQ2FuY2VsXCIsdXBkYXRlOlwiU2F2ZVwiLGVuZFRpdGxlOlwiUmVwZWF0IGVuZHNcIixyZXBlYXRUaXRsZTpcIlJlcGVhdCBwYXR0ZXJuXCIsaGVhZGVyVGl0bGU6XCJSZXBlYXQgZXZlbnRcIixlbmQ6e3BhdHRlcm5zOntuZXZlcjpcIk5ldmVyXCIsYWZ0ZXI6XCJBZnRlci4uLlwiLG9uOlwiT24uLi5cIn0sbmV2ZXI6XCJOZXZlclwiLGFmdGVyOlwiRW5kIHJlcGVhdCBhZnRlclwiLG9uOlwiRW5kIHJlcGVhdCBvblwifSxkYWlseTp7aW50ZXJ2YWw6XCJcIn0saG91cmx5OntpbnRlcnZhbDpcIlwifSx3ZWVrbHk6e2ludGVydmFsOlwiXCJ9LG1vbnRobHk6e2ludGVydmFsOlwiXCIscmVwZWF0Qnk6XCJSZXBlYXQgYnk6IFwiLGRheU9mTW9udGg6XCJEYXkgb2YgdGhlIG1vbnRoXCIsZGF5T2ZXZWVrOlwiRGF5IG9mIHRoZSB3ZWVrXCIscmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnlcIixldmVyeTpcIkV2ZXJ5XCIsZGF5OlwiRGF5IFwifSx5ZWFybHk6e2ludGVydmFsOlwiXCIscmVwZWF0Qnk6XCJSZXBlYXQgYnk6IFwiLGRheU9mTW9udGg6XCJEYXkgb2YgdGhlIG1vbnRoXCIsZGF5T2ZXZWVrOlwiRGF5IG9mIHRoZSB3ZWVrXCIscmVwZWF0RXZlcnk6XCJSZXBlYXQgZXZlcnk6IFwiLGV2ZXJ5OlwiRXZlcnlcIixtb250aDpcIk1vbnRoXCIsZGF5OlwiRGF5XCJ9fX0sZXZlbnRzOltcImNoYW5nZVwiXSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLnRpbWV6b25lO3JldHVybiBlPT09dD9uLl92YWx1ZS5mcmVxP0Uobi5fdmFsdWUsaSk6XCJcIjoobi5fdmFsdWU9RChlLGkpfHx7fSx0KX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX2Rlc3Ryb3lWaWV3KCksVS5kZXN0cm95KHRoaXMuX2VuZEZpZWxkcyksdGhpcy5fcmVwZWF0QnV0dG9uLm9mZih2dCt0aGlzLl9uYW1lc3BhY2UpLFIuZm4uZGVzdHJveS5jYWxsKHRoaXMpfSxfaW5pdFJlcGVhdEJ1dHRvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMubWVzc2FnZXMuZnJlcXVlbmNpZXNbdGhpcy5fdmFsdWUuZnJlcXx8XCJuZXZlclwiXTt0Ll9yZXBlYXRCdXR0b249ZSgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXJlY3VyXCI+JytuK1wiPC9hPlwiKS5vbih2dCt0Ll9uYW1lc3BhY2UsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2NyZWF0ZVZpZXcoXCJyZXBlYXRcIiksdC5fcGFuZS5uYXZpZ2F0ZShcInJlY3VycmVuY2VcIix0Lm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KX0pLHQuZWxlbWVudC5hcHBlbmQodC5fcmVwZWF0QnV0dG9uKX0sX2luaXRSZXBlYXRFbmQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbD4nK3Qub3B0aW9ucy5tZXNzYWdlcy5lbmQubW9iaWxlTGFiZWwrXCI8L2xhYmVsPjwvZGl2PlwiKS5pbnNlcnRBZnRlcih0LmVsZW1lbnQucGFyZW50KFwiLmstZWRpdC1maWVsZFwiKSksaT1lKCc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXJlY3VyLWVuZFwiPjwvYT48L2Rpdj4nKS5vbih2dCt0Ll9uYW1lc3BhY2UsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX3ZhbHVlLmZyZXEmJih0Ll9jcmVhdGVWaWV3KFwiZW5kXCIpLHQuX3BhbmUubmF2aWdhdGUoXCJyZWN1cnJlbmNlXCIsdC5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCkpfSkuaW5zZXJ0QWZ0ZXIobik7dC5fZW5kRmllbGRzPW4uYWRkKGkpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1kaXNhYmxlZFwiLCF0Ll92YWx1ZS5mcmVxKSx0Ll9lbmRCdXR0b249aS5maW5kKFwiLmstc2NoZWR1bGVyLXJlY3VyLWVuZFwiKS50ZXh0KHQuX2VuZFRleHQoKSl9LF9lbmRUZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdmFsdWUsdD10aGlzLm9wdGlvbnMubWVzc2FnZXMuZW5kLG49dC5uZXZlcjtyZXR1cm4gZS5jb3VudD9uPVUuZm9ybWF0KFwiezB9IHsxfVwiLHQuYWZ0ZXIsZS5jb3VudCk6ZS51bnRpbCYmKG49VS5mb3JtYXQoXCJ7MH0gezE6ZH1cIix0Lm9uLGUudW50aWwpKSxufSxfaW5pdEZyZXF1ZW5jeTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj10Lm9wdGlvbnMubWVzc2FnZXMuZnJlcXVlbmNpZXMsaT1OKHtkYXRhU291cmNlOmUubWFwKHRoaXMub3B0aW9ucy5mcmVxdWVuY2llcyxmdW5jdGlvbihlKXtyZXR1cm57dGV4dDpuW2VdLHZhbHVlOlwibmV2ZXJcIiE9PWU/ZTpcIlwifX0pLHZhbHVlOnQuX3ZhbHVlLmZyZXF8fFwiXCIsbnM6VS5uc30pO3QuX3ZpZXcuZWxlbWVudC5maW5kKFwiLmstcmVjdXItcGF0dGVyblwiKS5hcHBlbmQoaSkub24odnQrdC5fbmFtZXNwYWNlLFwiLmstc2NoZWR1bGVyLW5hdmlnYXRpb24gbGlcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpO24ucHJldmVudERlZmF1bHQoKSxpLmFkZENsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiay1zdGF0ZS1zZWxlY3RlZFwiKSx0Ll92YWx1ZT17ZnJlcTppLmNoaWxkcmVuKFwiYVwiKS5hdHRyKFUuYXR0cihcInZhbHVlXCIpKX0sdC5faW5pdFJlcGVhdFZpZXcoKX0pfSxfaW5pdEVuZE5hdmlnYXRpb246ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMsaT1uLm9wdGlvbnMubWVzc2FnZXMuZW5kLnBhdHRlcm5zLHI9bi5fdmFsdWUsbz1cIlwiO3IuY291bnQ/bz1cImNvdW50XCI6ci51bnRpbCYmKG89XCJ1bnRpbFwiKSx0PU4oe2RhdGFTb3VyY2U6W3t0ZXh0OmkubmV2ZXIsdmFsdWU6XCJcIn0se3RleHQ6aS5hZnRlcix2YWx1ZTpcImNvdW50XCJ9LHt0ZXh0Omkub24sdmFsdWU6XCJ1bnRpbFwifV0sdmFsdWU6byxuczpVLm5zfSksbi5fdmlldy5lbGVtZW50LmZpbmQoXCIuay1yZWN1ci1wYXR0ZXJuXCIpLmFwcGVuZCh0KS5vbih2dCtuLl9uYW1lc3BhY2UsXCIuay1zY2hlZHVsZXItbmF2aWdhdGlvbiBsaVwiLGZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcyksbz1udWxsLGE9bnVsbDt0LnByZXZlbnREZWZhdWx0KCksaS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIiksbi5faW5pdEVuZFZpZXcoaS5jaGlsZHJlbihcImFcIikuYXR0cihVLmF0dHIoXCJ2YWx1ZVwiKSkpLG4uX2NvdW50PyhvPW4uX2NvdW50LnZhbHVlKCksYT1udWxsKTpuLl91bnRpbCYmKG89bnVsbCxhPW4uX3VudGlsLnZhbD9VLnBhcnNlRGF0ZShuLl91bnRpbC52YWwoKSxcInl5eXktTU0tZGRcIik6bi5fdW50aWwudmFsdWUoKSksci5jb3VudD1vLHIudW50aWw9YX0pfSxfY3JlYXRlVmlldzpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9bi5vcHRpb25zLHI9aS5tZXNzYWdlcyxvPXJbXCJyZXBlYXRcIj09PXQ/XCJyZXBlYXRUaXRsZVwiOlwiZW5kVGl0bGVcIl0sYT0nPGRpdiBkYXRhLXJvbGU9XCJ2aWV3XCIgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1tb2JpbGUtbGlzdFwiIGlkPVwicmVjdXJyZW5jZVwiPjxkaXYgZGF0YS1yb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci1jYW5jZWxcIj4nK3IuY2FuY2VsK1wiPC9hPlwiK3IuaGVhZGVyVGl0bGUrJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci11cGRhdGVcIj4nK3IudXBkYXRlK1wiPC9hPjwvZGl2PlwiLHM9bi5fcGFuZS52aWV3KCkuaWQ7bi5fdmlldz1uLl9wYW5lLmFwcGVuZChhK0woe2hlYWRlclRpdGxlOm99KSksbi5fdmlldy5lbGVtZW50Lm9uKHZ0K24uX25hbWVzcGFjZSxcImEuay1zY2hlZHVsZXItY2FuY2VsLCBhLmstc2NoZWR1bGVyLXVwZGF0ZVwiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGUodGhpcykuaGFzQ2xhc3MoXCJrLXNjaGVkdWxlci11cGRhdGVcIik/KG4udHJpZ2dlcihcImNoYW5nZVwiKSxuLl9kZWZhdWx0VmFsdWU9ZS5leHRlbmQoe30sbi5fdmFsdWUpKTpuLl92YWx1ZT1uLl9kZWZhdWx0VmFsdWU7dmFyIGk9bi5fdmFsdWUuZnJlcTtuLl9lbmRCdXR0b24udGV4dChuLl9lbmRUZXh0KCkpLG4uX2VuZEZpZWxkcy50b2dnbGVDbGFzcyhcImstc3RhdGUtZGlzYWJsZWRcIiwhaSksbi5fcmVwZWF0QnV0dG9uLnRleHQoci5mcmVxdWVuY2llc1tpfHxcIm5ldmVyXCJdKSxuLl9wYW5lLm9uZShcInZpZXdTaG93XCIsZnVuY3Rpb24oKXtuLl9kZXN0cm95VmlldygpfSksbi5fcGFuZS5uYXZpZ2F0ZShzLG4ub3B0aW9ucy5hbmltYXRpb25zLnJpZ2h0KX0pLG4uX2NvbnRhaW5lcj1uLl92aWV3LmVsZW1lbnQuZmluZChcIi5rLXJlY3VyLXZpZXdcIiksXCJyZXBlYXRcIj09PXQ/KG4uX2luaXRGcmVxdWVuY3koKSxuLl9pbml0UmVwZWF0VmlldygpKToobi5faW5pdEVuZE5hdmlnYXRpb24oKSxuLl9pbml0RW5kVmlldygpKX0sX2Rlc3Ryb3lWaWV3OmZ1bmN0aW9uKCl7dGhpcy5fdmlldyYmKHRoaXMuX3ZpZXcuZGVzdHJveSgpLHRoaXMuX3ZpZXcuZWxlbWVudC5yZW1vdmUoKSksdGhpcy5fdmlldz1udWxsfSxfaW5pdFJlcGVhdFZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49ZS5fdmFsdWUuZnJlcXx8XCJuZXZlclwiLGk9e2ZyZXF1ZW5jeTpuLHdlZWtEYXlDaGVja0JveGVzOk0sZmlyc3RXZWVrRGF5OmUub3B0aW9ucy5maXJzdFdlZWtEYXksbWVzc2FnZXM6ZS5vcHRpb25zLm1lc3NhZ2VzW25dfSxyPU8oaSksbz1lLl9jb250YWluZXIsYT1lLl92YWx1ZTtyZXR1cm4gVS5kZXN0cm95KG8pLG8uaHRtbChyKSxyPyhcIndlZWtseVwiIT09bnx8YS53ZWVrRGF5c3x8KGEud2Vla0RheXM9W3tkYXk6ZS5vcHRpb25zLnN0YXJ0LmdldERheSgpLG9mZnNldDowfV0pLGUuX2luaXRJbnRlcnZhbCgpLGUuX2luaXRNb250aERheSgpLGUuX2luaXRXZWVrRGF5cygpLGUuX2luaXRXZWVrRGF5KCksZS5faW5pdE1vbnRoKCksZS5fcGVyaW9kKCksdCk6KGUuX3ZhbHVlPXt9LHQpfSxfaW5pdEVuZFZpZXc6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fdmFsdWU7ZT09PXQmJihyLmNvdW50P2U9XCJjb3VudFwiOnIudW50aWwmJihlPVwidW50aWxcIikpLG49e2VuZFBhdHRlcm46ZSxtZXNzYWdlczppLm9wdGlvbnMubWVzc2FnZXMuZW5kfSxVLmRlc3Ryb3koaS5fY29udGFpbmVyKSxpLl9jb250YWluZXIuaHRtbChIKG4pKSxpLl9pbml0Q291bnQoKSxpLl9pbml0VW50aWwoKX0sX2luaXRXZWVrRGF5OmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5vcHRpb25zLm1lc3NhZ2VzLndlZWtkYXlzLHI9bi5vcHRpb25zLm1lc3NhZ2VzLm9mZnNldFBvc2l0aW9ucyxvPW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItd2Vla2RheVwiKSxhPWZ1bmN0aW9uKCl7bi5fd2Vla0RheVJ1bGUoKSxuLnRyaWdnZXIoXCJjaGFuZ2VcIil9O29bMF0mJihuLl93ZWVrRGF5T2Zmc2V0PW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItd2Vla2RheS1vZmZzZXRcIikuaHRtbChuLl9vcHRpb25zKFt7dGV4dDpyLmZpcnN0LHZhbHVlOlwiMVwifSx7dGV4dDpyLnNlY29uZCx2YWx1ZTpcIjJcIn0se3RleHQ6ci50aGlyZCx2YWx1ZTpcIjNcIn0se3RleHQ6ci5mb3VydGgsdmFsdWU6XCI0XCJ9LHt0ZXh0OnIubGFzdCx2YWx1ZTpcIi0xXCJ9XSkpLmNoYW5nZShhKSx0PVt7dGV4dDppLmRheSx2YWx1ZTpcImRheVwifSx7dGV4dDppLndlZWtkYXksdmFsdWU6XCJ3ZWVrZGF5XCJ9LHt0ZXh0Omkud2Vla2VuZCx2YWx1ZTpcIndlZWtlbmRcIn1dLHQ9dC5jb25jYXQoZS5tYXAoVS5jdWx0dXJlKCkuY2FsZW5kYXIuZGF5cy5uYW1lcyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dH19KSksbi5fd2Vla0RheT1vLmh0bWwobi5fb3B0aW9ucyh0KSkuY2hhbmdlKGEpLnZhbChuLm9wdGlvbnMuc3RhcnQuZ2V0RGF5KCkpLG4uX3dlZWtEYXlWaWV3KCkpfSxfaW5pdE1vbnRoOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLGk9bi5fdmFsdWUscj1uLm9wdGlvbnMuc3RhcnQsbz1pLm1vbnRoc3x8W3IuZ2V0TW9udGgoKSsxXSxhPW4uX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItbW9udGhcIikscz1VLmN1bHR1cmUoKS5jYWxlbmRhci5tb250aHMubmFtZXM7YVswXSYmKHQ9ZS5tYXAocyxmdW5jdGlvbihlLHQpe3JldHVybnt0ZXh0OmUsdmFsdWU6dCsxfX0pLGEuaHRtbChuLl9vcHRpb25zKHQpKS5jaGFuZ2UoZnVuY3Rpb24oKXtpLm1vbnRocz1bK3RoaXMudmFsdWVdfSksbi5fbW9udGhTZWxlY3Q9YSxvJiZhLnZhbChvWzBdKSl9LF9wZXJpb2Q6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLG89ci5fdmFsdWUsYT1yLl9jb250YWluZXIscz1yLm9wdGlvbnMubWVzc2FnZXNbby5mcmVxXSxsPWEuZmluZChcIi5rLXJlcGVhdC1ydWxlXCIpLGM9YS5maW5kKFwiLmstd2Vla2RheS12aWV3XCIpLGQ9YS5maW5kKFwiLmstbW9udGhkYXktdmlld1wiKTtsWzBdJiYodD1vLndlZWtEYXlzP1wid2Vla2RheVwiOlwibW9udGhkYXlcIixuPU4oe3ZhbHVlOnQsZGF0YVNvdXJjZTpbe3RleHQ6cy5kYXlPZk1vbnRoLHZhbHVlOlwibW9udGhkYXlcIn0se3RleHQ6cy5kYXlPZldlZWssdmFsdWU6XCJ3ZWVrZGF5XCJ9XSxuczpVLm5zfSksaT1mdW5jdGlvbihlKXt2YXIgdD1yLl93ZWVrRGF5LnZhbCgpLG49ci5fd2Vla0RheU9mZnNldC52YWwoKSxpPXIuX21vbnRoRGF5LnZhbHVlKCksYT1yLl9tb250aFNlbGVjdD9yLl9tb250aFNlbGVjdC52YWwoKTpudWxsO1wibW9udGhkYXlcIj09PWU/KG8ud2Vla0RheXM9bnVsbCxvLm1vbnRoRGF5cz1pP1tpXTppLG8ubW9udGhzPWE/WythXTphLGMuaGlkZSgpLGQuc2hvdygpKTooby5tb250aERheXM9bnVsbCxvLm1vbnRocz1hP1srYV06YSxvLndlZWtEYXlzPVt7b2Zmc2V0OituLGRheTordH1dLGMuc2hvdygpLGQuaGlkZSgpKX0sbC5hcHBlbmQobikub24odnQrci5fbmFtZXNwYWNlLFwiLmstc2NoZWR1bGVyLW5hdmlnYXRpb24gbGlcIixmdW5jdGlvbih0KXt2YXIgbixyPWUodGhpcykuYWRkQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpO3QucHJldmVudERlZmF1bHQoKSxyLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLG49ci5jaGlsZHJlbihcImFcIikuYXR0cihVLmF0dHIoXCJ2YWx1ZVwiKSksaShuKX0pLGkodCkpfSxfaW5pdFVudGlsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX2NvbnRhaW5lci5maW5kKFwiLmstcmVjdXItdW50aWxcIiksbj1lLm9wdGlvbnMuc3RhcnQsaT1lLl92YWx1ZSxyPWkudW50aWwsbz1yJiZuPnI/cjpuO2UuX3VudGlsPVUuc3VwcG9ydC5pbnB1dC5kYXRlP3QuYXR0cihcIm1pblwiLFUudG9TdHJpbmcobyxcInl5eXktTU0tZGRcIikpLnZhbChVLnRvU3RyaW5nKHJ8fG4sXCJ5eXl5LU1NLWRkXCIpKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7aS51bnRpbD1VLnBhcnNlRGF0ZSh0aGlzLnZhbHVlLFwieXl5eS1NTS1kZFwiKX0pOnQua2VuZG9EYXRlUGlja2VyKHttaW46byx2YWx1ZTpyfHxuLGNoYW5nZTpmdW5jdGlvbigpe2kudW50aWw9dGhpcy52YWx1ZSgpfX0pLmRhdGEoXCJrZW5kb0RhdGVQaWNrZXJcIil9LF9vcHRpb25zOmZ1bmN0aW9uKGUsdCl7dmFyIG49MCxpPVwiXCIscj1lLmxlbmd0aCxvPXRoaXMuX29wdGlvblRlbXBsYXRlO2Zvcih0JiYoaSs9byh7dmFsdWU6XCJcIix0ZXh0OnR9KSk7cj5uO24rKylpKz1vKGVbbl0pO3JldHVybiBpfX0pLEcucGx1Z2luKFYpfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApO3JldHVybiBsKHQscChlKSksdH1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gZT49dCYmbj49ZX1mdW5jdGlvbiByKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBvKGUpe3ZhciB0LG49MDtpZihlLmNvbHVtbnMpe2Zvcih0PTA7ZS5jb2x1bW5zLmxlbmd0aD50O3QrKyluKz1vKGUuY29sdW1uc1t0XSk7cmV0dXJuIGUuY29sc3Bhbj1uLG59cmV0dXJuIGUuY29sc3Bhbj0xLDF9dmFyIGE9d2luZG93LmtlbmRvLHM9YS51aSxsPWEuZGF0ZS5zZXRUaW1lLGM9cy5TY2hlZHVsZXJWaWV3LGQ9ZS5leHRlbmQsdT1lLnByb3h5LGg9YS5kYXRlLmdldERhdGUscD1hLmRhdGUuZ2V0TWlsbGlzZWNvbmRzLGY9YS5kYXRlLk1TX1BFUl9EQVksZz1hLmRhdGUuTVNfUEVSX01JTlVURSxtPVwiLmtlbmRvVGltZWxpbmVWaWV3XCIsdj1hLnRlbXBsYXRlKCc8ZGl2PjxkaXYgY2xhc3M9XCJrLWV2ZW50LXRlbXBsYXRlIGstZXZlbnQtdGltZVwiPiM6a2VuZG8uZm9ybWF0KFwiezA6dH0gLSB7MTp0fVwiLCBzdGFydCwgZW5kKSM8L2Rpdj48ZGl2IGNsYXNzPVwiay1ldmVudC10ZW1wbGF0ZVwiPiR7dGl0bGV9PC9kaXY+PC9kaXY+JyksXz1hLnRlbXBsYXRlKFwiPHNwYW4gY2xhc3M9J2stbGluayBrLW5hdi1kYXknPiM9a2VuZG8udG9TdHJpbmcoZGF0ZSwgJ2RkZCBNL2RkJykjPC9zcGFuPlwiKSx5PSc8ZGl2IHJvbGU9XCJncmlkY2VsbFwiIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiIGRhdGEtIz1ucyN1aWQ9XCIjPXVpZCNcIiNpZiAocmVzb3VyY2VzWzBdKSB7ICNzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz1yZXNvdXJjZXNbMF0uY29sb3IjOyBib3JkZXItY29sb3I6ICM9cmVzb3VyY2VzWzBdLmNvbG9yI1wiY2xhc3M9XCJrLWV2ZW50Iz1pbnZlcnNlQ29sb3IgPyBcIiBrLWV2ZW50LWludmVyc2VcIiA6IFwiXCIjXCIgI30gZWxzZSB7I2NsYXNzPVwiay1ldmVudFwiI30jPjxzcGFuIGNsYXNzPVwiay1ldmVudC1hY3Rpb25zXCI+IyBpZihkYXRhLnRhaWwpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWFycm93LXdcIj48L3NwYW4+I30jIyBpZihkYXRhLmlzRXhjZXB0aW9uKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWV4Y2VwdGlvblwiPjwvc3Bhbj4jIH0gZWxzZSBpZihkYXRhLmlzUmVjdXJyaW5nKCkpIHsjPHNwYW4gY2xhc3M9XCJrLWljb24gay1pLXJlZnJlc2hcIj48L3NwYW4+IyB9ICM8L3NwYW4+ezB9PHNwYW4gY2xhc3M9XCJrLWV2ZW50LWFjdGlvbnNcIj4jaWYgKHNob3dEZWxldGUpIHsjPGEgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmsgay1ldmVudC1kZWxldGVcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlXCI+PC9zcGFuPjwvYT4jfSMjIGlmKGRhdGEuaGVhZCkgeyM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj4jfSM8L3NwYW4+I2lmKHJlc2l6YWJsZSAmJiAhZGF0YS50YWlsKXsjPHNwYW4gY2xhc3M9XCJrLXJlc2l6ZS1oYW5kbGUgay1yZXNpemUtd1wiPjwvc3Bhbj4jfSMjaWYocmVzaXphYmxlICYmICFkYXRhLmhlYWQpeyM8c3BhbiBjbGFzcz1cImstcmVzaXplLWhhbmRsZSBrLXJlc2l6ZS1lXCI+PC9zcGFuPiN9IzwvZGl2Picsdz1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7Yy5mbi5pbml0LmNhbGwobixlLHQpLG4udGl0bGU9bi5vcHRpb25zLnRpdGxlfHxuLm9wdGlvbnMubmFtZSxuLl93b3JrRGF5cz1yKG4ub3B0aW9ucyksbi5fdGVtcGxhdGVzKCksbi5fZWRpdGFibGUoKSxuLmNhbGN1bGF0ZURhdGVSYW5nZSgpLG4uX2dyb3VwcygpLG4uX2N1cnJlbnRUaW1lKCl9LG5hbWU6XCJ0aW1lbGluZVwiLF9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvLHMsbCxjLGQsdSxoLHA9bmV3IERhdGUsZj10aGlzLm9wdGlvbnM7aWYodGhpcy5kYXRlc0hlYWRlci5maW5kKFwiLmstY3VycmVudC10aW1lXCIpLnJlbW92ZSgpLHRoaXMuX2lzSW5EYXRlU2xvdCh7c3RhcnQ6cCxlbmQ6cH0pKWZvcihmLmN1cnJlbnRUaW1lTWFya2VyLnVzZUxvY2FsVGltZXpvbmU9PT0hMSYmKHQ9Zi5kYXRhU291cmNlLm9wdGlvbnMuc2NoZW1hLnRpbWV6b25lLGYuZGF0YVNvdXJjZSYmdCYmKG49YS50aW1lem9uZS5vZmZzZXQocCx0KSxwPWEudGltZXpvbmUuY29udmVydChwLHAuZ2V0VGltZXpvbmVPZmZzZXQoKSxuKSkpLGk9Zi5ncm91cCYmXCJ2ZXJ0aWNhbFwiIT1mLmdyb3VwLm9yaWVudGF0aW9uP3RoaXMuZ3JvdXBzLmxlbmd0aDoxLHI9MDtpPnI7cisrKXtpZihvPXRoaXMuZ3JvdXBzW3JdLHM9YS5kYXRlLnRvVXRjVGltZShwKSxsPW8udGltZVNsb3RSYW5nZXMocyxzKzEpLDA9PT1sLmxlbmd0aClyZXR1cm47Yz1sWzBdLmNvbGxlY3Rpb24sZD1jLnNsb3RCeVN0YXJ0RGF0ZShwKSxkJiYodT1lKFwiPGRpdiBjbGFzcz0nay1jdXJyZW50LXRpbWUnPjwvZGl2PlwiKSxoPXRoaXMuZGF0ZXNIZWFkZXIsdS5hcHBlbmRUbyhoLmZpbmQoXCIuay1zY2hlZHVsZXItaGVhZGVyLXdyYXBcIikpLmNzcyh7bGVmdDpNYXRoLnJvdW5kKGxbMF0uaW5uZXJSZWN0KHAsbmV3IERhdGUocC5nZXRUaW1lKCkrMSksITEpLmxlZnQpLHdpZHRoOlwiMXB4XCIsYm90dG9tOlwiMXB4XCIsdG9wOjB9KSl9fSxfY3VycmVudFRpbWU6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1uLm9wdGlvbnMuY3VycmVudFRpbWVNYXJrZXI7aSE9PSExJiZpLnVwZGF0ZUludGVydmFsIT09dCYmKGU9aS51cGRhdGVJbnRlcnZhbCxuLl9jdXJyZW50VGltZU1hcmtlclVwZGF0ZXIoKSxuLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyPXNldEludGVydmFsKHUodGhpcy5fY3VycmVudFRpbWVNYXJrZXJVcGRhdGVyLG4pLGUpKX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVkaXRhYmxlJiYodGhpcy5faXNNb2JpbGUoKT90aGlzLl90b3VjaEVkaXRhYmxlKCk6dGhpcy5fbW91c2VFZGl0YWJsZSgpKX0sX21vdXNlRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuZWxlbWVudC5vbihcImNsaWNrXCIrbSxcIi5rLWV2ZW50IGE6aGFzKC5rLXNpLWNsb3NlKVwiLGZ1bmN0aW9uKG4pe3QudHJpZ2dlcihcInJlbW92ZVwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSksdC5vcHRpb25zLmVkaXRhYmxlLmNyZWF0ZSE9PSExJiZ0LmVsZW1lbnQub24oXCJkYmxjbGlja1wiK20sXCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLGZ1bmN0aW9uKGUpe3ZhciBuLGk9dC5fc2xvdEJ5UG9zaXRpb24oZS5wYWdlWCxlLnBhZ2VZKTtpJiYobj10Ll9yZXNvdXJjZUJ5U2xvdChpKSx0LnRyaWdnZXIoXCJhZGRcIix7ZXZlbnRJbmZvOmQoe3N0YXJ0Omkuc3RhcnREYXRlKCksZW5kOmkuZW5kRGF0ZSgpfSxuKX0pKSxlLnByZXZlbnREZWZhdWx0KCl9KSx0Lm9wdGlvbnMuZWRpdGFibGUudXBkYXRlIT09ITEmJnQuZWxlbWVudC5vbihcImRibGNsaWNrXCIrbSxcIi5rLWV2ZW50XCIsZnVuY3Rpb24obil7dC50cmlnZ2VyKFwiZWRpdFwiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KFwiLmstZXZlbnRcIikuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfSl9LF90b3VjaEVkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJih0Ll9hZGRVc2VyRXZlbnRzPW5ldyBhLlVzZXJFdmVudHModC5lbGVtZW50LHtmaWx0ZXI6XCIuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHRhcDpmdW5jdGlvbihlKXt2YXIgbixpPXQuX3Nsb3RCeVBvc2l0aW9uKGUueC5sb2NhdGlvbixlLnkubG9jYXRpb24pO2kmJihuPXQuX3Jlc291cmNlQnlTbG90KGkpLHQudHJpZ2dlcihcImFkZFwiLHtldmVudEluZm86ZCh7c3RhcnQ6aS5zdGFydERhdGUoKSxlbmQ6aS5lbmREYXRlKCl9LG4pfSkpLGUucHJldmVudERlZmF1bHQoKX19KSksdC5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiYodC5fZWRpdFVzZXJFdmVudHM9bmV3IGEuVXNlckV2ZW50cyh0LmVsZW1lbnQse2ZpbHRlcjpcIi5rLWV2ZW50XCIsdGFwOmZ1bmN0aW9uKG4pe3ZhciBpPWUobi50YXJnZXQpLmNsb3Nlc3QoXCIuay1ldmVudFwiKTtpLmhhc0NsYXNzKFwiay1ldmVudC1hY3RpdmVcIil8fHQudHJpZ2dlcihcImVkaXRcIix7dWlkOmkuYXR0cihhLmF0dHIoXCJ1aWRcIikpfSksbi5wcmV2ZW50RGVmYXVsdCgpfX0pKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8scz10aGlzLmNvbnRlbnQsbD1zLm9mZnNldCgpO2ZvcihlLT1sLmxlZnQsdC09bC50b3AsdGhpcy5faXNSdGw/KG89YS5zdXBwb3J0LmJyb3dzZXIsby5tb3ppbGxhPyhlKz1zWzBdLnNjcm9sbFdpZHRoLXNbMF0ub2Zmc2V0V2lkdGgsZSs9c1swXS5zY3JvbGxMZWZ0KTpvLm1zaWU/KGUtPXMuc2Nyb2xsTGVmdCgpLGUrPXNbMF0uc2Nyb2xsV2lkdGgtdGhpcy5jb250ZW50WzBdLm9mZnNldFdpZHRoKTpvLndlYmtpdCYmKGUrPXNbMF0uc2Nyb2xsTGVmdCkpOmUrPXNbMF0uc2Nyb2xsTGVmdCx0Kz1zWzBdLnNjcm9sbFRvcCxlPU1hdGguY2VpbChlKSx0PU1hdGguY2VpbCh0KSxyPTA7dGhpcy5ncm91cHMubGVuZ3RoPnI7cisrKWlmKGk9dGhpcy5ncm91cHNbcl0sbj1pLnRpbWVTbG90QnlQb3NpdGlvbihlLHQpKXJldHVybiBuO3JldHVybiBudWxsfSxvcHRpb25zOntuYW1lOlwiVGltZWxpbmVWaWV3XCIsdGl0bGU6XCJUaW1lbGluZVwiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9XCIsZGF0ZTphLmRhdGUudG9kYXkoKSxzdGFydFRpbWU6YS5kYXRlLnRvZGF5KCksZW5kVGltZTphLmRhdGUudG9kYXkoKSxzaG93V29ya0hvdXJzOiExLG1pbm9yVGlja0NvdW50OjIsZWRpdGFibGU6ITAsd29ya0RheVN0YXJ0Om5ldyBEYXRlKDE5ODAsMSwxLDgsMCwwKSx3b3JrRGF5RW5kOm5ldyBEYXRlKDE5ODAsMSwxLDE3LDAsMCksd29ya1dlZWtTdGFydDoxLHdvcmtXZWVrRW5kOjUsbWFqb3JUaWNrOjYwLGV2ZW50SGVpZ2h0OjI1LGNvbHVtbldpZHRoOjEwMCxncm91cEhlYWRlclRlbXBsYXRlOlwiIz10ZXh0I1wiLG1ham9yVGltZUhlYWRlclRlbXBsYXRlOlwiIz1rZW5kby50b1N0cmluZyhkYXRlLCAndCcpI1wiLHNsb3RUZW1wbGF0ZTpcIiZuYnNwO1wiLGV2ZW50VGVtcGxhdGU6dixkYXRlSGVhZGVyVGVtcGxhdGU6Xyxmb290ZXI6e2NvbW1hbmQ6XCJ3b3JrRGF5XCJ9LGN1cnJlbnRUaW1lTWFya2VyOnt1cGRhdGVJbnRlcnZhbDoxZTQsdXNlTG9jYWxUaW1lem9uZTohMH0sbWVzc2FnZXM6e2RlZmF1bHRSb3dUZXh0OlwiQWxsIGV2ZW50c1wiLHNob3dGdWxsRGF5OlwiU2hvdyBmdWxsIGRheVwiLHNob3dXb3JrRGF5OlwiU2hvdyBidXNpbmVzcyBob3Vyc1wifX0sZXZlbnRzOltcInJlbW92ZVwiLFwiYWRkXCIsXCJlZGl0XCJdLF90ZW1wbGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1kKHt9LGEuVGVtcGxhdGUsZS50ZW1wbGF0ZVNldHRpbmdzKTt0aGlzLmV2ZW50VGVtcGxhdGU9dGhpcy5fZXZlbnRUbXBsKGUuZXZlbnRUZW1wbGF0ZSx5KSx0aGlzLm1ham9yVGltZUhlYWRlclRlbXBsYXRlPWEudGVtcGxhdGUoZS5tYWpvclRpbWVIZWFkZXJUZW1wbGF0ZSx0KSx0aGlzLmRhdGVIZWFkZXJUZW1wbGF0ZT1hLnRlbXBsYXRlKGUuZGF0ZUhlYWRlclRlbXBsYXRlLHQpLHRoaXMuc2xvdFRlbXBsYXRlPWEudGVtcGxhdGUoZS5zbG90VGVtcGxhdGUsdCksdGhpcy5ncm91cEhlYWRlclRlbXBsYXRlPWEudGVtcGxhdGUoZS5ncm91cEhlYWRlclRlbXBsYXRlLHQpfSxfcmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT1lfHxbXSx0Ll9kYXRlcz1lLHQuX3N0YXJ0RGF0ZT1lWzBdLHQuX2VuZERhdGU9ZVtlLmxlbmd0aC0xfHwwXSx0Ll9jYWxjdWxhdGVTbG90UmFuZ2VzKCksdC5jcmVhdGVMYXlvdXQodC5fbGF5b3V0KGUpKSx0Ll9jb250ZW50KGUpLHQuX2Zvb3RlcigpLHQuX3NldENvbnRlbnRXaWR0aCgpLHQucmVmcmVzaExheW91dCgpLHRoaXMudGltZXNIZWFkZXIuZmluZChcInRhYmxlIHRyOmxhc3RcIikuaGlkZSgpLHRoaXMuZGF0ZXNIZWFkZXIuZmluZChcInRhYmxlIHRyOmxhc3RcIikuaGlkZSgpfSxfc2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZW50LHQ9ZS53aWR0aCgpLG49dGhpcy5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSxpPW4uZmluZChcInRyOmZpcnN0XCIpLmNoaWxkcmVuKCkubGVuZ3RoLHI9MTAwLG89aSp0aGlzLm9wdGlvbnMuY29sdW1uV2lkdGg7bz50JiYocj1NYXRoLmNlaWwoby90KjEwMCkpLG4uYWRkKHRoaXMuZGF0ZXNIZWFkZXIuZmluZChcInRhYmxlXCIpKS5jc3MoXCJ3aWR0aFwiLHIrXCIlXCIpfSxfY2FsY3VsYXRlU2xvdFJhbmdlczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5fZGF0ZXMsbz10aGlzLnN0YXJ0VGltZSgpLHM9dGhpcy5lbmRUaW1lKCk7Zm9yKHAocyk9PT1wKGEuZGF0ZS5nZXREYXRlKHMpKSYmKHM9YS5kYXRlLmdldERhdGUocyksbChzLGYtMSkpLHM9cChzKSxvPXAobyksZT1bXSx0PTA7ci5sZW5ndGg+dDt0Kyspbj1oKHJbdF0pLGwobixvKSxpPWgoclt0XSksbChpLHMpLGUucHVzaCh7c3RhcnQ6YS5kYXRlLnRvVXRjVGltZShuKSxlbmQ6YS5kYXRlLnRvVXRjVGltZShpKX0pO3RoaXMuX3Nsb3RSYW5nZXM9ZX0sX2ZvclRpbWVSYW5nZTpmdW5jdGlvbihlLHQsaSxyKXt2YXIgbyxhLHMsYyxkLHUsaCxtLHYsXyx5LHcsYixrLHgsQyxTLFQ7Zm9yKGU9bihlKSx0PW4odCksbz10aGlzLGE9cChlKSxzPXAodCksYz1vLm9wdGlvbnMubWlub3JUaWNrQ291bnQsZD1vLm9wdGlvbnMubWFqb3JUaWNrKmcsdT1kL2N8fDEsaD1uZXcgRGF0ZSgrZSksbT1oLmdldERhdGUoKSxfPTAsdz1cIlwiLHk9Zi91LGEhPXMmJihhPnMmJihzKz1mKSx5PShzLWEpL3UpLHk9TWF0aC5yb3VuZCh5KTt5Pl87XysrKWI9XyUoZC91KSxrPTA9PT1iLHg9Yy0xPmIsQz1iPT09Yy0xLFM9Yyx5JWMhPT0wJiYoVD1jPnktKF8rMSksayYmVCYmKFM9eSVjKSksdys9aShoLGsseCxDLFMpLGwoaCx1LCExKTtyZXR1cm4gcyYmKHY9cChoKSxtPGguZ2V0RGF0ZSgpJiYodis9Ziksdj5zJiYoaD1uZXcgRGF0ZSgrdCkpKSxyJiYodys9cihoKSksd30sX2xheW91dDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1bXSxzPVtdLGw9dGhpcyxjPVt7dGV4dDpsLm9wdGlvbnMubWVzc2FnZXMuZGVmYXVsdFJvd1RleHR9XSxkPVtdO2Zvcih0PTA7bC5vcHRpb25zLm1pbm9yVGlja0NvdW50PnQ7dCsrKWQucHVzaCh7dGV4dDpcIlwiLGNsYXNzTmFtZTpcIlwifSk7Zm9yKHRoaXMuX2ZvclRpbWVSYW5nZShsLnN0YXJ0VGltZSgpLGwuZW5kVGltZSgpLGZ1bmN0aW9uKGUsdCxuLGksYSl7dmFyIHMsYz1sLm1ham9yVGltZUhlYWRlclRlbXBsYXRlO3QmJihzPXt0ZXh0OmMoe2RhdGU6ZX0pLGNsYXNzTmFtZTppP1wiay1zbG90LWNlbGxcIjpcIlwiLGNvbHVtbnM6ZC5zbGljZSgwLGEpfSxvKHMpLHIucHVzaChzKSl9KSxuPTA7ZS5sZW5ndGg+bjtuKyspcy5wdXNoKHt0ZXh0OmEuZm9ybWF0KFwiezA6bX1cIixlW25dKSxjbGFzc05hbWU6XCJrLXNsb3QtY2VsbFwiLGNvbHVtbnM6ci5zbGljZSgwKX0pO3JldHVybiBpPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxpLmxlbmd0aCYmKFwidmVydGljYWxcIj09PXRoaXMuX2dyb3VwT3JpZW50YXRpb24oKT9jPWwuX2NyZWF0ZVJvd3NMYXlvdXQoaSxudWxsLHRoaXMuZ3JvdXBIZWFkZXJUZW1wbGF0ZSk6cz1sLl9jcmVhdGVDb2x1bW5zTGF5b3V0KGkscyx0aGlzLmdyb3VwSGVhZGVyVGVtcGxhdGUpKSx7Y29sdW1uczpzLHJvd3M6Y319LF9mb290ZXI6ZnVuY3Rpb24oKXt2YXIgdCxuLGkscj10aGlzLm9wdGlvbnM7ci5mb290ZXIhPT0hMSYmKHQ9JzxkaXYgY2xhc3M9XCJrLWhlYWRlciBrLXNjaGVkdWxlci1mb290ZXJcIj4nLG49ci5mb290ZXIuY29tbWFuZCxuJiZcIndvcmtEYXlcIj09PW4/KHQrPSc8dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyXCI+Jyx0Kz0nPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstc2NoZWR1bGVyLWZ1bGxkYXlcIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNsb2NrXCI+PC9zcGFuPicsdCs9KHIuc2hvd1dvcmtIb3Vycz9yLm1lc3NhZ2VzLnNob3dGdWxsRGF5OnIubWVzc2FnZXMuc2hvd1dvcmtEYXkpK1wiPC9hPjwvbGk+XCIsdCs9XCI8L3VsPlwiKTp0Kz1cIiZuYnNwO1wiLHQrPVwiPC9kaXY+XCIsdGhpcy5mb290ZXI9ZSh0KS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLGk9dGhpcyx0aGlzLmZvb3Rlci5vbihcImNsaWNrXCIrbSxcIi5rLXNjaGVkdWxlci1mdWxsZGF5XCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGkudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6aS5uYW1lfHxyLm5hbWUsZGF0ZTppLnN0YXJ0RGF0ZSgpLGlzV29ya0RheTohci5zaG93V29ya0hvdXJzfSl9KSl9LF9jb2x1bW5Db3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1uTGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9yb3dDb3VudEZvckxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm93TGV2ZWxzW2VdO3JldHVybiB0P3QubGVuZ3RoOjB9LF9pc1dvcmtEYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLmdldERheSgpLGk9dGhpcy5fd29ya0RheXM7Zm9yKHQ9MDtpLmxlbmd0aD50O3QrKylpZihpW3RdPT09bilyZXR1cm4hMDtyZXR1cm4hMX0sX2NvbnRlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxzPXRoaXMsbD1zLm9wdGlvbnMsYz1zLnN0YXJ0VGltZSgpLGQ9dGhpcy5lbmRUaW1lKCksdT0xLGg9MSxwPWUubGVuZ3RoLGY9XCJcIixnPXRoaXMuZ3JvdXBlZFJlc291cmNlcyxtPXRoaXMuc2xvdFRlbXBsYXRlLHY9ITE7Zm9yKGcubGVuZ3RoJiYodj1cInZlcnRpY2FsXCI9PT1zLl9ncm91cE9yaWVudGF0aW9uKCksdj9oPXMuX2dyb3VwQ291bnQoKTp1PXMuX2dyb3VwQ291bnQoKSksZis9XCI8dGJvZHk+XCIsdD1mdW5jdGlvbih0KXt2YXIgbyxjPVwiXCIsZD1cIlwiLHU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHMuX3Jlc291cmNlQnlTbG90KHtncm91cEluZGV4OmV9KX19O3JldHVybiBhLmRhdGUuaXNUb2RheShlW3JdKSYmKGQrPVwiay10b2RheVwiKSwoYS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KTxhLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGwud29ya0RheVN0YXJ0KXx8YS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KT49YS5kYXRlLmdldE1pbGxpc2Vjb25kcyhsLndvcmtEYXlFbmQpfHwhcy5faXNXb3JrRGF5KGVbcl0pKSYmKGQrPVwiIGstbm9ud29yay1ob3VyXCIpLGMrPVwiPHRkXCIrKFwiXCIhPT1kPycgY2xhc3M9XCInK2QrJ1wiJzpcIlwiKStcIj5cIixvPWEuZGF0ZS5nZXREYXRlKGVbcl0pLGEuZGF0ZS5zZXRUaW1lKG8sYS5kYXRlLmdldE1pbGxpc2Vjb25kcyh0KSksYys9bSh7ZGF0ZTpvLHJlc291cmNlczp1KHY/bjppKX0pLGMrPVwiPC90ZD5cIn0sbj0wO2g+bjtuKyspe2ZvcihmKz1cIjx0cj5cIixpPTA7dT5pO2krKylmb3Iocj0wLG89cDtvPnI7cisrKWYrPXRoaXMuX2ZvclRpbWVSYW5nZShjLGQsdCk7Zis9XCI8L3RyPlwifWYrPVwiPC90Ym9keT5cIix0aGlzLmNvbnRlbnQuZmluZChcInRhYmxlXCIpLmFwcGVuZChmKX0sX2dyb3VwczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcy5fZ3JvdXBDb3VudCgpLG89dGhpcy5fZGF0ZXMscz1vLmxlbmd0aDtmb3IodGhpcy5ncm91cHM9W10sZT0wO3I+ZTtlKyspdD10aGlzLl9hZGRSZXNvdXJjZVZpZXcoZSksbj1vWzBdLGk9b1tvLmxlbmd0aC0xfHwwXSx0LmFkZFRpbWVTbG90Q29sbGVjdGlvbihuLGEuZGF0ZS5hZGREYXlzKGksMSkpO1xudGhpcy5fdGltZVNsb3RHcm91cHMocixzKX0sX2lzVmVydGljYWxseUdyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVkUmVzb3VyY2VzLmxlbmd0aCYmXCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpfSxfaXNIb3Jpem9udGFsbHlHcm91cGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXBlZFJlc291cmNlcy5sZW5ndGgmJlwiaG9yaXpvbnRhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpfSxfdGltZVNsb3RHcm91cHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHMsbCxjLGQsdSxoLGYsZyxtLHYsXyx5LHcsYj10aGlzLl90aW1lU2xvdEludGVydmFsKCksaz10aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCkseD10aGlzLmNvbnRlbnQuZmluZChcInRyXCIpLEM9eC5sZW5ndGg7Zm9yKHguYXR0cihcInJvbGVcIixcInJvd1wiKSxrJiYoQz1NYXRoLmZsb29yKEMvZSkpLG49MDtlPm47bisrKWZvcihpPTAscj10aGlzLmdyb3Vwc1tuXSxrJiYoaT1uKSxhPWkqQyxzPTAsa3x8KHM9biksbD14W2FdLmNoaWxkcmVuLGM9bC5sZW5ndGgvKGs/MTplKSxkPWMvdCx1PTA7dD51O3UrKylmb3IoaD11KmQrYypzLG89cChuZXcgRGF0ZSgrdGhpcy5zdGFydFRpbWUoKSkpLGY9MDtkPmY7ZisrKWc9bFtmK2hdLG09ci5nZXRUaW1lU2xvdENvbGxlY3Rpb24oMCksdj10aGlzLl9kYXRlc1t1XSxfPURhdGUuVVRDKHYuZ2V0RnVsbFllYXIoKSx2LmdldE1vbnRoKCksdi5nZXREYXRlKCkpLHk9XytvLHc9eStiLGcuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JpZGNlbGxcIiksZy5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITEpLG0uYWRkVGltZVNsb3QoZyx5LHcsITApLG8rPWJ9LHN0YXJ0RGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydERhdGV9LGVuZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kRGF0ZX0sc3RhcnRUaW1lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVybiBlLnNob3dXb3JrSG91cnM/ZS53b3JrRGF5U3RhcnQ6ZS5zdGFydFRpbWV9LGVuZFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUuc2hvd1dvcmtIb3Vycz9lLndvcmtEYXlFbmQ6ZS5lbmRUaW1lfSxfdGltZVNsb3RJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tYWpvclRpY2svZS5taW5vclRpY2tDb3VudCpnfSxuZXh0RGF0ZTpmdW5jdGlvbigpe3JldHVybiBhLmRhdGUubmV4dERheSh0aGlzLmVuZERhdGUoKSl9LHByZXZpb3VzRGF0ZTpmdW5jdGlvbigpe3JldHVybiBhLmRhdGUucHJldmlvdXNEYXkodGhpcy5zdGFydERhdGUoKSl9LGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcihbdGhpcy5vcHRpb25zLmRhdGVdKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBuLHIsbyxzLGwsYztmb3IodGhpcy5faGVhZGVyQ29sdW1uQ291bnQ9MCx0aGlzLl9ncm91cHMoKSx0aGlzLmVsZW1lbnQuZmluZChcIi5rLWV2ZW50XCIpLnJlbW92ZSgpLHQ9bmV3IGEuZGF0YS5RdWVyeSh0KS5zb3J0KFt7ZmllbGQ6XCJzdGFydFwiLGRpcjpcImFzY1wifSx7ZmllbGQ6XCJlbmRcIixkaXI6XCJkZXNjXCJ9XSkudG9BcnJheSgpLG49W10sdGhpcy5fZXZlbnRzQnlSZXNvdXJjZSh0LHRoaXMuZ3JvdXBlZFJlc291cmNlcyxuKSxyPWUubWFwKHRoaXMuX2RhdGVzLGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heC5hcHBseShudWxsLGUubWFwKG4sZnVuY3Rpb24obil7cmV0dXJuIGUuZ3JlcChuLGZ1bmN0aW9uKGUpe3JldHVybiBpKHQsaChlLnN0YXJ0KSxoKGUuZW5kKSl9KS5sZW5ndGh9KSl9KSxvPVtdLHM9MCxsPTA7bi5sZW5ndGg+bDtsKyspYz17Z3JvdXBJbmRleDpsLG1heFJvd0NvdW50OjAsZXZlbnRzOnt9fSxvLnB1c2goYyksdGhpcy5fcmVuZGVyRXZlbnRzKG5bbF0sbCxjKSxjLm1heFJvd0NvdW50PnMmJihzPWMubWF4Um93Q291bnQpO3RoaXMuX3NldFJvd3NIZWlnaHQobyxuLmxlbmd0aCxzKSx0aGlzLl9wb3NpdGlvbkV2ZW50cyhvLG4ubGVuZ3RoKSx0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZVwiKX0sX3Bvc2l0aW9uRXZlbnRzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG87Zm9yKG49MDt0Pm47bisrKXtpPWVbbl0uZXZlbnRzO2ZvcihyIGluIGkpbz1pW3JdLHRoaXMuX3Bvc2l0aW9uRXZlbnQobyl9fSxfc2V0Um93c0hlaWdodDpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHMsbCxjPXRoaXMub3B0aW9ucy5ldmVudEhlaWdodCsyLGQ9dGhpcy5fZ2V0Qm90dG9tUm93T2Zmc2V0KCk7Zm9yKHQ9dGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP3Q6MSxpPTA7dD5pO2krKylyPXRoaXMuX2lzVmVydGljYWxseUdyb3VwZWQoKT9lW2ldLm1heFJvd0NvdW50Om4scj1yP3I6MSxvPShjKzIpKnIrZCxzPXRoaXMudGltZXMuZmluZChhLmZvcm1hdChcInRyOm50aC1jaGlsZCh7MH0pXCIsaSsxKSksbD10aGlzLmNvbnRlbnQuZmluZChhLmZvcm1hdChcInRyOm50aC1jaGlsZCh7MH0pXCIsaSsxKSkscy5oZWlnaHQobyksbC5oZWlnaHQobyk7dGhpcy5fc2V0Q29udGVudFdpZHRoKCksdGhpcy5yZWZyZXNoTGF5b3V0KCksdGhpcy5fcmVmcmVzaFNsb3RzKCl9LF9nZXRCb3R0b21Sb3dPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49LjUqdGhpcy5vcHRpb25zLmV2ZW50SGVpZ2h0LGk9dGhpcy5faXNNb2JpbGUoKTtyZXR1cm4gaT8oZT0zMCx0PTYwKTooZT0xNSx0PTMwKSxuPnQ/bj10OmU+biYmKG49ZSksbn0sX3Bvc2l0aW9uRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMub3B0aW9ucy5ldmVudEhlaWdodCsyLHI9ZS5zbG90UmFuZ2UuaW5uZXJSZWN0KGUuc3RhcnQsZS5lbmQsITEpO3IudG9wPWUuc2xvdFJhbmdlLnN0YXJ0Lm9mZnNldFRvcCx0PXIucmlnaHQtci5sZWZ0LTIsMD50JiYodD0wKSxuPXIubGVmdCx0aGlzLl9pc1J0bCYmKG4tPXRoaXMuY29udGVudFswXS5zY3JvbGxXaWR0aC10aGlzLmNvbnRlbnRbMF0ub2Zmc2V0V2lkdGgpLGUuZWxlbWVudC5jc3Moe3RvcDplLnNsb3RSYW5nZS5zdGFydC5vZmZzZXRUb3ArZS5yb3dJbmRleCooaSsyKStcInB4XCIsbGVmdDpuLHdpZHRoOnR9KX0sX3JlZnJlc2hTbG90czpmdW5jdGlvbigpe2Zvcih2YXIgZT0wO3RoaXMuZ3JvdXBzLmxlbmd0aD5lO2UrKyl0aGlzLmdyb3Vwc1tlXS5yZWZyZXNoKCl9LF9ldmVudHNCeVJlc291cmNlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8scyxsPXRbMF07aWYobClmb3IoaT1sLmRhdGFTb3VyY2UudmlldygpLHI9MDtpLmxlbmd0aD5yO3IrKylvPXRoaXMuX3Jlc291cmNlVmFsdWUobCxpW3JdKSxzPW5ldyBhLmRhdGEuUXVlcnkoZSkuZmlsdGVyKHtmaWVsZDpsLmZpZWxkLG9wZXJhdG9yOmMuZ3JvdXBFcUZpbHRlcihvKX0pLnRvQXJyYXkoKSx0Lmxlbmd0aD4xP3RoaXMuX2V2ZW50c0J5UmVzb3VyY2Uocyx0LnNsaWNlKDEpLG4pOm4ucHVzaChzKTtlbHNlIG4ucHVzaChlKX0sX2lzSW5EYXRlU2xvdDpmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXJ0LG49ZS5lbmQsaT1oKHRoaXMuX3N0YXJ0RGF0ZSkscj1hLmRhdGUuYWRkRGF5cyhoKHRoaXMuX2VuZERhdGUpLDEpO3JldHVybiByPnQmJm4+PWk/ITA6ITF9LF9pc0luVGltZVNsb3Q6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnN0YXJ0VGltZXx8YS5kYXRlLnRvVXRjVGltZShlLnN0YXJ0KSxpPWUuZW5kVGltZXx8YS5kYXRlLnRvVXRjVGltZShlLmVuZCkscj10aGlzLl9zbG90UmFuZ2VzO2ZvcihuPT09aSYmKGkrPTEpLHQ9MDtyLmxlbmd0aD50O3QrKylpZihyW3RdLmVuZD5uJiZpPnJbdF0uc3RhcnQpcmV0dXJuITA7cmV0dXJuITF9LF9hZGp1c3RFdmVudDpmdW5jdGlvbihlKXt2YXIgdCxuPWUuc3RhcnQsaT1lLmVuZCxyPWUuX3RpbWUoXCJzdGFydFwiKSxvPWUuX3RpbWUoXCJlbmRcIikscz1wKHRoaXMuc3RhcnRUaW1lKCkpLGM9cCh0aGlzLmVuZFRpbWUoKSksZD1udWxsLHU9bnVsbCxnPSExLG09ITE7cmV0dXJuIGUuaXNBbGxEYXk/KGQ9aChuKSxzPnImJihsKGQscyksbT0hMCksdT1oKGkpLGM9PT1wKGgodGhpcy5lbmRUaW1lKCkpKT91PWEuZGF0ZS5hZGREYXlzKHUsMSk6KGwodSxjKSxnPSEwKSk6KGM9MD09PWM/ZjpjLHM+cj8oZD1oKG4pLGwoZCxzKSxtPSEwKTpyPmMmJihkPWgobiksZD1hLmRhdGUuYWRkRGF5cyhkLDEpLGwoZCxzKSxtPSEwKSxvPmM/KHU9aChpKSxsKHUsYyksZz0hMCk6cz5vJiYodT1oKGkpLHU9YS5kYXRlLmFkZERheXModSwtMSksbCh1LGMpLGc9ITApKSx0PWUuY2xvbmUoe3N0YXJ0OmQ/ZDpuLGVuZDp1P3U6aSxzdGFydFRpbWU6ZD9hLmRhdGUudG9VdGNUaW1lKGQpOmUuc3RhcnRUaW1lLGVuZFRpbWU6dT9hLmRhdGUudG9VdGNUaW1lKHUpOmUuZW5kVGltZSxpc0FsbERheTohMX0pLHtvY2N1cnJlbmNlOnQsaGVhZDpnLHRhaWw6bX19LF9yZW5kZXJFdmVudHM6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdSxoLHA7Zm9yKHI9MCxvPWUubGVuZ3RoO28+cjtyKyspaT1lW3JdLHRoaXMuX2lzSW5EYXRlU2xvdChpKSYmKGE9aS5pc0FsbERheXx8aS5lbmQuZ2V0VGltZSgpLWkuc3RhcnQuZ2V0VGltZSgpPj1mLHM9dGhpcy5jb250ZW50LChhfHx0aGlzLl9pc0luVGltZVNsb3QoaSkpJiYobD10aGlzLl9hZGp1c3RFdmVudChpKSxjPXRoaXMuZ3JvdXBzW3RdLGMuX2NvbnRpbnVvdXNFdmVudHN8fChjLl9jb250aW51b3VzRXZlbnRzPVtdKSxkPWMuc2xvdFJhbmdlcyhsLm9jY3VycmVuY2UsITEpLHU9ZFswXSx0aGlzLl9pc0luVGltZVNsb3QobC5vY2N1cnJlbmNlKSYmKGg9dGhpcy5fY3JlYXRlRXZlbnRFbGVtZW50KGwub2NjdXJyZW5jZSxpLHUuaGVhZHx8bC5oZWFkLHUudGFpbHx8bC50YWlsKSxoLmFwcGVuZFRvKHMpLmNzcyh7dG9wOjAsaGVpZ2h0OnRoaXMub3B0aW9ucy5ldmVudEhlaWdodH0pLHA9e3N0YXJ0Omwub2NjdXJyZW5jZS5zdGFydFRpbWV8fGwub2NjdXJyZW5jZS5zdGFydCxlbmQ6bC5vY2N1cnJlbmNlLmVuZFRpbWV8fGwub2NjdXJyZW5jZS5lbmQsZWxlbWVudDpoLHVpZDppLnVpZCxzbG90UmFuZ2U6dSxyb3dJbmRleDowLG9mZnNldFRvcDowfSxuLmV2ZW50c1tpLnVpZF09cCx0aGlzLmFkZENvbnRpbnVvdXNFdmVudChjLHUsaCxpLmlzQWxsRGF5KSx0aGlzLl9hcnJhbmdlUm93cyhwLHUsbikpKSl9LGFkZENvbnRpbnVvdXNFdmVudDpmdW5jdGlvbihlLHQsbixpKXt2YXIgcj1lLl9jb250aW51b3VzRXZlbnRzO3IucHVzaCh7ZWxlbWVudDpuLGlzQWxsRGF5OmksdWlkOm4uYXR0cihhLmF0dHIoXCJ1aWRcIikpLHN0YXJ0OnQuc3RhcnQsZW5kOnQuZW5kfSl9LF9jcmVhdGVFdmVudEVsZW1lbnQ6ZnVuY3Rpb24odCxuLGkscil7dmFyIG8scyxsPXRoaXMuZXZlbnRUZW1wbGF0ZSxjPXRoaXMub3B0aW9ucy5lZGl0YWJsZSx1PXRoaXMuX2lzTW9iaWxlKCksaD1jJiZjLmRlc3Ryb3khPT0hMSYmIXUscD1jJiZjLnJlc2l6ZSE9PSExLGY9bi5fdGltZShcInN0YXJ0XCIpLGc9bi5fdGltZShcImVuZFwiKSxtPW4uc3RhcnQsdj1uLmVuZCxfPXRoaXMuZXZlbnRSZXNvdXJjZXMobik7cmV0dXJuIG4uc3RhcnRUaW1lJiYobT1uZXcgRGF0ZShmKSxtPWEudGltZXpvbmUuYXBwbHkobSxcIkV0Yy9VVENcIikpLG4uZW5kVGltZSYmKHY9bmV3IERhdGUoZyksdj1hLnRpbWV6b25lLmFwcGx5KHYsXCJFdGMvVVRDXCIpKSxvPWQoe30se25zOmEubnMscmVzaXphYmxlOnAsc2hvd0RlbGV0ZTpoLGhlYWQ6aSx0YWlsOnIsc2luZ2xlRGF5OjE9PXRoaXMuX2RhdGVzLmxlbmd0aCxyZXNvdXJjZXM6XyxpbnZlcnNlQ29sb3I6XyYmX1swXT90aGlzLl9zaG91bGRJbnZlcnNlUmVzb3VyY2VDb2xvcihfWzBdKTohMX0sbix7c3RhcnQ6bSxlbmQ6dn0pLHM9ZShsKG8pKSx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6cyxkYXRhOlt7ZGF0YUl0ZW06b31dfX0pLHN9LF9hcnJhbmdlUm93czpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLGEscyxsLGQ9dC5zdGFydC5pbmRleCx1PXQuZW5kLmluZGV4LGg9Yy5jb2xsaWRpbmdFdmVudHModC5ldmVudHMoKSxkLHUpO2Zvcih0LmFkZEV2ZW50KHtzbG90SW5kZXg6ZCxzdGFydDpkLGVuZDp1LGVsZW1lbnQ6ZS5lbGVtZW50LHVpZDplLnVpZH0pLGgucHVzaCh7c2xvdEluZGV4OmQsc3RhcnQ6ZCxlbmQ6dSxlbGVtZW50OmUuZWxlbWVudCx1aWQ6ZS51aWR9KSxpPWMuY3JlYXRlUm93cyhoKSxpLmxlbmd0aD5uLm1heFJvd0NvdW50JiYobi5tYXhSb3dDb3VudD1pLmxlbmd0aCkscj0wLG89aS5sZW5ndGg7bz5yO3IrKylmb3IoYT1pW3JdLmV2ZW50cyxzPTAsbD1hLmxlbmd0aDtsPnM7cysrKW4uZXZlbnRzW2Fbc10udWlkXS5yb3dJbmRleD1yfSxfZ3JvdXBDb3VudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ3JvdXBlZFJlc291cmNlcztyZXR1cm4gZS5sZW5ndGg/XCJ2ZXJ0aWNhbFwiPT09dGhpcy5fZ3JvdXBPcmllbnRhdGlvbigpP3RoaXMuX3Jvd0NvdW50Rm9yTGV2ZWwoZS5sZW5ndGgtMSk6dGhpcy5fY29sdW1uQ291bnRGb3JMZXZlbChlLmxlbmd0aC0xKToxfSxfdXBkYXRlRXZlbnRGb3JTZWxlY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWRqdXN0RXZlbnQoZS5jbG9uZSgpKTtyZXR1cm4gdC5vY2N1cnJlbmNlfSxfdXBkYXRlRXZlbnRGb3JNb3ZlOmZ1bmN0aW9uKGUpe2UuaXNBbGxEYXkmJmUuc2V0KFwiaXNBbGxEYXlcIiwhMSl9LF91cGRhdGVFdmVudEZvclJlc2l6ZTpmdW5jdGlvbihlKXtlLmlzQWxsRGF5JiZlLnNldChcImlzQWxsRGF5XCIsITEpfSxfdXBkYXRlTW92ZUhpbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHMsbCxjLGQsdSxoLHAsZj10aGlzLmdyb3Vwc1t0XSxnPWUuY2xvbmUoe3N0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSksbT1nLmR1cmF0aW9uKCk7Zm9yKGcuc3RhcnQ9bmV3IERhdGUoZy5zdGFydC5nZXRUaW1lKCkrbiksZy5lbmQ9bmV3IERhdGUoK2cuc3RhcnQrbSksaT10aGlzLl9hZGp1c3RFdmVudChnKSxyPWYuc2xvdFJhbmdlcyhpLm9jY3VycmVuY2UsITEpLHRoaXMuX3JlbW92ZU1vdmVIaW50KCksbz0wO3IubGVuZ3RoPm87bysrKWE9cltvXSxzPWEuc3RhcnQsbD10aGlzLl9jcmVhdGVFdmVudEVsZW1lbnQoaS5vY2N1cnJlbmNlLGkub2NjdXJyZW5jZSwhMSwhMSksbC5hZGRDbGFzcyhcImstZXZlbnQtZHJhZy1oaW50XCIpLGM9YS5pbm5lclJlY3QoaS5vY2N1cnJlbmNlLnN0YXJ0LGkub2NjdXJyZW5jZS5lbmQsdGhpcy5vcHRpb25zLnNuYXApLGQ9Yy5yaWdodC1jLmxlZnQtMiwwPmQmJihkPTApLHU9Yy5sZWZ0LHRoaXMuX2lzUnRsJiYodS09dGhpcy5jb250ZW50WzBdLnNjcm9sbFdpZHRoLXRoaXMuY29udGVudFswXS5vZmZzZXRXaWR0aCksaD17bGVmdDp1LHRvcDpzLm9mZnNldFRvcCxoZWlnaHQ6cy5vZmZzZXRIZWlnaHQtMix3aWR0aDpkfSxsLmNzcyhoKSx0aGlzLl9tb3ZlSGludD10aGlzLl9tb3ZlSGludC5hZGQobCk7cD10aGlzLmNvbnRlbnQsdGhpcy5fbW92ZUhpbnQuYXBwZW5kVG8ocCl9LF91cGRhdGVSZXNpemVIaW50OmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG8scyxsLGQsdSxoLHAsZixnLG0sdj10aGlzLmdyb3Vwc1t0XSxfPXYucmFuZ2VzKG4saSwhMSwhMSk7Zm9yKHRoaXMuX3JlbW92ZVJlc2l6ZUhpbnQoKSxyPTA7Xy5sZW5ndGg+cjtyKyspbz1fW3JdLHM9by5zdGFydFNsb3QoKSxsPW8uaW5uZXJSZWN0KG4saSwhMSksbC50b3A9cy5vZmZzZXRUb3AsZD1sLnJpZ2h0LWwubGVmdCx1PXMub2Zmc2V0SGVpZ2h0LGg9bC5sZWZ0LHA9dGhpcy5jb250ZW50LHRoaXMuX2lzUnRsJiYoaC09cFswXS5zY3JvbGxXaWR0aC1wWzBdLm9mZnNldFdpZHRoKSxmPWMuZm4uX2NyZWF0ZVJlc2l6ZUhpbnQuY2FsbCh0aGlzLGgsbC50b3AsZCx1KSx0aGlzLl9yZXNpemVIaW50PXRoaXMuX3Jlc2l6ZUhpbnQuYWRkKGYpO2c9XCJ0XCIsbT10aGlzLmNvbnRlbnQsdGhpcy5fcmVzaXplSGludC5hcHBlbmRUbyhtKSx0aGlzLl9yZXNpemVIaW50LmZpbmQoXCIuay1sYWJlbC10b3AsLmstbGFiZWwtYm90dG9tXCIpLnRleHQoXCJcIiksdGhpcy5fcmVzaXplSGludC5maXJzdCgpLmFkZENsYXNzKFwiay1maXJzdFwiKS5maW5kKFwiLmstbGFiZWwtdG9wXCIpLnRleHQoYS50b1N0cmluZyhhLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pLGcpKSx0aGlzLl9yZXNpemVIaW50Lmxhc3QoKS5hZGRDbGFzcyhcImstbGFzdFwiKS5maW5kKFwiLmstbGFiZWwtYm90dG9tXCIpLnRleHQoYS50b1N0cmluZyhhLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpLGcpKX0sc2VsZWN0aW9uQnlFbGVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0KCk7cmV0dXJuIHRoaXMuX3Nsb3RCeVBvc2l0aW9uKHQubGVmdCx0LnRvcCl9LF91cGRhdGVEaXJlY3Rpb246ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgbz10WzBdLnN0YXJ0LGE9dFt0Lmxlbmd0aC0xXS5lbmQ7biYmIXImJm8uaW5kZXg9PT1hLmluZGV4JiZvLmNvbGxlY3Rpb25JbmRleD09PWEuY29sbGVjdGlvbkluZGV4JiYoZS5iYWNrd2FyZD1pKX0sX2NoYW5nZUdyb3VwOmZ1bmN0aW9uKGUsdCl7dmFyIG49dD9cInByZXZHcm91cFNsb3RcIjpcIm5leHRHcm91cFNsb3RcIixpPXRoaXNbbl0oZS5zdGFydCxlLmdyb3VwSW5kZXgsITEpO3JldHVybiBpJiYoZS5ncm91cEluZGV4Kz10Py0xOjEpLGl9LHByZXZHcm91cFNsb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcy5ncm91cHNbdF0sbz1yLnJhbmdlcyhlLGUsbiwhMSlbMF0uc3RhcnQ7aWYoISgwPj10KSlyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP286KGk9ci5fY29sbGVjdGlvbigwLG4pLGkubGFzdCgpKX0sbmV4dEdyb3VwU2xvdDpmdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLmdyb3Vwc1t0XSxvPXIucmFuZ2VzKGUsZSxuLCExKVswXS5zdGFydDtpZighKHQ+PXRoaXMuZ3JvdXBzLmxlbmd0aC0xKSlyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbGx5R3JvdXBlZCgpP286KGk9ci5fY29sbGVjdGlvbigwLG4pLGkuZmlyc3QoKSl9LF92ZXJ0aWNhbFNsb3RzOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPWk/XCJsZWZ0U2xvdFwiOlwicmlnaHRTbG90XCIsbz10WzBdLnN0YXJ0LGE9dFt0Lmxlbmd0aC0xXS5lbmQscz10aGlzLmdyb3Vwc1tlLmdyb3VwSW5kZXhdO3JldHVybiBvPXNbcl0obyksYT1zW3JdKGEpLG58fCF0aGlzLl9pc1ZlcnRpY2FsbHlHcm91cGVkKCl8fG8mJmF8fChvPWE9dGhpcy5fY2hhbmdlR3JvdXAoZSxpKSkse3N0YXJ0U2xvdDpvLGVuZFNsb3Q6YX19LF9ob3Jpem9udGFsU2xvdHM6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9aT9cInVwU2xvdFwiOlwiZG93blNsb3RcIixvPXRbMF0uc3RhcnQsYT10W3QubGVuZ3RoLTFdLmVuZCxzPXRoaXMuZ3JvdXBzW2UuZ3JvdXBJbmRleF07cmV0dXJuIG89c1tyXShvKSxhPXNbcl0oYSksbnx8IXRoaXMuX2lzSG9yaXpvbnRhbGx5R3JvdXBlZCgpfHxvJiZhfHwobz1hPXRoaXMuX2NoYW5nZUdyb3VwKGUsaSkpLHtzdGFydFNsb3Q6byxlbmRTbG90OmF9fSxfY2hhbmdlVmlld1BlcmlvZDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dD90aGlzLnByZXZpb3VzRGF0ZSgpOnRoaXMubmV4dERhdGUoKSxyPWUuc3RhcnQsbz1lLmVuZDtyZXR1cm4gZS5zdGFydD1uZXcgRGF0ZShpKSxlLmVuZD1uZXcgRGF0ZShpKSx0aGlzLl9pc0hvcml6b250YWxseUdyb3VwZWQoKSYmKGUuZ3JvdXBJbmRleD10P3RoaXMuZ3JvdXBzLmxlbmd0aC0xOjApLG49by1yLHQ/KG89cCh0aGlzLmVuZFRpbWUoKSksbz0wPT09bz9mOm8sbChlLnN0YXJ0LG8tbiksbChlLmVuZCxvKSk6KHI9cCh0aGlzLnN0YXJ0VGltZSgpKSxsKGUuc3RhcnQsciksbChlLmVuZCxyK24pKSxlLmV2ZW50cz1bXSwhMH0sbW92ZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHMsbCxjPSExLGQ9dGhpcy5ncm91cHNbZS5ncm91cEluZGV4XSx1PWEua2V5cyxoPWQucmFuZ2VzKGUuc3RhcnQsZS5lbmQsITEsITEpO2lmKHQ9PT11LkRPV058fHQ9PT11LlVQKWM9ITAsbz10PT09dS5VUCx0aGlzLl91cGRhdGVEaXJlY3Rpb24oZSxoLG4sbywhMCkscz10aGlzLl92ZXJ0aWNhbFNsb3RzKGUsaCxuLG8pO2Vsc2UgaWYoISh0IT09dS5MRUZUJiZ0IT09dS5SSUdIVHx8KGM9ITAsbz10PT09dS5MRUZULHRoaXMuX3VwZGF0ZURpcmVjdGlvbihlLGgsbixvLCExKSxzPXRoaXMuX2hvcml6b250YWxTbG90cyhlLGgsbixvKSxzLnN0YXJ0U2xvdCYmcy5lbmRTbG90fHxufHwhdGhpcy5fY2hhbmdlVmlld1BlcmlvZChlLG8sITEpKSkpcmV0dXJuIGM7cmV0dXJuIGMmJihpPXMuc3RhcnRTbG90LHI9cy5lbmRTbG90LG4/KGw9ZS5iYWNrd2FyZCxsJiZpP2Uuc3RhcnQ9aS5zdGFydERhdGUoKTohbCYmciYmKGUuZW5kPXIuZW5kRGF0ZSgpKSk6aSYmciYmKGUuc3RhcnQ9aS5zdGFydERhdGUoKSxlLmVuZD1yLmVuZERhdGUoKSksZS5ldmVudHM9W10pLGN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZWxlbWVudCYmZS5lbGVtZW50Lm9mZihtKSxlLmZvb3RlciYmZS5mb290ZXIucmVtb3ZlKCksZS5fY3VycmVudFRpbWVVcGRhdGVUaW1lciYmY2xlYXJJbnRlcnZhbChlLl9jdXJyZW50VGltZVVwZGF0ZVRpbWVyKSxjLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLl9pc01vYmlsZSgpJiZlLm9wdGlvbnMuZWRpdGFibGUmJihlLm9wdGlvbnMuZWRpdGFibGUuY3JlYXRlIT09ITEmJihlLl9hZGRVc2VyRXZlbnRzLmRlc3Ryb3koKSxlLl9hbGxEYXlVc2VyRXZlbnRzLmRlc3Ryb3koKSksZS5vcHRpb25zLmVkaXRhYmxlLnVwZGF0ZSE9PSExJiZlLl9lZGl0VXNlckV2ZW50cy5kZXN0cm95KCkpfX0pO2QoITAscyx7VGltZWxpbmVWaWV3OncsVGltZWxpbmVXZWVrVmlldzp3LmV4dGVuZCh7b3B0aW9uczp7bmFtZTpcIlRpbWVsaW5lV2Vla1ZpZXdcIix0aXRsZTpcIlRpbWVsaW5lIFdlZWtcIixzZWxlY3RlZERhdGVGb3JtYXQ6XCJ7MDpEfSAtIHsxOkR9XCIsbWFqb3JUaWNrOjEyMH0sbmFtZTpcInRpbWVsaW5lV2Vla1wiLGNhbGN1bGF0ZURhdGVSYW5nZTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLm9wdGlvbnMuZGF0ZSxpPWEuZGF0ZS5kYXlPZldlZWsobix0aGlzLmNhbGVuZGFySW5mbygpLmZpcnN0RGF5LC0xKSxyPVtdO2ZvcihlPTAsdD03O3Q+ZTtlKyspci5wdXNoKGkpLGk9YS5kYXRlLm5leHREYXkoaSk7dGhpcy5fcmVuZGVyKHIpfX0pLFRpbWVsaW5lV29ya1dlZWtWaWV3OncuZXh0ZW5kKHtvcHRpb25zOntuYW1lOlwiVGltZWxpbmVXb3JrV2Vla1ZpZXdcIix0aXRsZTpcIlRpbWVsaW5lIFdvcmsgV2Vla1wiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIixtYWpvclRpY2s6MTIwfSxuYW1lOlwidGltZWxpbmVXb3JrV2Vla1wiLG5leHREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZGF0ZS5kYXlPZldlZWsoYS5kYXRlLm5leHREYXkodGhpcy5lbmREYXRlKCkpLHRoaXMub3B0aW9ucy53b3JrV2Vla1N0YXJ0LDEpfSxwcmV2aW91c0RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5kYXRlLnByZXZpb3VzRGF5KHRoaXMuc3RhcnREYXRlKCkpfSxjYWxjdWxhdGVEYXRlUmFuZ2U6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5vcHRpb25zLmRhdGUsdD1hLmRhdGUuZGF5T2ZXZWVrKGUsdGhpcy5vcHRpb25zLndvcmtXZWVrU3RhcnQsLTEpLG49YS5kYXRlLmRheU9mV2Vlayh0LHRoaXMub3B0aW9ucy53b3JrV2Vla0VuZCwxKSxpPVtdO24+PXQ7KWkucHVzaCh0KSx0PWEuZGF0ZS5uZXh0RGF5KHQpO3RoaXMuX3JlbmRlcihpKX19KSxUaW1lbGluZU1vbnRoVmlldzp3LmV4dGVuZCh7b3B0aW9uczp7bmFtZTpcIlRpbWVsaW5lTW9udGhWaWV3XCIsdGl0bGU6XCJUaW1lbGluZSBNb250aFwiLHNlbGVjdGVkRGF0ZUZvcm1hdDpcInswOkR9IC0gezE6RH1cIix3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMCwwLDApLGZvb3RlcjohMSxtYWpvclRpY2s6MTQ0MCxtaW5vclRpY2tDb3VudDoxfSxuYW1lOlwidGltZWxpbmVXZWVrXCIsY2FsY3VsYXRlRGF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucy5kYXRlLGk9YS5kYXRlLmZpcnN0RGF5T2ZNb250aChuKSxyPWEuZGF0ZS5sYXN0RGF5T2ZNb250aChuKSxvPVtdO2ZvcihlPTAsdD1yLmdldERhdGUoKTt0PmU7ZSsrKW8ucHVzaChpKSxpPWEuZGF0ZS5uZXh0RGF5KGkpO3RoaXMuX3JlbmRlcihvKX19KX0pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0KXtyZXR1cm4gdD10fHxcIlwiLGUuc3RhcnRUaW1lem9uZSYmKHQ9ZS5zdGFydFRpbWV6b25lLGUuZW5kVGltZXpvbmUmJih0Kz1cIiB8IFwiK2UuZW5kVGltZXpvbmUpKSx0fWZ1bmN0aW9uIGkoZSx0KXt2YXIgbj10LnRpbWV6b25lO24mJihlW0EuYXR0cihcInRpbWV6b25lXCIpXT1uKX1mdW5jdGlvbiByKGUsdCl7dmFyIG4saT10Lm1vZGVsLmZpZWxkc1t0LmZpZWxkXS52YWxpZGF0aW9uO2kmJihuPWkuZGF0ZUNvbXBhcmUsbiYmVShuKSYmbi5tZXNzYWdlJiYoZVtBLmF0dHIoXCJkYXRlQ29tcGFyZS1tc2dcIildPW4ubWVzc2FnZSkpfWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG49ZShuKSxzKG4sXCJhcHBseVwiLHQpLG58fFtdfX1mdW5jdGlvbiBhKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuJiYoXCJbb2JqZWN0IEFycmF5XVwiPT09Ry5jYWxsKG4pfHxuIGluc3RhbmNlb2YgQS5kYXRhLk9ic2VydmFibGVBcnJheXx8KG49W25dKSkscyhuLFwicmVtb3ZlXCIsdCwhMCksbj1lKG4pLG58fFtdfX1mdW5jdGlvbiBzKGUsdCxuLGkpe3ZhciByLG8sYTtmb3IoZT1lfHxbXSxvPTAsYT1lLmxlbmd0aDthPm87bysrKXI9ZVtvXSxpP3Iuc3RhcnRUaW1lem9uZXx8ci5lbmRUaW1lem9uZT9uPyhyLnN0YXJ0PUEudGltZXpvbmUuY29udmVydChyLnN0YXJ0LHIuc3RhcnRUaW1lem9uZXx8ci5lbmRUaW1lem9uZSxuKSxyLmVuZD1BLnRpbWV6b25lLmNvbnZlcnQoci5lbmQsci5lbmRUaW1lem9uZXx8ci5zdGFydFRpbWV6b25lLG4pLHIuc3RhcnQ9QS50aW1lem9uZVt0XShyLnN0YXJ0LG4pLHIuZW5kPUEudGltZXpvbmVbdF0oci5lbmQsbikpOihyLnN0YXJ0PUEudGltZXpvbmVbdF0oci5zdGFydCxyLnN0YXJ0VGltZXpvbmV8fHIuZW5kVGltZXpvbmUpLHIuZW5kPUEudGltZXpvbmVbdF0oci5lbmQsci5lbmRUaW1lem9uZXx8ci5zdGFydFRpbWV6b25lKSk6biYmKHIuc3RhcnQ9QS50aW1lem9uZVt0XShyLnN0YXJ0LG4pLHIuZW5kPUEudGltZXpvbmVbdF0oci5lbmQsbikpOnIuc3RhcnRUaW1lem9uZXx8ci5lbmRUaW1lem9uZT8oci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lKSxyLmVuZD1BLnRpbWV6b25lW3RdKHIuZW5kLHIuZW5kVGltZXpvbmV8fHIuc3RhcnRUaW1lem9uZSksbiYmKHIuc3RhcnQ9QS50aW1lem9uZS5jb252ZXJ0KHIuc3RhcnQsci5zdGFydFRpbWV6b25lfHxyLmVuZFRpbWV6b25lLG4pLHIuZW5kPUEudGltZXpvbmUuY29udmVydChyLmVuZCxyLmVuZFRpbWV6b25lfHxyLnN0YXJ0VGltZXpvbmUsbikpKTpuJiYoci5zdGFydD1BLnRpbWV6b25lW3RdKHIuc3RhcnQsbiksci5lbmQ9QS50aW1lem9uZVt0XShyLmVuZCxuKSksaSYmZGVsZXRlIHIudWlkO3JldHVybiBlfWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIG4saT1lLmxlbmd0aCxyPTA7aT5yO3IrKylpZihuPWVbcl0sbi51aWQ9PT10KXJldHVybiBufWZ1bmN0aW9uIGMoZSx0LG4pe3JldHVybiBlPW4/QS50aW1lem9uZS5jb252ZXJ0KGUsdCxuKTpBLnRpbWV6b25lLnJlbW92ZShlLHQpfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbixpLHIsbyxhLHMsbCxkLHUsaCxwO3JldHVybiBlLmZpbHRlcihcIltuYW1lPWVuZF1cIikubGVuZ3RoJiYodD1lLmNsb3Nlc3QoXCIuay1zY2hlZHVsZXItZWRpdC1mb3JtXCIpLG49dC5maW5kKFwiW25hbWU9c3RhcnRdOnZpc2libGVcIiksaT10LmZpbmQoXCJbbmFtZT1lbmRdOnZpc2libGVcIiksaVswXSYmblswXSYmKGE9QS53aWRnZXRJbnN0YW5jZShuLEEudWkpLHM9QS53aWRnZXRJbnN0YW5jZShpLEEudWkpLGw9dC5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSxkPWw/bC5vcHRpb25zLm1vZGVsOm51bGwsYSYmcz8ocj1hLnZhbHVlKCksbz1zLnZhbHVlKCkpOihyPUEucGFyc2VEYXRlKG4udmFsKCkpLG89QS5wYXJzZURhdGUoaS52YWwoKSkpLHImJm8pKT8oZCYmKHU9bi5hdHRyKEEuYXR0cihcInRpbWV6b25lXCIpKSxoPWQuc3RhcnRUaW1lem9uZSxwPWQuZW5kVGltZXpvbmUsaD1ofHxwLHA9cHx8aCxoJiYocj1jKHIsaCx1KSxvPWMobyxwLHUpKSksbz49cik6ITB9ZnVuY3Rpb24gdShlLHQsbixpKXtmb3IodmFyIHI9ZS5sZW5ndGgsbz1bXSxhPTA7cj5hO2ErKylvPW8uY29uY2F0KGVbYV0uZXhwYW5kKHQsbixpKSk7cmV0dXJuIG99ZnVuY3Rpb24gaChlKXtyZXR1cm4gZGVsZXRlIGUubmFtZSxkZWxldGUgZS5wcmVmaXgsZGVsZXRlIGUucmVtb3ZlLGRlbGV0ZSBlLmVkaXQsZGVsZXRlIGUuYWRkLGRlbGV0ZSBlLm5hdmlnYXRlLGV9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gZnVuY3Rpb24obil7ZShBLmZvcm1hdCgnPHNlbGVjdCBkYXRhLXswfWJpbmQ9XCJ2YWx1ZTp7MX1cIj4nLEEubnMsdC5maWVsZCkpLmFwcGVuZFRvKG4pLmtlbmRvRHJvcERvd25MaXN0KHtkYXRhVGV4dEZpZWxkOnQuZGF0YVRleHRGaWVsZCxkYXRhVmFsdWVGaWVsZDp0LmRhdGFWYWx1ZUZpZWxkLGRhdGFTb3VyY2U6dC5kYXRhU291cmNlLHZhbHVlUHJpbWl0aXZlOnQudmFsdWVQcmltaXRpdmUsb3B0aW9uTGFiZWw6XCJOb25lXCIsdGVtcGxhdGU6QS5mb3JtYXQoJzxzcGFuIGNsYXNzPVwiay1zY2hlZHVsZXItbWFya1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojPSBkYXRhLnswfT97MH06XCJub25lXCIgI1wiPjwvc3Bhbj4jPXsxfSMnLHQuZGF0YUNvbG9yRmllbGQsdC5kYXRhVGV4dEZpZWxkKX0pfX1mdW5jdGlvbiBmKHQpe3JldHVybiBmdW5jdGlvbihuKXtlKEEuZm9ybWF0KCc8c2VsZWN0IGRhdGEtezB9YmluZD1cInZhbHVlOnsxfVwiPicsQS5ucyx0LmZpZWxkKSkuYXBwZW5kVG8obikua2VuZG9NdWx0aVNlbGVjdCh7ZGF0YVRleHRGaWVsZDp0LmRhdGFUZXh0RmllbGQsZGF0YVZhbHVlRmllbGQ6dC5kYXRhVmFsdWVGaWVsZCxkYXRhU291cmNlOnQuZGF0YVNvdXJjZSx2YWx1ZVByaW1pdGl2ZTp0LnZhbHVlUHJpbWl0aXZlLGl0ZW1UZW1wbGF0ZTpBLmZvcm1hdCgnPHNwYW4gY2xhc3M9XCJrLXNjaGVkdWxlci1tYXJrXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiM9IGRhdGEuezB9P3swfTpcIm5vbmVcIiAjXCI+PC9zcGFuPiM9ezF9IycsdC5kYXRhQ29sb3JGaWVsZCx0LmRhdGFUZXh0RmllbGQpLHRhZ1RlbXBsYXRlOkEuZm9ybWF0KCc8c3BhbiBjbGFzcz1cImstc2NoZWR1bGVyLW1hcmtcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Iz0gZGF0YS57MH0/ezB9Olwibm9uZVwiICNcIj48L3NwYW4+Iz17MX0jJyx0LmRhdGFDb2xvckZpZWxkLHQuZGF0YVRleHRGaWVsZCl9KX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGkscixvPVwiXCIsYT10LmRhdGFTb3VyY2UudmlldygpO2ZvcihpPTAscj1hLmxlbmd0aDtyPmk7aSsrKW8rPUEuZm9ybWF0KCc8b3B0aW9uIHZhbHVlPVwiezB9XCI+ezF9PC9vcHRpb24+JyxBLmdldHRlcih0LmRhdGFWYWx1ZUZpZWxkKShhW2ldKSxBLmdldHRlcih0LmRhdGFUZXh0RmllbGQpKGFbaV0pKTtlKEEuZm9ybWF0KCc8c2VsZWN0IGRhdGEtezB9YmluZD1cInZhbHVlOnsxfVwiIG11bHRpcGxlPVwibXVsdGlwbGVcIiBkYXRhLXswfXZhbHVlLXByaW1pdGl2ZT1cInszfVwiPnsyfTwvc2VsZWN0PicsQS5ucyx0LmZpZWxkLG8sdC52YWx1ZVByaW1pdGl2ZSkpLmFwcGVuZFRvKG4pfX1mdW5jdGlvbiBtKGUsdCl7dmFyIG4saT1lLmVuZC5nZXRUaW1lKCktZS5zdGFydC5nZXRUaW1lKCkscj1uZXcgRGF0ZShlLnN0YXJ0LmdldFRpbWUoKSk7cmV0dXJuIEEuZGF0ZS5zZXRUaW1lKHIsdCksbj1uZXcgRGF0ZShyLmdldFRpbWUoKSksQS5kYXRlLnNldFRpbWUobixpLCEwKSx7c3RhcnQ6cixlbmQ6bn19dmFyIHYsXyx5LHcsYixrLHgsQyxTLFQsRCxBPXdpbmRvdy5rZW5kbyxFPUEuZGF0ZSxNPUEuc3VwcG9ydC5pbnB1dCxQPUUuTVNfUEVSX0RBWSxJPUUuZ2V0RGF0ZSx6PUEuZGF0ZS5nZXRNaWxsaXNlY29uZHMsRj1BLnJlY3VycmVuY2UsUj1BLmtleXMsQj1BLnVpLEw9Qi5XaWRnZXQsTz1cInN0cmluZ1wiLEg9Qi5Qb3B1cCxOPUIuQ2FsZW5kYXIsVj1BLmRhdGEuRGF0YVNvdXJjZSxVPWUuaXNQbGFpbk9iamVjdCxXPWUuZXh0ZW5kLGo9ZS5wcm94eSxHPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcscT1lLmlzQXJyYXksJD1cIi5rZW5kb1NjaGVkdWxlclwiLFk9XCJjbGlja1wiLEs9XCJjaGFuZ2VcIixRPVwiY2FuY2VsXCIsWD1cInJlbW92ZVwiLEo9XCJzYXZlXCIsWj1cImFkZFwiLGV0PVwiZWRpdFwiLHR0PS8oPzp2YWx1ZTpzdGFydHx2YWx1ZTplbmQpKD86LHwkKS8sbnQ9SShuZXcgRGF0ZSksaXQ9XCJyZWN1cnJlbmNlRXhjZXB0aW9uXCIscnQ9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgZXZlbnQ/XCIsb3Q9XCJEbyB5b3Ugd2FudCB0byBkZWxldGUgb25seSB0aGlzIGV2ZW50IG9jY3VycmVuY2Ugb3IgdGhlIHdob2xlIHNlcmllcz9cIixhdD1cIkRvIHlvdSB3YW50IHRvIGVkaXQgb25seSB0aGlzIGV2ZW50IG9jY3VycmVuY2Ugb3IgdGhlIHdob2xlIHNlcmllcz9cIixzdD0nPGEgY2xhc3M9XCJrLWJ1dHRvbiAjPWNsYXNzTmFtZSNcIiAjPWF0dHIjIGhyZWY9XCJcXFxcI1wiPiM9dGV4dCM8L2E+JyxsdD1BLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1mbG9hdHdyYXAgay1oZWFkZXIgay1zY2hlZHVsZXItdG9vbGJhclwiPiMgaWYgKHBkZikgeyAjPHVsIGNsYXNzPVwiay1yZXNldCBrLXNjaGVkdWxlci10b29sc1wiPjxsaT48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXBkZlwiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1wZGZcIj48L3NwYW4+JHttZXNzYWdlcy5wZGZ9PC9hPjwvbGk+PC91bD4jIH0gIzx1bCBjbGFzcz1cImstcmVzZXQgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLWhlYWRlciBrLW5hdi10b2RheVwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPiR7bWVzc2FnZXMudG9kYXl9PC9hPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstaGVhZGVyIGstbmF2LXByZXZcIj48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctd1wiPjwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1oZWFkZXIgay1uYXYtbmV4dFwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy1lXCI+PC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLW5hdi1jdXJyZW50XCI+PGEgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCJcXFxcI1wiIGNsYXNzPVwiay1saW5rXCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWNhbGVuZGFyXCI+PC9zcGFuPjxzcGFuIGRhdGEtIz1ucyNiaW5kPVwidGV4dDogZm9ybWF0dGVkRGF0ZVwiPjwvc3Bhbj48L2E+PC9saT48L3VsPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItdmlld3NcIj4jZm9yKHZhciB2aWV3IGluIHZpZXdzKXsjPGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstdmlldy0jPSB2aWV3LnRvTG93ZXJDYXNlKCkgI1wiIGRhdGEtIz1ucyNuYW1lPVwiIz12aWV3I1wiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPiR7dmlld3Nbdmlld10udGl0bGV9PC9hPjwvbGk+I30jPC91bD48L2Rpdj4nKSxjdD1BLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiay1mbG9hdHdyYXAgay1oZWFkZXIgay1zY2hlZHVsZXItdG9vbGJhclwiPjx1bCBjbGFzcz1cImstcmVzZXQgay1oZWFkZXIgay1zY2hlZHVsZXItbmF2aWdhdGlvblwiPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLW5hdi10b2RheVwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPiR7bWVzc2FnZXMudG9kYXl9PC9hPjwvbGk+PC91bD48dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyIGstc2NoZWR1bGVyLXZpZXdzXCI+I2Zvcih2YXIgdmlldyBpbiB2aWV3cyl7IzxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLXZpZXctIz0gdmlldy50b0xvd2VyQ2FzZSgpICNcIiBkYXRhLSM9bnMjbmFtZT1cIiM9dmlldyNcIj48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj4ke3ZpZXdzW3ZpZXddLnRpdGxlfTwvYT48L2xpPiN9IzwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImstZmxvYXR3cmFwIGstaGVhZGVyIGstc2NoZWR1bGVyLXRvb2xiYXJcIj48dWwgY2xhc3M9XCJrLXJlc2V0IGstaGVhZGVyIGstc2NoZWR1bGVyLW5hdmlnYXRpb25cIj48bGkgY2xhc3M9XCJrLXN0YXRlLWRlZmF1bHQgay1uYXYtcHJldlwiPjxhIHJvbGU9XCJidXR0b25cIiBocmVmPVwiXFxcXCNcIiBjbGFzcz1cImstbGlua1wiPjxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvdy13XCI+PC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz1cImstc3RhdGUtZGVmYXVsdCBrLW5hdi1jdXJyZW50XCI+PHNwYW4gZGF0YS0jPW5zI2JpbmQ9XCJ0ZXh0OiBmb3JtYXR0ZWREYXRlXCI+PC9zcGFuPjwvbGk+PGxpIGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0IGstbmF2LW5leHRcIj48YSByb2xlPVwiYnV0dG9uXCIgaHJlZj1cIlxcXFwjXCIgY2xhc3M9XCJrLWxpbmtcIj48c3BhbiBjbGFzcz1cImstaWNvbiBrLWktYXJyb3ctZVwiPjwvc3Bhbj48L2E+PC9saT48L3VsPjwvZGl2PicpLGR0PWZ1bmN0aW9uKHQsbil7dmFyIG89e25hbWU6bi5maWVsZH0sYT1NLmRhdGU/XCJcIjpBLmF0dHIoXCJyb2xlXCIpKyc9XCJkYXRlcGlja2VyXCIgJyxzPUEuYXR0cihcInJvbGVcIikrJz1cImRhdGV0aW1lcGlja2VyXCIgJyxsPW4ubW9kZWwuaXNBbGxEYXksYz1BLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIj0nXCIrIWwrXCInXCIsZD1BLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIj0nXCIrbCtcIidcIjtpKG8sbikscihvLG4pLGUoJzxpbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiByZXF1aXJlZCAnK0EuYXR0cihcInR5cGVcIikrJz1cImRhdGVcIiAnK3MrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKycsaW52aXNpYmxlOmlzQWxsRGF5XCIgJytjK1wiLz5cIikuYXR0cihvKS5hcHBlbmRUbyh0KSxlKCc8aW5wdXQgdHlwZT1cImRhdGVcIiByZXF1aXJlZCAnK0EuYXR0cihcInR5cGVcIikrJz1cImRhdGVcIiAnK2ErQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKycsdmlzaWJsZTppc0FsbERheVwiICcrZCtcIi8+XCIpLmF0dHIobykuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK0EuYXR0cihcImZvclwiKSsnPVwiJytuLmZpZWxkKydcIiBjbGFzcz1cImstaW52YWxpZC1tc2dcIi8+JykuaGlkZSgpLmFwcGVuZFRvKHQpfSx1dD1mdW5jdGlvbih0LG4pe3ZhciBvPXtuYW1lOm4uZmllbGR9LGE9bi5tb2RlbC5pc0FsbERheSxzPUEuYXR0cihcInZhbGlkYXRlXCIpK1wiPSdcIishYStcIicgXCIsbD1BLmF0dHIoXCJ2YWxpZGF0ZVwiKStcIj0nXCIrYStcIicgXCI7aShvLG4pLHIobyxuKSxlKCc8aW5wdXQgdHlwZT1cInRleHRcIiByZXF1aXJlZCAnK0EuYXR0cihcInR5cGVcIikrJz1cImRhdGVcIiAnK0EuYXR0cihcInJvbGVcIikrJz1cImRhdGV0aW1lcGlja2VyXCIgJytBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJyxpbnZpc2libGU6aXNBbGxEYXlcIiAnK3MrXCIvPlwiKS5hdHRyKG8pLmFwcGVuZFRvKHQpLGUoJzxpbnB1dCB0eXBlPVwidGV4dFwiIHJlcXVpcmVkICcrQS5hdHRyKFwidHlwZVwiKSsnPVwiZGF0ZVwiICcrQS5hdHRyKFwicm9sZVwiKSsnPVwiZGF0ZXBpY2tlclwiICcrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKycsdmlzaWJsZTppc0FsbERheVwiICcrbCtcIi8+XCIpLmF0dHIobykuYXBwZW5kVG8odCksZShcIjxzcGFuIFwiK0EuYXR0cihcImJpbmRcIikrJz1cInRleHQ6ICcrbi5maWVsZCsnVGltZXpvbmVcIj48L3NwYW4+JykuYXBwZW5kVG8odCksXCJlbmRcIj09PW4uZmllbGQmJmUoXCI8c3BhbiBcIitBLmF0dHIoXCJiaW5kXCIpKyc9XCJ0ZXh0OiBzdGFydFRpbWV6b25lLCBpbnZpc2libGU6IGVuZFRpbWV6b25lXCI+PC9zcGFuPicpLmFwcGVuZFRvKHQpLGUoXCI8c3BhbiBcIitBLmF0dHIoXCJmb3JcIikrJz1cIicrbi5maWVsZCsnXCIgY2xhc3M9XCJrLWludmFsaWQtbXNnXCIvPicpLmhpZGUoKS5hcHBlbmRUbyh0KX0saHQ9ZnVuY3Rpb24odCxuKXtlKFwiPGRpdiBcIitBLmF0dHIoXCJiaW5kXCIpKyc9XCJ2YWx1ZTonK24uZmllbGQrJ1wiIC8+JykuYXR0cih7bmFtZTpuLmZpZWxkfSkuYXBwZW5kVG8odCkua2VuZG9SZWN1cnJlbmNlRWRpdG9yKHtzdGFydDpuLm1vZGVsLnN0YXJ0LHRpbWV6b25lOm4udGltZXpvbmUsbWVzc2FnZXM6bi5tZXNzYWdlc30pfSxwdD1mdW5jdGlvbih0LG4pe2UoXCI8ZGl2IFwiK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnXCIgLz4nKS5hdHRyKHtuYW1lOm4uZmllbGR9KS5hcHBlbmRUbyh0KS5rZW5kb01vYmlsZVJlY3VycmVuY2VFZGl0b3Ioe3N0YXJ0Om4ubW9kZWwuc3RhcnQsdGltZXpvbmU6bi50aW1lem9uZSxtZXNzYWdlczpuLm1lc3NhZ2VzLHBhbmU6bi5wYW5lLHZhbHVlOm4ubW9kZWxbbi5maWVsZF19KX0sZnQ9ZnVuY3Rpb24odCxpKXt2YXIgcj1uKGkubW9kZWwsaS5tZXNzYWdlcy5ub1RpbWV6b25lKTtlKCc8YSBocmVmPVwiI1wiIGNsYXNzPVwiay1idXR0b24gay10aW1lem9uZS1idXR0b25cIiBkYXRhLWJpbmQ9XCJpbnZpc2libGU6aXNBbGxEYXlcIj4nK3IrXCI8L2E+XCIpLmNsaWNrKGkuY2xpY2spLmFwcGVuZFRvKHQpfSxndD1mdW5jdGlvbih0LG4pe2UoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvblwiIGRhdGEtYmluZD1cImludmlzaWJsZTppc0FsbERheVwiPicrbi5tZXNzYWdlcy50aW1lem9uZUVkaXRvckJ1dHRvbitcIjwvYT5cIikuY2xpY2sobi5jbGljaykuYXBwZW5kVG8odCl9LG10PWZ1bmN0aW9uKHQsbil7ZShcIjxkaXYgXCIrQS5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAvPicpLmF0dHIoe25hbWU6bi5maWVsZH0pLnRvZ2dsZShuLnZpc2libGUpLmFwcGVuZFRvKHQpLmtlbmRvTW9iaWxlVGltZXpvbmVFZGl0b3Ioe29wdGlvbkxhYmVsOm4ubm9UaW1lem9uZX0pfSx2dD1mdW5jdGlvbih0LG4pe2UoXCI8ZGl2IFwiK0EuYXR0cihcImJpbmRcIikrJz1cInZhbHVlOicrbi5maWVsZCsnXCIgLz4nKS5hdHRyKHtuYW1lOm4uZmllbGR9KS50b2dnbGUobi52aXNpYmxlKS5hcHBlbmRUbyh0KS5rZW5kb1RpbWV6b25lRWRpdG9yKHtvcHRpb25MYWJlbDpuLm5vVGltZXpvbmV9KX0sX3Q9QS5DbGFzcy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT10LnRpbWV6b25lO3RoaXMucmVhZGVyPW4sbi5tb2RlbCYmKHRoaXMubW9kZWw9bi5tb2RlbCksdGhpcy50aW1lem9uZT1pLHRoaXMuZGF0YT1vKGUucHJveHkodGhpcy5kYXRhLHRoaXMpLGkpLHRoaXMuc2VyaWFsaXplPWEoZS5wcm94eSh0aGlzLnNlcmlhbGl6ZSx0aGlzKSxpKX0sZXJyb3JzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5lcnJvcnMoZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5wYXJzZShlKX0sZGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIuZGF0YShlKX0sdG90YWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLnRvdGFsKGUpfSxncm91cHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVhZGVyLmdyb3VwcyhlKX0sYWdncmVnYXRlczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWFkZXIuYWdncmVnYXRlcyhlKX0sc2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlYWRlci5zZXJpYWxpemUoZSl9fSkseXQ9QS5kYXRhLk1vZGVsLmRlZmluZSh7aW5pdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO0EuZGF0YS5Nb2RlbC5mbi5pbml0LmNhbGwodCxlKSx0Ll9kZWZhdWx0SWQ9dC5kZWZhdWx0c1t0LmlkRmllbGRdfSxfdGltZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzW2VdLG49ZStcIlRpbWVcIjtyZXR1cm4gdGhpc1tuXT90aGlzW25dLUEuZGF0ZS50b1V0Y1RpbWUoQS5kYXRlLmdldERhdGUodCkpOnoodCl9LF9kYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUrXCJUaW1lXCI7cmV0dXJuIHRoaXNbdF0/dGhpc1t0XS10aGlzLl90aW1lKGUpOkEuZGF0ZS5nZXREYXRlKHRoaXNbZV0pfSxjbG9uZTpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMudWlkLHI9bmV3IHRoaXMuY29uc3RydWN0b3IoZS5leHRlbmQoe30sdGhpcy50b0pTT04oKSx0KSk7cmV0dXJuIG58fChyLnVpZD1pKSxyfSxkdXJhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZW5kLHQ9dGhpcy5zdGFydCxuPShlLmdldFRpbWV6b25lT2Zmc2V0KCktdC5nZXRUaW1lem9uZU9mZnNldCgpKSpBLmRhdGUuTVNfUEVSX01JTlVURTtyZXR1cm4gZS10LW59LGV4cGFuZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEY/Ri5leHBhbmQodGhpcyxlLHQsbik6W3RoaXNdfSx1cGRhdGU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5zZXQodCxlW3RdKTt0aGlzLnN0YXJ0VGltZSYmdGhpcy5zZXQoXCJzdGFydFRpbWVcIixBLmRhdGUudG9VdGNUaW1lKHRoaXMuc3RhcnQpKSx0aGlzLmVuZFRpbWUmJnRoaXMuc2V0KFwiZW5kVGltZVwiLEEuZGF0ZS50b1V0Y1RpbWUodGhpcy5lbmQpKX0saXNNdWx0aURheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQWxsRGF5fHx0aGlzLmR1cmF0aW9uKCk+PUEuZGF0ZS5NU19QRVJfREFZfSxpc0V4Y2VwdGlvbjpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTmV3KCkmJnRoaXMucmVjdXJyZW5jZUlkfSxpc09jY3VycmVuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05ldygpJiZ0aGlzLnJlY3VycmVuY2VJZH0saXNSZWN1cnJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLnJlY3VycmVuY2VSdWxlJiYhdGhpcy5yZWN1cnJlbmNlSWQpfSxpc1JlY3VycmVuY2VIZWFkOmZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy5pZHx8IXRoaXMucmVjdXJyZW5jZVJ1bGUpfSx0b09jY3VycmVuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9ZS5leHRlbmQodCx7cmVjdXJyZW5jZUV4Y2VwdGlvbjpudWxsLHJlY3VycmVuY2VSdWxlOm51bGwscmVjdXJyZW5jZUlkOnRoaXMuaWR8fHRoaXMucmVjdXJyZW5jZUlkfSksdFt0aGlzLmlkRmllbGRdPXRoaXMuZGVmYXVsdHNbdGhpcy5pZEZpZWxkXSx0aGlzLmNsb25lKHQsITApfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgZT1BLmRhdGEuTW9kZWwuZm4udG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudWlkPXRoaXMudWlkLGRlbGV0ZSBlLnN0YXJ0VGltZSxkZWxldGUgZS5lbmRUaW1lLGV9LHNob3VsZFNlcmlhbGl6ZTpmdW5jdGlvbihlKXtyZXR1cm4gQS5kYXRhLk1vZGVsLmZuLnNob3VsZFNlcmlhbGl6ZS5jYWxsKHRoaXMsZSkmJlwiX2RlZmF1bHRJZFwiIT09ZX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89dGhpcy5pc0FsbERheXx8ITE7QS5kYXRhLk1vZGVsLmZuLnNldC5jYWxsKHRoaXMsZSx0KSxcImlzQWxsRGF5XCI9PWUmJnQhPW8mJihuPUEuZGF0ZS5nZXREYXRlKHRoaXMuc3RhcnQpLGk9bmV3IERhdGUodGhpcy5lbmQpLHI9QS5kYXRlLmdldE1pbGxpc2Vjb25kcyhpKSwwPT09ciYmdCYmKHI9UCksdGhpcy5zZXQoXCJzdGFydFwiLG4pLHQ9PT0hMD8oQS5kYXRlLnNldFRpbWUoaSwtciksbj5pJiYoaT1uKSk6QS5kYXRlLnNldFRpbWUoaSxQLXIpLHRoaXMuc2V0KFwiZW5kXCIsaSkpfSxpZDpcImlkXCIsZmllbGRzOntpZDp7dHlwZTpcIm51bWJlclwifSx0aXRsZTp7ZGVmYXVsdFZhbHVlOlwiXCIsdHlwZTpcInN0cmluZ1wifSxzdGFydDp7dHlwZTpcImRhdGVcIix2YWxpZGF0aW9uOntyZXF1aXJlZDohMH19LHN0YXJ0VGltZXpvbmU6e3R5cGU6XCJzdHJpbmdcIn0sZW5kOnt0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwLGRhdGVDb21wYXJlOnt2YWx1ZTpkLG1lc3NhZ2U6XCJFbmQgZGF0ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzdGFydCBkYXRlXCJ9fX0sZW5kVGltZXpvbmU6e3R5cGU6XCJzdHJpbmdcIn0scmVjdXJyZW5jZVJ1bGU6e2RlZmF1bHRWYWx1ZTpcIlwiLHR5cGU6XCJzdHJpbmdcIn0scmVjdXJyZW5jZUV4Y2VwdGlvbjp7ZGVmYXVsdFZhbHVlOlwiXCIsdHlwZTpcInN0cmluZ1wifSxpc0FsbERheTp7dHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITF9LGRlc2NyaXB0aW9uOnt0eXBlOlwic3RyaW5nXCJ9fX0pLHd0PVYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe1YuZm4uaW5pdC5jYWxsKHRoaXMsVyghMCx7fSx7c2NoZW1hOnttb2RlbEJhc2U6eXQsbW9kZWw6eXR9fSxlKSksdGhpcy5yZWFkZXI9bmV3IF90KHRoaXMub3B0aW9ucy5zY2hlbWEsdGhpcy5yZWFkZXIpfSxleHBhbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnZpZXcoKSxpPXt9O3JldHVybiBlJiZ0JiYodD1uZXcgRGF0ZSh0LmdldFRpbWUoKStQLTEpLGk9e2xvZ2ljOlwib3JcIixmaWx0ZXJzOlt7bG9naWM6XCJhbmRcIixmaWx0ZXJzOlt7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwiZ3RlXCIsdmFsdWU6ZX0se2ZpZWxkOlwiZW5kXCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfSx7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwibHRlXCIsdmFsdWU6dH1dfSx7bG9naWM6XCJhbmRcIixmaWx0ZXJzOlt7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwibHRlXCIsdmFsdWU6bmV3IERhdGUoZS5nZXRUaW1lKCkrUC0xKX0se2ZpZWxkOlwiZW5kXCIsb3BlcmF0b3I6XCJndGVcIix2YWx1ZTplfV19XX0sbj1uZXcgQS5kYXRhLlF1ZXJ5KHUobixlLHQsdGhpcy5yZWFkZXIudGltZXpvbmUpKS5maWx0ZXIoaSkudG9BcnJheSgpKSxufSxjYW5jZWxDaGFuZ2VzOmZ1bmN0aW9uKGUpe2UmJmUuaXNPY2N1cnJlbmNlKCkmJnRoaXMuX3JlbW92ZUV4Y2VwdGlvbkRhdGUoZSksVi5mbi5jYW5jZWxDaGFuZ2VzLmNhbGwodGhpcyxlKX0saW5zZXJ0OmZ1bmN0aW9uKGUsdCl7aWYodCl7aWYoISh0IGluc3RhbmNlb2YgeXQpKXt2YXIgbj10O3Q9dGhpcy5fY3JlYXRlTmV3TW9kZWwoKSx0LmFjY2VwdChuKX1yZXR1cm4odC5pc1JlY3VycmVuY2VIZWFkKCl8fHQucmVjdXJyZW5jZUlkKSYmKHQ9dC5yZWN1cnJlbmNlSWQ/dDp0LnRvT2NjdXJyZW5jZSgpLHRoaXMuX2FkZEV4Y2VwdGlvbkRhdGUodCkpLFYuZm4uaW5zZXJ0LmNhbGwodGhpcyxlLHQpfX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzUmVjdXJyZW5jZUhlYWQoKT90aGlzLl9yZW1vdmVFeGNlcHRpb25zKGUpOmUuaXNSZWN1cnJpbmcoKSYmdGhpcy5fYWRkRXhjZXB0aW9uRGF0ZShlKSxWLmZuLnJlbW92ZS5jYWxsKHRoaXMsZSl9LF9yZW1vdmVFeGNlcHRpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmRhdGEoKS5zbGljZSgwKSxuPXQuc2hpZnQoKSxpPWUuaWQ7bjspbi5yZWN1cnJlbmNlSWQ9PT1pJiZWLmZuLnJlbW92ZS5jYWxsKHRoaXMsbiksbj10LnNoaWZ0KCk7ZS5zZXQoaXQsXCJcIil9LF9yZW1vdmVFeGNlcHRpb25EYXRlOmZ1bmN0aW9uKGUpe3ZhciB0LG47ZS5yZWN1cnJlbmNlSWQmJih0PXRoaXMuZ2V0KGUucmVjdXJyZW5jZUlkKSx0JiYobj1lLnN0YXJ0LHQuc2V0KGl0LHQucmVjdXJyZW5jZUV4Y2VwdGlvbi5yZXBsYWNlKEYudG9FeGNlcHRpb25TdHJpbmcobix0aGlzLnJlYWRlci50aW1lem9uZSksXCJcIikpKSl9LF9hZGRFeGNlcHRpb25EYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQsbj10aGlzLnJlYWRlci50aW1lem9uZSxpPXRoaXMuZ2V0KGUucmVjdXJyZW5jZUlkKSxyPWkucmVjdXJyZW5jZUV4Y2VwdGlvbnx8XCJcIjtGLmlzRXhjZXB0aW9uKHIsdCxuKXx8aS5zZXQoaXQscitGLnRvRXhjZXB0aW9uU3RyaW5nKHQsbikpfX0pO3d0LmNyZWF0ZT1mdW5jdGlvbihlKXtlPWUmJmUucHVzaD97ZGF0YTplfTplO3ZhciB0PWV8fHt9LG49dC5kYXRhO2lmKHQuZGF0YT1uLCEodCBpbnN0YW5jZW9mIHd0KSYmdCBpbnN0YW5jZW9mIEEuZGF0YS5EYXRhU291cmNlKXRocm93IEVycm9yKFwiSW5jb3JyZWN0IERhdGFTb3VyY2UgdHlwZS4gT25seSBTY2hlZHVsZXJEYXRhU291cmNlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkXCIpO3JldHVybiB0IGluc3RhbmNlb2Ygd3Q/dDpuZXcgd3QodCl9LFcoITAsQS5kYXRhLHtTY2hlZHVsZXJEYXRhU291cmNlOnd0LFNjaGVkdWxlckRhdGFSZWFkZXI6X3QsU2NoZWR1bGVyRXZlbnQ6eXR9KSx2PXt1cGRhdGU6e3RleHQ6XCJTYXZlXCIsY2xhc3NOYW1lOlwiay1wcmltYXJ5IGstc2NoZWR1bGVyLXVwZGF0ZVwifSxjYW5jZWxlZGl0Ont0ZXh0OlwiQ2FuY2VsXCIsY2xhc3NOYW1lOlwiay1zY2hlZHVsZXItY2FuY2VsXCJ9LGRlc3Ryb3k6e3RleHQ6XCJEZWxldGVcIixpbWFnZUNsYXNzOlwiay1kZWxldGVcIixjbGFzc05hbWU6XCJrLXByaW1hcnkgay1zY2hlZHVsZXItZGVsZXRlXCIsaWNvbkNsYXNzOlwiay1pY29uXCJ9fSxfPXttb2JpbGU6e2RhdGVSYW5nZTpkdCx0aW1lem9uZVBvcFVwOmZ0LHRpbWV6b25lOm10LHJlY3VycmVuY2U6cHQsZGVzY3JpcHRpb246Jzx0ZXh0YXJlYSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImstdGV4dGJveFwiLz4nLG11bHRpcGxlUmVzb3VyY2VzOmcscmVzb3VyY2VzOnB9LGRlc2t0b3A6e2RhdGVSYW5nZTp1dCx0aW1lem9uZVBvcFVwOmd0LHRpbWV6b25lOnZ0LHJlY3VycmVuY2U6aHQsZGVzY3JpcHRpb246Jzx0ZXh0YXJlYSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cImstdGV4dGJveFwiLz4nLG11bHRpcGxlUmVzb3VyY2VzOmYscmVzb3VyY2VzOnB9fSx5PUEuT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtBLk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudD1lLHRoaXMub3B0aW9ucz1XKCEwLHt9LHRoaXMub3B0aW9ucyx0KSx0aGlzLmNyZWF0ZUJ1dHRvbj10aGlzLm9wdGlvbnMuY3JlYXRlQnV0dG9uLHRoaXMudG9nZ2xlRGF0ZVZhbGlkYXRpb25IYW5kbGVyPWoodGhpcy5fdG9nZ2xlRGF0ZVZhbGlkYXRpb24sdGhpcyl9LF90b2dnbGVEYXRlVmFsaWRhdGlvbjpmdW5jdGlvbih0KXtpZihcImlzQWxsRGF5XCI9PXQuZmllbGQpe3ZhciBuLGkscixvPXRoaXMuY29udGFpbmVyLGE9dGhpcy5lZGl0YWJsZS5vcHRpb25zLm1vZGVsLmlzQWxsRGF5LHM9QS5hdHRyKFwiYmluZFwiKTtvLmZpbmQoXCJbXCIrcytcIio9ZW5kXSxbXCIrcytcIio9c3RhcnRdXCIpLmVhY2goZnVuY3Rpb24oKXtuPWUodGhpcyksdHQudGVzdChuLmF0dHIocykpJiYoaT1uLmlzKFwiW1wiK0EuYXR0cihcInJvbGVcIikrXCI9ZGF0ZXRpbWVwaWNrZXJdLFt0eXBlKj1kYXRldGltZV1cIikscj1hIT09aSxuLmF0dHIoQS5hdHRyKFwidmFsaWRhdGVcIikscikpfSl9fSxmaWVsZHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9dGhpcyxvPXIub3B0aW9ucy5tZXNzYWdlcyxhPXIub3B0aW9ucy50aW1lem9uZSxzPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxyLl9pbml0VGltZXpvbmVFZGl0b3IodCx0aGlzKX0sbD1be2ZpZWxkOlwidGl0bGVcIix0aXRsZTpvLmVkaXRvci50aXRsZX0se2ZpZWxkOlwic3RhcnRcIix0aXRsZTpvLmVkaXRvci5zdGFydCxlZGl0b3I6ZS5kYXRlUmFuZ2UsdGltZXpvbmU6YX0se2ZpZWxkOlwiZW5kXCIsdGl0bGU6by5lZGl0b3IuZW5kLGVkaXRvcjplLmRhdGVSYW5nZSx0aW1lem9uZTphfSx7ZmllbGQ6XCJpc0FsbERheVwiLHRpdGxlOm8uZWRpdG9yLmFsbERheUV2ZW50fV07QS50aW1lem9uZS53aW5kb3dzX3pvbmVzJiYobC5wdXNoKHtmaWVsZDpcInRpbWV6b25lXCIsdGl0bGU6by5lZGl0b3IudGltZXpvbmUsZWRpdG9yOmUudGltZXpvbmVQb3BVcCxjbGljazpzLG1lc3NhZ2VzOm8uZWRpdG9yLG1vZGVsOnR9KSxsLnB1c2goe2ZpZWxkOlwic3RhcnRUaW1lem9uZVwiLHRpdGxlOm8uZWRpdG9yLnN0YXJ0VGltZXpvbmUsZWRpdG9yOmUudGltZXpvbmUsbm9UaW1lem9uZTpvLmVkaXRvci5ub1RpbWV6b25lfSksbC5wdXNoKHtmaWVsZDpcImVuZFRpbWV6b25lXCIsdGl0bGU6by5lZGl0b3IuZW5kVGltZXpvbmUsZWRpdG9yOmUudGltZXpvbmUsbm9UaW1lem9uZTpvLmVkaXRvci5ub1RpbWV6b25lfSkpLHQucmVjdXJyZW5jZUlkfHxsLnB1c2goe2ZpZWxkOlwicmVjdXJyZW5jZVJ1bGVcIix0aXRsZTpvLmVkaXRvci5yZXBlYXQsZWRpdG9yOmUucmVjdXJyZW5jZSx0aW1lem9uZTphLG1lc3NhZ2VzOm8ucmVjdXJyZW5jZUVkaXRvcixwYW5lOnRoaXMucGFuZX0pLFwiZGVzY3JpcHRpb25cImluIHQmJmwucHVzaCh7ZmllbGQ6XCJkZXNjcmlwdGlvblwiLHRpdGxlOm8uZWRpdG9yLmRlc2NyaXB0aW9uLGVkaXRvcjplLmRlc2NyaXB0aW9ufSk7Zm9yKG49MDt0aGlzLm9wdGlvbnMucmVzb3VyY2VzLmxlbmd0aD5uO24rKylpPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNbbl0sbC5wdXNoKHtmaWVsZDppLmZpZWxkLHRpdGxlOmkudGl0bGUsZWRpdG9yOmkubXVsdGlwbGU/ZS5tdWx0aXBsZVJlc291cmNlcyhpKTplLnJlc291cmNlcyhpKX0pO3JldHVybiBsfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGl0YWJsZS5lbmQoKX0sX2J1aWxkRWRpdFRlbXBsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxsPVcoe30sQS5UZW1wbGF0ZSx0aGlzLm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksYz1sLnBhcmFtTmFtZSxkPXRoaXMub3B0aW9ucy5lZGl0YWJsZS50ZW1wbGF0ZSx1PVwiXCI7aWYoZCl0eXBlb2YgZD09PU8mJihkPXdpbmRvdy51bmVzY2FwZShkKSksdSs9QS50ZW1wbGF0ZShkLGwpKGUpO2Vsc2UgZm9yKGk9MCxyPXQubGVuZ3RoO3I+aTtpKyspbz10W2ldLFwic3RhcnRUaW1lem9uZVwiPT09by5maWVsZCYmKHUrPSc8ZGl2IGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm0gay1zY2hlZHVsZXItZWRpdC1mb3JtIGstc2NoZWR1bGVyLXRpbWV6b25lc1wiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+Jyx1Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1mb3JtLWNvbnRhaW5lclwiPicsdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48L2Rpdj4nLHUrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PGxhYmVsIGNsYXNzPVwiay1jaGVja1wiPjxpbnB1dCBjbGFzcz1cImstdGltZXpvbmUtdG9nZ2xlXCIgdHlwZT1cImNoZWNrYm94XCIgLz4nK3MuZWRpdG9yLnNlcGFyYXRlVGltZXpvbmVzK1wiPC9sYWJlbD48L2Rpdj5cIiksdSs9JzxkaXYgY2xhc3M9XCJrLWVkaXQtbGFiZWxcIj48bGFiZWwgZm9yPVwiJytvLmZpZWxkKydcIj4nKyhvLnRpdGxlfHxvLmZpZWxkfHxcIlwiKStcIjwvbGFiZWw+PC9kaXY+XCIsIWUuZWRpdGFibGV8fGUuZWRpdGFibGUoby5maWVsZCk/KG4ucHVzaChvKSx1Kz1cIjxkaXYgXCIrQS5hdHRyKFwiY29udGFpbmVyLWZvclwiKSsnPVwiJytvLmZpZWxkKydcIiBjbGFzcz1cImstZWRpdC1maWVsZFwiPjwvZGl2PicpOihhPVwiIzpcIixvLmZpZWxkPyhvPUEuZXhwcihvLmZpZWxkLGMpLGErPW8rXCI9PW51bGw/Jyc6XCIrbyk6YSs9XCInJ1wiLGErPVwiI1wiLGE9QS50ZW1wbGF0ZShhLGwpLHUrPSc8ZGl2IGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+JythKGUpK1wiPC9kaXY+XCIpLFwiZW5kVGltZXpvbmVcIj09PW8uZmllbGQmJih1Kz10aGlzLl9jcmVhdGVFbmRUaW1lem9uZUJ1dHRvbigpKTtyZXR1cm4gdX0sX2NyZWF0ZUVuZFRpbWV6b25lQnV0dG9uOmZ1bmN0aW9uKCl7cmV0dXJuXCI8L2Rpdj48L2Rpdj5cIn0sX3JldmVydFRpbWV6b25lczpmdW5jdGlvbihlKXtlLnNldChcInN0YXJ0VGltZXpvbmVcIix0aGlzLl9zdGFydFRpbWV6b25lKSxlLnNldChcImVuZFRpbWV6b25lXCIsdGhpcy5fZW5kVGltZXpvbmUpLGRlbGV0ZSB0aGlzLl9zdGFydFRpbWV6b25lLGRlbGV0ZSB0aGlzLl9lbmRUaW1lem9uZX19KSx3PXkuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7eS5mbi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnBhbmU9QS5tb2JpbGUudWkuUGFuZS53cmFwKHRoaXMuZWxlbWVudCksdGhpcy5wYW5lLmVsZW1lbnQucGFyZW50KCkuY3NzKFwiaGVpZ2h0XCIsdGhpcy5vcHRpb25zLmhlaWdodCksdGhpcy52aWV3PXRoaXMucGFuZS52aWV3KCksdGhpcy5fYWN0aW9uU2hlZXRCdXR0b25UZW1wbGF0ZT1BLnRlbXBsYXRlKCc8bGk+PGEgIz1hdHRyIyBjbGFzcz1cImstYnV0dG9uICM9Y2xhc3NOYW1lI1wiIGhyZWY9XCJcXFxcI1wiPiM6dGV4dCM8L2E+PC9saT4nKSx0aGlzLl9hY3Rpb25TaGVldFBvcHVwT3B0aW9ucz1lKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuaGFzQ2xhc3MoXCJrbS1yb290XCIpP3ttb2RhbDohMX06e2FsaWduOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwiLGVmZmVjdDpcInNsaWRlSW46dXBcIn19LG9wdGlvbnM6e2FuaW1hdGlvbnM6e2xlZnQ6XCJzbGlkZVwiLHJpZ2h0Olwic2xpZGU6cmlnaHRcIn19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCksdGhpcy51bmJpbmQoKSx0aGlzLnBhbmUuZGVzdHJveSgpfSxfaW5pdFRpbWV6b25lRWRpdG9yOmZ1bmN0aW9uKHQpe3ZhciBpLHI9dGhpcyxvPXIucGFuZSxhPXIub3B0aW9ucy5tZXNzYWdlcyxzPXIudGltZXpvbmVWaWV3LGw9ci5jb250YWluZXIuZmluZChcIi5rLXNjaGVkdWxlci10aW1lem9uZXNcIiksYz1sLmZpbmQoXCIuay10aW1lem9uZS10b2dnbGVcIiksZD1sLmZpbmQoXCIuay1lZGl0LWxhYmVsOmxhc3RcIikuYWRkKGwuZmluZChcIi5rLWVkaXQtZmllbGQ6bGFzdFwiKSksdT1mdW5jdGlvbihlKXtpZihcInN0YXJ0VGltZXpvbmVcIj09PWUuZmllbGQpe3ZhciBuPXQuc3RhcnRUaW1lem9uZTtjLnByb3AoXCJkaXNhYmxlZFwiLCFuKSxufHwoZC5oaWRlKCksdC5zZXQoXCJlbmRUaW1lem9uZVwiLFwiXCIpLGMucHJvcChcImNoZWNrZWRcIiwhMSkpfX07ci5fc3RhcnRUaW1lem9uZT10LnN0YXJ0VGltZXpvbmV8fFwiXCIsci5fZW5kVGltZXpvbmU9dC5lbmRUaW1lem9uZXx8XCJcIixzfHwoaT0nPGRpdiBkYXRhLXJvbGU9XCJ2aWV3XCIgY2xhc3M9XCJrLXBvcHVwLWVkaXQtZm9ybSBrLXNjaGVkdWxlci1lZGl0LWZvcm0gay1tb2JpbGUtbGlzdFwiPjxkaXYgZGF0YS1yb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci1jYW5jZWxcIj4nK2EuY2FuY2VsK1wiPC9hPlwiK2EuZWRpdG9yLnRpbWV6b25lVGl0bGUrJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci11cGRhdGVcIj4nK2Euc2F2ZStcIjwvYT48L2Rpdj48L2Rpdj5cIix0aGlzLnRpbWV6b25lVmlldz1zPW8uYXBwZW5kKGkpLHMuY29udGVudEVsZW1lbnQoKS5hcHBlbmQobC5zaG93KCkpLHMuZWxlbWVudC5vbihZKyQsXCIuay1zY2hlZHVsZXItY2FuY2VsLCAuay1zY2hlZHVsZXItdXBkYXRlXCIsZnVuY3Rpb24oaSl7dmFyIHMsbDtpLnByZXZlbnREZWZhdWx0KCksaS5zdG9wUHJvcGFnYXRpb24oKSxlKHRoaXMpLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItY2FuY2VsXCIpJiZyLl9yZXZlcnRUaW1lem9uZXModCksdC51bmJpbmQoXCJjaGFuZ2VcIix1KSxzPW8uZWxlbWVudC5maW5kKFwiI2VkaXRcIikuZGF0YShcImtlbmRvTW9iaWxlVmlld1wiKSxsPW4odCxhLmVkaXRvci5ub1RpbWV6b25lKSxzLmNvbnRlbnRFbGVtZW50KCkuZmluZChcIi5rLXRpbWV6b25lLWJ1dHRvblwiKS50ZXh0KGwpLG8ubmF2aWdhdGUocyxyLm9wdGlvbnMuYW5pbWF0aW9ucy5yaWdodCl9KSxjLmNsaWNrKGZ1bmN0aW9uKCl7ZC50b2dnbGUoYy5wcm9wKFwiY2hlY2tlZFwiKSksdC5zZXQoXCJlbmRUaW1lem9uZVwiLFwiXCIpfSksdC5iaW5kKFwiY2hhbmdlXCIsdSkpLGMucHJvcChcImNoZWNrZWRcIix0LmVuZFRpbWV6b25lKS5wcm9wKFwiZGlzYWJsZWRcIiwhdC5zdGFydFRpbWV6b25lKSx0LmVuZFRpbWV6b25lP2Quc2hvdygpOmQuaGlkZSgpLG8ubmF2aWdhdGUocyxyLm9wdGlvbnMuYW5pbWF0aW9ucy5sZWZ0KX0sX2NyZWF0ZUFjdGlvblNoZWV0QnV0dG9uOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRlbXBsYXRlPXRoaXMuX2FjdGlvblNoZWV0QnV0dG9uVGVtcGxhdGUsdGhpcy5jcmVhdGVCdXR0b24oZSl9LHNob3dEaWFsb2c6ZnVuY3Rpb24odCl7dmFyIG4saSxyPVwiXCIsbz0nPHVsPjxsaSBjbGFzcz1cImttLWFjdGlvbnNoZWV0LXRpdGxlXCI+Jyt0LnRpdGxlK1wiPC9saT5cIixhPXRoaXMuZWxlbWVudC5maW5kKFwiLmstZXZlbnRbXCIrQS5hdHRyKFwidWlkXCIpK1wiPSdcIit0Lm1vZGVsLnVpZCtcIiddXCIpO2Zvcih0aGlzLmNvbnRhaW5lciYmKGE9dGhpcy5jb250YWluZXIuZmluZChcIi5rLXNjaGVkdWxlci1kZWxldGVcIiksYVswXSYmKHI9XCJwaG9uZVwiKSksbj0wO3QuYnV0dG9ucy5sZW5ndGg+bjtuKyspbys9dGhpcy5fY3JlYXRlQWN0aW9uU2hlZXRCdXR0b24odC5idXR0b25zW25dKTtcbm8rPVwiPC91bD5cIixpPWUobykuYXBwZW5kVG8odGhpcy5wYW5lLnZpZXcoKS5lbGVtZW50KS5rZW5kb01vYmlsZUFjdGlvblNoZWV0KHt0eXBlOnIsY2FuY2VsOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5jYW5jZWwsY2FuY2VsVGVtcGxhdGU6JzxsaSBjbGFzcz1cImttLWFjdGlvbnNoZWV0LWNhbmNlbFwiPjxhIGNsYXNzPVwiay1idXR0b25cIiBocmVmPVwiXFxcXCNcIj4jOmNhbmNlbCM8L2E+PC9saT4nLGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCl9LGNvbW1hbmQ6ZnVuY3Rpb24obil7dmFyIHI9aS5lbGVtZW50LmZpbmQoXCJsaTpub3QoLmttLWFjdGlvbnNoZWV0LWNhbmNlbCkgPiAuay1idXR0b25cIikuaW5kZXgoZShuLmN1cnJlbnRUYXJnZXQpKTtyPi0xJiYoaS5jbG9zZSgpLHQuYnV0dG9uc1tyXS5jbGljaygpKX0scG9wdXA6dGhpcy5fYWN0aW9uU2hlZXRQb3B1cE9wdGlvbnN9KS5kYXRhKFwia2VuZG9Nb2JpbGVBY3Rpb25TaGVldFwiKSxpLm9wZW4oYSl9LGVkaXRFdmVudDpmdW5jdGlvbih0KXt2YXIgbixpLHIsbyxhLHM9dGhpcy5wYW5lLGw9XCJcIixjPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxkPWMuc2F2ZSx1PWMuZGVzdHJveSxoPWMuY2FuY2VsLHA9Yy5lZGl0b3IuZWRpdG9yVGl0bGU7cmV0dXJuIGwrPSc8ZGl2IGRhdGEtcm9sZT1cInZpZXdcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstc2NoZWR1bGVyLWVkaXQtZm9ybSBrLW1vYmlsZS1saXN0XCIgaWQ9XCJlZGl0XCIgJytBLmF0dHIoXCJ1aWRcIikrJz1cIicrdC51aWQrJ1wiPjxkaXYgZGF0YS1yb2xlPVwiaGVhZGVyXCIgY2xhc3M9XCJrLWhlYWRlclwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJrLWJ1dHRvbiBrLXNjaGVkdWxlci1jYW5jZWxcIj4nK2grXCI8L2E+XCIrcCsnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImstYnV0dG9uIGstc2NoZWR1bGVyLXVwZGF0ZVwiPicrZCtcIjwvYT48L2Rpdj5cIixuPXRoaXMuZmllbGRzKF8ubW9iaWxlLHQpLGk9dGhpcyxyPVtdLGwrPXRoaXMuX2J1aWxkRWRpdFRlbXBsYXRlKHQsbixyKSwhdC5pc05ldygpJiZ0aGlzLm9wdGlvbnMuZWRpdGFibGUmJnRoaXMub3B0aW9ucy5lZGl0YWJsZS5kZXN0cm95IT09ITEmJihsKz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zXCI+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImstc2NoZWR1bGVyLWRlbGV0ZSBrLWJ1dHRvblwiPicrdStcIjwvYT48L2Rpdj5cIiksbCs9XCI8L2Rpdj5cIixvPXMuYXBwZW5kKGwpLGE9dGhpcy5jb250YWluZXI9by5lbGVtZW50LHRoaXMuZWRpdGFibGU9YS5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6cixtb2RlbDp0LGNsZWFyQ29udGFpbmVyOiExLHRhcmdldDppLm9wdGlvbnMudGFyZ2V0LHZhbGlkYXRlT25CbHVyOiEwfSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksYS5maW5kKFwiaW5wdXRbdHlwZT1jaGVja2JveF0saW5wdXRbdHlwZT1yYWRpb11cIikucGFyZW50KFwiLmstZWRpdC1maWVsZFwiKS5hZGRDbGFzcyhcImstY2hlY2tcIikucHJldihcIi5rLWVkaXQtbGFiZWxcIikuYWRkQ2xhc3MoXCJrLWNoZWNrXCIpLmNsaWNrKGZ1bmN0aW9uKCl7ZSh0aGlzKS5uZXh0KCkuY2hpbGRyZW4oXCJpbnB1dFwiKS5jbGljaygpfSksdGhpcy50cmlnZ2VyKFwiZWRpdFwiLHtjb250YWluZXI6YSxtb2RlbDp0fSk/dGhpcy50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjphLG1vZGVsOnR9KTooYS5vbihZKyQsXCJhLmstc2NoZWR1bGVyLWVkaXQsIGEuay1zY2hlZHVsZXItY2FuY2VsLCBhLmstc2NoZWR1bGVyLXVwZGF0ZSwgYS5rLXNjaGVkdWxlci1kZWxldGVcIixmdW5jdGlvbihuKXt2YXIgcixvO24ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpLHI9ZSh0aGlzKSxyLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItZWRpdFwiKT9zLm5hdmlnYXRlKFwiI2VkaXRcIixpLm9wdGlvbnMuYW5pbWF0aW9ucy5yaWdodCk6KG89XCJjYW5jZWxcIixyLmhhc0NsYXNzKFwiay1zY2hlZHVsZXItdXBkYXRlXCIpP289XCJzYXZlXCI6ci5oYXNDbGFzcyhcImstc2NoZWR1bGVyLWRlbGV0ZVwiKSYmKG89XCJyZW1vdmVcIiksaS50cmlnZ2VyKG8se2NvbnRhaW5lcjphLG1vZGVsOnR9KSl9KSxzLm5hdmlnYXRlKG8saS5vcHRpb25zLmFuaW1hdGlvbnMubGVmdCksdC5iaW5kKFwiY2hhbmdlXCIsaS50b2dnbGVEYXRlVmFsaWRhdGlvbkhhbmRsZXIpKSx0aGlzLmVkaXRhYmxlfSxfdmlld3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5lLmVsZW1lbnQuZmluZChBLnJvbGVTZWxlY3RvcihcInZpZXdcIikpLm5vdCh0aGlzLnZpZXcuZWxlbWVudCl9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk7aWYodGhpcy5jb250YWluZXIpe2Zvcih0aGlzLnBhbmUubmF2aWdhdGUoXCJcIix0aGlzLm9wdGlvbnMuYW5pbWF0aW9ucy5yaWdodCksZT10aGlzLl92aWV3cygpLG49MCxpPWUubGVuZ3RoO2k+bjtuKyspdD1lLmVxKG4pLmRhdGEoXCJrZW5kb01vYmlsZVZpZXdcIiksdCYmdC5wdXJnZSgpO2UucmVtb3ZlKCksdGhpcy5jb250YWluZXI9bnVsbCx0aGlzLmVkaXRhYmxlJiYodGhpcy5lZGl0YWJsZS5vcHRpb25zLm1vZGVsLnVuYmluZChcImNoYW5nZVwiLHRoaXMudG9nZ2xlRGF0ZVZhbGlkYXRpb25IYW5kbGVyKSx0aGlzLmVkaXRhYmxlLmRlc3Ryb3koKSx0aGlzLmVkaXRhYmxlPW51bGwpLHRoaXMudGltZXpvbmVWaWV3PW51bGx9fX0pLGI9eS5leHRlbmQoe2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCksdGhpcy51bmJpbmQoKX0sZWRpdEV2ZW50OmZ1bmN0aW9uKHQpe3ZhciBuLGkscixvPXRoaXMsYT1vLm9wdGlvbnMuZWRpdGFibGUscz1cIjxkaXYgXCIrQS5hdHRyKFwidWlkXCIpKyc9XCInK3QudWlkKydcIiBjbGFzcz1cImstcG9wdXAtZWRpdC1mb3JtIGstc2NoZWR1bGVyLWVkaXQtZm9ybVwiPjxkaXYgY2xhc3M9XCJrLWVkaXQtZm9ybS1jb250YWluZXJcIj4nLGw9by5vcHRpb25zLm1lc3NhZ2VzLGM9bC5zYXZlLGQ9bC5jYW5jZWwsdT1sLmRlc3Ryb3ksaD10aGlzLmZpZWxkcyhfLmRlc2t0b3AsdCkscD1bXTtyZXR1cm4gcys9dGhpcy5fYnVpbGRFZGl0VGVtcGxhdGUodCxoLHApLGk9VShhKT9hLndpbmRvdzp7fSxzKz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPicscys9dGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJ1cGRhdGVcIix0ZXh0OmMsYXR0cjpufSkrdGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxlZGl0XCIsdGV4dDpkLGF0dHI6bn0pLHQuaXNOZXcoKXx8YS5kZXN0cm95PT09ITF8fChzKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcImRlbGV0ZVwiLHRleHQ6dSxhdHRyOm59KSkscys9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIixyPXRoaXMuY29udGFpbmVyPWUocykuYXBwZW5kVG8oby5lbGVtZW50KS5lcSgwKS5rZW5kb1dpbmRvdyhXKHttb2RhbDohMCxyZXNpemFibGU6ITEsZHJhZ2dhYmxlOiEwLHRpdGxlOmwuZWRpdG9yLmVkaXRvclRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oZSl7ZS51c2VyVHJpZ2dlcmVkJiZvLnRyaWdnZXIoUSx7Y29udGFpbmVyOnIsbW9kZWw6dH0pJiZlLnByZXZlbnREZWZhdWx0KCl9fSxpKSksby5lZGl0YWJsZT1yLmtlbmRvRWRpdGFibGUoe2ZpZWxkczpwLG1vZGVsOnQsY2xlYXJDb250YWluZXI6ITEsdmFsaWRhdGVPbkJsdXI6ITAsdGFyZ2V0Om8ub3B0aW9ucy50YXJnZXR9KS5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKSxvLnRyaWdnZXIoZXQse2NvbnRhaW5lcjpyLG1vZGVsOnR9KT9vLnRyaWdnZXIoUSx7Y29udGFpbmVyOnIsbW9kZWw6dH0pOihyLmRhdGEoXCJrZW5kb1dpbmRvd1wiKS5jZW50ZXIoKS5vcGVuKCksci5vbihZKyQsXCJhLmstc2NoZWR1bGVyLWNhbmNlbFwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLG8udHJpZ2dlcihRLHtjb250YWluZXI6cixtb2RlbDp0fSl9KSxyLm9uKFkrJCxcImEuay1zY2hlZHVsZXItdXBkYXRlXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksby50cmlnZ2VyKFwic2F2ZVwiLHtjb250YWluZXI6cixtb2RlbDp0fSl9KSxyLm9uKFkrJCxcImEuay1zY2hlZHVsZXItZGVsZXRlXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksby50cmlnZ2VyKFgse2NvbnRhaW5lcjpyLG1vZGVsOnR9KX0pLHQuYmluZChcImNoYW5nZVwiLG8udG9nZ2xlRGF0ZVZhbGlkYXRpb25IYW5kbGVyKSksby5lZGl0YWJsZX0sY2xvc2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZnVuY3Rpb24oKXtlLmVkaXRhYmxlJiYoZS5lZGl0YWJsZS5vcHRpb25zLm1vZGVsLnVuYmluZChcImNoYW5nZVwiLGUudG9nZ2xlRGF0ZVZhbGlkYXRpb25IYW5kbGVyKSxlLmVkaXRhYmxlLmRlc3Ryb3koKSxlLmVkaXRhYmxlPW51bGwsZS5jb250YWluZXI9bnVsbCksZS5wb3B1cCYmKGUucG9wdXAuZGVzdHJveSgpLGUucG9wdXA9bnVsbCl9O2UuZWRpdGFibGU/KGUuX3RpbWV6b25lUG9wdXAmJmUuX3RpbWV6b25lUG9wdXAuZGF0YShcImtlbmRvV2luZG93XCIpJiYoZS5fdGltZXpvbmVQb3B1cC5kYXRhKFwia2VuZG9XaW5kb3dcIikuZGVzdHJveSgpLGUuX3RpbWV6b25lUG9wdXA9bnVsbCksZS5jb250YWluZXIuaXMoXCI6dmlzaWJsZVwiKT9lLmNvbnRhaW5lci5kYXRhKFwia2VuZG9XaW5kb3dcIikuYmluZChcImRlYWN0aXZhdGVcIix0KS5jbG9zZSgpOnQoKSk6dCgpfSxfY3JlYXRlRW5kVGltZXpvbmVCdXR0b246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMubWVzc2FnZXMsdD1cIlwiO3JldHVybiB0Kz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPicsdCs9dGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJzYXZldGltZXpvbmVcIix0ZXh0OmUuc2F2ZX0pK3RoaXMuY3JlYXRlQnV0dG9uKHtuYW1lOlwiY2FuY2VsdGltZXpvbmVcIix0ZXh0OmUuY2FuY2VsfSksdCs9XCI8L2Rpdj48L2Rpdj48L2Rpdj5cIn0sc2hvd0RpYWxvZzpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz1BLmZvcm1hdChcIjxkaXYgY2xhc3M9J2stcG9wdXAtZWRpdC1mb3JtJz48ZGl2IGNsYXNzPSdrLWVkaXQtZm9ybS1jb250YWluZXInPjxwIGNsYXNzPSdrLXBvcHVwLW1lc3NhZ2UnPnswfTwvcD5cIix0LnRleHQpO2ZvcihvKz0nPGRpdiBjbGFzcz1cImstZWRpdC1idXR0b25zIGstc3RhdGUtZGVmYXVsdFwiPicsbj0wO3QuYnV0dG9ucy5sZW5ndGg+bjtuKyspbys9dGhpcy5jcmVhdGVCdXR0b24odC5idXR0b25zW25dKTtvKz1cIjwvZGl2PjwvZGl2PjwvZGl2PlwiLGk9dGhpcy5lbGVtZW50LHRoaXMucG9wdXAmJnRoaXMucG9wdXAuZGVzdHJveSgpLHI9dGhpcy5wb3B1cD1lKG8pLmFwcGVuZFRvKGkpLmVxKDApLm9uKFwiY2xpY2tcIixcIi5rLWJ1dHRvblwiLGZ1bmN0aW9uKG4pe24ucHJldmVudERlZmF1bHQoKSxyLmNsb3NlKCk7dmFyIGk9ZShuLmN1cnJlbnRUYXJnZXQpLmluZGV4KCk7dC5idXR0b25zW2ldLmNsaWNrKCl9KS5rZW5kb1dpbmRvdyh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMSx0aXRsZTp0LnRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKSxpLmZvY3VzKCl9fSkuZ2V0S2VuZG9XaW5kb3coKSxyLmNlbnRlcigpLm9wZW4oKX0sX2luaXRUaW1lem9uZUVkaXRvcjpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcyxyPWkuY29udGFpbmVyLmZpbmQoXCIuay1zY2hlZHVsZXItdGltZXpvbmVzXCIpLG89ci5maW5kKFwiLmstdGltZXpvbmUtdG9nZ2xlXCIpLGE9ci5maW5kKFwiLmstZWRpdC1sYWJlbDpsYXN0XCIpLmFkZChyLmZpbmQoXCIuay1lZGl0LWZpZWxkOmxhc3RcIikpLHM9ci5maW5kKFwiLmstc2NoZWR1bGVyLXNhdmV0aW1lem9uZVwiKSxsPXIuZmluZChcIi5rLXNjaGVkdWxlci1jYW5jZWx0aW1lem9uZVwiKSxjPWkuX3RpbWV6b25lUG9wdXAsZD1mdW5jdGlvbih0KXtpZihcInN0YXJ0VGltZXpvbmVcIj09PXQuZmllbGQpe3ZhciBuPWUuc3RhcnRUaW1lem9uZTtvLnByb3AoXCJkaXNhYmxlZFwiLCFuKSxufHwoYS5oaWRlKCksZS5zZXQoXCJlbmRUaW1lem9uZVwiLFwiXCIpLG8ucHJvcChcImNoZWNrZWRcIiwhMSkpfX07aS5fc3RhcnRUaW1lem9uZT1lLnN0YXJ0VGltZXpvbmUsaS5fZW5kVGltZXpvbmU9ZS5lbmRUaW1lem9uZSxjfHwoaS5fdGltZXpvbmVQb3B1cD1jPXIua2VuZG9XaW5kb3coe21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITAsdGl0bGU6aS5vcHRpb25zLm1lc3NhZ2VzLmVkaXRvci50aW1lem9uZUVkaXRvclRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24obil7ZS51bmJpbmQoXCJjaGFuZ2VcIixkKSxuLnVzZXJUcmlnZ2VyZWQmJmkuX3JldmVydFRpbWV6b25lcyhlKSx0JiZ0LmZvY3VzKCl9fSksby5jbGljayhmdW5jdGlvbigpe2EudG9nZ2xlKG8ucHJvcChcImNoZWNrZWRcIikpLGUuc2V0KFwiZW5kVGltZXpvbmVcIixcIlwiKX0pLHMuY2xpY2soZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLG4uY2xvc2UoKX0pLGwuY2xpY2soZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLGkuX3JldmVydFRpbWV6b25lcyhlKSxuLmNsb3NlKCl9KSxlLmJpbmQoXCJjaGFuZ2VcIixkKSksby5wcm9wKFwiY2hlY2tlZFwiLGUuZW5kVGltZXpvbmUpLnByb3AoXCJkaXNhYmxlZFwiLCFlLnN0YXJ0VGltZXpvbmUpLGUuZW5kVGltZXpvbmU/YS5zaG93KCk6YS5oaWRlKCksbj1jLmRhdGEoXCJrZW5kb1dpbmRvd1wiKSxuLmNlbnRlcigpLm9wZW4oKX19KSxrPUwuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcztMLmZuLmluaXQuY2FsbChpLHQsbiksaS5vcHRpb25zLnZpZXdzJiZpLm9wdGlvbnMudmlld3MubGVuZ3RofHwoaS5vcHRpb25zLnZpZXdzPVtcImRheVwiLFwid2Vla1wiXSksaS5yZXNvdXJjZXM9W10saS5faW5pdE1vZGVsKCksaS5fd3JhcHBlcigpLGkuX3ZpZXdzKCksaS5fdG9vbGJhcigpLGkuX2RhdGFTb3VyY2UoKSxpLl9yZXNvdXJjZXMoKSxpLl9yZXNpemVIYW5kbGVyPWooaS5yZXNpemUsaSksaS53cmFwcGVyLm9uKFwibW91c2Vkb3duXCIrJCtcIiBzZWxlY3RzdGFydFwiKyQsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSksaS5vcHRpb25zLmVkaXRhYmxlJiZpLm9wdGlvbnMuZWRpdGFibGUucmVzaXplIT09ITEmJmkuX3Jlc2l6YWJsZSgpLGkuX21vdmFibGUoKSxlKHdpbmRvdykub24oXCJyZXNpemVcIiskLGkuX3Jlc2l6ZUhhbmRsZXIpLGkub3B0aW9ucy5tZXNzYWdlcyYmaS5vcHRpb25zLm1lc3NhZ2VzLnJlY3VycmVuY2UmJihGLm9wdGlvbnM9aS5vcHRpb25zLm1lc3NhZ2VzLnJlY3VycmVuY2UpLGkuX3NlbGVjdGFibGUoKSxpLl9hcmlhSWQ9QS5ndWlkKCksaS5fY3JlYXRlRWRpdG9yKCl9LF9pc01vYmlsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5tb2JpbGU9PT0hMCYmQS5zdXBwb3J0Lm1vYmlsZU9TfHxcInBob25lXCI9PT1lLm1vYmlsZXx8XCJ0YWJsZXRcIj09PWUubW9iaWxlfSxfaXNNb2JpbGVQaG9uZVZpZXc6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7cmV0dXJuIGUubW9iaWxlPT09ITAmJkEuc3VwcG9ydC5tb2JpbGVPUyYmIUEuc3VwcG9ydC5tb2JpbGVPUy50YWJsZXR8fFwicGhvbmVcIj09PWUubW9iaWxlfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciB0LG49dGhpcyxpPW4ud3JhcHBlcixyPUEuc3VwcG9ydC5tb2JpbGVPUz9cInRvdWNoZW5kXCI6XCJtb3VzZWRvd25cIjtuLm9wdGlvbnMuc2VsZWN0YWJsZSYmKG4uX3RhYmluZGV4KCksaS5vbihyKyQsXCIuay1zY2hlZHVsZXItaGVhZGVyLWFsbC1kYXkgdGQsIC5rLXNjaGVkdWxlci1jb250ZW50IHRkLCAuay1ldmVudFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUud2hpY2gscj1lLmJ1dHRvbixvPUEuc3VwcG9ydC5icm93c2VyLGE9dCYmMz09PXR8fHImJjI9PXI7QS5zdXBwb3J0Lm1vYmlsZU9TJiZlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoYXx8bi5fY3JlYXRlU2VsZWN0aW9uKGUuY3VycmVudFRhcmdldCksaS5mb2N1cygpLG8ubXNpZSYmOT5vLnZlcnNpb24mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmZvY3VzKCl9KSl9KSx0PWUucHJveHkobi5fbW91c2VNb3ZlLG4pLGkub24oXCJtb3VzZWRvd25cIiskLFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkLCAuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWUud2hpY2gscj1lLmJ1dHRvbixvPW4mJjM9PT1ufHxyJiYyPT1yO298fGkub24oXCJtb3VzZW1vdmVcIiskLFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkLCAuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHQpfSksaS5vbihcIm1vdXNldXBcIiskK1wiIG1vdXNlbGVhdmVcIiskLGZ1bmN0aW9uKCl7aS5vZmYoXCJtb3VzZW1vdmVcIiskLFwiLmstc2NoZWR1bGVyLWhlYWRlci1hbGwtZGF5IHRkLCAuay1zY2hlZHVsZXItY29udGVudCB0ZFwiLHQpfSksaS5vbihcImZvY3VzXCIrJCxmdW5jdGlvbigpe24uX3NlbGVjdGlvbnx8bi5fY3JlYXRlU2VsZWN0aW9uKGUoXCIuay1zY2hlZHVsZXItY29udGVudFwiKS5maW5kKFwidGQ6Zmlyc3RcIikpLG4uX3NlbGVjdCgpfSksaS5vbihcImZvY3Vzb3V0XCIrJCxmdW5jdGlvbigpe24udmlldygpLmNsZWFyU2VsZWN0aW9uKCksbi5fY3RybEtleT1uLl9zaGlmdEtleT0hMX0pLGkub24oXCJrZXlkb3duXCIrJCxqKG4uX2tleWRvd24sbikpLGkub24oXCJrZXl1cFwiKyQsZnVuY3Rpb24oZSl7bi5fY3RybEtleT1lLmN0cmxLZXksbi5fc2hpZnRLZXk9ZS5zaGlmdEtleX0pKX0sX3NlbGVjdDpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcyxvPXIudmlldygpLGE9ci53cmFwcGVyLHM9by5jdXJyZW50KCksbD1yLl9zZWxlY3Rpb247cyYmKHMucmVtb3ZlQXR0cmlidXRlKFwiaWRcIikscy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpLGEucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKSksby5zZWxlY3QobCkscz1vLmN1cnJlbnQoKSxzJiZyLl9vbGQhPT1zJiYodD1sLG49ci5fc2VsZWN0ZWRFdmVudHMoKSxpPW8uX3NlbGVjdGVkU2xvdHMsblswXT8odD1uWzBdfHxsLGU9QS5mb3JtYXQoci5vcHRpb25zLm1lc3NhZ2VzLmFyaWFFdmVudExhYmVsLHQudGl0bGUsdC5zdGFydCx0LnN0YXJ0KSk6ZT1BLmZvcm1hdChyLm9wdGlvbnMubWVzc2FnZXMuYXJpYVNsb3RMYWJlbCx0LnN0YXJ0LHQuZW5kKSxzLnNldEF0dHJpYnV0ZShcImlkXCIsci5fYXJpYUlkKSxzLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixlKSxhLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixyLl9hcmlhSWQpLHIuX29sZD1zLHIudHJpZ2dlcihcImNoYW5nZVwiLHtzdGFydDpsLnN0YXJ0LGVuZDpsLmVuZCxldmVudHM6bixzbG90czppLHJlc291cmNlczpvLl9yZXNvdXJjZUJ5U2xvdChsKX0pKX0sX3NlbGVjdGVkRXZlbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9dGhpcy5fc2VsZWN0aW9uLmV2ZW50cyxuPXQubGVuZ3RoLGk9MCxyPVtdO24+aTtpKyspZT10aGlzLm9jY3VycmVuY2VCeVVpZCh0W2ldKSxlJiZyLnB1c2goZSk7cmV0dXJuIHJ9LF9tb3VzZU1vdmU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztjbGVhclRpbWVvdXQobi5fbW92ZVRpbWVyKSxuLl9tb3ZlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBpLHIsbyxhPW4udmlldygpLHM9bi5fc2VsZWN0aW9uO3MmJihpPWEuc2VsZWN0aW9uQnlFbGVtZW50KGUodC5jdXJyZW50VGFyZ2V0KSksaSYmcy5ncm91cEluZGV4PT09aS5ncm91cEluZGV4JiYocj1pLnN0YXJ0RGF0ZSgpLG89aS5lbmREYXRlKCkscj49cy5lbmQ/cy5iYWNrd2FyZD0hMTpzLnN0YXJ0Pj1vJiYocy5iYWNrd2FyZD0hMCkscy5iYWNrd2FyZD9zLnN0YXJ0PXI6cy5lbmQ9byxuLl9zZWxlY3QoKSkpfSw1KX0sX3ZpZXdCeUluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy52aWV3cztmb3IodCBpbiBuKXtpZighZSlyZXR1cm4gdDtlLS19fSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGk9dC5rZXlDb2RlLHI9bi52aWV3KCksbz1yLm9wdGlvbnMuZWRpdGFibGUsYT1uLl9zZWxlY3Rpb24scz10LnNoaWZ0S2V5O24uX2N0cmxLZXk9dC5jdHJsS2V5LG4uX3NoaWZ0S2V5PXQuc2hpZnRLZXksaT09PVIuVEFCP3IubW92ZVRvRXZlbnQoYSxzKSYmKG4uX3NlbGVjdCgpLHQucHJldmVudERlZmF1bHQoKSk6byYmaT09PVIuRU5URVI/YS5ldmVudHMubGVuZ3RoP28udXBkYXRlIT09ITEmJm4uZWRpdEV2ZW50KGEuZXZlbnRzWzBdKTpvLmNyZWF0ZSE9PSExJiYoYS5pc0FsbERheSYmKGE9ZS5leHRlbmQoe30sYSx7ZW5kOkEuZGF0ZS5hZGREYXlzKGEuZW5kLC0xKX0pKSxuLmFkZEV2ZW50KFcoe30sYSxyLl9yZXNvdXJjZUJ5U2xvdChhKSkpKTppPT09Ui5ERUxFVEUmJm8hPT0hMSYmby5kZXN0cm95IT09ITE/bi5yZW1vdmVFdmVudChhLmV2ZW50c1swXSk6aT49NDkmJjU3Pj1pP24udmlldyhuLl92aWV3QnlJbmRleChpLTQ5KSk6ci5tb3ZlKGEsaSxzKSYmKHIuaW5SYW5nZShhKT9uLl9zZWxlY3QoKTpuLmRhdGUoYS5zdGFydCksdC5wcmV2ZW50RGVmYXVsdCgpKSxuLl9hZGp1c3RTZWxlY3RlZERhdGUoKX0sX2NyZWF0ZVNlbGVjdGlvbjpmdW5jdGlvbih0KXt2YXIgbixpLHI7dGhpcy5fc2VsZWN0aW9uJiYodGhpcy5fY3RybEtleXx8dGhpcy5fc2hpZnRLZXkpfHwodGhpcy5fc2VsZWN0aW9uPXtldmVudHM6W10sZ3JvdXBJbmRleDowfSksdD1lKHQpLHI9dGhpcy5fc2VsZWN0aW9uLG49dC5hdHRyKEEuYXR0cihcInVpZFwiKSksaT10aGlzLnZpZXcoKS5zZWxlY3Rpb25CeUVsZW1lbnQodCksaSYmKHIuZ3JvdXBJbmRleD1pLmdyb3VwSW5kZXh8fDApLG4mJihpPWwodGhpcy5fZGF0YSxuKSksaSYmaS51aWQmJihuPVtpLnVpZF0pLHRoaXMuX3VwZGF0ZVNlbGVjdGlvbihpLG4pLHRoaXMuX2FkanVzdFNlbGVjdGVkRGF0ZSgpfSxfdXBkYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMuX3NlbGVjdGlvbjtlJiZyJiYobj10aGlzLnZpZXcoKSxlLnVpZCYmKGU9bi5fdXBkYXRlRXZlbnRGb3JTZWxlY3Rpb24oZSkpLHRoaXMuX3NoaWZ0S2V5JiZyLnN0YXJ0JiZyLmVuZD8oaT1yLmVuZD5lLmVuZCxyLmVuZD1lLmVuZERhdGU/ZS5lbmREYXRlKCk6ZS5lbmQsaSYmbi5fdGltZVNsb3RJbnRlcnZhbCYmQS5kYXRlLnNldFRpbWUoci5lbmQsLW4uX3RpbWVTbG90SW50ZXJ2YWwoKSkpOihyLnN0YXJ0PWUuc3RhcnREYXRlP2Uuc3RhcnREYXRlKCk6ZS5zdGFydCxyLmVuZD1lLmVuZERhdGU/ZS5lbmREYXRlKCk6ZS5lbmQpLHIuaXNBbGxEYXk9XCJpc0RheVNsb3RcImluIGU/ZS5pc0RheVNsb3Q6ZS5pc0FsbERheSxyLmluZGV4PWUuaW5kZXgsci5ldmVudHM9dGhpcy5fY3RybEtleT9yLmV2ZW50cy5jb25jYXQodHx8W10pOnR8fFtdKX0sb3B0aW9uczp7bmFtZTpcIlNjaGVkdWxlclwiLGRhdGU6bnQsZWRpdGFibGU6ITAsYXV0b0JpbmQ6ITAsc25hcDohMCxtb2JpbGU6ITEsdGltZXpvbmU6XCJcIixhbGxEYXlTbG90OiEwLG1pbjpuZXcgRGF0ZSgxOTAwLDAsMSksbWF4Om5ldyBEYXRlKDIwOTksMTEsMzEpLHRvb2xiYXI6bnVsbCxtZXNzYWdlczp7dG9kYXk6XCJUb2RheVwiLHBkZjpcIkV4cG9ydCB0byBQREZcIixzYXZlOlwiU2F2ZVwiLGNhbmNlbDpcIkNhbmNlbFwiLGRlc3Ryb3k6XCJEZWxldGVcIixkZWxldGVXaW5kb3dUaXRsZTpcIkRlbGV0ZSBldmVudFwiLGFyaWFTbG90TGFiZWw6XCJTZWxlY3RlZCBmcm9tIHswOnR9IHRvIHsxOnR9XCIsYXJpYUV2ZW50TGFiZWw6XCJ7MH0gb24gezE6RH0gYXQgezI6dH1cIix2aWV3czp7ZGF5OlwiRGF5XCIsd2VlazpcIldlZWtcIix3b3JrV2VlazpcIldvcmsgV2Vla1wiLGFnZW5kYTpcIkFnZW5kYVwiLG1vbnRoOlwiTW9udGhcIix0aW1lbGluZTpcIlRpbWVsaW5lXCIsdGltZWxpbmVXZWVrOlwiVGltZWxpbmUgV2Vla1wiLHRpbWVsaW5lV29ya1dlZWs6XCJUaW1lbGluZSBXb3JrIFdlZWtcIix0aW1lbGluZU1vbnRoOlwiVGltZWxpbmUgTW9udGhcIn0scmVjdXJyZW5jZU1lc3NhZ2VzOntkZWxldGVXaW5kb3dUaXRsZTpcIkRlbGV0ZSBSZWN1cnJpbmcgSXRlbVwiLGRlbGV0ZVdpbmRvd09jY3VycmVuY2U6XCJEZWxldGUgY3VycmVudCBvY2N1cnJlbmNlXCIsZGVsZXRlV2luZG93U2VyaWVzOlwiRGVsZXRlIHRoZSBzZXJpZXNcIixlZGl0V2luZG93VGl0bGU6XCJFZGl0IFJlY3VycmluZyBJdGVtXCIsZWRpdFdpbmRvd09jY3VycmVuY2U6XCJFZGl0IGN1cnJlbnQgb2NjdXJyZW5jZVwiLGVkaXRXaW5kb3dTZXJpZXM6XCJFZGl0IHRoZSBzZXJpZXNcIn0sZWRpdG9yOnt0aXRsZTpcIlRpdGxlXCIsc3RhcnQ6XCJTdGFydFwiLGVuZDpcIkVuZFwiLGFsbERheUV2ZW50OlwiQWxsIGRheSBldmVudFwiLGRlc2NyaXB0aW9uOlwiRGVzY3JpcHRpb25cIixyZXBlYXQ6XCJSZXBlYXRcIix0aW1lem9uZTpcIiBcIixzdGFydFRpbWV6b25lOlwiU3RhcnQgdGltZXpvbmVcIixlbmRUaW1lem9uZTpcIkVuZCB0aW1lem9uZVwiLHNlcGFyYXRlVGltZXpvbmVzOlwiVXNlIHNlcGFyYXRlIHN0YXJ0IGFuZCBlbmQgdGltZSB6b25lc1wiLHRpbWV6b25lRWRpdG9yVGl0bGU6XCJUaW1lem9uZXNcIix0aW1lem9uZUVkaXRvckJ1dHRvbjpcIlRpbWUgem9uZVwiLHRpbWV6b25lVGl0bGU6XCJUaW1lIHpvbmVzXCIsbm9UaW1lem9uZTpcIk5vIHRpbWV6b25lXCIsZWRpdG9yVGl0bGU6XCJFdmVudFwifX0saGVpZ2h0Om51bGwsd2lkdGg6bnVsbCxyZXNvdXJjZXM6W10sZ3JvdXA6e3Jlc291cmNlczpbXSxkaXJlY3Rpb246XCJob3Jpem9udGFsXCJ9LHZpZXdzOltdLHNlbGVjdGFibGU6ITF9LGV2ZW50czpbWCxldCxRLEosXCJhZGRcIixcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIixcIm1vdmVTdGFydFwiLFwibW92ZVwiLFwibW92ZUVuZFwiLFwicmVzaXplU3RhcnRcIixcInJlc2l6ZVwiLFwicmVzaXplRW5kXCIsXCJuYXZpZ2F0ZVwiLFwiY2hhbmdlXCJdLGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7TC5mbi5kZXN0cm95LmNhbGwobiksbi5kYXRhU291cmNlJiYobi5kYXRhU291cmNlLnVuYmluZChLLG4uX3JlZnJlc2hIYW5kbGVyKSxuLmRhdGFTb3VyY2UudW5iaW5kKFwicHJvZ3Jlc3NcIixuLl9wcm9ncmVzc0hhbmRsZXIpLG4uZGF0YVNvdXJjZS51bmJpbmQoXCJlcnJvclwiLG4uX2Vycm9ySGFuZGxlcikpLG4uY2FsZW5kYXImJihuLmNhbGVuZGFyLmRlc3Ryb3koKSxuLnBvcHVwLmRlc3Ryb3koKSksbi52aWV3KCkmJm4udmlldygpLmRlc3Ryb3koKSxuLl9lZGl0b3ImJm4uX2VkaXRvci5kZXN0cm95KCksdGhpcy5fbW92ZURyYWdnYWJsZSYmdGhpcy5fbW92ZURyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5fcmVzaXplRHJhZ2dhYmxlJiZ0aGlzLl9yZXNpemVEcmFnZ2FibGUuZGVzdHJveSgpLHQ9bi5lbGVtZW50LmFkZChuLndyYXBwZXIpLmFkZChuLnRvb2xiYXIpLmFkZChuLnBvcHVwKSx0Lm9mZigkKSxjbGVhclRpbWVvdXQobi5fbW92ZVRpbWVyKSxuLl9tb2RlbD1udWxsLG4udG9vbGJhcj1udWxsLG4uZWxlbWVudD1udWxsLGUod2luZG93KS5vZmYoXCJyZXNpemVcIiskLG4uX3Jlc2l6ZUhhbmRsZXIpLEEuZGVzdHJveShuLndyYXBwZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXBwZXIuZmluZChcIi5rLWV2ZW50LCAuay10YXNrXCIpfSxfbW92YWJsZTpmdW5jdGlvbigpe3ZhciBuLGkscixvLGEscyxsPXRoaXMsYz1sLl9pc01vYmlsZSgpLGQ9bC5vcHRpb25zLmVkaXRhYmxlJiZsLm9wdGlvbnMuZWRpdGFibGUubW92ZSE9PSExLHU9bC5vcHRpb25zLmVkaXRhYmxlJiZsLm9wdGlvbnMuZWRpdGFibGUucmVzaXplIT09ITE7KGR8fHUmJmMpJiYobC5fbW92ZURyYWdnYWJsZT1uZXcgQS51aS5EcmFnZ2FibGUobC5lbGVtZW50LHtkaXN0YW5jZTowLGZpbHRlcjpcIi5rLWV2ZW50XCIsaWdub3JlOlwiLmstcmVzaXplLWhhbmRsZVwiLGhvbGRUb0RyYWc6Y30pLGQmJmwuX21vdmVEcmFnZ2FibGUuYmluZChcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGUpe3ZhciBvPWwudmlldygpLGQ9ZS5jdXJyZW50VGFyZ2V0O3JldHVybiBvLm9wdGlvbnMuZWRpdGFibGUmJm8ub3B0aW9ucy5lZGl0YWJsZS5tb3ZlIT09ITE/YyYmIWQuaGFzQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKT8obC5lbGVtZW50LmZpbmQoXCIuay1ldmVudC1hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKSxlLnByZXZlbnREZWZhdWx0KCksdCk6KGE9bC5vY2N1cnJlbmNlQnlVaWQoZC5hdHRyKEEuYXR0cihcInVpZFwiKSkpLHM9YS5jbG9uZSgpLG8uX3VwZGF0ZUV2ZW50Rm9yTW92ZShzKSxuPW8uX3Nsb3RCeVBvc2l0aW9uKGUueC5zdGFydExvY2F0aW9uLGUueS5zdGFydExvY2F0aW9uKSxyPW4uc3RhcnRPZmZzZXQoZS54LnN0YXJ0TG9jYXRpb24sZS55LnN0YXJ0TG9jYXRpb24sbC5vcHRpb25zLnNuYXApLGk9biwoIW58fGwudHJpZ2dlcihcIm1vdmVTdGFydFwiLHtldmVudDphfSkpJiZlLnByZXZlbnREZWZhdWx0KCksdCk6KGUucHJldmVudERlZmF1bHQoKSx0KX0pLmJpbmQoXCJkcmFnXCIsZnVuY3Rpb24oZSl7dmFyIHQsbixjPWwudmlldygpLGQ9Yy5fc2xvdEJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGUueS5sb2NhdGlvbik7ZCYmKG89ZC5zdGFydE9mZnNldChlLngubG9jYXRpb24sZS55LmxvY2F0aW9uLGwub3B0aW9ucy5zbmFwKSx0PW8tcixjLl91cGRhdGVNb3ZlSGludChzLGQuZ3JvdXBJbmRleCx0KSxuPW0ocyx0KSxsLnRyaWdnZXIoXCJtb3ZlXCIse2V2ZW50OmEsc2xvdDp7ZWxlbWVudDpkLmVsZW1lbnQsc3RhcnQ6ZC5zdGFydERhdGUoKSxlbmQ6ZC5lbmREYXRlKCl9LHJlc291cmNlczpjLl9yZXNvdXJjZUJ5U2xvdChkKSxzdGFydDpuLnN0YXJ0LGVuZDpuLmVuZH0pP2MuX3VwZGF0ZU1vdmVIaW50KHMsZC5ncm91cEluZGV4LHQpOmk9ZCl9KS5iaW5kKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKHQpe3ZhciBjLGQsdSxoLHAsZixnO2wudmlldygpLl9yZW1vdmVNb3ZlSGludCgpLGM9by1yLGQ9bShzLGMpLHU9ZC5zdGFydCxoPWQuZW5kLHA9bC52aWV3KCkuX3Jlc291cmNlQnlTbG90KGkpLGY9bC52aWV3KCkuX3Jlc291cmNlQnlTbG90KG4pLGc9bC50cmlnZ2VyKFwibW92ZUVuZFwiLHtldmVudDphLHNsb3Q6e2VsZW1lbnQ6aS5lbGVtZW50LHN0YXJ0Omkuc3RhcnREYXRlKCksZW5kOmkuZW5kRGF0ZSgpfSxzdGFydDp1LGVuZDpoLHJlc291cmNlczpwfSksZ3x8cy5zdGFydC5nZXRUaW1lKCk9PXUuZ2V0VGltZSgpJiZzLmVuZC5nZXRUaW1lKCk9PWguZ2V0VGltZSgpJiZBLnN0cmluZ2lmeShwKT09QS5zdHJpbmdpZnkoZil8fChsLnZpZXcoKS5fdXBkYXRlRXZlbnRGb3JNb3ZlKGEpLGwuX3VwZGF0ZUV2ZW50KG51bGwsYSxlLmV4dGVuZCh7c3RhcnQ6dSxlbmQ6aH0scCkpKSx0LmN1cnJlbnRUYXJnZXQucmVtb3ZlQ2xhc3MoXCJrLWV2ZW50LWFjdGl2ZVwiKSx0aGlzLmNhbmNlbEhvbGQoKX0pLmJpbmQoXCJkcmFnY2FuY2VsXCIsZnVuY3Rpb24oKXtsLnZpZXcoKS5fcmVtb3ZlTW92ZUhpbnQoKSx0aGlzLmNhbmNlbEhvbGQoKX0pLGMmJihsLl9tb3ZlRHJhZ2dhYmxlLmJpbmQoXCJob2xkXCIsZnVuY3Rpb24oZSl7bC5lbGVtZW50LmZpbmQoXCIuay1zY2hlZHVsZXItbW9udGh2aWV3XCIpLmxlbmd0aCYmZS5wcmV2ZW50RGVmYXVsdCgpLGwuZWxlbWVudC5maW5kKFwiLmstZXZlbnQtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiay1ldmVudC1hY3RpdmVcIiksZS5jdXJyZW50VGFyZ2V0LmFkZENsYXNzKFwiay1ldmVudC1hY3RpdmVcIil9KSxsLl9tb3ZlRHJhZ2dhYmxlLnVzZXJFdmVudHMuYmluZChcInByZXNzXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkpKX0sX3Jlc2l6YWJsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbj17XCJrLXJlc2l6ZS1lXCI6XCJlYXN0XCIsXCJrLXJlc2l6ZS13XCI6XCJ3ZXN0XCIsXCJrLXJlc2l6ZS1uXCI6XCJub3J0aFwiLFwiay1yZXNpemUtc1wiOlwic291dGhcIn07Zm9yKHQgaW4gbilpZihlLmhhc0NsYXNzKHQpKXJldHVybiBuW3RdfXZhciBuLGkscixvLGEscz10aGlzO3MuX3Jlc2l6ZURyYWdnYWJsZT1uZXcgQS51aS5EcmFnZ2FibGUocy5lbGVtZW50LHtkaXN0YW5jZTowLGZpbHRlcjpcIi5rLXJlc2l6ZS1oYW5kbGVcIixkcmFnc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIGw9ZSh0LmN1cnJlbnRUYXJnZXQpLGM9bC5jbG9zZXN0KFwiLmstZXZlbnRcIiksZD1jLmF0dHIoQS5hdHRyKFwidWlkXCIpKSx1PXMudmlldygpO3I9cy5vY2N1cnJlbmNlQnlVaWQoZCksbz1yLmNsb25lKCksdS5fdXBkYXRlRXZlbnRGb3JSZXNpemUobyksYT11Ll9zbG90QnlQb3NpdGlvbih0Lnguc3RhcnRMb2NhdGlvbix0Lnkuc3RhcnRMb2NhdGlvbikscy50cmlnZ2VyKFwicmVzaXplU3RhcnRcIix7ZXZlbnQ6cn0pJiZ0LnByZXZlbnREZWZhdWx0KCksbj1BLmRhdGUudG9VdGNUaW1lKG8uc3RhcnQpLGk9QS5kYXRlLnRvVXRjVGltZShvLmVuZCl9LGRyYWc6ZnVuY3Rpb24obCl7dmFyIGMsZCx1LGgscCxmO2EmJihjPWUobC5jdXJyZW50VGFyZ2V0KSxkPXQoYyksdT1zLnZpZXcoKSxoPXUuX3Nsb3RCeVBvc2l0aW9uKGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24pLGgmJmEuZ3JvdXBJbmRleD09aC5ncm91cEluZGV4JiYoYT1oLHA9bixmPWksXCJzb3V0aFwiPT1kPyFhLmlzRGF5U2xvdCYmYS5lbmQtQS5kYXRlLnRvVXRjVGltZShvLnN0YXJ0KT49dS5fdGltZVNsb3RJbnRlcnZhbCgpJiYoaT1vLmlzQWxsRGF5P2Euc3RhcnRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCk6YS5lbmRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCkpOlwibm9ydGhcIj09ZD8hYS5pc0RheVNsb3QmJkEuZGF0ZS50b1V0Y1RpbWUoby5lbmQpLWEuc3RhcnQ+PXUuX3RpbWVTbG90SW50ZXJ2YWwoKSYmKG49YS5zdGFydE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKSk6XCJlYXN0XCI9PWQ/YS5pc0RheVNsb3QmJkEuZGF0ZS50b1V0Y1RpbWUoQS5kYXRlLmdldERhdGUoYS5lbmREYXRlKCkpKT49QS5kYXRlLnRvVXRjVGltZShBLmRhdGUuZ2V0RGF0ZShvLnN0YXJ0KSk/aT1vLmlzQWxsRGF5P2Euc3RhcnRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCk6YS5lbmRPZmZzZXQobC54LmxvY2F0aW9uLGwueS5sb2NhdGlvbixzLm9wdGlvbnMuc25hcCk6IWEuaXNEYXlTbG90JiZhLmVuZC1BLmRhdGUudG9VdGNUaW1lKG8uc3RhcnQpPj11Ll90aW1lU2xvdEludGVydmFsKCkmJihpPWEuZW5kT2Zmc2V0KGwueC5sb2NhdGlvbixsLnkubG9jYXRpb24scy5vcHRpb25zLnNuYXApKTpcIndlc3RcIj09ZCYmKGEuaXNEYXlTbG90JiZBLmRhdGUudG9VdGNUaW1lKEEuZGF0ZS5nZXREYXRlKG8uZW5kKSk+PUEuZGF0ZS50b1V0Y1RpbWUoQS5kYXRlLmdldERhdGUoYS5zdGFydERhdGUoKSkpP249YS5zdGFydE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKTohYS5pc0RheVNsb3QmJkEuZGF0ZS50b1V0Y1RpbWUoby5lbmQpLWEuc3RhcnQ+PXUuX3RpbWVTbG90SW50ZXJ2YWwoKSYmKG49YS5zdGFydE9mZnNldChsLngubG9jYXRpb24sbC55LmxvY2F0aW9uLHMub3B0aW9ucy5zbmFwKSkpLHMudHJpZ2dlcihcInJlc2l6ZVwiLHtldmVudDpyLHNsb3Q6e2VsZW1lbnQ6YS5lbGVtZW50LHN0YXJ0OmEuc3RhcnREYXRlKCksZW5kOmEuZW5kRGF0ZSgpfSxzdGFydDpBLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pLGVuZDpBLnRpbWV6b25lLnRvTG9jYWxEYXRlKGkpLHJlc291cmNlczp1Ll9yZXNvdXJjZUJ5U2xvdChhKX0pPyhuPXAsaT1mKTp1Ll91cGRhdGVSZXNpemVIaW50KG8sYS5ncm91cEluZGV4LG4saSkpKX0sZHJhZ2VuZDpmdW5jdGlvbihsKXt2YXIgYyxkPWUobC5jdXJyZW50VGFyZ2V0KSx1PW5ldyBEYXRlKG8uc3RhcnQuZ2V0VGltZSgpKSxoPW5ldyBEYXRlKG8uZW5kLmdldFRpbWUoKSkscD10KGQpO3MudmlldygpLl9yZW1vdmVSZXNpemVIaW50KCksXCJzb3V0aFwiPT1wP2g9QS50aW1lem9uZS50b0xvY2FsRGF0ZShpKTpcIm5vcnRoXCI9PXA/dT1BLnRpbWV6b25lLnRvTG9jYWxEYXRlKG4pOlwiZWFzdFwiPT1wP2g9YS5pc0RheVNsb3Q/QS5kYXRlLmdldERhdGUoQS50aW1lem9uZS50b0xvY2FsRGF0ZShpKSk6QS50aW1lem9uZS50b0xvY2FsRGF0ZShpKTpcIndlc3RcIj09cCYmKGEuaXNEYXlTbG90Pyh1PW5ldyBEYXRlKEEudGltZXpvbmUudG9Mb2NhbERhdGUobikpLHUuc2V0SG91cnMoMCksdS5zZXRNaW51dGVzKDApKTp1PUEudGltZXpvbmUudG9Mb2NhbERhdGUobikpLGM9cy50cmlnZ2VyKFwicmVzaXplRW5kXCIse2V2ZW50OnIsc2xvdDp7ZWxlbWVudDphLmVsZW1lbnQsc3RhcnQ6YS5zdGFydERhdGUoKSxlbmQ6YS5lbmREYXRlKCl9LHN0YXJ0OnUsZW5kOmgscmVzb3VyY2VzOnMudmlldygpLl9yZXNvdXJjZUJ5U2xvdChhKX0pLCFjJiZoLmdldFRpbWUoKT49dS5nZXRUaW1lKCkmJihvLnN0YXJ0LmdldFRpbWUoKSE9dS5nZXRUaW1lKCl8fG8uZW5kLmdldFRpbWUoKSE9aC5nZXRUaW1lKCkpJiYocy52aWV3KCkuX3VwZGF0ZUV2ZW50Rm9yUmVzaXplKHIpLHMuX3VwZGF0ZUV2ZW50KHAscix7c3RhcnQ6dSxlbmQ6aH0pKSxhPW51bGwscj1udWxsfSxkcmFnY2FuY2VsOmZ1bmN0aW9uKCl7cy52aWV3KCkuX3JlbW92ZVJlc2l6ZUhpbnQoKSxhPW51bGwscj1udWxsfX0pfSxfdXBkYXRlRXZlbnQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1mdW5jdGlvbihlLHQpe3RyeXtpLl9wcmV2ZW50UmVmcmVzaD0hMCxlLnVwZGF0ZShuKSxpLl9jb252ZXJ0RGF0ZXMoZSl9ZmluYWxseXtpLl9wcmV2ZW50UmVmcmVzaD0hMX1pLnRyaWdnZXIoSix7ZXZlbnQ6ZX0pfHwodCYmdCgpLGkuX3VwZGF0ZVNlbGVjdGlvbihlKSxpLmRhdGFTb3VyY2Uuc3luYygpKX0sbz1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZWN1cnJlbmNlUnVsZT9pLmRhdGFTb3VyY2UuZ2V0QnlVaWQoZS51aWQpOmkuZGF0YVNvdXJjZS5nZXQoZS5yZWN1cnJlbmNlSWQpfSxhPWZ1bmN0aW9uKCl7dmFyIGEscyxsPW8odCk7KFwic291dGhcIj09ZXx8XCJub3J0aFwiPT1lKSYmKG4uc3RhcnQmJihhPUEuZGF0ZS5nZXREYXRlKGwuc3RhcnQpLEEuZGF0ZS5zZXRUaW1lKGEseihuLnN0YXJ0KSksbi5zdGFydD1hKSxuLmVuZCYmKHM9QS5kYXRlLmdldERhdGUobC5lbmQpLEEuZGF0ZS5zZXRUaW1lKHMseihuLmVuZCkpLG4uZW5kPXMpKSxpLmRhdGFTb3VyY2UuX3JlbW92ZUV4Y2VwdGlvbnMobCkscihsKX0scz1mdW5jdGlvbigpe3ZhciBlPW8odCksbj1mdW5jdGlvbigpe2kuX2NvbnZlcnREYXRlcyhlKX0sYT1lLnRvT2NjdXJyZW5jZSh7c3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KTtyKGkuZGF0YVNvdXJjZS5hZGQoYSksbil9LGw9aS5vcHRpb25zLm1lc3NhZ2VzLnJlY3VycmVuY2VNZXNzYWdlczt0LnJlY3VycmVuY2VSdWxlfHx0LmlzT2NjdXJyZW5jZSgpP2kuc2hvd0RpYWxvZyh7bW9kZWw6dCx0aXRsZTpsLmVkaXRXaW5kb3dUaXRsZSx0ZXh0OmwuZWRpdFJlY3VycmluZz9sLmVkaXRSZWN1cnJpbmc6YXQsYnV0dG9uczpbe3RleHQ6bC5lZGl0V2luZG93T2NjdXJyZW5jZSxjbGljazpzfSx7dGV4dDpsLmVkaXRXaW5kb3dTZXJpZXMsY2xpY2s6YX1dfSk6cihpLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC51aWQpKX0sX21vZGVsRm9yQ29udGFpbmVyOmZ1bmN0aW9uKHQpe3JldHVybiB0PWUodCkuY2xvc2VzdChcIltcIitBLmF0dHIoXCJ1aWRcIikrXCJdXCIpLHRoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZCh0LmF0dHIoQS5hdHRyKFwidWlkXCIpKSl9LHNob3dEaWFsb2c6ZnVuY3Rpb24oZSl7dGhpcy5fZWRpdG9yLnNob3dEaWFsb2coZSl9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyLmZvY3VzKCl9LF9jb25maXJtYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz10aGlzLm9wdGlvbnMuZWRpdGFibGU7bz09PSEwfHxvLmNvbmZpcm1hdGlvbiE9PSExPyhuPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxpPXR5cGVvZiBvLmNvbmZpcm1hdGlvbj09PU8/by5jb25maXJtYXRpb246cnQscj1be25hbWU6XCJkZXN0cm95XCIsdGV4dDpuLmRlc3Ryb3ksY2xpY2s6ZnVuY3Rpb24oKXtlKCl9fV0sdGhpcy5faXNNb2JpbGUoKSYmQS5tb2JpbGUudWkuUGFuZXx8ci5wdXNoKHtuYW1lOlwiY2FuY2VsZWRpdFwiLHRleHQ6bi5jYW5jZWwsY2xpY2s6ZnVuY3Rpb24oKXtlKCEwKX19KSx0aGlzLnNob3dEaWFsb2coe21vZGVsOnQsdGV4dDppLHRpdGxlOm4uZGVsZXRlV2luZG93VGl0bGUsYnV0dG9uczpyfSkpOmUoKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuX2VkaXRvci5lZGl0YWJsZSxyPXRoaXMuZGF0YVNvdXJjZTtlPWV8fHt9LG49dGhpcy50cmlnZ2VyKFwiYWRkXCIse2V2ZW50OmV9KSwhbiYmKGkmJmkuZW5kKCl8fCFpKSYmKHRoaXMuY2FuY2VsRXZlbnQoKSxlJiZlLnRvSlNPTiYmKGU9ZS50b0pTT04oKSksdD1yLmFkZChlKSx0JiYodGhpcy5jYW5jZWxFdmVudCgpLHRoaXMuX2VkaXRFdmVudCh0KSkpfSxzYXZlRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLl9lZGl0b3I7aSYmKGU9aS5lZGl0YWJsZSx0PWkuY29udGFpbmVyLG49dGhpcy5fbW9kZWxGb3JDb250YWluZXIodCksdCYmZSYmZS5lbmQoKSYmIXRoaXMudHJpZ2dlcihKLHtjb250YWluZXI6dCxldmVudDpufSkmJihuLmlzUmVjdXJyZW5jZUhlYWQoKSYmdGhpcy5kYXRhU291cmNlLl9yZW1vdmVFeGNlcHRpb25zKG4pLG4uZGlydHl8fG4uaXNPY2N1cnJlbmNlKCl8fHRoaXMuX2NvbnZlcnREYXRlcyhuLFwicmVtb3ZlXCIpLHRoaXMuZGF0YVNvdXJjZS5zeW5jKCkpKX0sY2FuY2VsRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX2VkaXRvcixuPXQuY29udGFpbmVyO24mJihlPXRoaXMuX21vZGVsRm9yQ29udGFpbmVyKG4pLGUmJmUuaXNPY2N1cnJlbmNlKCkmJih0aGlzLl9jb252ZXJ0RGF0ZXMoZSxcInJlbW92ZVwiKSx0aGlzLl9jb252ZXJ0RGF0ZXModGhpcy5kYXRhU291cmNlLmdldChlLnJlY3VycmVuY2VJZCksXCJyZW1vdmVcIikpLHRoaXMuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKGUpLHQuY2xvc2UoKSl9LGVkaXRFdmVudDpmdW5jdGlvbihlKXt2YXIgdD1cInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLm9jY3VycmVuY2VCeVVpZChlKTplO3QmJih0aGlzLmNhbmNlbEV2ZW50KCksdC5pc1JlY3VycmluZygpP3RoaXMuX2VkaXRSZWN1cnJpbmdEaWFsb2codCk6dGhpcy5fZWRpdEV2ZW50KHQpKX0sX2VkaXRFdmVudDpmdW5jdGlvbihlKXt0aGlzLl9jcmVhdGVQb3B1cEVkaXRvcihlKX0sX2VkaXRSZWN1cnJpbmdEaWFsb2c6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWZ1bmN0aW9uKCl7ZS5pc0V4Y2VwdGlvbigpP3QuX2VkaXRFdmVudChlKTp0LmFkZEV2ZW50KGUpfSxpPWZ1bmN0aW9uKCl7ZS5yZWN1cnJlbmNlSWQmJihlPXQuZGF0YVNvdXJjZS5nZXQoZS5yZWN1cnJlbmNlSWQpKSx0Ll9lZGl0RXZlbnQoZSl9LHI9dC5vcHRpb25zLm1lc3NhZ2VzLnJlY3VycmVuY2VNZXNzYWdlczt0LnNob3dEaWFsb2coe21vZGVsOmUsdGl0bGU6ci5lZGl0V2luZG93VGl0bGUsdGV4dDpyLmVkaXRSZWN1cnJpbmc/ci5lZGl0UmVjdXJyaW5nOmF0LGJ1dHRvbnM6W3t0ZXh0OnIuZWRpdFdpbmRvd09jY3VycmVuY2UsY2xpY2s6bn0se3RleHQ6ci5lZGl0V2luZG93U2VyaWVzLGNsaWNrOml9XX0pfSxfY3JlYXRlQnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUudGVtcGxhdGV8fHN0LG49dHlwZW9mIGU9PT1PP2U6ZS5uYW1lfHxlLnRleHQsaT17Y2xhc3NOYW1lOlwiay1zY2hlZHVsZXItXCIrKG58fFwiXCIpLnJlcGxhY2UoL1xccy9nLFwiXCIpLHRleHQ6bixhdHRyOlwiXCJ9O2lmKCEobnx8VShlKSYmZS50ZW1wbGF0ZSkpdGhyb3cgRXJyb3IoXCJDdXN0b20gY29tbWFuZHMgc2hvdWxkIGhhdmUgbmFtZSBzcGVjaWZpZWRcIik7cmV0dXJuIFUoZSk/KGUuY2xhc3NOYW1lJiYoZS5jbGFzc05hbWUrPVwiIFwiK2kuY2xhc3NOYW1lKSxcImVkaXRcIj09PW4mJlUoZS50ZXh0KSYmKGU9VyghMCx7fSxlKSxlLnRleHQ9ZS50ZXh0LmVkaXQpLGk9VyghMCxpLHZbbl0sZSkpOmk9VyghMCxpLHZbbl0pLEEudGVtcGxhdGUodCkoaSl9LF9jb252ZXJ0RGF0ZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmRhdGFTb3VyY2UucmVhZGVyLnRpbWV6b25lLGk9ZS5zdGFydFRpbWV6b25lLHI9ZS5lbmRUaW1lem9uZSxvPWUuc3RhcnQsYT1lLnN0YXJ0O3Q9dHx8XCJhcHBseVwiLGk9aXx8cixyPXJ8fGksaSYmKG4/XCJhcHBseVwiPT09dD8obz1BLnRpbWV6b25lLmNvbnZlcnQoZS5zdGFydCxuLGkpLGE9QS50aW1lem9uZS5jb252ZXJ0KGUuZW5kLG4scikpOihvPUEudGltZXpvbmUuY29udmVydChlLnN0YXJ0LGksbiksYT1BLnRpbWV6b25lLmNvbnZlcnQoZS5lbmQscixuKSk6KG89QS50aW1lem9uZVt0XShlLnN0YXJ0LGkpLGE9QS50aW1lem9uZVt0XShlLmVuZCxyKSksZS5fc2V0KFwic3RhcnRcIixvKSxlLl9zZXQoXCJlbmRcIixhKSl9LF9jcmVhdGVFZGl0b3I6ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXM7ZT1uLl9lZGl0b3I9dGhpcy5faXNNb2JpbGUoKSYmQS5tb2JpbGUudWkuUGFuZT9uZXcgdyh0aGlzLndyYXBwZXIsVyh7fSx0aGlzLm9wdGlvbnMse3RhcmdldDp0aGlzLHRpbWV6b25lOm4uZGF0YVNvdXJjZS5yZWFkZXIudGltZXpvbmUscmVzb3VyY2VzOm4ucmVzb3VyY2VzLGNyZWF0ZUJ1dHRvbjpqKHRoaXMuX2NyZWF0ZUJ1dHRvbix0aGlzKX0pKTpuZXcgYih0aGlzLndyYXBwZXIsVyh7fSx0aGlzLm9wdGlvbnMse3RhcmdldDp0aGlzLGNyZWF0ZUJ1dHRvbjpqKHRoaXMuX2NyZWF0ZUJ1dHRvbix0aGlzKSx0aW1lem9uZTpuLmRhdGFTb3VyY2UucmVhZGVyLnRpbWV6b25lLHJlc291cmNlczpuLnJlc291cmNlc30pKSxlLmJpbmQoXCJjYW5jZWxcIixmdW5jdGlvbihlKXtyZXR1cm4gbi50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjplLmNvbnRhaW5lcixldmVudDplLm1vZGVsfSk/KGUucHJldmVudERlZmF1bHQoKSx0KToobi5jYW5jZWxFdmVudCgpLG4uZm9jdXMoKSx0KX0pLGUuYmluZChcImVkaXRcIixmdW5jdGlvbihlKXtuLnRyaWdnZXIoZXQse2NvbnRhaW5lcjplLmNvbnRhaW5lcixldmVudDplLm1vZGVsfSkmJmUucHJldmVudERlZmF1bHQoKX0pLGUuYmluZChcInNhdmVcIixmdW5jdGlvbigpe24uc2F2ZUV2ZW50KCl9KSxlLmJpbmQoXCJyZW1vdmVcIixmdW5jdGlvbihlKXtuLnJlbW92ZUV2ZW50KGUubW9kZWwpfSl9LF9jcmVhdGVQb3B1cEVkaXRvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9lZGl0b3I7KCFlLmlzTmV3KCl8fGUuaXNPY2N1cnJlbmNlKCkpJiYoZS5pc09jY3VycmVuY2UoKSYmdGhpcy5fY29udmVydERhdGVzKGUucmVjdXJyZW5jZUlkP3RoaXMuZGF0YVNvdXJjZS5nZXQoZS5yZWN1cnJlbmNlSWQpOmUpLHRoaXMuX2NvbnZlcnREYXRlcyhlKSksdGhpcy5lZGl0YWJsZT10LmVkaXRFdmVudChlKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwic3RyaW5nXCI9PXR5cGVvZiBlP3Qub2NjdXJyZW5jZUJ5VWlkKGUpOmU7biYmKG4uaXNSZWN1cnJpbmcoKT90Ll9kZWxldGVSZWN1cnJpbmdEaWFsb2cobik6dC5fY29uZmlybWF0aW9uKGZ1bmN0aW9uKGUpe2V8fHQuX3JlbW92ZUV2ZW50KG4pfSxuKSl9LG9jY3VycmVuY2VCeVVpZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQoZSk7cmV0dXJuIHR8fCh0PWwodGhpcy5fZGF0YSxlKSksdH0sb2NjdXJyZW5jZXNJblJhbmdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBBLmRhdGEuUXVlcnkodGhpcy5fZGF0YSkuZmlsdGVyKHtsb2dpYzpcIm9yXCIsZmlsdGVyczpbe2xvZ2ljOlwiYW5kXCIsZmlsdGVyczpbe2ZpZWxkOlwic3RhcnRcIixvcGVyYXRvcjpcImd0ZVwiLHZhbHVlOmV9LHtmaWVsZDpcImVuZFwiLG9wZXJhdG9yOlwiZ3RlXCIsdmFsdWU6ZX0se2ZpZWxkOlwic3RhcnRcIixvcGVyYXRvcjpcImx0XCIsdmFsdWU6dH1dfSx7bG9naWM6XCJhbmRcIixmaWx0ZXJzOlt7ZmllbGQ6XCJzdGFydFwiLG9wZXJhdG9yOlwibHRlXCIsdmFsdWU6ZX0se2ZpZWxkOlwiZW5kXCIsb3BlcmF0b3I6XCJndFwiLHZhbHVlOmV9XX1dfSkudG9BcnJheSgpfSxfcmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKFgse2V2ZW50OmV9KXx8dGhpcy5kYXRhU291cmNlLnJlbW92ZShlKSYmdGhpcy5kYXRhU291cmNlLnN5bmMoKX0sX2RlbGV0ZVJlY3VycmluZ0RpYWxvZzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZSxpPWZ1bmN0aW9uKCl7dmFyIGU9bi5yZWN1cnJlbmNlSWQ/bjpuLnRvT2NjdXJyZW5jZSgpLGk9dC5kYXRhU291cmNlLmdldChlLnJlY3VycmVuY2VJZCk7dC5fY29udmVydERhdGVzKGkpLHQuX3JlbW92ZUV2ZW50KGUpfSxyPWZ1bmN0aW9uKCl7bi5yZWN1cnJlbmNlSWQmJihuPXQuZGF0YVNvdXJjZS5nZXQobi5yZWN1cnJlbmNlSWQpKSx0Ll9yZW1vdmVFdmVudChuKX0sbz10Lm9wdGlvbnMubWVzc2FnZXMucmVjdXJyZW5jZU1lc3NhZ2VzO3Quc2hvd0RpYWxvZyh7bW9kZWw6ZSx0aXRsZTpvLmRlbGV0ZVdpbmRvd1RpdGxlLHRleHQ6by5kZWxldGVSZWN1cnJpbmc/by5kZWxldGVSZWN1cnJpbmc6b3QsYnV0dG9uczpbe3RleHQ6by5kZWxldGVXaW5kb3dPY2N1cnJlbmNlLGNsaWNrOml9LHt0ZXh0Om8uZGVsZXRlV2luZG93U2VyaWVzLGNsaWNrOnJ9XX0pfSxfdW5iaW5kVmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0Lml0ZW1zKCl9fSksZS5kZXN0cm95KCl9LF9iaW5kVmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3Qub3B0aW9ucy5lZGl0YWJsZSYmKHQuX3ZpZXdSZW1vdmVIYW5kbGVyJiZlLnVuYmluZChYLHQuX3ZpZXdSZW1vdmVIYW5kbGVyKSx0Ll92aWV3UmVtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXt0LnJlbW92ZUV2ZW50KGUudWlkKX0sZS5iaW5kKFgsdC5fdmlld1JlbW92ZUhhbmRsZXIpLHQuX3ZpZXdBZGRIYW5kbGVyJiZlLnVuYmluZChaLHQuX3ZpZXdBZGRIYW5kbGVyKSx0Ll92aWV3QWRkSGFuZGxlcj1mdW5jdGlvbihlKXt0LmFkZEV2ZW50KGUuZXZlbnRJbmZvKX0sZS5iaW5kKFosdGhpcy5fdmlld0FkZEhhbmRsZXIpLHQuX3ZpZXdFZGl0SGFuZGxlciYmZS51bmJpbmQoZXQsdC5fdmlld0VkaXRIYW5kbGVyKSx0Ll92aWV3RWRpdEhhbmRsZXI9ZnVuY3Rpb24oZSl7dC5lZGl0RXZlbnQoZS51aWQpfSxlLmJpbmQoZXQsdGhpcy5fdmlld0VkaXRIYW5kbGVyKSksdC5fdmlld05hdmlnYXRlSGFuZGxlciYmZS51bmJpbmQoXCJuYXZpZ2F0ZVwiLHQuX3ZpZXdOYXZpZ2F0ZUhhbmRsZXIpLHQuX3ZpZXdOYXZpZ2F0ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7dmFyIG4saTtlLnZpZXcmJihuPVwiaXNXb3JrRGF5XCJpbiBlLGk9bj9cImNoYW5nZVdvcmtEYXlcIjpcImNoYW5nZVZpZXdcIix0LnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3OmUudmlldyxpc1dvcmtEYXk6ZS5pc1dvcmtEYXksYWN0aW9uOmksZGF0ZTplLmRhdGV9KXx8KG4mJih0Ll93b3JrRGF5TW9kZT1lLmlzV29ya0RheSksdC5fc2VsZWN0VmlldyhlLnZpZXcpLHQuZGF0ZShlLmRhdGUpKSl9LGUuYmluZChcIm5hdmlnYXRlXCIsdC5fdmlld05hdmlnYXRlSGFuZGxlciksdC5fdmlld0FjdGl2YXRlSGFuZGxlciYmZS51bmJpbmQoXCJhY3RpdmF0ZVwiLHQuX3ZpZXdBY3RpdmF0ZUhhbmRsZXIpLHQuX3ZpZXdBY3RpdmF0ZUhhbmRsZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3QuX3NlbGVjdGlvbiYmKGUuY29uc3RyYWluU2VsZWN0aW9uKHQuX3NlbGVjdGlvbiksdC5fc2VsZWN0KCksdC5fYWRqdXN0U2VsZWN0ZWREYXRlKCkpfSxlLmJpbmQoXCJhY3RpdmF0ZVwiLHQuX3ZpZXdBY3RpdmF0ZUhhbmRsZXIpfSxfc2VsZWN0VmlldzpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJnQudmlld3NbZV0mJih0Ll9zZWxlY3RlZFZpZXcmJnQuX3VuYmluZFZpZXcodC5fc2VsZWN0ZWRWaWV3KSx0Ll9zZWxlY3RlZFZpZXc9dC5fcmVuZGVyVmlldyhlKSx0Ll9zZWxlY3RlZFZpZXdOYW1lPWUsdC50b29sYmFyLmZpbmQoXCIuay1zY2hlZHVsZXItdmlld3MgbGlcIikucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLXNlbGVjdGVkXCIpLmVuZCgpLmZpbmQoXCIuay12aWV3LVwiK2UucmVwbGFjZSgvXFwuL2csXCJcXFxcLlwiKS50b0xvd2VyQ2FzZSgpKS5hZGRDbGFzcyhcImstc3RhdGUtc2VsZWN0ZWRcIikpfSx2aWV3OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGU/KG4uX3NlbGVjdFZpZXcoZSksbi5yZWJpbmQoKSx0KTpuLl9zZWxlY3RlZFZpZXd9LF9yZW5kZXJWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luaXRpYWxpemVWaWV3KGUpO3JldHVybiB0aGlzLl9iaW5kVmlldyh0KSx0aGlzLl9tb2RlbC5zZXQoXCJmb3JtYXR0ZWREYXRlXCIsdC5kYXRlRm9yVGl0bGUoKSksdH0scmVzaXplOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0U2l6ZSgpLG49dGhpcy5fc2l6ZSxpPXRoaXMudmlldygpO2kmJmkuZ3JvdXBzJiYoZXx8IW58fHQud2lkdGghPT1uLndpZHRofHx0LmhlaWdodCE9PW4uaGVpZ2h0KSYmKHRoaXMucmVmcmVzaCh7YWN0aW9uOlwicmVzaXplXCJ9KSx0aGlzLl9zaXplPXQpfSxfYWRqdXN0U2VsZWN0ZWREYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kZWwuc2VsZWN0ZWREYXRlLHQ9dGhpcy5fc2VsZWN0aW9uLG49dC5zdGFydDtuJiYhQS5kYXRlLmlzSW5EYXRlUmFuZ2UoZSxJKG4pLEkodC5lbmQpKSYmZS5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCksbi5nZXRNb250aCgpLG4uZ2V0RGF0ZSgpKX0sX2luaXRpYWxpemVWaWV3OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT10aGlzLnZpZXdzW2VdO2lmKGkpe2lmKHQ9VShpKSxuPWkudHlwZSx0eXBlb2Ygbj09PU8mJihuPUEuZ2V0dGVyKGkudHlwZSkod2luZG93KSksIW4pdGhyb3cgRXJyb3IoXCJUaGVyZSBpcyBubyBzdWNoIHZpZXdcIik7aT1uZXcgbih0aGlzLndyYXBwZXIsaChXKCEwLHt9LHRoaXMub3B0aW9ucyx0P2k6e30se3Jlc291cmNlczp0aGlzLnJlc291cmNlcyxkYXRlOnRoaXMuZGF0ZSgpLHNob3dXb3JrSG91cnM6dGhpcy5fd29ya0RheU1vZGV9KSkpfXJldHVybiBpfSxfdmlld3M6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYSxzLGwsYz10aGlzLm9wdGlvbnMudmlld3M7Zm9yKHRoaXMudmlld3M9e30sYT0wLHM9Yy5sZW5ndGg7cz5hO2ErKylsPSExLGU9Y1thXSxpPVUoZSksaT8obz1yPWUudHlwZT9lLnR5cGU6ZSx0eXBlb2YgbyE9PU8mJihyPWUudGl0bGUsbD0hMCkpOm89cj1lLHQ9eFtyXSx0JiYhbCYmKGUudHlwZT10LnR5cGUsdC50aXRsZT10aGlzLm9wdGlvbnMubWVzc2FnZXMudmlld3Nbcl0sXCJkYXlcIj09PXQudHlwZT90Lm1lc3NhZ2VzPXthbGxEYXk6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmFsbERheX06XCJhZ2VuZGFcIj09PXQudHlwZSYmKHQubWVzc2FnZXM9e2V2ZW50OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5ldmVudCxkYXRlOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5kYXRlLHRpbWU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnRpbWV9KSksZT1XKHt0aXRsZTpyfSx0LGk/ZTp7fSksciYmKHRoaXMudmlld3Nbcl09ZSwoIW58fGUuc2VsZWN0ZWQpJiYobj1yKSk7biYmKHRoaXMuX3NlbGVjdGVkVmlld05hbWU9bil9LHJlYmluZDpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZS5mZXRjaCgpfSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj10LmRhdGFTb3VyY2U7bj1xKG4pP3tkYXRhOm59Om4sIXQudGltZXpvbmV8fG4gaW5zdGFuY2VvZiB3dD9uIGluc3RhbmNlb2Ygd3QmJih0LnRpbWV6b25lPW4uc2NoZW1hP24uc2NoZW1hLnRpbWV6b25lOlwiXCIpOm49VyghMCxuLHtzY2hlbWE6e3RpbWV6b25lOnQudGltZXpvbmV9fSksZS5kYXRhU291cmNlJiZlLl9yZWZyZXNoSGFuZGxlcj9lLmRhdGFTb3VyY2UudW5iaW5kKEssZS5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChcInByb2dyZXNzXCIsZS5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoXCJlcnJvclwiLGUuX2Vycm9ySGFuZGxlcik6KGUuX3JlZnJlc2hIYW5kbGVyPWooZS5yZWZyZXNoLGUpLGUuX3Byb2dyZXNzSGFuZGxlcj1qKGUuX3JlcXVlc3RTdGFydCxlKSxlLl9lcnJvckhhbmRsZXI9aihlLl9lcnJvcixlKSksZS5kYXRhU291cmNlPUEuZGF0YS5TY2hlZHVsZXJEYXRhU291cmNlLmNyZWF0ZShuKS5iaW5kKEssZS5fcmVmcmVzaEhhbmRsZXIpLmJpbmQoXCJwcm9ncmVzc1wiLGUuX3Byb2dyZXNzSGFuZGxlcikuYmluZChcImVycm9yXCIsZS5fZXJyb3JIYW5kbGVyKSxlLm9wdGlvbnMuZGF0YVNvdXJjZT1lLmRhdGFTb3VyY2V9LF9lcnJvcjpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCExKX0sX3JlcXVlc3RTdGFydDpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCEwKX0sX3Byb2dyZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWNvbnRlbnRcIik7QS51aS5wcm9ncmVzcyh0LGUpfSxfcmVzb3VyY2VzOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbyxhPXRoaXMscz1hLm9wdGlvbnMucmVzb3VyY2VzO2Zvcih0PTA7cy5sZW5ndGg+dDt0Kyspe2lmKG49c1t0XSxpPW4uZmllbGQscj1uLmRhdGFTb3VyY2UsIWl8fCFyKXRocm93IEVycm9yKCdUaGUgXCJmaWVsZFwiIGFuZCBcImRhdGFTb3VyY2VcIiBvcHRpb25zIG9mIHRoZSBzY2hlZHVsZXIgcmVzb3VyY2UgYXJlIG1hbmRhdG9yeS4nKTthLnJlc291cmNlcy5wdXNoKHtmaWVsZDppLG5hbWU6bi5uYW1lfHxpLHRpdGxlOm4udGl0bGV8fGksZGF0YVRleHRGaWVsZDpuLmRhdGFUZXh0RmllbGR8fFwidGV4dFwiLGRhdGFWYWx1ZUZpZWxkOm4uZGF0YVZhbHVlRmllbGR8fFwidmFsdWVcIixkYXRhQ29sb3JGaWVsZDpuLmRhdGFDb2xvckZpZWxkfHxcImNvbG9yXCIsdmFsdWVQcmltaXRpdmU6bnVsbCE9bi52YWx1ZVByaW1pdGl2ZT9uLnZhbHVlUHJpbWl0aXZlOiEwLG11bHRpcGxlOm4ubXVsdGlwbGV8fCExLGRhdGFTb3VyY2U6QS5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHIpfSl9bz1lLm1hcChhLnJlc291cmNlcyxmdW5jdGlvbihlKXtyZXR1cm4gZS5kYXRhU291cmNlLmZldGNoKCl9KSxlLndoZW4uYXBwbHkobnVsbCxvKS50aGVuKGZ1bmN0aW9uKCl7YS5vcHRpb25zLmF1dG9CaW5kP2EudmlldyhhLl9zZWxlY3RlZFZpZXdOYW1lKTphLl9zZWxlY3RWaWV3KGEuX3NlbGVjdGVkVmlld05hbWUpfSl9LF9pbml0TW9kZWw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX21vZGVsPUEub2JzZXJ2YWJsZSh7c2VsZWN0ZWREYXRlOm5ldyBEYXRlKHRoaXMub3B0aW9ucy5kYXRlKSxmb3JtYXR0ZWREYXRlOlwiXCJ9KSxlLl9tb2RlbC5iaW5kKFwiY2hhbmdlXCIsZnVuY3Rpb24odCl7XCJzZWxlY3RlZERhdGVcIj09PXQuZmllbGQmJmUudmlldyhlLl9zZWxlY3RlZFZpZXdOYW1lKX0pfSxfd3JhcHBlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLm9wdGlvbnMsbj10LmhlaWdodCxpPXQud2lkdGg7ZS53cmFwcGVyPWUuZWxlbWVudC5hZGRDbGFzcyhcImstd2lkZ2V0IGstc2NoZWR1bGVyIGstZmxvYXR3cmFwXCIpLmF0dHIoXCJyb2xlXCIsXCJncmlkXCIpLmF0dHIoXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiLCEwKSxlLl9pc01vYmlsZSgpJiZlLndyYXBwZXIuYWRkQ2xhc3MoXCJrLXNjaGVkdWxlci1tb2JpbGVcIiksZS5faXNNb2JpbGVQaG9uZVZpZXcoKSYmZS53cmFwcGVyLmFkZENsYXNzKFwiay1zY2hlZHVsZXItcGhvbmVcIiksbiYmZS53cmFwcGVyLmhlaWdodChuKSxpJiZlLndyYXBwZXIud2lkdGgoaSl9LGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJkkoZSk+PUkodGhpcy5vcHRpb25zLm1pbikmJkkoZSk8PUkodGhpcy5vcHRpb25zLm1heCkmJnRoaXMuX21vZGVsLnNldChcInNlbGVjdGVkRGF0ZVwiLGUpLEkodGhpcy5fbW9kZWwuZ2V0KFwic2VsZWN0ZWREYXRlXCIpKX0sX3Rvb2xiYXI6ZnVuY3Rpb24oKXt2YXIgbixpLHI9dGhpcyxvPXIub3B0aW9ucyxhPVtdO28udG9vbGJhciYmKGE9ZS5pc0FycmF5KG8udG9vbGJhcik/by50b29sYmFyOltvLnRvb2xiYXJdKSxuPXRoaXMuX2lzTW9iaWxlUGhvbmVWaWV3KCk/Y3Q6bHQsaT1lKG4oe21lc3NhZ2VzOm8ubWVzc2FnZXMscGRmOmUuZ3JlcChhLGZ1bmN0aW9uKGUpe3JldHVyblwicGRmXCI9PWV8fFwicGRmXCI9PWUubmFtZX0pLmxlbmd0aD4wLG5zOkEubnMsdmlld3M6ci52aWV3c30pKSxyLndyYXBwZXIuYXBwZW5kKGkpLHIudG9vbGJhcj1pLEEuYmluZChyLnRvb2xiYXIsci5fbW9kZWwpLGkub24oWSskLFwiLmstcGRmXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHIuc2F2ZUFzUERGKCl9KSxpLm9uKFkrJCxcIi5rLXNjaGVkdWxlci1uYXZpZ2F0aW9uIGxpXCIsZnVuY3Rpb24obil7dmFyIGk9ZSh0aGlzKSxvPW5ldyBEYXRlKHIuZGF0ZSgpKSxhPVwiXCI7aWYobi5wcmV2ZW50RGVmYXVsdCgpLGkuaGFzQ2xhc3MoXCJrLW5hdi10b2RheVwiKSlhPVwidG9kYXlcIixvPW5ldyBEYXRlO2Vsc2UgaWYoaS5oYXNDbGFzcyhcImstbmF2LW5leHRcIikpYT1cIm5leHRcIixvPXIudmlldygpLm5leHREYXRlKCk7ZWxzZSBpZihpLmhhc0NsYXNzKFwiay1uYXYtcHJldlwiKSlhPVwicHJldmlvdXNcIixvPXIudmlldygpLnByZXZpb3VzRGF0ZSgpO2Vsc2UgaWYoaS5oYXNDbGFzcyhcImstbmF2LWN1cnJlbnRcIikmJiFyLl9pc01vYmlsZVBob25lVmlldygpKXJldHVybiByLl9zaG93Q2FsZW5kYXIoKSx0O3IudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6ci5fc2VsZWN0ZWRWaWV3TmFtZSxhY3Rpb246YSxkYXRlOm99KXx8ci5kYXRlKG8pfSksaS5vbihZKyQsXCIuay1zY2hlZHVsZXItdmlld3MgbGlcIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCk7dmFyIG49ZSh0aGlzKS5hdHRyKEEuYXR0cihcIm5hbWVcIikpO3IudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6bixhY3Rpb246XCJjaGFuZ2VWaWV3XCIsZGF0ZTpyLmRhdGUoKX0pfHxyLnZpZXcobil9KSxpLmZpbmQoXCJsaVwiKS5ob3ZlcihmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3MoXCJrLXN0YXRlLWhvdmVyXCIpfSl9LF9zaG93Q2FsZW5kYXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC50b29sYmFyLmZpbmQoXCIuay1uYXYtY3VycmVudFwiKSxpPWUoJzxkaXYgY2xhc3M9XCJrLWNhbGVuZGFyLWNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJrLXNjaGVkdWxlci1jYWxlbmRhclwiLz48L2Rpdj4nKTt0LnBvcHVwfHwodC5wb3B1cD1uZXcgSChpLHthbmNob3I6bixhY3RpdmF0ZTpmdW5jdGlvbigpe3QuY2FsZW5kYXJ8fCh0LmNhbGVuZGFyPW5ldyBOKHRoaXMuZWxlbWVudC5maW5kKFwiLmstc2NoZWR1bGVyLWNhbGVuZGFyXCIpLHtjaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbHVlKCk7dC50cmlnZ2VyKFwibmF2aWdhdGVcIix7dmlldzp0Ll9zZWxlY3RlZFZpZXdOYW1lLGFjdGlvbjpcImNoYW5nZURhdGVcIixkYXRlOmV9KXx8KHQuZGF0ZShlKSx0LnBvcHVwLmNsb3NlKCkpfSxtaW46dC5vcHRpb25zLm1pbixtYXg6dC5vcHRpb25zLm1heH0pKSx0LmNhbGVuZGFyLnZhbHVlKHQuZGF0ZSgpKX0sY29weUFuY2hvclN0eWxlczohMX0pKSx0LnBvcHVwLm9wZW4oKX0scmVmcmVzaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy52aWV3KCk7dGhpcy5fcHJvZ3Jlc3MoITEpLHRoaXMuYW5ndWxhcihcImNsZWFudXBcIixmdW5jdGlvbigpe3JldHVybntlbGVtZW50czp0Lml0ZW1zKCl9fSksZT1lfHx7fSxuJiYoZSYmXCJpdGVtY2hhbmdlXCI9PT1lLmFjdGlvbiYmKHRoaXMuX2VkaXRvci5lZGl0YWJsZXx8dGhpcy5fcHJldmVudFJlZnJlc2gpfHx0aGlzLnRyaWdnZXIoXCJkYXRhQmluZGluZ1wiLHthY3Rpb246ZS5hY3Rpb258fFwicmViaW5kXCIsaW5kZXg6ZS5pbmRleCxpdGVtczplLml0ZW1zfSl8fChlJiZcInJlc2l6ZVwiPT09ZS5hY3Rpb258fCF0aGlzLl9lZGl0b3J8fHRoaXMuX2VkaXRvci5jbG9zZSgpLHRoaXMuX2RhdGE9dGhpcy5kYXRhU291cmNlLmV4cGFuZChuLnN0YXJ0RGF0ZSgpLG4uZW5kRGF0ZSgpKSxuLnJlbmRlcih0aGlzLl9kYXRhKSx0aGlzLnRyaWdnZXIoXCJkYXRhQm91bmRcIikpKX0sc2xvdEJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXRoaXMudmlldygpO3JldHVybiBpLl9zbG90QnlQb3NpdGlvbj8obj1pLl9zbG90QnlQb3NpdGlvbihlLHQpLG4/e3N0YXJ0RGF0ZTpuLnN0YXJ0RGF0ZSgpLGVuZERhdGU6bi5lbmREYXRlKCksZ3JvdXBJbmRleDpuLmdyb3VwSW5kZXgsZWxlbWVudDpuLmVsZW1lbnQsaXNEYXlTbG90Om4uaXNEYXlTbG90fTpudWxsKTpudWxsfSxzbG90QnlFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkub2Zmc2V0KCk7XG5yZXR1cm4gdGhpcy5zbG90QnlQb3NpdGlvbihuLmxlZnQsbi50b3ApfSxyZXNvdXJjZXNCeVNsb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudmlldygpLl9yZXNvdXJjZUJ5U2xvdChlKX19KSx4PXtkYXk6e3R5cGU6XCJrZW5kby51aS5EYXlWaWV3XCJ9LHdlZWs6e3R5cGU6XCJrZW5kby51aS5XZWVrVmlld1wifSx3b3JrV2Vlazp7dHlwZTpcImtlbmRvLnVpLldvcmtXZWVrVmlld1wifSxhZ2VuZGE6e3R5cGU6XCJrZW5kby51aS5BZ2VuZGFWaWV3XCJ9LG1vbnRoOnt0eXBlOlwia2VuZG8udWkuTW9udGhWaWV3XCJ9LHRpbWVsaW5lOnt0eXBlOlwia2VuZG8udWkuVGltZWxpbmVWaWV3XCJ9LHRpbWVsaW5lV2Vlazp7dHlwZTpcImtlbmRvLnVpLlRpbWVsaW5lV2Vla1ZpZXdcIn0sdGltZWxpbmVXb3JrV2Vlazp7dHlwZTpcImtlbmRvLnVpLlRpbWVsaW5lV29ya1dlZWtWaWV3XCJ9LHRpbWVsaW5lTW9udGg6e3R5cGU6XCJrZW5kby51aS5UaW1lbGluZU1vbnRoVmlld1wifX0sQi5wbHVnaW4oayksQS5QREZNaXhpbiYmQS5QREZNaXhpbi5leHRlbmQoay5wcm90b3R5cGUpLEM9TC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9QS50aW1lem9uZS53aW5kb3dzX3pvbmVzO2lmKCFpfHwhQS50aW1lem9uZS56b25lc190aXRsZXMpdGhyb3cgRXJyb3IoXCJrZW5kby50aW1lem9uZXMubWluLmpzIGlzIG5vdCBpbmNsdWRlZC5cIik7TC5mbi5pbml0LmNhbGwobixlLHQpLG4ud3JhcHBlcj1uLmVsZW1lbnQsbi5fem9uZXNRdWVyeT1uZXcgQS5kYXRhLlF1ZXJ5KGkpLG4uX3pvbmVUaXRsZUlkPUEuZ3VpZCgpLG4uX3pvbmVUaXRsZVBpY2tlcigpLG4uX3pvbmVQaWNrZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJUaW1lem9uZUVkaXRvclwiLHZhbHVlOlwiXCIsb3B0aW9uTGFiZWw6XCJObyB0aW1lem9uZVwifSxldmVudHM6W1wiY2hhbmdlXCJdLF96b25lVGl0bGVQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49ZSgnPGlucHV0IGlkPVwiJyt0Ll96b25lVGl0bGVJZCsnXCIvPicpLmFwcGVuZFRvKHQud3JhcHBlcik7dC5fem9uZVRpdGxlPW5ldyBBLnVpLkRyb3BEb3duTGlzdChuLHtkYXRhU291cmNlOkEudGltZXpvbmUuem9uZXNfdGl0bGVzLGRhdGFWYWx1ZUZpZWxkOlwib3RoZXJfem9uZVwiLGRhdGFUZXh0RmllbGQ6XCJuYW1lXCIsb3B0aW9uTGFiZWw6dC5vcHRpb25zLm9wdGlvbkxhYmVsLGNhc2NhZGU6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlKCl8fHQuX3pvbmUud3JhcHBlci5oaWRlKCl9fSl9LF96b25lUGlja2VyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPWUoXCI8aW5wdXQgLz5cIikuYXBwZW5kVG8odGhpcy53cmFwcGVyKTt0Ll96b25lPW5ldyBBLnVpLkRyb3BEb3duTGlzdChuLHtkYXRhVmFsdWVGaWVsZDpcInpvbmVcIixkYXRhVGV4dEZpZWxkOlwidGVycml0b3J5XCIsZGF0YVNvdXJjZTp0Ll96b25lc1F1ZXJ5LmRhdGEsY2FzY2FkZUZyb206dC5fem9uZVRpdGxlSWQsY2FzY2FkZTpmdW5jdGlvbigpe3QuX3ZhbHVlPXRoaXMudmFsdWUoKSx0LnRyaWdnZXIoXCJjaGFuZ2VcIil9LGRhdGFCb3VuZDpmdW5jdGlvbigpe3QuX3ZhbHVlPXRoaXMudmFsdWUoKSx0aGlzLndyYXBwZXIudG9nZ2xlKHRoaXMuZGF0YVNvdXJjZS52aWV3KCkubGVuZ3RoPjEpfX0pLHQuX3pvbmUud3JhcHBlci5oaWRlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtMLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxBLmRlc3Ryb3kodGhpcy53cmFwcGVyKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzO3JldHVybiBlPT09dD9pLl92YWx1ZToobj1pLl96b25lc1F1ZXJ5LmZpbHRlcih7ZmllbGQ6XCJ6b25lXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS5kYXRhWzBdLG4/KGkuX3pvbmVUaXRsZS52YWx1ZShuLm90aGVyX3pvbmUpLGkuX3pvbmUudmFsdWUobi56b25lKSk6aS5fem9uZVRpdGxlLnZhbHVlKFwiXCIpLHQpfX0pLEIucGx1Z2luKEMpLFM9QS50ZW1wbGF0ZSgnPG9wdGlvbiB2YWx1ZT1cIiM9b3RoZXJfem9uZSNcIj4jPW5hbWUjPC9vcHRpb24+JyksVD1BLnRlbXBsYXRlKCc8b3B0aW9uIHZhbHVlPVwiIz16b25lI1wiPiM9dGVycml0b3J5Izwvb3B0aW9uPicpLEQ9TC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9QS50aW1lem9uZS53aW5kb3dzX3pvbmVzO2lmKCFpfHwhQS50aW1lem9uZS56b25lc190aXRsZXMpdGhyb3cgRXJyb3IoXCJrZW5kby50aW1lem9uZXMubWluLmpzIGlzIG5vdCBpbmNsdWRlZC5cIik7TC5mbi5pbml0LmNhbGwobixlLHQpLG4ud3JhcHBlcj1uLmVsZW1lbnQsbi5fem9uZXNRdWVyeT1uZXcgQS5kYXRhLlF1ZXJ5KGkpLG4uX3pvbmVUaXRsZVBpY2tlcigpLG4uX3pvbmVQaWNrZXIoKSxuLnZhbHVlKG4ub3B0aW9ucy52YWx1ZSl9LG9wdGlvbnM6e25hbWU6XCJNb2JpbGVUaW1lem9uZUVkaXRvclwiLG9wdGlvbkxhYmVsOlwiTm8gdGltZXpvbmVcIix2YWx1ZTpcIlwifSxldmVudHM6W1wiY2hhbmdlXCJdLF9iaW5kWm9uZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZT90aGlzLl9maWx0ZXIoZSk6W107dGhpcy5fem9uZS5odG1sKHRoaXMuX29wdGlvbnModCxUKSl9LF9maWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3pvbmVzUXVlcnkuZmlsdGVyKHtmaWVsZDpcIm90aGVyX3pvbmVcIixvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLmRhdGF9LF9vcHRpb25zOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0wLHI9XCJcIixvPWUubGVuZ3RoO2ZvcihuJiYocis9dCh7b3RoZXJfem9uZTpcIlwiLG5hbWU6bn0pKTtvPmk7aSsrKXIrPXQoZVtpXSk7cmV0dXJuIHJ9LF96b25lVGl0bGVQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dC5fb3B0aW9ucyhBLnRpbWV6b25lLnpvbmVzX3RpdGxlcyxTLHQub3B0aW9ucy5vcHRpb25MYWJlbCk7dC5fem9uZVRpdGxlPWUoXCI8c2VsZWN0PlwiK24rXCI8L3NlbGVjdD5cIikuYXBwZW5kVG8odC53cmFwcGVyKS5jaGFuZ2UoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnZhbHVlLG49dC5fem9uZTt0Ll9iaW5kWm9uZXMoZSksZSYmblswXS5jaGlsZHJlbi5sZW5ndGg+MT9uLnNob3coKTpuLmhpZGUoKSx0Ll92YWx1ZT1uWzBdLnZhbHVlLHQudHJpZ2dlcihcImNoYW5nZVwiKX0pfSxfem9uZVBpY2tlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5fem9uZT1lKCc8c2VsZWN0IHN0eWxlPVwiZGlzcGxheTpub25lXCI+PC9zZWxlY3Q+JykuYXBwZW5kVG8odGhpcy53cmFwcGVyKS5jaGFuZ2UoZnVuY3Rpb24oKXt0Ll92YWx1ZT10aGlzLnZhbHVlLHQudHJpZ2dlcihcImNoYW5nZVwiKX0pLHQuX2JpbmRab25lcyh0Ll96b25lVGl0bGUudmFsKCkpLHQuX3ZhbHVlPXQuX3pvbmVbMF0udmFsdWV9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtMLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSxBLmRlc3Ryb3kodGhpcy53cmFwcGVyKX0sdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLHI9aS5fem9uZSxvPVwiXCIsYT1cIlwiO3JldHVybiBlPT09dD9pLl92YWx1ZToobj1pLl96b25lc1F1ZXJ5LmZpbHRlcih7ZmllbGQ6XCJ6b25lXCIsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS5kYXRhWzBdLG4mJihhPW4uem9uZSxvPW4ub3RoZXJfem9uZSksaS5fem9uZVRpdGxlLnZhbChvKSxpLl9iaW5kWm9uZXMobyksci52YWwoYSksYT1yWzBdLnZhbHVlLGEmJnJbMF0uY2hpbGRyZW4ubGVuZ3RoPjE/ci5zaG93KCk6ci5oaWRlKCksaS5fdmFsdWU9YSx0KX19KSxCLnBsdWdpbihEKX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7dmFyIHQ9d2luZG93LmtlbmRvLG49dC51aS5XaWRnZXQsaT1lLnByb3h5LHI9TWF0aC5hYnMsbz0yMCxhPXQuQ2xhc3MuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKG4saSxvKXtvPWUuZXh0ZW5kKHttaW5YRGVsdGE6MzAsbWF4WURlbHRhOjIwLG1heER1cmF0aW9uOjFlM30sbyksbmV3IHQuVXNlckV2ZW50cyhuLHtzdXJmYWNlOm8uc3VyZmFjZSxhbGxvd1NlbGVjdGlvbjohMCxzdGFydDpmdW5jdGlvbihlKXsyKnIoZS54LnZlbG9jaXR5KT49cihlLnkudmVsb2NpdHkpJiZlLnNlbmRlci5jYXB0dXJlKCl9LG1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3VjaCxuPWUuZXZlbnQudGltZVN0YW1wLXQuc3RhcnRUaW1lLGE9dC54LmluaXRpYWxEZWx0YT4wP1wicmlnaHRcIjpcImxlZnRcIjtyKHQueC5pbml0aWFsRGVsdGEpPj1vLm1pblhEZWx0YSYmcih0LnkuaW5pdGlhbERlbHRhKTxvLm1heFlEZWx0YSYmby5tYXhEdXJhdGlvbj5uJiYoaSh7ZGlyZWN0aW9uOmEsdG91Y2g6dCx0YXJnZXQ6dC50YXJnZXR9KSx0LmNhbmNlbCgpKX19KX19KSxzPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZnVuY3Rpb24odCl7cy5fdHJpZ2dlclRvdWNoKGUsdCl9fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3MudHJpZ2dlcihlLHt0b3VjaGVzOnQudG91Y2hlcyxkaXN0YW5jZTp0LmRpc3RhbmNlLGNlbnRlcjp0LmNlbnRlcixldmVudDp0LmV2ZW50fSl9fXZhciBzPXRoaXM7bi5mbi5pbml0LmNhbGwocyxlLHIpLHI9cy5vcHRpb25zLGU9cy5lbGVtZW50LHMuZXZlbnRzPW5ldyB0LlVzZXJFdmVudHMoZSx7ZmlsdGVyOnIuZmlsdGVyLHN1cmZhY2U6ci5zdXJmYWNlLG1pbkhvbGQ6ci5taW5Ib2xkLG11bHRpVG91Y2g6ci5tdWx0aVRvdWNoLGFsbG93U2VsZWN0aW9uOiEwLHByZXNzOm8oXCJ0b3VjaHN0YXJ0XCIpLGhvbGQ6byhcImhvbGRcIiksdGFwOmkocyxcIl90YXBcIiksZ2VzdHVyZXN0YXJ0OmEoXCJnZXN0dXJlc3RhcnRcIiksZ2VzdHVyZWNoYW5nZTphKFwiZ2VzdHVyZWNoYW5nZVwiKSxnZXN0dXJlZW5kOmEoXCJnZXN0dXJlZW5kXCIpfSksci5lbmFibGVTd2lwZT8ocy5ldmVudHMuYmluZChcInN0YXJ0XCIsaShzLFwiX3N3aXBlc3RhcnRcIikpLHMuZXZlbnRzLmJpbmQoXCJtb3ZlXCIsaShzLFwiX3N3aXBlbW92ZVwiKSkpOihzLmV2ZW50cy5iaW5kKFwic3RhcnRcIixpKHMsXCJfZHJhZ3N0YXJ0XCIpKSxzLmV2ZW50cy5iaW5kKFwibW92ZVwiLG8oXCJkcmFnXCIpKSxzLmV2ZW50cy5iaW5kKFwiZW5kXCIsbyhcImRyYWdlbmRcIikpKSx0Lm5vdGlmeShzKX0sZXZlbnRzOltcInRvdWNoc3RhcnRcIixcImRyYWdzdGFydFwiLFwiZHJhZ1wiLFwiZHJhZ2VuZFwiLFwidGFwXCIsXCJkb3VibGV0YXBcIixcImhvbGRcIixcInN3aXBlXCIsXCJnZXN0dXJlc3RhcnRcIixcImdlc3R1cmVjaGFuZ2VcIixcImdlc3R1cmVlbmRcIl0sb3B0aW9uczp7bmFtZTpcIlRvdWNoXCIsc3VyZmFjZTpudWxsLGdsb2JhbDohMSxtdWx0aVRvdWNoOiExLGVuYWJsZVN3aXBlOiExLG1pblhEZWx0YTozMCxtYXhZRGVsdGE6MjAsbWF4RHVyYXRpb246MWUzLG1pbkhvbGQ6ODAwLGRvdWJsZVRhcFRpbWVvdXQ6ODAwfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5jYW5jZWwoKX0sX3RyaWdnZXJUb3VjaDpmdW5jdGlvbihlLHQpe3RoaXMudHJpZ2dlcihlLHt0b3VjaDp0LnRvdWNoLGV2ZW50OnQuZXZlbnR9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSxfdGFwOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT1uLmxhc3RUYXAscj1lLnRvdWNoO2kmJm4ub3B0aW9ucy5kb3VibGVUYXBUaW1lb3V0PnIuZW5kVGltZS1pLmVuZFRpbWUmJnQudG91Y2hEZWx0YShyLGkpLmRpc3RhbmNlPG8/KG4uX3RyaWdnZXJUb3VjaChcImRvdWJsZXRhcFwiLGUpLG4ubGFzdFRhcD1udWxsKToobi5fdHJpZ2dlclRvdWNoKFwidGFwXCIsZSksbi5sYXN0VGFwPXIpfSxfZHJhZ3N0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuX3RyaWdnZXJUb3VjaChcImRyYWdzdGFydFwiLGUpfSxfc3dpcGVzdGFydDpmdW5jdGlvbihlKXsyKnIoZS54LnZlbG9jaXR5KT49cihlLnkudmVsb2NpdHkpJiZlLnNlbmRlci5jYXB0dXJlKCl9LF9zd2lwZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQub3B0aW9ucyxpPWUudG91Y2gsbz1lLmV2ZW50LnRpbWVTdGFtcC1pLnN0YXJ0VGltZSxhPWkueC5pbml0aWFsRGVsdGE+MD9cInJpZ2h0XCI6XCJsZWZ0XCI7cihpLnguaW5pdGlhbERlbHRhKT49bi5taW5YRGVsdGEmJnIoaS55LmluaXRpYWxEZWx0YSk8bi5tYXhZRGVsdGEmJm4ubWF4RHVyYXRpb24+byYmKHQudHJpZ2dlcihcInN3aXBlXCIse2RpcmVjdGlvbjphLHRvdWNoOmUudG91Y2h9KSxpLmNhbmNlbCgpKX19KTt3aW5kb3cualF1ZXJ5LmZuLmtlbmRvTW9iaWxlU3dpcGU9ZnVuY3Rpb24oZSx0KXt0aGlzLmVhY2goZnVuY3Rpb24oKXtuZXcgYSh0aGlzLGUsdCl9KX0sdC51aS5wbHVnaW4ocyl9KHdpbmRvdy5rZW5kby5qUXVlcnkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQsbixpPVtdLHI9ZS5jbGFzc05hbWU7Zm9yKHQ9MCxuPWUubGV2ZWw7bj50O3QrKylpLnB1c2gobyhcInNwYW5cIix7Y2xhc3NOYW1lOnJ9KSk7cmV0dXJuIGl9ZnVuY3Rpb24gbigpe3ZhciB0PWkuX2FjdGl2ZUVsZW1lbnQoKTtcImJvZHlcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmZSh0KS5ibHVyKCl9dmFyIGk9d2luZG93LmtlbmRvLHI9aS5kb20sbz1yLmVsZW1lbnQsYT1yLnRleHQscz1pLnN1cHBvcnQubW9iaWxlT1MsbD1pLnVpLGM9bC5XaWRnZXQsZD1lLmV4dGVuZCx1PWUubWFwLGg9ZS5pc0Z1bmN0aW9uLHA9aS5rZXlzLGY9e3RpdGxlOlwiVGl0bGVcIixzdGFydDpcIlN0YXJ0IFRpbWVcIixlbmQ6XCJFbmQgVGltZVwiLHBlcmNlbnRDb21wbGV0ZTpcIiUgRG9uZVwiLHBhcmVudElkOlwiUHJlZGVjZXNzb3IgSURcIixpZDpcIklEXCIsb3JkZXJJZDpcIk9yZGVyIElEXCJ9LGc9XCJzdHJpbmdcIixtPVwiLmtlbmRvR2FudHRMaXN0XCIsdj1cImNsaWNrXCIsXz1cIi5cIix5PXt3cmFwcGVyOlwiay10cmVlbGlzdCBrLWdyaWQgay13aWRnZXRcIixoZWFkZXI6XCJrLWhlYWRlclwiLGFsdDpcImstYWx0XCIsZWRpdENlbGw6XCJrLWVkaXQtY2VsbFwiLGdyb3VwOlwiay10cmVlbGlzdC1ncm91cFwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIsZ3JpZENvbnRlbnRXcmFwOlwiay1ncmlkLWNvbnRlbnRcIixzZWxlY3RlZDpcImstc3RhdGUtc2VsZWN0ZWRcIixpY29uOlwiay1pY29uXCIsaWNvbkNvbGxhcHNlOlwiay1pLWNvbGxhcHNlXCIsaWNvbkV4cGFuZDpcImstaS1leHBhbmRcIixpY29uSGlkZGVuOlwiay1pLW5vbmVcIixpY29uUGxhY2VIb2xkZXI6XCJrLWljb24gay1pLW5vbmVcIixpbnB1dDpcImstaW5wdXRcIixkcm9wUG9zaXRpb25zOlwiay1pbnNlcnQtdG9wIGstaW5zZXJ0LWJvdHRvbSBrLWFkZCBrLWluc2VydC1taWRkbGVcIixkcm9wVG9wOlwiay1pbnNlcnQtdG9wXCIsZHJvcEJvdHRvbTpcImstaW5zZXJ0LWJvdHRvbVwiLGRyb3BBZGQ6XCJrLWFkZFwiLGRyb3BNaWRkbGU6XCJrLWluc2VydC1taWRkbGVcIixkcm9wRGVuaWVkOlwiay1kZW5pZWRcIixkcmFnU3RhdHVzOlwiay1kcmFnLXN0YXR1c1wiLGRyYWdDbHVlOlwiay1kcmFnLWNsdWVcIixkcmFnQ2x1ZVRleHQ6XCJrLWNsdWUtdGV4dFwifSx3PWwuR2FudHRMaXN0PWMuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7Yy5mbi5pbml0LmNhbGwodGhpcyxlLHQpLDA9PT10aGlzLm9wdGlvbnMuY29sdW1ucy5sZW5ndGgmJnRoaXMub3B0aW9ucy5jb2x1bW5zLnB1c2goXCJ0aXRsZVwiKSx0aGlzLmRhdGFTb3VyY2U9dGhpcy5vcHRpb25zLmRhdGFTb3VyY2UsdGhpcy5fY29sdW1ucygpLHRoaXMuX2xheW91dCgpLHRoaXMuX2RvbVRyZWVzKCksdGhpcy5faGVhZGVyKCksdGhpcy5fc29ydGFibGUoKSx0aGlzLl9lZGl0YWJsZSgpLHRoaXMuX3NlbGVjdGFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSx0aGlzLl9hdHRhY2hFdmVudHMoKSx0aGlzLl9hZGp1c3RIZWlnaHQoKX0sX2FkanVzdEhlaWdodDpmdW5jdGlvbigpe3RoaXMuY29udGVudC5oZWlnaHQodGhpcy5lbGVtZW50LmhlaWdodCgpLXRoaXMuaGVhZGVyLnBhcmVudCgpLm91dGVySGVpZ2h0KCkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Yy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5fcmVvcmRlckRyYWdnYWJsZSYmdGhpcy5fcmVvcmRlckRyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5fdGFibGVEcm9wQXJlYSYmdGhpcy5fdGFibGVEcm9wQXJlYS5kZXN0cm95KCksdGhpcy5fY29udGVudERyb3BBcmVhJiZ0aGlzLl9jb250ZW50RHJvcEFyZWEuZGVzdHJveSgpLHRoaXMudG91Y2gmJnRoaXMudG91Y2guZGVzdHJveSgpLHRoaXMuY29udGVudC5vZmYobSksdGhpcy5oZWFkZXI9bnVsbCx0aGlzLmNvbnRlbnQ9bnVsbCx0aGlzLmxldmVscz1udWxsLGkuZGVzdHJveSh0aGlzLmVsZW1lbnQpfSxvcHRpb25zOntuYW1lOlwiR2FudHRMaXN0XCIsc2VsZWN0YWJsZTohMCxlZGl0YWJsZTohMH0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj13LnN0eWxlczt0LmNvbnRlbnQub24odittLFwidGQgPiBzcGFuLlwiK24uaWNvbitcIjpub3QoLlwiK24uaWNvbkhpZGRlbitcIilcIixmdW5jdGlvbihuKXt2YXIgaT1lKHRoaXMpLHI9dC5fbW9kZWxGcm9tRWxlbWVudChpKTtyLnNldChcImV4cGFuZGVkXCIsIXIuZ2V0KFwiZXhwYW5kZWRcIikpLG4uc3RvcFByb3BhZ2F0aW9uKCl9KX0sX2RvbVRyZWVzOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJUcmVlPW5ldyByLlRyZWUodGhpcy5oZWFkZXJbMF0pLHRoaXMuY29udGVudFRyZWU9bmV3IHIuVHJlZSh0aGlzLmNvbnRlbnRbMF0pfSxfY29sdW1uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5jb2x1bW5zLHQ9ZnVuY3Rpb24oKXt0aGlzLmZpZWxkPVwiXCIsdGhpcy50aXRsZT1cIlwiLHRoaXMuZWRpdGFibGU9ITEsdGhpcy5zb3J0YWJsZT0hMX07dGhpcy5jb2x1bW5zPXUoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT1cInN0cmluZ1wiPT10eXBlb2YgZT97ZmllbGQ6ZSx0aXRsZTpmW2VdfTplLGQobmV3IHQsZSl9KX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudCx0PXcuc3R5bGVzO2UuYWRkQ2xhc3ModC53cmFwcGVyKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIit0LmdyaWRIZWFkZXIrXCInPjxkaXYgY2xhc3M9J1wiK3QuZ3JpZEhlYWRlcldyYXArXCInPjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIit0LmdyaWRDb250ZW50V3JhcCtcIic+PC9kaXY+XCIpLHRoaXMuaGVhZGVyPWUuZmluZChfK3QuZ3JpZEhlYWRlcldyYXApLHRoaXMuY29udGVudD1lLmZpbmQoXyt0LmdyaWRDb250ZW50KX0sX2hlYWRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaGVhZGVyVHJlZSx0PW8oXCJjb2xncm91cFwiLG51bGwsdGhpcy5fY29scygpKSxuPW8oXCJ0aGVhZFwiLHtyb2xlOlwicm93Z3JvdXBcIn0sW28oXCJ0clwiLHtyb2xlOlwicm93XCJ9LHRoaXMuX3RocygpKV0pLGk9byhcInRhYmxlXCIse3N0eWxlOntcIm1pbi13aWR0aFwiOnRoaXMub3B0aW9ucy5saXN0V2lkdGgrXCJweFwifSxyb2xlOlwiZ3JpZFwifSxbdCxuXSk7ZS5yZW5kZXIoW2ldKX0sX3JlbmRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLGk7dGhpcy5sZXZlbHM9W3tmaWVsZDpudWxsLHZhbHVlOjB9XSx0PW8oXCJjb2xncm91cFwiLG51bGwsdGhpcy5fY29scygpKSxuPW8oXCJ0Ym9keVwiLHtyb2xlOlwicm93Z3JvdXBcIn0sdGhpcy5fdHJzKGUpKSxpPW8oXCJ0YWJsZVwiLHtzdHlsZTp7XCJtaW4td2lkdGhcIjp0aGlzLm9wdGlvbnMubGlzdFdpZHRoK1wicHhcIn0sdGFiSW5kZXg6MCxyb2xlOlwidHJlZWdyaWRcIn0sW3Qsbl0pLHRoaXMuY29udGVudFRyZWUucmVuZGVyKFtpXSksdGhpcy50cmlnZ2VyKFwicmVuZGVyXCIpfSxfdGhzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLmNvbHVtbnMscz1bXTtmb3Iobj0wLGk9ci5sZW5ndGg7aT5uO24rKyllPXJbbl0sdD17XCJkYXRhLWZpZWxkXCI6ZS5maWVsZCxcImRhdGEtdGl0bGVcIjplLnRpdGxlLGNsYXNzTmFtZTp3LnN0eWxlcy5oZWFkZXIscm9sZTpcImNvbHVtbmhlYWRlclwifSxzLnB1c2gobyhcInRoXCIsdCxbYShlLnRpdGxlKV0pKTtyZXR1cm4gc30sX2NvbHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLGE9dGhpcy5jb2x1bW5zLHM9W107Zm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspZT1hW2ldLG49ZS53aWR0aCx0PW4mJjAhPT1wYXJzZUludChuLDEwKT97c3R5bGU6e3dpZHRoOnR5cGVvZiBuPT09Zz9uOm4rXCJweFwifX06bnVsbCxzLnB1c2gobyhcImNvbFwiLHQsW10pKTtyZXR1cm4gc30sX3RyczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGE9W10scz1bXSxsPXcuc3R5bGVzO2ZvcihyPTAsbz1lLmxlbmd0aDtvPnI7cisrKXQ9ZVtyXSxpPXRoaXMuX2xldmVscyh7aWR4OnQucGFyZW50SWQsaWQ6dC5pZCxzdW1tYXJ5OnQuc3VtbWFyeX0pLG49e1wiZGF0YS11aWRcIjp0LnVpZCxcImRhdGEtbGV2ZWxcIjppLHJvbGU6XCJyb3dcIn0sdC5zdW1tYXJ5JiYobltcImFyaWEtZXhwYW5kZWRcIl09dC5leHBhbmRlZCksciUyIT09MCYmcy5wdXNoKGwuYWx0KSx0LnN1bW1hcnkmJnMucHVzaChsLmdyb3VwKSxzLmxlbmd0aCYmKG4uY2xhc3NOYW1lPXMuam9pbihcIiBcIikpLGEucHVzaCh0aGlzLl90ZHMoe3Rhc2s6dCxhdHRyOm4sbGV2ZWw6aX0pKSxzPVtdO3JldHVybiBhfSxfdGRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPVtdLGE9dGhpcy5jb2x1bW5zO2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKXQ9YVtuXSxyLnB1c2godGhpcy5fdGQoe3Rhc2s6ZS50YXNrLGNvbHVtbjp0LGxldmVsOmUubGV2ZWx9KSk7cmV0dXJuIG8oXCJ0clwiLGUuYXR0cixyKX0sX3RkOmZ1bmN0aW9uKGUpe3ZhciBuLHIscz1bXSxsPXRoaXMub3B0aW9ucy5yZXNvdXJjZXNGaWVsZCxjPXcuc3R5bGVzLGQ9ZS50YXNrLHU9ZS5jb2x1bW4saD1kLmdldCh1LmZpZWxkKXx8W107aWYodS5maWVsZD09bCl7Zm9yKG49W10scj0wO2gubGVuZ3RoPnI7cisrKW4ucHVzaChpLmZvcm1hdChcInswfSBbezF9XVwiLGhbcl0uZ2V0KFwibmFtZVwiKSxoW3JdLmdldChcImZvcm1hdGVkVmFsdWVcIikpKTtuPW4uam9pbihcIiwgXCIpfWVsc2Ugbj11LmZvcm1hdD9pLmZvcm1hdCh1LmZvcm1hdCxoKTpoO3JldHVyblwidGl0bGVcIj09PXUuZmllbGQmJihzPXQoe2xldmVsOmUubGV2ZWwsY2xhc3NOYW1lOmMuaWNvblBsYWNlSG9sZGVyfSkscy5wdXNoKG8oXCJzcGFuXCIse2NsYXNzTmFtZTpjLmljb24rXCIgXCIrKGQuc3VtbWFyeT9kLmV4cGFuZGVkP2MuaWNvbkNvbGxhcHNlOmMuaWNvbkV4cGFuZDpjLmljb25IaWRkZW4pfSkpKSxzLnB1c2gobyhcInNwYW5cIixudWxsLFthKG4pXSkpLG8oXCJ0ZFwiLHtyb2xlOlwiZ3JpZGNlbGxcIn0scyl9LF9sZXZlbHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dGhpcy5sZXZlbHMsbz1lLnN1bW1hcnksYT1lLmlkeCxzPWUuaWQ7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspaWYodD1yW25dLHQuZmllbGQ9PWEpcmV0dXJuIG8mJnIucHVzaCh7ZmllbGQ6cyx2YWx1ZTp0LnZhbHVlKzF9KSx0LnZhbHVlfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixvLGE9dGhpcy5vcHRpb25zLnJlc291cmNlc0ZpZWxkLHM9dGhpcy5jb2x1bW5zLGw9dGhpcy5oZWFkZXIuZmluZChcInRoXCIpO2ZvcihyPTAsbz1sLmxlbmd0aDtvPnI7cisrKWU9c1tyXSxlLnNvcnRhYmxlJiZlLmZpZWxkIT09YSYmKG49bC5lcShyKSx0PW4uZGF0YShcImtlbmRvQ29sdW1uU29ydGVyXCIpLHQmJnQuZGVzdHJveSgpLG4uYXR0cihcImRhdGEtXCIraS5ucytcImZpZWxkXCIsZS5maWVsZCkua2VuZG9Db2x1bW5Tb3J0ZXIoe2RhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlfSkpO2w9bnVsbH0sX3NlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49dGhpcy5vcHRpb25zLnNlbGVjdGFibGU7biYmdGhpcy5jb250ZW50Lm9uKHYrbSxcInRyXCIsZnVuY3Rpb24obil7dmFyIGk9ZSh0aGlzKTtuLmN0cmxLZXk/dC5jbGVhclNlbGVjdGlvbigpOnQuc2VsZWN0KGkpfSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRlbnQuZmluZChlKSxuPXcuc3R5bGVzLnNlbGVjdGVkO3JldHVybiB0Lmxlbmd0aD8odC5zaWJsaW5ncyhfK24pLnJlbW92ZUNsYXNzKG4pLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLmVuZCgpLmFkZENsYXNzKG4pLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLHZvaWQgdGhpcy50cmlnZ2VyKFwiY2hhbmdlXCIpKTp0aGlzLmNvbnRlbnQuZmluZChfK24pfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc2VsZWN0KCk7ZS5sZW5ndGgmJihlLnJlbW92ZUNsYXNzKHcuc3R5bGVzLnNlbGVjdGVkKSx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VcIikpfSxfc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2U9ZX0sX2VkaXRhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXcuc3R5bGVzLHI9XCJzcGFuLlwiK2kuaWNvbitcIjpub3QoXCIraS5pY29uSGlkZGVuK1wiKVwiLG89ZnVuY3Rpb24oKXt0LmVkaXRhYmxlJiZ0LmVkaXRhYmxlLmVuZCgpJiZ0Ll9jbG9zZUNlbGwoKX0sYT1mdW5jdGlvbih0KXt2YXIgcj1lKHQuY3VycmVudFRhcmdldCk7ci5oYXNDbGFzcyhpLmVkaXRDZWxsKXx8bigpfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9zdGFydEVkaXRIYW5kbGVyPWZ1bmN0aW9uKG4pe3ZhciBpPW4uY3VycmVudFRhcmdldD9lKG4uY3VycmVudFRhcmdldCk6bixyPXQuX2NvbHVtbkZyb21FbGVtZW50KGkpO3QuZWRpdGFibGV8fHIuZWRpdGFibGUmJnQuX2VkaXRDZWxsKHtjZWxsOmksY29sdW1uOnJ9KX0sdC5jb250ZW50Lm9uKFwiZm9jdXNpblwiK20sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodC50aW1lciksdC50aW1lcj1udWxsfSkub24oXCJmb2N1c291dFwiK20sZnVuY3Rpb24oKXt0LnRpbWVyPXNldFRpbWVvdXQobywxKX0pLm9uKFwia2V5ZG93blwiK20sZnVuY3Rpb24oZSl7dmFyIGkscixhPWUua2V5Q29kZTtzd2l0Y2goYSl7Y2FzZSBwLkVOVEVSOm4oKSxvKCk7YnJlYWs7Y2FzZSBwLkVTQzp0LmVkaXRhYmxlJiYoaT10Ll9lZGl0YWJsZUNvbnRhaW5lcixyPXQuX21vZGVsRnJvbUVsZW1lbnQoaSksdC50cmlnZ2VyKFwiY2FuY2VsXCIse21vZGVsOnIsY2VsbDppfSl8fHQuX2Nsb3NlQ2VsbCghMCkpfX0pLHM/dC50b3VjaD10LmNvbnRlbnQua2VuZG9Ub3VjaCh7ZmlsdGVyOlwidGRcIix0b3VjaHN0YXJ0OmZ1bmN0aW9uKGUpe2EoZS50b3VjaCl9LGRvdWJsZXRhcDpmdW5jdGlvbihuKXtlKG4udG91Y2guaW5pdGlhbFRvdWNoKS5pcyhyKXx8dC5fc3RhcnRFZGl0SGFuZGxlcihuLnRvdWNoKX19KS5kYXRhKFwia2VuZG9Ub3VjaFwiKTp0LmNvbnRlbnQub24oXCJtb3VzZWRvd25cIittLFwidGRcIixmdW5jdGlvbihlKXthKGUpfSkub24oXCJkYmxjbGlja1wiK20sXCJ0ZFwiLGZ1bmN0aW9uKG4pe2Uobi50YXJnZXQpLmlzKHIpfHx0Ll9zdGFydEVkaXRIYW5kbGVyKG4pfSkpfSxfZWRpdENlbGw6ZnVuY3Rpb24odCl7dmFyIG4scj10aGlzLm9wdGlvbnMucmVzb3VyY2VzRmllbGQsbz13LnN0eWxlcyxhPXQuY2VsbCxzPXQuY29sdW1uLGw9dGhpcy5fbW9kZWxGcm9tRWxlbWVudChhKSxjPXRoaXMuZGF0YVNvdXJjZS5fY3JlYXRlTmV3TW9kZWwobC50b0pTT04oKSksZD1jLmZpZWxkc1tzLmZpZWxkXXx8Y1tzLmZpZWxkXSx1PWQudmFsaWRhdGlvbixwPWkuYXR0cihcInR5cGVcIiksZj1pLmF0dHIoXCJiaW5kXCIpLGc9e25hbWU6cy5maWVsZCxyZXF1aXJlZDpkLnZhbGlkYXRpb24/ZC52YWxpZGF0aW9uLnJlcXVpcmVkPT09ITA6ITF9O3JldHVybiBzLmZpZWxkPT09cj92b2lkIHMuZWRpdG9yKGEsYyk6KHRoaXMuX2VkaXRhYmxlQ29udGVudD1hLmNoaWxkcmVuKCkuZGV0YWNoKCksdGhpcy5fZWRpdGFibGVDb250YWluZXI9YSxhLmRhdGEoXCJtb2RlbENvcHlcIixjKSxcImRhdGVcIiE9PWQudHlwZSYmXCJkYXRlXCIhPT1lLnR5cGUoZCl8fCEvSHxtfHN8RnxnfHUvLnRlc3Qocy5mb3JtYXQpfHwoXCJzdGFydFwiPT09cy5maWVsZCYmZGVsZXRlIGQudmFsaWRhdGlvbi5kYXRlQ29tcGFyZSxnW2ZdPVwidmFsdWU6XCIrcy5maWVsZCxnW3BdPVwiZGF0ZVwiLG49ZnVuY3Rpb24odCxuKXtlKCc8aW5wdXQgdHlwZT1cInRleHRcIi8+JykuYXR0cihnKS5hcHBlbmRUbyh0KS5rZW5kb0RhdGVUaW1lUGlja2VyKHtmb3JtYXQ6bi5mb3JtYXR9KX0pLHRoaXMuZWRpdGFibGU9YS5hZGRDbGFzcyhvLmVkaXRDZWxsKS5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6e2ZpZWxkOnMuZmllbGQsZm9ybWF0OnMuZm9ybWF0LGVkaXRvcjpzLmVkaXRvcnx8bn0sbW9kZWw6YyxjbGVhckNvbnRhaW5lcjohMX0pLmRhdGEoXCJrZW5kb0VkaXRhYmxlXCIpLHUmJnUuZGF0ZUNvbXBhcmUmJmgodS5kYXRlQ29tcGFyZSkmJnUubWVzc2FnZSYmKGUoXCI8c3BhbiBcIitpLmF0dHIoXCJmb3JcIikrJz1cIicrcy5maWVsZCsnXCIgY2xhc3M9XCJrLWludmFsaWQtbXNnXCIvPicpLmhpZGUoKS5hcHBlbmRUbyhhKSxhLmZpbmQoXCJbbmFtZT1cIitzLmZpZWxkK1wiXVwiKS5hdHRyKGkuYXR0cihcImRhdGVDb21wYXJlLW1zZ1wiKSx1Lm1lc3NhZ2UpKSx2b2lkKHRoaXMudHJpZ2dlcihcImVkaXRcIix7bW9kZWw6bCxjZWxsOmF9KSYmdGhpcy5fY2xvc2VDZWxsKCEwKSkpfSxfY2xvc2VDZWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXcuc3R5bGVzLG49dGhpcy5fZWRpdGFibGVDb250YWluZXIsaT10aGlzLl9tb2RlbEZyb21FbGVtZW50KG4pLHI9dGhpcy5fY29sdW1uRnJvbUVsZW1lbnQobiksbz1yLmZpZWxkLGE9bi5kYXRhKFwibW9kZWxDb3B5XCIpLHM9e307c1tvXT1hLmdldChvKSxuLmVtcHR5KCkucmVtb3ZlRGF0YShcIm1vZGVsQ29weVwiKS5yZW1vdmVDbGFzcyh0LmVkaXRDZWxsKS5hcHBlbmQodGhpcy5fZWRpdGFibGVDb250ZW50KSx0aGlzLmVkaXRhYmxlLmRlc3Ryb3koKSx0aGlzLmVkaXRhYmxlPW51bGwsdGhpcy5fZWRpdGFibGVDb250YWluZXI9bnVsbCx0aGlzLl9lZGl0YWJsZUNvbnRlbnQ9bnVsbCxlfHwoXCJzdGFydFwiPT09byYmKHMuZW5kPW5ldyBEYXRlKHMuc3RhcnQuZ2V0VGltZSgpK2kuZHVyYXRpb24oKSkpLHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiLHt0YXNrOmksdXBkYXRlSW5mbzpzfSkpfSxfZHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9bnVsbCxvPSEwLGE9dy5zdHlsZXMsbD1cInRyW1wiK2kuYXR0cihcImxldmVsXCIpK1wiID0gMF06bGFzdFwiLGM9e30sdT1mdW5jdGlvbigpe3I9bnVsbCx0PW51bGwsbz0hMCxjPXt9fSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lO3Q7KXtpZihyLmdldChcImlkXCIpPT09dC5nZXQoXCJpZFwiKSl7bz0hMTticmVha310PW4uZGF0YVNvdXJjZS50YXNrUGFyZW50KHQpfX0scD1mdW5jdGlvbigpe3ZhciBuPWUodCkuaGVpZ2h0KCkscj1pLmdldE9mZnNldCh0KS50b3A7ZCh0LHtiZWZvcmVMaW1pdDpyKy4yNSpuLGFmdGVyTGltaXQ6cisuNzUqbn0pfSxmPWZ1bmN0aW9uKGUpe3ZhciBuLHI9ZS5sb2NhdGlvbixvPWEuZHJvcEFkZCxzPVwiYWRkXCIsbD1wYXJzZUludCh0LmF0dHIoaS5hdHRyKFwibGV2ZWxcIikpLDEwKTt0LmJlZm9yZUxpbWl0Pj1yPyhuPXQucHJldigpLG89YS5kcm9wVG9wLHM9XCJpbnNlcnQtYmVmb3JlXCIpOnI+PXQuYWZ0ZXJMaW1pdCYmKG49dC5uZXh0KCksbz1hLmRyb3BCb3R0b20scz1cImluc2VydC1hZnRlclwiKSxuJiZwYXJzZUludChuLmF0dHIoaS5hdHRyKFwibGV2ZWxcIikpLDEwKT09PWwmJihvPWEuZHJvcE1pZGRsZSksYy5jbGFzc05hbWU9byxjLmNvbW1hbmQ9c30sZz1mdW5jdGlvbigpe3JldHVybiBuLl9yZW9yZGVyRHJhZ2dhYmxlLmhpbnQuY2hpbGRyZW4oXythLmRyYWdTdGF0dXMpLnJlbW92ZUNsYXNzKGEuZHJvcFBvc2l0aW9ucyl9O3RoaXMub3B0aW9ucy5lZGl0YWJsZSYmKHRoaXMuX3Jlb3JkZXJEcmFnZ2FibGU9dGhpcy5jb250ZW50LmtlbmRvRHJhZ2dhYmxlKHtkaXN0YW5jZToxMCxob2xkVG9EcmFnOnMsZ3JvdXA6XCJsaXN0R3JvdXBcIixmaWx0ZXI6XCJ0cltkYXRhLXVpZF1cIixpZ25vcmU6XythLmlucHV0LGhpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUoJzxkaXYgY2xhc3M9XCInK2EuaGVhZGVyK1wiIFwiK2EuZHJhZ0NsdWUrJ1wiLz4nKS5jc3Moe3dpZHRoOjMwMCxwYWRkaW5nTGVmdDp0LmNzcyhcInBhZGRpbmdMZWZ0XCIpLHBhZGRpbmdSaWdodDp0LmNzcyhcInBhZGRpbmdSaWdodFwiKSxsaW5lSGVpZ2h0OnQuaGVpZ2h0KCkrXCJweFwiLHBhZGRpbmdUb3A6dC5jc3MoXCJwYWRkaW5nVG9wXCIpLHBhZGRpbmdCb3R0b206dC5jc3MoXCJwYWRkaW5nQm90dG9tXCIpfSkuYXBwZW5kKCc8c3BhbiBjbGFzcz1cIicrYS5pY29uK1wiIFwiK2EuZHJhZ1N0YXR1cysnXCIgLz48c3BhbiBjbGFzcz1cIicrYS5kcmFnQ2x1ZVRleHQrJ1wiLz4nKX0sY3Vyc29yT2Zmc2V0Ont0b3A6LTIwLGxlZnQ6MH0sY29udGFpbmVyOnRoaXMuY29udGVudCxkcmFnc3RhcnQ6ZnVuY3Rpb24oZSl7bi5lZGl0YWJsZSYmZS5wcmV2ZW50RGVmYXVsdCgpLHI9bi5fbW9kZWxGcm9tRWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLHRoaXMuaGludC5jaGlsZHJlbihfK2EuZHJhZ0NsdWVUZXh0KS50ZXh0KHIuZ2V0KFwidGl0bGVcIikpfSxkcmFnOmZ1bmN0aW9uKGUpe28mJihmKGUueSksZygpLmFkZENsYXNzKGMuY2xhc3NOYW1lKSl9LGRyYWdlbmQ6ZnVuY3Rpb24oKXt1KCl9LGRyYWdjYW5jZWw6ZnVuY3Rpb24oKXt1KCl9fSkuZGF0YShcImtlbmRvRHJhZ2dhYmxlXCIpLHRoaXMuX3RhYmxlRHJvcEFyZWE9dGhpcy5jb250ZW50LmtlbmRvRHJvcFRhcmdldEFyZWEoe2Rpc3RhbmNlOjAsZ3JvdXA6XCJsaXN0R3JvdXBcIixmaWx0ZXI6XCJ0cltkYXRhLXVpZF1cIixkcmFnZW50ZXI6ZnVuY3Rpb24oZSl7dD1lLmRyb3BUYXJnZXQsaChuLl9tb2RlbEZyb21FbGVtZW50KHQpKSxwKCksZygpLnRvZ2dsZUNsYXNzKGEuZHJvcERlbmllZCwhbyl9LGRyYWdsZWF2ZTpmdW5jdGlvbigpe289ITAsZygpfSxkcm9wOmZ1bmN0aW9uKCl7dmFyIGU9bi5fbW9kZWxGcm9tRWxlbWVudCh0KSxpPWUub3JkZXJJZCxhPXtwYXJlbnRJZDplLnBhcmVudElkfTtpZihvKXtzd2l0Y2goYy5jb21tYW5kKXtjYXNlXCJhZGRcIjphLnBhcmVudElkPWUuaWQ7YnJlYWs7Y2FzZVwiaW5zZXJ0LWJlZm9yZVwiOmEub3JkZXJJZD1lLnBhcmVudElkPT09ci5wYXJlbnRJZCYmZS5vcmRlcklkPnIub3JkZXJJZD9pLTE6aTticmVhaztjYXNlXCJpbnNlcnQtYWZ0ZXJcIjphLm9yZGVySWQ9ZS5wYXJlbnRJZD09PXIucGFyZW50SWQmJmUub3JkZXJJZD5yLm9yZGVySWQ/aTppKzF9bi50cmlnZ2VyKFwidXBkYXRlXCIse3Rhc2s6cix1cGRhdGVJbmZvOmF9KX19fSkuZGF0YShcImtlbmRvRHJvcFRhcmdldEFyZWFcIiksdGhpcy5fY29udGVudERyb3BBcmVhPXRoaXMuZWxlbWVudC5rZW5kb0Ryb3BUYXJnZXRBcmVhKHtkaXN0YW5jZTowLGdyb3VwOlwibGlzdEdyb3VwXCIsZmlsdGVyOl8rYS5ncmlkQ29udGVudCxkcm9wOmZ1bmN0aW9uKCl7dmFyIGU9bi5fbW9kZWxGcm9tRWxlbWVudChuLmNvbnRlbnQuZmluZChsKSksdD1lLm9yZGVySWQsaT17cGFyZW50SWQ6bnVsbCxvcmRlcklkOm51bGwhPT1yLnBhcmVudElkP3QrMTp0fTtuLnRyaWdnZXIoXCJ1cGRhdGVcIix7dGFzazpyLHVwZGF0ZUluZm86aX0pfX0pLmRhdGEoXCJrZW5kb0Ryb3BUYXJnZXRBcmVhXCIpKX0sX21vZGVsRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9zZXN0KFwidHJcIiksbj10aGlzLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC5hdHRyKGkuYXR0cihcInVpZFwiKSkpO3JldHVybiBufSxfY29sdW1uRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9zZXN0KFwidGRcIiksbj10LnBhcmVudCgpLGk9bi5jaGlsZHJlbigpLmluZGV4KHQpO3JldHVybiB0aGlzLmNvbHVtbnNbaV19fSk7ZCghMCxsLkdhbnR0TGlzdCx7c3R5bGVzOnl9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZGVsZXRlIGUubmFtZSxkZWxldGUgZS5wcmVmaXgsZGVsZXRlIGUudmlld3MsZX1mdW5jdGlvbiBuKGUpe3ZhciB0PVtdLG49ZS53b3JrV2Vla1N0YXJ0O2Zvcih0LnB1c2gobik7ZS53b3JrV2Vla0VuZCE9bjspbj42P24tPTc6bisrLHQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBpKCl7dmFyIHQ9a2VuZG8uX2FjdGl2ZUVsZW1lbnQoKTtcImJvZHlcIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmZSh0KS5ibHVyKCl9dmFyIHIsbyxhPWtlbmRvLnVpLldpZGdldCxzPWtlbmRvLmRvbS5lbGVtZW50LGw9a2VuZG8uZG9tLnRleHQsYz1lLmlzUGxhaW5PYmplY3QsZD1lLmV4dGVuZCx1PWtlbmRvLnN1cHBvcnQuYnJvd3NlcixoPWtlbmRvLmtleXMscD1rZW5kby5kYXRhLlF1ZXJ5LGY9XCIua2VuZG9HYW50dFRpbWVsaW5lXCIsZz1cImNsaWNrXCIsbT1cImRibGNsaWNrXCIsdj1cImtleWRvd25cIixfPVwiLlwiLHk9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAndCcpI1wiKSx3PWtlbmRvLnRlbXBsYXRlKFwiIz1rZW5kby50b1N0cmluZyhzdGFydCwgJ2RkZCBNL2RkJykjXCIpLGI9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAnZGRkIE0vZGQnKSMgLSAjPWtlbmRvLnRvU3RyaW5nKGtlbmRvLmRhdGUuYWRkRGF5cyhlbmQsIC0xKSwgJ2RkZCBNL2RkJykjXCIpLGs9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAnTU1NJykjXCIpLHg9a2VuZG8udGVtcGxhdGUoXCIjPWtlbmRvLnRvU3RyaW5nKHN0YXJ0LCAneXl5eScpI1wiKSxDPWtlbmRvLnRlbXBsYXRlKCc8ZGl2IGNsYXNzPVwiIz1zdHlsZXMubWFycXVlZSNcIj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMubWFycXVlZUNvbG9yI1wiPjwvZGl2PjwvZGl2PicpLFM9a2VuZG8udGVtcGxhdGUoJzxkaXYgc3R5bGU9XCJ6LWluZGV4OiAxMDAwMDI7XCIgY2xhc3M9XCIjPXN0eWxlcy50b29sdGlwV3JhcHBlciNcIj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENvbnRlbnQjXCI+PGRpdj5TdGFydDogIz1rZW5kby50b1N0cmluZyhzdGFydCwgXCJkZGQgTS9kZCBISDptbVwiKSM8L2Rpdj48ZGl2PkVuZDogIz1rZW5kby50b1N0cmluZyhlbmQsIFwiZGRkIE0vZGQgSEg6bW1cIikjPC9kaXY+PC9kaXY+PC9kaXY+JyksVD1rZW5kby50ZW1wbGF0ZSgnPGRpdiBzdHlsZT1cInotaW5kZXg6IDEwMDAwMjtcIiBjbGFzcz1cIiM9c3R5bGVzLnRvb2x0aXBXcmFwcGVyI1wiID48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENvbnRlbnQjXCI+Iz10ZXh0IyU8L2Rpdj48ZGl2IGNsYXNzPVwiIz1zdHlsZXMudG9vbHRpcENhbGxvdXQjXCIgc3R5bGU9XCJsZWZ0OjEzcHg7XCI+PC9kaXY+PC9kaXY+JyksRD17ZGF5Ont0eXBlOlwia2VuZG8udWkuR2FudHREYXlWaWV3XCJ9LHdlZWs6e3R5cGU6XCJrZW5kby51aS5HYW50dFdlZWtWaWV3XCJ9LG1vbnRoOnt0eXBlOlwia2VuZG8udWkuR2FudHRNb250aFZpZXdcIn0seWVhcjp7dHlwZTpcImtlbmRvLnVpLkdhbnR0WWVhclZpZXdcIn19LEE9e2FsdDpcImstYWx0XCIsbm9uV29ya2luZzpcImstbm9ud29yay1ob3VyXCIsaGVhZGVyOlwiay1oZWFkZXJcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLHJvd3NUYWJsZTpcImstZ2FudHQtcm93c1wiLGNvbHVtbnNUYWJsZTpcImstZ2FudHQtY29sdW1uc1wiLHRhc2tzVGFibGU6XCJrLWdhbnR0LXRhc2tzXCIscmVzb3VyY2U6XCJrLXJlc291cmNlXCIscmVzb3VyY2VBbHQ6XCJrLXJlc291cmNlIGstYWx0XCIsdGFzazpcImstdGFza1wiLHRhc2tTaW5nbGU6XCJrLXRhc2stc2luZ2xlXCIsdGFza01pbGVzdG9uZTpcImstdGFzay1taWxlc3RvbmVcIix0YXNrU3VtbWFyeTpcImstdGFzay1zdW1tYXJ5XCIsdGFza1dyYXA6XCJrLXRhc2std3JhcFwiLHRhc2tNaWxlc3RvbmVXcmFwOlwiay1taWxlc3RvbmUtd3JhcFwiLHJlc291cmNlc1dyYXA6XCJrLXJlc291cmNlcy13cmFwXCIsdGFza0RvdDpcImstdGFzay1kb3RcIix0YXNrRG90U3RhcnQ6XCJrLXRhc2stc3RhcnRcIix0YXNrRG90RW5kOlwiay10YXNrLWVuZFwiLHRhc2tEcmFnSGFuZGxlOlwiay10YXNrLWRyYWdoYW5kbGVcIix0YXNrQ29udGVudDpcImstdGFzay1jb250ZW50XCIsdGFza1RlbXBsYXRlOlwiay10YXNrLXRlbXBsYXRlXCIsdGFza0FjdGlvbnM6XCJrLXRhc2stYWN0aW9uc1wiLHRhc2tEZWxldGU6XCJrLXRhc2stZGVsZXRlXCIsdGFza0NvbXBsZXRlOlwiay10YXNrLWNvbXBsZXRlXCIsbGluazpcImstbGlua1wiLGljb246XCJrLWljb25cIixpY29uRGVsZXRlOlwiay1zaS1jbG9zZVwiLHRhc2tSZXNpemVIYW5kbGU6XCJrLXJlc2l6ZS1oYW5kbGVcIix0YXNrUmVzaXplSGFuZGxlV2VzdDpcImstcmVzaXplLXdcIix0YXNrUmVzaXplSGFuZGxlRWFzdDpcImstcmVzaXplLWVcIix0YXNrU3VtbWFyeVByb2dyZXNzOlwiay10YXNrLXN1bW1hcnktcHJvZ3Jlc3NcIix0YXNrU3VtbWFyeUNvbXBsZXRlOlwiay10YXNrLXN1bW1hcnktY29tcGxldGVcIixsaW5lOlwiay1saW5lXCIsbGluZUhvcml6b250YWw6XCJrLWxpbmUtaFwiLGxpbmVWZXJ0aWNhbDpcImstbGluZS12XCIsYXJyb3dXZXN0Olwiay1hcnJvdy13XCIsYXJyb3dFYXN0Olwiay1hcnJvdy1lXCIsZHJhZ0hpbnQ6XCJrLWRyYWctaGludFwiLGRlcGVuZGVuY3lIaW50Olwiay1kZXBlbmRlbmN5LWhpbnRcIix0b29sdGlwV3JhcHBlcjpcImstd2lkZ2V0IGstdG9vbHRpcCBrLXBvcHVwIGstZ3JvdXAgay1yZXNldFwiLHRvb2x0aXBDb250ZW50Olwiay10b29sdGlwLWNvbnRlbnRcIix0b29sdGlwQ2FsbG91dDpcImstY2FsbG91dCBrLWNhbGxvdXQtc1wiLGNhbGxvdXQ6XCJrLWNhbGxvdXRcIixtYXJxdWVlOlwiay1tYXJxdWVlIGstZ2FudHQtbWFycXVlZVwiLG1hcnF1ZWVDb2xvcjpcImstbWFycXVlZS1jb2xvclwifSxFPWtlbmRvLnVpLkdhbnR0Vmlldz1hLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlLHQpe2EuZm4uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLnRpdGxlPXRoaXMub3B0aW9ucy50aXRsZXx8dGhpcy5vcHRpb25zLm5hbWUsdGhpcy5oZWFkZXI9dGhpcy5lbGVtZW50LmZpbmQoXytFLnN0eWxlcy5ncmlkSGVhZGVyKSx0aGlzLmNvbnRlbnQ9dGhpcy5lbGVtZW50LmZpbmQoXytFLnN0eWxlcy5ncmlkQ29udGVudCksdGhpcy5jb250ZW50V2lkdGg9dGhpcy5jb250ZW50LndpZHRoKCksdGhpcy5fd29ya0RheXM9bih0aGlzLm9wdGlvbnMpLHRoaXMuX2hlYWRlclRyZWU9dC5oZWFkZXJUcmVlLHRoaXMuX3Rhc2tUcmVlPXQudGFza1RyZWUsdGhpcy5fZGVwZW5kZW5jeVRyZWU9dC5kZXBlbmRlbmN5VHJlZSx0aGlzLl90YXNrQ29vcmRpbmF0ZXM9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXthLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKSx0aGlzLmhlYWRlclJvdz1udWxsLHRoaXMuaGVhZGVyPW51bGwsdGhpcy5jb250ZW50PW51bGwsdGhpcy5fZHJhZ0hpbnQ9bnVsbCx0aGlzLl9yZXNpemVIaW50PW51bGwsdGhpcy5fcmVzaXplVG9vbHRpcD1udWxsLHRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9bnVsbCx0aGlzLl9oZWFkZXJUcmVlPW51bGwsdGhpcy5fdGFza1RyZWU9bnVsbCx0aGlzLl9kZXBlbmRlbmN5VHJlZT1udWxsfSxvcHRpb25zOntzaG93V29ya0hvdXJzOiExLHNob3dXb3JrRGF5czohMSx3b3JrRGF5U3RhcnQ6bmV3IERhdGUoMTk4MCwxLDEsOCwwLDApLHdvcmtEYXlFbmQ6bmV3IERhdGUoMTk4MCwxLDEsMTcsMCwwKSx3b3JrV2Vla1N0YXJ0OjEsd29ya1dlZWtFbmQ6NSxob3VyU3BhbjoxLHNsb3RTaXplOjEwMH0scmVuZGVyTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5fc2xvdHM9dGhpcy5fY3JlYXRlU2xvdHMoKSx0aGlzLl90YWJsZVdpZHRoPXRoaXMuX2NhbGN1bGF0ZVRhYmxlV2lkdGgoKSx0aGlzLmNyZWF0ZUxheW91dCh0aGlzLl9sYXlvdXQoKSksdGhpcy5fc2xvdERpbWVuc2lvbnMoKSx0aGlzLl9hZGp1c3RIZWlnaHQoKX0sX2FkanVzdEhlaWdodDpmdW5jdGlvbigpe3RoaXMuY29udGVudC5oZWlnaHQodGhpcy5lbGVtZW50LmhlaWdodCgpLXRoaXMuaGVhZGVyLm91dGVySGVpZ2h0KCkpfSxjcmVhdGVMYXlvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5faGVhZGVycyhlKSxuPXRoaXMuX2NvbGdyb3VwKCksaT10aGlzLl9oZWFkZXJUcmVlLHI9cyhcInRoZWFkXCIsbnVsbCx0KSxvPXMoXCJ0YWJsZVwiLHtzdHlsZTp7d2lkdGg6dGhpcy5fdGFibGVXaWR0aCtcInB4XCJ9fSxbbixyXSk7aS5yZW5kZXIoW29dKSx0aGlzLmhlYWRlclJvdz10aGlzLmhlYWRlci5maW5kKFwidGFibGU6Zmlyc3QgdHJcIikubGFzdCgpfSxfc2xvdERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPXRoaXMuaGVhZGVyUm93WzBdLmNoaWxkcmVuLG89dGhpcy5fdGltZVNsb3RzKCk7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspdD1yW25dLGU9b1tuXSxlLm9mZnNldExlZnQ9dC5vZmZzZXRMZWZ0LGUub2Zmc2V0V2lkdGg9dC5vZmZzZXRXaWR0aH0scmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5sZW5ndGgsaT1FLnN0eWxlcyxyPXRoaXMuX3Jvd3NUYWJsZShuKSxvPXRoaXMuX2NvbHVtbnNUYWJsZShuKSxhPXRoaXMuX3Rhc2tzVGFibGUoZSk7dGhpcy5fdGFza1RyZWUucmVuZGVyKFtyLG8sYV0pLHQ9dGhpcy5jb250ZW50LmZpbmQoXytpLnJvd3NUYWJsZSksdGhpcy5fY29udGVudEhlaWdodD10LmhlaWdodCgpLHRoaXMuX3Jvd0hlaWdodD10LmZpbmQoXCJ0clwiKS5oZWlnaHQoKSx0aGlzLmNvbnRlbnQuZmluZChfK2kuY29sdW1uc1RhYmxlKS5oZWlnaHQodGhpcy5fY29udGVudEhlaWdodCl9LF9yb3dzVGFibGU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVtdLHI9RS5zdHlsZXMsbz1bbnVsbCx7Y2xhc3NOYW1lOnIuYWx0fV07Zm9yKG49MDtlPm47bisrKXQ9cyhcInRyXCIsb1tuJTJdLFtzKFwidGRcIixudWxsLFtsKFwiwqBcIildKV0pLGkucHVzaCh0KTtyZXR1cm4gdGhpcy5fY3JlYXRlVGFibGUoMSxpLHtjbGFzc05hbWU6ci5yb3dzVGFibGV9KX0sX2NvbHVtbnNUYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz1bXSxhPUUuc3R5bGVzLGM9dGhpcy5fdGltZVNsb3RzKCksZD1jLmxlbmd0aCx1PTA7Zm9yKHI9MDtkPnI7cisrKXQ9Y1tyXSxpPXt9LG49dC5zcGFuLHUrPW4sMSE9PW4mJihpLmNvbHNwYW49biksdC5pc05vbldvcmtpbmcmJihpLmNsYXNzTmFtZT1hLm5vbldvcmtpbmcpLG8ucHVzaChzKFwidGRcIixpLFtsKFwiwqBcIildKSk7cmV0dXJuIGU9cyhcInRyXCIsbnVsbCxvKSx0aGlzLl9jcmVhdGVUYWJsZSh1LFtlXSx7Y2xhc3NOYW1lOmEuY29sdW1uc1RhYmxlfSl9LF90YXNrc1RhYmxlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLG8sYSxsLGM9W10sZD1FLnN0eWxlcyx1PXRoaXMuX3Rhc2tDb29yZGluYXRlcz17fSxoPXRoaXMuX2NhbGN1bGF0ZU1pbGVzdG9uZVdpZHRoKCkscD1NYXRoLnJvdW5kKGgud2lkdGgpLGY9dGhpcy5vcHRpb25zLnJlc291cmNlc0ZpZWxkLGc9W2QucmVzb3VyY2UsZC5yZXNvdXJjZUFsdF0sbT10aGlzLl9jYWxjdWxhdGVSZXNvdXJjZXNNYXJnaW4oKSx2PWZ1bmN0aW9uKGUpe3ZhciB0PWkubGVmdCxuPXQraS53aWR0aDtyLmlzTWlsZXN0b25lKCkmJih0LT1wLzIsbj10K3ApLHVbci5pZF09e3N0YXJ0OnQsZW5kOm4scm93SW5kZXg6ZX19O2ZvcihhPTAsbD1lLmxlbmd0aDtsPmE7YSsrKXI9ZVthXSxpPXRoaXMuX3Rhc2tQb3NpdGlvbihyKSx0PXMoXCJ0clwiLG51bGwpLG49cyhcInRkXCIsbnVsbCxbdGhpcy5fcmVuZGVyVGFzayhlW2FdLGkpXSkscltmXSYmcltmXS5sZW5ndGgmJihvPU1hdGgubWF4KGkud2lkdGh8fGguY2xpZW50V2lkdGgsMCkraS5sZWZ0LG4uY2hpbGRyZW4ucHVzaChzKFwiZGl2XCIse2NsYXNzTmFtZTpkLnJlc291cmNlc1dyYXAsc3R5bGU6e2xlZnQ6bytcInB4XCIsd2lkdGg6dGhpcy5fdGFibGVXaWR0aC0obyttKStcInB4XCJ9fSx0aGlzLl9yZW5kZXJSZXNvdXJjZXMocltmXSxnW2ElMl0pKSkpLHQuY2hpbGRyZW4ucHVzaChuKSxjLnB1c2godCksdihhKTtyZXR1cm4gdGhpcy5fY3JlYXRlVGFibGUoMSxjLHtjbGFzc05hbWU6RS5zdHlsZXMudGFza3NUYWJsZX0pfSxfY3JlYXRlVGFibGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPVtdO2ZvcihvPTA7ZT5vO28rKylhLnB1c2gocyhcImNvbFwiKSk7cmV0dXJuIGk9cyhcImNvbGdyb3VwXCIsbnVsbCxhKSxyPXMoXCJ0Ym9keVwiLG51bGwsdCksbi5zdHlsZXx8KG4uc3R5bGU9e30pLG4uc3R5bGUud2lkdGg9dGhpcy5fdGFibGVXaWR0aCtcInB4XCIscyhcInRhYmxlXCIsbixbaSxyXSl9LF9jYWxjdWxhdGVUYWJsZVdpZHRoOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLl90aW1lU2xvdHMoKSxvPTAsYT0wO2ZvcihuPTAsaT1yLmxlbmd0aDtpPm47bisrKWU9cltuXS5zcGFuLGErPWUsZT5vJiYobz1lKTtyZXR1cm4gdD1NYXRoLnJvdW5kKGEqdGhpcy5vcHRpb25zLnNsb3RTaXplL28pfSxfY2FsY3VsYXRlTWlsZXN0b25lV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdCxuPUUuc3R5bGVzLnRhc2srXCIgXCIrRS5zdHlsZXMudGFza01pbGVzdG9uZSxpPWUoXCI8ZGl2IGNsYXNzPSdcIituK1wiJyBzdHlsZT0ndmlzaWJpbGl0eTogaGlkZGVuOyBwb3NpdGlvbjogYWJzb2x1dGUnPlwiKTtyZXR1cm4gdGhpcy5jb250ZW50LmFwcGVuZChpKSx0PXt3aWR0aDppWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLGNsaWVudFdpZHRoOmlbMF0uY2xpZW50V2lkdGh9LGkucmVtb3ZlKCksdH0sX2NhbGN1bGF0ZVJlc291cmNlc01hcmdpbjpmdW5jdGlvbigpe3ZhciB0LG49ZShcIjxkaXYgY2xhc3M9J1wiK0Uuc3R5bGVzLnJlc291cmNlc1dyYXArXCInIHN0eWxlPSd2aXNpYmlsaXR5OiBoaWRkZW47IHBvc2l0aW9uOiBhYnNvbHV0ZSc+XCIpO3JldHVybiB0aGlzLmNvbnRlbnQuYXBwZW5kKG4pLHQ9cGFyc2VJbnQobi5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCksbi5yZW1vdmUoKSx0fSxfcmVuZGVyVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPXRoaXMub3B0aW9ucy5lZGl0YWJsZSxhPXQubGVmdCxsPUUuc3R5bGVzLGM9bC50YXNrV3JhcDtyZXR1cm4gZS5zdW1tYXJ5P2k9dGhpcy5fcmVuZGVyU3VtbWFyeShlLHQpOmUuaXNNaWxlc3RvbmUoKT8oaT10aGlzLl9yZW5kZXJNaWxlc3RvbmUoZSx0KSxjKz1cIiBcIitsLnRhc2tNaWxlc3RvbmVXcmFwKTppPXRoaXMuX3JlbmRlclNpbmdsZVRhc2soZSx0KSxuPXMoXCJkaXZcIix7Y2xhc3NOYW1lOmMsc3R5bGU6e2xlZnQ6YStcInB4XCJ9fSxbaV0pLG8mJihuLmNoaWxkcmVuLnB1c2gocyhcImRpdlwiLHtjbGFzc05hbWU6bC50YXNrRG90K1wiIFwiK2wudGFza0RvdFN0YXJ0fSkpLG4uY2hpbGRyZW4ucHVzaChzKFwiZGl2XCIse2NsYXNzTmFtZTpsLnRhc2tEb3QrXCIgXCIrbC50YXNrRG90RW5kfSkpKSxlLnN1bW1hcnl8fGUuaXNNaWxlc3RvbmUoKXx8IW98fChyPU1hdGgucm91bmQodC53aWR0aCplLnBlcmNlbnRDb21wbGV0ZSksbi5jaGlsZHJlbi5wdXNoKHMoXCJkaXZcIix7Y2xhc3NOYW1lOmwudGFza0RyYWdIYW5kbGUsc3R5bGU6e2xlZnQ6citcInB4XCJ9fSkpKSxufSxfcmVuZGVyU2luZ2xlVGFzazpmdW5jdGlvbihlLHQpe3ZhciBuLGk9RS5zdHlsZXMscj1NYXRoLnJvdW5kKHQud2lkdGgqZS5wZXJjZW50Q29tcGxldGUpLG89cyhcImRpdlwiLHtjbGFzc05hbWU6aS50YXNrQ29udGVudH0sW3MoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFza1RlbXBsYXRlfSxbbChlLnRpdGxlKV0pXSk7cmV0dXJuIHRoaXMub3B0aW9ucy5lZGl0YWJsZSYmKG8uY2hpbGRyZW4ucHVzaChzKFwic3BhblwiLHtjbGFzc05hbWU6aS50YXNrQWN0aW9uc30sW3MoXCJhXCIse2NsYXNzTmFtZTppLmxpbmsrXCIgXCIraS50YXNrRGVsZXRlLGhyZWY6XCIjXCJ9LFtzKFwic3BhblwiLHtjbGFzc05hbWU6aS5pY29uK1wiIFwiK2kuaWNvbkRlbGV0ZX0pXSldKSksby5jaGlsZHJlbi5wdXNoKHMoXCJzcGFuXCIse2NsYXNzTmFtZTppLnRhc2tSZXNpemVIYW5kbGUrXCIgXCIraS50YXNrUmVzaXplSGFuZGxlV2VzdH0pKSxvLmNoaWxkcmVuLnB1c2gocyhcInNwYW5cIix7Y2xhc3NOYW1lOmkudGFza1Jlc2l6ZUhhbmRsZStcIiBcIitpLnRhc2tSZXNpemVIYW5kbGVFYXN0fSkpKSxuPXMoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFzaytcIiBcIitpLnRhc2tTaW5nbGUsXCJkYXRhLXVpZFwiOmUudWlkLHN0eWxlOnt3aWR0aDpNYXRoLm1heCh0LndpZHRoLTIsMCkrXCJweFwifX0sW3MoXCJkaXZcIix7Y2xhc3NOYW1lOmkudGFza0NvbXBsZXRlLHN0eWxlOnt3aWR0aDpyK1wicHhcIn19KSxvXSl9LF9yZW5kZXJNaWxlc3RvbmU6ZnVuY3Rpb24oZSl7dmFyIHQ9RS5zdHlsZXMsbj1zKFwiZGl2XCIse2NsYXNzTmFtZTp0LnRhc2srXCIgXCIrdC50YXNrTWlsZXN0b25lLFwiZGF0YS11aWRcIjplLnVpZH0pO3JldHVybiBufSxfcmVuZGVyU3VtbWFyeTpmdW5jdGlvbihlLHQpe3ZhciBuPUUuc3R5bGVzLGk9TWF0aC5yb3VuZCh0LndpZHRoKmUucGVyY2VudENvbXBsZXRlKSxyPXMoXCJkaXZcIix7Y2xhc3NOYW1lOm4udGFzaytcIiBcIituLnRhc2tTdW1tYXJ5LFwiZGF0YS11aWRcIjplLnVpZCxzdHlsZTp7d2lkdGg6dC53aWR0aCtcInB4XCJ9fSxbcyhcImRpdlwiLHtjbGFzc05hbWU6bi50YXNrU3VtbWFyeVByb2dyZXNzLHN0eWxlOnt3aWR0aDppK1wicHhcIn19LFtzKFwiZGl2XCIse2NsYXNzTmFtZTpuLnRhc2tTdW1tYXJ5Q29tcGxldGUsc3R5bGU6e3dpZHRoOnQud2lkdGgrXCJweFwifX0pXSldKTtyZXR1cm4gcn0sX3JlbmRlclJlc291cmNlczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdO2ZvcihpPTAscj1lLmxlbmd0aDtyPmk7aSsrKW49ZVtpXSxvLnB1c2gocyhcInNwYW5cIix7Y2xhc3NOYW1lOnQsc3R5bGU6e2NvbG9yOm4uZ2V0KFwiY29sb3JcIil9fSxbbChuLmdldChcIm5hbWVcIikpXSkpO3JldHVybiBvfSxfdGFza1Bvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgucm91bmQsbj10KHRoaXMuX29mZnNldChlLnN0YXJ0KSksaT10KHRoaXMuX29mZnNldChlLmVuZCkpO3JldHVybntsZWZ0Om4sd2lkdGg6aS1ufX0sX29mZnNldDpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLl90aW1lU2xvdHMoKSxvPXRoaXMuX3Nsb3RJbmRleChcInN0YXJ0XCIsZSksYT1yW29dO3JldHVybiBlPmEuZW5kP2Eub2Zmc2V0TGVmdCthLm9mZnNldFdpZHRoOmEuc3RhcnQ+ZT9hLm9mZnNldExlZnQ6KHQ9ZS1hLnN0YXJ0LG49YS5lbmQtYS5zdGFydCxpPXQvbiphLm9mZnNldFdpZHRoLGEub2Zmc2V0TGVmdCtpKX0sX3Nsb3RJbmRleDpmdW5jdGlvbihlLHQpe3ZhciBuLGk9dGhpcy5fdGltZVNsb3RzKCkscj0wLG89aS5sZW5ndGgtMTtkbyBuPU1hdGguY2VpbCgobytyKS8yKSx0Pmlbbl1bZV0/cj1uOihuPT09byYmbi0tLG89bik7d2hpbGUociE9PW8pO3JldHVybiByfSxfdGltZUJ5UG9zaXRpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhPXRoaXMuX3Nsb3RCeVBvc2l0aW9uKGUpO3JldHVybiB0P24/YS5lbmQ6YS5zdGFydDooaT1lLSh0aGlzLmNvbnRlbnQub2Zmc2V0KCkubGVmdC10aGlzLmNvbnRlbnQuc2Nyb2xsTGVmdCgpKSxyPWEuZW5kLWEuc3RhcnQsbz1yKigoaS1hLm9mZnNldExlZnQpL2Eub2Zmc2V0V2lkdGgpLG5ldyBEYXRlKGEuc3RhcnQuZ2V0VGltZSgpK28pKX0sX3Nsb3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUtKHRoaXMuY29udGVudC5vZmZzZXQoKS5sZWZ0LXRoaXMuY29udGVudC5zY3JvbGxMZWZ0KCkpLG49dGhpcy5fc2xvdEluZGV4KFwib2Zmc2V0TGVmdFwiLHQpO3JldHVybiB0aGlzLl90aW1lU2xvdHMoKVtuXX0sX3JlbmRlckRlcGVuZGVuY2llczpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj10aGlzLl9kZXBlbmRlbmN5VHJlZTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylpLnB1c2guYXBwbHkoaSx0aGlzLl9yZW5kZXJEZXBlbmRlbmN5KGVbdF0pKTtyLnJlbmRlcihpKX0sX3JlbmRlckRlcGVuZGVuY3k6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz10aGlzLl90YXNrQ29vcmRpbmF0ZXNbZS5wcmVkZWNlc3NvcklkXSxhPXRoaXMuX3Rhc2tDb29yZGluYXRlc1tlLnN1Y2Nlc3NvcklkXTtpZighb3x8IWEpcmV0dXJuW107Zm9yKG49XCJfcmVuZGVyXCIrW1wiRkZcIixcIkZTXCIsXCJTRlwiLFwiU1NcIl1bZS50eXBlXSx0PXRoaXNbbl0obyxhKSxpPTAscj10Lmxlbmd0aDtyPmk7aSsrKXRbaV0uYXR0cltcImRhdGEtdWlkXCJdPWUudWlkO3JldHVybiB0fSxfcmVuZGVyRkY6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RkYoZSx0LCExKTtyZXR1cm4gbltuLmxlbmd0aC0xXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMCksbn0sX3JlbmRlclNTOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGVwZW5kZW5jeUZGKHQsZSwhMCk7cmV0dXJuIG5bMF0uY2hpbGRyZW5bMF09dGhpcy5fYXJyb3coITEpLG4ucmV2ZXJzZSgpfSxfcmVuZGVyRlM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9kZXBlbmRlbmN5RlMoZSx0LCExKTtyZXR1cm4gbltuLmxlbmd0aC0xXS5jaGlsZHJlblswXT10aGlzLl9hcnJvdyghMSksbn0sX3JlbmRlclNGOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGVwZW5kZW5jeUZTKHQsZSwhMCk7cmV0dXJuIG5bMF0uY2hpbGRyZW5bMF09dGhpcy5fYXJyb3coITApLG4ucmV2ZXJzZSgpfSxfZGVwZW5kZW5jeUZGOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMsbz1bXSxhPTAscz0wLGw9MCxjPTAsZD1uP1wic3RhcnRcIjpcImVuZFwiLHU9MixoPTEscD10aGlzLl9yb3dIZWlnaHQsZj0xMCxnPWUucm93SW5kZXgqcCtNYXRoLmZsb29yKHAvMiktMSxtPXQucm93SW5kZXgqcCtNYXRoLmZsb29yKHAvMiktMSx2PUUuc3R5bGVzLF89ZnVuY3Rpb24oKXtvLnB1c2goci5fbGluZSh2LmxpbmUrXCIgXCIrdi5saW5lSG9yaXpvbnRhbCx7bGVmdDphK1wicHhcIix0b3A6cytcInB4XCIsd2lkdGg6bCtcInB4XCJ9KSl9LHk9ZnVuY3Rpb24oKXtvLnB1c2goci5fbGluZSh2LmxpbmUrXCIgXCIrdi5saW5lVmVydGljYWwse2xlZnQ6YStcInB4XCIsdG9wOnMrXCJweFwiLGhlaWdodDpjK1wicHhcIn0pKX07cmV0dXJuIGE9ZVtkXSxzPWcsbD1mLGk9dFtkXS1lW2RdLGk+MCE9PW4mJihsPU1hdGguYWJzKGkpK2YpLG4/KGEtPWwsbC09aCxfKCkpOihfKCksYSs9bC11KSxzPm0/KGM9cy1tLGMrPXUscz1tLHkoKSk6KGM9bS1zLGMrPXUseSgpLHMrPWMtdSksbD1NYXRoLmFicyhhLXRbZF0pLG58fChsLT1oLGEtPWwpLF8oKSxvfSxfZGVwZW5kZW5jeUZTOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9W10sbz0wLGE9MCxzPTAsbD0wLGM9dGhpcy5fcm93SGVpZ2h0LGQ9TWF0aC5mbG9vcihjLzIpLHU9MTAsaD0yKnUscD10LnN0YXJ0LWUuZW5kLGY9MixnPTEsbT1lLnJvd0luZGV4KmMrTWF0aC5mbG9vcihjLzIpLTEsdj10LnJvd0luZGV4KmMrTWF0aC5mbG9vcihjLzIpLTEsXz1FLnN0eWxlcyx5PWZ1bmN0aW9uKCl7ci5wdXNoKGkuX2xpbmUoXy5saW5lK1wiIFwiK18ubGluZUhvcml6b250YWwse2xlZnQ6bytcInB4XCIsdG9wOmErXCJweFwiLHdpZHRoOnMrXCJweFwifSkpfSx3PWZ1bmN0aW9uKCl7ci5wdXNoKGkuX2xpbmUoXy5saW5lK1wiIFwiK18ubGluZVZlcnRpY2FsLHtsZWZ0Om8rXCJweFwiLHRvcDphK1wicHhcIixoZWlnaHQ6bCtcInB4XCJ9KSl9O3JldHVybiBvPWUuZW5kLGE9bSxzPXUsbiYmKG8rPWcscD5oJiYocz1wLSh1LWYpKSxzLT1nKSx5KCksbys9cy1mLGg+PXAmJihsPW4/TWF0aC5hYnModi1tKS1kOmQsbT52PyhhLT1sLGwrPWYsdygpKToodygpLGErPWwpLHM9ZS5lbmQtdC5zdGFydCtoLHU+cyYmKHM9dSksby09cy1mLHkoKSksbT52PyhsPWEtdixhPXYsbCs9Zix3KCkpOihsPXYtYSx3KCksYSs9bCkscz10LnN0YXJ0LW8sbnx8KHMtPWcpLHkoKSxyfSxfbGluZTpmdW5jdGlvbihlLHQpe3JldHVybiBzKFwiZGl2XCIse2NsYXNzTmFtZTplLHN0eWxlOnR9KX0sX2Fycm93OmZ1bmN0aW9uKGUpe3JldHVybiBzKFwic3BhblwiLHtjbGFzc05hbWU6ZT9FLnN0eWxlcy5hcnJvd1dlc3Q6RS5zdHlsZXMuYXJyb3dFYXN0fSl9LF9jb2xncm91cDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuX3RpbWVTbG90cygpLHI9aS5sZW5ndGgsbz1bXTtmb3IoZT0wO3I+ZTtlKyspZm9yKHQ9MCxuPWlbZV0uc3BhbjtuPnQ7dCsrKW8ucHVzaChzKFwiY29sXCIpKTtyZXR1cm4gcyhcImNvbGdyb3VwXCIsbnVsbCxvKX0sX2NyZWF0ZURyYWdIaW50OmZ1bmN0aW9uKGUpe3RoaXMuX2RyYWdIaW50PWUuY2xvbmUoKS5hZGRDbGFzcyhFLnN0eWxlcy5kcmFnSGludCkuY3NzKFwiY3Vyc29yXCIsXCJtb3ZlXCIpLGUucGFyZW50KCkuYXBwZW5kKHRoaXMuX2RyYWdIaW50KX0sX3VwZGF0ZURyYWdIaW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX29mZnNldChlKTt0aGlzLl9kcmFnSGludC5jc3Moe2xlZnQ6dH0pfSxfcmVtb3ZlRHJhZ0hpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9kcmFnSGludC5yZW1vdmUoKSx0aGlzLl9kcmFnSGludD1udWxsfSxfY3JlYXRlUmVzaXplSGludDpmdW5jdGlvbih0KXt2YXIgbixpLHI9RS5zdHlsZXMsbz10aGlzLl90YXNrQ29vcmRpbmF0ZXNbdC5pZF0ucm93SW5kZXgqdGhpcy5fcm93SGVpZ2h0O3RoaXMuX3Jlc2l6ZUhpbnQ9ZShDKHtzdHlsZXM6cn0pKS5jc3Moe3RvcDowLGhlaWdodDp0aGlzLl9jb250ZW50SGVpZ2h0fSksdGhpcy5jb250ZW50LmFwcGVuZCh0aGlzLl9yZXNpemVIaW50KSx0aGlzLl9yZXNpemVUb29sdGlwPWUoUyh7c3R5bGVzOnIsc3RhcnQ6dC5zdGFydCxlbmQ6dC5lbmR9KSkuY3NzKHt0b3A6MCxsZWZ0OjB9KSx0aGlzLmNvbnRlbnQuYXBwZW5kKHRoaXMuX3Jlc2l6ZVRvb2x0aXApLHRoaXMuX3Jlc2l6ZVRvb2x0aXBXaWR0aD10aGlzLl9yZXNpemVUb29sdGlwLm91dGVyV2lkdGgoKSxuPXRoaXMuX3Jlc2l6ZVRvb2x0aXAub3V0ZXJIZWlnaHQoKSxpPW8tbiwwPmkmJihpPW8rdGhpcy5fcm93SGVpZ2h0KSx0aGlzLl9yZXNpemVUb29sdGlwVG9wPWl9LF91cGRhdGVSZXNpemVIaW50OmZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzLl9vZmZzZXQodCksbz10aGlzLl9vZmZzZXQobiksYT1vLXIscz1pP3I6byxsPXRoaXMuX3RhYmxlV2lkdGgtMTcsYz10aGlzLl9yZXNpemVUb29sdGlwV2lkdGg7dGhpcy5fcmVzaXplSGludC5jc3Moe2xlZnQ6cix3aWR0aDphfSksdGhpcy5fcmVzaXplVG9vbHRpcCYmdGhpcy5fcmVzaXplVG9vbHRpcC5yZW1vdmUoKSxzLT1NYXRoLnJvdW5kKGMvMiksMD5zP3M9MDpzK2M+bCYmKHM9bC1jKSx0aGlzLl9yZXNpemVUb29sdGlwPWUoUyh7c3R5bGVzOkUuc3R5bGVzLHN0YXJ0OnQsZW5kOm59KSkuY3NzKHt0b3A6dGhpcy5fcmVzaXplVG9vbHRpcFRvcCxsZWZ0OnMsXCJtaW4td2lkdGhcIjpjfSksdGhpcy5jb250ZW50LmFwcGVuZCh0aGlzLl9yZXNpemVUb29sdGlwKX0sX3JlbW92ZVJlc2l6ZUhpbnQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemVIaW50LnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZUhpbnQ9bnVsbCx0aGlzLl9yZXNpemVUb29sdGlwLnJlbW92ZSgpLHRoaXMuX3Jlc2l6ZVRvb2x0aXA9bnVsbH0sX3VwZGF0ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXA6ZnVuY3Rpb24odCxuLGkpe3ZhciByLG8sYSxzO3RoaXMuX3JlbW92ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXAoKSxyPXRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9ZShUKHtzdHlsZXM6RS5zdHlsZXMsdGV4dDppfSkpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksbz1NYXRoLnJvdW5kKHIub3V0ZXJXaWR0aCgpLzIpLGE9ci5maW5kKF8rRS5zdHlsZXMuY2FsbG91dCkscz1NYXRoLnJvdW5kKGEub3V0ZXJXaWR0aCgpLzIpLHIuY3NzKHt0b3A6dC0oci5vdXRlckhlaWdodCgpK3MpLGxlZnQ6bi1vfSksYS5jc3MoXCJsZWZ0XCIsby1zKX0sX3JlbW92ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLl9wZXJjZW50Q29tcGxldGVSZXNpemVUb29sdGlwJiZ0aGlzLl9wZXJjZW50Q29tcGxldGVSZXNpemVUb29sdGlwLnJlbW92ZSgpLHRoaXMuX3BlcmNlbnRDb21wbGV0ZVJlc2l6ZVRvb2x0aXA9bnVsbH0sX3VwZGF0ZURlcGVuZGVuY3lEcmFnSGludDpmdW5jdGlvbihlLHQsbil7dGhpcy5fcmVtb3ZlRGVwZW5kZW5jeURyYWdIaW50KCksbj90aGlzLl9jcmV0ZVZtbERlcGVuZGVuY3lEcmFnSGludChlLHQpOnRoaXMuX2NyZXRlRGVwZW5kZW5jeURyYWdIaW50KGUsdCl9LF9jcmV0ZURlcGVuZGVuY3lEcmFnSGludDpmdW5jdGlvbih0LG4pe3ZhciBpPUUuc3R5bGVzLHI9bi54LXQueCxvPW4ueS10LnksYT1NYXRoLnNxcnQocipyK28qbykscz1NYXRoLmF0YW4oby9yKTswPnImJihzKz1NYXRoLlBJKSxlKFwiPGRpdiBjbGFzcz0nXCIraS5saW5lK1wiIFwiK2kubGluZUhvcml6b250YWwrXCIgXCIraS5kZXBlbmRlbmN5SGludCtcIic+PC9kaXY+XCIpLmNzcyh7dG9wOnQueSxsZWZ0OnQueCx3aWR0aDphLFwidHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMFwiLFwiLW1zLXRyYW5zZm9ybS1vcmlnaW5cIjpcIjAlIDBcIixcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpblwiOlwiMCUgMFwiLHRyYW5zZm9ybTpcInJvdGF0ZShcIitzK1wicmFkKVwiLFwiLW1zLXRyYW5zZm9ybVwiOlwicm90YXRlKFwiK3MrXCJyYWQpXCIsXCItd2Via2l0LXRyYW5zZm9ybVwiOlwicm90YXRlKFwiK3MrXCJyYWQpXCJ9KS5hcHBlbmRUbyh0aGlzLmNvbnRlbnQpfSxfY3JldGVWbWxEZXBlbmRlbmN5RHJhZ0hpbnQ6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKFwiPGt2bWw6bGluZSBjbGFzcz0nXCIrRS5zdHlsZXMuZGVwZW5kZW5jeUhpbnQrXCInIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOiAwcHg7JyBzdHJva2Vjb2xvcj0nYmxhY2snIHN0cm9rZXdlaWdodD0nMnB4JyBmcm9tPSdcIit0LngrXCJweCxcIit0LnkrXCJweCcgdG89J1wiK24ueCtcInB4LFwiK24ueStcInB4Jz48L2t2bWw6bGluZT5cIikuYXBwZW5kVG8odGhpcy5jb250ZW50KTtcbmlbMF0ub3V0ZXJIVE1MPWlbMF0ub3V0ZXJIVE1MfSxfcmVtb3ZlRGVwZW5kZW5jeURyYWdIaW50OmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50LmZpbmQoXytFLnN0eWxlcy5kZXBlbmRlbmN5SGludCkucmVtb3ZlKCl9LF9zY3JvbGxUbzpmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldCgpLmxlZnQsbj1lLndpZHRoKCksaT10K24scj1lLmNsb3Nlc3QoXCJ0clwiKSxvPXIub2Zmc2V0KCkudG9wLGE9ci5oZWlnaHQoKSxzPW8rYSxsPXRoaXMuY29udGVudCxjPWwub2Zmc2V0KCksZD1jLnRvcCx1PWwuaGVpZ2h0KCksaD1kK3UscD1jLmxlZnQsZj1sLndpZHRoKCksZz1wK2YsbT1rZW5kby5zdXBwb3J0LnNjcm9sbGJhcigpO2Q+bz9sLnNjcm9sbFRvcChsLnNjcm9sbFRvcCgpKyhvLWQpKTpzPmgmJmwuc2Nyb2xsVG9wKGwuc2Nyb2xsVG9wKCkrKHMrbS1oKSkscD50JiZuPmYmJmc+aXx8aT5nJiZmPm4/bC5zY3JvbGxMZWZ0KGwuc2Nyb2xsTGVmdCgpKyhpK20tZykpOihpPmcmJm4+ZiYmdD5wfHxwPnQmJmY+bikmJmwuc2Nyb2xsTGVmdChsLnNjcm9sbExlZnQoKSsodC1wKSl9LF90aW1lU2xvdHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xvdHNbdGhpcy5fc2xvdHMubGVuZ3RoLTFdfSxfaGVhZGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLGkscixvLGEsYyxkLHU9W10saD1FLnN0eWxlcztmb3Iobz0wLGE9ZS5sZW5ndGg7YT5vO28rKyl7Zm9yKHQ9ZVtvXSxuPVtdLGM9MCxkPXQubGVuZ3RoO2Q+YztjKyspaT10W2NdLHI9bChpLnRleHQpLG4ucHVzaChzKFwidGhcIix7Y29sc3BhbjppLnNwYW4sY2xhc3NOYW1lOmguaGVhZGVyKyhpLmlzTm9uV29ya2luZz9cIiBcIitoLm5vbldvcmtpbmc6XCJcIil9LFtyXSkpO3UucHVzaChzKFwidHJcIixudWxsLG4pKX1yZXR1cm4gdX0sX2hvdXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W10sYT10aGlzLm9wdGlvbnMscz1hLndvcmtEYXlTdGFydC5nZXRIb3VycygpLGw9YS53b3JrRGF5RW5kLmdldEhvdXJzKCksYz1hLmhvdXJTcGFuO2ZvcihlPW5ldyBEYXRlKGUpLHQ9bmV3IERhdGUodCk7dD5lOyluPW5ldyBEYXRlKGUpLHI9bi5nZXRIb3VycygpLGk9cj49cyYmbD5yLG4uc2V0SG91cnMobi5nZXRIb3VycygpK2MpLHI9PW4uZ2V0SG91cnMoKSYmbi5zZXRIb3VycyhuLmdldEhvdXJzKCkrMipjKSwoIWEuc2hvd1dvcmtIb3Vyc3x8aSkmJm8ucHVzaCh7c3RhcnQ6ZSxlbmQ6bixpc05vbldvcmtpbmc6IWksc3BhbjoxfSksZT1uO3JldHVybiBvfSxfZGF5czpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1bXTtmb3IoZT1uZXcgRGF0ZShlKSx0PW5ldyBEYXRlKHQpO3Q+ZTspbj1rZW5kby5kYXRlLm5leHREYXkoZSksaT10aGlzLl9pc1dvcmtEYXkoZSksKCF0aGlzLm9wdGlvbnMuc2hvd1dvcmtEYXlzfHxpKSYmci5wdXNoKHtzdGFydDplLGVuZDpuLGlzTm9uV29ya2luZzohaSxzcGFuOjF9KSxlPW47cmV0dXJuIHJ9LF93ZWVrczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdLGE9dGhpcy5jYWxlbmRhckluZm8oKS5maXJzdERheTtmb3IoZT1uZXcgRGF0ZShlKSx0PW5ldyBEYXRlKHQpO3Q+ZTspbj1rZW5kby5kYXRlLmRheU9mV2VlayhrZW5kby5kYXRlLmFkZERheXMoZSwxKSxhLDEpLG4+dCYmKG49dCksaT10aGlzLl9kYXlzKGUsbikscj1pLmxlbmd0aCxyPjAmJm8ucHVzaCh7c3RhcnQ6aVswXS5zdGFydCxlbmQ6aVtyLTFdLmVuZCxzcGFuOnJ9KSxlPW47cmV0dXJuIG99LF9tb250aHM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbz1bXTtmb3IoZT1uZXcgRGF0ZShlKSx0PW5ldyBEYXRlKHQpO3Q+ZTspbj1uZXcgRGF0ZShlKSxuLnNldE1vbnRoKG4uZ2V0TW9udGgoKSsxKSxpPXRoaXMuX2RheXMoZSxuKSxyPWkubGVuZ3RoLHI+MCYmby5wdXNoKHtzdGFydDppWzBdLnN0YXJ0LGVuZDppW3ItMV0uZW5kLHNwYW46cn0pLGU9bjtyZXR1cm4gb30sX3llYXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saT1bXTtmb3IoZT1uZXcgRGF0ZShlKSx0PW5ldyBEYXRlKHQpO3Q+ZTspbj1uZXcgRGF0ZShlKSxuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSsxKSxpLnB1c2goe3N0YXJ0OmUsZW5kOm4sc3BhbjoxMn0pLGU9bjtyZXR1cm4gaX0sX3Nsb3RIZWFkZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG89W107Zm9yKGk9MCxyPWUubGVuZ3RoO3I+aTtpKyspbj1lW2ldLG8ucHVzaCh7dGV4dDp0KG4pLGlzTm9uV29ya2luZzohIW4uaXNOb25Xb3JraW5nLHNwYW46bi5zcGFufSk7cmV0dXJuIG99LF9pc1dvcmtEYXk6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPWUuZ2V0RGF5KCkscj10aGlzLl93b3JrRGF5cztmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKylpZihyW3RdPT09aSlyZXR1cm4hMDtyZXR1cm4hMX0sY2FsZW5kYXJJbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIGtlbmRvLmdldEN1bHR1cmUoKS5jYWxlbmRhcnMuc3RhbmRhcmR9fSk7ZCghMCxFLHtzdHlsZXM6QX0pLGtlbmRvLnVpLkdhbnR0RGF5Vmlldz1FLmV4dGVuZCh7bmFtZTpcImRheVwiLG9wdGlvbnM6e3RpbWVIZWFkZXJUZW1wbGF0ZTp5LGRheUhlYWRlclRlbXBsYXRlOnd9LHJhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuc3RhcnQ9a2VuZG8uZGF0ZS5nZXREYXRlKGUuc3RhcnQpLHRoaXMuZW5kPWtlbmRvLmRhdGUuZ2V0RGF0ZShlLmVuZCksKGtlbmRvLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKGUuZW5kKT4wfHx0aGlzLmVuZC5nZXRUaW1lKCk9PT10aGlzLnN0YXJ0LmdldFRpbWUoKSkmJih0aGlzLmVuZD1rZW5kby5kYXRlLmFkZERheXModGhpcy5lbmQsMSkpfSxfY3JlYXRlU2xvdHM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyPVtdLG89dGhpcy5fZGF5cyh0aGlzLnN0YXJ0LHRoaXMuZW5kKSxhPVtdO2ZvcihuPTAsaT1vLmxlbmd0aDtpPm47bisrKWU9b1tuXSx0PXRoaXMuX2hvdXJzKGUuc3RhcnQsZS5lbmQpLGUuc3Bhbj10Lmxlbmd0aCxhLnB1c2guYXBwbHkoYSx0KTtyZXR1cm4gci5wdXNoKG8pLHIucHVzaChhKSxyfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD10aGlzLm9wdGlvbnM7cmV0dXJuIGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1swXSxrZW5kby50ZW1wbGF0ZSh0LmRheUhlYWRlclRlbXBsYXRlKSkpLGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1sxXSxrZW5kby50ZW1wbGF0ZSh0LnRpbWVIZWFkZXJUZW1wbGF0ZSkpKSxlfX0pLGtlbmRvLnVpLkdhbnR0V2Vla1ZpZXc9RS5leHRlbmQoe25hbWU6XCJ3ZWVrXCIsb3B0aW9uczp7ZGF5SGVhZGVyVGVtcGxhdGU6dyx3ZWVrSGVhZGVyVGVtcGxhdGU6Yn0scmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jYWxlbmRhckluZm8oKSxuPXQuZmlyc3REYXk7dGhpcy5zdGFydD1rZW5kby5kYXRlLmdldERhdGUoa2VuZG8uZGF0ZS5kYXlPZldlZWsoZS5zdGFydCxuLC0xKSksdGhpcy5lbmQ9a2VuZG8uZGF0ZS5nZXREYXRlKGtlbmRvLmRhdGUuZGF5T2ZXZWVrKGUuZW5kLG4sMSkpfSxfY3JlYXRlU2xvdHM6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZS5wdXNoKHRoaXMuX3dlZWtzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlLnB1c2godGhpcy5fZGF5cyh0aGlzLnN0YXJ0LHRoaXMuZW5kKSksZX0sX2xheW91dDpmdW5jdGlvbigpe3ZhciBlPVtdLHQ9dGhpcy5vcHRpb25zO3JldHVybiBlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMF0sa2VuZG8udGVtcGxhdGUodC53ZWVrSGVhZGVyVGVtcGxhdGUpKSksZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzFdLGtlbmRvLnRlbXBsYXRlKHQuZGF5SGVhZGVyVGVtcGxhdGUpKSksZX19KSxrZW5kby51aS5HYW50dE1vbnRoVmlldz1FLmV4dGVuZCh7bmFtZTpcIm1vbnRoXCIsb3B0aW9uczp7d2Vla0hlYWRlclRlbXBsYXRlOmIsbW9udGhIZWFkZXJUZW1wbGF0ZTprfSxyYW5nZTpmdW5jdGlvbihlKXt0aGlzLnN0YXJ0PWtlbmRvLmRhdGUuZmlyc3REYXlPZk1vbnRoKGUuc3RhcnQpLHRoaXMuZW5kPWtlbmRvLmRhdGUuYWRkRGF5cyhrZW5kby5kYXRlLmdldERhdGUoa2VuZG8uZGF0ZS5sYXN0RGF5T2ZNb250aChlLmVuZCkpLDEpfSxfY3JlYXRlU2xvdHM6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZS5wdXNoKHRoaXMuX21vbnRocyh0aGlzLnN0YXJ0LHRoaXMuZW5kKSksZS5wdXNoKHRoaXMuX3dlZWtzKHRoaXMuc3RhcnQsdGhpcy5lbmQpKSxlfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD10aGlzLm9wdGlvbnM7cmV0dXJuIGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1swXSxrZW5kby50ZW1wbGF0ZSh0Lm1vbnRoSGVhZGVyVGVtcGxhdGUpKSksZS5wdXNoKHRoaXMuX3Nsb3RIZWFkZXJzKHRoaXMuX3Nsb3RzWzFdLGtlbmRvLnRlbXBsYXRlKHQud2Vla0hlYWRlclRlbXBsYXRlKSkpLGV9fSksa2VuZG8udWkuR2FudHRZZWFyVmlldz1FLmV4dGVuZCh7bmFtZTpcInllYXJcIixvcHRpb25zOnt5ZWFySGVhZGVyVGVtcGxhdGU6eCxtb250aEhlYWRlclRlbXBsYXRlOmt9LHJhbmdlOmZ1bmN0aW9uKGUpe3RoaXMuc3RhcnQ9a2VuZG8uZGF0ZS5maXJzdERheU9mTW9udGgobmV3IERhdGUoZS5zdGFydC5zZXRNb250aCgwKSkpLHRoaXMuZW5kPWtlbmRvLmRhdGUuZmlyc3REYXlPZk1vbnRoKG5ldyBEYXRlKGUuZW5kLnNldE1vbnRoKDEyKSkpfSxfY3JlYXRlU2xvdHM6ZnVuY3Rpb24oKXt2YXIgdD1bXSxuPXRoaXMuX21vbnRocyh0aGlzLnN0YXJ0LHRoaXMuZW5kKTtyZXR1cm4gZShuKS5lYWNoKGZ1bmN0aW9uKGUsdCl7dC5zcGFuPTF9KSx0LnB1c2godGhpcy5feWVhcnModGhpcy5zdGFydCx0aGlzLmVuZCkpLHQucHVzaChuKSx0fSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD10aGlzLm9wdGlvbnM7cmV0dXJuIGUucHVzaCh0aGlzLl9zbG90SGVhZGVycyh0aGlzLl9zbG90c1swXSxrZW5kby50ZW1wbGF0ZSh0LnllYXJIZWFkZXJUZW1wbGF0ZSkpKSxlLnB1c2godGhpcy5fc2xvdEhlYWRlcnModGhpcy5fc2xvdHNbMV0sa2VuZG8udGVtcGxhdGUodC5tb250aEhlYWRlclRlbXBsYXRlKSkpLGV9fSkscj17d3JhcHBlcjpcImstdGltZWxpbmUgay1ncmlkIGstd2lkZ2V0XCIsZ3JpZEhlYWRlcjpcImstZ3JpZC1oZWFkZXJcIixncmlkSGVhZGVyV3JhcDpcImstZ3JpZC1oZWFkZXItd3JhcFwiLGdyaWRDb250ZW50Olwiay1ncmlkLWNvbnRlbnRcIixncmlkQ29udGVudFdyYXA6XCJrLWdyaWQtY29udGVudFwiLHRhc2tzV3JhcHBlcjpcImstZ2FudHQtdGFibGVzXCIsZGVwZW5kZW5jaWVzV3JhcHBlcjpcImstZ2FudHQtZGVwZW5kZW5jaWVzXCIsdGFzazpcImstdGFza1wiLGxpbmU6XCJrLWxpbmVcIix0YXNrUmVzaXplSGFuZGxlOlwiay1yZXNpemUtaGFuZGxlXCIsdGFza1Jlc2l6ZUhhbmRsZVdlc3Q6XCJrLXJlc2l6ZS13XCIsdGFza0RyYWdIYW5kbGU6XCJrLXRhc2stZHJhZ2hhbmRsZVwiLHRhc2tDb21wbGV0ZTpcImstdGFzay1jb21wbGV0ZVwiLHRhc2tEZWxldGU6XCJrLXRhc2stZGVsZXRlXCIsdGFza1dyYXBBY3RpdmU6XCJrLXRhc2std3JhcC1hY3RpdmVcIix0YXNrV3JhcDpcImstdGFzay13cmFwXCIsdGFza0RvdDpcImstdGFzay1kb3RcIix0YXNrRG90U3RhcnQ6XCJrLXRhc2stc3RhcnRcIix0YXNrRG90RW5kOlwiay10YXNrLWVuZFwiLGhvdmVyZWQ6XCJrLXN0YXRlLWhvdmVyXCIsc2VsZWN0ZWQ6XCJrLXN0YXRlLXNlbGVjdGVkXCIsb3JpZ2luOlwiay1vcmlnaW5cIn0sbz1rZW5kby51aS5HYW50dFRpbWVsaW5lPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7YS5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMub3B0aW9ucy52aWV3cyYmdGhpcy5vcHRpb25zLnZpZXdzLmxlbmd0aHx8KHRoaXMub3B0aW9ucy52aWV3cz1bXCJkYXlcIixcIndlZWtcIixcIm1vbnRoXCJdKSx0aGlzLl93cmFwcGVyKCksdGhpcy5fZG9tVHJlZXMoKSx0aGlzLl92aWV3cygpLHRoaXMuX3NlbGVjdGFibGUoKSx0aGlzLl9kcmFnZ2FibGUoKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9wZXJjZW50UmVzaXplRHJhZ2dhYmxlKCksdGhpcy5fY3JlYXRlRGVwZW5kZW5jeURyYWdnYWJsZSgpLHRoaXMuX2F0dGFjaEV2ZW50cygpfSxvcHRpb25zOntuYW1lOlwiR2FudHRUaW1lbGluZVwiLG1lc3NhZ2VzOnt2aWV3czp7ZGF5OlwiRGF5XCIsd2VlazpcIldlZWtcIixtb250aDpcIk1vbnRoXCIseWVhcjpcIlllYXJcIn19LHNuYXA6ITAsc2VsZWN0YWJsZTohMCxlZGl0YWJsZTohMH0sZGVzdHJveTpmdW5jdGlvbigpe2EuZm4uZGVzdHJveS5jYWxsKHRoaXMpLHRoaXMuX3VuYmluZFZpZXcodGhpcy5fc2VsZWN0ZWRWaWV3KSx0aGlzLl9tb3ZlRHJhZ2dhYmxlJiZ0aGlzLl9tb3ZlRHJhZ2dhYmxlLmRlc3Ryb3koKSx0aGlzLl9yZXNpemVEcmFnZ2FibGUmJnRoaXMuX3Jlc2l6ZURyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5fcGVyY2VudERyYWdnYWJsZSYmdGhpcy5fcGVyY2VudERyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5fZGVwZW5kZW5jeURyYWdnYWJsZSYmdGhpcy5fZGVwZW5kZW5jeURyYWdnYWJsZS5kZXN0cm95KCksdGhpcy5faGVhZGVyVHJlZT1udWxsLHRoaXMuX3Rhc2tUcmVlPW51bGwsdGhpcy5fZGVwZW5kZW5jeVRyZWU9bnVsbCx0aGlzLndyYXBwZXIub2ZmKGYpLGtlbmRvLmRlc3Ryb3kodGhpcy53cmFwcGVyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT1vLnN0eWxlczt0aGlzLndyYXBwZXI9dGhpcy5lbGVtZW50LmFkZENsYXNzKGUud3JhcHBlcikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nXCIrZS5ncmlkSGVhZGVyK1wiJz48ZGl2IGNsYXNzPSdcIitlLmdyaWRIZWFkZXJXcmFwK1wiJz48L2Rpdj48L2Rpdj5cIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nXCIrZS5ncmlkQ29udGVudFdyYXArXCInPjxkaXYgY2xhc3M9J1wiK2UudGFza3NXcmFwcGVyK1wiJz48L2Rpdj48ZGl2IGNsYXNzPSdcIitlLmRlcGVuZGVuY2llc1dyYXBwZXIrXCInPjwvZGl2PjwvZGl2PlwiKX0sX2RvbVRyZWVzOmZ1bmN0aW9uKCl7dmFyIGU9by5zdHlsZXMsdD1rZW5kby5kb20uVHJlZSxuPXRoaXMud3JhcHBlcjt0aGlzLl9oZWFkZXJUcmVlPW5ldyB0KG4uZmluZChfK2UuZ3JpZEhlYWRlcldyYXApWzBdKSx0aGlzLl90YXNrVHJlZT1uZXcgdChuLmZpbmQoXytlLnRhc2tzV3JhcHBlcilbMF0pLHRoaXMuX2RlcGVuZGVuY3lUcmVlPW5ldyB0KG4uZmluZChfK2UuZGVwZW5kZW5jaWVzV3JhcHBlcilbMF0pfSxfdmlld3M6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG8sYSxzPXRoaXMub3B0aW9ucy52aWV3cztmb3IodGhpcy52aWV3cz17fSxvPTAsYT1zLmxlbmd0aDthPm87bysrKWU9c1tvXSx0PWMoZSksdCYmZS5zZWxlY3RhYmxlPT09ITF8fChuPXQ/XCJzdHJpbmdcIiE9dHlwZW9mIGUudHlwZT9lLnRpdGxlOmUudHlwZTplLGk9RFtuXSxpJiYodCYmKGUudHlwZT1pLnR5cGUpLGkudGl0bGU9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnZpZXdzW25dKSxlPWQoe3RpdGxlOm59LGksdD9lOnt9KSxuJiYodGhpcy52aWV3c1tuXT1lLCghcnx8ZS5zZWxlY3RlZCkmJihyPW4pKSk7ciYmKHRoaXMuX3NlbGVjdGVkVmlld05hbWU9cil9LHZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJih0aGlzLl9zZWxlY3RWaWV3KGUpLHRoaXMudHJpZ2dlcihcIm5hdmlnYXRlXCIse3ZpZXc6ZSxhY3Rpb246XCJjaGFuZ2VWaWV3XCJ9KSksdGhpcy5fc2VsZWN0ZWRWaWV3fSxfc2VsZWN0VmlldzpmdW5jdGlvbihlKXtlJiZ0aGlzLnZpZXdzW2VdJiYodGhpcy5fc2VsZWN0ZWRWaWV3JiZ0aGlzLl91bmJpbmRWaWV3KHRoaXMuX3NlbGVjdGVkVmlldyksdGhpcy5fc2VsZWN0ZWRWaWV3PXRoaXMuX2luaXRpYWxpemVWaWV3KGUpLHRoaXMuX3NlbGVjdGVkVmlld05hbWU9ZSl9LF92aWV3QnlJbmRleDpmdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMudmlld3M7Zm9yKHQgaW4gbil7aWYoIWUpcmV0dXJuIHQ7ZS0tfX0sX2luaXRpYWxpemVWaWV3OmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcy52aWV3c1tlXTtpZihpKXtpZihuPWkudHlwZSxcInN0cmluZ1wiPT10eXBlb2YgbiYmKG49a2VuZG8uZ2V0dGVyKGkudHlwZSkod2luZG93KSksIW4pdGhyb3cgRXJyb3IoXCJUaGVyZSBpcyBubyBzdWNoIHZpZXdcIik7aT1uZXcgbih0aGlzLndyYXBwZXIsdChkKCEwLHtoZWFkZXJUcmVlOnRoaXMuX2hlYWRlclRyZWUsdGFza1RyZWU6dGhpcy5fdGFza1RyZWUsZGVwZW5kZW5jeVRyZWU6dGhpcy5fZGVwZW5kZW5jeVRyZWV9LGksdGhpcy5vcHRpb25zKSkpfXJldHVybiBpfSxfdW5iaW5kVmlldzpmdW5jdGlvbihlKXtlJiZlLmRlc3Ryb3koKX0sX3JhbmdlOmZ1bmN0aW9uKGUpe3ZhciB0LG4saT17ZmllbGQ6XCJzdGFydFwiLGRpcjpcImFzY1wifSxyPXtmaWVsZDpcImVuZFwiLGRpcjpcImRlc2NcIn07cmV0dXJuIGUmJmUubGVuZ3RoPyh0PW5ldyBwKGUpLnNvcnQoaSkudG9BcnJheSgpWzBdLnN0YXJ0fHxuZXcgRGF0ZSxuPW5ldyBwKGUpLnNvcnQocikudG9BcnJheSgpWzBdLmVuZHx8bmV3IERhdGUse3N0YXJ0Om5ldyBEYXRlKHQpLGVuZDpuZXcgRGF0ZShuKX0pOntzdGFydDpuZXcgRGF0ZSxlbmQ6bmV3IERhdGV9fSxfcmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudmlldygpLG49dGhpcy5fcmFuZ2UoZSk7dGhpcy5fdGFza3M9ZSx0LnJhbmdlKG4pLHQucmVuZGVyTGF5b3V0KCksdC5yZW5kZXIoZSl9LF9yZW5kZXJEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oZSl7dGhpcy52aWV3KCkuX3JlbmRlckRlcGVuZGVuY2llcyhlKX0sX3Rhc2tCeVVpZDpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fdGFza3Mscj1pLmxlbmd0aDtmb3Iobj0wO3I+bjtuKyspaWYodD1pW25dLHQudWlkPT09ZSlyZXR1cm4gdH0sX2RyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBlLHQsbixyLGEscz10aGlzLGw9dGhpcy5vcHRpb25zLnNuYXAsYz1vLnN0eWxlcyxkPWZ1bmN0aW9uKCl7cy52aWV3KCkuX3JlbW92ZURyYWdIaW50KCksZSYmZS5jc3MoXCJvcGFjaXR5XCIsMSksZT1udWxsLHQ9bnVsbCxhPSExfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9tb3ZlRHJhZ2dhYmxlPW5ldyBrZW5kby51aS5EcmFnZ2FibGUodGhpcy53cmFwcGVyLHtkaXN0YW5jZTowLGZpbHRlcjpfK2MudGFzayxob2xkVG9EcmFnOmtlbmRvLnN1cHBvcnQubW9iaWxlT1MsaWdub3JlOl8rYy50YXNrUmVzaXplSGFuZGxlfSksdGhpcy5fbW92ZURyYWdnYWJsZS5iaW5kKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oaSl7dmFyIG89cy52aWV3KCk7cmV0dXJuIGU9aS5jdXJyZW50VGFyZ2V0LnBhcmVudCgpLHQ9cy5fdGFza0J5VWlkKGkuY3VycmVudFRhcmdldC5hdHRyKFwiZGF0YS11aWRcIikpLHMudHJpZ2dlcihcIm1vdmVTdGFydFwiLHt0YXNrOnR9KT92b2lkIGkucHJldmVudERlZmF1bHQoKToobj10LnN0YXJ0LHI9by5fdGltZUJ5UG9zaXRpb24oaS54LmxvY2F0aW9uLGwpLW4sby5fY3JlYXRlRHJhZ0hpbnQoZSksZS5jc3MoXCJvcGFjaXR5XCIsLjUpLHZvaWQoYT0hMCkpfSkuYmluZChcImRyYWdcIixrZW5kby50aHJvdHRsZShmdW5jdGlvbihlKXt2YXIgaSxvO2EmJihpPXMudmlldygpLG89bmV3IERhdGUoaS5fdGltZUJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGwpLXIpLHMudHJpZ2dlcihcIm1vdmVcIix7dGFzazp0LHN0YXJ0Om99KXx8KG49byxpLl91cGRhdGVEcmFnSGludChuKSkpfSwxNSkpLmJpbmQoXCJkcmFnZW5kXCIsZnVuY3Rpb24oKXtzLnRyaWdnZXIoXCJtb3ZlRW5kXCIse3Rhc2s6dCxzdGFydDpufSksZCgpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe2QoKX0pLnVzZXJFdmVudHMuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKCl7aSgpfSkpfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsYSxzLGw9dGhpcyxjPXRoaXMub3B0aW9ucy5zbmFwLGQ9by5zdHlsZXMsdT1mdW5jdGlvbigpe2wudmlldygpLl9yZW1vdmVSZXNpemVIaW50KCksZT1udWxsLHQ9bnVsbCxzPSExfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9yZXNpemVEcmFnZ2FibGU9bmV3IGtlbmRvLnVpLkRyYWdnYWJsZSh0aGlzLndyYXBwZXIse2Rpc3RhbmNlOjAsZmlsdGVyOl8rZC50YXNrUmVzaXplSGFuZGxlLGhvbGRUb0RyYWc6ITF9KSx0aGlzLl9yZXNpemVEcmFnZ2FibGUuYmluZChcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGkpe3JldHVybiBhPWkuY3VycmVudFRhcmdldC5oYXNDbGFzcyhkLnRhc2tSZXNpemVIYW5kbGVXZXN0KSxlPWkuY3VycmVudFRhcmdldC5jbG9zZXN0KF8rZC50YXNrKSx0PWwuX3Rhc2tCeVVpZChlLmF0dHIoXCJkYXRhLXVpZFwiKSksbC50cmlnZ2VyKFwicmVzaXplU3RhcnRcIix7dGFzazp0fSk/dm9pZCBpLnByZXZlbnREZWZhdWx0KCk6KG49dC5zdGFydCxyPXQuZW5kLGwudmlldygpLl9jcmVhdGVSZXNpemVIaW50KHQpLHZvaWQocz0hMCkpfSkuYmluZChcImRyYWdcIixrZW5kby50aHJvdHRsZShmdW5jdGlvbihlKXt2YXIgaSxvO3MmJihpPWwudmlldygpLG89aS5fdGltZUJ5UG9zaXRpb24oZS54LmxvY2F0aW9uLGMsIWEpLGE/bj1yPm8/bzpyOnI9bz5uP286bixsLnRyaWdnZXIoXCJyZXNpemVcIix7dGFzazp0LHN0YXJ0Om4sZW5kOnJ9KXx8aS5fdXBkYXRlUmVzaXplSGludChuLHIsYSkpfSwxNSkpLmJpbmQoXCJkcmFnZW5kXCIsZnVuY3Rpb24oKXtsLnRyaWdnZXIoXCJyZXNpemVFbmRcIix7dGFzazp0LHJlc2l6ZVN0YXJ0OmEsc3RhcnQ6bixlbmQ6cn0pLHUoKX0pLmJpbmQoXCJkcmFnY2FuY2VsXCIsZnVuY3Rpb24oKXt1KCl9KS51c2VyRXZlbnRzLmJpbmQoXCJzZWxlY3RcIixmdW5jdGlvbigpe2koKX0pKX0sX3BlcmNlbnRSZXNpemVEcmFnZ2FibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixhLHMsbCxjLGQsdSxoPXRoaXMscD1vLnN0eWxlcyxmPWZ1bmN0aW9uKCl7aC52aWV3KCkuX3JlbW92ZVBlcmNlbnRDb21wbGV0ZVRvb2x0aXAoKSx0PW51bGwsZT1udWxsLHU9ITF9LGc9ZnVuY3Rpb24oZSl7dC5maW5kKF8rcC50YXNrQ29tcGxldGUpLndpZHRoKGUpLmVuZCgpLnNpYmxpbmdzKF8rcC50YXNrRHJhZ0hhbmRsZSkuY3NzKFwibGVmdFwiLGUpfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl9wZXJjZW50RHJhZ2dhYmxlPW5ldyBrZW5kby51aS5EcmFnZ2FibGUodGhpcy53cmFwcGVyLHtkaXN0YW5jZTowLGZpbHRlcjpfK3AudGFza0RyYWdIYW5kbGUsaG9sZFRvRHJhZzohMX0pLHRoaXMuX3BlcmNlbnREcmFnZ2FibGUuYmluZChcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGkpe3Q9aS5jdXJyZW50VGFyZ2V0LnNpYmxpbmdzKF8rcC50YXNrKSxlPWguX3Rhc2tCeVVpZCh0LmF0dHIoXCJkYXRhLXVpZFwiKSksbD1lLnBlcmNlbnRDb21wbGV0ZSxuPXQub2Zmc2V0KCkscj10aGlzLmVsZW1lbnQub2Zmc2V0KCksYT10LmZpbmQoXytwLnRhc2tDb21wbGV0ZSkud2lkdGgoKSxzPXQub3V0ZXJXaWR0aCgpLHU9ITB9KS5iaW5kKFwiZHJhZ1wiLGtlbmRvLnRocm90dGxlKGZ1bmN0aW9uKGUpe2lmKHUpe3ZhciB0PU1hdGgubWF4KDAsTWF0aC5taW4ocyxhK2UueC5pbml0aWFsRGVsdGEpKTtsPU1hdGgucm91bmQodC9zKjEwMCksZyh0KSxjPW4udG9wLXIudG9wLGQ9bi5sZWZ0K3Qtci5sZWZ0LGgudmlldygpLl91cGRhdGVQZXJjZW50Q29tcGxldGVUb29sdGlwKGMsZCxsKX19LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe2gudHJpZ2dlcihcInBlcmNlbnRSZXNpemVFbmRcIix7dGFzazplLHBlcmNlbnRDb21wbGV0ZTpsLzEwMH0pLGYoKX0pLmJpbmQoXCJkcmFnY2FuY2VsXCIsZnVuY3Rpb24oKXtnKGEpLGYoKX0pLnVzZXJFdmVudHMuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKCl7aSgpfSkpfSxfY3JlYXRlRGVwZW5kZW5jeURyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciB0LG4scixhLHMsbCxjPXRoaXMsZD1lKCksaD1lKCkscD11Lm1zaWUmJjk+dS52ZXJzaW9uLGY9by5zdHlsZXMsZz1mdW5jdGlvbigpe3QuY3NzKFwiZGlzcGxheVwiLFwiXCIpLnJlbW92ZUNsYXNzKGYuaG92ZXJlZCksdC5wYXJlbnQoKS5yZW1vdmVDbGFzcyhmLm9yaWdpbiksdD1udWxsLG0oITEpLGg9ZSgpLGQ9ZSgpLGMudmlldygpLl9yZW1vdmVEZXBlbmRlbmN5RHJhZ0hpbnQoKSxuPSExfSxtPWZ1bmN0aW9uKGUpe2guaGFzQ2xhc3MoZi5vcmlnaW4pfHwoaC5maW5kKF8rZi50YXNrRG90KS5jc3MoXCJkaXNwbGF5XCIsZT9cImJsb2NrXCI6XCJcIiksZC50b2dnbGVDbGFzcyhmLmhvdmVyZWQsZSkpfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJihwJiZkb2N1bWVudC5uYW1lc3BhY2VzJiZkb2N1bWVudC5uYW1lc3BhY2VzLmFkZChcImt2bWxcIixcInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIsXCIjZGVmYXVsdCNWTUxcIiksdGhpcy5fZGVwZW5kZW5jeURyYWdnYWJsZT1uZXcga2VuZG8udWkuRHJhZ2dhYmxlKHRoaXMud3JhcHBlcix7ZGlzdGFuY2U6MCxmaWx0ZXI6XytmLnRhc2tEb3QsaG9sZFRvRHJhZzohMX0pLHRoaXMuX2RlcGVuZGVuY3lEcmFnZ2FibGUuYmluZChcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGUpe3Q9ZS5jdXJyZW50VGFyZ2V0LmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpLmFkZENsYXNzKGYuaG92ZXJlZCksdC5wYXJlbnQoKS5hZGRDbGFzcyhmLm9yaWdpbik7dmFyIGk9dC5vZmZzZXQoKTtzPWMudmlldygpLmNvbnRlbnQsbD1zLm9mZnNldCgpLHI9TWF0aC5yb3VuZChpLmxlZnQrcy5zY3JvbGxMZWZ0KCktbC5sZWZ0K3Qub3V0ZXJIZWlnaHQoKS8yKSxhPU1hdGgucm91bmQoaS50b3Arcy5zY3JvbGxUb3AoKS1sLnRvcCt0Lm91dGVyV2lkdGgoKS8yKSxuPSEwfSkuYmluZChcImRyYWdcIixrZW5kby50aHJvdHRsZShmdW5jdGlvbih0KXt2YXIgaSxvLHU7biYmKGMudmlldygpLl9yZW1vdmVEZXBlbmRlbmN5RHJhZ0hpbnQoKSxpPWUoa2VuZG8uZWxlbWVudFVuZGVyQ3Vyc29yKHQpKSxvPXQueC5sb2NhdGlvbitzLnNjcm9sbExlZnQoKS1sLmxlZnQsdT10LnkubG9jYXRpb24rcy5zY3JvbGxUb3AoKS1sLnRvcCxjLnZpZXcoKS5fdXBkYXRlRGVwZW5kZW5jeURyYWdIaW50KHt4OnIseTphfSx7eDpvLHk6dX0scCksbSghMSksZD1pLmhhc0NsYXNzKGYudGFza0RvdCk/aTplKCksaD1pLmNsb3Nlc3QoXytmLnRhc2tXcmFwKSxtKCEwKSl9LDE1KSkuYmluZChcImRyYWdlbmRcIixmdW5jdGlvbigpe3ZhciBlLG4saSxyLG87ZC5sZW5ndGgmJihlPXQuaGFzQ2xhc3MoZi50YXNrRG90U3RhcnQpLG49ZC5oYXNDbGFzcyhmLnRhc2tEb3RTdGFydCksaT1lP24/MzoyOm4/MTowLHI9Yy5fdGFza0J5VWlkKHQuc2libGluZ3MoXytmLnRhc2spLmF0dHIoXCJkYXRhLXVpZFwiKSksbz1jLl90YXNrQnlVaWQoZC5zaWJsaW5ncyhfK2YudGFzaykuYXR0cihcImRhdGEtdWlkXCIpKSxyIT09byYmYy50cmlnZ2VyKFwiZGVwZW5kZW5jeURyYWdFbmRcIix7dHlwZTppLHByZWRlY2Vzc29yOnIsc3VjY2Vzc29yOm99KSksZygpfSkuYmluZChcImRyYWdjYW5jZWxcIixmdW5jdGlvbigpe2coKX0pLnVzZXJFdmVudHMuYmluZChcInNlbGVjdFwiLGZ1bmN0aW9uKCl7aSgpfSkpfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1vLnN0eWxlczt0aGlzLm9wdGlvbnMuc2VsZWN0YWJsZSYmdGhpcy53cmFwcGVyLm9uKGcrZixfK24udGFzayxmdW5jdGlvbihuKXtuLnN0b3BQcm9wYWdhdGlvbigpLG4uY3RybEtleT90LnRyaWdnZXIoXCJjbGVhclwiKTp0LnRyaWdnZXIoXCJzZWxlY3RcIix7dWlkOmUodGhpcykuYXR0cihcImRhdGEtdWlkXCIpfSl9KS5vbihnK2YsXytuLnRhc2tzV3JhcHBlcixmdW5jdGlvbigpe3Quc2VsZWN0RGVwZW5kZW5jeSgpLmxlbmd0aD4wP3QuY2xlYXJTZWxlY3Rpb24oKTp0LnRyaWdnZXIoXCJjbGVhclwiKX0pLm9uKGcrZixfK24ubGluZSxmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLHQuc2VsZWN0RGVwZW5kZW5jeSh0aGlzKX0pfSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy53cmFwcGVyLmZpbmQoZSksbj1vLnN0eWxlcztyZXR1cm4gdC5sZW5ndGg/KHRoaXMuY2xlYXJTZWxlY3Rpb24oKSx0LmFkZENsYXNzKG4uc2VsZWN0ZWQpLHZvaWQoa2VuZG8uc3VwcG9ydC5tb2JpbGVPUyYmdC5wYXJlbnQoKS5hZGRDbGFzcyhuLnRhc2tXcmFwQWN0aXZlKSkpOnRoaXMud3JhcHBlci5maW5kKF8rbi50YXNrK18rbi5zZWxlY3RlZCl9LHNlbGVjdERlcGVuZGVuY3k6ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLndyYXBwZXIuZmluZCh0KSxyPW8uc3R5bGVzO3JldHVybiBpLmxlbmd0aD8odGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMudHJpZ2dlcihcImNsZWFyXCIpLG49ZShpKS5hdHRyKFwiZGF0YS11aWRcIiksdm9pZCB0aGlzLndyYXBwZXIuZmluZChfK3IubGluZStcIltkYXRhLXVpZD0nXCIrbitcIiddXCIpLmFkZENsYXNzKHIuc2VsZWN0ZWQpKTp0aGlzLndyYXBwZXIuZmluZChfK3IubGluZStfK3Iuc2VsZWN0ZWQpfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPW8uc3R5bGVzO3RoaXMud3JhcHBlci5maW5kKF8rZS5zZWxlY3RlZCkucmVtb3ZlQ2xhc3MoZS5zZWxlY3RlZCksa2VuZG8uc3VwcG9ydC5tb2JpbGVPUyYmdGhpcy53cmFwcGVyLmZpbmQoXytlLnRhc2tXcmFwQWN0aXZlKS5yZW1vdmVDbGFzcyhlLnRhc2tXcmFwQWN0aXZlKX0sX2F0dGFjaEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1vLnN0eWxlczt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLl90YWJpbmRleCgpLHRoaXMud3JhcHBlci5vbihnK2YsXytuLnRhc2tEZWxldGUsZnVuY3Rpb24oaSl7dC50cmlnZ2VyKFwicmVtb3ZlVGFza1wiLHt1aWQ6ZSh0aGlzKS5jbG9zZXN0KF8rbi50YXNrKS5hdHRyKFwiZGF0YS11aWRcIil9KSxpLnN0b3BQcm9wYWdhdGlvbigpLGkucHJldmVudERlZmF1bHQoKX0pLm9uKG0rZixfK24udGFzayxmdW5jdGlvbihuKXt0LnRyaWdnZXIoXCJlZGl0VGFza1wiLHt1aWQ6ZSh0aGlzKS5hdHRyKFwiZGF0YS11aWRcIil9KSxuLnN0b3BQcm9wYWdhdGlvbigpLG4ucHJldmVudERlZmF1bHQoKX0pLm9uKHYrZixmdW5jdGlvbihlKXt2YXIgbjtlLmtleUNvZGU9PT1oLkRFTEVURSYmKG49dC5zZWxlY3REZXBlbmRlbmN5KCksbi5sZW5ndGgmJih0LnRyaWdnZXIoXCJyZW1vdmVEZXBlbmRlbmN5XCIse3VpZDpuLmF0dHIoXCJkYXRhLXVpZFwiKX0pLHQuY2xlYXJTZWxlY3Rpb24oKSkpfSkpfX0pLGQoITAsbyx7c3R5bGVzOnJ9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVyblwiW1wiK2YuYXR0cihcInVpZFwiKSsoZT9cIj0nXCIrZStcIiddXCI6XCJdXCIpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGRlbGV0ZSBlLm5hbWUsZGVsZXRlIGUucHJlZml4LGRlbGV0ZSBlLnJlbW92ZSxkZWxldGUgZS5lZGl0LGRlbGV0ZSBlLmFkZCxkZWxldGUgZS5uYXZpZ2F0ZSxlfWZ1bmN0aW9uIHIoZSl7dmFyIHQsbixpLHIsbyxhO2lmKGUuZmlsdGVyKFwiW25hbWU9ZW5kXSwgW25hbWU9c3RhcnRdXCIpLmxlbmd0aCl7Zm9yKHQ9ZS5hdHRyKFwibmFtZVwiKSxuPWYud2lkZ2V0SW5zdGFuY2UoZSxmLnVpKSxpPXt9LHI9ZTtyIT09d2luZG93JiYhbzspcj1yLnBhcmVudCgpLG89ci5kYXRhKFwia2VuZG9FZGl0YWJsZVwiKTtyZXR1cm4oYT1vP28ub3B0aW9ucy5tb2RlbDpudWxsKT8oaS5zdGFydD1hLnN0YXJ0LGkuZW5kPWEuZW5kLGlbdF09bj9uLnZhbHVlKCk6Zi5wYXJzZURhdGUoZS52YWx1ZSgpKSxpLmVuZD49aS5zdGFydCk6ITB9cmV0dXJuITB9ZnVuY3Rpb24gbyh0LG4pe3ZhciBpPXQucGFyZW50cyhcIltcIitmLmF0dHIoXCJyb2xlXCIpKyc9XCJnYW50dFwiXScpLHI9W10sbz1hKGkpO3QuYXR0cihJLDApLG4mJm8uZWFjaChmdW5jdGlvbih0LG4pe3JbdF09ZShuKS5zY3JvbGxUb3AoKX0pO3RyeXt0WzBdLnNldEFjdGl2ZSgpfWNhdGNoKHMpe3RbMF0uZm9jdXMoKX1uJiZvLmVhY2goZnVuY3Rpb24odCxuKXtlKG4pLnNjcm9sbFRvcChyW3RdKX0pfWZ1bmN0aW9uIGEodCl7cmV0dXJuIGUodCkucGFyZW50c1VudGlsKFwiYm9keVwiKS5maWx0ZXIoZnVuY3Rpb24oZSx0KXt2YXIgbj1mLmdldENvbXB1dGVkU3R5bGVzKHQsW1wib3ZlcmZsb3dcIl0pO3JldHVyblwidmlzaWJsZVwiIT1uLm92ZXJmbG93fSkuYWRkKHdpbmRvdyl9dmFyIHMsbCxjLGQsdSxoLHAsZj13aW5kb3cua2VuZG8sZz1mLnN1cHBvcnQuYnJvd3NlcixtPWYuT2JzZXJ2YWJsZSx2PWYudWkuV2lkZ2V0LF89Zi5kYXRhLkRhdGFTb3VyY2UseT1mLmRhdGEuT2JzZXJ2YWJsZU9iamVjdCx3PWYuZGF0YS5PYnNlcnZhYmxlQXJyYXksYj1mLmRhdGEuUXVlcnksaz1lLmlzQXJyYXkseD1lLmluQXJyYXksQz1mLmlzRnVuY3Rpb24sUz1lLnByb3h5LFQ9ZS5leHRlbmQsRD1lLmlzUGxhaW5PYmplY3QsQT1lLm1hcCxFPWYua2V5cyxNPVwiLmtlbmRvR2FudHRcIixQPVwicDBcIixJPVwidGFiSW5kZXhcIix6PVwiY2xpY2tcIixGPVwid2lkdGhcIixSPVwic3RyaW5nXCIsQj17ZG93bjp7b3JpZ2luOlwiYm90dG9tIGNlbnRlclwiLHBvc2l0aW9uOlwidG9wIGNlbnRlclwifSx1cDp7b3JpZ2luOlwidG9wIGNlbnRlclwiLHBvc2l0aW9uOlwiYm90dG9tIGNlbnRlclwifX0sTD1cImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLE89XCJnYW50dF9hY3RpdmVfY2VsbFwiLEg9XCJhY3Rpb24tb3B0aW9uLWZvY3VzZWRcIixOPVwiLlwiLFY9XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz9cIixVPVwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGRlcGVuZGVuY3k/XCIsVz0nPGJ1dHRvbiBjbGFzcz1cIiM9c3R5bGVzLmJ1dHRvbiMgIz1jbGFzc05hbWUjXCIgI2lmIChhY3Rpb24pIHsjZGF0YS1hY3Rpb249XCIjPWFjdGlvbiNcIiN9Iz48c3BhbiBjbGFzcz1cIiM9aWNvbkNsYXNzI1wiPjwvc3Bhbj4jPXRleHQjPC9idXR0b24+JyxqPSc8YSBjbGFzcz1cIiM9Y2xhc3NOYW1lI1wiICM9YXR0ciMgaHJlZj1cIlxcXFwjXCI+Iz10ZXh0IzwvYT4nLEc9Zi50ZW1wbGF0ZSgnPHVsIGNsYXNzPVwiIz1zdHlsZXMudmlld3NXcmFwcGVyI1wiPiNmb3IodmFyIHZpZXcgaW4gdmlld3MpeyM8bGkgY2xhc3M9XCIjPXN0eWxlcy52aWV3QnV0dG9uRGVmYXVsdCMgIz1zdHlsZXMudmlld0J1dHRvbiMtIz0gdmlldy50b0xvd2VyQ2FzZSgpICNcIiBkYXRhLSM9bnMjbmFtZT1cIiM9dmlldyNcIj48YSBocmVmPVwiXFxcXCNcIiBjbGFzcz1cIiM9c3R5bGVzLmxpbmsjXCI+Iz12aWV3c1t2aWV3XS50aXRsZSM8L2E+PC9saT4jfSM8L3VsPicpLHE9Zi50ZW1wbGF0ZSgnPGRpdiBjbGFzcz1cIiM9c3R5bGVzLnBvcHVwV3JhcHBlciNcIj48dWwgY2xhc3M9XCIjPXN0eWxlcy5wb3B1cExpc3QjXCIgcm9sZT1cImxpc3Rib3hcIj4jZm9yKHZhciBpID0gMCwgbCA9IGFjdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKXsjPGxpIGNsYXNzPVwiIz1zdHlsZXMuaXRlbSNcIiBkYXRhLWFjdGlvbj1cIiM9YWN0aW9uc1tpXS5kYXRhI1wiIHJvbGU9XCJvcHRpb25cIj4jPWFjdGlvbnNbaV0udGV4dCM8L3NwYW4+I30jPC91bD48L2Rpdj4nKSwkPWYudGVtcGxhdGUoJzxkaXYgY2xhc3M9XCIjPXN0eWxlcy5mb290ZXJXcmFwcGVyI1wiPjxkaXYgY2xhc3M9XCIjPXN0eWxlcy5hY3Rpb25zI1wiPjxidXR0b24gY2xhc3M9XCIjPXN0eWxlcy5idXR0b24jXCIgZGF0YS1hY3Rpb249XCIjPWFjdGlvbi5kYXRhI1wiPjxzcGFuIGNsYXNzPVwiIz1zdHlsZXMuaWNvblBsdXMjXCI+PC9zcGFuPiM9YWN0aW9uLnRpdGxlIzwvYnV0dG9uPjwvZGl2PjwvZGl2PicpLFk9ZnVuY3Rpb24odCxuKXt2YXIgaT17bmFtZTpuLmZpZWxkfSxyPW4ubW9kZWwuZmllbGRzW24uZmllbGRdLnZhbGlkYXRpb247ciYmRChyKSYmci5tZXNzYWdlJiYoaVtmLmF0dHIoXCJkYXRlQ29tcGFyZS1tc2dcIildPXIubWVzc2FnZSksZSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgJytmLmF0dHIoXCJ0eXBlXCIpKyc9XCJkYXRlXCIgJytmLmF0dHIoXCJyb2xlXCIpKyc9XCJkYXRldGltZXBpY2tlclwiICcrZi5hdHRyKFwiYmluZFwiKSsnPVwidmFsdWU6JytuLmZpZWxkKydcIiAnK2YuYXR0cihcInZhbGlkYXRlXCIpK1wiPSd0cnVlJyAvPlwiKS5hdHRyKGkpLmFwcGVuZFRvKHQpLGUoXCI8c3BhbiBcIitmLmF0dHIoXCJmb3JcIikrJz1cIicrbi5maWVsZCsnXCIgY2xhc3M9XCJrLWludmFsaWQtbXNnXCIvPicpLmhpZGUoKS5hcHBlbmRUbyh0KX0sSz1mdW5jdGlvbih0LG4pe2UoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCInK24uc3R5bGVzLmJ1dHRvbisnXCI+JytuLm1lc3NhZ2VzLmFzc2luZ0J1dHRvbitcIjwvYT5cIikuY2xpY2sobi5jbGljaykuYXBwZW5kVG8odCl9LFE9e3dyYXBwZXI6XCJrLXdpZGdldCBrLWdhbnR0XCIsbGlzdFdyYXBwZXI6XCJrLWdhbnR0LWxheW91dCBrLWdhbnR0LXRyZWVsaXN0XCIsbGlzdDpcImstZ2FudHQtdHJlZWxpc3RcIix0aW1lbGluZVdyYXBwZXI6XCJrLWdhbnR0LWxheW91dCBrLWdhbnR0LXRpbWVsaW5lXCIsdGltZWxpbmU6XCJrLWdhbnR0LXRpbWVsaW5lXCIsc3BsaXRCYXJXcmFwcGVyOlwiay1zcGxpdGJhciBrLXN0YXRlLWRlZmF1bHQgay1zcGxpdGJhci1ob3Jpem9udGFsIGstc3BsaXRiYXItZHJhZ2dhYmxlLWhvcml6b250YWwgay1nYW50dC1sYXlvdXRcIixzcGxpdEJhcjpcImstc3BsaXRiYXJcIixzcGxpdEJhckhvdmVyOlwiay1zcGxpdGJhci1ob3Jpem9udGFsLWhvdmVyXCIscG9wdXBXcmFwcGVyOlwiay1saXN0LWNvbnRhaW5lclwiLHBvcHVwTGlzdDpcImstbGlzdCBrLXJlc2V0XCIscmVzaXplSGFuZGxlOlwiay1yZXNpemUtaGFuZGxlXCIsaWNvbjpcImstaWNvblwiLGl0ZW06XCJrLWl0ZW1cIixsaW5lOlwiay1saW5lXCIsYnV0dG9uRGVsZXRlOlwiay1nYW50dC1kZWxldGVcIixidXR0b25DYW5jZWw6XCJrLWdhbnR0LWNhbmNlbFwiLGJ1dHRvblNhdmU6XCJrLWdhbnR0LXVwZGF0ZVwiLHByaW1hcnk6XCJrLXByaW1hcnlcIixob3ZlcmVkOlwiay1zdGF0ZS1ob3ZlclwiLHNlbGVjdGVkOlwiay1zdGF0ZS1zZWxlY3RlZFwiLGZvY3VzZWQ6XCJrLXN0YXRlLWZvY3VzZWRcIixncmlkSGVhZGVyOlwiay1ncmlkLWhlYWRlclwiLGdyaWRIZWFkZXJXcmFwOlwiay1ncmlkLWhlYWRlci13cmFwXCIsZ3JpZENvbnRlbnQ6XCJrLWdyaWQtY29udGVudFwiLHBvcHVwOntmb3JtOlwiay1wb3B1cC1lZGl0LWZvcm1cIixlZGl0Rm9ybTpcImstZ2FudHQtZWRpdC1mb3JtXCIsZm9ybUNvbnRhaW5lcjpcImstZWRpdC1mb3JtLWNvbnRhaW5lclwiLHJlc291cmNlc0Zvcm1Db250YWluZXI6XCJrLXJlc291cmNlcy1mb3JtLWNvbnRhaW5lclwiLG1lc3NhZ2U6XCJrLXBvcHVwLW1lc3NhZ2VcIixidXR0b25zQ29udGFpbmVyOlwiay1lZGl0LWJ1dHRvbnMgay1zdGF0ZS1kZWZhdWx0XCIsYnV0dG9uOlwiay1idXR0b25cIixlZGl0RmllbGQ6XCJrLWVkaXQtZmllbGRcIixlZGl0TGFiZWw6XCJrLWVkaXQtbGFiZWxcIixyZXNvdXJjZXNGaWVsZDpcImstZ2FudHQtcmVzb3VyY2VzXCJ9LHRvb2xiYXI6e2hlYWRlcldyYXBwZXI6XCJrLWZsb2F0d3JhcCBrLWhlYWRlciBrLWdhbnR0LXRvb2xiYXJcIixmb290ZXJXcmFwcGVyOlwiay1mbG9hdHdyYXAgay1oZWFkZXIgay1nYW50dC10b29sYmFyXCIsdG9vbGJhcjpcImstZ2FudHQtdG9vbGJhclwiLHZpZXdzOlwiay1nYW50dC12aWV3c1wiLHZpZXdzV3JhcHBlcjpcImstcmVzZXQgay1oZWFkZXIgay1nYW50dC12aWV3c1wiLGFjdGlvbnM6XCJrLWdhbnR0LWFjdGlvbnNcIixidXR0b246XCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29udGV4dFwiLGljb25QbHVzOlwiay1pY29uIGstaS1wbHVzXCIsaWNvblBkZjpcImstaWNvbiBrLWktcGRmXCIsdmlld0J1dHRvbkRlZmF1bHQ6XCJrLXN0YXRlLWRlZmF1bHRcIix2aWV3QnV0dG9uOlwiay12aWV3XCIsbGluazpcImstbGlua1wiLHBkZkJ1dHRvbjpcImstZ2FudHQtcGRmXCIsYXBwZW5kQnV0dG9uOlwiay1nYW50dC1jcmVhdGVcIn19LFg9e2FwcGVuZDp7dGV4dDpcIkFkZCBUYXNrXCIsYWN0aW9uOlwiYWRkXCIsY2xhc3NOYW1lOlEudG9vbGJhci5hcHBlbmRCdXR0b24saWNvbkNsYXNzOlEudG9vbGJhci5pY29uUGx1c30scGRmOnt0ZXh0OlwiRXhwb3J0IHRvIFBERlwiLGNsYXNzTmFtZTpRLnRvb2xiYXIucGRmQnV0dG9uLGljb25DbGFzczpRLnRvb2xiYXIuaWNvblBkZn19LEo9bS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXttLmZuLmluaXQuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQ9ZSx0aGlzLm9wdGlvbnM9VCghMCx7fSx0aGlzLm9wdGlvbnMsdCksdGhpcy5fcG9wdXAoKX0sb3B0aW9uczp7ZGlyZWN0aW9uOlwiZG93blwiLG5hdmlnYXRhYmxlOiExfSxfY3VycmVudDpmdW5jdGlvbihlKXt2YXIgdD1wLnN0eWxlcyxuPXRoaXMubGlzdC5maW5kKE4rdC5mb2N1c2VkKSxpPW5bZV0oKTtpLmxlbmd0aCYmKG4ucmVtb3ZlQ2xhc3ModC5mb2N1c2VkKS5yZW1vdmVBdHRyKFwiaWRcIiksaS5hZGRDbGFzcyh0LmZvY3VzZWQpLmF0dHIoXCJpZFwiLEgpLHRoaXMubGlzdC5maW5kKFwidWxcIikucmVtb3ZlQXR0cihMKS5hdHRyKEwsSCkpfSxfcG9wdXA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49cC5zdHlsZXMsaT1cImxpXCIrTituLml0ZW0scj10aGlzLm9wdGlvbnMubWVzc2FnZXMuYWN0aW9ucyxvPXRoaXMub3B0aW9ucy5uYXZpZ2F0YWJsZTt0aGlzLmxpc3Q9ZShxKHtzdHlsZXM6bixhY3Rpb25zOlt7ZGF0YTpcImFkZFwiLHRleHQ6ci5hZGRDaGlsZH0se2RhdGE6XCJpbnNlcnQtYmVmb3JlXCIsdGV4dDpyLmluc2VydEJlZm9yZX0se2RhdGE6XCJpbnNlcnQtYWZ0ZXJcIix0ZXh0OnIuaW5zZXJ0QWZ0ZXJ9XX0pKSx0aGlzLmVsZW1lbnQuYXBwZW5kKHRoaXMubGlzdCksdGhpcy5wb3B1cD1uZXcgZi51aS5Qb3B1cCh0aGlzLmxpc3QsVCh7YW5jaG9yOnRoaXMuZWxlbWVudCxvcGVuOmZ1bmN0aW9uKCl7dC5fYWRqdXN0TGlzdFdpZHRoKCl9LGFuaW1hdGlvbjp0aGlzLm9wdGlvbnMuYW5pbWF0aW9ufSxCW3RoaXMub3B0aW9ucy5kaXJlY3Rpb25dKSksdGhpcy5lbGVtZW50Lm9uKHorTSxOK24udG9vbGJhci5hcHBlbmRCdXR0b24sZnVuY3Rpb24oaSl7dmFyIHI9ZSh0aGlzKSxhPXIuYXR0cihmLmF0dHIoXCJhY3Rpb25cIikpO2kucHJldmVudERlZmF1bHQoKSxhP3QudHJpZ2dlcihcImNvbW1hbmRcIix7dHlwZTphfSk6KHQucG9wdXAub3BlbigpLG8mJnQubGlzdC5maW5kKFwibGk6Zmlyc3RcIikuYWRkQ2xhc3Mobi5mb2N1c2VkKS5hdHRyKFwiaWRcIixIKS5lbmQoKS5maW5kKFwidWxcIikuYXR0cih7VEFCSU5ERVg6MCxcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOkh9KS5mb2N1cygpKX0pLHRoaXMubGlzdC5maW5kKGkpLmhvdmVyKGZ1bmN0aW9uKCl7ZSh0aGlzKS5hZGRDbGFzcyhuLmhvdmVyZWQpfSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3Mobi5ob3ZlcmVkKX0pLmVuZCgpLm9uKHorTSxpLGZ1bmN0aW9uKCl7dC50cmlnZ2VyKFwiY29tbWFuZFwiLHt0eXBlOmUodGhpcykuYXR0cihmLmF0dHIoXCJhY3Rpb25cIikpfSksdC5wb3B1cC5jbG9zZSgpfSksbyYmKHRoaXMucG9wdXAuYmluZChcImNsb3NlXCIsZnVuY3Rpb24oKXt0Lmxpc3QuZmluZChpKS5yZW1vdmVDbGFzcyhuLmZvY3VzZWQpLmVuZCgpLmZpbmQoXCJ1bFwiKS5hdHRyKEksMCksdC5lbGVtZW50LnBhcmVudHMoXCJbXCIrZi5hdHRyKFwicm9sZVwiKSsnPVwiZ2FudHRcIl0nKS5maW5kKE4rbi5ncmlkQ29udGVudCtcIiA+IHRhYmxlOmZpcnN0XCIpLmZvY3VzKCl9KSx0aGlzLmxpc3QuZmluZChcInVsXCIpLm9uKFwia2V5ZG93blwiK00sZnVuY3Rpb24oZSl7dmFyIGk9ZS5rZXlDb2RlO3N3aXRjaChpKXtjYXNlIEUuVVA6ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX2N1cnJlbnQoXCJwcmV2XCIpO2JyZWFrO2Nhc2UgRS5ET1dOOmUucHJldmVudERlZmF1bHQoKSx0Ll9jdXJyZW50KFwibmV4dFwiKTticmVhaztjYXNlIEUuRU5URVI6dC5saXN0LmZpbmQoTituLmZvY3VzZWQpLmNsaWNrKCk7YnJlYWs7Y2FzZSBFLkVTQzplLnByZXZlbnREZWZhdWx0KCksdC5wb3B1cC5jbG9zZSgpfX0pKX0sX2FkanVzdExpc3RXaWR0aDpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmxpc3QsaT1uWzBdLnN0eWxlLndpZHRoLHI9dGhpcy5lbGVtZW50OyhuLmRhdGEoRil8fCFpKSYmKGU9d2luZG93LmdldENvbXB1dGVkU3R5bGU/d2luZG93LmdldENvbXB1dGVkU3R5bGUoclswXSxudWxsKTowLHQ9ZT9wYXJzZUZsb2F0KGUud2lkdGgpOnIub3V0ZXJXaWR0aCgpLGUmJihnLm1vemlsbGF8fGcubXNpZSkmJih0Kz1wYXJzZUZsb2F0KGUucGFkZGluZ0xlZnQpK3BhcnNlRmxvYXQoZS5wYWRkaW5nUmlnaHQpK3BhcnNlRmxvYXQoZS5ib3JkZXJMZWZ0V2lkdGgpK3BhcnNlRmxvYXQoZS5ib3JkZXJSaWdodFdpZHRoKSksaT1cImJvcmRlci1ib3hcIiE9PW4uY3NzKFwiYm94LXNpemluZ1wiKT90LShuLm91dGVyV2lkdGgoKS1uLndpZHRoKCkpOnQsbi5jc3Moe2ZvbnRGYW1pbHk6ci5jc3MoXCJmb250LWZhbWlseVwiKSx3aWR0aDppfSkuZGF0YShGLGkpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucG9wdXAuZGVzdHJveSgpLHRoaXMuZWxlbWVudC5vZmYoTSksdGhpcy5saXN0Lm9mZihNKSx0aGlzLnVuYmluZCgpfX0pLFo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGkscjtpZihuPWsoaSk/e2RhdGE6bn06bixpPW58fHt9LHI9aS5kYXRhLGkuZGF0YT1yLCEoaSBpbnN0YW5jZW9mIGUpJiZpIGluc3RhbmNlb2YgXyl0aHJvdyBFcnJvcihcIkluY29ycmVjdCBEYXRhU291cmNlIHR5cGUuIE9ubHkgXCIrdCtcIiBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZFwiKTtyZXR1cm4gaSBpbnN0YW5jZW9mIGU/aTpuZXcgZShpKX19LGV0PWYuZGF0YS5Nb2RlbC5kZWZpbmUoe2lkOlwiaWRcIixmaWVsZHM6e2lkOnt0eXBlOlwibnVtYmVyXCJ9LHByZWRlY2Vzc29ySWQ6e3R5cGU6XCJudW1iZXJcIn0sc3VjY2Vzc29ySWQ6e3R5cGU6XCJudW1iZXJcIn0sdHlwZTp7dHlwZTpcIm51bWJlclwifX19KSx0dD1fLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihlKXtfLmZuLmluaXQuY2FsbCh0aGlzLFQoITAse30se3NjaGVtYTp7bW9kZWxCYXNlOmV0LG1vZGVsOmV0fX0sZSkpfSxzdWNjZXNzb3JzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kZXBlbmRlbmNpZXMoXCJwcmVkZWNlc3NvcklkXCIsZSl9LHByZWRlY2Vzc29yczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGVwZW5kZW5jaWVzKFwic3VjY2Vzc29ySWRcIixlKX0sZGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJlZGVjZXNzb3JzKGUpLG49dGhpcy5zdWNjZXNzb3JzKGUpO3JldHVybiB0LnB1c2guYXBwbHkodCxuKSx0fSxfZGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy52aWV3KCksaT17ZmllbGQ6ZSxvcGVyYXRvcjpcImVxXCIsdmFsdWU6dH07cmV0dXJuIG49bmV3IGIobikuZmlsdGVyKGkpLnRvQXJyYXkoKX19KTt0dC5jcmVhdGU9Wih0dCxcIkdhbnR0RGVwZW5kZW5jeURhdGFTb3VyY2VcIikscz1mLmRhdGEuTW9kZWwuZGVmaW5lKHtkdXJhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZW5kLHQ9dGhpcy5zdGFydDtyZXR1cm4gZS10fSxpc01pbGVzdG9uZTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5kdXJhdGlvbigpfSxfb2Zmc2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXCJzdGFydFwiLFwiZW5kXCJdO2ZvcihuPTA7aS5sZW5ndGg+bjtuKyspdD1uZXcgRGF0ZSh0aGlzLmdldChpW25dKS5nZXRUaW1lKCkrZSksdGhpcy5zZXQoaVtuXSx0KX0saWQ6XCJpZFwiLGZpZWxkczp7aWQ6e3R5cGU6XCJudW1iZXJcIn0scGFyZW50SWQ6e3R5cGU6XCJudW1iZXJcIixkZWZhdWx0VmFsdWU6bnVsbCx2YWxpZGF0aW9uOntyZXF1aXJlZDohMH19LG9yZGVySWQ6e3R5cGU6XCJudW1iZXJcIix2YWxpZGF0aW9uOntyZXF1aXJlZDohMH19LHRpdGxlOnt0eXBlOlwic3RyaW5nXCIsZGVmYXVsdFZhbHVlOlwiXCJ9LHN0YXJ0Ont0eXBlOlwiZGF0ZVwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwLGRhdGVDb21wYXJlOnIsbWVzc2FnZTpcIlN0YXJ0IGRhdGUgc2hvdWxkIGJlIGJlZm9yZSBvciBlcXVhbCB0byB0aGUgZW5kIGRhdGVcIn19LGVuZDp7dHlwZTpcImRhdGVcIix2YWxpZGF0aW9uOntyZXF1aXJlZDohMCxkYXRlQ29tcGFyZTpyLG1lc3NhZ2U6XCJFbmQgZGF0ZSBzaG91bGQgYmUgYWZ0ZXIgb3IgZXF1YWwgdG8gdGhlIHN0YXJ0IGRhdGVcIn19LHBlcmNlbnRDb21wbGV0ZTp7dHlwZTpcIm51bWJlclwiLHZhbGlkYXRpb246e3JlcXVpcmVkOiEwLG1pbjowLG1heDoxLHN0ZXA6LjAxfX0sc3VtbWFyeTp7dHlwZTpcImJvb2xlYW5cIn0sZXhwYW5kZWQ6e3R5cGU6XCJib29sZWFuXCIsZGVmYXVsdFZhbHVlOiEwfX19KSxsPV8uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe18uZm4uaW5pdC5jYWxsKHRoaXMsVCghMCx7fSx7c2NoZW1hOnttb2RlbEJhc2U6cyxtb2RlbDpzfX0sZSkpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXQoXCJwYXJlbnRJZFwiKSxuPXRoaXMudGFza0FsbENoaWxkcmVuKGUpO3JldHVybiB0aGlzLl9yZW1vdmVJdGVtcyhuKSxlPV8uZm4ucmVtb3ZlLmNhbGwodGhpcyxlKSx0aGlzLl9jaGlsZFJlbW92ZWQodCxlLmdldChcIm9yZGVySWRcIikpLGV9LGFkZDpmdW5jdGlvbihlKXtyZXR1cm4gZT8oZT10aGlzLl90b0dhbnR0VGFzayhlKSx0aGlzLmluc2VydCh0aGlzLnRhc2tTaWJsaW5ncyhlKS5sZW5ndGgsZSkpOnR9LGluc2VydDpmdW5jdGlvbihlLG4pe3JldHVybiBuPyhuPXRoaXMuX3RvR2FudHRUYXNrKG4pLG4uc2V0KFwib3JkZXJJZFwiLGUpLG49Xy5mbi5pbnNlcnQuY2FsbCh0aGlzLGUsbiksdGhpcy5fcmVvcmRlclNpYmxpbmdzKG4sdGhpcy50YXNrU2libGluZ3MobikubGVuZ3RoLTEpLHRoaXMuX3Jlc29sdmVTdW1tYXJ5RmllbGRzKHRoaXMudGFza1BhcmVudChuKSksbik6dH0sdGFza0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcy52aWV3KCkscj17ZmllbGQ6XCJwYXJlbnRJZFwiLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTpudWxsfSxvPXRoaXMuX3NvcnR8fHtmaWVsZDpcIm9yZGVySWRcIixkaXI6XCJhc2NcIn07aWYoZSl7aWYobj1lLmdldChcImlkXCIpLG49PT10fHxudWxsPT09bilyZXR1cm5bXTtyLnZhbHVlPW59cmV0dXJuIGk9bmV3IGIoaSkuZmlsdGVyKHIpLnNvcnQobykudG9BcnJheSgpfSx0YXNrQWxsQ2hpbGRyZW46ZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj10aGlzLGk9ZnVuY3Rpb24oZSl7dmFyIHI9bi50YXNrQ2hpbGRyZW4oZSk7dC5wdXNoLmFwcGx5KHQsciksQShyLGkpfTtyZXR1cm4gZT9pKGUpOnQ9dGhpcy52aWV3KCksdH0sdGFza1NpYmxpbmdzOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiBudWxsO3ZhciB0PXRoaXMudGFza1BhcmVudChlKTtyZXR1cm4gdGhpcy50YXNrQ2hpbGRyZW4odCl9LHRhc2tQYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJm51bGwhPT1lLmdldChcInBhcmVudElkXCIpP3RoaXMuZ2V0KGUucGFyZW50SWQpOm51bGx9LHRhc2tMZXZlbDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPXRoaXMudGFza1BhcmVudChlKTtudWxsIT09bjspdCs9MSxuPXRoaXMudGFza1BhcmVudChuKTtyZXR1cm4gdH0sdGFza1RyZWU6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz1bXSxhPXRoaXMudGFza0NoaWxkcmVuKGUpO2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKXQ9YVtuXSxvLnB1c2godCksdC5nZXQoXCJleHBhbmRlZFwiKSYmKHI9dGhpcy50YXNrVHJlZSh0KSxvLnB1c2guYXBwbHkobyxyKSk7cmV0dXJuIG99LHVwZGF0ZTpmdW5jdGlvbihlLG4pe3ZhciBpLHIsbz10aGlzLGE9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9by50YXNrQWxsQ2hpbGRyZW4oZSk7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspcltuXS5fb2Zmc2V0KHQpfSxzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZmllbGQsbj1lLnNlbmRlcjtzd2l0Y2godCl7Y2FzZVwic3RhcnRcIjpvLl9yZXNvbHZlU3VtbWFyeVN0YXJ0KG8udGFza1BhcmVudChuKSksYShuLG4uZ2V0KHQpLmdldFRpbWUoKS1pLmdldFRpbWUoKSk7YnJlYWs7Y2FzZVwiZW5kXCI6by5fcmVzb2x2ZVN1bW1hcnlFbmQoby50YXNrUGFyZW50KG4pKTticmVhaztjYXNlXCJwZXJjZW50Q29tcGxldGVcIjpvLl9yZXNvbHZlU3VtbWFyeVBlcmNlbnRDb21wbGV0ZShvLnRhc2tQYXJlbnQobikpO2JyZWFrO2Nhc2VcIm9yZGVySWRcIjpvLl9yZW9yZGVyU2libGluZ3MobixpKX19O24ucGFyZW50SWQhPT10JiYoaT1lLmdldChcInBhcmVudElkXCIpLGkhPT1uLnBhcmVudElkJiYoZS5zZXQoXCJwYXJlbnRJZFwiLG4ucGFyZW50SWQpLG8uX2NoaWxkUmVtb3ZlZChpLGUuZ2V0KFwib3JkZXJJZFwiKSksZS5zZXQoXCJvcmRlcklkXCIsby50YXNrU2libGluZ3MoZSkubGVuZ3RoLTEpLG8uX3Jlc29sdmVTdW1tYXJ5RmllbGRzKG8udGFza1BhcmVudChlKSkpLGRlbGV0ZSBuLnBhcmVudElkKSxlLmJpbmQoXCJjaGFuZ2VcIixzKTtmb3IociBpbiBuKWk9ZS5nZXQociksZS5zZXQocixuW3JdKTtlLnVuYmluZChcImNoYW5nZVwiLHMpfSxfcmVzb2x2ZVN1bW1hcnlGaWVsZHM6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3VwZGF0ZVN1bW1hcnkoZSksdGhpcy50YXNrQ2hpbGRyZW4oZSkubGVuZ3RoJiYodGhpcy5fcmVzb2x2ZVN1bW1hcnlTdGFydChlKSx0aGlzLl9yZXNvbHZlU3VtbWFyeUVuZChlKSx0aGlzLl9yZXNvbHZlU3VtbWFyeVBlcmNlbnRDb21wbGV0ZShlKSkpfSxfcmVzb2x2ZVN1bW1hcnlTdGFydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZnVuY3Rpb24oZSl7dmFyIG4saSxyLG89dC50YXNrQ2hpbGRyZW4oZSksYT1vWzBdLnN0YXJ0LmdldFRpbWUoKTtmb3IoaT0xLHI9by5sZW5ndGg7cj5pO2krKyluPW9baV0uc3RhcnQuZ2V0VGltZSgpLGE+biYmKGE9bik7cmV0dXJuIG5ldyBEYXRlKGEpfTt0aGlzLl91cGRhdGVTdW1tYXJ5UmVjdXJzaXZlKGUsXCJzdGFydFwiLG4pfSxfcmVzb2x2ZVN1bW1hcnlFbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixvPXQudGFza0NoaWxkcmVuKGUpLGE9b1swXS5lbmQuZ2V0VGltZSgpO2ZvcihpPTEscj1vLmxlbmd0aDtyPmk7aSsrKW49b1tpXS5lbmQuZ2V0VGltZSgpLG4+YSYmKGE9bik7cmV0dXJuIG5ldyBEYXRlKGEpfTt0aGlzLl91cGRhdGVTdW1tYXJ5UmVjdXJzaXZlKGUsXCJlbmRcIixuKX0sX3Jlc29sdmVTdW1tYXJ5UGVyY2VudENvbXBsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1mdW5jdGlvbihlKXt2YXIgbj10LnRhc2tDaGlsZHJlbihlKSxpPW5ldyBiKG4pLmFnZ3JlZ2F0ZShbe2ZpZWxkOlwicGVyY2VudENvbXBsZXRlXCIsYWdncmVnYXRlOlwiYXZlcmFnZVwifV0pO3JldHVybiBpLnBlcmNlbnRDb21wbGV0ZS5hdmVyYWdlfTt0aGlzLl91cGRhdGVTdW1tYXJ5UmVjdXJzaXZlKGUsXCJwZXJjZW50Q29tcGxldGVcIixuKX0sX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7ZSYmKGk9bihlKSxlLnNldCh0LGkpLHI9dGhpcy50YXNrUGFyZW50KGUpLHImJnRoaXMuX3VwZGF0ZVN1bW1hcnlSZWN1cnNpdmUocix0LG4pKX0sX2NoaWxkUmVtb3ZlZDpmdW5jdGlvbihlLHQpe3ZhciBuLGkscj1udWxsPT09ZT9udWxsOnRoaXMuZ2V0KGUpLG89dGhpcy50YXNrQ2hpbGRyZW4ocik7Zm9yKG49dCxpPW8ubGVuZ3RoO2k+bjtuKyspb1tuXS5zZXQoXCJvcmRlcklkXCIsbik7dGhpcy5fcmVzb2x2ZVN1bW1hcnlGaWVsZHMocil9LF9yZW9yZGVyU2libGluZ3M6ZnVuY3Rpb24oZSx0KXt2YXIgbixpPWUuZ2V0KFwib3JkZXJJZFwiKSxyPWk+dCxvPXI/dDppLGE9cj9pOnQscz1yP286bysxLGw9dGhpcy50YXNrU2libGluZ3MoZSk7Zm9yKGE9TWF0aC5taW4oYSxsLmxlbmd0aC0xKSxuPW87YT49bjtuKyspbFtuXSE9PWUmJihsW25dLnNldChcIm9yZGVySWRcIixzKSxzKz0xKX0sX3VwZGF0ZVN1bW1hcnk6ZnVuY3Rpb24oZSl7aWYobnVsbCE9PWUpe3ZhciB0PXRoaXMudGFza0NoaWxkcmVuKGUpLmxlbmd0aDtlLnNldChcInN1bW1hcnlcIix0PjApfX0sX3RvR2FudHRUYXNrOmZ1bmN0aW9uKGUpe2lmKCEoZSBpbnN0YW5jZW9mIHMpKXt2YXIgdD1lO2U9dGhpcy5fY3JlYXRlTmV3TW9kZWwoKSxlLmFjY2VwdCh0KX1yZXR1cm4gZX19KSxsLmNyZWF0ZT1aKGwsXCJHYW50dERhdGFTb3VyY2VcIiksVCghMCxmLmRhdGEse0dhbnR0RGF0YVNvdXJjZTpsLEdhbnR0VGFzazpzLEdhbnR0RGVwZW5kZW5jeURhdGFTb3VyY2U6dHQsR2FudHREZXBlbmRlbmN5OmV0fSksYz17ZGVza3RvcDp7ZGF0ZVJhbmdlOlkscmVzb3VyY2VzOkt9fSxkPWYuT2JzZXJ2YWJsZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtmLk9ic2VydmFibGUuZm4uaW5pdC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudD1lLHRoaXMub3B0aW9ucz1UKCEwLHt9LHRoaXMub3B0aW9ucyx0KSx0aGlzLmNyZWF0ZUJ1dHRvbj10aGlzLm9wdGlvbnMuY3JlYXRlQnV0dG9ufSxmaWVsZHM6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmVkaXRvcixyPXRoaXMub3B0aW9ucy5yZXNvdXJjZXMsbz1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksci5lZGl0b3Iobi5jb250YWluZXIuZmluZChOK3Auc3R5bGVzLnBvcHVwLnJlc291cmNlc0ZpZWxkKSx0KX0sYT1be2ZpZWxkOlwidGl0bGVcIix0aXRsZTppLnRpdGxlfSx7ZmllbGQ6XCJzdGFydFwiLHRpdGxlOmkuc3RhcnQsZWRpdG9yOmUuZGF0ZVJhbmdlfSx7ZmllbGQ6XCJlbmRcIix0aXRsZTppLmVuZCxlZGl0b3I6ZS5kYXRlUmFuZ2V9LHtmaWVsZDpcInBlcmNlbnRDb21wbGV0ZVwiLHRpdGxlOmkucGVyY2VudENvbXBsZXRlLGZvcm1hdDpQfV07cmV0dXJuIHQuZ2V0KHIuZmllbGQpJiZhLnB1c2goe2ZpZWxkOnIuZmllbGQsdGl0bGU6aS5yZXNvdXJjZXMsbWVzc2FnZXM6aSxlZGl0b3I6ZS5yZXNvdXJjZXMsY2xpY2s6byxzdHlsZXM6cC5zdHlsZXMucG9wdXB9KSxhfSxfYnVpbGRFZGl0VGVtcGxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIsbyxhLHM9dGhpcy5vcHRpb25zLnJlc291cmNlcyxsPXRoaXMub3B0aW9ucy5lZGl0YWJsZS50ZW1wbGF0ZSxjPVQoe30sZi5UZW1wbGF0ZSx0aGlzLm9wdGlvbnMudGVtcGxhdGVTZXR0aW5ncyksZD1jLnBhcmFtTmFtZSx1PXAuc3R5bGVzLnBvcHVwLGg9XCJcIjtpZihsKXR5cGVvZiBsPT09UiYmKGw9d2luZG93LnVuZXNjYXBlKGwpKSxoKz1mLnRlbXBsYXRlKGwsYykoZSk7ZWxzZSBmb3IoaT0wLHI9dC5sZW5ndGg7cj5pO2krKylvPXRbaV0saCs9JzxkaXYgY2xhc3M9XCInK3UuZWRpdExhYmVsKydcIj48bGFiZWwgZm9yPVwiJytvLmZpZWxkKydcIj4nKyhvLnRpdGxlfHxvLmZpZWxkfHxcIlwiKStcIjwvbGFiZWw+PC9kaXY+XCIsby5maWVsZD09PXMuZmllbGQmJihoKz0nPGRpdiBjbGFzcz1cIicrdS5yZXNvdXJjZXNGaWVsZCsnXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L2Rpdj4nKSwhZS5lZGl0YWJsZXx8ZS5lZGl0YWJsZShvLmZpZWxkKT8obi5wdXNoKG8pLGgrPVwiPGRpdiBcIitmLmF0dHIoXCJjb250YWluZXItZm9yXCIpKyc9XCInK28uZmllbGQrJ1wiIGNsYXNzPVwiJyt1LmVkaXRGaWVsZCsnXCI+PC9kaXY+Jyk6KGE9XCIjOlwiLG8uZmllbGQ/KG89Zi5leHByKG8uZmllbGQsZCksYSs9bytcIj09bnVsbD8nJzpcIitvKTphKz1cIicnXCIsYSs9XCIjXCIsYT1mLnRlbXBsYXRlKGEsYyksaCs9JzxkaXYgY2xhc3M9XCInK3UuZWRpdEZpZWxkKydcIj4nK2EoZSkrXCI8L2Rpdj5cIik7cmV0dXJuIGh9fSksdT1kLmV4dGVuZCh7ZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnVuYmluZCgpfSxlZGl0VGFzazpmdW5jdGlvbihlKXt0aGlzLmVkaXRhYmxlPXRoaXMuX2NyZWF0ZVBvcHVwRWRpdG9yKGUpfSxjbG9zZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1mdW5jdGlvbigpe2UuZWRpdGFibGUmJihlLmVkaXRhYmxlLmRlc3Ryb3koKSxlLmVkaXRhYmxlPW51bGwsZS5jb250YWluZXI9bnVsbCksZS5wb3B1cCYmKGUucG9wdXAuZGVzdHJveSgpLGUucG9wdXA9bnVsbCl9O3RoaXMuZWRpdGFibGUmJnRoaXMuY29udGFpbmVyLmlzKFwiOnZpc2libGVcIik/dGhpcy5jb250YWluZXIuZGF0YShcImtlbmRvV2luZG93XCIpLmJpbmQoXCJkZWFjdGl2YXRlXCIsdCkuY2xvc2UoKTp0KCl9LHNob3dEaWFsb2c6ZnVuY3Rpb24odCl7dmFyIG4saSxyLG8sYT10LmJ1dHRvbnMscz1wLnN0eWxlcy5wb3B1cCxsPWYuZm9ybWF0KCc8ZGl2IGNsYXNzPVwiezB9XCI+PGRpdiBjbGFzcz1cInsxfVwiPjxwIGNsYXNzPVwiezJ9XCI+ezN9PC9wPjxkaXYgY2xhc3M9XCJ7NH1cIj4nLHMuZm9ybSxzLmZvcm1Db250YWluZXIscy5tZXNzYWdlLHQudGV4dCxzLmJ1dHRvbnNDb250YWluZXIpO2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKWwrPXRoaXMuY3JlYXRlQnV0dG9uKGFbbl0pO2wrPVwiPC9kaXY+PC9kaXY+PC9kaXY+XCIscj10aGlzLmVsZW1lbnQsdGhpcy5wb3B1cCYmdGhpcy5wb3B1cC5kZXN0cm95KCksbz10aGlzLnBvcHVwPWUobCkuYXBwZW5kVG8ocikuZXEoMCkub24oXCJjbGlja1wiLE4rcy5idXR0b24sZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLG8uY2xvc2UoKTt2YXIgbj1lKHQuY3VycmVudFRhcmdldCkuaW5kZXgoKTthW25dLmNsaWNrKCl9KS5rZW5kb1dpbmRvdyh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMSx0aXRsZTp0LnRpdGxlLHZpc2libGU6ITEsY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKSxyLmZvY3VzKCl9fSkuZ2V0S2VuZG9XaW5kb3coKSxvLmNlbnRlcigpLm9wZW4oKX0sX2NyZWF0ZVBvcHVwRWRpdG9yOmZ1bmN0aW9uKHQpe3ZhciBuLGkscj10aGlzLG89e30sYT10aGlzLm9wdGlvbnMubWVzc2FnZXMscz1wLnN0eWxlcyxsPXMucG9wdXAsZD1mLmZvcm1hdCgnPGRpdiB7MH09XCJ7MX1cIiBjbGFzcz1cInsyfSB7M31cIj48ZGl2IGNsYXNzPVwiezR9XCI+JyxmLmF0dHIoXCJ1aWRcIiksdC51aWQsbC5mb3JtLGwuZWRpdEZvcm0sbC5mb3JtQ29udGFpbmVyKSx1PXRoaXMuZmllbGRzKGMuZGVza3RvcCx0KSxoPVtdO3JldHVybiBkKz10aGlzLl9idWlsZEVkaXRUZW1wbGF0ZSh0LHUsaCksZCs9JzxkaXYgY2xhc3M9XCInK2wuYnV0dG9uc0NvbnRhaW5lcisnXCI+JyxkKz10aGlzLmNyZWF0ZUJ1dHRvbih7bmFtZTpcInVwZGF0ZVwiLHRleHQ6YS5zYXZlLGNsYXNzTmFtZTpwLnN0eWxlcy5wcmltYXJ5fSksZCs9dGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJjYW5jZWxcIix0ZXh0OmEuY2FuY2VsfSksZCs9dGhpcy5jcmVhdGVCdXR0b24oe25hbWU6XCJkZWxldGVcIix0ZXh0OmEuZGVzdHJveX0pLGQrPVwiPC9kaXY+PC9kaXY+PC9kaXY+XCIsbj10aGlzLmNvbnRhaW5lcj1lKGQpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCkuZXEoMCkua2VuZG9XaW5kb3coVCh7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCx0aXRsZTphLmVkaXRvci5lZGl0b3JUaXRsZSx2aXNpYmxlOiExLGNsb3NlOmZ1bmN0aW9uKGUpe2UudXNlclRyaWdnZXJlZCYmci50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0sbykpLGk9bi5rZW5kb0VkaXRhYmxlKHtmaWVsZHM6aCxtb2RlbDp0LGNsZWFyQ29udGFpbmVyOiExLHZhbGlkYXRlT25CbHVyOiEwLHRhcmdldDpyLm9wdGlvbnMudGFyZ2V0fSkuZGF0YShcImtlbmRvRWRpdGFibGVcIiksdGhpcy50cmlnZ2VyKFwiZWRpdFwiLHtjb250YWluZXI6bixtb2RlbDp0fSk/ci50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KToobi5kYXRhKFwia2VuZG9XaW5kb3dcIikuY2VudGVyKCkub3BlbigpLG4ub24oeitNLE4rcy5idXR0b25DYW5jZWwsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksci50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpuLG1vZGVsOnR9KX0pLG4ub24oeitNLE4rcy5idXR0b25TYXZlLGZ1bmN0aW9uKGUpe3ZhciBpLG8sYSxzLGw7Zm9yKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLGk9ci5maWVsZHMoYy5kZXNrdG9wLHQpLG89e30scz0wLGw9aS5sZW5ndGg7bD5zO3MrKylhPWlbc10uZmllbGQsb1thXT10LmdldChhKTtyLnRyaWdnZXIoXCJzYXZlXCIse2NvbnRhaW5lcjpuLG1vZGVsOnQsdXBkYXRlSW5mbzpvfSl9KSxuLm9uKHorTSxOK3MuYnV0dG9uRGVsZXRlLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHIudHJpZ2dlcihcInJlbW92ZVwiLHtjb250YWluZXI6bixtb2RlbDp0fSl9KSksaX19KSxoPXYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7di5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQsdGhpcy5tb2RlbD10aGlzLm9wdGlvbnMubW9kZWwsdGhpcy5yZXNvdXJjZXNGaWVsZD10aGlzLm9wdGlvbnMucmVzb3VyY2VzRmllbGQsdGhpcy5jcmVhdGVCdXR0b249dGhpcy5vcHRpb25zLmNyZWF0ZUJ1dHRvbix0aGlzLl9pbml0Q29udGFpbmVyKCksdGhpcy5fYXR0YWNoSGFuZGxlcnMoKX0sZXZlbnRzOltcInNhdmVcIl0sb3BlbjpmdW5jdGlvbigpe3RoaXMud2luZG93LmNlbnRlcigpLm9wZW4oKSx0aGlzLmdyaWQucmVzaXplKCEwKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLndpbmRvdy5iaW5kKFwiZGVhY3RpdmF0ZVwiLFModGhpcy5kZXN0cm95LHRoaXMpKS5jbG9zZSgpXG59LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kZXR0YWNoSGFuZGxlcnMoKSx0aGlzLmdyaWQuZGVzdHJveSgpLHRoaXMuZ3JpZD1udWxsLHRoaXMud2luZG93LmRlc3Ryb3koKSx0aGlzLndpbmRvdz1udWxsLHYuZm4uZGVzdHJveS5jYWxsKHRoaXMpLGYuZGVzdHJveSh0aGlzLndyYXBwZXIpLHRoaXMuZWxlbWVudD10aGlzLndyYXBwZXI9bnVsbH0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9cC5zdHlsZXMsbj10aGlzLmdyaWQsaT10aGlzLl9jYW5jZWxQcm94eT1TKHRoaXMuX2NhbmNlbCx0aGlzKTt0aGlzLmNvbnRhaW5lci5vbih6K00sTit0LmJ1dHRvbkNhbmNlbCx0aGlzLl9jYW5jZWxQcm94eSksdGhpcy5fc2F2ZVByb3h5PVModGhpcy5fc2F2ZSx0aGlzKSx0aGlzLmNvbnRhaW5lci5vbih6K00sTit0LmJ1dHRvblNhdmUsdGhpcy5fc2F2ZVByb3h5KSx0aGlzLndpbmRvdy5iaW5kKFwiY2xvc2VcIixmdW5jdGlvbihlKXtlLnVzZXJUcmlnZ2VyZWQmJmkoZSl9KSxuLndyYXBwZXIub24oeitNLFwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiLGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxpPWUodCkuY2xvc2VzdChcInRyXCIpLHI9bi5kYXRhU291cmNlLmdldEJ5VWlkKGkuYXR0cihmLmF0dHIoXCJ1aWRcIikpKSxvPWUodCkuaXMoXCI6Y2hlY2tlZFwiKT8xOlwiXCI7ci5zZXQoXCJ2YWx1ZVwiLG8pfSl9LF9kZXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxQcm94eT1udWxsLHRoaXMuX3NhdmVQcm94eT1udWxsLHRoaXMuY29udGFpbmVyLm9mZihNKSx0aGlzLmdyaWQud3JhcHBlci5vZmYoKX0sX2NhbmNlbDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5jbG9zZSgpfSxfc2F2ZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fdXBkYXRlTW9kZWwoKSx0aGlzLndyYXBwZXIuaXMoTitwLnN0eWxlcy5wb3B1cC5yZXNvdXJjZXNGaWVsZCl8fHRoaXMudHJpZ2dlcihcInNhdmVcIix7Y29udGFpbmVyOnRoaXMud3JhcHBlcixtb2RlbDp0aGlzLm1vZGVsfSksdGhpcy5jbG9zZSgpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PXAuc3R5bGVzLnBvcHVwLG49Zi5mb3JtYXQoJzxkaXYgY2xhc3M9XCJ7MH0gezF9XCI+PGRpdiBjbGFzcz1cInsyfSB7M31cIi8+PC9kaXY+XCInLHQuZm9ybSx0LmVkaXRGb3JtLHQuZm9ybUNvbnRhaW5lcix0LnJlc291cmNlc0Zvcm1Db250YWluZXIpO249ZShuKSx0aGlzLmNvbnRhaW5lcj1uLmZpbmQoTit0LnJlc291cmNlc0Zvcm1Db250YWluZXIpLHRoaXMud2luZG93PW4ua2VuZG9XaW5kb3coe21vZGFsOiEwLHJlc2l6YWJsZTohMSxkcmFnZ2FibGU6ITAsdmlzaWJsZTohMSx0aXRsZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMucmVzb3VyY2VzRWRpdG9yVGl0bGV9KS5kYXRhKFwia2VuZG9XaW5kb3dcIiksdGhpcy5fcmVzb3VyY2VHcmlkKCksdGhpcy5fY3JlYXRlQnV0dG9ucygpfSxfcmVzb3VyY2VHcmlkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxuPXRoaXMub3B0aW9ucy5tZXNzYWdlcyxpPWUoJzxkaXYgaWQ9XCJyZXNvdXJjZXMtZ3JpZFwiLz4nKS5hcHBlbmRUbyh0aGlzLmNvbnRhaW5lcik7dGhpcy5ncmlkPW5ldyBmLnVpLkdyaWQoaSx7Y29sdW1uczpbe2ZpZWxkOlwibmFtZVwiLHRpdGxlOm4ucmVzb3VyY2VzSGVhZGVyLHRlbXBsYXRlOlwiPGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgdmFsdWU9JyM9bmFtZSMnIyBpZiAodmFsdWUgPiAwICYmIHZhbHVlICE9PSBudWxsKSB7I2NoZWNrZWQ9J2NoZWNrZWQnIyB9ICMvPiM9bmFtZSM8L2xhYmU+XCJ9LHtmaWVsZDpcInZhbHVlXCIsdGl0bGU6bi51bml0c0hlYWRlcix0ZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZvcm1hdCxuPW51bGwhPT1lLnZhbHVlP2UudmFsdWU6XCJcIjtyZXR1cm4gdD9mLnRvU3RyaW5nKG4sdCk6bn19XSxoZWlnaHQ6MjgwLHNvcnRhYmxlOiEwLGVkaXRhYmxlOiEwLGZpbHRlcmFibGU6ITAsZGF0YVNvdXJjZTp7ZGF0YTp0Lm9wdGlvbnMuZGF0YSxzY2hlbWE6e21vZGVsOntpZDpcImlkXCIsZmllbGRzOntpZDp7ZnJvbTpcImlkXCIsdHlwZTpcIm51bWJlclwifSxuYW1lOntmcm9tOlwibmFtZVwiLHR5cGU6XCJzdHJpbmdcIixlZGl0YWJsZTohMX0sdmFsdWU6e2Zyb206XCJ2YWx1ZVwiLHR5cGU6XCJudW1iZXJcIixkZWZhdWx0VmFsdWU6XCJcIn0sZm9ybWF0Ontmcm9tOlwiZm9ybWF0XCIsdHlwZTpcInN0cmluZ1wifX19fX0sc2F2ZTpmdW5jdGlvbihlKXt2YXIgdD0hIWUudmFsdWVzLnZhbHVlO2UuY29udGFpbmVyLnBhcmVudCgpLmZpbmQoXCJpbnB1dFt0eXBlPSdjaGVja2JveCddXCIpLnByb3AoXCJjaGVja2VkXCIsdCl9fSl9LF9jcmVhdGVCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXMub3B0aW9ucy5idXR0b25zLGk9JzxkaXYgY2xhc3M9XCInK3Auc3R5bGVzLnBvcHVwLmJ1dHRvbnNDb250YWluZXIrJ1wiPic7Zm9yKGU9MCx0PW4ubGVuZ3RoO3Q+ZTtlKyspaSs9dGhpcy5jcmVhdGVCdXR0b24obltlXSk7aSs9XCI8L2Rpdj5cIix0aGlzLmNvbnRhaW5lci5hcHBlbmQoaSl9LF91cGRhdGVNb2RlbDpmdW5jdGlvbigpe3ZhciBlLHQsbixpPVtdLHI9dGhpcy5ncmlkLmRhdGFTb3VyY2UuZGF0YSgpO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWU9clt0XS5nZXQoXCJ2YWx1ZVwiKSxudWxsIT09ZSYmZT4wJiZpLnB1c2goclt0XSk7dGhpcy5tb2RlbFt0aGlzLnJlc291cmNlc0ZpZWxkXT1pfX0pLHA9di5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtrKHQpJiYodD17ZGF0YVNvdXJjZTp0fSksdi5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX3dyYXBwZXIoKSx0aGlzLl9yZXNvdXJjZXMoKSx0aGlzLl90aW1lbGluZSgpLHRoaXMuX3Rvb2xiYXIoKSx0aGlzLl9mb290ZXIoKSx0aGlzLl9hZGp1c3REaW1lbnNpb25zKCksdGhpcy5fcHJldmVudFJlZnJlc2g9ITAsdGhpcy52aWV3KHRoaXMudGltZWxpbmUuX3NlbGVjdGVkVmlld05hbWUpLHRoaXMuX3ByZXZlbnRSZWZyZXNoPSExLHRoaXMuX2RhdGFTb3VyY2UoKSx0aGlzLl9hc3NpZ25tZW50cygpLHRoaXMuX2Ryb3BEb3ducygpLHRoaXMuX2xpc3QoKSx0aGlzLl9kZXBlbmRlbmNpZXMoKSx0aGlzLl9yZXNpemFibGUoKSx0aGlzLl9zY3JvbGxhYmxlKCksdGhpcy5fZGF0YUJpbmQoKSx0aGlzLl9hdHRhY2hFdmVudHMoKSx0aGlzLl9jcmVhdGVFZGl0b3IoKSxmLm5vdGlmeSh0aGlzKX0sZXZlbnRzOltcImRhdGFCaW5kaW5nXCIsXCJkYXRhQm91bmRcIixcImFkZFwiLFwiZWRpdFwiLFwicmVtb3ZlXCIsXCJjYW5jZWxcIixcInNhdmVcIixcImNoYW5nZVwiLFwibmF2aWdhdGVcIixcIm1vdmVTdGFydFwiLFwibW92ZVwiLFwibW92ZUVuZFwiLFwicmVzaXplU3RhcnRcIixcInJlc2l6ZVwiLFwicmVzaXplRW5kXCJdLG9wdGlvbnM6e25hbWU6XCJHYW50dFwiLGF1dG9CaW5kOiEwLG5hdmlnYXRhYmxlOiExLHNlbGVjdGFibGU6ITAsZWRpdGFibGU6ITAsY29sdW1uczpbXSx2aWV3czpbXSxkYXRhU291cmNlOnt9LGRlcGVuZGVuY2llczp7fSxyZXNvdXJjZXM6e30sYXNzaWdubWVudHM6e30sbWVzc2FnZXM6e3NhdmU6XCJTYXZlXCIsY2FuY2VsOlwiQ2FuY2VsXCIsZGVzdHJveTpcIkRlbGV0ZVwiLGRlbGV0ZVRhc2tXaW5kb3dUaXRsZTpcIkRlbGV0ZSB0YXNrXCIsZGVsZXRlRGVwZW5kZW5jeVdpbmRvd1RpdGxlOlwiRGVsZXRlIGRlcGVuZGVuY3lcIix2aWV3czp7ZGF5OlwiRGF5XCIsd2VlazpcIldlZWtcIixtb250aDpcIk1vbnRoXCIseWVhcjpcIlllYXJcIn0sYWN0aW9uczp7YXBwZW5kOlwiQWRkIFRhc2tcIixhZGRDaGlsZDpcIkFkZCBDaGlsZFwiLGluc2VydEJlZm9yZTpcIkFkZCBBYm92ZVwiLGluc2VydEFmdGVyOlwiQWRkIEJlbG93XCIscGRmOlwiRXhwb3J0IHRvIFBERlwifSxlZGl0b3I6e2VkaXRvclRpdGxlOlwiVGFza1wiLHJlc291cmNlc0VkaXRvclRpdGxlOlwiUmVzb3VyY2VzXCIsdGl0bGU6XCJUaXRsZVwiLHN0YXJ0OlwiU3RhcnRcIixlbmQ6XCJFbmRcIixwZXJjZW50Q29tcGxldGU6XCJDb21wbGV0ZVwiLHJlc291cmNlczpcIlJlc291cmNlc1wiLGFzc2luZ0J1dHRvbjpcIkFzc2lnblwiLHJlc291cmNlc0hlYWRlcjpcIlJlc291cmNlc1wiLHVuaXRzSGVhZGVyOlwiVW5pdHNcIn19LHNob3dXb3JrSG91cnM6ITAsc2hvd1dvcmtEYXlzOiEwLHdvcmtEYXlTdGFydDpuZXcgRGF0ZSgxOTgwLDEsMSw4LDAsMCksd29ya0RheUVuZDpuZXcgRGF0ZSgxOTgwLDEsMSwxNywwLDApLHdvcmtXZWVrU3RhcnQ6MSx3b3JrV2Vla0VuZDo1LGhvdXJTcGFuOjEsc25hcDohMCxoZWlnaHQ6NjAwLGxpc3RXaWR0aDpcIjMwJVwifSxzZWxlY3Q6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5saXN0O3JldHVybiBlPyhuLnNlbGVjdChlKSx0KTpuLnNlbGVjdCgpfSxjbGVhclNlbGVjdGlvbjpmdW5jdGlvbigpe3RoaXMubGlzdC5jbGVhclNlbGVjdGlvbigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7di5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5kYXRhU291cmNlJiYodGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwicHJvZ3Jlc3NcIix0aGlzLl9wcm9ncmVzc0hhbmRsZXIpLHRoaXMuZGF0YVNvdXJjZS51bmJpbmQoXCJlcnJvclwiLHRoaXMuX2Vycm9ySGFuZGxlcikpLHRoaXMuZGVwZW5kZW5jaWVzJiYodGhpcy5kZXBlbmRlbmNpZXMudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fZGVwZW5kZW5jeVJlZnJlc2hIYW5kbGVyKSx0aGlzLmRlcGVuZGVuY2llcy51bmJpbmQoXCJlcnJvclwiLHRoaXMuX2RlcGVuZGVuY3lFcnJvckhhbmRsZXIpKSx0aGlzLnRpbWVsaW5lJiYodGhpcy50aW1lbGluZS51bmJpbmQoKSx0aGlzLnRpbWVsaW5lLmRlc3Ryb3koKSksdGhpcy5saXN0JiYodGhpcy5saXN0LnVuYmluZCgpLHRoaXMubGlzdC5kZXN0cm95KCkpLHRoaXMuZm9vdGVyRHJvcERvd24mJnRoaXMuZm9vdGVyRHJvcERvd24uZGVzdHJveSgpLHRoaXMuaGVhZGVyRHJvcERvd24mJnRoaXMuaGVhZGVyRHJvcERvd24uZGVzdHJveSgpLHRoaXMuX2VkaXRvciYmdGhpcy5fZWRpdG9yLmRlc3Ryb3koKSx0aGlzLl9yZXNpemVEcmFnZ2FibGUmJnRoaXMuX3Jlc2l6ZURyYWdnYWJsZS5kZXN0cm95KCksdGhpcy50b29sYmFyLm9mZihNKSxlKHdpbmRvdykub2ZmKFwicmVzaXplXCIrTSx0aGlzLl9yZXNpemVIYW5kbGVyKSxlKHRoaXMud3JhcHBlcikub2ZmKE0pLHRoaXMudG9vbGJhcj1udWxsLHRoaXMuZm9vdGVyPW51bGx9LF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLl9yZXNpemVIYW5kbGVyPVModGhpcy5yZXNpemUsdGhpcyksZSh3aW5kb3cpLm9uKFwicmVzaXplXCIrTSx0aGlzLl9yZXNpemVIYW5kbGVyKX0sX3dyYXBwZXI6ZnVuY3Rpb24oKXt2YXIgZT1wLnN0eWxlcyx0PVtlLmljb24sZS5yZXNpemVIYW5kbGVdLmpvaW4oXCIgXCIpLG49dGhpcy5vcHRpb25zLGk9bi5oZWlnaHQscj1uLndpZHRoO3RoaXMud3JhcHBlcj10aGlzLmVsZW1lbnQuYWRkQ2xhc3MoZS53cmFwcGVyKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLmxpc3RXcmFwcGVyK1wiJz48ZGl2PjwvZGl2PjwvZGl2PlwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdcIitlLnNwbGl0QmFyV3JhcHBlcitcIic+PGRpdiBjbGFzcz0nXCIrdCtcIic+PC9kaXY+PC9kaXY+XCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J1wiK2UudGltZWxpbmVXcmFwcGVyK1wiJz48ZGl2PjwvZGl2PjwvZGl2PlwiKSx0aGlzLndyYXBwZXIuZmluZChOK2UubGlzdCkud2lkdGgobi5saXN0V2lkdGgpLGkmJnRoaXMud3JhcHBlci5oZWlnaHQoaSksciYmdGhpcy53cmFwcGVyLndpZHRoKHIpfSxfdG9vbGJhcjpmdW5jdGlvbigpe3ZhciB0LG4saT10aGlzLHI9cC5zdHlsZXMsbz1OK3IudG9vbGJhci52aWV3cytcIiA+IGxpXCIsYT1OK3IudG9vbGJhci5wZGZCdXR0b24scz1yLmhvdmVyZWQsbD10aGlzLm9wdGlvbnMudG9vbGJhcixjPWUoXCI8ZGl2IGNsYXNzPSdcIityLnRvb2xiYXIuYWN0aW9ucytcIic+XCIpO0MobCl8fChsPXR5cGVvZiBsPT09Uj9sOnRoaXMuX2FjdGlvbnMobCksbD1TKGYudGVtcGxhdGUobCksdGhpcykpLG49ZShHKHtuczpmLm5zLHZpZXdzOnRoaXMudGltZWxpbmUudmlld3Msc3R5bGVzOnIudG9vbGJhcn0pKSxjLmFwcGVuZChsKHt9KSksdD1lKFwiPGRpdiBjbGFzcz0nXCIrci50b29sYmFyLmhlYWRlcldyYXBwZXIrXCInPlwiKS5hcHBlbmQoYykuYXBwZW5kKG4pLHRoaXMud3JhcHBlci5wcmVwZW5kKHQpLHRoaXMudG9vbGJhcj10LHQub24oeitNLG8sZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBuPWUodGhpcykuYXR0cihmLmF0dHIoXCJuYW1lXCIpKTtpLnRyaWdnZXIoXCJuYXZpZ2F0ZVwiLHt2aWV3Om59KXx8aS52aWV3KG4pfSkub24oeitNLGEsZnVuY3Rpb24oKXtpLnNhdmVBc1BERigpfSksdGhpcy53cmFwcGVyLmZpbmQoTityLnRvb2xiYXIudG9vbGJhcitcIiBsaVwiKS5ob3ZlcihmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3Mocyl9LGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhzKX0pfSxfYWN0aW9uczpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLm9wdGlvbnMsaT1uLnRvb2xiYXIscj1cIlwiO2lmKCFrKGkpKXtpZighbi5lZGl0YWJsZSlyZXR1cm4gcjtpPVtcImFwcGVuZFwiXX1mb3IoZT0wLHQ9aS5sZW5ndGg7dD5lO2UrKylyKz10aGlzLl9jcmVhdGVCdXR0b24oaVtlXSk7cmV0dXJuIHJ9LF9mb290ZXI6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuZWRpdGFibGUpe3ZhciB0PWUoJCh7c3R5bGVzOnAuc3R5bGVzLnRvb2xiYXIsYWN0aW9uOntkYXRhOlwiYWRkXCIsdGl0bGU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmFjdGlvbnMuYXBwZW5kfX0pKTt0aGlzLndyYXBwZXIuYXBwZW5kKHQpLHRoaXMuZm9vdGVyPXR9fSxfY3JlYXRlQnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUudGVtcGxhdGV8fFcsbj10aGlzLm9wdGlvbnMubWVzc2FnZXMuYWN0aW9ucyxpPXR5cGVvZiBlPT09Uj9lOmUubmFtZXx8ZS50ZXh0LHI9WFtpXT9YW2ldLmNsYXNzTmFtZTpcImstZ2FudHQtXCIrKGl8fFwiXCIpLnJlcGxhY2UoL1xccy9nLFwiXCIpLG89e2ljb25DbGFzczpcIlwiLGFjdGlvbjpcIlwiLHRleHQ6aSxjbGFzc05hbWU6cixzdHlsZXM6cC5zdHlsZXMudG9vbGJhcn07aWYoIShpfHxEKGUpJiZlLnRlbXBsYXRlKSl0aHJvdyBFcnJvcihcIkN1c3RvbSBjb21tYW5kcyBzaG91bGQgaGF2ZSBuYW1lIHNwZWNpZmllZFwiKTtyZXR1cm4gbz1UKCEwLG8sWFtpXSx7dGV4dDpuW2ldfSksRChlKSYmKGUuY2xhc3NOYW1lJiZ4KG8uY2xhc3NOYW1lLGUuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKSk8MCYmKGUuY2xhc3NOYW1lKz1cIiBcIitvLmNsYXNzTmFtZSksbz1UKCEwLG8sZSkpLGYudGVtcGxhdGUodCkobyl9LF9hZGp1c3REaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LHQ9cC5zdHlsZXMsbj1OK3QubGlzdCxpPU4rdC50aW1lbGluZSxyPU4rdC5zcGxpdEJhcixvPXRoaXMudG9vbGJhci5vdXRlckhlaWdodCgpLGE9dGhpcy5mb290ZXI/dGhpcy5mb290ZXIub3V0ZXJIZWlnaHQoKTowLHM9ZS5oZWlnaHQoKSxsPWUud2lkdGgoKSxjPWUuZmluZChyKS5vdXRlcldpZHRoKCksZD1lLmZpbmQobikub3V0ZXJXaWR0aCgpO2UuY2hpbGRyZW4oW24saSxyXS5qb2luKFwiLFwiKSkuaGVpZ2h0KHMtKG8rYSkpLmVuZCgpLmNoaWxkcmVuKGkpLndpZHRoKGwtKGMrZCkpfSxfc2Nyb2xsVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50aW1lbGluZS52aWV3KCksaT1mLmF0dHIoXCJ1aWRcIikscj1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmUuY2xvc2VzdChcInRyXCIrbigpKS5hdHRyKGkpLG89dC5jb250ZW50LmZpbmQobihyKSk7MCE9PW8ubGVuZ3RoJiZ0Ll9zY3JvbGxUbyhvKX0sX2Ryb3BEb3duczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1OK3Auc3R5bGVzLnRvb2xiYXIuYWN0aW9ucyxuPXRoaXMub3B0aW9ucy5tZXNzYWdlcy5hY3Rpb25zLGk9dGhpcy5kYXRhU291cmNlLHI9dGhpcy50aW1lbGluZSxvPWZ1bmN0aW9uKHQpe3ZhciBuLG89dC50eXBlLGE9aS5fY3JlYXRlTmV3TW9kZWwoKSxzPWUuZGF0YUl0ZW0oZS5zZWxlY3QoKSksbD1pLnRhc2tQYXJlbnQocyksYz1yLnZpZXcoKS5fdGltZVNsb3RzKClbMF0sZD1cImFkZFwiPT09bz9zOmw7YS5zZXQoXCJ0aXRsZVwiLFwiTmV3IHRhc2tcIiksZD8oYS5zZXQoXCJwYXJlbnRJZFwiLGQuZ2V0KFwiaWRcIikpLGEuc2V0KFwic3RhcnRcIixkLmdldChcInN0YXJ0XCIpKSxhLnNldChcImVuZFwiLGQuZ2V0KFwiZW5kXCIpKSk6KGEuc2V0KFwic3RhcnRcIixjLnN0YXJ0KSxhLnNldChcImVuZFwiLGMuZW5kKSksXCJhZGRcIiE9PW8mJihuPXMuZ2V0KFwib3JkZXJJZFwiKSxuPVwiaW5zZXJ0LWJlZm9yZVwiPT09bz9uOm4rMSksZS5fY3JlYXRlVGFzayhhLG4pfTt0aGlzLm9wdGlvbnMuZWRpdGFibGUmJih0aGlzLmZvb3RlckRyb3BEb3duPW5ldyBKKHRoaXMuZm9vdGVyLmNoaWxkcmVuKHQpLmVxKDApLHttZXNzYWdlczp7YWN0aW9uczpufSxkaXJlY3Rpb246XCJ1cFwiLGFuaW1hdGlvbjp7b3Blbjp7ZWZmZWN0czpcInNsaWRlSW46dXBcIn19LG5hdmlnYXRhYmxlOmUub3B0aW9ucy5uYXZpZ2F0YWJsZX0pLHRoaXMuaGVhZGVyRHJvcERvd249bmV3IEoodGhpcy50b29sYmFyLmNoaWxkcmVuKHQpLmVxKDApLHttZXNzYWdlczp7YWN0aW9uczpufSxuYXZpZ2F0YWJsZTplLm9wdGlvbnMubmF2aWdhdGFibGV9KSx0aGlzLmZvb3RlckRyb3BEb3duLmJpbmQoXCJjb21tYW5kXCIsbyksdGhpcy5oZWFkZXJEcm9wRG93bi5iaW5kKFwiY29tbWFuZFwiLG8pKX0sX2xpc3Q6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcyxpPW4ub3B0aW9ucy5uYXZpZ2F0YWJsZSxyPXAuc3R5bGVzLGE9dGhpcy53cmFwcGVyLmZpbmQoTityLmxpc3QpLHM9YS5maW5kKFwiPiBkaXZcIiksbD10aGlzLndyYXBwZXIuZmluZChOK3IudG9vbGJhci5hY3Rpb25zK1wiID4gYnV0dG9uXCIpLGM9e2NvbHVtbnM6dGhpcy5vcHRpb25zLmNvbHVtbnN8fFtdLGRhdGFTb3VyY2U6dGhpcy5kYXRhU291cmNlLHNlbGVjdGFibGU6dGhpcy5vcHRpb25zLnNlbGVjdGFibGUsZWRpdGFibGU6dGhpcy5vcHRpb25zLmVkaXRhYmxlLGxpc3RXaWR0aDphLm91dGVyV2lkdGgoKSxyZXNvdXJjZXNGaWVsZDp0aGlzLnJlc291cmNlcy5maWVsZH0sZD1jLmNvbHVtbnMsdT1mdW5jdGlvbigpe2kmJihuLl9jdXJyZW50KG4uX2NhY2hlZEN1cnJlbnQpLG8obi5saXN0LmNvbnRlbnQuZmluZChcInRhYmxlXCIpLCEwKSksZGVsZXRlIG4uX2NhY2hlZEN1cnJlbnR9O2Zvcih0PTA7ZC5sZW5ndGg+dDt0KyspZT1kW3RdLGUuZmllbGQ9PT10aGlzLnJlc291cmNlcy5maWVsZCYmXCJmdW5jdGlvblwiIT10eXBlb2YgZS5lZGl0b3ImJihlLmVkaXRvcj1TKHRoaXMuX2NyZWF0ZVJlc291cmNlRWRpdG9yLHRoaXMpKTt0aGlzLmxpc3Q9bmV3IGYudWkuR2FudHRMaXN0KHMsYyksdGhpcy5saXN0LmJpbmQoXCJyZW5kZXJcIixmdW5jdGlvbigpe24uX25hdmlnYXRhYmxlKCl9LCEwKS5iaW5kKFwiZWRpdFwiLGZ1bmN0aW9uKGUpe24uX2NhY2hlZEN1cnJlbnQ9ZS5jZWxsLG4udHJpZ2dlcihcImVkaXRcIix7dGFzazplLm1vZGVsLGNvbnRhaW5lcjplLmNlbGx9KSYmZS5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcImNhbmNlbFwiLGZ1bmN0aW9uKGUpe24udHJpZ2dlcihcImNhbmNlbFwiLHt0YXNrOmUubW9kZWwsY29udGFpbmVyOmUuY2VsbH0pJiZlLnByZXZlbnREZWZhdWx0KCksdSgpfSkuYmluZChcInVwZGF0ZVwiLGZ1bmN0aW9uKGUpe24uX3VwZGF0ZVRhc2soZS50YXNrLGUudXBkYXRlSW5mbyksdSgpfSkuYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKCl7bi50cmlnZ2VyKFwiY2hhbmdlXCIpO3ZhciBlPW4ubGlzdC5zZWxlY3QoKTtlLmxlbmd0aD8obC5yZW1vdmVBdHRyKFwiZGF0YS1hY3Rpb25cIixcImFkZFwiKSxuLnRpbWVsaW5lLnNlbGVjdChcIltkYXRhLXVpZD0nXCIrZS5hdHRyKFwiZGF0YS11aWRcIikrXCInXVwiKSk6KGwuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJhZGRcIiksbi50aW1lbGluZS5jbGVhclNlbGVjdGlvbigpKX0pfSxfdGltZWxpbmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9cC5zdHlsZXMsbj1pKFQoITAse3Jlc291cmNlc0ZpZWxkOnRoaXMucmVzb3VyY2VzLmZpZWxkfSx0aGlzLm9wdGlvbnMpKSxyPXRoaXMud3JhcHBlci5maW5kKE4rdC50aW1lbGluZStcIiA+IGRpdlwiKTt0aGlzLnRpbWVsaW5lPW5ldyBmLnVpLkdhbnR0VGltZWxpbmUocixuKSx0aGlzLnRpbWVsaW5lLmJpbmQoXCJuYXZpZ2F0ZVwiLGZ1bmN0aW9uKG4pe2UudG9vbGJhci5maW5kKE4rdC50b29sYmFyLnZpZXdzK1wiID4gbGlcIikucmVtb3ZlQ2xhc3ModC5zZWxlY3RlZCkuZW5kKCkuZmluZChOK3QudG9vbGJhci52aWV3QnV0dG9uK1wiLVwiK24udmlldy5yZXBsYWNlKC9cXC4vZyxcIlxcXFwuXCIpLnRvTG93ZXJDYXNlKCkpLmFkZENsYXNzKHQuc2VsZWN0ZWQpLGUucmVmcmVzaCgpfSkuYmluZChcIm1vdmVTdGFydFwiLGZ1bmN0aW9uKHQpe2UudHJpZ2dlcihcIm1vdmVTdGFydFwiLHt0YXNrOnQudGFza30pJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwibW92ZVwiLGZ1bmN0aW9uKHQpe3ZhciBuPXQudGFzayxpPXQuc3RhcnQscj1uZXcgRGF0ZShpLmdldFRpbWUoKStuLmR1cmF0aW9uKCkpO2UudHJpZ2dlcihcIm1vdmVcIix7dGFzazpuLHN0YXJ0OmksZW5kOnJ9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcIm1vdmVFbmRcIixmdW5jdGlvbih0KXt2YXIgbj10LnRhc2ssaT10LnN0YXJ0LHI9bmV3IERhdGUoaS5nZXRUaW1lKCkrbi5kdXJhdGlvbigpKTtlLnRyaWdnZXIoXCJtb3ZlRW5kXCIse3Rhc2s6bixzdGFydDppLGVuZDpyfSl8fGUuX3VwZGF0ZVRhc2soZS5kYXRhU291cmNlLmdldEJ5VWlkKG4udWlkKSx7c3RhcnQ6aSxlbmQ6cn0pfSkuYmluZChcInJlc2l6ZVN0YXJ0XCIsZnVuY3Rpb24odCl7ZS50cmlnZ2VyKFwicmVzaXplU3RhcnRcIix7dGFzazp0LnRhc2t9KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcInJlc2l6ZVwiLGZ1bmN0aW9uKHQpe2UudHJpZ2dlcihcInJlc2l6ZVwiLHt0YXNrOnQudGFzayxzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5iaW5kKFwicmVzaXplRW5kXCIsZnVuY3Rpb24odCl7dmFyIG49dC50YXNrLGk9e307dC5yZXNpemVTdGFydD9pLnN0YXJ0PXQuc3RhcnQ6aS5lbmQ9dC5lbmQsZS50cmlnZ2VyKFwicmVzaXplRW5kXCIse3Rhc2s6bixzdGFydDp0LnN0YXJ0LGVuZDp0LmVuZH0pfHxlLl91cGRhdGVUYXNrKGUuZGF0YVNvdXJjZS5nZXRCeVVpZChuLnVpZCksaSl9KS5iaW5kKFwicGVyY2VudFJlc2l6ZUVuZFwiLGZ1bmN0aW9uKHQpe2UuX3VwZGF0ZVRhc2soZS5kYXRhU291cmNlLmdldEJ5VWlkKHQudGFzay51aWQpLHtwZXJjZW50Q29tcGxldGU6dC5wZXJjZW50Q29tcGxldGV9KX0pLmJpbmQoXCJkZXBlbmRlbmN5RHJhZ0VuZFwiLGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGVwZW5kZW5jaWVzLl9jcmVhdGVOZXdNb2RlbCh7dHlwZTp0LnR5cGUscHJlZGVjZXNzb3JJZDp0LnByZWRlY2Vzc29yLmlkLHN1Y2Nlc3NvcklkOnQuc3VjY2Vzc29yLmlkfSk7ZS5fY3JlYXRlRGVwZW5kZW5jeShuKX0pLmJpbmQoXCJzZWxlY3RcIixmdW5jdGlvbih0KXtlLnNlbGVjdChcIltkYXRhLXVpZD0nXCIrdC51aWQrXCInXVwiKX0pLmJpbmQoXCJlZGl0VGFza1wiLGZ1bmN0aW9uKHQpe2UuZWRpdFRhc2sodC51aWQpfSkuYmluZChcImNsZWFyXCIsZnVuY3Rpb24oKXtlLmNsZWFyU2VsZWN0aW9uKCl9KS5iaW5kKFwicmVtb3ZlVGFza1wiLGZ1bmN0aW9uKHQpe2UucmVtb3ZlVGFzayhlLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC51aWQpKX0pLmJpbmQoXCJyZW1vdmVEZXBlbmRlbmN5XCIsZnVuY3Rpb24odCl7ZS5yZW1vdmVEZXBlbmRlbmN5KGUuZGVwZW5kZW5jaWVzLmdldEJ5VWlkKHQudWlkKSl9KX0sX2RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsdD1lLmRhdGFTb3VyY2U7dD1rKHQpP3tkYXRhOnR9OnQsdGhpcy5kYXRhU291cmNlJiZ0aGlzLl9yZWZyZXNoSGFuZGxlcj90aGlzLmRhdGFTb3VyY2UudW5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpLnVuYmluZChcInByb2dyZXNzXCIsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKS51bmJpbmQoXCJlcnJvclwiLHRoaXMuX2Vycm9ySGFuZGxlcik6KHRoaXMuX3JlZnJlc2hIYW5kbGVyPVModGhpcy5yZWZyZXNoLHRoaXMpLHRoaXMuX3Byb2dyZXNzSGFuZGxlcj1TKHRoaXMuX3JlcXVlc3RTdGFydCx0aGlzKSx0aGlzLl9lcnJvckhhbmRsZXI9Uyh0aGlzLl9lcnJvcix0aGlzKSksdGhpcy5kYXRhU291cmNlPWYuZGF0YS5HYW50dERhdGFTb3VyY2UuY3JlYXRlKHQpLmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9yZWZyZXNoSGFuZGxlcikuYmluZChcInByb2dyZXNzXCIsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKS5iaW5kKFwiZXJyb3JcIix0aGlzLl9lcnJvckhhbmRsZXIpfSxfZGVwZW5kZW5jaWVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmRlcGVuZGVuY2llc3x8e30sdD1rKGUpP3tkYXRhOmV9OmU7dGhpcy5kZXBlbmRlbmNpZXMmJnRoaXMuX2RlcGVuZGVuY3lSZWZyZXNoSGFuZGxlcj90aGlzLmRlcGVuZGVuY2llcy51bmJpbmQoXCJjaGFuZ2VcIix0aGlzLl9kZXBlbmRlbmN5UmVmcmVzaEhhbmRsZXIpLnVuYmluZChcImVycm9yXCIsdGhpcy5fZGVwZW5kZW5jeUVycm9ySGFuZGxlcik6KHRoaXMuX2RlcGVuZGVuY3lSZWZyZXNoSGFuZGxlcj1TKHRoaXMucmVmcmVzaERlcGVuZGVuY2llcyx0aGlzKSx0aGlzLl9kZXBlbmRlbmN5RXJyb3JIYW5kbGVyPVModGhpcy5fZXJyb3IsdGhpcykpLHRoaXMuZGVwZW5kZW5jaWVzPWYuZGF0YS5HYW50dERlcGVuZGVuY3lEYXRhU291cmNlLmNyZWF0ZSh0KS5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fZGVwZW5kZW5jeVJlZnJlc2hIYW5kbGVyKS5iaW5kKFwiZXJyb3JcIix0aGlzLl9kZXBlbmRlbmN5RXJyb3JIYW5kbGVyKX0sX3Jlc291cmNlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy5yZXNvdXJjZXMsdD1lLmRhdGFTb3VyY2V8fHt9O3RoaXMucmVzb3VyY2VzPXtmaWVsZDpcInJlc291cmNlc1wiLGRhdGFUZXh0RmllbGQ6XCJuYW1lXCIsZGF0YUNvbG9yRmllbGQ6XCJjb2xvclwiLGRhdGFGb3JtYXRGaWVsZDpcImZvcm1hdFwifSxUKHRoaXMucmVzb3VyY2VzLGUpLHRoaXMucmVzb3VyY2VzLmRhdGFTb3VyY2U9Zi5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHQpfSxfYXNzaWdubWVudHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuYXNzaWdubWVudHMsdD1lLmRhdGFTb3VyY2V8fHt9O3RoaXMuYXNzaWdubWVudHM/dGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX2Fzc2lnbm1lbnRzUmVmcmVzaEhhbmRsZXIpOnRoaXMuX2Fzc2lnbm1lbnRzUmVmcmVzaEhhbmRsZXI9Uyh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5hc3NpZ25tZW50cz17ZGF0YVRhc2tJZEZpZWxkOlwidGFza0lkXCIsZGF0YVJlc291cmNlSWRGaWVsZDpcInJlc291cmNlSWRcIixkYXRhVmFsdWVGaWVsZDpcInZhbHVlXCJ9LFQodGhpcy5hc3NpZ25tZW50cyxlKSx0aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2U9Zi5kYXRhLkRhdGFTb3VyY2UuY3JlYXRlKHQpLHRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fYXNzaWdubWVudHNSZWZyZXNoSGFuZGxlcil9LF9jcmVhdGVFZGl0b3I6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49dGhpcy5fZWRpdG9yPW5ldyB1KHRoaXMud3JhcHBlcixUKHt9LHRoaXMub3B0aW9ucyx7dGFyZ2V0OnRoaXMscmVzb3VyY2VzOntmaWVsZDp0aGlzLnJlc291cmNlcy5maWVsZCxlZGl0b3I6Uyh0aGlzLl9jcmVhdGVSZXNvdXJjZUVkaXRvcix0aGlzKX0sY3JlYXRlQnV0dG9uOlModGhpcy5fY3JlYXRlUG9wdXBCdXR0b24sdGhpcyl9KSk7bi5iaW5kKFwiY2FuY2VsXCIsZnVuY3Rpb24obil7dmFyIGk9ZS5kYXRhU291cmNlLmdldEJ5VWlkKG4ubW9kZWwudWlkKTtyZXR1cm4gZS50cmlnZ2VyKFwiY2FuY2VsXCIse2NvbnRhaW5lcjpuLmNvbnRhaW5lcix0YXNrOml9KT8obi5wcmV2ZW50RGVmYXVsdCgpLHQpOihlLmNhbmNlbFRhc2soKSx0KX0pLmJpbmQoXCJlZGl0XCIsZnVuY3Rpb24odCl7dmFyIG49ZS5kYXRhU291cmNlLmdldEJ5VWlkKHQubW9kZWwudWlkKTtlLnRyaWdnZXIoXCJlZGl0XCIse2NvbnRhaW5lcjp0LmNvbnRhaW5lcix0YXNrOm59KSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuYmluZChcInNhdmVcIixmdW5jdGlvbih0KXt2YXIgbj1lLmRhdGFTb3VyY2UuZ2V0QnlVaWQodC5tb2RlbC51aWQpO2Uuc2F2ZVRhc2sobix0LnVwZGF0ZUluZm8pfSkuYmluZChcInJlbW92ZVwiLGZ1bmN0aW9uKHQpe2UucmVtb3ZlVGFzayh0Lm1vZGVsLnVpZCl9KX0sX2NyZWF0ZVJlc291cmNlRWRpdG9yOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPXQgaW5zdGFuY2VvZiB5P3Q6dC5tb2RlbCxyPWkuZ2V0KFwiaWRcIiksbz10aGlzLm9wdGlvbnMubWVzc2FnZXMsYT1uLnJlc291cmNlcy5maWVsZCxzPXRoaXMuX3Jlc291cmNlRWRpdG9yPW5ldyBoKGUse3Jlc291cmNlc0ZpZWxkOmEsZGF0YTp0aGlzLl93cmFwUmVzb3VyY2VEYXRhKHIpLG1vZGVsOmksbWVzc2FnZXM6VCh7fSxvLmVkaXRvciksYnV0dG9uczpbe25hbWU6XCJ1cGRhdGVcIix0ZXh0Om8uc2F2ZSxjbGFzc05hbWU6cC5zdHlsZXMucHJpbWFyeX0se25hbWU6XCJjYW5jZWxcIix0ZXh0Om8uY2FuY2VsfV0sY3JlYXRlQnV0dG9uOlModGhpcy5fY3JlYXRlUG9wdXBCdXR0b24sdGhpcyksc2F2ZTpmdW5jdGlvbihlKXtuLl91cGRhdGVBc3NpZ25tZW50cyhlLm1vZGVsLmdldChcImlkXCIpLGUubW9kZWwuZ2V0KGEpKX19KTtzLm9wZW4oKX0sX2NyZWF0ZVBvcHVwQnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXx8ZS50ZXh0LG49e2NsYXNzTmFtZTpwLnN0eWxlcy5wb3B1cC5idXR0b24rXCIgay1nYW50dC1cIisodHx8XCJcIikucmVwbGFjZSgvXFxzL2csXCJcIiksdGV4dDp0LGF0dHI6XCJcIn07aWYoISh0fHxEKGUpJiZlLnRlbXBsYXRlKSl0aHJvdyBFcnJvcihcIkN1c3RvbSBjb21tYW5kcyBzaG91bGQgaGF2ZSBuYW1lIHNwZWNpZmllZFwiKTtyZXR1cm4gRChlKSYmKGUuY2xhc3NOYW1lJiYoZS5jbGFzc05hbWUrPVwiIFwiK24uY2xhc3NOYW1lKSxuPVQoITAsbixlKSksZi50ZW1wbGF0ZShqKShuKX0sdmlldzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aW1lbGluZS52aWV3KGUpfSxkYXRhSXRlbTpmdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiBlPyh0PXRoaXMubGlzdCxuPXQuY29udGVudC5maW5kKGUpLHQuX21vZGVsRnJvbUVsZW1lbnQobikpOm51bGx9LHNldERhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRhdGFTb3VyY2U9ZSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5saXN0Ll9zZXREYXRhU291cmNlKHRoaXMuZGF0YVNvdXJjZSksdGhpcy5vcHRpb25zLmF1dG9CaW5kJiZlLmZldGNoKCl9LHNldERlcGVuZGVuY2llc0RhdGFTb3VyY2U6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRlcGVuZGVuY2llcz1lLHRoaXMuX2RlcGVuZGVuY2llcygpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmZS5mZXRjaCgpfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXBwZXIuY2hpbGRyZW4oXCIuay10YXNrXCIpfSxfdXBkYXRlQXNzaWdubWVudHM6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saSxyLG8sYSxzLGwsYz10aGlzLmFzc2lnbm1lbnRzLmRhdGFTb3VyY2UsZD10aGlzLmFzc2lnbm1lbnRzLmRhdGFUYXNrSWRGaWVsZCx1PXRoaXMuYXNzaWdubWVudHMuZGF0YVJlc291cmNlSWRGaWVsZCxoPXRoaXMuYXNzaWdubWVudHMuZGF0YVZhbHVlRmllbGQscD0hMSxmPW5ldyBiKGMudmlldygpKS5maWx0ZXIoe2ZpZWxkOmQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS50b0FycmF5KCk7Zi5sZW5ndGg7KXtmb3Iobj1mWzBdLG89MCxhPXQubGVuZ3RoO2E+bztvKyspaWYoaT10W29dLG4uZ2V0KHUpPT09aS5nZXQoXCJpZFwiKSl7cj10W29dLmdldChcInZhbHVlXCIpLG4uc2V0KGgsciksdC5zcGxpY2UobywxKSxwPSEwO2JyZWFrfXB8fGMucmVtb3ZlKG4pLHA9ITEsZi5zaGlmdCgpfWZvcihzPTAsbD10Lmxlbmd0aDtsPnM7cysrKWk9dFtzXSxuPWMuX2NyZWF0ZU5ld01vZGVsKCksbltkXT1lLG5bdV09aS5nZXQoXCJpZFwiKSxuW2hdPWkuZ2V0KFwidmFsdWVcIiksYy5hZGQobik7Yy5zeW5jKCl9LGNhbmNlbFRhc2s6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9lZGl0b3IsdD1lLmNvbnRhaW5lcjt0JiZlLmNsb3NlKCl9LGVkaXRUYXNrOmZ1bmN0aW9uKGUpe3ZhciB0LG49XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKGUpOmU7biYmKHQ9dGhpcy5kYXRhU291cmNlLl9jcmVhdGVOZXdNb2RlbChuLnRvSlNPTigpKSx0LnVpZD1uLnVpZCx0aGlzLmNhbmNlbFRhc2soKSx0aGlzLl9lZGl0VGFzayh0KSl9LF9lZGl0VGFzazpmdW5jdGlvbihlKXt0aGlzLl9lZGl0b3IuZWRpdFRhc2soZSl9LHNhdmVUYXNrOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZWRpdG9yLGk9bi5jb250YWluZXIscj1uLmVkaXRhYmxlO2kmJnImJnIuZW5kKCkmJnRoaXMuX3VwZGF0ZVRhc2soZSx0KX0sX3VwZGF0ZVRhc2s6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnJlc291cmNlcy5maWVsZDt0aGlzLnRyaWdnZXIoXCJzYXZlXCIse3Rhc2s6ZSx2YWx1ZXM6dH0pfHwodGhpcy5fcHJldmVudFJlZnJlc2g9ITAsdGhpcy5kYXRhU291cmNlLnVwZGF0ZShlLHQpLHRbbl0mJnRoaXMuX3VwZGF0ZUFzc2lnbm1lbnRzKGUuZ2V0KFwiaWRcIiksdFtuXSksdGhpcy5fc3luY0RhdGFTb3VyY2UoKSl9LHJlbW92ZVRhc2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwic3RyaW5nXCI9PXR5cGVvZiBlP3RoaXMuZGF0YVNvdXJjZS5nZXRCeVVpZChlKTplO24mJnRoaXMuX3Rhc2tDb25maXJtKGZ1bmN0aW9uKGUpe2V8fHQuX3JlbW92ZVRhc2sobil9LG4pfSxfY3JlYXRlVGFzazpmdW5jdGlvbihlLG4pe2lmKCF0aGlzLnRyaWdnZXIoXCJhZGRcIix7dGFzazplLGRlcGVuZGVuY3k6bnVsbH0pKXt2YXIgaT10aGlzLmRhdGFTb3VyY2U7dGhpcy5fcHJldmVudFJlZnJlc2g9ITAsbj09PXQ/aS5hZGQoZSk6aS5pbnNlcnQobixlKSx0aGlzLl9zY3JvbGxUb1VpZD1lLnVpZCx0aGlzLl9zeW5jRGF0YVNvdXJjZSgpfX0sX2NyZWF0ZURlcGVuZGVuY3k6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKFwiYWRkXCIse3Rhc2s6bnVsbCxkZXBlbmRlbmN5OmV9KXx8KHRoaXMuX3ByZXZlbnREZXBlbmRlbmN5UmVmcmVzaD0hMCx0aGlzLmRlcGVuZGVuY2llcy5hZGQoZSksdGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSExLHRoaXMuZGVwZW5kZW5jaWVzLnN5bmMoKSl9LHJlbW92ZURlcGVuZGVuY3k6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwic3RyaW5nXCI9PXR5cGVvZiBlP3RoaXMuZGVwZW5kZW5jaWVzLmdldEJ5VWlkKGUpOmU7biYmdGhpcy5fZGVwZW5kZW5jeUNvbmZpcm0oZnVuY3Rpb24oZSl7ZXx8dC5fcmVtb3ZlRGVwZW5kZW5jeShuKX0sbil9LF9yZW1vdmVUYXNrRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSEwO2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKyl0aGlzLmRlcGVuZGVuY2llcy5yZW1vdmUodFtuXSk7dGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSExLHRoaXMuZGVwZW5kZW5jaWVzLnN5bmMoKX0sX3JlbW92ZVJlc291cmNlQXNzaWdubWVudHM6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZSxyPWkudmlldygpLG89e2ZpZWxkOnRoaXMuYXNzaWdubWVudHMuZGF0YVRhc2tJZEZpZWxkLG9wZXJhdG9yOlwiZXFcIix2YWx1ZTplLmdldChcImlkXCIpfTtmb3Iocj1uZXcgYihyKS5maWx0ZXIobykudG9BcnJheSgpLHRoaXMuX3ByZXZlbnRSZWZyZXNoPSEwLHQ9MCxuPXIubGVuZ3RoO24+dDt0KyspaS5yZW1vdmUoclt0XSk7dGhpcy5fcHJldmVudFJlZnJlc2g9ITEsaS5zeW5jKCl9LF9yZW1vdmVUYXNrOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVwZW5kZW5jaWVzLmRlcGVuZGVuY2llcyhlLmlkKTt0aGlzLnRyaWdnZXIoXCJyZW1vdmVcIix7dGFzazplLGRlcGVuZGVuY2llczp0fSl8fCh0aGlzLl9yZW1vdmVUYXNrRGVwZW5kZW5jaWVzKGUsdCksdGhpcy5fcmVtb3ZlUmVzb3VyY2VBc3NpZ25tZW50cyhlKSx0aGlzLl9wcmV2ZW50UmVmcmVzaD0hMCx0aGlzLmRhdGFTb3VyY2UucmVtb3ZlKGUpJiZ0aGlzLl9zeW5jRGF0YVNvdXJjZSgpLHRoaXMuX3ByZXZlbnRSZWZyZXNoPSExKX0sX3JlbW92ZURlcGVuZGVuY3k6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKFwicmVtb3ZlXCIse3Rhc2s6bnVsbCxkZXBlbmRlbmNpZXM6W2VdfSl8fHRoaXMuZGVwZW5kZW5jaWVzLnJlbW92ZShlKSYmdGhpcy5kZXBlbmRlbmNpZXMuc3luYygpfSxfdGFza0NvbmZpcm06ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb25maXJtKGUse21vZGVsOnQsdGV4dDpWLHRpdGxlOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5kZWxldGVUYXNrV2luZG93VGl0bGV9KX0sX2RlcGVuZGVuY3lDb25maXJtOmZ1bmN0aW9uKGUsdCl7dGhpcy5fY29uZmlybShlLHttb2RlbDp0LHRleHQ6VSx0aXRsZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZGVsZXRlRGVwZW5kZW5jeVdpbmRvd1RpdGxlfSl9LF9jb25maXJtOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXRoaXMub3B0aW9ucy5lZGl0YWJsZTtyPT09ITB8fHIuY29uZmlybWF0aW9uIT09ITE/KG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLGk9W3tuYW1lOlwiZGVsZXRlXCIsdGV4dDpuLmRlc3Ryb3ksY2xhc3NOYW1lOnAuc3R5bGVzLnByaW1hcnksY2xpY2s6ZnVuY3Rpb24oKXtlKCl9fSx7bmFtZTpcImNhbmNlbFwiLHRleHQ6bi5jYW5jZWwsY2xpY2s6ZnVuY3Rpb24oKXtlKCEwKX19XSx0aGlzLnNob3dEaWFsb2coVCghMCx7fSx0LHtidXR0b25zOml9KSkpOmUoKX0sc2hvd0RpYWxvZzpmdW5jdGlvbihlKXt0aGlzLl9lZGl0b3Iuc2hvd0RpYWxvZyhlKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlLHQsaSxyLG8sYTt0aGlzLl9wcmV2ZW50UmVmcmVzaHx8dGhpcy5saXN0LmVkaXRhYmxlfHwodGhpcy5fcHJvZ3Jlc3MoITEpLGU9dGhpcy5kYXRhU291cmNlLHQ9ZS50YXNrVHJlZSgpLGk9dGhpcy5fc2Nyb2xsVG9VaWQsYT0tMSx0aGlzLmN1cnJlbnQmJihvPXRoaXMuY3VycmVudC5jbG9zZXN0KFwidHJcIikuYXR0cihmLmF0dHIoXCJ1aWRcIikpLGE9dGhpcy5jdXJyZW50LmluZGV4KCkpLHRoaXMudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpfHwoMCE9PXRoaXMucmVzb3VyY2VzLmRhdGFTb3VyY2UuZGF0YSgpLmxlbmd0aCYmdGhpcy5fYXNzaWduUmVzb3VyY2VzKHQpLHRoaXMuX2VkaXRvciYmdGhpcy5fZWRpdG9yLmNsb3NlKCksdGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMubGlzdC5fcmVuZGVyKHQpLHRoaXMudGltZWxpbmUuX3JlbmRlcih0KSx0aGlzLnRpbWVsaW5lLl9yZW5kZXJEZXBlbmRlbmNpZXModGhpcy5kZXBlbmRlbmNpZXMudmlldygpKSxpJiYodGhpcy5fc2Nyb2xsVG8oaSksdGhpcy5zZWxlY3QobihpKSkpLChpfHxvKSYmYT49MCYmKHI9dGhpcy5saXN0LmNvbnRlbnQuZmluZChcInRyXCIrbihpfHxvKStcIiA+IHRkOmVxKFwiK2ErXCIpXCIpLHRoaXMuX2N1cnJlbnQocikpLHRoaXMuX3Njcm9sbFRvVWlkPW51bGwsdGhpcy50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpKSl9LHJlZnJlc2hEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oKXt0aGlzLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2h8fHRoaXMudHJpZ2dlcihcImRhdGFCaW5kaW5nXCIpfHwodGhpcy50aW1lbGluZS5fcmVuZGVyRGVwZW5kZW5jaWVzKHRoaXMuZGVwZW5kZW5jaWVzLnZpZXcoKSksdGhpcy50cmlnZ2VyKFwiZGF0YUJvdW5kXCIpKX0sX2Fzc2lnblJlc291cmNlczpmdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5yZXNvdXJjZXMscj10aGlzLmFzc2lnbm1lbnRzLG89ZnVuY3Rpb24oKXt2YXIgZT1yLmRhdGFTb3VyY2UudmlldygpLHQ9e2ZpZWxkOnIuZGF0YVRhc2tJZEZpZWxkfTtyZXR1cm4gZT1uZXcgYihlKS5ncm91cCh0KS50b0FycmF5KCl9LGE9bygpLHM9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLG89ZS5nZXQoXCJpZFwiKTtmb3IoZi5zZXR0ZXIoaS5maWVsZCkoZSxuZXcgdyhbXSkpLG49MCxyPWEubGVuZ3RoO3I+bjtuKyspYVtuXS52YWx1ZT09PW8mJnQoZSxhW25dLml0ZW1zKX0sbD1mdW5jdGlvbihlLHQpe3ZhciBuLG8sYSxzLGwsYyxkLHU7Zm9yKG49MCxvPXQubGVuZ3RoO28+bjtuKyspYT10W25dLHM9aS5kYXRhU291cmNlLmdldChhLmdldChyLmRhdGFSZXNvdXJjZUlkRmllbGQpKSxsPWEuZ2V0KHIuZGF0YVZhbHVlRmllbGQpLGM9YS5nZXQoci5kYXRhUmVzb3VyY2VJZEZpZWxkKSxkPXMuZ2V0KGkuZGF0YUZvcm1hdEZpZWxkKXx8UCx1PWYudG9TdHJpbmcobCxkKSxlW2kuZmllbGRdLnB1c2gobmV3IHkoe2lkOmMsbmFtZTpzLmdldChpLmRhdGFUZXh0RmllbGQpLGNvbG9yOnMuZ2V0KGkuZGF0YUNvbG9yRmllbGQpLHZhbHVlOmwsZm9ybWF0ZWRWYWx1ZTp1fSkpfTtmb3IodD0wLG49ZS5sZW5ndGg7bj50O3QrKylzKGVbdF0sbCl9LF93cmFwUmVzb3VyY2VEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMsbz1bXSxhPXRoaXMucmVzb3VyY2VzLmRhdGFTb3VyY2UudmlldygpLHM9dGhpcy5hc3NpZ25tZW50cy5kYXRhU291cmNlLnZpZXcoKSxsPW5ldyBiKHMpLmZpbHRlcih7ZmllbGQ6ci5hc3NpZ25tZW50cy5kYXRhVGFza0lkRmllbGQsb3BlcmF0b3I6XCJlcVwiLHZhbHVlOmV9KS50b0FycmF5KCksYz1mdW5jdGlvbihlKXt2YXIgdD1udWxsO3JldHVybiBuZXcgYihsKS5maWx0ZXIoe2ZpZWxkOnIuYXNzaWdubWVudHMuZGF0YVJlc291cmNlSWRGaWVsZCxvcGVyYXRvcjpcImVxXCIsdmFsdWU6ZX0pLnNlbGVjdChmdW5jdGlvbihlKXt0Kz1lLmdldChyLmFzc2lnbm1lbnRzLmRhdGFWYWx1ZUZpZWxkKX0pLHR9O2ZvcihuPTAsaT1hLmxlbmd0aDtpPm47bisrKXQ9YVtuXSxvLnB1c2goe2lkOnQuZ2V0KFwiaWRcIiksbmFtZTp0LmdldChyLnJlc291cmNlcy5kYXRhVGV4dEZpZWxkKSxmb3JtYXQ6dC5nZXQoci5yZXNvdXJjZXMuZGF0YUZvcm1hdEZpZWxkKXx8UCx2YWx1ZTpjKHQuaWQpfSk7cmV0dXJuIG99LF9zeW5jRGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuX3ByZXZlbnRSZWZyZXNoPSExLHRoaXMuX3JlcXVlc3RTdGFydCgpLHRoaXMuZGF0YVNvdXJjZS5zeW5jKCl9LF9yZXF1ZXN0U3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9wcm9ncmVzcyghMCl9LF9lcnJvcjpmdW5jdGlvbigpe3RoaXMuX3Byb2dyZXNzKCExKX0sX3Byb2dyZXNzOmZ1bmN0aW9uKGUpe2YudWkucHJvZ3Jlc3ModGhpcy5lbGVtZW50LGUpfSxfcmVzaXphYmxlOmZ1bmN0aW9uKCl7dmFyIHQsbixpLHI9dGhpcy53cmFwcGVyLG89cC5zdHlsZXMsYT1OK28uZ3JpZENvbnRlbnQscz1yLmZpbmQoTitvLmxpc3QpLGw9ci5maW5kKE4rby50aW1lbGluZSk7dGhpcy5fcmVzaXplRHJhZ2dhYmxlPXIuZmluZChOK28uc3BsaXRCYXIpLmhlaWdodChzLmhlaWdodCgpKS5ob3ZlcihmdW5jdGlvbigpe2UodGhpcykuYWRkQ2xhc3Moby5zcGxpdEJhckhvdmVyKX0sZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKG8uc3BsaXRCYXJIb3Zlcil9KS5lbmQoKS5rZW5kb1Jlc2l6YWJsZSh7b3JpZW50YXRpb246XCJob3Jpem9udGFsXCIsaGFuZGxlOk4rby5zcGxpdEJhcixzdGFydDpmdW5jdGlvbigpe3Q9cy53aWR0aCgpLG49bC53aWR0aCgpLGk9bC5maW5kKGEpLnNjcm9sbExlZnQoKX0scmVzaXplOmZ1bmN0aW9uKGUpe3ZhciByPWUueC5pbml0aWFsRGVsdGE7MD50K3J8fDA+bi1yfHwocy53aWR0aCh0K3IpLGwud2lkdGgobi1yKSxsLmZpbmQoYSkuc2Nyb2xsTGVmdChpK3IpKX19KS5kYXRhKFwia2VuZG9SZXNpemFibGVcIil9LF9zY3JvbGxhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9cC5zdHlsZXMsbj1OK3QuZ3JpZENvbnRlbnQsaT1OK3QuZ3JpZEhlYWRlcldyYXAscj10aGlzLnRpbWVsaW5lLmVsZW1lbnQsbz10aGlzLmxpc3QuZWxlbWVudDtyLmZpbmQobikub24oXCJzY3JvbGxcIixmdW5jdGlvbigpe3IuZmluZChpKS5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCksby5maW5kKG4pLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFRvcCl9KSxvLmZpbmQobikub24oXCJzY3JvbGxcIixmdW5jdGlvbigpe28uZmluZChpKS5zY3JvbGxMZWZ0KHRoaXMuc2Nyb2xsTGVmdCl9KS5vbihcIkRPTU1vdXNlU2Nyb2xsXCIrTStcIiBtb3VzZXdoZWVsXCIrTSxmdW5jdGlvbih0KXt2YXIgaT1yLmZpbmQobiksbz1pLnNjcm9sbFRvcCgpLGE9Zi53aGVlbERlbHRhWSh0KTthJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUodC5jdXJyZW50VGFyZ2V0KS5vbmUoXCJ3aGVlbFwiK00sITEpLGkuc2Nyb2xsVG9wKG8rLWEpKX0pfSxfbmF2aWdhdGFibGU6ZnVuY3Rpb24oKXt2YXIgaSxyPXRoaXMsYT10aGlzLm9wdGlvbnMubmF2aWdhdGFibGUscz10aGlzLm9wdGlvbnMuZWRpdGFibGUsbD10aGlzLmxpc3QuaGVhZGVyLmZpbmQoXCJ0YWJsZVwiKSxjPXRoaXMubGlzdC5jb250ZW50LmZpbmQoXCJ0YWJsZVwiKSxkPXAuc3R5bGVzLHU9dGhpcy50aW1lbGluZS5lbGVtZW50LmZpbmQoTitkLmdyaWRDb250ZW50KSxoPWwuYWRkKGMpLGc9bigpLG09e2NvbGxhcHNlOiExLGV4cGFuZDohMH0sdj1mdW5jdGlvbihlKXt2YXIgdD1yLnRpbWVsaW5lLnZpZXcoKS5fdGltZVNsb3RzKClbMF0ub2Zmc2V0V2lkdGg7dS5zY3JvbGxMZWZ0KHUuc2Nyb2xsTGVmdCgpKyhlPy10OnQpKX0sXz1mdW5jdGlvbihlKXt2YXIgdD1yLmN1cnJlbnQucGFyZW50KFwidHJcIituKCkpLGk9ci5jdXJyZW50LmluZGV4KCksYT10W2VdKCk7MCE9PXIuc2VsZWN0KCkubGVuZ3RoJiZyLmNsZWFyU2VsZWN0aW9uKCksMCE9PWEubGVuZ3RoPyhyLl9jdXJyZW50KGEuY2hpbGRyZW4oXCJ0ZDplcShcIitpK1wiKVwiKSksci5fc2Nyb2xsVG8oci5jdXJyZW50KSk6ci5jdXJyZW50LmlzKFwidGRcIikmJlwicHJldlwiPT1lP28obCk6ci5jdXJyZW50LmlzKFwidGhcIikmJlwibmV4dFwiPT1lJiZvKGMpfSx5PWZ1bmN0aW9uKGUpe3ZhciB0PXIuY3VycmVudFtlXSgpOzAhPT10Lmxlbmd0aCYmKHIuX2N1cnJlbnQodCksaT1yLmN1cnJlbnQuaW5kZXgoKSl9LHc9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5kYXRhSXRlbShyLmN1cnJlbnQpO3Quc3VtbWFyeSYmdC5leHBhbmRlZCE9PWUmJnQuc2V0KFwiZXhwYW5kZWRcIixlKX0sYj1mdW5jdGlvbigpe3ZhciBlLHQ7ci5vcHRpb25zLmVkaXRhYmxlJiYhci5saXN0LmVkaXRhYmxlJiYoZT1yLnNlbGVjdCgpLHQ9Zi5hdHRyKFwidWlkXCIpLGUubGVuZ3RoJiZyLnJlbW92ZVRhc2soZS5hdHRyKHQpKSl9O3JldHVybiBlKHRoaXMud3JhcHBlcikub24oXCJtb3VzZWRvd25cIitNLFwidHJcIitnK1wiLCBkaXZcIitnK1wiOm5vdChcIitOK2QubGluZStcIilcIixmdW5jdGlvbih0KXt2YXIgaSxsPWUodC5jdXJyZW50VGFyZ2V0KSxjPWUodC50YXJnZXQpLmlzKFwiOmJ1dHRvbixhLDppbnB1dCxhPi5rLWljb24sdGV4dGFyZWEsc3Bhbi5rLWljb24sc3Bhbi5rLWxpbmssLmstaW5wdXQsLmstbXVsdGlzZWxlY3Qtd3JhcFwiKTt0LmN0cmxLZXl8fChhJiYoaT1sLmlzKFwidHJcIik/ZSh0LnRhcmdldCkuY2xvc2VzdChcInRkXCIpOnIubGlzdC5jb250ZW50LmZpbmQoXCJ0clwiK24obC5hdHRyKGYuYXR0cihcInVpZFwiKSkpK1wiID4gdGQ6Zmlyc3RcIiksci5fY3VycmVudChpKSksIWEmJiFzfHxjfHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7byhyLmxpc3QuY29udGVudC5maW5kKFwidGFibGVcIiksITApfSwyKSl9KSxhIT09ITA/KGMub24oXCJrZXlkb3duXCIrTSxmdW5jdGlvbihlKXtlLmtleUNvZGU9PUUuREVMRVRFJiZiKCl9KSx0KTooaC5vbihcImZvY3VzXCIrTSxmdW5jdGlvbigpe3ZhciB0PXRoaXM9PT1jLmdldCgwKT9cInRkXCI6XCJ0aFwiLG49KGUodGhpcyksci5zZWxlY3QoKSksbz1yLmN1cnJlbnR8fGUobi5sZW5ndGg/bjp0aGlzKS5maW5kKHQrXCI6ZXEoXCIrKGl8fDApK1wiKVwiKTtyLl9jdXJyZW50KG8pfSkub24oXCJibHVyXCIrTSxmdW5jdGlvbigpe3IuX2N1cnJlbnQoKSx0aGlzPT1sJiZlKHRoaXMpLmF0dHIoSSwtMSl9KS5vbihcImtleWRvd25cIitNLGZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5rZXlDb2RlO2lmKHIuY3VycmVudClzd2l0Y2godD1yLmN1cnJlbnQuaXMoXCJ0ZFwiKSxuKXtjYXNlIEUuUklHSFQ6ZS5wcmV2ZW50RGVmYXVsdCgpLGUuYWx0S2V5P3YoKTplLmN0cmxLZXk/dyhtLmV4cGFuZCk6eShcIm5leHRcIik7YnJlYWs7Y2FzZSBFLkxFRlQ6ZS5wcmV2ZW50RGVmYXVsdCgpLGUuYWx0S2V5P3YoITApOmUuY3RybEtleT93KG0uY29sbGFwc2UpOnkoXCJwcmV2XCIpO2JyZWFrO2Nhc2UgRS5VUDplLnByZXZlbnREZWZhdWx0KCksXyhcInByZXZcIik7YnJlYWs7Y2FzZSBFLkRPV046ZS5wcmV2ZW50RGVmYXVsdCgpLF8oXCJuZXh0XCIpO2JyZWFrO2Nhc2UgRS5TUEFDRUJBUjplLnByZXZlbnREZWZhdWx0KCksdCYmci5zZWxlY3Qoci5jdXJyZW50LmNsb3Nlc3QoXCJ0clwiKSk7YnJlYWs7Y2FzZSBFLkVOVEVSOmUucHJldmVudERlZmF1bHQoKSx0P3Iub3B0aW9ucy5lZGl0YWJsZSYmKHIuX2NhY2hlZEN1cnJlbnQ9ci5jdXJyZW50LHIubGlzdC5fc3RhcnRFZGl0SGFuZGxlcihyLmN1cnJlbnQpLGUuc3RvcFByb3BhZ2F0aW9uKCkpOnIuY3VycmVudC5jaGlsZHJlbihcImEuay1saW5rXCIpLmNsaWNrKCk7YnJlYWs7Y2FzZSBFLkVTQzplLnN0b3BQcm9wYWdhdGlvbigpO2JyZWFrO2Nhc2UgRS5ERUxFVEU6dCYmYigpO2JyZWFrO2RlZmF1bHQ6bj49NDkmJjU3Pj1uJiZyLnZpZXcoci50aW1lbGluZS5fdmlld0J5SW5kZXgobi00OSkpfX0pLHQpfSxfY3VycmVudDpmdW5jdGlvbih0KXt2YXIgbixpPXAuc3R5bGVzO3RoaXMuY3VycmVudCYmdGhpcy5jdXJyZW50Lmxlbmd0aCYmdGhpcy5jdXJyZW50LnJlbW92ZUNsYXNzKGkuZm9jdXNlZCkucmVtb3ZlQXR0cihcImlkXCIpLHQmJnQubGVuZ3RoPyh0aGlzLmN1cnJlbnQ9dC5hZGRDbGFzcyhpLmZvY3VzZWQpLmF0dHIoXCJpZFwiLE8pLG49ZShmLl9hY3RpdmVFbGVtZW50KCkpLG4uaXMoXCJ0YWJsZVwiKSYmdGhpcy53cmFwcGVyLmZpbmQobikubGVuZ3RoPjAmJm4ucmVtb3ZlQXR0cihMKS5hdHRyKEwsTykpOnRoaXMuY3VycmVudD1udWxsfSxfZGF0YUJpbmQ6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7bi5vcHRpb25zLmF1dG9CaW5kJiYodGhpcy5fcHJldmVudFJlZnJlc2g9ITAsdGhpcy5fcHJldmVudERlcGVuZGVuY3lSZWZyZXNoPSEwLHQ9ZS5tYXAoW3RoaXMuZGF0YVNvdXJjZSx0aGlzLmRlcGVuZGVuY2llcyx0aGlzLnJlc291cmNlcy5kYXRhU291cmNlLHRoaXMuYXNzaWdubWVudHMuZGF0YVNvdXJjZV0sZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmV0Y2goKX0pLGUud2hlbi5hcHBseShudWxsLHQpLmRvbmUoZnVuY3Rpb24oKXtuLl9wcmV2ZW50UmVmcmVzaD0hMSxuLl9wcmV2ZW50RGVwZW5kZW5jeVJlZnJlc2g9ITEsbi5yZWZyZXNoKCl9KSl9LF9yZXNpemU6ZnVuY3Rpb24oKXt0aGlzLl9hZGp1c3REaW1lbnNpb25zKCksdGhpcy50aW1lbGluZS52aWV3KCkuX2FkanVzdEhlaWdodCgpLHRoaXMubGlzdC5fYWRqdXN0SGVpZ2h0KCl9fSksZi5QREZNaXhpbiYmZi5QREZNaXhpbi5leHRlbmQocC5wcm90b3R5cGUpLGYudWkucGx1Z2luKHApLFQoITAscCx7c3R5bGVzOlF9KX0od2luZG93LmtlbmRvLmpRdWVyeSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3ZhciB0LG4saT1bXSxyPWUuY2xhc3NOYW1lO2Zvcih0PTAsbj1lLmxldmVsO24+dDt0KyspaS5wdXNoKGMoXCJzcGFuXCIse2NsYXNzTmFtZTpyfSkpO3JldHVybiBpfXZhciBpLHIsbyxhPWtlbmRvLmRhdGEscz1lLmV4dGVuZCxsPWtlbmRvLmRvbSxjPWwuZWxlbWVudCxkPWwudGV4dCx1PWwuaHRtbCxoPWtlbmRvLnVpLHA9aC5EYXRhQm91bmRXaWRnZXQsZj1hLkRhdGFTb3VyY2UsZz1hLk9ic2VydmFibGVBcnJheSxtPWEuUXVlcnksdj1hLk1vZGVsLF89ZS5wcm94eSx5PWUubWFwLHc9ZS5ncmVwLGI9XCJzdHJpbmdcIixrPVwiY2hhbmdlXCIseD1cImVycm9yXCIsQz1cInByb2dyZXNzXCIsUz1cIi5cIixUPVwiLmtlbmRvVHJlZUxpc3RcIixEPVwiY2xpY2tcIixBPVwibW91c2Vkb3duXCIsRT1cImVkaXRcIixNPVwic2F2ZVwiLFA9XCJleHBhbmRcIixJPVwiY29sbGFwc2VcIix6PVwicmVtb3ZlXCIsRj1cImRhdGFCaW5kaW5nXCIsUj1cImRhdGFCb3VuZFwiLEI9XCJjYW5jZWxcIixMPVwiZmlsdGVyTWVudUluaXRcIixPPXt3cmFwcGVyOlwiay10cmVlbGlzdCBrLWdyaWQgay13aWRnZXRcIixoZWFkZXI6XCJrLWhlYWRlclwiLGJ1dHRvbjpcImstYnV0dG9uXCIsYWx0Olwiay1hbHRcIixlZGl0Q2VsbDpcImstZWRpdC1jZWxsXCIsZ3JvdXA6XCJrLXRyZWVsaXN0LWdyb3VwXCIsZ3JpZFRvb2xiYXI6XCJrLWdyaWQtdG9vbGJhclwiLGdyaWRIZWFkZXI6XCJrLWdyaWQtaGVhZGVyXCIsZ3JpZEhlYWRlcldyYXA6XCJrLWdyaWQtaGVhZGVyLXdyYXBcIixncmlkQ29udGVudDpcImstZ3JpZC1jb250ZW50XCIsZ3JpZENvbnRlbnRXcmFwOlwiay1ncmlkLWNvbnRlbnRcIixncmlkRmlsdGVyOlwiay1ncmlkLWZpbHRlclwiLGZvb3RlclRlbXBsYXRlOlwiay1mb290ZXItdGVtcGxhdGVcIixsb2FkaW5nOlwiay1sb2FkaW5nXCIscmVmcmVzaDpcImstaS1yZWZyZXNoXCIscmV0cnk6XCJrLXJlcXVlc3QtcmV0cnlcIixzZWxlY3RlZDpcImstc3RhdGUtc2VsZWN0ZWRcIixzdGF0dXM6XCJrLXN0YXR1c1wiLGxpbms6XCJrLWxpbmtcIix3aXRoSWNvbjpcImstd2l0aC1pY29uXCIsZmlsdGVyYWJsZTpcImstZmlsdGVyYWJsZVwiLGljb246XCJrLWljb25cIixpY29uRmlsdGVyOlwiay1maWx0ZXJcIixpY29uQ29sbGFwc2U6XCJrLWktY29sbGFwc2VcIixpY29uRXhwYW5kOlwiay1pLWV4cGFuZFwiLGljb25IaWRkZW46XCJrLWktbm9uZVwiLGljb25QbGFjZUhvbGRlcjpcImstaWNvbiBrLWktbm9uZVwiLGlucHV0Olwiay1pbnB1dFwiLGRyb3BQb3NpdGlvbnM6XCJrLWluc2VydC10b3Agay1pbnNlcnQtYm90dG9tIGstYWRkIGstaW5zZXJ0LW1pZGRsZVwiLGRyb3BUb3A6XCJrLWluc2VydC10b3BcIixkcm9wQm90dG9tOlwiay1pbnNlcnQtYm90dG9tXCIsZHJvcEFkZDpcImstYWRkXCIsZHJvcE1pZGRsZTpcImstaW5zZXJ0LW1pZGRsZVwiLGRyb3BEZW5pZWQ6XCJrLWRlbmllZFwiLGRyYWdTdGF0dXM6XCJrLWRyYWctc3RhdHVzXCIsZHJhZ0NsdWU6XCJrLWRyYWctY2x1ZVwiLGRyYWdDbHVlVGV4dDpcImstY2x1ZS10ZXh0XCJ9LEg9e2NyZWF0ZTp7aW1hZ2VDbGFzczpcImstYWRkXCIsY2xhc3NOYW1lOlwiay1ncmlkLWFkZFwiLG1ldGhvZE5hbWU6XCJhZGRSb3dcIn0sY3JlYXRlY2hpbGQ6e2ltYWdlQ2xhc3M6XCJrLWFkZFwiLGNsYXNzTmFtZTpcImstZ3JpZC1hZGRcIixtZXRob2ROYW1lOlwiYWRkUm93XCJ9LGRlc3Ryb3k6e2ltYWdlQ2xhc3M6XCJrLWRlbGV0ZVwiLGNsYXNzTmFtZTpcImstZ3JpZC1kZWxldGVcIixtZXRob2ROYW1lOlwicmVtb3ZlUm93XCJ9LGVkaXQ6e2ltYWdlQ2xhc3M6XCJrLWVkaXRcIixjbGFzc05hbWU6XCJrLWdyaWQtZWRpdFwiLG1ldGhvZE5hbWU6XCJlZGl0Um93XCJ9LHVwZGF0ZTp7aW1hZ2VDbGFzczpcImstdXBkYXRlXCIsY2xhc3NOYW1lOlwiay1wcmltYXJ5IGstZ3JpZC11cGRhdGVcIixtZXRob2ROYW1lOlwic2F2ZVJvd1wifSxjYW5jZWxlZGl0OntpbWFnZUNsYXNzOlwiay1jYW5jZWxcIixjbGFzc05hbWU6XCJrLWdyaWQtY2FuY2VsXCIsbWV0aG9kTmFtZTpcIl9jYW5jZWxFZGl0XCJ9LGV4Y2VsOntpbWFnZUNsYXNzOlwiay1pLWV4Y2VsXCIsY2xhc3NOYW1lOlwiay1ncmlkLWV4Y2VsXCIsbWV0aG9kTmFtZTpcInNhdmVBc0V4Y2VsXCJ9LHBkZjp7aW1hZ2VDbGFzczpcImstaS1wZGZcIixjbGFzc05hbWU6XCJrLWdyaWQtcGRmXCIsbWV0aG9kTmFtZTpcInNhdmVBc1BERlwifX0sTj12LmRlZmluZSh7aWQ6XCJpZFwiLGZpZWxkczp7aWQ6e3R5cGU6XCJudW1iZXJcIn0scGFyZW50SWQ6e3R5cGU6XCJudW1iZXJcIixudWxsYWJsZTohMH19LGluaXQ6ZnVuY3Rpb24oZSl7di5mbi5pbml0LmNhbGwodGhpcyxlKSx0aGlzLl9sb2FkZWQ9ITF9LGxvYWRlZDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/dGhpcy5fbG9hZGVkOih0aGlzLl9sb2FkZWQ9ZSx0KX0sc2hvdWxkU2VyaWFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiB2LmZuLnNob3VsZFNlcmlhbGl6ZS5jYWxsKHRoaXMsZSkmJlwiX2xvYWRlZFwiIT09ZSYmXCJfZXJyb3JcIiE9ZSYmXCJfZWRpdFwiIT1lfX0pLFY9Zi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSl7Zi5mbi5pbml0LmNhbGwodGhpcyxzKCEwLHt9LHtzY2hlbWE6e21vZGVsQmFzZTpOLG1vZGVsOk59fSxlKSl9LF9yZWFkRGF0YTpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj10aGlzLmRhdGEoKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKylpLnB1c2goclt0XSk7cmV0dXJuIGkuY29uY2F0KGYuZm4uX3JlYWREYXRhLmNhbGwodGhpcyxlKSl9LF9yZWFkQWdncmVnYXRlczpmdW5jdGlvbihlKXt2YXIgdD1zKHRoaXMuX2FnZ3JlZ2F0ZVJlc3VsdCx0aGlzLnJlYWRlci5hZ2dyZWdhdGVzKGUpKTtyZXR1cm5cIlwiaW4gdCYmKHRbdGhpcy5fZGVmYXVsdFBhcmVudElkKCldPXRbXCJcIl0sZGVsZXRlIHRbXCJcIl0pLHR9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdWJ0cmVlKHRoaXMuX2NoaWxkcmVuTWFwKHRoaXMuZGF0YSgpKSxlLmlkKTt0aGlzLl9yZW1vdmVJdGVtcyh0KSxmLmZuLnJlbW92ZS5jYWxsKHRoaXMsZSl9LF9maWx0ZXJDYWxsYmFjazpmdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj1lLnRvQXJyYXkoKSxvPXt9O2Zvcih0PTA7ci5sZW5ndGg+dDt0KyspZm9yKG49clt0XTtuJiYob1tuLmlkXT0hMCwhb1tuLnBhcmVudElkXSk7KW9bbi5wYXJlbnRJZF09ITAsbj10aGlzLnBhcmVudE5vZGUobiksbiYmaS5wdXNoKG4pO3JldHVybiBuZXcgbShyLmNvbmNhdChpKSl9LF9zdWJ0cmVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPWVbdF18fFtdLG89dGhpcy5fZGVmYXVsdFBhcmVudElkKCk7Zm9yKG49MCxpPXIubGVuZ3RoO2k+bjtuKyspcltuXS5pZCE9PW8mJihyPXIuY29uY2F0KHRoaXMuX3N1YnRyZWUoZSxyW25dLmlkKSkpO3JldHVybiByfSxfY2hpbGRyZW5NYXA6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbz17fTtmb3IoZT10aGlzLl9vYnNlcnZlVmlldyhlKSx0PTA7ZS5sZW5ndGg+dDt0Kyspbj1lW3RdLGk9bi5pZCxyPW4ucGFyZW50SWQsb1tpXT1vW2ldfHxbXSxvW3JdPW9bcl18fFtdLG9bcl0ucHVzaChuKTtyZXR1cm4gb30sX2NhbGN1bGF0ZUFnZ3JlZ2F0ZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIsbyxhLHM7Zm9yKHQ9dHx8e30sbj17fSxhPXQuZmlsdGVyLGEmJihlPW0ucHJvY2VzcyhlLHtmaWx0ZXI6YSxmaWx0ZXJDYWxsYmFjazpfKHRoaXMuX2ZpbHRlckNhbGxiYWNrLHRoaXMpfSkuZGF0YSkscz10aGlzLl9jaGlsZHJlbk1hcChlKSxuW3RoaXMuX2RlZmF1bHRQYXJlbnRJZCgpXT1uZXcgbSh0aGlzLl9zdWJ0cmVlKHMsdGhpcy5fZGVmYXVsdFBhcmVudElkKCkpKS5hZ2dyZWdhdGUodC5hZ2dyZWdhdGUpLG89MDtlLmxlbmd0aD5vO28rKylpPWVbb10scj10aGlzLl9zdWJ0cmVlKHMsaS5pZCksbltpLmlkXT1uZXcgbShyKS5hZ2dyZWdhdGUodC5hZ2dyZWdhdGUpO3JldHVybiBufSxfcXVlcnlQcm9jZXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLG8sYSxzLGw7Zm9yKHQ9dHx8e30sdC5maWx0ZXJDYWxsYmFjaz1fKHRoaXMuX2ZpbHRlckNhbGxiYWNrLHRoaXMpLG49dGhpcy5fZGVmYXVsdFBhcmVudElkKCksaT1tLnByb2Nlc3MoZSx0KSxyPXRoaXMuX2NoaWxkcmVuTWFwKGkuZGF0YSksZT1yW25dfHxbXSxhPTA7ZS5sZW5ndGg+YTthKyspcz1lW2FdLHMuaWQhPT1uJiYobD1yW3MuaWRdLG89ISghbHx8IWwubGVuZ3RoKSxzLmxvYWRlZCgpfHxzLmxvYWRlZChvKSwocy5sb2FkZWQoKXx8cy5oYXNDaGlsZHJlbiE9PSEwKSYmKHMuaGFzQ2hpbGRyZW49byksbyYmZS5zcGxpY2UuYXBwbHkoZSxbYSsxLDBdLmNvbmNhdChsKSkpO3JldHVybiBpLmRhdGE9ZSxpfSxfcXVldWVSZXF1ZXN0OmZ1bmN0aW9uKGUsdCl7dC5jYWxsKHRoaXMpfSxfbW9kZWxMb2FkZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXQoZSk7dC5sb2FkZWQoITApLHQuaGFzQ2hpbGRyZW49dGhpcy5jaGlsZE5vZGVzKHQpLmxlbmd0aD4wfSxfbW9kZWxFcnJvcjpmdW5jdGlvbihlLHQpe3RoaXMuZ2V0KGUpLl9lcnJvcj10fSxyZWFkOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmlkfHwodGhpcy5fZGF0YT10aGlzLl9vYnNlcnZlKFtdKSksZi5mbi5yZWFkLmNhbGwodGhpcyxlKX0sbG9hZDpmdW5jdGlvbihlKXt2YXIgdD1cIl9xdWVyeVwiO3JldHVybiFlLmxvYWRlZCgpJiZlLmhhc0NoaWxkcmVuJiYodD1cInJlYWRcIiksdGhpc1t0XSh7aWQ6ZS5pZH0pLnRoZW4oXyh0aGlzLl9tb2RlbExvYWRlZCx0aGlzLGUuaWQpLF8odGhpcy5fbW9kZWxFcnJvcix0aGlzLGUuaWQpKX0sX2J5UGFyZW50SWQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9W10sbz10aGlzLnZpZXcoKTtpZihlPT09dClyZXR1cm5bXTtmb3IoaT0wO28ubGVuZ3RoPmk7aSsrKW49by5hdChpKSxuLnBhcmVudElkPT1lJiZyLnB1c2gobik7cmV0dXJuIHJ9LF9kZWZhdWx0UGFyZW50SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkZXIubW9kZWwuZm4uZGVmYXVsdHMucGFyZW50SWR9LGNoaWxkTm9kZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2J5UGFyZW50SWQoZS5pZCx0aGlzLl9kZWZhdWx0UGFyZW50SWQoKSl9LHJvb3ROb2RlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ieVBhcmVudElkKHRoaXMuX2RlZmF1bHRQYXJlbnRJZCgpKX0scGFyZW50Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXQoZS5wYXJlbnRJZCl9LGxldmVsOmZ1bmN0aW9uKGUpe3ZhciB0PS0xO2UgaW5zdGFuY2VvZiBOfHwoZT10aGlzLmdldChlKSk7ZG8gZT10aGlzLnBhcmVudE5vZGUoZSksdCsrO3doaWxlKGUpO3JldHVybiB0fSxmaWx0ZXI6ZnVuY3Rpb24oZSl7dmFyIG49Zi5mbi5maWx0ZXI7cmV0dXJuIGU9PT10P24uY2FsbCh0aGlzLGUpOihuLmNhbGwodGhpcyxlKSx0KX19KTtWLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5pc0FycmF5KHQpP3Q9e2RhdGE6dH06dCBpbnN0YW5jZW9mIGcmJih0PXtkYXRhOnQudG9KU09OKCl9KSx0IGluc3RhbmNlb2YgVj90Om5ldyBWKHQpfSxpPWtlbmRvLk9ic2VydmFibGUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7a2VuZG8uT2JzZXJ2YWJsZS5mbi5pbml0LmNhbGwodGhpcyksdD10aGlzLm9wdGlvbnM9cyghMCx7fSx0aGlzLm9wdGlvbnMsdCksdGhpcy5lbGVtZW50PWUsdGhpcy5iaW5kKHRoaXMuZXZlbnRzLHQpLHRoaXMubW9kZWw9dGhpcy5vcHRpb25zLm1vZGVsLHRoaXMuZmllbGRzPXRoaXMuX2ZpZWxkcyh0aGlzLm9wdGlvbnMuY29sdW1ucyksdGhpcy5faW5pdENvbnRhaW5lcigpLHRoaXMuY3JlYXRlRWRpdGFibGUoKX0sZXZlbnRzOltdLF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudH0sY3JlYXRlRWRpdGFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7dGhpcy5lZGl0YWJsZT1uZXcgaC5FZGl0YWJsZSh0aGlzLndyYXBwZXIse2ZpZWxkczp0aGlzLmZpZWxkcyx0YXJnZXQ6ZS50YXJnZXQsY2xlYXJDb250YWluZXI6ZS5jbGVhckNvbnRhaW5lcixtb2RlbDp0aGlzLm1vZGVsfSl9LF9pc0VkaXRhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmZpZWxkJiZ0aGlzLm1vZGVsLmVkaXRhYmxlKGUuZmllbGQpfSxfZmllbGRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPVtdO2Zvcih0PTAsbj1lLmxlbmd0aDtuPnQ7dCsrKWk9ZVt0XSx0aGlzLl9pc0VkaXRhYmxlKGkpJiZyLnB1c2goe2ZpZWxkOmkuZmllbGQsZm9ybWF0OmkuZm9ybWF0LGVkaXRvcjppLmVkaXRvcn0pO3JldHVybiByfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGl0YWJsZS5lbmQoKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWRpdGFibGUuZGVzdHJveSgpLHRoaXMuZWRpdGFibGUuZWxlbWVudC5maW5kKFwiW1wiK2tlbmRvLmF0dHIoXCJjb250YWluZXItZm9yXCIpK1wiXVwiKS5lbXB0eSgpLHRoaXMubW9kZWw9dGhpcy53cmFwcGVyPXRoaXMuZWxlbWVudD10aGlzLmNvbHVtbnM9dGhpcy5lZGl0YWJsZT1udWxsfX0pLHI9aS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtpLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fYXR0YWNoSGFuZGxlcnMoKSx0aGlzLm9wZW4oKX0sZXZlbnRzOltCLE1dLG9wdGlvbnM6e3dpbmRvdzp7bW9kYWw6ITAscmVzaXphYmxlOiExLGRyYWdnYWJsZTohMCx0aXRsZTpcIkVkaXRcIix2aXNpYmxlOiExfX0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsbj1bXTtcbnRoaXMud3JhcHBlcj1lKCc8ZGl2IGNsYXNzPVwiay1wb3B1cC1lZGl0LWZvcm1cIi8+JykuYXR0cihrZW5kby5hdHRyKFwidWlkXCIpLHRoaXMubW9kZWwudWlkKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJrLWVkaXQtZm9ybS1jb250YWluZXJcIi8+JyksdC50ZW1wbGF0ZT8odGhpcy5fYXBwZW5kVGVtcGxhdGUobiksdGhpcy5maWVsZHM9W10pOnRoaXMuX2FwcGVuZEZpZWxkcyhuKSx0aGlzLl9hcHBlbmRCdXR0b25zKG4pLG5ldyBsLlRyZWUodGhpcy53cmFwcGVyLmNoaWxkcmVuKClbMF0pLnJlbmRlcihuKSx0aGlzLndyYXBwZXIuYXBwZW5kVG8odC5hcHBlbmRUbyksdGhpcy53aW5kb3c9bmV3IGguV2luZG93KHRoaXMud3JhcHBlcix0LndpbmRvdyl9LF9hcHBlbmRUZW1wbGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnMudGVtcGxhdGU7dHlwZW9mIHQ9PT1iJiYodD13aW5kb3cudW5lc2NhcGUodCkpLHQ9a2VuZG8udGVtcGxhdGUodCkodGhpcy5tb2RlbCksZS5wdXNoKHUodCkpfSxfYXBwZW5kRmllbGRzOmZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXRoaXMub3B0aW9ucy5jb2x1bW5zO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7dCsrKWk9clt0XSxpLmNvbW1hbmR8fChlLnB1c2godSgnPGRpdiBjbGFzcz1cImstZWRpdC1sYWJlbFwiPjxsYWJlbCBmb3I9XCInK2kuZmllbGQrJ1wiPicrKGkudGl0bGV8fGkuZmllbGR8fFwiXCIpK1wiPC9sYWJlbD48L2Rpdj5cIikpLGUucHVzaCh0aGlzLl9pc0VkaXRhYmxlKGkpP3UoXCI8ZGl2IFwiK2tlbmRvLmF0dHIoXCJjb250YWluZXItZm9yXCIpKyc9XCInK2kuZmllbGQrJ1wiIGNsYXNzPVwiay1lZGl0LWZpZWxkXCI+PC9kaXY+Jyk6YyhcImRpdlwiLHtcImNsYXNzXCI6XCJrLWVkaXQtZmllbGRcIn0sW3RoaXMub3B0aW9ucy5maWVsZFJlbmRlcmVyKGksdGhpcy5tb2RlbCldKSkpfSxfYXBwZW5kQnV0dG9uczpmdW5jdGlvbihlKXtlLnB1c2goYyhcImRpdlwiLHtcImNsYXNzXCI6XCJrLWVkaXQtYnV0dG9ucyBrLXN0YXRlLWRlZmF1bHRcIn0sdGhpcy5vcHRpb25zLmNvbW1hbmRSZW5kZXJlcigpKSl9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NhbmNlbFByb3h5PV8odGhpcy5fY2FuY2VsLHRoaXMpO3RoaXMud3JhcHBlci5vbihEK1QsXCIuay1ncmlkLWNhbmNlbFwiLHRoaXMuX2NhbmNlbFByb3h5KSx0aGlzLl9zYXZlUHJveHk9Xyh0aGlzLl9zYXZlLHRoaXMpLHRoaXMud3JhcHBlci5vbihEK1QsXCIuay1ncmlkLXVwZGF0ZVwiLHRoaXMuX3NhdmVQcm94eSksdGhpcy53aW5kb3cuYmluZChcImNsb3NlXCIsZnVuY3Rpb24odCl7dC51c2VyVHJpZ2dlcmVkJiZlKHQpfSl9LF9kZXR0YWNoSGFuZGxlcnM6ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxQcm94eT1udWxsLHRoaXMuX3NhdmVQcm94eT1udWxsLHRoaXMud3JhcHBlci5vZmYoVCl9LF9jYW5jZWw6ZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKEIsZSl9LF9zYXZlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKE0pfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy53aW5kb3cuY2VudGVyKCkub3BlbigpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMud2luZG93LmJpbmQoXCJkZWFjdGl2YXRlXCIsXyh0aGlzLmRlc3Ryb3ksdGhpcykpLmNsb3NlKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLndpbmRvdy5kZXN0cm95KCksdGhpcy53aW5kb3c9bnVsbCx0aGlzLl9kZXR0YWNoSGFuZGxlcnMoKSxpLmZuLmRlc3Ryb3kuY2FsbCh0aGlzKX19KSxvPXAuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUsdCl7cC5mbi5pbml0LmNhbGwodGhpcyxlLHQpLHRoaXMuX2RhdGFTb3VyY2UodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpLHRoaXMuX2NvbHVtbnMoKSx0aGlzLl9sYXlvdXQoKSx0aGlzLl9zb3J0YWJsZSgpLHRoaXMuX2ZpbHRlcmFibGUoKSx0aGlzLl9zZWxlY3RhYmxlKCksdGhpcy5fYXR0YWNoRXZlbnRzKCksdGhpcy5fdG9vbGJhcigpLHRoaXMuX3Njcm9sbGFibGUoKSx0aGlzLm9wdGlvbnMuYXV0b0JpbmQmJnRoaXMuZGF0YVNvdXJjZS5mZXRjaCgpLHRoaXMuX2FkanVzdEhlaWdodCgpLGtlbmRvLm5vdGlmeSh0aGlzKX0sX3Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMub3B0aW9ucy5zY3JvbGxhYmxlJiYoZT10aGlzLmhlYWRlci5jbG9zZXN0KFwiLmstZ3JpZC1oZWFkZXItd3JhcFwiKSx0aGlzLmNvbnRlbnQuY2xvc2VzdChcIi5rLWdyaWQtY29udGVudFwiKS5iaW5kKFwic2Nyb2xsXCIrVCxmdW5jdGlvbigpe2Uuc2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQpfSksdD1rZW5kby50b3VjaFNjcm9sbGVyKHRoaXMuY29udGVudC5jbG9zZXN0KFwiZGl2XCIpKSx0JiZ0Lm1vdmFibGUmJih0aGlzLl90b3VjaFNjcm9sbGVyPXQpKX0sX3Byb2dyZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLm1lc3NhZ2VzO3RoaXMuY29udGVudC5maW5kKFwidHJcIikubGVuZ3RofHx0aGlzLl9zaG93U3RhdHVzKGtlbmRvLnRlbXBsYXRlKFwiPHNwYW4gY2xhc3M9JyM9IGNsYXNzTmFtZSAjJyAvPiAjOiBtZXNzYWdlcy5sb2FkaW5nICNcIikoe2NsYXNzTmFtZTpPLmljb24rXCIgXCIrTy5sb2FkaW5nLG1lc3NhZ2VzOmV9KSl9LF9lcnJvcjpmdW5jdGlvbihlKXt0aGlzLmRhdGFTb3VyY2Uucm9vdE5vZGVzKCkubGVuZ3RofHx0aGlzLl9yZW5kZXIoe2Vycm9yOmV9KX0scmVmcmVzaDpmdW5jdGlvbihlKXtlPWV8fHt9LFwiaXRlbWNoYW5nZVwiPT1lLmFjdGlvbiYmdGhpcy5lZGl0b3J8fHRoaXMudHJpZ2dlcihGKXx8KHRoaXMuX2FuZ3VsYXJJdGVtcyhcImNsZWFudXBcIiksdGhpcy5fYW5ndWxhckZvb3RlcnMoXCJjbGVhbnVwXCIpLHRoaXMuX2NhbmNlbEVkaXRvcigpLHRoaXMuX3JlbmRlcigpLHRoaXMuX2FkanVzdEhlaWdodCgpLHRoaXMuX2FuZ3VsYXJJdGVtcyhcImNvbXBpbGVcIiksdGhpcy5fYW5ndWxhckZvb3RlcnMoXCJjb21waWxlXCIpLHRoaXMudHJpZ2dlcihSKSl9LF9hbmd1bGFyRm9vdGVyczpmdW5jdGlvbih0KXt2YXIgbixpLHIsbz10aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpLGE9dGhpcy5jb250ZW50LmZpbmQoXCJ0clwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5oYXNDbGFzcyhPLmZvb3RlclRlbXBsYXRlKX0pO2ZvcihuPTA7YS5sZW5ndGg+bjtuKyspaT1hLmVxKG4pLHI9b1tpLmF0dHIoXCJkYXRhLXBhcmVudElkXCIpXSx0aGlzLl9hbmd1bGFyRm9vdGVyKHQsaS5maW5kKFwidGRcIikuZ2V0KCkscil9LF9hbmd1bGFyRm9vdGVyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLmNvbHVtbnM7dGhpcy5hbmd1bGFyKGUsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6dCxkYXRhOnkoaSxmdW5jdGlvbihlKXtyZXR1cm57Y29sdW1uOmUsYWdncmVnYXRlOm4mJm5bZS5maWVsZF19fSl9fSl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maW5kKFwidHJcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIWUodGhpcykuaGFzQ2xhc3MoTy5mb290ZXJUZW1wbGF0ZSl9KX0sX3Nob3dTdGF0dXM6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIik7bi5sZW5ndGh8fChuPWUoXCI8ZGl2IGNsYXNzPSdrLXN0YXR1cycgLz5cIikuYXBwZW5kVG8odGhpcy5lbGVtZW50KSksdGhpcy5fY29udGVudFRyZWUucmVuZGVyKFtdKSx0aGlzLmNvbnRlbnQuY2xvc2VzdChTK08uZ3JpZENvbnRlbnQpLmhpZGUoKSxuLmh0bWwodCl9LF9oaWRlU3RhdHVzOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmZpbmQoXCIuay1zdGF0dXNcIikucmVtb3ZlKCksdGhpcy5jb250ZW50LmNsb3Nlc3QoUytPLmdyaWRDb250ZW50KS5zaG93KCl9LF9hZGp1c3RIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWxlbWVudCxuPXQuZmluZChTK08uZ3JpZENvbnRlbnRXcmFwKSxpPXQuZmluZChTK08uZ3JpZEhlYWRlcikscj10LmZpbmQoUytPLmdyaWRUb29sYmFyKTt0LmhlaWdodCh0aGlzLm9wdGlvbnMuaGVpZ2h0KSxlPWZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGVbMF0uc3R5bGUuaGVpZ2h0PyEwOih0PWUuaGVpZ2h0KCksZS5oZWlnaHQoXCJhdXRvXCIpLG49ZS5oZWlnaHQoKSxlLmhlaWdodChcIlwiKSx0IT1uKX0sZSh0KSYmbi5oZWlnaHQodC5oZWlnaHQoKS1pLm91dGVySGVpZ2h0KCktci5vdXRlckhlaWdodCgpKX0sZGVzdHJveTpmdW5jdGlvbigpe3AuZm4uZGVzdHJveS5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuZGF0YVNvdXJjZTtlLnVuYmluZChrLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSxlLnVuYmluZCh4LHRoaXMuX2Vycm9ySGFuZGxlciksZS51bmJpbmQoQyx0aGlzLl9wcm9ncmVzc0hhbmRsZXIpLHRoaXMuX2Rlc3Ryb3lFZGl0b3IoKSx0aGlzLmVsZW1lbnQub2ZmKFQpLHRoaXMuX3RvdWNoU2Nyb2xsZXImJnRoaXMuX3RvdWNoU2Nyb2xsZXIuZGVzdHJveSgpLHRoaXMuX3JlZnJlc2hIYW5kbGVyPXRoaXMuX2Vycm9ySGFuZGxlcj10aGlzLl9wcm9ncmVzc0hhbmRsZXI9bnVsbCx0aGlzLmhlYWRlcj10aGlzLmNvbnRlbnQ9dGhpcy5lbGVtZW50PW51bGwsdGhpcy5fc3RhdHVzVHJlZT10aGlzLl9oZWFkZXJUcmVlPXRoaXMuX2NvbnRlbnRUcmVlPW51bGx9LG9wdGlvbnM6e25hbWU6XCJUcmVlTGlzdFwiLGNvbHVtbnM6W10sYXV0b0JpbmQ6ITAsc2Nyb2xsYWJsZTohMCxzZWxlY3RhYmxlOiExLHNvcnRhYmxlOiExLHRvb2xiYXI6bnVsbCxoZWlnaHQ6bnVsbCxtZXNzYWdlczp7bm9Sb3dzOlwiTm8gcmVjb3JkcyB0byBkaXNwbGF5XCIsbG9hZGluZzpcIkxvYWRpbmcuLi5cIixyZXF1ZXN0RmFpbGVkOlwiUmVxdWVzdCBmYWlsZWQuXCIscmV0cnk6XCJSZXRyeVwiLGNvbW1hbmRzOntlZGl0OlwiRWRpdFwiLHVwZGF0ZTpcIlVwZGF0ZVwiLGNhbmNlbGVkaXQ6XCJDYW5jZWxcIixjcmVhdGU6XCJBZGQgbmV3IHJlY29yZFwiLGNyZWF0ZWNoaWxkOlwiQWRkIGNoaWxkIHJlY29yZFwiLGRlc3Ryb3k6XCJEZWxldGVcIixleGNlbDpcIkV4cG9ydCB0byBFeGNlbFwiLHBkZjpcIkV4cG9ydCB0byBQREZcIn19LGV4Y2VsOntoaWVyYXJjaHk6ITB9LGZpbHRlcmFibGU6ITEsZWRpdGFibGU6ITF9LGV2ZW50czpbayxFLE0seixQLEksRixSLEIsTF0sX3RvZ2dsZTpmdW5jdGlvbihlLG4pe3ZhciBpPWUubG9hZGVkKCk7ZS5fZXJyb3ImJihlLmV4cGFuZGVkPSExLGUuX2Vycm9yPXQpLChpfHwhZS5leHBhbmRlZCkmJih0PT09biYmKG49IWUuZXhwYW5kZWQpLGUuZXhwYW5kZWQ9bixpfHx0aGlzLmRhdGFTb3VyY2UubG9hZChlKS5hbHdheXMoXyh0aGlzLnJlZnJlc2gsdGhpcykpLHRoaXMucmVmcmVzaCgpKX0sZXhwYW5kOmZ1bmN0aW9uKGUpe3RoaXMuX3RvZ2dsZSh0aGlzLmRhdGFJdGVtKGUpLCEwKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSl7dGhpcy5fdG9nZ2xlKHRoaXMuZGF0YUl0ZW0oZSksITEpfSxfdG9nZ2xlQ2hpbGRyZW46ZnVuY3Rpb24odCl7dmFyIG49ZSh0LmN1cnJlbnRUYXJnZXQpLGk9dGhpcy5kYXRhSXRlbShuKSxyPWkuZXhwYW5kZWQ/STpQO3RoaXMudHJpZ2dlcihyLHttb2RlbDppfSl8fHRoaXMuX3RvZ2dsZShpKSx0LnByZXZlbnREZWZhdWx0KCl9LF9hdHRhY2hFdmVudHM6ZnVuY3Rpb24oKXt2YXIgZT1TK08uaWNvbkNvbGxhcHNlK1wiLCAuXCIrTy5pY29uRXhwYW5kK1wiLCAuXCIrTy5yZWZyZXNoLHQ9UytPLnJldHJ5LG49dGhpcy5kYXRhU291cmNlO3RoaXMuZWxlbWVudC5vbihBK1QsZSxfKHRoaXMuX3RvZ2dsZUNoaWxkcmVuLHRoaXMpKS5vbihEK1QsdCxfKG4uZmV0Y2gsbikpLm9uKEQrVCxcIi5rLWJ1dHRvbltkYXRhLWNvbW1hbmRdXCIsXyh0aGlzLl9jb21tYW5kQ2xpY2ssdGhpcykpfSxfY29tbWFuZEJ5TmFtZTpmdW5jdGlvbihlKXt2YXIgdCxuLGkscj10aGlzLmNvbHVtbnM7aWYoZT1lLnRvTG93ZXJDYXNlKCksSFtlXSlyZXR1cm4gSFtlXTtmb3IodD0wO3IubGVuZ3RoPnQ7dCsrKWlmKGk9clt0XS5jb21tYW5kKWZvcihuPTA7aS5sZW5ndGg+bjtuKyspaWYoaVtuXS5uYW1lLnRvTG93ZXJDYXNlKCk9PWUpcmV0dXJuIGlbbl19LF9jb21tYW5kQ2xpY2s6ZnVuY3Rpb24obil7dmFyIGk9ZShuLmN1cnJlbnRUYXJnZXQpLHI9aS5hdHRyKFwiZGF0YS1jb21tYW5kXCIpLG89dGhpcy5fY29tbWFuZEJ5TmFtZShyKSxhPWkuY2xvc2VzdChcInRyXCIpO2E9YS5sZW5ndGg/YTp0LG8mJihvLm1ldGhvZE5hbWU/dGhpc1tvLm1ldGhvZE5hbWVdKGEpOm8uY2xpY2smJm8uY2xpY2suY2FsbCh0aGlzLG4pKX0sX2NvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3B0aW9ucy5jb2x1bW5zfHxbXTt0aGlzLmNvbHVtbnM9eSh0LGZ1bmN0aW9uKGUpe3JldHVybiBlPVwic3RyaW5nXCI9PXR5cGVvZiBlP3tmaWVsZDplfTplLHMoe2VuY29kZWQ6ITB9LGUpfSksZT13KHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5leHBhbmRhYmxlfSksdGhpcy5jb2x1bW5zLmxlbmd0aCYmIWUubGVuZ3RoJiYodGhpcy5jb2x1bW5zWzBdLmV4cGFuZGFibGU9ITApLHRoaXMuX2NvbHVtblRlbXBsYXRlcygpLHRoaXMuX2NvbHVtbkF0dHJpYnV0ZXMoKX0sX2NvbHVtblRlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBlLHQsbixpPXRoaXMuY29sdW1ucztmb3IoZT0wLHQ9aS5sZW5ndGg7dD5lO2UrKyluPWlbZV0sbi50ZW1wbGF0ZSYmKG4udGVtcGxhdGU9a2VuZG8udGVtcGxhdGUobi50ZW1wbGF0ZSkpLG4uaGVhZGVyVGVtcGxhdGUmJihuLmhlYWRlclRlbXBsYXRlPWtlbmRvLnRlbXBsYXRlKG4uaGVhZGVyVGVtcGxhdGUpKSxuLmZvb3RlclRlbXBsYXRlJiYobi5mb290ZXJUZW1wbGF0ZT1rZW5kby50ZW1wbGF0ZShuLmZvb3RlclRlbXBsYXRlKSl9LF9jb2x1bW5BdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixvLGE9dGhpcy5jb2x1bW5zO2ZvcihlPTAsdD1hLmxlbmd0aDt0PmU7ZSsrKWlmKG49YVtlXS5hdHRyaWJ1dGVzLG4mJm4uc3R5bGUpZm9yKGk9bi5zdHlsZS5zcGxpdChcIjtcIiksbi5zdHlsZT17fSxyPTA7aS5sZW5ndGg+cjtyKyspbz1pW3JdLnNwbGl0KFwiOlwiKSxuLnN0eWxlW29bMF1dPW9bMV19LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5lbGVtZW50LGk9dGhpcy5fY29sZ3JvdXAoKSxyPVwiXCI7dGhpcy53cmFwcGVyPW4uYWRkQ2xhc3MoTy53cmFwcGVyKSxyPVwiPGRpdiBjbGFzcz0nIz0gZ3JpZEhlYWRlciAjJyBzdHlsZT1cXFwicGFkZGluZy1yaWdodDogXCIra2VuZG8uc3VwcG9ydC5zY3JvbGxiYXIoKStcInB4O1xcXCI+PGRpdiBjbGFzcz0nIz0gZ3JpZEhlYWRlcldyYXAgIyc+PHRhYmxlIHJvbGU9J2dyaWQnPlwiK2krXCI8dGhlYWQgcm9sZT0ncm93Z3JvdXAnIC8+PC90YWJsZT48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPScjPSBncmlkQ29udGVudFdyYXAgIyc+PHRhYmxlIHJvbGU9J3RyZWVncmlkJyB0YWJpbmRleD0nMCc+XCIraStcIjx0Ym9keSAvPjwvdGFibGU+PC9kaXY+XCIsdGhpcy5vcHRpb25zLnNjcm9sbGFibGV8fChyPVwiPHRhYmxlIHJvbGU9J3RyZWVncmlkJyB0YWJpbmRleD0nMCc+XCIraStcIjx0aGVhZCBjbGFzcz0nIz0gZ3JpZEhlYWRlciAjJyByb2xlPSdyb3dncm91cCcgLz48dGJvZHkgLz48L3RhYmxlPlwiKSx0aGlzLm9wdGlvbnMudG9vbGJhciYmKHI9XCI8ZGl2IGNsYXNzPScjPSBoZWFkZXIgIyAjPSBncmlkVG9vbGJhciAjJyAvPlwiK3IpLG4uYXBwZW5kKGtlbmRvLnRlbXBsYXRlKHIpKE8pK1wiPGRpdiBjbGFzcz0nay1zdGF0dXMnIC8+XCIpLHRoaXMudG9vbGJhcj1uLmZpbmQoUytPLmdyaWRUb29sYmFyKSxlPXRoaXMuaGVhZGVyPW4uZmluZChTK08uZ3JpZEhlYWRlcikuZmluZChcInRoZWFkXCIpLmFkZEJhY2soKS5maWx0ZXIoXCJ0aGVhZFwiKSx0aGlzLl9oZWFkZXJUcmVlPW5ldyBsLlRyZWUodGhpcy5oZWFkZXJbMF0pLHRoaXMuX2hlYWRlclRyZWUucmVuZGVyKFtjKFwidHJcIix7cm9sZTpcInJvd1wifSx0aGlzLl90aHMoKSldKSx0PXRoaXMuY29sdW1ucyx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6ZS5maW5kKFwidGguay1oZWFkZXJcIikuZ2V0KCksZGF0YTp5KHQsZnVuY3Rpb24oZSl7cmV0dXJue2NvbHVtbjplfX0pfX0pLHRoaXMuY29udGVudD1uLmZpbmQoUytPLmdyaWRDb250ZW50V3JhcCkuZmluZChcInRib2R5XCIpLHRoaXMuY29udGVudC5sZW5ndGh8fCh0aGlzLmNvbnRlbnQ9bi5maW5kKFwidGJvZHlcIikpLHRoaXMuX2NvbnRlbnRUcmVlPW5ldyBsLlRyZWUodGhpcy5jb250ZW50WzBdKSx0aGlzLl9zdGF0dXNUcmVlPW5ldyBsLlRyZWUodGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLmstc3RhdHVzXCIpWzBdKX0sX3Rvb2xiYXI6ZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXMub3B0aW9ucy50b29sYmFyLGk9dGhpcy50b29sYmFyO24mJihlLmlzQXJyYXkobik/KHQ9dGhpcy5fYnVpbGRDb21tYW5kcyhuKSxuZXcgbC5UcmVlKGlbMF0pLnJlbmRlcih0KSk6aS5hcHBlbmQoa2VuZG8udGVtcGxhdGUobikoe30pKSx0aGlzLmFuZ3VsYXIoXCJjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57ZWxlbWVudHM6aS5nZXQoKX19KSl9LF9yZW5kZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2U9ZXx8e30sdD10aGlzLm9wdGlvbnMubWVzc2FnZXMsbj10aGlzLmRhdGFTb3VyY2Uucm9vdE5vZGVzKCksaT10aGlzLmRhdGFTb3VyY2UuYWdncmVnYXRlcygpLHRoaXMuX2Fic29sdXRlSW5kZXg9MCxlLmVycm9yP3RoaXMuX3Nob3dTdGF0dXMoa2VuZG8udGVtcGxhdGUoXCIjOiBtZXNzYWdlcy5yZXF1ZXN0RmFpbGVkICMgPGJ1dHRvbiBjbGFzcz0nIz0gYnV0dG9uQ2xhc3MgIyc+IzogbWVzc2FnZXMucmV0cnkgIzwvYnV0dG9uPlwiKSh7YnV0dG9uQ2xhc3M6W08uYnV0dG9uLE8ucmV0cnldLmpvaW4oXCIgXCIpLG1lc3NhZ2VzOnR9KSk6bi5sZW5ndGg/KHRoaXMuX2hpZGVTdGF0dXMoKSx0aGlzLl9jb250ZW50VHJlZS5yZW5kZXIodGhpcy5fdHJzKHthZ2dyZWdhdGVzOmUuYWdncmVnYXRlcyxkYXRhOm4sdmlzaWJsZTohMCxsZXZlbDowfSkpKTp0aGlzLl9zaG93U3RhdHVzKGtlbmRvLmh0bWxFbmNvZGUodC5ub1Jvd3MpKX0sX3RoczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbyxhPXRoaXMuY29sdW1ucyxzPVtdO2ZvcihyPTAsbz1hLmxlbmd0aDtvPnI7cisrKWU9YVtyXSxuPVtdLGk9W08uaGVhZGVyXSx0PWUuaGVhZGVyVGVtcGxhdGU/ZS5oZWFkZXJUZW1wbGF0ZSh7fSk6ZS50aXRsZXx8ZS5maWVsZHx8XCJcIixuLnB1c2goZS5zb3J0YWJsZT9jKFwiYVwiLHtocmVmOlwiI1wiLGNsYXNzTmFtZTpPLmxpbmt9LFtkKHQpXSk6ZS5oZWFkZXJUZW1wbGF0ZT91KHQpOmQodCkpLHMucHVzaChjKFwidGhcIix7XCJkYXRhLWZpZWxkXCI6ZS5maWVsZCxcImRhdGEtdGl0bGVcIjplLnRpdGxlLGNsYXNzTmFtZTppLmpvaW4oXCIgXCIpLHJvbGU6XCJjb2x1bW5oZWFkZXJcIn0sbikpO3JldHVybiBzfSxfY29sZ3JvdXA6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzLmNvbHVtbnMscj1bXTtmb3IodD0wLG49aS5sZW5ndGg7bj50O3QrKylyLnB1c2goXCI8Y29sIFwiKSxlPWlbdF0ud2lkdGgsZSYmMCE9PXBhcnNlSW50KGUsMTApJiYoci5wdXNoKFwic3R5bGU9J3dpZHRoOlwiKSxyLnB1c2goXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplK1wicHhcIiksci5wdXNoKFwiJ1wiKSksci5wdXNoKFwiLz5cIik7cmV0dXJuXCI8Y29sZ3JvdXA+XCIrci5qb2luKFwiXCIpK1wiPC9jb2xncm91cD5cIn0sX3RyczpmdW5jdGlvbihlKXt2YXIgbixpLHIsbyxhLHMsbCxjLGQ9W10sdT1lLmxldmVsLGg9ZS5kYXRhLHA9dGhpcy5kYXRhU291cmNlLGY9cC5hZ2dyZWdhdGVzKCl8fHt9O2ZvcihzPTAsbD1oLmxlbmd0aDtsPnM7cysrKXI9W10sbj1oW3NdLGE9bi5sb2FkZWQoKSYmcC5jaGlsZE5vZGVzKG4pLG89YSYmYS5sZW5ndGgsaT17XCJkYXRhLXVpZFwiOm4udWlkLHJvbGU6XCJyb3dcIn0sbyYmKGlbXCJhcmlhLWV4cGFuZGVkXCJdPSEhbi5leHBhbmRlZCksdGhpcy5fYWJzb2x1dGVJbmRleCUyIT09MCYmci5wdXNoKE8uYWx0KSxlLnZpc2libGU/dGhpcy5fYWJzb2x1dGVJbmRleCsrOmkuc3R5bGU9e2Rpc3BsYXk6XCJub25lXCJ9LG8mJnIucHVzaChPLmdyb3VwKSxuLl9lZGl0JiZyLnB1c2goXCJrLWdyaWQtZWRpdC1yb3dcIiksaS5jbGFzc05hbWU9ci5qb2luKFwiIFwiKXx8dCxkLnB1c2godGhpcy5fdGRzKHttb2RlbDpuLGF0dHI6aSxsZXZlbDp1fSxfKHRoaXMuX3RkLHRoaXMpKSksbyYmKGQ9ZC5jb25jYXQodGhpcy5fdHJzKHtwYXJlbnRJZDpuLmlkLGFnZ3JlZ2F0ZXM6Zix2aXNpYmxlOmUudmlzaWJsZSYmISFuLmV4cGFuZGVkLGRhdGE6YSxsZXZlbDp1KzF9KSkpO3JldHVybiB0aGlzLl9oYXNGb290ZXJUZW1wbGF0ZSgpJiYoYz1lLnBhcmVudElkfHxudWxsLGk9e2NsYXNzTmFtZTpPLmZvb3RlclRlbXBsYXRlLFwiZGF0YS1wYXJlbnRJZFwiOmN9LGUudmlzaWJsZXx8KGkuc3R5bGU9e2Rpc3BsYXk6XCJub25lXCJ9KSxkLnB1c2godGhpcy5fdGRzKHttb2RlbDpmW2NdLGF0dHI6aSxsZXZlbDp1fSx0aGlzLl9mb290ZXJUZCkpKSxkfSxfZm9vdGVyVGQ6ZnVuY3Rpb24odCl7dmFyIGk9W10scj10LmNvbHVtbixvPXQuY29sdW1uLmZvb3RlclRlbXBsYXRlfHxlLm5vb3AsYT10Lm1vZGVsW3IuZmllbGRdfHx7fSxsPXtyb2xlOlwiZ3JpZGNlbGxcIn07cmV0dXJuIHIuZXhwYW5kYWJsZSYmKGk9aS5jb25jYXQobih7bGV2ZWw6dC5sZXZlbCsxLGNsYXNzTmFtZTpPLmljb25QbGFjZUhvbGRlcn0pKSksci5hdHRyaWJ1dGVzJiZzKGwsci5hdHRyaWJ1dGVzKSxpLnB1c2goZChvKGEpfHxcIlwiKSksYyhcInRkXCIsbCxpKX0sX2hhc0Zvb3RlclRlbXBsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuISF3KHRoaXMuY29sdW1ucyxmdW5jdGlvbihlKXtyZXR1cm4gZS5mb290ZXJUZW1wbGF0ZX0pLmxlbmd0aH0sX3RkczpmdW5jdGlvbihlLHQpe3ZhciBuLGkscixvPVtdLGE9dGhpcy5jb2x1bW5zO2ZvcihpPTAscj1hLmxlbmd0aDtyPmk7aSsrKW49YVtpXSxvLnB1c2godCh7bW9kZWw6ZS5tb2RlbCxjb2x1bW46bixsZXZlbDplLmxldmVsfSkpO3JldHVybiBjKFwidHJcIixlLmF0dHIsbyl9LF90ZDpmdW5jdGlvbihlKXt2YXIgdCxpPVtdLHI9ZS5tb2RlbCxvPWUuY29sdW1uLGE9e3JvbGU6XCJncmlkY2VsbFwifTtyZXR1cm4gci5fZWRpdCYmby5maWVsZCYmci5lZGl0YWJsZShvLmZpZWxkKT9hW2tlbmRvLmF0dHIoXCJjb250YWluZXItZm9yXCIpXT1vLmZpZWxkOihvLmV4cGFuZGFibGUmJihpPW4oe2xldmVsOmUubGV2ZWwsY2xhc3NOYW1lOk8uaWNvblBsYWNlSG9sZGVyfSksdD1bTy5pY29uXSx0LnB1c2goci5oYXNDaGlsZHJlbj9yLmV4cGFuZGVkP08uaWNvbkNvbGxhcHNlOk8uaWNvbkV4cGFuZDpPLmljb25IaWRkZW4pLHIuX2Vycm9yP3QucHVzaChPLnJlZnJlc2gpOiFyLmxvYWRlZCgpJiZyLmV4cGFuZGVkJiZ0LnB1c2goTy5sb2FkaW5nKSxpLnB1c2goYyhcInNwYW5cIix7Y2xhc3NOYW1lOnQuam9pbihcIiBcIil9KSkpLG8uYXR0cmlidXRlcyYmcyhhLG8uYXR0cmlidXRlcyksby5jb21tYW5kP2k9dGhpcy5fYnVpbGRDb21tYW5kcyhyLl9lZGl0P1tcInVwZGF0ZVwiLFwiY2FuY2VsZWRpdFwiXTpvLmNvbW1hbmQpOmkucHVzaCh0aGlzLl9jZWxsQ29udGVudChvLHIpKSksYyhcInRkXCIsYSxpKX0sX2NlbGxDb250ZW50OmZ1bmN0aW9uKGUsbil7dmFyIGk7cmV0dXJuIGUudGVtcGxhdGU/aT1lLnRlbXBsYXRlKG4pOmUuZmllbGQmJihpPW4uZ2V0KGUuZmllbGQpLGUuZm9ybWF0JiYoaT1rZW5kby5mb3JtYXQoZS5mb3JtYXQsaSkpKSx0PT09aSYmKGk9XCJcIiksZS50ZW1wbGF0ZXx8IWUuZW5jb2RlZD91KGkpOmQoaSl9LF9idWlsZENvbW1hbmRzOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDtlLmxlbmd0aD50O3QrKyluLnB1c2godGhpcy5fYnV0dG9uKGVbdF0pKTtyZXR1cm4gbn0sX2J1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD0oZS5uYW1lfHxlKS50b0xvd2VyQ2FzZSgpLG49dGhpcy5vcHRpb25zLm1lc3NhZ2VzLmNvbW1hbmRzW3RdLGk9W107cmV0dXJuIGU9cyh7fSxIW3RdLHt0ZXh0Om59LGUpLGUuaW1hZ2VDbGFzcyYmaS5wdXNoKGMoXCJzcGFuXCIse2NsYXNzTmFtZTpbXCJrLWljb25cIixlLmltYWdlQ2xhc3NdLmpvaW4oXCIgXCIpfSkpLGMoXCJidXR0b25cIix7XCJkYXRhLWNvbW1hbmRcIjp0LGNsYXNzTmFtZTpbXCJrLWJ1dHRvbiBrLWJ1dHRvbi1pY29udGV4dFwiLGUuY2xhc3NOYW1lXS5qb2luKFwiIFwiKX0saS5jb25jYXQoW2QoZS50ZXh0fHxlLm5hbWUpXSkpfSxfc29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLG89dGhpcy5jb2x1bW5zLGE9dGhpcy5oZWFkZXIuZmluZChcInRoXCIpLGw9a2VuZG8uYXR0cihcImZpZWxkXCIpLGM9dGhpcy5vcHRpb25zLnNvcnRhYmxlO2lmKGMpZm9yKGk9MCxyPWEubGVuZ3RoO3I+aTtpKyspZT1vW2ldLGUuc29ydGFibGUhPT0hMSYmIWUuY29tbWFuZCYmZS5maWVsZCYmKG49YS5lcShpKSx0PW4uZGF0YShcImtlbmRvQ29sdW1uU29ydGVyXCIpLHQmJnQuZGVzdHJveSgpLG4uYXR0cihsLGUuZmllbGQpLmtlbmRvQ29sdW1uU29ydGVyKHMoe30sYyxlLnNvcnRhYmxlLHtkYXRhU291cmNlOnRoaXMuZGF0YVNvdXJjZX0pKSl9LF9maWx0ZXJhYmxlOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj10aGlzLmhlYWRlci5maW5kKFwidGhcIiksbz10aGlzLm9wdGlvbnMuZmlsdGVyYWJsZTtpZihvKWZvcihpPV8oZnVuY3Rpb24oZSl7dGhpcy50cmlnZ2VyKEwse2ZpZWxkOmUuZmllbGQsY29udGFpbmVyOmUuY29udGFpbmVyfSl9LHRoaXMpLGU9MCx0PXIubGVuZ3RoO3Q+ZTtlKyspbj10aGlzLmNvbHVtbnNbZV0sbi5jb21tYW5kfHxuLmZpbHRlcmFibGU9PT0hMXx8ci5lcShlKS5rZW5kb0ZpbHRlck1lbnUocyghMCx7fSxvLG4uZmlsdGVyYWJsZSx7ZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2UsaW5pdDppfSkpfSxfY2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGspfSxfc2VsZWN0YWJsZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcHRpb25zLnNlbGVjdGFibGU7dCYmKHQ9a2VuZG8udWkuU2VsZWN0YWJsZS5wYXJzZU9wdGlvbnModCksZT1cIj50cjpub3QoLmstZm9vdGVyLXRlbXBsYXRlKVwiLHQuY2VsbCYmKGUrPVwiPnRkXCIpLHRoaXMuc2VsZWN0YWJsZT1uZXcga2VuZG8udWkuU2VsZWN0YWJsZSh0aGlzLmNvbnRlbnQse2ZpbHRlcjplLGFyaWE6ITAsbXVsdGlwbGU6dC5tdWx0aXBsZSxjaGFuZ2U6Xyh0aGlzLl9jaGFuZ2UsdGhpcyl9KSl9LHNlbGVjdDpmdW5jdGlvbihlKXt2YXIgbj10aGlzLnNlbGVjdGFibGU7cmV0dXJuIHQ9PT1lfHxuLm9wdGlvbnMubXVsdGlwbGV8fChuLmNsZWFyKCksZT1lLmZpcnN0KCkpLG4udmFsdWUoZSl9LGNsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3QoKTtlLmxlbmd0aCYmKHRoaXMuc2VsZWN0YWJsZS5jbGVhcigpLHRoaXMudHJpZ2dlcihrKSl9LF9kYXRhU291cmNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZTt0JiYodC51bmJpbmQoayx0aGlzLl9yZWZyZXNoSGFuZGxlciksdC51bmJpbmQoeCx0aGlzLl9lcnJvckhhbmRsZXIpLHQudW5iaW5kKEMsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKSksdGhpcy5fcmVmcmVzaEhhbmRsZXI9Xyh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5fZXJyb3JIYW5kbGVyPV8odGhpcy5fZXJyb3IsdGhpcyksdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyPV8odGhpcy5fcHJvZ3Jlc3MsdGhpcyksdD10aGlzLmRhdGFTb3VyY2U9Vi5jcmVhdGUoZSksdC5iaW5kKGssdGhpcy5fcmVmcmVzaEhhbmRsZXIpLHQuYmluZCh4LHRoaXMuX2Vycm9ySGFuZGxlciksdC5iaW5kKEMsdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyKX0sc2V0RGF0YVNvdXJjZTpmdW5jdGlvbihlKXt0aGlzLl9kYXRhU291cmNlKGUpLHRoaXMub3B0aW9ucy5hdXRvQmluZCYmdGhpcy5kYXRhU291cmNlLmZldGNoKCl9LGRhdGFJdGVtOmZ1bmN0aW9uKHQpe3ZhciBuPWUodCkuY2xvc2VzdChcInRyXCIpLGk9dGhpcy5kYXRhU291cmNlLmdldEJ5VWlkKG4uYXR0cihrZW5kby5hdHRyKFwidWlkXCIpKSk7cmV0dXJuIGl9LGVkaXRSb3c6ZnVuY3Rpb24oZSl7dmFyIHQ7dHlwZW9mIGU9PT1iJiYoZT10aGlzLmNvbnRlbnQuZmluZChlKSksdD10aGlzLmRhdGFJdGVtKGUpLHQmJihcInBvcHVwXCIhPXRoaXMuX2VkaXRNb2RlKCkmJih0Ll9lZGl0PSEwKSx0aGlzLl9jYW5jZWxFZGl0b3IoKSx0aGlzLl9yZW5kZXIoKSx0aGlzLl9jcmVhdGVFZGl0b3IodCksdGhpcy50cmlnZ2VyKEUse2NvbnRhaW5lcjp0aGlzLmVkaXRvci5lbGVtZW50LG1vZGVsOnR9KSl9LF9jYW5jZWxFZGl0OmZ1bmN0aW9uKGUpe2U9cyhlLHtjb250YWluZXI6dGhpcy5lZGl0b3Iud3JhcHBlcixtb2RlbDp0aGlzLmVkaXRvci5tb2RlbH0pLHRoaXMudHJpZ2dlcihCLGUpfHx0aGlzLmNhbmNlbFJvdygpfSxjYW5jZWxSb3c6ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxFZGl0b3IoKSx0aGlzLl9yZW5kZXIoKX0sc2F2ZVJvdzpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3I7dCYmKGU9e21vZGVsOnQubW9kZWwsY29udGFpbmVyOnQuZWxlbWVudH0sdC5lbmQoKSYmIXRoaXMudHJpZ2dlcihNLGUpJiZ0aGlzLmRhdGFTb3VyY2Uuc3luYygpKX0sYWRkUm93OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMuZWRpdG9yLGk9MCxyPXt9O2lmKCFufHxuLmVuZCgpKXJldHVybiBlPyhlIGluc3RhbmNlb2YgTnx8KGU9dGhpcy5kYXRhSXRlbShlKSksci5wYXJlbnRJZD1lLmlkLGk9dGhpcy5kYXRhU291cmNlLmluZGV4T2YoZSkrMSxlLnNldChcImV4cGFuZGVkXCIsITApLHRoaXMuZGF0YVNvdXJjZS5sb2FkKGUpLnRoZW4oXyh0aGlzLl9pbnNlcnRBdCx0aGlzLHIsaSkpLHQpOih0aGlzLl9pbnNlcnRBdChyLGkpLHQpfSxfaW5zZXJ0QXQ6ZnVuY3Rpb24oZSx0KXtlPXRoaXMuZGF0YVNvdXJjZS5pbnNlcnQodCxlKTt2YXIgbj10aGlzLmNvbnRlbnQuZmluZChcIltcIitrZW5kby5hdHRyKFwidWlkXCIpK1wiPVwiK2UudWlkK1wiXVwiKTt0aGlzLmVkaXRSb3cobil9LHJlbW92ZVJvdzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFJdGVtKGUpLG49e21vZGVsOnQscm93OmV9O3QmJiF0aGlzLnRyaWdnZXIoeixuKSYmKHRoaXMuZGF0YVNvdXJjZS5yZW1vdmUodCksdGhpcy5kYXRhU291cmNlLnN5bmMoKSl9LF9jYW5jZWxFZGl0b3I6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuZWRpdG9yO3QmJihlPXQubW9kZWwsdGhpcy5fZGVzdHJveUVkaXRvcigpLHRoaXMuZGF0YVNvdXJjZS5jYW5jZWxDaGFuZ2VzKGUpLGUuX2VkaXQ9ITEpfSxfZGVzdHJveUVkaXRvcjpmdW5jdGlvbigpe3RoaXMuZWRpdG9yJiYodGhpcy5lZGl0b3IuY2xvc2UoKSx0aGlzLmVkaXRvcj1udWxsKX0sX2NyZWF0ZUVkaXRvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRlbnQuZmluZChcIltcIitrZW5kby5hdHRyKFwidWlkXCIpK1wiPVwiK2UudWlkK1wiXVwiKSxuPXRoaXMuX2VkaXRNb2RlKCksbz17Y29sdW1uczp0aGlzLmNvbHVtbnMsbW9kZWw6ZSx0YXJnZXQ6dGhpcyxjbGVhckNvbnRhaW5lcjohMSx0ZW1wbGF0ZTp0aGlzLm9wdGlvbnMuZWRpdGFibGUudGVtcGxhdGV9O1wiaW5saW5lXCI9PW4/dGhpcy5lZGl0b3I9bmV3IGkodCxvKToocyhvLHt3aW5kb3c6dGhpcy5vcHRpb25zLmVkaXRhYmxlLndpbmRvdyxjb21tYW5kUmVuZGVyZXI6XyhmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWlsZENvbW1hbmRzKFtcInVwZGF0ZVwiLFwiY2FuY2VsZWRpdFwiXSl9LHRoaXMpLGZpZWxkUmVuZGVyZXI6dGhpcy5fY2VsbENvbnRlbnQsc2F2ZTpfKHRoaXMuc2F2ZVJvdyx0aGlzKSxjYW5jZWw6Xyh0aGlzLl9jYW5jZWxFZGl0LHRoaXMpLGFwcGVuZFRvOnRoaXMud3JhcHBlcn0pLHRoaXMuZWRpdG9yPW5ldyByKHQsbykpfSxfZWRpdE1vZGU6ZnVuY3Rpb24oKXt2YXIgZT1cImlubGluZVwiLHQ9dGhpcy5vcHRpb25zLmVkaXRhYmxlO3JldHVybiB0IT09ITAmJihlPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5tb2RlfHxlKSxlLnRvTG93ZXJDYXNlKCl9fSksa2VuZG8uRXhjZWxNaXhpbiYma2VuZG8uRXhjZWxNaXhpbi5leHRlbmQoby5wcm90b3R5cGUpLGtlbmRvLlBERk1peGluJiZrZW5kby5QREZNaXhpbi5leHRlbmQoby5wcm90b3R5cGUpLHMoITAsa2VuZG8uZGF0YSx7VHJlZUxpc3REYXRhU291cmNlOlYsVHJlZUxpc3RNb2RlbDpOfSkscyghMCxrZW5kby51aSx7VHJlZUxpc3Q6b30pLGgucGx1Z2luKG8pfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2Zvcih2YXIgdCxuPTAsaT1lLmxlbmd0aDtpPm47bisrKWlmKDI9PWVbbl0udHlwZSl7dD0hMDticmVha310JiZlLnNwbGljZShuKzEsMCx7Y2FwdGlvbjpcIktQSXNcIixkZWZhdWx0SGllcmFyY2h5OlwiW0tQSXNdXCIsbmFtZTpcIktQSXNcIix1bmlxdWVOYW1lOlwiW0tQSXNdXCJ9KX1mdW5jdGlvbiBuKGUpe3JldHVybntuYW1lOmUudW5pcXVlTmFtZSx0eXBlOmUudHlwZX19ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO24+dDt0KyspZVt0XS51bmlxdWVOYW1lPWVbdF0ubmFtZSxlW3RdLnR5cGU9XCJrcGlcIjtyZXR1cm4gZX1mdW5jdGlvbiByKHQpe3ZhciBuPWUodCkuY2xvc2VzdChcIi5rLXBpdm90LXNldHRpbmdcIik7cmV0dXJuIG4ubGVuZ3RoP24uZGF0YShcImtlbmRvUGl2b3RTZXR0aW5nVGFyZ2V0XCIpOm51bGx9ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJue2hpZXJhcmNoeVVuaXF1ZU5hbWU6ZSx1bmlxdWVOYW1lOnQsY2FwdGlvbjp0LG1lYXN1cmU6dCxuYW1lOnQsdHlwZTpufX1mdW5jdGlvbiBhKGUpe3ZhciB0PWUubmFtZTtyZXR1cm5bbyh0LGUudmFsdWUsXCJ2YWx1ZVwiKSxvKHQsZS5nb2FsLFwiZ29hbFwiKSxvKHQsZS5zdGF0dXMsXCJzdGF0dXNcIiksbyh0LGUudHJlbmQsXCJ0cmVuZFwiKV19dmFyIHM9d2luZG93LmtlbmRvLGw9cy51aSxjPWwuV2lkZ2V0LGQ9XCIua2VuZG9QaXZvdENvbmZpZ3VyYXRvclwiLHU9XCJtb3VzZWVudGVyXCIrZCtcIiBtb3VzZWxlYXZlXCIrZCxoPXMudGVtcGxhdGUoJzxwIGNsYXNzPVwiay1yZXNldFwiPjxzcGFuIGNsYXNzPVwiay1pY29uICM9aWNvbiNcIj48L3NwYW4+JHtuYW1lfTwvcD48ZGl2IGNsYXNzPVwiay1saXN0LWNvbnRhaW5lciBrLXJlc2V0XCIvPicpLHA9Yy5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oZSx0KXtjLmZuLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwiay13aWRnZXQgay1maWVsZHNlbGVjdG9yIGstYWx0IGstZWRpdC1mb3JtLWNvbnRhaW5lclwiKSx0aGlzLl9kYXRhU291cmNlKCksdGhpcy5fbGF5b3V0KCksdGhpcy5yZWZyZXNoKCkscy5ub3RpZnkodGhpcyl9LGV2ZW50czpbXSxvcHRpb25zOntuYW1lOlwiUGl2b3RDb25maWd1cmF0b3JcIixmaWx0ZXJhYmxlOiExLHNvcnRhYmxlOiExLG1lc3NhZ2VzOnttZWFzdXJlczpcIkRyb3AgRGF0YSBGaWVsZHMgSGVyZVwiLGNvbHVtbnM6XCJEcm9wIENvbHVtbiBGaWVsZHMgSGVyZVwiLHJvd3M6XCJEcm9wIFJvd3MgRmllbGRzIEhlcmVcIixtZWFzdXJlc0xhYmVsOlwiTWVhc3VyZXNcIixjb2x1bW5zTGFiZWw6XCJDb2x1bW5zXCIscm93c0xhYmVsOlwiUm93c1wiLGZpZWxkc0xhYmVsOlwiRmllbGRzXCJ9fSxfZGF0YVNvdXJjZTpmdW5jdGlvbigpe3RoaXMuZGF0YVNvdXJjZSYmdGhpcy5fcmVmcmVzaEhhbmRsZXI/dGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKTp0aGlzLl9yZWZyZXNoSGFuZGxlcj1lLnByb3h5KHRoaXMucmVmcmVzaCx0aGlzKSx0aGlzLmRhdGFTb3VyY2U9cy5kYXRhLlBpdm90RGF0YVNvdXJjZS5jcmVhdGUodGhpcy5vcHRpb25zLmRhdGFTb3VyY2UpLHRoaXMuZGF0YVNvdXJjZS5iaW5kKFwiY2hhbmdlXCIsdGhpcy5fcmVmcmVzaEhhbmRsZXIpfSxzZXREYXRhU291cmNlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kYXRhU291cmNlPWUsdGhpcy5fZGF0YVNvdXJjZSgpLHRoaXMubWVhc3VyZXMmJnRoaXMubWVhc3VyZXMuc2V0RGF0YVNvdXJjZShlKSx0aGlzLnJvd3MmJnRoaXMucm93cy5zZXREYXRhU291cmNlKGUpLHRoaXMuY29sdW1ucyYmdGhpcy5jb2x1bW5zLnNldERhdGFTb3VyY2UoZSksdGhpcy5yZWZyZXNoKCl9LF90cmVlVmlld0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgbj10aGlzO3JldHVybiBzLmRhdGEuSGllcmFyY2hpY2FsRGF0YVNvdXJjZS5jcmVhdGUoe3NjaGVtYTp7bW9kZWw6e2lkOlwidW5pcXVlTmFtZVwiLGhhc0NoaWxkcmVuOmZ1bmN0aW9uKGUpe3JldHVybiEoXCJoaWVyYXJjaHlVbmlxdWVOYW1lXCJpbiBlfHxcImFnZ3JlZ2F0b3JcImluIGUpfX19LHRyYW5zcG9ydDp7cmVhZDpmdW5jdGlvbihyKXt2YXIgbyxzLGw7ZS5pc0VtcHR5T2JqZWN0KHIuZGF0YSk/KG89bi5kYXRhU291cmNlLnNjaGVtYURpbWVuc2lvbnMoKSxvLmRvbmUoZnVuY3Rpb24oZSl7bi5kYXRhU291cmNlLmN1YmVCdWlsZGVyfHx0KGUpLHIuc3VjY2VzcyhlKX0pLmZhaWwoci5lcnJvcikpOihzPW4udHJlZVZpZXcuZGF0YVNvdXJjZS5nZXQoci5kYXRhLnVuaXF1ZU5hbWUpLFwiW0tQSXNdXCI9PT1zLnVuaXF1ZU5hbWU/KGw9ITAsbz1uLmRhdGFTb3VyY2Uuc2NoZW1hS1BJcygpLG8uZG9uZShmdW5jdGlvbihlKXtyLnN1Y2Nlc3MoaShlKSl9KS5mYWlsKHIuZXJyb3IpKTpcImtwaVwiPT1zLnR5cGUmJihsPSEwLHIuc3VjY2VzcyhhKHMpKSksbHx8KG89Mj09cy50eXBlP24uZGF0YVNvdXJjZS5zY2hlbWFNZWFzdXJlcygpOnMuZGltZW5zaW9uVW5pcXVlTmFtZT9uLmRhdGFTb3VyY2Uuc2NoZW1hTGV2ZWxzKHIuZGF0YS51bmlxdWVOYW1lKTpuLmRhdGFTb3VyY2Uuc2NoZW1hSGllcmFyY2hpZXMoci5kYXRhLnVuaXF1ZU5hbWUpLG8uZG9uZShyLnN1Y2Nlc3MpLmZhaWwoci5lcnJvcikpKX19fSl9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZvcm09ZSgnPGRpdiBjbGFzcz1cImstY29sdW1ucyBrLXN0YXRlLWRlZmF1bHQgay1mbG9hdHdyYXBcIi8+JykuYXBwZW5kVG8odGhpcy5lbGVtZW50KSx0aGlzLl9maWVsZHMoKSx0aGlzLl90YXJnZXRzKCl9LF9maWVsZHM6ZnVuY3Rpb24oKXt2YXIgdD1lKCc8ZGl2IGNsYXNzPVwiay1zdGF0ZS1kZWZhdWx0XCI+PHAgY2xhc3M9XCJrLXJlc2V0XCI+PHNwYW4gY2xhc3M9XCJrLWljb24gay1pLWdyb3VwXCI+PC9zcGFuPicrdGhpcy5vcHRpb25zLm1lc3NhZ2VzLmZpZWxkc0xhYmVsK1wiPC9wPjwvZGl2PlwiKS5hcHBlbmRUbyh0aGlzLmZvcm0pLGk9JyMgaWYgKGl0ZW0udHlwZSA9PSAyIHx8IGl0ZW0udW5pcXVlTmFtZSA9PSBcIltLUElzXVwiKSB7ICM8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktIz0gKGl0ZW0udHlwZSA9PSAyID8gXCJzdW1cIiA6IFwia3BpXCIpICNcIj48L3NwYW4+IyB9IGVsc2UgaWYgKGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUgIT09IFwia3BpXCIpIHsgIzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1kaW1lbnNpb25cIj48L3NwYW4+IyB9ICMjOiBpdGVtLm5hbWUgIyc7dGhpcy50cmVlVmlldz1lKFwiPGRpdi8+XCIpLmFwcGVuZFRvKHQpLmtlbmRvVHJlZVZpZXcoe3RlbXBsYXRlOmksZGF0YVRleHRGaWVsZDpcIm5hbWVcIixkcmFnQW5kRHJvcDohMCxhdXRvQmluZDohMSxkYXRhU291cmNlOnRoaXMuX3RyZWVWaWV3RGF0YVNvdXJjZSgpLGRyYWdzdGFydDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRhdGFJdGVtKGUuc291cmNlTm9kZSk7KHQuaGFzQ2hpbGRyZW58fHQuYWdncmVnYXRvcnx8dC5tZWFzdXJlKSYmMiE9dC50eXBlJiZcIltLUElzXVwiIT09dC51bmlxdWVOYW1lfHxlLnByZXZlbnREZWZhdWx0KCl9LGRyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJrLWRlbmllZFwiLG49cihlLmRyb3BUYXJnZXQpO24mJm4udmFsaWRhdGUodGhpcy5kYXRhSXRlbShlLnNvdXJjZU5vZGUpKSYmKHQ9XCJrLWFkZFwiKSxlLnNldFN0YXR1c0NsYXNzKHQpfSxkcm9wOmZ1bmN0aW9uKGUpe3ZhciB0LGksbyxzLGwsYztpZihlLnByZXZlbnREZWZhdWx0KCksdD1yKGUuZHJvcFRhcmdldCksaT10aGlzLmRhdGFJdGVtKGUuc291cmNlTm9kZSksdCYmdC52YWxpZGF0ZShpKSl7aWYoYz1pLmRlZmF1bHRIaWVyYXJjaHl8fGkudW5pcXVlTmFtZSxcImtwaVwiPT09aS50eXBlKWZvcihsPWEoaSkscz1sLmxlbmd0aCxjPVtdLG89MDtzPm87bysrKWMucHVzaChuKGxbb10pKTtlbHNlIGkudHlwZSYmKGM9W24oaSldKTt0LmFkZChjKX19fSkuZGF0YShcImtlbmRvVHJlZVZpZXdcIil9LF9jcmVhdGVUYXJnZXQ6ZnVuY3Rpb24odCxuKXt2YXIgaT0nPGxpIGNsYXNzPVwiay1pdGVtIGstaGVhZGVyXCIgZGF0YS0nK3MubnMrJ25hbWU9XCIke2RhdGEubmFtZX1cIj4ke2RhdGEubmFtZX0nLHI9bi5zb3J0YWJsZSxvPVwiXCI7cmV0dXJuIHImJihvKz1cIiNpZiAoZGF0YS5zb3J0SWNvbikgeyNcIixvKz0nPHNwYW4gY2xhc3M9XCJrLWljb24gJHtkYXRhLnNvcnRJY29ufSBrLXNldHRpbmctc29ydFwiPjwvc3Bhbj4nLG8rPVwiI30jXCIpLChuLmZpbHRlcmFibGV8fHIpJiYobys9JzxzcGFuIGNsYXNzPVwiay1pY29uIGstaS1hcnJvd2hlYWQtcyBrLXNldHRpbmctZmllbGRtZW51XCI+PC9zcGFuPicpLG8rPSc8c3BhbiBjbGFzcz1cImstaWNvbiBrLXNpLWNsb3NlIGstc2V0dGluZy1kZWxldGVcIj48L3NwYW4+JyxpKz0nPHNwYW4gY2xhc3M9XCJrLWZpZWxkLWFjdGlvbnNcIj4nK28rXCI8L3NwYW4+PC9saT5cIixuZXcgcy51aS5QaXZvdFNldHRpbmdUYXJnZXQodCxlLmV4dGVuZCh7ZGF0YVNvdXJjZTp0aGlzLmRhdGFTb3VyY2UsaGludDpmdW5jdGlvbih0KXt2YXIgbj1lKCc8ZGl2IGNsYXNzPVwiay1maWVsZHNlbGVjdG9yXCI+PHVsIGNsYXNzPVwiay1saXN0IGstcmVzZXRcIj48L3VsPjwvZGl2PicpO3JldHVybiBuLmZpbmQoXCIuay1saXN0XCIpLmFwcGVuZCh0LmNsb25lKCkpLG59LHRlbXBsYXRlOmksZW1wdHlUZW1wbGF0ZTonPGxpIGNsYXNzPVwiay1pdGVtIGstZW1wdHlcIj4ke2RhdGF9PC9saT4nfSxuKSl9LF90YXJnZXRzOmZ1bmN0aW9uKCl7dmFyIHQ9ZSgnPGRpdiBjbGFzcz1cImstc3RhdGUtZGVmYXVsdFwiLz4nKS5hcHBlbmRUbyh0aGlzLmZvcm0pLG49ZShoKHtuYW1lOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5jb2x1bW5zTGFiZWwsaWNvbjpcImstaS12YmFyc1wifSkpLmFwcGVuZFRvKHQpLGk9ZSgnPHVsIGNsYXNzPVwiay1waXZvdC1jb25maWd1cmF0b3Itc2V0dGluZ3Mgay1saXN0IGstcmVzZXRcIiAvPicpLmFwcGVuZFRvKG4ubGFzdCgpKSxyPWUoaCh7bmFtZTp0aGlzLm9wdGlvbnMubWVzc2FnZXMucm93c0xhYmVsLGljb246XCJrLWktaGJhcnNcIn0pKS5hcHBlbmRUbyh0KSxvPWUoJzx1bCBjbGFzcz1cImstcGl2b3QtY29uZmlndXJhdG9yLXNldHRpbmdzIGstbGlzdCBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhyLmxhc3QoKSksYT1lKGgoe25hbWU6dGhpcy5vcHRpb25zLm1lc3NhZ2VzLm1lYXN1cmVzTGFiZWwsaWNvbjpcImstaS1zdW1cIn0pKS5hcHBlbmRUbyh0KSxzPWUoJzx1bCBjbGFzcz1cImstcGl2b3QtY29uZmlndXJhdG9yLXNldHRpbmdzIGstbGlzdCBrLXJlc2V0XCIgLz4nKS5hcHBlbmRUbyhhLmxhc3QoKSksbD10aGlzLm9wdGlvbnM7dGhpcy5jb2x1bW5zPXRoaXMuX2NyZWF0ZVRhcmdldChpLHtmaWx0ZXJhYmxlOmwuZmlsdGVyYWJsZSxzb3J0YWJsZTpsLnNvcnRhYmxlLGNvbm5lY3RXaXRoOm8sbWVzc2FnZXM6e2VtcHR5OmwubWVzc2FnZXMuY29sdW1ucyxmaWVsZE1lbnU6bC5tZXNzYWdlcy5maWVsZE1lbnV9fSksdGhpcy5yb3dzPXRoaXMuX2NyZWF0ZVRhcmdldChvLHtmaWx0ZXJhYmxlOmwuZmlsdGVyYWJsZSxzZXR0aW5nOlwicm93c1wiLGNvbm5lY3RXaXRoOmksbWVzc2FnZXM6e2VtcHR5OnRoaXMub3B0aW9ucy5tZXNzYWdlcy5yb3dzLGZpZWxkTWVudTp0aGlzLm9wdGlvbnMubWVzc2FnZXMuZmllbGRNZW51fX0pLHRoaXMubWVhc3VyZXM9dGhpcy5fY3JlYXRlVGFyZ2V0KHMse3NldHRpbmc6XCJtZWFzdXJlc1wiLG1lc3NhZ2VzOntlbXB0eTpsLm1lc3NhZ2VzLm1lYXN1cmVzfX0pLGkuYWRkKG8pLmFkZChzKS5vbih1LFwiLmstaXRlbTpub3QoLmstZW1wdHkpXCIsdGhpcy5fdG9nZ2xlSG92ZXIpfSxfdG9nZ2xlSG92ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKFwiay1zdGF0ZS1ob3ZlclwiLFwibW91c2VlbnRlclwiPT09dC50eXBlKX0sX3Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLmVsZW1lbnQsaT10aGlzLm9wdGlvbnMuaGVpZ2h0O2kmJm4uaXMoXCI6dmlzaWJsZVwiKSYmKG4uaGVpZ2h0KGkpLHQ9bi5jaGlsZHJlbihcIi5rLWNvbHVtbnNcIikuY2hpbGRyZW4oXCJkaXYuay1zdGF0ZS1kZWZhdWx0XCIpLGU9KG4ub3V0ZXJIZWlnaHQoKS1uLmlubmVySGVpZ2h0KCkpLzIsaT1pLSh0Lm91dGVySGVpZ2h0KCEwKS10LmhlaWdodCgpKS1lLHQuaGVpZ2h0KGkpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YVNvdXJjZTsoZS5jdWJlQnVpbGRlcnx8dGhpcy5fY3ViZSE9PWUuY3ViZSgpfHx0aGlzLl9jYXRhbG9nIT09ZS5jYXRhbG9nKCkpJiZ0aGlzLnRyZWVWaWV3LmRhdGFTb3VyY2UuZmV0Y2goKSx0aGlzLl9jYXRhbG9nPXRoaXMuZGF0YVNvdXJjZS5jYXRhbG9nKCksdGhpcy5fY3ViZT10aGlzLmRhdGFTb3VyY2UuY3ViZSgpLHRoaXMuX3Jlc2l6ZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Yy5mbi5kZXN0cm95LmNhbGwodGhpcyksdGhpcy5kYXRhU291cmNlLnVuYmluZChcImNoYW5nZVwiLHRoaXMuX3JlZnJlc2hIYW5kbGVyKSx0aGlzLmZvcm0uZmluZChcIi5rLWxpc3RcIikub2ZmKGQpLHRoaXMucm93cy5kZXN0cm95KCksdGhpcy5jb2x1bW5zLmRlc3Ryb3koKSx0aGlzLm1lYXN1cmVzLmRlc3Ryb3koKSx0aGlzLnRyZWVWaWV3LmRlc3Ryb3koKSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLl9yZWZyZXNoSGFuZGxlcj1udWxsfX0pO2wucGx1Z2luKHApfSh3aW5kb3cua2VuZG8ualF1ZXJ5KSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlKXt2YXIgdD1rO3RyeXtyZXR1cm4gaz1mdW5jdGlvbihlKXtyZXR1cm4gZSgpfSxlKCl9ZmluYWxseXtrPXR9fWZ1bmN0aW9uIHIoZSxpLHIsbyl7aVtyXT10LmNvcHkoZS4kZXZhbChvKSksaVtyXT09PW4mJm8ubWF0Y2goL15cXHcqJC8pJiZDLndhcm4ocitcIiBhdHRyaWJ1dGUgcmVzb2x2ZWQgdG8gdW5kZWZpbmVkLiBNYXliZSB5b3UgbWVhbnQgdG8gdXNlIGEgc3RyaW5nIGxpdGVyYWwgbGlrZTogJ1wiK28rXCInP1wiKX1mdW5jdGlvbiBvKGksbyxzLGwsYyl7ZnVuY3Rpb24gZCgpe3ZhciBuLGQsaCxmLGcsbSx2LF8seTtyZXR1cm4gcy5rUmViaW5kJiYobj1lKGUobylbMF0uY2xvbmVOb2RlKCEwKSkpLGQ9bC5yZXBsYWNlKC9ea2VuZG8vLFwiXCIpLGg9dC5leHRlbmQoe30scy5kZWZhdWx0T3B0aW9ucyxpLiRldmFsKHMua09wdGlvbnN8fHMub3B0aW9ucykpLChmPWUobylbbF0pPyhnPWYud2lkZ2V0LnByb3RvdHlwZS5vcHRpb25zLG09Zi53aWRnZXQucHJvdG90eXBlLmV2ZW50cyxlLmVhY2gocyxmdW5jdGlvbihlLHQpe3ZhciBuLG8sYSxzO1wic291cmNlXCIhPT1lJiZcImtEYXRhU291cmNlXCIhPT1lJiYobj1cImRhdGFcIitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksMD09PWUuaW5kZXhPZihcIm9uXCIpJiYobz1lLnJlcGxhY2UoL15vbi4vLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgyKS50b0xvd2VyQ2FzZSgpfSksbS5pbmRleE9mKG8pPi0xJiYoaFtvXT10KSksZy5oYXNPd25Qcm9wZXJ0eShuKT9yKGksaCxuLHQpOmcuaGFzT3duUHJvcGVydHkoZSkmJiFBW2VdP3IoaSxoLGUsdCk6RFtlXXx8KGE9ZS5tYXRjaCgvXmsoT24pPyhbQS1aXS4qKS8pLGEmJihzPWFbMl0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrYVsyXS5zbGljZSgxKSxhWzFdJiZcImtPbkxhYmVsXCIhPWU/aFtzXT10OihcImtPbkxhYmVsXCI9PWUmJihzPVwib25MYWJlbFwiKSxyKGksaCxzLHQpKSkpKX0pLHY9cy5rRGF0YVNvdXJjZXx8cy5zb3VyY2UsdiYmKGguZGF0YVNvdXJjZT1UKGksbyxkLHYpKSxoLiRhbmd1bGFyPVtpXSxvLmlzKFwic2VsZWN0XCIpJiYhZnVuY3Rpb24odCl7aWYodC5sZW5ndGg+MCl7dmFyIG49ZSh0WzBdKTshL1xcUy8udGVzdChuLnRleHQoKSkmJi9eXFw/Ly50ZXN0KG4udmFsKCkpJiZuLnJlbW92ZSgpfX0ob1swXS5vcHRpb25zKSxfPWYuY2FsbChvLFM9aCkuZGF0YShsKSxhKF8saSxzLGwsYyksaS4kZW1pdChcImtlbmRvV2lkZ2V0Q3JlYXRlZFwiLF8pLHk9dShpLF8pLHMua1JlYmluZCYmcChfLGksbyxuLHMua1JlYmluZCx5KSxfKTood2luZG93LmNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZmluZDogXCIrbCksbnVsbCl9dmFyIGgsZj1zLmtOZ0RlbGF5LGc9aS4kZXZhbChmKTtyZXR1cm4gZiYmIWc/KGg9aS4kd2F0Y2goZixmdW5jdGlvbihlLHQpe2UhPT10JiYoaCgpLG8ucmVtb3ZlQXR0cihzLiRhdHRyLmtOZ0RlbGF5KSxmPW51bGwsayhkKSl9KSxuKTpkKCl9ZnVuY3Rpb24gYShlLHQsbixpLHIpe2lmKG5bcl0pe3ZhciBvPWIobltyXSkuYXNzaWduO2lmKCFvKXRocm93IEVycm9yKHIrXCIgYXR0cmlidXRlIHVzZWQgYnV0IGV4cHJlc3Npb24gaW4gaXQgaXMgbm90IGFzc2lnbmFibGU6IFwiK25baV0pO28odCxlKX19ZnVuY3Rpb24gcyhlKXtyZXR1cm4vY2hlY2tib3h8cmFkaW8vaS50ZXN0KGUuYXR0cihcInR5cGVcIikpP2UucHJvcChcImNoZWNrZWRcIik6ZS52YWwoKX1mdW5jdGlvbiBsKGUpe3JldHVybiBFLnRlc3QoZVswXS50YWdOYW1lKX1mdW5jdGlvbiBjKGUsdCxpLHIsbyl7dmFyIGEsYyxkLHU7ZS52YWx1ZSYmKGE9bChpKT9mdW5jdGlvbigpe3JldHVybiBzKGkpfTpmdW5jdGlvbigpe3JldHVybiBlLnZhbHVlKCl9LHIuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciB0PXIuJHZpZXdWYWx1ZTt0PT09biYmKHQ9ci4kbW9kZWxWYWx1ZSksc2V0VGltZW91dChmdW5jdGlvbigpe2UmJmUudmFsdWUodCl9LDApfSxjPSExLGwoaSkmJmkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2M9ITB9KSxkPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciBuO2N8fChjPSExLGUmJm8mJihuPW8uJHByaXN0aW5lKSxyLiRzZXRWaWV3VmFsdWUoYSgpKSxlJiYoci4kc2V0UHJpc3RpbmUoKSxuJiZvLiRzZXRQcmlzdGluZSgpKSxtKHQpKX19LGUuZmlyc3QoXCJjaGFuZ2VcIixkKCExKSksZS5maXJzdChcImRhdGFCb3VuZFwiLGQoITApKSx1PWEoKSx1IT1yLiR2aWV3VmFsdWUmJihyLiRpc0VtcHR5KHIuJHZpZXdWYWx1ZSk/bnVsbCE9dSYmXCJcIiE9PXUmJnUhPXIuJHZpZXdWYWx1ZSYmci4kc2V0Vmlld1ZhbHVlKHUpOmUudmFsdWUoci4kdmlld1ZhbHVlKSksci4kc2V0UHJpc3RpbmUoKSl9ZnVuY3Rpb24gZChlLHQsaSl7dmFyIHIsbyxhO3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGUudmFsdWU/KEMud2FybihcImstbmctbW9kZWwgc3BlY2lmaWVkIG9uIGEgd2lkZ2V0IHRoYXQgZG9lcyBub3QgaGF2ZSB0aGUgdmFsdWUoKSBtZXRob2Q6IFwiK2Uub3B0aW9ucy5uYW1lKSxuKToocj1iKGkpLG89ci5hc3NpZ24sYT0hMSxlLiRhbmd1bGFyX3NldExvZ2ljVmFsdWUocih0KSksdC4kd2F0Y2goaSxmdW5jdGlvbih0LGkpe3Q9PT1uJiYodD1udWxsKSxhfHx0IT09aSYmZS4kYW5ndWxhcl9zZXRMb2dpY1ZhbHVlKHQpfSksZS5maXJzdChcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YT0hMCx0LiRhcHBseShmdW5jdGlvbigpe28odCxlLiRhbmd1bGFyX2dldExvZ2ljVmFsdWUoKSl9KSxhPSExfSksbil9ZnVuY3Rpb24gdShlLHQpe3ZhciBuPWUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe24oKSx0JiYodC5lbGVtZW50JiYodD1nKHQuZWxlbWVudCksdCYmdC5kZXN0cm95KCkpLHQ9bnVsbCl9KTtyZXR1cm4gbn1mdW5jdGlvbiBoKHQsbil7ZnVuY3Rpb24gaSgpe2EuZGlzY29ubmVjdCgpfWZ1bmN0aW9uIHIoKXthLm9ic2VydmUoZShuKVswXSx7YXR0cmlidXRlczohMH0pfXZhciBvLGE7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJnQud3JhcHBlciYmKG89W10uc2xpY2UuY2FsbChlKG4pWzBdLmNsYXNzTGlzdCksYT1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihuKXtpKCksdCYmKG4uZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaSxyPWUodC53cmFwcGVyKVswXTtzd2l0Y2gobi5hdHRyaWJ1dGVOYW1lKXtjYXNlXCJjbGFzc1wiOmk9W10uc2xpY2UuY2FsbChuLnRhcmdldC5jbGFzc0xpc3QpLGkuZm9yRWFjaChmdW5jdGlvbihlKXtvLmluZGV4T2YoZSk8MCYmKHIuY2xhc3NMaXN0LmFkZChlKSxrZW5kby51aS5Db21ib0JveCYmdCBpbnN0YW5jZW9mIGtlbmRvLnVpLkNvbWJvQm94JiZ0LmlucHV0WzBdLmNsYXNzTGlzdC5hZGQoZSkpfSksby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kuaW5kZXhPZihlKTwwJiYoci5jbGFzc0xpc3QucmVtb3ZlKGUpLGtlbmRvLnVpLkNvbWJvQm94JiZ0IGluc3RhbmNlb2Yga2VuZG8udWkuQ29tYm9Cb3gmJnQuaW5wdXRbMF0uY2xhc3NMaXN0LnJlbW92ZShlKSl9KSxvPWk7YnJlYWs7Y2FzZVwiZGlzYWJsZWRcIjpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmVuYWJsZSYmdC5lbmFibGUoIWUobi50YXJnZXQpLmF0dHIoXCJkaXNhYmxlZFwiKSk7YnJlYWs7Y2FzZVwicmVhZG9ubHlcIjpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnJlYWRvbmx5JiZ0LnJlYWRvbmx5KCEhZShuLnRhcmdldCkuYXR0cihcInJlYWRvbmx5XCIpKX19KSxyKCkpfSkscigpLHQuZmlyc3QoXCJkZXN0cm95XCIsaSkpfWZ1bmN0aW9uIHAodCxuLGkscixvLGEpe3ZhciBzPW4uJHdhdGNoKG8sZnVuY3Rpb24obyxsKXt2YXIgYyxkLHU7byE9PWwmJihzKCksYz1lKHQud3JhcHBlcilbMF0sZD1lKHQuZWxlbWVudClbMF0sdT1pLmluamVjdG9yKCkuZ2V0KFwiJGNvbXBpbGVcIiksdC5kZXN0cm95KCksYSYmYSgpLHQ9bnVsbCxjJiZkJiYoYy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkLGMpLGUoaSkucmVwbGFjZVdpdGgocikpLHUocikobikpfSwhMCk7bShuKX1mdW5jdGlvbiBmKGUsbil7ZnVuY3Rpb24gaShlLHQpe3kuZGlyZWN0aXZlKGUsW1wiZGlyZWN0aXZlRmFjdG9yeVwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmNyZWF0ZSh0LGUpfV0pfXZhciByLG8sYSxzLGw9bj9cIk1vYmlsZVwiOlwiXCI7bCs9ZS5mbi5vcHRpb25zLm5hbWUscj1sLG89XCJrZW5kb1wiK2wuY2hhckF0KDApK2wuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCksbD1cImtlbmRvXCIrbCxhPWwucmVwbGFjZSgvKFtBLVpdKS9nLFwiLSQxXCIpLC0xPT1QLmluZGV4T2YobC5yZXBsYWNlKFwia2VuZG9cIixcIlwiKSkmJihzPWw9PT1vP1tsXTpbbCxvXSx0LmZvckVhY2gocyxmdW5jdGlvbihlKXt5LmRpcmVjdGl2ZShlLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAsdGVtcGxhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9TVtyXXx8XCJkaXZcIjtyZXR1cm5cIjxcIit0K1wiIFwiK2ErXCI+XCIrZS5odG1sKCkrXCI8L1wiK3QrXCI+XCJ9fX0pfSkpLEkuaW5kZXhPZihsLnJlcGxhY2UoXCJrZW5kb1wiLFwiXCIpKT4tMXx8KGkobCxsKSxvIT1sJiZpKG8sbCkpfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQ9ZSh0KSxrZW5kby53aWRnZXRJbnN0YW5jZSh0LGtlbmRvLnVpKXx8a2VuZG8ud2lkZ2V0SW5zdGFuY2UodCxrZW5kby5tb2JpbGUudWkpfHxrZW5kby53aWRnZXRJbnN0YW5jZSh0LGtlbmRvLmRhdGF2aXoudWkpfWZ1bmN0aW9uIG0oZSx0KXt2YXIgbj1lLiRyb290fHxlLGk9L15cXCQoZGlnZXN0fGFwcGx5KSQvLnRlc3Qobi4kJHBoYXNlKTt0P2k/dCgpOm4uJGFwcGx5KHQpOml8fG4uJGRpZ2VzdCgpfWZ1bmN0aW9uIHYodCxuKXt0LiRkZXN0cm95KCksbiYmZShuKS5yZW1vdmVEYXRhKFwiJHNjb3BlXCIpLnJlbW92ZURhdGEoXCIkaXNvbGF0ZVNjb3BlXCIpLnJlbW92ZURhdGEoXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiKS5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpfWZ1bmN0aW9uIF8obixpLHIpe3ZhciBvLGEscztpZihlLmlzQXJyYXkobikpcmV0dXJuIHQuZm9yRWFjaChuLGZ1bmN0aW9uKGUpe18oZSxpLHIpfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pe2ZvcihvPW4uc3BsaXQoXCIuXCIpLGE9a2VuZG87YSYmby5sZW5ndGg+MDspYT1hW28uc2hpZnQoKV07aWYoIWEpcmV0dXJuIHoucHVzaChbbixpLHJdKSwhMTtuPWEucHJvdG90eXBlfXJldHVybiBzPW5baV0sbltpXT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7cmV0dXJuIHIuYXBwbHkoe3NlbGY6ZSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuYXBwbHkoZSxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzOnQpfX0sdCl9LCEwfXZhciB5LHcsYixrLHgsQyxTLFQsRCxBLEUsTSxQLEkseixGO3QmJih5PXQubW9kdWxlKFwia2VuZG8uZGlyZWN0aXZlc1wiLFtdKSx3PXQuaW5qZWN0b3IoW1wibmdcIl0pLGI9dy5nZXQoXCIkcGFyc2VcIiksaz13LmdldChcIiR0aW1lb3V0XCIpLEM9dy5nZXQoXCIkbG9nXCIpLFQ9ZnVuY3Rpb24oKXt2YXIgZT17VHJlZUxpc3Q6XCJUcmVlTGlzdERhdGFTb3VyY2VcIixUcmVlVmlldzpcIkhpZXJhcmNoaWNhbERhdGFTb3VyY2VcIixTY2hlZHVsZXI6XCJTY2hlZHVsZXJEYXRhU291cmNlXCIsUGFuZWxCYXI6XCIkUExBSU5cIixNZW51OlwiJFBMQUlOXCIsQ29udGV4dE1lbnU6XCIkUExBSU5cIn0sdD1mdW5jdGlvbihlLHQpe3JldHVyblwiJFBMQUlOXCI9PXQ/ZTprZW5kby5kYXRhW3RdLmNyZWF0ZShlKX07cmV0dXJuIGZ1bmN0aW9uKG4saSxyLG8pe3ZhciBhPWVbcl18fFwiRGF0YVNvdXJjZVwiLHM9dChuLiRldmFsKG8pLGEpO3JldHVybiBuLiR3YXRjaChvLGZ1bmN0aW9uKGUsbil7dmFyIHIsbztlIT09biYmKHI9dChlLGEpLG89ZyhpKSxvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLnNldERhdGFTb3VyY2UmJm8uc2V0RGF0YVNvdXJjZShyKSl9KSxzfX0oKSxEPXtrRGF0YVNvdXJjZTohMCxrT3B0aW9uczohMCxrUmViaW5kOiEwLGtOZ01vZGVsOiEwLGtOZ0RlbGF5OiEwfSxBPXtuYW1lOiEwLHRpdGxlOiEwLHN0eWxlOiEwfSxFPS9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kseS5mYWN0b3J5KFwiZGlyZWN0aXZlRmFjdG9yeVwiLFtcIiRjb21waWxlXCIsZnVuY3Rpb24odCl7dmFyIG4saT0wLHI9ITE7cmV0dXJuIHg9dCxuPWZ1bmN0aW9uKHQsbil7cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixyZXF1aXJlOltcIj9uZ01vZGVsXCIsXCJeP2Zvcm1cIl0sc2NvcGU6ITEsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihlLHQpe3RoaXMudGVtcGxhdGU9ZnVuY3Rpb24oZSxuKXt0W2VdPWtlbmRvLnN0cmluZ2lmeShuKX19XSxsaW5rOmZ1bmN0aW9uKGEscyxsLHUpe3ZhciBwPXVbMF0sZj11WzFdLGc9ZShzKSxtPXQucmVwbGFjZSgvKFtBLVpdKS9nLFwiLSQxXCIpLHY9XCJoaWRkZW5cIiE9PWcuY3NzKFwidmlzaWJpbGl0eVwiKTtnLmF0dHIobSxnLmF0dHIoXCJkYXRhLVwiK20pKSxnWzBdLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtXCIrbSksdiYmZy5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksKytpLGsoZnVuY3Rpb24oKXt2JiZnLmNzcyhcInZpc2liaWxpdHlcIixcIlwiKTt2YXIgdT1vKGEscyxsLHQsbik7dSYmKHAmJmModSxhLHMscCxmKSxsLmtOZ01vZGVsJiZkKHUsYSxsLmtOZ01vZGVsKSxoKHUscyksLS1pLDA9PT1pJiYocnx8KHI9ITAsYS4kZW1pdChcImtlbmRvUmVuZGVyZWRcIiksZShcImZvcm1cIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuY29udHJvbGxlcihcImZvcm1cIik7dCYmdC4kc2V0UHJpc3RpbmUoKX0pKSkpfSl9fX0se2NyZWF0ZTpufX1dKSxNPXtFZGl0b3I6XCJ0ZXh0YXJlYVwiLE51bWVyaWNUZXh0Qm94OlwiaW5wdXRcIixEYXRlUGlja2VyOlwiaW5wdXRcIixEYXRlVGltZVBpY2tlcjpcImlucHV0XCIsVGltZVBpY2tlcjpcImlucHV0XCIsQXV0b0NvbXBsZXRlOlwiaW5wdXRcIixDb2xvclBpY2tlcjpcImlucHV0XCIsTWFza2VkVGV4dEJveDpcImlucHV0XCIsTXVsdGlTZWxlY3Q6XCJpbnB1dFwiLFVwbG9hZDpcImlucHV0XCIsVmFsaWRhdG9yOlwiZm9ybVwiLEJ1dHRvbjpcImJ1dHRvblwiLE1vYmlsZUJ1dHRvbjpcImFcIixNb2JpbGVCYWNrQnV0dG9uOlwiYVwiLE1vYmlsZURldGFpbEJ1dHRvbjpcImFcIixMaXN0VmlldzpcInVsXCIsTW9iaWxlTGlzdFZpZXc6XCJ1bFwiLFRyZWVWaWV3OlwidWxcIixNZW51OlwidWxcIixDb250ZXh0TWVudTpcInVsXCIsQWN0aW9uU2hlZXQ6XCJ1bFwifSxQPVtcIk1vYmlsZVZpZXdcIixcIk1vYmlsZUxheW91dFwiLFwiTW9iaWxlU3BsaXRWaWV3XCIsXCJNb2JpbGVQYW5lXCIsXCJNb2JpbGVNb2RhbFZpZXdcIl0sST1bXCJNb2JpbGVBcHBsaWNhdGlvblwiLFwiTW9iaWxlVmlld1wiLFwiTW9iaWxlTW9kYWxWaWV3XCIsXCJNb2JpbGVMYXlvdXRcIixcIk1vYmlsZUFjdGlvblNoZWV0XCIsXCJNb2JpbGVEcmF3ZXJcIixcIk1vYmlsZVNwbGl0Vmlld1wiLFwiTW9iaWxlUGFuZVwiLFwiTW9iaWxlU2Nyb2xsVmlld1wiLFwiTW9iaWxlUG9wT3ZlclwiXSx0LmZvckVhY2goW1wiTW9iaWxlTmF2QmFyXCIsXCJNb2JpbGVCdXR0b25cIixcIk1vYmlsZUJhY2tCdXR0b25cIixcIk1vYmlsZURldGFpbEJ1dHRvblwiLFwiTW9iaWxlVGFiU3RyaXBcIixcIk1vYmlsZVNjcm9sbFZpZXdcIl0sZnVuY3Rpb24oZSl7SS5wdXNoKGUpLGU9XCJrZW5kb1wiK2UseS5kaXJlY3RpdmUoZSxmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixsaW5rOmZ1bmN0aW9uKHQsbixpKXtvKHQsbixpLGUsZSl9fX0pfSksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBmdW5jdGlvbihuKXt0LmZvckVhY2gobixmdW5jdGlvbih0KXt0LmZuJiZ0LmZuLm9wdGlvbnMmJnQuZm4ub3B0aW9ucy5uYW1lJiYvXltBLVpdLy50ZXN0KHQuZm4ub3B0aW9ucy5uYW1lKSYmZih0LGUpfSl9fXQuZm9yRWFjaChba2VuZG8udWksa2VuZG8uZGF0YXZpeiYma2VuZG8uZGF0YXZpei51aV0sZSghMSkpLHQuZm9yRWFjaChba2VuZG8ubW9iaWxlJiZrZW5kby5tb2JpbGUudWldLGUoITApKX0oKSx6PVtdLF8oa2VuZG8udWksXCJwbHVnaW5cIixmdW5jdGlvbih0LG4saSl7dGhpcy5uZXh0KCksej1lLmdyZXAoeixmdW5jdGlvbihlKXtyZXR1cm4hXy5hcHBseShudWxsLGUpfSksZih0LFwiTW9iaWxlXCI9PWkpfSksXyhbXCJ1aS5XaWRnZXRcIixcIm1vYmlsZS51aS5XaWRnZXRcIl0sXCJhbmd1bGFyXCIsZnVuY3Rpb24ocixvKXt2YXIgYSxzPXRoaXMuc2VsZjtyZXR1cm5cImluaXRcIj09cj8oIW8mJlMmJihvPVMpLFM9bnVsbCxvJiZvLiRhbmd1bGFyJiYocy4kYW5ndWxhcl9zY29wZT1vLiRhbmd1bGFyWzBdLHMuJGFuZ3VsYXJfaW5pdChzLmVsZW1lbnQsbykpLG4pOihhPXMuJGFuZ3VsYXJfc2NvcGUsYSYmaShmdW5jdGlvbigpe3ZhciBpLGwsYz1vKCksZD1jLmVsZW1lbnRzLHU9Yy5kYXRhO2lmKGQubGVuZ3RoPjApc3dpdGNoKHIpe2Nhc2VcImNsZWFudXBcIjp0LmZvckVhY2goZCxmdW5jdGlvbihlKXt2YXIgbj10LmVsZW1lbnQoZSkuc2NvcGUoKTtuJiZuIT09YSYmbi4kJGtlbmRvU2NvcGUmJnYobixlKX0pO2JyZWFrO2Nhc2VcImNvbXBpbGVcIjppPXMuZWxlbWVudC5pbmplY3RvcigpLGw9aT9pLmdldChcIiRjb21waWxlXCIpOngsdC5mb3JFYWNoKGQsZnVuY3Rpb24oaSxyKXt2YXIgbyxzO2Muc2NvcGVGcm9tP289dC5lbGVtZW50KGMuc2NvcGVGcm9tKS5zY29wZSgpOihzPXUmJnVbcl0scyE9PW4mJihvPWUuZXh0ZW5kKGEuJG5ldygpLHMpLG8uJCRrZW5kb1Njb3BlPSEwKSksbChpKShvfHxhKX0pLG0oYSl9fSksbil9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9nZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxmLnZhbHVlKCl9KSxfKFwidWkuV2lkZ2V0XCIsXCIkYW5ndWxhcl9zZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24oZSl7dGhpcy5zZWxmLnZhbHVlKGUpfSksXyhcInVpLlNlbGVjdFwiLFwiJGFuZ3VsYXJfZ2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxmLmRhdGFJdGVtKCk7cmV0dXJuIGU/dGhpcy5zZWxmLm9wdGlvbnMudmFsdWVQcmltaXRpdmU/ZVt0aGlzLnNlbGYub3B0aW9ucy5kYXRhVmFsdWVGaWVsZF06ZS50b0pTT04oKTpudWxsfSksXyhcInVpLlNlbGVjdFwiLFwiJGFuZ3VsYXJfc2V0TG9naWNWYWx1ZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZixuPXQub3B0aW9ucyxpPW4uZGF0YVZhbHVlRmllbGQ7aSYmIW4udmFsdWVQcmltaXRpdmUmJihlPW51bGwhPWU/ZVtuLmRhdGFWYWx1ZUZpZWxkfHxuLmRhdGFUZXh0RmllbGRdOm51bGwpLHQudmFsdWUoZSl9KSxfKFwidWkuTXVsdGlTZWxlY3RcIixcIiRhbmd1bGFyX2dldExvZ2ljVmFsdWVcIixmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2VsZi5kYXRhSXRlbXMoKSxuPXRoaXMuc2VsZi5vcHRpb25zLmRhdGFWYWx1ZUZpZWxkO3JldHVybiBuJiZ0aGlzLnNlbGYub3B0aW9ucy52YWx1ZVByaW1pdGl2ZSYmKHQ9ZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZVtuXX0pKSx0fSksXyhcInVpLk11bHRpU2VsZWN0XCIsXCIkYW5ndWxhcl9zZXRMb2dpY1ZhbHVlXCIsZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9W10pO3ZhciBuPXRoaXMuc2VsZixpPW4ub3B0aW9ucy5kYXRhVmFsdWVGaWVsZDtpJiYhbi5vcHRpb25zLnZhbHVlUHJpbWl0aXZlJiYodD1lLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBlW2ldXG59KSksbi52YWx1ZSh0KX0pLF8oXCJ1aS5BdXRvQ29tcGxldGVcIixcIiRhbmd1bGFyX2dldExvZ2ljVmFsdWVcIixmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz10aGlzLnNlbGYub3B0aW9ucyxhPXRoaXMuc2VsZi52YWx1ZSgpLnNwbGl0KG8uc2VwYXJhdG9yKSxzPW8udmFsdWVQcmltaXRpdmUsbD10aGlzLnNlbGYuZGF0YVNvdXJjZS5kYXRhKCksYz1bXTtmb3IoZT0wLHQ9bC5sZW5ndGg7dD5lO2UrKylmb3Iobj1sW2VdLGk9by5kYXRhVGV4dEZpZWxkP25bby5kYXRhVGV4dEZpZWxkXTpuLHI9MDthLmxlbmd0aD5yO3IrKylpZihpPT09YVtyXSl7Yy5wdXNoKHM/aTpuLnRvSlNPTigpKTticmVha31yZXR1cm4gY30pLF8oXCJ1aS5BdXRvQ29tcGxldGVcIixcIiRhbmd1bGFyX3NldExvZ2ljVmFsdWVcIixmdW5jdGlvbih0KXtudWxsPT10JiYodD1bXSk7dmFyIG49dGhpcy5zZWxmLGk9bi5vcHRpb25zLmRhdGFUZXh0RmllbGQ7aSYmIW4ub3B0aW9ucy52YWx1ZVByaW1pdGl2ZSYmKHQ9ZS5tYXAodCxmdW5jdGlvbihlKXtyZXR1cm4gZVtpXX0pKSxuLnZhbHVlKHQpfSksXyhcInVpLldpZGdldFwiLFwiJGFuZ3VsYXJfaW5pdFwiLGZ1bmN0aW9uKHQsbil7dmFyIGkscixvLGEscz10aGlzLnNlbGY7aWYobiYmIWUuaXNBcnJheShuKSlmb3IoaT1zLiRhbmd1bGFyX3Njb3BlLHI9cy5ldmVudHMubGVuZ3RoOy0tcj49MDspbz1zLmV2ZW50c1tyXSxhPW5bb10sYSYmXCJzdHJpbmdcIj09dHlwZW9mIGEmJihuW29dPXMuJGFuZ3VsYXJfbWFrZUV2ZW50SGFuZGxlcihvLGksYSkpfSksXyhcInVpLldpZGdldFwiLFwiJGFuZ3VsYXJfbWFrZUV2ZW50SGFuZGxlclwiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj1iKG4pLGZ1bmN0aW9uKGUpe20odCxmdW5jdGlvbigpe24odCx7a2VuZG9FdmVudDplfSl9KX19KSxfKFtcInVpLkdyaWRcIixcInVpLkxpc3RWaWV3XCIsXCJ1aS5UcmVlVmlld1wiXSxcIiRhbmd1bGFyX21ha2VFdmVudEhhbmRsZXJcIixmdW5jdGlvbihlLG4saSl7cmV0dXJuXCJjaGFuZ2VcIiE9ZT90aGlzLm5leHQoKTooaT1iKGkpLGZ1bmN0aW9uKGUpe3ZhciByLG8sYSxzLGwsYyxkLHUsaCxwPWUuc2VuZGVyLGY9cC5vcHRpb25zLGc9e2tlbmRvRXZlbnQ6ZX07Zm9yKHQuaXNTdHJpbmcoZi5zZWxlY3RhYmxlKSYmKHI9LTEhPT1mLnNlbGVjdGFibGUuaW5kZXhPZihcImNlbGxcIiksbz0tMSE9PWYuc2VsZWN0YWJsZS5pbmRleE9mKFwibXVsdGlwbGVcIikpLGE9Zy5zZWxlY3RlZD10aGlzLnNlbGVjdCgpLHM9Zy5kYXRhPVtdLGw9Zy5jb2x1bW5zPVtdLGQ9MDthLmxlbmd0aD5kO2QrKyl1PXI/YVtkXS5wYXJlbnROb2RlOmFbZF0saD1wLmRhdGFJdGVtKHUpLHI/KHQuZWxlbWVudC5pbkFycmF5KGgscyk8MCYmcy5wdXNoKGgpLGM9dC5lbGVtZW50KGFbZF0pLmluZGV4KCksdC5lbGVtZW50LmluQXJyYXkoYyxsKTwwJiZsLnB1c2goYykpOnMucHVzaChoKTtvfHwoZy5kYXRhSXRlbT1nLmRhdGE9c1swXSxnLnNlbGVjdGVkPWFbMF0pLG0obixmdW5jdGlvbigpe2kobixnKX0pfSl9KSxfKFwidWkuR3JpZFwiLFwiJGFuZ3VsYXJfaW5pdFwiLGZ1bmN0aW9uKGkscil7aWYodGhpcy5uZXh0KCksci5jb2x1bW5zKXt2YXIgbz1lLmV4dGVuZCh7fSxrZW5kby5UZW1wbGF0ZSxyLnRlbXBsYXRlU2V0dGluZ3MpO3QuZm9yRWFjaChyLmNvbHVtbnMsZnVuY3Rpb24oZSl7IWUuZmllbGR8fGUudGVtcGxhdGV8fGUuZm9ybWF0fHxlLnZhbHVlc3x8ZS5lbmNvZGVkIT09biYmIWUuZW5jb2RlZHx8KGUudGVtcGxhdGU9XCI8c3BhbiBuZy1iaW5kPSdcIitrZW5kby5leHByKGUuZmllbGQsXCJkYXRhSXRlbVwiKStcIic+IzogXCIra2VuZG8uZXhwcihlLmZpZWxkLG8ucGFyYW1OYW1lKStcIiM8L3NwYW4+XCIpfSl9fSksXyhcIm1vYmlsZS51aS5CdXR0b25Hcm91cFwiLFwidmFsdWVcIixmdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlbGY7cmV0dXJuIG51bGwhPWUmJih0LnNlbGVjdCh0LmVsZW1lbnQuY2hpbGRyZW4oXCJsaS5rbS1idXR0b25cIikuZXEoZSkpLHQudHJpZ2dlcihcImNoYW5nZVwiKSx0LnRyaWdnZXIoXCJzZWxlY3RcIix7aW5kZXg6dC5zZWxlY3RlZEluZGV4fSkpLHQuc2VsZWN0ZWRJbmRleH0pLF8oXCJtb2JpbGUudWkuQnV0dG9uR3JvdXBcIixcIl9zZWxlY3RcIixmdW5jdGlvbigpe3RoaXMubmV4dCgpLHRoaXMuc2VsZi50cmlnZ2VyKFwiY2hhbmdlXCIpfSkseS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUFwcGxpY2F0aW9uXCIsZnVuY3Rpb24oKXtyZXR1cm57dGVybWluYWw6ITAsbGluazpmdW5jdGlvbihlLHQsbil7byhlLHQsbixcImtlbmRvTW9iaWxlQXBwbGljYXRpb25cIixcImtlbmRvTW9iaWxlQXBwbGljYXRpb25cIil9fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlVmlld1wiLGZ1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGxpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7bi5kZWZhdWx0T3B0aW9ucz1lLnZpZXdPcHRpb25zLG4uX2luc3RhbmNlPW8oZSx0LG4sXCJrZW5kb01vYmlsZVZpZXdcIixcImtlbmRvTW9iaWxlVmlld1wiKX0scG9zdDpmdW5jdGlvbihlLHQsbil7bi5faW5zdGFuY2UuX2xheW91dCgpLG4uX2luc3RhbmNlLl9zY3JvbGxlcigpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVEcmF3ZXJcIixmdW5jdGlvbigpe3JldHVybntzY29wZTohMCxsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe24uZGVmYXVsdE9wdGlvbnM9ZS52aWV3T3B0aW9ucyxuLl9pbnN0YW5jZT1vKGUsdCxuLFwia2VuZG9Nb2JpbGVEcmF3ZXJcIixcImtlbmRvTW9iaWxlRHJhd2VyXCIpfSxwb3N0OmZ1bmN0aW9uKGUsdCxuKXtuLl9pbnN0YW5jZS5fbGF5b3V0KCksbi5faW5zdGFuY2UuX3Njcm9sbGVyKCl9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZU1vZGFsVmlld1wiLGZ1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGxpbms6e3ByZTpmdW5jdGlvbihlLHQsbil7bi5kZWZhdWx0T3B0aW9ucz1lLnZpZXdPcHRpb25zLG4uX2luc3RhbmNlPW8oZSx0LG4sXCJrZW5kb01vYmlsZU1vZGFsVmlld1wiLFwia2VuZG9Nb2JpbGVNb2RhbFZpZXdcIil9LHBvc3Q6ZnVuY3Rpb24oZSx0LG4pe24uX2luc3RhbmNlLl9sYXlvdXQoKSxuLl9pbnN0YW5jZS5fc2Nyb2xsZXIoKX19fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlU3BsaXRWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57dGVybWluYWw6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbi5faW5zdGFuY2U9byhlLHQsbixcImtlbmRvTW9iaWxlU3BsaXRWaWV3XCIsXCJrZW5kb01vYmlsZVNwbGl0Vmlld1wiKX0scG9zdDpmdW5jdGlvbihlLHQsbil7bi5faW5zdGFuY2UuX2xheW91dCgpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVQYW5lXCIsZnVuY3Rpb24oKXtyZXR1cm57dGVybWluYWw6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbyhlLHQsbixcImtlbmRvTW9iaWxlUGFuZVwiLFwia2VuZG9Nb2JpbGVQYW5lXCIpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVMYXlvdXRcIixmdW5jdGlvbigpe3JldHVybntsaW5rOntwcmU6ZnVuY3Rpb24oZSx0LG4pe28oZSx0LG4sXCJrZW5kb01vYmlsZUxheW91dFwiLFwia2VuZG9Nb2JpbGVMYXlvdXRcIil9fX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUFjdGlvblNoZWV0XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsbGluazpmdW5jdGlvbih0LG4saSl7bi5maW5kKFwiYVtrLWFjdGlvbl1cIikuZWFjaChmdW5jdGlvbigpe2UodGhpcykuYXR0cihcImRhdGEtXCIra2VuZG8ubnMrXCJhY3Rpb25cIixlKHRoaXMpLmF0dHIoXCJrLWFjdGlvblwiKSl9KSxvKHQsbixpLFwia2VuZG9Nb2JpbGVBY3Rpb25TaGVldFwiLFwia2VuZG9Nb2JpbGVBY3Rpb25TaGVldFwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVQb3BPdmVyXCIsZnVuY3Rpb24oKXtyZXR1cm57dGVybWluYWw6ITAsbGluazp7cHJlOmZ1bmN0aW9uKGUsdCxuKXtuLmRlZmF1bHRPcHRpb25zPWUudmlld09wdGlvbnMsbyhlLHQsbixcImtlbmRvTW9iaWxlUG9wT3ZlclwiLFwia2VuZG9Nb2JpbGVQb3BPdmVyXCIpfX19fSkuZGlyZWN0aXZlKFwia2VuZG9WaWV3VGl0bGVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXBsYWNlOiEwLHRlbXBsYXRlOmZ1bmN0aW9uKGUpe3JldHVyblwiPHNwYW4gZGF0YS1cIitrZW5kby5ucytcInJvbGU9J3ZpZXctdGl0bGUnPlwiK2UuaHRtbCgpK1wiPC9zcGFuPlwifX19KS5kaXJlY3RpdmUoXCJrZW5kb01vYmlsZUhlYWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLGxpbms6ZnVuY3Rpb24oZSx0KXt0LmFkZENsYXNzKFwia20taGVhZGVyXCIpLmF0dHIoXCJkYXRhLXJvbGVcIixcImhlYWRlclwiKX19fSkuZGlyZWN0aXZlKFwia2VuZG9Nb2JpbGVGb290ZXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixsaW5rOmZ1bmN0aW9uKGUsdCl7dC5hZGRDbGFzcyhcImttLWZvb3RlclwiKS5hdHRyKFwiZGF0YS1yb2xlXCIsXCJmb290ZXJcIil9fX0pLmRpcmVjdGl2ZShcImtlbmRvTW9iaWxlU2Nyb2xsVmlld1BhZ2VcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXBsYWNlOiEwLHRlbXBsYXRlOmZ1bmN0aW9uKGUpe3JldHVyblwiPGRpdiBkYXRhLVwiK2tlbmRvLm5zK1wicm9sZT0ncGFnZSc+XCIrZS5odG1sKCkrXCI8L2Rpdj5cIn19fSksdC5mb3JFYWNoKFtcImFsaWduXCIsXCJpY29uXCIsXCJyZWxcIixcInRyYW5zaXRpb25cIixcImFjdGlvbnNoZWV0Q29udGV4dFwiXSxmdW5jdGlvbihlKXt2YXIgdD1cImtcIitlLnNsaWNlKDAsMSkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpO3kuZGlyZWN0aXZlKHQsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MixsaW5rOmZ1bmN0aW9uKG4saSxyKXtpLmF0dHIoa2VuZG8uYXR0cihrZW5kby50b0h5cGhlbnMoZSkpLG4uJGV2YWwoclt0XSkpfX19KX0pLEY9e1RyZWVNYXA6W1wiVGVtcGxhdGVcIl0sTW9iaWxlTGlzdFZpZXc6W1wiSGVhZGVyVGVtcGxhdGVcIixcIlRlbXBsYXRlXCJdLE1vYmlsZVNjcm9sbFZpZXc6W1wiRW1wdHlUZW1wbGF0ZVwiLFwiVGVtcGxhdGVcIl0sR3JpZDpbXCJBbHRSb3dUZW1wbGF0ZVwiLFwiRGV0YWlsVGVtcGxhdGVcIixcIlJvd1RlbXBsYXRlXCJdLExpc3RWaWV3OltcIkVkaXRUZW1wbGF0ZVwiLFwiVGVtcGxhdGVcIixcIkFsdFRlbXBsYXRlXCJdLFBhZ2VyOltcIlNlbGVjdFRlbXBsYXRlXCIsXCJMaW5rVGVtcGxhdGVcIl0sUGl2b3RHcmlkOltcIkNvbHVtbkhlYWRlclRlbXBsYXRlXCIsXCJEYXRhQ2VsbFRlbXBsYXRlXCIsXCJSb3dIZWFkZXJUZW1wbGF0ZVwiXSxTY2hlZHVsZXI6W1wiQWxsRGF5RXZlbnRUZW1wbGF0ZVwiLFwiRGF0ZUhlYWRlclRlbXBsYXRlXCIsXCJFdmVudFRlbXBsYXRlXCIsXCJNYWpvclRpbWVIZWFkZXJUZW1wbGF0ZVwiLFwiTWlub3JUaW1lSGVhZGVyVGVtcGxhdGVcIl0sVHJlZVZpZXc6W1wiVGVtcGxhdGVcIl0sVmFsaWRhdG9yOltcIkVycm9yVGVtcGxhdGVcIl19LGZ1bmN0aW9uKCl7dmFyIGU9e307dC5mb3JFYWNoKEYsZnVuY3Rpb24obixpKXt0LmZvckVhY2gobixmdW5jdGlvbih0KXtlW3RdfHwoZVt0XT1bXSksZVt0XS5wdXNoKFwiP15ea2VuZG9cIitpKX0pfSksdC5mb3JFYWNoKGUsZnVuY3Rpb24oZSx0KXt2YXIgbj1cImtcIit0LGk9a2VuZG8udG9IeXBoZW5zKG4pO3kuZGlyZWN0aXZlKG4sZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTplLHRlcm1pbmFsOiEwLGNvbXBpbGU6ZnVuY3Rpb24odCxyKXtpZihcIlwiPT09cltuXSl7dC5yZW1vdmVBdHRyKGkpO3ZhciBvPXRbMF0ub3V0ZXJIVE1MO3JldHVybiBmdW5jdGlvbihyLGEscyxsKXtmb3IodmFyIGM7IWMmJmwubGVuZ3RoOyljPWwuc2hpZnQoKTtjPyhjLnRlbXBsYXRlKG4sbyksdC5yZW1vdmUoKSk6Qy53YXJuKGkrXCIgd2l0aG91dCBhIG1hdGNoaW5nIHBhcmVudCB3aWRnZXQgZm91bmQuIEl0IGNhbiBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzogXCIrZS5qb2luKFwiLCBcIikpfX19fX0pfSl9KCkpfSh3aW5kb3cua2VuZG8ualF1ZXJ5LHdpbmRvdy5hbmd1bGFyKTtyZXR1cm4gd2luZG93LmtlbmRvfSx0eXBlb2YgZGVmaW5lPT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQ/ZGVmaW5lOmZ1bmN0aW9uKF8sZil7ZigpfSk7IiwiLy8gIFRoaXMgZnVuY3Rpb24gaXMgdHJpZ2dlciB0aGUgUmlnaHQgU2lkZU1lbnVcclxuKGZ1bmN0aW9uICh3aW5kb3cpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBmdW5jdGlvbiBjbGFzc1JlZyhjbGFzc05hbWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzK3wkKVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaGFzQ2xhc3MsIGFkZENsYXNzLCByZW1vdmVDbGFzcztcclxuXHJcbiAgICBpZiAoJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XHJcbiAgICAgICAgaGFzQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbSwgYykge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoYyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uIChlbGVtLCBjKSB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChjKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGVsZW0sIGMpIHtcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uIChlbGVtLCBjKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjbGFzc1JlZyhjKS50ZXN0KGVsZW0uY2xhc3NOYW1lKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGFkZENsYXNzID0gZnVuY3Rpb24gKGVsZW0sIGMpIHtcclxuICAgICAgICAgICAgaWYgKCFoYXNDbGFzcyhlbGVtLCBjKSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZSArICcgJyArIGM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGVsZW0sIGMpIHtcclxuICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZS5yZXBsYWNlKGNsYXNzUmVnKGMpLCAnICcpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgYykge1xyXG4gICAgICAgIHZhciBmbiA9IGhhc0NsYXNzKGVsZW0sIGMpID8gcmVtb3ZlQ2xhc3MgOiBhZGRDbGFzcztcclxuICAgICAgICBmbihlbGVtLCBjKTtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cucmlnaHRfbWVudSA9IHtcclxuICAgICAgICAvLyBmdWxsIG5hbWVzXHJcbiAgICAgICAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxyXG4gICAgICAgIGFkZENsYXNzOiBhZGRDbGFzcyxcclxuICAgICAgICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXHJcbiAgICAgICAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLFxyXG4gICAgICAgIC8vIHNob3J0IG5hbWVzXHJcbiAgICAgICAgaGFzOiBoYXNDbGFzcyxcclxuICAgICAgICBhZGQ6IGFkZENsYXNzLFxyXG4gICAgICAgIHJlbW92ZTogcmVtb3ZlQ2xhc3MsXHJcbiAgICAgICAgdG9nZ2xlOiB0b2dnbGVDbGFzc1xyXG4gICAgfTtcclxufSkod2luZG93KTtcclxuXHJcbnZhciBsYXlvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLm1lbnVSaWdodEJ1dHRvbkNsaWNrID0gZnVuY3Rpb24gKG1lbnVSaWdodEJ1dHRvbiwgbWVudVJpZ2h0KSB7ICAgICAgICBcclxuICAgICAgICByaWdodF9tZW51LnRvZ2dsZShtZW51UmlnaHRCdXR0b24sICdhY3RpdmUnKTtcclxuICAgICAgICByaWdodF9tZW51LnRvZ2dsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZW51UmlnaHQpLCAnY2JwLXNwbWVudS1vcGVuJyk7XHJcbiAgICAgICAgcmlnaHRfbWVudS50b2dnbGUobWVudVJpZ2h0QnV0dG9uLCAncmlnaHQtbWVudS1idXR0b24tb3BlbicpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBsYXlvdXQ7IiwiKGZ1bmN0aW9uIChwcm9jZXNzKXtcbu+7v3Byb2Nlc3MuZW52LkJST1dTRVJJRllTSElNX0RJQUdOT1NUSUNTID0gMVxyXG4vLyBTdGFydCBsb2FkaW5nIHRoZSBtYWluIGFwcCBmaWxlLiBQdXQgYWxsIG9mXHJcbi8vIHlvdXIgYXBwbGljYXRpb24gbG9naWMgaW4gdGhlcmUuXHJcbnZhciAkID0galF1ZXJ5ID0gcmVxdWlyZSgnLi9rZW5kby8yMDE0LjMuMTExOS9qcXVlcnkubWluLmpzJyk7XHJcbnZhciBtID0gcmVxdWlyZSgnLi9taXRocmlsLmpzJyk7XHJcbi8vcmVxdWlyZSgnLi9ib290c3RyYXAubWluLmpzJyk7XHJcbnJlcXVpcmUoXCIuL3JpcHBsZXMubWluLmpzXCIpO1xyXG5yZXF1aXJlKFwiLi9tYXRlcmlhbC5taW4uanNcIik7XHJcbnJlcXVpcmUoJy4va2VuZG8vMjAxNC4zLjExMTkva2VuZG8ud2ViLm1pbi5qcycpO1xyXG5yZXF1aXJlKCcuL2pxdWVyeS5ob3RrZXlzLmpzJyk7XHJcbnJlcXVpcmUoJy4vdmVsb2NpdHkuanMnKTtcclxuLy8gICAgICAgIDwhLS0gVG9wIGxldmVsIE1pdGhyaWwgUmVmZXJlbmNlcyAtLT5cclxucmVxdWlyZSgnLi9hcHAvYXBwLnJvdXRlLmpzJyk7XHJcbi8vICAgICAgICA8IS0tIEFwcCBSZWZlcmVuY2VzIC0tPlxyXG5yZXF1aXJlKCcuL2NvcmUuanMnKTtcclxucmVxdWlyZSgnLi9sYXlvdXQuanMnKTtcclxucmVxdWlyZSgnLi9jb250cm9scy5qcycpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJC5tYXRlcmlhbC5pbml0KCk7XHJcbn0pO1xufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpIiwiKGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobil7cmV0dXJuIHR5cGVvZiBuLndoaWNoPT1cInVuZGVmaW5lZFwiPyEwOnR5cGVvZiBuLndoaWNoPT1cIm51bWJlclwiJiZuLndoaWNoPjA/IW4uY3RybEtleSYmIW4ubWV0YUtleSYmIW4uYWx0S2V5JiZuLndoaWNoIT04OiExfW4uZXhwcltcIjpcIl0ubm90bWRwcm9jPWZ1bmN0aW9uKHQpe3JldHVybiBuKHQpLmRhdGEoXCJtZHByb2NcIik/ITE6ITB9O24ubWF0ZXJpYWw9e29wdGlvbnM6e3dpdGhSaXBwbGVzOlwiLnRpbGUsLmJ0bjpub3QoLmJ0bi1saW5rKSwuY2FyZC1pbWFnZSwubmF2YmFyIGE6bm90KC53aXRob3V0cmlwcGxlKSwuZHJvcGRvd24tbWVudSBhLC5uYXYtdGFicyBhOm5vdCgud2l0aG91dHJpcHBsZSksLndpdGhyaXBwbGVcIixpbnB1dEVsZW1lbnRzOlwiaW5wdXQuZm9ybS1jb250cm9sLCB0ZXh0YXJlYS5mb3JtLWNvbnRyb2wsIHNlbGVjdC5mb3JtLWNvbnRyb2xcIixjaGVja2JveEVsZW1lbnRzOlwiLmNoZWNrYm94ID4gbGFiZWwgPiBpbnB1dFt0eXBlPWNoZWNrYm94XVwiLHJhZGlvRWxlbWVudHM6XCIucmFkaW8gPiBsYWJlbCA+IGlucHV0W3R5cGU9cmFkaW9dXCJ9LGNoZWNrYm94OmZ1bmN0aW9uKHQpe24odD90OnRoaXMub3B0aW9ucy5jaGVja2JveEVsZW1lbnRzKS5maWx0ZXIoXCI6bm90bWRwcm9jXCIpLmRhdGEoXCJtZHByb2NcIiwhMCkuYWZ0ZXIoXCI8c3BhbiBjbGFzcz1yaXBwbGU+PFxcL3NwYW4+PHNwYW4gY2xhc3M9Y2hlY2s+PFxcL3NwYW4+XCIpfSxyYWRpbzpmdW5jdGlvbih0KXtuKHQ/dDp0aGlzLm9wdGlvbnMucmFkaW9FbGVtZW50cykuZmlsdGVyKFwiOm5vdG1kcHJvY1wiKS5kYXRhKFwibWRwcm9jXCIsITApLmFmdGVyKFwiPHNwYW4gY2xhc3M9Y2lyY2xlPjxcXC9zcGFuPjxzcGFuIGNsYXNzPWNoZWNrPjxcXC9zcGFuPlwiKX0saW5wdXQ6ZnVuY3Rpb24oaSl7bihpP2k6dGhpcy5vcHRpb25zLmlucHV0RWxlbWVudHMpLmZpbHRlcihcIjpub3RtZHByb2NcIikuZGF0YShcIm1kcHJvY1wiLCEwKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzKSxpLHI7dC53cmFwKFwiPGRpdiBjbGFzcz1mb3JtLWNvbnRyb2wtd3JhcHBlcj48XFwvZGl2PlwiKTt0LmFmdGVyKFwiPHNwYW4gY2xhc3M9bWF0ZXJpYWwtaW5wdXQ+PFxcL3NwYW4+XCIpO3QuaGFzQ2xhc3MoXCJmbG9hdGluZy1sYWJlbFwiKSYmKGk9dC5hdHRyKFwicGxhY2Vob2xkZXJcIiksdC5hdHRyKFwicGxhY2Vob2xkZXJcIixudWxsKS5yZW1vdmVDbGFzcyhcImZsb2F0aW5nLWxhYmVsXCIpLHQuYWZ0ZXIoXCI8ZGl2IGNsYXNzPWZsb2F0aW5nLWxhYmVsPlwiK2krXCI8XFwvZGl2PlwiKSk7KHQudmFsKCk9PT1udWxsfHx0LnZhbCgpPT1cInVuZGVmaW5lZFwifHx0LnZhbCgpPT09XCJcIikmJnQuYWRkQ2xhc3MoXCJlbXB0eVwiKTt0LnBhcmVudCgpLm5leHQoKS5pcyhcIlt0eXBlPWZpbGVdXCIpJiYodC5wYXJlbnQoKS5hZGRDbGFzcyhcImZpbGVpbnB1dFwiKSxyPXQucGFyZW50KCkubmV4dCgpLmRldGFjaCgpLHQuYWZ0ZXIocikpfSk7bihkb2N1bWVudCkub24oXCJjaGFuZ2VcIixcIi5jaGVja2JveCBpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5ibHVyKCl9KS5vbihcImtleWRvd24gcGFzdGVcIixcIi5mb3JtLWNvbnRyb2xcIixmdW5jdGlvbihpKXt0KGkpJiZuKHRoaXMpLnJlbW92ZUNsYXNzKFwiZW1wdHlcIil9KS5vbihcImtleXVwIGNoYW5nZVwiLFwiLmZvcm0tY29udHJvbFwiLGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzKTt0LnZhbCgpPT09XCJcIj90LmFkZENsYXNzKFwiZW1wdHlcIik6dC5yZW1vdmVDbGFzcyhcImVtcHR5XCIpfSkub24oXCJmb2N1c1wiLFwiLmZvcm0tY29udHJvbC13cmFwcGVyLmZpbGVpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5maW5kKFwiaW5wdXRcIikuYWRkQ2xhc3MoXCJmb2N1c1wiKX0pLm9uKFwiYmx1clwiLFwiLmZvcm0tY29udHJvbC13cmFwcGVyLmZpbGVpbnB1dFwiLGZ1bmN0aW9uKCl7bih0aGlzKS5maW5kKFwiaW5wdXRcIikucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKX0pLm9uKFwiY2hhbmdlXCIsXCIuZm9ybS1jb250cm9sLXdyYXBwZXIuZmlsZWlucHV0IFt0eXBlPWZpbGVdXCIsZnVuY3Rpb24oKXt2YXIgdD1cIlwiO24uZWFjaChuKHRoaXMpWzBdLmZpbGVzLGZ1bmN0aW9uKG4saSl7Y29uc29sZS5sb2coaSk7dCs9aS5uYW1lK1wiLCBcIn0pO3Q9dC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC0yKTt0P24odGhpcykucHJldigpLnJlbW92ZUNsYXNzKFwiZW1wdHlcIik6bih0aGlzKS5wcmV2KCkuYWRkQ2xhc3MoXCJlbXB0eVwiKTtuKHRoaXMpLnByZXYoKS52YWwodCl9KX0scmlwcGxlczpmdW5jdGlvbihuKXtyaXBwbGVzLmluaXQobj9uOnRoaXMub3B0aW9ucy53aXRoUmlwcGxlcyl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLnJpcHBsZXMoKTt0aGlzLmlucHV0KCk7dGhpcy5jaGVja2JveCgpO3RoaXMucmFkaW8oKTtkb2N1bWVudC5hcnJpdmUmJmRvY3VtZW50LmFycml2ZShcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIsZnVuY3Rpb24oKXtuLm1hdGVyaWFsLmluaXQoKX0pLGZ1bmN0aW9uKCl7dmFyIGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtuKFwiaW5wdXRcIikuZWFjaChmdW5jdGlvbigpe24odGhpcykudmFsKCkhPT1uKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKSYmbih0aGlzKS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LDEwMCksdDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChpKX0sMWU0KTtuKGRvY3VtZW50KS5vbihcImZvY3VzXCIsXCJpbnB1dFwiLGZ1bmN0aW9uKCl7dmFyIGk9bih0aGlzKS5wYXJlbnRzKFwiZm9ybVwiKS5maW5kKFwiaW5wdXRcIik7dD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2kuZWFjaChmdW5jdGlvbigpe24odGhpcykudmFsKCkhPT1uKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKSYmbih0aGlzKS50cmlnZ2VyKFwiY2hhbmdlXCIpfSl9LDEwMCl9KS5vbihcImJsdXJcIixcImlucHV0XCIsZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHQpfSl9KCl9fX0pKGpRdWVyeSk7XHJcbi8qXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsLm1pbi5qcy5tYXBcclxuKi8iLCJ2YXIgbSA9IChmdW5jdGlvbiBhcHAod2luZG93LCB1bmRlZmluZWQpIHtcclxuXHR2YXIgT0JKRUNUID0gXCJbb2JqZWN0IE9iamVjdF1cIiwgQVJSQVkgPSBcIltvYmplY3QgQXJyYXldXCIsIFNUUklORyA9IFwiW29iamVjdCBTdHJpbmddXCIsIEZVTkNUSU9OID0gXCJmdW5jdGlvblwiO1xyXG5cdHZhciB0eXBlID0ge30udG9TdHJpbmc7XHJcblx0dmFyIHBhcnNlciA9IC8oPzooXnwjfFxcLikoW14jXFwuXFxbXFxdXSspKXwoXFxbLis/XFxdKS9nLCBhdHRyUGFyc2VyID0gL1xcWyguKz8pKD86PShcInwnfCkoLio/KVxcMik/XFxdLztcclxuXHR2YXIgdm9pZEVsZW1lbnRzID0gL14oQVJFQXxCQVNFfEJSfENPTHxDT01NQU5EfEVNQkVEfEhSfElNR3xJTlBVVHxLRVlHRU58TElOS3xNRVRBfFBBUkFNfFNPVVJDRXxUUkFDS3xXQlIpJC87XHJcblxyXG5cdC8vIGNhY2hpbmcgY29tbW9ubHkgdXNlZCB2YXJpYWJsZXNcclxuXHR2YXIgJGRvY3VtZW50LCAkbG9jYXRpb24sICRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUsICRjYW5jZWxBbmltYXRpb25GcmFtZTtcclxuXHJcblx0Ly8gc2VsZiBpbnZva2luZyBmdW5jdGlvbiBuZWVkZWQgYmVjYXVzZSBvZiB0aGUgd2F5IG1vY2tzIHdvcmtcclxuXHRmdW5jdGlvbiBpbml0aWFsaXplKHdpbmRvdyl7XHJcblx0XHQkZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XHJcblx0XHQkbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XHJcblx0XHQkY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LmNsZWFyVGltZW91dDtcclxuXHRcdCRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5zZXRUaW1lb3V0O1xyXG5cdH1cclxuXHJcblx0aW5pdGlhbGl6ZSh3aW5kb3cpO1xyXG5cclxuXHJcblx0LypcclxuXHQgKiBAdHlwZWRlZiB7U3RyaW5nfSBUYWdcclxuXHQgKiBBIHN0cmluZyB0aGF0IGxvb2tzIGxpa2UgLT4gZGl2LmNsYXNzbmFtZSNpZFtwYXJhbT1vbmVdW3BhcmFtMj10d29dXHJcblx0ICogV2hpY2ggZGVzY3JpYmVzIGEgRE9NIG5vZGVcclxuXHQgKi9cclxuXHJcblx0LypcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7VGFnfSBUaGUgRE9NIG5vZGUgdGFnXHJcblx0ICogQHBhcmFtIHtPYmplY3Q9W119IG9wdGlvbmFsIGtleS12YWx1ZSBwYWlycyB0byBiZSBtYXBwZWQgdG8gRE9NIGF0dHJzXHJcblx0ICogQHBhcmFtIHsuLi5tTm9kZT1bXX0gWmVybyBvciBtb3JlIE1pdGhyaWwgY2hpbGQgbm9kZXMuIENhbiBiZSBhbiBhcnJheSwgb3Igc3BsYXQgKG9wdGlvbmFsKVxyXG5cdCAqXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gbSgpIHtcclxuXHRcdHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG5cdFx0dmFyIGhhc0F0dHJzID0gYXJnc1sxXSAhPSBudWxsICYmIHR5cGUuY2FsbChhcmdzWzFdKSA9PSBPQkpFQ1QgJiYgIShcInRhZ1wiIGluIGFyZ3NbMV0pICYmICEoXCJzdWJ0cmVlXCIgaW4gYXJnc1sxXSk7XHJcblx0XHR2YXIgYXR0cnMgPSBoYXNBdHRycyA/IGFyZ3NbMV0gOiB7fTtcclxuXHRcdHZhciBjbGFzc0F0dHJOYW1lID0gXCJjbGFzc1wiIGluIGF0dHJzID8gXCJjbGFzc1wiIDogXCJjbGFzc05hbWVcIjtcclxuXHRcdHZhciBjZWxsID0ge3RhZzogXCJkaXZcIiwgYXR0cnM6IHt9fTtcclxuXHRcdHZhciBtYXRjaCwgY2xhc3NlcyA9IFtdO1xyXG5cdFx0aWYgKHR5cGUuY2FsbChhcmdzWzBdKSAhPSBTVFJJTkcpIHRocm93IG5ldyBFcnJvcihcInNlbGVjdG9yIGluIG0oc2VsZWN0b3IsIGF0dHJzLCBjaGlsZHJlbikgc2hvdWxkIGJlIGEgc3RyaW5nXCIpXHJcblx0XHR3aGlsZSAobWF0Y2ggPSBwYXJzZXIuZXhlYyhhcmdzWzBdKSkge1xyXG5cdFx0XHRpZiAobWF0Y2hbMV0gPT0gXCJcIiAmJiBtYXRjaFsyXSkgY2VsbC50YWcgPSBtYXRjaFsyXTtcclxuXHRcdFx0ZWxzZSBpZiAobWF0Y2hbMV0gPT0gXCIjXCIpIGNlbGwuYXR0cnMuaWQgPSBtYXRjaFsyXTtcclxuXHRcdFx0ZWxzZSBpZiAobWF0Y2hbMV0gPT0gXCIuXCIpIGNsYXNzZXMucHVzaChtYXRjaFsyXSk7XHJcblx0XHRcdGVsc2UgaWYgKG1hdGNoWzNdWzBdID09IFwiW1wiKSB7XHJcblx0XHRcdFx0dmFyIHBhaXIgPSBhdHRyUGFyc2VyLmV4ZWMobWF0Y2hbM10pO1xyXG5cdFx0XHRcdGNlbGwuYXR0cnNbcGFpclsxXV0gPSBwYWlyWzNdIHx8IChwYWlyWzJdID8gXCJcIiA6dHJ1ZSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKGNsYXNzZXMubGVuZ3RoID4gMCkgY2VsbC5hdHRyc1tjbGFzc0F0dHJOYW1lXSA9IGNsYXNzZXMuam9pbihcIiBcIik7XHJcblxyXG5cclxuXHRcdHZhciBjaGlsZHJlbiA9IGhhc0F0dHJzID8gYXJnc1syXSA6IGFyZ3NbMV07XHJcblx0XHRpZiAodHlwZS5jYWxsKGNoaWxkcmVuKSA9PSBBUlJBWSkge1xyXG5cdFx0XHRjZWxsLmNoaWxkcmVuID0gY2hpbGRyZW5cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjZWxsLmNoaWxkcmVuID0gaGFzQXR0cnMgPyBhcmdzLnNsaWNlKDIpIDogYXJncy5zbGljZSgxKVxyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAodmFyIGF0dHJOYW1lIGluIGF0dHJzKSB7XHJcblx0XHRcdGlmIChhdHRyTmFtZSA9PSBjbGFzc0F0dHJOYW1lKSBjZWxsLmF0dHJzW2F0dHJOYW1lXSA9IChjZWxsLmF0dHJzW2F0dHJOYW1lXSB8fCBcIlwiKSArIFwiIFwiICsgYXR0cnNbYXR0ck5hbWVdO1xyXG5cdFx0XHRlbHNlIGNlbGwuYXR0cnNbYXR0ck5hbWVdID0gYXR0cnNbYXR0ck5hbWVdXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2VsbFxyXG5cdH1cclxuXHRmdW5jdGlvbiBidWlsZChwYXJlbnRFbGVtZW50LCBwYXJlbnRUYWcsIHBhcmVudENhY2hlLCBwYXJlbnRJbmRleCwgZGF0YSwgY2FjaGVkLCBzaG91bGRSZWF0dGFjaCwgaW5kZXgsIGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpIHtcclxuXHRcdC8vYGJ1aWxkYCBpcyBhIHJlY3Vyc2l2ZSBmdW5jdGlvbiB0aGF0IG1hbmFnZXMgY3JlYXRpb24vZGlmZmluZy9yZW1vdmFsIG9mIERPTSBlbGVtZW50cyBiYXNlZCBvbiBjb21wYXJpc29uIGJldHdlZW4gYGRhdGFgIGFuZCBgY2FjaGVkYFxyXG5cdFx0Ly90aGUgZGlmZiBhbGdvcml0aG0gY2FuIGJlIHN1bW1hcml6ZWQgYXMgdGhpczpcclxuXHRcdC8vMSAtIGNvbXBhcmUgYGRhdGFgIGFuZCBgY2FjaGVkYFxyXG5cdFx0Ly8yIC0gaWYgdGhleSBhcmUgZGlmZmVyZW50LCBjb3B5IGBkYXRhYCB0byBgY2FjaGVkYCBhbmQgdXBkYXRlIHRoZSBET00gYmFzZWQgb24gd2hhdCB0aGUgZGlmZmVyZW5jZSBpc1xyXG5cdFx0Ly8zIC0gcmVjdXJzaXZlbHkgYXBwbHkgdGhpcyBhbGdvcml0aG0gZm9yIGV2ZXJ5IGFycmF5IGFuZCBmb3IgdGhlIGNoaWxkcmVuIG9mIGV2ZXJ5IHZpcnR1YWwgZWxlbWVudFxyXG5cclxuXHRcdC8vdGhlIGBjYWNoZWRgIGRhdGEgc3RydWN0dXJlIGlzIGVzc2VudGlhbGx5IHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyByZWRyYXcncyBgZGF0YWAgZGF0YSBzdHJ1Y3R1cmUsIHdpdGggYSBmZXcgYWRkaXRpb25zOlxyXG5cdFx0Ly8tIGBjYWNoZWRgIGFsd2F5cyBoYXMgYSBwcm9wZXJ0eSBjYWxsZWQgYG5vZGVzYCwgd2hpY2ggaXMgYSBsaXN0IG9mIERPTSBlbGVtZW50cyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIGRhdGEgcmVwcmVzZW50ZWQgYnkgdGhlIHJlc3BlY3RpdmUgdmlydHVhbCBlbGVtZW50XHJcblx0XHQvLy0gaW4gb3JkZXIgdG8gc3VwcG9ydCBhdHRhY2hpbmcgYG5vZGVzYCBhcyBhIHByb3BlcnR5IG9mIGBjYWNoZWRgLCBgY2FjaGVkYCBpcyAqYWx3YXlzKiBhIG5vbi1wcmltaXRpdmUgb2JqZWN0LCBpLmUuIGlmIHRoZSBkYXRhIHdhcyBhIHN0cmluZywgdGhlbiBjYWNoZWQgaXMgYSBTdHJpbmcgaW5zdGFuY2UuIElmIGRhdGEgd2FzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgY2FjaGVkIGlzIGBuZXcgU3RyaW5nKFwiXCIpYFxyXG5cdFx0Ly8tIGBjYWNoZWQgYWxzbyBoYXMgYSBgY29uZmlnQ29udGV4dGAgcHJvcGVydHksIHdoaWNoIGlzIHRoZSBzdGF0ZSBzdG9yYWdlIG9iamVjdCBleHBvc2VkIGJ5IGNvbmZpZyhlbGVtZW50LCBpc0luaXRpYWxpemVkLCBjb250ZXh0KVxyXG5cdFx0Ly8tIHdoZW4gYGNhY2hlZGAgaXMgYW4gT2JqZWN0LCBpdCByZXByZXNlbnRzIGEgdmlydHVhbCBlbGVtZW50OyB3aGVuIGl0J3MgYW4gQXJyYXksIGl0IHJlcHJlc2VudHMgYSBsaXN0IG9mIGVsZW1lbnRzOyB3aGVuIGl0J3MgYSBTdHJpbmcsIE51bWJlciBvciBCb29sZWFuLCBpdCByZXByZXNlbnRzIGEgdGV4dCBub2RlXHJcblxyXG5cdFx0Ly9gcGFyZW50RWxlbWVudGAgaXMgYSBET00gZWxlbWVudCB1c2VkIGZvciBXM0MgRE9NIEFQSSBjYWxsc1xyXG5cdFx0Ly9gcGFyZW50VGFnYCBpcyBvbmx5IHVzZWQgZm9yIGhhbmRsaW5nIGEgY29ybmVyIGNhc2UgZm9yIHRleHRhcmVhIHZhbHVlc1xyXG5cdFx0Ly9gcGFyZW50Q2FjaGVgIGlzIHVzZWQgdG8gcmVtb3ZlIG5vZGVzIGluIHNvbWUgbXVsdGktbm9kZSBjYXNlc1xyXG5cdFx0Ly9gcGFyZW50SW5kZXhgIGFuZCBgaW5kZXhgIGFyZSB1c2VkIHRvIGZpZ3VyZSBvdXQgdGhlIG9mZnNldCBvZiBub2Rlcy4gVGhleSdyZSBhcnRpZmFjdHMgZnJvbSBiZWZvcmUgYXJyYXlzIHN0YXJ0ZWQgYmVpbmcgZmxhdHRlbmVkIGFuZCBhcmUgbGlrZWx5IHJlZmFjdG9yYWJsZVxyXG5cdFx0Ly9gZGF0YWAgYW5kIGBjYWNoZWRgIGFyZSwgcmVzcGVjdGl2ZWx5LCB0aGUgbmV3IGFuZCBvbGQgbm9kZXMgYmVpbmcgZGlmZmVkXHJcblx0XHQvL2BzaG91bGRSZWF0dGFjaGAgaXMgYSBmbGFnIGluZGljYXRpbmcgd2hldGhlciBhIHBhcmVudCBub2RlIHdhcyByZWNyZWF0ZWQgKGlmIHNvLCBhbmQgaWYgdGhpcyBub2RlIGlzIHJldXNlZCwgdGhlbiB0aGlzIG5vZGUgbXVzdCByZWF0dGFjaCBpdHNlbGYgdG8gdGhlIG5ldyBwYXJlbnQpXHJcblx0XHQvL2BlZGl0YWJsZWAgaXMgYSBmbGFnIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgYW4gYW5jZXN0b3IgaXMgY29udGVudGVkaXRhYmxlXHJcblx0XHQvL2BuYW1lc3BhY2VgIGluZGljYXRlcyB0aGUgY2xvc2VzdCBIVE1MIG5hbWVzcGFjZSBhcyBpdCBjYXNjYWRlcyBkb3duIGZyb20gYW4gYW5jZXN0b3JcclxuXHRcdC8vYGNvbmZpZ3NgIGlzIGEgbGlzdCBvZiBjb25maWcgZnVuY3Rpb25zIHRvIHJ1biBhZnRlciB0aGUgdG9wbW9zdCBgYnVpbGRgIGNhbGwgZmluaXNoZXMgcnVubmluZ1xyXG5cclxuXHRcdC8vdGhlcmUncyBsb2dpYyB0aGF0IHJlbGllcyBvbiB0aGUgYXNzdW1wdGlvbiB0aGF0IG51bGwgYW5kIHVuZGVmaW5lZCBkYXRhIGFyZSBlcXVpdmFsZW50IHRvIGVtcHR5IHN0cmluZ3NcclxuXHRcdC8vLSB0aGlzIHByZXZlbnRzIGxpZmVjeWNsZSBzdXJwcmlzZXMgZnJvbSBwcm9jZWR1cmFsIGhlbHBlcnMgdGhhdCBtaXggaW1wbGljaXQgYW5kIGV4cGxpY2l0IHJldHVybiBzdGF0ZW1lbnRzIChlLmcuIGZ1bmN0aW9uIGZvbygpIHtpZiAoY29uZCkgcmV0dXJuIG0oXCJkaXZcIil9XHJcblx0XHQvLy0gaXQgc2ltcGxpZmllcyBkaWZmaW5nIGNvZGVcclxuXHRcdGlmIChkYXRhID09IG51bGwpIGRhdGEgPSBcIlwiO1xyXG5cdFx0aWYgKGRhdGEuc3VidHJlZSA9PT0gXCJyZXRhaW5cIikgcmV0dXJuIGNhY2hlZDtcclxuXHRcdHZhciBjYWNoZWRUeXBlID0gdHlwZS5jYWxsKGNhY2hlZCksIGRhdGFUeXBlID0gdHlwZS5jYWxsKGRhdGEpO1xyXG5cdFx0aWYgKGNhY2hlZCA9PSBudWxsIHx8IGNhY2hlZFR5cGUgIT0gZGF0YVR5cGUpIHtcclxuXHRcdFx0aWYgKGNhY2hlZCAhPSBudWxsKSB7XHJcblx0XHRcdFx0aWYgKHBhcmVudENhY2hlICYmIHBhcmVudENhY2hlLm5vZGVzKSB7XHJcblx0XHRcdFx0XHR2YXIgb2Zmc2V0ID0gaW5kZXggLSBwYXJlbnRJbmRleDtcclxuXHRcdFx0XHRcdHZhciBlbmQgPSBvZmZzZXQgKyAoZGF0YVR5cGUgPT0gQVJSQVkgPyBkYXRhIDogY2FjaGVkLm5vZGVzKS5sZW5ndGg7XHJcblx0XHRcdFx0XHRjbGVhcihwYXJlbnRDYWNoZS5ub2Rlcy5zbGljZShvZmZzZXQsIGVuZCksIHBhcmVudENhY2hlLnNsaWNlKG9mZnNldCwgZW5kKSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoY2FjaGVkLm5vZGVzKSBjbGVhcihjYWNoZWQubm9kZXMsIGNhY2hlZClcclxuXHRcdFx0fVxyXG5cdFx0XHRjYWNoZWQgPSBuZXcgZGF0YS5jb25zdHJ1Y3RvcjtcclxuXHRcdFx0aWYgKGNhY2hlZC50YWcpIGNhY2hlZCA9IHt9OyAvL2lmIGNvbnN0cnVjdG9yIGNyZWF0ZXMgYSB2aXJ0dWFsIGRvbSBlbGVtZW50LCB1c2UgYSBibGFuayBvYmplY3QgYXMgdGhlIGJhc2UgY2FjaGVkIG5vZGUgaW5zdGVhZCBvZiBjb3B5aW5nIHRoZSB2aXJ0dWFsIGVsICgjMjc3KVxyXG5cdFx0XHRjYWNoZWQubm9kZXMgPSBbXVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChkYXRhVHlwZSA9PSBBUlJBWSkge1xyXG5cdFx0XHQvL3JlY3Vyc2l2ZWx5IGZsYXR0ZW4gYXJyYXlcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHR5cGUuY2FsbChkYXRhW2ldKSA9PSBBUlJBWSkge1xyXG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGEuY29uY2F0LmFwcGx5KFtdLCBkYXRhKTtcclxuXHRcdFx0XHRcdGktLSAvL2NoZWNrIGN1cnJlbnQgaW5kZXggYWdhaW4gYW5kIGZsYXR0ZW4gdW50aWwgdGhlcmUgYXJlIG5vIG1vcmUgbmVzdGVkIGFycmF5cyBhdCB0aGF0IGluZGV4XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgbm9kZXMgPSBbXSwgaW50YWN0ID0gY2FjaGVkLmxlbmd0aCA9PT0gZGF0YS5sZW5ndGgsIHN1YkFycmF5Q291bnQgPSAwO1xyXG5cclxuXHRcdFx0Ly9rZXlzIGFsZ29yaXRobTogc29ydCBlbGVtZW50cyB3aXRob3V0IHJlY3JlYXRpbmcgdGhlbSBpZiBrZXlzIGFyZSBwcmVzZW50XHJcblx0XHRcdC8vMSkgY3JlYXRlIGEgbWFwIG9mIGFsbCBleGlzdGluZyBrZXlzLCBhbmQgbWFyayBhbGwgZm9yIGRlbGV0aW9uXHJcblx0XHRcdC8vMikgYWRkIG5ldyBrZXlzIHRvIG1hcCBhbmQgbWFyayB0aGVtIGZvciBhZGRpdGlvblxyXG5cdFx0XHQvLzMpIGlmIGtleSBleGlzdHMgaW4gbmV3IGxpc3QsIGNoYW5nZSBhY3Rpb24gZnJvbSBkZWxldGlvbiB0byBhIG1vdmVcclxuXHRcdFx0Ly80KSBmb3IgZWFjaCBrZXksIGhhbmRsZSBpdHMgY29ycmVzcG9uZGluZyBhY3Rpb24gYXMgbWFya2VkIGluIHByZXZpb3VzIHN0ZXBzXHJcblx0XHRcdC8vNSkgY29weSB1bmtleWVkIGl0ZW1zIGludG8gdGhlaXIgcmVzcGVjdGl2ZSBnYXBzXHJcblx0XHRcdHZhciBERUxFVElPTiA9IDEsIElOU0VSVElPTiA9IDIgLCBNT1ZFID0gMztcclxuXHRcdFx0dmFyIGV4aXN0aW5nID0ge30sIHVua2V5ZWQgPSBbXSwgc2hvdWxkTWFpbnRhaW5JZGVudGl0aWVzID0gZmFsc2U7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2FjaGVkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKGNhY2hlZFtpXSAmJiBjYWNoZWRbaV0uYXR0cnMgJiYgY2FjaGVkW2ldLmF0dHJzLmtleSAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHRzaG91bGRNYWludGFpbklkZW50aXRpZXMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0ZXhpc3RpbmdbY2FjaGVkW2ldLmF0dHJzLmtleV0gPSB7YWN0aW9uOiBERUxFVElPTiwgaW5kZXg6IGl9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzaG91bGRNYWludGFpbklkZW50aXRpZXMpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChkYXRhW2ldICYmIGRhdGFbaV0uYXR0cnMpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGRhdGFbaV0uYXR0cnMua2V5ICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIga2V5ID0gZGF0YVtpXS5hdHRycy5rZXk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFleGlzdGluZ1trZXldKSBleGlzdGluZ1trZXldID0ge2FjdGlvbjogSU5TRVJUSU9OLCBpbmRleDogaX07XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBleGlzdGluZ1trZXldID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uOiBNT1ZFLFxyXG5cdFx0XHRcdFx0XHRcdFx0aW5kZXg6IGksXHJcblx0XHRcdFx0XHRcdFx0XHRmcm9tOiBleGlzdGluZ1trZXldLmluZGV4LFxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxlbWVudDogcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2V4aXN0aW5nW2tleV0uaW5kZXhdIHx8ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2UgdW5rZXllZC5wdXNoKHtpbmRleDogaSwgZWxlbWVudDogcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2ldIHx8ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpfSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dmFyIGFjdGlvbnMgPSBPYmplY3Qua2V5cyhleGlzdGluZykubWFwKGZ1bmN0aW9uKGtleSkge3JldHVybiBleGlzdGluZ1trZXldfSk7XHJcblx0XHRcdFx0dmFyIGNoYW5nZXMgPSBhY3Rpb25zLnNvcnQoZnVuY3Rpb24oYSwgYikge3JldHVybiBhLmFjdGlvbiAtIGIuYWN0aW9uIHx8IGEuaW5kZXggLSBiLmluZGV4fSk7XHJcblx0XHRcdFx0dmFyIG5ld0NhY2hlZCA9IGNhY2hlZC5zbGljZSgpO1xyXG5cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgY2hhbmdlOyBjaGFuZ2UgPSBjaGFuZ2VzW2ldOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChjaGFuZ2UuYWN0aW9uID09IERFTEVUSU9OKSB7XHJcblx0XHRcdFx0XHRcdGNsZWFyKGNhY2hlZFtjaGFuZ2UuaW5kZXhdLm5vZGVzLCBjYWNoZWRbY2hhbmdlLmluZGV4XSk7XHJcblx0XHRcdFx0XHRcdG5ld0NhY2hlZC5zcGxpY2UoY2hhbmdlLmluZGV4LCAxKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGNoYW5nZS5hY3Rpb24gPT0gSU5TRVJUSU9OKSB7XHJcblx0XHRcdFx0XHRcdHZhciBkdW1teSA9ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRcdFx0XHRkdW1teS5rZXkgPSBkYXRhW2NoYW5nZS5pbmRleF0uYXR0cnMua2V5O1xyXG5cdFx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShkdW1teSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRcdG5ld0NhY2hlZC5zcGxpY2UoY2hhbmdlLmluZGV4LCAwLCB7YXR0cnM6IHtrZXk6IGRhdGFbY2hhbmdlLmluZGV4XS5hdHRycy5rZXl9LCBub2RlczogW2R1bW15XX0pXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKGNoYW5nZS5hY3Rpb24gPT0gTU9WRSkge1xyXG5cdFx0XHRcdFx0XHRpZiAocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gIT09IGNoYW5nZS5lbGVtZW50ICYmIGNoYW5nZS5lbGVtZW50ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoY2hhbmdlLmVsZW1lbnQsIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tjaGFuZ2UuaW5kZXhdIHx8IG51bGwpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0bmV3Q2FjaGVkW2NoYW5nZS5pbmRleF0gPSBjYWNoZWRbY2hhbmdlLmZyb21dXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdW5rZXllZC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0dmFyIGNoYW5nZSA9IHVua2V5ZWRbaV07XHJcblx0XHRcdFx0XHRwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShjaGFuZ2UuZWxlbWVudCwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2NoYW5nZS5pbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRuZXdDYWNoZWRbY2hhbmdlLmluZGV4XSA9IGNhY2hlZFtjaGFuZ2UuaW5kZXhdXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhY2hlZCA9IG5ld0NhY2hlZDtcclxuXHRcdFx0XHRjYWNoZWQubm9kZXMgPSBbXTtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgY2hpbGQ7IGNoaWxkID0gcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2ldOyBpKyspIGNhY2hlZC5ub2Rlcy5wdXNoKGNoaWxkKVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vZW5kIGtleSBhbGdvcml0aG1cclxuXHJcblx0XHRcdGZvciAodmFyIGkgPSAwLCBjYWNoZUNvdW50ID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHQvL2RpZmYgZWFjaCBpdGVtIGluIHRoZSBhcnJheVxyXG5cdFx0XHRcdHZhciBpdGVtID0gYnVpbGQocGFyZW50RWxlbWVudCwgcGFyZW50VGFnLCBjYWNoZWQsIGluZGV4LCBkYXRhW2ldLCBjYWNoZWRbY2FjaGVDb3VudF0sIHNob3VsZFJlYXR0YWNoLCBpbmRleCArIHN1YkFycmF5Q291bnQgfHwgc3ViQXJyYXlDb3VudCwgZWRpdGFibGUsIG5hbWVzcGFjZSwgY29uZmlncyk7XHJcblx0XHRcdFx0aWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcblx0XHRcdFx0aWYgKCFpdGVtLm5vZGVzLmludGFjdCkgaW50YWN0ID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKGl0ZW0uJHRydXN0ZWQpIHtcclxuXHRcdFx0XHRcdC8vZml4IG9mZnNldCBvZiBuZXh0IGVsZW1lbnQgaWYgaXRlbSB3YXMgYSB0cnVzdGVkIHN0cmluZyB3LyBtb3JlIHRoYW4gb25lIGh0bWwgZWxlbWVudFxyXG5cdFx0XHRcdFx0Ly90aGUgZmlyc3QgY2xhdXNlIGluIHRoZSByZWdleHAgbWF0Y2hlcyBlbGVtZW50c1xyXG5cdFx0XHRcdFx0Ly90aGUgc2Vjb25kIGNsYXVzZSAoYWZ0ZXIgdGhlIHBpcGUpIG1hdGNoZXMgdGV4dCBub2Rlc1xyXG5cdFx0XHRcdFx0c3ViQXJyYXlDb3VudCArPSAoaXRlbS5tYXRjaCgvPFteXFwvXXxcXD5cXHMqW148XS9nKSB8fCBbXSkubGVuZ3RoXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Ugc3ViQXJyYXlDb3VudCArPSB0eXBlLmNhbGwoaXRlbSkgPT0gQVJSQVkgPyBpdGVtLmxlbmd0aCA6IDE7XHJcblx0XHRcdFx0Y2FjaGVkW2NhY2hlQ291bnQrK10gPSBpdGVtXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFpbnRhY3QpIHtcclxuXHRcdFx0XHQvL2RpZmYgdGhlIGFycmF5IGl0c2VsZlxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSBsaXN0IG9mIERPTSBub2RlcyBieSBjb2xsZWN0aW5nIHRoZSBub2RlcyBmcm9tIGVhY2ggaXRlbVxyXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGNhY2hlZFtpXSAhPSBudWxsKSBub2Rlcy5wdXNoLmFwcGx5KG5vZGVzLCBjYWNoZWRbaV0ubm9kZXMpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vcmVtb3ZlIGl0ZW1zIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkgaWYgdGhlIG5ldyBhcnJheSBpcyBzaG9ydGVyIHRoYW4gdGhlIG9sZCBvbmVcclxuXHRcdFx0XHQvL2lmIGVycm9ycyBldmVyIGhhcHBlbiBoZXJlLCB0aGUgaXNzdWUgaXMgbW9zdCBsaWtlbHkgYSBidWcgaW4gdGhlIGNvbnN0cnVjdGlvbiBvZiB0aGUgYGNhY2hlZGAgZGF0YSBzdHJ1Y3R1cmUgc29tZXdoZXJlIGVhcmxpZXIgaW4gdGhlIHByb2dyYW1cclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IGNhY2hlZC5ub2Rlc1tpXTsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAobm9kZS5wYXJlbnROb2RlICE9IG51bGwgJiYgbm9kZXMuaW5kZXhPZihub2RlKSA8IDApIGNsZWFyKFtub2RlXSwgW2NhY2hlZFtpXV0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChkYXRhLmxlbmd0aCA8IGNhY2hlZC5sZW5ndGgpIGNhY2hlZC5sZW5ndGggPSBkYXRhLmxlbmd0aDtcclxuXHRcdFx0XHRjYWNoZWQubm9kZXMgPSBub2Rlc1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChkYXRhICE9IG51bGwgJiYgZGF0YVR5cGUgPT0gT0JKRUNUKSB7XHJcblx0XHRcdGlmICghZGF0YS5hdHRycykgZGF0YS5hdHRycyA9IHt9O1xyXG5cdFx0XHRpZiAoIWNhY2hlZC5hdHRycykgY2FjaGVkLmF0dHJzID0ge307XHJcblxyXG5cdFx0XHR2YXIgZGF0YUF0dHJLZXlzID0gT2JqZWN0LmtleXMoZGF0YS5hdHRycyk7XHJcblx0XHRcdHZhciBoYXNLZXlzID0gZGF0YUF0dHJLZXlzLmxlbmd0aCA+IChcImtleVwiIGluIGRhdGEuYXR0cnMgPyAxIDogMClcclxuXHRcdFx0Ly9pZiBhbiBlbGVtZW50IGlzIGRpZmZlcmVudCBlbm91Z2ggZnJvbSB0aGUgb25lIGluIGNhY2hlLCByZWNyZWF0ZSBpdFxyXG5cdFx0XHRpZiAoZGF0YS50YWcgIT0gY2FjaGVkLnRhZyB8fCBkYXRhQXR0cktleXMuam9pbigpICE9IE9iamVjdC5rZXlzKGNhY2hlZC5hdHRycykuam9pbigpIHx8IGRhdGEuYXR0cnMuaWQgIT0gY2FjaGVkLmF0dHJzLmlkKSB7XHJcblx0XHRcdFx0aWYgKGNhY2hlZC5ub2Rlcy5sZW5ndGgpIGNsZWFyKGNhY2hlZC5ub2Rlcyk7XHJcblx0XHRcdFx0aWYgKGNhY2hlZC5jb25maWdDb250ZXh0ICYmIHR5cGVvZiBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCA9PSBGVU5DVElPTikgY2FjaGVkLmNvbmZpZ0NvbnRleHQub251bmxvYWQoKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlLmNhbGwoZGF0YS50YWcpICE9IFNUUklORykgcmV0dXJuO1xyXG5cclxuXHRcdFx0dmFyIG5vZGUsIGlzTmV3ID0gY2FjaGVkLm5vZGVzLmxlbmd0aCA9PT0gMDtcclxuXHRcdFx0aWYgKGRhdGEuYXR0cnMueG1sbnMpIG5hbWVzcGFjZSA9IGRhdGEuYXR0cnMueG1sbnM7XHJcblx0XHRcdGVsc2UgaWYgKGRhdGEudGFnID09PSBcInN2Z1wiKSBuYW1lc3BhY2UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XHJcblx0XHRcdGVsc2UgaWYgKGRhdGEudGFnID09PSBcIm1hdGhcIikgbmFtZXNwYWNlID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MXCI7XHJcblx0XHRcdGlmIChpc05ldykge1xyXG5cdFx0XHRcdGlmIChkYXRhLmF0dHJzLmlzKSBub2RlID0gbmFtZXNwYWNlID09PSB1bmRlZmluZWQgPyAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhLnRhZywgZGF0YS5hdHRycy5pcykgOiAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgZGF0YS50YWcsIGRhdGEuYXR0cnMuaXMpO1xyXG5cdFx0XHRcdGVsc2Ugbm9kZSA9IG5hbWVzcGFjZSA9PT0gdW5kZWZpbmVkID8gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGF0YS50YWcpIDogJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lc3BhY2UsIGRhdGEudGFnKTtcclxuXHRcdFx0XHRjYWNoZWQgPSB7XHJcblx0XHRcdFx0XHR0YWc6IGRhdGEudGFnLFxyXG5cdFx0XHRcdFx0Ly9zZXQgYXR0cmlidXRlcyBmaXJzdCwgdGhlbiBjcmVhdGUgY2hpbGRyZW5cclxuXHRcdFx0XHRcdGF0dHJzOiBkYXRhQXR0cktleXMubGVuZ3RoID8gc2V0QXR0cmlidXRlcyhub2RlLCBkYXRhLnRhZywgZGF0YS5hdHRycywge30sIG5hbWVzcGFjZSkgOiB7fSxcclxuXHRcdFx0XHRcdGNoaWxkcmVuOiBkYXRhLmNoaWxkcmVuICE9IG51bGwgJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwID9cclxuXHRcdFx0XHRcdFx0YnVpbGQobm9kZSwgZGF0YS50YWcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBkYXRhLmNoaWxkcmVuLCBjYWNoZWQuY2hpbGRyZW4sIHRydWUsIDAsIGRhdGEuYXR0cnMuY29udGVudGVkaXRhYmxlID8gbm9kZSA6IGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpIDpcclxuXHRcdFx0XHRcdFx0ZGF0YS5jaGlsZHJlbixcclxuXHRcdFx0XHRcdG5vZGVzOiBbbm9kZV1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGlmIChjYWNoZWQuY2hpbGRyZW4gJiYgIWNhY2hlZC5jaGlsZHJlbi5ub2RlcykgY2FjaGVkLmNoaWxkcmVuLm5vZGVzID0gW107XHJcblx0XHRcdFx0Ly9lZGdlIGNhc2U6IHNldHRpbmcgdmFsdWUgb24gPHNlbGVjdD4gZG9lc24ndCB3b3JrIGJlZm9yZSBjaGlsZHJlbiBleGlzdCwgc28gc2V0IGl0IGFnYWluIGFmdGVyIGNoaWxkcmVuIGhhdmUgYmVlbiBjcmVhdGVkXHJcblx0XHRcdFx0aWYgKGRhdGEudGFnID09IFwic2VsZWN0XCIgJiYgZGF0YS5hdHRycy52YWx1ZSkgc2V0QXR0cmlidXRlcyhub2RlLCBkYXRhLnRhZywge3ZhbHVlOiBkYXRhLmF0dHJzLnZhbHVlfSwge30sIG5hbWVzcGFjZSk7XHJcblx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdG5vZGUgPSBjYWNoZWQubm9kZXNbMF07XHJcblx0XHRcdFx0aWYgKGRhdGFBdHRyS2V5cy5sZW5ndGgpIHNldEF0dHJpYnV0ZXMobm9kZSwgZGF0YS50YWcsIGRhdGEuYXR0cnMsIGNhY2hlZC5hdHRycywgbmFtZXNwYWNlKTtcclxuXHRcdFx0XHRjYWNoZWQuY2hpbGRyZW4gPSBidWlsZChub2RlLCBkYXRhLnRhZywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGRhdGEuY2hpbGRyZW4sIGNhY2hlZC5jaGlsZHJlbiwgZmFsc2UsIDAsIGRhdGEuYXR0cnMuY29udGVudGVkaXRhYmxlID8gbm9kZSA6IGVkaXRhYmxlLCBuYW1lc3BhY2UsIGNvbmZpZ3MpO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2Rlcy5pbnRhY3QgPSB0cnVlO1xyXG5cdFx0XHRcdGlmIChzaG91bGRSZWF0dGFjaCA9PT0gdHJ1ZSAmJiBub2RlICE9IG51bGwpIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbClcclxuXHRcdFx0fVxyXG5cdFx0XHQvL3NjaGVkdWxlIGNvbmZpZ3MgdG8gYmUgY2FsbGVkLiBUaGV5IGFyZSBjYWxsZWQgYWZ0ZXIgYGJ1aWxkYCBmaW5pc2hlcyBydW5uaW5nXHJcblx0XHRcdGlmICh0eXBlb2YgZGF0YS5hdHRyc1tcImNvbmZpZ1wiXSA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRcdHZhciBjb250ZXh0ID0gY2FjaGVkLmNvbmZpZ0NvbnRleHQgPSBjYWNoZWQuY29uZmlnQ29udGV4dCB8fCB7fTtcclxuXHJcblx0XHRcdFx0Ly8gYmluZFxyXG5cdFx0XHRcdHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKGRhdGEsIGFyZ3MpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEuYXR0cnNbXCJjb25maWdcIl0uYXBwbHkoZGF0YSwgYXJncylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGNvbmZpZ3MucHVzaChjYWxsYmFjayhkYXRhLCBbbm9kZSwgIWlzTmV3LCBjb250ZXh0LCBjYWNoZWRdKSlcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodHlwZW9mIGRhdGFUeXBlICE9IEZVTkNUSU9OKSB7XHJcblx0XHRcdC8vaGFuZGxlIHRleHQgbm9kZXNcclxuXHRcdFx0dmFyIG5vZGVzO1xyXG5cdFx0XHRpZiAoY2FjaGVkLm5vZGVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdGlmIChkYXRhLiR0cnVzdGVkKSB7XHJcblx0XHRcdFx0XHRub2RlcyA9IGluamVjdEhUTUwocGFyZW50RWxlbWVudCwgaW5kZXgsIGRhdGEpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0bm9kZXMgPSBbJGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpXTtcclxuXHRcdFx0XHRcdGlmICghcGFyZW50RWxlbWVudC5ub2RlTmFtZS5tYXRjaCh2b2lkRWxlbWVudHMpKSBwYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShub2Rlc1swXSwgcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSB8fCBudWxsKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYWNoZWQgPSBcInN0cmluZyBudW1iZXIgYm9vbGVhblwiLmluZGV4T2YodHlwZW9mIGRhdGEpID4gLTEgPyBuZXcgZGF0YS5jb25zdHJ1Y3RvcihkYXRhKSA6IGRhdGE7XHJcblx0XHRcdFx0Y2FjaGVkLm5vZGVzID0gbm9kZXNcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChjYWNoZWQudmFsdWVPZigpICE9PSBkYXRhLnZhbHVlT2YoKSB8fCBzaG91bGRSZWF0dGFjaCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdG5vZGVzID0gY2FjaGVkLm5vZGVzO1xyXG5cdFx0XHRcdGlmICghZWRpdGFibGUgfHwgZWRpdGFibGUgIT09ICRkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRpZiAoZGF0YS4kdHJ1c3RlZCkge1xyXG5cdFx0XHRcdFx0XHRjbGVhcihub2RlcywgY2FjaGVkKTtcclxuXHRcdFx0XHRcdFx0bm9kZXMgPSBpbmplY3RIVE1MKHBhcmVudEVsZW1lbnQsIGluZGV4LCBkYXRhKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vY29ybmVyIGNhc2U6IHJlcGxhY2luZyB0aGUgbm9kZVZhbHVlIG9mIGEgdGV4dCBub2RlIHRoYXQgaXMgYSBjaGlsZCBvZiBhIHRleHRhcmVhL2NvbnRlbnRlZGl0YWJsZSBkb2Vzbid0IHdvcmtcclxuXHRcdFx0XHRcdFx0Ly93ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgdmFsdWUgcHJvcGVydHkgb2YgdGhlIHBhcmVudCB0ZXh0YXJlYSBvciB0aGUgaW5uZXJIVE1MIG9mIHRoZSBjb250ZW50ZWRpdGFibGUgZWxlbWVudCBpbnN0ZWFkXHJcblx0XHRcdFx0XHRcdGlmIChwYXJlbnRUYWcgPT09IFwidGV4dGFyZWFcIikgcGFyZW50RWxlbWVudC52YWx1ZSA9IGRhdGE7XHJcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGVkaXRhYmxlKSBlZGl0YWJsZS5pbm5lckhUTUwgPSBkYXRhO1xyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbMF0ubm9kZVR5cGUgPT0gMSB8fCBub2Rlcy5sZW5ndGggPiAxKSB7IC8vd2FzIGEgdHJ1c3RlZCBzdHJpbmdcclxuXHRcdFx0XHRcdFx0XHRcdGNsZWFyKGNhY2hlZC5ub2RlcywgY2FjaGVkKTtcclxuXHRcdFx0XHRcdFx0XHRcdG5vZGVzID0gWyRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKV1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUobm9kZXNbMF0sIHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbCk7XHJcblx0XHRcdFx0XHRcdFx0bm9kZXNbMF0ubm9kZVZhbHVlID0gZGF0YVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhY2hlZCA9IG5ldyBkYXRhLmNvbnN0cnVjdG9yKGRhdGEpO1xyXG5cdFx0XHRcdGNhY2hlZC5ub2RlcyA9IG5vZGVzXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBjYWNoZWQubm9kZXMuaW50YWN0ID0gdHJ1ZVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjYWNoZWRcclxuXHR9XHJcblx0ZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhub2RlLCB0YWcsIGRhdGFBdHRycywgY2FjaGVkQXR0cnMsIG5hbWVzcGFjZSkge1xyXG5cdFx0Zm9yICh2YXIgYXR0ck5hbWUgaW4gZGF0YUF0dHJzKSB7XHJcblx0XHRcdHZhciBkYXRhQXR0ciA9IGRhdGFBdHRyc1thdHRyTmFtZV07XHJcblx0XHRcdHZhciBjYWNoZWRBdHRyID0gY2FjaGVkQXR0cnNbYXR0ck5hbWVdO1xyXG5cdFx0XHRpZiAoIShhdHRyTmFtZSBpbiBjYWNoZWRBdHRycykgfHwgKGNhY2hlZEF0dHIgIT09IGRhdGFBdHRyKSkge1xyXG5cdFx0XHRcdGNhY2hlZEF0dHJzW2F0dHJOYW1lXSA9IGRhdGFBdHRyO1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHQvL2Bjb25maWdgIGlzbid0IGEgcmVhbCBhdHRyaWJ1dGVzLCBzbyBpZ25vcmUgaXRcclxuXHRcdFx0XHRcdC8vd2UgZG9uJ3QgaWdub3JlIGBrZXlgIGJlY2F1c2UgaXQgbXVzdCBiZSB1bmlxdWUgYW5kIGhhdmluZyBpdCBvbiB0aGUgRE9NIGhlbHBzIGRlYnVnZ2luZ1xyXG5cdFx0XHRcdFx0aWYgKGF0dHJOYW1lID09PSBcImNvbmZpZ1wiKSBjb250aW51ZTtcclxuXHRcdFx0XHRcdC8vaG9vayBldmVudCBoYW5kbGVycyB0byB0aGUgYXV0by1yZWRyYXdpbmcgc3lzdGVtXHJcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGF0YUF0dHIgPT0gRlVOQ1RJT04gJiYgYXR0ck5hbWUuaW5kZXhPZihcIm9uXCIpID09IDApIHtcclxuXHRcdFx0XHRcdFx0bm9kZVthdHRyTmFtZV0gPSBhdXRvcmVkcmF3KGRhdGFBdHRyLCBub2RlKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly9oYW5kbGUgYHN0eWxlOiB7Li4ufWBcclxuXHRcdFx0XHRcdGVsc2UgaWYgKGF0dHJOYW1lID09PSBcInN0eWxlXCIgJiYgZGF0YUF0dHIgIT0gbnVsbCAmJiB0eXBlLmNhbGwoZGF0YUF0dHIpID09IE9CSkVDVCkge1xyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBydWxlIGluIGRhdGFBdHRyKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNhY2hlZEF0dHIgPT0gbnVsbCB8fCBjYWNoZWRBdHRyW3J1bGVdICE9PSBkYXRhQXR0cltydWxlXSkgbm9kZS5zdHlsZVtydWxlXSA9IGRhdGFBdHRyW3J1bGVdXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgcnVsZSBpbiBjYWNoZWRBdHRyKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCEocnVsZSBpbiBkYXRhQXR0cikpIG5vZGUuc3R5bGVbcnVsZV0gPSBcIlwiXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vaGFuZGxlIFNWR1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiAobmFtZXNwYWNlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGF0dHJOYW1lID09PSBcImhyZWZcIikgbm9kZS5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiwgXCJocmVmXCIsIGRhdGFBdHRyKTtcclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ck5hbWUgPT09IFwiY2xhc3NOYW1lXCIpIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZGF0YUF0dHIpO1xyXG5cdFx0XHRcdFx0XHRlbHNlIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBkYXRhQXR0cilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vaGFuZGxlIGNhc2VzIHRoYXQgYXJlIHByb3BlcnRpZXMgKGJ1dCBpZ25vcmUgY2FzZXMgd2hlcmUgd2Ugc2hvdWxkIHVzZSBzZXRBdHRyaWJ1dGUgaW5zdGVhZClcclxuXHRcdFx0XHRcdC8vLSBsaXN0IGFuZCBmb3JtIGFyZSB0eXBpY2FsbHkgdXNlZCBhcyBzdHJpbmdzLCBidXQgYXJlIERPTSBlbGVtZW50IHJlZmVyZW5jZXMgaW4ganNcclxuXHRcdFx0XHRcdC8vLSB3aGVuIHVzaW5nIENTUyBzZWxlY3RvcnMgKGUuZy4gYG0oXCJbc3R5bGU9JyddXCIpYCksIHN0eWxlIGlzIHVzZWQgYXMgYSBzdHJpbmcsIGJ1dCBpdCdzIGFuIG9iamVjdCBpbiBqc1xyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoYXR0ck5hbWUgaW4gbm9kZSAmJiAhKGF0dHJOYW1lID09IFwibGlzdFwiIHx8IGF0dHJOYW1lID09IFwic3R5bGVcIiB8fCBhdHRyTmFtZSA9PSBcImZvcm1cIikpIHtcclxuXHRcdFx0XHRcdFx0Ly8jMzQ4IGRvbid0IHNldCB0aGUgdmFsdWUgaWYgbm90IG5lZWRlZCBvdGhlcndpc2UgY3Vyc29yIHBsYWNlbWVudCBicmVha3MgaW4gQ2hyb21lXHJcblx0XHRcdFx0XHRcdGlmIChub2RlW2F0dHJOYW1lXSAhPSBkYXRhQXR0cikgbm9kZVthdHRyTmFtZV0gPSBkYXRhQXR0clxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBub2RlLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgZGF0YUF0dHIpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHQvL3N3YWxsb3cgSUUncyBpbnZhbGlkIGFyZ3VtZW50IGVycm9ycyB0byBtaW1pYyBIVE1MJ3MgZmFsbGJhY2stdG8tZG9pbmctbm90aGluZy1vbi1pbnZhbGlkLWF0dHJpYnV0ZXMgYmVoYXZpb3JcclxuXHRcdFx0XHRcdGlmIChlLm1lc3NhZ2UuaW5kZXhPZihcIkludmFsaWQgYXJndW1lbnRcIikgPCAwKSB0aHJvdyBlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIzM0OCBkYXRhQXR0ciBtYXkgbm90IGJlIGEgc3RyaW5nLCBzbyB1c2UgbG9vc2UgY29tcGFyaXNvbiAoZG91YmxlIGVxdWFsKSBpbnN0ZWFkIG9mIHN0cmljdCAodHJpcGxlIGVxdWFsKVxyXG5cdFx0XHRlbHNlIGlmIChhdHRyTmFtZSA9PT0gXCJ2YWx1ZVwiICYmIHRhZyA9PT0gXCJpbnB1dFwiICYmIG5vZGUudmFsdWUgIT0gZGF0YUF0dHIpIHtcclxuXHRcdFx0XHRub2RlLnZhbHVlID0gZGF0YUF0dHJcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhY2hlZEF0dHJzXHJcblx0fVxyXG5cdGZ1bmN0aW9uIGNsZWFyKG5vZGVzLCBjYWNoZWQpIHtcclxuXHRcdGZvciAodmFyIGkgPSBub2Rlcy5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xyXG5cdFx0XHRpZiAobm9kZXNbaV0gJiYgbm9kZXNbaV0ucGFyZW50Tm9kZSkge1xyXG5cdFx0XHRcdHRyeSB7bm9kZXNbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2Rlc1tpXSl9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHt9IC8vaWdub3JlIGlmIHRoaXMgZmFpbHMgZHVlIHRvIG9yZGVyIG9mIGV2ZW50cyAoc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE5MjYwODMvZmFpbGVkLXRvLWV4ZWN1dGUtcmVtb3ZlY2hpbGQtb24tbm9kZSlcclxuXHRcdFx0XHRjYWNoZWQgPSBbXS5jb25jYXQoY2FjaGVkKTtcclxuXHRcdFx0XHRpZiAoY2FjaGVkW2ldKSB1bmxvYWQoY2FjaGVkW2ldKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAobm9kZXMubGVuZ3RoICE9IDApIG5vZGVzLmxlbmd0aCA9IDBcclxuXHR9XHJcblx0ZnVuY3Rpb24gdW5sb2FkKGNhY2hlZCkge1xyXG5cdFx0aWYgKGNhY2hlZC5jb25maWdDb250ZXh0ICYmIHR5cGVvZiBjYWNoZWQuY29uZmlnQ29udGV4dC5vbnVubG9hZCA9PSBGVU5DVElPTikgY2FjaGVkLmNvbmZpZ0NvbnRleHQub251bmxvYWQoKTtcclxuXHRcdGlmIChjYWNoZWQuY2hpbGRyZW4pIHtcclxuXHRcdFx0aWYgKHR5cGUuY2FsbChjYWNoZWQuY2hpbGRyZW4pID09IEFSUkFZKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZWQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHVubG9hZChjYWNoZWQuY2hpbGRyZW5baV0pXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoY2FjaGVkLmNoaWxkcmVuLnRhZykgdW5sb2FkKGNhY2hlZC5jaGlsZHJlbilcclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gaW5qZWN0SFRNTChwYXJlbnRFbGVtZW50LCBpbmRleCwgZGF0YSkge1xyXG5cdFx0dmFyIG5leHRTaWJsaW5nID0gcGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XTtcclxuXHRcdGlmIChuZXh0U2libGluZykge1xyXG5cdFx0XHR2YXIgaXNFbGVtZW50ID0gbmV4dFNpYmxpbmcubm9kZVR5cGUgIT0gMTtcclxuXHRcdFx0dmFyIHBsYWNlaG9sZGVyID0gJGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0XHRpZiAoaXNFbGVtZW50KSB7XHJcblx0XHRcdFx0cGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUocGxhY2Vob2xkZXIsIG5leHRTaWJsaW5nIHx8IG51bGwpO1xyXG5cdFx0XHRcdHBsYWNlaG9sZGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGRhdGEpO1xyXG5cdFx0XHRcdHBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBuZXh0U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLCBkYXRhKVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBwYXJlbnRFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBkYXRhKTtcclxuXHRcdHZhciBub2RlcyA9IFtdO1xyXG5cdFx0d2hpbGUgKHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1tpbmRleF0gIT09IG5leHRTaWJsaW5nKSB7XHJcblx0XHRcdG5vZGVzLnB1c2gocGFyZW50RWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRcdGluZGV4KytcclxuXHRcdH1cclxuXHRcdHJldHVybiBub2Rlc1xyXG5cdH1cclxuXHRmdW5jdGlvbiBhdXRvcmVkcmF3KGNhbGxiYWNrLCBvYmplY3QpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cdFx0XHRtLnJlZHJhdy5zdHJhdGVneShcImRpZmZcIik7XHJcblx0XHRcdG0uc3RhcnRDb21wdXRhdGlvbigpO1xyXG5cdFx0XHR0cnkge3JldHVybiBjYWxsYmFjay5jYWxsKG9iamVjdCwgZSl9XHJcblx0XHRcdGZpbmFsbHkge1xyXG5cdFx0XHRcdG0uZW5kQ29tcHV0YXRpb24oKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR2YXIgaHRtbDtcclxuXHR2YXIgZG9jdW1lbnROb2RlID0ge1xyXG5cdFx0YXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKG5vZGUpIHtcclxuXHRcdFx0aWYgKGh0bWwgPT09IHVuZGVmaW5lZCkgaHRtbCA9ICRkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHRtbFwiKTtcclxuXHRcdFx0aWYgKCRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAhPT0gbm9kZSkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC5yZXBsYWNlQ2hpbGQobm9kZSwgJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlICRkb2N1bWVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuXHRcdFx0dGhpcy5jaGlsZE5vZGVzID0gJGRvY3VtZW50LmNoaWxkTm9kZXNcclxuXHRcdH0sXHJcblx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKG5vZGUpIHtcclxuXHRcdFx0dGhpcy5hcHBlbmRDaGlsZChub2RlKVxyXG5cdFx0fSxcclxuXHRcdGNoaWxkTm9kZXM6IFtdXHJcblx0fTtcclxuXHR2YXIgbm9kZUNhY2hlID0gW10sIGNlbGxDYWNoZSA9IHt9O1xyXG5cdG0ucmVuZGVyID0gZnVuY3Rpb24ocm9vdCwgY2VsbCwgZm9yY2VSZWNyZWF0aW9uKSB7XHJcblx0XHR2YXIgY29uZmlncyA9IFtdO1xyXG5cdFx0aWYgKCFyb290KSB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgZW5zdXJlIHRoZSBET00gZWxlbWVudCBleGlzdHMgYmVmb3JlIHJlbmRlcmluZyBhIHRlbXBsYXRlIGludG8gaXQuXCIpO1xyXG5cdFx0dmFyIGlkID0gZ2V0Q2VsbENhY2hlS2V5KHJvb3QpO1xyXG5cdFx0dmFyIGlzRG9jdW1lbnRSb290ID0gcm9vdCA9PSAkZG9jdW1lbnQ7XHJcblx0XHR2YXIgbm9kZSA9IGlzRG9jdW1lbnRSb290IHx8IHJvb3QgPT0gJGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50Tm9kZSA6IHJvb3Q7XHJcblx0XHRpZiAoaXNEb2N1bWVudFJvb3QgJiYgY2VsbC50YWcgIT0gXCJodG1sXCIpIGNlbGwgPSB7dGFnOiBcImh0bWxcIiwgYXR0cnM6IHt9LCBjaGlsZHJlbjogY2VsbH07XHJcblx0XHRpZiAoY2VsbENhY2hlW2lkXSA9PT0gdW5kZWZpbmVkKSBjbGVhcihub2RlLmNoaWxkTm9kZXMpO1xyXG5cdFx0aWYgKGZvcmNlUmVjcmVhdGlvbiA9PT0gdHJ1ZSkgcmVzZXQocm9vdCk7XHJcblx0XHRjZWxsQ2FjaGVbaWRdID0gYnVpbGQobm9kZSwgbnVsbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNlbGwsIGNlbGxDYWNoZVtpZF0sIGZhbHNlLCAwLCBudWxsLCB1bmRlZmluZWQsIGNvbmZpZ3MpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb25maWdzLmxlbmd0aDsgaSsrKSBjb25maWdzW2ldKClcclxuXHR9O1xyXG5cdGZ1bmN0aW9uIGdldENlbGxDYWNoZUtleShlbGVtZW50KSB7XHJcblx0XHR2YXIgaW5kZXggPSBub2RlQ2FjaGUuaW5kZXhPZihlbGVtZW50KTtcclxuXHRcdHJldHVybiBpbmRleCA8IDAgPyBub2RlQ2FjaGUucHVzaChlbGVtZW50KSAtIDEgOiBpbmRleFxyXG5cdH1cclxuXHJcblx0bS50cnVzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHR2YWx1ZSA9IG5ldyBTdHJpbmcodmFsdWUpO1xyXG5cdFx0dmFsdWUuJHRydXN0ZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIHZhbHVlXHJcblx0fTtcclxuXHJcblx0ZnVuY3Rpb24gZ2V0dGVyc2V0dGVyKHN0b3JlKSB7XHJcblx0XHR2YXIgcHJvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCkgc3RvcmUgPSBhcmd1bWVudHNbMF07XHJcblx0XHRcdHJldHVybiBzdG9yZVxyXG5cdFx0fTtcclxuXHJcblx0XHRwcm9wLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gc3RvcmVcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHByb3BcclxuXHR9XHJcblxyXG5cdG0ucHJvcCA9IGZ1bmN0aW9uIChzdG9yZSkge1xyXG5cdFx0Ly9ub3RlOiB1c2luZyBub24tc3RyaWN0IGVxdWFsaXR5IGNoZWNrIGhlcmUgYmVjYXVzZSB3ZSdyZSBjaGVja2luZyBpZiBzdG9yZSBpcyBudWxsIE9SIHVuZGVmaW5lZFxyXG5cdFx0aWYgKCgoc3RvcmUgIT0gbnVsbCAmJiB0eXBlLmNhbGwoc3RvcmUpID09IE9CSkVDVCkgfHwgdHlwZW9mIHN0b3JlID09IEZVTkNUSU9OKSAmJiB0eXBlb2Ygc3RvcmUudGhlbiA9PSBGVU5DVElPTikge1xyXG5cdFx0XHRyZXR1cm4gcHJvcGlmeShzdG9yZSlcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZ2V0dGVyc2V0dGVyKHN0b3JlKVxyXG5cdH07XHJcblxyXG5cdHZhciByb290cyA9IFtdLCBtb2R1bGVzID0gW10sIGNvbnRyb2xsZXJzID0gW10sIGxhc3RSZWRyYXdJZCA9IG51bGwsIGxhc3RSZWRyYXdDYWxsVGltZSA9IDAsIGNvbXB1dGVQb3N0UmVkcmF3SG9vayA9IG51bGwsIHByZXZlbnRlZCA9IGZhbHNlLCB0b3BNb2R1bGU7XHJcblx0dmFyIEZSQU1FX0JVREdFVCA9IDE2OyAvLzYwIGZyYW1lcyBwZXIgc2Vjb25kID0gMSBjYWxsIHBlciAxNiBtc1xyXG5cdG0ubW9kdWxlID0gZnVuY3Rpb24ocm9vdCwgbW9kdWxlKSB7XHJcblx0XHR2YXIgaW5kZXggPSByb290cy5pbmRleE9mKHJvb3QpO1xyXG5cdFx0aWYgKGluZGV4IDwgMCkgaW5kZXggPSByb290cy5sZW5ndGg7XHJcblx0XHR2YXIgaXNQcmV2ZW50ZWQgPSBmYWxzZTtcclxuXHRcdGlmIChjb250cm9sbGVyc1tpbmRleF0gJiYgdHlwZW9mIGNvbnRyb2xsZXJzW2luZGV4XS5vbnVubG9hZCA9PSBGVU5DVElPTikge1xyXG5cdFx0XHR2YXIgZXZlbnQgPSB7XHJcblx0XHRcdFx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge2lzUHJldmVudGVkID0gdHJ1ZX1cclxuXHRcdFx0fTtcclxuXHRcdFx0Y29udHJvbGxlcnNbaW5kZXhdLm9udW5sb2FkKGV2ZW50KVxyXG5cdFx0fVxyXG5cdFx0aWYgKCFpc1ByZXZlbnRlZCkge1xyXG5cdFx0XHRtLnJlZHJhdy5zdHJhdGVneShcImFsbFwiKTtcclxuXHRcdFx0bS5zdGFydENvbXB1dGF0aW9uKCk7XHJcblx0XHRcdHJvb3RzW2luZGV4XSA9IHJvb3Q7XHJcblx0XHRcdHZhciBjdXJyZW50TW9kdWxlID0gdG9wTW9kdWxlID0gbW9kdWxlO1xyXG5cdFx0XHR2YXIgY29udHJvbGxlciA9IG5ldyBtb2R1bGUuY29udHJvbGxlcjtcclxuXHRcdFx0Ly9jb250cm9sbGVycyBtYXkgY2FsbCBtLm1vZHVsZSByZWN1cnNpdmVseSAodmlhIG0ucm91dGUgcmVkaXJlY3RzLCBmb3IgZXhhbXBsZSlcclxuXHRcdFx0Ly90aGlzIGNvbmRpdGlvbmFsIGVuc3VyZXMgb25seSB0aGUgbGFzdCByZWN1cnNpdmUgbS5tb2R1bGUgY2FsbCBpcyBhcHBsaWVkXHJcblx0XHRcdGlmIChjdXJyZW50TW9kdWxlID09IHRvcE1vZHVsZSkge1xyXG5cdFx0XHRcdGNvbnRyb2xsZXJzW2luZGV4XSA9IGNvbnRyb2xsZXI7XHJcblx0XHRcdFx0bW9kdWxlc1tpbmRleF0gPSBtb2R1bGVcclxuXHRcdFx0fVxyXG5cdFx0XHRtLmVuZENvbXB1dGF0aW9uKCk7XHJcblx0XHRcdHJldHVybiBjb250cm9sbGVyc1tpbmRleF1cclxuXHRcdH1cclxuXHR9O1xyXG5cdG0ucmVkcmF3ID0gZnVuY3Rpb24oZm9yY2UpIHtcclxuXHRcdC8vbGFzdFJlZHJhd0lkIGlzIGEgcG9zaXRpdmUgbnVtYmVyIGlmIGEgc2Vjb25kIHJlZHJhdyBpcyByZXF1ZXN0ZWQgYmVmb3JlIHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZVxyXG5cdFx0Ly9sYXN0UmVkcmF3SUQgaXMgbnVsbCBpZiBpdCdzIHRoZSBmaXJzdCByZWRyYXcgYW5kIG5vdCBhbiBldmVudCBoYW5kbGVyXHJcblx0XHRpZiAobGFzdFJlZHJhd0lkICYmIGZvcmNlICE9PSB0cnVlKSB7XHJcblx0XHRcdC8vd2hlbiBzZXRUaW1lb3V0OiBvbmx5IHJlc2NoZWR1bGUgcmVkcmF3IGlmIHRpbWUgYmV0d2VlbiBub3cgYW5kIHByZXZpb3VzIHJlZHJhdyBpcyBiaWdnZXIgdGhhbiBhIGZyYW1lLCBvdGhlcndpc2Uga2VlcCBjdXJyZW50bHkgc2NoZWR1bGVkIHRpbWVvdXRcclxuXHRcdFx0Ly93aGVuIHJBRjogYWx3YXlzIHJlc2NoZWR1bGUgcmVkcmF3XHJcblx0XHRcdGlmIChuZXcgRGF0ZSAtIGxhc3RSZWRyYXdDYWxsVGltZSA+IEZSQU1FX0JVREdFVCB8fCAkcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuXHRcdFx0XHRpZiAobGFzdFJlZHJhd0lkID4gMCkgJGNhbmNlbEFuaW1hdGlvbkZyYW1lKGxhc3RSZWRyYXdJZCk7XHJcblx0XHRcdFx0bGFzdFJlZHJhd0lkID0gJHJlcXVlc3RBbmltYXRpb25GcmFtZShyZWRyYXcsIEZSQU1FX0JVREdFVClcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJlZHJhdygpO1xyXG5cdFx0XHRsYXN0UmVkcmF3SWQgPSAkcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge2xhc3RSZWRyYXdJZCA9IG51bGx9LCBGUkFNRV9CVURHRVQpXHJcblx0XHR9XHJcblx0fTtcclxuXHRtLnJlZHJhdy5zdHJhdGVneSA9IG0ucHJvcCgpO1xyXG5cdGZ1bmN0aW9uIHJlZHJhdygpIHtcclxuXHRcdHZhciBtb2RlID0gbS5yZWRyYXcuc3RyYXRlZ3koKTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcm9vdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKGNvbnRyb2xsZXJzW2ldICYmIG1vZGUgIT0gXCJub25lXCIpIHtcclxuXHRcdFx0XHRtLnJlbmRlcihyb290c1tpXSwgbW9kdWxlc1tpXS52aWV3KGNvbnRyb2xsZXJzW2ldKSwgbW9kZSA9PSBcImFsbFwiKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvL2FmdGVyIHJlbmRlcmluZyB3aXRoaW4gYSByb3V0ZWQgY29udGV4dCwgd2UgbmVlZCB0byBzY3JvbGwgYmFjayB0byB0aGUgdG9wLCBhbmQgZmV0Y2ggdGhlIGRvY3VtZW50IHRpdGxlIGZvciBoaXN0b3J5LnB1c2hTdGF0ZVxyXG5cdFx0aWYgKGNvbXB1dGVQb3N0UmVkcmF3SG9vaykge1xyXG5cdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2soKTtcclxuXHRcdFx0Y29tcHV0ZVBvc3RSZWRyYXdIb29rID0gbnVsbFxyXG5cdFx0fVxyXG5cdFx0bGFzdFJlZHJhd0lkID0gbnVsbDtcclxuXHRcdGxhc3RSZWRyYXdDYWxsVGltZSA9IG5ldyBEYXRlO1xyXG5cdFx0bS5yZWRyYXcuc3RyYXRlZ3koXCJkaWZmXCIpXHJcblx0fVxyXG5cclxuXHR2YXIgcGVuZGluZ1JlcXVlc3RzID0gMDtcclxuXHRtLnN0YXJ0Q29tcHV0YXRpb24gPSBmdW5jdGlvbigpIHtwZW5kaW5nUmVxdWVzdHMrK307XHJcblx0bS5lbmRDb21wdXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cGVuZGluZ1JlcXVlc3RzID0gTWF0aC5tYXgocGVuZGluZ1JlcXVlc3RzIC0gMSwgMCk7XHJcblx0XHRpZiAocGVuZGluZ1JlcXVlc3RzID09IDApIG0ucmVkcmF3KClcclxuXHR9O1xyXG5cclxuXHRtLndpdGhBdHRyID0gZnVuY3Rpb24ocHJvcCwgd2l0aEF0dHJDYWxsYmFjaykge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZSA9IGUgfHwgZXZlbnQ7XHJcblx0XHRcdHZhciBjdXJyZW50VGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0IHx8IHRoaXM7XHJcblx0XHRcdHdpdGhBdHRyQ2FsbGJhY2socHJvcCBpbiBjdXJyZW50VGFyZ2V0ID8gY3VycmVudFRhcmdldFtwcm9wXSA6IGN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKHByb3ApKVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vcm91dGluZ1xyXG5cdHZhciBtb2RlcyA9IHtwYXRobmFtZTogXCJcIiwgaGFzaDogXCIjXCIsIHNlYXJjaDogXCI/XCJ9O1xyXG5cdHZhciByZWRpcmVjdCA9IGZ1bmN0aW9uKCkge30sIHJvdXRlUGFyYW1zID0ge30sIGN1cnJlbnRSb3V0ZTtcclxuXHRtLnJvdXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHQvL20ucm91dGUoKVxyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiBjdXJyZW50Um91dGU7XHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzICYmIHR5cGUuY2FsbChhcmd1bWVudHNbMV0pID09IFNUUklORykge1xyXG5cdFx0XHR2YXIgcm9vdCA9IGFyZ3VtZW50c1swXSwgZGVmYXVsdFJvdXRlID0gYXJndW1lbnRzWzFdLCByb3V0ZXIgPSBhcmd1bWVudHNbMl07XHJcblx0XHRcdHJlZGlyZWN0ID0gZnVuY3Rpb24oc291cmNlKSB7XHJcblx0XHRcdFx0dmFyIHBhdGggPSBjdXJyZW50Um91dGUgPSBub3JtYWxpemVSb3V0ZShzb3VyY2UpO1xyXG5cdFx0XHRcdGlmICghcm91dGVCeVZhbHVlKHJvb3QsIHJvdXRlciwgcGF0aCkpIHtcclxuXHRcdFx0XHRcdG0ucm91dGUoZGVmYXVsdFJvdXRlLCB0cnVlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0dmFyIGxpc3RlbmVyID0gbS5yb3V0ZS5tb2RlID09IFwiaGFzaFwiID8gXCJvbmhhc2hjaGFuZ2VcIiA6IFwib25wb3BzdGF0ZVwiO1xyXG5cdFx0XHR3aW5kb3dbbGlzdGVuZXJdID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKGN1cnJlbnRSb3V0ZSAhPSBub3JtYWxpemVSb3V0ZSgkbG9jYXRpb25bbS5yb3V0ZS5tb2RlXSkpIHtcclxuXHRcdFx0XHRcdHJlZGlyZWN0KCRsb2NhdGlvblttLnJvdXRlLm1vZGVdKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0Y29tcHV0ZVBvc3RSZWRyYXdIb29rID0gc2V0U2Nyb2xsO1xyXG5cdFx0XHR3aW5kb3dbbGlzdGVuZXJdKClcclxuXHRcdH1cclxuXHRcdC8vY29uZmlnOiBtLnJvdXRlXHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHR2YXIgZWxlbWVudCA9IGFyZ3VtZW50c1swXTtcclxuXHRcdFx0dmFyIGlzSW5pdGlhbGl6ZWQgPSBhcmd1bWVudHNbMV07XHJcblx0XHRcdHZhciBjb250ZXh0ID0gYXJndW1lbnRzWzJdO1xyXG5cdFx0XHRlbGVtZW50LmhyZWYgPSAobS5yb3V0ZS5tb2RlICE9PSAncGF0aG5hbWUnID8gJGxvY2F0aW9uLnBhdGhuYW1lIDogJycpICsgbW9kZXNbbS5yb3V0ZS5tb2RlXSArIHRoaXMuYXR0cnMuaHJlZjtcclxuXHRcdFx0ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm91dGVVbm9idHJ1c2l2ZSk7XHJcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJvdXRlVW5vYnRydXNpdmUpXHJcblx0XHR9XHJcblx0XHQvL20ucm91dGUocm91dGUsIHBhcmFtcylcclxuXHRcdGVsc2UgaWYgKHR5cGUuY2FsbChhcmd1bWVudHNbMF0pID09IFNUUklORykge1xyXG5cdFx0XHRjdXJyZW50Um91dGUgPSBhcmd1bWVudHNbMF07XHJcblx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzWzFdIHx8IHt9XHJcblx0XHRcdHZhciBxdWVyeUluZGV4ID0gY3VycmVudFJvdXRlLmluZGV4T2YoXCI/XCIpXHJcblx0XHRcdHZhciBwYXJhbXMgPSBxdWVyeUluZGV4ID4gLTEgPyBwYXJzZVF1ZXJ5U3RyaW5nKGN1cnJlbnRSb3V0ZS5zbGljZShxdWVyeUluZGV4ICsgMSkpIDoge31cclxuXHRcdFx0Zm9yICh2YXIgaSBpbiBhcmdzKSBwYXJhbXNbaV0gPSBhcmdzW2ldXHJcblx0XHRcdHZhciBxdWVyeXN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcocGFyYW1zKVxyXG5cdFx0XHR2YXIgY3VycmVudFBhdGggPSBxdWVyeUluZGV4ID4gLTEgPyBjdXJyZW50Um91dGUuc2xpY2UoMCwgcXVlcnlJbmRleCkgOiBjdXJyZW50Um91dGVcclxuXHRcdFx0aWYgKHF1ZXJ5c3RyaW5nKSBjdXJyZW50Um91dGUgPSBjdXJyZW50UGF0aCArIChjdXJyZW50UGF0aC5pbmRleE9mKFwiP1wiKSA9PT0gLTEgPyBcIj9cIiA6IFwiJlwiKSArIHF1ZXJ5c3RyaW5nO1xyXG5cclxuXHRcdFx0dmFyIHNob3VsZFJlcGxhY2VIaXN0b3J5RW50cnkgPSAoYXJndW1lbnRzLmxlbmd0aCA9PSAzID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzFdKSA9PT0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICh3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUpIHtcclxuXHRcdFx0XHRjb21wdXRlUG9zdFJlZHJhd0hvb2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5oaXN0b3J5W3Nob3VsZFJlcGxhY2VIaXN0b3J5RW50cnkgPyBcInJlcGxhY2VTdGF0ZVwiIDogXCJwdXNoU3RhdGVcIl0obnVsbCwgJGRvY3VtZW50LnRpdGxlLCBtb2Rlc1ttLnJvdXRlLm1vZGVdICsgY3VycmVudFJvdXRlKTtcclxuXHRcdFx0XHRcdHNldFNjcm9sbCgpXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRyZWRpcmVjdChtb2Rlc1ttLnJvdXRlLm1vZGVdICsgY3VycmVudFJvdXRlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgJGxvY2F0aW9uW20ucm91dGUubW9kZV0gPSBjdXJyZW50Um91dGVcclxuXHRcdH1cclxuXHR9O1xyXG5cdG0ucm91dGUucGFyYW0gPSBmdW5jdGlvbihrZXkpIHtyZXR1cm4gcm91dGVQYXJhbXNba2V5XX07XHJcblx0bS5yb3V0ZS5tb2RlID0gXCJzZWFyY2hcIjtcclxuXHRmdW5jdGlvbiBub3JtYWxpemVSb3V0ZShyb3V0ZSkge3JldHVybiByb3V0ZS5zbGljZShtb2Rlc1ttLnJvdXRlLm1vZGVdLmxlbmd0aCl9XHJcblx0ZnVuY3Rpb24gcm91dGVCeVZhbHVlKHJvb3QsIHJvdXRlciwgcGF0aCkge1xyXG5cdFx0cm91dGVQYXJhbXMgPSB7fTtcclxuXHJcblx0XHR2YXIgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZihcIj9cIik7XHJcblx0XHRpZiAocXVlcnlTdGFydCAhPT0gLTEpIHtcclxuXHRcdFx0cm91dGVQYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCkpO1xyXG5cdFx0XHRwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydClcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKHZhciByb3V0ZSBpbiByb3V0ZXIpIHtcclxuXHRcdFx0aWYgKHJvdXRlID09IHBhdGgpIHtcclxuXHRcdFx0XHRtLm1vZHVsZShyb290LCByb3V0ZXJbcm91dGVdKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWF0Y2hlciA9IG5ldyBSZWdFeHAoXCJeXCIgKyByb3V0ZS5yZXBsYWNlKC86W15cXC9dKz9cXC57M30vZywgXCIoLio/KVwiKS5yZXBsYWNlKC86W15cXC9dKy9nLCBcIihbXlxcXFwvXSspXCIpICsgXCJcXC8/JFwiKTtcclxuXHJcblx0XHRcdGlmIChtYXRjaGVyLnRlc3QocGF0aCkpIHtcclxuXHRcdFx0XHRwYXRoLnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIga2V5cyA9IHJvdXRlLm1hdGNoKC86W15cXC9dKy9nKSB8fCBbXTtcclxuXHRcdFx0XHRcdHZhciB2YWx1ZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSwgLTIpO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSByb3V0ZVBhcmFtc1trZXlzW2ldLnJlcGxhY2UoLzp8XFwuL2csIFwiXCIpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbaV0pXHJcblx0XHRcdFx0XHRtLm1vZHVsZShyb290LCByb3V0ZXJbcm91dGVdKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0ZnVuY3Rpb24gcm91dGVVbm9idHJ1c2l2ZShlKSB7XHJcblx0XHRlID0gZSB8fCBldmVudDtcclxuXHRcdGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUud2hpY2ggPT0gMikgcmV0dXJuO1xyXG5cdFx0aWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGVsc2UgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG5cdFx0dmFyIGN1cnJlbnRUYXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQgfHwgdGhpcztcclxuXHRcdHZhciBhcmdzID0gbS5yb3V0ZS5tb2RlID09IFwicGF0aG5hbWVcIiAmJiBjdXJyZW50VGFyZ2V0LnNlYXJjaCA/IHBhcnNlUXVlcnlTdHJpbmcoY3VycmVudFRhcmdldC5zZWFyY2guc2xpY2UoMSkpIDoge307XHJcblx0XHRtLnJvdXRlKGN1cnJlbnRUYXJnZXRbbS5yb3V0ZS5tb2RlXS5zbGljZShtb2Rlc1ttLnJvdXRlLm1vZGVdLmxlbmd0aCksIGFyZ3MpXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHNldFNjcm9sbCgpIHtcclxuXHRcdGlmIChtLnJvdXRlLm1vZGUgIT0gXCJoYXNoXCIgJiYgJGxvY2F0aW9uLmhhc2gpICRsb2NhdGlvbi5oYXNoID0gJGxvY2F0aW9uLmhhc2g7XHJcblx0XHRlbHNlIHdpbmRvdy5zY3JvbGxUbygwLCAwKVxyXG5cdH1cclxuXHRmdW5jdGlvbiBidWlsZFF1ZXJ5U3RyaW5nKG9iamVjdCwgcHJlZml4KSB7XHJcblx0XHR2YXIgc3RyID0gW107XHJcblx0XHRmb3IodmFyIHByb3AgaW4gb2JqZWN0KSB7XHJcblx0XHRcdHZhciBrZXkgPSBwcmVmaXggPyBwcmVmaXggKyBcIltcIiArIHByb3AgKyBcIl1cIiA6IHByb3AsIHZhbHVlID0gb2JqZWN0W3Byb3BdO1xyXG5cdFx0XHRzdHIucHVzaCh2YWx1ZSAhPSBudWxsICYmIHR5cGUuY2FsbCh2YWx1ZSkgPT0gT0JKRUNUID8gYnVpbGRRdWVyeVN0cmluZyh2YWx1ZSwga2V5KSA6IGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHN0ci5qb2luKFwiJlwiKVxyXG5cdH1cclxuXHRmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHN0cikge1xyXG5cdFx0dmFyIHBhaXJzID0gc3RyLnNwbGl0KFwiJlwiKSwgcGFyYW1zID0ge307XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG5cdFx0XHRwYXJhbXNbZGVjb2RlU3BhY2UocGFpclswXSldID0gcGFpclsxXSA/IGRlY29kZVNwYWNlKHBhaXJbMV0pIDogXCJcIlxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhcmFtc1xyXG5cdH1cclxuXHRmdW5jdGlvbiBkZWNvZGVTcGFjZShzdHJpbmcpIHtcclxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyaW5nLnJlcGxhY2UoL1xcKy9nLCBcIiBcIikpXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHJlc2V0KHJvb3QpIHtcclxuXHRcdHZhciBjYWNoZUtleSA9IGdldENlbGxDYWNoZUtleShyb290KTtcclxuXHRcdGNsZWFyKHJvb3QuY2hpbGROb2RlcywgY2VsbENhY2hlW2NhY2hlS2V5XSk7XHJcblx0XHRjZWxsQ2FjaGVbY2FjaGVLZXldID0gdW5kZWZpbmVkXHJcblx0fVxyXG5cclxuXHRtLmRlZmVycmVkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcblx0XHRkZWZlcnJlZC5wcm9taXNlID0gcHJvcGlmeShkZWZlcnJlZC5wcm9taXNlKTtcclxuXHRcdHJldHVybiBkZWZlcnJlZFxyXG5cdH07XHJcblx0ZnVuY3Rpb24gcHJvcGlmeShwcm9taXNlKSB7XHJcblx0XHR2YXIgcHJvcCA9IG0ucHJvcCgpO1xyXG5cdFx0cHJvbWlzZS50aGVuKHByb3ApO1xyXG5cdFx0cHJvcC50aGVuID0gZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdHJldHVybiBwcm9waWZ5KHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpKVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBwcm9wXHJcblx0fVxyXG5cdC8vUHJvbWl6Lm1pdGhyaWwuanMgfCBab2xtZWlzdGVyIHwgTUlUXHJcblx0Ly9hIG1vZGlmaWVkIHZlcnNpb24gb2YgUHJvbWl6LmpzLCB3aGljaCBkb2VzIG5vdCBjb25mb3JtIHRvIFByb21pc2VzL0ErIGZvciB0d28gcmVhc29uczpcclxuXHQvLzEpIGB0aGVuYCBjYWxsYmFja3MgYXJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IChiZWNhdXNlIHNldFRpbWVvdXQgaXMgdG9vIHNsb3csIGFuZCB0aGUgc2V0SW1tZWRpYXRlIHBvbHlmaWxsIGlzIHRvbyBiaWdcclxuXHQvLzIpIHRocm93aW5nIHN1YmNsYXNzZXMgb2YgRXJyb3IgY2F1c2UgdGhlIGVycm9yIHRvIGJlIGJ1YmJsZWQgdXAgaW5zdGVhZCBvZiB0cmlnZ2VyaW5nIHJlamVjdGlvbiAoYmVjYXVzZSB0aGUgc3BlYyBkb2VzIG5vdCBhY2NvdW50IGZvciB0aGUgaW1wb3J0YW50IHVzZSBjYXNlIG9mIGRlZmF1bHQgYnJvd3NlciBlcnJvciBoYW5kbGluZywgaS5lLiBtZXNzYWdlIHcvIGxpbmUgbnVtYmVyKVxyXG5cdGZ1bmN0aW9uIERlZmVycmVkKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XHJcblx0XHR2YXIgUkVTT0xWSU5HID0gMSwgUkVKRUNUSU5HID0gMiwgUkVTT0xWRUQgPSAzLCBSRUpFQ1RFRCA9IDQ7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsIHN0YXRlID0gMCwgcHJvbWlzZVZhbHVlID0gMCwgbmV4dCA9IFtdO1xyXG5cclxuXHRcdHNlbGZbXCJwcm9taXNlXCJdID0ge307XHJcblxyXG5cdFx0c2VsZltcInJlc29sdmVcIl0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRpZiAoIXN0YXRlKSB7XHJcblx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRVNPTFZJTkc7XHJcblxyXG5cdFx0XHRcdGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0aGlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHNlbGZbXCJyZWplY3RcIl0gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdFx0XHRpZiAoIXN0YXRlKSB7XHJcblx0XHRcdFx0cHJvbWlzZVZhbHVlID0gdmFsdWU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblxyXG5cdFx0XHRcdGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0aGlzXHJcblx0XHR9O1xyXG5cclxuXHRcdHNlbGYucHJvbWlzZVtcInRoZW5cIl0gPSBmdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xyXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xyXG5cdFx0XHRpZiAoc3RhdGUgPT0gUkVTT0xWRUQpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VWYWx1ZSlcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChzdGF0ZSA9PSBSRUpFQ1RFRCkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChwcm9taXNlVmFsdWUpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bmV4dC5wdXNoKGRlZmVycmVkKVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGZpbmlzaCh0eXBlKSB7XHJcblx0XHRcdHN0YXRlID0gdHlwZSB8fCBSRUpFQ1RFRDtcclxuXHRcdFx0bmV4dC5tYXAoZnVuY3Rpb24oZGVmZXJyZWQpIHtcclxuXHRcdFx0XHRzdGF0ZSA9PSBSRVNPTFZFRCAmJiBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VWYWx1ZSkgfHwgZGVmZXJyZWQucmVqZWN0KHByb21pc2VWYWx1ZSlcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiB0aGVubmFibGUodGhlbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2ssIG5vdFRoZW5uYWJsZUNhbGxiYWNrKSB7XHJcblx0XHRcdGlmICgoKHByb21pc2VWYWx1ZSAhPSBudWxsICYmIHR5cGUuY2FsbChwcm9taXNlVmFsdWUpID09IE9CSkVDVCkgfHwgdHlwZW9mIHByb21pc2VWYWx1ZSA9PSBGVU5DVElPTikgJiYgdHlwZW9mIHRoZW4gPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Ly8gY291bnQgcHJvdGVjdHMgYWdhaW5zdCBhYnVzZSBjYWxscyBmcm9tIHNwZWMgY2hlY2tlclxyXG5cdFx0XHRcdFx0dmFyIGNvdW50ID0gMDtcclxuXHRcdFx0XHRcdHRoZW4uY2FsbChwcm9taXNlVmFsdWUsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChjb3VudCsrKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRzdWNjZXNzQ2FsbGJhY2soKVxyXG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChjb3VudCsrKSByZXR1cm47XHJcblx0XHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRmYWlsdXJlQ2FsbGJhY2soKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdG0uZGVmZXJyZWQub25lcnJvcihlKTtcclxuXHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0XHRmYWlsdXJlQ2FsbGJhY2soKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRub3RUaGVubmFibGVDYWxsYmFjaygpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBmaXJlKCkge1xyXG5cdFx0XHQvLyBjaGVjayBpZiBpdCdzIGEgdGhlbmFibGVcclxuXHRcdFx0dmFyIHRoZW47XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0dGhlbiA9IHByb21pc2VWYWx1ZSAmJiBwcm9taXNlVmFsdWUudGhlblxyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblx0XHRcdFx0cmV0dXJuIGZpcmUoKVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoZW5uYWJsZSh0aGVuLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzdGF0ZSA9IFJFU09MVklORztcclxuXHRcdFx0XHRmaXJlKClcclxuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c3RhdGUgPSBSRUpFQ1RJTkc7XHJcblx0XHRcdFx0ZmlyZSgpXHJcblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRpZiAoc3RhdGUgPT0gUkVTT0xWSU5HICYmIHR5cGVvZiBzdWNjZXNzQ2FsbGJhY2sgPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gc3VjY2Vzc0NhbGxiYWNrKHByb21pc2VWYWx1ZSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHN0YXRlID09IFJFSkVDVElORyAmJiB0eXBlb2YgZmFpbHVyZUNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0XHRcdFx0XHRwcm9taXNlVmFsdWUgPSBmYWlsdXJlQ2FsbGJhY2socHJvbWlzZVZhbHVlKTtcclxuXHRcdFx0XHRcdFx0c3RhdGUgPSBSRVNPTFZJTkdcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRcdG0uZGVmZXJyZWQub25lcnJvcihlKTtcclxuXHRcdFx0XHRcdHByb21pc2VWYWx1ZSA9IGU7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmluaXNoKClcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChwcm9taXNlVmFsdWUgPT0gc2VsZikge1xyXG5cdFx0XHRcdFx0cHJvbWlzZVZhbHVlID0gVHlwZUVycm9yKCk7XHJcblx0XHRcdFx0XHRmaW5pc2goKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHRoZW5uYWJsZSh0aGVuLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdGZpbmlzaChSRVNPTFZFRClcclxuXHRcdFx0XHRcdH0sIGZpbmlzaCwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRmaW5pc2goc3RhdGUgPT0gUkVTT0xWSU5HICYmIFJFU09MVkVEKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0fVxyXG5cdG0uZGVmZXJyZWQub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdGlmICh0eXBlLmNhbGwoZSkgPT0gXCJbb2JqZWN0IEVycm9yXVwiICYmICFlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkubWF0Y2goLyBFcnJvci8pKSB0aHJvdyBlXHJcblx0fTtcclxuXHJcblx0bS5zeW5jID0gZnVuY3Rpb24oYXJncykge1xyXG5cdFx0dmFyIG1ldGhvZCA9IFwicmVzb2x2ZVwiO1xyXG5cdFx0ZnVuY3Rpb24gc3luY2hyb25pemVyKHBvcywgcmVzb2x2ZWQpIHtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFx0cmVzdWx0c1twb3NdID0gdmFsdWU7XHJcblx0XHRcdFx0aWYgKCFyZXNvbHZlZCkgbWV0aG9kID0gXCJyZWplY3RcIjtcclxuXHRcdFx0XHRpZiAoLS1vdXRzdGFuZGluZyA9PSAwKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5wcm9taXNlKHJlc3VsdHMpO1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWRbbWV0aG9kXShyZXN1bHRzKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdmFsdWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBkZWZlcnJlZCA9IG0uZGVmZXJyZWQoKTtcclxuXHRcdHZhciBvdXRzdGFuZGluZyA9IGFyZ3MubGVuZ3RoO1xyXG5cdFx0dmFyIHJlc3VsdHMgPSBuZXcgQXJyYXkob3V0c3RhbmRpbmcpO1xyXG5cdFx0aWYgKGFyZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRhcmdzW2ldLnRoZW4oc3luY2hyb25pemVyKGksIHRydWUpLCBzeW5jaHJvbml6ZXIoaSwgZmFsc2UpKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGRlZmVycmVkLnJlc29sdmUoW10pO1xyXG5cclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0fTtcclxuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge3JldHVybiB2YWx1ZX1cclxuXHJcblx0ZnVuY3Rpb24gYWpheChvcHRpb25zKSB7XHJcblx0XHRpZiAob3B0aW9ucy5kYXRhVHlwZSAmJiBvcHRpb25zLmRhdGFUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwianNvbnBcIikge1xyXG5cdFx0XHR2YXIgY2FsbGJhY2tLZXkgPSBcIm1pdGhyaWxfY2FsbGJhY2tfXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiX1wiICsgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlMTYpKS50b1N0cmluZygzNik7XHJcblx0XHRcdHZhciBzY3JpcHQgPSAkZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuXHJcblx0XHRcdHdpbmRvd1tjYWxsYmFja0tleV0gPSBmdW5jdGlvbihyZXNwKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcclxuXHRcdFx0XHRvcHRpb25zLm9ubG9hZCh7XHJcblx0XHRcdFx0XHR0eXBlOiBcImxvYWRcIixcclxuXHRcdFx0XHRcdHRhcmdldDoge1xyXG5cdFx0XHRcdFx0XHRyZXNwb25zZVRleHQ6IHJlc3BcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR3aW5kb3dbY2FsbGJhY2tLZXldID0gdW5kZWZpbmVkXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xyXG5cclxuXHRcdFx0XHRvcHRpb25zLm9uZXJyb3Ioe1xyXG5cdFx0XHRcdFx0dHlwZTogXCJlcnJvclwiLFxyXG5cdFx0XHRcdFx0dGFyZ2V0OiB7XHJcblx0XHRcdFx0XHRcdHN0YXR1czogNTAwLFxyXG5cdFx0XHRcdFx0XHRyZXNwb25zZVRleHQ6IEpTT04uc3RyaW5naWZ5KHtlcnJvcjogXCJFcnJvciBtYWtpbmcganNvbnAgcmVxdWVzdFwifSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR3aW5kb3dbY2FsbGJhY2tLZXldID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzY3JpcHQuc3JjID0gb3B0aW9ucy51cmxcclxuXHRcdFx0XHQrIChvcHRpb25zLnVybC5pbmRleE9mKFwiP1wiKSA+IDAgPyBcIiZcIiA6IFwiP1wiKVxyXG5cdFx0XHRcdCsgKG9wdGlvbnMuY2FsbGJhY2tLZXkgPyBvcHRpb25zLmNhbGxiYWNrS2V5IDogXCJjYWxsYmFja1wiKVxyXG5cdFx0XHRcdCsgXCI9XCIgKyBjYWxsYmFja0tleVxyXG5cdFx0XHRcdCsgXCImXCIgKyBidWlsZFF1ZXJ5U3RyaW5nKG9wdGlvbnMuZGF0YSB8fCB7fSk7XHJcblx0XHRcdCRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdClcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdDtcclxuXHRcdFx0eGhyLm9wZW4ob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJsLCB0cnVlLCBvcHRpb25zLnVzZXIsIG9wdGlvbnMucGFzc3dvcmQpO1xyXG5cdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XHJcblx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkgb3B0aW9ucy5vbmxvYWQoe3R5cGU6IFwibG9hZFwiLCB0YXJnZXQ6IHhocn0pO1xyXG5cdFx0XHRcdFx0ZWxzZSBvcHRpb25zLm9uZXJyb3Ioe3R5cGU6IFwiZXJyb3JcIiwgdGFyZ2V0OiB4aHJ9KVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFx0aWYgKG9wdGlvbnMuc2VyaWFsaXplID09IEpTT04uc3RyaW5naWZ5ICYmIG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLm1ldGhvZCAhPSBcIkdFVFwiKSB7XHJcblx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9wdGlvbnMuZGVzZXJpYWxpemUgPT0gSlNPTi5wYXJzZSkge1xyXG5cdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC8qXCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5jb25maWcgPT0gRlVOQ1RJT04pIHtcclxuXHRcdFx0XHR2YXIgbWF5YmVYaHIgPSBvcHRpb25zLmNvbmZpZyh4aHIsIG9wdGlvbnMpO1xyXG5cdFx0XHRcdGlmIChtYXliZVhociAhPSBudWxsKSB4aHIgPSBtYXliZVhoclxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgZGF0YSA9IG9wdGlvbnMubWV0aG9kID09IFwiR0VUXCIgfHwgIW9wdGlvbnMuZGF0YSA/IFwiXCIgOiBvcHRpb25zLmRhdGFcclxuXHRcdFx0aWYgKGRhdGEgJiYgKHR5cGUuY2FsbChkYXRhKSAhPSBTVFJJTkcgJiYgZGF0YS5jb25zdHJ1Y3RvciAhPSB3aW5kb3cuRm9ybURhdGEpKSB7XHJcblx0XHRcdFx0dGhyb3cgXCJSZXF1ZXN0IGRhdGEgc2hvdWxkIGJlIGVpdGhlciBiZSBhIHN0cmluZyBvciBGb3JtRGF0YS4gQ2hlY2sgdGhlIGBzZXJpYWxpemVgIG9wdGlvbiBpbiBgbS5yZXF1ZXN0YFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdHhoci5zZW5kKGRhdGEpO1xyXG5cdFx0XHRyZXR1cm4geGhyXHJcblx0XHR9XHJcblx0fVxyXG5cdGZ1bmN0aW9uIGJpbmREYXRhKHhock9wdGlvbnMsIGRhdGEsIHNlcmlhbGl6ZSkge1xyXG5cdFx0aWYgKHhock9wdGlvbnMubWV0aG9kID09IFwiR0VUXCIgJiYgeGhyT3B0aW9ucy5kYXRhVHlwZSAhPSBcImpzb25wXCIpIHtcclxuXHRcdFx0dmFyIHByZWZpeCA9IHhock9wdGlvbnMudXJsLmluZGV4T2YoXCI/XCIpIDwgMCA/IFwiP1wiIDogXCImXCI7XHJcblx0XHRcdHZhciBxdWVyeXN0cmluZyA9IGJ1aWxkUXVlcnlTdHJpbmcoZGF0YSk7XHJcblx0XHRcdHhock9wdGlvbnMudXJsID0geGhyT3B0aW9ucy51cmwgKyAocXVlcnlzdHJpbmcgPyBwcmVmaXggKyBxdWVyeXN0cmluZyA6IFwiXCIpXHJcblx0XHR9XHJcblx0XHRlbHNlIHhock9wdGlvbnMuZGF0YSA9IHNlcmlhbGl6ZShkYXRhKTtcclxuXHRcdHJldHVybiB4aHJPcHRpb25zXHJcblx0fVxyXG5cdGZ1bmN0aW9uIHBhcmFtZXRlcml6ZVVybCh1cmwsIGRhdGEpIHtcclxuXHRcdHZhciB0b2tlbnMgPSB1cmwubWF0Y2goLzpbYS16XVxcdysvZ2kpO1xyXG5cdFx0aWYgKHRva2VucyAmJiBkYXRhKSB7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGtleSA9IHRva2Vuc1tpXS5zbGljZSgxKTtcclxuXHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZSh0b2tlbnNbaV0sIGRhdGFba2V5XSk7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGFba2V5XVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdXJsXHJcblx0fVxyXG5cclxuXHRtLnJlcXVlc3QgPSBmdW5jdGlvbih4aHJPcHRpb25zKSB7XHJcblx0XHRpZiAoeGhyT3B0aW9ucy5iYWNrZ3JvdW5kICE9PSB0cnVlKSBtLnN0YXJ0Q29tcHV0YXRpb24oKTtcclxuXHRcdHZhciBkZWZlcnJlZCA9IG0uZGVmZXJyZWQoKTtcclxuXHRcdHZhciBpc0pTT05QID0geGhyT3B0aW9ucy5kYXRhVHlwZSAmJiB4aHJPcHRpb25zLmRhdGFUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwianNvbnBcIjtcclxuXHRcdHZhciBzZXJpYWxpemUgPSB4aHJPcHRpb25zLnNlcmlhbGl6ZSA9IGlzSlNPTlAgPyBpZGVudGl0eSA6IHhock9wdGlvbnMuc2VyaWFsaXplIHx8IEpTT04uc3RyaW5naWZ5O1xyXG5cdFx0dmFyIGRlc2VyaWFsaXplID0geGhyT3B0aW9ucy5kZXNlcmlhbGl6ZSA9IGlzSlNPTlAgPyBpZGVudGl0eSA6IHhock9wdGlvbnMuZGVzZXJpYWxpemUgfHwgSlNPTi5wYXJzZTtcclxuXHRcdHZhciBleHRyYWN0ID0geGhyT3B0aW9ucy5leHRyYWN0IHx8IGZ1bmN0aW9uKHhocikge1xyXG5cdFx0XHRyZXR1cm4geGhyLnJlc3BvbnNlVGV4dC5sZW5ndGggPT09IDAgJiYgZGVzZXJpYWxpemUgPT09IEpTT04ucGFyc2UgPyBudWxsIDogeGhyLnJlc3BvbnNlVGV4dFxyXG5cdFx0fTtcclxuXHRcdHhock9wdGlvbnMudXJsID0gcGFyYW1ldGVyaXplVXJsKHhock9wdGlvbnMudXJsLCB4aHJPcHRpb25zLmRhdGEpO1xyXG5cdFx0eGhyT3B0aW9ucyA9IGJpbmREYXRhKHhock9wdGlvbnMsIHhock9wdGlvbnMuZGF0YSwgc2VyaWFsaXplKTtcclxuXHRcdHhock9wdGlvbnMub25sb2FkID0geGhyT3B0aW9ucy5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGUgPSBlIHx8IGV2ZW50O1xyXG5cdFx0XHRcdHZhciB1bndyYXAgPSAoZS50eXBlID09IFwibG9hZFwiID8geGhyT3B0aW9ucy51bndyYXBTdWNjZXNzIDogeGhyT3B0aW9ucy51bndyYXBFcnJvcikgfHwgaWRlbnRpdHk7XHJcblx0XHRcdFx0dmFyIHJlc3BvbnNlID0gdW53cmFwKGRlc2VyaWFsaXplKGV4dHJhY3QoZS50YXJnZXQsIHhock9wdGlvbnMpKSk7XHJcblx0XHRcdFx0aWYgKGUudHlwZSA9PSBcImxvYWRcIikge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGUuY2FsbChyZXNwb25zZSkgPT0gQVJSQVkgJiYgeGhyT3B0aW9ucy50eXBlKSB7XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UubGVuZ3RoOyBpKyspIHJlc3BvbnNlW2ldID0gbmV3IHhock9wdGlvbnMudHlwZShyZXNwb25zZVtpXSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHhock9wdGlvbnMudHlwZSkgcmVzcG9uc2UgPSBuZXcgeGhyT3B0aW9ucy50eXBlKHJlc3BvbnNlKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRkZWZlcnJlZFtlLnR5cGUgPT0gXCJsb2FkXCIgPyBcInJlc29sdmVcIiA6IFwicmVqZWN0XCJdKHJlc3BvbnNlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdFx0bS5kZWZlcnJlZC5vbmVycm9yKGUpO1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChlKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh4aHJPcHRpb25zLmJhY2tncm91bmQgIT09IHRydWUpIG0uZW5kQ29tcHV0YXRpb24oKVxyXG5cdFx0fTtcclxuXHRcdGFqYXgoeGhyT3B0aW9ucyk7XHJcblx0XHRkZWZlcnJlZC5wcm9taXNlKHhock9wdGlvbnMuaW5pdGlhbFZhbHVlKTtcclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlXHJcblx0fTtcclxuXHJcblx0Ly90ZXN0aW5nIEFQSVxyXG5cdG0uZGVwcyA9IGZ1bmN0aW9uKG1vY2spIHtcclxuXHRcdGluaXRpYWxpemUod2luZG93ID0gbW9jayB8fCB3aW5kb3cpO1xyXG5cdFx0cmV0dXJuIHdpbmRvdztcclxuXHR9O1xyXG5cdC8vZm9yIGludGVybmFsIHRlc3Rpbmcgb25seSwgZG8gbm90IHVzZSBgbS5kZXBzLmZhY3RvcnlgXHJcblx0bS5kZXBzLmZhY3RvcnkgPSBhcHA7XHJcblxyXG5cdHJldHVybiBtXHJcbn0pKHR5cGVvZiB3aW5kb3cgIT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KTtcclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IG07XHJcbmVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIGRlZmluZShmdW5jdGlvbigpIHtyZXR1cm4gbX0pO1xyXG4iLCJ3aW5kb3cucmlwcGxlcz17aW5pdDpmdW5jdGlvbihuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKG4sdCl7dmFyIGk9bi5tYXRjaGVzfHxuLm1hdGNoZXNTZWxlY3Rvcnx8bi53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG4ubW96TWF0Y2hlc1NlbGVjdG9yfHxuLm1zTWF0Y2hlc1NlbGVjdG9yfHxuLm9NYXRjaGVzU2VsZWN0b3I7cmV0dXJuIGkuY2FsbChuLHQpfXZhciBzPTEwMCxoPTUwMCx0PWZ1bmN0aW9uKG4sdCxpKXt0eXBlb2Ygbj09XCJzdHJpbmdcIiYmKG49W25dKTtuLmZvckVhY2goZnVuY3Rpb24obil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuLGZ1bmN0aW9uKG4pe3ZhciByPXR5cGVvZiBuLmRldGFpbCE9XCJudW1iZXJcIj9uLmRldGFpbDpuLnRhcmdldDtvKHIsdCkmJmkobixyKX0pfSl9LHI9ZnVuY3Rpb24obix0LGkpe3ZhciBzPXQsbD1zLnBhcmVudE5vZGUscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHU9bC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXt4Om4uY2xpZW50WC11LmxlZnQseTood2luZG93Lm9udG91Y2hzdGFydD9uLmNsaWVudFktd2luZG93LnNjcm9sbFk6bi5jbGllbnRZKS11LnRvcH0sZj1cInNjYWxlKFwiK01hdGgucm91bmQocy5vZmZzZXRXaWR0aC81KStcIilcIix2PW5ldyBDdXN0b21FdmVudChcInJpcHBsZUVuZFwiLHtkZXRhaWw6cn0pLHksbyxhO24udG91Y2hlcyYmKGM9e3g6bi50b3VjaGVzWzBdLmNsaWVudFgtdS5sZWZ0LHk6bi50b3VjaGVzWzBdLmNsaWVudFktdS50b3B9KTtlPXI7ci5jbGFzc05hbWU9XCJyaXBwbGVcIjtyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJsZWZ0OlwiK2MueCtcInB4OyB0b3A6XCIrYy55K1wicHg7XCIpO289d2luZG93LmdldENvbXB1dGVkU3R5bGUobCkuY29sb3I7bz1vLnJlcGxhY2UoXCJyZ2JcIixcInJnYmFcIikucmVwbGFjZShcIilcIixcIiwgXCIrLjMrXCIpXCIpO3MuYXBwZW5kQ2hpbGQocik7eT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyKS5vcGFjaXR5O3IuZGF0YXNldC5hbmltYXRpbmc9MTtyLmNsYXNzTmFtZT1cInJpcHBsZSByaXBwbGUtb25cIjthPVtyLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpLFwiYmFja2dyb3VuZC1jb2xvcjogXCIrbyxcIi1tcy10cmFuc2Zvcm06IFwiK2YsXCItbW96LXRyYW5zZm9ybVwiK2YsXCItd2Via2l0LXRyYW5zZm9ybVwiK2YsXCJ0cmFuc2Zvcm06IFwiK2ZdO3Iuc2V0QXR0cmlidXRlKFwic3R5bGVcIixhLmpvaW4oXCI7XCIpKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5kYXRhc2V0LmFuaW1hdGluZz0wO2RvY3VtZW50LmRpc3BhdGNoRXZlbnQodik7aSYmaSgpfSxoKX0sdT1mdW5jdGlvbihuKXtuLmNsYXNzTmFtZT1cInJpcHBsZSByaXBwbGUtb24gcmlwcGxlLW91dFwiO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnJlbW92ZSgpfSxzKX0saT0hMSxmLGU7dChbXCJtb3VzZWRvd25cIixcInRvdWNoc3RhcnRcIl0sXCIqXCIsZnVuY3Rpb24oKXtpPSEwfSk7dChbXCJtb3VzZXVwXCIsXCJ0b3VjaGVuZFwiLFwibW91c2VvdXRcIl0sXCIqXCIsZnVuY3Rpb24oKXtpPSExfSk7Zj1mdW5jdGlvbihuLHQpe2lmKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZS13cmFwcGVyXCIpLmxlbmd0aD09PTApe3QuY2xhc3NOYW1lKz1cIiB3aXRocmlwcGxlXCI7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTmFtZT1cInJpcHBsZS13cmFwcGVyXCI7dC5hcHBlbmRDaGlsZChpKTt3aW5kb3cub250b3VjaHN0YXJ0PT09bnVsbCYmcihuLGksZnVuY3Rpb24oKXtpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVcIilbMF0ucmVtb3ZlKCl9KX19O3QoW1wibW91c2VvdmVyXCIsXCJ0b3VjaHN0YXJ0XCJdLG4sZik7dChbXCJtb3VzZWRvd25cIixcInRvdWNoc3RhcnRcIl0sXCIucmlwcGxlLXdyYXBwZXJcIixmdW5jdGlvbihuLHQpeyhuLndoaWNoPT09MHx8bi53aGljaD09PTF8fG4ud2hpY2g9PT0yKSYmcihuLHQpfSk7dChcInJpcHBsZUVuZFwiLFwiLnJpcHBsZS13cmFwcGVyIC5yaXBwbGVcIixmdW5jdGlvbihuLHQpe3ZhciByPXQucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicmlwcGxlXCIpOyghaXx8clswXT09dCYmci5sZW5ndGg+MSkmJnUodCl9KTt0KFtcIm1vdXNldXBcIixcInRvdWNoZW5kXCIsXCJtb3VzZW91dFwiXSxcIi5yaXBwbGUtd3JhcHBlclwiLGZ1bmN0aW9uKCl7dmFyIG49ZTtuJiZuLmRhdGFzZXQuYW5pbWF0aW5nIT0xJiZ1KG4pfSl9fTtcclxuLypcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmlwcGxlcy5taW4uanMubWFwXHJcbiovIiwiLyohIFZlbG9jaXR5SlMub3JnICgxLjEuMCkuIChDKSAyMDE0IEp1bGlhbiBTaGFwaXJvLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZSAqL1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgVmVsb2NpdHkgalF1ZXJ5IFNoaW1cclxuKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qISBWZWxvY2l0eUpTLm9yZyBqUXVlcnkgU2hpbSAoMS4wLjEpLiAoQykgMjAxNCBUaGUgalF1ZXJ5IEZvdW5kYXRpb24uIE1JVCBAbGljZW5zZTogZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlLiAqL1xyXG5cclxuLyogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBqUXVlcnkgZnVuY3Rpb25zIHRoYXQgVmVsb2NpdHkgcmVsaWVzIG9uLCB0aGVyZWJ5IHJlbW92aW5nIFZlbG9jaXR5J3MgZGVwZW5kZW5jeSBvbiBhIGZ1bGwgY29weSBvZiBqUXVlcnksIGFuZCBhbGxvd2luZyBpdCB0byB3b3JrIGluIGFueSBlbnZpcm9ubWVudC4gKi9cclxuLyogVGhlc2Ugc2hpbW1lZCBmdW5jdGlvbnMgYXJlIG9ubHkgdXNlZCBpZiBqUXVlcnkgaXNuJ3QgcHJlc2VudC4gSWYgYm90aCB0aGlzIHNoaW0gYW5kIGpRdWVyeSBhcmUgbG9hZGVkLCBWZWxvY2l0eSBkZWZhdWx0cyB0byBqUXVlcnkgcHJvcGVyLiAqL1xyXG4vKiBCcm93c2VyIHN1cHBvcnQ6IFVzaW5nIHRoaXMgc2hpbSBpbnN0ZWFkIG9mIGpRdWVyeSBwcm9wZXIgcmVtb3ZlcyBzdXBwb3J0IGZvciBJRTguICovXHJcblxyXG47KGZ1bmN0aW9uICh3aW5kb3cpIHtcclxuICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgU2V0dXBcclxuICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBJZiBqUXVlcnkgaXMgYWxyZWFkeSBsb2FkZWQsIHRoZXJlJ3Mgbm8gcG9pbnQgaW4gbG9hZGluZyB0aGlzIHNoaW0uICovXHJcbiAgICBpZiAod2luZG93LmpRdWVyeSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBqUXVlcnkgYmFzZS4gKi9cclxuICAgIHZhciAkID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyAkLmZuLmluaXQoc2VsZWN0b3IsIGNvbnRleHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgIFByaXZhdGUgTWV0aG9kc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmlzV2luZG93ID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIC8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovXHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PSBvYmoud2luZG93O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBqUXVlcnkgKi9cclxuICAgICQudHlwZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICBpZiAob2JqID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iaiArIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xyXG4gICAgICAgICAgICBjbGFzczJ0eXBlW3RvU3RyaW5nLmNhbGwob2JqKV0gfHwgXCJvYmplY3RcIiA6XHJcbiAgICAgICAgICAgIHR5cGVvZiBvYmo7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgJC5pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuICQudHlwZShvYmopID09PSBcImFycmF5XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAqL1xyXG4gICAgZnVuY3Rpb24gaXNBcnJheWxpa2UgKG9iaikge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoLFxyXG4gICAgICAgICAgICB0eXBlID0gJC50eXBlKG9iaik7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIgfHwgJC5pc1dpbmRvdyhvYmopKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHwgdHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmIChsZW5ndGggLSAxKSBpbiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgJCBNZXRob2RzXHJcbiAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5OiBTdXBwb3J0IHJlbW92ZWQgZm9yIElFPDkuICovXHJcbiAgICAkLmlzUGxhaW5PYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIGtleTtcclxuXHJcbiAgICAgICAgaWYgKCFvYmogfHwgJC50eXBlKG9iaikgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8ICQuaXNXaW5kb3cob2JqKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAob2JqLmNvbnN0cnVjdG9yICYmXHJcbiAgICAgICAgICAgICAgICAhaGFzT3duLmNhbGwob2JqLCBcImNvbnN0cnVjdG9yXCIpICYmXHJcbiAgICAgICAgICAgICAgICAhaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJpc1Byb3RvdHlwZU9mXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoa2V5IGluIG9iaikge31cclxuXHJcbiAgICAgICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KTtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmVhY2ggPSBmdW5jdGlvbihvYmosIGNhbGxiYWNrLCBhcmdzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlLFxyXG4gICAgICAgICAgICBpID0gMCxcclxuICAgICAgICAgICAgbGVuZ3RoID0gb2JqLmxlbmd0aCxcclxuICAgICAgICAgICAgaXNBcnJheSA9IGlzQXJyYXlsaWtlKG9iaik7XHJcblxyXG4gICAgICAgIGlmIChhcmdzKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5hcHBseShvYmpbaV0sIGFyZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KG9ialtpXSwgYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKG9ialtpXSwgaSwgb2JqW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKG9ialtpXSwgaSwgb2JqW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEN1c3RvbSAqL1xyXG4gICAgJC5kYXRhID0gZnVuY3Rpb24gKG5vZGUsIGtleSwgdmFsdWUpIHtcclxuICAgICAgICAvKiAkLmdldERhdGEoKSAqL1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IG5vZGVbJC5leHBhbmRvXSxcclxuICAgICAgICAgICAgICAgIHN0b3JlID0gaWQgJiYgY2FjaGVbaWRdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIC8qICQuc2V0RGF0YSgpICovXHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBub2RlWyQuZXhwYW5kb10gfHwgKG5vZGVbJC5leHBhbmRvXSA9ICsrJC51dWlkKTtcclxuXHJcbiAgICAgICAgICAgIGNhY2hlW2lkXSA9IGNhY2hlW2lkXSB8fCB7fTtcclxuICAgICAgICAgICAgY2FjaGVbaWRdW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEN1c3RvbSAqL1xyXG4gICAgJC5yZW1vdmVEYXRhID0gZnVuY3Rpb24gKG5vZGUsIGtleXMpIHtcclxuICAgICAgICB2YXIgaWQgPSBub2RlWyQuZXhwYW5kb10sXHJcbiAgICAgICAgICAgIHN0b3JlID0gaWQgJiYgY2FjaGVbaWRdO1xyXG5cclxuICAgICAgICBpZiAoc3RvcmUpIHtcclxuICAgICAgICAgICAgJC5lYWNoKGtleXMsIGZ1bmN0aW9uKF8sIGtleSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JlW2tleV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmV4dGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3JjLCBjb3B5SXNBcnJheSwgY29weSwgbmFtZSwgb3B0aW9ucywgY2xvbmUsXHJcbiAgICAgICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fSxcclxuICAgICAgICAgICAgaSA9IDEsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGRlZXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIGRlZXAgPSB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbaV0gfHwge307XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICQudHlwZSh0YXJnZXQpICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXM7XHJcbiAgICAgICAgICAgIGktLTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKChvcHRpb25zID0gYXJndW1lbnRzW2ldKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldFtuYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBjb3B5ID0gb3B0aW9uc1tuYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gY29weSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIGNvcHkgJiYgKCQuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSAkLmlzQXJyYXkoY29weSkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29weUlzQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlJc0FycmF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiAkLmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmICQuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9ICQuZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3B5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIGpRdWVyeSAxLjQuMyAqL1xyXG4gICAgJC5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlLCBkYXRhKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gJG1ha2VBcnJheSAoYXJyLCByZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFyciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheWxpa2UoT2JqZWN0KGFycikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogJC5tZXJnZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZpcnN0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFtpKytdID0gc2Vjb25kW2orK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gIT09IGxlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlY29uZFtqXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RbaSsrXSA9IHNlY29uZFtqKytdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdC5sZW5ndGggPSBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKHJldCwgdHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/IFthcnJdIDogYXJyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgW10ucHVzaC5jYWxsKHJldCwgYXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZWxlbSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0eXBlID0gKHR5cGUgfHwgXCJmeFwiKSArIFwicXVldWVcIjtcclxuXHJcbiAgICAgICAgdmFyIHEgPSAkLmRhdGEoZWxlbSwgdHlwZSk7XHJcblxyXG4gICAgICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcSB8fCBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcSB8fCAkLmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgcSA9ICQuZGF0YShlbGVtLCB0eXBlLCAkbWFrZUFycmF5KGRhdGEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBxLnB1c2goZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcTtcclxuICAgIH07XHJcblxyXG4gICAgLyogalF1ZXJ5IDEuNC4zICovXHJcbiAgICAkLmRlcXVldWUgPSBmdW5jdGlvbiAoZWxlbXMsIHR5cGUpIHtcclxuICAgICAgICAvKiBDdXN0b206IEVtYmVkIGVsZW1lbnQgaXRlcmF0aW9uLiAqL1xyXG4gICAgICAgICQuZWFjaChlbGVtcy5ub2RlVHlwZSA/IFsgZWxlbXMgXSA6IGVsZW1zLCBmdW5jdGlvbihpLCBlbGVtKSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBxdWV1ZSA9ICQucXVldWUoZWxlbSwgdHlwZSksXHJcbiAgICAgICAgICAgICAgICBmbiA9IHF1ZXVlLnNoaWZ0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZm4gPT09IFwiaW5wcm9ncmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBmbiA9IHF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwiZnhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZuLmNhbGwoZWxlbSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5kZXF1ZXVlKGVsZW0sIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgJC5mbiBNZXRob2RzXHJcbiAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogalF1ZXJ5ICovXHJcbiAgICAkLmZuID0gJC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIC8qIEp1c3QgcmV0dXJuIHRoZSBlbGVtZW50IHdyYXBwZWQgaW5zaWRlIGFuIGFycmF5OyBkb24ndCBwcm9jZWVkIHdpdGggdGhlIGFjdHVhbCBqUXVlcnkgbm9kZSB3cmFwcGluZyBwcm9jZXNzLiAqL1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0b3Iubm9kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNbMF0gPSBzZWxlY3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhIERPTSBub2RlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvKiBqUXVlcnkgYWx0ZXJlZCBjb2RlOiBEcm9wcGVkIGRpc2Nvbm5lY3RlZCBET00gbm9kZSBjaGVja2luZy4gKi9cclxuICAgICAgICAgICAgdmFyIGJveCA9IHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID8gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IHsgdG9wOiAwLCBsZWZ0OiAwIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBib3gudG9wICsgKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5zY3JvbGxUb3AgIHx8IDApICAtIChkb2N1bWVudC5jbGllbnRUb3AgIHx8IDApLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LnNjcm9sbExlZnQgIHx8IDApIC0gKGRvY3VtZW50LmNsaWVudExlZnQgfHwgMClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBwb3NpdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvKiBqUXVlcnkgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gb2Zmc2V0UGFyZW50KCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgKCFvZmZzZXRQYXJlbnQubm9kZVR5cGUudG9Mb3dlckNhc2UgPT09IFwiaHRtbFwiICYmIG9mZnNldFBhcmVudC5zdHlsZS5wb3NpdGlvbiA9PT0gXCJzdGF0aWNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFplcHRvICovXHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gdGhpc1swXSxcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5hcHBseShlbGVtKSxcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSAvXig/OmJvZHl8aHRtbCkkL2kudGVzdChvZmZzZXRQYXJlbnQubm9kZU5hbWUpID8geyB0b3A6IDAsIGxlZnQ6IDAgfSA6ICQob2Zmc2V0UGFyZW50KS5vZmZzZXQoKVxyXG5cclxuICAgICAgICAgICAgb2Zmc2V0LnRvcCAtPSBwYXJzZUZsb2F0KGVsZW0uc3R5bGUubWFyZ2luVG9wKSB8fCAwO1xyXG4gICAgICAgICAgICBvZmZzZXQubGVmdCAtPSBwYXJzZUZsb2F0KGVsZW0uc3R5bGUubWFyZ2luTGVmdCkgfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnQuc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldC50b3AgKz0gcGFyc2VGbG9hdChvZmZzZXRQYXJlbnQuc3R5bGUuYm9yZGVyVG9wV2lkdGgpIHx8IDBcclxuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldC5sZWZ0ICs9IHBhcnNlRmxvYXQob2Zmc2V0UGFyZW50LnN0eWxlLmJvcmRlckxlZnRXaWR0aCkgfHwgMFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICBQcml2YXRlIFZhcmlhYmxlc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBGb3IgJC5kYXRhKCkgKi9cclxuICAgIHZhciBjYWNoZSA9IHt9O1xyXG4gICAgJC5leHBhbmRvID0gXCJ2ZWxvY2l0eVwiICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuICAgICQudXVpZCA9IDA7XHJcblxyXG4gICAgLyogRm9yICQucXVldWUoKSAqL1xyXG4gICAgdmFyIGNsYXNzMnR5cGUgPSB7fSxcclxuICAgICAgICBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5LFxyXG4gICAgICAgIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcclxuXHJcbiAgICB2YXIgdHlwZXMgPSBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2xhc3MydHlwZVtcIltvYmplY3QgXCIgKyB0eXBlc1tpXSArIFwiXVwiXSA9IHR5cGVzW2ldLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogTWFrZXMgJChub2RlKSBwb3NzaWJsZSwgd2l0aG91dCBoYXZpbmcgdG8gY2FsbCBpbml0LiAqL1xyXG4gICAgJC5mbi5pbml0LnByb3RvdHlwZSA9ICQuZm47XHJcblxyXG4gICAgLyogR2xvYmFsaXplIFZlbG9jaXR5IG9udG8gdGhlIHdpbmRvdywgYW5kIGFzc2lnbiBpdHMgVXRpbGl0aWVzIHByb3BlcnR5LiAqL1xyXG4gICAgd2luZG93LlZlbG9jaXR5ID0geyBVdGlsaXRpZXM6ICQgfTtcclxufSkod2luZG93KTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKipcclxuICAgIFZlbG9jaXR5LmpzXHJcbioqKioqKioqKioqKioqKioqKi9cclxuXHJcbjsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIC8qIENvbW1vbkpTIG1vZHVsZS4gKi9cclxuICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG4gICAgLyogQU1EIG1vZHVsZS4gKi9cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoZmFjdG9yeSk7XHJcbiAgICAvKiBCcm93c2VyIGdsb2JhbHMuICovXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoKTtcclxuICAgIH1cclxufShmdW5jdGlvbigpIHtcclxucmV0dXJuIGZ1bmN0aW9uIChnbG9iYWwsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICBTdW1tYXJ5XHJcbiAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLypcclxuICAgIC0gQ1NTOiBDU1Mgc3RhY2sgdGhhdCB3b3JrcyBpbmRlcGVuZGVudGx5IGZyb20gdGhlIHJlc3Qgb2YgVmVsb2NpdHkuXHJcbiAgICAtIGFuaW1hdGUoKTogQ29yZSBhbmltYXRpb24gbWV0aG9kIHRoYXQgaXRlcmF0ZXMgb3ZlciB0aGUgdGFyZ2V0ZWQgZWxlbWVudHMgYW5kIHF1ZXVlcyB0aGUgaW5jb21pbmcgY2FsbCBvbnRvIGVhY2ggZWxlbWVudCBpbmRpdmlkdWFsbHkuXHJcbiAgICAgIC0gUHJlLVF1ZXVlaW5nOiBQcmVwYXJlIHRoZSBlbGVtZW50IGZvciBhbmltYXRpb24gYnkgaW5zdGFudGlhdGluZyBpdHMgZGF0YSBjYWNoZSBhbmQgcHJvY2Vzc2luZyB0aGUgY2FsbCdzIG9wdGlvbnMuXHJcbiAgICAgIC0gUXVldWVpbmc6IFRoZSBsb2dpYyB0aGF0IHJ1bnMgb25jZSB0aGUgY2FsbCBoYXMgcmVhY2hlZCBpdHMgcG9pbnQgb2YgZXhlY3V0aW9uIGluIHRoZSBlbGVtZW50J3MgJC5xdWV1ZSgpIHN0YWNrLlxyXG4gICAgICAgICAgICAgICAgICBNb3N0IGxvZ2ljIGlzIHBsYWNlZCBoZXJlIHRvIGF2b2lkIHJpc2tpbmcgaXQgYmVjb21pbmcgc3RhbGUgKGlmIHRoZSBlbGVtZW50J3MgcHJvcGVydGllcyBoYXZlIGNoYW5nZWQpLlxyXG4gICAgICAtIFB1c2hpbmc6IENvbnNvbGlkYXRpb24gb2YgdGhlIHR3ZWVuIGRhdGEgZm9sbG93ZWQgYnkgaXRzIHB1c2ggb250byB0aGUgZ2xvYmFsIGluLXByb2dyZXNzIGNhbGxzIGNvbnRhaW5lci5cclxuICAgIC0gdGljaygpOiBUaGUgc2luZ2xlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBsb29wIHJlc3BvbnNpYmxlIGZvciB0d2VlbmluZyBhbGwgaW4tcHJvZ3Jlc3MgY2FsbHMuXHJcbiAgICAtIGNvbXBsZXRlQ2FsbCgpOiBIYW5kbGVzIHRoZSBjbGVhbnVwIHByb2Nlc3MgZm9yIGVhY2ggVmVsb2NpdHkgY2FsbC5cclxuICAgICovXHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgSGVscGVyIEZ1bmN0aW9uc1xyXG4gICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIElFIGRldGVjdGlvbi4gR2lzdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vanVsaWFuc2hhcGlyby85MDk4NjA5ICovXHJcbiAgICB2YXIgSUUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50TW9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSA3OyBpID4gNDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gXCI8IS0tW2lmIElFIFwiICsgaSArIFwiXT48c3Bhbj48L3NwYW4+PCFbZW5kaWZdLS0+XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNwYW5cIikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qIHJBRiBzaGltLiBHaXN0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qdWxpYW5zaGFwaXJvLzk0OTc1MTMgKi9cclxuICAgIHZhciByQUZTaGltID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0aW1lTGFzdCA9IDA7XHJcblxyXG4gICAgICAgIHJldHVybiB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIHRpbWVDdXJyZW50ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIHRpbWVEZWx0YTtcclxuXHJcbiAgICAgICAgICAgIC8qIER5bmFtaWNhbGx5IHNldCBkZWxheSBvbiBhIHBlci10aWNrIGJhc2lzIHRvIG1hdGNoIDYwZnBzLiAqL1xyXG4gICAgICAgICAgICAvKiBUZWNobmlxdWUgYnkgRXJpayBNb2xsZXIuIE1JVCBsaWNlbnNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvMTU3OTY3MSAqL1xyXG4gICAgICAgICAgICB0aW1lRGVsdGEgPSBNYXRoLm1heCgwLCAxNiAtICh0aW1lQ3VycmVudCAtIHRpbWVMYXN0KSk7XHJcbiAgICAgICAgICAgIHRpbWVMYXN0ID0gdGltZUN1cnJlbnQgKyB0aW1lRGVsdGE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2sodGltZUN1cnJlbnQgKyB0aW1lRGVsdGEpOyB9LCB0aW1lRGVsdGEpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qIEFycmF5IGNvbXBhY3RpbmcuIENvcHlyaWdodCBMby1EYXNoLiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQgKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBhY3RTcGFyc2VBcnJheSAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSAtMSxcclxuICAgICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxyXG4gICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2FuaXRpemVFbGVtZW50cyAoZWxlbWVudHMpIHtcclxuICAgICAgICAvKiBVbndyYXAgalF1ZXJ5L1plcHRvIG9iamVjdHMuICovXHJcbiAgICAgICAgaWYgKFR5cGUuaXNXcmFwcGVkKGVsZW1lbnRzKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwoZWxlbWVudHMpO1xyXG4gICAgICAgIC8qIFdyYXAgYSBzaW5nbGUgZWxlbWVudCBpbiBhbiBhcnJheSBzbyB0aGF0ICQuZWFjaCgpIGNhbiBpdGVyYXRlIHdpdGggdGhlIGVsZW1lbnQgaW5zdGVhZCBvZiBpdHMgbm9kZSdzIGNoaWxkcmVuLiAqL1xyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc05vZGUoZWxlbWVudHMpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gWyBlbGVtZW50cyBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBUeXBlID0ge1xyXG4gICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgdmFyaWFibGUgPT09IFwic3RyaW5nXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNOb2RlOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhcmlhYmxlICYmIHZhcmlhYmxlLm5vZGVUeXBlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogQ29weXJpZ2h0IE1hcnRpbiBCb2htLiBNSVQgTGljZW5zZTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vVG9tYWxhay84MThhNzhhMjI2YTA3MzhlYWFkZSAqL1xyXG4gICAgICAgIGlzTm9kZUxpc3Q6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhcmlhYmxlID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICAvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKSkgJiZcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlLmxlbmd0aCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAodmFyaWFibGUubGVuZ3RoID09PSAwIHx8ICh0eXBlb2YgdmFyaWFibGVbMF0gPT09IFwib2JqZWN0XCIgJiYgdmFyaWFibGVbMF0ubm9kZVR5cGUgPiAwKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBEZXRlcm1pbmUgaWYgdmFyaWFibGUgaXMgYSB3cmFwcGVkIGpRdWVyeSBvciBaZXB0byBlbGVtZW50LiAqL1xyXG4gICAgICAgIGlzV3JhcHBlZDogZnVuY3Rpb24gKHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YXJpYWJsZSAmJiAodmFyaWFibGUuanF1ZXJ5IHx8ICh3aW5kb3cuWmVwdG8gJiYgd2luZG93LlplcHRvLnplcHRvLmlzWih2YXJpYWJsZSkpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzU1ZHOiBmdW5jdGlvbiAodmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5TVkdFbGVtZW50ICYmICh2YXJpYWJsZSBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhcmlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqXHJcbiAgICAgICBEZXBlbmRlbmNpZXNcclxuICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIHZhciAkLFxyXG4gICAgICAgIGlzSlF1ZXJ5ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKGdsb2JhbC5mbiAmJiBnbG9iYWwuZm4uanF1ZXJ5KSB7XHJcbiAgICAgICAgJCA9IGdsb2JhbDtcclxuICAgICAgICBpc0pRdWVyeSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQgPSB3aW5kb3cuVmVsb2NpdHkuVXRpbGl0aWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChJRSA8PSA4ICYmICFpc0pRdWVyeSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO1xyXG4gICAgfSBlbHNlIGlmIChJRSA8PSA3KSB7XHJcbiAgICAgICAgLyogUmV2ZXJ0IHRvIGpRdWVyeSdzICQuYW5pbWF0ZSgpLCBhbmQgbG9zZSBWZWxvY2l0eSdzIGV4dHJhIGZlYXR1cmVzLiAqL1xyXG4gICAgICAgIGpRdWVyeS5mbi52ZWxvY2l0eSA9IGpRdWVyeS5mbi5hbmltYXRlO1xyXG5cclxuICAgICAgICAvKiBOb3cgdGhhdCAkLmZuLnZlbG9jaXR5IGlzIGFsaWFzZWQsIGFib3J0IHRoaXMgVmVsb2NpdHkgZGVjbGFyYXRpb24uICovXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIENvbnN0YW50c1xyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgdmFyIERVUkFUSU9OX0RFRkFVTFQgPSA0MDAsXHJcbiAgICAgICAgRUFTSU5HX0RFRkFVTFQgPSBcInN3aW5nXCI7XHJcblxyXG4gICAgLyoqKioqKioqKioqKipcclxuICAgICAgICBTdGF0ZVxyXG4gICAgKioqKioqKioqKioqKi9cclxuXHJcbiAgICAvKiBOb3RlOiBUaGUgZ2xvYmFsIG9iamVjdCBhbHNvIGRvdWJsZXMgYXMgYSBwdWJsaWNseS1hY2Nlc3NpYmxlIGRhdGEgc3RvcmUgZm9yIHRoZSBwdXJwb3NlcyBvZiB1bml0IHRlc3RpbmcuICovXHJcbiAgICAvKiBOb3RlOiBBbGlhcyB0aGUgbG93ZXJjYXNlIGFuZCB1cHBlcmNhc2UgdmFyaWFudHMgb2YgXCJ2ZWxvY2l0eVwiIHRvIG1pbmltaXplIHVzZXIgY29uZnVzaW9uIGR1ZSB0byB0aGUgbG93ZXJjYXNlIG5hdHVyZSBvZiB0aGUgJC5mbiBleHRlbnNpb24uICovXHJcbiAgICB2YXIgVmVsb2NpdHkgPSB7XHJcbiAgICAgICAgLyogQ29udGFpbmVyIGZvciBwYWdlLXdpZGUgVmVsb2NpdHkgc3RhdGUgZGF0YS4gKi9cclxuICAgICAgICBTdGF0ZToge1xyXG4gICAgICAgICAgICAvKiBEZXRlY3QgbW9iaWxlIGRldmljZXMgdG8gZGV0ZXJtaW5lIGlmIG1vYmlsZUhBIHNob3VsZCBiZSB0dXJuZWQgb24uICovXHJcbiAgICAgICAgICAgIGlzTW9iaWxlOiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIC8qIFRoZSBtb2JpbGVIQSBvcHRpb24ncyBiZWhhdmlvciBjaGFuZ2VzIG9uIG9sZGVyIEFuZHJvaWQgZGV2aWNlcyAoR2luZ2VyYnJlYWQsIHZlcnNpb25zIDIuMy4zLTIuMy43KS4gKi9cclxuICAgICAgICAgICAgaXNBbmRyb2lkOiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIGlzR2luZ2VyYnJlYWQ6IC9BbmRyb2lkIDJcXC4zXFwuWzMtN10vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLFxyXG4gICAgICAgICAgICBpc0Nocm9tZTogd2luZG93LmNocm9tZSxcclxuICAgICAgICAgICAgaXNGaXJlZm94OiAvRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXHJcbiAgICAgICAgICAgIC8qIENyZWF0ZSBhIGNhY2hlZCBlbGVtZW50IGZvciByZS11c2Ugd2hlbiBjaGVja2luZyBmb3IgQ1NTIHByb3BlcnR5IHByZWZpeGVzLiAqL1xyXG4gICAgICAgICAgICBwcmVmaXhFbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAvKiBDYWNoZSBldmVyeSBwcmVmaXggbWF0Y2ggdG8gYXZvaWQgcmVwZWF0aW5nIGxvb2t1cHMuICovXHJcbiAgICAgICAgICAgIHByZWZpeE1hdGNoZXM6IHt9LFxyXG4gICAgICAgICAgICAvKiBDYWNoZSB0aGUgYW5jaG9yIHVzZWQgZm9yIGFuaW1hdGluZyB3aW5kb3cgc2Nyb2xsaW5nLiAqL1xyXG4gICAgICAgICAgICBzY3JvbGxBbmNob3I6IG51bGwsXHJcbiAgICAgICAgICAgIC8qIENhY2hlIHRoZSBwcm9wZXJ0eSBuYW1lcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNjcm9sbCBhbmNob3IuICovXHJcbiAgICAgICAgICAgIHNjcm9sbFByb3BlcnR5TGVmdDogbnVsbCxcclxuICAgICAgICAgICAgc2Nyb2xsUHJvcGVydHlUb3A6IG51bGwsXHJcbiAgICAgICAgICAgIC8qIEtlZXAgdHJhY2sgb2Ygd2hldGhlciBvdXIgUkFGIHRpY2sgaXMgcnVubmluZy4gKi9cclxuICAgICAgICAgICAgaXNUaWNraW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgLyogQ29udGFpbmVyIGZvciBldmVyeSBpbi1wcm9ncmVzcyBjYWxsIHRvIFZlbG9jaXR5LiAqL1xyXG4gICAgICAgICAgICBjYWxsczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qIFZlbG9jaXR5J3MgY3VzdG9tIENTUyBzdGFjay4gTWFkZSBnbG9iYWwgZm9yIHVuaXQgdGVzdGluZy4gKi9cclxuICAgICAgICBDU1M6IHsgLyogRGVmaW5lZCBiZWxvdy4gKi8gfSxcclxuICAgICAgICAvKiBEZWZpbmVkIGJ5IFZlbG9jaXR5J3Mgb3B0aW9uYWwgalF1ZXJ5IHNoaW0uICovXHJcbiAgICAgICAgVXRpbGl0aWVzOiAkLFxyXG4gICAgICAgIC8qIENvbnRhaW5lciBmb3IgdGhlIHVzZXIncyBjdXN0b20gYW5pbWF0aW9uIHJlZGlyZWN0cyB0aGF0IGFyZSByZWZlcmVuY2VkIGJ5IG5hbWUgaW4gcGxhY2Ugb2YgYSBwcm9wZXJ0aWVzIG1hcCBvYmplY3QuICovXHJcbiAgICAgICAgUmVkaXJlY3RzOiB7IC8qIE1hbnVhbGx5IHJlZ2lzdGVyZWQgYnkgdGhlIHVzZXIuICovIH0sXHJcbiAgICAgICAgRWFzaW5nczogeyAvKiBEZWZpbmVkIGJlbG93LiAqLyB9LFxyXG4gICAgICAgIC8qIEF0dGVtcHQgdG8gdXNlIEVTNiBQcm9taXNlcyBieSBkZWZhdWx0LiBVc2VycyBjYW4gb3ZlcnJpZGUgdGhpcyB3aXRoIGEgdGhpcmQtcGFydHkgcHJvbWlzZXMgbGlicmFyeS4gKi9cclxuICAgICAgICBQcm9taXNlOiB3aW5kb3cuUHJvbWlzZSxcclxuICAgICAgICAvKiBQYWdlLXdpZGUgb3B0aW9uIGRlZmF1bHRzLCB3aGljaCBjYW4gYmUgb3ZlcnJpZGVuIGJ5IHRoZSB1c2VyLiAqL1xyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIHF1ZXVlOiBcIlwiLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogRFVSQVRJT05fREVGQVVMVCxcclxuICAgICAgICAgICAgZWFzaW5nOiBFQVNJTkdfREVGQVVMVCxcclxuICAgICAgICAgICAgYmVnaW46IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY29tcGxldGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcHJvZ3Jlc3M6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZGlzcGxheTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBkZWxheTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1vYmlsZUhBOiB0cnVlLFxyXG4gICAgICAgICAgICAvKiBTZXQgdG8gZmFsc2UgdG8gcHJldmVudCBwcm9wZXJ0eSB2YWx1ZXMgZnJvbSBiZWluZyBjYWNoZWQgYmV0d2VlbiBjb25zZWN1dGl2ZSBWZWxvY2l0eS1pbml0aWF0ZWQgY2hhaW4gY2FsbHMuICovXHJcbiAgICAgICAgICAgIF9jYWNoZVZhbHVlczogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogQSBkZXNpZ24gZ29hbCBvZiBWZWxvY2l0eSBpcyB0byBjYWNoZSBkYXRhIHdoZXJldmVyIHBvc3NpYmxlIGluIG9yZGVyIHRvIGF2b2lkIERPTSByZXF1ZXJ5aW5nLlxyXG4gICAgICAgICAgIEFjY29yZGluZ2x5LCBlYWNoIGVsZW1lbnQgaGFzIGEgZGF0YSBjYWNoZSBpbnN0YW50aWF0ZWQgb24gaXQuICovXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgJC5kYXRhKGVsZW1lbnQsIFwidmVsb2NpdHlcIiwge1xyXG4gICAgICAgICAgICAgICAgLyogU3RvcmUgd2hldGhlciB0aGlzIGlzIGFuIFNWRyBlbGVtZW50LCBzaW5jZSBpdHMgcHJvcGVydGllcyBhcmUgcmV0cmlldmVkIGFuZCB1cGRhdGVkIGRpZmZlcmVudGx5IHRoYW4gc3RhbmRhcmQgSFRNTCBlbGVtZW50cy4gKi9cclxuICAgICAgICAgICAgICAgIGlzU1ZHOiBUeXBlLmlzU1ZHKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgLyogS2VlcCB0cmFjayBvZiB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGN1cnJlbnRseSBiZWluZyBhbmltYXRlZCBieSBWZWxvY2l0eS5cclxuICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBwcm9wZXJ0eSB2YWx1ZXMgYXJlIG5vdCB0cmFuc2ZlcnJlZCBiZXR3ZWVuIG5vbi1jb25zZWN1dGl2ZSAoc3RhbGUpIGNhbGxzLiAqL1xyXG4gICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgLyogQSByZWZlcmVuY2UgdG8gdGhlIGVsZW1lbnQncyBsaXZlIGNvbXB1dGVkU3R5bGUgb2JqZWN0LiBMZWFybiBtb3JlIGhlcmU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAqL1xyXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIC8qIFR3ZWVuIGRhdGEgaXMgY2FjaGVkIGZvciBlYWNoIGFuaW1hdGlvbiBvbiB0aGUgZWxlbWVudCBzbyB0aGF0IGRhdGEgY2FuIGJlIHBhc3NlZCBhY3Jvc3MgY2FsbHMgLS1cclxuICAgICAgICAgICAgICAgICAgIGluIHBhcnRpY3VsYXIsIGVuZCB2YWx1ZXMgYXJlIHVzZWQgYXMgc3Vic2VxdWVudCBzdGFydCB2YWx1ZXMgaW4gY29uc2VjdXRpdmUgVmVsb2NpdHkgY2FsbHMuICovXHJcbiAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgZnVsbCByb290IHByb3BlcnR5IHZhbHVlcyBvZiBlYWNoIENTUyBob29rIGJlaW5nIGFuaW1hdGVkIG9uIHRoaXMgZWxlbWVudCBhcmUgY2FjaGVkIHNvIHRoYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAxKSBDb25jdXJyZW50bHktYW5pbWF0aW5nIGhvb2tzIHNoYXJpbmcgdGhlIHNhbWUgcm9vdCBjYW4gaGF2ZSB0aGVpciByb290IHZhbHVlcycgbWVyZ2VkIGludG8gb25lIHdoaWxlIHR3ZWVuaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgMikgUG9zdC1ob29rLWluamVjdGlvbiByb290IHZhbHVlcyBjYW4gYmUgdHJhbnNmZXJyZWQgb3ZlciB0byBjb25zZWN1dGl2ZWx5IGNoYWluZWQgVmVsb2NpdHkgY2FsbHMgYXMgc3RhcnRpbmcgcm9vdCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZUNhY2hlOiB7fSxcclxuICAgICAgICAgICAgICAgIC8qIEEgY2FjaGUgZm9yIHRyYW5zZm9ybSB1cGRhdGVzLCB3aGljaCBtdXN0IGJlIG1hbnVhbGx5IGZsdXNoZWQgdmlhIENTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKCkuICovXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1DYWNoZToge31cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKiBBIHBhcmFsbGVsIHRvIGpRdWVyeSdzICQuY3NzKCksIHVzZWQgZm9yIGdldHRpbmcvc2V0dGluZyBWZWxvY2l0eSdzIGhvb2tlZCBDU1MgcHJvcGVydGllcy4gKi9cclxuICAgICAgICBob29rOiBudWxsLCAvKiBEZWZpbmVkIGJlbG93LiAqL1xyXG4gICAgICAgIC8qIFZlbG9jaXR5LXdpZGUgYW5pbWF0aW9uIHRpbWUgcmVtYXBwaW5nIGZvciB0ZXN0aW5nIHB1cnBvc2VzLiAqL1xyXG4gICAgICAgIG1vY2s6IGZhbHNlLFxyXG4gICAgICAgIHZlcnNpb246IHsgbWFqb3I6IDEsIG1pbm9yOiAxLCBwYXRjaDogMCB9LFxyXG4gICAgICAgIC8qIFNldCB0byAxIG9yIDIgKG1vc3QgdmVyYm9zZSkgdG8gb3V0cHV0IGRlYnVnIGluZm8gdG8gY29uc29sZS4gKi9cclxuICAgICAgICBkZWJ1ZzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgLyogUmV0cmlldmUgdGhlIGFwcHJvcHJpYXRlIHNjcm9sbCBhbmNob3IgYW5kIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBicm93c2VyOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93LnNjcm9sbFkgKi9cclxuICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvciA9IHdpbmRvdztcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQgPSBcInBhZ2VYT2Zmc2V0XCI7XHJcbiAgICAgICAgVmVsb2NpdHkuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3AgPSBcInBhZ2VZT2Zmc2V0XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvciA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keTtcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQgPSBcInNjcm9sbExlZnRcIjtcclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcCA9IFwic2Nyb2xsVG9wXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyogU2hvcnRoYW5kIGFsaWFzIGZvciBqUXVlcnkncyAkLmRhdGEoKSB1dGlsaXR5LiAqL1xyXG4gICAgZnVuY3Rpb24gRGF0YSAoZWxlbWVudCkge1xyXG4gICAgICAgIC8qIEhhcmRjb2RlIGEgcmVmZXJlbmNlIHRvIHRoZSBwbHVnaW4gbmFtZS4gKi9cclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSAkLmRhdGEoZWxlbWVudCwgXCJ2ZWxvY2l0eVwiKTtcclxuXHJcbiAgICAgICAgLyogalF1ZXJ5IDw9MS40LjIgcmV0dXJucyBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkIHdoZW4gbm8gbWF0Y2ggaXMgZm91bmQuIFdlIG5vcm1hbGl6ZSB0aGlzIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJlc3BvbnNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKipcclxuICAgICAgICBFYXNpbmdcclxuICAgICoqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIFN0ZXAgZWFzaW5nIGdlbmVyYXRvci4gKi9cclxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlU3RlcCAoc3RlcHMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocCAqIHN0ZXBzKSAqICgxIC8gc3RlcHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyogQmV6aWVyIGN1cnZlIGZ1bmN0aW9uIGdlbmVyYXRvci4gQ29weXJpZ2h0IEdhZXRhbiBSZW5hdWRlYXUuIE1JVCBMaWNlbnNlOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01JVF9MaWNlbnNlICovXHJcbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUJlemllciAobVgxLCBtWTEsIG1YMiwgbVkyKSB7XHJcbiAgICAgICAgdmFyIE5FV1RPTl9JVEVSQVRJT05TID0gNCxcclxuICAgICAgICAgICAgTkVXVE9OX01JTl9TTE9QRSA9IDAuMDAxLFxyXG4gICAgICAgICAgICBTVUJESVZJU0lPTl9QUkVDSVNJT04gPSAwLjAwMDAwMDEsXHJcbiAgICAgICAgICAgIFNVQkRJVklTSU9OX01BWF9JVEVSQVRJT05TID0gMTAsXHJcbiAgICAgICAgICAgIGtTcGxpbmVUYWJsZVNpemUgPSAxMSxcclxuICAgICAgICAgICAga1NhbXBsZVN0ZXBTaXplID0gMS4wIC8gKGtTcGxpbmVUYWJsZVNpemUgLSAxLjApLFxyXG4gICAgICAgICAgICBmbG9hdDMyQXJyYXlTdXBwb3J0ZWQgPSBcIkZsb2F0MzJBcnJheVwiIGluIHdpbmRvdztcclxuXHJcbiAgICAgICAgLyogTXVzdCBjb250YWluIGZvdXIgYXJndW1lbnRzLiAqL1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEFyZ3VtZW50cyBtdXN0IGJlIG51bWJlcnMuICovXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oYXJndW1lbnRzW2ldKSB8fCAhaXNGaW5pdGUoYXJndW1lbnRzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBYIHZhbHVlcyBtdXN0IGJlIGluIHRoZSBbMCwgMV0gcmFuZ2UuICovXHJcbiAgICAgICAgbVgxID0gTWF0aC5taW4obVgxLCAxKTtcclxuICAgICAgICBtWDIgPSBNYXRoLm1pbihtWDIsIDEpO1xyXG4gICAgICAgIG1YMSA9IE1hdGgubWF4KG1YMSwgMCk7XHJcbiAgICAgICAgbVgyID0gTWF0aC5tYXgobVgyLCAwKTtcclxuXHJcbiAgICAgICAgdmFyIG1TYW1wbGVWYWx1ZXMgPSBmbG9hdDMyQXJyYXlTdXBwb3J0ZWQgPyBuZXcgRmxvYXQzMkFycmF5KGtTcGxpbmVUYWJsZVNpemUpIDogbmV3IEFycmF5KGtTcGxpbmVUYWJsZVNpemUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBBIChhQTEsIGFBMikgeyByZXR1cm4gMS4wIC0gMy4wICogYUEyICsgMy4wICogYUExOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gQiAoYUExLCBhQTIpIHsgcmV0dXJuIDMuMCAqIGFBMiAtIDYuMCAqIGFBMTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIEMgKGFBMSkgICAgICB7IHJldHVybiAzLjAgKiBhQTE7IH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FsY0JlemllciAoYVQsIGFBMSwgYUEyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKEEoYUExLCBhQTIpKmFUICsgQihhQTEsIGFBMikpKmFUICsgQyhhQTEpKSphVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNsb3BlIChhVCwgYUExLCBhQTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDMuMCAqIEEoYUExLCBhQTIpKmFUKmFUICsgMi4wICogQihhQTEsIGFBMikgKiBhVCArIEMoYUExKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG5ld3RvblJhcGhzb25JdGVyYXRlIChhWCwgYUd1ZXNzVCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5FV1RPTl9JVEVSQVRJT05TOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2xvcGUgPSBnZXRTbG9wZShhR3Vlc3NULCBtWDEsIG1YMik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTbG9wZSA9PT0gMC4wKSByZXR1cm4gYUd1ZXNzVDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFggPSBjYWxjQmV6aWVyKGFHdWVzc1QsIG1YMSwgbVgyKSAtIGFYO1xyXG4gICAgICAgICAgICAgICAgYUd1ZXNzVCAtPSBjdXJyZW50WCAvIGN1cnJlbnRTbG9wZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFHdWVzc1Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxjU2FtcGxlVmFsdWVzICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrU3BsaW5lVGFibGVTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIG1TYW1wbGVWYWx1ZXNbaV0gPSBjYWxjQmV6aWVyKGkgKiBrU2FtcGxlU3RlcFNpemUsIG1YMSwgbVgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYmluYXJ5U3ViZGl2aWRlIChhWCwgYUEsIGFCKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50WCwgY3VycmVudFQsIGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFQgPSBhQSArIChhQiAtIGFBKSAvIDIuMDtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRYID0gY2FsY0JlemllcihjdXJyZW50VCwgbVgxLCBtWDIpIC0gYVg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFggPiAwLjApIHtcclxuICAgICAgICAgICAgICAgICAgYUIgPSBjdXJyZW50VDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGFBID0gY3VycmVudFQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKE1hdGguYWJzKGN1cnJlbnRYKSA+IFNVQkRJVklTSU9OX1BSRUNJU0lPTiAmJiArK2kgPCBTVUJESVZJU0lPTl9NQVhfSVRFUkFUSU9OUyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRURm9yWCAoYVgpIHtcclxuICAgICAgICAgICAgdmFyIGludGVydmFsU3RhcnQgPSAwLjAsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2FtcGxlID0gMSxcclxuICAgICAgICAgICAgICAgIGxhc3RTYW1wbGUgPSBrU3BsaW5lVGFibGVTaXplIC0gMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoOyBjdXJyZW50U2FtcGxlICE9IGxhc3RTYW1wbGUgJiYgbVNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSA8PSBhWDsgKytjdXJyZW50U2FtcGxlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbFN0YXJ0ICs9IGtTYW1wbGVTdGVwU2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLS1jdXJyZW50U2FtcGxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRpc3QgPSAoYVggLSBtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKSAvIChtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGUrMV0gLSBtU2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKSxcclxuICAgICAgICAgICAgICAgIGd1ZXNzRm9yVCA9IGludGVydmFsU3RhcnQgKyBkaXN0ICoga1NhbXBsZVN0ZXBTaXplLFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNsb3BlID0gZ2V0U2xvcGUoZ3Vlc3NGb3JULCBtWDEsIG1YMik7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbFNsb3BlID49IE5FV1RPTl9NSU5fU0xPUEUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXd0b25SYXBoc29uSXRlcmF0ZShhWCwgZ3Vlc3NGb3JUKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsU2xvcGUgPT0gMC4wKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3Vlc3NGb3JUO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbmFyeVN1YmRpdmlkZShhWCwgaW50ZXJ2YWxTdGFydCwgaW50ZXJ2YWxTdGFydCArIGtTYW1wbGVTdGVwU2l6ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBfcHJlY29tcHV0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJlY29tcHV0ZSgpIHtcclxuICAgICAgICAgICAgX3ByZWNvbXB1dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKG1YMSAhPSBtWTEgfHwgbVgyICE9IG1ZMikgY2FsY1NhbXBsZVZhbHVlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGYgPSBmdW5jdGlvbiAoYVgpIHtcclxuICAgICAgICAgICAgaWYgKCFfcHJlY29tcHV0ZWQpIHByZWNvbXB1dGUoKTtcclxuICAgICAgICAgICAgaWYgKG1YMSA9PT0gbVkxICYmIG1YMiA9PT0gbVkyKSByZXR1cm4gYVg7XHJcbiAgICAgICAgICAgIGlmIChhWCA9PT0gMCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChhWCA9PT0gMSkgcmV0dXJuIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FsY0JlemllcihnZXRURm9yWChhWCksIG1ZMSwgbVkyKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmLmdldENvbnRyb2xQb2ludHMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFt7IHg6IG1YMSwgeTogbVkxIH0sIHsgeDogbVgyLCB5OiBtWTIgfV07IH07XHJcblxyXG4gICAgICAgIHZhciBzdHIgPSBcImdlbmVyYXRlQmV6aWVyKFwiICsgW21YMSwgbVkxLCBtWDIsIG1ZMl0gKyBcIilcIjtcclxuICAgICAgICBmLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RyOyB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH1cclxuXHJcbiAgICAvKiBSdW5nZS1LdXR0YSBzcHJpbmcgcGh5c2ljcyBmdW5jdGlvbiBnZW5lcmF0b3IuIEFkYXB0ZWQgZnJvbSBGcmFtZXIuanMsIGNvcHlyaWdodCBLb2VuIEJvay4gTUlUIExpY2Vuc2U6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UgKi9cclxuICAgIC8qIEdpdmVuIGEgdGVuc2lvbiwgZnJpY3Rpb24sIGFuZCBkdXJhdGlvbiwgYSBzaW11bGF0aW9uIGF0IDYwRlBTIHdpbGwgZmlyc3QgcnVuIHdpdGhvdXQgYSBkZWZpbmVkIGR1cmF0aW9uIGluIG9yZGVyIHRvIGNhbGN1bGF0ZSB0aGUgZnVsbCBwYXRoLiBBIHNlY29uZCBwYXNzXHJcbiAgICAgICB0aGVuIGFkanVzdHMgdGhlIHRpbWUgZGVsdGEgLS0gdXNpbmcgdGhlIHJlbGF0aW9uIGJldHdlZW4gYWN0dWFsIHRpbWUgYW5kIGR1cmF0aW9uIC0tIHRvIGNhbGN1bGF0ZSB0aGUgcGF0aCBmb3IgdGhlIGR1cmF0aW9uLWNvbnN0cmFpbmVkIGFuaW1hdGlvbi4gKi9cclxuICAgIHZhciBnZW5lcmF0ZVNwcmluZ1JLNCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gc3ByaW5nQWNjZWxlcmF0aW9uRm9yU3RhdGUgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoLXN0YXRlLnRlbnNpb24gKiBzdGF0ZS54KSAtIChzdGF0ZS5mcmljdGlvbiAqIHN0YXRlLnYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlIChpbml0aWFsU3RhdGUsIGR0LCBkZXJpdmF0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIHg6IGluaXRpYWxTdGF0ZS54ICsgZGVyaXZhdGl2ZS5keCAqIGR0LFxyXG4gICAgICAgICAgICAgICAgdjogaW5pdGlhbFN0YXRlLnYgKyBkZXJpdmF0aXZlLmR2ICogZHQsXHJcbiAgICAgICAgICAgICAgICB0ZW5zaW9uOiBpbml0aWFsU3RhdGUudGVuc2lvbixcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiBpbml0aWFsU3RhdGUuZnJpY3Rpb25cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGR4OiBzdGF0ZS52LCBkdjogc3ByaW5nQWNjZWxlcmF0aW9uRm9yU3RhdGUoc3RhdGUpIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzcHJpbmdJbnRlZ3JhdGVTdGF0ZSAoc3RhdGUsIGR0KSB7XHJcbiAgICAgICAgICAgIHZhciBhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGR4OiBzdGF0ZS52LFxyXG4gICAgICAgICAgICAgICAgICAgIGR2OiBzcHJpbmdBY2NlbGVyYXRpb25Gb3JTdGF0ZShzdGF0ZSlcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBiID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCAqIDAuNSwgYSksXHJcbiAgICAgICAgICAgICAgICBjID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCAqIDAuNSwgYiksXHJcbiAgICAgICAgICAgICAgICBkID0gc3ByaW5nRXZhbHVhdGVTdGF0ZVdpdGhEZXJpdmF0aXZlKHN0YXRlLCBkdCwgYyksXHJcbiAgICAgICAgICAgICAgICBkeGR0ID0gMS4wIC8gNi4wICogKGEuZHggKyAyLjAgKiAoYi5keCArIGMuZHgpICsgZC5keCksXHJcbiAgICAgICAgICAgICAgICBkdmR0ID0gMS4wIC8gNi4wICogKGEuZHYgKyAyLjAgKiAoYi5kdiArIGMuZHYpICsgZC5kdik7XHJcblxyXG4gICAgICAgICAgICBzdGF0ZS54ID0gc3RhdGUueCArIGR4ZHQgKiBkdDtcclxuICAgICAgICAgICAgc3RhdGUudiA9IHN0YXRlLnYgKyBkdmR0ICogZHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3ByaW5nUks0RmFjdG9yeSAodGVuc2lvbiwgZnJpY3Rpb24sIGR1cmF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5pdFN0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVuc2lvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmcmljdGlvbjogbnVsbFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhdGggPSBbMF0sXHJcbiAgICAgICAgICAgICAgICB0aW1lX2xhcHNlZCA9IDAsXHJcbiAgICAgICAgICAgICAgICB0b2xlcmFuY2UgPSAxIC8gMTAwMDAsXHJcbiAgICAgICAgICAgICAgICBEVCA9IDE2IC8gMTAwMCxcclxuICAgICAgICAgICAgICAgIGhhdmVfZHVyYXRpb24sIGR0LCBsYXN0X3N0YXRlO1xyXG5cclxuICAgICAgICAgICAgdGVuc2lvbiA9IHBhcnNlRmxvYXQodGVuc2lvbikgfHwgNTAwO1xyXG4gICAgICAgICAgICBmcmljdGlvbiA9IHBhcnNlRmxvYXQoZnJpY3Rpb24pIHx8IDIwO1xyXG4gICAgICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpbml0U3RhdGUudGVuc2lvbiA9IHRlbnNpb247XHJcbiAgICAgICAgICAgIGluaXRTdGF0ZS5mcmljdGlvbiA9IGZyaWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgaGF2ZV9kdXJhdGlvbiA9IGR1cmF0aW9uICE9PSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLyogQ2FsY3VsYXRlIHRoZSBhY3R1YWwgdGltZSBpdCB0YWtlcyBmb3IgdGhpcyBhbmltYXRpb24gdG8gY29tcGxldGUgd2l0aCB0aGUgcHJvdmlkZWQgY29uZGl0aW9ucy4gKi9cclxuICAgICAgICAgICAgaWYgKGhhdmVfZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8qIFJ1biB0aGUgc2ltdWxhdGlvbiB3aXRob3V0IGEgZHVyYXRpb24uICovXHJcbiAgICAgICAgICAgICAgICB0aW1lX2xhcHNlZCA9IHNwcmluZ1JLNEZhY3RvcnkodGVuc2lvbiwgZnJpY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgLyogQ29tcHV0ZSB0aGUgYWRqdXN0ZWQgdGltZSBkZWx0YS4gKi9cclxuICAgICAgICAgICAgICAgIGR0ID0gdGltZV9sYXBzZWQgLyBkdXJhdGlvbiAqIERUO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZHQgPSBEVDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8qIE5leHQvc3RlcCBmdW5jdGlvbiAuKi9cclxuICAgICAgICAgICAgICAgIGxhc3Rfc3RhdGUgPSBzcHJpbmdJbnRlZ3JhdGVTdGF0ZShsYXN0X3N0YXRlIHx8IGluaXRTdGF0ZSwgZHQpO1xyXG4gICAgICAgICAgICAgICAgLyogU3RvcmUgdGhlIHBvc2l0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgcGF0aC5wdXNoKDEgKyBsYXN0X3N0YXRlLngpO1xyXG4gICAgICAgICAgICAgICAgdGltZV9sYXBzZWQgKz0gMTY7XHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY2hhbmdlIHRocmVzaG9sZCBpcyByZWFjaGVkLCBicmVhay4gKi9cclxuICAgICAgICAgICAgICAgIGlmICghKE1hdGguYWJzKGxhc3Rfc3RhdGUueCkgPiB0b2xlcmFuY2UgJiYgTWF0aC5hYnMobGFzdF9zdGF0ZS52KSA+IHRvbGVyYW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogSWYgZHVyYXRpb24gaXMgbm90IGRlZmluZWQsIHJldHVybiB0aGUgYWN0dWFsIHRpbWUgcmVxdWlyZWQgZm9yIGNvbXBsZXRpbmcgdGhpcyBhbmltYXRpb24uIE90aGVyd2lzZSwgcmV0dXJuIGEgY2xvc3VyZSB0aGF0IGhvbGRzIHRoZVxyXG4gICAgICAgICAgICAgICBjb21wdXRlZCBwYXRoIGFuZCByZXR1cm5zIGEgc25hcHNob3Qgb2YgdGhlIHBvc2l0aW9uIGFjY29yZGluZyB0byBhIGdpdmVuIHBlcmNlbnRDb21wbGV0ZS4gKi9cclxuICAgICAgICAgICAgcmV0dXJuICFoYXZlX2R1cmF0aW9uID8gdGltZV9sYXBzZWQgOiBmdW5jdGlvbihwZXJjZW50Q29tcGxldGUpIHsgcmV0dXJuIHBhdGhbIChwZXJjZW50Q29tcGxldGUgKiAocGF0aC5sZW5ndGggLSAxKSkgfCAwIF07IH07XHJcbiAgICAgICAgfTtcclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyogalF1ZXJ5IGVhc2luZ3MuICovXHJcbiAgICBWZWxvY2l0eS5FYXNpbmdzID0ge1xyXG4gICAgICAgIGxpbmVhcjogZnVuY3Rpb24ocCkgeyByZXR1cm4gcDsgfSxcclxuICAgICAgICBzd2luZzogZnVuY3Rpb24ocCkgeyByZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyIH0sXHJcbiAgICAgICAgLyogQm9udXMgXCJzcHJpbmdcIiBlYXNpbmcsIHdoaWNoIGlzIGEgbGVzcyBleGFnZ2VyYXRlZCB2ZXJzaW9uIG9mIGVhc2VJbk91dEVsYXN0aWMuICovXHJcbiAgICAgICAgc3ByaW5nOiBmdW5jdGlvbihwKSB7IHJldHVybiAxIC0gKE1hdGguY29zKHAgKiA0LjUgKiBNYXRoLlBJKSAqIE1hdGguZXhwKC1wICogNikpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qIENTUzMgYW5kIFJvYmVydCBQZW5uZXIgZWFzaW5ncy4gKi9cclxuICAgICQuZWFjaChcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIFsgXCJlYXNlXCIsIFsgMC4yNSwgMC4xLCAwLjI1LCAxLjAgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZS1pblwiLCBbIDAuNDIsIDAuMCwgMS4wMCwgMS4wIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2Utb3V0XCIsIFsgMC4wMCwgMC4wLCAwLjU4LCAxLjAgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZS1pbi1vdXRcIiwgWyAwLjQyLCAwLjAsIDAuNTgsIDEuMCBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5TaW5lXCIsIFsgMC40NywgMCwgMC43NDUsIDAuNzE1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRTaW5lXCIsIFsgMC4zOSwgMC41NzUsIDAuNTY1LCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFNpbmVcIiwgWyAwLjQ0NSwgMC4wNSwgMC41NSwgMC45NSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5RdWFkXCIsIFsgMC41NSwgMC4wODUsIDAuNjgsIDAuNTMgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dFF1YWRcIiwgWyAwLjI1LCAwLjQ2LCAwLjQ1LCAwLjk0IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFF1YWRcIiwgWyAwLjQ1NSwgMC4wMywgMC41MTUsIDAuOTU1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbkN1YmljXCIsIFsgMC41NSwgMC4wNTUsIDAuNjc1LCAwLjE5IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRDdWJpY1wiLCBbIDAuMjE1LCAwLjYxLCAwLjM1NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRDdWJpY1wiLCBbIDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluUXVhcnRcIiwgWyAwLjg5NSwgMC4wMywgMC42ODUsIDAuMjIgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZU91dFF1YXJ0XCIsIFsgMC4xNjUsIDAuODQsIDAuNDQsIDEgXSBdLFxyXG4gICAgICAgICAgICBbIFwiZWFzZUluT3V0UXVhcnRcIiwgWyAwLjc3LCAwLCAwLjE3NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5RdWludFwiLCBbIDAuNzU1LCAwLjA1LCAwLjg1NSwgMC4wNiBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0UXVpbnRcIiwgWyAwLjIzLCAxLCAwLjMyLCAxIF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VJbk91dFF1aW50XCIsIFsgMC44NiwgMCwgMC4wNywgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5FeHBvXCIsIFsgMC45NSwgMC4wNSwgMC43OTUsIDAuMDM1IF0gXSxcclxuICAgICAgICAgICAgWyBcImVhc2VPdXRFeHBvXCIsIFsgMC4xOSwgMSwgMC4yMiwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRFeHBvXCIsIFsgMSwgMCwgMCwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5DaXJjXCIsIFsgMC42LCAwLjA0LCAwLjk4LCAwLjMzNSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlT3V0Q2lyY1wiLCBbIDAuMDc1LCAwLjgyLCAwLjE2NSwgMSBdIF0sXHJcbiAgICAgICAgICAgIFsgXCJlYXNlSW5PdXRDaXJjXCIsIFsgMC43ODUsIDAuMTM1LCAwLjE1LCAwLjg2IF0gXVxyXG4gICAgICAgIF0sIGZ1bmN0aW9uKGksIGVhc2luZ0FycmF5KSB7XHJcbiAgICAgICAgICAgIFZlbG9jaXR5LkVhc2luZ3NbZWFzaW5nQXJyYXlbMF1dID0gZ2VuZXJhdGVCZXppZXIuYXBwbHkobnVsbCwgZWFzaW5nQXJyYXlbMV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgZWFzaW5nIHR5cGUgZ2l2ZW4gYW4gZWFzaW5nIGlucHV0LiAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0RWFzaW5nKHZhbHVlLCBkdXJhdGlvbikge1xyXG4gICAgICAgIHZhciBlYXNpbmcgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgLyogVGhlIGVhc2luZyBvcHRpb24gY2FuIGVpdGhlciBiZSBhIHN0cmluZyB0aGF0IHJlZmVyZW5jZXMgYSBwcmUtcmVnaXN0ZXJlZCBlYXNpbmcsXHJcbiAgICAgICAgICAgb3IgaXQgY2FuIGJlIGEgdHdvLS9mb3VyLWl0ZW0gYXJyYXkgb2YgaW50ZWdlcnMgdG8gYmUgY29udmVydGVkIGludG8gYSBiZXppZXIvc3ByaW5nIGZ1bmN0aW9uLiAqL1xyXG4gICAgICAgIGlmIChUeXBlLmlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAvKiBFbnN1cmUgdGhhdCB0aGUgZWFzaW5nIGhhcyBiZWVuIGFzc2lnbmVkIHRvIGpRdWVyeSdzIFZlbG9jaXR5LkVhc2luZ3Mgb2JqZWN0LiAqL1xyXG4gICAgICAgICAgICBpZiAoIVZlbG9jaXR5LkVhc2luZ3NbdmFsdWVdKSB7XHJcbiAgICAgICAgICAgICAgICBlYXNpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgZWFzaW5nID0gZ2VuZXJhdGVTdGVwLmFwcGx5KG51bGwsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIC8qIHNwcmluZ1JLNCBtdXN0IGJlIHBhc3NlZCB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IElmIHRoZSBzcHJpbmdSSzQgYXJyYXkgY29udGFpbnMgbm9uLW51bWJlcnMsIGdlbmVyYXRlU3ByaW5nUks0KCkgcmV0dXJucyBhbiBlYXNpbmdcclxuICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVkIHdpdGggZGVmYXVsdCB0ZW5zaW9uIGFuZCBmcmljdGlvbiB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgIGVhc2luZyA9IGdlbmVyYXRlU3ByaW5nUks0LmFwcGx5KG51bGwsIHZhbHVlLmNvbmNhdChbIGR1cmF0aW9uIF0pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIC8qIE5vdGU6IElmIHRoZSBiZXppZXIgYXJyYXkgY29udGFpbnMgbm9uLW51bWJlcnMsIGdlbmVyYXRlQmV6aWVyKCkgcmV0dXJucyBmYWxzZS4gKi9cclxuICAgICAgICAgICAgZWFzaW5nID0gZ2VuZXJhdGVCZXppZXIuYXBwbHkobnVsbCwgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVhc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogUmV2ZXJ0IHRvIHRoZSBWZWxvY2l0eS13aWRlIGRlZmF1bHQgZWFzaW5nIHR5cGUsIG9yIGZhbGwgYmFjayB0byBcInN3aW5nXCIgKHdoaWNoIGlzIGFsc28galF1ZXJ5J3MgZGVmYXVsdClcclxuICAgICAgICAgICBpZiB0aGUgVmVsb2NpdHktd2lkZSBkZWZhdWx0IGhhcyBiZWVuIGluY29ycmVjdGx5IG1vZGlmaWVkLiAqL1xyXG4gICAgICAgIGlmIChlYXNpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5FYXNpbmdzW1ZlbG9jaXR5LmRlZmF1bHRzLmVhc2luZ10pIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IFZlbG9jaXR5LmRlZmF1bHRzLmVhc2luZztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVhc2luZyA9IEVBU0lOR19ERUZBVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWFzaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgIENTUyBTdGFja1xyXG4gICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogVGhlIENTUyBvYmplY3QgaXMgYSBoaWdobHkgY29uZGVuc2VkIGFuZCBwZXJmb3JtYW50IENTUyBzdGFjayB0aGF0IGZ1bGx5IHJlcGxhY2VzIGpRdWVyeSdzLlxyXG4gICAgICAgSXQgaGFuZGxlcyB0aGUgdmFsaWRhdGlvbiwgZ2V0dGluZywgYW5kIHNldHRpbmcgb2YgYm90aCBzdGFuZGFyZCBDU1MgcHJvcGVydGllcyBhbmQgQ1NTIHByb3BlcnR5IGhvb2tzLiAqL1xyXG4gICAgLyogTm90ZTogQSBcIkNTU1wiIHNob3J0aGFuZCBpcyBhbGlhc2VkIHNvIHRoYXQgb3VyIGNvZGUgaXMgZWFzaWVyIHRvIHJlYWQuICovXHJcbiAgICB2YXIgQ1NTID0gVmVsb2NpdHkuQ1NTID0ge1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICBSZWdFeFxyXG4gICAgICAgICoqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIFJlZ0V4OiB7XHJcbiAgICAgICAgICAgIGlzSGV4OiAvXiMoW0EtZlxcZF17M30pezEsMn0kL2ksXHJcbiAgICAgICAgICAgIC8qIFVud3JhcCBhIHByb3BlcnR5IHZhbHVlJ3Mgc3Vycm91bmRpbmcgdGV4dCwgZS5nLiBcInJnYmEoNCwgMywgMiwgMSlcIiA9PT4gXCI0LCAzLCAyLCAxXCIgYW5kIFwicmVjdCg0cHggM3B4IDJweCAxcHgpXCIgPT0+IFwiNHB4IDNweCAycHggMXB4XCIuICovXHJcbiAgICAgICAgICAgIHZhbHVlVW53cmFwOiAvXltBLXpdK1xcKCguKilcXCkkL2ksXHJcbiAgICAgICAgICAgIHdyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQ6IC9bMC05Ll0rIFswLTkuXSsgWzAtOS5dKyggWzAtOS5dKyk/LyxcclxuICAgICAgICAgICAgLyogU3BsaXQgYSBtdWx0aS12YWx1ZSBwcm9wZXJ0eSBpbnRvIGFuIGFycmF5IG9mIHN1YnZhbHVlcywgZS5nLiBcInJnYmEoNCwgMywgMiwgMSkgNHB4IDNweCAycHggMXB4XCIgPT0+IFsgXCJyZ2JhKDQsIDMsIDIsIDEpXCIsIFwiNHB4XCIsIFwiM3B4XCIsIFwiMnB4XCIsIFwiMXB4XCIgXS4gKi9cclxuICAgICAgICAgICAgdmFsdWVTcGxpdDogLyhbQS16XStcXCguK1xcKSl8KChbQS16MC05Iy0uXSs/KSg/PVxcc3wkKSkvaWdcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIExpc3RzXHJcbiAgICAgICAgKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICBMaXN0czoge1xyXG4gICAgICAgICAgICBjb2xvcnM6IFsgXCJmaWxsXCIsIFwic3Ryb2tlXCIsIFwic3RvcENvbG9yXCIsIFwiY29sb3JcIiwgXCJiYWNrZ3JvdW5kQ29sb3JcIiwgXCJib3JkZXJDb2xvclwiLCBcImJvcmRlclRvcENvbG9yXCIsIFwiYm9yZGVyUmlnaHRDb2xvclwiLCBcImJvcmRlckJvdHRvbUNvbG9yXCIsIFwiYm9yZGVyTGVmdENvbG9yXCIsIFwib3V0bGluZUNvbG9yXCIgXSxcclxuICAgICAgICAgICAgdHJhbnNmb3Jtc0Jhc2U6IFsgXCJ0cmFuc2xhdGVYXCIsIFwidHJhbnNsYXRlWVwiLCBcInNjYWxlXCIsIFwic2NhbGVYXCIsIFwic2NhbGVZXCIsIFwic2tld1hcIiwgXCJza2V3WVwiLCBcInJvdGF0ZVpcIiBdLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1zM0Q6IFsgXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiLCBcInRyYW5zbGF0ZVpcIiwgXCJzY2FsZVpcIiwgXCJyb3RhdGVYXCIsIFwicm90YXRlWVwiIF1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIEhvb2tzXHJcbiAgICAgICAgKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBIb29rcyBhbGxvdyBhIHN1YnByb3BlcnR5IChlLmcuIFwiYm94U2hhZG93Qmx1clwiKSBvZiBhIGNvbXBvdW5kLXZhbHVlIENTUyBwcm9wZXJ0eVxyXG4gICAgICAgICAgIChlLmcuIFwiYm94U2hhZG93OiBYIFkgQmx1ciBTcHJlYWQgQ29sb3JcIikgdG8gYmUgYW5pbWF0ZWQgYXMgaWYgaXQgd2VyZSBhIGRpc2NyZXRlIHByb3BlcnR5LiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IEJleW9uZCBlbmFibGluZyBmaW5lLWdyYWluZWQgcHJvcGVydHkgYW5pbWF0aW9uLCBob29raW5nIGlzIG5lY2Vzc2FyeSBzaW5jZSBWZWxvY2l0eSBvbmx5XHJcbiAgICAgICAgICAgdHdlZW5zIHByb3BlcnRpZXMgd2l0aCBzaW5nbGUgbnVtZXJpYyB2YWx1ZXM7IHVubGlrZSBDU1MgdHJhbnNpdGlvbnMsIFZlbG9jaXR5IGRvZXMgbm90IGludGVycG9sYXRlIGNvbXBvdW5kLXZhbHVlcy4gKi9cclxuICAgICAgICBIb29rczoge1xyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgIFJlZ2lzdHJhdGlvblxyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFRlbXBsYXRlcyBhcmUgYSBjb25jaXNlIHdheSBvZiBpbmRpY2F0aW5nIHdoaWNoIHN1YnByb3BlcnRpZXMgbXVzdCBiZSBpbmRpdmlkdWFsbHkgcmVnaXN0ZXJlZCBmb3IgZWFjaCBjb21wb3VuZC12YWx1ZSBDU1MgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIC8qIEVhY2ggdGVtcGxhdGUgY29uc2lzdHMgb2YgdGhlIGNvbXBvdW5kLXZhbHVlJ3MgYmFzZSBuYW1lLCBpdHMgY29uc3RpdHVlbnQgc3VicHJvcGVydHkgbmFtZXMsIGFuZCB0aG9zZSBzdWJwcm9wZXJ0aWVzJyBkZWZhdWx0IHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgdGVtcGxhdGVzOiB7XHJcbiAgICAgICAgICAgICAgICBcInRleHRTaGFkb3dcIjogWyBcIkNvbG9yIFggWSBCbHVyXCIsIFwiYmxhY2sgMHB4IDBweCAwcHhcIiBdLFxyXG4gICAgICAgICAgICAgICAgLyogVG9kbzogQWRkIHN1cHBvcnQgZm9yIGluc2V0IGJveFNoYWRvd3MuICh3ZWJraXQgcGxhY2VzIGl0IGxhc3Qgd2hlcmVhcyBJRSBwbGFjZXMgaXQgZmlyc3QuKSAqL1xyXG4gICAgICAgICAgICAgICAgXCJib3hTaGFkb3dcIjogWyBcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLCBcImJsYWNrIDBweCAwcHggMHB4IDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICBcImNsaXBcIjogWyBcIlRvcCBSaWdodCBCb3R0b20gTGVmdFwiLCBcIjBweCAwcHggMHB4IDBweFwiIF0sXHJcbiAgICAgICAgICAgICAgICBcImJhY2tncm91bmRQb3NpdGlvblwiOiBbIFwiWCBZXCIsIFwiMCUgMCVcIiBdLFxyXG4gICAgICAgICAgICAgICAgXCJ0cmFuc2Zvcm1PcmlnaW5cIjogWyBcIlggWSBaXCIsIFwiNTAlIDUwJSAwcHhcIiBdLFxyXG4gICAgICAgICAgICAgICAgXCJwZXJzcGVjdGl2ZU9yaWdpblwiOiBbIFwiWCBZXCIsIFwiNTAlIDUwJVwiIF1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIEEgXCJyZWdpc3RlcmVkXCIgaG9vayBpcyBvbmUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgZnJvbSBpdHMgdGVtcGxhdGUgZm9ybSBpbnRvIGEgbGl2ZSxcclxuICAgICAgICAgICAgICAgdHdlZW5hYmxlIHByb3BlcnR5LiBJdCBjb250YWlucyBkYXRhIHRvIGFzc29jaWF0ZSBpdCB3aXRoIGl0cyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcmVkOiB7XHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBBIHJlZ2lzdGVyZWQgaG9vayBsb29rcyBsaWtlIHRoaXMgPT0+IHRleHRTaGFkb3dCbHVyOiBbIFwidGV4dFNoYWRvd1wiLCAzIF0sXHJcbiAgICAgICAgICAgICAgICAgICB3aGljaCBjb25zaXN0cyBvZiB0aGUgc3VicHJvcGVydHkncyBuYW1lLCB0aGUgYXNzb2NpYXRlZCByb290IHByb3BlcnR5J3MgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgc3VicHJvcGVydHkncyBwb3NpdGlvbiBpbiB0aGUgcm9vdCdzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBDb252ZXJ0IHRoZSB0ZW1wbGF0ZXMgaW50byBpbmRpdmlkdWFsIGhvb2tzIHRoZW4gYXBwZW5kIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgb2JqZWN0IGFib3ZlLiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLyogQ29sb3IgaG9va3MgcmVnaXN0cmF0aW9uOiBDb2xvcnMgYXJlIGRlZmF1bHRlZCB0byB3aGl0ZSAtLSBhcyBvcHBvc2VkIHRvIGJsYWNrIC0tIHNpbmNlIGNvbG9ycyB0aGF0IGFyZVxyXG4gICAgICAgICAgICAgICAgICAgY3VycmVudGx5IHNldCB0byBcInRyYW5zcGFyZW50XCIgZGVmYXVsdCB0byB0aGVpciByZXNwZWN0aXZlIHRlbXBsYXRlIGJlbG93IHdoZW4gY29sb3ItYW5pbWF0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICBhbmQgd2hpdGUgaXMgdHlwaWNhbGx5IGEgY2xvc2VyIG1hdGNoIHRvIHRyYW5zcGFyZW50IHRoYW4gYmxhY2sgaXMuIEFuIGV4Y2VwdGlvbiBpcyBtYWRlIGZvciB0ZXh0IChcImNvbG9yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgd2hpY2ggaXMgYWxtb3N0IGFsd2F5cyBzZXQgY2xvc2VyIHRvIGJsYWNrIHRoYW4gd2hpdGUuICovXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENTUy5MaXN0cy5jb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmdiQ29tcG9uZW50cyA9IChDU1MuTGlzdHMuY29sb3JzW2ldID09PSBcImNvbG9yXCIpID8gXCIwIDAgMCAxXCIgOiBcIjI1NSAyNTUgMjU1IDFcIjtcclxuICAgICAgICAgICAgICAgICAgICBDU1MuSG9va3MudGVtcGxhdGVzW0NTUy5MaXN0cy5jb2xvcnNbaV1dID0gWyBcIlJlZCBHcmVlbiBCbHVlIEFscGhhXCIsIHJnYkNvbXBvbmVudHMgXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcm9vdFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tUZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBob29rTmFtZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSW4gSUUsIGNvbG9yIHZhbHVlcyBpbnNpZGUgY29tcG91bmQtdmFsdWUgcHJvcGVydGllcyBhcmUgcG9zaXRpb25lZCBhdCB0aGUgZW5kIHRoZSB2YWx1ZSBpbnN0ZWFkIG9mIGF0IHRoZSBiZWdpbm5pbmcuXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCB3ZSByZS1hcnJhbmdlIHRoZSB0ZW1wbGF0ZXMgYWNjb3JkaW5nbHkuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHJvb3RQcm9wZXJ0eSBpbiBDU1MuSG9va3MudGVtcGxhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tUZW1wbGF0ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9va05hbWVzID0gaG9va1RlbXBsYXRlWzBdLnNwbGl0KFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVzID0gaG9va1RlbXBsYXRlWzFdLm1hdGNoKENTUy5SZWdFeC52YWx1ZVNwbGl0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob29rTmFtZXNbMF0gPT09IFwiQ29sb3JcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVwb3NpdGlvbiBib3RoIHRoZSBob29rJ3MgbmFtZSBhbmQgaXRzIGRlZmF1bHQgdmFsdWUgdG8gdGhlIGVuZCBvZiB0aGVpciByZXNwZWN0aXZlIHN0cmluZ3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rTmFtZXMucHVzaChob29rTmFtZXMuc2hpZnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWVzLnB1c2goZGVmYXVsdFZhbHVlcy5zaGlmdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZXBsYWNlIHRoZSBleGlzdGluZyB0ZW1wbGF0ZSBmb3IgdGhlIGhvb2sncyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLkhvb2tzLnRlbXBsYXRlc1tyb290UHJvcGVydHldID0gWyBob29rTmFtZXMuam9pbihcIiBcIiksIGRlZmF1bHRWYWx1ZXMuam9pbihcIiBcIikgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBIb29rIHJlZ2lzdHJhdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgIGZvciAocm9vdFByb3BlcnR5IGluIENTUy5Ib29rcy50ZW1wbGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rVGVtcGxhdGUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Jvb3RQcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgaG9va05hbWVzID0gaG9va1RlbXBsYXRlWzBdLnNwbGl0KFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBob29rTmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bGxIb29rTmFtZSA9IHJvb3RQcm9wZXJ0eSArIGhvb2tOYW1lc1tpXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tQb3NpdGlvbiA9IGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3IgZWFjaCBob29rLCByZWdpc3RlciBpdHMgZnVsbCBuYW1lIChlLmcuIHRleHRTaGFkb3dCbHVyKSB3aXRoIGl0cyByb290IHByb3BlcnR5IChlLmcuIHRleHRTaGFkb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgaG9vaydzIHBvc2l0aW9uIGluIGl0cyB0ZW1wbGF0ZSdzIGRlZmF1bHQgdmFsdWUgc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuSG9va3MucmVnaXN0ZXJlZFtmdWxsSG9va05hbWVdID0gWyByb290UHJvcGVydHksIGhvb2tQb3NpdGlvbiBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBJbmplY3Rpb24gYW5kIEV4dHJhY3Rpb25cclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBMb29rIHVwIHRoZSByb290IHByb3BlcnR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgaG9vayAoZS5nLiByZXR1cm4gXCJ0ZXh0U2hhZG93XCIgZm9yIFwidGV4dFNoYWRvd0JsdXJcIikuICovXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIGEgaG9vayBjYW5ub3QgYmUgc2V0IGRpcmVjdGx5ICh0aGUgYnJvd3NlciB3b24ndCByZWNvZ25pemUgaXQpLCBzdHlsZSB1cGRhdGluZyBmb3IgaG9va3MgaXMgcm91dGVkIHRocm91Z2ggdGhlIGhvb2sncyByb290IHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICBnZXRSb290OiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRGF0YSA9IENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaG9va0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9va0RhdGFbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZXJlIHdhcyBubyBob29rIG1hdGNoLCByZXR1cm4gdGhlIHByb3BlcnR5IG5hbWUgdW50b3VjaGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyogQ29udmVydCBhbnkgcm9vdFByb3BlcnR5VmFsdWUsIG51bGwgb3Igb3RoZXJ3aXNlLCBpbnRvIGEgc3BhY2UtZGVsaW1pdGVkIGxpc3Qgb2YgaG9vayB2YWx1ZXMgc28gdGhhdFxyXG4gICAgICAgICAgICAgICB0aGUgdGFyZ2V0ZWQgaG9vayBjYW4gYmUgaW5qZWN0ZWQgb3IgZXh0cmFjdGVkIGF0IGl0cyBzdGFuZGFyZCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgY2xlYW5Sb290UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24ocm9vdFByb3BlcnR5LCByb290UHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHJvb3RQcm9wZXJ0eVZhbHVlIGlzIHdyYXBwZWQgd2l0aCBcInJnYigpXCIsIFwiY2xpcCgpXCIsIGV0Yy4sIHJlbW92ZSB0aGUgd3JhcHBpbmcgdG8gbm9ybWFsaXplIHRoZSB2YWx1ZSBiZWZvcmUgbWFuaXB1bGF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5SZWdFeC52YWx1ZVVud3JhcC50ZXN0KHJvb3RQcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gcm9vdFByb3BlcnR5VmFsdWUubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlVW53cmFwKVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiByb290UHJvcGVydHlWYWx1ZSBpcyBhIENTUyBudWxsLXZhbHVlIChmcm9tIHdoaWNoIHRoZXJlJ3MgaW5oZXJlbnRseSBubyBob29rIHZhbHVlIHRvIGV4dHJhY3QpLFxyXG4gICAgICAgICAgICAgICAgICAgZGVmYXVsdCB0byB0aGUgcm9vdCdzIGRlZmF1bHQgdmFsdWUgYXMgZGVmaW5lZCBpbiBDU1MuSG9va3MudGVtcGxhdGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogQ1NTIG51bGwtdmFsdWVzIGluY2x1ZGUgXCJub25lXCIsIFwiYXV0b1wiLCBhbmQgXCJ0cmFuc3BhcmVudFwiLiBUaGV5IG11c3QgYmUgY29udmVydGVkIGludG8gdGhlaXJcclxuICAgICAgICAgICAgICAgICAgIHplcm8tdmFsdWVzIChlLmcuIHRleHRTaGFkb3c6IFwibm9uZVwiID09PiB0ZXh0U2hhZG93OiBcIjBweCAwcHggMHB4IGJsYWNrXCIpIGZvciBob29rIG1hbmlwdWxhdGlvbiB0byBwcm9jZWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUocm9vdFByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Jvb3RQcm9wZXJ0eV1bMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKiBFeHRyYWN0ZWQgdGhlIGhvb2sncyB2YWx1ZSBmcm9tIGl0cyByb290IHByb3BlcnR5J3MgdmFsdWUuIFRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIHN0YXJ0aW5nIHZhbHVlIG9mIGFuIGFuaW1hdGluZyBob29rLiAqL1xyXG4gICAgICAgICAgICBleHRyYWN0VmFsdWU6IGZ1bmN0aW9uIChmdWxsSG9va05hbWUsIHJvb3RQcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9va0RhdGEgPSBDU1MuSG9va3MucmVnaXN0ZXJlZFtmdWxsSG9va05hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChob29rRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBob29rUm9vdCA9IGhvb2tEYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob29rUG9zaXRpb24gPSBob29rRGF0YVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShob29rUm9vdCwgcm9vdFByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTcGxpdCByb290UHJvcGVydHlWYWx1ZSBpbnRvIGl0cyBjb25zdGl0dWVudCBob29rIHZhbHVlcyB0aGVuIGdyYWIgdGhlIGRlc2lyZWQgaG9vayBhdCBpdHMgc3RhbmRhcmQgcG9zaXRpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlU3BsaXQpW2hvb2tQb3NpdGlvbl07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBwcm92aWRlZCBmdWxsSG9va05hbWUgaXNuJ3QgYSByZWdpc3RlcmVkIGhvb2ssIHJldHVybiB0aGUgcm9vdFByb3BlcnR5VmFsdWUgdGhhdCB3YXMgcGFzc2VkIGluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290UHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyogSW5qZWN0IHRoZSBob29rJ3MgdmFsdWUgaW50byBpdHMgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlLiBUaGlzIGlzIHVzZWQgdG8gcGllY2UgYmFjayB0b2dldGhlciB0aGUgcm9vdCBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICBvbmNlIFZlbG9jaXR5IGhhcyB1cGRhdGVkIG9uZSBvZiBpdHMgaW5kaXZpZHVhbGx5IGhvb2tlZCB2YWx1ZXMgdGhyb3VnaCB0d2VlbmluZy4gKi9cclxuICAgICAgICAgICAgaW5qZWN0VmFsdWU6IGZ1bmN0aW9uIChmdWxsSG9va05hbWUsIGhvb2tWYWx1ZSwgcm9vdFByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBob29rRGF0YSA9IENTUy5Ib29rcy5yZWdpc3RlcmVkW2Z1bGxIb29rTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2tEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tSb290ID0gaG9va0RhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tQb3NpdGlvbiA9IGhvb2tEYXRhWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVBhcnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVVwZGF0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUoaG9va1Jvb3QsIHJvb3RQcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogU3BsaXQgcm9vdFByb3BlcnR5VmFsdWUgaW50byBpdHMgaW5kaXZpZHVhbCBob29rIHZhbHVlcywgcmVwbGFjZSB0aGUgdGFyZ2V0ZWQgdmFsdWUgd2l0aCBob29rVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlbiByZWNvbnN0cnVjdCB0aGUgcm9vdFByb3BlcnR5VmFsdWUgc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlUGFydHMgPSByb290UHJvcGVydHlWYWx1ZS50b1N0cmluZygpLm1hdGNoKENTUy5SZWdFeC52YWx1ZVNwbGl0KTtcclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZVBhcnRzW2hvb2tQb3NpdGlvbl0gPSBob29rVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWVVcGRhdGVkID0gcm9vdFByb3BlcnR5VmFsdWVQYXJ0cy5qb2luKFwiIFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlVXBkYXRlZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHByb3ZpZGVkIGZ1bGxIb29rTmFtZSBpc24ndCBhIHJlZ2lzdGVyZWQgaG9vaywgcmV0dXJuIHRoZSByb290UHJvcGVydHlWYWx1ZSB0aGF0IHdhcyBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RQcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBOb3JtYWxpemF0aW9uc1xyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIE5vcm1hbGl6YXRpb25zIHN0YW5kYXJkaXplIENTUyBwcm9wZXJ0eSBtYW5pcHVsYXRpb24gYnkgcG9sbHlmaWxsaW5nIGJyb3dzZXItc3BlY2lmaWMgaW1wbGVtZW50YXRpb25zIChlLmcuIG9wYWNpdHkpXHJcbiAgICAgICAgICAgYW5kIHJlZm9ybWF0dGluZyBzcGVjaWFsIHByb3BlcnRpZXMgKGUuZy4gY2xpcCwgcmdiYSkgdG8gbG9vayBsaWtlIHN0YW5kYXJkIG9uZXMuICovXHJcbiAgICAgICAgTm9ybWFsaXphdGlvbnM6IHtcclxuICAgICAgICAgICAgLyogTm9ybWFsaXphdGlvbnMgYXJlIHBhc3NlZCBhIG5vcm1hbGl6YXRpb24gdGFyZ2V0IChlaXRoZXIgdGhlIHByb3BlcnR5J3MgbmFtZSwgaXRzIGV4dHJhY3RlZCB2YWx1ZSwgb3IgaXRzIGluamVjdGVkIHZhbHVlKSxcclxuICAgICAgICAgICAgICAgdGhlIHRhcmdldGVkIGVsZW1lbnQgKHdoaWNoIG1heSBuZWVkIHRvIGJlIHF1ZXJpZWQpLCBhbmQgdGhlIHRhcmdldGVkIHByb3BlcnR5IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcmVkOiB7XHJcbiAgICAgICAgICAgICAgICBjbGlwOiBmdW5jdGlvbiAodHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2xpcFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbGlwIG5lZWRzIHRvIGJlIHVud3JhcHBlZCBhbmQgc3RyaXBwZWQgb2YgaXRzIGNvbW1hcyBkdXJpbmcgZXh0cmFjdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV4dHJhY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgVmVsb2NpdHkgYWxzbyBleHRyYWN0ZWQgdGhpcyB2YWx1ZSwgc2tpcCBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgdGhlIFwicmVjdCgpXCIgd3JhcHBlci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goQ1NTLlJlZ0V4LnZhbHVlVW53cmFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogU3RyaXAgb2ZmIGNvbW1hcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBleHRyYWN0ZWQgPyBleHRyYWN0ZWRbMV0ucmVwbGFjZSgvLChcXHMrKT8vZywgXCIgXCIpIDogcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDbGlwIG5lZWRzIHRvIGJlIHJlLXdyYXBwZWQgZHVyaW5nIGluamVjdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVjdChcIiArIHByb3BlcnR5VmFsdWUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uKHR5cGUsIGVsZW1lbnQsIHByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIi13ZWJraXQtZmlsdGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdGVkID0gcGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBleHRyYWN0ZWQgaXMgTmFOLCBtZWFuaW5nIHRoZSB2YWx1ZSBpc24ndCBhbHJlYWR5IGV4dHJhY3RlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGV4dHJhY3RlZCB8fCBleHRyYWN0ZWQgPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsdXJDb21wb25lbnQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGZpbHRlciBzdHJpbmcgaGFkIGEgYmx1ciBjb21wb25lbnQsIHJldHVybiBqdXN0IHRoZSBibHVyIHZhbHVlIGFuZCB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsdXJDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gYmx1ckNvbXBvbmVudFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgZXhpc3QsIGRlZmF1bHQgYmx1ciB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJsdXIgbmVlZHMgdG8gYmUgcmUtd3JhcHBlZCBkdXJpbmcgaW5qZWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5qZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3IgdGhlIGJsdXIgZWZmZWN0IHRvIGJlIGZ1bGx5IGRlLWFwcGxpZWQsIGl0IG5lZWRzIHRvIGJlIHNldCB0byBcIm5vbmVcIiBpbnN0ZWFkIG9mIDAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlRmxvYXQocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImJsdXIoXCIgKyBwcm9wZXJ0eVZhbHVlICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvKiA8PUlFOCBkbyBub3Qgc3VwcG9ydCB0aGUgc3RhbmRhcmQgb3BhY2l0eSBwcm9wZXJ0eS4gVGhleSB1c2UgZmlsdGVyOmFscGhhKG9wYWNpdHk9SU5UKSBpbnN0ZWFkLiAqL1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIHByb3BlcnR5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsdGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIDw9SUU4IHJldHVybiBhIFwiZmlsdGVyXCIgdmFsdWUgb2YgXCJhbHBoYShvcGFjaXR5PVxcZHsxLDN9KVwiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4dHJhY3QgdGhlIHZhbHVlIGFuZCBjb252ZXJ0IGl0IHRvIGEgZGVjaW1hbCB2YWx1ZSB0byBtYXRjaCB0aGUgc3RhbmRhcmQgQ1NTIG9wYWNpdHkgcHJvcGVydHkncyBmb3JtYXR0aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL2FscGhhXFwob3BhY2l0eT0oLiopXFwpL2kpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0cmFjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgdG8gZGVjaW1hbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IGV4dHJhY3RlZFsxXSAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVuIGV4dHJhY3Rpbmcgb3BhY2l0eSwgZGVmYXVsdCB0byAxIHNpbmNlIGEgbnVsbCB2YWx1ZSBtZWFucyBvcGFjaXR5IGhhc24ndCBiZWVuIHNldC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBPcGFjaWZpZWQgZWxlbWVudHMgYXJlIHJlcXVpcmVkIHRvIGhhdmUgdGhlaXIgem9vbSBwcm9wZXJ0eSBzZXQgdG8gYSBub24temVybyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXR0aW5nIHRoZSBmaWx0ZXIgcHJvcGVydHkgb24gZWxlbWVudHMgd2l0aCBjZXJ0YWluIGZvbnQgcHJvcGVydHkgY29tYmluYXRpb25zIGNhbiByZXN1bHQgaW4gYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hseSB1bmFwcGVhbGluZyB1bHRyYS1ib2xkaW5nIGVmZmVjdC4gVGhlcmUncyBubyB3YXkgdG8gcmVtZWR5IHRoaXMgdGhyb3VnaG91dCBhIHR3ZWVuLCBidXQgZHJvcHBpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgYWx0b2dldGhlciAod2hlbiBvcGFjaXR5IGhpdHMgMSkgYXQgbGVhc3RzIGVuc3VyZXMgdGhhdCB0aGUgZ2xpdGNoIGlzIGdvbmUgcG9zdC10d2VlbmluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChwcm9wZXJ0eVZhbHVlKSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBcyBwZXIgdGhlIGZpbHRlciBwcm9wZXJ0eSdzIHNwZWMsIGNvbnZlcnQgdGhlIGRlY2ltYWwgdmFsdWUgdG8gYSB3aG9sZSBudW1iZXIgYW5kIHdyYXAgdGhlIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYWxwaGEob3BhY2l0eT1cIiArIHBhcnNlSW50KHBhcnNlRmxvYXQocHJvcGVydHlWYWx1ZSkgKiAxMDAsIDEwKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdpdGggYWxsIG90aGVyIGJyb3dzZXJzLCBub3JtYWxpemF0aW9uIGlzIG5vdCByZXF1aXJlZDsgcmV0dXJuIHRoZSBzYW1lIHZhbHVlcyB0aGF0IHdlcmUgcGFzc2VkIGluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvcGFjaXR5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluamVjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICBCYXRjaGVkIFJlZ2lzdHJhdGlvbnNcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBOb3RlOiBCYXRjaGVkIG5vcm1hbGl6YXRpb25zIGV4dGVuZCB0aGUgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWQgb2JqZWN0LiAqL1xyXG4gICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybXMgYXJlIHRoZSBzdWJwcm9wZXJ0aWVzIGNvbnRhaW5lZCBieSB0aGUgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuIFRyYW5zZm9ybXMgbXVzdCB1bmRlcmdvIG5vcm1hbGl6YXRpb25cclxuICAgICAgICAgICAgICAgICAgIHNvIHRoYXQgdGhleSBjYW4gYmUgcmVmZXJlbmNlZCBpbiBhIHByb3BlcnRpZXMgbWFwIGJ5IHRoZWlyIGluZGl2aWR1YWwgbmFtZXMuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBXaGVuIHRyYW5zZm9ybXMgYXJlIFwic2V0XCIsIHRoZXkgYXJlIGFjdHVhbGx5IGFzc2lnbmVkIHRvIGEgcGVyLWVsZW1lbnQgdHJhbnNmb3JtQ2FjaGUuIFdoZW4gYWxsIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgc2V0dGluZyBpcyBjb21wbGV0ZSBjb21wbGV0ZSwgQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUoKSBtdXN0IGJlIG1hbnVhbGx5IGNhbGxlZCB0byBmbHVzaCB0aGUgdmFsdWVzIHRvIHRoZSBET00uXHJcbiAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm0gc2V0dGluZyBpcyBiYXRjaGVkIGluIHRoaXMgd2F5IHRvIGltcHJvdmUgcGVyZm9ybWFuY2U6IHRoZSB0cmFuc2Zvcm0gc3R5bGUgb25seSBuZWVkcyB0byBiZSB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAgICBvbmNlIHdoZW4gbXVsdGlwbGUgdHJhbnNmb3JtIHN1YnByb3BlcnRpZXMgYXJlIGJlaW5nIGFuaW1hdGVkIHNpbXVsdGFuZW91c2x5LiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogSUU5IGFuZCBBbmRyb2lkIEdpbmdlcmJyZWFkIGhhdmUgc3VwcG9ydCBmb3IgMkQgLS0gYnV0IG5vdCAzRCAtLSB0cmFuc2Zvcm1zLiBTaW5jZSBhbmltYXRpbmcgdW5zdXBwb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIHJlc3VsdHMgaW4gdGhlIGJyb3dzZXIgaWdub3JpbmcgdGhlICplbnRpcmUqIHRyYW5zZm9ybSBzdHJpbmcsIHdlIHByZXZlbnQgdGhlc2UgM0QgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICBmcm9tIGJlaW5nIG5vcm1hbGl6ZWQgZm9yIHRoZXNlIGJyb3dzZXJzIHNvIHRoYXQgdHdlZW5pbmcgc2tpcHMgdGhlc2UgcHJvcGVydGllcyBhbHRvZ2V0aGVyXHJcbiAgICAgICAgICAgICAgICAgICAoc2luY2UgaXQgd2lsbCBpZ25vcmUgdGhlbSBhcyBiZWluZyB1bnN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4pICovXHJcbiAgICAgICAgICAgICAgICBpZiAoIShJRSA8PSA5KSAmJiAhVmVsb2NpdHkuU3RhdGUuaXNHaW5nZXJicmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNpbmNlIHRoZSBzdGFuZGFsb25lIENTUyBcInBlcnNwZWN0aXZlXCIgcHJvcGVydHkgYW5kIHRoZSBDU1MgdHJhbnNmb3JtIFwicGVyc3BlY3RpdmVcIiBzdWJwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlIHRoZSBzYW1lIG5hbWUsIHRoZSBsYXR0ZXIgaXMgZ2l2ZW4gYSB1bmlxdWUgdG9rZW4gd2l0aGluIFZlbG9jaXR5OiBcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlID0gQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdChDU1MuTGlzdHMudHJhbnNmb3JtczNEKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENTUy5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdyYXAgdGhlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBub3JtYWxpemF0aW9uIGZ1bmN0aW9uIGluIGEgbmV3IHNjb3BlIHNvIHRoYXQgdHJhbnNmb3JtTmFtZSdzIHZhbHVlIGlzXHJcbiAgICAgICAgICAgICAgICAgICAgcGFpcmVkIHdpdGggaXRzIHJlc3BlY3RpdmUgZnVuY3Rpb24uIChPdGhlcndpc2UsIGFsbCBmdW5jdGlvbnMgd291bGQgdGFrZSB0aGUgZmluYWwgZm9yIGxvb3AncyB0cmFuc2Zvcm1OYW1lLikgKi9cclxuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1OYW1lID0gQ1NTLkxpc3RzLnRyYW5zZm9ybXNCYXNlW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbdHJhbnNmb3JtTmFtZV0gPSBmdW5jdGlvbiAodHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIG5vcm1hbGl6ZWQgcHJvcGVydHkgbmFtZSBpcyB0aGUgcGFyZW50IFwidHJhbnNmb3JtXCIgcHJvcGVydHkgLS0gdGhlIHByb3BlcnR5IHRoYXQgaXMgYWN0dWFsbHkgc2V0IGluIENTUy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gdmFsdWVzIGFyZSBjYWNoZWQgb250byBhIHBlci1lbGVtZW50IHRyYW5zZm9ybUNhY2hlIG9iamVjdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXh0cmFjdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHRyYW5zZm9ybSBoYXMgeWV0IHRvIGJlIGFzc2lnbmVkIGEgdmFsdWUsIHJldHVybiBpdHMgbnVsbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCB8fCBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNjYWxlIENTUy5MaXN0cy50cmFuc2Zvcm1zQmFzZSBkZWZhdWx0IHRvIDEgd2hlcmVhcyBhbGwgb3RoZXIgdHJhbnNmb3JtIHByb3BlcnRpZXMgZGVmYXVsdCB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC9ec2NhbGUvaS50ZXN0KHRyYW5zZm9ybU5hbWUpID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gdHJhbnNmb3JtIHZhbHVlcyBhcmUgc2V0LCB0aGV5IGFyZSB3cmFwcGVkIGluIHBhcmVudGhlc2VzIGFzIHBlciB0aGUgQ1NTIHNwZWMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRodXMsIHdoZW4gZXh0cmFjdGluZyB0aGVpciB2YWx1ZXMgKGZvciB0d2VlbiBjYWxjdWxhdGlvbnMpLCB3ZSBzdHJpcCBvZmYgdGhlIHBhcmVudGhlc2VzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0ucmVwbGFjZSgvWygpXS9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIGFuIGluZGl2aWR1YWwgdHJhbnNmb3JtIHByb3BlcnR5IGNvbnRhaW5zIGFuIHVuc3VwcG9ydGVkIHVuaXQgdHlwZSwgdGhlIGJyb3dzZXIgaWdub3JlcyB0aGUgKmVudGlyZSogdHJhbnNmb3JtIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHVzLCBwcm90ZWN0IHVzZXJzIGZyb20gdGhlbXNlbHZlcyBieSBza2lwcGluZyBzZXR0aW5nIGZvciB0cmFuc2Zvcm0gdmFsdWVzIHN1cHBsaWVkIHdpdGggaW52YWxpZCB1bml0IHR5cGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTd2l0Y2ggb24gdGhlIGJhc2UgdHJhbnNmb3JtIHR5cGU7IGlnbm9yZSB0aGUgYXhpcyBieSByZW1vdmluZyB0aGUgbGFzdCBsZXR0ZXIgZnJvbSB0aGUgdHJhbnNmb3JtJ3MgbmFtZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0cmFuc2Zvcm1OYW1lLnN1YnN0cigwLCB0cmFuc2Zvcm1OYW1lLmxlbmd0aCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGl0ZWxpc3QgdW5pdCB0eXBlcyBmb3IgZWFjaCB0cmFuc2Zvcm0uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZCA9ICEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIGFuIGF4aXMtZnJlZSBcInNjYWxlXCIgcHJvcGVydHkgaXMgc3VwcG9ydGVkIGFzIHdlbGwsIGEgbGl0dGxlIGhhY2sgaXMgdXNlZCBoZXJlIHRvIGRldGVjdCBpdCBieSBjaG9wcGluZyBvZmYgaXRzIGxhc3QgbGV0dGVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNjYWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENocm9tZSBvbiBBbmRyb2lkIGhhcyBhIGJ1ZyBpbiB3aGljaCBzY2FsZWQgZWxlbWVudHMgYmx1ciBpZiB0aGVpciBpbml0aWFsIHNjYWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaXMgYmVsb3cgMSAod2hpY2ggY2FuIGhhcHBlbiB3aXRoIGZvcmNlZmVlZGluZykuIFRodXMsIHdlIGRldGVjdCBhIHlldC11bnNldCBzY2FsZSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBlbnN1cmUgdGhhdCBpdHMgZmlyc3QgdmFsdWUgaXMgYWx3YXlzIDEuIE1vcmUgaW5mbzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDQxNzg5MC9jc3MzLWFuaW1hdGlvbnMtd2l0aC10cmFuc2Zvcm0tY2F1c2VzLWJsdXJyZWQtZWxlbWVudHMtb24td2Via2l0LzEwNDE3OTYyIzEwNDE3OTYyICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdID09PSB1bmRlZmluZWQgJiYgcHJvcGVydHlWYWx1ZSA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oXFxkKSQvaS50ZXN0KHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNrZXdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oZGVnfFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyb3RhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkID0gIS8oZGVnfFxcZCkkL2kudGVzdChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBcyBwZXIgdGhlIENTUyBzcGVjLCB3cmFwIHRoZSB2YWx1ZSBpbiBwYXJlbnRoZXNlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV0gPSBcIihcIiArIHByb3BlcnR5VmFsdWUgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQWx0aG91Z2ggdGhlIHZhbHVlIGlzIHNldCBvbiB0aGUgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0LCByZXR1cm4gdGhlIG5ld2x5LXVwZGF0ZWQgdmFsdWUgZm9yIHRoZSBjYWxsaW5nIGNvZGUgdG8gcHJvY2VzcyBhcyBub3JtYWwuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICBDb2xvcnNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogU2luY2UgVmVsb2NpdHkgb25seSBhbmltYXRlcyBhIHNpbmdsZSBudW1lcmljIHZhbHVlIHBlciBwcm9wZXJ0eSwgY29sb3IgYW5pbWF0aW9uIGlzIGFjaGlldmVkIGJ5IGhvb2tpbmcgdGhlIGluZGl2aWR1YWwgUkdCQSBjb21wb25lbnRzIG9mIENTUyBjb2xvciBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICAgICAgICAgQWNjb3JkaW5nbHksIGNvbG9yIHZhbHVlcyBtdXN0IGJlIG5vcm1hbGl6ZWQgKGUuZy4gXCIjZmYwMDAwXCIsIFwicmVkXCIsIGFuZCBcInJnYigyNTUsIDAsIDApXCIgPT0+IFwiMjU1IDAgMCAxXCIpIHNvIHRoYXQgdGhlaXIgY29tcG9uZW50cyBjYW4gYmUgaW5qZWN0ZWQvZXh0cmFjdGVkIGJ5IENTUy5Ib29rcyBsb2dpYy4gKi9cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ1NTLkxpc3RzLmNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFdyYXAgdGhlIGR5bmFtaWNhbGx5IGdlbmVyYXRlZCBub3JtYWxpemF0aW9uIGZ1bmN0aW9uIGluIGEgbmV3IHNjb3BlIHNvIHRoYXQgY29sb3JOYW1lJ3MgdmFsdWUgaXMgcGFpcmVkIHdpdGggaXRzIHJlc3BlY3RpdmUgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgKE90aGVyd2lzZSwgYWxsIGZ1bmN0aW9ucyB3b3VsZCB0YWtlIHRoZSBmaW5hbCBmb3IgbG9vcCdzIGNvbG9yTmFtZS4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yTmFtZSA9IENTUy5MaXN0cy5jb2xvcnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBJbiBJRTw9OCwgd2hpY2ggc3VwcG9ydCByZ2IgYnV0IG5vdCByZ2JhLCBjb2xvciBwcm9wZXJ0aWVzIGFyZSByZXZlcnRlZCB0byByZ2IgYnkgc3RyaXBwaW5nIG9mZiB0aGUgYWxwaGEgY29tcG9uZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjb2xvck5hbWVdID0gZnVuY3Rpb24odHlwZSwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGFsbCBjb2xvciB2YWx1ZXMgaW50byB0aGUgcmdiIGZvcm1hdC4gKE9sZCBJRSBjYW4gcmV0dXJuIGhleCB2YWx1ZXMgYW5kIGNvbG9yIG5hbWVzIGluc3RlYWQgb2YgcmdiL3JnYmEuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgY29sb3IgaXMgYWxyZWFkeSBpbiBpdHMgaG9va2FibGUgZm9ybSAoZS5nLiBcIjI1NSAyNTUgMjU1IDFcIikgZHVlIHRvIGhhdmluZyBiZWVuIHByZXZpb3VzbHkgZXh0cmFjdGVkLCBza2lwIGV4dHJhY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDU1MuUmVnRXgud3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZC50ZXN0KHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnZlcnRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvck5hbWVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFjazogXCJyZ2IoMCwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmx1ZTogXCJyZ2IoMCwgMCwgMjU1KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmF5OiBcInJnYigxMjgsIDEyOCwgMTI4KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmVlbjogXCJyZ2IoMCwgMTI4LCAwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWQ6IFwicmdiKDI1NSwgMCwgMClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGU6IFwicmdiKDI1NSwgMjU1LCAyNTUpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnQgY29sb3IgbmFtZXMgdG8gcmdiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eW0Etel0rJC9pLnRlc3QocHJvcGVydHlWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3JOYW1lc1twcm9wZXJ0eVZhbHVlXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGNvbG9yTmFtZXNbcHJvcGVydHlWYWx1ZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBhbiB1bm1hdGNoZWQgY29sb3IgbmFtZSBpcyBwcm92aWRlZCwgZGVmYXVsdCB0byBibGFjay4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVydGVkID0gY29sb3JOYW1lcy5ibGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDb252ZXJ0IGhleCB2YWx1ZXMgdG8gcmdiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChDU1MuUmVnRXguaXNIZXgudGVzdChwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IFwicmdiKFwiICsgQ1NTLlZhbHVlcy5oZXhUb1JnYihwcm9wZXJ0eVZhbHVlKS5qb2luKFwiIFwiKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHByb3ZpZGVkIGNvbG9yIGRvZXNuJ3QgbWF0Y2ggYW55IG9mIHRoZSBhY2NlcHRlZCBjb2xvciBmb3JtYXRzLCBkZWZhdWx0IHRvIGJsYWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghKC9ecmdiYT9cXCgvaS50ZXN0KHByb3BlcnR5VmFsdWUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGNvbG9yTmFtZXMuYmxhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSBzdXJyb3VuZGluZyBcInJnYi9yZ2JhKClcIiBzdHJpbmcgdGhlbiByZXBsYWNlIGNvbW1hcyB3aXRoIHNwYWNlcyBhbmQgc3RyaXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdGVkIHNwYWNlcyAoaW4gY2FzZSB0aGUgdmFsdWUgaW5jbHVkZWQgc3BhY2VzIHRvIGJlZ2luIHdpdGgpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gKGNvbnZlcnRlZCB8fCBwcm9wZXJ0eVZhbHVlKS50b1N0cmluZygpLm1hdGNoKENTUy5SZWdFeC52YWx1ZVVud3JhcClbMV0ucmVwbGFjZSgvLChcXHMrKT8vZywgXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTbyBsb25nIGFzIHRoaXMgaXNuJ3QgPD1JRTgsIGFkZCBhIGZvdXJ0aCAoYWxwaGEpIGNvbXBvbmVudCBpZiBpdCdzIG1pc3NpbmcgYW5kIGRlZmF1bHQgaXQgdG8gMSAodmlzaWJsZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKElFIDw9IDgpICYmIGV4dHJhY3RlZC5zcGxpdChcIiBcIikubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWQgKz0gXCIgMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbmplY3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhpcyBpcyBJRTw9OCBhbmQgYW4gYWxwaGEgY29tcG9uZW50IGV4aXN0cywgc3RyaXAgaXQgb2ZmLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUuc3BsaXQoXCIgXCIpLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBwcm9wZXJ0eVZhbHVlLnNwbGl0KC9cXHMrLykuc2xpY2UoMCwgMykuam9pbihcIiBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE90aGVyd2lzZSwgYWRkIGEgZm91cnRoIChhbHBoYSkgY29tcG9uZW50IGlmIGl0J3MgbWlzc2luZyBhbmQgZGVmYXVsdCBpdCB0byAxICh2aXNpYmxlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eVZhbHVlLnNwbGl0KFwiIFwiKS5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgKz0gXCIgMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZS1pbnNlcnQgdGhlIGJyb3dzZXItYXBwcm9wcmlhdGUgd3JhcHBlcihcInJnYi9yZ2JhKClcIiksIGluc2VydCBjb21tYXMsIGFuZCBzdHJpcCBvZmYgZGVjaW1hbCB1bml0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiBhbGwgdmFsdWVzIGJ1dCB0aGUgZm91cnRoIChSLCBHLCBhbmQgQiBvbmx5IGFjY2VwdCB3aG9sZSBudW1iZXJzKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChJRSA8PSA4ID8gXCJyZ2JcIiA6IFwicmdiYVwiKSArIFwiKFwiICsgcHJvcGVydHlWYWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiLFwiKS5yZXBsYWNlKC9cXC4oXFxkKSsoPz0sKS9nLCBcIlwiKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQ1NTIFByb3BlcnR5IE5hbWVzXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICBOYW1lczoge1xyXG4gICAgICAgICAgICAvKiBDYW1lbGNhc2UgYSBwcm9wZXJ0eSBuYW1lIGludG8gaXRzIEphdmFTY3JpcHQgbm90YXRpb24gKGUuZy4gXCJiYWNrZ3JvdW5kLWNvbG9yXCIgPT0+IFwiYmFja2dyb3VuZENvbG9yXCIpLlxyXG4gICAgICAgICAgICAgICBDYW1lbGNhc2luZyBpcyB1c2VkIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0eSBuYW1lcyBiZXR3ZWVuIGFuZCBhY3Jvc3MgY2FsbHMuICovXHJcbiAgICAgICAgICAgIGNhbWVsQ2FzZTogZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHkucmVwbGFjZSgvLShcXHcpL2csIGZ1bmN0aW9uIChtYXRjaCwgc3ViTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ViTWF0Y2gudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyogRm9yIFNWRyBlbGVtZW50cywgc29tZSBwcm9wZXJ0aWVzIChuYW1lbHksIGRpbWVuc2lvbmFsIG9uZXMpIGFyZSBHRVQvU0VUIHZpYSB0aGUgZWxlbWVudCdzIEhUTUwgYXR0cmlidXRlcyAoaW5zdGVhZCBvZiB2aWEgQ1NTIHN0eWxlcykuICovXHJcbiAgICAgICAgICAgIFNWR0F0dHJpYnV0ZTogZnVuY3Rpb24gKHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgU1ZHQXR0cmlidXRlcyA9IFwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ2VydGFpbiBicm93c2VycyByZXF1aXJlIGFuIFNWRyB0cmFuc2Zvcm0gdG8gYmUgYXBwbGllZCBhcyBhbiBhdHRyaWJ1dGUuIChPdGhlcndpc2UsIGFwcGxpY2F0aW9uIHZpYSBDU1MgaXMgcHJlZmVyYWJsZSBkdWUgdG8gM0Qgc3VwcG9ydC4pICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUgfHwgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiAhVmVsb2NpdHkuU3RhdGUuaXNDaHJvbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU1ZHQXR0cmlidXRlcyArPSBcInx0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIl4oXCIgKyBTVkdBdHRyaWJ1dGVzICsgXCIpJFwiLCBcImlcIikudGVzdChwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKiBEZXRlcm1pbmUgd2hldGhlciBhIHByb3BlcnR5IHNob3VsZCBiZSBzZXQgd2l0aCBhIHZlbmRvciBwcmVmaXguICovXHJcbiAgICAgICAgICAgIC8qIElmIGEgcHJlZml4ZWQgdmVyc2lvbiBvZiB0aGUgcHJvcGVydHkgZXhpc3RzLCByZXR1cm4gaXQuIE90aGVyd2lzZSwgcmV0dXJuIHRoZSBvcmlnaW5hbCBwcm9wZXJ0eSBuYW1lLlxyXG4gICAgICAgICAgICAgICBJZiB0aGUgcHJvcGVydHkgaXMgbm90IGF0IGFsbCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIsIHJldHVybiBhIGZhbHNlIGZsYWcuICovXHJcbiAgICAgICAgICAgIHByZWZpeENoZWNrOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgcHJvcGVydHkgaGFzIGFscmVhZHkgYmVlbiBjaGVja2VkLCByZXR1cm4gdGhlIGNhY2hlZCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5wcmVmaXhNYXRjaGVzW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFZlbG9jaXR5LlN0YXRlLnByZWZpeE1hdGNoZXNbcHJvcGVydHldLCB0cnVlIF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ZW5kb3JzID0gWyBcIlwiLCBcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCIsIFwiT1wiIF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCB2ZW5kb3JzTGVuZ3RoID0gdmVuZG9ycy5sZW5ndGg7IGkgPCB2ZW5kb3JzTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5UHJlZml4ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlQcmVmaXhlZCA9IHByb3BlcnR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSBwcm9wZXJ0eSB0byBjb25mb3JtIHRvIEphdmFTY3JpcHQgdmVuZG9yIHByZWZpeCBub3RhdGlvbiAoZS5nLiB3ZWJraXRGaWx0ZXIpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlQcmVmaXhlZCA9IHZlbmRvcnNbaV0gKyBwcm9wZXJ0eS5yZXBsYWNlKC9eXFx3LywgZnVuY3Rpb24obWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGlzIHByb3BlcnR5IGFzIHByZWZpeGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc1N0cmluZyhWZWxvY2l0eS5TdGF0ZS5wcmVmaXhFbGVtZW50LnN0eWxlW3Byb3BlcnR5UHJlZml4ZWRdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ2FjaGUgdGhlIG1hdGNoLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUucHJlZml4TWF0Y2hlc1twcm9wZXJ0eV0gPSBwcm9wZXJ0eVByZWZpeGVkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIHByb3BlcnR5UHJlZml4ZWQsIHRydWUgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgcHJvcGVydHkgaW4gYW55IGZvcm0sIGluY2x1ZGUgYSBmYWxzZSBmbGFnIHNvIHRoYXQgdGhlIGNhbGxlciBjYW4gZGVjaWRlIGhvdyB0byBwcm9jZWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIHByb3BlcnR5LCBmYWxzZSBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIENTUyBQcm9wZXJ0eSBWYWx1ZXNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIFZhbHVlczoge1xyXG4gICAgICAgICAgICAvKiBIZXggdG8gUkdCIGNvbnZlcnNpb24uIENvcHlyaWdodCBUaW0gRG93bjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjIzODM4L3JnYi10by1oZXgtYW5kLWhleC10by1yZ2IgKi9cclxuICAgICAgICAgICAgaGV4VG9SZ2I6IGZ1bmN0aW9uIChoZXgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaG9ydGZvcm1SZWdleCA9IC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2Zvcm1SZWdleCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2ksXHJcbiAgICAgICAgICAgICAgICAgICAgcmdiUGFydHM7XHJcblxyXG4gICAgICAgICAgICAgICAgaGV4ID0gaGV4LnJlcGxhY2Uoc2hvcnRmb3JtUmVnZXgsIGZ1bmN0aW9uIChtLCByLCBnLCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKyByICsgZyArIGcgKyBiICsgYjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJnYlBhcnRzID0gbG9uZ2Zvcm1SZWdleC5leGVjKGhleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYlBhcnRzID8gWyBwYXJzZUludChyZ2JQYXJ0c1sxXSwgMTYpLCBwYXJzZUludChyZ2JQYXJ0c1syXSwgMTYpLCBwYXJzZUludChyZ2JQYXJ0c1szXSwgMTYpIF0gOiBbIDAsIDAsIDAgXTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGlzQ1NTTnVsbFZhbHVlOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8qIFRoZSBicm93c2VyIGRlZmF1bHRzIENTUyB2YWx1ZXMgdGhhdCBoYXZlIG5vdCBiZWVuIHNldCB0byBlaXRoZXIgMCBvciBvbmUgb2Ygc2V2ZXJhbCBwb3NzaWJsZSBudWxsLXZhbHVlIHN0cmluZ3MuXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCB3ZSBjaGVjayBmb3IgYm90aCBmYWxzaW5lc3MgYW5kIHRoZXNlIHNwZWNpYWwgc3RyaW5ncy4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE51bGwtdmFsdWUgY2hlY2tpbmcgaXMgcGVyZm9ybWVkIHRvIGRlZmF1bHQgdGhlIHNwZWNpYWwgc3RyaW5ncyB0byAwIChmb3IgdGhlIHNha2Ugb2YgdHdlZW5pbmcpIG9yIHRoZWlyIGhvb2tcclxuICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcyBhcyBkZWZpbmVkIGFzIENTUy5Ib29rcyAoZm9yIHRoZSBzYWtlIG9mIGhvb2sgaW5qZWN0aW9uL2V4dHJhY3Rpb24pLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogQ2hyb21lIHJldHVybnMgXCJyZ2JhKDAsIDAsIDAsIDApXCIgZm9yIGFuIHVuZGVmaW5lZCBjb2xvciB3aGVyZWFzIElFIHJldHVybnMgXCJ0cmFuc3BhcmVudFwiLiAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSA9PSAwIHx8IC9eKG5vbmV8YXV0b3x0cmFuc3BhcmVudHwocmdiYVxcKDAsID8wLCA/MCwgPzBcXCkpKSQvaS50ZXN0KHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKiBSZXRyaWV2ZSBhIHByb3BlcnR5J3MgZGVmYXVsdCB1bml0IHR5cGUuIFVzZWQgZm9yIGFzc2lnbmluZyBhIHVuaXQgdHlwZSB3aGVuIG9uZSBpcyBub3Qgc3VwcGxpZWQgYnkgdGhlIHVzZXIuICovXHJcbiAgICAgICAgICAgIGdldFVuaXRUeXBlOiBmdW5jdGlvbiAocHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgvXihyb3RhdGV8c2tldykvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlZ1wiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBhYm92ZSBwcm9wZXJ0aWVzIGFyZSB1bml0bGVzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byBweCBmb3IgYWxsIG90aGVyIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIEhUTUwgZWxlbWVudHMgZGVmYXVsdCB0byBhbiBhc3NvY2lhdGVkIGRpc3BsYXkgdHlwZSB3aGVuIHRoZXkncmUgbm90IHNldCB0byBkaXNwbGF5Om5vbmUuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3IgY29ycmVjdGx5IHNldHRpbmcgdGhlIG5vbi1cIm5vbmVcIiBkaXNwbGF5IHZhbHVlIGluIGNlcnRhaW4gVmVsb2NpdHkgcmVkaXJlY3RzLCBzdWNoIGFzIGZhZGVJbi9PdXQuICovXHJcbiAgICAgICAgICAgIGdldERpc3BsYXlUeXBlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZ05hbWUgPSBlbGVtZW50ICYmIGVsZW1lbnQudGFnTmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKC9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlubGluZVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXihsaSkkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxpc3QtaXRlbVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXih0cikkL2kudGVzdCh0YWdOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRhYmxlLXJvd1wiO1xyXG4gICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byBcImJsb2NrXCIgd2hlbiBubyBtYXRjaCBpcyBmb3VuZC4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qIFRoZSBjbGFzcyBhZGQvcmVtb3ZlIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byB0ZW1wb3JhcmlseSBhcHBseSBhIFwidmVsb2NpdHktYW5pbWF0aW5nXCIgY2xhc3MgdG8gZWxlbWVudHMgd2hpbGUgdGhleSdyZSBhbmltYXRpbmcuICovXHJcbiAgICAgICAgICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gKGVsZW1lbnQuY2xhc3NOYW1lLmxlbmd0aCA/IFwiIFwiIDogXCJcIikgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUudG9TdHJpbmcoKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGNsYXNzTmFtZS5zcGxpdChcIiBcIikuam9pbihcInxcIikgKyBcIihcXFxcc3wkKVwiLCBcImdpXCIpLCBcIiBcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIFN0eWxlIEdldHRpbmcgJiBTZXR0aW5nXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogVGhlIHNpbmd1bGFyIGdldFByb3BlcnR5VmFsdWUsIHdoaWNoIHJvdXRlcyB0aGUgbG9naWMgZm9yIGFsbCBub3JtYWxpemF0aW9ucywgaG9va3MsIGFuZCBzdGFuZGFyZCBDU1MgcHJvcGVydGllcy4gKi9cclxuICAgICAgICBnZXRQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydHksIHJvb3RQcm9wZXJ0eVZhbHVlLCBmb3JjZVN0eWxlTG9va3VwKSB7XHJcbiAgICAgICAgICAgIC8qIEdldCBhbiBlbGVtZW50J3MgY29tcHV0ZWQgcHJvcGVydHkgdmFsdWUuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFJldHJpZXZpbmcgdGhlIHZhbHVlIG9mIGEgQ1NTIHByb3BlcnR5IGNhbm5vdCBzaW1wbHkgYmUgcGVyZm9ybWVkIGJ5IGNoZWNraW5nIGFuIGVsZW1lbnQnc1xyXG4gICAgICAgICAgICAgICBzdHlsZSBhdHRyaWJ1dGUgKHdoaWNoIG9ubHkgcmVmbGVjdHMgdXNlci1kZWZpbmVkIHZhbHVlcykuIEluc3RlYWQsIHRoZSBicm93c2VyIG11c3QgYmUgcXVlcmllZCBmb3IgYSBwcm9wZXJ0eSdzXHJcbiAgICAgICAgICAgICAgICpjb21wdXRlZCogdmFsdWUuIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IGdldENvbXB1dGVkU3R5bGUgaGVyZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVQcm9wZXJ0eVZhbHVlIChlbGVtZW50LCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgLyogV2hlbiBib3gtc2l6aW5nIGlzbid0IHNldCB0byBib3JkZXItYm94LCBoZWlnaHQgYW5kIHdpZHRoIHN0eWxlIHZhbHVlcyBhcmUgaW5jb3JyZWN0bHkgY29tcHV0ZWQgd2hlbiBhblxyXG4gICAgICAgICAgICAgICAgICAgZWxlbWVudCdzIHNjcm9sbGJhcnMgYXJlIHZpc2libGUgKHdoaWNoIGV4cGFuZHMgdGhlIGVsZW1lbnQncyBkaW1lbnNpb25zKS4gVGh1cywgd2UgZGVmZXIgdG8gdGhlIG1vcmUgYWNjdXJhdGVcclxuICAgICAgICAgICAgICAgICAgIG9mZnNldEhlaWdodC9XaWR0aCBwcm9wZXJ0eSwgd2hpY2ggaW5jbHVkZXMgdGhlIHRvdGFsIGRpbWVuc2lvbnMgZm9yIGludGVyaW9yLCBib3JkZXIsIHBhZGRpbmcsIGFuZCBzY3JvbGxiYXIuXHJcbiAgICAgICAgICAgICAgICAgICBXZSBzdWJ0cmFjdCBib3JkZXIgYW5kIHBhZGRpbmcgdG8gZ2V0IHRoZSBzdW0gb2YgaW50ZXJpb3IgKyBzY3JvbGxiYXIuICovXHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRWYWx1ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSUU8PTggZG9lc24ndCBzdXBwb3J0IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLCB0aHVzIHdlIGRlZmVyIHRvIGpRdWVyeSwgd2hpY2ggaGFzIGFuIGV4dGVuc2l2ZSBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgb2YgaGFja3MgdG8gYWNjdXJhdGVseSByZXRyaWV2ZSBJRTggcHJvcGVydHkgdmFsdWVzLiBSZS1pbXBsZW1lbnRpbmcgdGhhdCBsb2dpYyBoZXJlIGlzIG5vdCB3b3J0aCBibG9hdGluZyB0aGVcclxuICAgICAgICAgICAgICAgICAgIGNvZGViYXNlIGZvciBhIGR5aW5nIGJyb3dzZXIuIFRoZSBwZXJmb3JtYW5jZSByZXBlcmN1c3Npb25zIG9mIHVzaW5nIGpRdWVyeSBoZXJlIGFyZSBtaW5pbWFsIHNpbmNlXHJcbiAgICAgICAgICAgICAgICAgICBWZWxvY2l0eSBpcyBvcHRpbWl6ZWQgdG8gcmFyZWx5IChhbmQgc29tZXRpbWVzIG5ldmVyKSBxdWVyeSB0aGUgRE9NLiBGdXJ0aGVyLCB0aGUgJC5jc3MoKSBjb2RlcGF0aCBpc24ndCB0aGF0IHNsb3cuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSAkLmNzcyhlbGVtZW50LCBwcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgLyogQWxsIG90aGVyIGJyb3dzZXJzIHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZS4gVGhlIHJldHVybmVkIGxpdmUgb2JqZWN0IHJlZmVyZW5jZSBpcyBjYWNoZWQgb250byBpdHNcclxuICAgICAgICAgICAgICAgICAgIGFzc29jaWF0ZWQgZWxlbWVudCBzbyB0aGF0IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgcmVmZXRjaGVkIHVwb24gZXZlcnkgR0VULiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBCcm93c2VycyBkbyBub3QgcmV0dXJuIGhlaWdodCBhbmQgd2lkdGggdmFsdWVzIGZvciBlbGVtZW50cyB0aGF0IGFyZSBzZXQgdG8gZGlzcGxheTpcIm5vbmVcIi4gVGh1cywgd2UgdGVtcG9yYXJpbHlcclxuICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUgZGlzcGxheSB0byB0aGUgZWxlbWVudCB0eXBlJ3MgZGVmYXVsdCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlRGlzcGxheSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoL14od2lkdGh8aGVpZ2h0KSQvLnRlc3QocHJvcGVydHkpICYmIENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiZGlzcGxheVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVEaXNwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIENTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0RGlzcGxheSAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2dnbGVEaXNwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcmNlU3R5bGVMb29rdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSBcImhlaWdodFwiICYmIENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm94U2l6aW5nXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSAhPT0gXCJib3JkZXItYm94XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50Qm94SGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgLSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImJvcmRlclRvcFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyQm90dG9tV2lkdGhcIikpIHx8IDApIC0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwYWRkaW5nVG9wXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicGFkZGluZ0JvdHRvbVwiKSkgfHwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnREaXNwbGF5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRCb3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHkgPT09IFwid2lkdGhcIiAmJiBDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9yZGVyLWJveFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudEJveFdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyTGVmdFdpZHRoXCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiYm9yZGVyUmlnaHRXaWR0aFwiKSkgfHwgMCkgLSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAwKSAtIChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwicGFkZGluZ1JpZ2h0XCIpKSB8fCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmVydERpc3BsYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudEJveFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogRm9yIGVsZW1lbnRzIHRoYXQgVmVsb2NpdHkgaGFzbid0IGJlZW4gY2FsbGVkIG9uIGRpcmVjdGx5IChlLmcuIHdoZW4gVmVsb2NpdHkgcXVlcmllcyB0aGUgRE9NIG9uIGJlaGFsZlxyXG4gICAgICAgICAgICAgICAgICAgICAgIG9mIGEgcGFyZW50IG9mIGFuIGVsZW1lbnQgaXRzIGFuaW1hdGluZyksIHBlcmZvcm0gYSBkaXJlY3QgZ2V0Q29tcHV0ZWRTdHlsZSBsb29rdXAgc2luY2UgdGhlIG9iamVjdCBpc24ndCBjYWNoZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBjb21wdXRlZFN0eWxlIG9iamVjdCBoYXMgeWV0IHRvIGJlIGNhY2hlZCwgZG8gc28gbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIURhdGEoZWxlbWVudCkuY29tcHV0ZWRTdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlID0gRGF0YShlbGVtZW50KS5jb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIGNvbXB1dGVkU3R5bGUgaXMgY2FjaGVkLCB1c2UgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZSA9IERhdGEoZWxlbWVudCkuY29tcHV0ZWRTdHlsZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElFIGFuZCBGaXJlZm94IGRvIG5vdCByZXR1cm4gYSB2YWx1ZSBmb3IgdGhlIGdlbmVyaWMgYm9yZGVyQ29sb3IgLS0gdGhleSBvbmx5IHJldHVybiBpbmRpdmlkdWFsIHZhbHVlcyBmb3IgZWFjaCBib3JkZXIgc2lkZSdzIGNvbG9yLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIEFzIGEgcG9seWZpbGwgZm9yIHF1ZXJ5aW5nIGluZGl2aWR1YWwgYm9yZGVyIHNpZGUgY29sb3JzLCBqdXN0IHJldHVybiB0aGUgdG9wIGJvcmRlcidzIGNvbG9yLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoSUUgfHwgVmVsb2NpdHkuU3RhdGUuaXNGaXJlZm94KSAmJiBwcm9wZXJ0eSA9PT0gXCJib3JkZXJDb2xvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gXCJib3JkZXJUb3BDb2xvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSUU5IGhhcyBhIGJ1ZyBpbiB3aGljaCB0aGUgXCJmaWx0ZXJcIiBwcm9wZXJ0eSBtdXN0IGJlIGFjY2Vzc2VkIGZyb20gY29tcHV0ZWRTdHlsZSB1c2luZyB0aGUgZ2V0UHJvcGVydHlWYWx1ZSBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICAgICBpbnN0ZWFkIG9mIGEgZGlyZWN0IHByb3BlcnR5IGxvb2t1cC4gVGhlIGdldFByb3BlcnR5VmFsdWUgbWV0aG9kIGlzIHNsb3dlciB0aGFuIGEgZGlyZWN0IGxvb2t1cCwgd2hpY2ggaXMgd2h5IHdlIGF2b2lkIGl0IGJ5IGRlZmF1bHQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElFID09PSA5ICYmIHByb3BlcnR5ID09PSBcImZpbHRlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gY29tcHV0ZWRTdHlsZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGYWxsIGJhY2sgdG8gdGhlIHByb3BlcnR5J3Mgc3R5bGUgdmFsdWUgKGlmIGRlZmluZWQpIHdoZW4gY29tcHV0ZWRWYWx1ZSByZXR1cm5zIG5vdGhpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggY2FuIGhhcHBlbiB3aGVuIHRoZSBlbGVtZW50IGhhc24ndCBiZWVuIHBhaW50ZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkVmFsdWUgPT09IFwiXCIgfHwgY29tcHV0ZWRWYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXZlcnREaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yIHRvcCwgcmlnaHQsIGJvdHRvbSwgYW5kIGxlZnQgKFRSQkwpIHZhbHVlcyB0aGF0IGFyZSBzZXQgdG8gXCJhdXRvXCIgb24gZWxlbWVudHMgb2YgXCJmaXhlZFwiIG9yIFwiYWJzb2x1dGVcIiBwb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgIGRlZmVyIHRvIGpRdWVyeSBmb3IgY29udmVydGluZyBcImF1dG9cIiB0byBhIG51bWVyaWMgdmFsdWUuIChGb3IgZWxlbWVudHMgd2l0aCBhIFwic3RhdGljXCIgb3IgXCJyZWxhdGl2ZVwiIHBvc2l0aW9uLCBcImF1dG9cIiBoYXMgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgICAgIGVmZmVjdCBhcyBiZWluZyBzZXQgdG8gMCwgc28gbm8gY29udmVyc2lvbiBpcyBuZWNlc3NhcnkuKSAqL1xyXG4gICAgICAgICAgICAgICAgLyogQW4gZXhhbXBsZSBvZiB3aHkgbnVtZXJpYyBjb252ZXJzaW9uIGlzIG5lY2Vzc2FyeTogV2hlbiBhbiBlbGVtZW50IHdpdGggXCJwb3NpdGlvbjphYnNvbHV0ZVwiIGhhcyBhbiB1bnRvdWNoZWQgXCJsZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LCB3aGljaCByZXZlcnRzIHRvIFwiYXV0b1wiLCBsZWZ0J3MgdmFsdWUgaXMgMCByZWxhdGl2ZSB0byBpdHMgcGFyZW50IGVsZW1lbnQsIGJ1dCBpcyBvZnRlbiBub24temVybyByZWxhdGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgdG8gaXRzICpjb250YWluaW5nKiAobm90IHBhcmVudCkgZWxlbWVudCwgd2hpY2ggaXMgdGhlIG5lYXJlc3QgXCJwb3NpdGlvbjpyZWxhdGl2ZVwiIGFuY2VzdG9yIG9yIHRoZSB2aWV3cG9ydCAoYW5kIGFsd2F5cyB0aGUgdmlld3BvcnQgaW4gdGhlIGNhc2Ugb2YgXCJwb3NpdGlvbjpmaXhlZFwiKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChjb21wdXRlZFZhbHVlID09PSBcImF1dG9cIiAmJiAvXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC9pLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gY29tcHV0ZVByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJwb3NpdGlvblwiKTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBhYnNvbHV0ZSBwb3NpdGlvbmluZywgalF1ZXJ5J3MgJC5wb3NpdGlvbigpIG9ubHkgcmV0dXJucyB2YWx1ZXMgZm9yIHRvcCBhbmQgbGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICByaWdodCBhbmQgYm90dG9tIHdpbGwgaGF2ZSB0aGVpciBcImF1dG9cIiB2YWx1ZSByZXZlcnRlZCB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEEgalF1ZXJ5IG9iamVjdCBtdXN0IGJlIGNyZWF0ZWQgaGVyZSBzaW5jZSBqUXVlcnkgZG9lc24ndCBoYXZlIGEgbG93LWxldmVsIGFsaWFzIGZvciAkLnBvc2l0aW9uKCkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgTm90IGEgYmlnIGRlYWwgc2luY2Ugd2UncmUgY3VycmVudGx5IGluIGEgR0VUIGJhdGNoIGFueXdheS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IFwiZml4ZWRcIiB8fCAocG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiAmJiAvdG9wfGxlZnQvaS50ZXN0KHByb3BlcnR5KSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogalF1ZXJ5IHN0cmlwcyB0aGUgcGl4ZWwgdW5pdCBmcm9tIGl0cyByZXR1cm5lZCB2YWx1ZXM7IHdlIHJlLWFkZCBpdCBoZXJlIHRvIGNvbmZvcm0gd2l0aCBjb21wdXRlUHJvcGVydHlWYWx1ZSdzIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFZhbHVlID0gJChlbGVtZW50KS5wb3NpdGlvbigpW3Byb3BlcnR5XSArIFwicHhcIjsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8qIElmIHRoaXMgaXMgYSBob29rZWQgcHJvcGVydHkgKGUuZy4gXCJjbGlwTGVmdFwiIGluc3RlYWQgb2YgdGhlIHJvb3QgcHJvcGVydHkgb2YgXCJjbGlwXCIpLFxyXG4gICAgICAgICAgICAgICBleHRyYWN0IHRoZSBob29rJ3MgdmFsdWUgZnJvbSBhIG5vcm1hbGl6ZWQgcm9vdFByb3BlcnR5VmFsdWUgdXNpbmcgQ1NTLkhvb2tzLmV4dHJhY3RWYWx1ZSgpLiAqL1xyXG4gICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9vayA9IHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tSb290ID0gQ1NTLkhvb2tzLmdldFJvb3QoaG9vayk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjYWNoZWQgcm9vdFByb3BlcnR5VmFsdWUgd2Fzbid0IHBhc3NlZCBpbiAod2hpY2ggVmVsb2NpdHkgYWx3YXlzIGF0dGVtcHRzIHRvIGRvIGluIG9yZGVyIHRvIGF2b2lkIHJlcXVlcnlpbmcgdGhlIERPTSksXHJcbiAgICAgICAgICAgICAgICAgICBxdWVyeSB0aGUgRE9NIGZvciB0aGUgcm9vdCBwcm9wZXJ0eSdzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvb3RQcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgYnJvd3NlciBpcyBub3cgYmVpbmcgZGlyZWN0bHkgcXVlcmllZCwgdXNlIHRoZSBvZmZpY2lhbCBwb3N0LXByZWZpeGluZyBwcm9wZXJ0eSBuYW1lIGZvciB0aGlzIGxvb2t1cC4gKi9cclxuICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIENTUy5OYW1lcy5wcmVmaXhDaGVjayhob29rUm9vdClbMF0pOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHJvb3QgaGFzIGEgbm9ybWFsaXphdGlvbiByZWdpc3RlcmVkLCBwZWZvcm0gdGhlIGFzc29jaWF0ZWQgbm9ybWFsaXphdGlvbiBleHRyYWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2hvb2tSb290XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKFwiZXh0cmFjdFwiLCBlbGVtZW50LCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRXh0cmFjdCB0aGUgaG9vaydzIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy5leHRyYWN0VmFsdWUoaG9vaywgcm9vdFByb3BlcnR5VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgLyogSWYgdGhpcyBpcyBhIG5vcm1hbGl6ZWQgcHJvcGVydHkgKGUuZy4gXCJvcGFjaXR5XCIgYmVjb21lcyBcImZpbHRlclwiIGluIDw9SUU4KSBvciBcInRyYW5zbGF0ZVhcIiBiZWNvbWVzIFwidHJhbnNmb3JtXCIpLFxyXG4gICAgICAgICAgICAgICBub3JtYWxpemUgdGhlIHByb3BlcnR5J3MgbmFtZSBhbmQgdmFsdWUsIGFuZCBoYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSBvZiB0cmFuc2Zvcm1zLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBOb3JtYWxpemluZyBhIHByb3BlcnR5IGlzIG11dHVhbGx5IGV4Y2x1c2l2ZSBmcm9tIGhvb2tpbmcgYSBwcm9wZXJ0eSBzaW5jZSBob29rLWV4dHJhY3RlZCB2YWx1ZXMgYXJlIHN0cmljdGx5XHJcbiAgICAgICAgICAgICAgIG51bWVyaWNhbCBhbmQgdGhlcmVmb3JlIGRvIG5vdCByZXF1aXJlIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbi4gKi9cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkUHJvcGVydHlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eVZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wZXJ0eU5hbWUgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJuYW1lXCIsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRyYW5zZm9ybSB2YWx1ZXMgYXJlIGNhbGN1bGF0ZWQgdmlhIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbiAoc2VlIGJlbG93KSwgd2hpY2ggY2hlY2tzIGFnYWluc3QgdGhlIGVsZW1lbnQncyB0cmFuc2Zvcm1DYWNoZS5cclxuICAgICAgICAgICAgICAgICAgIEF0IG5vIHBvaW50IGRvIHRyYW5zZm9ybSBHRVRzIGV2ZXIgYWN0dWFsbHkgcXVlcnkgdGhlIERPTTsgaW5pdGlhbCBzdHlsZXNoZWV0IHZhbHVlcyBhcmUgbmV2ZXIgcHJvY2Vzc2VkLlxyXG4gICAgICAgICAgICAgICAgICAgVGhpcyBpcyBiZWNhdXNlIHBhcnNpbmcgM0QgdHJhbnNmb3JtIG1hdHJpY2VzIGlzIG5vdCBhbHdheXMgYWNjdXJhdGUgYW5kIHdvdWxkIGJsb2F0IG91ciBjb2RlYmFzZTtcclxuICAgICAgICAgICAgICAgICAgIHRodXMsIG5vcm1hbGl6YXRpb24gZXh0cmFjdGlvbiBkZWZhdWx0cyBpbml0aWFsIHRyYW5zZm9ybSB2YWx1ZXMgdG8gdGhlaXIgemVyby12YWx1ZXMgKGUuZy4gMSBmb3Igc2NhbGVYIGFuZCAwIGZvciB0cmFuc2xhdGVYKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkUHJvcGVydHlOYW1lICE9PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUgPSBjb21wdXRlUHJvcGVydHlWYWx1ZShlbGVtZW50LCBDU1MuTmFtZXMucHJlZml4Q2hlY2sobm9ybWFsaXplZFByb3BlcnR5TmFtZSlbMF0pOyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHZhbHVlIGlzIGEgQ1NTIG51bGwtdmFsdWUgYW5kIHRoaXMgcHJvcGVydHkgaGFzIGEgaG9vayB0ZW1wbGF0ZSwgdXNlIHRoYXQgemVyby12YWx1ZSB0ZW1wbGF0ZSBzbyB0aGF0IGhvb2tzIGNhbiBiZSBleHRyYWN0ZWQgZnJvbSBpdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShub3JtYWxpemVkUHJvcGVydHlWYWx1ZSkgJiYgQ1NTLkhvb2tzLnRlbXBsYXRlc1twcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUgPSBDU1MuSG9va3MudGVtcGxhdGVzW3Byb3BlcnR5XVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcImV4dHJhY3RcIiwgZWxlbWVudCwgbm9ybWFsaXplZFByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBhIChudW1lcmljKSB2YWx1ZSB3YXNuJ3QgcHJvZHVjZWQgdmlhIGhvb2sgZXh0cmFjdGlvbiBvciBub3JtYWxpemF0aW9uLCBxdWVyeSB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICBpZiAoIS9eW1xcZC1dLy50ZXN0KHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBGb3IgU1ZHIGVsZW1lbnRzLCBkaW1lbnNpb25hbCBwcm9wZXJ0aWVzICh3aGljaCBTVkdBdHRyaWJ1dGUoKSBkZXRlY3RzKSBhcmUgdHdlZW5lZCB2aWFcclxuICAgICAgICAgICAgICAgICAgIHRoZWlyIEhUTUwgYXR0cmlidXRlIHZhbHVlcyBpbnN0ZWFkIG9mIHRoZWlyIENTUyBzdHlsZSB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KSAmJiBEYXRhKGVsZW1lbnQpLmlzU1ZHICYmIENTUy5OYW1lcy5TVkdBdHRyaWJ1dGUocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogU2luY2UgdGhlIGhlaWdodC93aWR0aCBhdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgc2V0IG1hbnVhbGx5LCB0aGV5IGRvbid0IHJlZmxlY3QgY29tcHV0ZWQgdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRodXMsIHdlIHVzZSB1c2UgZ2V0QkJveCgpIHRvIGVuc3VyZSB3ZSBhbHdheXMgZ2V0IHZhbHVlcyBmb3IgZWxlbWVudHMgd2l0aCB1bmRlZmluZWQgaGVpZ2h0L3dpZHRoIGF0dHJpYnV0ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9eKGhlaWdodHx3aWR0aCkkL2kudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IGVsZW1lbnQuZ2V0QkJveCgpW3Byb3BlcnR5XTtcclxuICAgICAgICAgICAgICAgICAgICAvKiBPdGhlcndpc2UsIGFjY2VzcyB0aGUgYXR0cmlidXRlIHZhbHVlIGRpcmVjdGx5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShwcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gY29tcHV0ZVByb3BlcnR5VmFsdWUoZWxlbWVudCwgQ1NTLk5hbWVzLnByZWZpeENoZWNrKHByb3BlcnR5KVswXSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBTaW5jZSBwcm9wZXJ0eSBsb29rdXBzIGFyZSBmb3IgYW5pbWF0aW9uIHB1cnBvc2VzICh3aGljaCBlbnRhaWxzIGNvbXB1dGluZyB0aGUgbnVtZXJpYyBkZWx0YSBiZXR3ZWVuIHN0YXJ0IGFuZCBlbmQgdmFsdWVzKSxcclxuICAgICAgICAgICAgICAgY29udmVydCBDU1MgbnVsbC12YWx1ZXMgdG8gYW4gaW50ZWdlciBvZiB2YWx1ZSAwLiAqL1xyXG4gICAgICAgICAgICBpZiAoQ1NTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShwcm9wZXJ0eVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZyhcIkdldCBcIiArIHByb3BlcnR5ICsgXCI6IFwiICsgcHJvcGVydHlWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKiBUaGUgc2luZ3VsYXIgc2V0UHJvcGVydHlWYWx1ZSwgd2hpY2ggcm91dGVzIHRoZSBsb2dpYyBmb3IgYWxsIG5vcm1hbGl6YXRpb25zLCBob29rcywgYW5kIHN0YW5kYXJkIENTUyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgIHNldFByb3BlcnR5VmFsdWU6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5LCBwcm9wZXJ0eVZhbHVlLCByb290UHJvcGVydHlWYWx1ZSwgc2Nyb2xsRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gcHJvcGVydHk7XHJcblxyXG4gICAgICAgICAgICAvKiBJbiBvcmRlciB0byBiZSBzdWJqZWN0ZWQgdG8gY2FsbCBvcHRpb25zIGFuZCBlbGVtZW50IHF1ZXVlaW5nLCBzY3JvbGwgYW5pbWF0aW9uIGlzIHJvdXRlZCB0aHJvdWdoIFZlbG9jaXR5IGFzIGlmIGl0IHdlcmUgYSBzdGFuZGFyZCBDU1MgcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA9PT0gXCJzY3JvbGxcIikge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjb250YWluZXIgb3B0aW9uIGlzIHByZXNlbnQsIHNjcm9sbCB0aGUgY29udGFpbmVyIGluc3RlYWQgb2YgdGhlIGJyb3dzZXIgd2luZG93LiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbERhdGEuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbXCJzY3JvbGxcIiArIHNjcm9sbERhdGEuZGlyZWN0aW9uXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvKiBPdGhlcndpc2UsIFZlbG9jaXR5IGRlZmF1bHRzIHRvIHNjcm9sbGluZyB0aGUgYnJvd3NlciB3aW5kb3cuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxEYXRhLmRpcmVjdGlvbiA9PT0gXCJMZWZ0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHByb3BlcnR5VmFsdWUsIHNjcm9sbERhdGEuYWx0ZXJuYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxEYXRhLmFsdGVybmF0ZVZhbHVlLCBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm1zICh0cmFuc2xhdGVYLCByb3RhdGVaLCBldGMuKSBhcmUgYXBwbGllZCB0byBhIHBlci1lbGVtZW50IHRyYW5zZm9ybUNhY2hlIG9iamVjdCwgd2hpY2ggaXMgbWFudWFsbHkgZmx1c2hlZCB2aWEgZmx1c2hUcmFuc2Zvcm1DYWNoZSgpLlxyXG4gICAgICAgICAgICAgICAgICAgVGh1cywgZm9yIG5vdywgd2UgbWVyZWx5IGNhY2hlIHRyYW5zZm9ybXMgYmVpbmcgU0VULiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XSAmJiBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJuYW1lXCIsIGVsZW1lbnQpID09PSBcInRyYW5zZm9ybVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogUGVyZm9ybSBhIG5vcm1hbGl6YXRpb24gaW5qZWN0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBub3JtYWxpemF0aW9uIGxvZ2ljIGhhbmRsZXMgdGhlIHRyYW5zZm9ybUNhY2hlIHVwZGF0aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3Byb3BlcnR5XShcImluamVjdFwiLCBlbGVtZW50LCBwcm9wZXJ0eVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lID0gXCJ0cmFuc2Zvcm1cIjtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVtwcm9wZXJ0eV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEluamVjdCBob29rcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob29rTmFtZSA9IHByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9va1Jvb3QgPSBDU1MuSG9va3MuZ2V0Um9vdChwcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBhIGNhY2hlZCByb290UHJvcGVydHlWYWx1ZSB3YXMgbm90IHByb3ZpZGVkLCBxdWVyeSB0aGUgRE9NIGZvciB0aGUgaG9va1Jvb3QncyBjdXJyZW50IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IHJvb3RQcm9wZXJ0eVZhbHVlIHx8IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIGhvb2tSb290KTsgLyogR0VUICovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eVZhbHVlID0gQ1NTLkhvb2tzLmluamVjdFZhbHVlKGhvb2tOYW1lLCBwcm9wZXJ0eVZhbHVlLCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gaG9va1Jvb3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3JtYWxpemUgbmFtZXMgYW5kIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5VmFsdWUgPSBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtwcm9wZXJ0eV0oXCJpbmplY3RcIiwgZWxlbWVudCwgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcHJvcGVydHldKFwibmFtZVwiLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFzc2lnbiB0aGUgYXBwcm9wcmlhdGUgdmVuZG9yIHByZWZpeCBiZWZvcmUgcGVyZm9ybWluZyBhbiBvZmZpY2lhbCBzdHlsZSB1cGRhdGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlOYW1lID0gQ1NTLk5hbWVzLnByZWZpeENoZWNrKHByb3BlcnR5KVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQSB0cnkvY2F0Y2ggaXMgdXNlZCBmb3IgSUU8PTgsIHdoaWNoIHRocm93cyBhbiBlcnJvciB3aGVuIFwiaW52YWxpZFwiIENTUyB2YWx1ZXMgYXJlIHNldCwgZS5nLiBhIG5lZ2F0aXZlIHdpZHRoLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRyeS9jYXRjaCBpcyBhdm9pZGVkIGZvciBvdGhlciBicm93c2VycyBzaW5jZSBpdCBpbmN1cnMgYSBwZXJmb3JtYW5jZSBvdmVyaGVhZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSUUgPD0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eU5hbWVdID0gcHJvcGVydHlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIgKyBwcm9wZXJ0eVZhbHVlICsgXCJdIGZvciBbXCIgKyBwcm9wZXJ0eU5hbWUgKyBcIl1cIik7IH1cclxuICAgICAgICAgICAgICAgICAgICAvKiBTVkcgZWxlbWVudHMgaGF2ZSB0aGVpciBkaW1lbnNpb25hbCBwcm9wZXJ0aWVzICh3aWR0aCwgaGVpZ2h0LCB4LCB5LCBjeCwgZXRjLikgYXBwbGllZCBkaXJlY3RseSBhcyBhdHRyaWJ1dGVzIGluc3RlYWQgb2YgYXMgc3R5bGVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IElFOCBkb2VzIG5vdCBzdXBwb3J0IFNWRyBlbGVtZW50cywgc28gaXQncyBva2F5IHRoYXQgd2Ugc2tpcCBpdCBmb3IgU1ZHIGFuaW1hdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKERhdGEoZWxlbWVudCkgJiYgRGF0YShlbGVtZW50KS5pc1NWRyAmJiBDU1MuTmFtZXMuU1ZHQXR0cmlidXRlKHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBGb3IgU1ZHIGF0dHJpYnV0ZXMsIHZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0eSBuYW1lcyBhcmUgbmV2ZXIgdXNlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogTm90IGFsbCBDU1MgcHJvcGVydGllcyBjYW4gYmUgYW5pbWF0ZWQgdmlhIGF0dHJpYnV0ZXMsIGJ1dCB0aGUgYnJvd3NlciB3b24ndCB0aHJvdyBhbiBlcnJvciBmb3IgdW5zdXBwb3J0ZWQgcHJvcGVydGllcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocHJvcGVydHksIHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcgPj0gMikgY29uc29sZS5sb2coXCJTZXQgXCIgKyBwcm9wZXJ0eSArIFwiIChcIiArIHByb3BlcnR5TmFtZSArIFwiKTogXCIgKyBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyogUmV0dXJuIHRoZSBub3JtYWxpemVkIHByb3BlcnR5IG5hbWUgYW5kIHZhbHVlIGluIGNhc2UgdGhlIGNhbGxlciB3YW50cyB0byBrbm93IGhvdyB0aGVzZSB2YWx1ZXMgd2VyZSBtb2RpZmllZCBiZWZvcmUgYmVpbmcgYXBwbGllZCB0byB0aGUgRE9NLiAqL1xyXG4gICAgICAgICAgICByZXR1cm4gWyBwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUgXTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKiBUbyBpbmNyZWFzZSBwZXJmb3JtYW5jZSBieSBiYXRjaGluZyB0cmFuc2Zvcm0gdXBkYXRlcyBpbnRvIGEgc2luZ2xlIFNFVCwgdHJhbnNmb3JtcyBhcmUgbm90IGRpcmVjdGx5IGFwcGxpZWQgdG8gYW4gZWxlbWVudCB1bnRpbCBmbHVzaFRyYW5zZm9ybUNhY2hlKCkgaXMgY2FsbGVkLiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFZlbG9jaXR5IGFwcGxpZXMgdHJhbnNmb3JtIHByb3BlcnRpZXMgaW4gdGhlIHNhbWUgb3JkZXIgdGhhdCB0aGV5IGFyZSBjaHJvbm9naWNhbGx5IGludHJvZHVjZWQgdG8gdGhlIGVsZW1lbnQncyBDU1Mgc3R5bGVzLiAqL1xyXG4gICAgICAgIGZsdXNoVHJhbnNmb3JtQ2FjaGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKiBDZXJ0YWluIGJyb3dzZXJzIHJlcXVpcmUgdGhhdCBTVkcgdHJhbnNmb3JtcyBiZSBhcHBsaWVkIGFzIGFuIGF0dHJpYnV0ZS4gSG93ZXZlciwgdGhlIFNWRyB0cmFuc2Zvcm0gYXR0cmlidXRlIHRha2VzIGEgbW9kaWZpZWQgdmVyc2lvbiBvZiBDU1MncyB0cmFuc2Zvcm0gc3RyaW5nXHJcbiAgICAgICAgICAgICAgICh1bml0cyBhcmUgZHJvcHBlZCBhbmQsIGV4Y2VwdCBmb3Igc2tld1gvWSwgc3VicHJvcGVydGllcyBhcmUgbWVyZ2VkIGludG8gdGhlaXIgbWFzdGVyIHByb3BlcnR5IC0tIGUuZy4gc2NhbGVYIGFuZCBzY2FsZVkgYXJlIG1lcmdlZCBpbnRvIHNjYWxlKFggWSkuICovXHJcbiAgICAgICAgICAgIGlmICgoSUUgfHwgKFZlbG9jaXR5LlN0YXRlLmlzQW5kcm9pZCAmJiAhVmVsb2NpdHkuU3RhdGUuaXNDaHJvbWUpKSAmJiBEYXRhKGVsZW1lbnQpLmlzU1ZHKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB0cmFuc2Zvcm0gdmFsdWVzIGFyZSBzdG9yZWQgaW4gdGhlaXIgcGFyZW50aGVzZXMtd3JhcHBlZCBmb3JtLCB3ZSB1c2UgYSBoZWxwZXIgZnVuY3Rpb24gdG8gc3RyaXAgb3V0IHRoZWlyIG51bWVyaWMgdmFsdWVzLlxyXG4gICAgICAgICAgICAgICAgICAgRnVydGhlciwgU1ZHIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIG9ubHkgdGFrZSB1bml0bGVzcyAocmVwcmVzZW50aW5nIHBpeGVscykgdmFsdWVzLCBzbyBpdCdzIG9rYXkgdGhhdCBwYXJzZUZsb2F0KCkgc3RyaXBzIHRoZSB1bml0IHN1ZmZpeGVkIHRvIHRoZSBmbG9hdCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZsb2F0ICh0cmFuc2Zvcm1Qcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHRyYW5zZm9ybVByb3BlcnR5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ3JlYXRlIGFuIG9iamVjdCB0byBvcmdhbml6ZSBhbGwgdGhlIHRyYW5zZm9ybXMgdGhhdCB3ZSdsbCBhcHBseSB0byB0aGUgU1ZHIGVsZW1lbnQuIFRvIGtlZXAgdGhlIGxvZ2ljIHNpbXBsZSxcclxuICAgICAgICAgICAgICAgICAgIHdlIHByb2Nlc3MgKmFsbCogdHJhbnNmb3JtIHByb3BlcnRpZXMgLS0gZXZlbiB0aG9zZSB0aGF0IG1heSBub3QgYmUgZXhwbGljaXRseSBhcHBsaWVkIChzaW5jZSB0aGV5IGRlZmF1bHQgdG8gdGhlaXIgemVyby12YWx1ZXMgYW55d2F5KS4gKi9cclxuICAgICAgICAgICAgICAgIHZhciBTVkdUcmFuc2Zvcm1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZTogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInRyYW5zbGF0ZVhcIiksIGdldFRyYW5zZm9ybUZsb2F0KFwidHJhbnNsYXRlWVwiKSBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNrZXdYOiBbIGdldFRyYW5zZm9ybUZsb2F0KFwic2tld1hcIikgXSwgc2tld1k6IFsgZ2V0VHJhbnNmb3JtRmxvYXQoXCJza2V3WVwiKSBdLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBzY2FsZSBwcm9wZXJ0eSBpcyBzZXQgKG5vbi0xKSwgdXNlIHRoYXQgdmFsdWUgZm9yIHRoZSBzY2FsZVggYW5kIHNjYWxlWSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyBiZWhhdmlvciBtaW1pY3MgdGhlIHJlc3VsdCBvZiBhbmltYXRpbmcgYWxsIHRoZXNlIHByb3BlcnRpZXMgYXQgb25jZSBvbiBIVE1MIGVsZW1lbnRzKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSAhPT0gMSA/IFsgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSwgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVwiKSBdIDogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInNjYWxlWFwiKSwgZ2V0VHJhbnNmb3JtRmxvYXQoXCJzY2FsZVlcIikgXSxcclxuICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBTVkcncyByb3RhdGUgdHJhbnNmb3JtIHRha2VzIHRocmVlIHZhbHVlczogcm90YXRpb24gZGVncmVlcyBmb2xsb3dlZCBieSB0aGUgWCBhbmQgWSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmluZyB0aGUgcm90YXRpb24ncyBvcmlnaW4gcG9pbnQuIFdlIGlnbm9yZSB0aGUgb3JpZ2luIHZhbHVlcyAoZGVmYXVsdCB0aGVtIHRvIDApLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZTogWyBnZXRUcmFuc2Zvcm1GbG9hdChcInJvdGF0ZVpcIiksIDAsIDAgXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggdGhlIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIGluIHRoZSB1c2VyLWRlZmluZWQgcHJvcGVydHkgbWFwIG9yZGVyLlxyXG4gICAgICAgICAgICAgICAgICAgKFRoaXMgbWltaWNzIHRoZSBiZWhhdmlvciBvZiBub24tU1ZHIHRyYW5zZm9ybSBhbmltYXRpb24uKSAqL1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGUsIGZ1bmN0aW9uKHRyYW5zZm9ybU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBFeGNlcHQgZm9yIHdpdGggc2tld1gvWSwgcmV2ZXJ0IHRoZSBheGlzLXNwZWNpZmljIHRyYW5zZm9ybSBzdWJwcm9wZXJ0aWVzIHRvIHRoZWlyIGF4aXMtZnJlZSBtYXN0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHNvIHRoYXQgdGhleSBtYXRjaCB1cCB3aXRoIFNWRydzIGFjY2VwdGVkIHRyYW5zZm9ybSBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgvXnRyYW5zbGF0ZS9pLnRlc3QodHJhbnNmb3JtTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTmFtZSA9IFwidHJhbnNsYXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXnNjYWxlL2kudGVzdCh0cmFuc2Zvcm1OYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1OYW1lID0gXCJzY2FsZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15yb3RhdGUvaS50ZXN0KHRyYW5zZm9ybU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5hbWUgPSBcInJvdGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogQ2hlY2sgdGhhdCB3ZSBoYXZlbid0IHlldCBkZWxldGVkIHRoZSBwcm9wZXJ0eSBmcm9tIHRoZSBTVkdUcmFuc2Zvcm1zIGNvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBcHBlbmQgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eSBpbiB0aGUgU1ZHLXN1cHBvcnRlZCB0cmFuc2Zvcm0gZm9ybWF0LiBBcyBwZXIgdGhlIHNwZWMsIHN1cnJvdW5kIHRoZSBzcGFjZS1kZWxpbWl0ZWQgdmFsdWVzIGluIHBhcmVudGhlc2VzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1TdHJpbmcgKz0gdHJhbnNmb3JtTmFtZSArIFwiKFwiICsgU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXS5qb2luKFwiIFwiKSArIFwiKVwiICsgXCIgXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBZnRlciBwcm9jZXNzaW5nIGFuIFNWRyB0cmFuc2Zvcm0gcHJvcGVydHksIGRlbGV0ZSBpdCBmcm9tIHRoZSBTVkdUcmFuc2Zvcm1zIGNvbnRhaW5lciBzbyB3ZSBkb24ndFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZS1pbnNlcnQgdGhlIHNhbWUgbWFzdGVyIHByb3BlcnR5IGlmIHdlIGVuY291bnRlciBhbm90aGVyIG9uZSBvZiBpdHMgYXhpcy1zcGVjaWZpYyBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgU1ZHVHJhbnNmb3Jtc1t0cmFuc2Zvcm1OYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1WYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJzcGVjdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gcHJvcGVydGllcyBhcmUgc3RvcmVkIGFzIG1lbWJlcnMgb2YgdGhlIHRyYW5zZm9ybUNhY2hlIG9iamVjdC4gQ29uY2F0ZW5hdGUgYWxsIHRoZSBtZW1iZXJzIGludG8gYSBzdHJpbmcuICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZSwgZnVuY3Rpb24odHJhbnNmb3JtTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVZhbHVlID0gRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVHJhbnNmb3JtJ3MgcGVyc3BlY3RpdmUgc3VicHJvcGVydHkgbXVzdCBiZSBzZXQgZmlyc3QgaW4gb3JkZXIgdG8gdGFrZSBlZmZlY3QuIFN0b3JlIGl0IHRlbXBvcmFyaWx5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1OYW1lID09PSBcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc3BlY3RpdmUgPSB0cmFuc2Zvcm1WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJRTkgb25seSBzdXBwb3J0cyBvbmUgcm90YXRpb24gdHlwZSwgcm90YXRlWiwgd2hpY2ggaXQgcmVmZXJzIHRvIGFzIFwicm90YXRlXCIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKElFID09PSA5ICYmIHRyYW5zZm9ybU5hbWUgPT09IFwicm90YXRlWlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5hbWUgPSBcInJvdGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtU3RyaW5nICs9IHRyYW5zZm9ybU5hbWUgKyB0cmFuc2Zvcm1WYWx1ZSArIFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgcHJlc2VudCwgc2V0IHRoZSBwZXJzcGVjdGl2ZSBzdWJwcm9wZXJ0eSBmaXJzdC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChwZXJzcGVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVN0cmluZyA9IFwicGVyc3BlY3RpdmVcIiArIHBlcnNwZWN0aXZlICsgXCIgXCIgKyB0cmFuc2Zvcm1TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKiBSZWdpc3RlciBob29rcyBhbmQgbm9ybWFsaXphdGlvbnMuICovXHJcbiAgICBDU1MuSG9va3MucmVnaXN0ZXIoKTtcclxuICAgIENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpO1xyXG5cclxuICAgIC8qIEFsbG93IGhvb2sgc2V0dGluZyBpbiB0aGUgc2FtZSBmYXNoaW9uIGFzIGpRdWVyeSdzICQuY3NzKCkuICovXHJcbiAgICBWZWxvY2l0eS5ob29rID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBhcmcyLCBhcmczKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBlbGVtZW50cyA9IHNhbml0aXplRWxlbWVudHMoZWxlbWVudHMpO1xyXG5cclxuICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLyogSW5pdGlhbGl6ZSBWZWxvY2l0eSdzIHBlci1lbGVtZW50IGRhdGEgY2FjaGUgaWYgdGhpcyBlbGVtZW50IGhhc24ndCBwcmV2aW91c2x5IGJlZW4gYW5pbWF0ZWQuICovXHJcbiAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIFZlbG9jaXR5LmluaXQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIEdldCBwcm9wZXJ0eSB2YWx1ZS4gSWYgYW4gZWxlbWVudCBzZXQgd2FzIHBhc3NlZCBpbiwgb25seSByZXR1cm4gdGhlIHZhbHVlIGZvciB0aGUgZmlyc3QgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgaWYgKGFyZzMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFZlbG9jaXR5LkNTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIGFyZzIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBTZXQgcHJvcGVydHkgdmFsdWUuICovXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiBzUFYgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgbm9ybWFsaXplZCBwcm9wZXJ0eU5hbWUvcHJvcGVydHlWYWx1ZSBwYWlyIHVzZWQgdG8gdXBkYXRlIHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRTZXQgPSBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBhcmcyLCBhcmczKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUcmFuc2Zvcm0gcHJvcGVydGllcyBkb24ndCBhdXRvbWF0aWNhbGx5IHNldC4gVGhleSBoYXZlIHRvIGJlIGZsdXNoZWQgdG8gdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChhZGp1c3RlZFNldFswXSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlID0gYWRqdXN0ZWRTZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKipcclxuICAgICAgICBBbmltYXRpb25cclxuICAgICoqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIHZhciBhbmltYXRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQ2FsbCBDaGFpblxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogTG9naWMgZm9yIGRldGVybWluaW5nIHdoYXQgdG8gcmV0dXJuIHRvIHRoZSBjYWxsIHN0YWNrIHdoZW4gZXhpdGluZyBvdXQgb2YgVmVsb2NpdHkuICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hhaW4gKCkge1xyXG4gICAgICAgICAgICAvKiBJZiB3ZSBhcmUgdXNpbmcgdGhlIHV0aWxpdHkgZnVuY3Rpb24sIGF0dGVtcHQgdG8gcmV0dXJuIHRoaXMgY2FsbCdzIHByb21pc2UuIElmIG5vIHByb21pc2UgbGlicmFyeSB3YXMgZGV0ZWN0ZWQsXHJcbiAgICAgICAgICAgICAgIGRlZmF1bHQgdG8gbnVsbCBpbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgdGFyZ2V0ZWQgZWxlbWVudHMgc28gdGhhdCB1dGlsaXR5IGZ1bmN0aW9uJ3MgcmV0dXJuIHZhbHVlIGlzIHN0YW5kYXJkaXplZC4gKi9cclxuICAgICAgICAgICAgaWYgKGlzVXRpbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2VEYXRhLnByb21pc2UgfHwgbnVsbDtcclxuICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCBpZiB3ZSdyZSB1c2luZyAkLmZuLCByZXR1cm4gdGhlIGpRdWVyeS0vWmVwdG8td3JhcHBlZCBlbGVtZW50IHNldC4gKi9cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50c1dyYXBwZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgQXJndW1lbnRzIEFzc2lnbm1lbnRcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBUbyBhbGxvdyBmb3IgZXhwcmVzc2l2ZSBDb2ZmZWVTY3JpcHQgY29kZSwgVmVsb2NpdHkgc3VwcG9ydHMgYW4gYWx0ZXJuYXRpdmUgc3ludGF4IGluIHdoaWNoIFwicHJvcGVydGllc1wiIGFuZCBcIm9wdGlvbnNcIlxyXG4gICAgICAgICAgIG9iamVjdHMgYXJlIGRlZmluZWQgb24gYSBjb250YWluZXIgb2JqZWN0IHRoYXQncyBwYXNzZWQgaW4gYXMgVmVsb2NpdHkncyBzb2xlIGFyZ3VtZW50LiAqL1xyXG4gICAgICAgIC8qIE5vdGU6IFNvbWUgYnJvd3NlcnMgYXV0b21hdGljYWxseSBwb3B1bGF0ZSBhcmd1bWVudHMgd2l0aCBhIFwicHJvcGVydGllc1wiIG9iamVjdC4gV2UgZGV0ZWN0IGl0IGJ5IGNoZWNraW5nIGZvciBpdHMgZGVmYXVsdCBcIm5hbWVzXCIgcHJvcGVydHkuICovXHJcbiAgICAgICAgdmFyIHN5bnRhY3RpY1N1Z2FyID0gKGFyZ3VtZW50c1swXSAmJiAoKCQuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykgJiYgIWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzLm5hbWVzKSB8fCBUeXBlLmlzU3RyaW5nKGFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzKSkpLFxyXG4gICAgICAgICAgICAvKiBXaGV0aGVyIFZlbG9jaXR5IHdhcyBjYWxsZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uIChhcyBvcHBvc2VkIHRvIG9uIGEgalF1ZXJ5L1plcHRvIG9iamVjdCkuICovXHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSxcclxuICAgICAgICAgICAgLyogV2hlbiBWZWxvY2l0eSBpcyBjYWxsZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uICgkLlZlbG9jaXR5KCkvVmVsb2NpdHkoKSksIGVsZW1lbnRzIGFyZSBleHBsaWNpdGx5XHJcbiAgICAgICAgICAgICAgIHBhc3NlZCBpbiBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyLiBUaHVzLCBhcmd1bWVudCBwb3NpdGlvbmluZyB2YXJpZXMuIFdlIG5vcm1hbGl6ZSB0aGVtIGhlcmUuICovXHJcbiAgICAgICAgICAgIGVsZW1lbnRzV3JhcHBlZCxcclxuICAgICAgICAgICAgYXJndW1lbnRJbmRleDtcclxuXHJcbiAgICAgICAgdmFyIGVsZW1lbnRzLFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzTWFwLFxyXG4gICAgICAgICAgICBvcHRpb25zO1xyXG5cclxuICAgICAgICAvKiBEZXRlY3QgalF1ZXJ5L1plcHRvIGVsZW1lbnRzIGJlaW5nIGFuaW1hdGVkIHZpYSB0aGUgJC5mbiBtZXRob2QuICovXHJcbiAgICAgICAgaWYgKFR5cGUuaXNXcmFwcGVkKHRoaXMpKSB7XHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgYXJndW1lbnRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gdGhpcztcclxuICAgICAgICAgICAgZWxlbWVudHNXcmFwcGVkID0gdGhpcztcclxuICAgICAgICAvKiBPdGhlcndpc2UsIHJhdyBlbGVtZW50cyBhcmUgYmVpbmcgYW5pbWF0ZWQgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uLiAqL1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlzVXRpbGl0eSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBhcmd1bWVudEluZGV4ID0gMTtcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBzeW50YWN0aWNTdWdhciA/IGFyZ3VtZW50c1swXS5lbGVtZW50cyA6IGFyZ3VtZW50c1swXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzID0gc2FuaXRpemVFbGVtZW50cyhlbGVtZW50cyk7XHJcblxyXG4gICAgICAgIGlmICghZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN5bnRhY3RpY1N1Z2FyKSB7XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSBhcmd1bWVudHNbMF0ucHJvcGVydGllcztcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1swXS5vcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSBhcmd1bWVudHNbYXJndW1lbnRJbmRleF07XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbYXJndW1lbnRJbmRleCArIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogVGhlIGxlbmd0aCBvZiB0aGUgZWxlbWVudCBzZXQgKGluIHRoZSBmb3JtIG9mIGEgbm9kZUxpc3Qgb3IgYW4gYXJyYXkgb2YgZWxlbWVudHMpIGlzIGRlZmF1bHRlZCB0byAxIGluIGNhc2UgYVxyXG4gICAgICAgICAgIHNpbmdsZSByYXcgRE9NIGVsZW1lbnQgaXMgcGFzc2VkIGluICh3aGljaCBkb2Vzbid0IGNvbnRhaW4gYSBsZW5ndGggcHJvcGVydHkpLiAqL1xyXG4gICAgICAgIHZhciBlbGVtZW50c0xlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgZWxlbWVudHNJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQXJndW1lbnQgT3ZlcmxvYWRpbmdcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFN1cHBvcnQgaXMgaW5jbHVkZWQgZm9yIGpRdWVyeSdzIGFyZ3VtZW50IG92ZXJsb2FkaW5nOiAkLmFuaW1hdGUocHJvcGVydHlNYXAgWywgZHVyYXRpb25dIFssIGVhc2luZ10gWywgY29tcGxldGVdKS5cclxuICAgICAgICAgICBPdmVybG9hZGluZyBpcyBkZXRlY3RlZCBieSBjaGVja2luZyBmb3IgdGhlIGFic2VuY2Ugb2YgYW4gb2JqZWN0IGJlaW5nIHBhc3NlZCBpbnRvIG9wdGlvbnMuICovXHJcbiAgICAgICAgLyogTm90ZTogVGhlIHN0b3AgYWN0aW9uIGRvZXMgbm90IGFjY2VwdCBhbmltYXRpb24gb3B0aW9ucywgYW5kIGlzIHRoZXJlZm9yZSBleGNsdWRlZCBmcm9tIHRoaXMgY2hlY2suICovXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXNNYXAgIT09IFwic3RvcFwiICYmICEkLmlzUGxhaW5PYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgLyogVGhlIHV0aWxpdHkgZnVuY3Rpb24gc2hpZnRzIGFsbCBhcmd1bWVudHMgb25lIHBvc2l0aW9uIHRvIHRoZSByaWdodCwgc28gd2UgYWRqdXN0IGZvciB0aGF0IG9mZnNldC4gKi9cclxuICAgICAgICAgICAgdmFyIHN0YXJ0aW5nQXJndW1lbnRQb3NpdGlvbiA9IGFyZ3VtZW50SW5kZXggKyAxO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIGFsbCBvcHRpb25zIGFyZ3VtZW50cyAqL1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRpbmdBcmd1bWVudFBvc2l0aW9uOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBUcmVhdCBhIG51bWJlciBhcyBhIGR1cmF0aW9uLiBQYXJzZSBpdCBvdXQuICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBUaGUgZm9sbG93aW5nIFJlZ0V4IHdpbGwgcmV0dXJuIHRydWUgaWYgcGFzc2VkIGFuIGFycmF5IHdpdGggYSBudW1iZXIgYXMgaXRzIGZpcnN0IGl0ZW0uXHJcbiAgICAgICAgICAgICAgICAgICBUaHVzLCBhcnJheXMgYXJlIHNraXBwZWQgZnJvbSB0aGlzIGNoZWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFUeXBlLmlzQXJyYXkoYXJndW1lbnRzW2ldKSAmJiAoL14oZmFzdHxub3JtYWx8c2xvdykkL2kudGVzdChhcmd1bWVudHNbaV0pIHx8IC9eXFxkLy50ZXN0KGFyZ3VtZW50c1tpXSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIC8qIFRyZWF0IHN0cmluZ3MgYW5kIGFycmF5cyBhcyBlYXNpbmdzLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChUeXBlLmlzU3RyaW5nKGFyZ3VtZW50c1tpXSkgfHwgVHlwZS5pc0FycmF5KGFyZ3VtZW50c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVhc2luZyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIC8qIFRyZWF0IGEgZnVuY3Rpb24gYXMgYSBjb21wbGV0ZSBjYWxsYmFjay4gKi9cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoVHlwZS5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBsZXRlID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIFByb21pc2VzXHJcbiAgICAgICAgKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICB2YXIgcHJvbWlzZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZWplY3RlcjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiBJZiB0aGlzIGNhbGwgd2FzIG1hZGUgdmlhIHRoZSB1dGlsaXR5IGZ1bmN0aW9uICh3aGljaCBpcyB0aGUgZGVmYXVsdCBtZXRob2Qgb2YgaW52b2NhdGlvbiB3aGVuIGpRdWVyeS9aZXB0byBhcmUgbm90IGJlaW5nIHVzZWQpLCBhbmQgaWZcclxuICAgICAgICAgICBwcm9taXNlIHN1cHBvcnQgd2FzIGRldGVjdGVkLCBjcmVhdGUgYSBwcm9taXNlIG9iamVjdCBmb3IgdGhpcyBjYWxsIGFuZCBzdG9yZSByZWZlcmVuY2VzIHRvIGl0cyByZXNvbHZlciBhbmQgcmVqZWN0ZXIgbWV0aG9kcy4gVGhlIHJlc29sdmVcclxuICAgICAgICAgICBtZXRob2QgaXMgdXNlZCB3aGVuIGEgY2FsbCBjb21wbGV0ZXMgbmF0dXJhbGx5IG9yIGlzIHByZW1hdHVyZWx5IHN0b3BwZWQgYnkgdGhlIHVzZXIuIEluIGJvdGggY2FzZXMsIGNvbXBsZXRlQ2FsbCgpIGhhbmRsZXMgdGhlIGFzc29jaWF0ZWRcclxuICAgICAgICAgICBjYWxsIGNsZWFudXAgYW5kIHByb21pc2UgcmVzb2x2aW5nIGxvZ2ljLiBUaGUgcmVqZWN0IG1ldGhvZCBpcyB1c2VkIHdoZW4gYW4gaW52YWxpZCBzZXQgb2YgYXJndW1lbnRzIGlzIHBhc3NlZCBpbnRvIGEgVmVsb2NpdHkgY2FsbC4gKi9cclxuICAgICAgICAvKiBOb3RlOiBWZWxvY2l0eSBlbXBsb3lzIGEgY2FsbC1iYXNlZCBxdWV1ZWluZyBhcmNoaXRlY3R1cmUsIHdoaWNoIG1lYW5zIHRoYXQgc3RvcHBpbmcgYW4gYW5pbWF0aW5nIGVsZW1lbnQgYWN0dWFsbHkgc3RvcHMgdGhlIGZ1bGwgY2FsbCB0aGF0XHJcbiAgICAgICAgICAgdHJpZ2dlcmVkIGl0IC0tIG5vdCB0aGF0IG9uZSBlbGVtZW50IGV4Y2x1c2l2ZWx5LiBTaW1pbGFybHksIHRoZXJlIGlzIG9uZSBwcm9taXNlIHBlciBjYWxsLCBhbmQgYWxsIGVsZW1lbnRzIHRhcmdldGVkIGJ5IGEgVmVsb2NpdHkgY2FsbCBhcmVcclxuICAgICAgICAgICBncm91cGVkIHRvZ2V0aGVyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVzb2x2aW5nIGFuZCByZWplY3RpbmcgYSBwcm9taXNlLiAqL1xyXG4gICAgICAgIGlmIChpc1V0aWxpdHkgJiYgVmVsb2NpdHkuUHJvbWlzZSkge1xyXG4gICAgICAgICAgICBwcm9taXNlRGF0YS5wcm9taXNlID0gbmV3IFZlbG9jaXR5LlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVzb2x2ZXIgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVqZWN0ZXIgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEFjdGlvbiBEZXRlY3Rpb25cclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFZlbG9jaXR5J3MgYmVoYXZpb3IgaXMgY2F0ZWdvcml6ZWQgaW50byBcImFjdGlvbnNcIjogRWxlbWVudHMgY2FuIGVpdGhlciBiZSBzcGVjaWFsbHkgc2Nyb2xsZWQgaW50byB2aWV3LFxyXG4gICAgICAgICAgIG9yIHRoZXkgY2FuIGJlIHN0YXJ0ZWQsIHN0b3BwZWQsIG9yIHJldmVyc2VkLiBJZiBhIGxpdGVyYWwgb3IgcmVmZXJlbmNlZCBwcm9wZXJ0aWVzIG1hcCBpcyBwYXNzZWQgaW4gYXMgVmVsb2NpdHknc1xyXG4gICAgICAgICAgIGZpcnN0IGFyZ3VtZW50LCB0aGUgYXNzb2NpYXRlZCBhY3Rpb24gaXMgXCJzdGFydFwiLiBBbHRlcm5hdGl2ZWx5LCBcInNjcm9sbFwiLCBcInJldmVyc2VcIiwgb3IgXCJzdG9wXCIgY2FuIGJlIHBhc3NlZCBpbiBpbnN0ZWFkIG9mIGEgcHJvcGVydGllcyBtYXAuICovXHJcbiAgICAgICAgdmFyIGFjdGlvbjtcclxuXHJcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0aWVzTWFwKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwic2Nyb2xsXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXZlcnNlXCI6XHJcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSBcInJldmVyc2VcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcInN0b3BcIjpcclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uOiBTdG9wXHJcbiAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENsZWFyIHRoZSBjdXJyZW50bHktYWN0aXZlIGRlbGF5IG9uIGVhY2ggdGFyZ2V0ZWQgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpICYmIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTdG9wIHRoZSB0aW1lciBmcm9tIHRyaWdnZXJpbmcgaXRzIGNhY2hlZCBuZXh0KCkgZnVuY3Rpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChEYXRhKGVsZW1lbnQpLmRlbGF5VGltZXIuc2V0VGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBNYW51YWxseSBjYWxsIHRoZSBuZXh0KCkgZnVuY3Rpb24gc28gdGhhdCB0aGUgc3Vic2VxdWVudCBxdWV1ZSBpdGVtcyBjYW4gcHJvZ3Jlc3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLmRlbGF5VGltZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5kZWxheVRpbWVyLm5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbHNUb1N0b3AgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBXaGVuIHRoZSBzdG9wIGFjdGlvbiBpcyB0cmlnZ2VyZWQsIHRoZSBlbGVtZW50cycgY3VycmVudGx5IGFjdGl2ZSBjYWxsIGlzIGltbWVkaWF0ZWx5IHN0b3BwZWQuIFRoZSBhY3RpdmUgY2FsbCBtaWdodCBoYXZlXHJcbiAgICAgICAgICAgICAgICAgICBiZWVuIGFwcGxpZWQgdG8gbXVsdGlwbGUgZWxlbWVudHMsIGluIHdoaWNoIGNhc2UgYWxsIG9mIHRoZSBjYWxsJ3MgZWxlbWVudHMgd2lsbCBiZSBzdWJqZWN0ZWQgdG8gc3RvcHBpbmcuIFdoZW4gYW4gZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgaXMgc3RvcHBlZCwgdGhlIG5leHQgaXRlbSBpbiBpdHMgYW5pbWF0aW9uIHF1ZXVlIGlzIGltbWVkaWF0ZWx5IHRyaWdnZXJlZC4gKi9cclxuICAgICAgICAgICAgICAgIC8qIEFuIGFkZGl0aW9uYWwgYXJndW1lbnQgbWF5IGJlIHBhc3NlZCBpbiB0byBjbGVhciBhbiBlbGVtZW50J3MgcmVtYWluaW5nIHF1ZXVlZCBjYWxscy4gRWl0aGVyIHRydWUgKHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBcImZ4XCIgcXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICBvciBhIGN1c3RvbSBxdWV1ZSBzdHJpbmcgY2FuIGJlIHBhc3NlZCBpbi4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IFRoZSBzdG9wIGNvbW1hbmQgcnVucyBwcmlvciB0byBRdWV1ZWluZyBzaW5jZSBpdHMgYmVoYXZpb3IgaXMgaW50ZW5kZWQgdG8gdGFrZSBlZmZlY3QgKmltbWVkaWF0ZWx5KixcclxuICAgICAgICAgICAgICAgICAgIHJlZ2FyZGxlc3Mgb2YgdGhlIGVsZW1lbnQncyBjdXJyZW50IHF1ZXVlIHN0YXRlLiAqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCBldmVyeSBhY3RpdmUgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICQuZWFjaChWZWxvY2l0eS5TdGF0ZS5jYWxscywgZnVuY3Rpb24oaSwgYWN0aXZlQ2FsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEluYWN0aXZlIGNhbGxzIGFyZSBzZXQgdG8gZmFsc2UgYnkgdGhlIGxvZ2ljIGluc2lkZSBjb21wbGV0ZUNhbGwoKS4gU2tpcCB0aGVtLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVDYWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgYWN0aXZlIGNhbGwncyB0YXJnZXRlZCBlbGVtZW50cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGFjdGl2ZUNhbGxbMV0sIGZ1bmN0aW9uKGssIGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWV1ZU5hbWUgPSBUeXBlLmlzU3RyaW5nKG9wdGlvbnMpID8gb3B0aW9ucyA6IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBhY3RpdmVDYWxsWzJdLnF1ZXVlICE9PSBxdWV1ZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggdGhlIGNhbGxzIHRhcmdldGVkIGJ5IHRoZSBzdG9wIGNvbW1hbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGwsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBDaGVjayB0aGF0IHRoaXMgY2FsbCB3YXMgYXBwbGllZCB0byB0aGUgdGFyZ2V0IGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogT3B0aW9uYWxseSBjbGVhciB0aGUgcmVtYWluaW5nIHF1ZXVlZCBjYWxscy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSXRlcmF0ZSB0aHJvdWdoIHRoZSBpdGVtcyBpbiB0aGUgZWxlbWVudCdzIHF1ZXVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKCQucXVldWUoZWxlbWVudCwgcXVldWVOYW1lKSwgZnVuY3Rpb24oXywgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBxdWV1ZSBhcnJheSBjYW4gY29udGFpbiBhbiBcImlucHJvZ3Jlc3NcIiBzdHJpbmcsIHdoaWNoIHdlIHNraXAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNGdW5jdGlvbihpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXNzIHRoZSBpdGVtJ3MgY2FsbGJhY2sgYSBmbGFnIGluZGljYXRpbmcgdGhhdCB3ZSB3YW50IHRvIGFib3J0IGZyb20gdGhlIHF1ZXVlIGNhbGwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTcGVjaWZpY2FsbHksIHRoZSBxdWV1ZSB3aWxsIHJlc29sdmUgdGhlIGNhbGwncyBhc3NvY2lhdGVkIHByb21pc2UgdGhlbiBhYm9ydC4pICAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtKG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIENsZWFyaW5nIHRoZSAkLnF1ZXVlKCkgYXJyYXkgaXMgYWNoaWV2ZWQgYnkgcmVzZXR0aW5nIGl0IHRvIFtdLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5xdWV1ZShlbGVtZW50LCBxdWV1ZU5hbWUsIFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgJiYgcXVldWVOYW1lID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSBcInJldmVyc2VcIiB1c2VzIGNhY2hlZCBzdGFydCB2YWx1ZXMgKHRoZSBwcmV2aW91cyBjYWxsJ3MgZW5kVmFsdWVzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZXNlIHZhbHVlcyBtdXN0IGJlIGNoYW5nZWQgdG8gcmVmbGVjdCB0aGUgZmluYWwgdmFsdWUgdGhhdCB0aGUgZWxlbWVudHMgd2VyZSBhY3R1YWxseSB0d2VlbmVkIHRvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKERhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyLCBmdW5jdGlvbihtLCBhY3RpdmVUd2Vlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVR3ZWVuLmVuZFZhbHVlID0gYWN0aXZlVHdlZW4uY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxzVG9TdG9wLnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFByZW1hdHVyZWx5IGNhbGwgY29tcGxldGVDYWxsKCkgb24gZWFjaCBtYXRjaGVkIGFjdGl2ZSBjYWxsLCBwYXNzaW5nIGFuIGFkZGl0aW9uYWwgZmxhZyB0byBpbmRpY2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgY29tcGxldGUgY2FsbGJhY2sgYW5kIGRpc3BsYXk6bm9uZSBzZXR0aW5nIHNob3VsZCBiZSBza2lwcGVkIHNpbmNlIHdlJ3JlIGNvbXBsZXRpbmcgcHJlbWF0dXJlbHkuICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2FsbHNUb1N0b3AsIGZ1bmN0aW9uKGksIGopIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUNhbGwoaiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvbWlzZURhdGEucHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEltbWVkaWF0ZWx5IHJlc29sdmUgdGhlIHByb21pc2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc3RvcCBjYWxsIHNpbmNlIHN0b3AgcnVucyBzeW5jaHJvbm91c2x5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VEYXRhLnJlc29sdmVyKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB3ZSdyZSBzdG9wcGluZywgYW5kIG5vdCBwcm9jZWVkaW5nIHdpdGggcXVldWVpbmcsIGV4aXQgb3V0IG9mIFZlbG9jaXR5LiAqL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldENoYWluKCk7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLyogVHJlYXQgYSBub24tZW1wdHkgcGxhaW4gb2JqZWN0IGFzIGEgbGl0ZXJhbCBwcm9wZXJ0aWVzIG1hcC4gKi9cclxuICAgICAgICAgICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QocHJvcGVydGllc01hcCkgJiYgIVR5cGUuaXNFbXB0eU9iamVjdChwcm9wZXJ0aWVzTWFwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IFwic3RhcnRcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIFJlZGlyZWN0c1xyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBDaGVjayBpZiBhIHN0cmluZyBtYXRjaGVzIGEgcmVnaXN0ZXJlZCByZWRpcmVjdCAoc2VlIFJlZGlyZWN0cyBhYm92ZSkuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNTdHJpbmcocHJvcGVydGllc01hcCkgJiYgVmVsb2NpdHkuUmVkaXJlY3RzW3Byb3BlcnRpZXNNYXBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uT3JpZ2luYWwgPSBvcHRzLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheU9yaWdpbmFsID0gb3B0cy5kZWxheSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgYmFja3dhcmRzIG9wdGlvbiB3YXMgcGFzc2VkIGluLCByZXZlcnNlIHRoZSBlbGVtZW50IHNldCBzbyB0aGF0IGVsZW1lbnRzIGFuaW1hdGUgZnJvbSB0aGUgbGFzdCB0byB0aGUgZmlyc3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuYmFja3dhcmRzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJC5leHRlbmQodHJ1ZSwgW10sIGVsZW1lbnRzKS5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJbmRpdmlkdWFsbHkgdHJpZ2dlciB0aGUgcmVkaXJlY3QgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgc2V0IHRvIHByZXZlbnQgdXNlcnMgZnJvbSBoYXZpbmcgdG8gaGFuZGxlIGl0ZXJhdGlvbiBsb2dpYyBpbiB0aGVpciByZWRpcmVjdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnRJbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgc3RhZ2dlciBvcHRpb24gd2FzIHBhc3NlZCBpbiwgc3VjY2Vzc2l2ZWx5IGRlbGF5IGVhY2ggZWxlbWVudCBieSB0aGUgc3RhZ2dlciB2YWx1ZSAoaW4gbXMpLiBSZXRhaW4gdGhlIG9yaWdpbmFsIGRlbGF5IHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChvcHRzLnN0YWdnZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ID0gZGVsYXlPcmlnaW5hbCArIChwYXJzZUZsb2F0KG9wdHMuc3RhZ2dlcikgKiBlbGVtZW50SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFR5cGUuaXNGdW5jdGlvbihvcHRzLnN0YWdnZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ID0gZGVsYXlPcmlnaW5hbCArIG9wdHMuc3RhZ2dlci5jYWxsKGVsZW1lbnQsIGVsZW1lbnRJbmRleCwgZWxlbWVudHNMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgZHJhZyBvcHRpb24gd2FzIHBhc3NlZCBpbiwgc3VjY2Vzc2l2ZWx5IGluY3JlYXNlL2RlY3JlYXNlIChkZXBlbmRpbmcgb24gdGhlIHByZXNlbnNlIG9mIG9wdHMuYmFja3dhcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZHVyYXRpb24gb2YgZWFjaCBlbGVtZW50J3MgYW5pbWF0aW9uLCB1c2luZyBmbG9vcnMgdG8gcHJldmVudCBwcm9kdWNpbmcgdmVyeSBzaG9ydCBkdXJhdGlvbnMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlZmF1bHQgdGhlIGR1cmF0aW9uIG9mIFVJIHBhY2sgZWZmZWN0cyAoY2FsbG91dHMgYW5kIHRyYW5zaXRpb25zKSB0byAxMDAwbXMgaW5zdGVhZCBvZiB0aGUgdXN1YWwgZGVmYXVsdCBkdXJhdGlvbiBvZiA0MDBtcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBwYXJzZUZsb2F0KGR1cmF0aW9uT3JpZ2luYWwpIHx8ICgvXihjYWxsb3V0fHRyYW5zaXRpb24pLy50ZXN0KHByb3BlcnRpZXNNYXApID8gMTAwMCA6IERVUkFUSU9OX0RFRkFVTFQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBlYWNoIGVsZW1lbnQsIHRha2UgdGhlIGdyZWF0ZXIgZHVyYXRpb24gb2Y6IEEpIGFuaW1hdGlvbiBjb21wbGV0aW9uIHBlcmNlbnRhZ2UgcmVsYXRpdmUgdG8gdGhlIG9yaWdpbmFsIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQikgNzUlIG9mIHRoZSBvcmlnaW5hbCBkdXJhdGlvbiwgb3IgQykgYSAyMDBtcyBmYWxsYmFjayAoaW4gY2FzZSBkdXJhdGlvbiBpcyBhbHJlYWR5IHNldCB0byBhIGxvdyB2YWx1ZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZW5kIHJlc3VsdCBpcyBhIGJhc2VsaW5lIG9mIDc1JSBvZiB0aGUgcmVkaXJlY3QncyBkdXJhdGlvbiB0aGF0IGluY3JlYXNlcy9kZWNyZWFzZXMgYXMgdGhlIGVuZCBvZiB0aGUgZWxlbWVudCBzZXQgaXMgYXBwcm9hY2hlZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBNYXRoLm1heChvcHRzLmR1cmF0aW9uICogKG9wdHMuYmFja3dhcmRzID8gMSAtIGVsZW1lbnRJbmRleC9lbGVtZW50c0xlbmd0aCA6IChlbGVtZW50SW5kZXggKyAxKSAvIGVsZW1lbnRzTGVuZ3RoKSwgb3B0cy5kdXJhdGlvbiAqIDAuNzUsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhc3MgaW4gdGhlIGNhbGwncyBvcHRzIG9iamVjdCBzbyB0aGF0IHRoZSByZWRpcmVjdCBjYW4gb3B0aW9uYWxseSBleHRlbmQgaXQuIEl0IGRlZmF1bHRzIHRvIGFuIGVtcHR5IG9iamVjdCBpbnN0ZWFkIG9mIG51bGwgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkdWNlIHRoZSBvcHRzIGNoZWNraW5nIGxvZ2ljIHJlcXVpcmVkIGluc2lkZSB0aGUgcmVkaXJlY3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlJlZGlyZWN0c1twcm9wZXJ0aWVzTWFwXS5jYWxsKGVsZW1lbnQsIGVsZW1lbnQsIG9wdHMgfHwge30sIGVsZW1lbnRJbmRleCwgZWxlbWVudHNMZW5ndGgsIGVsZW1lbnRzLCBwcm9taXNlRGF0YS5wcm9taXNlID8gcHJvbWlzZURhdGEgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGUgYW5pbWF0aW9uIGxvZ2ljIHJlc2lkZXMgd2l0aGluIHRoZSByZWRpcmVjdCdzIG93biBjb2RlLCBhYm9ydCB0aGUgcmVtYWluZGVyIG9mIHRoaXMgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAoVGhlIHBlcmZvcm1hbmNlIG92ZXJoZWFkIHVwIHRvIHRoaXMgcG9pbnQgaXMgdmlydHVhbGx5IG5vbi1leGlzdGFudC4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVGhlIGpRdWVyeSBjYWxsIGNoYWluIGlzIGtlcHQgaW50YWN0IGJ5IHJldHVybmluZyB0aGUgY29tcGxldGUgZWxlbWVudCBzZXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENoYWluKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhYm9ydEVycm9yID0gXCJWZWxvY2l0eTogRmlyc3QgYXJndW1lbnQgKFwiICsgcHJvcGVydGllc01hcCArIFwiKSB3YXMgbm90IGEgcHJvcGVydHkgbWFwLCBhIGtub3duIGFjdGlvbiwgb3IgYSByZWdpc3RlcmVkIHJlZGlyZWN0LiBBYm9ydGluZy5cIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2VEYXRhLnByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVqZWN0ZXIobmV3IEVycm9yKGFib3J0RXJyb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhYm9ydEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDaGFpbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgIENhbGwtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgLyogQSBjb250YWluZXIgZm9yIENTUyB1bml0IGNvbnZlcnNpb24gcmF0aW9zIChlLmcuICUsIHJlbSwgYW5kIGVtID09PiBweCkgdGhhdCBpcyB1c2VkIHRvIGNhY2hlIHJhdGlvcyBhY3Jvc3MgYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgICAgYmVpbmcgYW5pbWF0ZWQgaW4gYSBzaW5nbGUgVmVsb2NpdHkgY2FsbC4gQ2FsY3VsYXRpbmcgdW5pdCByYXRpb3MgbmVjZXNzaXRhdGVzIERPTSBxdWVyeWluZyBhbmQgdXBkYXRpbmcsIGFuZCBpcyB0aGVyZWZvcmVcclxuICAgICAgICAgICBhdm9pZGVkICh2aWEgY2FjaGluZykgd2hlcmV2ZXIgcG9zc2libGUuIFRoaXMgY29udGFpbmVyIGlzIGNhbGwtd2lkZSBpbnN0ZWFkIG9mIHBhZ2Utd2lkZSB0byBhdm9pZCB0aGUgcmlzayBvZiB1c2luZyBzdGFsZVxyXG4gICAgICAgICAgIGNvbnZlcnNpb24gbWV0cmljcyBhY3Jvc3MgVmVsb2NpdHkgYW5pbWF0aW9ucyB0aGF0IGFyZSBub3QgaW1tZWRpYXRlbHkgY29uc2VjdXRpdmVseSBjaGFpbmVkLiAqL1xyXG4gICAgICAgIHZhciBjYWxsVW5pdENvbnZlcnNpb25EYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbGFzdFBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RQb3NpdGlvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RGb250U2l6ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RQZXJjZW50VG9QeFdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdFBlcmNlbnRUb1B4SGVpZ2h0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGFzdEVtVG9QeDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlbVRvUHg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2d1RvUHg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2aFRvUHg6IG51bGxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyogQSBjb250YWluZXIgZm9yIGFsbCB0aGUgZW5zdWluZyB0d2VlbiBkYXRhIGFuZCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyBjYWxsLiBUaGlzIGNvbnRhaW5lciBnZXRzIHB1c2hlZCB0byB0aGUgcGFnZS13aWRlXHJcbiAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgYXJyYXkgdGhhdCBpcyBwcm9jZXNzZWQgZHVyaW5nIGFuaW1hdGlvbiB0aWNraW5nLiAqL1xyXG4gICAgICAgIHZhciBjYWxsID0gW107XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBFbGVtZW50IFByb2Nlc3NpbmdcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIEVsZW1lbnQgcHJvY2Vzc2luZyBjb25zaXN0cyBvZiB0aHJlZSBwYXJ0cyAtLSBkYXRhIHByb2Nlc3NpbmcgdGhhdCBjYW5ub3QgZ28gc3RhbGUgYW5kIGRhdGEgcHJvY2Vzc2luZyB0aGF0ICpjYW4qIGdvIHN0YWxlIChpLmUuIHRoaXJkLXBhcnR5IHN0eWxlIG1vZGlmaWNhdGlvbnMpOlxyXG4gICAgICAgICAgIDEpIFByZS1RdWV1ZWluZzogRWxlbWVudC13aWRlIHZhcmlhYmxlcywgaW5jbHVkaW5nIHRoZSBlbGVtZW50J3MgZGF0YSBzdG9yYWdlLCBhcmUgaW5zdGFudGlhdGVkLiBDYWxsIG9wdGlvbnMgYXJlIHByZXBhcmVkLiBJZiB0cmlnZ2VyZWQsIHRoZSBTdG9wIGFjdGlvbiBpcyBleGVjdXRlZC5cclxuICAgICAgICAgICAyKSBRdWV1ZWluZzogVGhlIGxvZ2ljIHRoYXQgcnVucyBvbmNlIHRoaXMgY2FsbCBoYXMgcmVhY2hlZCBpdHMgcG9pbnQgb2YgZXhlY3V0aW9uIGluIHRoZSBlbGVtZW50J3MgJC5xdWV1ZSgpIHN0YWNrLiBNb3N0IGxvZ2ljIGlzIHBsYWNlZCBoZXJlIHRvIGF2b2lkIHJpc2tpbmcgaXQgYmVjb21pbmcgc3RhbGUuXHJcbiAgICAgICAgICAgMykgUHVzaGluZzogQ29uc29saWRhdGlvbiBvZiB0aGUgdHdlZW4gZGF0YSBmb2xsb3dlZCBieSBpdHMgcHVzaCBvbnRvIHRoZSBnbG9iYWwgaW4tcHJvZ3Jlc3MgY2FsbHMgY29udGFpbmVyLlxyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50ICgpIHtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIFBhcnQgSTogUHJlLVF1ZXVlaW5nXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIEVsZW1lbnQtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgLyogVGhlIHJ1bnRpbWUgb3B0cyBvYmplY3QgaXMgdGhlIGV4dGVuc2lvbiBvZiB0aGUgY3VycmVudCBjYWxsJ3Mgb3B0aW9ucyBhbmQgVmVsb2NpdHkncyBwYWdlLXdpZGUgb3B0aW9uIGRlZmF1bHRzLiAqL1xyXG4gICAgICAgICAgICAgICAgb3B0cyA9ICQuZXh0ZW5kKHt9LCBWZWxvY2l0eS5kZWZhdWx0cywgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgICAvKiBBIGNvbnRhaW5lciBmb3IgdGhlIHByb2Nlc3NlZCBkYXRhIGFzc29jaWF0ZWQgd2l0aCBlYWNoIHByb3BlcnR5IGluIHRoZSBwcm9wZXJ0eU1hcC5cclxuICAgICAgICAgICAgICAgICAgIChFYWNoIHByb3BlcnR5IGluIHRoZSBtYXAgcHJvZHVjZXMgaXRzIG93biBcInR3ZWVuXCIuKSAqL1xyXG4gICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyID0ge30sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhO1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBFbGVtZW50IEluaXRcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgaWYgKERhdGEoZWxlbWVudCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgVmVsb2NpdHkuaW5pdChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IERlbGF5XHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFNpbmNlIHF1ZXVlOmZhbHNlIGRvZXNuJ3QgcmVzcGVjdCB0aGUgaXRlbSdzIGV4aXN0aW5nIHF1ZXVlLCB3ZSBhdm9pZCBpbmplY3RpbmcgaXRzIGRlbGF5IGhlcmUgKGl0J3Mgc2V0IGxhdGVyIG9uKS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogVmVsb2NpdHkgcm9sbHMgaXRzIG93biBkZWxheSBmdW5jdGlvbiBzaW5jZSBqUXVlcnkgZG9lc24ndCBoYXZlIGEgdXRpbGl0eSBhbGlhcyBmb3IgJC5mbi5kZWxheSgpXHJcbiAgICAgICAgICAgICAgIChhbmQgdGh1cyByZXF1aXJlcyBqUXVlcnkgZWxlbWVudCBjcmVhdGlvbiwgd2hpY2ggd2UgYXZvaWQgc2luY2UgaXRzIG92ZXJoZWFkIGluY2x1ZGVzIERPTSBxdWVyeWluZykuICovXHJcbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KG9wdHMuZGVsYXkpICYmIG9wdHMucXVldWUgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAkLnF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUsIGZ1bmN0aW9uKG5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGlzIGlzIGEgZmxhZyB1c2VkIHRvIGluZGljYXRlIHRvIHRoZSB1cGNvbWluZyBjb21wbGV0ZUNhbGwoKSBmdW5jdGlvbiB0aGF0IHRoaXMgcXVldWUgZW50cnkgd2FzIGluaXRpYXRlZCBieSBWZWxvY2l0eS4gU2VlIGNvbXBsZXRlQ2FsbCgpIGZvciBmdXJ0aGVyIGRldGFpbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBlbnN1aW5nIHF1ZXVlIGl0ZW0gKHdoaWNoIGlzIGFzc2lnbmVkIHRvIHRoZSBcIm5leHRcIiBhcmd1bWVudCB0aGF0ICQucXVldWUoKSBhdXRvbWF0aWNhbGx5IHBhc3NlcyBpbikgd2lsbCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgYSBzZXRUaW1lb3V0IGRlbGF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgIFRoZSBzZXRUaW1lb3V0IGlzIHN0b3JlZCBzbyB0aGF0IGl0IGNhbiBiZSBzdWJqZWN0ZWQgdG8gY2xlYXJUaW1lb3V0KCkgaWYgdGhpcyBhbmltYXRpb24gaXMgcHJlbWF0dXJlbHkgc3RvcHBlZCB2aWEgVmVsb2NpdHkncyBcInN0b3BcIiBjb21tYW5kLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkuZGVsYXlUaW1lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dDogc2V0VGltZW91dChuZXh0LCBwYXJzZUZsb2F0KG9wdHMuZGVsYXkpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbmV4dFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IER1cmF0aW9uXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFN1cHBvcnQgZm9yIGpRdWVyeSdzIG5hbWVkIGR1cmF0aW9ucy4gKi9cclxuICAgICAgICAgICAgc3dpdGNoIChvcHRzLmR1cmF0aW9uLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZhc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uID0gMjAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJub3JtYWxcIjpcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uID0gRFVSQVRJT05fREVGQVVMVDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2xvd1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSA2MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgdGhlIHBvdGVudGlhbCBcIm1zXCIgc3VmZml4IGFuZCBkZWZhdWx0IHRvIDEgaWYgdGhlIHVzZXIgaXMgYXR0ZW1wdGluZyB0byBzZXQgYSBkdXJhdGlvbiBvZiAwIChpbiBvcmRlciB0byBwcm9kdWNlIGFuIGltbWVkaWF0ZSBzdHlsZSBjaGFuZ2UpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZHVyYXRpb24gPSBwYXJzZUZsb2F0KG9wdHMuZHVyYXRpb24pIHx8IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgR2xvYmFsIE9wdGlvbjogTW9ja1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICBpZiAoVmVsb2NpdHkubW9jayAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8qIEluIG1vY2sgbW9kZSwgYWxsIGFuaW1hdGlvbnMgYXJlIGZvcmNlZCB0byAxbXMgc28gdGhhdCB0aGV5IG9jY3VyIGltbWVkaWF0ZWx5IHVwb24gdGhlIG5leHQgckFGIHRpY2suXHJcbiAgICAgICAgICAgICAgICAgICBBbHRlcm5hdGl2ZWx5LCBhIG11bHRpcGxpZXIgY2FuIGJlIHBhc3NlZCBpbiB0byB0aW1lIHJlbWFwIGFsbCBkZWxheXMgYW5kIGR1cmF0aW9ucy4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5tb2NrID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5kdXJhdGlvbiA9IG9wdHMuZGVsYXkgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmR1cmF0aW9uICo9IHBhcnNlRmxvYXQoVmVsb2NpdHkubW9jaykgfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmRlbGF5ICo9IHBhcnNlRmxvYXQoVmVsb2NpdHkubW9jaykgfHwgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgT3B0aW9uOiBFYXNpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIG9wdHMuZWFzaW5nID0gZ2V0RWFzaW5nKG9wdHMuZWFzaW5nLCBvcHRzLmR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogQ2FsbGJhY2tzXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBDYWxsYmFja3MgbXVzdCBmdW5jdGlvbnMuIE90aGVyd2lzZSwgZGVmYXVsdCB0byBudWxsLiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5iZWdpbiAmJiAhVHlwZS5pc0Z1bmN0aW9uKG9wdHMuYmVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzLmJlZ2luID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9wdHMucHJvZ3Jlc3MgJiYgIVR5cGUuaXNGdW5jdGlvbihvcHRzLnByb2dyZXNzKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmNvbXBsZXRlICYmICFUeXBlLmlzRnVuY3Rpb24ob3B0cy5jb21wbGV0ZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMuY29tcGxldGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogRGlzcGxheSAmIFZpc2liaWxpdHlcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogUmVmZXIgdG8gVmVsb2NpdHkncyBkb2N1bWVudGF0aW9uIChWZWxvY2l0eUpTLm9yZy8jZGlzcGxheUFuZFZpc2liaWxpdHkpIGZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBkaXNwbGF5IGFuZCB2aXNpYmlsaXR5IG9wdGlvbnMnIGJlaGF2aW9yLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXZSBzdHJpY3RseSBjaGVjayBmb3IgdW5kZWZpbmVkIGluc3RlYWQgb2YgZmFsc2luZXNzIGJlY2F1c2UgZGlzcGxheSBhY2NlcHRzIGFuIGVtcHR5IHN0cmluZyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gb3B0cy5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBVc2VycyBjYW4gcGFzcyBpbiBhIHNwZWNpYWwgXCJhdXRvXCIgdmFsdWUgdG8gaW5zdHJ1Y3QgVmVsb2NpdHkgdG8gc2V0IHRoZSBlbGVtZW50IHRvIGl0cyBkZWZhdWx0IGRpc3BsYXkgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ID09PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGlzcGxheSA9IFZlbG9jaXR5LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG9wdHMudmlzaWJpbGl0eSA9IG9wdHMudmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogbW9iaWxlSEFcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gc2V0IHRvIHRydWUsIGFuZCBpZiB0aGlzIGlzIGEgbW9iaWxlIGRldmljZSwgbW9iaWxlSEEgYXV0b21hdGljYWxseSBlbmFibGVzIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiAodmlhIGEgbnVsbCB0cmFuc2Zvcm0gaGFjaylcclxuICAgICAgICAgICAgICAgb24gYW5pbWF0aW5nIGVsZW1lbnRzLiBIQSBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgYXQgdGhlIGNvbXBsZXRpb24gb2YgaXRzIGFuaW1hdGlvbi4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogQW5kcm9pZCBHaW5nZXJicmVhZCBkb2Vzbid0IHN1cHBvcnQgSEEuIElmIGEgbnVsbCB0cmFuc2Zvcm0gaGFjayAobW9iaWxlSEEpIGlzIGluIGZhY3Qgc2V0LCBpdCB3aWxsIHByZXZlbnQgb3RoZXIgdHJhbmZvcm0gc3VicHJvcGVydGllcyBmcm9tIHRha2luZyBlZmZlY3QuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IHRoZSB1c2Ugb2YgbW9iaWxlSEEgaW4gVmVsb2NpdHkncyBkb2N1bWVudGF0aW9uOiBWZWxvY2l0eUpTLm9yZy8jbW9iaWxlSEEuICovXHJcbiAgICAgICAgICAgIG9wdHMubW9iaWxlSEEgPSAob3B0cy5tb2JpbGVIQSAmJiBWZWxvY2l0eS5TdGF0ZS5pc01vYmlsZSAmJiAhVmVsb2NpdHkuU3RhdGUuaXNHaW5nZXJicmVhZCk7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgUGFydCBJSTogUXVldWVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBXaGVuIGEgc2V0IG9mIGVsZW1lbnRzIGlzIHRhcmdldGVkIGJ5IGEgVmVsb2NpdHkgY2FsbCwgdGhlIHNldCBpcyBicm9rZW4gdXAgYW5kIGVhY2ggZWxlbWVudCBoYXMgdGhlIGN1cnJlbnQgVmVsb2NpdHkgY2FsbCBpbmRpdmlkdWFsbHkgcXVldWVkIG9udG8gaXQuXHJcbiAgICAgICAgICAgICAgIEluIHRoaXMgd2F5LCBlYWNoIGVsZW1lbnQncyBleGlzdGluZyBxdWV1ZSBpcyByZXNwZWN0ZWQ7IHNvbWUgZWxlbWVudHMgbWF5IGFscmVhZHkgYmUgYW5pbWF0aW5nIGFuZCBhY2NvcmRpbmdseSBzaG91bGQgbm90IGhhdmUgdGhpcyBjdXJyZW50IFZlbG9jaXR5IGNhbGwgdHJpZ2dlcmVkIGltbWVkaWF0ZWx5LiAqL1xyXG4gICAgICAgICAgICAvKiBJbiBlYWNoIHF1ZXVlLCB0d2VlbiBkYXRhIGlzIHByb2Nlc3NlZCBmb3IgZWFjaCBhbmltYXRpbmcgcHJvcGVydHkgdGhlbiBwdXNoZWQgb250byB0aGUgY2FsbC13aWRlIGNhbGxzIGFycmF5LiBXaGVuIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHNldCBoYXMgaGFkIGl0cyB0d2VlbnMgcHJvY2Vzc2VkLFxyXG4gICAgICAgICAgICAgICB0aGUgY2FsbCBhcnJheSBpcyBwdXNoZWQgdG8gVmVsb2NpdHkuU3RhdGUuY2FsbHMgZm9yIGxpdmUgcHJvY2Vzc2luZyBieSB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHRpY2suICovXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkUXVldWUgKG5leHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgT3B0aW9uOiBCZWdpblxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBUaGUgYmVnaW4gY2FsbGJhY2sgaXMgZmlyZWQgb25jZSBwZXIgY2FsbCAtLSBub3Qgb25jZSBwZXIgZWxlbWVuZXQgLS0gYW5kIGlzIHBhc3NlZCB0aGUgZnVsbCByYXcgRE9NIGVsZW1lbnQgc2V0IGFzIGJvdGggaXRzIGNvbnRleHQgYW5kIGl0cyBmaXJzdCBhcmd1bWVudC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmJlZ2luICYmIGVsZW1lbnRzSW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBXZSB0aHJvdyBjYWxsYmFja3MgaW4gYSBzZXRUaW1lb3V0IHNvIHRoYXQgdGhyb3duIGVycm9ycyBkb24ndCBoYWx0IHRoZSBleGVjdXRpb24gb2YgVmVsb2NpdHkgaXRzZWxmLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuYmVnaW4uY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGVycm9yOyB9LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENvbnN0cnVjdGlvbiAoZm9yIFNjcm9sbClcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IEluIG9yZGVyIHRvIGJlIHN1YmplY3RlZCB0byBjaGFpbmluZyBhbmQgYW5pbWF0aW9uIG9wdGlvbnMsIHNjcm9sbCdzIHR3ZWVuaW5nIGlzIHJvdXRlZCB0aHJvdWdoIFZlbG9jaXR5IGFzIGlmIGl0IHdlcmUgYSBzdGFuZGFyZCBDU1MgcHJvcGVydHkgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gXCJzY3JvbGxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBzY3JvbGwgYWN0aW9uIHVuaXF1ZWx5IHRha2VzIGFuIG9wdGlvbmFsIFwib2Zmc2V0XCIgb3B0aW9uIC0tIHNwZWNpZmllZCBpbiBwaXhlbHMgLS0gdGhhdCBvZmZzZXRzIHRoZSB0YXJnZXRlZCBzY3JvbGwgcG9zaXRpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpcmVjdGlvbiA9ICgvXngkL2kudGVzdChvcHRzLmF4aXMpID8gXCJMZWZ0XCIgOiBcIlRvcFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0ID0gcGFyc2VGbG9hdChvcHRzLm9mZnNldCkgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25DdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnRBbHRlcm5hdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uRW5kO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTY3JvbGwgYWxzbyB1bmlxdWVseSB0YWtlcyBhbiBvcHRpb25hbCBcImNvbnRhaW5lclwiIG9wdGlvbiwgd2hpY2ggaW5kaWNhdGVzIHRoZSBwYXJlbnQgZWxlbWVudCB0aGF0IHNob3VsZCBiZSBzY3JvbGxlZCAtLVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGFzIG9wcG9zZWQgdG8gdGhlIGJyb3dzZXIgd2luZG93IGl0c2VsZi4gVGhpcyBpcyB1c2VmdWwgZm9yIHNjcm9sbGluZyB0b3dhcmQgYW4gZWxlbWVudCB0aGF0J3MgaW5zaWRlIGFuIG92ZXJmbG93aW5nIHBhcmVudCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBFbnN1cmUgdGhhdCBlaXRoZXIgYSBqUXVlcnkgb2JqZWN0IG9yIGEgcmF3IERPTSBlbGVtZW50IHdhcyBwYXNzZWQgaW4uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlLmlzV3JhcHBlZChvcHRzLmNvbnRhaW5lcikgfHwgVHlwZS5pc05vZGUob3B0cy5jb250YWluZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFeHRyYWN0IHRoZSByYXcgRE9NIGVsZW1lbnQgZnJvbSB0aGUgalF1ZXJ5IHdyYXBwZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbnRhaW5lciA9IG9wdHMuY29udGFpbmVyWzBdIHx8IG9wdHMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVW5saWtlIG90aGVyIHByb3BlcnRpZXMgaW4gVmVsb2NpdHksIHRoZSBicm93c2VyJ3Mgc2Nyb2xsIHBvc2l0aW9uIGlzIG5ldmVyIGNhY2hlZCBzaW5jZSBpdCBzbyBmcmVxdWVudGx5IGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkdWUgdG8gdGhlIHVzZXIncyBuYXR1cmFsIGludGVyYWN0aW9uIHdpdGggdGhlIHBhZ2UpLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb25DdXJyZW50ID0gb3B0cy5jb250YWluZXJbXCJzY3JvbGxcIiArIHNjcm9sbERpcmVjdGlvbl07IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICQucG9zaXRpb24oKSB2YWx1ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBjb250YWluZXIncyBjdXJyZW50bHkgdmlld2FibGUgYXJlYSAod2l0aG91dCB0YWtpbmcgaW50byBhY2NvdW50IHRoZSBjb250YWluZXIncyB0cnVlIGRpbWVuc2lvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIHNheSwgZm9yIGV4YW1wbGUsIGlmIHRoZSBjb250YWluZXIgd2FzIG5vdCBvdmVyZmxvd2luZykuIFRodXMsIHRoZSBzY3JvbGwgZW5kIHZhbHVlIGlzIHRoZSBzdW0gb2YgdGhlIGNoaWxkIGVsZW1lbnQncyBwb3NpdGlvbiAqYW5kKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNjcm9sbCBjb250YWluZXIncyBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IGpRdWVyeSBkb2VzIG5vdCBvZmZlciBhIHV0aWxpdHkgYWxpYXMgZm9yICQucG9zaXRpb24oKSwgc28gd2UgaGF2ZSB0byBpbmN1ciBqUXVlcnkgb2JqZWN0IGNvbnZlcnNpb24gaGVyZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgc3luY3MgdXAgd2l0aCBhbiBlbnN1aW5nIGJhdGNoIG9mIEdFVHMsIHNvIGl0IGZvcnR1bmF0ZWx5IGRvZXMgbm90IHRyaWdnZXIgbGF5b3V0IHRocmFzaGluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uRW5kID0gKHNjcm9sbFBvc2l0aW9uQ3VycmVudCArICQoZWxlbWVudCkucG9zaXRpb24oKVtzY3JvbGxEaXJlY3Rpb24udG9Mb3dlckNhc2UoKV0pICsgc2Nyb2xsT2Zmc2V0OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgYSB2YWx1ZSBvdGhlciB0aGFuIGEgalF1ZXJ5IG9iamVjdCBvciBhIHJhdyBET00gZWxlbWVudCB3YXMgcGFzc2VkIGluLCBkZWZhdWx0IHRvIG51bGwgc28gdGhhdCB0aGlzIG9wdGlvbiBpcyBpZ25vcmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5jb250YWluZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIHdpbmRvdyBpdHNlbGYgaXMgYmVpbmcgc2Nyb2xsZWQgLS0gbm90IGEgY29udGFpbmluZyBlbGVtZW50IC0tIHBlcmZvcm0gYSBsaXZlIHNjcm9sbCBwb3NpdGlvbiBsb29rdXAgdXNpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGFwcHJvcHJpYXRlIGNhY2hlZCBwcm9wZXJ0eSBuYW1lcyAod2hpY2ggZGlmZmVyIGJhc2VkIG9uIGJyb3dzZXIgdHlwZSkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uQ3VycmVudCA9IFZlbG9jaXR5LlN0YXRlLnNjcm9sbEFuY2hvcltWZWxvY2l0eS5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIgKyBzY3JvbGxEaXJlY3Rpb25dXTsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFdoZW4gc2Nyb2xsaW5nIHRoZSBicm93c2VyIHdpbmRvdywgY2FjaGUgdGhlIGFsdGVybmF0ZSBheGlzJ3MgY3VycmVudCB2YWx1ZSBzaW5jZSB3aW5kb3cuc2Nyb2xsVG8oKSBkb2Vzbid0IGxldCB1cyBjaGFuZ2Ugb25seSBvbmUgdmFsdWUgYXQgYSB0aW1lLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkN1cnJlbnRBbHRlcm5hdGUgPSBWZWxvY2l0eS5TdGF0ZS5zY3JvbGxBbmNob3JbVmVsb2NpdHkuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiICsgKHNjcm9sbERpcmVjdGlvbiA9PT0gXCJMZWZ0XCIgPyBcIlRvcFwiIDogXCJMZWZ0XCIpXV07IC8qIEdFVCAqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogVW5saWtlICQucG9zaXRpb24oKSwgJC5vZmZzZXQoKSB2YWx1ZXMgYXJlIHJlbGF0aXZlIHRvIHRoZSBicm93c2VyIHdpbmRvdydzIHRydWUgZGltZW5zaW9ucyAtLSBub3QgbWVyZWx5IGl0cyBjdXJyZW50bHkgdmlld2FibGUgYXJlYSAtLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgdGhlcmVmb3JlIGVuZCB2YWx1ZXMgZG8gbm90IG5lZWQgdG8gYmUgY29tcG91bmRlZCBvbnRvIGN1cnJlbnQgdmFsdWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQb3NpdGlvbkVuZCA9ICQoZWxlbWVudCkub2Zmc2V0KClbc2Nyb2xsRGlyZWN0aW9uLnRvTG93ZXJDYXNlKCldICsgc2Nyb2xsT2Zmc2V0OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIHRoZXJlJ3Mgb25seSBvbmUgZm9ybWF0IHRoYXQgc2Nyb2xsJ3MgYXNzb2NpYXRlZCB0d2VlbnNDb250YWluZXIgY2FuIHRha2UsIHdlIGNyZWF0ZSBpdCBtYW51YWxseS4gKi9cclxuICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZTogc2Nyb2xsUG9zaXRpb25DdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiBzY3JvbGxQb3NpdGlvbkN1cnJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZTogc2Nyb2xsUG9zaXRpb25FbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0VHlwZTogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogb3B0cy5lYXNpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBvcHRzLmNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNjcm9sbERpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdGVWYWx1ZTogc2Nyb2xsUG9zaXRpb25DdXJyZW50QWx0ZXJuYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoVmVsb2NpdHkuZGVidWcpIGNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChzY3JvbGwpOiBcIiwgdHdlZW5zQ29udGFpbmVyLnNjcm9sbCwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgVHdlZW4gRGF0YSBDb25zdHJ1Y3Rpb24gKGZvciBSZXZlcnNlKVxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFJldmVyc2UgYWN0cyBsaWtlIGEgXCJzdGFydFwiIGFjdGlvbiBpbiB0aGF0IGEgcHJvcGVydHkgbWFwIGlzIGFuaW1hdGVkIHRvd2FyZC4gVGhlIG9ubHkgZGlmZmVyZW5jZSBpc1xyXG4gICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgcHJvcGVydHkgbWFwIHVzZWQgZm9yIHJldmVyc2UgaXMgdGhlIGludmVyc2Ugb2YgdGhlIG1hcCB1c2VkIGluIHRoZSBwcmV2aW91cyBjYWxsLiBUaHVzLCB3ZSBtYW5pcHVsYXRlXHJcbiAgICAgICAgICAgICAgICAgICB0aGUgcHJldmlvdXMgY2FsbCB0byBjb25zdHJ1Y3Qgb3VyIG5ldyBtYXA6IHVzZSB0aGUgcHJldmlvdXMgbWFwJ3MgZW5kIHZhbHVlcyBhcyBvdXIgbmV3IG1hcCdzIHN0YXJ0IHZhbHVlcy4gQ29weSBvdmVyIGFsbCBvdGhlciBkYXRhLiAqL1xyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogUmV2ZXJzZSBjYW4gYmUgZGlyZWN0bHkgY2FsbGVkIHZpYSB0aGUgXCJyZXZlcnNlXCIgcGFyYW1ldGVyLCBvciBpdCBjYW4gYmUgaW5kaXJlY3RseSB0cmlnZ2VyZWQgdmlhIHRoZSBsb29wIG9wdGlvbi4gKExvb3BzIGFyZSBjb21wb3NlZCBvZiBtdWx0aXBsZSByZXZlcnNlcy4pICovXHJcbiAgICAgICAgICAgICAgICAvKiBOb3RlOiBSZXZlcnNlIGNhbGxzIGRvIG5vdCBuZWVkIHRvIGJlIGNvbnNlY3V0aXZlbHkgY2hhaW5lZCBvbnRvIGEgY3VycmVudGx5LWFuaW1hdGluZyBlbGVtZW50IGluIG9yZGVyIHRvIG9wZXJhdGUgb24gY2FjaGVkIHZhbHVlcztcclxuICAgICAgICAgICAgICAgICAgIHRoZXJlIGlzIG5vIGhhcm0gdG8gcmV2ZXJzZSBiZWluZyBjYWxsZWQgb24gYSBwb3RlbnRpYWxseSBzdGFsZSBkYXRhIGNhY2hlIHNpbmNlIHJldmVyc2UncyBiZWhhdmlvciBpcyBzaW1wbHkgZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgYXMgcmV2ZXJ0aW5nIHRvIHRoZSBlbGVtZW50J3MgdmFsdWVzIGFzIHRoZXkgd2VyZSBwcmlvciB0byB0aGUgcHJldmlvdXMgKlZlbG9jaXR5KiBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwicmV2ZXJzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogQWJvcnQgaWYgdGhlcmUgaXMgbm8gcHJpb3IgYW5pbWF0aW9uIGRhdGEgdG8gcmV2ZXJzZSB0by4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGEoZWxlbWVudCkudHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlcXVldWUgdGhlIGVsZW1lbnQgc28gdGhhdCB0aGlzIHF1ZXVlIGVudHJ5IHJlbGVhc2VzIGl0c2VsZiBpbW1lZGlhdGVseSwgYWxsb3dpbmcgc3Vic2VxdWVudCBxdWV1ZSBlbnRyaWVzIHRvIHJ1bi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5kZXF1ZXVlKGVsZW1lbnQsIG9wdHMucXVldWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgT3B0aW9ucyBQYXJzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBlbGVtZW50IHdhcyBoaWRkZW4gdmlhIHRoZSBkaXNwbGF5IG9wdGlvbiBpbiB0aGUgcHJldmlvdXMgY2FsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0IGRpc3BsYXkgdG8gXCJhdXRvXCIgcHJpb3IgdG8gcmV2ZXJzYWwgc28gdGhhdCB0aGUgZWxlbWVudCBpcyB2aXNpYmxlIGFnYWluLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS5vcHRzLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuZGlzcGxheSA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS5vcHRzLnZpc2liaWxpdHkgPT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cy52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBsb29wIG9wdGlvbiB3YXMgc2V0IGluIHRoZSBwcmV2aW91cyBjYWxsLCBkaXNhYmxlIGl0IHNvIHRoYXQgXCJyZXZlcnNlXCIgY2FsbHMgYXJlbid0IHJlY3Vyc2l2ZWx5IGdlbmVyYXRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVydGhlciwgcmVtb3ZlIHRoZSBwcmV2aW91cyBjYWxsJ3MgY2FsbGJhY2sgb3B0aW9uczsgdHlwaWNhbGx5LCB1c2VycyBkbyBub3Qgd2FudCB0aGVzZSB0byBiZSByZWZpcmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMubG9vcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuYmVnaW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLm9wdHMuY29tcGxldGUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogU2luY2Ugd2UncmUgZXh0ZW5kaW5nIGFuIG9wdHMgb2JqZWN0IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBleHRlbmRlZCB3aXRoIHRoZSBkZWZhdWx0cyBvcHRpb25zIG9iamVjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2UgcmVtb3ZlIG5vbi1leHBsaWNpdGx5LWRlZmluZWQgcHJvcGVydGllcyB0aGF0IGFyZSBhdXRvLWFzc2lnbmVkIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmVhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRzLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgb3B0cyBvYmplY3QgdXNlZCBmb3IgcmV2ZXJzYWwgaXMgYW4gZXh0ZW5zaW9uIG9mIHRoZSBvcHRpb25zIG9iamVjdCBvcHRpb25hbGx5IHBhc3NlZCBpbnRvIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZSBjYWxsIHBsdXMgdGhlIG9wdGlvbnMgdXNlZCBpbiB0aGUgcHJldmlvdXMgVmVsb2NpdHkgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cyA9ICQuZXh0ZW5kKHt9LCBEYXRhKGVsZW1lbnQpLm9wdHMsIG9wdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5zIENvbnRhaW5lciBSZWNvbnN0cnVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogQ3JlYXRlIGEgZGVlcHkgY29weSAoaW5kaWNhdGVkIHZpYSB0aGUgdHJ1ZSBmbGFnKSBvZiB0aGUgcHJldmlvdXMgY2FsbCdzIHR3ZWVuc0NvbnRhaW5lci4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUd2VlbnNDb250YWluZXIgPSAkLmV4dGVuZCh0cnVlLCB7fSwgRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTWFuaXB1bGF0ZSB0aGUgcHJldmlvdXMgdHdlZW5zQ29udGFpbmVyIGJ5IHJlcGxhY2luZyBpdHMgZW5kIHZhbHVlcyBhbmQgY3VycmVudFZhbHVlcyB3aXRoIGl0cyBzdGFydCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGxhc3RUd2VlbiBpbiBsYXN0VHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJbiBhZGRpdGlvbiB0byB0d2VlbiBkYXRhLCB0d2VlbnNDb250YWluZXJzIGNvbnRhaW4gYW4gZWxlbWVudCBwcm9wZXJ0eSB0aGF0IHdlIGlnbm9yZSBoZXJlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RUd2VlbiAhPT0gXCJlbGVtZW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFN0YXJ0VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uc3RhcnRWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLnN0YXJ0VmFsdWUgPSBsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0uY3VycmVudFZhbHVlID0gbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLmVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUd2VlbnNDb250YWluZXJbbGFzdFR3ZWVuXS5lbmRWYWx1ZSA9IGxhc3RTdGFydFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFYXNpbmcgaXMgdGhlIG9ubHkgb3B0aW9uIHRoYXQgZW1iZWRzIGludG8gdGhlIGluZGl2aWR1YWwgdHdlZW4gZGF0YSAoc2luY2UgaXQgY2FuIGJlIGRlZmluZWQgb24gYSBwZXItcHJvcGVydHkgYmFzaXMpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjY29yZGluZ2x5LCBldmVyeSBwcm9wZXJ0eSdzIGVhc2luZyB2YWx1ZSBtdXN0IGJlIHVwZGF0ZWQgd2hlbiBhbiBvcHRpb25zIG9iamVjdCBpcyBwYXNzZWQgaW4gd2l0aCBhIHJldmVyc2UgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgc2lkZSBlZmZlY3Qgb2YgdGhpcyBleHRlbnNpYmlsaXR5IGlzIHRoYXQgYWxsIHBlci1wcm9wZXJ0eSBlYXNpbmcgdmFsdWVzIGFyZSBmb3JjZWZ1bGx5IHJlc2V0IHRvIHRoZSBuZXcgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFUeXBlLmlzRW1wdHlPYmplY3Qob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFR3ZWVuc0NvbnRhaW5lcltsYXN0VHdlZW5dLmVhc2luZyA9IG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcInJldmVyc2UgdHdlZW5zQ29udGFpbmVyIChcIiArIGxhc3RUd2VlbiArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeShsYXN0VHdlZW5zQ29udGFpbmVyW2xhc3RUd2Vlbl0pLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyID0gbGFzdFR3ZWVuc0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENvbnN0cnVjdGlvbiAoZm9yIFN0YXJ0KVxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwic3RhcnRcIikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZSBUcmFuc2ZlcnJpbmdcclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIHF1ZXVlIGVudHJ5IGZvbGxvd3MgYSBwcmV2aW91cyBWZWxvY2l0eS1pbml0aWF0ZWQgcXVldWUgZW50cnkgKmFuZCogaWYgdGhpcyBlbnRyeSB3YXMgY3JlYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIHRoZSBlbGVtZW50IHdhcyBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZyBhbmltYXRlZCBieSBWZWxvY2l0eSwgdGhlbiB0aGlzIGN1cnJlbnQgY2FsbCBpcyBzYWZlIHRvIHVzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoZSBlbmQgdmFsdWVzIGZyb20gdGhlIHByaW9yIGNhbGwgYXMgaXRzIHN0YXJ0IHZhbHVlcy4gVmVsb2NpdHkgYXR0ZW1wdHMgdG8gcGVyZm9ybSB0aGlzIHZhbHVlIHRyYW5zZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VzcyB3aGVuZXZlciBwb3NzaWJsZSBpbiBvcmRlciB0byBhdm9pZCByZXF1ZXJ5aW5nIHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdmFsdWVzIGFyZW4ndCB0cmFuc2ZlcnJlZCBmcm9tIGEgcHJpb3IgY2FsbCBhbmQgc3RhcnQgdmFsdWVzIHdlcmUgbm90IGZvcmNlZmVkIGJ5IHRoZSB1c2VyIChtb3JlIG9uIHRoaXMgYmVsb3cpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoZW4gdGhlIERPTSBpcyBxdWVyaWVkIGZvciB0aGUgZWxlbWVudCdzIGN1cnJlbnQgdmFsdWVzIGFzIGEgbGFzdCByZXNvcnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogQ29udmVyc2VseSwgYW5pbWF0aW9uIHJldmVyc2FsIChhbmQgbG9vcGluZykgKmFsd2F5cyogcGVyZm9ybSBpbnRlci1jYWxsIHZhbHVlIHRyYW5zZmVyczsgdGhleSBuZXZlciByZXF1ZXJ5IHRoZSBET00uICovXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUd2VlbnNDb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFRoZSBwZXItZWxlbWVudCBpc0FuaW1hdGluZyBmbGFnIGlzIHVzZWQgdG8gaW5kaWNhdGUgd2hldGhlciBpdCdzIHNhZmUgKGkuZS4gdGhlIGRhdGEgaXNuJ3Qgc3RhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG8gdHJhbnNmZXIgb3ZlciBlbmQgdmFsdWVzIHRvIHVzZSBhcyBzdGFydCB2YWx1ZXMuIElmIGl0J3Mgc2V0IHRvIHRydWUgYW5kIHRoZXJlIGlzIGEgcHJldmlvdXNcclxuICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eSBjYWxsIHRvIHB1bGwgdmFsdWVzIGZyb20sIGRvIHNvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lciAmJiBEYXRhKGVsZW1lbnQpLmlzQW5pbWF0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUd2VlbnNDb250YWluZXIgPSBEYXRhKGVsZW1lbnQpLnR3ZWVuc0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICBUd2VlbiBEYXRhIENhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGlzIGZ1bmN0aW9uIHBhcnNlcyBwcm9wZXJ0eSBkYXRhIGFuZCBkZWZhdWx0cyBlbmRWYWx1ZSwgZWFzaW5nLCBhbmQgc3RhcnRWYWx1ZSBhcyBhcHByb3ByaWF0ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAvKiBQcm9wZXJ0eSBtYXAgdmFsdWVzIGNhbiBlaXRoZXIgdGFrZSB0aGUgZm9ybSBvZiAxKSBhIHNpbmdsZSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIGVuZCB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICBvciAyKSBhbiBhcnJheSBpbiB0aGUgZm9ybSBvZiBbIGVuZFZhbHVlLCBbLCBlYXNpbmddIFssIHN0YXJ0VmFsdWVdIF0uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgVGhlIG9wdGlvbmFsIHRoaXJkIHBhcmFtZXRlciBpcyBhIGZvcmNlZmVkIHN0YXJ0VmFsdWUgdG8gYmUgdXNlZCBpbnN0ZWFkIG9mIHF1ZXJ5aW5nIHRoZSBET00gZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhlIGVsZW1lbnQncyBjdXJyZW50IHZhbHVlLiBSZWFkIFZlbG9jaXR5J3MgZG9jbWVudGF0aW9uIHRvIGxlYXJuIG1vcmUgYWJvdXQgZm9yY2VmZWVkaW5nOiBWZWxvY2l0eUpTLm9yZy8jZm9yY2VmZWVkaW5nICovXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VQcm9wZXJ0eVZhbHVlICh2YWx1ZURhdGEsIHNraXBSZXNvbHZpbmdFYXNpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFZhbHVlID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0aGUgYXJyYXkgZm9ybWF0LCB3aGljaCBjYW4gYmUgc3RydWN0dXJlZCBhcyBvbmUgb2YgdGhyZWUgcG90ZW50aWFsIG92ZXJsb2FkczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgQSkgWyBlbmRWYWx1ZSwgZWFzaW5nLCBzdGFydFZhbHVlIF0sIEIpIFsgZW5kVmFsdWUsIGVhc2luZyBdLCBvciBDKSBbIGVuZFZhbHVlLCBzdGFydFZhbHVlIF0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNBcnJheSh2YWx1ZURhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlbmRWYWx1ZSBpcyBhbHdheXMgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGFycmF5LiBEb24ndCBib3RoZXIgdmFsaWRhdGluZyBlbmRWYWx1ZSdzIHZhbHVlIG5vd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luY2UgdGhlIGVuc3VpbmcgcHJvcGVydHkgY3ljbGluZyBsb2dpYyBkb2VzIHRoYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUd28taXRlbSBhcnJheSBmb3JtYXQ6IElmIHRoZSBzZWNvbmQgaXRlbSBpcyBhIG51bWJlciwgZnVuY3Rpb24sIG9yIGhleCBzdHJpbmcsIHRyZWF0IGl0IGFzIGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0IHZhbHVlIHNpbmNlIGVhc2luZ3MgY2FuIG9ubHkgYmUgbm9uLWhleCBzdHJpbmdzIG9yIGFycmF5cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIVR5cGUuaXNBcnJheSh2YWx1ZURhdGFbMV0pICYmIC9eW1xcZC1dLy50ZXN0KHZhbHVlRGF0YVsxXSkpIHx8IFR5cGUuaXNGdW5jdGlvbih2YWx1ZURhdGFbMV0pIHx8IENTUy5SZWdFeC5pc0hleC50ZXN0KHZhbHVlRGF0YVsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdmFsdWVEYXRhWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVHdvIG9yIHRocmVlLWl0ZW0gYXJyYXk6IElmIHRoZSBzZWNvbmQgaXRlbSBpcyBhIG5vbi1oZXggc3RyaW5nIG9yIGFuIGFycmF5LCB0cmVhdCBpdCBhcyBhbiBlYXNpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChUeXBlLmlzU3RyaW5nKHZhbHVlRGF0YVsxXSkgJiYgIUNTUy5SZWdFeC5pc0hleC50ZXN0KHZhbHVlRGF0YVsxXSkpIHx8IFR5cGUuaXNBcnJheSh2YWx1ZURhdGFbMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gc2tpcFJlc29sdmluZ0Vhc2luZyA/IHZhbHVlRGF0YVsxXSA6IGdldEVhc2luZyh2YWx1ZURhdGFbMV0sIG9wdHMuZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEb24ndCBib3RoZXIgdmFsaWRhdGluZyBzdGFydFZhbHVlJ3MgdmFsdWUgbm93IHNpbmNlIHRoZSBlbnN1aW5nIHByb3BlcnR5IGN5Y2xpbmcgbG9naWMgaW5oZXJlbnRseSBkb2VzIHRoYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlRGF0YVsyXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSB2YWx1ZURhdGFbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgdGhlIHNpbmdsZS12YWx1ZSBmb3JtYXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRGVmYXVsdCB0byB0aGUgY2FsbCdzIGVhc2luZyBpZiBhIHBlci1wcm9wZXJ0eSBlYXNpbmcgdHlwZSB3YXMgbm90IGRlZmluZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tpcFJlc29sdmluZ0Vhc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gZWFzaW5nIHx8IG9wdHMuZWFzaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiBmdW5jdGlvbnMgd2VyZSBwYXNzZWQgaW4gYXMgdmFsdWVzLCBwYXNzIHRoZSBmdW5jdGlvbiB0aGUgY3VycmVudCBlbGVtZW50IGFzIGl0cyBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVzIHRoZSBlbGVtZW50J3MgaW5kZXggYW5kIHRoZSBlbGVtZW50IHNldCdzIHNpemUgYXMgYXJndW1lbnRzLiBUaGVuLCBhc3NpZ24gdGhlIHJldHVybmVkIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZS5pc0Z1bmN0aW9uKGVuZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBlbmRWYWx1ZS5jYWxsKGVsZW1lbnQsIGVsZW1lbnRzSW5kZXgsIGVsZW1lbnRzTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFR5cGUuaXNGdW5jdGlvbihzdGFydFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHN0YXJ0VmFsdWUuY2FsbChlbGVtZW50LCBlbGVtZW50c0luZGV4LCBlbGVtZW50c0xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEFsbG93IHN0YXJ0VmFsdWUgdG8gYmUgbGVmdCBhcyB1bmRlZmluZWQgdG8gaW5kaWNhdGUgdG8gdGhlIGVuc3VpbmcgY29kZSB0aGF0IGl0cyB2YWx1ZSB3YXMgbm90IGZvcmNlZmVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBlbmRWYWx1ZSB8fCAwLCBlYXNpbmcsIHN0YXJ0VmFsdWUgXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEN5Y2xlIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBpbiB0aGUgbWFwLCBsb29raW5nIGZvciBzaG9ydGhhbmQgY29sb3IgcHJvcGVydGllcyAoZS5nLiBcImNvbG9yXCIgYXMgb3Bwb3NlZCB0byBcImNvbG9yUmVkXCIpLiBJbmplY3QgdGhlIGNvcnJlc3BvbmRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICBjb2xvclJlZCwgY29sb3JHcmVlbiwgYW5kIGNvbG9yQmx1ZSBSR0IgY29tcG9uZW50IHR3ZWVucyBpbnRvIHRoZSBwcm9wZXJ0aWVzTWFwICh3aGljaCBWZWxvY2l0eSB1bmRlcnN0YW5kcykgYW5kIHJlbW92ZSB0aGUgc2hvcnRoYW5kIHByb3BlcnR5LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChwcm9wZXJ0aWVzTWFwLCBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogRmluZCBzaG9ydGhhbmQgY29sb3IgcHJvcGVydGllcyB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgYSBoZXggc3RyaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUmVnRXhwKFwiXlwiICsgQ1NTLkxpc3RzLmNvbG9ycy5qb2luKFwiJHxeXCIpICsgXCIkXCIpLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXJzZSB0aGUgdmFsdWUgZGF0YSBmb3IgZWFjaCBzaG9ydGhhbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVEYXRhID0gcGFyc2VQcm9wZXJ0eVZhbHVlKHZhbHVlLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHZhbHVlRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSB2YWx1ZURhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHZhbHVlRGF0YVsyXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLlJlZ0V4LmlzSGV4LnRlc3QoZW5kVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCB0aGUgaGV4IHN0cmluZ3MgaW50byB0aGVpciBSR0IgY29tcG9uZW50IGFycmF5cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JDb21wb25lbnRzID0gWyBcIlJlZFwiLCBcIkdyZWVuXCIsIFwiQmx1ZVwiIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlUkdCID0gQ1NTLlZhbHVlcy5oZXhUb1JnYihlbmRWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWVSR0IgPSBzdGFydFZhbHVlID8gQ1NTLlZhbHVlcy5oZXhUb1JnYihzdGFydFZhbHVlKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSW5qZWN0IHRoZSBSR0IgY29tcG9uZW50IHR3ZWVucyBpbnRvIHByb3BlcnRpZXNNYXAuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvckNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFBcnJheSA9IFsgZW5kVmFsdWVSR0JbaV0gXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlYXNpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheS5wdXNoKGVhc2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFZhbHVlUkdCICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheS5wdXNoKHN0YXJ0VmFsdWVSR0JbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzTWFwW3Byb3BlcnR5ICsgY29sb3JDb21wb25lbnRzW2ldXSA9IGRhdGFBcnJheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgaW50ZXJtZWRpYXJ5IHNob3J0aGFuZCBwcm9wZXJ0eSBlbnRyeSBub3cgdGhhdCB3ZSd2ZSBwcm9jZXNzZWQgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNNYXBbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIENyZWF0ZSBhIHR3ZWVuIG91dCBvZiBlYWNoIHByb3BlcnR5LCBhbmQgYXBwZW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgdG8gdHdlZW5zQ29udGFpbmVyLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXNNYXApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydCBWYWx1ZSBTb3VyY2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFBhcnNlIG91dCBlbmRWYWx1ZSwgZWFzaW5nLCBhbmQgc3RhcnRWYWx1ZSBmcm9tIHRoZSBwcm9wZXJ0eSdzIGRhdGEuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZURhdGEgPSBwYXJzZVByb3BlcnR5VmFsdWUocHJvcGVydGllc01hcFtwcm9wZXJ0eV0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSB2YWx1ZURhdGFbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcgPSB2YWx1ZURhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdmFsdWVEYXRhWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm93IHRoYXQgdGhlIG9yaWdpbmFsIHByb3BlcnR5IG5hbWUncyBmb3JtYXQgaGFzIGJlZW4gdXNlZCBmb3IgdGhlIHBhcnNlUHJvcGVydHlWYWx1ZSgpIGxvb2t1cCBhYm92ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd2UgZm9yY2UgdGhlIHByb3BlcnR5IHRvIGl0cyBjYW1lbENhc2Ugc3R5bGluZyB0byBub3JtYWxpemUgaXQgZm9yIG1hbmlwdWxhdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBDU1MuTmFtZXMuY2FtZWxDYXNlKHByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluIGNhc2UgdGhpcyBwcm9wZXJ0eSBpcyBhIGhvb2ssIHRoZXJlIGFyZSBjaXJjdW1zdGFuY2VzIHdoZXJlIHdlIHdpbGwgaW50ZW5kIHRvIHdvcmsgb24gdGhlIGhvb2sncyByb290IHByb3BlcnR5IGFuZCBub3QgdGhlIGhvb2tlZCBzdWJwcm9wZXJ0eS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RQcm9wZXJ0eSA9IENTUy5Ib29rcy5nZXRSb290KHByb3BlcnR5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQcm9wZXJ0eVZhbHVlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBQcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgKGFuZCBkbyBub3QgaGF2ZSBhbiBhc3NvY2lhdGVkIG5vcm1hbGl6YXRpb24pIHdpbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJlbnRseSBwcm9kdWNlIG5vIHN0eWxlIGNoYW5nZXMgd2hlbiBzZXQsIHNvIHRoZXkgYXJlIHNraXBwZWQgaW4gb3JkZXIgdG8gZGVjcmVhc2UgYW5pbWF0aW9uIHRpY2sgb3ZlcmhlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3BlcnR5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZCB2aWEgcHJlZml4Q2hlY2soKSwgd2hpY2ggcmV0dXJucyBhIGZhbHNlIGZsYWcgd2hlbiBubyBzdXBwb3J0ZWQgaXMgZGV0ZWN0ZWQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNpbmNlIFNWRyBlbGVtZW50cyBoYXZlIHNvbWUgb2YgdGhlaXIgcHJvcGVydGllcyBkaXJlY3RseSBhcHBsaWVkIGFzIEhUTUwgYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlcmUgaXMgbm8gd2F5IHRvIGNoZWNrIGZvciB0aGVpciBleHBsaWNpdCBicm93c2VyIHN1cHBvcnQsIGFuZCBzbyB3ZSBza2lwIHNraXAgdGhpcyBjaGVjayBmb3IgdGhlbS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFEYXRhKGVsZW1lbnQpLmlzU1ZHICYmIENTUy5OYW1lcy5wcmVmaXhDaGVjayhyb290UHJvcGVydHkpWzFdID09PSBmYWxzZSAmJiBDU1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyb290UHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZykgY29uc29sZS5sb2coXCJTa2lwcGluZyBbXCIgKyByb290UHJvcGVydHkgKyBcIl0gZHVlIHRvIGEgbGFjayBvZiBicm93c2VyIHN1cHBvcnQuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGUgZGlzcGxheSBvcHRpb24gaXMgYmVpbmcgc2V0IHRvIGEgbm9uLVwibm9uZVwiIChlLmcuIFwiYmxvY2tcIikgYW5kIG9wYWNpdHkgKGZpbHRlciBvbiBJRTw9OCkgaXMgYmVpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQgdG8gYW4gZW5kVmFsdWUgb2Ygbm9uLXplcm8sIHRoZSB1c2VyJ3MgaW50ZW50aW9uIGlzIHRvIGZhZGUgaW4gZnJvbSBpbnZpc2libGUsIHRodXMgd2UgZm9yY2VmZWVkIG9wYWNpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYSBzdGFydFZhbHVlIG9mIDAgaWYgaXRzIHN0YXJ0VmFsdWUgaGFzbid0IGFscmVhZHkgYmVlbiBzb3VyY2VkIGJ5IHZhbHVlIHRyYW5zZmVycmluZyBvciBwcmlvciBmb3JjZWZlZWRpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gbnVsbCAmJiBvcHRzLmRpc3BsYXkgIT09IFwibm9uZVwiKSB8fCAob3B0cy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiKSkgJiYgL29wYWNpdHl8ZmlsdGVyLy50ZXN0KHByb3BlcnR5KSAmJiAhc3RhcnRWYWx1ZSAmJiBlbmRWYWx1ZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHZhbHVlcyBoYXZlIGJlZW4gdHJhbnNmZXJyZWQgZnJvbSB0aGUgcHJldmlvdXMgVmVsb2NpdHkgY2FsbCwgZXh0cmFjdCB0aGUgZW5kVmFsdWUgYW5kIHJvb3RQcm9wZXJ0eVZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhbGwgb2YgdGhlIGN1cnJlbnQgY2FsbCdzIHByb3BlcnRpZXMgdGhhdCB3ZXJlICphbHNvKiBhbmltYXRlZCBpbiB0aGUgcHJldmlvdXMgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVmFsdWUgdHJhbnNmZXJyaW5nIGNhbiBvcHRpb25hbGx5IGJlIGRpc2FibGVkIGJ5IHRoZSB1c2VyIHZpYSB0aGUgX2NhY2hlVmFsdWVzIG9wdGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuX2NhY2hlVmFsdWVzICYmIGxhc3RUd2VlbnNDb250YWluZXIgJiYgbGFzdFR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gbGFzdFR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0uZW5kVmFsdWUgKyBsYXN0VHdlZW5zQ29udGFpbmVyW3Byb3BlcnR5XS51bml0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBUaGUgcHJldmlvdXMgY2FsbCdzIHJvb3RQcm9wZXJ0eVZhbHVlIGlzIGV4dHJhY3RlZCBmcm9tIHRoZSBlbGVtZW50J3MgZGF0YSBjYWNoZSBzaW5jZSB0aGF0J3MgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSBvZiByb290UHJvcGVydHlWYWx1ZSB0aGF0IGdldHMgZnJlc2hseSB1cGRhdGVkIGJ5IHRoZSB0d2VlbmluZyBwcm9jZXNzLCB3aGVyZWFzIHRoZSByb290UHJvcGVydHlWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWQgdG8gdGhlIGluY29taW5nIGxhc3RUd2VlbnNDb250YWluZXIgaXMgZXF1YWwgdG8gdGhlIHJvb3QgcHJvcGVydHkncyB2YWx1ZSBwcmlvciB0byBhbnkgdHdlZW5pbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IERhdGEoZWxlbWVudCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtyb290UHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB2YWx1ZXMgd2VyZSBub3QgdHJhbnNmZXJyZWQgZnJvbSBhIHByZXZpb3VzIFZlbG9jaXR5IGNhbGwsIHF1ZXJ5IHRoZSBET00gYXMgbmVlZGVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSGFuZGxlIGhvb2tlZCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHJvb3RQcm9wZXJ0eSk7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBUaGUgZm9sbG93aW5nIGdldFByb3BlcnR5VmFsdWUoKSBjYWxsIGRvZXMgbm90IGFjdHVhbGx5IHRyaWdnZXIgYSBET00gcXVlcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFByb3BlcnR5VmFsdWUoKSB3aWxsIGV4dHJhY3QgdGhlIGhvb2sgZnJvbSByb290UHJvcGVydHlWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIHByb3BlcnR5LCByb290UHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgc3RhcnRWYWx1ZSBpcyBhbHJlYWR5IGRlZmluZWQgdmlhIGZvcmNlZmVlZGluZywgZG8gbm90IHF1ZXJ5IHRoZSBET00gZm9yIHRoZSByb290IHByb3BlcnR5J3MgdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdCBncmFiIHJvb3RQcm9wZXJ0eSdzIHplcm8tdmFsdWUgdGVtcGxhdGUgZnJvbSBDU1MuSG9va3MuIFRoaXMgb3ZlcndyaXRlcyB0aGUgZWxlbWVudCdzIGFjdHVhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QgcHJvcGVydHkgdmFsdWUgKGlmIG9uZSBpcyBzZXQpLCBidXQgdGhpcyBpcyBhY2NlcHRhYmxlIHNpbmNlIHRoZSBwcmltYXJ5IHJlYXNvbiB1c2VycyBmb3JjZWZlZWQgaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhdm9pZCBET00gcXVlcmllcywgYW5kIHRodXMgd2UgbGlrZXdpc2UgYXZvaWQgcXVlcnlpbmcgdGhlIERPTSBmb3IgdGhlIHJvb3QgcHJvcGVydHkncyB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHcmFiIHRoaXMgaG9vaydzIHplcm8tdmFsdWUgdGVtcGxhdGUsIGUuZy4gXCIwcHggMHB4IDBweCBibGFja1wiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZSA9IENTUy5Ib29rcy50ZW1wbGF0ZXNbcm9vdFByb3BlcnR5XVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBIYW5kbGUgbm9uLWhvb2tlZCBwcm9wZXJ0aWVzIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gZGVmaW5lZCB2aWEgZm9yY2VmZWVkaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcHJvcGVydHkpOyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlIERhdGEgRXh0cmFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0ZWRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogU2VwYXJhdGVzIGEgcHJvcGVydHkgdmFsdWUgaW50byBpdHMgbnVtZXJpYyB2YWx1ZSBhbmQgaXRzIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2VwYXJhdGVWYWx1ZSAocHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtZXJpY1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWVyaWNWYWx1ZSA9ICh2YWx1ZSB8fCBcIjBcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTWF0Y2ggdGhlIHVuaXQgdHlwZSBhdCB0aGUgZW5kIG9mIHRoZSB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvWyVBLXpdKyQvLCBmdW5jdGlvbihtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBHcmFiIHRoZSB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUeXBlID0gbWF0Y2g7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdHJpcCB0aGUgdW5pdCB0eXBlIG9mZiBvZiB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgbm8gdW5pdCB0eXBlIHdhcyBzdXBwbGllZCwgYXNzaWduIG9uZSB0aGF0IGlzIGFwcHJvcHJpYXRlIGZvciB0aGlzIHByb3BlcnR5IChlLmcuIFwiZGVnXCIgZm9yIHJvdGF0ZVogb3IgXCJweFwiIGZvciB3aWR0aCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVuaXRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFR5cGUgPSBDU1MuVmFsdWVzLmdldFVuaXRUeXBlKHByb3BlcnR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBudW1lcmljVmFsdWUsIHVuaXRUeXBlIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNlcGFyYXRlIHN0YXJ0VmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRlZFZhbHVlID0gc2VwYXJhdGVWYWx1ZShwcm9wZXJ0eSwgc3RhcnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgPSBzZXBhcmF0ZWRWYWx1ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZVVuaXRUeXBlID0gc2VwYXJhdGVkVmFsdWVbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXBhcmF0ZSBlbmRWYWx1ZSwgYW5kIGV4dHJhY3QgYSB2YWx1ZSBvcGVyYXRvciAoZS5nLiBcIis9XCIsIFwiLT1cIikgaWYgb25lIGV4aXN0cy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdGVkVmFsdWUgPSBzZXBhcmF0ZVZhbHVlKHByb3BlcnR5LCBlbmRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gc2VwYXJhdGVkVmFsdWVbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LywgZnVuY3Rpb24obWF0Y2gsIHN1Yk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9IHN1Yk1hdGNoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0cmlwIHRoZSBvcGVyYXRvciBvZmYgb2YgdGhlIHZhbHVlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZVVuaXRUeXBlID0gc2VwYXJhdGVkVmFsdWVbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBQYXJzZSBmbG9hdCB2YWx1ZXMgZnJvbSBlbmRWYWx1ZSBhbmQgc3RhcnRWYWx1ZS4gRGVmYXVsdCB0byAwIGlmIE5hTiBpcyByZXR1cm5lZC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IHBhcnNlRmxvYXQoc3RhcnRWYWx1ZSkgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBwYXJzZUZsb2F0KGVuZFZhbHVlKSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eS1TcGVjaWZpYyBWYWx1ZSBDb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEN1c3RvbSBzdXBwb3J0IGZvciBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgYWNjZXB0IHRoZSAlIHVuaXQgdHlwZSwgYnV0IHdoZXJlIHBvbGx5ZmlsbGluZyBpcyB0cml2aWFsIGFuZCByZWxhdGl2ZWx5IGZvb2xwcm9vZi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZFZhbHVlVW5pdFR5cGUgPT09IFwiJVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBICUtdmFsdWUgZm9udFNpemUvbGluZUhlaWdodCBpcyByZWxhdGl2ZSB0byB0aGUgcGFyZW50J3MgZm9udFNpemUgKGFzIG9wcG9zZWQgdG8gdGhlIHBhcmVudCdzIGRpbWVuc2lvbnMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggaXMgaWRlbnRpY2FsIHRvIHRoZSBlbSB1bml0J3MgYmVoYXZpb3IsIHNvIHdlIHBpZ2d5YmFjayBvZmYgb2YgdGhhdC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXihmb250U2l6ZXxsaW5lSGVpZ2h0KSQvLnRlc3QocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQ29udmVydCAlIGludG8gYW4gZW0gZGVjaW1hbCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IGVuZFZhbHVlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBcImVtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGb3Igc2NhbGVYIGFuZCBzY2FsZVksIGNvbnZlcnQgdGhlIHZhbHVlIGludG8gaXRzIGRlY2ltYWwgZm9ybWF0IGFuZCBzdHJpcCBvZmYgdGhlIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15zY2FsZS8udGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IGVuZFZhbHVlIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRm9yIFJHQiBjb21wb25lbnRzLCB0YWtlIHRoZSBkZWZpbmVkIHBlcmNlbnRhZ2Ugb2YgMjU1IGFuZCBzdHJpcCBvZmYgdGhlIHVuaXQgdHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoLyhSZWR8R3JlZW58Qmx1ZSkkL2kudGVzdChwcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IChlbmRWYWx1ZSAvIDEwMCkgKiAyNTU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5pdCBSYXRpbyBDYWxjdWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVuIHF1ZXJpZWQsIHRoZSBicm93c2VyIHJldHVybnMgKG1vc3QpIENTUyBwcm9wZXJ0eSB2YWx1ZXMgaW4gcGl4ZWxzLiBUaGVyZWZvcmUsIGlmIGFuIGVuZFZhbHVlIHdpdGggYSB1bml0IHR5cGUgb2ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJSwgZW0sIG9yIHJlbSBpcyBhbmltYXRlZCB0b3dhcmQsIHN0YXJ0VmFsdWUgbXVzdCBiZSBjb252ZXJ0ZWQgZnJvbSBwaXhlbHMgaW50byB0aGUgc2FtZSB1bml0IHR5cGUgYXMgZW5kVmFsdWUgaW4gb3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHZhbHVlIG1hbmlwdWxhdGlvbiBsb2dpYyAoaW5jcmVtZW50L2RlY3JlbWVudCkgdG8gcHJvY2VlZC4gRnVydGhlciwgaWYgdGhlIHN0YXJ0VmFsdWUgd2FzIGZvcmNlZmVkIG9yIHRyYW5zZmVycmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gYSBwcmV2aW91cyBjYWxsLCBzdGFydFZhbHVlIG1heSBhbHNvIG5vdCBiZSBpbiBwaXhlbHMuIFVuaXQgY29udmVyc2lvbiBsb2dpYyB0aGVyZWZvcmUgY29uc2lzdHMgb2YgdHdvIHN0ZXBzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAxKSBDYWxjdWxhdGluZyB0aGUgcmF0aW8gb2YgJS9lbS9yZW0vdmgvdncgcmVsYXRpdmUgdG8gcGl4ZWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDIpIENvbnZlcnRpbmcgc3RhcnRWYWx1ZSBpbnRvIHRoZSBzYW1lIHVuaXQgb2YgbWVhc3VyZW1lbnQgYXMgZW5kVmFsdWUgYmFzZWQgb24gdGhlc2UgcmF0aW9zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBVbml0IGNvbnZlcnNpb24gcmF0aW9zIGFyZSBjYWxjdWxhdGVkIGJ5IGluc2VydGluZyBhIHNpYmxpbmcgbm9kZSBuZXh0IHRvIHRoZSB0YXJnZXQgbm9kZSwgY29weWluZyBvdmVyIGl0cyBwb3NpdGlvbiBwcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZyB2YWx1ZXMgd2l0aCB0aGUgdGFyZ2V0IHVuaXQgdHlwZSB0aGVuIGNvbXBhcmluZyB0aGUgcmV0dXJuZWQgcGl4ZWwgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEV2ZW4gaWYgb25seSBvbmUgb2YgdGhlc2UgdW5pdCB0eXBlcyBpcyBiZWluZyBhbmltYXRlZCwgYWxsIHVuaXQgcmF0aW9zIGFyZSBjYWxjdWxhdGVkIGF0IG9uY2Ugc2luY2UgdGhlIG92ZXJoZWFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIGJhdGNoaW5nIHRoZSBTRVRzIGFuZCBHRVRzIHRvZ2V0aGVyIHVwZnJvbnQgb3V0d2VpZ2h0cyB0aGUgcG90ZW50aWFsIG92ZXJoZWFkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIGxheW91dCB0aHJhc2hpbmcgY2F1c2VkIGJ5IHJlLXF1ZXJ5aW5nIGZvciB1bmNhbGN1bGF0ZWQgcmF0aW9zIGZvciBzdWJzZXF1ZW50bHktcHJvY2Vzc2VkIHByb3BlcnRpZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvZG86IFNoaWZ0IHRoaXMgbG9naWMgaW50byB0aGUgY2FsbHMnIGZpcnN0IHRpY2sgaW5zdGFuY2Ugc28gdGhhdCBpdCdzIHN5bmNlZCB3aXRoIFJBRi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVW5pdFJhdGlvcyAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNhbWUgUmF0aW8gQ2hlY2tzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogVGhlIHByb3BlcnRpZXMgYmVsb3cgYXJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGVsZW1lbnQgZGlmZmVycyBzdWZmaWNpZW50bHkgZnJvbSB0aGlzIGNhbGwnc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNseSBpdGVyYXRlZCBlbGVtZW50IHRvIGFsc28gZGlmZmVyIGluIGl0cyB1bml0IGNvbnZlcnNpb24gcmF0aW9zLiBJZiB0aGUgcHJvcGVydGllcyBtYXRjaCB1cCB3aXRoIHRob3NlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiB0aGUgcHJpb3IgZWxlbWVudCwgdGhlIHByaW9yIGVsZW1lbnQncyBjb252ZXJzaW9uIHJhdGlvcyBhcmUgdXNlZC4gTGlrZSBtb3N0IG9wdGltaXphdGlvbnMgaW4gVmVsb2NpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGlzIGRvbmUgdG8gbWluaW1pemUgRE9NIHF1ZXJ5aW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNhbWVSYXRpb0luZGljYXRvcnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15UGFyZW50OiBlbGVtZW50LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSwgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBDU1MuZ2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCBcInBvc2l0aW9uXCIpLCAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IENTUy5nZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwiZm9udFNpemVcIikgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEZXRlcm1pbmUgaWYgdGhlIHNhbWUgJSByYXRpbyBjYW4gYmUgdXNlZC4gJSBpcyBiYXNlZCBvbiB0aGUgZWxlbWVudCdzIHBvc2l0aW9uIHZhbHVlIGFuZCBpdHMgcGFyZW50J3Mgd2lkdGggYW5kIGhlaWdodCBkaW1lbnNpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVQZXJjZW50UmF0aW8gPSAoKHNhbWVSYXRpb0luZGljYXRvcnMucG9zaXRpb24gPT09IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBvc2l0aW9uKSAmJiAoc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudCA9PT0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UGFyZW50KSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRGV0ZXJtaW5lIGlmIHRoZSBzYW1lIGVtIHJhdGlvIGNhbiBiZSB1c2VkLiBlbSBpcyByZWxhdGl2ZSB0byB0aGUgZWxlbWVudCdzIGZvbnRTaXplLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVFbVJhdGlvID0gKHNhbWVSYXRpb0luZGljYXRvcnMuZm9udFNpemUgPT09IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdEZvbnRTaXplKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTdG9yZSB0aGVzZSByYXRpbyBpbmRpY2F0b3JzIGNhbGwtd2lkZSBmb3IgdGhlIG5leHQgZWxlbWVudCB0byBjb21wYXJlIGFnYWluc3QuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLmxhc3RQYXJlbnQgPSBzYW1lUmF0aW9JbmRpY2F0b3JzLm15UGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0UG9zaXRpb24gPSBzYW1lUmF0aW9JbmRpY2F0b3JzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0Rm9udFNpemUgPSBzYW1lUmF0aW9JbmRpY2F0b3JzLmZvbnRTaXplO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQtU3BlY2lmaWMgVW5pdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBJRTggcm91bmRzIHRvIHRoZSBuZWFyZXN0IHBpeGVsIHdoZW4gcmV0dXJuaW5nIENTUyB2YWx1ZXMsIHRodXMgd2UgcGVyZm9ybSBjb252ZXJzaW9ucyB1c2luZyBhIG1lYXN1cmVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiAxMDAgKGluc3RlYWQgb2YgMSkgdG8gZ2l2ZSBvdXIgcmF0aW9zIGEgcHJlY2lzaW9uIG9mIGF0IGxlYXN0IDIgZGVjaW1hbCB2YWx1ZXMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2FtZUVtUmF0aW8gfHwgIXNhbWVQZXJjZW50UmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtbXkgPSBEYXRhKGVsZW1lbnQpLmlzU1ZHID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuaW5pdChkdW1teSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudC5hcHBlbmRDaGlsZChkdW1teSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvIGFjY3VyYXRlbHkgYW5kIGNvbnNpc3RlbnRseSBjYWxjdWxhdGUgY29udmVyc2lvbiByYXRpb3MsIHRoZSBlbGVtZW50J3MgY2FzY2FkZWQgb3ZlcmZsb3cgYW5kIGJveC1zaXppbmcgYXJlIHN0cmlwcGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpbWlsYXJseSwgc2luY2Ugd2lkdGgvaGVpZ2h0IGNhbiBiZSBhcnRpZmljaWFsbHkgY29uc3RyYWluZWQgYnkgdGhlaXIgbWluLS9tYXgtIGVxdWl2YWxlbnRzLCB0aGVzZSBhcmUgY29udHJvbGxlZCBmb3IgYXMgd2VsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBPdmVyZmxvdyBtdXN0IGJlIGFsc28gYmUgY29udHJvbGxlZCBmb3IgcGVyLWF4aXMgc2luY2UgdGhlIG92ZXJmbG93IHByb3BlcnR5IG92ZXJ3cml0ZXMgaXRzIHBlci1heGlzIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goWyBcIm92ZXJmbG93XCIsIFwib3ZlcmZsb3dYXCIsIFwib3ZlcmZsb3dZXCIgXSwgZnVuY3Rpb24oaSwgcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuQ1NTLnNldFByb3BlcnR5VmFsdWUoZHVtbXksIHByb3BlcnR5LCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJwb3NpdGlvblwiLCBzYW1lUmF0aW9JbmRpY2F0b3JzLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJmb250U2l6ZVwiLCBzYW1lUmF0aW9JbmRpY2F0b3JzLmZvbnRTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJib3hTaXppbmdcIiwgXCJjb250ZW50LWJveFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogd2lkdGggYW5kIGhlaWdodCBhY3QgYXMgb3VyIHByb3h5IHByb3BlcnRpZXMgZm9yIG1lYXN1cmluZyB0aGUgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgJSByYXRpb3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKFsgXCJtaW5XaWR0aFwiLCBcIm1heFdpZHRoXCIsIFwid2lkdGhcIiwgXCJtaW5IZWlnaHRcIiwgXCJtYXhIZWlnaHRcIiwgXCJoZWlnaHRcIiBdLCBmdW5jdGlvbihpLCBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5DU1Muc2V0UHJvcGVydHlWYWx1ZShkdW1teSwgcHJvcGVydHksIG1lYXN1cmVtZW50ICsgXCIlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHBhZGRpbmdMZWZ0IGFyYml0cmFyaWx5IGFjdHMgYXMgb3VyIHByb3h5IHByb3BlcnR5IGZvciB0aGUgZW0gcmF0aW8uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuQ1NTLnNldFByb3BlcnR5VmFsdWUoZHVtbXksIFwicGFkZGluZ0xlZnRcIiwgbWVhc3VyZW1lbnQgKyBcImVtXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEaXZpZGUgdGhlIHJldHVybmVkIHZhbHVlIGJ5IHRoZSBtZWFzdXJlbWVudCB0byBnZXQgdGhlIHJhdGlvIGJldHdlZW4gMSUgYW5kIDFweC4gRGVmYXVsdCB0byAxIHNpbmNlIHdvcmtpbmcgd2l0aCAwIGNhbiBwcm9kdWNlIEluZmluaXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucGVyY2VudFRvUHhXaWR0aCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4V2lkdGggPSAocGFyc2VGbG9hdChDU1MuZ2V0UHJvcGVydHlWYWx1ZShkdW1teSwgXCJ3aWR0aFwiLCBudWxsLCB0cnVlKSkgfHwgMSkgLyBtZWFzdXJlbWVudDsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeEhlaWdodCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4SGVpZ2h0ID0gKHBhcnNlRmxvYXQoQ1NTLmdldFByb3BlcnR5VmFsdWUoZHVtbXksIFwiaGVpZ2h0XCIsIG51bGwsIHRydWUpKSB8fCAxKSAvIG1lYXN1cmVtZW50OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLmVtVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdEVtVG9QeCA9IChwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGR1bW15LCBcInBhZGRpbmdMZWZ0XCIpKSB8fCAxKSAvIG1lYXN1cmVtZW50OyAvKiBHRVQgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZVJhdGlvSW5kaWNhdG9ycy5teVBhcmVudC5yZW1vdmVDaGlsZChkdW1teSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MuZW1Ub1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS5sYXN0RW1Ub1B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucGVyY2VudFRvUHhXaWR0aCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFJhdGlvcy5wZXJjZW50VG9QeEhlaWdodCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEubGFzdFBlcmNlbnRUb1B4SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnQtQWdub3N0aWMgVW5pdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXaGVyZWFzICUgYW5kIGVtIHJhdGlvcyBhcmUgZGV0ZXJtaW5lZCBvbiBhIHBlci1lbGVtZW50IGJhc2lzLCB0aGUgcmVtIHVuaXQgb25seSBuZWVkcyB0byBiZSBjaGVja2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNlIHBlciBjYWxsIHNpbmNlIGl0J3MgZXhjbHVzaXZlbHkgZGVwZW5kYW50IHVwb24gZG9jdW1lbnQuYm9keSdzIGZvbnRTaXplLiBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0IGNhbGN1bGF0ZVVuaXRSYXRpb3MoKSBpcyBiZWluZyBydW4gZHVyaW5nIHRoaXMgY2FsbCwgcmVtVG9QeCB3aWxsIHN0aWxsIGJlIHNldCB0byBpdHMgZGVmYXVsdCB2YWx1ZSBvZiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc28gd2UgY2FsY3VsYXRlIGl0IG5vdy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsVW5pdENvbnZlcnNpb25EYXRhLnJlbVRvUHggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEZWZhdWx0IHRvIGJyb3dzZXJzJyBkZWZhdWx0IGZvbnRTaXplIG9mIDE2cHggaW4gdGhlIGNhc2Ugb2YgMC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsVW5pdENvbnZlcnNpb25EYXRhLnJlbVRvUHggPSBwYXJzZUZsb2F0KENTUy5nZXRQcm9wZXJ0eVZhbHVlKGRvY3VtZW50LmJvZHksIFwiZm9udFNpemVcIikpIHx8IDE2OyAvKiBHRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW1pbGFybHksIHZpZXdwb3J0IHVuaXRzIGFyZSAlLXJlbGF0aXZlIHRvIHRoZSB3aW5kb3cncyBpbm5lciBkaW1lbnNpb25zLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxVbml0Q29udmVyc2lvbkRhdGEudndUb1B4ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52d1RvUHggPSBwYXJzZUZsb2F0KHdpbmRvdy5pbm5lcldpZHRoKSAvIDEwMDsgLyogR0VUICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52aFRvUHggPSBwYXJzZUZsb2F0KHdpbmRvdy5pbm5lckhlaWdodCkgLyAxMDA7IC8qIEdFVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MucmVtVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEucmVtVG9QeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRSYXRpb3MudndUb1B4ID0gY2FsbFVuaXRDb252ZXJzaW9uRGF0YS52d1RvUHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0UmF0aW9zLnZoVG9QeCA9IGNhbGxVbml0Q29udmVyc2lvbkRhdGEudmhUb1B4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5kZWJ1ZyA+PSAxKSBjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIiArIEpTT04uc3RyaW5naWZ5KHVuaXRSYXRpb3MpLCBlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5pdFJhdGlvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuaXQgQ29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSAqIGFuZCAvIG9wZXJhdG9ycywgd2hpY2ggYXJlIG5vdCBwYXNzZWQgaW4gd2l0aCBhbiBhc3NvY2lhdGVkIHVuaXQsIGluaGVyZW50bHkgdXNlIHN0YXJ0VmFsdWUncyB1bml0LiBTa2lwIHZhbHVlIGFuZCB1bml0IGNvbnZlcnNpb24uICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvW1xcLypdLy50ZXN0KG9wZXJhdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVVbml0VHlwZSA9IHN0YXJ0VmFsdWVVbml0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgc3RhcnRWYWx1ZSBhbmQgZW5kVmFsdWUgZGlmZmVyIGluIHVuaXQgdHlwZSwgY29udmVydCBzdGFydFZhbHVlIGludG8gdGhlIHNhbWUgdW5pdCB0eXBlIGFzIGVuZFZhbHVlIHNvIHRoYXQgaWYgZW5kVmFsdWVVbml0VHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBhIHJlbGF0aXZlIHVuaXQgKCUsIGVtLCByZW0pLCB0aGUgdmFsdWVzIHNldCBkdXJpbmcgdHdlZW5pbmcgd2lsbCBjb250aW51ZSB0byBiZSBhY2N1cmF0ZWx5IHJlbGF0aXZlIGV2ZW4gaWYgdGhlIG1ldHJpY3MgdGhleSBkZXBlbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gYXJlIGR5bmFtaWNhbGx5IGNoYW5naW5nIGR1cmluZyB0aGUgY291cnNlIG9mIHRoZSBhbmltYXRpb24uIENvbnZlcnNlbHksIGlmIHdlIGFsd2F5cyBub3JtYWxpemVkIGludG8gcHggYW5kIHVzZWQgcHggZm9yIHNldHRpbmcgdmFsdWVzLCB0aGUgcHggcmF0aW9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd291bGQgYmVjb21lIHN0YWxlIGlmIHRoZSBvcmlnaW5hbCB1bml0IGJlaW5nIGFuaW1hdGVkIHRvd2FyZCB3YXMgcmVsYXRpdmUgYW5kIHRoZSB1bmRlcmx5aW5nIG1ldHJpY3MgY2hhbmdlIGR1cmluZyB0aGUgYW5pbWF0aW9uLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBTaW5jZSAwIGlzIDAgaW4gYW55IHVuaXQgdHlwZSwgbm8gY29udmVyc2lvbiBpcyBuZWNlc3Nhcnkgd2hlbiBzdGFydFZhbHVlIGlzIDAgLS0gd2UganVzdCBzdGFydCBhdCAwIHdpdGggZW5kVmFsdWVVbml0VHlwZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoc3RhcnRWYWx1ZVVuaXRUeXBlICE9PSBlbmRWYWx1ZVVuaXRUeXBlKSAmJiBzdGFydFZhbHVlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBVbml0IGNvbnZlcnNpb24gaXMgYWxzbyBza2lwcGVkIHdoZW4gZW5kVmFsdWUgaXMgMCwgYnV0ICpzdGFydFZhbHVlVW5pdFR5cGUqIG11c3QgYmUgdXNlZCBmb3IgdHdlZW4gdmFsdWVzIHRvIHJlbWFpbiBhY2N1cmF0ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IFNraXBwaW5nIHVuaXQgY29udmVyc2lvbiBoZXJlIG1lYW5zIHRoYXQgaWYgZW5kVmFsdWVVbml0VHlwZSB3YXMgb3JpZ2luYWxseSBhIHJlbGF0aXZlIHVuaXQsIHRoZSBhbmltYXRpb24gd29uJ3QgcmVsYXRpdmVseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggdGhlIHVuZGVybHlpbmcgbWV0cmljcyBpZiB0aGV5IGNoYW5nZSwgYnV0IHRoaXMgaXMgYWNjZXB0YWJsZSBzaW5jZSB3ZSdyZSBhbmltYXRpbmcgdG93YXJkIGludmlzaWJpbGl0eSBpbnN0ZWFkIG9mIHRvd2FyZCB2aXNpYmlsaXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggcmVtYWlucyBwYXN0IHRoZSBwb2ludCBvZiB0aGUgYW5pbWF0aW9uJ3MgY29tcGxldGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRWYWx1ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlVW5pdFR5cGUgPSBzdGFydFZhbHVlVW5pdFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEJ5IHRoaXMgcG9pbnQsIHdlIGNhbm5vdCBhdm9pZCB1bml0IGNvbnZlcnNpb24gKGl0J3MgdW5kZXNpcmFibGUgc2luY2UgaXQgY2F1c2VzIGxheW91dCB0aHJhc2hpbmcpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHdlIGhhdmVuJ3QgYWxyZWFkeSwgd2UgdHJpZ2dlciBjYWxjdWxhdGVVbml0UmF0aW9zKCksIHdoaWNoIHJ1bnMgb25jZSBwZXIgZWxlbWVudCBwZXIgY2FsbC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhID0gZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YSB8fCBjYWxjdWxhdGVVbml0UmF0aW9zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRoZSBmb2xsb3dpbmcgUmVnRXggbWF0Y2hlcyBDU1MgcHJvcGVydGllcyB0aGF0IGhhdmUgdGhlaXIgJSB2YWx1ZXMgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIHgtYXhpcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiBXM0Mgc3BlYyBtYW5kYXRlcyB0aGF0IGFsbCBvZiBtYXJnaW4gYW5kIHBhZGRpbmcncyBwcm9wZXJ0aWVzIChldmVuIHRvcCBhbmQgYm90dG9tKSBhcmUgJS1yZWxhdGl2ZSB0byB0aGUgKndpZHRoKiBvZiB0aGUgcGFyZW50IGVsZW1lbnQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF4aXMgPSAoL21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3QocHJvcGVydHkpIHx8IC9YJC8udGVzdChwcm9wZXJ0eSkgfHwgcHJvcGVydHkgPT09IFwieFwiKSA/IFwieFwiIDogXCJ5XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEluIG9yZGVyIHRvIGF2b2lkIGdlbmVyYXRpbmcgbl4yIGJlc3Bva2UgY29udmVyc2lvbiBmdW5jdGlvbnMsIHVuaXQgY29udmVyc2lvbiBpcyBhIHR3by1zdGVwIHByb2Nlc3M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSkgQ29udmVydCBzdGFydFZhbHVlIGludG8gcGl4ZWxzLiAyKSBDb252ZXJ0IHRoaXMgbmV3IHBpeGVsIHZhbHVlIGludG8gZW5kVmFsdWUncyB1bml0IHR5cGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdGFydFZhbHVlVW5pdFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IHRyYW5zbGF0ZVggYW5kIHRyYW5zbGF0ZVkgYXJlIHRoZSBvbmx5IHByb3BlcnRpZXMgdGhhdCBhcmUgJS1yZWxhdGl2ZSB0byBhbiBlbGVtZW50J3Mgb3duIGRpbWVuc2lvbnMgLS0gbm90IGl0cyBwYXJlbnQncyBkaW1lbnNpb25zLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkgZG9lcyBub3QgaW5jbHVkZSBhIHNwZWNpYWwgY29udmVyc2lvbiBwcm9jZXNzIHRvIGFjY291bnQgZm9yIHRoaXMgYmVoYXZpb3IuIFRoZXJlZm9yZSwgYW5pbWF0aW5nIHRyYW5zbGF0ZVgvWSBmcm9tIGEgJSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub24tJSB2YWx1ZSB3aWxsIHByb2R1Y2UgYW4gaW5jb3JyZWN0IHN0YXJ0IHZhbHVlLiBGb3J0dW5hdGVseSwgdGhpcyBzb3J0IG9mIGNyb3NzLXVuaXQgY29udmVyc2lvbiBpcyByYXJlbHkgZG9uZSBieSB1c2VycyBpbiBwcmFjdGljZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWUgKj0gKGF4aXMgPT09IFwieFwiID8gZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YS5wZXJjZW50VG9QeFdpZHRoIDogZWxlbWVudFVuaXRDb252ZXJzaW9uRGF0YS5wZXJjZW50VG9QeEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJweFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcHggYWN0cyBhcyBvdXIgbWlkcG9pbnQgaW4gdGhlIHVuaXQgY29udmVyc2lvbiBwcm9jZXNzOyBkbyBub3RoaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSAqPSBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhW3N0YXJ0VmFsdWVVbml0VHlwZSArIFwiVG9QeFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEludmVydCB0aGUgcHggcmF0aW9zIHRvIGNvbnZlcnQgaW50byB0byB0aGUgdGFyZ2V0IHVuaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlbmRWYWx1ZVVuaXRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlICo9IDEgLyAoYXhpcyA9PT0gXCJ4XCIgPyBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4V2lkdGggOiBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhLnBlcmNlbnRUb1B4SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzdGFydFZhbHVlIGlzIGFscmVhZHkgaW4gcHgsIGRvIG5vdGhpbmc7IHdlJ3JlIGRvbmUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlICo9IDEgLyBlbGVtZW50VW5pdENvbnZlcnNpb25EYXRhW2VuZFZhbHVlVW5pdFR5cGUgKyBcIlRvUHhcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbGF0aXZlIFZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBPcGVyYXRvciBsb2dpYyBtdXN0IGJlIHBlcmZvcm1lZCBsYXN0IHNpbmNlIGl0IHJlcXVpcmVzIHVuaXQtbm9ybWFsaXplZCBzdGFydCBhbmQgZW5kIHZhbHVlcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogUmVsYXRpdmUgKnBlcmNlbnQgdmFsdWVzKiBkbyBub3QgYmVoYXZlIGhvdyBtb3N0IHBlb3BsZSB0aGluazsgd2hpbGUgb25lIHdvdWxkIGV4cGVjdCBcIis9NTAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gaW5jcmVhc2UgdGhlIHByb3BlcnR5IDEuNXggaXRzIGN1cnJlbnQgdmFsdWUsIGl0IGluIGZhY3QgaW5jcmVhc2VzIHRoZSBwZXJjZW50IHVuaXRzIGluIGFic29sdXRlIHRlcm1zOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA1MCBwb2ludHMgaXMgYWRkZWQgb24gdG9wIG9mIHRoZSBjdXJyZW50ICUgdmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzdGFydFZhbHVlICsgZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZSA9IHN0YXJ0VmFsdWUgLSBlbmRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiKlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gc3RhcnRWYWx1ZSAqIGVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzdGFydFZhbHVlIC8gZW5kVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0d2VlbnNDb250YWluZXIgUHVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIENvbnN0cnVjdCB0aGUgcGVyLXByb3BlcnR5IHR3ZWVuIG9iamVjdCwgYW5kIHB1c2ggaXQgdG8gdGhlIGVsZW1lbnQncyB0d2VlbnNDb250YWluZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuc0NvbnRhaW5lcltwcm9wZXJ0eV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZTogcm9vdFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlOiBzdGFydFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiBzdGFydFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWU6IGVuZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFR5cGU6IGVuZFZhbHVlVW5pdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZlbG9jaXR5LmRlYnVnKSBjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoXCIgKyBwcm9wZXJ0eSArIFwiKTogXCIgKyBKU09OLnN0cmluZ2lmeSh0d2VlbnNDb250YWluZXJbcHJvcGVydHldKSwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBBbG9uZyB3aXRoIGl0cyBwcm9wZXJ0eSBkYXRhLCBzdG9yZSBhIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCBpdHNlbGYgb250byB0d2VlbnNDb250YWluZXIuICovXHJcbiAgICAgICAgICAgICAgICAgICAgdHdlZW5zQ29udGFpbmVyLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgIENhbGwgUHVzaFxyXG4gICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogTm90ZTogdHdlZW5zQ29udGFpbmVyIGNhbiBiZSBlbXB0eSBpZiBhbGwgb2YgdGhlIHByb3BlcnRpZXMgaW4gdGhpcyBjYWxsJ3MgcHJvcGVydHkgbWFwIHdlcmUgc2tpcHBlZCBkdWUgdG8gbm90XHJcbiAgICAgICAgICAgICAgICAgICBiZWluZyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuIFRoZSBlbGVtZW50IHByb3BlcnR5IGlzIHVzZWQgZm9yIGNoZWNraW5nIHRoYXQgdGhlIHR3ZWVuc0NvbnRhaW5lciBoYXMgYmVlbiBhcHBlbmRlZCB0by4gKi9cclxuICAgICAgICAgICAgICAgIGlmICh0d2VlbnNDb250YWluZXIuZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFwcGx5IHRoZSBcInZlbG9jaXR5LWFuaW1hdGluZ1wiIGluZGljYXRvciBjbGFzcy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBDU1MuVmFsdWVzLmFkZENsYXNzKGVsZW1lbnQsIFwidmVsb2NpdHktYW5pbWF0aW5nXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGUgY2FsbCBhcnJheSBob3VzZXMgdGhlIHR3ZWVuc0NvbnRhaW5lcnMgZm9yIGVhY2ggZWxlbWVudCBiZWluZyBhbmltYXRlZCBpbiB0aGUgY3VycmVudCBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGwucHVzaCh0d2VlbnNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTdG9yZSB0aGUgdHdlZW5zQ29udGFpbmVyIGFuZCBvcHRpb25zIGlmIHdlJ3JlIHdvcmtpbmcgb24gdGhlIGRlZmF1bHQgZWZmZWN0cyBxdWV1ZSwgc28gdGhhdCB0aGV5IGNhbiBiZSB1c2VkIGJ5IHRoZSByZXZlcnNlIGNvbW1hbmQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMucXVldWUgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIgPSB0d2VlbnNDb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkub3B0cyA9IG9wdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTd2l0Y2ggb24gdGhlIGVsZW1lbnQncyBhbmltYXRpbmcgZmxhZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLmlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogT25jZSB0aGUgZmluYWwgZWxlbWVudCBpbiB0aGlzIGNhbGwncyBlbGVtZW50IHNldCBoYXMgYmVlbiBwcm9jZXNzZWQsIHB1c2ggdGhlIGNhbGwgYXJyYXkgb250b1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzIGZvciB0aGUgYW5pbWF0aW9uIHRpY2sgdG8gaW1tZWRpYXRlbHkgYmVnaW4gcHJvY2Vzc2luZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNJbmRleCA9PT0gZWxlbWVudHNMZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIFRvIHNwZWVkIHVwIGl0ZXJhdGluZyBvdmVyIHRoaXMgYXJyYXksIGl0IGlzIGNvbXBhY3RlZCAoZmFsc2V5IGl0ZW1zIC0tIGNhbGxzIHRoYXQgaGF2ZSBjb21wbGV0ZWQgLS0gYXJlIHJlbW92ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gaXRzIGxlbmd0aCBoYXMgYmFsbG9vbmVkIHRvIGEgcG9pbnQgdGhhdCBjYW4gaW1wYWN0IHRpY2sgcGVyZm9ybWFuY2UuIFRoaXMgb25seSBiZWNvbWVzIG5lY2Vzc2FyeSB3aGVuIGFuaW1hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXMgYmVlbiBjb250aW51b3VzIHdpdGggbWFueSBlbGVtZW50cyBvdmVyIGEgbG9uZyBwZXJpb2Qgb2YgdGltZTsgd2hlbmV2ZXIgYWxsIGFjdGl2ZSBjYWxscyBhcmUgY29tcGxldGVkLCBjb21wbGV0ZUNhbGwoKSBjbGVhcnMgVmVsb2NpdHkuU3RhdGUuY2FsbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5jYWxscy5sZW5ndGggPiAxMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMgPSBjb21wYWN0U3BhcnNlQXJyYXkoVmVsb2NpdHkuU3RhdGUuY2FsbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBBZGQgdGhlIGN1cnJlbnQgY2FsbCBwbHVzIGl0cyBhc3NvY2lhdGVkIG1ldGFkYXRhICh0aGUgZWxlbWVudCBzZXQgYW5kIHRoZSBjYWxsJ3Mgb3B0aW9ucykgb250byB0aGUgZ2xvYmFsIGNhbGwgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBBbnl0aGluZyBvbiB0aGlzIGNhbGwgY29udGFpbmVyIGlzIHN1YmplY3RlZCB0byB0aWNrKCkgcHJvY2Vzc2luZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHMucHVzaChbIGNhbGwsIGVsZW1lbnRzLCBvcHRzLCBudWxsLCBwcm9taXNlRGF0YS5yZXNvbHZlciBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBhbmltYXRpb24gdGljayBpc24ndCBydW5uaW5nLCBzdGFydCBpdC4gKFZlbG9jaXR5IHNodXRzIGl0IG9mZiB3aGVuIHRoZXJlIGFyZSBubyBhY3RpdmUgY2FsbHMgdG8gcHJvY2Vzcy4pICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5pc1RpY2tpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFN0YXJ0IHRoZSB0aWNrIGxvb3AuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0luZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBXaGVuIHRoZSBxdWV1ZSBvcHRpb24gaXMgc2V0IHRvIGZhbHNlLCB0aGUgY2FsbCBza2lwcyB0aGUgZWxlbWVudCdzIHF1ZXVlIGFuZCBmaXJlcyBpbW1lZGlhdGVseS4gKi9cclxuICAgICAgICAgICAgaWYgKG9wdHMucXVldWUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBTaW5jZSB0aGlzIGJ1aWxkUXVldWUgY2FsbCBkb2Vzbid0IHJlc3BlY3QgdGhlIGVsZW1lbnQncyBleGlzdGluZyBxdWV1ZSAod2hpY2ggaXMgd2hlcmUgYSBkZWxheSBvcHRpb24gd291bGQgaGF2ZSBiZWVuIGFwcGVuZGVkKSxcclxuICAgICAgICAgICAgICAgICAgIHdlIG1hbnVhbGx5IGluamVjdCB0aGUgZGVsYXkgcHJvcGVydHkgaGVyZSB3aXRoIGFuIGV4cGxpY2l0IHNldFRpbWVvdXQuICovXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy5kZWxheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYnVpbGRRdWV1ZSwgb3B0cy5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCB0aGUgY2FsbCB1bmRlcmdvZXMgZWxlbWVudCBxdWV1ZWluZyBhcyBub3JtYWwuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFRvIGludGVyb3BlcmF0ZSB3aXRoIGpRdWVyeSwgVmVsb2NpdHkgdXNlcyBqUXVlcnkncyBvd24gJC5xdWV1ZSgpIHN0YWNrIGZvciBxdWV1aW5nIGxvZ2ljLiAqL1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJC5xdWV1ZShlbGVtZW50LCBvcHRzLnF1ZXVlLCBmdW5jdGlvbihuZXh0LCBjbGVhclF1ZXVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgdGhlIGNsZWFyUXVldWUgZmxhZyB3YXMgcGFzc2VkIGluIGJ5IHRoZSBzdG9wIGNvbW1hbmQsIHJlc29sdmUgdGhpcyBjYWxsJ3MgcHJvbWlzZS4gKFByb21pc2VzIGNhbiBvbmx5IGJlIHJlc29sdmVkIG9uY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc28gaXQncyBmaW5lIGlmIHRoaXMgaXMgcmVwZWF0ZWRseSB0cmlnZ2VyZWQgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYXNzb2NpYXRlZCBjYWxsLikgKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJRdWV1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZURhdGEucHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBEbyBub3QgY29udGludWUgd2l0aCBhbmltYXRpb24gcXVldWVpbmcuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyogVGhpcyBmbGFnIGluZGljYXRlcyB0byB0aGUgdXBjb21pbmcgY29tcGxldGVDYWxsKCkgZnVuY3Rpb24gdGhhdCB0aGlzIHF1ZXVlIGVudHJ5IHdhcyBpbml0aWF0ZWQgYnkgVmVsb2NpdHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgU2VlIGNvbXBsZXRlQ2FsbCgpIGZvciBmdXJ0aGVyIGRldGFpbHMuICovXHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkUXVldWUobmV4dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgQXV0by1EZXF1ZXVpbmdcclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogQXMgcGVyIGpRdWVyeSdzICQucXVldWUoKSBiZWhhdmlvciwgdG8gZmlyZSB0aGUgZmlyc3Qgbm9uLWN1c3RvbS1xdWV1ZSBlbnRyeSBvbiBhbiBlbGVtZW50LCB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICBtdXN0IGJlIGRlcXVldWVkIGlmIGl0cyBxdWV1ZSBzdGFjayBjb25zaXN0cyAqc29sZWx5KiBvZiB0aGUgY3VycmVudCBjYWxsLiAoVGhpcyBjYW4gYmUgZGV0ZXJtaW5lZCBieSBjaGVja2luZ1xyXG4gICAgICAgICAgICAgICBmb3IgdGhlIFwiaW5wcm9ncmVzc1wiIGl0ZW0gdGhhdCBqUXVlcnkgcHJlcGVuZHMgdG8gYWN0aXZlIHF1ZXVlIHN0YWNrIGFycmF5cy4pIFJlZ2FyZGxlc3MsIHdoZW5ldmVyIHRoZSBlbGVtZW50J3NcclxuICAgICAgICAgICAgICAgcXVldWUgaXMgZnVydGhlciBhcHBlbmRlZCB3aXRoIGFkZGl0aW9uYWwgaXRlbXMgLS0gaW5jbHVkaW5nICQuZGVsYXkoKSdzIG9yIGV2ZW4gJC5hbmltYXRlKCkgY2FsbHMsIHRoZSBxdWV1ZSdzXHJcbiAgICAgICAgICAgICAgIGZpcnN0IGVudHJ5IGlzIGF1dG9tYXRpY2FsbHkgZmlyZWQuIFRoaXMgYmVoYXZpb3IgY29udHJhc3RzIHRoYXQgb2YgY3VzdG9tIHF1ZXVlcywgd2hpY2ggbmV2ZXIgYXV0by1maXJlLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXaGVuIGFuIGVsZW1lbnQgc2V0IGlzIGJlaW5nIHN1YmplY3RlZCB0byBhIG5vbi1wYXJhbGxlbCBWZWxvY2l0eSBjYWxsLCB0aGUgYW5pbWF0aW9uIHdpbGwgbm90IGJlZ2luIHVudGlsXHJcbiAgICAgICAgICAgICAgIGVhY2ggb25lIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgc2V0IGhhcyByZWFjaGVkIHRoZSBlbmQgb2YgaXRzIGluZGl2aWR1YWxseSBwcmUtZXhpc3RpbmcgcXVldWUgY2hhaW4uICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IFVuZm9ydHVuYXRlbHksIG1vc3QgcGVvcGxlIGRvbid0IGZ1bGx5IGdyYXNwIGpRdWVyeSdzIHBvd2VyZnVsLCB5ZXQgcXVpcmt5LCAkLnF1ZXVlKCkgZnVuY3Rpb24uXHJcbiAgICAgICAgICAgICAgIExlYW4gbW9yZSBoZXJlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTgxNTgvY2FuLXNvbWVib2R5LWV4cGxhaW4tanF1ZXJ5LXF1ZXVlLXRvLW1lICovXHJcbiAgICAgICAgICAgIGlmICgob3B0cy5xdWV1ZSA9PT0gXCJcIiB8fCBvcHRzLnF1ZXVlID09PSBcImZ4XCIpICYmICQucXVldWUoZWxlbWVudClbMF0gIT09IFwiaW5wcm9ncmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAkLmRlcXVldWUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEVsZW1lbnQgU2V0IEl0ZXJhdGlvblxyXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAvKiBJZiB0aGUgXCJub2RlVHlwZVwiIHByb3BlcnR5IGV4aXN0cyBvbiB0aGUgZWxlbWVudHMgdmFyaWFibGUsIHdlJ3JlIGFuaW1hdGluZyBhIHNpbmdsZSBlbGVtZW50LlxyXG4gICAgICAgICAgIFBsYWNlIGl0IGluIGFuIGFycmF5IHNvIHRoYXQgJC5lYWNoKCkgY2FuIGl0ZXJhdGUgb3ZlciBpdC4gKi9cclxuICAgICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLyogRW5zdXJlIGVhY2ggZWxlbWVudCBpbiBhIHNldCBoYXMgYSBub2RlVHlwZSAoaXMgYSByZWFsIGVsZW1lbnQpIHRvIGF2b2lkIHRocm93aW5nIGVycm9ycy4gKi9cclxuICAgICAgICAgICAgaWYgKFR5cGUuaXNOb2RlKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRWxlbWVudC5jYWxsKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICBPcHRpb246IExvb3BcclxuICAgICAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFRoZSBsb29wIG9wdGlvbiBhY2NlcHRzIGFuIGludGVnZXIgaW5kaWNhdGluZyBob3cgbWFueSB0aW1lcyB0aGUgZWxlbWVudCBzaG91bGQgbG9vcCBiZXR3ZWVuIHRoZSB2YWx1ZXMgaW4gdGhlXHJcbiAgICAgICAgICAgY3VycmVudCBjYWxsJ3MgcHJvcGVydGllcyBtYXAgYW5kIHRoZSBlbGVtZW50J3MgcHJvcGVydHkgdmFsdWVzIHByaW9yIHRvIHRoaXMgY2FsbC4gKi9cclxuICAgICAgICAvKiBOb3RlOiBUaGUgbG9vcCBvcHRpb24ncyBsb2dpYyBpcyBwZXJmb3JtZWQgaGVyZSAtLSBhZnRlciBlbGVtZW50IHByb2Nlc3NpbmcgLS0gYmVjYXVzZSB0aGUgY3VycmVudCBjYWxsIG5lZWRzXHJcbiAgICAgICAgICAgdG8gdW5kZXJnbyBpdHMgcXVldWUgaW5zZXJ0aW9uIHByaW9yIHRvIHRoZSBsb29wIG9wdGlvbiBnZW5lcmF0aW5nIGl0cyBzZXJpZXMgb2YgY29uc3RpdHVlbnQgXCJyZXZlcnNlXCIgY2FsbHMsXHJcbiAgICAgICAgICAgd2hpY2ggY2hhaW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbC4gVHdvIHJldmVyc2UgY2FsbHMgKHR3byBcImFsdGVybmF0aW9uc1wiKSBjb25zdGl0dXRlIG9uZSBsb29wLiAqL1xyXG4gICAgICAgIHZhciBvcHRzID0gJC5leHRlbmQoe30sIFZlbG9jaXR5LmRlZmF1bHRzLCBvcHRpb25zKSxcclxuICAgICAgICAgICAgcmV2ZXJzZUNhbGxzQ291bnQ7XHJcblxyXG4gICAgICAgIG9wdHMubG9vcCA9IHBhcnNlSW50KG9wdHMubG9vcCk7XHJcbiAgICAgICAgcmV2ZXJzZUNhbGxzQ291bnQgPSAob3B0cy5sb29wICogMikgLSAxO1xyXG5cclxuICAgICAgICBpZiAob3B0cy5sb29wKSB7XHJcbiAgICAgICAgICAgIC8qIERvdWJsZSB0aGUgbG9vcCBjb3VudCB0byBjb252ZXJ0IGl0IGludG8gaXRzIGFwcHJvcHJpYXRlIG51bWJlciBvZiBcInJldmVyc2VcIiBjYWxscy5cclxuICAgICAgICAgICAgICAgU3VidHJhY3QgMSBmcm9tIHRoZSByZXN1bHRpbmcgdmFsdWUgc2luY2UgdGhlIGN1cnJlbnQgY2FsbCBpcyBpbmNsdWRlZCBpbiB0aGUgdG90YWwgYWx0ZXJuYXRpb24gY291bnQuICovXHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcmV2ZXJzZUNhbGxzQ291bnQ7IHgrKykge1xyXG4gICAgICAgICAgICAgICAgLyogU2luY2UgdGhlIGxvZ2ljIGZvciB0aGUgcmV2ZXJzZSBhY3Rpb24gb2NjdXJzIGluc2lkZSBRdWV1ZWluZyBhbmQgdGhlcmVmb3JlIHRoaXMgY2FsbCdzIG9wdGlvbnMgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICBpc24ndCBwYXJzZWQgdW50aWwgdGhlbiBhcyB3ZWxsLCB0aGUgY3VycmVudCBjYWxsJ3MgZGVsYXkgb3B0aW9uIG11c3QgYmUgZXhwbGljaXRseSBwYXNzZWQgaW50byB0aGUgcmV2ZXJzZVxyXG4gICAgICAgICAgICAgICAgICAgY2FsbCBzbyB0aGF0IHRoZSBkZWxheSBsb2dpYyB0aGF0IG9jY3VycyBpbnNpZGUgKlByZS1RdWV1ZWluZyogY2FuIHByb2Nlc3MgaXQuICovXHJcbiAgICAgICAgICAgICAgICB2YXIgcmV2ZXJzZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IG9wdHMuZGVsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IG9wdHMucHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgYSBjb21wbGV0ZSBjYWxsYmFjayB3YXMgcGFzc2VkIGludG8gdGhpcyBjYWxsLCB0cmFuc2ZlciBpdCB0byB0aGUgbG9vcCByZWRpcmVjdCdzIGZpbmFsIFwicmV2ZXJzZVwiIGNhbGxcclxuICAgICAgICAgICAgICAgICAgIHNvIHRoYXQgaXQncyB0cmlnZ2VyZWQgd2hlbiB0aGUgZW50aXJlIHJlZGlyZWN0IGlzIGNvbXBsZXRlIChhbmQgbm90IHdoZW4gdGhlIHZlcnkgZmlyc3QgYW5pbWF0aW9uIGlzIGNvbXBsZXRlKS4gKi9cclxuICAgICAgICAgICAgICAgIGlmICh4ID09PSByZXZlcnNlQ2FsbHNDb3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXZlcnNlT3B0aW9ucy5kaXNwbGF5ID0gb3B0cy5kaXNwbGF5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldmVyc2VPcHRpb25zLnZpc2liaWxpdHkgPSBvcHRzLnZpc2liaWxpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJzZU9wdGlvbnMuY29tcGxldGUgPSBvcHRzLmNvbXBsZXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFuaW1hdGUoZWxlbWVudHMsIFwicmV2ZXJzZVwiLCByZXZlcnNlT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgQ2hhaW5pbmdcclxuICAgICAgICAqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFJldHVybiB0aGUgZWxlbWVudHMgYmFjayB0byB0aGUgY2FsbCBjaGFpbiwgd2l0aCB3cmFwcGVkIGVsZW1lbnRzIHRha2luZyBwcmVjZWRlbmNlIGluIGNhc2UgVmVsb2NpdHkgd2FzIGNhbGxlZCB2aWEgdGhlICQuZm4uIGV4dGVuc2lvbi4gKi9cclxuICAgICAgICByZXR1cm4gZ2V0Q2hhaW4oKTtcclxuICAgIH07XHJcblxyXG4gICAgLyogVHVybiBWZWxvY2l0eSBpbnRvIHRoZSBhbmltYXRpb24gZnVuY3Rpb24sIGV4dGVuZGVkIHdpdGggdGhlIHByZS1leGlzdGluZyBWZWxvY2l0eSBvYmplY3QuICovXHJcbiAgICBWZWxvY2l0eSA9ICQuZXh0ZW5kKGFuaW1hdGUsIFZlbG9jaXR5KTtcclxuICAgIC8qIEZvciBsZWdhY3kgc3VwcG9ydCwgYWxzbyBleHBvc2UgdGhlIGxpdGVyYWwgYW5pbWF0ZSBtZXRob2QuICovXHJcbiAgICBWZWxvY2l0eS5hbmltYXRlID0gYW5pbWF0ZTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKipcclxuICAgICAgICBUaW1pbmdcclxuICAgICoqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIFRpY2tlciBmdW5jdGlvbi4gKi9cclxuICAgIHZhciB0aWNrZXIgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHJBRlNoaW07XHJcblxyXG4gICAgLyogSW5hY3RpdmUgYnJvd3NlciB0YWJzIHBhdXNlIHJBRiwgd2hpY2ggcmVzdWx0cyBpbiBhbGwgYWN0aXZlIGFuaW1hdGlvbnMgaW1tZWRpYXRlbHkgc3ByaW50aW5nIHRvIHRoZWlyIGNvbXBsZXRpb24gc3RhdGVzIHdoZW4gdGhlIHRhYiByZWZvY3VzZXMuXHJcbiAgICAgICBUbyBnZXQgYXJvdW5kIHRoaXMsIHdlIGR5bmFtaWNhbGx5IHN3aXRjaCByQUYgdG8gc2V0VGltZW91dCAod2hpY2ggdGhlIGJyb3dzZXIgKmRvZXNuJ3QqIHBhdXNlKSB3aGVuIHRoZSB0YWIgbG9zZXMgZm9jdXMuIFdlIHNraXAgdGhpcyBmb3IgbW9iaWxlXHJcbiAgICAgICBkZXZpY2VzIHRvIGF2b2lkIHdhc3RpbmcgYmF0dGVyeSBwb3dlciBvbiBpbmFjdGl2ZSB0YWJzLiAqL1xyXG4gICAgLyogTm90ZTogVGFiIGZvY3VzIGRldGVjdGlvbiBkb2Vzbid0IHdvcmsgb24gb2xkZXIgdmVyc2lvbnMgb2YgSUUsIGJ1dCB0aGF0J3Mgb2theSBzaW5jZSB0aGV5IGRvbid0IHN1cHBvcnQgckFGIHRvIGJlZ2luIHdpdGguICovXHJcbiAgICBpZiAoIVZlbG9jaXR5LlN0YXRlLmlzTW9iaWxlICYmIGRvY3VtZW50LmhpZGRlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8qIFJlYXNzaWduIHRoZSByQUYgZnVuY3Rpb24gKHdoaWNoIHRoZSBnbG9iYWwgdGljaygpIGZ1bmN0aW9uIHVzZXMpIGJhc2VkIG9uIHRoZSB0YWIncyBmb2N1cyBzdGF0ZS4gKi9cclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xyXG4gICAgICAgICAgICAgICAgdGlja2VyID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBUaGUgdGljayBmdW5jdGlvbiBuZWVkcyBhIHRydXRoeSBmaXJzdCBhcmd1bWVudCBpbiBvcmRlciB0byBwYXNzIGl0cyBpbnRlcm5hbCB0aW1lc3RhbXAgY2hlY2suICovXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKHRydWUpIH0sIDE2KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVGhlIHJBRiBsb29wIGhhcyBiZWVuIHBhdXNlZCBieSB0aGUgYnJvd3Nlciwgc28gd2UgbWFudWFsbHkgcmVzdGFydCB0aGUgdGljay4gKi9cclxuICAgICAgICAgICAgICAgIHRpY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpY2tlciA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgckFGU2hpbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKipcclxuICAgICAgICBUaWNrXHJcbiAgICAqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogTm90ZTogQWxsIGNhbGxzIHRvIFZlbG9jaXR5IGFyZSBwdXNoZWQgdG8gdGhlIFZlbG9jaXR5LlN0YXRlLmNhbGxzIGFycmF5LCB3aGljaCBpcyBmdWxseSBpdGVyYXRlZCB0aHJvdWdoIHVwb24gZWFjaCB0aWNrLiAqL1xyXG4gICAgZnVuY3Rpb24gdGljayAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgLyogQW4gZW1wdHkgdGltZXN0YW1wIGFyZ3VtZW50IGluZGljYXRlcyB0aGF0IHRoaXMgaXMgdGhlIGZpcnN0IHRpY2sgb2NjdXJlbmNlIHNpbmNlIHRpY2tpbmcgd2FzIHR1cm5lZCBvbi5cclxuICAgICAgICAgICBXZSBsZXZlcmFnZSB0aGlzIG1ldGFkYXRhIHRvIGZ1bGx5IGlnbm9yZSB0aGUgZmlyc3QgdGljayBwYXNzIHNpbmNlIFJBRidzIGluaXRpYWwgcGFzcyBpcyBmaXJlZCB3aGVuZXZlclxyXG4gICAgICAgICAgIHRoZSBicm93c2VyJ3MgbmV4dCB0aWNrIHN5bmMgdGltZSBvY2N1cnMsIHdoaWNoIHJlc3VsdHMgaW4gdGhlIGZpcnN0IGVsZW1lbnRzIHN1YmplY3RlZCB0byBWZWxvY2l0eVxyXG4gICAgICAgICAgIGNhbGxzIGJlaW5nIGFuaW1hdGVkIG91dCBvZiBzeW5jIHdpdGggYW55IGVsZW1lbnRzIGFuaW1hdGVkIGltbWVkaWF0ZWx5IHRoZXJlYWZ0ZXIuIEluIHNob3J0LCB3ZSBpZ25vcmVcclxuICAgICAgICAgICB0aGUgZmlyc3QgUkFGIHRpY2sgcGFzcyBzbyB0aGF0IGVsZW1lbnRzIGJlaW5nIGltbWVkaWF0ZWx5IGNvbnNlY3V0aXZlbHkgYW5pbWF0ZWQgLS0gaW5zdGVhZCBvZiBzaW11bHRhbmVvdXNseSBhbmltYXRlZFxyXG4gICAgICAgICAgIGJ5IHRoZSBzYW1lIFZlbG9jaXR5IGNhbGwgLS0gYXJlIHByb3Blcmx5IGJhdGNoZWQgaW50byB0aGUgc2FtZSBpbml0aWFsIFJBRiB0aWNrIGFuZCBjb25zZXF1ZW50bHkgcmVtYWluIGluIHN5bmMgdGhlcmVhZnRlci4gKi9cclxuICAgICAgICBpZiAodGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgIC8qIFdlIGlnbm9yZSBSQUYncyBoaWdoIHJlc29sdXRpb24gdGltZXN0YW1wIHNpbmNlIGl0IGNhbiBiZSBzaWduaWZpY2FudGx5IG9mZnNldCB3aGVuIHRoZSBicm93c2VyIGlzXHJcbiAgICAgICAgICAgICAgIHVuZGVyIGhpZ2ggc3RyZXNzOyB3ZSBvcHQgZm9yIGNob3BwaW5lc3Mgb3ZlciBhbGxvd2luZyB0aGUgYnJvd3NlciB0byBkcm9wIGh1Z2UgY2h1bmtzIG9mIGZyYW1lcy4gKi9cclxuICAgICAgICAgICAgdmFyIHRpbWVDdXJyZW50ID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgQ2FsbCBJdGVyYXRpb25cclxuICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvKiBJdGVyYXRlIHRocm91Z2ggZWFjaCBhY3RpdmUgY2FsbC4gKi9cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNhbGxzTGVuZ3RoID0gVmVsb2NpdHkuU3RhdGUuY2FsbHMubGVuZ3RoOyBpIDwgY2FsbHNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLyogV2hlbiBhIFZlbG9jaXR5IGNhbGwgaXMgY29tcGxldGVkLCBpdHMgVmVsb2NpdHkuU3RhdGUuY2FsbHMgZW50cnkgaXMgc2V0IHRvIGZhbHNlLiBDb250aW51ZSBvbiB0byB0aGUgbmV4dCBjYWxsLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgIENhbGwtV2lkZSBWYXJpYWJsZXNcclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbENvbnRhaW5lciA9IFZlbG9jaXR5LlN0YXRlLmNhbGxzW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGwgPSBjYWxsQ29udGFpbmVyWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSBjYWxsQ29udGFpbmVyWzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVTdGFydCA9IGNhbGxDb250YWluZXJbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RUaWNrID0gISF0aW1lU3RhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogSWYgdGltZVN0YXJ0IGlzIHVuZGVmaW5lZCwgdGhlbiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoYXQgdGhpcyBjYWxsIGhhcyBiZWVuIHByb2Nlc3NlZCBieSB0aWNrKCkuXHJcbiAgICAgICAgICAgICAgICAgICBXZSBhc3NpZ24gdGltZVN0YXJ0IG5vdyBzbyB0aGF0IGl0cyB2YWx1ZSBpcyBhcyBjbG9zZSB0byB0aGUgcmVhbCBhbmltYXRpb24gc3RhcnQgdGltZSBhcyBwb3NzaWJsZS5cclxuICAgICAgICAgICAgICAgICAgIChDb252ZXJzZWx5LCBoYWQgdGltZVN0YXJ0IGJlZW4gZGVmaW5lZCB3aGVuIHRoaXMgY2FsbCB3YXMgYWRkZWQgdG8gVmVsb2NpdHkuU3RhdGUuY2FsbHMsIHRoZSBkZWxheVxyXG4gICAgICAgICAgICAgICAgICAgYmV0d2VlbiB0aGF0IHRpbWUgYW5kIG5vdyB3b3VsZCBjYXVzZSB0aGUgZmlyc3QgZmV3IGZyYW1lcyBvZiB0aGUgdHdlZW4gdG8gYmUgc2tpcHBlZCBzaW5jZVxyXG4gICAgICAgICAgICAgICAgICAgcGVyY2VudENvbXBsZXRlIGlzIGNhbGN1bGF0ZWQgcmVsYXRpdmUgdG8gdGltZVN0YXJ0LikgKi9cclxuICAgICAgICAgICAgICAgIC8qIEZ1cnRoZXIsIHN1YnRyYWN0IDE2bXMgKHRoZSBhcHByb3hpbWF0ZSByZXNvbHV0aW9uIG9mIFJBRikgZnJvbSB0aGUgY3VycmVudCB0aW1lIHZhbHVlIHNvIHRoYXQgdGhlXHJcbiAgICAgICAgICAgICAgICAgICBmaXJzdCB0aWNrIGl0ZXJhdGlvbiBpc24ndCB3YXN0ZWQgYnkgYW5pbWF0aW5nIGF0IDAlIHR3ZWVuIGNvbXBsZXRpb24sIHdoaWNoIHdvdWxkIHByb2R1Y2UgdGhlXHJcbiAgICAgICAgICAgICAgICAgICBzYW1lIHN0eWxlIHZhbHVlIGFzIHRoZSBlbGVtZW50J3MgY3VycmVudCB2YWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGltZVN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZVN0YXJ0ID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbaV1bM10gPSB0aW1lQ3VycmVudCAtIDE2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIFRoZSB0d2VlbidzIGNvbXBsZXRpb24gcGVyY2VudGFnZSBpcyByZWxhdGl2ZSB0byB0aGUgdHdlZW4ncyBzdGFydCB0aW1lLCBub3QgdGhlIHR3ZWVuJ3Mgc3RhcnQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICh3aGljaCB3b3VsZCByZXN1bHQgaW4gdW5wcmVkaWN0YWJsZSB0d2VlbiBkdXJhdGlvbnMgc2luY2UgSmF2YVNjcmlwdCdzIHRpbWVycyBhcmUgbm90IHBhcnRpY3VsYXJseSBhY2N1cmF0ZSkuXHJcbiAgICAgICAgICAgICAgICAgICBBY2NvcmRpbmdseSwgd2UgZW5zdXJlIHRoYXQgcGVyY2VudENvbXBsZXRlIGRvZXMgbm90IGV4Y2VlZCAxLiAqL1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRDb21wbGV0ZSA9IE1hdGgubWluKCh0aW1lQ3VycmVudCAtIHRpbWVTdGFydCkgLyBvcHRzLmR1cmF0aW9uLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgRWxlbWVudCBJdGVyYXRpb25cclxuICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yIGV2ZXJ5IGNhbGwsIGl0ZXJhdGUgdGhyb3VnaCBlYWNoIG9mIHRoZSBlbGVtZW50cyBpbiBpdHMgc2V0LiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNhbGxMZW5ndGggPSBjYWxsLmxlbmd0aDsgaiA8IGNhbGxMZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0d2VlbnNDb250YWluZXIgPSBjYWxsW2pdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gdHdlZW5zQ29udGFpbmVyLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIENoZWNrIHRvIHNlZSBpZiB0aGlzIGVsZW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBtaWR3YXkgdGhyb3VnaCB0aGUgYW5pbWF0aW9uIGJ5IGNoZWNraW5nIGZvciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZWQgZXhpc3RlbmNlIG9mIGl0cyBkYXRhIGNhY2hlLiBJZiBpdCdzIGdvbmUsIHNraXAgYW5pbWF0aW5nIHRoaXMgZWxlbWVudC4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIURhdGEoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtUHJvcGVydHlFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5ICYgVmlzaWJpbGl0eSBUb2dnbGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIElmIHRoZSBkaXNwbGF5IG9wdGlvbiBpcyBzZXQgdG8gbm9uLVwibm9uZVwiLCBzZXQgaXQgdXBmcm9udCBzbyB0aGF0IHRoZSBlbGVtZW50IGNhbiBiZWNvbWUgdmlzaWJsZSBiZWZvcmUgdHdlZW5pbmcgYmVnaW5zLlxyXG4gICAgICAgICAgICAgICAgICAgICAgIChPdGhlcndpc2UsIGRpc3BsYXkncyBcIm5vbmVcIiB2YWx1ZSBpcyBzZXQgaW4gY29tcGxldGVDYWxsKCkgb25jZSB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuKSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLmRpc3BsYXkgIT09IG51bGwgJiYgb3B0cy5kaXNwbGF5ICE9PSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5kaXNwbGF5ID09PSBcImZsZXhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsZXhWYWx1ZXMgPSBbIFwiLXdlYmtpdC1ib3hcIiwgXCItbW96LWJveFwiLCBcIi1tcy1mbGV4Ym94XCIsIFwiLXdlYmtpdC1mbGV4XCIgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZmxleFZhbHVlcywgZnVuY3Rpb24oaSwgZmxleFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIGZsZXhWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIG9wdHMuZGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBTYW1lIGdvZXMgd2l0aCB0aGUgdmlzaWJpbGl0eSBvcHRpb24sIGJ1dCBpdHMgXCJub25lXCIgZXF1aXZhbGVudCBpcyBcImhpZGRlblwiLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCAmJiBvcHRzLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJ2aXNpYmlsaXR5XCIsIG9wdHMudmlzaWJpbGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgUHJvcGVydHkgSXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGb3IgZXZlcnkgZWxlbWVudCwgaXRlcmF0ZSB0aHJvdWdoIGVhY2ggcHJvcGVydHkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gdHdlZW5zQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGU6IEluIGFkZGl0aW9uIHRvIHByb3BlcnR5IHR3ZWVuIGRhdGEsIHR3ZWVuc0NvbnRhaW5lciBjb250YWlucyBhIHJlZmVyZW5jZSB0byBpdHMgYXNzb2NpYXRlZCBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkgIT09IFwiZWxlbWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHdlZW4gPSB0d2VlbnNDb250YWluZXJbcHJvcGVydHldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBFYXNpbmcgY2FuIGVpdGhlciBiZSBhIHByZS1nZW5lcmVhdGVkIGZ1bmN0aW9uIG9yIGEgc3RyaW5nIHRoYXQgcmVmZXJlbmNlcyBhIHByZS1yZWdpc3RlcmVkIGVhc2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIHRoZSBWZWxvY2l0eS5FYXNpbmdzIG9iamVjdC4gSW4gZWl0aGVyIGNhc2UsIHJldHVybiB0aGUgYXBwcm9wcmlhdGUgZWFzaW5nICpmdW5jdGlvbiouICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gVHlwZS5pc1N0cmluZyh0d2Vlbi5lYXNpbmcpID8gVmVsb2NpdHkuRWFzaW5nc1t0d2Vlbi5lYXNpbmddIDogdHdlZW4uZWFzaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEN1cnJlbnQgVmFsdWUgQ2FsY3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBJZiB0aGlzIGlzIHRoZSBsYXN0IHRpY2sgcGFzcyAoaWYgd2UndmUgcmVhY2hlZCAxMDAlIGNvbXBsZXRpb24gZm9yIHRoaXMgdHdlZW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlIHRoYXQgY3VycmVudFZhbHVlIGlzIGV4cGxpY2l0bHkgc2V0IHRvIGl0cyB0YXJnZXQgZW5kVmFsdWUgc28gdGhhdCBpdCdzIG5vdCBzdWJqZWN0ZWQgdG8gYW55IHJvdW5kaW5nLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnRDb21wbGV0ZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHR3ZWVuLmVuZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogT3RoZXJ3aXNlLCBjYWxjdWxhdGUgY3VycmVudFZhbHVlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRlbHRhIGZyb20gc3RhcnRWYWx1ZS4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlID0gdHdlZW4uc3RhcnRWYWx1ZSArICgodHdlZW4uZW5kVmFsdWUgLSB0d2Vlbi5zdGFydFZhbHVlKSAqIGVhc2luZyhwZXJjZW50Q29tcGxldGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSWYgbm8gdmFsdWUgY2hhbmdlIGlzIG9jY3VycmluZywgZG9uJ3QgcHJvY2VlZCB3aXRoIERPTSB1cGRhdGluZy4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0VGljayAmJiAoY3VycmVudFZhbHVlID09PSB0d2Vlbi5jdXJyZW50VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5jdXJyZW50VmFsdWUgPSBjdXJyZW50VmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSG9va3M6IFBhcnQgSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEZvciBob29rZWQgcHJvcGVydGllcywgdGhlIG5ld2x5LXVwZGF0ZWQgcm9vdFByb3BlcnR5VmFsdWVDYWNoZSBpcyBjYWNoZWQgb250byB0aGUgZWxlbWVudCBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igc3Vic2VxdWVudCBob29rcyBpbiB0aGlzIGNhbGwgdGhhdCBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIHJvb3QgcHJvcGVydHkuIElmIHdlIGRpZG4ndCBjYWNoZSB0aGUgdXBkYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFByb3BlcnR5VmFsdWUsIGVhY2ggc3Vic2VxdWVudCB1cGRhdGUgdG8gdGhlIHJvb3QgcHJvcGVydHkgaW4gdGhpcyB0aWNrIHBhc3Mgd291bGQgcmVzZXQgdGhlIHByZXZpb3VzIGhvb2snc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcyB0byByb290UHJvcGVydHlWYWx1ZSBwcmlvciB0byBpbmplY3Rpb24uIEEgbmljZSBwZXJmb3JtYW5jZSBieXByb2R1Y3Qgb2Ygcm9vdFByb3BlcnR5VmFsdWUgY2FjaGluZyBpcyB0aGF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzZXF1ZW50bHkgY2hhaW5lZCBhbmltYXRpb25zIHVzaW5nIHRoZSBzYW1lIGhvb2tSb290IGJ1dCBhIGRpZmZlcmVudCBob29rIGNhbiB1c2UgdGhpcyBjYWNoZWQgcm9vdFByb3BlcnR5VmFsdWUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ1NTLkhvb2tzLnJlZ2lzdGVyZWRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhvb2tSb290ID0gQ1NTLkhvb2tzLmdldFJvb3QocHJvcGVydHkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UHJvcGVydHlWYWx1ZUNhY2hlID0gRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW2hvb2tSb290XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW4ucm9vdFByb3BlcnR5VmFsdWUgPSByb290UHJvcGVydHlWYWx1ZUNhY2hlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET00gVXBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzZXRQcm9wZXJ0eVZhbHVlKCkgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcHJvcGVydHkgbmFtZSBhbmQgcHJvcGVydHkgdmFsdWUgcG9zdCBhbnkgbm9ybWFsaXphdGlvbiB0aGF0IG1heSBoYXZlIGJlZW4gcGVyZm9ybWVkLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm90ZTogVG8gc29sdmUgYW4gSUU8PTggcG9zaXRpb25pbmcgYnVnLCB0aGUgdW5pdCB0eXBlIGlzIGRyb3BwZWQgd2hlbiBzZXR0aW5nIGEgcHJvcGVydHkgdmFsdWUgb2YgMC4gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGp1c3RlZFNldERhdGEgPSBDU1Muc2V0UHJvcGVydHlWYWx1ZShlbGVtZW50LCAvKiBTRVQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5jdXJyZW50VmFsdWUgKyAocGFyc2VGbG9hdChjdXJyZW50VmFsdWUpID09PSAwID8gXCJcIiA6IHR3ZWVuLnVuaXRUeXBlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5yb290UHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5zY3JvbGxEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSG9va3M6IFBhcnQgSUlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogTm93IHRoYXQgd2UgaGF2ZSB0aGUgaG9vaydzIHVwZGF0ZWQgcm9vdFByb3BlcnR5VmFsdWUgKHRoZSBwb3N0LXByb2Nlc3NlZCB2YWx1ZSBwcm92aWRlZCBieSBhZGp1c3RlZFNldERhdGEpLCBjYWNoZSBpdCBvbnRvIHRoZSBlbGVtZW50LiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ib29rcy5yZWdpc3RlcmVkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFNpbmNlIGFkanVzdGVkU2V0RGF0YSBjb250YWlucyBub3JtYWxpemVkIGRhdGEgcmVhZHkgZm9yIERPTSB1cGRhdGluZywgdGhlIHJvb3RQcm9wZXJ0eVZhbHVlIG5lZWRzIHRvIGJlIHJlLWV4dHJhY3RlZCBmcm9tIGl0cyBub3JtYWxpemVkIGZvcm0uID8/ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENTUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2hvb2tSb290XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbaG9va1Jvb3RdID0gQ1NTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbaG9va1Jvb3RdKFwiZXh0cmFjdFwiLCBudWxsLCBhZGp1c3RlZFNldERhdGFbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGEoZWxlbWVudCkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtob29rUm9vdF0gPSBhZGp1c3RlZFNldERhdGFbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBGbGFnIHdoZXRoZXIgYSB0cmFuc2Zvcm0gcHJvcGVydHkgaXMgYmVpbmcgYW5pbWF0ZWQgc28gdGhhdCBmbHVzaFRyYW5zZm9ybUNhY2hlKCkgY2FuIGJlIHRyaWdnZXJlZCBvbmNlIHRoaXMgdGljayBwYXNzIGlzIGNvbXBsZXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkU2V0RGF0YVswXSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlSEFcclxuICAgICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiBtb2JpbGVIQSBpcyBlbmFibGVkLCBzZXQgdGhlIHRyYW5zbGF0ZTNkIHRyYW5zZm9ybSB0byBudWxsIHRvIGZvcmNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICBJdCdzIHNhZmUgdG8gb3ZlcnJpZGUgdGhpcyBwcm9wZXJ0eSBzaW5jZSBWZWxvY2l0eSBkb2Vzbid0IGFjdHVhbGx5IHN1cHBvcnQgaXRzIGFuaW1hdGlvbiAoaG9va3MgYXJlIHVzZWQgaW4gaXRzIHBsYWNlKS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tb2JpbGVIQSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBEb24ndCBzZXQgdGhlIG51bGwgdHJhbnNmb3JtIGhhY2sgaWYgd2UndmUgYWxyZWFkeSBkb25lIHNvLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBBbGwgZW50cmllcyBvbiB0aGUgdHJhbnNmb3JtQ2FjaGUgb2JqZWN0IGFyZSBsYXRlciBjb25jYXRlbmF0ZWQgaW50byBhIHNpbmdsZSB0cmFuc2Zvcm0gc3RyaW5nIHZpYSBmbHVzaFRyYW5zZm9ybUNhY2hlKCkuICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkID0gXCIoMHB4LCAwcHgsIDBweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Qcm9wZXJ0eUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1Qcm9wZXJ0eUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuZmx1c2hUcmFuc2Zvcm1DYWNoZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogVGhlIG5vbi1cIm5vbmVcIiBkaXNwbGF5IHZhbHVlIGlzIG9ubHkgYXBwbGllZCB0byBhbiBlbGVtZW50IG9uY2UgLS0gd2hlbiBpdHMgYXNzb2NpYXRlZCBjYWxsIGlzIGZpcnN0IHRpY2tlZCB0aHJvdWdoLlxyXG4gICAgICAgICAgICAgICAgICAgQWNjb3JkaW5nbHksIGl0J3Mgc2V0IHRvIGZhbHNlIHNvIHRoYXQgaXQgaXNuJ3QgcmUtcHJvY2Vzc2VkIGJ5IHRoaXMgY2FsbCBpbiB0aGUgbmV4dCB0aWNrLiAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMuZGlzcGxheSAhPT0gdW5kZWZpbmVkICYmIG9wdHMuZGlzcGxheSAhPT0gXCJub25lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tpXVsyXS5kaXNwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0cy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQgJiYgb3B0cy52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuY2FsbHNbaV1bMl0udmlzaWJpbGl0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvKiBQYXNzIHRoZSBlbGVtZW50cyBhbmQgdGhlIHRpbWluZyBkYXRhIChwZXJjZW50Q29tcGxldGUsIG1zUmVtYWluaW5nLCBhbmQgdGltZVN0YXJ0KSBpbnRvIHRoZSBwcm9ncmVzcyBjYWxsYmFjay4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5wcm9ncmVzcy5jYWxsKGNhbGxDb250YWluZXJbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxDb250YWluZXJbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgKHRpbWVTdGFydCArIG9wdHMuZHVyYXRpb24pIC0gdGltZUN1cnJlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lU3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgY2FsbCBoYXMgZmluaXNoZWQgdHdlZW5pbmcsIHBhc3MgaXRzIGluZGV4IHRvIGNvbXBsZXRlQ2FsbCgpIHRvIGhhbmRsZSBjYWxsIGNsZWFudXAuICovXHJcbiAgICAgICAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYWxsKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBOb3RlOiBjb21wbGV0ZUNhbGwoKSBzZXRzIHRoZSBpc1RpY2tpbmcgZmxhZyB0byBmYWxzZSB3aGVuIHRoZSBsYXN0IGNhbGwgb24gVmVsb2NpdHkuU3RhdGUuY2FsbHMgaGFzIGNvbXBsZXRlZC4gKi9cclxuICAgICAgICBpZiAoVmVsb2NpdHkuU3RhdGUuaXNUaWNraW5nKSB7XHJcbiAgICAgICAgICAgIHRpY2tlcih0aWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICBDYWxsIENvbXBsZXRpb25cclxuICAgICoqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogTm90ZTogVW5saWtlIHRpY2soKSwgd2hpY2ggcHJvY2Vzc2VzIGFsbCBhY3RpdmUgY2FsbHMgYXQgb25jZSwgY2FsbCBjb21wbGV0aW9uIGlzIGhhbmRsZWQgb24gYSBwZXItY2FsbCBiYXNpcy4gKi9cclxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQ2FsbCAoY2FsbEluZGV4LCBpc1N0b3BwZWQpIHtcclxuICAgICAgICAvKiBFbnN1cmUgdGhlIGNhbGwgZXhpc3RzLiAqL1xyXG4gICAgICAgIGlmICghVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBQdWxsIHRoZSBtZXRhZGF0YSBmcm9tIHRoZSBjYWxsLiAqL1xyXG4gICAgICAgIHZhciBjYWxsID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XVswXSxcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzFdLFxyXG4gICAgICAgICAgICBvcHRzID0gVmVsb2NpdHkuU3RhdGUuY2FsbHNbY2FsbEluZGV4XVsyXSxcclxuICAgICAgICAgICAgcmVzb2x2ZXIgPSBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdWzRdO1xyXG5cclxuICAgICAgICB2YXIgcmVtYWluaW5nQ2FsbHNFeGlzdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIEVsZW1lbnQgRmluYWxpemF0aW9uXHJcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNhbGxMZW5ndGggPSBjYWxsLmxlbmd0aDsgaSA8IGNhbGxMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGNhbGxbaV0uZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIC8qIElmIHRoZSB1c2VyIHNldCBkaXNwbGF5IHRvIFwibm9uZVwiIChpbnRlbmRpbmcgdG8gaGlkZSB0aGUgZWxlbWVudCksIHNldCBpdCBub3cgdGhhdCB0aGUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQuICovXHJcbiAgICAgICAgICAgIC8qIE5vdGU6IGRpc3BsYXk6bm9uZSBpc24ndCBzZXQgd2hlbiBjYWxscyBhcmUgbWFudWFsbHkgc3RvcHBlZCAodmlhIFZlbG9jaXR5KFwic3RvcFwiKS4gKi9cclxuICAgICAgICAgICAgLyogTm90ZTogRGlzcGxheSBnZXRzIGlnbm9yZWQgd2l0aCBcInJldmVyc2VcIiBjYWxscyBhbmQgaW5maW5pdGUgbG9vcHMsIHNpbmNlIHRoaXMgYmVoYXZpb3Igd291bGQgYmUgdW5kZXNpcmFibGUuICovXHJcbiAgICAgICAgICAgIGlmICghaXNTdG9wcGVkICYmICFvcHRzLmxvb3ApIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLnNldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgXCJkaXNwbGF5XCIsIG9wdHMuZGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMudmlzaWJpbGl0eSA9PT0gXCJoaWRkZW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIENTUy5zZXRQcm9wZXJ0eVZhbHVlKGVsZW1lbnQsIFwidmlzaWJpbGl0eVwiLCBvcHRzLnZpc2liaWxpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiB0aGUgZWxlbWVudCdzIHF1ZXVlIGlzIGVtcHR5IChpZiBvbmx5IHRoZSBcImlucHJvZ3Jlc3NcIiBpdGVtIGlzIGxlZnQgYXQgcG9zaXRpb24gMCkgb3IgaWYgaXRzIHF1ZXVlIGlzIGFib3V0IHRvIHJ1blxyXG4gICAgICAgICAgICAgICBhIG5vbi1WZWxvY2l0eS1pbml0aWF0ZWQgZW50cnksIHR1cm4gb2ZmIHRoZSBpc0FuaW1hdGluZyBmbGFnLiBBIG5vbi1WZWxvY2l0eS1pbml0aWF0aWVkIHF1ZXVlIGVudHJ5J3MgbG9naWMgbWlnaHQgYWx0ZXJcclxuICAgICAgICAgICAgICAgYW4gZWxlbWVudCdzIENTUyB2YWx1ZXMgYW5kIHRoZXJlYnkgY2F1c2UgVmVsb2NpdHkncyBjYWNoZWQgdmFsdWUgZGF0YSB0byBnbyBzdGFsZS4gVG8gZGV0ZWN0IGlmIGEgcXVldWUgZW50cnkgd2FzIGluaXRpYXRlZCBieSBWZWxvY2l0eSxcclxuICAgICAgICAgICAgICAgd2UgY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2Ygb3VyIHNwZWNpYWwgVmVsb2NpdHkucXVldWVFbnRyeUZsYWcgZGVjbGFyYXRpb24sIHdoaWNoIG1pbmlmaWVycyB3b24ndCByZW5hbWUgc2luY2UgdGhlIGZsYWdcclxuICAgICAgICAgICAgICAgaXMgYXNzaWduZWQgdG8galF1ZXJ5J3MgZ2xvYmFsICQgb2JqZWN0IGFuZCB0aHVzIGV4aXN0cyBvdXQgb2YgVmVsb2NpdHkncyBvd24gc2NvcGUuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmxvb3AgIT09IHRydWUgJiYgKCQucXVldWUoZWxlbWVudClbMV0gPT09IHVuZGVmaW5lZCB8fCAhL1xcLnZlbG9jaXR5UXVldWVFbnRyeUZsYWcvaS50ZXN0KCQucXVldWUoZWxlbWVudClbMV0pKSkge1xyXG4gICAgICAgICAgICAgICAgLyogVGhlIGVsZW1lbnQgbWF5IGhhdmUgYmVlbiBkZWxldGVkLiBFbnN1cmUgdGhhdCBpdHMgZGF0YSBjYWNoZSBzdGlsbCBleGlzdHMgYmVmb3JlIGFjdGluZyBvbiBpdC4gKi9cclxuICAgICAgICAgICAgICAgIGlmIChEYXRhKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5pc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIENsZWFyIHRoZSBlbGVtZW50J3Mgcm9vdFByb3BlcnR5VmFsdWVDYWNoZSwgd2hpY2ggd2lsbCBiZWNvbWUgc3RhbGUuICovXHJcbiAgICAgICAgICAgICAgICAgICAgRGF0YShlbGVtZW50KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1IQVByb3BlcnR5RXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgYW55IDNEIHRyYW5zZm9ybSBzdWJwcm9wZXJ0eSBpcyBhdCBpdHMgZGVmYXVsdCB2YWx1ZSAocmVnYXJkbGVzcyBvZiB1bml0IHR5cGUpLCByZW1vdmUgaXQuICovXHJcbiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKENTUy5MaXN0cy50cmFuc2Zvcm1zM0QsIGZ1bmN0aW9uKGksIHRyYW5zZm9ybU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9IC9ec2NhbGUvLnRlc3QodHJhbnNmb3JtTmFtZSkgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGVbdHJhbnNmb3JtTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0YShlbGVtZW50KS50cmFuc2Zvcm1DYWNoZVt0cmFuc2Zvcm1OYW1lXSAhPT0gdW5kZWZpbmVkICYmIG5ldyBSZWdFeHAoXCJeXFxcXChcIiArIGRlZmF1bHRWYWx1ZSArIFwiW14uXVwiKS50ZXN0KGN1cnJlbnRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUhBUHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBEYXRhKGVsZW1lbnQpLnRyYW5zZm9ybUNhY2hlW3RyYW5zZm9ybU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIE1vYmlsZSBkZXZpY2VzIGhhdmUgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIHJlbW92ZWQgYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uIGluIG9yZGVyIHRvIGF2b2lkIGhvZ2dpbmcgdGhlIEdQVSdzIG1lbW9yeS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tb2JpbGVIQSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1IQVByb3BlcnR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIERhdGEoZWxlbWVudCkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKiBGbHVzaCB0aGUgc3VicHJvcGVydHkgcmVtb3ZhbHMgdG8gdGhlIERPTS4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtSEFQcm9wZXJ0eUV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDU1MuZmx1c2hUcmFuc2Zvcm1DYWNoZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgXCJ2ZWxvY2l0eS1hbmltYXRpbmdcIiBpbmRpY2F0b3IgY2xhc3MuICovXHJcbiAgICAgICAgICAgICAgICAgICAgQ1NTLlZhbHVlcy5yZW1vdmVDbGFzcyhlbGVtZW50LCBcInZlbG9jaXR5LWFuaW1hdGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBPcHRpb246IENvbXBsZXRlXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIENvbXBsZXRlIGlzIGZpcmVkIG9uY2UgcGVyIGNhbGwgKG5vdCBvbmNlIHBlciBlbGVtZW50KSBhbmQgaXMgcGFzc2VkIHRoZSBmdWxsIHJhdyBET00gZWxlbWVudCBzZXQgYXMgYm90aCBpdHMgY29udGV4dCBhbmQgaXRzIGZpcnN0IGFyZ3VtZW50LiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBDYWxsYmFja3MgYXJlbid0IGZpcmVkIHdoZW4gY2FsbHMgYXJlIG1hbnVhbGx5IHN0b3BwZWQgKHZpYSBWZWxvY2l0eShcInN0b3BcIikuICovXHJcbiAgICAgICAgICAgIGlmICghaXNTdG9wcGVkICYmIG9wdHMuY29tcGxldGUgJiYgIW9wdHMubG9vcCAmJiAoaSA9PT0gY2FsbExlbmd0aCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBXZSB0aHJvdyBjYWxsYmFja3MgaW4gYSBzZXRUaW1lb3V0IHNvIHRoYXQgdGhyb3duIGVycm9ycyBkb24ndCBoYWx0IHRoZSBleGVjdXRpb24gb2YgVmVsb2NpdHkgaXRzZWxmLiAqL1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRzLmNvbXBsZXRlLmNhbGwoZWxlbWVudHMsIGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZXJyb3I7IH0sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBQcm9taXNlIFJlc29sdmluZ1xyXG4gICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLyogTm90ZTogSW5maW5pdGUgbG9vcHMgZG9uJ3QgcmV0dXJuIHByb21pc2VzLiAqL1xyXG4gICAgICAgICAgICBpZiAocmVzb2x2ZXIgJiYgb3B0cy5sb29wICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlcihlbGVtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICAgICAgICAgIE9wdGlvbjogTG9vcCAoSW5maW5pdGUpXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICBpZiAob3B0cy5sb29wID09PSB0cnVlICYmICFpc1N0b3BwZWQpIHtcclxuICAgICAgICAgICAgICAgIC8qIElmIGEgcm90YXRlWC9ZL1ogcHJvcGVydHkgaXMgYmVpbmcgYW5pbWF0ZWQgdG8gMzYwIGRlZyB3aXRoIGxvb3A6dHJ1ZSwgc3dhcCB0d2VlbiBzdGFydC9lbmQgdmFsdWVzIHRvIGVuYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgY29udGludW91cyBpdGVyYXRpdmUgcm90YXRpb24gbG9vcGluZy4gKE90aGVyaXNlLCB0aGUgZWxlbWVudCB3b3VsZCBqdXN0IHJvdGF0ZSBiYWNrIGFuZCBmb3J0aC4pICovXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goRGF0YShlbGVtZW50KS50d2VlbnNDb250YWluZXIsIGZ1bmN0aW9uKHByb3BlcnR5TmFtZSwgdHdlZW5Db250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoL15yb3RhdGUvLnRlc3QocHJvcGVydHlOYW1lKSAmJiBwYXJzZUZsb2F0KHR3ZWVuQ29udGFpbmVyLmVuZFZhbHVlKSA9PT0gMzYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuQ29udGFpbmVyLmVuZFZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW5Db250YWluZXIuc3RhcnRWYWx1ZSA9IDM2MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBWZWxvY2l0eShlbGVtZW50LCBcInJldmVyc2VcIiwgeyBsb29wOiB0cnVlLCBkZWxheTogb3B0cy5kZWxheSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgICBEZXF1ZXVlaW5nXHJcbiAgICAgICAgICAgICoqKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgIC8qIEZpcmUgdGhlIG5leHQgY2FsbCBpbiB0aGUgcXVldWUgc28gbG9uZyBhcyB0aGlzIGNhbGwncyBxdWV1ZSB3YXNuJ3Qgc2V0IHRvIGZhbHNlICh0byB0cmlnZ2VyIGEgcGFyYWxsZWwgYW5pbWF0aW9uKSxcclxuICAgICAgICAgICAgICAgd2hpY2ggd291bGQgaGF2ZSBhbHJlYWR5IGNhdXNlZCB0aGUgbmV4dCBjYWxsIHRvIGZpcmUuIE5vdGU6IEV2ZW4gaWYgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uIHF1ZXVlIGhhcyBiZWVuIHJlYWNoZWQsXHJcbiAgICAgICAgICAgICAgICQuZGVxdWV1ZSgpIG11c3Qgc3RpbGwgYmUgY2FsbGVkIGluIG9yZGVyIHRvIGNvbXBsZXRlbHkgY2xlYXIgalF1ZXJ5J3MgYW5pbWF0aW9uIHF1ZXVlLiAqL1xyXG4gICAgICAgICAgICBpZiAob3B0cy5xdWV1ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICQuZGVxdWV1ZShlbGVtZW50LCBvcHRzLnF1ZXVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgIENhbGxzIEFycmF5IENsZWFudXBcclxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgIC8qIFNpbmNlIHRoaXMgY2FsbCBpcyBjb21wbGV0ZSwgc2V0IGl0IHRvIGZhbHNlIHNvIHRoYXQgdGhlIHJBRiB0aWNrIHNraXBzIGl0LiBUaGlzIGFycmF5IGlzIGxhdGVyIGNvbXBhY3RlZCB2aWEgY29tcGFjdFNwYXJzZUFycmF5KCkuXHJcbiAgICAgICAgICAoRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHRoZSBjYWxsIGlzIHNldCB0byBmYWxzZSBpbnN0ZWFkIG9mIGJlaW5nIGRlbGV0ZWQgZnJvbSB0aGUgYXJyYXk6IGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL3NwZWVkL3Y4LykgKi9cclxuICAgICAgICBWZWxvY2l0eS5TdGF0ZS5jYWxsc1tjYWxsSW5kZXhdID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qIEl0ZXJhdGUgdGhyb3VnaCB0aGUgY2FsbHMgYXJyYXkgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgd2FzIHRoZSBmaW5hbCBpbi1wcm9ncmVzcyBhbmltYXRpb24uXHJcbiAgICAgICAgICAgSWYgc28sIHNldCBhIGZsYWcgdG8gZW5kIHRpY2tpbmcgYW5kIGNsZWFyIHRoZSBjYWxscyBhcnJheS4gKi9cclxuICAgICAgICBmb3IgKHZhciBqID0gMCwgY2FsbHNMZW5ndGggPSBWZWxvY2l0eS5TdGF0ZS5jYWxscy5sZW5ndGg7IGogPCBjYWxsc0xlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGlmIChWZWxvY2l0eS5TdGF0ZS5jYWxsc1tqXSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0NhbGxzRXhpc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVtYWluaW5nQ2FsbHNFeGlzdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLyogdGljaygpIHdpbGwgZGV0ZWN0IHRoaXMgZmxhZyB1cG9uIGl0cyBuZXh0IGl0ZXJhdGlvbiBhbmQgc3Vic2VxdWVudGx5IHR1cm4gaXRzZWxmIG9mZi4gKi9cclxuICAgICAgICAgICAgVmVsb2NpdHkuU3RhdGUuaXNUaWNraW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKiBDbGVhciB0aGUgY2FsbHMgYXJyYXkgc28gdGhhdCBpdHMgbGVuZ3RoIGlzIHJlc2V0LiAqL1xyXG4gICAgICAgICAgICBkZWxldGUgVmVsb2NpdHkuU3RhdGUuY2FsbHM7XHJcbiAgICAgICAgICAgIFZlbG9jaXR5LlN0YXRlLmNhbGxzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKipcclxuICAgICAgICBGcmFtZXdvcmtzXHJcbiAgICAqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgLyogQm90aCBqUXVlcnkgYW5kIFplcHRvIGFsbG93IHRoZWlyICQuZm4gb2JqZWN0IHRvIGJlIGV4dGVuZGVkIHRvIGFsbG93IHdyYXBwZWQgZWxlbWVudHMgdG8gYmUgc3ViamVjdGVkIHRvIHBsdWdpbiBjYWxscy5cclxuICAgICAgIElmIGVpdGhlciBmcmFtZXdvcmsgaXMgbG9hZGVkLCByZWdpc3RlciBhIFwidmVsb2NpdHlcIiBleHRlbnNpb24gcG9pbnRpbmcgdG8gVmVsb2NpdHkncyBjb3JlIGFuaW1hdGUoKSBtZXRob2QuICBWZWxvY2l0eVxyXG4gICAgICAgYWxzbyByZWdpc3RlcnMgaXRzZWxmIG9udG8gYSBnbG9iYWwgY29udGFpbmVyICh3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byB8fCB3aW5kb3cpIHNvIHRoYXQgY2VydGFpbiBmZWF0dXJlcyBhcmVcclxuICAgICAgIGFjY2Vzc2libGUgYmV5b25kIGp1c3QgYSBwZXItZWxlbWVudCBzY29wZS4gVGhpcyBtYXN0ZXIgb2JqZWN0IGNvbnRhaW5zIGFuIC5hbmltYXRlKCkgbWV0aG9kLCB3aGljaCBpcyBsYXRlciBhc3NpZ25lZCB0byAkLmZuXHJcbiAgICAgICAoaWYgalF1ZXJ5IG9yIFplcHRvIGFyZSBwcmVzZW50KS4gQWNjb3JkaW5nbHksIFZlbG9jaXR5IGNhbiBib3RoIGFjdCBvbiB3cmFwcGVkIERPTSBlbGVtZW50cyBhbmQgc3RhbmQgYWxvbmUgZm9yIHRhcmdldGluZyByYXcgRE9NIGVsZW1lbnRzLiAqL1xyXG4gICAgZ2xvYmFsLlZlbG9jaXR5ID0gVmVsb2NpdHk7XHJcblxyXG4gICAgaWYgKGdsb2JhbCAhPT0gd2luZG93KSB7XHJcbiAgICAgICAgLyogQXNzaWduIHRoZSBlbGVtZW50IGZ1bmN0aW9uIHRvIFZlbG9jaXR5J3MgY29yZSBhbmltYXRlKCkgbWV0aG9kLiAqL1xyXG4gICAgICAgIGdsb2JhbC5mbi52ZWxvY2l0eSA9IGFuaW1hdGU7XHJcbiAgICAgICAgLyogQXNzaWduIHRoZSBvYmplY3QgZnVuY3Rpb24ncyBkZWZhdWx0cyB0byBWZWxvY2l0eSdzIGdsb2JhbCBkZWZhdWx0cyBvYmplY3QuICovXHJcbiAgICAgICAgZ2xvYmFsLmZuLnZlbG9jaXR5LmRlZmF1bHRzID0gVmVsb2NpdHkuZGVmYXVsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgICBQYWNrYWdlZCBSZWRpcmVjdHNcclxuICAgICoqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIC8qIHNsaWRlVXAsIHNsaWRlRG93biAqL1xyXG4gICAgJC5lYWNoKFsgXCJEb3duXCIsIFwiVXBcIiBdLCBmdW5jdGlvbihpLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBWZWxvY2l0eS5SZWRpcmVjdHNbXCJzbGlkZVwiICsgZGlyZWN0aW9uXSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBlbGVtZW50c0luZGV4LCBlbGVtZW50c1NpemUsIGVsZW1lbnRzLCBwcm9taXNlRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgIGJlZ2luID0gb3B0cy5iZWdpbixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlID0gb3B0cy5jb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWVzID0geyBoZWlnaHQ6IFwiXCIsIG1hcmdpblRvcDogXCJcIiwgbWFyZ2luQm90dG9tOiBcIlwiLCBwYWRkaW5nVG9wOiBcIlwiLCBwYWRkaW5nQm90dG9tOiBcIlwiIH0sXHJcbiAgICAgICAgICAgICAgICBpbmxpbmVWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLyogU2hvdyB0aGUgZWxlbWVudCBiZWZvcmUgc2xpZGVEb3duIGJlZ2lucyBhbmQgaGlkZSB0aGUgZWxlbWVudCBhZnRlciBzbGlkZVVwIGNvbXBsZXRlcy4gKi9cclxuICAgICAgICAgICAgICAgIC8qIE5vdGU6IElubGluZSBlbGVtZW50cyBjYW5ub3QgaGF2ZSBkaW1lbnNpb25zIGFuaW1hdGVkLCBzbyB0aGV5J3JlIHJldmVydGVkIHRvIGlubGluZS1ibG9jay4gKi9cclxuICAgICAgICAgICAgICAgIG9wdHMuZGlzcGxheSA9IChkaXJlY3Rpb24gPT09IFwiRG93blwiID8gKFZlbG9jaXR5LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZWxlbWVudCkgPT09IFwiaW5saW5lXCIgPyBcImlubGluZS1ibG9ja1wiIDogXCJibG9ja1wiKSA6IFwibm9uZVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3B0cy5iZWdpbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLyogSWYgdGhlIHVzZXIgcGFzc2VkIGluIGEgYmVnaW4gY2FsbGJhY2ssIGZpcmUgaXQgbm93LiAqL1xyXG4gICAgICAgICAgICAgICAgYmVnaW4gJiYgYmVnaW4uY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIENhY2hlIHRoZSBlbGVtZW50cycgb3JpZ2luYWwgdmVydGljYWwgZGltZW5zaW9uYWwgcHJvcGVydHkgdmFsdWVzIHNvIHRoYXQgd2UgY2FuIGFuaW1hdGUgYmFjayB0byB0aGVtLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gY29tcHV0ZWRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiBDYWNoZSBhbGwgaW5saW5lIHZhbHVlcywgd2UgcmVzZXQgdG8gdXBvbiBhbmltYXRpb24gY29tcGxldGlvbi4gKi9cclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVWYWx1ZXNbcHJvcGVydHldID0gZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qIEZvciBzbGlkZURvd24sIHVzZSBmb3JjZWZlZWRpbmcgdG8gYW5pbWF0ZSBhbGwgdmVydGljYWwgcHJvcGVydGllcyBmcm9tIDAuIEZvciBzbGlkZVVwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHVzZSBmb3JjZWZlZWRpbmcgdG8gc3RhcnQgZnJvbSBjb21wdXRlZCB2YWx1ZXMgYW5kIGFuaW1hdGUgZG93biB0byAwLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gVmVsb2NpdHkuQ1NTLmdldFByb3BlcnR5VmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWVzW3Byb3BlcnR5XSA9IChkaXJlY3Rpb24gPT09IFwiRG93blwiKSA/IFsgcHJvcGVydHlWYWx1ZSwgMCBdIDogWyAwLCBwcm9wZXJ0eVZhbHVlIF07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogRm9yY2UgdmVydGljYWwgb3ZlcmZsb3cgY29udGVudCB0byBjbGlwIHNvIHRoYXQgc2xpZGluZyB3b3JrcyBhcyBleHBlY3RlZC4gKi9cclxuICAgICAgICAgICAgICAgIGlubGluZVZhbHVlcy5vdmVyZmxvdyA9IGVsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLyogUmVzZXQgZWxlbWVudCB0byBpdHMgcHJlLXNsaWRlIGlubGluZSB2YWx1ZXMgb25jZSBpdHMgc2xpZGUgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLiAqL1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gaW5saW5lVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV0gPSBpbmxpbmVWYWx1ZXNbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIElmIHRoZSB1c2VyIHBhc3NlZCBpbiBhIGNvbXBsZXRlIGNhbGxiYWNrLCBmaXJlIGl0IG5vdy4gKi9cclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlICYmIGNvbXBsZXRlLmNhbGwoZWxlbWVudHMsIGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VEYXRhICYmIHByb21pc2VEYXRhLnJlc29sdmVyKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFZlbG9jaXR5KGVsZW1lbnQsIGNvbXB1dGVkVmFsdWVzLCBvcHRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyogZmFkZUluLCBmYWRlT3V0ICovXHJcbiAgICAkLmVhY2goWyBcIkluXCIsIFwiT3V0XCIgXSwgZnVuY3Rpb24oaSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgVmVsb2NpdHkuUmVkaXJlY3RzW1wiZmFkZVwiICsgZGlyZWN0aW9uXSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBlbGVtZW50c0luZGV4LCBlbGVtZW50c1NpemUsIGVsZW1lbnRzLCBwcm9taXNlRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKSxcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXNNYXAgPSB7IG9wYWNpdHk6IChkaXJlY3Rpb24gPT09IFwiSW5cIikgPyAxIDogMCB9LFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxDb21wbGV0ZSA9IG9wdHMuY29tcGxldGU7XHJcblxyXG4gICAgICAgICAgICAvKiBTaW5jZSByZWRpcmVjdHMgYXJlIHRyaWdnZXJlZCBpbmRpdmlkdWFsbHkgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgYW5pbWF0ZWQgc2V0LCBhdm9pZCByZXBlYXRlZGx5IHRyaWdnZXJpbmdcclxuICAgICAgICAgICAgICAgY2FsbGJhY2tzIGJ5IGZpcmluZyB0aGVtIG9ubHkgd2hlbiB0aGUgZmluYWwgZWxlbWVudCBoYXMgYmVlbiByZWFjaGVkLiAqL1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNJbmRleCAhPT0gZWxlbWVudHNTaXplIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IG9wdHMuYmVnaW4gPSBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29tcGxldGUuY2FsbChlbGVtZW50cywgZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZURhdGEgJiYgcHJvbWlzZURhdGEucmVzb2x2ZXIoZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBhIGRpc3BsYXkgd2FzIHBhc3NlZCBpbiwgdXNlIGl0LiBPdGhlcndpc2UsIGRlZmF1bHQgdG8gXCJub25lXCIgZm9yIGZhZGVPdXQgb3IgdGhlIGVsZW1lbnQtc3BlY2lmaWMgZGVmYXVsdCBmb3IgZmFkZUluLiAqL1xyXG4gICAgICAgICAgICAvKiBOb3RlOiBXZSBhbGxvdyB1c2VycyB0byBwYXNzIGluIFwibnVsbFwiIHRvIHNraXAgZGlzcGxheSBzZXR0aW5nIGFsdG9nZXRoZXIuICovXHJcbiAgICAgICAgICAgIGlmIChvcHRzLmRpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb3B0cy5kaXNwbGF5ID0gKGRpcmVjdGlvbiA9PT0gXCJJblwiID8gXCJhdXRvXCIgOiBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMsIHByb3BlcnRpZXNNYXAsIG9wdHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gVmVsb2NpdHk7XHJcbn0oKHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvIHx8IHdpbmRvdyksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG59KSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqXHJcbiAgIEtub3duIElzc3Vlc1xyXG4qKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKiBUaGUgQ1NTIHNwZWMgbWFuZGF0ZXMgdGhhdCB0aGUgdHJhbnNsYXRlWC9ZL1ogdHJhbnNmb3JtcyBhcmUgJS1yZWxhdGl2ZSB0byB0aGUgZWxlbWVudCBpdHNlbGYgLS0gbm90IGl0cyBwYXJlbnQuXHJcblZlbG9jaXR5LCBob3dldmVyLCBkb2Vzbid0IG1ha2UgdGhpcyBkaXN0aW5jdGlvbi4gVGh1cywgY29udmVydGluZyB0byBvciBmcm9tIHRoZSAlIHVuaXQgd2l0aCB0aGVzZSBzdWJwcm9wZXJ0aWVzXHJcbndpbGwgcHJvZHVjZSBhbiBpbmFjY3VyYXRlIGNvbnZlcnNpb24gdmFsdWUuIFRoZSBzYW1lIGlzc3VlIGV4aXN0cyB3aXRoIHRoZSBjeC9jeSBhdHRyaWJ1dGVzIG9mIFNWRyBjaXJjbGVzIGFuZCBlbGxpcHNlcy4gKi9cclxuIl19
